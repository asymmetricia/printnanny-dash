import{g as Ho,h as bl,i as Zh,r as Ls,j as ns,d as tl,P as cc,k as Rd,l as hf,m as Hh,V as Fd,n as Xh,F as df,p as Mu,q as Bd,s as Nd,v as qh,x as wu,y as jd,z as Ud,A as Vd,B as Gs,C as $o,D as Dl,E as Hd,o as Vo,c as ks,a as uo,G as mf,b as el,w as lc,u as Ji,f as qd,H as Dc,t as ku,T as Gd,I as Jh,J as xu,K as Oc,_ as Kh,L as Tu,M as qi,N as Gh}from"./index.60607fe0.js";function Yd(jr){throw new Error("Unexpected object: "+jr)}var hs=(jr=>(jr[jr.First=0]="First",jr[jr.Previous=1]="Previous",jr[jr.Next=2]="Next",jr[jr.Last=3]="Last",jr[jr.Specific=4]="Specific",jr[jr.Nothing=5]="Nothing",jr))(hs||{});function Wd(jr,Vn){let g=Vn.resolveItems();if(g.length<=0)return null;let Q=Vn.resolveActiveIndex(),X=Q!=null?Q:-1,m=(()=>{switch(jr.focus){case 0:return g.findIndex(v=>!Vn.resolveDisabled(v));case 1:{let v=g.slice().reverse().findIndex((k,x,e)=>X!==-1&&e.length-x-1>=X?!1:!Vn.resolveDisabled(k));return v===-1?v:g.length-1-v}case 2:return g.findIndex((v,k)=>k<=X?!1:!Vn.resolveDisabled(v));case 3:{let v=g.slice().reverse().findIndex(k=>!Vn.resolveDisabled(k));return v===-1?v:g.length-1-v}case 4:return g.findIndex(v=>Vn.resolveId(v)===jr.id);case 5:return null;default:Yd(jr)}})();return m===-1?Q:m}const $h=typeof window>"u"||typeof document>"u";function Zd(jr){if($h)return null;if(jr instanceof Node)return jr.ownerDocument;if(jr!=null&&jr.hasOwnProperty("value")){let Vn=Ho(jr);if(Vn)return Vn.ownerDocument}return document}let Yh=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(jr=>`${jr}:not([tabindex='-1'])`).join(",");var Xd=(jr=>(jr[jr.First=1]="First",jr[jr.Previous=2]="Previous",jr[jr.Next=4]="Next",jr[jr.Last=8]="Last",jr[jr.WrapAround=16]="WrapAround",jr[jr.NoScroll=32]="NoScroll",jr))(Xd||{}),Jd=(jr=>(jr[jr.Error=0]="Error",jr[jr.Overflow=1]="Overflow",jr[jr.Success=2]="Success",jr[jr.Underflow=3]="Underflow",jr))(Jd||{}),Kd=(jr=>(jr[jr.Previous=-1]="Previous",jr[jr.Next=1]="Next",jr))(Kd||{}),gf=(jr=>(jr[jr.Strict=0]="Strict",jr[jr.Loose=1]="Loose",jr))(gf||{});function Qh(jr,Vn=0){var g;return jr===((g=Zd(jr))==null?void 0:g.body)?!1:bl(Vn,{[0](){return jr.matches(Yh)},[1](){let Q=jr;for(;Q!==null;){if(Q.matches(Yh))return!0;Q=Q.parentElement}return!1}})}function $d(jr,Vn=g=>g){return jr.slice().sort((g,Q)=>{let X=Vn(g),m=Vn(Q);if(X===null||m===null)return 0;let v=X.compareDocumentPosition(m);return v&Node.DOCUMENT_POSITION_FOLLOWING?-1:v&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function ff(jr,Vn,g){$h||Zh(Q=>{document.addEventListener(jr,Vn,g),Q(()=>document.removeEventListener(jr,Vn,g))})}function Qd(jr,Vn,g=ns(()=>!0)){function Q(m,v){if(!g.value||m.defaultPrevented)return;let k=v(m);if(k===null||!k.ownerDocument.documentElement.contains(k))return;let x=function e(t){return typeof t=="function"?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(jr);for(let e of x){if(e===null)continue;let t=e instanceof HTMLElement?e:Ho(e);if(t!=null&&t.contains(k))return}return!Qh(k,gf.Loose)&&k.tabIndex!==-1&&m.preventDefault(),Vn(m,k)}let X=Ls(null);ff("mousedown",m=>{var v,k;g.value&&(X.value=((k=(v=m.composedPath)==null?void 0:v.call(m))==null?void 0:k[0])||m.target)},!0),ff("click",m=>{!X.value||(Q(m,()=>X.value),X.value=null)},!0),ff("blur",m=>Q(m,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}var ep=(jr=>(jr[jr.None=1]="None",jr[jr.Focusable=2]="Focusable",jr[jr.Hidden=4]="Hidden",jr))(ep||{});let e0=tl({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(jr,{slots:Vn,attrs:g}){return()=>{let{features:Q,...X}=jr,m={"aria-hidden":(Q&2)===2?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(Q&4)===4&&(Q&2)!==2&&{display:"none"}}};return cc({ourProps:m,theirProps:X,slot:{},attrs:g,slots:Vn,name:"Hidden"})}}});function tp(jr={},Vn=null,g=[]){for(let[Q,X]of Object.entries(jr))np(g,rp(Vn,Q),X);return g}function rp(jr,Vn){return jr?jr+"["+Vn+"]":Vn}function np(jr,Vn,g){if(Array.isArray(g))for(let[Q,X]of g.entries())np(jr,rp(Vn,Q.toString()),X);else g instanceof Date?jr.push([Vn,g.toISOString()]):typeof g=="boolean"?jr.push([Vn,g?"1":"0"]):typeof g=="string"?jr.push([Vn,g]):typeof g=="number"?jr.push([Vn,`${g}`]):g==null?jr.push([Vn,""]):tp(g,Vn,jr)}function t0(jr,Vn,g){let Q=Ls(g==null?void 0:g.value),X=ns(()=>jr.value!==void 0);return[ns(()=>X.value?jr.value:Q.value),function(m){return X.value||(Q.value=m),Vn==null?void 0:Vn(m)}]}function r0(jr,Vn){return jr===Vn}var n0=(jr=>(jr[jr.Open=0]="Open",jr[jr.Closed=1]="Closed",jr))(n0||{}),a0=(jr=>(jr[jr.Single=0]="Single",jr[jr.Multi=1]="Multi",jr))(a0||{}),i0=(jr=>(jr[jr.Pointer=0]="Pointer",jr[jr.Other=1]="Other",jr))(i0||{});function o0(jr){requestAnimationFrame(()=>requestAnimationFrame(jr))}let ap=Symbol("ListboxContext");function zc(jr){let Vn=Vd(ap,null);if(Vn===null){let g=new Error(`<${jr} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(g,zc),g}return Vn}let s0=tl({name:"Listbox",emits:{"update:modelValue":jr=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>r0},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(jr,{slots:Vn,attrs:g,emit:Q}){let X=Ls(1),m=Ls(null),v=Ls(null),k=Ls(null),x=Ls([]),e=Ls(""),t=Ls(null),r=Ls(1);function l(h=s=>s){let s=t.value!==null?x.value[t.value]:null,a=$d(h(x.value.slice()),c=>Ho(c.dataRef.domRef)),p=s?a.indexOf(s):null;return p===-1&&(p=null),{options:a,activeOptionIndex:p}}let n=ns(()=>jr.multiple?1:0),[d,u]=t0(ns(()=>jr.modelValue),h=>Q("update:modelValue",h),ns(()=>jr.defaultValue)),o={listboxState:X,value:d,mode:n,compare(h,s){if(typeof jr.by=="string"){let a=jr.by;return(h==null?void 0:h[a])===(s==null?void 0:s[a])}return jr.by(h,s)},orientation:ns(()=>jr.horizontal?"horizontal":"vertical"),labelRef:m,buttonRef:v,optionsRef:k,disabled:ns(()=>jr.disabled),options:x,searchQuery:e,activeOptionIndex:t,activationTrigger:r,closeListbox(){jr.disabled||X.value!==1&&(X.value=1,t.value=null)},openListbox(){jr.disabled||X.value!==0&&(X.value=0)},goToOption(h,s,a){if(jr.disabled||X.value===1)return;let p=l(),c=Wd(h===hs.Specific?{focus:hs.Specific,id:s}:{focus:h},{resolveItems:()=>p.options,resolveActiveIndex:()=>p.activeOptionIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.disabled});e.value="",t.value=c,r.value=a!=null?a:1,x.value=p.options},search(h){if(jr.disabled||X.value===1)return;let s=e.value!==""?0:1;e.value+=h.toLowerCase();let a=(t.value!==null?x.value.slice(t.value+s).concat(x.value.slice(0,t.value+s)):x.value).find(c=>c.dataRef.textValue.startsWith(e.value)&&!c.dataRef.disabled),p=a?x.value.indexOf(a):-1;p===-1||p===t.value||(t.value=p,r.value=1)},clearSearch(){jr.disabled||X.value!==1&&e.value!==""&&(e.value="")},registerOption(h,s){let a=l(p=>[...p,{id:h,dataRef:s}]);x.value=a.options,t.value=a.activeOptionIndex},unregisterOption(h){let s=l(a=>{let p=a.findIndex(c=>c.id===h);return p!==-1&&a.splice(p,1),a});x.value=s.options,t.value=s.activeOptionIndex,r.value=1},select(h){jr.disabled||u(bl(n.value,{[0]:()=>h,[1]:()=>{let s=Gs(o.value.value).slice(),a=Gs(h),p=s.findIndex(c=>o.compare(a,Gs(c)));return p===-1?s.push(a):s.splice(p,1),s}}))}};return Qd([v,k],(h,s)=>{var a;o.closeListbox(),Qh(s,gf.Loose)||(h.preventDefault(),(a=Ho(v))==null||a.focus())},ns(()=>X.value===0)),Hd(ap,o),Rd(ns(()=>bl(X.value,{[0]:hf.Open,[1]:hf.Closed}))),()=>{let{name:h,modelValue:s,disabled:a,...p}=jr,c={open:X.value===0,disabled:a,value:d.value};return Hh(df,[...h!=null&&d.value!=null?tp({[h]:d.value}).map(([i,y])=>Hh(e0,Fd({features:ep.Hidden,key:i,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:i,value:y}))):[],cc({ourProps:{},theirProps:{...g,...Xh(p,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:c,slots:Vn,attrs:g,name:"Listbox"})])}}}),l0=tl({name:"ListboxLabel",props:{as:{type:[Object,String],default:"label"}},setup(jr,{attrs:Vn,slots:g}){let Q=zc("ListboxLabel"),X=`headlessui-listbox-label-${Mu()}`;function m(){var v;(v=Ho(Q.buttonRef))==null||v.focus({preventScroll:!0})}return()=>{let v={open:Q.listboxState.value===0,disabled:Q.disabled.value},k={id:X,ref:Q.labelRef,onClick:m};return cc({ourProps:k,theirProps:jr,slot:v,attrs:Vn,slots:g,name:"ListboxLabel"})}}}),c0=tl({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"}},setup(jr,{attrs:Vn,slots:g,expose:Q}){let X=zc("ListboxButton"),m=`headlessui-listbox-button-${Mu()}`;Q({el:X.buttonRef,$el:X.buttonRef});function v(t){switch(t.key){case $o.Space:case $o.Enter:case $o.ArrowDown:t.preventDefault(),X.openListbox(),Dl(()=>{var r;(r=Ho(X.optionsRef))==null||r.focus({preventScroll:!0}),X.value.value||X.goToOption(hs.First)});break;case $o.ArrowUp:t.preventDefault(),X.openListbox(),Dl(()=>{var r;(r=Ho(X.optionsRef))==null||r.focus({preventScroll:!0}),X.value.value||X.goToOption(hs.Last)});break}}function k(t){switch(t.key){case $o.Space:t.preventDefault();break}}function x(t){X.disabled.value||(X.listboxState.value===0?(X.closeListbox(),Dl(()=>{var r;return(r=Ho(X.buttonRef))==null?void 0:r.focus({preventScroll:!0})})):(t.preventDefault(),X.openListbox(),o0(()=>{var r;return(r=Ho(X.optionsRef))==null?void 0:r.focus({preventScroll:!0})})))}let e=Bd(ns(()=>({as:jr.as,type:Vn.type})),X.buttonRef);return()=>{var t,r;let l={open:X.listboxState.value===0,disabled:X.disabled.value,value:X.value.value},n={ref:X.buttonRef,id:m,type:e.value,"aria-haspopup":!0,"aria-controls":(t=Ho(X.optionsRef))==null?void 0:t.id,"aria-expanded":X.disabled.value?void 0:X.listboxState.value===0,"aria-labelledby":X.labelRef.value?[(r=Ho(X.labelRef))==null?void 0:r.id,m].join(" "):void 0,disabled:X.disabled.value===!0?!0:void 0,onKeydown:v,onKeyup:k,onClick:x};return cc({ourProps:n,theirProps:jr,slot:l,attrs:Vn,slots:g,name:"ListboxButton"})}}}),u0=tl({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(jr,{attrs:Vn,slots:g,expose:Q}){let X=zc("ListboxOptions"),m=`headlessui-listbox-options-${Mu()}`,v=Ls(null);Q({el:X.optionsRef,$el:X.optionsRef});function k(t){switch(v.value&&clearTimeout(v.value),t.key){case $o.Space:if(X.searchQuery.value!=="")return t.preventDefault(),t.stopPropagation(),X.search(t.key);case $o.Enter:if(t.preventDefault(),t.stopPropagation(),X.activeOptionIndex.value!==null){let r=X.options.value[X.activeOptionIndex.value];X.select(r.dataRef.value)}X.mode.value===0&&(X.closeListbox(),Dl(()=>{var r;return(r=Ho(X.buttonRef))==null?void 0:r.focus({preventScroll:!0})}));break;case bl(X.orientation.value,{vertical:$o.ArrowDown,horizontal:$o.ArrowRight}):return t.preventDefault(),t.stopPropagation(),X.goToOption(hs.Next);case bl(X.orientation.value,{vertical:$o.ArrowUp,horizontal:$o.ArrowLeft}):return t.preventDefault(),t.stopPropagation(),X.goToOption(hs.Previous);case $o.Home:case $o.PageUp:return t.preventDefault(),t.stopPropagation(),X.goToOption(hs.First);case $o.End:case $o.PageDown:return t.preventDefault(),t.stopPropagation(),X.goToOption(hs.Last);case $o.Escape:t.preventDefault(),t.stopPropagation(),X.closeListbox(),Dl(()=>{var r;return(r=Ho(X.buttonRef))==null?void 0:r.focus({preventScroll:!0})});break;case $o.Tab:t.preventDefault(),t.stopPropagation();break;default:t.key.length===1&&(X.search(t.key),v.value=setTimeout(()=>X.clearSearch(),350));break}}let x=Nd(),e=ns(()=>x!==null?x.value===hf.Open:X.listboxState.value===0);return()=>{var t,r,l,n;let d={open:X.listboxState.value===0},u={"aria-activedescendant":X.activeOptionIndex.value===null||(t=X.options.value[X.activeOptionIndex.value])==null?void 0:t.id,"aria-multiselectable":X.mode.value===1?!0:void 0,"aria-labelledby":(n=(r=Ho(X.labelRef))==null?void 0:r.id)!=null?n:(l=Ho(X.buttonRef))==null?void 0:l.id,"aria-orientation":X.orientation.value,id:m,onKeydown:k,role:"listbox",tabIndex:0,ref:X.optionsRef};return cc({ourProps:u,theirProps:jr,slot:d,attrs:Vn,slots:g,features:qh.RenderStrategy|qh.Static,visible:e.value,name:"ListboxOptions"})}}}),f0=tl({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(jr,{slots:Vn,attrs:g,expose:Q}){let X=zc("ListboxOption"),m=`headlessui-listbox-option-${Mu()}`,v=Ls(null);Q({el:v,$el:v});let k=ns(()=>X.activeOptionIndex.value!==null?X.options.value[X.activeOptionIndex.value].id===m:!1),x=ns(()=>bl(X.mode.value,{[0]:()=>X.compare(Gs(X.value.value),Gs(jr.value)),[1]:()=>Gs(X.value.value).some(u=>X.compare(Gs(u),Gs(jr.value)))})),e=ns(()=>bl(X.mode.value,{[1]:()=>{var u;let o=Gs(X.value.value);return((u=X.options.value.find(h=>o.some(s=>X.compare(Gs(s),Gs(h.dataRef.value)))))==null?void 0:u.id)===m},[0]:()=>x.value})),t=ns(()=>({disabled:jr.disabled,value:jr.value,textValue:"",domRef:v}));wu(()=>{var u,o;let h=(o=(u=Ho(v))==null?void 0:u.textContent)==null?void 0:o.toLowerCase().trim();h!==void 0&&(t.value.textValue=h)}),wu(()=>X.registerOption(m,t)),jd(()=>X.unregisterOption(m)),wu(()=>{Ud([X.listboxState,x],()=>{X.listboxState.value===0&&(!x.value||bl(X.mode.value,{[1]:()=>{e.value&&X.goToOption(hs.Specific,m)},[0]:()=>{X.goToOption(hs.Specific,m)}}))},{immediate:!0})}),Zh(()=>{X.listboxState.value===0&&(!k.value||X.activationTrigger.value!==0&&Dl(()=>{var u,o;return(o=(u=Ho(v))==null?void 0:u.scrollIntoView)==null?void 0:o.call(u,{block:"nearest"})}))});function r(u){if(jr.disabled)return u.preventDefault();X.select(jr.value),X.mode.value===0&&(X.closeListbox(),Dl(()=>{var o;return(o=Ho(X.buttonRef))==null?void 0:o.focus({preventScroll:!0})}))}function l(){if(jr.disabled)return X.goToOption(hs.Nothing);X.goToOption(hs.Specific,m)}function n(){jr.disabled||k.value||X.goToOption(hs.Specific,m,0)}function d(){jr.disabled||!k.value||X.goToOption(hs.Nothing)}return()=>{let{disabled:u}=jr,o={active:k.value,selected:x.value,disabled:u},h={id:m,ref:v,role:"option",tabIndex:u===!0?void 0:-1,"aria-disabled":u===!0?!0:void 0,"aria-selected":x.value,disabled:void 0,onClick:r,onFocus:l,onPointermove:n,onMousemove:n,onPointerleave:d,onMouseleave:d};return cc({ourProps:h,theirProps:Xh(jr,["value","disabled"]),slot:o,attrs:g,slots:Vn,name:"ListboxOption"})}}});function h0(jr,Vn){return Vo(),ks("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[uo("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})])}function p0(jr,Vn){return Vo(),ks("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[uo("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 15L12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9"})])}const d0="/assets/video-paused.622e7f3b.svg",m0={class:"overflow-hidden rounded-lg bg-white px-4 py-5 shadow sm:p-6 col-span-2"},g0=uo("h3",{class:"text-lg font-medium leading-6 text-gray-900 text-center"}," Video Stream ",-1),v0=uo("video",{id:"janus-video",muted:"",class:"aspect-video h-80 mx-auto my-4 border-1 border-dashed border-gray-200 bg-gray-200","aria-placeholder":" Video stream is loading",poster:d0},null,-1),y0={class:"grid grid-cols-2 gap-4"},x0={class:"relative mt-1"},b0={key:1,class:"block truncate"},_0={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},w0={class:"flex"},T0=["disabled"],k0=["disabled"],M0=tl({__name:"VideoElement",setup(jr){const Vn=mf();return(g,Q)=>(Vo(),ks("div",m0,[g0,v0,uo("div",y0,[el(Ji(s0),{as:"div",modelValue:Ji(Vn).selectedStream,"onUpdate:modelValue":Q[0]||(Q[0]=X=>Ji(Vn).selectedStream=X)},{default:lc(()=>[el(Ji(l0),{class:"block text-sm font-medium text-gray-700 text-center"},{default:lc(()=>[qd("Select a video stream:")]),_:1}),uo("div",x0,[el(Ji(c0),{class:"relative w-full cursor-default rounded-md border border-gray-300 bg-white py-2 pl-3 pr-10 text-left shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 sm:text-sm"},{default:lc(()=>[Ji(Vn).selectedStream?(Vo(),ks("span",b0,ku(Ji(Vn).selectedStream.description),1)):(Vo(),Dc(Kh,{key:0,text:"Loading stream list"})),uo("span",_0,[el(Ji(p0),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})])]),_:1}),el(Gd,{"leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:lc(()=>[el(Ji(u0),{class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:lc(()=>[(Vo(!0),ks(df,null,Jh(Ji(Vn).streamList,X=>(Vo(),Dc(Ji(f0),{as:"template",key:X.id,value:X},{default:lc(({active:m,selected:v})=>[uo("li",{class:Oc([m?"text-white bg-indigo-600":"text-gray-900","relative cursor-default select-none py-2 pl-3 pr-9"])},[uo("span",{class:Oc([v?"font-semibold":"font-normal","block truncate"])},ku(X.description),3),v?(Vo(),ks("span",{key:0,class:Oc([m?"text-white":"text-indigo-600","absolute inset-y-0 right-0 flex items-center pr-4"])},[el(Ji(h0),{class:"h-5 w-5","aria-hidden":"true"})],2)):Tu("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"]),uo("div",w0,[uo("button",{onClick:Q[1]||(Q[1]=X=>Ji(Vn).startStream()),type:"button",disabled:Ji(Vn).status!==Ji(xu).ConnectionReady,class:Oc([[Ji(Vn).status==Ji(xu).ConnectionReady?"hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg ":"focus:ring-0 transition duration-150 ease-in-out pointer-events-none opacity-60","block truncate"],"inline-block h-10 px-6 py-2.5 mt-6 bg-blue-600 text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out"])}," Start ",10,T0),uo("button",{onClick:Q[2]||(Q[2]=X=>Ji(Vn).reset()),type:"button",disabled:Ji(Vn).status!==Ji(xu).ConnectionStreamReady,class:Oc([[Ji(Vn).status==Ji(xu).ConnectionStreamReady?"hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg ":"focus:ring-0 transition duration-150 ease-in-out pointer-events-none opacity-60","block truncate"],"inline-block h-10 px-6 py-2.5 mt-6 ml-4 bg-blue-600 text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-700 transition duration-150 ease-in-out"])}," Reset ",10,k0)])])]))}});function bu(jr){throw new Error('Could not dynamically require "'+jr+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pf={exports:{}};(function(jr,Vn){(function(g){jr.exports=g()})(function(){return function g(Q,X,m){function v(e,t){if(!X[e]){if(!Q[e]){var r=typeof bu=="function"&&bu;if(!t&&r)return r(e,!0);if(k)return k(e,!0);var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}var n=X[e]={exports:{}};Q[e][0].call(n.exports,function(d){return v(Q[e][1][d]||d)},n,n.exports,g,Q,X,m)}return X[e].exports}for(var k=typeof bu=="function"&&bu,x=0;x<m.length;x++)v(m[x]);return v}({1:[function(g,Q,X){var m=g("../src/lib"),v={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var k in v){var x=k.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");m.addStyleRule(x,v[k])}},{"../src/lib":515}],2:[function(g,Q,X){Q.exports=g("../src/transforms/aggregate")},{"../src/transforms/aggregate":1127}],3:[function(g,Q,X){Q.exports=g("../src/traces/bar")},{"../src/traces/bar":665}],4:[function(g,Q,X){Q.exports=g("../src/traces/barpolar")},{"../src/traces/barpolar":678}],5:[function(g,Q,X){Q.exports=g("../src/traces/box")},{"../src/traces/box":688}],6:[function(g,Q,X){Q.exports=g("../src/components/calendars")},{"../src/components/calendars":365}],7:[function(g,Q,X){Q.exports=g("../src/traces/candlestick")},{"../src/traces/candlestick":697}],8:[function(g,Q,X){Q.exports=g("../src/traces/carpet")},{"../src/traces/carpet":716}],9:[function(g,Q,X){Q.exports=g("../src/traces/choropleth")},{"../src/traces/choropleth":730}],10:[function(g,Q,X){Q.exports=g("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":737}],11:[function(g,Q,X){Q.exports=g("../src/traces/cone")},{"../src/traces/cone":743}],12:[function(g,Q,X){Q.exports=g("../src/traces/contour")},{"../src/traces/contour":758}],13:[function(g,Q,X){Q.exports=g("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":769}],14:[function(g,Q,X){Q.exports=g("../src/core")},{"../src/core":493}],15:[function(g,Q,X){Q.exports=g("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":777}],16:[function(g,Q,X){Q.exports=g("../src/transforms/filter")},{"../src/transforms/filter":1128}],17:[function(g,Q,X){Q.exports=g("../src/traces/funnel")},{"../src/traces/funnel":787}],18:[function(g,Q,X){Q.exports=g("../src/traces/funnelarea")},{"../src/traces/funnelarea":796}],19:[function(g,Q,X){Q.exports=g("../src/transforms/groupby")},{"../src/transforms/groupby":1129}],20:[function(g,Q,X){Q.exports=g("../src/traces/heatmap")},{"../src/traces/heatmap":809}],21:[function(g,Q,X){Q.exports=g("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":820}],22:[function(g,Q,X){Q.exports=g("../src/traces/histogram")},{"../src/traces/histogram":832}],23:[function(g,Q,X){Q.exports=g("../src/traces/histogram2d")},{"../src/traces/histogram2d":838}],24:[function(g,Q,X){Q.exports=g("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":842}],25:[function(g,Q,X){Q.exports=g("../src/traces/icicle")},{"../src/traces/icicle":848}],26:[function(g,Q,X){Q.exports=g("../src/traces/image")},{"../src/traces/image":861}],27:[function(g,Q,X){var m=g("./core");m.register([g("./bar"),g("./box"),g("./heatmap"),g("./histogram"),g("./histogram2d"),g("./histogram2dcontour"),g("./contour"),g("./scatterternary"),g("./violin"),g("./funnel"),g("./waterfall"),g("./image"),g("./pie"),g("./sunburst"),g("./treemap"),g("./icicle"),g("./funnelarea"),g("./scatter3d"),g("./surface"),g("./isosurface"),g("./volume"),g("./mesh3d"),g("./cone"),g("./streamtube"),g("./scattergeo"),g("./choropleth"),g("./scattergl"),g("./splom"),g("./pointcloud"),g("./heatmapgl"),g("./parcoords"),g("./parcats"),g("./scattermapbox"),g("./choroplethmapbox"),g("./densitymapbox"),g("./sankey"),g("./indicator"),g("./table"),g("./carpet"),g("./scattercarpet"),g("./contourcarpet"),g("./ohlc"),g("./candlestick"),g("./scatterpolar"),g("./scatterpolargl"),g("./barpolar"),g("./scattersmith"),g("./aggregate"),g("./filter"),g("./groupby"),g("./sort"),g("./calendars")]),Q.exports=m},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(g,Q,X){Q.exports=g("../src/traces/indicator")},{"../src/traces/indicator":869}],29:[function(g,Q,X){Q.exports=g("../src/traces/isosurface")},{"../src/traces/isosurface":875}],30:[function(g,Q,X){Q.exports=g("../src/traces/mesh3d")},{"../src/traces/mesh3d":880}],31:[function(g,Q,X){Q.exports=g("../src/traces/ohlc")},{"../src/traces/ohlc":885}],32:[function(g,Q,X){Q.exports=g("../src/traces/parcats")},{"../src/traces/parcats":894}],33:[function(g,Q,X){Q.exports=g("../src/traces/parcoords")},{"../src/traces/parcoords":905}],34:[function(g,Q,X){Q.exports=g("../src/traces/pie")},{"../src/traces/pie":916}],35:[function(g,Q,X){Q.exports=g("../src/traces/pointcloud")},{"../src/traces/pointcloud":925}],36:[function(g,Q,X){Q.exports=g("../src/traces/sankey")},{"../src/traces/sankey":931}],37:[function(g,Q,X){Q.exports=g("../src/traces/scatter3d")},{"../src/traces/scatter3d":969}],38:[function(g,Q,X){Q.exports=g("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":976}],39:[function(g,Q,X){Q.exports=g("../src/traces/scattergeo")},{"../src/traces/scattergeo":984}],40:[function(g,Q,X){Q.exports=g("../src/traces/scattergl")},{"../src/traces/scattergl":998}],41:[function(g,Q,X){Q.exports=g("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":1008}],42:[function(g,Q,X){Q.exports=g("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1016}],43:[function(g,Q,X){Q.exports=g("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1024}],44:[function(g,Q,X){Q.exports=g("../src/traces/scattersmith")},{"../src/traces/scattersmith":1031}],45:[function(g,Q,X){Q.exports=g("../src/traces/scatterternary")},{"../src/traces/scatterternary":1039}],46:[function(g,Q,X){Q.exports=g("../src/transforms/sort")},{"../src/transforms/sort":1131}],47:[function(g,Q,X){Q.exports=g("../src/traces/splom")},{"../src/traces/splom":1049}],48:[function(g,Q,X){Q.exports=g("../src/traces/streamtube")},{"../src/traces/streamtube":1057}],49:[function(g,Q,X){Q.exports=g("../src/traces/sunburst")},{"../src/traces/sunburst":1065}],50:[function(g,Q,X){Q.exports=g("../src/traces/surface")},{"../src/traces/surface":1074}],51:[function(g,Q,X){Q.exports=g("../src/traces/table")},{"../src/traces/table":1082}],52:[function(g,Q,X){Q.exports=g("../src/traces/treemap")},{"../src/traces/treemap":1093}],53:[function(g,Q,X){Q.exports=g("../src/traces/violin")},{"../src/traces/violin":1106}],54:[function(g,Q,X){Q.exports=g("../src/traces/volume")},{"../src/traces/volume":1114}],55:[function(g,Q,X){Q.exports=g("../src/traces/waterfall")},{"../src/traces/waterfall":1122}],56:[function(g,Q,X){(function(m,v){typeof X=="object"&&Q!==void 0?v(X,g("d3-array"),g("d3-collection"),g("d3-shape"),g("elementary-circuits-directed-graph")):v(m.d3=m.d3||{},m.d3,m.d3,m.d3,null)})(this,function(m,v,k,x,e){function t(te){return te.target.depth}function r(te,ie){return te.sourceLinks.length?te.depth:ie-1}function l(te){return function(){return te}}e=e&&e.hasOwnProperty("default")?e.default:e;var n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te};function d(te,ie){return o(te.source,ie.source)||te.index-ie.index}function u(te,ie){return o(te.target,ie.target)||te.index-ie.index}function o(te,ie){return te.partOfCycle===ie.partOfCycle?te.y0-ie.y0:te.circularLinkType==="top"||ie.circularLinkType==="bottom"?-1:1}function h(te){return te.value}function s(te){return(te.y0+te.y1)/2}function a(te){return s(te.source)}function p(te){return s(te.target)}function c(te){return te.index}function i(te){return te.nodes}function y(te){return te.links}function f(te,ie){var le=te.get(ie);if(!le)throw new Error("missing: "+ie);return le}function w(te,ie){return ie(te)}function b(te,ie,le){var se=0;if(le===null){for(var ve=[],fe=0;fe<te.links.length;fe++){var ye=te.links[fe],Ae=ye.source.index,pe=ye.target.index;ve[Ae]||(ve[Ae]=[]),ve[pe]||(ve[pe]=[]),ve[Ae].indexOf(pe)===-1&&ve[Ae].push(pe)}var ge=e(ve);ge.sort(function(de,Te){return de.length-Te.length});var we={};for(fe=0;fe<ge.length;fe++){var oe=ge[fe].slice(-2);we[oe[0]]||(we[oe[0]]={}),we[oe[0]][oe[1]]=!0}te.links.forEach(function(de){var Te=de.target.index,Ee=de.source.index;Te===Ee||we[Ee]&&we[Ee][Te]?(de.circular=!0,de.circularLinkID=se,se+=1):de.circular=!1})}else te.links.forEach(function(de){de.source[le]<de.target[le]?de.circular=!1:(de.circular=!0,de.circularLinkID=se,se+=1)})}function _(te,ie){var le=0,se=0;te.links.forEach(function(ve){ve.circular&&(ve.source.circularLinkType||ve.target.circularLinkType?ve.circularLinkType=ve.source.circularLinkType?ve.source.circularLinkType:ve.target.circularLinkType:ve.circularLinkType=le<se?"top":"bottom",ve.circularLinkType=="top"?le+=1:se+=1,te.nodes.forEach(function(fe){w(fe,ie)!=w(ve.source,ie)&&w(fe,ie)!=w(ve.target,ie)||(fe.circularLinkType=ve.circularLinkType)}))}),te.links.forEach(function(ve){ve.circular&&(ve.source.circularLinkType==ve.target.circularLinkType&&(ve.circularLinkType=ve.source.circularLinkType),$(ve,ie)&&(ve.circularLinkType=ve.source.circularLinkType))})}function T(te){var ie=Math.abs(te.y1-te.y0),le=Math.abs(te.target.x0-te.source.x1);return Math.atan(le/ie)}function L(te,ie){var le=0;te.sourceLinks.forEach(function(ve){le=ve.circular&&!$(ve,ie)?le+1:le});var se=0;return te.targetLinks.forEach(function(ve){se=ve.circular&&!$(ve,ie)?se+1:se}),le+se}function A(te){var ie=te.source.sourceLinks,le=0;ie.forEach(function(fe){le=fe.circular?le+1:le});var se=te.target.targetLinks,ve=0;return se.forEach(function(fe){ve=fe.circular?ve+1:ve}),!(le>1||ve>1)}function I(te,ie,le){return te.sort(S),te.forEach(function(se,ve){var fe,ye,Ae=0;if($(se,le)&&A(se))se.circularPathData.verticalBuffer=Ae+se.width/2;else{for(var pe=0;pe<ve;pe++)if(fe=te[ve],ye=te[pe],!(fe.source.column<ye.target.column||fe.target.column>ye.source.column)){var ge=te[pe].circularPathData.verticalBuffer+te[pe].width/2+ie;Ae=ge>Ae?ge:Ae}se.circularPathData.verticalBuffer=Ae+se.width/2}}),te}function P(te,ie,le,se){var ve=v.min(te.links,function(fe){return fe.source.y0});te.links.forEach(function(fe){fe.circular&&(fe.circularPathData={})}),I(te.links.filter(function(fe){return fe.circularLinkType=="top"}),ie,se),I(te.links.filter(function(fe){return fe.circularLinkType=="bottom"}),ie,se),te.links.forEach(function(fe){if(fe.circular){if(fe.circularPathData.arcRadius=fe.width+10,fe.circularPathData.leftNodeBuffer=5,fe.circularPathData.rightNodeBuffer=5,fe.circularPathData.sourceWidth=fe.source.x1-fe.source.x0,fe.circularPathData.sourceX=fe.source.x0+fe.circularPathData.sourceWidth,fe.circularPathData.targetX=fe.target.x0,fe.circularPathData.sourceY=fe.y0,fe.circularPathData.targetY=fe.y1,$(fe,se)&&A(fe))fe.circularPathData.leftSmallArcRadius=10+fe.width/2,fe.circularPathData.leftLargeArcRadius=10+fe.width/2,fe.circularPathData.rightSmallArcRadius=10+fe.width/2,fe.circularPathData.rightLargeArcRadius=10+fe.width/2,fe.circularLinkType=="bottom"?(fe.circularPathData.verticalFullExtent=fe.source.y1+25+fe.circularPathData.verticalBuffer,fe.circularPathData.verticalLeftInnerExtent=fe.circularPathData.verticalFullExtent-fe.circularPathData.leftLargeArcRadius,fe.circularPathData.verticalRightInnerExtent=fe.circularPathData.verticalFullExtent-fe.circularPathData.rightLargeArcRadius):(fe.circularPathData.verticalFullExtent=fe.source.y0-25-fe.circularPathData.verticalBuffer,fe.circularPathData.verticalLeftInnerExtent=fe.circularPathData.verticalFullExtent+fe.circularPathData.leftLargeArcRadius,fe.circularPathData.verticalRightInnerExtent=fe.circularPathData.verticalFullExtent+fe.circularPathData.rightLargeArcRadius);else{var ye=fe.source.column,Ae=fe.circularLinkType,pe=te.links.filter(function(oe){return oe.source.column==ye&&oe.circularLinkType==Ae});fe.circularLinkType=="bottom"?pe.sort(z):pe.sort(E);var ge=0;pe.forEach(function(oe,de){oe.circularLinkID==fe.circularLinkID&&(fe.circularPathData.leftSmallArcRadius=10+fe.width/2+ge,fe.circularPathData.leftLargeArcRadius=10+fe.width/2+de*ie+ge),ge+=oe.width}),ye=fe.target.column,pe=te.links.filter(function(oe){return oe.target.column==ye&&oe.circularLinkType==Ae}),fe.circularLinkType=="bottom"?pe.sort(U):pe.sort(D),ge=0,pe.forEach(function(oe,de){oe.circularLinkID==fe.circularLinkID&&(fe.circularPathData.rightSmallArcRadius=10+fe.width/2+ge,fe.circularPathData.rightLargeArcRadius=10+fe.width/2+de*ie+ge),ge+=oe.width}),fe.circularLinkType=="bottom"?(fe.circularPathData.verticalFullExtent=Math.max(le,fe.source.y1,fe.target.y1)+25+fe.circularPathData.verticalBuffer,fe.circularPathData.verticalLeftInnerExtent=fe.circularPathData.verticalFullExtent-fe.circularPathData.leftLargeArcRadius,fe.circularPathData.verticalRightInnerExtent=fe.circularPathData.verticalFullExtent-fe.circularPathData.rightLargeArcRadius):(fe.circularPathData.verticalFullExtent=ve-25-fe.circularPathData.verticalBuffer,fe.circularPathData.verticalLeftInnerExtent=fe.circularPathData.verticalFullExtent+fe.circularPathData.leftLargeArcRadius,fe.circularPathData.verticalRightInnerExtent=fe.circularPathData.verticalFullExtent+fe.circularPathData.rightLargeArcRadius)}fe.circularPathData.leftInnerExtent=fe.circularPathData.sourceX+fe.circularPathData.leftNodeBuffer,fe.circularPathData.rightInnerExtent=fe.circularPathData.targetX-fe.circularPathData.rightNodeBuffer,fe.circularPathData.leftFullExtent=fe.circularPathData.sourceX+fe.circularPathData.leftLargeArcRadius+fe.circularPathData.leftNodeBuffer,fe.circularPathData.rightFullExtent=fe.circularPathData.targetX-fe.circularPathData.rightLargeArcRadius-fe.circularPathData.rightNodeBuffer}if(fe.circular)fe.path=function(oe){var de="";return de=oe.circularLinkType=="top"?"M"+oe.circularPathData.sourceX+" "+oe.circularPathData.sourceY+" L"+oe.circularPathData.leftInnerExtent+" "+oe.circularPathData.sourceY+" A"+oe.circularPathData.leftLargeArcRadius+" "+oe.circularPathData.leftSmallArcRadius+" 0 0 0 "+oe.circularPathData.leftFullExtent+" "+(oe.circularPathData.sourceY-oe.circularPathData.leftSmallArcRadius)+" L"+oe.circularPathData.leftFullExtent+" "+oe.circularPathData.verticalLeftInnerExtent+" A"+oe.circularPathData.leftLargeArcRadius+" "+oe.circularPathData.leftLargeArcRadius+" 0 0 0 "+oe.circularPathData.leftInnerExtent+" "+oe.circularPathData.verticalFullExtent+" L"+oe.circularPathData.rightInnerExtent+" "+oe.circularPathData.verticalFullExtent+" A"+oe.circularPathData.rightLargeArcRadius+" "+oe.circularPathData.rightLargeArcRadius+" 0 0 0 "+oe.circularPathData.rightFullExtent+" "+oe.circularPathData.verticalRightInnerExtent+" L"+oe.circularPathData.rightFullExtent+" "+(oe.circularPathData.targetY-oe.circularPathData.rightSmallArcRadius)+" A"+oe.circularPathData.rightLargeArcRadius+" "+oe.circularPathData.rightSmallArcRadius+" 0 0 0 "+oe.circularPathData.rightInnerExtent+" "+oe.circularPathData.targetY+" L"+oe.circularPathData.targetX+" "+oe.circularPathData.targetY:"M"+oe.circularPathData.sourceX+" "+oe.circularPathData.sourceY+" L"+oe.circularPathData.leftInnerExtent+" "+oe.circularPathData.sourceY+" A"+oe.circularPathData.leftLargeArcRadius+" "+oe.circularPathData.leftSmallArcRadius+" 0 0 1 "+oe.circularPathData.leftFullExtent+" "+(oe.circularPathData.sourceY+oe.circularPathData.leftSmallArcRadius)+" L"+oe.circularPathData.leftFullExtent+" "+oe.circularPathData.verticalLeftInnerExtent+" A"+oe.circularPathData.leftLargeArcRadius+" "+oe.circularPathData.leftLargeArcRadius+" 0 0 1 "+oe.circularPathData.leftInnerExtent+" "+oe.circularPathData.verticalFullExtent+" L"+oe.circularPathData.rightInnerExtent+" "+oe.circularPathData.verticalFullExtent+" A"+oe.circularPathData.rightLargeArcRadius+" "+oe.circularPathData.rightLargeArcRadius+" 0 0 1 "+oe.circularPathData.rightFullExtent+" "+oe.circularPathData.verticalRightInnerExtent+" L"+oe.circularPathData.rightFullExtent+" "+(oe.circularPathData.targetY+oe.circularPathData.rightSmallArcRadius)+" A"+oe.circularPathData.rightLargeArcRadius+" "+oe.circularPathData.rightSmallArcRadius+" 0 0 1 "+oe.circularPathData.rightInnerExtent+" "+oe.circularPathData.targetY+" L"+oe.circularPathData.targetX+" "+oe.circularPathData.targetY,de}(fe);else{var we=x.linkHorizontal().source(function(oe){return[oe.source.x0+(oe.source.x1-oe.source.x0),oe.y0]}).target(function(oe){return[oe.target.x0,oe.y1]});fe.path=we(fe)}})}function S(te,ie){return H(te)==H(ie)?te.circularLinkType=="bottom"?z(te,ie):E(te,ie):H(ie)-H(te)}function E(te,ie){return te.y0-ie.y0}function z(te,ie){return ie.y0-te.y0}function D(te,ie){return te.y1-ie.y1}function U(te,ie){return ie.y1-te.y1}function H(te){return te.target.column-te.source.column}function Y(te){return te.target.x0-te.source.x1}function J(te,ie){var le=T(te),se=Y(ie)/Math.tan(le);return N(te)=="up"?te.y1+se:te.y1-se}function W(te,ie){var le=T(te),se=Y(ie)/Math.tan(le);return N(te)=="up"?te.y1-se:te.y1+se}function Z(te,ie,le,se){te.links.forEach(function(ve){if(!ve.circular&&ve.target.column-ve.source.column>1){var fe=ve.source.column+1,ye=ve.target.column-1,Ae=1,pe=ye-fe+1;for(Ae=1;fe<=ye;fe++,Ae++)te.nodes.forEach(function(ge){if(ge.column==fe){var we,oe=Ae/(pe+1),de=Math.pow(1-oe,3),Te=3*oe*Math.pow(1-oe,2),Ee=3*Math.pow(oe,2)*(1-oe),Me=Math.pow(oe,3),De=de*ve.y0+Te*ve.y0+Ee*ve.y1+Me*ve.y1,Ie=De-ve.width/2,Oe=De+ve.width/2;Ie>ge.y0&&Ie<ge.y1?(we=ge.y1-Ie+10,we=ge.circularLinkType=="bottom"?we:-we,ge=V(ge,we,ie,le),te.nodes.forEach(function(Ze){w(Ze,se)!=w(ge,se)&&Ze.column==ge.column&&re(ge,Ze)&&V(Ze,we,ie,le)})):(Oe>ge.y0&&Oe<ge.y1||Ie<ge.y0&&Oe>ge.y1)&&(we=Oe-ge.y0+10,ge=V(ge,we,ie,le),te.nodes.forEach(function(Ze){w(Ze,se)!=w(ge,se)&&Ze.column==ge.column&&Ze.y0<ge.y1&&Ze.y1>ge.y1&&V(Ze,we,ie,le)}))}})}})}function re(te,ie){return te.y0>ie.y0&&te.y0<ie.y1||te.y1>ie.y0&&te.y1<ie.y1||te.y0<ie.y0&&te.y1>ie.y1}function V(te,ie,le,se){return te.y0+ie>=le&&te.y1+ie<=se&&(te.y0=te.y0+ie,te.y1=te.y1+ie,te.targetLinks.forEach(function(ve){ve.y1=ve.y1+ie}),te.sourceLinks.forEach(function(ve){ve.y0=ve.y0+ie})),te}function B(te,ie,le,se){te.nodes.forEach(function(ve){se&&ve.y+(ve.y1-ve.y0)>ie&&(ve.y=ve.y-(ve.y+(ve.y1-ve.y0)-ie));var fe=te.links.filter(function(pe){return w(pe.source,le)==w(ve,le)}),ye=fe.length;ye>1&&fe.sort(function(pe,ge){if(!pe.circular&&!ge.circular){if(pe.target.column==ge.target.column||!ee(pe,ge))return pe.y1-ge.y1;if(pe.target.column>ge.target.column){var we=W(ge,pe);return pe.y1-we}if(ge.target.column>pe.target.column)return W(pe,ge)-ge.y1}return pe.circular&&!ge.circular?pe.circularLinkType=="top"?-1:1:ge.circular&&!pe.circular?ge.circularLinkType=="top"?1:-1:pe.circular&&ge.circular?pe.circularLinkType===ge.circularLinkType&&pe.circularLinkType=="top"?pe.target.column===ge.target.column?pe.target.y1-ge.target.y1:ge.target.column-pe.target.column:pe.circularLinkType===ge.circularLinkType&&pe.circularLinkType=="bottom"?pe.target.column===ge.target.column?ge.target.y1-pe.target.y1:pe.target.column-ge.target.column:pe.circularLinkType=="top"?-1:1:void 0});var Ae=ve.y0;fe.forEach(function(pe){pe.y0=Ae+pe.width/2,Ae+=pe.width}),fe.forEach(function(pe,ge){if(pe.circularLinkType=="bottom"){for(var we=ge+1,oe=0;we<ye;we++)oe+=fe[we].width;pe.y0=ve.y1-oe-pe.width/2}})})}function j(te,ie,le){te.nodes.forEach(function(se){var ve=te.links.filter(function(Ae){return w(Ae.target,le)==w(se,le)}),fe=ve.length;fe>1&&ve.sort(function(Ae,pe){if(!Ae.circular&&!pe.circular){if(Ae.source.column==pe.source.column||!ee(Ae,pe))return Ae.y0-pe.y0;if(pe.source.column<Ae.source.column){var ge=J(pe,Ae);return Ae.y0-ge}if(Ae.source.column<pe.source.column)return J(Ae,pe)-pe.y0}return Ae.circular&&!pe.circular?Ae.circularLinkType=="top"?-1:1:pe.circular&&!Ae.circular?pe.circularLinkType=="top"?1:-1:Ae.circular&&pe.circular?Ae.circularLinkType===pe.circularLinkType&&Ae.circularLinkType=="top"?Ae.source.column===pe.source.column?Ae.source.y1-pe.source.y1:Ae.source.column-pe.source.column:Ae.circularLinkType===pe.circularLinkType&&Ae.circularLinkType=="bottom"?Ae.source.column===pe.source.column?Ae.source.y1-pe.source.y1:pe.source.column-Ae.source.column:Ae.circularLinkType=="top"?-1:1:void 0});var ye=se.y0;ve.forEach(function(Ae){Ae.y1=ye+Ae.width/2,ye+=Ae.width}),ve.forEach(function(Ae,pe){if(Ae.circularLinkType=="bottom"){for(var ge=pe+1,we=0;ge<fe;ge++)we+=ve[ge].width;Ae.y1=se.y1-we-Ae.width/2}})})}function ee(te,ie){return N(te)==N(ie)}function N(te){return te.y0-te.y1>0?"up":"down"}function $(te,ie){return w(te.source,ie)==w(te.target,ie)}function K(te,ie,le){var se=te.nodes,ve=te.links,fe=!1,ye=!1;if(ve.forEach(function(ge){ge.circularLinkType=="top"?fe=!0:ge.circularLinkType=="bottom"&&(ye=!0)}),fe==0||ye==0){var Ae=v.min(se,function(ge){return ge.y0}),pe=(le-ie)/(v.max(se,function(ge){return ge.y1})-Ae);se.forEach(function(ge){var we=(ge.y1-ge.y0)*pe;ge.y0=(ge.y0-Ae)*pe,ge.y1=ge.y0+we}),ve.forEach(function(ge){ge.y0=(ge.y0-Ae)*pe,ge.y1=(ge.y1-Ae)*pe,ge.width=ge.width*pe})}}m.sankeyCircular=function(){var te,ie,le=0,se=0,ve=1,fe=1,ye=24,Ae=c,pe=r,ge=i,we=y,oe=32,de=2,Te=null;function Ee(){var Fe={nodes:ge.apply(null,arguments),links:we.apply(null,arguments)};Me(Fe),b(Fe,Ae,Te),De(Fe),Ie(Fe),_(Fe,Ae),Oe(Fe,oe,Ae),Ze(Fe);for(var Pe=4,ze=0;ze<Pe;ze++)B(Fe,fe,Ae),j(Fe,fe,Ae),Z(Fe,se,fe,Ae),B(Fe,fe,Ae),j(Fe,fe,Ae);return K(Fe,se,fe),P(Fe,de,fe,Ae),Fe}function Me(Fe){Fe.nodes.forEach(function(ze,Ge){ze.index=Ge,ze.sourceLinks=[],ze.targetLinks=[]});var Pe=k.map(Fe.nodes,Ae);return Fe.links.forEach(function(ze,Ge){ze.index=Ge;var $e=ze.source,ot=ze.target;($e===void 0?"undefined":n($e))!=="object"&&($e=ze.source=f(Pe,$e)),(ot===void 0?"undefined":n(ot))!=="object"&&(ot=ze.target=f(Pe,ot)),$e.sourceLinks.push(ze),ot.targetLinks.push(ze)}),Fe}function De(Fe){Fe.nodes.forEach(function(Pe){Pe.partOfCycle=!1,Pe.value=Math.max(v.sum(Pe.sourceLinks,h),v.sum(Pe.targetLinks,h)),Pe.sourceLinks.forEach(function(ze){ze.circular&&(Pe.partOfCycle=!0,Pe.circularLinkType=ze.circularLinkType)}),Pe.targetLinks.forEach(function(ze){ze.circular&&(Pe.partOfCycle=!0,Pe.circularLinkType=ze.circularLinkType)})})}function Ie(Fe){var Pe,ze,Ge;for(Pe=Fe.nodes,ze=[],Ge=0;Pe.length;++Ge,Pe=ze,ze=[])Pe.forEach(function($e){$e.depth=Ge,$e.sourceLinks.forEach(function(ot){ze.indexOf(ot.target)<0&&!ot.circular&&ze.push(ot.target)})});for(Pe=Fe.nodes,ze=[],Ge=0;Pe.length;++Ge,Pe=ze,ze=[])Pe.forEach(function($e){$e.height=Ge,$e.targetLinks.forEach(function(ot){ze.indexOf(ot.source)<0&&!ot.circular&&ze.push(ot.source)})});Fe.nodes.forEach(function($e){$e.column=Math.floor(pe.call(null,$e,Ge))})}function Oe(Fe,Pe,ze){var Ge=k.nest().key(function(yt){return yt.column}).sortKeys(v.ascending).entries(Fe.nodes).map(function(yt){return yt.values});(function(yt){if(ie){var tt=1/0;Ge.forEach(function(Vt){var Xt=fe*ie/(Vt.length+1);tt=Xt<tt?Xt:tt}),te=tt}var Ke=v.min(Ge,function(Vt){return(fe-se-(Vt.length-1)*te)/v.sum(Vt,h)});Ke*=.3,Fe.links.forEach(function(Vt){Vt.width=Vt.value*Ke});var mt=function(Vt){var Xt=0,Gt=0,nr=0,It=0,Be=v.max(Vt.nodes,function(He){return He.column});return Vt.links.forEach(function(He){He.circular&&(He.circularLinkType=="top"?Xt+=He.width:Gt+=He.width,He.target.column==0&&(It+=He.width),He.source.column==Be&&(nr+=He.width))}),{top:Xt=Xt>0?Xt+25+10:Xt,bottom:Gt=Gt>0?Gt+25+10:Gt,left:It=It>0?It+25+10:It,right:nr=nr>0?nr+25+10:nr}}(Fe),Ft=function(Vt,Xt){var Gt=v.max(Vt.nodes,function(he){return he.column}),nr=ve-le,It=fe-se,Be=nr/(nr+Xt.right+Xt.left),He=It/(It+Xt.top+Xt.bottom);return le=le*Be+Xt.left,ve=Xt.right==0?ve:ve*Be,se=se*He+Xt.top,fe*=He,Vt.nodes.forEach(function(he){he.x0=le+he.column*((ve-le-ye)/Gt),he.x1=he.x0+ye}),He}(Fe,mt);Ke*=Ft,Fe.links.forEach(function(Vt){Vt.width=Vt.value*Ke}),Ge.forEach(function(Vt){var Xt=Vt.length;Vt.forEach(function(Gt,nr){Gt.depth==Ge.length-1&&Xt==1||Gt.depth==0&&Xt==1?(Gt.y0=fe/2-Gt.value*Ke,Gt.y1=Gt.y0+Gt.value*Ke):Gt.partOfCycle?L(Gt,yt)==0?(Gt.y0=fe/2+nr,Gt.y1=Gt.y0+Gt.value*Ke):Gt.circularLinkType=="top"?(Gt.y0=se+nr,Gt.y1=Gt.y0+Gt.value*Ke):(Gt.y0=fe-Gt.value*Ke-nr,Gt.y1=Gt.y0+Gt.value*Ke):mt.top==0||mt.bottom==0?(Gt.y0=(fe-se)/Xt*nr,Gt.y1=Gt.y0+Gt.value*Ke):(Gt.y0=(fe-se)/2-Xt/2+nr,Gt.y1=Gt.y0+Gt.value*Ke)})})})(ze),bt();for(var $e=1,ot=Pe;ot>0;--ot)vt($e*=.99,ze),bt();function vt(yt,tt){var Ke=Ge.length;Ge.forEach(function(mt){var Ft=mt.length,Vt=mt[0].depth;mt.forEach(function(Xt){var Gt;if((Xt.sourceLinks.length||Xt.targetLinks.length)&&!(Xt.partOfCycle&&L(Xt,tt)>0))if(Vt==0&&Ft==1)Gt=Xt.y1-Xt.y0,Xt.y0=fe/2-Gt/2,Xt.y1=fe/2+Gt/2;else if(Vt==Ke-1&&Ft==1)Gt=Xt.y1-Xt.y0,Xt.y0=fe/2-Gt/2,Xt.y1=fe/2+Gt/2;else{var nr=v.mean(Xt.sourceLinks,p),It=v.mean(Xt.targetLinks,a),Be=((nr&&It?(nr+It)/2:nr||It)-s(Xt))*yt;Xt.y0+=Be,Xt.y1+=Be}})})}function bt(){Ge.forEach(function(yt){var tt,Ke,mt,Ft=se,Vt=yt.length;for(yt.sort(o),mt=0;mt<Vt;++mt)(Ke=Ft-(tt=yt[mt]).y0)>0&&(tt.y0+=Ke,tt.y1+=Ke),Ft=tt.y1+te;if((Ke=Ft-te-fe)>0)for(Ft=tt.y0-=Ke,tt.y1-=Ke,mt=Vt-2;mt>=0;--mt)(Ke=(tt=yt[mt]).y1+te-Ft)>0&&(tt.y0-=Ke,tt.y1-=Ke),Ft=tt.y0})}}function Ze(Fe){Fe.nodes.forEach(function(Pe){Pe.sourceLinks.sort(u),Pe.targetLinks.sort(d)}),Fe.nodes.forEach(function(Pe){var ze=Pe.y0,Ge=ze,$e=Pe.y1,ot=$e;Pe.sourceLinks.forEach(function(vt){vt.circular?(vt.y0=$e-vt.width/2,$e-=vt.width):(vt.y0=ze+vt.width/2,ze+=vt.width)}),Pe.targetLinks.forEach(function(vt){vt.circular?(vt.y1=ot-vt.width/2,ot-=vt.width):(vt.y1=Ge+vt.width/2,Ge+=vt.width)})})}return Ee.nodeId=function(Fe){return arguments.length?(Ae=typeof Fe=="function"?Fe:l(Fe),Ee):Ae},Ee.nodeAlign=function(Fe){return arguments.length?(pe=typeof Fe=="function"?Fe:l(Fe),Ee):pe},Ee.nodeWidth=function(Fe){return arguments.length?(ye=+Fe,Ee):ye},Ee.nodePadding=function(Fe){return arguments.length?(te=+Fe,Ee):te},Ee.nodes=function(Fe){return arguments.length?(ge=typeof Fe=="function"?Fe:l(Fe),Ee):ge},Ee.links=function(Fe){return arguments.length?(we=typeof Fe=="function"?Fe:l(Fe),Ee):we},Ee.size=function(Fe){return arguments.length?(le=se=0,ve=+Fe[0],fe=+Fe[1],Ee):[ve-le,fe-se]},Ee.extent=function(Fe){return arguments.length?(le=+Fe[0][0],ve=+Fe[1][0],se=+Fe[0][1],fe=+Fe[1][1],Ee):[[le,se],[ve,fe]]},Ee.iterations=function(Fe){return arguments.length?(oe=+Fe,Ee):oe},Ee.circularLinkGap=function(Fe){return arguments.length?(de=+Fe,Ee):de},Ee.nodePaddingRatio=function(Fe){return arguments.length?(ie=+Fe,Ee):ie},Ee.sortNodes=function(Fe){return arguments.length?(Te=Fe,Ee):Te},Ee.update=function(Fe){return _(Fe,Ae),Ze(Fe),Fe.links.forEach(function(Pe){Pe.circular&&(Pe.circularLinkType=Pe.y0+Pe.y1<fe?"top":"bottom",Pe.source.circularLinkType=Pe.circularLinkType,Pe.target.circularLinkType=Pe.circularLinkType)}),B(Fe,fe,Ae,!1),j(Fe,fe,Ae),P(Fe,de,fe,Ae),Fe},Ee},m.sankeyCenter=function(te){return te.targetLinks.length?te.depth:te.sourceLinks.length?v.min(te.sourceLinks,t)-1:0},m.sankeyLeft=function(te){return te.depth},m.sankeyRight=function(te,ie){return ie-1-te.height},m.sankeyJustify=r,Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(g,Q,X){(function(m,v){typeof X=="object"&&Q!==void 0?v(X,g("d3-array"),g("d3-collection"),g("d3-shape")):v(m.d3=m.d3||{},m.d3,m.d3,m.d3)})(this,function(m,v,k,x){function e(w){return w.target.depth}function t(w,b){return w.sourceLinks.length?w.depth:b-1}function r(w){return function(){return w}}function l(w,b){return d(w.source,b.source)||w.index-b.index}function n(w,b){return d(w.target,b.target)||w.index-b.index}function d(w,b){return w.y0-b.y0}function u(w){return w.value}function o(w){return(w.y0+w.y1)/2}function h(w){return o(w.source)*w.value}function s(w){return o(w.target)*w.value}function a(w){return w.index}function p(w){return w.nodes}function c(w){return w.links}function i(w,b){var _=w.get(b);if(!_)throw new Error("missing: "+b);return _}function y(w){return[w.source.x1,w.y0]}function f(w){return[w.target.x0,w.y1]}m.sankey=function(){var w=0,b=0,_=1,T=1,L=24,A=8,I=a,P=t,S=p,E=c,z=32;function D(){var Z={nodes:S.apply(null,arguments),links:E.apply(null,arguments)};return U(Z),H(Z),Y(Z),J(Z),W(Z),Z}function U(Z){Z.nodes.forEach(function(V,B){V.index=B,V.sourceLinks=[],V.targetLinks=[]});var re=k.map(Z.nodes,I);Z.links.forEach(function(V,B){V.index=B;var j=V.source,ee=V.target;typeof j!="object"&&(j=V.source=i(re,j)),typeof ee!="object"&&(ee=V.target=i(re,ee)),j.sourceLinks.push(V),ee.targetLinks.push(V)})}function H(Z){Z.nodes.forEach(function(re){re.value=Math.max(v.sum(re.sourceLinks,u),v.sum(re.targetLinks,u))})}function Y(Z){var re,V,B;for(re=Z.nodes,V=[],B=0;re.length;++B,re=V,V=[])re.forEach(function(ee){ee.depth=B,ee.sourceLinks.forEach(function(N){V.indexOf(N.target)<0&&V.push(N.target)})});for(re=Z.nodes,V=[],B=0;re.length;++B,re=V,V=[])re.forEach(function(ee){ee.height=B,ee.targetLinks.forEach(function(N){V.indexOf(N.source)<0&&V.push(N.source)})});var j=(_-w-L)/(B-1);Z.nodes.forEach(function(ee){ee.x1=(ee.x0=w+Math.max(0,Math.min(B-1,Math.floor(P.call(null,ee,B))))*j)+L})}function J(Z){var re=k.nest().key(function($){return $.x0}).sortKeys(v.ascending).entries(Z.nodes).map(function($){return $.values});(function(){var $=v.max(re,function(ie){return ie.length}),K=2/3*(T-b)/($-1);A>K&&(A=K);var te=v.min(re,function(ie){return(T-b-(ie.length-1)*A)/v.sum(ie,u)});re.forEach(function(ie){ie.forEach(function(le,se){le.y1=(le.y0=se)+le.value*te})}),Z.links.forEach(function(ie){ie.width=ie.value*te})})(),N();for(var V=1,B=z;B>0;--B)ee(V*=.99),N(),j(V),N();function j($){re.forEach(function(K){K.forEach(function(te){if(te.targetLinks.length){var ie=(v.sum(te.targetLinks,h)/v.sum(te.targetLinks,u)-o(te))*$;te.y0+=ie,te.y1+=ie}})})}function ee($){re.slice().reverse().forEach(function(K){K.forEach(function(te){if(te.sourceLinks.length){var ie=(v.sum(te.sourceLinks,s)/v.sum(te.sourceLinks,u)-o(te))*$;te.y0+=ie,te.y1+=ie}})})}function N(){re.forEach(function($){var K,te,ie,le=b,se=$.length;for($.sort(d),ie=0;ie<se;++ie)(te=le-(K=$[ie]).y0)>0&&(K.y0+=te,K.y1+=te),le=K.y1+A;if((te=le-A-T)>0)for(le=K.y0-=te,K.y1-=te,ie=se-2;ie>=0;--ie)(te=(K=$[ie]).y1+A-le)>0&&(K.y0-=te,K.y1-=te),le=K.y0})}}function W(Z){Z.nodes.forEach(function(re){re.sourceLinks.sort(n),re.targetLinks.sort(l)}),Z.nodes.forEach(function(re){var V=re.y0,B=V;re.sourceLinks.forEach(function(j){j.y0=V+j.width/2,V+=j.width}),re.targetLinks.forEach(function(j){j.y1=B+j.width/2,B+=j.width})})}return D.update=function(Z){return W(Z),Z},D.nodeId=function(Z){return arguments.length?(I=typeof Z=="function"?Z:r(Z),D):I},D.nodeAlign=function(Z){return arguments.length?(P=typeof Z=="function"?Z:r(Z),D):P},D.nodeWidth=function(Z){return arguments.length?(L=+Z,D):L},D.nodePadding=function(Z){return arguments.length?(A=+Z,D):A},D.nodes=function(Z){return arguments.length?(S=typeof Z=="function"?Z:r(Z),D):S},D.links=function(Z){return arguments.length?(E=typeof Z=="function"?Z:r(Z),D):E},D.size=function(Z){return arguments.length?(w=b=0,_=+Z[0],T=+Z[1],D):[_-w,T-b]},D.extent=function(Z){return arguments.length?(w=+Z[0][0],_=+Z[1][0],b=+Z[0][1],T=+Z[1][1],D):[[w,b],[_,T]]},D.iterations=function(Z){return arguments.length?(z=+Z,D):z},D},m.sankeyCenter=function(w){return w.targetLinks.length?w.depth:w.sourceLinks.length?v.min(w.sourceLinks,e)-1:0},m.sankeyLeft=function(w){return w.depth},m.sankeyRight=function(w,b){return b-1-w.height},m.sankeyJustify=t,m.sankeyLinkHorizontal=function(){return x.linkHorizontal().source(y).target(f)},Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(g,Q,X){(function(){var m={version:"3.8.0"},v=[].slice,k=function(ce){return v.call(ce)},x=self.document;function e(ce){return ce&&(ce.ownerDocument||ce.document||ce).documentElement}function t(ce){return ce&&(ce.ownerDocument&&ce.ownerDocument.defaultView||ce.document&&ce||ce.defaultView)}if(x)try{k(x.documentElement.childNodes)[0].nodeType}catch{k=function(C){for(var R=C.length,F=new Array(R);R--;)F[R]=C[R];return F}}if(Date.now||(Date.now=function(){return+new Date}),x)try{x.createElement("DIV").style.setProperty("opacity",0,"")}catch{var r=this.Element.prototype,l=r.setAttribute,n=r.setAttributeNS,d=this.CSSStyleDeclaration.prototype,u=d.setProperty;r.setAttribute=function(C,R){l.call(this,C,R+"")},r.setAttributeNS=function(C,R,F){n.call(this,C,R,F+"")},d.setProperty=function(C,R,F){u.call(this,C,R+"",F)}}function o(ce,C){return ce<C?-1:ce>C?1:ce>=C?0:NaN}function h(ce){return ce===null?NaN:+ce}function s(ce){return!isNaN(ce)}function a(ce){return{left:function(C,R,F,q){for(arguments.length<3&&(F=0),arguments.length<4&&(q=C.length);F<q;){var ae=F+q>>>1;ce(C[ae],R)<0?F=ae+1:q=ae}return F},right:function(C,R,F,q){for(arguments.length<3&&(F=0),arguments.length<4&&(q=C.length);F<q;){var ae=F+q>>>1;ce(C[ae],R)>0?q=ae:F=ae+1}return F}}}m.ascending=o,m.descending=function(ce,C){return C<ce?-1:C>ce?1:C>=ce?0:NaN},m.min=function(ce,C){var R,F,q=-1,ae=ce.length;if(arguments.length===1){for(;++q<ae;)if((F=ce[q])!=null&&F>=F){R=F;break}for(;++q<ae;)(F=ce[q])!=null&&R>F&&(R=F)}else{for(;++q<ae;)if((F=C.call(ce,ce[q],q))!=null&&F>=F){R=F;break}for(;++q<ae;)(F=C.call(ce,ce[q],q))!=null&&R>F&&(R=F)}return R},m.max=function(ce,C){var R,F,q=-1,ae=ce.length;if(arguments.length===1){for(;++q<ae;)if((F=ce[q])!=null&&F>=F){R=F;break}for(;++q<ae;)(F=ce[q])!=null&&F>R&&(R=F)}else{for(;++q<ae;)if((F=C.call(ce,ce[q],q))!=null&&F>=F){R=F;break}for(;++q<ae;)(F=C.call(ce,ce[q],q))!=null&&F>R&&(R=F)}return R},m.extent=function(ce,C){var R,F,q,ae=-1,ue=ce.length;if(arguments.length===1){for(;++ae<ue;)if((F=ce[ae])!=null&&F>=F){R=q=F;break}for(;++ae<ue;)(F=ce[ae])!=null&&(R>F&&(R=F),q<F&&(q=F))}else{for(;++ae<ue;)if((F=C.call(ce,ce[ae],ae))!=null&&F>=F){R=q=F;break}for(;++ae<ue;)(F=C.call(ce,ce[ae],ae))!=null&&(R>F&&(R=F),q<F&&(q=F))}return[R,q]},m.sum=function(ce,C){var R,F=0,q=ce.length,ae=-1;if(arguments.length===1)for(;++ae<q;)s(R=+ce[ae])&&(F+=R);else for(;++ae<q;)s(R=+C.call(ce,ce[ae],ae))&&(F+=R);return F},m.mean=function(ce,C){var R,F=0,q=ce.length,ae=-1,ue=q;if(arguments.length===1)for(;++ae<q;)s(R=h(ce[ae]))?F+=R:--ue;else for(;++ae<q;)s(R=h(C.call(ce,ce[ae],ae)))?F+=R:--ue;if(ue)return F/ue},m.quantile=function(ce,C){var R=(ce.length-1)*C+1,F=Math.floor(R),q=+ce[F-1],ae=R-F;return ae?q+ae*(ce[F]-q):q},m.median=function(ce,C){var R,F=[],q=ce.length,ae=-1;if(arguments.length===1)for(;++ae<q;)s(R=h(ce[ae]))&&F.push(R);else for(;++ae<q;)s(R=h(C.call(ce,ce[ae],ae)))&&F.push(R);if(F.length)return m.quantile(F.sort(o),.5)},m.variance=function(ce,C){var R,F,q=ce.length,ae=0,ue=0,xe=-1,ke=0;if(arguments.length===1)for(;++xe<q;)s(R=h(ce[xe]))&&(ue+=(F=R-ae)*(R-(ae+=F/++ke)));else for(;++xe<q;)s(R=h(C.call(ce,ce[xe],xe)))&&(ue+=(F=R-ae)*(R-(ae+=F/++ke)));if(ke>1)return ue/(ke-1)},m.deviation=function(){var ce=m.variance.apply(this,arguments);return ce&&Math.sqrt(ce)};var p=a(o);function c(ce){return ce.length}m.bisectLeft=p.left,m.bisect=m.bisectRight=p.right,m.bisector=function(ce){return a(ce.length===1?function(C,R){return o(ce(C),R)}:ce)},m.shuffle=function(ce,C,R){(ae=arguments.length)<3&&(R=ce.length,ae<2&&(C=0));for(var F,q,ae=R-C;ae;)q=Math.random()*ae--|0,F=ce[ae+C],ce[ae+C]=ce[q+C],ce[q+C]=F;return ce},m.permute=function(ce,C){for(var R=C.length,F=new Array(R);R--;)F[R]=ce[C[R]];return F},m.pairs=function(ce){for(var C=0,R=ce.length-1,F=ce[0],q=new Array(R<0?0:R);C<R;)q[C]=[F,F=ce[++C]];return q},m.transpose=function(ce){if(!(q=ce.length))return[];for(var C=-1,R=m.min(ce,c),F=new Array(R);++C<R;)for(var q,ae=-1,ue=F[C]=new Array(q);++ae<q;)ue[ae]=ce[ae][C];return F},m.zip=function(){return m.transpose(arguments)},m.keys=function(ce){var C=[];for(var R in ce)C.push(R);return C},m.values=function(ce){var C=[];for(var R in ce)C.push(ce[R]);return C},m.entries=function(ce){var C=[];for(var R in ce)C.push({key:R,value:ce[R]});return C},m.merge=function(ce){for(var C,R,F,q=ce.length,ae=-1,ue=0;++ae<q;)ue+=ce[ae].length;for(R=new Array(ue);--q>=0;)for(C=(F=ce[q]).length;--C>=0;)R[--ue]=F[C];return R};var i=Math.abs;function y(ce){for(var C=1;ce*C%1;)C*=10;return C}function f(ce,C){for(var R in C)Object.defineProperty(ce.prototype,R,{value:C[R],enumerable:!1})}function w(){this._=Object.create(null)}m.range=function(ce,C,R){if(arguments.length<3&&(R=1,arguments.length<2&&(C=ce,ce=0)),(C-ce)/R==1/0)throw new Error("infinite range");var F,q=[],ae=y(i(R)),ue=-1;if(ce*=ae,C*=ae,(R*=ae)<0)for(;(F=ce+R*++ue)>C;)q.push(F/ae);else for(;(F=ce+R*++ue)<C;)q.push(F/ae);return q},m.map=function(ce,C){var R=new w;if(ce instanceof w)ce.forEach(function(xe,ke){R.set(xe,ke)});else if(Array.isArray(ce)){var F,q=-1,ae=ce.length;if(arguments.length===1)for(;++q<ae;)R.set(q,ce[q]);else for(;++q<ae;)R.set(C.call(ce,F=ce[q],q),F)}else for(var ue in ce)R.set(ue,ce[ue]);return R};function b(ce){return(ce+="")=="__proto__"||ce[0]==="\0"?"\0"+ce:ce}function _(ce){return(ce+="")[0]==="\0"?ce.slice(1):ce}function T(ce){return b(ce)in this._}function L(ce){return(ce=b(ce))in this._&&delete this._[ce]}function A(){var ce=[];for(var C in this._)ce.push(_(C));return ce}function I(){var ce=0;for(var C in this._)++ce;return ce}function P(){for(var ce in this._)return!1;return!0}function S(){this._=Object.create(null)}function E(ce){return ce}function z(ce,C,R){return function(){var F=R.apply(C,arguments);return F===C?ce:F}}function D(ce,C){if(C in ce)return C;C=C.charAt(0).toUpperCase()+C.slice(1);for(var R=0,F=U.length;R<F;++R){var q=U[R]+C;if(q in ce)return q}}f(w,{has:T,get:function(ce){return this._[b(ce)]},set:function(ce,C){return this._[b(ce)]=C},remove:L,keys:A,values:function(){var ce=[];for(var C in this._)ce.push(this._[C]);return ce},entries:function(){var ce=[];for(var C in this._)ce.push({key:_(C),value:this._[C]});return ce},size:I,empty:P,forEach:function(ce){for(var C in this._)ce.call(this,_(C),this._[C])}}),m.nest=function(){var ce,C,R={},F=[],q=[];function ae(ue,xe,ke){if(ke>=F.length)return C?C.call(R,xe):ce?xe.sort(ce):xe;for(var Le,Ve,Je,at,_t=-1,Et=xe.length,kt=F[ke++],At=new w;++_t<Et;)(at=At.get(Le=kt(Ve=xe[_t])))?at.push(Ve):At.set(Le,[Ve]);return ue?(Ve=ue(),Je=function(xt,zt){Ve.set(xt,ae(ue,zt,ke))}):(Ve={},Je=function(xt,zt){Ve[xt]=ae(ue,zt,ke)}),At.forEach(Je),Ve}return R.map=function(ue,xe){return ae(xe,ue,0)},R.entries=function(ue){return function xe(ke,Le){if(Le>=F.length)return ke;var Ve=[],Je=q[Le++];return ke.forEach(function(at,_t){Ve.push({key:at,values:xe(_t,Le)})}),Je?Ve.sort(function(at,_t){return Je(at.key,_t.key)}):Ve}(ae(m.map,ue,0),0)},R.key=function(ue){return F.push(ue),R},R.sortKeys=function(ue){return q[F.length-1]=ue,R},R.sortValues=function(ue){return ce=ue,R},R.rollup=function(ue){return C=ue,R},R},m.set=function(ce){var C=new S;if(ce)for(var R=0,F=ce.length;R<F;++R)C.add(ce[R]);return C},f(S,{has:T,add:function(ce){return this._[b(ce+="")]=!0,ce},remove:L,values:A,size:I,empty:P,forEach:function(ce){for(var C in this._)ce.call(this,_(C))}}),m.behavior={},m.rebind=function(ce,C){for(var R,F=1,q=arguments.length;++F<q;)ce[R=arguments[F]]=z(ce,C,C[R]);return ce};var U=["webkit","ms","moz","Moz","o","O"];function H(){}function Y(){}function J(ce){var C=[],R=new w;function F(){for(var q,ae=C,ue=-1,xe=ae.length;++ue<xe;)(q=ae[ue].on)&&q.apply(this,arguments);return ce}return F.on=function(q,ae){var ue,xe=R.get(q);return arguments.length<2?xe&&xe.on:(xe&&(xe.on=null,C=C.slice(0,ue=C.indexOf(xe)).concat(C.slice(ue+1)),R.remove(q)),ae&&C.push(R.set(q,{on:ae})),ce)},F}function W(){m.event.preventDefault()}function Z(){for(var ce,C=m.event;ce=C.sourceEvent;)C=ce;return C}function re(ce){for(var C=new Y,R=0,F=arguments.length;++R<F;)C[arguments[R]]=J(C);return C.of=function(q,ae){return function(ue){try{var xe=ue.sourceEvent=m.event;ue.target=ce,m.event=ue,C[ue.type].apply(q,ae)}finally{m.event=xe}}},C}m.dispatch=function(){for(var ce=new Y,C=-1,R=arguments.length;++C<R;)ce[arguments[C]]=J(ce);return ce},Y.prototype.on=function(ce,C){var R=ce.indexOf("."),F="";if(R>=0&&(F=ce.slice(R+1),ce=ce.slice(0,R)),ce)return arguments.length<2?this[ce].on(F):this[ce].on(F,C);if(arguments.length===2){if(C==null)for(ce in this)this.hasOwnProperty(ce)&&this[ce].on(F,null);return this}},m.event=null,m.requote=function(ce){return ce.replace(V,"\\$&")};var V=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,B={}.__proto__?function(ce,C){ce.__proto__=C}:function(ce,C){for(var R in C)ce[R]=C[R]};function j(ce){return B(ce,K),ce}var ee=function(ce,C){return C.querySelector(ce)},N=function(ce,C){return C.querySelectorAll(ce)},$=function(ce,C){var R=ce.matches||ce[D(ce,"matchesSelector")];return($=function(F,q){return R.call(F,q)})(ce,C)};typeof Sizzle=="function"&&(ee=function(ce,C){return Sizzle(ce,C)[0]||null},N=Sizzle,$=Sizzle.matchesSelector),m.selection=function(){return m.select(x.documentElement)};var K=m.selection.prototype=[];function te(ce){return typeof ce=="function"?ce:function(){return ee(ce,this)}}function ie(ce){return typeof ce=="function"?ce:function(){return N(ce,this)}}K.select=function(ce){var C,R,F,q,ae=[];ce=te(ce);for(var ue=-1,xe=this.length;++ue<xe;){ae.push(C=[]),C.parentNode=(F=this[ue]).parentNode;for(var ke=-1,Le=F.length;++ke<Le;)(q=F[ke])?(C.push(R=ce.call(q,q.__data__,ke,ue)),R&&"__data__"in q&&(R.__data__=q.__data__)):C.push(null)}return j(ae)},K.selectAll=function(ce){var C,R,F=[];ce=ie(ce);for(var q=-1,ae=this.length;++q<ae;)for(var ue=this[q],xe=-1,ke=ue.length;++xe<ke;)(R=ue[xe])&&(F.push(C=k(ce.call(R,R.__data__,xe,q))),C.parentNode=R);return j(F)};var le="http://www.w3.org/1999/xhtml",se={svg:"http://www.w3.org/2000/svg",xhtml:le,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ve(ce,C){return ce=m.ns.qualify(ce),C==null?ce.local?function(){this.removeAttributeNS(ce.space,ce.local)}:function(){this.removeAttribute(ce)}:typeof C=="function"?ce.local?function(){var R=C.apply(this,arguments);R==null?this.removeAttributeNS(ce.space,ce.local):this.setAttributeNS(ce.space,ce.local,R)}:function(){var R=C.apply(this,arguments);R==null?this.removeAttribute(ce):this.setAttribute(ce,R)}:ce.local?function(){this.setAttributeNS(ce.space,ce.local,C)}:function(){this.setAttribute(ce,C)}}function fe(ce){return ce.trim().replace(/\s+/g," ")}function ye(ce){return new RegExp("(?:^|\\s+)"+m.requote(ce)+"(?:\\s+|$)","g")}function Ae(ce){return(ce+"").trim().split(/^|\s+/)}function pe(ce,C){var R=(ce=Ae(ce).map(ge)).length;return typeof C=="function"?function(){for(var F=-1,q=C.apply(this,arguments);++F<R;)ce[F](this,q)}:function(){for(var F=-1;++F<R;)ce[F](this,C)}}function ge(ce){var C=ye(ce);return function(R,F){if(q=R.classList)return F?q.add(ce):q.remove(ce);var q=R.getAttribute("class")||"";F?(C.lastIndex=0,C.test(q)||R.setAttribute("class",fe(q+" "+ce))):R.setAttribute("class",fe(q.replace(C," ")))}}function we(ce,C,R){return C==null?function(){this.style.removeProperty(ce)}:typeof C=="function"?function(){var F=C.apply(this,arguments);F==null?this.style.removeProperty(ce):this.style.setProperty(ce,F,R)}:function(){this.style.setProperty(ce,C,R)}}function oe(ce,C){return C==null?function(){delete this[ce]}:typeof C=="function"?function(){var R=C.apply(this,arguments);R==null?delete this[ce]:this[ce]=R}:function(){this[ce]=C}}function de(ce){return typeof ce=="function"?ce:(ce=m.ns.qualify(ce)).local?function(){return this.ownerDocument.createElementNS(ce.space,ce.local)}:function(){var C=this.ownerDocument,R=this.namespaceURI;return R===le&&C.documentElement.namespaceURI===le?C.createElement(ce):C.createElementNS(R,ce)}}function Te(){var ce=this.parentNode;ce&&ce.removeChild(this)}function Ee(ce){return{__data__:ce}}function Me(ce){return function(){return $(this,ce)}}function De(ce){return arguments.length||(ce=o),function(C,R){return C&&R?ce(C.__data__,R.__data__):!C-!R}}function Ie(ce,C){for(var R=0,F=ce.length;R<F;R++)for(var q,ae=ce[R],ue=0,xe=ae.length;ue<xe;ue++)(q=ae[ue])&&C(q,ue,R);return ce}function Oe(ce){return B(ce,Ze),ce}m.ns={prefix:se,qualify:function(ce){var C=ce.indexOf(":"),R=ce;return C>=0&&(R=ce.slice(0,C))!=="xmlns"&&(ce=ce.slice(C+1)),se.hasOwnProperty(R)?{space:se[R],local:ce}:ce}},K.attr=function(ce,C){if(arguments.length<2){if(typeof ce=="string"){var R=this.node();return(ce=m.ns.qualify(ce)).local?R.getAttributeNS(ce.space,ce.local):R.getAttribute(ce)}for(C in ce)this.each(ve(C,ce[C]));return this}return this.each(ve(ce,C))},K.classed=function(ce,C){if(arguments.length<2){if(typeof ce=="string"){var R=this.node(),F=(ce=Ae(ce)).length,q=-1;if(C=R.classList){for(;++q<F;)if(!C.contains(ce[q]))return!1}else for(C=R.getAttribute("class");++q<F;)if(!ye(ce[q]).test(C))return!1;return!0}for(C in ce)this.each(pe(C,ce[C]));return this}return this.each(pe(ce,C))},K.style=function(ce,C,R){var F=arguments.length;if(F<3){if(typeof ce!="string"){for(R in F<2&&(C=""),ce)this.each(we(R,ce[R],C));return this}if(F<2){var q=this.node();return t(q).getComputedStyle(q,null).getPropertyValue(ce)}R=""}return this.each(we(ce,C,R))},K.property=function(ce,C){if(arguments.length<2){if(typeof ce=="string")return this.node()[ce];for(C in ce)this.each(oe(C,ce[C]));return this}return this.each(oe(ce,C))},K.text=function(ce){return arguments.length?this.each(typeof ce=="function"?function(){var C=ce.apply(this,arguments);this.textContent=C==null?"":C}:ce==null?function(){this.textContent=""}:function(){this.textContent=ce}):this.node().textContent},K.html=function(ce){return arguments.length?this.each(typeof ce=="function"?function(){var C=ce.apply(this,arguments);this.innerHTML=C==null?"":C}:ce==null?function(){this.innerHTML=""}:function(){this.innerHTML=ce}):this.node().innerHTML},K.append=function(ce){return ce=de(ce),this.select(function(){return this.appendChild(ce.apply(this,arguments))})},K.insert=function(ce,C){return ce=de(ce),C=te(C),this.select(function(){return this.insertBefore(ce.apply(this,arguments),C.apply(this,arguments)||null)})},K.remove=function(){return this.each(Te)},K.data=function(ce,C){var R,F,q=-1,ae=this.length;if(!arguments.length){for(ce=new Array(ae=(R=this[0]).length);++q<ae;)(F=R[q])&&(ce[q]=F.__data__);return ce}function ue(Ve,Je){var at,_t,Et,kt=Ve.length,At=Je.length,xt=Math.min(kt,At),zt=new Array(At),Ot=new Array(At),jt=new Array(kt);if(C){var rr,dr=new w,Sr=new Array(kt);for(at=-1;++at<kt;)(_t=Ve[at])&&(dr.has(rr=C.call(_t,_t.__data__,at))?jt[at]=_t:dr.set(rr,_t),Sr[at]=rr);for(at=-1;++at<At;)(_t=dr.get(rr=C.call(Je,Et=Je[at],at)))?_t!==!0&&(zt[at]=_t,_t.__data__=Et):Ot[at]=Ee(Et),dr.set(rr,!0);for(at=-1;++at<kt;)at in Sr&&dr.get(Sr[at])!==!0&&(jt[at]=Ve[at])}else{for(at=-1;++at<xt;)_t=Ve[at],Et=Je[at],_t?(_t.__data__=Et,zt[at]=_t):Ot[at]=Ee(Et);for(;at<At;++at)Ot[at]=Ee(Je[at]);for(;at<kt;++at)jt[at]=Ve[at]}Ot.update=zt,Ot.parentNode=zt.parentNode=jt.parentNode=Ve.parentNode,xe.push(Ot),ke.push(zt),Le.push(jt)}var xe=Oe([]),ke=j([]),Le=j([]);if(typeof ce=="function")for(;++q<ae;)ue(R=this[q],ce.call(R,R.parentNode.__data__,q));else for(;++q<ae;)ue(R=this[q],ce);return ke.enter=function(){return xe},ke.exit=function(){return Le},ke},K.datum=function(ce){return arguments.length?this.property("__data__",ce):this.property("__data__")},K.filter=function(ce){var C,R,F,q=[];typeof ce!="function"&&(ce=Me(ce));for(var ae=0,ue=this.length;ae<ue;ae++){q.push(C=[]),C.parentNode=(R=this[ae]).parentNode;for(var xe=0,ke=R.length;xe<ke;xe++)(F=R[xe])&&ce.call(F,F.__data__,xe,ae)&&C.push(F)}return j(q)},K.order=function(){for(var ce=-1,C=this.length;++ce<C;)for(var R,F=this[ce],q=F.length-1,ae=F[q];--q>=0;)(R=F[q])&&(ae&&ae!==R.nextSibling&&ae.parentNode.insertBefore(R,ae),ae=R);return this},K.sort=function(ce){ce=De.apply(this,arguments);for(var C=-1,R=this.length;++C<R;)this[C].sort(ce);return this.order()},K.each=function(ce){return Ie(this,function(C,R,F){ce.call(C,C.__data__,R,F)})},K.call=function(ce){var C=k(arguments);return ce.apply(C[0]=this,C),this},K.empty=function(){return!this.node()},K.node=function(){for(var ce=0,C=this.length;ce<C;ce++)for(var R=this[ce],F=0,q=R.length;F<q;F++){var ae=R[F];if(ae)return ae}return null},K.size=function(){var ce=0;return Ie(this,function(){++ce}),ce};var Ze=[];function Fe(ce){var C,R;return function(F,q,ae){var ue,xe=ce[ae].update,ke=xe.length;for(ae!=R&&(R=ae,C=0),q>=C&&(C=q+1);!(ue=xe[C])&&++C<ke;);return ue}}function Pe(ce,C,R){var F="__on"+ce,q=ce.indexOf("."),ae=Ge;q>0&&(ce=ce.slice(0,q));var ue=ze.get(ce);function xe(){var ke=this[F];ke&&(this.removeEventListener(ce,ke,ke.$),delete this[F])}return ue&&(ce=ue,ae=$e),q?C?function(){var ke=ae(C,k(arguments));xe.call(this),this.addEventListener(ce,this[F]=ke,ke.$=R),ke._=C}:xe:C?H:function(){var ke,Le=new RegExp("^__on([^.]+)"+m.requote(ce)+"$");for(var Ve in this)if(ke=Ve.match(Le)){var Je=this[Ve];this.removeEventListener(ke[1],Je,Je.$),delete this[Ve]}}}m.selection.enter=Oe,m.selection.enter.prototype=Ze,Ze.append=K.append,Ze.empty=K.empty,Ze.node=K.node,Ze.call=K.call,Ze.size=K.size,Ze.select=function(ce){for(var C,R,F,q,ae,ue=[],xe=-1,ke=this.length;++xe<ke;){F=(q=this[xe]).update,ue.push(C=[]),C.parentNode=q.parentNode;for(var Le=-1,Ve=q.length;++Le<Ve;)(ae=q[Le])?(C.push(F[Le]=R=ce.call(q.parentNode,ae.__data__,Le,xe)),R.__data__=ae.__data__):C.push(null)}return j(ue)},Ze.insert=function(ce,C){return arguments.length<2&&(C=Fe(this)),K.insert.call(this,ce,C)},m.select=function(ce){var C;return typeof ce=="string"?(C=[ee(ce,x)]).parentNode=x.documentElement:(C=[ce]).parentNode=e(ce),j([C])},m.selectAll=function(ce){var C;return typeof ce=="string"?(C=k(N(ce,x))).parentNode=x.documentElement:(C=k(ce)).parentNode=null,j([C])},K.on=function(ce,C,R){var F=arguments.length;if(F<3){if(typeof ce!="string"){for(R in F<2&&(C=!1),ce)this.each(Pe(R,ce[R],C));return this}if(F<2)return(F=this.node()["__on"+ce])&&F._;R=!1}return this.each(Pe(ce,C,R))};var ze=m.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Ge(ce,C){return function(R){var F=m.event;m.event=R,C[0]=this.__data__;try{ce.apply(this,C)}finally{m.event=F}}}function $e(ce,C){var R=Ge(ce,C);return function(F){var q=F.relatedTarget;q&&(q===this||8&q.compareDocumentPosition(this))||R.call(this,F)}}x&&ze.forEach(function(ce){"on"+ce in x&&ze.remove(ce)});var ot,vt=0;function bt(ce){var C=".dragsuppress-"+ ++vt,R="click"+C,F=m.select(t(ce)).on("touchmove"+C,W).on("dragstart"+C,W).on("selectstart"+C,W);if(ot==null&&(ot=!("onselectstart"in ce)&&D(ce.style,"userSelect")),ot){var q=e(ce).style,ae=q[ot];q[ot]="none"}return function(ue){if(F.on(C,null),ot&&(q[ot]=ae),ue){var xe=function(){F.on(R,null)};F.on(R,function(){W(),xe()},!0),setTimeout(xe,0)}}}m.mouse=function(ce){return tt(ce,Z())};var yt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function tt(ce,C){C.changedTouches&&(C=C.changedTouches[0]);var R=ce.ownerSVGElement||ce;if(R.createSVGPoint){var F=R.createSVGPoint();if(yt<0){var q=t(ce);if(q.scrollX||q.scrollY){var ae=(R=m.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();yt=!(ae.f||ae.e),R.remove()}}return yt?(F.x=C.pageX,F.y=C.pageY):(F.x=C.clientX,F.y=C.clientY),[(F=F.matrixTransform(ce.getScreenCTM().inverse())).x,F.y]}var ue=ce.getBoundingClientRect();return[C.clientX-ue.left-ce.clientLeft,C.clientY-ue.top-ce.clientTop]}function Ke(){return m.event.changedTouches[0].identifier}m.touch=function(ce,C,R){if(arguments.length<3&&(R=C,C=Z().changedTouches),C){for(var F,q=0,ae=C.length;q<ae;++q)if((F=C[q]).identifier===R)return tt(ce,F)}},m.behavior.drag=function(){var ce=re(q,"drag","dragstart","dragend"),C=null,R=ae(H,m.mouse,t,"mousemove","mouseup"),F=ae(Ke,m.touch,E,"touchmove","touchend");function q(){this.on("mousedown.drag",R).on("touchstart.drag",F)}function ae(ue,xe,ke,Le,Ve){return function(){var Je,at=this,_t=m.event.target.correspondingElement||m.event.target,Et=at.parentNode,kt=ce.of(at,arguments),At=0,xt=ue(),zt=".drag"+(xt==null?"":"-"+xt),Ot=m.select(ke(_t)).on(Le+zt,dr).on(Ve+zt,Sr),jt=bt(_t),rr=xe(Et,xt);function dr(){var kr,Kr,Jr=xe(Et,xt);Jr&&(kr=Jr[0]-rr[0],Kr=Jr[1]-rr[1],At|=kr|Kr,rr=Jr,kt({type:"drag",x:Jr[0]+Je[0],y:Jr[1]+Je[1],dx:kr,dy:Kr}))}function Sr(){xe(Et,xt)&&(Ot.on(Le+zt,null).on(Ve+zt,null),jt(At),kt({type:"dragend"}))}Je=C?[(Je=C.apply(at,arguments)).x-rr[0],Je.y-rr[1]]:[0,0],kt({type:"dragstart"})}}return q.origin=function(ue){return arguments.length?(C=ue,q):C},m.rebind(q,ce,"on")},m.touches=function(ce,C){return arguments.length<2&&(C=Z().touches),C?k(C).map(function(R){var F=tt(ce,R);return F.identifier=R.identifier,F}):[]};var mt=1e-6,Ft=Math.PI,Vt=2*Ft,Xt=Vt-mt,Gt=Ft/2,nr=Ft/180,It=180/Ft;function Be(ce){return ce>1?Gt:ce<-1?-Gt:Math.asin(ce)}function He(ce){return((ce=Math.exp(ce))+1/ce)/2}var he=Math.SQRT2;m.interpolateZoom=function(ce,C){var R,F,q=ce[0],ae=ce[1],ue=ce[2],xe=C[0],ke=C[1],Le=C[2],Ve=xe-q,Je=ke-ae,at=Ve*Ve+Je*Je;if(at<1e-12)F=Math.log(Le/ue)/he,R=function(zt){return[q+zt*Ve,ae+zt*Je,ue*Math.exp(he*zt*F)]};else{var _t=Math.sqrt(at),Et=(Le*Le-ue*ue+4*at)/(2*ue*2*_t),kt=(Le*Le-ue*ue-4*at)/(2*Le*2*_t),At=Math.log(Math.sqrt(Et*Et+1)-Et),xt=Math.log(Math.sqrt(kt*kt+1)-kt);F=(xt-At)/he,R=function(zt){var Ot,jt=zt*F,rr=He(At),dr=ue/(2*_t)*(rr*(Ot=he*jt+At,((Ot=Math.exp(2*Ot))-1)/(Ot+1))-function(Sr){return((Sr=Math.exp(Sr))-1/Sr)/2}(At));return[q+dr*Ve,ae+dr*Je,ue*rr/He(he*jt+At)]}}return R.duration=1e3*F,R},m.behavior.zoom=function(){var ce,C,R,F,q,ae,ue,xe,ke,Le={x:0,y:0,k:1},Ve=[960,500],Je=Ue,at=250,_t=0,Et="mousedown.zoom",kt="mousemove.zoom",At="mouseup.zoom",xt="touchstart.zoom",zt=re(Ot,"zoomstart","zoom","zoomend");function Ot(Gr){Gr.on(Et,sn).on(Re+".zoom",Xn).on("dblclick.zoom",ha).on(xt,Un)}function jt(Gr){return[(Gr[0]-Le.x)/Le.k,(Gr[1]-Le.y)/Le.k]}function rr(Gr){Le.k=Math.max(Je[0],Math.min(Je[1],Gr))}function dr(Gr,An){An=function(Jn){return[Jn[0]*Le.k+Le.x,Jn[1]*Le.k+Le.y]}(An),Le.x+=Gr[0]-An[0],Le.y+=Gr[1]-An[1]}function Sr(Gr,An,Jn,Yn){Gr.__chart__={x:Le.x,y:Le.y,k:Le.k},rr(Math.pow(2,Yn)),dr(C=An,Jn),Gr=m.select(Gr),at>0&&(Gr=Gr.transition().duration(at)),Gr.call(Ot.event)}function kr(){ue&&ue.domain(ae.range().map(function(Gr){return(Gr-Le.x)/Le.k}).map(ae.invert)),ke&&ke.domain(xe.range().map(function(Gr){return(Gr-Le.y)/Le.k}).map(xe.invert))}function Kr(Gr){_t++||Gr({type:"zoomstart"})}function Jr(Gr){kr(),Gr({type:"zoom",scale:Le.k,translate:[Le.x,Le.y]})}function pn(Gr){--_t||(Gr({type:"zoomend"}),C=null)}function sn(){var Gr=this,An=zt.of(Gr,arguments),Jn=0,Yn=m.select(t(Gr)).on(kt,La).on(At,ea),ia=jt(m.mouse(Gr)),da=bt(Gr);function La(){Jn=1,dr(m.mouse(Gr),ia),Jr(An)}function ea(){Yn.on(kt,null).on(At,null),da(Jn),pn(An)}Ds.call(Gr),Kr(An)}function Un(){var Gr,An=this,Jn=zt.of(An,arguments),Yn={},ia=0,da=".zoom-"+m.event.changedTouches[0].identifier,La="touchmove"+da,ea="touchend"+da,_a=[],ya=m.select(An),Ia=bt(An);function wa(){var Ii=m.touches(An);return Gr=Le.k,Ii.forEach(function(Oi){Oi.identifier in Yn&&(Yn[Oi.identifier]=jt(Oi))}),Ii}function Oa(){var Ii=m.event.target;m.select(Ii).on(La,Ha).on(ea,fi),_a.push(Ii);for(var Oi=m.event.changedTouches,ui=0,Mi=Oi.length;ui<Mi;++ui)Yn[Oi[ui].identifier]=null;var vi=wa(),wo=Date.now();if(vi.length===1){if(wo-q<500){var Yi=vi[0];Sr(An,Yi,Yn[Yi.identifier],Math.floor(Math.log(Le.k)/Math.LN2)+1),W()}q=wo}else if(vi.length>1){Yi=vi[0];var Bo=vi[1],Es=Yi[0]-Bo[0],Js=Yi[1]-Bo[1];ia=Es*Es+Js*Js}}function Ha(){var Ii,Oi,ui,Mi,vi=m.touches(An);Ds.call(An);for(var wo=0,Yi=vi.length;wo<Yi;++wo,Mi=null)if(ui=vi[wo],Mi=Yn[ui.identifier]){if(Oi)break;Ii=ui,Oi=Mi}if(Mi){var Bo=(Bo=ui[0]-Ii[0])*Bo+(Bo=ui[1]-Ii[1])*Bo,Es=ia&&Math.sqrt(Bo/ia);Ii=[(Ii[0]+ui[0])/2,(Ii[1]+ui[1])/2],Oi=[(Oi[0]+Mi[0])/2,(Oi[1]+Mi[1])/2],rr(Es*Gr)}q=null,dr(Ii,Oi),Jr(Jn)}function fi(){if(m.event.touches.length){for(var Ii=m.event.changedTouches,Oi=0,ui=Ii.length;Oi<ui;++Oi)delete Yn[Ii[Oi].identifier];for(var Mi in Yn)return void wa()}m.selectAll(_a).on(da,null),ya.on(Et,sn).on(xt,Un),Ia(),pn(Jn)}Oa(),Kr(Jn),ya.on(Et,null).on(xt,Oa)}function Xn(){var Gr=zt.of(this,arguments);F?clearTimeout(F):(Ds.call(this),ce=jt(C=R||m.mouse(this)),Kr(Gr)),F=setTimeout(function(){F=null,pn(Gr)},50),W(),rr(Math.pow(2,.002*be())*Le.k),dr(C,ce),Jr(Gr)}function ha(){var Gr=m.mouse(this),An=Math.log(Le.k)/Math.LN2;Sr(this,Gr,jt(Gr),m.event.shiftKey?Math.ceil(An)-1:Math.floor(An)+1)}return Re||(Re="onwheel"in x?(be=function(){return-m.event.deltaY*(m.event.deltaMode?120:1)},"wheel"):"onmousewheel"in x?(be=function(){return m.event.wheelDelta},"mousewheel"):(be=function(){return-m.event.detail},"MozMousePixelScroll")),Ot.event=function(Gr){Gr.each(function(){var An=zt.of(this,arguments),Jn=Le;_s?m.select(this).transition().each("start.zoom",function(){Le=this.__chart__||{x:0,y:0,k:1},Kr(An)}).tween("zoom:zoom",function(){var Yn=Ve[0],ia=Ve[1],da=C?C[0]:Yn/2,La=C?C[1]:ia/2,ea=m.interpolateZoom([(da-Le.x)/Le.k,(La-Le.y)/Le.k,Yn/Le.k],[(da-Jn.x)/Jn.k,(La-Jn.y)/Jn.k,Yn/Jn.k]);return function(_a){var ya=ea(_a),Ia=Yn/ya[2];this.__chart__=Le={x:da-ya[0]*Ia,y:La-ya[1]*Ia,k:Ia},Jr(An)}}).each("interrupt.zoom",function(){pn(An)}).each("end.zoom",function(){pn(An)}):(this.__chart__=Le,Kr(An),Jr(An),pn(An))})},Ot.translate=function(Gr){return arguments.length?(Le={x:+Gr[0],y:+Gr[1],k:Le.k},kr(),Ot):[Le.x,Le.y]},Ot.scale=function(Gr){return arguments.length?(Le={x:Le.x,y:Le.y,k:null},rr(+Gr),kr(),Ot):Le.k},Ot.scaleExtent=function(Gr){return arguments.length?(Je=Gr==null?Ue:[+Gr[0],+Gr[1]],Ot):Je},Ot.center=function(Gr){return arguments.length?(R=Gr&&[+Gr[0],+Gr[1]],Ot):R},Ot.size=function(Gr){return arguments.length?(Ve=Gr&&[+Gr[0],+Gr[1]],Ot):Ve},Ot.duration=function(Gr){return arguments.length?(at=+Gr,Ot):at},Ot.x=function(Gr){return arguments.length?(ue=Gr,ae=Gr.copy(),Le={x:0,y:0,k:1},Ot):ue},Ot.y=function(Gr){return arguments.length?(ke=Gr,xe=Gr.copy(),Le={x:0,y:0,k:1},Ot):ke},m.rebind(Ot,zt,"on")};var be,Re,Ue=[0,1/0];function Xe(){}function qe(ce,C,R){return this instanceof qe?(this.h=+ce,this.s=+C,void(this.l=+R)):arguments.length<2?ce instanceof qe?new qe(ce.h,ce.s,ce.l):Tr(""+ce,ur,qe):new qe(ce,C,R)}m.color=Xe,Xe.prototype.toString=function(){return this.rgb()+""},m.hsl=qe;var st=qe.prototype=new Xe;function it(ce,C,R){var F,q;function ae(ue){return Math.round(255*function(xe){return xe>360?xe-=360:xe<0&&(xe+=360),xe<60?F+(q-F)*xe/60:xe<180?q:xe<240?F+(q-F)*(240-xe)/60:F}(ue))}return ce=isNaN(ce)?0:(ce%=360)<0?ce+360:ce,C=isNaN(C)||C<0?0:C>1?1:C,F=2*(R=R<0?0:R>1?1:R)-(q=R<=.5?R*(1+C):R+C-R*C),new Mt(ae(ce+120),ae(ce),ae(ce-120))}function Tt(ce,C,R){return this instanceof Tt?(this.h=+ce,this.c=+C,void(this.l=+R)):arguments.length<2?ce instanceof Tt?new Tt(ce.h,ce.c,ce.l):Se(ce instanceof ut?ce.l:(ce=Kt((ce=m.rgb(ce)).r,ce.g,ce.b)).l,ce.a,ce.b):new Tt(ce,C,R)}st.brighter=function(ce){return ce=Math.pow(.7,arguments.length?ce:1),new qe(this.h,this.s,this.l/ce)},st.darker=function(ce){return ce=Math.pow(.7,arguments.length?ce:1),new qe(this.h,this.s,ce*this.l)},st.rgb=function(){return it(this.h,this.s,this.l)},m.hcl=Tt;var Pt=Tt.prototype=new Xe;function rt(ce,C,R){return isNaN(ce)&&(ce=0),isNaN(C)&&(C=0),new ut(R,Math.cos(ce*=nr)*C,Math.sin(ce)*C)}function ut(ce,C,R){return this instanceof ut?(this.l=+ce,this.a=+C,void(this.b=+R)):arguments.length<2?ce instanceof ut?new ut(ce.l,ce.a,ce.b):ce instanceof Tt?rt(ce.h,ce.c,ce.l):Kt((ce=Mt(ce)).r,ce.g,ce.b):new ut(ce,C,R)}Pt.brighter=function(ce){return new Tt(this.h,this.c,Math.min(100,this.l+Bt*(arguments.length?ce:1)))},Pt.darker=function(ce){return new Tt(this.h,this.c,Math.max(0,this.l-Bt*(arguments.length?ce:1)))},Pt.rgb=function(){return rt(this.h,this.c,this.l).rgb()},m.lab=ut;var Bt=18,wt=ut.prototype=new Xe;function Lt(ce,C,R){var F=(ce+16)/116,q=F+C/500,ae=F-R/200;return new Mt(ft(3.2404542*(q=.95047*We(q))-1.5371385*(F=1*We(F))-.4985314*(ae=1.08883*We(ae))),ft(-.969266*q+1.8760108*F+.041556*ae),ft(.0556434*q-.2040259*F+1.0572252*ae))}function Se(ce,C,R){return ce>0?new Tt(Math.atan2(R,C)*It,Math.sqrt(C*C+R*R),ce):new Tt(NaN,NaN,ce)}function We(ce){return ce>.206893034?ce*ce*ce:(ce-4/29)/7.787037}function nt(ce){return ce>.008856?Math.pow(ce,1/3):7.787037*ce+4/29}function ft(ce){return Math.round(255*(ce<=.00304?12.92*ce:1.055*Math.pow(ce,1/2.4)-.055))}function Mt(ce,C,R){return this instanceof Mt?(this.r=~~ce,this.g=~~C,void(this.b=~~R)):arguments.length<2?ce instanceof Mt?new Mt(ce.r,ce.g,ce.b):Tr(""+ce,Mt,it):new Mt(ce,C,R)}function Nt(ce){return new Mt(ce>>16,ce>>8&255,255&ce)}function Zt(ce){return Nt(ce)+""}wt.brighter=function(ce){return new ut(Math.min(100,this.l+Bt*(arguments.length?ce:1)),this.a,this.b)},wt.darker=function(ce){return new ut(Math.max(0,this.l-Bt*(arguments.length?ce:1)),this.a,this.b)},wt.rgb=function(){return Lt(this.l,this.a,this.b)},m.rgb=Mt;var Ut=Mt.prototype=new Xe;function fr(ce){return ce<16?"0"+Math.max(0,ce).toString(16):Math.min(255,ce).toString(16)}function Tr(ce,C,R){var F,q,ae,ue=0,xe=0,ke=0;if(F=/([a-z]+)\((.*)\)/.exec(ce=ce.toLowerCase()))switch(q=F[2].split(","),F[1]){case"hsl":return R(parseFloat(q[0]),parseFloat(q[1])/100,parseFloat(q[2])/100);case"rgb":return C(er(q[0]),er(q[1]),er(q[2]))}return(ae=cr.get(ce))?C(ae.r,ae.g,ae.b):(ce==null||ce.charAt(0)!=="#"||isNaN(ae=parseInt(ce.slice(1),16))||(ce.length===4?(ue=(3840&ae)>>4,ue|=ue>>4,xe=240&ae,xe|=xe>>4,ke=15&ae,ke|=ke<<4):ce.length===7&&(ue=(16711680&ae)>>16,xe=(65280&ae)>>8,ke=255&ae)),C(ue,xe,ke))}function ur(ce,C,R){var F,q,ae=Math.min(ce/=255,C/=255,R/=255),ue=Math.max(ce,C,R),xe=ue-ae,ke=(ue+ae)/2;return xe?(q=ke<.5?xe/(ue+ae):xe/(2-ue-ae),F=ce==ue?(C-R)/xe+(C<R?6:0):C==ue?(R-ce)/xe+2:(ce-C)/xe+4,F*=60):(F=NaN,q=ke>0&&ke<1?0:F),new qe(F,q,ke)}function Kt(ce,C,R){var F=nt((.4124564*(ce=Qt(ce))+.3575761*(C=Qt(C))+.1804375*(R=Qt(R)))/.95047),q=nt((.2126729*ce+.7151522*C+.072175*R)/1);return ut(116*q-16,500*(F-q),200*(q-nt((.0193339*ce+.119192*C+.9503041*R)/1.08883)))}function Qt(ce){return(ce/=255)<=.04045?ce/12.92:Math.pow((ce+.055)/1.055,2.4)}function er(ce){var C=parseFloat(ce);return ce.charAt(ce.length-1)==="%"?Math.round(2.55*C):C}Ut.brighter=function(ce){ce=Math.pow(.7,arguments.length?ce:1);var C=this.r,R=this.g,F=this.b,q=30;return C||R||F?(C&&C<q&&(C=q),R&&R<q&&(R=q),F&&F<q&&(F=q),new Mt(Math.min(255,C/ce),Math.min(255,R/ce),Math.min(255,F/ce))):new Mt(q,q,q)},Ut.darker=function(ce){return new Mt((ce=Math.pow(.7,arguments.length?ce:1))*this.r,ce*this.g,ce*this.b)},Ut.hsl=function(){return ur(this.r,this.g,this.b)},Ut.toString=function(){return"#"+fr(this.r)+fr(this.g)+fr(this.b)};var cr=m.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function gr(ce){return typeof ce=="function"?ce:function(){return ce}}function Mr(ce){return function(C,R,F){return arguments.length===2&&typeof R=="function"&&(F=R,R=null),Ir(C,R,ce,F)}}function Ir(ce,C,R,F){var q={},ae=m.dispatch("beforesend","progress","load","error"),ue={},xe=new XMLHttpRequest,ke=null;function Le(){var Ve,Je=xe.status;if(!Je&&function(at){var _t=at.responseType;return _t&&_t!=="text"?at.response:at.responseText}(xe)||Je>=200&&Je<300||Je===304){try{Ve=R.call(q,xe)}catch(at){return void ae.error.call(q,at)}ae.load.call(q,Ve)}else ae.error.call(q,xe)}return self.XDomainRequest&&!("withCredentials"in xe)&&/^(http(s)?:)?\/\//.test(ce)&&(xe=new XDomainRequest),"onload"in xe?xe.onload=xe.onerror=Le:xe.onreadystatechange=function(){xe.readyState>3&&Le()},xe.onprogress=function(Ve){var Je=m.event;m.event=Ve;try{ae.progress.call(q,xe)}finally{m.event=Je}},q.header=function(Ve,Je){return Ve=(Ve+"").toLowerCase(),arguments.length<2?ue[Ve]:(Je==null?delete ue[Ve]:ue[Ve]=Je+"",q)},q.mimeType=function(Ve){return arguments.length?(C=Ve==null?null:Ve+"",q):C},q.responseType=function(Ve){return arguments.length?(ke=Ve,q):ke},q.response=function(Ve){return R=Ve,q},["get","post"].forEach(function(Ve){q[Ve]=function(){return q.send.apply(q,[Ve].concat(k(arguments)))}}),q.send=function(Ve,Je,at){if(arguments.length===2&&typeof Je=="function"&&(at=Je,Je=null),xe.open(Ve,ce,!0),C==null||"accept"in ue||(ue.accept=C+",*/*"),xe.setRequestHeader)for(var _t in ue)xe.setRequestHeader(_t,ue[_t]);return C!=null&&xe.overrideMimeType&&xe.overrideMimeType(C),ke!=null&&(xe.responseType=ke),at!=null&&q.on("error",at).on("load",function(Et){at(null,Et)}),ae.beforesend.call(q,xe),xe.send(Je==null?null:Je),q},q.abort=function(){return xe.abort(),q},m.rebind(q,ae,"on"),F==null?q:q.get(function(Ve){return Ve.length===1?function(Je,at){Ve(Je==null?at:null)}:Ve}(F))}cr.forEach(function(ce,C){cr.set(ce,Nt(C))}),m.functor=gr,m.xhr=Mr(E),m.dsv=function(ce,C){var R=new RegExp('["'+ce+`
]`),F=ce.charCodeAt(0);function q(Le,Ve,Je){arguments.length<3&&(Je=Ve,Ve=null);var at=Ir(Le,C,Ve==null?ae:ue(Ve),Je);return at.row=function(_t){return arguments.length?at.response((Ve=_t)==null?ae:ue(_t)):Ve},at}function ae(Le){return q.parse(Le.responseText)}function ue(Le){return function(Ve){return q.parse(Ve.responseText,Le)}}function xe(Le){return Le.map(ke).join(ce)}function ke(Le){return R.test(Le)?'"'+Le.replace(/\"/g,'""')+'"':Le}return q.parse=function(Le,Ve){var Je;return q.parseRows(Le,function(at,_t){if(Je)return Je(at,_t-1);var Et=function(kt){for(var At={},xt=at.length,zt=0;zt<xt;++zt)At[at[zt]]=kt[zt];return At};Je=Ve?function(kt,At){return Ve(Et(kt),At)}:Et})},q.parseRows=function(Le,Ve){var Je,at,_t={},Et={},kt=[],At=Le.length,xt=0,zt=0;function Ot(){if(xt>=At)return Et;if(at)return at=!1,_t;var rr=xt;if(Le.charCodeAt(rr)===34){for(var dr=rr;dr++<At;)if(Le.charCodeAt(dr)===34){if(Le.charCodeAt(dr+1)!==34)break;++dr}return xt=dr+2,(Sr=Le.charCodeAt(dr+1))===13?(at=!0,Le.charCodeAt(dr+2)===10&&++xt):Sr===10&&(at=!0),Le.slice(rr+1,dr).replace(/""/g,'"')}for(;xt<At;){var Sr,kr=1;if((Sr=Le.charCodeAt(xt++))===10)at=!0;else if(Sr===13)at=!0,Le.charCodeAt(xt)===10&&(++xt,++kr);else if(Sr!==F)continue;return Le.slice(rr,xt-kr)}return Le.slice(rr)}for(;(Je=Ot())!==Et;){for(var jt=[];Je!==_t&&Je!==Et;)jt.push(Je),Je=Ot();Ve&&(jt=Ve(jt,zt++))==null||kt.push(jt)}return kt},q.format=function(Le){if(Array.isArray(Le[0]))return q.formatRows(Le);var Ve=new S,Je=[];return Le.forEach(function(at){for(var _t in at)Ve.has(_t)||Je.push(Ve.add(_t))}),[Je.map(ke).join(ce)].concat(Le.map(function(at){return Je.map(function(_t){return ke(at[_t])}).join(ce)})).join(`
`)},q.formatRows=function(Le){return Le.map(xe).join(`
`)},q},m.csv=m.dsv(",","text/csv"),m.tsv=m.dsv("	","text/tab-separated-values");var Fr,Yr,fn,en,Rn=this[D(this,"requestAnimationFrame")]||function(ce){setTimeout(ce,17)};function nn(ce,C,R){var F=arguments.length;F<2&&(C=0),F<3&&(R=Date.now());var q=R+C,ae={c:ce,t:q,n:null};return Yr?Yr.n=ae:Fr=ae,Yr=ae,fn||(en=clearTimeout(en),fn=1,Rn(yn)),ae}function yn(){var ce=bn(),C=ta()-ce;C>24?(isFinite(C)&&(clearTimeout(en),en=setTimeout(yn,C)),fn=0):(fn=1,Rn(yn))}function bn(){for(var ce=Date.now(),C=Fr;C;)ce>=C.t&&C.c(ce-C.t)&&(C.c=null),C=C.n;return ce}function ta(){for(var ce,C=Fr,R=1/0;C;)C.c?(C.t<R&&(R=C.t),C=(ce=C).n):C=ce?ce.n=C.n:Fr=C.n;return Yr=ce,R}function Br(ce){return ce[0]}function rn(ce){return ce[1]}function gn(ce){for(var C,R,F,q=ce.length,ae=[0,1],ue=2,xe=2;xe<q;xe++){for(;ue>1&&(C=ce[ae[ue-2]],R=ce[ae[ue-1]],F=ce[xe],(R[0]-C[0])*(F[1]-C[1])-(R[1]-C[1])*(F[0]-C[0])<=0);)--ue;ae[ue++]=xe}return ae.slice(0,ue)}function Qr(ce,C){return ce[0]-C[0]||ce[1]-C[1]}m.timer=function(){nn.apply(this,arguments)},m.timer.flush=function(){bn(),ta()},m.round=function(ce,C){return C?Math.round(ce*(C=Math.pow(10,C)))/C:Math.round(ce)},m.geom={},m.geom.hull=function(ce){var C=Br,R=rn;if(arguments.length)return F(ce);function F(q){if(q.length<3)return[];var ae,ue=gr(C),xe=gr(R),ke=q.length,Le=[],Ve=[];for(ae=0;ae<ke;ae++)Le.push([+ue.call(this,q[ae],ae),+xe.call(this,q[ae],ae),ae]);for(Le.sort(Qr),ae=0;ae<ke;ae++)Ve.push([Le[ae][0],-Le[ae][1]]);var Je=gn(Le),at=gn(Ve),_t=at[0]===Je[0],Et=at[at.length-1]===Je[Je.length-1],kt=[];for(ae=Je.length-1;ae>=0;--ae)kt.push(q[Le[Je[ae]][2]]);for(ae=+_t;ae<at.length-Et;++ae)kt.push(q[Le[at[ae]][2]]);return kt}return F.x=function(q){return arguments.length?(C=q,F):C},F.y=function(q){return arguments.length?(R=q,F):R},F},m.geom.polygon=function(ce){return B(ce,un),ce};var un=m.geom.polygon.prototype=[];function Gn(ce,C,R){return(R[0]-C[0])*(ce[1]-C[1])<(R[1]-C[1])*(ce[0]-C[0])}function wn(ce,C,R,F){var q=ce[0],ae=R[0],ue=C[0]-q,xe=F[0]-ae,ke=ce[1],Le=R[1],Ve=C[1]-ke,Je=F[1]-Le,at=(xe*(ke-Le)-Je*(q-ae))/(Je*ue-xe*Ve);return[q+at*ue,ke+at*Ve]}function Ln(ce){var C=ce[0],R=ce[ce.length-1];return!(C[0]-R[0]||C[1]-R[1])}un.area=function(){for(var ce,C=-1,R=this.length,F=this[R-1],q=0;++C<R;)ce=F,F=this[C],q+=ce[1]*F[0]-ce[0]*F[1];return .5*q},un.centroid=function(ce){var C,R,F=-1,q=this.length,ae=0,ue=0,xe=this[q-1];for(arguments.length||(ce=-1/(6*this.area()));++F<q;)C=xe,xe=this[F],R=C[0]*xe[1]-xe[0]*C[1],ae+=(C[0]+xe[0])*R,ue+=(C[1]+xe[1])*R;return[ae*ce,ue*ce]},un.clip=function(ce){for(var C,R,F,q,ae,ue,xe=Ln(ce),ke=-1,Le=this.length-Ln(this),Ve=this[Le-1];++ke<Le;){for(C=ce.slice(),ce.length=0,q=this[ke],ae=C[(F=C.length-xe)-1],R=-1;++R<F;)Gn(ue=C[R],Ve,q)?(Gn(ae,Ve,q)||ce.push(wn(ae,ue,Ve,q)),ce.push(ue)):Gn(ae,Ve,q)&&ce.push(wn(ae,ue,Ve,q)),ae=ue;xe&&ce.push(ce[0]),Ve=q}return ce};var oa,tr,mr,Ct,or,hr=[],Rr=[];function zr(){Sn(this),this.edge=this.site=this.circle=null}function Or(ce){var C=hr.pop()||new zr;return C.site=ce,C}function Ar(ce){vn(ce),mr.remove(ce),hr.push(ce),Sn(ce)}function vr(ce){var C=ce.circle,R=C.x,F=C.cy,q={x:R,y:F},ae=ce.P,ue=ce.N,xe=[ce];Ar(ce);for(var ke=ae;ke.circle&&i(R-ke.circle.x)<mt&&i(F-ke.circle.cy)<mt;)ae=ke.P,xe.unshift(ke),Ar(ke),ke=ae;xe.unshift(ke),vn(ke);for(var Le=ue;Le.circle&&i(R-Le.circle.x)<mt&&i(F-Le.circle.cy)<mt;)ue=Le.N,xe.push(Le),Ar(Le),Le=ue;xe.push(Le),vn(Le);var Ve,Je=xe.length;for(Ve=1;Ve<Je;++Ve)Le=xe[Ve],ke=xe[Ve-1],Zn(Le.edge,ke.site,Le.site,q);ke=xe[0],(Le=xe[Je-1]).edge=Cn(ke.site,Le.site,null,q),tn(ke),tn(Le)}function xr(ce){for(var C,R,F,q,ae=ce.x,ue=ce.y,xe=mr._;xe;)if((F=wr(xe,ue)-ae)>mt)xe=xe.L;else{if(!((q=ae-Er(xe,ue))>mt)){F>-mt?(C=xe.P,R=xe):q>-mt?(C=xe,R=xe.N):C=R=xe;break}if(!xe.R){C=xe;break}xe=xe.R}var ke=Or(ce);if(mr.insert(C,ke),C||R){if(C===R)return vn(C),R=Or(C.site),mr.insert(ke,R),ke.edge=R.edge=Cn(C.site,ke.site),tn(C),void tn(R);if(R){vn(C),vn(R);var Le=C.site,Ve=Le.x,Je=Le.y,at=ce.x-Ve,_t=ce.y-Je,Et=R.site,kt=Et.x-Ve,At=Et.y-Je,xt=2*(at*At-_t*kt),zt=at*at+_t*_t,Ot=kt*kt+At*At,jt={x:(At*zt-_t*Ot)/xt+Ve,y:(at*Ot-kt*zt)/xt+Je};Zn(R.edge,Le,Et,jt),ke.edge=Cn(Le,ce,null,jt),R.edge=Cn(ce,Et,null,jt),tn(C),tn(R)}else ke.edge=Cn(C.site,ke.site)}}function wr(ce,C){var R=ce.site,F=R.x,q=R.y,ae=q-C;if(!ae)return F;var ue=ce.P;if(!ue)return-1/0;var xe=(R=ue.site).x,ke=R.y,Le=ke-C;if(!Le)return xe;var Ve=xe-F,Je=1/ae-1/Le,at=Ve/Le;return Je?(-at+Math.sqrt(at*at-2*Je*(Ve*Ve/(-2*Le)-ke+Le/2+q-ae/2)))/Je+F:(F+xe)/2}function Er(ce,C){var R=ce.N;if(R)return wr(R,C);var F=ce.site;return F.y===C?F.x:1/0}function qr(ce){this.site=ce,this.edges=[]}function Hr(ce,C){return C.angle-ce.angle}function $r(){Sn(this),this.x=this.y=this.arc=this.site=this.cy=null}function tn(ce){var C=ce.P,R=ce.N;if(C&&R){var F=C.site,q=ce.site,ae=R.site;if(F!==ae){var ue=q.x,xe=q.y,ke=F.x-ue,Le=F.y-xe,Ve=ae.x-ue,Je=2*(ke*(At=ae.y-xe)-Le*Ve);if(!(Je>=-1e-12)){var at=ke*ke+Le*Le,_t=Ve*Ve+At*At,Et=(At*at-Le*_t)/Je,kt=(ke*_t-Ve*at)/Je,At=kt+xe,xt=Rr.pop()||new $r;xt.arc=ce,xt.site=q,xt.x=Et+ue,xt.y=At+Math.sqrt(Et*Et+kt*kt),xt.cy=At,ce.circle=xt;for(var zt=null,Ot=or._;Ot;)if(xt.y<Ot.y||xt.y===Ot.y&&xt.x<=Ot.x){if(!Ot.L){zt=Ot.P;break}Ot=Ot.L}else{if(!Ot.R){zt=Ot;break}Ot=Ot.R}or.insert(zt,xt),zt||(Ct=xt)}}}}function vn(ce){var C=ce.circle;C&&(C.P||(Ct=C.N),or.remove(C),Rr.push(C),Sn(C),ce.circle=null)}function _n(ce,C){var R=ce.b;if(R)return!0;var F,q,ae=ce.a,ue=C[0][0],xe=C[1][0],ke=C[0][1],Le=C[1][1],Ve=ce.l,Je=ce.r,at=Ve.x,_t=Ve.y,Et=Je.x,kt=Je.y,At=(at+Et)/2,xt=(_t+kt)/2;if(kt===_t){if(At<ue||At>=xe)return;if(at>Et){if(ae){if(ae.y>=Le)return}else ae={x:At,y:ke};R={x:At,y:Le}}else{if(ae){if(ae.y<ke)return}else ae={x:At,y:Le};R={x:At,y:ke}}}else if(q=xt-(F=(at-Et)/(kt-_t))*At,F<-1||F>1)if(at>Et){if(ae){if(ae.y>=Le)return}else ae={x:(ke-q)/F,y:ke};R={x:(Le-q)/F,y:Le}}else{if(ae){if(ae.y<ke)return}else ae={x:(Le-q)/F,y:Le};R={x:(ke-q)/F,y:ke}}else if(_t<kt){if(ae){if(ae.x>=xe)return}else ae={x:ue,y:F*ue+q};R={x:xe,y:F*xe+q}}else{if(ae){if(ae.x<ue)return}else ae={x:xe,y:F*xe+q};R={x:ue,y:F*ue+q}}return ce.a=ae,ce.b=R,!0}function Tn(ce,C){this.l=ce,this.r=C,this.a=this.b=null}function Cn(ce,C,R,F){var q=new Tn(ce,C);return oa.push(q),R&&Zn(q,ce,C,R),F&&Zn(q,C,ce,F),tr[ce.i].edges.push(new Aa(q,ce,C)),tr[C.i].edges.push(new Aa(q,C,ce)),q}function On(ce,C,R){var F=new Tn(ce,null);return F.a=C,F.b=R,oa.push(F),F}function Zn(ce,C,R,F){ce.a||ce.b?ce.l===R?ce.b=F:ce.a=F:(ce.a=F,ce.l=C,ce.r=R)}function Aa(ce,C,R){var F=ce.a,q=ce.b;this.edge=ce,this.site=C,this.angle=R?Math.atan2(R.y-C.y,R.x-C.x):ce.l===C?Math.atan2(q.x-F.x,F.y-q.y):Math.atan2(F.x-q.x,q.y-F.y)}function Ma(){this._=null}function Sn(ce){ce.U=ce.C=ce.L=ce.R=ce.P=ce.N=null}function Qn(ce,C){var R=C,F=C.R,q=R.U;q?q.L===R?q.L=F:q.R=F:ce._=F,F.U=q,R.U=F,R.R=F.L,R.R&&(R.R.U=R),F.L=R}function Kn(ce,C){var R=C,F=C.L,q=R.U;q?q.L===R?q.L=F:q.R=F:ce._=F,F.U=q,R.U=F,R.L=F.R,R.L&&(R.L.U=R),F.R=R}function Da(ce){for(;ce.L;)ce=ce.L;return ce}function di(ce,C){var R,F,q,ae=ce.sort(Di).pop();for(oa=[],tr=new Array(ce.length),mr=new Ma,or=new Ma;;)if(q=Ct,ae&&(!q||ae.y<q.y||ae.y===q.y&&ae.x<q.x))ae.x===R&&ae.y===F||(tr[ae.i]=new qr(ae),xr(ae),R=ae.x,F=ae.y),ae=ce.pop();else{if(!q)break;vr(q.arc)}C&&(function(xe){for(var ke,Le,Ve,Je,at,_t=oa,Et=(Le=xe[0][0],Ve=xe[0][1],Je=xe[1][0],at=xe[1][1],function(At){var xt,zt=At.a,Ot=At.b,jt=zt.x,rr=zt.y,dr=0,Sr=1,kr=Ot.x-jt,Kr=Ot.y-rr;if(xt=Le-jt,kr||!(xt>0)){if(xt/=kr,kr<0){if(xt<dr)return;xt<Sr&&(Sr=xt)}else if(kr>0){if(xt>Sr)return;xt>dr&&(dr=xt)}if(xt=Je-jt,kr||!(xt<0)){if(xt/=kr,kr<0){if(xt>Sr)return;xt>dr&&(dr=xt)}else if(kr>0){if(xt<dr)return;xt<Sr&&(Sr=xt)}if(xt=Ve-rr,Kr||!(xt>0)){if(xt/=Kr,Kr<0){if(xt<dr)return;xt<Sr&&(Sr=xt)}else if(Kr>0){if(xt>Sr)return;xt>dr&&(dr=xt)}if(xt=at-rr,Kr||!(xt<0)){if(xt/=Kr,Kr<0){if(xt>Sr)return;xt>dr&&(dr=xt)}else if(Kr>0){if(xt<dr)return;xt<Sr&&(Sr=xt)}return dr>0&&(At.a={x:jt+dr*kr,y:rr+dr*Kr}),Sr<1&&(At.b={x:jt+Sr*kr,y:rr+Sr*Kr}),At}}}}}),kt=_t.length;kt--;)(!_n(ke=_t[kt],xe)||!Et(ke)||i(ke.a.x-ke.b.x)<mt&&i(ke.a.y-ke.b.y)<mt)&&(ke.a=ke.b=null,_t.splice(kt,1))}(C),function(xe){for(var ke,Le,Ve,Je,at,_t,Et,kt,At,xt,zt=xe[0][0],Ot=xe[1][0],jt=xe[0][1],rr=xe[1][1],dr=tr,Sr=dr.length;Sr--;)if((at=dr[Sr])&&at.prepare())for(kt=(Et=at.edges).length,_t=0;_t<kt;)Ve=(xt=Et[_t].end()).x,Je=xt.y,ke=(At=Et[++_t%kt].start()).x,Le=At.y,(i(Ve-ke)>mt||i(Je-Le)>mt)&&(Et.splice(_t,0,new Aa(On(at.site,xt,i(Ve-zt)<mt&&rr-Je>mt?{x:zt,y:i(ke-zt)<mt?Le:rr}:i(Je-rr)<mt&&Ot-Ve>mt?{x:i(Le-rr)<mt?ke:Ot,y:rr}:i(Ve-Ot)<mt&&Je-jt>mt?{x:Ot,y:i(ke-Ot)<mt?Le:jt}:i(Je-jt)<mt&&Ve-zt>mt?{x:i(Le-jt)<mt?ke:zt,y:jt}:null),at.site,null)),++kt)}(C));var ue={cells:tr,edges:oa};return mr=or=oa=tr=null,ue}function Di(ce,C){return C.y-ce.y||C.x-ce.x}qr.prototype.prepare=function(){for(var ce,C=this.edges,R=C.length;R--;)(ce=C[R].edge).b&&ce.a||C.splice(R,1);return C.sort(Hr),C.length},Aa.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Ma.prototype={insert:function(ce,C){var R,F,q;if(ce){if(C.P=ce,C.N=ce.N,ce.N&&(ce.N.P=C),ce.N=C,ce.R){for(ce=ce.R;ce.L;)ce=ce.L;ce.L=C}else ce.R=C;R=ce}else this._?(ce=Da(this._),C.P=null,C.N=ce,ce.P=ce.L=C,R=ce):(C.P=C.N=null,this._=C,R=null);for(C.L=C.R=null,C.U=R,C.C=!0,ce=C;R&&R.C;)R===(F=R.U).L?(q=F.R)&&q.C?(R.C=q.C=!1,F.C=!0,ce=F):(ce===R.R&&(Qn(this,R),R=(ce=R).U),R.C=!1,F.C=!0,Kn(this,F)):(q=F.L)&&q.C?(R.C=q.C=!1,F.C=!0,ce=F):(ce===R.L&&(Kn(this,R),R=(ce=R).U),R.C=!1,F.C=!0,Qn(this,F)),R=ce.U;this._.C=!1},remove:function(ce){ce.N&&(ce.N.P=ce.P),ce.P&&(ce.P.N=ce.N),ce.N=ce.P=null;var C,R,F,q=ce.U,ae=ce.L,ue=ce.R;if(R=ae?ue?Da(ue):ae:ue,q?q.L===ce?q.L=R:q.R=R:this._=R,ae&&ue?(F=R.C,R.C=ce.C,R.L=ae,ae.U=R,R!==ue?(q=R.U,R.U=ce.U,ce=R.R,q.L=ce,R.R=ue,ue.U=R):(R.U=q,q=R,ce=R.R)):(F=ce.C,ce=R),ce&&(ce.U=q),!F)if(ce&&ce.C)ce.C=!1;else{do{if(ce===this._)break;if(ce===q.L){if((C=q.R).C&&(C.C=!1,q.C=!0,Qn(this,q),C=q.R),C.L&&C.L.C||C.R&&C.R.C){C.R&&C.R.C||(C.L.C=!1,C.C=!0,Kn(this,C),C=q.R),C.C=q.C,q.C=C.R.C=!1,Qn(this,q),ce=this._;break}}else if((C=q.L).C&&(C.C=!1,q.C=!0,Kn(this,q),C=q.L),C.L&&C.L.C||C.R&&C.R.C){C.L&&C.L.C||(C.R.C=!1,C.C=!0,Qn(this,C),C=q.L),C.C=q.C,q.C=C.L.C=!1,Kn(this,q),ce=this._;break}C.C=!0,ce=q,q=q.U}while(!ce.C);ce&&(ce.C=!1)}}},m.geom.voronoi=function(ce){var C=Br,R=rn,F=C,q=R,ae=fo;if(ce)return ue(ce);function ue(ke){var Le=new Array(ke.length),Ve=ae[0][0],Je=ae[0][1],at=ae[1][0],_t=ae[1][1];return di(xe(ke),ae).cells.forEach(function(Et,kt){var At=Et.edges,xt=Et.site;(Le[kt]=At.length?At.map(function(zt){var Ot=zt.start();return[Ot.x,Ot.y]}):xt.x>=Ve&&xt.x<=at&&xt.y>=Je&&xt.y<=_t?[[Ve,_t],[at,_t],[at,Je],[Ve,Je]]:[]).point=ke[kt]}),Le}function xe(ke){return ke.map(function(Le,Ve){return{x:Math.round(F(Le,Ve)/mt)*mt,y:Math.round(q(Le,Ve)/mt)*mt,i:Ve}})}return ue.links=function(ke){return di(xe(ke)).edges.filter(function(Le){return Le.l&&Le.r}).map(function(Le){return{source:ke[Le.l.i],target:ke[Le.r.i]}})},ue.triangles=function(ke){var Le=[];return di(xe(ke)).cells.forEach(function(Ve,Je){for(var at,_t,Et,kt,At=Ve.site,xt=Ve.edges.sort(Hr),zt=-1,Ot=xt.length,jt=xt[Ot-1].edge,rr=jt.l===At?jt.r:jt.l;++zt<Ot;)at=rr,rr=(jt=xt[zt].edge).l===At?jt.r:jt.l,Je<at.i&&Je<rr.i&&(Et=at,kt=rr,((_t=At).x-kt.x)*(Et.y-_t.y)-(_t.x-Et.x)*(kt.y-_t.y)<0)&&Le.push([ke[Je],ke[at.i],ke[rr.i]])}),Le},ue.x=function(ke){return arguments.length?(F=gr(C=ke),ue):C},ue.y=function(ke){return arguments.length?(q=gr(R=ke),ue):R},ue.clipExtent=function(ke){return arguments.length?(ae=ke==null?fo:ke,ue):ae===fo?null:ae},ue.size=function(ke){return arguments.length?ue.clipExtent(ke&&[[0,0],ke]):ae===fo?null:ae&&ae[1]},ue};var fo=[[-1e6,-1e6],[1e6,1e6]];function Wa(ce){return ce.x}function Za(ce){return ce.y}function Ki(ce,C,R,F,q,ae){if(!ce(C,R,F,q,ae)){var ue=.5*(R+q),xe=.5*(F+ae),ke=C.nodes;ke[0]&&Ki(ce,ke[0],R,F,ue,xe),ke[1]&&Ki(ce,ke[1],ue,F,q,xe),ke[2]&&Ki(ce,ke[2],R,xe,ue,ae),ke[3]&&Ki(ce,ke[3],ue,xe,q,ae)}}function Na(ce,C,R,F,q,ae,ue){var xe,ke=1/0;return function Le(Ve,Je,at,_t,Et){if(!(Je>ae||at>ue||_t<F||Et<q)){if(kt=Ve.point){var kt,At=C-Ve.x,xt=R-Ve.y,zt=At*At+xt*xt;if(zt<ke){var Ot=Math.sqrt(ke=zt);F=C-Ot,q=R-Ot,ae=C+Ot,ue=R+Ot,xe=kt}}for(var jt=Ve.nodes,rr=.5*(Je+_t),dr=.5*(at+Et),Sr=(R>=dr)<<1|C>=rr,kr=Sr+4;Sr<kr;++Sr)if(Ve=jt[3&Sr])switch(3&Sr){case 0:Le(Ve,Je,at,rr,dr);break;case 1:Le(Ve,rr,at,_t,dr);break;case 2:Le(Ve,Je,dr,rr,Et);break;case 3:Le(Ve,rr,dr,_t,Et)}}}(ce,F,q,ae,ue),xe}function ho(ce,C){ce=m.rgb(ce),C=m.rgb(C);var R=ce.r,F=ce.g,q=ce.b,ae=C.r-R,ue=C.g-F,xe=C.b-q;return function(ke){return"#"+fr(Math.round(R+ae*ke))+fr(Math.round(F+ue*ke))+fr(Math.round(q+xe*ke))}}function vo(ce,C){var R,F={},q={};for(R in ce)R in C?F[R]=Bi(ce[R],C[R]):q[R]=ce[R];for(R in C)R in ce||(q[R]=C[R]);return function(ae){for(R in F)q[R]=F[R](ae);return q}}function wi(ce,C){return ce=+ce,C=+C,function(R){return ce*(1-R)+C*R}}function $i(ce,C){var R,F,q,ae=yo.lastIndex=So.lastIndex=0,ue=-1,xe=[],ke=[];for(ce+="",C+="";(R=yo.exec(ce))&&(F=So.exec(C));)(q=F.index)>ae&&(q=C.slice(ae,q),xe[ue]?xe[ue]+=q:xe[++ue]=q),(R=R[0])===(F=F[0])?xe[ue]?xe[ue]+=F:xe[++ue]=F:(xe[++ue]=null,ke.push({i:ue,x:wi(R,F)})),ae=So.lastIndex;return ae<C.length&&(q=C.slice(ae),xe[ue]?xe[ue]+=q:xe[++ue]=q),xe.length<2?ke[0]?(C=ke[0].x,function(Le){return C(Le)+""}):function(){return C}:(C=ke.length,function(Le){for(var Ve,Je=0;Je<C;++Je)xe[(Ve=ke[Je]).i]=Ve.x(Le);return xe.join("")})}m.geom.delaunay=function(ce){return m.geom.voronoi().triangles(ce)},m.geom.quadtree=function(ce,C,R,F,q){var ae,ue=Br,xe=rn;if(ae=arguments.length)return ue=Wa,xe=Za,ae===3&&(q=R,F=C,R=C=0),ke(ce);function ke(Le){var Ve,Je,at,_t,Et,kt,At,xt,zt,Ot=gr(ue),jt=gr(xe);if(C!=null)kt=C,At=R,xt=F,zt=q;else if(xt=zt=-(kt=At=1/0),Je=[],at=[],Et=Le.length,ae)for(_t=0;_t<Et;++_t)(Ve=Le[_t]).x<kt&&(kt=Ve.x),Ve.y<At&&(At=Ve.y),Ve.x>xt&&(xt=Ve.x),Ve.y>zt&&(zt=Ve.y),Je.push(Ve.x),at.push(Ve.y);else for(_t=0;_t<Et;++_t){var rr=+Ot(Ve=Le[_t],_t),dr=+jt(Ve,_t);rr<kt&&(kt=rr),dr<At&&(At=dr),rr>xt&&(xt=rr),dr>zt&&(zt=dr),Je.push(rr),at.push(dr)}var Sr=xt-kt,kr=zt-At;function Kr(sn,Un,Xn,ha,Gr,An,Jn,Yn){if(!isNaN(Xn)&&!isNaN(ha))if(sn.leaf){var ia=sn.x,da=sn.y;if(ia!=null)if(i(ia-Xn)+i(da-ha)<.01)Jr(sn,Un,Xn,ha,Gr,An,Jn,Yn);else{var La=sn.point;sn.x=sn.y=sn.point=null,Jr(sn,La,ia,da,Gr,An,Jn,Yn),Jr(sn,Un,Xn,ha,Gr,An,Jn,Yn)}else sn.x=Xn,sn.y=ha,sn.point=Un}else Jr(sn,Un,Xn,ha,Gr,An,Jn,Yn)}function Jr(sn,Un,Xn,ha,Gr,An,Jn,Yn){var ia=.5*(Gr+Jn),da=.5*(An+Yn),La=Xn>=ia,ea=ha>=da,_a=ea<<1|La;sn.leaf=!1,La?Gr=ia:Jn=ia,ea?An=da:Yn=da,Kr(sn=sn.nodes[_a]||(sn.nodes[_a]={leaf:!0,nodes:[],point:null,x:null,y:null}),Un,Xn,ha,Gr,An,Jn,Yn)}Sr>kr?zt=At+Sr:xt=kt+kr;var pn={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(sn){Kr(pn,sn,+Ot(sn,++_t),+jt(sn,_t),kt,At,xt,zt)},visit:function(sn){Ki(sn,pn,kt,At,xt,zt)},find:function(sn){return Na(pn,sn[0],sn[1],kt,At,xt,zt)}};if(_t=-1,C==null){for(;++_t<Et;)Kr(pn,Le[_t],Je[_t],at[_t],kt,At,xt,zt);--_t}else Le.forEach(pn.add);return Je=at=Le=Ve=null,pn}return ke.x=function(Le){return arguments.length?(ue=Le,ke):ue},ke.y=function(Le){return arguments.length?(xe=Le,ke):xe},ke.extent=function(Le){return arguments.length?(Le==null?C=R=F=q=null:(C=+Le[0][0],R=+Le[0][1],F=+Le[1][0],q=+Le[1][1]),ke):C==null?null:[[C,R],[F,q]]},ke.size=function(Le){return arguments.length?(Le==null?C=R=F=q=null:(C=R=0,F=+Le[0],q=+Le[1]),ke):C==null?null:[F-C,q-R]},ke},m.interpolateRgb=ho,m.interpolateObject=vo,m.interpolateNumber=wi,m.interpolateString=$i;var yo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,So=new RegExp(yo.source,"g");function Bi(ce,C){for(var R,F=m.interpolators.length;--F>=0&&!(R=m.interpolators[F](ce,C)););return R}function mi(ce,C){var R,F=[],q=[],ae=ce.length,ue=C.length,xe=Math.min(ce.length,C.length);for(R=0;R<xe;++R)F.push(Bi(ce[R],C[R]));for(;R<ae;++R)q[R]=ce[R];for(;R<ue;++R)q[R]=C[R];return function(ke){for(R=0;R<xe;++R)q[R]=F[R](ke);return q}}m.interpolate=Bi,m.interpolators=[function(ce,C){var R=typeof C;return(R==="string"?cr.has(C.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(C)?ho:$i:C instanceof Xe?ho:Array.isArray(C)?mi:R==="object"&&isNaN(C)?vo:wi)(ce,C)}],m.interpolateArray=mi;var Zi=function(){return E},Ms=m.map({linear:Zi,poly:function(ce){return function(C){return Math.pow(C,ce)}},quad:function(){return Ps},cubic:function(){return Is},sin:function(){return Os},exp:function(){return Co},circle:function(){return Po},elastic:function(ce,C){var R;return arguments.length<2&&(C=.45),arguments.length?R=C/Vt*Math.asin(1/ce):(ce=1,R=C/4),function(F){return 1+ce*Math.pow(2,-10*F)*Math.sin((F-R)*Vt/C)}},back:function(ce){return ce||(ce=1.70158),function(C){return C*C*((ce+1)*C-ce)}},bounce:function(){return qo}}),Cs=m.map({in:E,out:ys,"in-out":as,"out-in":function(ce){return as(ys(ce))}});function Xa(ce){return function(C){return C<=0?0:C>=1?1:ce(C)}}function ys(ce){return function(C){return 1-ce(1-C)}}function as(ce){return function(C){return .5*(C<.5?ce(2*C):2-ce(2-2*C))}}function Ps(ce){return ce*ce}function Is(ce){return ce*ce*ce}function As(ce){if(ce<=0)return 0;if(ce>=1)return 1;var C=ce*ce,R=C*ce;return 4*(ce<.5?R:3*(ce-C)+R-.75)}function Os(ce){return 1-Math.cos(ce*Gt)}function Co(ce){return Math.pow(2,10*(ce-1))}function Po(ce){return 1-Math.sqrt(1-ce*ce)}function qo(ce){return ce<1/2.75?7.5625*ce*ce:ce<2/2.75?7.5625*(ce-=1.5/2.75)*ce+.75:ce<2.5/2.75?7.5625*(ce-=2.25/2.75)*ce+.9375:7.5625*(ce-=2.625/2.75)*ce+.984375}function Go(ce,C){return C-=ce,function(R){return Math.round(ce+C*R)}}function Yo(ce){var C,R,F,q=[ce.a,ce.b],ae=[ce.c,ce.d],ue=xo(q),xe=is(q,ae),ke=xo(((C=ae)[0]+=(F=-xe)*(R=q)[0],C[1]+=F*R[1],C))||0;q[0]*ae[1]<ae[0]*q[1]&&(q[0]*=-1,q[1]*=-1,ue*=-1,xe*=-1),this.rotate=(ue?Math.atan2(q[1],q[0]):Math.atan2(-ae[0],ae[1]))*It,this.translate=[ce.e,ce.f],this.scale=[ue,ke],this.skew=ke?Math.atan2(xe,ke)*It:0}function is(ce,C){return ce[0]*C[0]+ce[1]*C[1]}function xo(ce){var C=Math.sqrt(is(ce,ce));return C&&(ce[0]/=C,ce[1]/=C),C}m.ease=function(ce){var C=ce.indexOf("-"),R=C>=0?ce.slice(0,C):ce,F=C>=0?ce.slice(C+1):"in";return R=Ms.get(R)||Zi,Xa((F=Cs.get(F)||E)(R.apply(null,v.call(arguments,1))))},m.interpolateHcl=function(ce,C){ce=m.hcl(ce),C=m.hcl(C);var R=ce.h,F=ce.c,q=ce.l,ae=C.h-R,ue=C.c-F,xe=C.l-q;return isNaN(ue)&&(ue=0,F=isNaN(F)?C.c:F),isNaN(ae)?(ae=0,R=isNaN(R)?C.h:R):ae>180?ae-=360:ae<-180&&(ae+=360),function(ke){return rt(R+ae*ke,F+ue*ke,q+xe*ke)+""}},m.interpolateHsl=function(ce,C){ce=m.hsl(ce),C=m.hsl(C);var R=ce.h,F=ce.s,q=ce.l,ae=C.h-R,ue=C.s-F,xe=C.l-q;return isNaN(ue)&&(ue=0,F=isNaN(F)?C.s:F),isNaN(ae)?(ae=0,R=isNaN(R)?C.h:R):ae>180?ae-=360:ae<-180&&(ae+=360),function(ke){return it(R+ae*ke,F+ue*ke,q+xe*ke)+""}},m.interpolateLab=function(ce,C){ce=m.lab(ce),C=m.lab(C);var R=ce.l,F=ce.a,q=ce.b,ae=C.l-R,ue=C.a-F,xe=C.b-q;return function(ke){return Lt(R+ae*ke,F+ue*ke,q+xe*ke)+""}},m.interpolateRound=Go,m.transform=function(ce){var C=x.createElementNS(m.ns.prefix.svg,"g");return(m.transform=function(R){if(R!=null){C.setAttribute("transform",R);var F=C.transform.baseVal.consolidate()}return new Yo(F?F.matrix:xs)})(ce)},Yo.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var xs={a:1,b:0,c:0,d:1,e:0,f:0};function po(ce){return ce.length?ce.pop()+",":""}function Wo(ce,C){var R=[],F=[];return ce=m.transform(ce),C=m.transform(C),function(q,ae,ue,xe){if(q[0]!==ae[0]||q[1]!==ae[1]){var ke=ue.push("translate(",null,",",null,")");xe.push({i:ke-4,x:wi(q[0],ae[0])},{i:ke-2,x:wi(q[1],ae[1])})}else(ae[0]||ae[1])&&ue.push("translate("+ae+")")}(ce.translate,C.translate,R,F),function(q,ae,ue,xe){q!==ae?(q-ae>180?ae+=360:ae-q>180&&(q+=360),xe.push({i:ue.push(po(ue)+"rotate(",null,")")-2,x:wi(q,ae)})):ae&&ue.push(po(ue)+"rotate("+ae+")")}(ce.rotate,C.rotate,R,F),function(q,ae,ue,xe){q!==ae?xe.push({i:ue.push(po(ue)+"skewX(",null,")")-2,x:wi(q,ae)}):ae&&ue.push(po(ue)+"skewX("+ae+")")}(ce.skew,C.skew,R,F),function(q,ae,ue,xe){if(q[0]!==ae[0]||q[1]!==ae[1]){var ke=ue.push(po(ue)+"scale(",null,",",null,")");xe.push({i:ke-4,x:wi(q[0],ae[0])},{i:ke-2,x:wi(q[1],ae[1])})}else ae[0]===1&&ae[1]===1||ue.push(po(ue)+"scale("+ae+")")}(ce.scale,C.scale,R,F),ce=C=null,function(q){for(var ae,ue=-1,xe=F.length;++ue<xe;)R[(ae=F[ue]).i]=ae.x(q);return R.join("")}}function bs(ce,C){return C=(C-=ce=+ce)||1/C,function(R){return(R-ce)/C}}function Io(ce,C){return C=(C-=ce=+ce)||1/C,function(R){return Math.max(0,Math.min(1,(R-ce)/C))}}function Ga(ce){for(var C=ce.source,R=ce.target,F=function(ue,xe){if(ue===xe)return ue;for(var ke=je(ue),Le=je(xe),Ve=ke.pop(),Je=Le.pop(),at=null;Ve===Je;)at=Ve,Ve=ke.pop(),Je=Le.pop();return at}(C,R),q=[C];C!==F;)C=C.parent,q.push(C);for(var ae=q.length;R!==F;)q.splice(ae,0,R),R=R.parent;return q}function je(ce){for(var C=[],R=ce.parent;R!=null;)C.push(ce),ce=R,R=R.parent;return C.push(ce),C}function Ye(ce){ce.fixed|=2}function et(ce){ce.fixed&=-7}function lt(ce){ce.fixed|=4,ce.px=ce.x,ce.py=ce.y}function gt(ce){ce.fixed&=-5}m.interpolateTransform=Wo,m.layout={},m.layout.bundle=function(){return function(ce){for(var C=[],R=-1,F=ce.length;++R<F;)C.push(Ga(ce[R]));return C}},m.layout.chord=function(){var ce,C,R,F,q,ae,ue,xe={},ke=0;function Le(){var Je,at,_t,Et,kt,At={},xt=[],zt=m.range(F),Ot=[];for(ce=[],C=[],Je=0,Et=-1;++Et<F;){for(at=0,kt=-1;++kt<F;)at+=R[Et][kt];xt.push(at),Ot.push(m.range(F)),Je+=at}for(q&&zt.sort(function(pn,sn){return q(xt[pn],xt[sn])}),ae&&Ot.forEach(function(pn,sn){pn.sort(function(Un,Xn){return ae(R[sn][Un],R[sn][Xn])})}),Je=(Vt-ke*F)/Je,at=0,Et=-1;++Et<F;){for(_t=at,kt=-1;++kt<F;){var jt=zt[Et],rr=Ot[jt][kt],dr=R[jt][rr],Sr=at,kr=at+=dr*Je;At[jt+"-"+rr]={index:jt,subindex:rr,startAngle:Sr,endAngle:kr,value:dr}}C[jt]={index:jt,startAngle:_t,endAngle:at,value:xt[jt]},at+=ke}for(Et=-1;++Et<F;)for(kt=Et-1;++kt<F;){var Kr=At[Et+"-"+kt],Jr=At[kt+"-"+Et];(Kr.value||Jr.value)&&ce.push(Kr.value<Jr.value?{source:Jr,target:Kr}:{source:Kr,target:Jr})}ue&&Ve()}function Ve(){ce.sort(function(Je,at){return ue((Je.source.value+Je.target.value)/2,(at.source.value+at.target.value)/2)})}return xe.matrix=function(Je){return arguments.length?(F=(R=Je)&&R.length,ce=C=null,xe):R},xe.padding=function(Je){return arguments.length?(ke=Je,ce=C=null,xe):ke},xe.sortGroups=function(Je){return arguments.length?(q=Je,ce=C=null,xe):q},xe.sortSubgroups=function(Je){return arguments.length?(ae=Je,ce=null,xe):ae},xe.sortChords=function(Je){return arguments.length?(ue=Je,ce&&Ve(),xe):ue},xe.chords=function(){return ce||Le(),ce},xe.groups=function(){return C||Le(),C},xe},m.layout.force=function(){var ce,C,R,F,q,ae,ue={},xe=m.dispatch("start","tick","end"),ke=[1,1],Le=.9,Ve=pt,Je=St,at=-30,_t=Jt,Et=.1,kt=.64,At=[],xt=[];function zt(jt){return function(rr,dr,Sr,kr){if(rr.point!==jt){var Kr=rr.cx-jt.x,Jr=rr.cy-jt.y,pn=kr-dr,sn=Kr*Kr+Jr*Jr;if(pn*pn/kt<sn){if(sn<_t){var Un=rr.charge/sn;jt.px-=Kr*Un,jt.py-=Jr*Un}return!0}rr.point&&sn&&sn<_t&&(Un=rr.pointCharge/sn,jt.px-=Kr*Un,jt.py-=Jr*Un)}return!rr.charge}}function Ot(jt){jt.px=m.event.x,jt.py=m.event.y,ue.resume()}return ue.tick=function(){if((R*=.99)<.005)return ce=null,xe.end({type:"end",alpha:R=0}),!0;var jt,rr,dr,Sr,kr,Kr,Jr,pn,sn,Un=At.length,Xn=xt.length;for(rr=0;rr<Xn;++rr)Sr=(dr=xt[rr]).source,(Kr=(pn=(kr=dr.target).x-Sr.x)*pn+(sn=kr.y-Sr.y)*sn)&&(pn*=Kr=R*q[rr]*((Kr=Math.sqrt(Kr))-F[rr])/Kr,sn*=Kr,kr.x-=pn*(Jr=Sr.weight+kr.weight?Sr.weight/(Sr.weight+kr.weight):.5),kr.y-=sn*Jr,Sr.x+=pn*(Jr=1-Jr),Sr.y+=sn*Jr);if((Jr=R*Et)&&(pn=ke[0]/2,sn=ke[1]/2,rr=-1,Jr))for(;++rr<Un;)(dr=At[rr]).x+=(pn-dr.x)*Jr,dr.y+=(sn-dr.y)*Jr;if(at)for(function ha(Gr,An,Jn){var Yn=0,ia=0;if(Gr.charge=0,!Gr.leaf)for(var da,La=Gr.nodes,ea=La.length,_a=-1;++_a<ea;)(da=La[_a])!=null&&(ha(da,An,Jn),Gr.charge+=da.charge,Yn+=da.charge*da.cx,ia+=da.charge*da.cy);if(Gr.point){Gr.leaf||(Gr.point.x+=Math.random()-.5,Gr.point.y+=Math.random()-.5);var ya=An*Jn[Gr.point.index];Gr.charge+=Gr.pointCharge=ya,Yn+=ya*Gr.point.x,ia+=ya*Gr.point.y}Gr.cx=Yn/Gr.charge,Gr.cy=ia/Gr.charge}(jt=m.geom.quadtree(At),R,ae),rr=-1;++rr<Un;)(dr=At[rr]).fixed||jt.visit(zt(dr));for(rr=-1;++rr<Un;)(dr=At[rr]).fixed?(dr.x=dr.px,dr.y=dr.py):(dr.x-=(dr.px-(dr.px=dr.x))*Le,dr.y-=(dr.py-(dr.py=dr.y))*Le);xe.tick({type:"tick",alpha:R})},ue.nodes=function(jt){return arguments.length?(At=jt,ue):At},ue.links=function(jt){return arguments.length?(xt=jt,ue):xt},ue.size=function(jt){return arguments.length?(ke=jt,ue):ke},ue.linkDistance=function(jt){return arguments.length?(Ve=typeof jt=="function"?jt:+jt,ue):Ve},ue.distance=ue.linkDistance,ue.linkStrength=function(jt){return arguments.length?(Je=typeof jt=="function"?jt:+jt,ue):Je},ue.friction=function(jt){return arguments.length?(Le=+jt,ue):Le},ue.charge=function(jt){return arguments.length?(at=typeof jt=="function"?jt:+jt,ue):at},ue.chargeDistance=function(jt){return arguments.length?(_t=jt*jt,ue):Math.sqrt(_t)},ue.gravity=function(jt){return arguments.length?(Et=+jt,ue):Et},ue.theta=function(jt){return arguments.length?(kt=jt*jt,ue):Math.sqrt(kt)},ue.alpha=function(jt){return arguments.length?(jt=+jt,R?jt>0?R=jt:(ce.c=null,ce.t=NaN,ce=null,xe.end({type:"end",alpha:R=0})):jt>0&&(xe.start({type:"start",alpha:R=jt}),ce=nn(ue.tick)),ue):R},ue.start=function(){var jt,rr,dr,Sr=At.length,kr=xt.length,Kr=ke[0],Jr=ke[1];for(jt=0;jt<Sr;++jt)(dr=At[jt]).index=jt,dr.weight=0;for(jt=0;jt<kr;++jt)typeof(dr=xt[jt]).source=="number"&&(dr.source=At[dr.source]),typeof dr.target=="number"&&(dr.target=At[dr.target]),++dr.source.weight,++dr.target.weight;for(jt=0;jt<Sr;++jt)dr=At[jt],isNaN(dr.x)&&(dr.x=pn("x",Kr)),isNaN(dr.y)&&(dr.y=pn("y",Jr)),isNaN(dr.px)&&(dr.px=dr.x),isNaN(dr.py)&&(dr.py=dr.y);if(F=[],typeof Ve=="function")for(jt=0;jt<kr;++jt)F[jt]=+Ve.call(this,xt[jt],jt);else for(jt=0;jt<kr;++jt)F[jt]=Ve;if(q=[],typeof Je=="function")for(jt=0;jt<kr;++jt)q[jt]=+Je.call(this,xt[jt],jt);else for(jt=0;jt<kr;++jt)q[jt]=Je;if(ae=[],typeof at=="function")for(jt=0;jt<Sr;++jt)ae[jt]=+at.call(this,At[jt],jt);else for(jt=0;jt<Sr;++jt)ae[jt]=at;function pn(sn,Un){if(!rr){for(rr=new Array(Sr),An=0;An<Sr;++An)rr[An]=[];for(An=0;An<kr;++An){var Xn=xt[An];rr[Xn.source.index].push(Xn.target),rr[Xn.target.index].push(Xn.source)}}for(var ha,Gr=rr[jt],An=-1,Jn=Gr.length;++An<Jn;)if(!isNaN(ha=Gr[An][sn]))return ha;return Math.random()*Un}return ue.resume()},ue.resume=function(){return ue.alpha(.1)},ue.stop=function(){return ue.alpha(0)},ue.drag=function(){if(C||(C=m.behavior.drag().origin(E).on("dragstart.force",Ye).on("drag.force",Ot).on("dragend.force",et)),!arguments.length)return C;this.on("mouseover.force",lt).on("mouseout.force",gt).call(C)},m.rebind(ue,xe,"on")};var pt=20,St=1,Jt=1/0;function $t(ce,C){return m.rebind(ce,C,"sort","children","value"),ce.nodes=ce,ce.links=Dr,ce}function Yt(ce,C){for(var R=[ce];(ce=R.pop())!=null;)if(C(ce),(q=ce.children)&&(F=q.length))for(var F,q;--F>=0;)R.push(q[F])}function ar(ce,C){for(var R=[ce],F=[];(ce=R.pop())!=null;)if(F.push(ce),(ae=ce.children)&&(q=ae.length))for(var q,ae,ue=-1;++ue<q;)R.push(ae[ue]);for(;(ce=F.pop())!=null;)C(ce)}function pr(ce){return ce.children}function br(ce){return ce.value}function _r(ce,C){return C.value-ce.value}function Dr(ce){return m.merge(ce.map(function(C){return(C.children||[]).map(function(R){return{source:C,target:R}})}))}m.layout.hierarchy=function(){var ce=_r,C=pr,R=br;function F(q){var ae,ue=[q],xe=[];for(q.depth=0;(ae=ue.pop())!=null;)if(xe.push(ae),(Le=C.call(F,ae,ae.depth))&&(ke=Le.length)){for(var ke,Le,Ve;--ke>=0;)ue.push(Ve=Le[ke]),Ve.parent=ae,Ve.depth=ae.depth+1;R&&(ae.value=0),ae.children=Le}else R&&(ae.value=+R.call(F,ae,ae.depth)||0),delete ae.children;return ar(q,function(Je){var at,_t;ce&&(at=Je.children)&&at.sort(ce),R&&(_t=Je.parent)&&(_t.value+=Je.value)}),xe}return F.sort=function(q){return arguments.length?(ce=q,F):ce},F.children=function(q){return arguments.length?(C=q,F):C},F.value=function(q){return arguments.length?(R=q,F):R},F.revalue=function(q){return R&&(Yt(q,function(ae){ae.children&&(ae.value=0)}),ar(q,function(ae){var ue;ae.children||(ae.value=+R.call(F,ae,ae.depth)||0),(ue=ae.parent)&&(ue.value+=ae.value)})),q},F},m.layout.partition=function(){var ce=m.layout.hierarchy(),C=[1,1];function R(F,q){var ae=ce.call(this,F,q);return function ue(xe,ke,Le,Ve){var Je=xe.children;if(xe.x=ke,xe.y=xe.depth*Ve,xe.dx=Le,xe.dy=Ve,Je&&(at=Je.length)){var at,_t,Et,kt=-1;for(Le=xe.value?Le/xe.value:0;++kt<at;)ue(_t=Je[kt],ke,Et=_t.value*Le,Ve),ke+=Et}}(ae[0],0,C[0],C[1]/function ue(xe){var ke=xe.children,Le=0;if(ke&&(Ve=ke.length))for(var Ve,Je=-1;++Je<Ve;)Le=Math.max(Le,ue(ke[Je]));return 1+Le}(ae[0])),ae}return R.size=function(F){return arguments.length?(C=F,R):C},$t(R,ce)},m.layout.pie=function(){var ce=Number,C=an,R=0,F=Vt,q=0;function ae(ue){var xe,ke=ue.length,Le=ue.map(function(zt,Ot){return+ce.call(ae,zt,Ot)}),Ve=+(typeof R=="function"?R.apply(this,arguments):R),Je=(typeof F=="function"?F.apply(this,arguments):F)-Ve,at=Math.min(Math.abs(Je)/ke,+(typeof q=="function"?q.apply(this,arguments):q)),_t=at*(Je<0?-1:1),Et=m.sum(Le),kt=Et?(Je-ke*_t)/Et:0,At=m.range(ke),xt=[];return C!=null&&At.sort(C===an?function(zt,Ot){return Le[Ot]-Le[zt]}:function(zt,Ot){return C(ue[zt],ue[Ot])}),At.forEach(function(zt){xt[zt]={data:ue[zt],value:xe=Le[zt],startAngle:Ve,endAngle:Ve+=xe*kt+_t,padAngle:at}}),xt}return ae.value=function(ue){return arguments.length?(ce=ue,ae):ce},ae.sort=function(ue){return arguments.length?(C=ue,ae):C},ae.startAngle=function(ue){return arguments.length?(R=ue,ae):R},ae.endAngle=function(ue){return arguments.length?(F=ue,ae):F},ae.padAngle=function(ue){return arguments.length?(q=ue,ae):q},ae};var an={};function dn(ce){return ce.x}function Pn(ce){return ce.y}function Dn(ce,C,R){ce.y0=C,ce.y=R}m.layout.stack=function(){var ce=E,C=va,R=Sa,F=Dn,q=dn,ae=Pn;function ue(xe,ke){if(!(at=xe.length))return xe;var Le=xe.map(function(zt,Ot){return ce.call(ue,zt,Ot)}),Ve=Le.map(function(zt){return zt.map(function(Ot,jt){return[q.call(ue,Ot,jt),ae.call(ue,Ot,jt)]})}),Je=C.call(ue,Ve,ke);Le=m.permute(Le,Je),Ve=m.permute(Ve,Je);var at,_t,Et,kt,At=R.call(ue,Ve,ke),xt=Le[0].length;for(Et=0;Et<xt;++Et)for(F.call(ue,Le[0][Et],kt=At[Et],Ve[0][Et][1]),_t=1;_t<at;++_t)F.call(ue,Le[_t][Et],kt+=Ve[_t-1][Et][1],Ve[_t][Et][1]);return xe}return ue.values=function(xe){return arguments.length?(ce=xe,ue):ce},ue.order=function(xe){return arguments.length?(C=typeof xe=="function"?xe:qn.get(xe)||va,ue):C},ue.offset=function(xe){return arguments.length?(R=typeof xe=="function"?xe:zn.get(xe)||Sa,ue):R},ue.x=function(xe){return arguments.length?(q=xe,ue):q},ue.y=function(xe){return arguments.length?(ae=xe,ue):ae},ue.out=function(xe){return arguments.length?(F=xe,ue):F},ue};var qn=m.map({"inside-out":function(ce){var C,R,F=ce.length,q=ce.map(Ua),ae=ce.map(ja),ue=m.range(F).sort(function(Je,at){return q[Je]-q[at]}),xe=0,ke=0,Le=[],Ve=[];for(C=0;C<F;++C)R=ue[C],xe<ke?(xe+=ae[R],Le.push(R)):(ke+=ae[R],Ve.push(R));return Ve.reverse().concat(Le)},reverse:function(ce){return m.range(ce.length).reverse()},default:va}),zn=m.map({silhouette:function(ce){var C,R,F,q=ce.length,ae=ce[0].length,ue=[],xe=0,ke=[];for(R=0;R<ae;++R){for(C=0,F=0;C<q;C++)F+=ce[C][R][1];F>xe&&(xe=F),ue.push(F)}for(R=0;R<ae;++R)ke[R]=(xe-ue[R])/2;return ke},wiggle:function(ce){var C,R,F,q,ae,ue,xe,ke,Le,Ve=ce.length,Je=ce[0],at=Je.length,_t=[];for(_t[0]=ke=Le=0,R=1;R<at;++R){for(C=0,q=0;C<Ve;++C)q+=ce[C][R][1];for(C=0,ae=0,xe=Je[R][0]-Je[R-1][0];C<Ve;++C){for(F=0,ue=(ce[C][R][1]-ce[C][R-1][1])/(2*xe);F<C;++F)ue+=(ce[F][R][1]-ce[F][R-1][1])/xe;ae+=ue*ce[C][R][1]}_t[R]=ke-=q?ae/q*xe:0,ke<Le&&(Le=ke)}for(R=0;R<at;++R)_t[R]-=Le;return _t},expand:function(ce){var C,R,F,q=ce.length,ae=ce[0].length,ue=1/q,xe=[];for(R=0;R<ae;++R){for(C=0,F=0;C<q;C++)F+=ce[C][R][1];if(F)for(C=0;C<q;C++)ce[C][R][1]/=F;else for(C=0;C<q;C++)ce[C][R][1]=ue}for(R=0;R<ae;++R)xe[R]=0;return xe},zero:Sa});function va(ce){return m.range(ce.length)}function Sa(ce){for(var C=-1,R=ce[0].length,F=[];++C<R;)F[C]=0;return F}function Ua(ce){for(var C,R=1,F=0,q=ce[0][1],ae=ce.length;R<ae;++R)(C=ce[R][1])>q&&(F=R,q=C);return F}function ja(ce){return ce.reduce(Va,0)}function Va(ce,C){return ce+C[1]}function Ti(ce,C){return bi(ce,Math.ceil(Math.log(C.length)/Math.LN2+1))}function bi(ce,C){for(var R=-1,F=+ce[0],q=(ce[1]-F)/C,ae=[];++R<=C;)ae[R]=q*R+F;return ae}function si(ce){return[m.min(ce),m.max(ce)]}function li(ce,C){return ce.value-C.value}function _i(ce,C){var R=ce._pack_next;ce._pack_next=C,C._pack_prev=ce,C._pack_next=R,R._pack_prev=C}function Ni(ce,C){ce._pack_next=C,C._pack_prev=ce}function Qi(ce,C){var R=C.x-ce.x,F=C.y-ce.y,q=ce.r+C.r;return .999*q*q>R*R+F*F}function eo(ce){if((C=ce.children)&&(ke=C.length)){var C,R,F,q,ae,ue,xe,ke,Le=1/0,Ve=-1/0,Je=1/0,at=-1/0;if(C.forEach(to),(R=C[0]).x=-R.r,R.y=0,Ot(R),ke>1&&((F=C[1]).x=F.r,F.y=0,Ot(F),ke>2))for(za(R,F,q=C[2]),Ot(q),_i(R,q),R._pack_prev=q,_i(q,F),F=R._pack_next,ae=3;ae<ke;ae++){za(R,F,q=C[ae]);var _t=0,Et=1,kt=1;for(ue=F._pack_next;ue!==F;ue=ue._pack_next,Et++)if(Qi(ue,q)){_t=1;break}if(_t==1)for(xe=R._pack_prev;xe!==ue._pack_prev&&!Qi(xe,q);xe=xe._pack_prev,kt++);_t?(Et<kt||Et==kt&&F.r<R.r?Ni(R,F=ue):Ni(R=xe,F),ae--):(_i(R,q),F=q,Ot(q))}var At=(Le+Ve)/2,xt=(Je+at)/2,zt=0;for(ae=0;ae<ke;ae++)(q=C[ae]).x-=At,q.y-=xt,zt=Math.max(zt,q.r+Math.sqrt(q.x*q.x+q.y*q.y));ce.r=zt,C.forEach(ro)}function Ot(jt){Le=Math.min(jt.x-jt.r,Le),Ve=Math.max(jt.x+jt.r,Ve),Je=Math.min(jt.y-jt.r,Je),at=Math.max(jt.y+jt.r,at)}}function to(ce){ce._pack_next=ce._pack_prev=ce}function ro(ce){delete ce._pack_next,delete ce._pack_prev}function za(ce,C,R){var F=ce.r+R.r,q=C.x-ce.x,ae=C.y-ce.y;if(F&&(q||ae)){var ue=C.r+R.r,xe=q*q+ae*ae,ke=.5+((F*=F)-(ue*=ue))/(2*xe),Le=Math.sqrt(Math.max(0,2*ue*(F+xe)-(F-=xe)*F-ue*ue))/(2*xe);R.x=ce.x+ke*q+Le*ae,R.y=ce.y+ke*ae-Le*q}else R.x=ce.x+F,R.y=ce.y}function ht(ce,C){return ce.parent==C.parent?1:2}function Dt(ce){var C=ce.children;return C.length?C[0]:ce.t}function sr(ce){var C,R=ce.children;return(C=R.length)?R[C-1]:ce.t}function Ht(ce,C,R){var F=R/(C.i-ce.i);C.c-=F,C.s+=R,ce.c+=F,C.z+=R,C.m+=R}function lr(ce,C,R){return ce.a.parent===C.parent?ce.a:R}function Pr(ce){return{x:ce.x,y:ce.y,dx:ce.dx,dy:ce.dy}}function Nr(ce,C){var R=ce.x+C[3],F=ce.y+C[0],q=ce.dx-C[1]-C[3],ae=ce.dy-C[0]-C[2];return q<0&&(R+=q/2,q=0),ae<0&&(F+=ae/2,ae=0),{x:R,y:F,dx:q,dy:ae}}function Zr(ce){var C=ce[0],R=ce[ce.length-1];return C<R?[C,R]:[R,C]}function ln(ce){return ce.rangeExtent?ce.rangeExtent():Zr(ce.range())}function on(ce,C,R,F){var q=R(ce[0],ce[1]),ae=F(C[0],C[1]);return function(ue){return ae(q(ue))}}function mn(ce,C){var R,F=0,q=ce.length-1,ae=ce[F],ue=ce[q];return ue<ae&&(R=F,F=q,q=R,R=ae,ae=ue,ue=R),ce[F]=C.floor(ae),ce[q]=C.ceil(ue),ce}function kn(ce){return ce?{floor:function(C){return Math.floor(C/ce)*ce},ceil:function(C){return Math.ceil(C/ce)*ce}}:cn}m.layout.histogram=function(){var ce=!0,C=Number,R=si,F=Ti;function q(ae,ue){for(var xe,ke,Le=[],Ve=ae.map(C,this),Je=R.call(this,Ve,ue),at=F.call(this,Je,Ve,ue),_t=(ue=-1,Ve.length),Et=at.length-1,kt=ce?1:1/_t;++ue<Et;)(xe=Le[ue]=[]).dx=at[ue+1]-(xe.x=at[ue]),xe.y=0;if(Et>0)for(ue=-1;++ue<_t;)(ke=Ve[ue])>=Je[0]&&ke<=Je[1]&&((xe=Le[m.bisect(at,ke,1,Et)-1]).y+=kt,xe.push(ae[ue]));return Le}return q.value=function(ae){return arguments.length?(C=ae,q):C},q.range=function(ae){return arguments.length?(R=gr(ae),q):R},q.bins=function(ae){return arguments.length?(F=typeof ae=="number"?function(ue){return bi(ue,ae)}:gr(ae),q):F},q.frequency=function(ae){return arguments.length?(ce=!!ae,q):ce},q},m.layout.pack=function(){var ce,C=m.layout.hierarchy().sort(li),R=0,F=[1,1];function q(ae,ue){var xe=C.call(this,ae,ue),ke=xe[0],Le=F[0],Ve=F[1],Je=ce==null?Math.sqrt:typeof ce=="function"?ce:function(){return ce};if(ke.x=ke.y=0,ar(ke,function(_t){_t.r=+Je(_t.value)}),ar(ke,eo),R){var at=R*(ce?1:Math.max(2*ke.r/Le,2*ke.r/Ve))/2;ar(ke,function(_t){_t.r+=at}),ar(ke,eo),ar(ke,function(_t){_t.r-=at})}return function _t(Et,kt,At,xt){var zt=Et.children;if(Et.x=kt+=xt*Et.x,Et.y=At+=xt*Et.y,Et.r*=xt,zt)for(var Ot=-1,jt=zt.length;++Ot<jt;)_t(zt[Ot],kt,At,xt)}(ke,Le/2,Ve/2,ce?1:1/Math.max(2*ke.r/Le,2*ke.r/Ve)),xe}return q.size=function(ae){return arguments.length?(F=ae,q):F},q.radius=function(ae){return arguments.length?(ce=ae==null||typeof ae=="function"?ae:+ae,q):ce},q.padding=function(ae){return arguments.length?(R=+ae,q):R},$t(q,C)},m.layout.tree=function(){var ce=m.layout.hierarchy().sort(null).value(null),C=ht,R=[1,1],F=null;function q(ke,Le){var Ve=ce.call(this,ke,Le),Je=Ve[0],at=function(Ot){for(var jt,rr={A:null,children:[Ot]},dr=[rr];(jt=dr.pop())!=null;)for(var Sr,kr=jt.children,Kr=0,Jr=kr.length;Kr<Jr;++Kr)dr.push((kr[Kr]=Sr={_:kr[Kr],parent:jt,children:(Sr=kr[Kr].children)&&Sr.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Kr}).a=Sr);return rr.children[0]}(Je);if(ar(at,ae),at.parent.m=-at.z,Yt(at,ue),F)Yt(Je,xe);else{var _t=Je,Et=Je,kt=Je;Yt(Je,function(Ot){Ot.x<_t.x&&(_t=Ot),Ot.x>Et.x&&(Et=Ot),Ot.depth>kt.depth&&(kt=Ot)});var At=C(_t,Et)/2-_t.x,xt=R[0]/(Et.x+C(Et,_t)/2+At),zt=R[1]/(kt.depth||1);Yt(Je,function(Ot){Ot.x=(Ot.x+At)*xt,Ot.y=Ot.depth*zt})}return Ve}function ae(ke){var Le=ke.children,Ve=ke.parent.children,Je=ke.i?Ve[ke.i-1]:null;if(Le.length){(function(_t){for(var Et,kt=0,At=0,xt=_t.children,zt=xt.length;--zt>=0;)(Et=xt[zt]).z+=kt,Et.m+=kt,kt+=Et.s+(At+=Et.c)})(ke);var at=(Le[0].z+Le[Le.length-1].z)/2;Je?(ke.z=Je.z+C(ke._,Je._),ke.m=ke.z-at):ke.z=at}else Je&&(ke.z=Je.z+C(ke._,Je._));ke.parent.A=function(_t,Et,kt){if(Et){for(var At,xt=_t,zt=_t,Ot=Et,jt=xt.parent.children[0],rr=xt.m,dr=zt.m,Sr=Ot.m,kr=jt.m;Ot=sr(Ot),xt=Dt(xt),Ot&&xt;)jt=Dt(jt),(zt=sr(zt)).a=_t,(At=Ot.z+Sr-xt.z-rr+C(Ot._,xt._))>0&&(Ht(lr(Ot,_t,kt),_t,At),rr+=At,dr+=At),Sr+=Ot.m,rr+=xt.m,kr+=jt.m,dr+=zt.m;Ot&&!sr(zt)&&(zt.t=Ot,zt.m+=Sr-dr),xt&&!Dt(jt)&&(jt.t=xt,jt.m+=rr-kr,kt=_t)}return kt}(ke,Je,ke.parent.A||Ve[0])}function ue(ke){ke._.x=ke.z+ke.parent.m,ke.m+=ke.parent.m}function xe(ke){ke.x*=R[0],ke.y=ke.depth*R[1]}return q.separation=function(ke){return arguments.length?(C=ke,q):C},q.size=function(ke){return arguments.length?(F=(R=ke)==null?xe:null,q):F?null:R},q.nodeSize=function(ke){return arguments.length?(F=(R=ke)==null?null:xe,q):F?R:null},$t(q,ce)},m.layout.cluster=function(){var ce=m.layout.hierarchy().sort(null).value(null),C=ht,R=[1,1],F=!1;function q(ae,ue){var xe,ke=ce.call(this,ae,ue),Le=ke[0],Ve=0;ar(Le,function(kt){var At=kt.children;At&&At.length?(kt.x=function(xt){return xt.reduce(function(zt,Ot){return zt+Ot.x},0)/xt.length}(At),kt.y=function(xt){return 1+m.max(xt,function(zt){return zt.y})}(At)):(kt.x=xe?Ve+=C(kt,xe):0,kt.y=0,xe=kt)});var Je=function kt(At){var xt=At.children;return xt&&xt.length?kt(xt[0]):At}(Le),at=function kt(At){var xt,zt=At.children;return zt&&(xt=zt.length)?kt(zt[xt-1]):At}(Le),_t=Je.x-C(Je,at)/2,Et=at.x+C(at,Je)/2;return ar(Le,F?function(kt){kt.x=(kt.x-Le.x)*R[0],kt.y=(Le.y-kt.y)*R[1]}:function(kt){kt.x=(kt.x-_t)/(Et-_t)*R[0],kt.y=(1-(Le.y?kt.y/Le.y:1))*R[1]}),ke}return q.separation=function(ae){return arguments.length?(C=ae,q):C},q.size=function(ae){return arguments.length?(F=(R=ae)==null,q):F?null:R},q.nodeSize=function(ae){return arguments.length?(F=(R=ae)!=null,q):F?R:null},$t(q,ce)},m.layout.treemap=function(){var ce,C=m.layout.hierarchy(),R=Math.round,F=[1,1],q=null,ae=Pr,ue=!1,xe="squarify",ke=.5*(1+Math.sqrt(5));function Le(kt,At){for(var xt,zt,Ot=-1,jt=kt.length;++Ot<jt;)zt=(xt=kt[Ot]).value*(At<0?0:At),xt.area=isNaN(zt)||zt<=0?0:zt}function Ve(kt){var At=kt.children;if(At&&At.length){var xt,zt,Ot,jt=ae(kt),rr=[],dr=At.slice(),Sr=1/0,kr=xe==="slice"?jt.dx:xe==="dice"?jt.dy:xe==="slice-dice"?1&kt.depth?jt.dy:jt.dx:Math.min(jt.dx,jt.dy);for(Le(dr,jt.dx*jt.dy/kt.value),rr.area=0;(Ot=dr.length)>0;)rr.push(xt=dr[Ot-1]),rr.area+=xt.area,xe!=="squarify"||(zt=at(rr,kr))<=Sr?(dr.pop(),Sr=zt):(rr.area-=rr.pop().area,_t(rr,kr,jt,!1),kr=Math.min(jt.dx,jt.dy),rr.length=rr.area=0,Sr=1/0);rr.length&&(_t(rr,kr,jt,!0),rr.length=rr.area=0),At.forEach(Ve)}}function Je(kt){var At=kt.children;if(At&&At.length){var xt,zt=ae(kt),Ot=At.slice(),jt=[];for(Le(Ot,zt.dx*zt.dy/kt.value),jt.area=0;xt=Ot.pop();)jt.push(xt),jt.area+=xt.area,xt.z!=null&&(_t(jt,xt.z?zt.dx:zt.dy,zt,!Ot.length),jt.length=jt.area=0);At.forEach(Je)}}function at(kt,At){for(var xt,zt=kt.area,Ot=0,jt=1/0,rr=-1,dr=kt.length;++rr<dr;)(xt=kt[rr].area)&&(xt<jt&&(jt=xt),xt>Ot&&(Ot=xt));return At*=At,(zt*=zt)?Math.max(At*Ot*ke/zt,zt/(At*jt*ke)):1/0}function _t(kt,At,xt,zt){var Ot,jt=-1,rr=kt.length,dr=xt.x,Sr=xt.y,kr=At?R(kt.area/At):0;if(At==xt.dx){for((zt||kr>xt.dy)&&(kr=xt.dy);++jt<rr;)(Ot=kt[jt]).x=dr,Ot.y=Sr,Ot.dy=kr,dr+=Ot.dx=Math.min(xt.x+xt.dx-dr,kr?R(Ot.area/kr):0);Ot.z=!0,Ot.dx+=xt.x+xt.dx-dr,xt.y+=kr,xt.dy-=kr}else{for((zt||kr>xt.dx)&&(kr=xt.dx);++jt<rr;)(Ot=kt[jt]).x=dr,Ot.y=Sr,Ot.dx=kr,Sr+=Ot.dy=Math.min(xt.y+xt.dy-Sr,kr?R(Ot.area/kr):0);Ot.z=!1,Ot.dy+=xt.y+xt.dy-Sr,xt.x+=kr,xt.dx-=kr}}function Et(kt){var At=ce||C(kt),xt=At[0];return xt.x=xt.y=0,xt.value?(xt.dx=F[0],xt.dy=F[1]):xt.dx=xt.dy=0,ce&&C.revalue(xt),Le([xt],xt.dx*xt.dy/xt.value),(ce?Je:Ve)(xt),ue&&(ce=At),At}return Et.size=function(kt){return arguments.length?(F=kt,Et):F},Et.padding=function(kt){if(!arguments.length)return q;function At(Ot){var jt=kt.call(Et,Ot,Ot.depth);return jt==null?Pr(Ot):Nr(Ot,typeof jt=="number"?[jt,jt,jt,jt]:jt)}function xt(Ot){return Nr(Ot,kt)}var zt;return ae=(q=kt)==null?Pr:(zt=typeof kt)=="function"?At:(zt==="number"&&(kt=[kt,kt,kt,kt]),xt),Et},Et.round=function(kt){return arguments.length?(R=kt?Math.round:Number,Et):R!=Number},Et.sticky=function(kt){return arguments.length?(ue=kt,ce=null,Et):ue},Et.ratio=function(kt){return arguments.length?(ke=kt,Et):ke},Et.mode=function(kt){return arguments.length?(xe=kt+"",Et):xe},$t(Et,C)},m.random={normal:function(ce,C){var R=arguments.length;return R<2&&(C=1),R<1&&(ce=0),function(){var F,q,ae;do ae=(F=2*Math.random()-1)*F+(q=2*Math.random()-1)*q;while(!ae||ae>1);return ce+C*F*Math.sqrt(-2*Math.log(ae)/ae)}},logNormal:function(){var ce=m.random.normal.apply(m,arguments);return function(){return Math.exp(ce())}},bates:function(ce){var C=m.random.irwinHall(ce);return function(){return C()/ce}},irwinHall:function(ce){return function(){for(var C=0,R=0;R<ce;R++)C+=Math.random();return C}}},m.scale={};var cn={floor:E,ceil:E};function Mn(ce,C,R,F){var q=[],ae=[],ue=0,xe=Math.min(ce.length,C.length)-1;for(ce[xe]<ce[0]&&(ce=ce.slice().reverse(),C=C.slice().reverse());++ue<=xe;)q.push(R(ce[ue-1],ce[ue])),ae.push(F(C[ue-1],C[ue]));return function(ke){var Le=m.bisect(ce,ke,1,xe)-1;return ae[Le](q[Le](ke))}}function Fn(ce,C){return m.rebind(ce,C,"range","rangeRound","interpolate","clamp")}function Hn(ce,C){return mn(ce,kn(sa(ce,C)[2])),mn(ce,kn(sa(ce,C)[2])),ce}function sa(ce,C){C==null&&(C=10);var R=Zr(ce),F=R[1]-R[0],q=Math.pow(10,Math.floor(Math.log(F/C)/Math.LN10)),ae=C/F*q;return ae<=.15?q*=10:ae<=.35?q*=5:ae<=.75&&(q*=2),R[0]=Math.ceil(R[0]/q)*q,R[1]=Math.floor(R[1]/q)*q+.5*q,R[2]=q,R}function Xr(ce,C){return m.range.apply(m,sa(ce,C))}m.scale.linear=function(){return function ce(C,R,F,q){var ae,ue;function xe(){var Le=Math.min(C.length,R.length)>2?Mn:on,Ve=q?Io:bs;return ae=Le(C,R,Ve,F),ue=Le(R,C,Ve,Bi),ke}function ke(Le){return ae(Le)}return ke.invert=function(Le){return ue(Le)},ke.domain=function(Le){return arguments.length?(C=Le.map(Number),xe()):C},ke.range=function(Le){return arguments.length?(R=Le,xe()):R},ke.rangeRound=function(Le){return ke.range(Le).interpolate(Go)},ke.clamp=function(Le){return arguments.length?(q=Le,xe()):q},ke.interpolate=function(Le){return arguments.length?(F=Le,xe()):F},ke.ticks=function(Le){return Xr(C,Le)},ke.tickFormat=function(Le,Ve){return d3_scale_linearTickFormat(C,Le,Ve)},ke.nice=function(Le){return Hn(C,Le),xe()},ke.copy=function(){return ce(C,R,F,q)},xe()}([0,1],[0,1],Bi,!1)},m.scale.log=function(){return function ce(C,R,F,q){function ae(ke){return(F?Math.log(ke<0?0:ke):-Math.log(ke>0?0:-ke))/Math.log(R)}function ue(ke){return F?Math.pow(R,ke):-Math.pow(R,-ke)}function xe(ke){return C(ae(ke))}return xe.invert=function(ke){return ue(C.invert(ke))},xe.domain=function(ke){return arguments.length?(F=ke[0]>=0,C.domain((q=ke.map(Number)).map(ae)),xe):q},xe.base=function(ke){return arguments.length?(R=+ke,C.domain(q.map(ae)),xe):R},xe.nice=function(){var ke=mn(q.map(ae),F?Math:na);return C.domain(ke),q=ke.map(ue),xe},xe.ticks=function(){var ke=Zr(q),Le=[],Ve=ke[0],Je=ke[1],at=Math.floor(ae(Ve)),_t=Math.ceil(ae(Je)),Et=R%1?2:R;if(isFinite(_t-at)){if(F){for(;at<_t;at++)for(var kt=1;kt<Et;kt++)Le.push(ue(at)*kt);Le.push(ue(at))}else for(Le.push(ue(at));at++<_t;)for(kt=Et-1;kt>0;kt--)Le.push(ue(at)*kt);for(at=0;Le[at]<Ve;at++);for(_t=Le.length;Le[_t-1]>Je;_t--);Le=Le.slice(at,_t)}return Le},xe.copy=function(){return ce(C.copy(),R,F,q)},Fn(xe,C)}(m.scale.linear().domain([0,1]),10,!0,[1,10])};var na={floor:function(ce){return-Math.ceil(-ce)},ceil:function(ce){return-Math.floor(-ce)}};function In(ce){return function(C){return C<0?-Math.pow(-C,ce):Math.pow(C,ce)}}m.scale.pow=function(){return function ce(C,R,F){var q=In(R),ae=In(1/R);function ue(xe){return C(q(xe))}return ue.invert=function(xe){return ae(C.invert(xe))},ue.domain=function(xe){return arguments.length?(C.domain((F=xe.map(Number)).map(q)),ue):F},ue.ticks=function(xe){return Xr(F,xe)},ue.tickFormat=function(xe,ke){return d3_scale_linearTickFormat(F,xe,ke)},ue.nice=function(xe){return ue.domain(Hn(F,xe))},ue.exponent=function(xe){return arguments.length?(q=In(R=xe),ae=In(1/R),C.domain(F.map(q)),ue):R},ue.copy=function(){return ce(C.copy(),R,F)},Fn(ue,C)}(m.scale.linear(),1,[0,1])},m.scale.sqrt=function(){return m.scale.pow().exponent(.5)},m.scale.ordinal=function(){return function ce(C,R){var F,q,ae;function ue(ke){return q[((F.get(ke)||(R.t==="range"?F.set(ke,C.push(ke)):NaN))-1)%q.length]}function xe(ke,Le){return m.range(C.length).map(function(Ve){return ke+Le*Ve})}return ue.domain=function(ke){if(!arguments.length)return C;C=[],F=new w;for(var Le,Ve=-1,Je=ke.length;++Ve<Je;)F.has(Le=ke[Ve])||F.set(Le,C.push(Le));return ue[R.t].apply(ue,R.a)},ue.range=function(ke){return arguments.length?(q=ke,ae=0,R={t:"range",a:arguments},ue):q},ue.rangePoints=function(ke,Le){arguments.length<2&&(Le=0);var Ve=ke[0],Je=ke[1],at=C.length<2?(Ve=(Ve+Je)/2,0):(Je-Ve)/(C.length-1+Le);return q=xe(Ve+at*Le/2,at),ae=0,R={t:"rangePoints",a:arguments},ue},ue.rangeRoundPoints=function(ke,Le){arguments.length<2&&(Le=0);var Ve=ke[0],Je=ke[1],at=C.length<2?(Ve=Je=Math.round((Ve+Je)/2),0):(Je-Ve)/(C.length-1+Le)|0;return q=xe(Ve+Math.round(at*Le/2+(Je-Ve-(C.length-1+Le)*at)/2),at),ae=0,R={t:"rangeRoundPoints",a:arguments},ue},ue.rangeBands=function(ke,Le,Ve){arguments.length<2&&(Le=0),arguments.length<3&&(Ve=Le);var Je=ke[1]<ke[0],at=ke[Je-0],_t=ke[1-Je],Et=(_t-at)/(C.length-Le+2*Ve);return q=xe(at+Et*Ve,Et),Je&&q.reverse(),ae=Et*(1-Le),R={t:"rangeBands",a:arguments},ue},ue.rangeRoundBands=function(ke,Le,Ve){arguments.length<2&&(Le=0),arguments.length<3&&(Ve=Le);var Je=ke[1]<ke[0],at=ke[Je-0],_t=ke[1-Je],Et=Math.floor((_t-at)/(C.length-Le+2*Ve));return q=xe(at+Math.round((_t-at-(C.length-Le)*Et)/2),Et),Je&&q.reverse(),ae=Math.round(Et*(1-Le)),R={t:"rangeRoundBands",a:arguments},ue},ue.rangeBand=function(){return ae},ue.rangeExtent=function(){return Zr(R.a[0])},ue.copy=function(){return ce(C,R)},ue.domain(C)}([],{t:"range",a:[[]]})},m.scale.category10=function(){return m.scale.ordinal().range(jn)},m.scale.category20=function(){return m.scale.ordinal().range(ra)},m.scale.category20b=function(){return m.scale.ordinal().range(ka)},m.scale.category20c=function(){return m.scale.ordinal().range(Pa)};var jn=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Zt),ra=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Zt),ka=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Zt),Pa=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Zt);function En(){return 0}m.scale.quantile=function(){return function ce(C,R){var F;function q(){var ue=0,xe=R.length;for(F=[];++ue<xe;)F[ue-1]=m.quantile(C,ue/xe);return ae}function ae(ue){if(!isNaN(ue=+ue))return R[m.bisect(F,ue)]}return ae.domain=function(ue){return arguments.length?(C=ue.map(h).filter(s).sort(o),q()):C},ae.range=function(ue){return arguments.length?(R=ue,q()):R},ae.quantiles=function(){return F},ae.invertExtent=function(ue){return(ue=R.indexOf(ue))<0?[NaN,NaN]:[ue>0?F[ue-1]:C[0],ue<F.length?F[ue]:C[C.length-1]]},ae.copy=function(){return ce(C,R)},q()}([],[])},m.scale.quantize=function(){return function ce(C,R,F){var q,ae;function ue(ke){return F[Math.max(0,Math.min(ae,Math.floor(q*(ke-C))))]}function xe(){return q=F.length/(R-C),ae=F.length-1,ue}return ue.domain=function(ke){return arguments.length?(C=+ke[0],R=+ke[ke.length-1],xe()):[C,R]},ue.range=function(ke){return arguments.length?(F=ke,xe()):F},ue.invertExtent=function(ke){return[ke=(ke=F.indexOf(ke))<0?NaN:ke/q+C,ke+1/q]},ue.copy=function(){return ce(C,R,F)},xe()}(0,1,[0,1])},m.scale.threshold=function(){return function ce(C,R){function F(q){if(q<=q)return R[m.bisect(C,q)]}return F.domain=function(q){return arguments.length?(C=q,F):C},F.range=function(q){return arguments.length?(R=q,F):R},F.invertExtent=function(q){return q=R.indexOf(q),[C[q-1],C[q]]},F.copy=function(){return ce(C,R)},F}([.5],[0,1])},m.scale.identity=function(){return function ce(C){function R(F){return+F}return R.invert=R,R.domain=R.range=function(F){return arguments.length?(C=F.map(R),R):C},R.ticks=function(F){return Xr(C,F)},R.tickFormat=function(F,q){return d3_scale_linearTickFormat(C,F,q)},R.copy=function(){return ce(C)},R}([0,1])},m.svg={},m.svg.arc=function(){var ce=Ca,C=ga,R=En,F=Ra,q=Fa,ae=Ea,ue=ti;function xe(){var Le=Math.max(0,+ce.apply(this,arguments)),Ve=Math.max(0,+C.apply(this,arguments)),Je=q.apply(this,arguments)-Gt,at=ae.apply(this,arguments)-Gt,_t=Math.abs(at-Je),Et=Je>at?0:1;if(Ve<Le&&(kt=Ve,Ve=Le,Le=kt),_t>=Xt)return ke(Ve,Et)+(Le?ke(Le,1-Et):"")+"Z";var kt,At,xt,zt,Ot,jt,rr,dr,Sr,kr,Kr,Jr,pn=0,sn=0,Un=[];if((zt=(+ue.apply(this,arguments)||0)/2)&&(xt=F===Ra?Math.sqrt(Le*Le+Ve*Ve):+F.apply(this,arguments),Et||(sn*=-1),Ve&&(sn=Be(xt/Ve*Math.sin(zt))),Le&&(pn=Be(xt/Le*Math.sin(zt)))),Ve){Ot=Ve*Math.cos(Je+sn),jt=Ve*Math.sin(Je+sn),rr=Ve*Math.cos(at-sn),dr=Ve*Math.sin(at-sn);var Xn=Math.abs(at-Je-2*sn)<=Ft?0:1;if(sn&&aa(Ot,jt,rr,dr)===Et^Xn){var ha=(Je+at)/2;Ot=Ve*Math.cos(ha),jt=Ve*Math.sin(ha),rr=dr=null}}else Ot=jt=0;if(Le){Sr=Le*Math.cos(at-pn),kr=Le*Math.sin(at-pn),Kr=Le*Math.cos(Je+pn),Jr=Le*Math.sin(Je+pn);var Gr=Math.abs(Je-at+2*pn)<=Ft?0:1;if(pn&&aa(Sr,kr,Kr,Jr)===1-Et^Gr){var An=(Je+at)/2;Sr=Le*Math.cos(An),kr=Le*Math.sin(An),Kr=Jr=null}}else Sr=kr=0;if(_t>mt&&(kt=Math.min(Math.abs(Ve-Le)/2,+R.apply(this,arguments)))>.001){At=Le<Ve^Et?0:1;var Jn=kt,Yn=kt;if(_t<Ft){var ia=Kr==null?[Sr,kr]:rr==null?[Ot,jt]:wn([Ot,jt],[Kr,Jr],[rr,dr],[Sr,kr]),da=Ot-ia[0],La=jt-ia[1],ea=rr-ia[0],_a=dr-ia[1],ya=1/Math.sin(Math.acos((da*ea+La*_a)/(Math.sqrt(da*da+La*La)*Math.sqrt(ea*ea+_a*_a)))/2),Ia=Math.sqrt(ia[0]*ia[0]+ia[1]*ia[1]);Yn=Math.min(kt,(Le-Ia)/(ya-1)),Jn=Math.min(kt,(Ve-Ia)/(ya+1))}if(rr!=null){var wa=Ja(Kr==null?[Sr,kr]:[Kr,Jr],[Ot,jt],Ve,Jn,Et),Oa=Ja([rr,dr],[Sr,kr],Ve,Jn,Et);kt===Jn?Un.push("M",wa[0],"A",Jn,",",Jn," 0 0,",At," ",wa[1],"A",Ve,",",Ve," 0 ",1-Et^aa(wa[1][0],wa[1][1],Oa[1][0],Oa[1][1]),",",Et," ",Oa[1],"A",Jn,",",Jn," 0 0,",At," ",Oa[0]):Un.push("M",wa[0],"A",Jn,",",Jn," 0 1,",At," ",Oa[0])}else Un.push("M",Ot,",",jt);if(Kr!=null){var Ha=Ja([Ot,jt],[Kr,Jr],Le,-Yn,Et),fi=Ja([Sr,kr],rr==null?[Ot,jt]:[rr,dr],Le,-Yn,Et);kt===Yn?Un.push("L",fi[0],"A",Yn,",",Yn," 0 0,",At," ",fi[1],"A",Le,",",Le," 0 ",Et^aa(fi[1][0],fi[1][1],Ha[1][0],Ha[1][1]),",",1-Et," ",Ha[1],"A",Yn,",",Yn," 0 0,",At," ",Ha[0]):Un.push("L",fi[0],"A",Yn,",",Yn," 0 0,",At," ",Ha[0])}else Un.push("L",Sr,",",kr)}else Un.push("M",Ot,",",jt),rr!=null&&Un.push("A",Ve,",",Ve," 0 ",Xn,",",Et," ",rr,",",dr),Un.push("L",Sr,",",kr),Kr!=null&&Un.push("A",Le,",",Le," 0 ",Gr,",",1-Et," ",Kr,",",Jr);return Un.push("Z"),Un.join("")}function ke(Le,Ve){return"M0,"+Le+"A"+Le+","+Le+" 0 1,"+Ve+" 0,"+-Le+"A"+Le+","+Le+" 0 1,"+Ve+" 0,"+Le}return xe.innerRadius=function(Le){return arguments.length?(ce=gr(Le),xe):ce},xe.outerRadius=function(Le){return arguments.length?(C=gr(Le),xe):C},xe.cornerRadius=function(Le){return arguments.length?(R=gr(Le),xe):R},xe.padRadius=function(Le){return arguments.length?(F=Le==Ra?Ra:gr(Le),xe):F},xe.startAngle=function(Le){return arguments.length?(q=gr(Le),xe):q},xe.endAngle=function(Le){return arguments.length?(ae=gr(Le),xe):ae},xe.padAngle=function(Le){return arguments.length?(ue=gr(Le),xe):ue},xe.centroid=function(){var Le=(+ce.apply(this,arguments)+ +C.apply(this,arguments))/2,Ve=(+q.apply(this,arguments)+ +ae.apply(this,arguments))/2-Gt;return[Math.cos(Ve)*Le,Math.sin(Ve)*Le]},xe};var Ra="auto";function Ca(ce){return ce.innerRadius}function ga(ce){return ce.outerRadius}function Fa(ce){return ce.startAngle}function Ea(ce){return ce.endAngle}function ti(ce){return ce&&ce.padAngle}function aa(ce,C,R,F){return(ce-R)*C-(C-F)*ce>0?0:1}function Ja(ce,C,R,F,q){var ae=ce[0]-C[0],ue=ce[1]-C[1],xe=(q?F:-F)/Math.sqrt(ae*ae+ue*ue),ke=xe*ue,Le=-xe*ae,Ve=ce[0]+ke,Je=ce[1]+Le,at=C[0]+ke,_t=C[1]+Le,Et=(Ve+at)/2,kt=(Je+_t)/2,At=at-Ve,xt=_t-Je,zt=At*At+xt*xt,Ot=R-F,jt=Ve*_t-at*Je,rr=(xt<0?-1:1)*Math.sqrt(Math.max(0,Ot*Ot*zt-jt*jt)),dr=(jt*xt-At*rr)/zt,Sr=(-jt*At-xt*rr)/zt,kr=(jt*xt+At*rr)/zt,Kr=(-jt*At+xt*rr)/zt,Jr=dr-Et,pn=Sr-kt,sn=kr-Et,Un=Kr-kt;return Jr*Jr+pn*pn>sn*sn+Un*Un&&(dr=kr,Sr=Kr),[[dr-ke,Sr-Le],[dr*R/Ot,Sr*R/Ot]]}function ji(){return!0}function Qo(ce){var C=Br,R=rn,F=ji,q=bo,ae=q.key,ue=.7;function xe(ke){var Le,Ve=[],Je=[],at=-1,_t=ke.length,Et=gr(C),kt=gr(R);function At(){Ve.push("M",q(ce(Je),ue))}for(;++at<_t;)F.call(this,Le=ke[at],at)?Je.push([+Et.call(this,Le,at),+kt.call(this,Le,at)]):Je.length&&(At(),Je=[]);return Je.length&&At(),Ve.length?Ve.join(""):null}return xe.x=function(ke){return arguments.length?(C=ke,xe):C},xe.y=function(ke){return arguments.length?(R=ke,xe):R},xe.defined=function(ke){return arguments.length?(F=ke,xe):F},xe.interpolate=function(ke){return arguments.length?(ae=typeof ke=="function"?q=ke:(q=Fo.get(ke)||bo).key,xe):ae},xe.tension=function(ke){return arguments.length?(ue=ke,xe):ue},xe}m.svg.line=function(){return Qo(E)};var Fo=m.map({linear:bo,"linear-closed":xa,step:function(ce){for(var C=0,R=ce.length,F=ce[0],q=[F[0],",",F[1]];++C<R;)q.push("H",(F[0]+(F=ce[C])[0])/2,"V",F[1]);return R>1&&q.push("H",F[0]),q.join("")},"step-before":gi,"step-after":_o,basis:Gi,"basis-open":function(ce){if(ce.length<4)return bo(ce);for(var C,R=[],F=-1,q=ce.length,ae=[0],ue=[0];++F<3;)C=ce[F],ae.push(C[0]),ue.push(C[1]);for(R.push(ni(no,ae)+","+ni(no,ue)),--F;++F<q;)C=ce[F],ae.shift(),ae.push(C[0]),ue.shift(),ue.push(C[1]),ps(R,ae,ue);return R.join("")},"basis-closed":function(ce){for(var C,R,F=-1,q=ce.length,ae=q+4,ue=[],xe=[];++F<4;)R=ce[F%q],ue.push(R[0]),xe.push(R[1]);for(C=[ni(no,ue),",",ni(no,xe)],--F;++F<ae;)R=ce[F%q],ue.shift(),ue.push(R[0]),xe.shift(),xe.push(R[1]),ps(C,ue,xe);return C.join("")},bundle:function(ce,C){var R=ce.length-1;if(R)for(var F,q,ae=ce[0][0],ue=ce[0][1],xe=ce[R][0]-ae,ke=ce[R][1]-ue,Le=-1;++Le<=R;)F=ce[Le],q=Le/R,F[0]=C*F[0]+(1-C)*(ae+q*xe),F[1]=C*F[1]+(1-C)*(ue+q*ke);return Gi(ce)},cardinal:function(ce,C){return ce.length<3?bo(ce):ce[0]+Ka(ce,ki(ce,C))},"cardinal-open":function(ce,C){return ce.length<4?bo(ce):ce[1]+Ka(ce.slice(1,-1),ki(ce,C))},"cardinal-closed":function(ce,C){return ce.length<3?xa(ce):ce[0]+Ka((ce.push(ce[0]),ce),ki([ce[ce.length-2]].concat(ce,[ce[1]]),C))},monotone:function(ce){return ce.length<3?bo(ce):ce[0]+Ka(ce,function(C){for(var R,F,q,ae,ue=[],xe=function(Ve){for(var Je=0,at=Ve.length-1,_t=[],Et=Ve[0],kt=Ve[1],At=_t[0]=os(Et,kt);++Je<at;)_t[Je]=(At+(At=os(Et=kt,kt=Ve[Je+1])))/2;return _t[Je]=At,_t}(C),ke=-1,Le=C.length-1;++ke<Le;)R=os(C[ke],C[ke+1]),i(R)<mt?xe[ke]=xe[ke+1]=0:(F=xe[ke]/R,q=xe[ke+1]/R,(ae=F*F+q*q)>9&&(ae=3*R/Math.sqrt(ae),xe[ke]=ae*F,xe[ke+1]=ae*q));for(ke=-1;++ke<=Le;)ae=(C[Math.min(Le,ke+1)][0]-C[Math.max(0,ke-1)][0])/(6*(1+xe[ke]*xe[ke])),ue.push([ae||0,xe[ke]*ae||0]);return ue}(ce))}});function bo(ce){return ce.length>1?ce.join("L"):ce+"Z"}function xa(ce){return ce.join("L")+"Z"}function gi(ce){for(var C=0,R=ce.length,F=ce[0],q=[F[0],",",F[1]];++C<R;)q.push("V",(F=ce[C])[1],"H",F[0]);return q.join("")}function _o(ce){for(var C=0,R=ce.length,F=ce[0],q=[F[0],",",F[1]];++C<R;)q.push("H",(F=ce[C])[0],"V",F[1]);return q.join("")}function Ka(ce,C){if(C.length<1||ce.length!=C.length&&ce.length!=C.length+2)return bo(ce);var R=ce.length!=C.length,F="",q=ce[0],ae=ce[1],ue=C[0],xe=ue,ke=1;if(R&&(F+="Q"+(ae[0]-2*ue[0]/3)+","+(ae[1]-2*ue[1]/3)+","+ae[0]+","+ae[1],q=ce[1],ke=2),C.length>1){xe=C[1],ae=ce[ke],ke++,F+="C"+(q[0]+ue[0])+","+(q[1]+ue[1])+","+(ae[0]-xe[0])+","+(ae[1]-xe[1])+","+ae[0]+","+ae[1];for(var Le=2;Le<C.length;Le++,ke++)ae=ce[ke],xe=C[Le],F+="S"+(ae[0]-xe[0])+","+(ae[1]-xe[1])+","+ae[0]+","+ae[1]}if(R){var Ve=ce[ke];F+="Q"+(ae[0]+2*xe[0]/3)+","+(ae[1]+2*xe[1]/3)+","+Ve[0]+","+Ve[1]}return F}function ki(ce,C){for(var R,F=[],q=(1-C)/2,ae=ce[0],ue=ce[1],xe=1,ke=ce.length;++xe<ke;)R=ae,ae=ue,ue=ce[xe],F.push([q*(ue[0]-R[0]),q*(ue[1]-R[1])]);return F}function Gi(ce){if(ce.length<3)return bo(ce);var C=1,R=ce.length,F=ce[0],q=F[0],ae=F[1],ue=[q,q,q,(F=ce[1])[0]],xe=[ae,ae,ae,F[1]],ke=[q,",",ae,"L",ni(no,ue),",",ni(no,xe)];for(ce.push(ce[R-1]);++C<=R;)F=ce[C],ue.shift(),ue.push(F[0]),xe.shift(),xe.push(F[1]),ps(ke,ue,xe);return ce.pop(),ke.push("L",F),ke.join("")}function ni(ce,C){return ce[0]*C[0]+ce[1]*C[1]+ce[2]*C[2]+ce[3]*C[3]}Fo.forEach(function(ce,C){C.key=ce,C.closed=/-closed$/.test(ce)});var mo=[0,2/3,1/3,0],ai=[0,1/3,2/3,0],no=[0,1/6,2/3,1/6];function ps(ce,C,R){ce.push("C",ni(mo,C),",",ni(mo,R),",",ni(ai,C),",",ni(ai,R),",",ni(no,C),",",ni(no,R))}function os(ce,C){return(C[1]-ce[1])/(C[0]-ce[0])}function Ys(ce){for(var C,R,F,q=-1,ae=ce.length;++q<ae;)R=(C=ce[q])[0],F=C[1]-Gt,C[0]=R*Math.cos(F),C[1]=R*Math.sin(F);return ce}function zi(ce){var C=Br,R=Br,F=0,q=rn,ae=ji,ue=bo,xe=ue.key,ke=ue,Le="L",Ve=.7;function Je(at){var _t,Et,kt,At=[],xt=[],zt=[],Ot=-1,jt=at.length,rr=gr(C),dr=gr(F),Sr=C===R?function(){return Et}:gr(R),kr=F===q?function(){return kt}:gr(q);function Kr(){At.push("M",ue(ce(zt),Ve),Le,ke(ce(xt.reverse()),Ve),"Z")}for(;++Ot<jt;)ae.call(this,_t=at[Ot],Ot)?(xt.push([Et=+rr.call(this,_t,Ot),kt=+dr.call(this,_t,Ot)]),zt.push([+Sr.call(this,_t,Ot),+kr.call(this,_t,Ot)])):xt.length&&(Kr(),xt=[],zt=[]);return xt.length&&Kr(),At.length?At.join(""):null}return Je.x=function(at){return arguments.length?(C=R=at,Je):R},Je.x0=function(at){return arguments.length?(C=at,Je):C},Je.x1=function(at){return arguments.length?(R=at,Je):R},Je.y=function(at){return arguments.length?(F=q=at,Je):q},Je.y0=function(at){return arguments.length?(F=at,Je):F},Je.y1=function(at){return arguments.length?(q=at,Je):q},Je.defined=function(at){return arguments.length?(ae=at,Je):ae},Je.interpolate=function(at){return arguments.length?(xe=typeof at=="function"?ue=at:(ue=Fo.get(at)||bo).key,ke=ue.reverse||ue,Le=ue.closed?"M":"L",Je):xe},Je.tension=function(at){return arguments.length?(Ve=at,Je):Ve},Je}function Ws(ce){return ce.source}function Ri(ce){return ce.target}function ss(ce){return ce.radius}function fa(ce){return[ce.x,ce.y]}function ba(ce){return function(){var C=ce.apply(this,arguments),R=C[0],F=C[1]-Gt;return[R*Math.cos(F),R*Math.sin(F)]}}function Zs(){return 64}function Xs(){return"circle"}function ls(ce){var C=Math.sqrt(ce/Ft);return"M0,"+C+"A"+C+","+C+" 0 1,1 0,"+-C+"A"+C+","+C+" 0 1,1 0,"+C+"Z"}m.svg.line.radial=function(){var ce=Qo(Ys);return ce.radius=ce.x,delete ce.x,ce.angle=ce.y,delete ce.y,ce},gi.reverse=_o,_o.reverse=gi,m.svg.area=function(){return zi(E)},m.svg.area.radial=function(){var ce=zi(Ys);return ce.radius=ce.x,delete ce.x,ce.innerRadius=ce.x0,delete ce.x0,ce.outerRadius=ce.x1,delete ce.x1,ce.angle=ce.y,delete ce.y,ce.startAngle=ce.y0,delete ce.y0,ce.endAngle=ce.y1,delete ce.y1,ce},m.svg.chord=function(){var ce=Ws,C=Ri,R=ss,F=Fa,q=Ea;function ae(Le,Ve){var Je,at,_t=ue(this,ce,Le,Ve),Et=ue(this,C,Le,Ve);return"M"+_t.p0+xe(_t.r,_t.p1,_t.a1-_t.a0)+(at=Et,((Je=_t).a0==at.a0&&Je.a1==at.a1?ke(_t.r,_t.p1,_t.r,_t.p0):ke(_t.r,_t.p1,Et.r,Et.p0)+xe(Et.r,Et.p1,Et.a1-Et.a0)+ke(Et.r,Et.p1,_t.r,_t.p0))+"Z")}function ue(Le,Ve,Je,at){var _t=Ve.call(Le,Je,at),Et=R.call(Le,_t,at),kt=F.call(Le,_t,at)-Gt,At=q.call(Le,_t,at)-Gt;return{r:Et,a0:kt,a1:At,p0:[Et*Math.cos(kt),Et*Math.sin(kt)],p1:[Et*Math.cos(At),Et*Math.sin(At)]}}function xe(Le,Ve,Je){return"A"+Le+","+Le+" 0 "+ +(Je>Ft)+",1 "+Ve}function ke(Le,Ve,Je,at){return"Q 0,0 "+at}return ae.radius=function(Le){return arguments.length?(R=gr(Le),ae):R},ae.source=function(Le){return arguments.length?(ce=gr(Le),ae):ce},ae.target=function(Le){return arguments.length?(C=gr(Le),ae):C},ae.startAngle=function(Le){return arguments.length?(F=gr(Le),ae):F},ae.endAngle=function(Le){return arguments.length?(q=gr(Le),ae):q},ae},m.svg.diagonal=function(){var ce=Ws,C=Ri,R=fa;function F(q,ae){var ue=ce.call(this,q,ae),xe=C.call(this,q,ae),ke=(ue.y+xe.y)/2,Le=[ue,{x:ue.x,y:ke},{x:xe.x,y:ke},xe];return"M"+(Le=Le.map(R))[0]+"C"+Le[1]+" "+Le[2]+" "+Le[3]}return F.source=function(q){return arguments.length?(ce=gr(q),F):ce},F.target=function(q){return arguments.length?(C=gr(q),F):C},F.projection=function(q){return arguments.length?(R=q,F):R},F},m.svg.diagonal.radial=function(){var ce=m.svg.diagonal(),C=fa,R=ce.projection;return ce.projection=function(F){return arguments.length?R(ba(C=F)):C},ce},m.svg.symbol=function(){var ce=Xs,C=Zs;function R(F,q){return(Oo.get(ce.call(this,F,q))||ls)(C.call(this,F,q))}return R.type=function(F){return arguments.length?(ce=gr(F),R):ce},R.size=function(F){return arguments.length?(C=gr(F),R):C},R};var Oo=m.map({circle:ls,cross:function(ce){var C=Math.sqrt(ce/5)/2;return"M"+-3*C+","+-C+"H"+-C+"V"+-3*C+"H"+C+"V"+-C+"H"+3*C+"V"+C+"H"+C+"V"+3*C+"H"+-C+"V"+C+"H"+-3*C+"Z"},diamond:function(ce){var C=Math.sqrt(ce/(2*cl)),R=C*cl;return"M0,"+-C+"L"+R+",0 0,"+C+" "+-R+",0Z"},square:function(ce){var C=Math.sqrt(ce)/2;return"M"+-C+","+-C+"L"+C+","+-C+" "+C+","+C+" "+-C+","+C+"Z"},"triangle-down":function(ce){var C=Math.sqrt(ce/Zo),R=C*Zo/2;return"M0,"+R+"L"+C+","+-R+" "+-C+","+-R+"Z"},"triangle-up":function(ce){var C=Math.sqrt(ce/Zo),R=C*Zo/2;return"M0,"+-R+"L"+C+","+R+" "+-C+","+R+"Z"}});m.svg.symbolTypes=Oo.keys();var Zo=Math.sqrt(3),cl=Math.tan(30*nr);K.transition=function(ce){for(var C,R,F=_s||++ws,q=Rs(ce),ae=[],ue=ds||{time:Date.now(),ease:As,delay:0,duration:250},xe=-1,ke=this.length;++xe<ke;){ae.push(C=[]);for(var Le=this[xe],Ve=-1,Je=Le.length;++Ve<Je;)(R=Le[Ve])&&ms(R,Ve,q,F,ue),C.push(R)}return ii(ae,q,F)},K.interrupt=function(ce){return this.each(ce==null?Ds:$a(Rs(ce)))};var Ds=$a(Rs());function $a(ce){return function(){var C,R,F;(C=this[ce])&&(F=C[R=C.active])&&(F.timer.c=null,F.timer.t=NaN,--C.count?delete C[R]:delete this[ce],C.active+=.5,F.event&&F.event.interrupt.call(this,this.__data__,F.index))}}function ii(ce,C,R){return B(ce,Pi),ce.namespace=C,ce.id=R,ce}var _s,ds,Pi=[],ws=0;function zs(ce,C,R,F){var q=ce.id,ae=ce.namespace;return Ie(ce,typeof R=="function"?function(ue,xe,ke){ue[ae][q].tween.set(C,F(R.call(ue,ue.__data__,xe,ke)))}:(R=F(R),function(ue){ue[ae][q].tween.set(C,R)}))}function Ss(ce){return ce==null&&(ce=""),function(){this.textContent=ce}}function Rs(ce){return ce==null?"__transition__":"__transition_"+ce+"__"}function ms(ce,C,R,F,q){var ae,ue,xe,ke,Le,Ve=ce[R]||(ce[R]={active:0,count:0}),Je=Ve[F];function at(Et){var kt=Ve.active,At=Ve[kt];for(var xt in At&&(At.timer.c=null,At.timer.t=NaN,--Ve.count,delete Ve[kt],At.event&&At.event.interrupt.call(ce,ce.__data__,At.index)),Ve)if(+xt<F){var zt=Ve[xt];zt.timer.c=null,zt.timer.t=NaN,--Ve.count,delete Ve[xt]}ue.c=_t,nn(function(){return ue.c&&_t(Et||1)&&(ue.c=null,ue.t=NaN),1},0,ae),Ve.active=F,Je.event&&Je.event.start.call(ce,ce.__data__,C),Le=[],Je.tween.forEach(function(Ot,jt){(jt=jt.call(ce,ce.__data__,C))&&Le.push(jt)}),ke=Je.ease,xe=Je.duration}function _t(Et){for(var kt=Et/xe,At=ke(kt),xt=Le.length;xt>0;)Le[--xt].call(ce,At);if(kt>=1)return Je.event&&Je.event.end.call(ce,ce.__data__,C),--Ve.count?delete Ve[F]:delete ce[R],1}Je||(ae=q.time,ue=nn(function(Et){var kt=Je.delay;if(ue.t=kt+ae,kt<=Et)return at(Et-kt);ue.c=at},0,ae),Je=Ve[F]={tween:new w,time:ae,timer:ue,delay:q.delay,duration:q.duration,ease:q.ease,index:C},q=null,++Ve.count)}Pi.call=K.call,Pi.empty=K.empty,Pi.node=K.node,Pi.size=K.size,m.transition=function(ce,C){return ce&&ce.transition?_s?ce.transition(C):ce:m.selection().transition(ce)},m.transition.prototype=Pi,Pi.select=function(ce){var C,R,F,q=this.id,ae=this.namespace,ue=[];ce=te(ce);for(var xe=-1,ke=this.length;++xe<ke;){ue.push(C=[]);for(var Le=this[xe],Ve=-1,Je=Le.length;++Ve<Je;)(F=Le[Ve])&&(R=ce.call(F,F.__data__,Ve,xe))?("__data__"in F&&(R.__data__=F.__data__),ms(R,Ve,ae,q,F[ae][q]),C.push(R)):C.push(null)}return ii(ue,ae,q)},Pi.selectAll=function(ce){var C,R,F,q,ae,ue=this.id,xe=this.namespace,ke=[];ce=ie(ce);for(var Le=-1,Ve=this.length;++Le<Ve;)for(var Je=this[Le],at=-1,_t=Je.length;++at<_t;)if(F=Je[at]){ae=F[xe][ue],R=ce.call(F,F.__data__,at,Le),ke.push(C=[]);for(var Et=-1,kt=R.length;++Et<kt;)(q=R[Et])&&ms(q,Et,xe,ue,ae),C.push(q)}return ii(ke,xe,ue)},Pi.filter=function(ce){var C,R,F=[];typeof ce!="function"&&(ce=Me(ce));for(var q=0,ae=this.length;q<ae;q++){F.push(C=[]);for(var ue,xe=0,ke=(ue=this[q]).length;xe<ke;xe++)(R=ue[xe])&&ce.call(R,R.__data__,xe,q)&&C.push(R)}return ii(F,this.namespace,this.id)},Pi.tween=function(ce,C){var R=this.id,F=this.namespace;return arguments.length<2?this.node()[F][R].tween.get(ce):Ie(this,C==null?function(q){q[F][R].tween.remove(ce)}:function(q){q[F][R].tween.set(ce,C)})},Pi.attr=function(ce,C){if(arguments.length<2){for(C in ce)this.attr(C,ce[C]);return this}var R=ce=="transform"?Wo:Bi,F=m.ns.qualify(ce);function q(){this.removeAttribute(F)}function ae(){this.removeAttributeNS(F.space,F.local)}function ue(ke){return ke==null?q:(ke+="",function(){var Le,Ve=this.getAttribute(F);return Ve!==ke&&(Le=R(Ve,ke),function(Je){this.setAttribute(F,Le(Je))})})}function xe(ke){return ke==null?ae:(ke+="",function(){var Le,Ve=this.getAttributeNS(F.space,F.local);return Ve!==ke&&(Le=R(Ve,ke),function(Je){this.setAttributeNS(F.space,F.local,Le(Je))})})}return zs(this,"attr."+ce,C,F.local?xe:ue)},Pi.attrTween=function(ce,C){var R=m.ns.qualify(ce);return this.tween("attr."+ce,R.local?function(F,q){var ae=C.call(this,F,q,this.getAttributeNS(R.space,R.local));return ae&&function(ue){this.setAttributeNS(R.space,R.local,ae(ue))}}:function(F,q){var ae=C.call(this,F,q,this.getAttribute(R));return ae&&function(ue){this.setAttribute(R,ae(ue))}})},Pi.style=function(ce,C,R){var F=arguments.length;if(F<3){if(typeof ce!="string"){for(R in F<2&&(C=""),ce)this.style(R,ce[R],C);return this}R=""}function q(){this.style.removeProperty(ce)}function ae(ue){return ue==null?q:(ue+="",function(){var xe,ke=t(this).getComputedStyle(this,null).getPropertyValue(ce);return ke!==ue&&(xe=Bi(ke,ue),function(Le){this.style.setProperty(ce,xe(Le),R)})})}return zs(this,"style."+ce,C,ae)},Pi.styleTween=function(ce,C,R){function F(q,ae){var ue=C.call(this,q,ae,t(this).getComputedStyle(this,null).getPropertyValue(ce));return ue&&function(xe){this.style.setProperty(ce,ue(xe),R)}}return arguments.length<3&&(R=""),this.tween("style."+ce,F)},Pi.text=function(ce){return zs(this,"text",ce,Ss)},Pi.remove=function(){var ce=this.namespace;return this.each("end.transition",function(){var C;this[ce].count<2&&(C=this.parentNode)&&C.removeChild(this)})},Pi.ease=function(ce){var C=this.id,R=this.namespace;return arguments.length<1?this.node()[R][C].ease:(typeof ce!="function"&&(ce=m.ease.apply(m,arguments)),Ie(this,function(F){F[R][C].ease=ce}))},Pi.delay=function(ce){var C=this.id,R=this.namespace;return arguments.length<1?this.node()[R][C].delay:Ie(this,typeof ce=="function"?function(F,q,ae){F[R][C].delay=+ce.call(F,F.__data__,q,ae)}:(ce=+ce,function(F){F[R][C].delay=ce}))},Pi.duration=function(ce){var C=this.id,R=this.namespace;return arguments.length<1?this.node()[R][C].duration:Ie(this,typeof ce=="function"?function(F,q,ae){F[R][C].duration=Math.max(1,ce.call(F,F.__data__,q,ae))}:(ce=Math.max(1,ce),function(F){F[R][C].duration=ce}))},Pi.each=function(ce,C){var R=this.id,F=this.namespace;if(arguments.length<2){var q=ds,ae=_s;try{_s=R,Ie(this,function(ue,xe,ke){ds=ue[F][R],ce.call(ue,ue.__data__,xe,ke)})}finally{ds=q,_s=ae}}else Ie(this,function(ue){var xe=ue[F][R];(xe.event||(xe.event=m.dispatch("start","end","interrupt"))).on(ce,C)});return this},Pi.transition=function(){for(var ce,C,R,F=this.id,q=++ws,ae=this.namespace,ue=[],xe=0,ke=this.length;xe<ke;xe++){ue.push(ce=[]);for(var Le,Ve=0,Je=(Le=this[xe]).length;Ve<Je;Ve++)(C=Le[Ve])&&ms(C,Ve,ae,q,{time:(R=C[ae][F]).time,ease:R.ease,delay:R.delay+R.duration,duration:R.duration}),ce.push(C)}return ii(ue,ae,q)},m.svg.axis=function(){var ce,C=m.scale.linear(),R=ul,F=6,q=6,ae=3,ue=[10],xe=null;function ke(Le){Le.each(function(){var Ve,Je=m.select(this),at=this.__chart__||C,_t=this.__chart__=C.copy(),Et=xe==null?_t.ticks?_t.ticks.apply(_t,ue):_t.domain():xe,kt=ce==null?_t.tickFormat?_t.tickFormat.apply(_t,ue):E:ce,At=Je.selectAll(".tick").data(Et,_t),xt=At.enter().insert("g",".domain").attr("class","tick").style("opacity",mt),zt=m.transition(At.exit()).style("opacity",mt).remove(),Ot=m.transition(At.order()).style("opacity",1),jt=Math.max(F,0)+ae,rr=ln(_t),dr=Je.selectAll(".domain").data([0]),Sr=(dr.enter().append("path").attr("class","domain"),m.transition(dr));xt.append("line"),xt.append("text");var kr,Kr,Jr,pn,sn=xt.select("line"),Un=Ot.select("line"),Xn=At.select("text").text(kt),ha=xt.select("text"),Gr=Ot.select("text"),An=R==="top"||R==="left"?-1:1;if(R==="bottom"||R==="top"?(Ve=Ts,kr="x",Jr="y",Kr="x2",pn="y2",Xn.attr("dy",An<0?"0em":".71em").style("text-anchor","middle"),Sr.attr("d","M"+rr[0]+","+An*q+"V0H"+rr[1]+"V"+An*q)):(Ve=fl,kr="y",Jr="x",Kr="y2",pn="x2",Xn.attr("dy",".32em").style("text-anchor",An<0?"end":"start"),Sr.attr("d","M"+An*q+","+rr[0]+"H0V"+rr[1]+"H"+An*q)),sn.attr(pn,An*F),ha.attr(Jr,An*jt),Un.attr(Kr,0).attr(pn,An*F),Gr.attr(kr,0).attr(Jr,An*jt),_t.rangeBand){var Jn=_t,Yn=Jn.rangeBand()/2;at=_t=function(ia){return Jn(ia)+Yn}}else at.rangeBand?at=_t:zt.call(Ve,_t,at);xt.call(Ve,at,_t),Ot.call(Ve,_t,_t)})}return ke.scale=function(Le){return arguments.length?(C=Le,ke):C},ke.orient=function(Le){return arguments.length?(R=Le in _l?Le+"":ul,ke):R},ke.ticks=function(){return arguments.length?(ue=k(arguments),ke):ue},ke.tickValues=function(Le){return arguments.length?(xe=Le,ke):xe},ke.tickFormat=function(Le){return arguments.length?(ce=Le,ke):ce},ke.tickSize=function(Le){var Ve=arguments.length;return Ve?(F=+Le,q=+arguments[Ve-1],ke):F},ke.innerTickSize=function(Le){return arguments.length?(F=+Le,ke):F},ke.outerTickSize=function(Le){return arguments.length?(q=+Le,ke):q},ke.tickPadding=function(Le){return arguments.length?(ae=+Le,ke):ae},ke.tickSubdivide=function(){return arguments.length&&ke},ke};var ul="bottom",_l={top:1,right:1,bottom:1,left:1};function Ts(ce,C,R){ce.attr("transform",function(F){var q=C(F);return"translate("+(isFinite(q)?q:R(F))+",0)"})}function fl(ce,C,R){ce.attr("transform",function(F){var q=C(F);return"translate(0,"+(isFinite(q)?q:R(F))+")"})}m.svg.brush=function(){var ce,C,R=re(Ve,"brushstart","brush","brushend"),F=null,q=null,ae=[0,0],ue=[0,0],xe=!0,ke=!0,Le=ao[0];function Ve(kt){kt.each(function(){var At=m.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Et).on("touchstart.brush",Et),xt=At.selectAll(".background").data([0]);xt.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),At.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var zt=At.selectAll(".resize").data(Le,E);zt.exit().remove(),zt.enter().append("g").attr("class",function(dr){return"resize "+dr}).style("cursor",function(dr){return Fs[dr]}).append("rect").attr("x",function(dr){return/[ew]$/.test(dr)?-3:null}).attr("y",function(dr){return/^[ns]/.test(dr)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),zt.style("display",Ve.empty()?"none":null);var Ot,jt=m.transition(At),rr=m.transition(xt);F&&(Ot=ln(F),rr.attr("x",Ot[0]).attr("width",Ot[1]-Ot[0]),at(jt)),q&&(Ot=ln(q),rr.attr("y",Ot[0]).attr("height",Ot[1]-Ot[0]),_t(jt)),Je(jt)})}function Je(kt){kt.selectAll(".resize").attr("transform",function(At){return"translate("+ae[+/e$/.test(At)]+","+ue[+/^s/.test(At)]+")"})}function at(kt){kt.select(".extent").attr("x",ae[0]),kt.selectAll(".extent,.n>rect,.s>rect").attr("width",ae[1]-ae[0])}function _t(kt){kt.select(".extent").attr("y",ue[0]),kt.selectAll(".extent,.e>rect,.w>rect").attr("height",ue[1]-ue[0])}function Et(){var kt,At,xt=this,zt=m.select(m.event.target),Ot=R.of(xt,arguments),jt=m.select(xt),rr=zt.datum(),dr=!/^(n|s)$/.test(rr)&&F,Sr=!/^(e|w)$/.test(rr)&&q,kr=zt.classed("extent"),Kr=bt(xt),Jr=m.mouse(xt),pn=m.select(t(xt)).on("keydown.brush",Xn).on("keyup.brush",ha);if(m.event.changedTouches?pn.on("touchmove.brush",Gr).on("touchend.brush",Jn):pn.on("mousemove.brush",Gr).on("mouseup.brush",Jn),jt.interrupt().selectAll("*").interrupt(),kr)Jr[0]=ae[0]-Jr[0],Jr[1]=ue[0]-Jr[1];else if(rr){var sn=+/w$/.test(rr),Un=+/^n/.test(rr);At=[ae[1-sn]-Jr[0],ue[1-Un]-Jr[1]],Jr[0]=ae[sn],Jr[1]=ue[Un]}else m.event.altKey&&(kt=Jr.slice());function Xn(){m.event.keyCode==32&&(kr||(kt=null,Jr[0]-=ae[1],Jr[1]-=ue[1],kr=2),W())}function ha(){m.event.keyCode==32&&kr==2&&(Jr[0]+=ae[1],Jr[1]+=ue[1],kr=0,W())}function Gr(){var Yn=m.mouse(xt),ia=!1;At&&(Yn[0]+=At[0],Yn[1]+=At[1]),kr||(m.event.altKey?(kt||(kt=[(ae[0]+ae[1])/2,(ue[0]+ue[1])/2]),Jr[0]=ae[+(Yn[0]<kt[0])],Jr[1]=ue[+(Yn[1]<kt[1])]):kt=null),dr&&An(Yn,F,0)&&(at(jt),ia=!0),Sr&&An(Yn,q,1)&&(_t(jt),ia=!0),ia&&(Je(jt),Ot({type:"brush",mode:kr?"move":"resize"}))}function An(Yn,ia,da){var La,ea,_a=ln(ia),ya=_a[0],Ia=_a[1],wa=Jr[da],Oa=da?ue:ae,Ha=Oa[1]-Oa[0];if(kr&&(ya-=wa,Ia-=Ha+wa),La=(da?ke:xe)?Math.max(ya,Math.min(Ia,Yn[da])):Yn[da],kr?ea=(La+=wa)+Ha:(kt&&(wa=Math.max(ya,Math.min(Ia,2*kt[da]-La))),wa<La?(ea=La,La=wa):ea=wa),Oa[0]!=La||Oa[1]!=ea)return da?C=null:ce=null,Oa[0]=La,Oa[1]=ea,!0}function Jn(){Gr(),jt.style("pointer-events","all").selectAll(".resize").style("display",Ve.empty()?"none":null),m.select("body").style("cursor",null),pn.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Kr(),Ot({type:"brushend"})}jt.style("pointer-events","none").selectAll(".resize").style("display",null),m.select("body").style("cursor",zt.style("cursor")),Ot({type:"brushstart"}),Gr()}return Ve.event=function(kt){kt.each(function(){var At=R.of(this,arguments),xt={x:ae,y:ue,i:ce,j:C},zt=this.__chart__||xt;this.__chart__=xt,_s?m.select(this).transition().each("start.brush",function(){ce=zt.i,C=zt.j,ae=zt.x,ue=zt.y,At({type:"brushstart"})}).tween("brush:brush",function(){var Ot=mi(ae,xt.x),jt=mi(ue,xt.y);return ce=C=null,function(rr){ae=xt.x=Ot(rr),ue=xt.y=jt(rr),At({type:"brush",mode:"resize"})}}).each("end.brush",function(){ce=xt.i,C=xt.j,At({type:"brush",mode:"resize"}),At({type:"brushend"})}):(At({type:"brushstart"}),At({type:"brush",mode:"resize"}),At({type:"brushend"}))})},Ve.x=function(kt){return arguments.length?(Le=ao[!(F=kt)<<1|!q],Ve):F},Ve.y=function(kt){return arguments.length?(Le=ao[!F<<1|!(q=kt)],Ve):q},Ve.clamp=function(kt){return arguments.length?(F&&q?(xe=!!kt[0],ke=!!kt[1]):F?xe=!!kt:q&&(ke=!!kt),Ve):F&&q?[xe,ke]:F?xe:q?ke:null},Ve.extent=function(kt){var At,xt,zt,Ot,jt;return arguments.length?(F&&(At=kt[0],xt=kt[1],q&&(At=At[0],xt=xt[0]),ce=[At,xt],F.invert&&(At=F(At),xt=F(xt)),xt<At&&(jt=At,At=xt,xt=jt),At==ae[0]&&xt==ae[1]||(ae=[At,xt])),q&&(zt=kt[0],Ot=kt[1],F&&(zt=zt[1],Ot=Ot[1]),C=[zt,Ot],q.invert&&(zt=q(zt),Ot=q(Ot)),Ot<zt&&(jt=zt,zt=Ot,Ot=jt),zt==ue[0]&&Ot==ue[1]||(ue=[zt,Ot])),Ve):(F&&(ce?(At=ce[0],xt=ce[1]):(At=ae[0],xt=ae[1],F.invert&&(At=F.invert(At),xt=F.invert(xt)),xt<At&&(jt=At,At=xt,xt=jt))),q&&(C?(zt=C[0],Ot=C[1]):(zt=ue[0],Ot=ue[1],q.invert&&(zt=q.invert(zt),Ot=q.invert(Ot)),Ot<zt&&(jt=zt,zt=Ot,Ot=jt))),F&&q?[[At,zt],[xt,Ot]]:F?[At,xt]:q&&[zt,Ot])},Ve.clear=function(){return Ve.empty()||(ae=[0,0],ue=[0,0],ce=C=null),Ve},Ve.empty=function(){return!!F&&ae[0]==ae[1]||!!q&&ue[0]==ue[1]},m.rebind(Ve,R,"on")};var Fs={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ao=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function wl(ce){return JSON.parse(ce.responseText)}function Tl(ce){var C=x.createRange();return C.selectNode(x.body),C.createContextualFragment(ce.responseText)}m.text=Mr(function(ce){return ce.responseText}),m.json=function(ce,C){return Ir(ce,"application/json",wl,C)},m.html=function(ce,C){return Ir(ce,"text/html",Tl,C)},m.xml=Mr(function(ce){return ce.responseXML}),typeof Q=="object"&&Q.exports?Q.exports=m:this.d3=m}).apply(self)},{}],59:[function(g,Q,X){Q.exports=g("./quad")},{"./quad":60}],60:[function(g,Q,X){var m=g("binary-search-bounds"),v=g("clamp"),k=g("parse-rect"),x=g("array-bounds"),e=g("pick-by-alias"),t=g("defined"),r=g("flatten-vertex-data"),l=g("is-obj"),n=g("dtype"),d=g("math-log2");function u(o,h){for(var s=h[0],a=h[1],p=1/(h[2]-s),c=1/(h[3]-a),i=new Array(o.length),y=0,f=o.length/2;y<f;y++)i[2*y]=v((o[2*y]-s)*p,0,1),i[2*y+1]=v((o[2*y+1]-a)*c,0,1);return i}Q.exports=function(o,h){h||(h={}),o=r(o,"float64"),h=e(h,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var s=t(h.maxDepth,255),a=t(h.bounds,x(o,2));a[0]===a[2]&&a[2]++,a[1]===a[3]&&a[3]++;var p,c=u(o,a),i=o.length>>>1;h.dtype||(h.dtype="array"),typeof h.dtype=="string"?p=new(n(h.dtype))(i):h.dtype&&(p=h.dtype,Array.isArray(p)&&(p.length=i));for(var y=0;y<i;++y)p[y]=y;var f=[],w=[],b=[],_=[];(function D(U,H,Y,J,W,Z){if(!J.length)return null;var re=f[W]||(f[W]=[]),V=b[W]||(b[W]=[]),B=w[W]||(w[W]=[]),j=re.length;if(++W>s||Z>1073741824){for(var ee=0;ee<J.length;ee++)re.push(J[ee]),V.push(Z),B.push(null,null,null,null);return j}if(re.push(J[0]),V.push(Z),J.length<=1)return B.push(null,null,null,null),j;for(var N=.5*Y,$=U+N,K=H+N,te=[],ie=[],le=[],se=[],ve=1,fe=J.length;ve<fe;ve++){var ye=J[ve],Ae=c[2*ye],pe=c[2*ye+1];Ae<$?pe<K?te.push(ye):ie.push(ye):pe<K?le.push(ye):se.push(ye)}return Z<<=2,B.push(D(U,H,N,te,W,Z),D(U,K,N,ie,W,Z+1),D($,H,N,le,W,Z+2),D($,K,N,se,W,Z+3)),j})(0,0,1,p,0,1);for(var T=0,L=0;L<f.length;L++){var A=f[L];if(p.set)p.set(A,T);else for(var I=0,P=A.length;I<P;I++)p[I+T]=A[I];var S=T+f[L].length;_[L]=[T,S],T=S}return p.range=function(){for(var D,U=[],H=arguments.length;H--;)U[H]=arguments[H];if(l(U[U.length-1])){var Y=U.pop();U.length||Y.x==null&&Y.l==null&&Y.left==null||(U=[Y],D={}),D=e(Y,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else D={};U.length||(U=a);var J=k.apply(void 0,U),W=[Math.min(J.x,J.x+J.width),Math.min(J.y,J.y+J.height),Math.max(J.x,J.x+J.width),Math.max(J.y,J.y+J.height)],Z=W[0],re=W[1],V=W[2],B=W[3],j=u([Z,re,V,B],a),ee=j[0],N=j[1],$=j[2],K=j[3],te=t(D.level,f.length);if(D.d!=null){var ie;typeof D.d=="number"?ie=[D.d,D.d]:D.d.length&&(ie=D.d),te=Math.min(Math.max(Math.ceil(-d(Math.abs(ie[0])/(a[2]-a[0]))),Math.ceil(-d(Math.abs(ie[1])/(a[3]-a[1])))),te)}if(te=Math.min(te,f.length),D.lod)return E(ee,N,$,K,te);var le=[];function se(fe,ye,Ae,pe,ge,we){if(ge!==null&&we!==null&&!(ee>fe+Ae||N>ye+Ae||$<fe||K<ye||pe>=te||ge===we)){var oe=f[pe];we===void 0&&(we=oe.length);for(var de=ge;de<we;de++){var Te=oe[de],Ee=o[2*Te],Me=o[2*Te+1];Ee>=Z&&Ee<=V&&Me>=re&&Me<=B&&le.push(Te)}var De=w[pe],Ie=De[4*ge+0],Oe=De[4*ge+1],Ze=De[4*ge+2],Fe=De[4*ge+3],Pe=ve(De,ge+1),ze=.5*Ae,Ge=pe+1;se(fe,ye,ze,Ge,Ie,Oe||Ze||Fe||Pe),se(fe,ye+ze,ze,Ge,Oe,Ze||Fe||Pe),se(fe+ze,ye,ze,Ge,Ze,Fe||Pe),se(fe+ze,ye+ze,ze,Ge,Fe,Pe)}}function ve(fe,ye){for(var Ae=null,pe=0;Ae===null;)if(Ae=fe[4*ye+pe],++pe>fe.length)return null;return Ae}return se(0,0,1,0,0,1),le},p;function E(D,U,H,Y,J){for(var W=[],Z=0;Z<J;Z++){var re=b[Z],V=_[Z][0],B=z(D,U,Z),j=z(H,Y,Z),ee=m.ge(re,B),N=m.gt(re,j,ee,re.length-1);W[Z]=[ee+V,N+V]}return W}function z(D,U,H){for(var Y=1,J=.5,W=.5,Z=.5,re=0;re<H;re++)Y<<=2,Y+=D<J?U<W?0:1:U<W?2:3,Z*=.5,J+=D<J?-Z:Z,W+=U<W?-Z:Z;return Y}}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(g,Q,X){Object.defineProperty(X,"__esModule",{value:!0});var m=g("@turf/meta");function v(e){var t=0;if(e&&e.length>0){t+=Math.abs(k(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(k(e[r]))}return t}function k(e){var t,r,l,n,d,u,o=0,h=e.length;if(h>2){for(u=0;u<h;u++)u===h-2?(l=h-2,n=h-1,d=0):u===h-1?(l=h-1,n=0,d=1):(l=u,n=u+1,d=u+2),t=e[l],r=e[n],o+=(x(e[d][0])-x(t[0]))*Math.sin(x(r[1]));o=6378137*o*6378137/2}return o}function x(e){return e*Math.PI/180}X.default=function(e){return m.geomReduce(e,function(t,r){return t+function(l){var n,d=0;switch(l.type){case"Polygon":return v(l.coordinates);case"MultiPolygon":for(n=0;n<l.coordinates.length;n++)d+=v(l.coordinates[n]);return d;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(r)},0)}},{"@turf/meta":63}],62:[function(g,Q,X){function m(h,s,a){a===void 0&&(a={});var p={type:"Feature"};return(a.id===0||a.id)&&(p.id=a.id),a.bbox&&(p.bbox=a.bbox),p.properties=s||{},p.geometry=h,p}function v(h,s,a){if(a===void 0&&(a={}),!h)throw new Error("coordinates is required");if(!Array.isArray(h))throw new Error("coordinates must be an Array");if(h.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!o(h[0])||!o(h[1]))throw new Error("coordinates must contain numbers");return m({type:"Point",coordinates:h},s,a)}function k(h,s,a){a===void 0&&(a={});for(var p=0,c=h;p<c.length;p++){var i=c[p];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var y=0;y<i[i.length-1].length;y++)if(i[i.length-1][y]!==i[0][y])throw new Error("First and last Position are not equivalent.")}return m({type:"Polygon",coordinates:h},s,a)}function x(h,s,a){if(a===void 0&&(a={}),h.length<2)throw new Error("coordinates must be an array of two or more positions");return m({type:"LineString",coordinates:h},s,a)}function e(h,s){s===void 0&&(s={});var a={type:"FeatureCollection"};return s.id&&(a.id=s.id),s.bbox&&(a.bbox=s.bbox),a.features=h,a}function t(h,s,a){return a===void 0&&(a={}),m({type:"MultiLineString",coordinates:h},s,a)}function r(h,s,a){return a===void 0&&(a={}),m({type:"MultiPoint",coordinates:h},s,a)}function l(h,s,a){return a===void 0&&(a={}),m({type:"MultiPolygon",coordinates:h},s,a)}function n(h,s){s===void 0&&(s="kilometers");var a=X.factors[s];if(!a)throw new Error(s+" units is invalid");return h*a}function d(h,s){s===void 0&&(s="kilometers");var a=X.factors[s];if(!a)throw new Error(s+" units is invalid");return h/a}function u(h){return 180*(h%(2*Math.PI))/Math.PI}function o(h){return!isNaN(h)&&h!==null&&!Array.isArray(h)}Object.defineProperty(X,"__esModule",{value:!0}),X.earthRadius=63710088e-1,X.factors={centimeters:100*X.earthRadius,centimetres:100*X.earthRadius,degrees:X.earthRadius/111325,feet:3.28084*X.earthRadius,inches:39.37*X.earthRadius,kilometers:X.earthRadius/1e3,kilometres:X.earthRadius/1e3,meters:X.earthRadius,metres:X.earthRadius,miles:X.earthRadius/1609.344,millimeters:1e3*X.earthRadius,millimetres:1e3*X.earthRadius,nauticalmiles:X.earthRadius/1852,radians:1,yards:1.0936*X.earthRadius},X.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/X.earthRadius,yards:1.0936133},X.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},X.feature=m,X.geometry=function(h,s,a){switch(h){case"Point":return v(s).geometry;case"LineString":return x(s).geometry;case"Polygon":return k(s).geometry;case"MultiPoint":return r(s).geometry;case"MultiLineString":return t(s).geometry;case"MultiPolygon":return l(s).geometry;default:throw new Error(h+" is invalid")}},X.point=v,X.points=function(h,s,a){return a===void 0&&(a={}),e(h.map(function(p){return v(p,s)}),a)},X.polygon=k,X.polygons=function(h,s,a){return a===void 0&&(a={}),e(h.map(function(p){return k(p,s)}),a)},X.lineString=x,X.lineStrings=function(h,s,a){return a===void 0&&(a={}),e(h.map(function(p){return x(p,s)}),a)},X.featureCollection=e,X.multiLineString=t,X.multiPoint=r,X.multiPolygon=l,X.geometryCollection=function(h,s,a){return a===void 0&&(a={}),m({type:"GeometryCollection",geometries:h},s,a)},X.round=function(h,s){if(s===void 0&&(s=0),s&&!(s>=0))throw new Error("precision must be a positive number");var a=Math.pow(10,s||0);return Math.round(h*a)/a},X.radiansToLength=n,X.lengthToRadians=d,X.lengthToDegrees=function(h,s){return u(d(h,s))},X.bearingToAzimuth=function(h){var s=h%360;return s<0&&(s+=360),s},X.radiansToDegrees=u,X.degreesToRadians=function(h){return h%360*Math.PI/180},X.convertLength=function(h,s,a){if(s===void 0&&(s="kilometers"),a===void 0&&(a="kilometers"),!(h>=0))throw new Error("length must be a positive number");return n(d(h,s),a)},X.convertArea=function(h,s,a){if(s===void 0&&(s="meters"),a===void 0&&(a="kilometers"),!(h>=0))throw new Error("area must be a positive number");var p=X.areaFactors[s];if(!p)throw new Error("invalid original units");var c=X.areaFactors[a];if(!c)throw new Error("invalid final units");return h/p*c},X.isNumber=o,X.isObject=function(h){return!!h&&h.constructor===Object},X.validateBBox=function(h){if(!h)throw new Error("bbox is required");if(!Array.isArray(h))throw new Error("bbox must be an Array");if(h.length!==4&&h.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");h.forEach(function(s){if(!o(s))throw new Error("bbox must only contain numbers")})},X.validateId=function(h){if(!h)throw new Error("id is required");if(["string","number"].indexOf(typeof h)===-1)throw new Error("id must be a number or a string")}},{}],63:[function(g,Q,X){Object.defineProperty(X,"__esModule",{value:!0});var m=g("@turf/helpers");function v(n,d,u){if(n!==null)for(var o,h,s,a,p,c,i,y,f=0,w=0,b=n.type,_=b==="FeatureCollection",T=b==="Feature",L=_?n.features.length:1,A=0;A<L;A++){p=(y=!!(i=_?n.features[A].geometry:T?n.geometry:n)&&i.type==="GeometryCollection")?i.geometries.length:1;for(var I=0;I<p;I++){var P=0,S=0;if((a=y?i.geometries[I]:i)!==null){c=a.coordinates;var E=a.type;switch(f=!u||E!=="Polygon"&&E!=="MultiPolygon"?0:1,E){case null:break;case"Point":if(d(c,w,A,P,S)===!1)return!1;w++,P++;break;case"LineString":case"MultiPoint":for(o=0;o<c.length;o++){if(d(c[o],w,A,P,S)===!1)return!1;w++,E==="MultiPoint"&&P++}E==="LineString"&&P++;break;case"Polygon":case"MultiLineString":for(o=0;o<c.length;o++){for(h=0;h<c[o].length-f;h++){if(d(c[o][h],w,A,P,S)===!1)return!1;w++}E==="MultiLineString"&&P++,E==="Polygon"&&S++}E==="Polygon"&&P++;break;case"MultiPolygon":for(o=0;o<c.length;o++){for(S=0,h=0;h<c[o].length;h++){for(s=0;s<c[o][h].length-f;s++){if(d(c[o][h][s],w,A,P,S)===!1)return!1;w++}S++}P++}break;case"GeometryCollection":for(o=0;o<a.geometries.length;o++)if(v(a.geometries[o],d,u)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function k(n,d){var u;switch(n.type){case"FeatureCollection":for(u=0;u<n.features.length&&d(n.features[u].properties,u)!==!1;u++);break;case"Feature":d(n.properties,0)}}function x(n,d){if(n.type==="Feature")d(n,0);else if(n.type==="FeatureCollection")for(var u=0;u<n.features.length&&d(n.features[u],u)!==!1;u++);}function e(n,d){var u,o,h,s,a,p,c,i,y,f,w=0,b=n.type==="FeatureCollection",_=n.type==="Feature",T=b?n.features.length:1;for(u=0;u<T;u++){for(p=b?n.features[u].geometry:_?n.geometry:n,i=b?n.features[u].properties:_?n.properties:{},y=b?n.features[u].bbox:_?n.bbox:void 0,f=b?n.features[u].id:_?n.id:void 0,a=(c=!!p&&p.type==="GeometryCollection")?p.geometries.length:1,h=0;h<a;h++)if((s=c?p.geometries[h]:p)!==null)switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(d(s,w,i,y,f)===!1)return!1;break;case"GeometryCollection":for(o=0;o<s.geometries.length;o++)if(d(s.geometries[o],w,i,y,f)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(d(null,w,i,y,f)===!1)return!1;w++}}function t(n,d){e(n,function(u,o,h,s,a){var p,c=u===null?null:u.type;switch(c){case null:case"Point":case"LineString":case"Polygon":return d(m.feature(u,h,{bbox:s,id:a}),o,0)!==!1&&void 0}switch(c){case"MultiPoint":p="Point";break;case"MultiLineString":p="LineString";break;case"MultiPolygon":p="Polygon"}for(var i=0;i<u.coordinates.length;i++){var y={type:p,coordinates:u.coordinates[i]};if(d(m.feature(y,h),o,i)===!1)return!1}})}function r(n,d){t(n,function(u,o,h){var s=0;if(u.geometry){var a=u.geometry.type;if(a!=="Point"&&a!=="MultiPoint"){var p,c=0,i=0,y=0;return v(u,function(f,w,b,_,T){if(p===void 0||o>c||_>i||T>y)return p=f,c=o,i=_,y=T,void(s=0);var L=m.lineString([p,f],u.properties);if(d(L,o,h,T,s)===!1)return!1;s++,p=f})!==!1&&void 0}}})}function l(n,d){if(!n)throw new Error("geojson is required");t(n,function(u,o,h){if(u.geometry!==null){var s=u.geometry.type,a=u.geometry.coordinates;switch(s){case"LineString":if(d(u,o,h,0,0)===!1)return!1;break;case"Polygon":for(var p=0;p<a.length;p++)if(d(m.lineString(a[p],u.properties),o,h,p)===!1)return!1}}})}X.coordEach=v,X.coordReduce=function(n,d,u,o){var h=u;return v(n,function(s,a,p,c,i){h=a===0&&u===void 0?s:d(h,s,a,p,c,i)},o),h},X.propEach=k,X.propReduce=function(n,d,u){var o=u;return k(n,function(h,s){o=s===0&&u===void 0?h:d(o,h,s)}),o},X.featureEach=x,X.featureReduce=function(n,d,u){var o=u;return x(n,function(h,s){o=s===0&&u===void 0?h:d(o,h,s)}),o},X.coordAll=function(n){var d=[];return v(n,function(u){d.push(u)}),d},X.geomEach=e,X.geomReduce=function(n,d,u){var o=u;return e(n,function(h,s,a,p,c){o=s===0&&u===void 0?h:d(o,h,s,a,p,c)}),o},X.flattenEach=t,X.flattenReduce=function(n,d,u){var o=u;return t(n,function(h,s,a){o=s===0&&a===0&&u===void 0?h:d(o,h,s,a)}),o},X.segmentEach=r,X.segmentReduce=function(n,d,u){var o=u,h=!1;return r(n,function(s,a,p,c,i){o=h===!1&&u===void 0?s:d(o,s,a,p,c,i),h=!0}),o},X.lineEach=l,X.lineReduce=function(n,d,u){var o=u;return l(n,function(h,s,a,p){o=s===0&&u===void 0?h:d(o,h,s,a,p)}),o},X.findSegment=function(n,d){if(d=d||{},!m.isObject(d))throw new Error("options is invalid");var u,o=d.featureIndex||0,h=d.multiFeatureIndex||0,s=d.geometryIndex||0,a=d.segmentIndex||0,p=d.properties;switch(n.type){case"FeatureCollection":o<0&&(o=n.features.length+o),p=p||n.features[o].properties,u=n.features[o].geometry;break;case"Feature":p=p||n.properties,u=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=n;break;default:throw new Error("geojson is invalid")}if(u===null)return null;var c=u.coordinates;switch(u.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=c.length+a-1),m.lineString([c[a],c[a+1]],p,d);case"Polygon":return s<0&&(s=c.length+s),a<0&&(a=c[s].length+a-1),m.lineString([c[s][a],c[s][a+1]],p,d);case"MultiLineString":return h<0&&(h=c.length+h),a<0&&(a=c[h].length+a-1),m.lineString([c[h][a],c[h][a+1]],p,d);case"MultiPolygon":return h<0&&(h=c.length+h),s<0&&(s=c[h].length+s),a<0&&(a=c[h][s].length-a-1),m.lineString([c[h][s][a],c[h][s][a+1]],p,d)}throw new Error("geojson is invalid")},X.findPoint=function(n,d){if(d=d||{},!m.isObject(d))throw new Error("options is invalid");var u,o=d.featureIndex||0,h=d.multiFeatureIndex||0,s=d.geometryIndex||0,a=d.coordIndex||0,p=d.properties;switch(n.type){case"FeatureCollection":o<0&&(o=n.features.length+o),p=p||n.features[o].properties,u=n.features[o].geometry;break;case"Feature":p=p||n.properties,u=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=n;break;default:throw new Error("geojson is invalid")}if(u===null)return null;var c=u.coordinates;switch(u.type){case"Point":return m.point(c,p,d);case"MultiPoint":return h<0&&(h=c.length+h),m.point(c[h],p,d);case"LineString":return a<0&&(a=c.length+a),m.point(c[a],p,d);case"Polygon":return s<0&&(s=c.length+s),a<0&&(a=c[s].length+a),m.point(c[s][a],p,d);case"MultiLineString":return h<0&&(h=c.length+h),a<0&&(a=c[h].length+a),m.point(c[h][a],p,d);case"MultiPolygon":return h<0&&(h=c.length+h),s<0&&(s=c[h].length+s),a<0&&(a=c[h][s].length-a),m.point(c[h][s][a],p,d)}throw new Error("geojson is invalid")}},{"@turf/helpers":62}],64:[function(g,Q,X){Object.defineProperty(X,"__esModule",{value:!0});var m=g("@turf/meta");function v(k){var x=[1/0,1/0,-1/0,-1/0];return m.coordEach(k,function(e){x[0]>e[0]&&(x[0]=e[0]),x[1]>e[1]&&(x[1]=e[1]),x[2]<e[0]&&(x[2]=e[0]),x[3]<e[1]&&(x[3]=e[1])}),x}v.default=v,X.default=v},{"@turf/meta":66}],65:[function(g,Q,X){arguments[4][62][0].apply(X,arguments)},{dup:62}],66:[function(g,Q,X){arguments[4][63][0].apply(X,arguments)},{"@turf/helpers":65,dup:63}],67:[function(g,Q,X){Object.defineProperty(X,"__esModule",{value:!0});var m=g("@turf/meta"),v=g("@turf/helpers");X.default=function(k,x){x===void 0&&(x={});var e=0,t=0,r=0;return m.coordEach(k,function(l){e+=l[0],t+=l[1],r++}),v.point([e/r,t/r],x.properties)}},{"@turf/helpers":68,"@turf/meta":69}],68:[function(g,Q,X){function m(h,s,a){a===void 0&&(a={});var p={type:"Feature"};return(a.id===0||a.id)&&(p.id=a.id),a.bbox&&(p.bbox=a.bbox),p.properties=s||{},p.geometry=h,p}function v(h,s,a){return a===void 0&&(a={}),m({type:"Point",coordinates:h},s,a)}function k(h,s,a){a===void 0&&(a={});for(var p=0,c=h;p<c.length;p++){var i=c[p];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var y=0;y<i[i.length-1].length;y++)if(i[i.length-1][y]!==i[0][y])throw new Error("First and last Position are not equivalent.")}return m({type:"Polygon",coordinates:h},s,a)}function x(h,s,a){if(a===void 0&&(a={}),h.length<2)throw new Error("coordinates must be an array of two or more positions");return m({type:"LineString",coordinates:h},s,a)}function e(h,s){s===void 0&&(s={});var a={type:"FeatureCollection"};return s.id&&(a.id=s.id),s.bbox&&(a.bbox=s.bbox),a.features=h,a}function t(h,s,a){return a===void 0&&(a={}),m({type:"MultiLineString",coordinates:h},s,a)}function r(h,s,a){return a===void 0&&(a={}),m({type:"MultiPoint",coordinates:h},s,a)}function l(h,s,a){return a===void 0&&(a={}),m({type:"MultiPolygon",coordinates:h},s,a)}function n(h,s){s===void 0&&(s="kilometers");var a=X.factors[s];if(!a)throw new Error(s+" units is invalid");return h*a}function d(h,s){s===void 0&&(s="kilometers");var a=X.factors[s];if(!a)throw new Error(s+" units is invalid");return h/a}function u(h){return 180*(h%(2*Math.PI))/Math.PI}function o(h){return!isNaN(h)&&h!==null&&!Array.isArray(h)&&!/^\s*$/.test(h)}Object.defineProperty(X,"__esModule",{value:!0}),X.earthRadius=63710088e-1,X.factors={centimeters:100*X.earthRadius,centimetres:100*X.earthRadius,degrees:X.earthRadius/111325,feet:3.28084*X.earthRadius,inches:39.37*X.earthRadius,kilometers:X.earthRadius/1e3,kilometres:X.earthRadius/1e3,meters:X.earthRadius,metres:X.earthRadius,miles:X.earthRadius/1609.344,millimeters:1e3*X.earthRadius,millimetres:1e3*X.earthRadius,nauticalmiles:X.earthRadius/1852,radians:1,yards:X.earthRadius/1.0936},X.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/X.earthRadius,yards:1/1.0936},X.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},X.feature=m,X.geometry=function(h,s,a){switch(h){case"Point":return v(s).geometry;case"LineString":return x(s).geometry;case"Polygon":return k(s).geometry;case"MultiPoint":return r(s).geometry;case"MultiLineString":return t(s).geometry;case"MultiPolygon":return l(s).geometry;default:throw new Error(h+" is invalid")}},X.point=v,X.points=function(h,s,a){return a===void 0&&(a={}),e(h.map(function(p){return v(p,s)}),a)},X.polygon=k,X.polygons=function(h,s,a){return a===void 0&&(a={}),e(h.map(function(p){return k(p,s)}),a)},X.lineString=x,X.lineStrings=function(h,s,a){return a===void 0&&(a={}),e(h.map(function(p){return x(p,s)}),a)},X.featureCollection=e,X.multiLineString=t,X.multiPoint=r,X.multiPolygon=l,X.geometryCollection=function(h,s,a){return a===void 0&&(a={}),m({type:"GeometryCollection",geometries:h},s,a)},X.round=function(h,s){if(s===void 0&&(s=0),s&&!(s>=0))throw new Error("precision must be a positive number");var a=Math.pow(10,s||0);return Math.round(h*a)/a},X.radiansToLength=n,X.lengthToRadians=d,X.lengthToDegrees=function(h,s){return u(d(h,s))},X.bearingToAzimuth=function(h){var s=h%360;return s<0&&(s+=360),s},X.radiansToDegrees=u,X.degreesToRadians=function(h){return h%360*Math.PI/180},X.convertLength=function(h,s,a){if(s===void 0&&(s="kilometers"),a===void 0&&(a="kilometers"),!(h>=0))throw new Error("length must be a positive number");return n(d(h,s),a)},X.convertArea=function(h,s,a){if(s===void 0&&(s="meters"),a===void 0&&(a="kilometers"),!(h>=0))throw new Error("area must be a positive number");var p=X.areaFactors[s];if(!p)throw new Error("invalid original units");var c=X.areaFactors[a];if(!c)throw new Error("invalid final units");return h/p*c},X.isNumber=o,X.isObject=function(h){return!!h&&h.constructor===Object},X.validateBBox=function(h){if(!h)throw new Error("bbox is required");if(!Array.isArray(h))throw new Error("bbox must be an Array");if(h.length!==4&&h.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");h.forEach(function(s){if(!o(s))throw new Error("bbox must only contain numbers")})},X.validateId=function(h){if(!h)throw new Error("id is required");if(["string","number"].indexOf(typeof h)===-1)throw new Error("id must be a number or a string")},X.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},X.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},X.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},X.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},X.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},X.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},X.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},{}],69:[function(g,Q,X){Object.defineProperty(X,"__esModule",{value:!0});var m=g("@turf/helpers");function v(n,d,u){if(n!==null)for(var o,h,s,a,p,c,i,y,f=0,w=0,b=n.type,_=b==="FeatureCollection",T=b==="Feature",L=_?n.features.length:1,A=0;A<L;A++){p=(y=!!(i=_?n.features[A].geometry:T?n.geometry:n)&&i.type==="GeometryCollection")?i.geometries.length:1;for(var I=0;I<p;I++){var P=0,S=0;if((a=y?i.geometries[I]:i)!==null){c=a.coordinates;var E=a.type;switch(f=!u||E!=="Polygon"&&E!=="MultiPolygon"?0:1,E){case null:break;case"Point":if(d(c,w,A,P,S)===!1)return!1;w++,P++;break;case"LineString":case"MultiPoint":for(o=0;o<c.length;o++){if(d(c[o],w,A,P,S)===!1)return!1;w++,E==="MultiPoint"&&P++}E==="LineString"&&P++;break;case"Polygon":case"MultiLineString":for(o=0;o<c.length;o++){for(h=0;h<c[o].length-f;h++){if(d(c[o][h],w,A,P,S)===!1)return!1;w++}E==="MultiLineString"&&P++,E==="Polygon"&&S++}E==="Polygon"&&P++;break;case"MultiPolygon":for(o=0;o<c.length;o++){for(S=0,h=0;h<c[o].length;h++){for(s=0;s<c[o][h].length-f;s++){if(d(c[o][h][s],w,A,P,S)===!1)return!1;w++}S++}P++}break;case"GeometryCollection":for(o=0;o<a.geometries.length;o++)if(v(a.geometries[o],d,u)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function k(n,d){var u;switch(n.type){case"FeatureCollection":for(u=0;u<n.features.length&&d(n.features[u].properties,u)!==!1;u++);break;case"Feature":d(n.properties,0)}}function x(n,d){if(n.type==="Feature")d(n,0);else if(n.type==="FeatureCollection")for(var u=0;u<n.features.length&&d(n.features[u],u)!==!1;u++);}function e(n,d){var u,o,h,s,a,p,c,i,y,f,w=0,b=n.type==="FeatureCollection",_=n.type==="Feature",T=b?n.features.length:1;for(u=0;u<T;u++){for(p=b?n.features[u].geometry:_?n.geometry:n,i=b?n.features[u].properties:_?n.properties:{},y=b?n.features[u].bbox:_?n.bbox:void 0,f=b?n.features[u].id:_?n.id:void 0,a=(c=!!p&&p.type==="GeometryCollection")?p.geometries.length:1,h=0;h<a;h++)if((s=c?p.geometries[h]:p)!==null)switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(d(s,w,i,y,f)===!1)return!1;break;case"GeometryCollection":for(o=0;o<s.geometries.length;o++)if(d(s.geometries[o],w,i,y,f)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(d(null,w,i,y,f)===!1)return!1;w++}}function t(n,d){e(n,function(u,o,h,s,a){var p,c=u===null?null:u.type;switch(c){case null:case"Point":case"LineString":case"Polygon":return d(m.feature(u,h,{bbox:s,id:a}),o,0)!==!1&&void 0}switch(c){case"MultiPoint":p="Point";break;case"MultiLineString":p="LineString";break;case"MultiPolygon":p="Polygon"}for(var i=0;i<u.coordinates.length;i++){var y={type:p,coordinates:u.coordinates[i]};if(d(m.feature(y,h),o,i)===!1)return!1}})}function r(n,d){t(n,function(u,o,h){var s=0;if(u.geometry){var a=u.geometry.type;if(a!=="Point"&&a!=="MultiPoint"){var p,c=0,i=0,y=0;return v(u,function(f,w,b,_,T){if(p===void 0||o>c||_>i||T>y)return p=f,c=o,i=_,y=T,void(s=0);var L=m.lineString([p,f],u.properties);if(d(L,o,h,T,s)===!1)return!1;s++,p=f})!==!1&&void 0}}})}function l(n,d){if(!n)throw new Error("geojson is required");t(n,function(u,o,h){if(u.geometry!==null){var s=u.geometry.type,a=u.geometry.coordinates;switch(s){case"LineString":if(d(u,o,h,0,0)===!1)return!1;break;case"Polygon":for(var p=0;p<a.length;p++)if(d(m.lineString(a[p],u.properties),o,h,p)===!1)return!1}}})}X.coordEach=v,X.coordReduce=function(n,d,u,o){var h=u;return v(n,function(s,a,p,c,i){h=a===0&&u===void 0?s:d(h,s,a,p,c,i)},o),h},X.propEach=k,X.propReduce=function(n,d,u){var o=u;return k(n,function(h,s){o=s===0&&u===void 0?h:d(o,h,s)}),o},X.featureEach=x,X.featureReduce=function(n,d,u){var o=u;return x(n,function(h,s){o=s===0&&u===void 0?h:d(o,h,s)}),o},X.coordAll=function(n){var d=[];return v(n,function(u){d.push(u)}),d},X.geomEach=e,X.geomReduce=function(n,d,u){var o=u;return e(n,function(h,s,a,p,c){o=s===0&&u===void 0?h:d(o,h,s,a,p,c)}),o},X.flattenEach=t,X.flattenReduce=function(n,d,u){var o=u;return t(n,function(h,s,a){o=s===0&&a===0&&u===void 0?h:d(o,h,s,a)}),o},X.segmentEach=r,X.segmentReduce=function(n,d,u){var o=u,h=!1;return r(n,function(s,a,p,c,i){o=h===!1&&u===void 0?s:d(o,s,a,p,c,i),h=!0}),o},X.lineEach=l,X.lineReduce=function(n,d,u){var o=u;return l(n,function(h,s,a,p){o=s===0&&u===void 0?h:d(o,h,s,a,p)}),o},X.findSegment=function(n,d){if(d=d||{},!m.isObject(d))throw new Error("options is invalid");var u,o=d.featureIndex||0,h=d.multiFeatureIndex||0,s=d.geometryIndex||0,a=d.segmentIndex||0,p=d.properties;switch(n.type){case"FeatureCollection":o<0&&(o=n.features.length+o),p=p||n.features[o].properties,u=n.features[o].geometry;break;case"Feature":p=p||n.properties,u=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=n;break;default:throw new Error("geojson is invalid")}if(u===null)return null;var c=u.coordinates;switch(u.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=c.length+a-1),m.lineString([c[a],c[a+1]],p,d);case"Polygon":return s<0&&(s=c.length+s),a<0&&(a=c[s].length+a-1),m.lineString([c[s][a],c[s][a+1]],p,d);case"MultiLineString":return h<0&&(h=c.length+h),a<0&&(a=c[h].length+a-1),m.lineString([c[h][a],c[h][a+1]],p,d);case"MultiPolygon":return h<0&&(h=c.length+h),s<0&&(s=c[h].length+s),a<0&&(a=c[h][s].length-a-1),m.lineString([c[h][s][a],c[h][s][a+1]],p,d)}throw new Error("geojson is invalid")},X.findPoint=function(n,d){if(d=d||{},!m.isObject(d))throw new Error("options is invalid");var u,o=d.featureIndex||0,h=d.multiFeatureIndex||0,s=d.geometryIndex||0,a=d.coordIndex||0,p=d.properties;switch(n.type){case"FeatureCollection":o<0&&(o=n.features.length+o),p=p||n.features[o].properties,u=n.features[o].geometry;break;case"Feature":p=p||n.properties,u=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=n;break;default:throw new Error("geojson is invalid")}if(u===null)return null;var c=u.coordinates;switch(u.type){case"Point":return m.point(c,p,d);case"MultiPoint":return h<0&&(h=c.length+h),m.point(c[h],p,d);case"LineString":return a<0&&(a=c.length+a),m.point(c[a],p,d);case"Polygon":return s<0&&(s=c.length+s),a<0&&(a=c[s].length+a),m.point(c[s][a],p,d);case"MultiLineString":return h<0&&(h=c.length+h),a<0&&(a=c[h].length+a),m.point(c[h][a],p,d);case"MultiPolygon":return h<0&&(h=c.length+h),s<0&&(s=c[h].length+s),a<0&&(a=c[h][s].length-a),m.point(c[h][s][a],p,d)}throw new Error("geojson is invalid")}},{"@turf/helpers":68}],70:[function(g,Q,X){Q.exports=function(m){var v=0,k=0,x=0,e=0;return m.map(function(t){var r=(t=t.slice())[0],l=r.toUpperCase();if(r!=l)switch(t[0]=l,r){case"a":t[6]+=x,t[7]+=e;break;case"v":t[1]+=e;break;case"h":t[1]+=x;break;default:for(var n=1;n<t.length;)t[n++]+=x,t[n++]+=e}switch(l){case"Z":x=v,e=k;break;case"H":x=t[1];break;case"V":e=t[1];break;case"M":x=v=t[1],e=k=t[2];break;default:x=t[t.length-2],e=t[t.length-1]}return t})}},{}],71:[function(g,Q,X){Q.exports=function(m,v){if(!m||m.length==null)throw Error("Argument should be an array");v=v==null?1:Math.floor(v);for(var k=Array(2*v),x=0;x<v;x++){for(var e=-1/0,t=1/0,r=x,l=m.length;r<l;r+=v)m[r]>e&&(e=m[r]),m[r]<t&&(t=m[r]);k[x]=t,k[v+x]=e}return k}},{}],72:[function(g,Q,X){Q.exports=function(m,v,k){if(typeof Array.prototype.findIndex=="function")return m.findIndex(v,k);if(typeof v!="function")throw new TypeError("predicate must be a function");var x=Object(m),e=x.length;if(e===0)return-1;for(var t=0;t<e;t++)if(v.call(k,x[t],t,x))return t;return-1}},{}],73:[function(g,Q,X){var m=g("array-bounds");Q.exports=function(v,k,x){if(!v||v.length==null)throw Error("Argument should be an array");k==null&&(k=1),x==null&&(x=m(v,k));for(var e=0;e<k;e++){var t=x[k+e],r=x[e],l=e,n=v.length;if(t===1/0&&r===-1/0)for(l=e;l<n;l+=k)v[l]=v[l]===t?1:v[l]===r?0:.5;else if(t===1/0)for(l=e;l<n;l+=k)v[l]=v[l]===t?1:0;else if(r===-1/0)for(l=e;l<n;l+=k)v[l]=v[l]===r?0:1;else{var d=t-r;for(l=e;l<n;l+=k)isNaN(v[l])||(v[l]=d===0?.5:(v[l]-r)/d)}}return v}},{"array-bounds":71}],74:[function(g,Q,X){Q.exports=function(m,v){var k=typeof m=="number",x=typeof v=="number";k&&!x?(v=m,m=0):k||x||(m=0,v=0);var e=(v|=0)-(m|=0);if(e<0)throw new Error("array length must be positive");for(var t=new Array(e),r=0,l=m;r<e;r++,l++)t[r]=l;return t}},{}],75:[function(g,Q,X){(function(m){(function(){var v=g("object-assign");/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function k(_,T){if(_===T)return 0;for(var L=_.length,A=T.length,I=0,P=Math.min(L,A);I<P;++I)if(_[I]!==T[I]){L=_[I],A=T[I];break}return L<A?-1:A<L?1:0}function x(_){return m.Buffer&&typeof m.Buffer.isBuffer=="function"?m.Buffer.isBuffer(_):!(_==null||!_._isBuffer)}var e=g("util/"),t=Object.prototype.hasOwnProperty,r=Array.prototype.slice,l=function(){}.name==="foo";function n(_){return Object.prototype.toString.call(_)}function d(_){return!x(_)&&typeof m.ArrayBuffer=="function"&&(typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(_):!!_&&(_ instanceof DataView||!!(_.buffer&&_.buffer instanceof ArrayBuffer)))}var u=Q.exports=c,o=/\s*function\s+([^\(\s]*)\s*/;function h(_){if(e.isFunction(_)){if(l)return _.name;var T=_.toString().match(o);return T&&T[1]}}function s(_,T){return typeof _=="string"?_.length<T?_:_.slice(0,T):_}function a(_){if(l||!e.isFunction(_))return e.inspect(_);var T=h(_);return"[Function"+(T?": "+T:"")+"]"}function p(_,T,L,A,I){throw new u.AssertionError({message:L,actual:_,expected:T,operator:A,stackStartFunction:I})}function c(_,T){_||p(_,!0,T,"==",u.ok)}function i(_,T,L,A){if(_===T)return!0;if(x(_)&&x(T))return k(_,T)===0;if(e.isDate(_)&&e.isDate(T))return _.getTime()===T.getTime();if(e.isRegExp(_)&&e.isRegExp(T))return _.source===T.source&&_.global===T.global&&_.multiline===T.multiline&&_.lastIndex===T.lastIndex&&_.ignoreCase===T.ignoreCase;if(_!==null&&typeof _=="object"||T!==null&&typeof T=="object"){if(d(_)&&d(T)&&n(_)===n(T)&&!(_ instanceof Float32Array||_ instanceof Float64Array))return k(new Uint8Array(_.buffer),new Uint8Array(T.buffer))===0;if(x(_)!==x(T))return!1;var I=(A=A||{actual:[],expected:[]}).actual.indexOf(_);return I!==-1&&I===A.expected.indexOf(T)||(A.actual.push(_),A.expected.push(T),function(P,S,E,z){if(P==null||S==null)return!1;if(e.isPrimitive(P)||e.isPrimitive(S))return P===S;if(E&&Object.getPrototypeOf(P)!==Object.getPrototypeOf(S))return!1;var D=y(P),U=y(S);if(D&&!U||!D&&U)return!1;if(D)return P=r.call(P),S=r.call(S),i(P,S,E);var H,Y,J=b(P),W=b(S);if(J.length!==W.length)return!1;for(J.sort(),W.sort(),Y=J.length-1;Y>=0;Y--)if(J[Y]!==W[Y])return!1;for(Y=J.length-1;Y>=0;Y--)if(H=J[Y],!i(P[H],S[H],E,z))return!1;return!0}(_,T,L,A))}return L?_===T:_==T}function y(_){return Object.prototype.toString.call(_)=="[object Arguments]"}function f(_,T){if(!_||!T)return!1;if(Object.prototype.toString.call(T)=="[object RegExp]")return T.test(_);try{if(_ instanceof T)return!0}catch{}return!Error.isPrototypeOf(T)&&T.call({},_)===!0}function w(_,T,L,A){var I;if(typeof T!="function")throw new TypeError('"block" argument must be a function');typeof L=="string"&&(A=L,L=null),I=function(E){var z;try{E()}catch(D){z=D}return z}(T),A=(L&&L.name?" ("+L.name+").":".")+(A?" "+A:"."),_&&!I&&p(I,L,"Missing expected exception"+A);var P=typeof A=="string",S=!_&&I&&!L;if((!_&&e.isError(I)&&P&&f(I,L)||S)&&p(I,L,"Got unwanted exception"+A),_&&I&&L&&!f(I,L)||!_&&I)throw I}u.AssertionError=function(_){this.name="AssertionError",this.actual=_.actual,this.expected=_.expected,this.operator=_.operator,_.message?(this.message=_.message,this.generatedMessage=!1):(this.message=function(E){return s(a(E.actual),128)+" "+E.operator+" "+s(a(E.expected),128)}(this),this.generatedMessage=!0);var T=_.stackStartFunction||p;if(Error.captureStackTrace)Error.captureStackTrace(this,T);else{var L=new Error;if(L.stack){var A=L.stack,I=h(T),P=A.indexOf(`
`+I);if(P>=0){var S=A.indexOf(`
`,P+1);A=A.substring(S+1)}this.stack=A}}},e.inherits(u.AssertionError,Error),u.fail=p,u.ok=c,u.equal=function(_,T,L){_!=T&&p(_,T,L,"==",u.equal)},u.notEqual=function(_,T,L){_==T&&p(_,T,L,"!=",u.notEqual)},u.deepEqual=function(_,T,L){i(_,T,!1)||p(_,T,L,"deepEqual",u.deepEqual)},u.deepStrictEqual=function(_,T,L){i(_,T,!0)||p(_,T,L,"deepStrictEqual",u.deepStrictEqual)},u.notDeepEqual=function(_,T,L){i(_,T,!1)&&p(_,T,L,"notDeepEqual",u.notDeepEqual)},u.notDeepStrictEqual=function _(T,L,A){i(T,L,!0)&&p(T,L,A,"notDeepStrictEqual",_)},u.strictEqual=function(_,T,L){_!==T&&p(_,T,L,"===",u.strictEqual)},u.notStrictEqual=function(_,T,L){_===T&&p(_,T,L,"!==",u.notStrictEqual)},u.throws=function(_,T,L){w(!0,_,T,L)},u.doesNotThrow=function(_,T,L){w(!1,_,T,L)},u.ifError=function(_){if(_)throw _},u.strict=v(function _(T,L){T||p(T,!0,L,"==",_)},u,{equal:u.strictEqual,deepEqual:u.deepStrictEqual,notEqual:u.notStrictEqual,notDeepEqual:u.notDeepStrictEqual}),u.strict.strict=u.strict;var b=Object.keys||function(_){var T=[];for(var L in _)t.call(_,L)&&T.push(L);return T}}).call(this)}).call(this,typeof qi<"u"?qi:typeof self<"u"?self:typeof window<"u"?window:{})},{"object-assign":247,"util/":78}],76:[function(g,Q,X){typeof Object.create=="function"?Q.exports=function(m,v){m.super_=v,m.prototype=Object.create(v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}})}:Q.exports=function(m,v){m.super_=v;var k=function(){};k.prototype=v.prototype,m.prototype=new k,m.prototype.constructor=m}},{}],77:[function(g,Q,X){Q.exports=function(m){return m&&typeof m=="object"&&typeof m.copy=="function"&&typeof m.fill=="function"&&typeof m.readUInt8=="function"}},{}],78:[function(g,Q,X){(function(m,v){(function(){var k=/%[sdj%]/g;X.format=function(P){if(!p(P)){for(var S=[],E=0;E<arguments.length;E++)S.push(t(arguments[E]));return S.join(" ")}E=1;for(var z=arguments,D=z.length,U=String(P).replace(k,function(Y){if(Y==="%%")return"%";if(E>=D)return Y;switch(Y){case"%s":return String(z[E++]);case"%d":return Number(z[E++]);case"%j":try{return JSON.stringify(z[E++])}catch{return"[Circular]"}default:return Y}}),H=z[E];E<D;H=z[++E])s(H)||!y(H)?U+=" "+H:U+=" "+t(H);return U},X.deprecate=function(P,S){if(c(v.process))return function(){return X.deprecate(P,S).apply(this,arguments)};if(m.noDeprecation===!0)return P;var E=!1;return function(){if(!E){if(m.throwDeprecation)throw new Error(S);m.traceDeprecation?console.trace(S):console.error(S),E=!0}return P.apply(this,arguments)}};var x,e={};function t(P,S){var E={seen:[],stylize:l};return arguments.length>=3&&(E.depth=arguments[2]),arguments.length>=4&&(E.colors=arguments[3]),h(S)?E.showHidden=S:S&&X._extend(E,S),c(E.showHidden)&&(E.showHidden=!1),c(E.depth)&&(E.depth=2),c(E.colors)&&(E.colors=!1),c(E.customInspect)&&(E.customInspect=!0),E.colors&&(E.stylize=r),n(E,P,E.depth)}function r(P,S){var E=t.styles[S];return E?"\x1B["+t.colors[E][0]+"m"+P+"\x1B["+t.colors[E][1]+"m":P}function l(P,S){return P}function n(P,S,E){if(P.customInspect&&S&&b(S.inspect)&&S.inspect!==X.inspect&&(!S.constructor||S.constructor.prototype!==S)){var z=S.inspect(E,P);return p(z)||(z=n(P,z,E)),z}var D=function(V,B){if(c(B))return V.stylize("undefined","undefined");if(p(B)){var j="'"+JSON.stringify(B).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return V.stylize(j,"string")}if(a(B))return V.stylize(""+B,"number");if(h(B))return V.stylize(""+B,"boolean");if(s(B))return V.stylize("null","null")}(P,S);if(D)return D;var U=Object.keys(S),H=function(V){var B={};return V.forEach(function(j,ee){B[j]=!0}),B}(U);if(P.showHidden&&(U=Object.getOwnPropertyNames(S)),w(S)&&(U.indexOf("message")>=0||U.indexOf("description")>=0))return d(S);if(U.length===0){if(b(S)){var Y=S.name?": "+S.name:"";return P.stylize("[Function"+Y+"]","special")}if(i(S))return P.stylize(RegExp.prototype.toString.call(S),"regexp");if(f(S))return P.stylize(Date.prototype.toString.call(S),"date");if(w(S))return d(S)}var J,W="",Z=!1,re=["{","}"];return o(S)&&(Z=!0,re=["[","]"]),b(S)&&(W=" [Function"+(S.name?": "+S.name:"")+"]"),i(S)&&(W=" "+RegExp.prototype.toString.call(S)),f(S)&&(W=" "+Date.prototype.toUTCString.call(S)),w(S)&&(W=" "+d(S)),U.length!==0||Z&&S.length!=0?E<0?i(S)?P.stylize(RegExp.prototype.toString.call(S),"regexp"):P.stylize("[Object]","special"):(P.seen.push(S),J=Z?function(V,B,j,ee,N){for(var $=[],K=0,te=B.length;K<te;++K)I(B,String(K))?$.push(u(V,B,j,ee,String(K),!0)):$.push("");return N.forEach(function(ie){ie.match(/^\d+$/)||$.push(u(V,B,j,ee,ie,!0))}),$}(P,S,E,H,U):U.map(function(V){return u(P,S,E,H,V,Z)}),P.seen.pop(),function(V,B,j){return V.reduce(function(ee,N){return N.indexOf(`
`)>=0,ee+N.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?j[0]+(B===""?"":B+`
 `)+" "+V.join(`,
  `)+" "+j[1]:j[0]+B+" "+V.join(", ")+" "+j[1]}(J,W,re)):re[0]+W+re[1]}function d(P){return"["+Error.prototype.toString.call(P)+"]"}function u(P,S,E,z,D,U){var H,Y,J;if((J=Object.getOwnPropertyDescriptor(S,D)||{value:S[D]}).get?Y=J.set?P.stylize("[Getter/Setter]","special"):P.stylize("[Getter]","special"):J.set&&(Y=P.stylize("[Setter]","special")),I(z,D)||(H="["+D+"]"),Y||(P.seen.indexOf(J.value)<0?(Y=s(E)?n(P,J.value,null):n(P,J.value,E-1)).indexOf(`
`)>-1&&(Y=U?Y.split(`
`).map(function(W){return"  "+W}).join(`
`).substr(2):`
`+Y.split(`
`).map(function(W){return"   "+W}).join(`
`)):Y=P.stylize("[Circular]","special")),c(H)){if(U&&D.match(/^\d+$/))return Y;(H=JSON.stringify(""+D)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(H=H.substr(1,H.length-2),H=P.stylize(H,"name")):(H=H.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),H=P.stylize(H,"string"))}return H+": "+Y}function o(P){return Array.isArray(P)}function h(P){return typeof P=="boolean"}function s(P){return P===null}function a(P){return typeof P=="number"}function p(P){return typeof P=="string"}function c(P){return P===void 0}function i(P){return y(P)&&_(P)==="[object RegExp]"}function y(P){return typeof P=="object"&&P!==null}function f(P){return y(P)&&_(P)==="[object Date]"}function w(P){return y(P)&&(_(P)==="[object Error]"||P instanceof Error)}function b(P){return typeof P=="function"}function _(P){return Object.prototype.toString.call(P)}function T(P){return P<10?"0"+P.toString(10):P.toString(10)}X.debuglog=function(P){if(c(x)&&(x=m.env.NODE_DEBUG||""),P=P.toUpperCase(),!e[P])if(new RegExp("\\b"+P+"\\b","i").test(x)){var S=m.pid;e[P]=function(){var E=X.format.apply(X,arguments);console.error("%s %d: %s",P,S,E)}}else e[P]=function(){};return e[P]},X.inspect=t,t.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},t.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},X.isArray=o,X.isBoolean=h,X.isNull=s,X.isNullOrUndefined=function(P){return P==null},X.isNumber=a,X.isString=p,X.isSymbol=function(P){return typeof P=="symbol"},X.isUndefined=c,X.isRegExp=i,X.isObject=y,X.isDate=f,X.isError=w,X.isFunction=b,X.isPrimitive=function(P){return P===null||typeof P=="boolean"||typeof P=="number"||typeof P=="string"||typeof P=="symbol"||P===void 0},X.isBuffer=g("./support/isBuffer");var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(){var P=new Date,S=[T(P.getHours()),T(P.getMinutes()),T(P.getSeconds())].join(":");return[P.getDate(),L[P.getMonth()],S].join(" ")}function I(P,S){return Object.prototype.hasOwnProperty.call(P,S)}X.log=function(){console.log("%s - %s",A(),X.format.apply(X,arguments))},X.inherits=g("inherits"),X._extend=function(P,S){if(!S||!y(S))return P;for(var E=Object.keys(S),z=E.length;z--;)P[E[z]]=S[E[z]];return P}}).call(this)}).call(this,g("_process"),typeof qi<"u"?qi:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":77,_process:278,inherits:76}],79:[function(g,Q,X){X.byteLength=function(n){var d=r(n),u=d[0],o=d[1];return 3*(u+o)/4-o},X.toByteArray=function(n){var d,u,o=r(n),h=o[0],s=o[1],a=new k(function(i,y,f){return 3*(y+f)/4-f}(0,h,s)),p=0,c=s>0?h-4:h;for(u=0;u<c;u+=4)d=v[n.charCodeAt(u)]<<18|v[n.charCodeAt(u+1)]<<12|v[n.charCodeAt(u+2)]<<6|v[n.charCodeAt(u+3)],a[p++]=d>>16&255,a[p++]=d>>8&255,a[p++]=255&d;return s===2&&(d=v[n.charCodeAt(u)]<<2|v[n.charCodeAt(u+1)]>>4,a[p++]=255&d),s===1&&(d=v[n.charCodeAt(u)]<<10|v[n.charCodeAt(u+1)]<<4|v[n.charCodeAt(u+2)]>>2,a[p++]=d>>8&255,a[p++]=255&d),a},X.fromByteArray=function(n){for(var d,u=n.length,o=u%3,h=[],s=0,a=u-o;s<a;s+=16383)h.push(l(n,s,s+16383>a?a:s+16383));return o===1?(d=n[u-1],h.push(m[d>>2]+m[d<<4&63]+"==")):o===2&&(d=(n[u-2]<<8)+n[u-1],h.push(m[d>>10]+m[d>>4&63]+m[d<<2&63]+"=")),h.join("")};for(var m=[],v=[],k=typeof Uint8Array<"u"?Uint8Array:Array,x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=x.length;e<t;++e)m[e]=x[e],v[x.charCodeAt(e)]=e;function r(n){var d=n.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=n.indexOf("=");return u===-1&&(u=d),[u,u===d?0:4-u%4]}function l(n,d,u){for(var o,h,s=[],a=d;a<u;a+=3)o=(n[a]<<16&16711680)+(n[a+1]<<8&65280)+(255&n[a+2]),s.push(m[(h=o)>>18&63]+m[h>>12&63]+m[h>>6&63]+m[63&h]);return s.join("")}v["-".charCodeAt(0)]=62,v["_".charCodeAt(0)]=63},{}],80:[function(g,Q,X){function m(r,l,n,d,u){for(var o=u+1;d<=u;){var h=d+u>>>1,s=r[h];(n!==void 0?n(s,l):s-l)>=0?(o=h,u=h-1):d=h+1}return o}function v(r,l,n,d,u){for(var o=u+1;d<=u;){var h=d+u>>>1,s=r[h];(n!==void 0?n(s,l):s-l)>0?(o=h,u=h-1):d=h+1}return o}function k(r,l,n,d,u){for(var o=d-1;d<=u;){var h=d+u>>>1,s=r[h];(n!==void 0?n(s,l):s-l)<0?(o=h,d=h+1):u=h-1}return o}function x(r,l,n,d,u){for(var o=d-1;d<=u;){var h=d+u>>>1,s=r[h];(n!==void 0?n(s,l):s-l)<=0?(o=h,d=h+1):u=h-1}return o}function e(r,l,n,d,u){for(;d<=u;){var o=d+u>>>1,h=r[o],s=n!==void 0?n(h,l):h-l;if(s===0)return o;s<=0?d=o+1:u=o-1}return-1}function t(r,l,n,d,u,o){return typeof n=="function"?o(r,l,n,d===void 0?0:0|d,u===void 0?r.length-1:0|u):o(r,l,void 0,n===void 0?0:0|n,d===void 0?r.length-1:0|d)}Q.exports={ge:function(r,l,n,d,u){return t(r,l,n,d,u,m)},gt:function(r,l,n,d,u){return t(r,l,n,d,u,v)},lt:function(r,l,n,d,u){return t(r,l,n,d,u,k)},le:function(r,l,n,d,u){return t(r,l,n,d,u,x)},eq:function(r,l,n,d,u){return t(r,l,n,d,u,e)}}},{}],81:[function(g,Q,X){function m(k){var x=32;return(k&=-k)&&x--,65535&k&&(x-=16),16711935&k&&(x-=8),252645135&k&&(x-=4),858993459&k&&(x-=2),1431655765&k&&(x-=1),x}X.INT_BITS=32,X.INT_MAX=2147483647,X.INT_MIN=-1<<31,X.sign=function(k){return(k>0)-(k<0)},X.abs=function(k){var x=k>>31;return(k^x)-x},X.min=function(k,x){return x^(k^x)&-(k<x)},X.max=function(k,x){return k^(k^x)&-(k<x)},X.isPow2=function(k){return!(k&k-1||!k)},X.log2=function(k){var x,e;return x=(k>65535)<<4,x|=e=((k>>>=x)>255)<<3,x|=e=((k>>>=e)>15)<<2,(x|=e=((k>>>=e)>3)<<1)|(k>>>=e)>>1},X.log10=function(k){return k>=1e9?9:k>=1e8?8:k>=1e7?7:k>=1e6?6:k>=1e5?5:k>=1e4?4:k>=1e3?3:k>=100?2:k>=10?1:0},X.popCount=function(k){return 16843009*((k=(858993459&(k-=k>>>1&1431655765))+(k>>>2&858993459))+(k>>>4)&252645135)>>>24},X.countTrailingZeros=m,X.nextPow2=function(k){return k+=k===0,--k,k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,(k|=k>>>16)+1},X.prevPow2=function(k){return k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,(k|=k>>>16)-(k>>>1)},X.parity=function(k){return k^=k>>>16,k^=k>>>8,k^=k>>>4,27030>>>(k&=15)&1};var v=new Array(256);(function(k){for(var x=0;x<256;++x){var e=x,t=x,r=7;for(e>>>=1;e;e>>>=1)t<<=1,t|=1&e,--r;k[x]=t<<r&255}})(v),X.reverse=function(k){return v[255&k]<<24|v[k>>>8&255]<<16|v[k>>>16&255]<<8|v[k>>>24&255]},X.interleave2=function(k,x){return(k=1431655765&((k=858993459&((k=252645135&((k=16711935&((k&=65535)|k<<8))|k<<4))|k<<2))|k<<1))|(x=1431655765&((x=858993459&((x=252645135&((x=16711935&((x&=65535)|x<<8))|x<<4))|x<<2))|x<<1))<<1},X.deinterleave2=function(k,x){return(k=65535&((k=16711935&((k=252645135&((k=858993459&((k=k>>>x&1431655765)|k>>>1))|k>>>2))|k>>>4))|k>>>16))<<16>>16},X.interleave3=function(k,x,e){return k=1227133513&((k=3272356035&((k=251719695&((k=4278190335&((k&=1023)|k<<16))|k<<8))|k<<4))|k<<2),(k|=(x=1227133513&((x=3272356035&((x=251719695&((x=4278190335&((x&=1023)|x<<16))|x<<8))|x<<4))|x<<2))<<1)|(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<2},X.deinterleave3=function(k,x){return(k=1023&((k=4278190335&((k=251719695&((k=3272356035&((k=k>>>x&1227133513)|k>>>2))|k>>>4))|k>>>8))|k>>>16))<<22>>22},X.nextCombination=function(k){var x=k|k-1;return x+1|(~x&-~x)-1>>>m(k)+1}},{}],82:[function(g,Q,X){var m=g("clamp");Q.exports=function(e,t){t||(t={});var r,l,n,d,u,o,h,s,a,p,c,i=t.cutoff==null?.25:t.cutoff,y=t.radius==null?8:t.radius,f=t.channel||0;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!t.width||!t.height)throw Error("For raw data width and height should be provided by options");r=t.width,l=t.height,d=e,o=t.stride?t.stride:Math.floor(e.length/r/l)}else window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement?(h=(s=e).getContext("2d"),r=s.width,l=s.height,a=h.getImageData(0,0,r,l),d=a.data,o=4):window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D?(s=e.canvas,h=e,r=s.width,l=s.height,a=h.getImageData(0,0,r,l),d=a.data,o=4):window.ImageData&&e instanceof window.ImageData&&(a=e,r=e.width,l=e.height,d=a.data,o=4);if(n=Math.max(r,l),window.Uint8ClampedArray&&d instanceof window.Uint8ClampedArray||window.Uint8Array&&d instanceof window.Uint8Array)for(u=d,d=Array(r*l),p=0,c=u.length;p<c;p++)d[p]=u[p*o+f]/255;else if(o!==1)throw Error("Raw data can have only 1 value per pixel");var w=Array(r*l),b=Array(r*l),_=Array(n),T=Array(n),L=Array(n+1),A=Array(n);for(p=0,c=r*l;p<c;p++){var I=d[p];w[p]=I===1?0:I===0?v:Math.pow(Math.max(0,.5-I),2),b[p]=I===1?v:I===0?0:Math.pow(Math.max(0,I-.5),2)}k(w,r,l,_,T,A,L),k(b,r,l,_,T,A,L);var P=window.Float32Array?new Float32Array(r*l):new Array(r*l);for(p=0,c=r*l;p<c;p++)P[p]=m(1-((w[p]-b[p])/y+i),0,1);return P};var v=1e20;function k(e,t,r,l,n,d,u){for(var o=0;o<t;o++){for(var h=0;h<r;h++)l[h]=e[h*t+o];for(x(l,n,d,u,r),h=0;h<r;h++)e[h*t+o]=n[h]}for(h=0;h<r;h++){for(o=0;o<t;o++)l[o]=e[h*t+o];for(x(l,n,d,u,t),o=0;o<t;o++)e[h*t+o]=Math.sqrt(n[o])}}function x(e,t,r,l,n){r[0]=0,l[0]=-v,l[1]=+v;for(var d=1,u=0;d<n;d++){for(var o=(e[d]+d*d-(e[r[u]]+r[u]*r[u]))/(2*d-2*r[u]);o<=l[u];)u--,o=(e[d]+d*d-(e[r[u]]+r[u]*r[u]))/(2*d-2*r[u]);r[++u]=d,l[u]=o,l[u+1]=+v}for(d=0,u=0;d<n;d++){for(;l[u+1]<d;)u++;t[d]=(d-r[u])*(d-r[u])+e[r[u]]}}},{clamp:86}],83:[function(g,Q,X){},{}],84:[function(g,Q,X){var m,v=typeof Reflect=="object"?Reflect:null,k=v&&typeof v.apply=="function"?v.apply:function(a,p,c){return Function.prototype.apply.call(a,p,c)};m=v&&typeof v.ownKeys=="function"?v.ownKeys:Object.getOwnPropertySymbols?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:function(a){return Object.getOwnPropertyNames(a)};var x=Number.isNaN||function(a){return a!=a};function e(){e.init.call(this)}Q.exports=e,Q.exports.once=function(a,p){return new Promise(function(c,i){function y(){f!==void 0&&a.removeListener("error",f),c([].slice.call(arguments))}var f;p!=="error"&&(f=function(w){a.removeListener(p,y),i(w)},a.once("error",f)),a.once(p,y)})},e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var t=10;function r(a){if(typeof a!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof a)}function l(a){return a._maxListeners===void 0?e.defaultMaxListeners:a._maxListeners}function n(a,p,c,i){var y,f,w,b;if(r(c),(f=a._events)===void 0?(f=a._events=Object.create(null),a._eventsCount=0):(f.newListener!==void 0&&(a.emit("newListener",p,c.listener?c.listener:c),f=a._events),w=f[p]),w===void 0)w=f[p]=c,++a._eventsCount;else if(typeof w=="function"?w=f[p]=i?[c,w]:[w,c]:i?w.unshift(c):w.push(c),(y=l(a))>0&&w.length>y&&!w.warned){w.warned=!0;var _=new Error("Possible EventEmitter memory leak detected. "+w.length+" "+String(p)+" listeners added. Use emitter.setMaxListeners() to increase limit");_.name="MaxListenersExceededWarning",_.emitter=a,_.type=p,_.count=w.length,b=_,console&&console.warn&&console.warn(b)}return a}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(a,p,c){var i={fired:!1,wrapFn:void 0,target:a,type:p,listener:c},y=d.bind(i);return y.listener=c,i.wrapFn=y,y}function o(a,p,c){var i=a._events;if(i===void 0)return[];var y=i[p];return y===void 0?[]:typeof y=="function"?c?[y.listener||y]:[y]:c?function(f){for(var w=new Array(f.length),b=0;b<w.length;++b)w[b]=f[b].listener||f[b];return w}(y):s(y,y.length)}function h(a){var p=this._events;if(p!==void 0){var c=p[a];if(typeof c=="function")return 1;if(c!==void 0)return c.length}return 0}function s(a,p){for(var c=new Array(p),i=0;i<p;++i)c[i]=a[i];return c}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return t},set:function(a){if(typeof a!="number"||a<0||x(a))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+a+".");t=a}}),e.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(a){if(typeof a!="number"||a<0||x(a))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+a+".");return this._maxListeners=a,this},e.prototype.getMaxListeners=function(){return l(this)},e.prototype.emit=function(a){for(var p=[],c=1;c<arguments.length;c++)p.push(arguments[c]);var i=a==="error",y=this._events;if(y!==void 0)i=i&&y.error===void 0;else if(!i)return!1;if(i){var f;if(p.length>0&&(f=p[0]),f instanceof Error)throw f;var w=new Error("Unhandled error."+(f?" ("+f.message+")":""));throw w.context=f,w}var b=y[a];if(b===void 0)return!1;if(typeof b=="function")k(b,this,p);else{var _=b.length,T=s(b,_);for(c=0;c<_;++c)k(T[c],this,p)}return!0},e.prototype.addListener=function(a,p){return n(this,a,p,!1)},e.prototype.on=e.prototype.addListener,e.prototype.prependListener=function(a,p){return n(this,a,p,!0)},e.prototype.once=function(a,p){return r(p),this.on(a,u(this,a,p)),this},e.prototype.prependOnceListener=function(a,p){return r(p),this.prependListener(a,u(this,a,p)),this},e.prototype.removeListener=function(a,p){var c,i,y,f,w;if(r(p),(i=this._events)===void 0)return this;if((c=i[a])===void 0)return this;if(c===p||c.listener===p)--this._eventsCount==0?this._events=Object.create(null):(delete i[a],i.removeListener&&this.emit("removeListener",a,c.listener||p));else if(typeof c!="function"){for(y=-1,f=c.length-1;f>=0;f--)if(c[f]===p||c[f].listener===p){w=c[f].listener,y=f;break}if(y<0)return this;y===0?c.shift():function(b,_){for(;_+1<b.length;_++)b[_]=b[_+1];b.pop()}(c,y),c.length===1&&(i[a]=c[0]),i.removeListener!==void 0&&this.emit("removeListener",a,w||p)}return this},e.prototype.off=e.prototype.removeListener,e.prototype.removeAllListeners=function(a){var p,c,i;if((c=this._events)===void 0)return this;if(c.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):c[a]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete c[a]),this;if(arguments.length===0){var y,f=Object.keys(c);for(i=0;i<f.length;++i)(y=f[i])!=="removeListener"&&this.removeAllListeners(y);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(p=c[a])=="function")this.removeListener(a,p);else if(p!==void 0)for(i=p.length-1;i>=0;i--)this.removeListener(a,p[i]);return this},e.prototype.listeners=function(a){return o(this,a,!0)},e.prototype.rawListeners=function(a){return o(this,a,!1)},e.listenerCount=function(a,p){return typeof a.listenerCount=="function"?a.listenerCount(p):h.call(a,p)},e.prototype.listenerCount=h,e.prototype.eventNames=function(){return this._eventsCount>0?m(this._events):[]}},{}],85:[function(g,Q,X){(function(m){(function(){var v=g("base64-js"),k=g("ieee754");X.Buffer=e,X.SlowBuffer=function(V){return+V!=V&&(V=0),e.alloc(+V)},X.INSPECT_MAX_BYTES=50;function x(V){if(V>2147483647)throw new RangeError('The value "'+V+'" is invalid for option "size"');var B=new Uint8Array(V);return B.__proto__=e.prototype,B}function e(V,B,j){if(typeof V=="number"){if(typeof B=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return l(V)}return t(V,B,j)}function t(V,B,j){if(typeof V=="string")return function($,K){if(typeof K=="string"&&K!==""||(K="utf8"),!e.isEncoding(K))throw new TypeError("Unknown encoding: "+K);var te=0|u($,K),ie=x(te),le=ie.write($,K);return le!==te&&(ie=ie.slice(0,le)),ie}(V,B);if(ArrayBuffer.isView(V))return n(V);if(V==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V);if(Z(V,ArrayBuffer)||V&&Z(V.buffer,ArrayBuffer))return function($,K,te){if(K<0||$.byteLength<K)throw new RangeError('"offset" is outside of buffer bounds');if($.byteLength<K+(te||0))throw new RangeError('"length" is outside of buffer bounds');var ie;return ie=K===void 0&&te===void 0?new Uint8Array($):te===void 0?new Uint8Array($,K):new Uint8Array($,K,te),ie.__proto__=e.prototype,ie}(V,B,j);if(typeof V=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ee=V.valueOf&&V.valueOf();if(ee!=null&&ee!==V)return e.from(ee,B,j);var N=function($){if(e.isBuffer($)){var K=0|d($.length),te=x(K);return te.length===0||$.copy(te,0,0,K),te}if($.length!==void 0)return typeof $.length!="number"||re($.length)?x(0):n($);if($.type==="Buffer"&&Array.isArray($.data))return n($.data)}(V);if(N)return N;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof V[Symbol.toPrimitive]=="function")return e.from(V[Symbol.toPrimitive]("string"),B,j);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V)}function r(V){if(typeof V!="number")throw new TypeError('"size" argument must be of type number');if(V<0)throw new RangeError('The value "'+V+'" is invalid for option "size"')}function l(V){return r(V),x(V<0?0:0|d(V))}function n(V){for(var B=V.length<0?0:0|d(V.length),j=x(B),ee=0;ee<B;ee+=1)j[ee]=255&V[ee];return j}function d(V){if(V>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647 .toString(16)+" bytes");return 0|V}function u(V,B){if(e.isBuffer(V))return V.length;if(ArrayBuffer.isView(V)||Z(V,ArrayBuffer))return V.byteLength;if(typeof V!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof V);var j=V.length,ee=arguments.length>2&&arguments[2]===!0;if(!ee&&j===0)return 0;for(var N=!1;;)switch(B){case"ascii":case"latin1":case"binary":return j;case"utf8":case"utf-8":return Y(V).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*j;case"hex":return j>>>1;case"base64":return J(V).length;default:if(N)return ee?-1:Y(V).length;B=(""+B).toLowerCase(),N=!0}}function o(V,B,j){var ee=!1;if((B===void 0||B<0)&&(B=0),B>this.length||((j===void 0||j>this.length)&&(j=this.length),j<=0)||(j>>>=0)<=(B>>>=0))return"";for(V||(V="utf8");;)switch(V){case"hex":return A(this,B,j);case"utf8":case"utf-8":return _(this,B,j);case"ascii":return T(this,B,j);case"latin1":case"binary":return L(this,B,j);case"base64":return b(this,B,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,B,j);default:if(ee)throw new TypeError("Unknown encoding: "+V);V=(V+"").toLowerCase(),ee=!0}}function h(V,B,j){var ee=V[B];V[B]=V[j],V[j]=ee}function s(V,B,j,ee,N){if(V.length===0)return-1;if(typeof j=="string"?(ee=j,j=0):j>2147483647?j=2147483647:j<-2147483648&&(j=-2147483648),re(j=+j)&&(j=N?0:V.length-1),j<0&&(j=V.length+j),j>=V.length){if(N)return-1;j=V.length-1}else if(j<0){if(!N)return-1;j=0}if(typeof B=="string"&&(B=e.from(B,ee)),e.isBuffer(B))return B.length===0?-1:a(V,B,j,ee,N);if(typeof B=="number")return B&=255,typeof Uint8Array.prototype.indexOf=="function"?N?Uint8Array.prototype.indexOf.call(V,B,j):Uint8Array.prototype.lastIndexOf.call(V,B,j):a(V,[B],j,ee,N);throw new TypeError("val must be string, number or Buffer")}function a(V,B,j,ee,N){var $,K=1,te=V.length,ie=B.length;if(ee!==void 0&&((ee=String(ee).toLowerCase())==="ucs2"||ee==="ucs-2"||ee==="utf16le"||ee==="utf-16le")){if(V.length<2||B.length<2)return-1;K=2,te/=2,ie/=2,j/=2}function le(ye,Ae){return K===1?ye[Ae]:ye.readUInt16BE(Ae*K)}if(N){var se=-1;for($=j;$<te;$++)if(le(V,$)===le(B,se===-1?0:$-se)){if(se===-1&&(se=$),$-se+1===ie)return se*K}else se!==-1&&($-=$-se),se=-1}else for(j+ie>te&&(j=te-ie),$=j;$>=0;$--){for(var ve=!0,fe=0;fe<ie;fe++)if(le(V,$+fe)!==le(B,fe)){ve=!1;break}if(ve)return $}return-1}function p(V,B,j,ee){j=Number(j)||0;var N=V.length-j;ee?(ee=Number(ee))>N&&(ee=N):ee=N;var $=B.length;ee>$/2&&(ee=$/2);for(var K=0;K<ee;++K){var te=parseInt(B.substr(2*K,2),16);if(re(te))return K;V[j+K]=te}return K}function c(V,B,j,ee){return W(Y(B,V.length-j),V,j,ee)}function i(V,B,j,ee){return W(function(N){for(var $=[],K=0;K<N.length;++K)$.push(255&N.charCodeAt(K));return $}(B),V,j,ee)}function y(V,B,j,ee){return i(V,B,j,ee)}function f(V,B,j,ee){return W(J(B),V,j,ee)}function w(V,B,j,ee){return W(function(N,$){for(var K,te,ie,le=[],se=0;se<N.length&&!(($-=2)<0);++se)K=N.charCodeAt(se),te=K>>8,ie=K%256,le.push(ie),le.push(te);return le}(B,V.length-j),V,j,ee)}function b(V,B,j){return B===0&&j===V.length?v.fromByteArray(V):v.fromByteArray(V.slice(B,j))}function _(V,B,j){j=Math.min(V.length,j);for(var ee=[],N=B;N<j;){var $,K,te,ie,le=V[N],se=null,ve=le>239?4:le>223?3:le>191?2:1;if(N+ve<=j)switch(ve){case 1:le<128&&(se=le);break;case 2:(192&($=V[N+1]))==128&&(ie=(31&le)<<6|63&$)>127&&(se=ie);break;case 3:$=V[N+1],K=V[N+2],(192&$)==128&&(192&K)==128&&(ie=(15&le)<<12|(63&$)<<6|63&K)>2047&&(ie<55296||ie>57343)&&(se=ie);break;case 4:$=V[N+1],K=V[N+2],te=V[N+3],(192&$)==128&&(192&K)==128&&(192&te)==128&&(ie=(15&le)<<18|(63&$)<<12|(63&K)<<6|63&te)>65535&&ie<1114112&&(se=ie)}se===null?(se=65533,ve=1):se>65535&&(se-=65536,ee.push(se>>>10&1023|55296),se=56320|1023&se),ee.push(se),N+=ve}return function(fe){var ye=fe.length;if(ye<=4096)return String.fromCharCode.apply(String,fe);for(var Ae="",pe=0;pe<ye;)Ae+=String.fromCharCode.apply(String,fe.slice(pe,pe+=4096));return Ae}(ee)}X.kMaxLength=2147483647,e.TYPED_ARRAY_SUPPORT=function(){try{var V=new Uint8Array(1);return V.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},V.foo()===42}catch{return!1}}(),e.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(V,B,j){return t(V,B,j)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,e.alloc=function(V,B,j){return function(ee,N,$){return r(ee),ee<=0?x(ee):N!==void 0?typeof $=="string"?x(ee).fill(N,$):x(ee).fill(N):x(ee)}(V,B,j)},e.allocUnsafe=function(V){return l(V)},e.allocUnsafeSlow=function(V){return l(V)},e.isBuffer=function(V){return V!=null&&V._isBuffer===!0&&V!==e.prototype},e.compare=function(V,B){if(Z(V,Uint8Array)&&(V=e.from(V,V.offset,V.byteLength)),Z(B,Uint8Array)&&(B=e.from(B,B.offset,B.byteLength)),!e.isBuffer(V)||!e.isBuffer(B))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(V===B)return 0;for(var j=V.length,ee=B.length,N=0,$=Math.min(j,ee);N<$;++N)if(V[N]!==B[N]){j=V[N],ee=B[N];break}return j<ee?-1:ee<j?1:0},e.isEncoding=function(V){switch(String(V).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(V,B){if(!Array.isArray(V))throw new TypeError('"list" argument must be an Array of Buffers');if(V.length===0)return e.alloc(0);var j;if(B===void 0)for(B=0,j=0;j<V.length;++j)B+=V[j].length;var ee=e.allocUnsafe(B),N=0;for(j=0;j<V.length;++j){var $=V[j];if(Z($,Uint8Array)&&($=e.from($)),!e.isBuffer($))throw new TypeError('"list" argument must be an Array of Buffers');$.copy(ee,N),N+=$.length}return ee},e.byteLength=u,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var V=this.length;if(V%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var B=0;B<V;B+=2)h(this,B,B+1);return this},e.prototype.swap32=function(){var V=this.length;if(V%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var B=0;B<V;B+=4)h(this,B,B+3),h(this,B+1,B+2);return this},e.prototype.swap64=function(){var V=this.length;if(V%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var B=0;B<V;B+=8)h(this,B,B+7),h(this,B+1,B+6),h(this,B+2,B+5),h(this,B+3,B+4);return this},e.prototype.toString=function(){var V=this.length;return V===0?"":arguments.length===0?_(this,0,V):o.apply(this,arguments)},e.prototype.toLocaleString=e.prototype.toString,e.prototype.equals=function(V){if(!e.isBuffer(V))throw new TypeError("Argument must be a Buffer");return this===V||e.compare(this,V)===0},e.prototype.inspect=function(){var V="",B=X.INSPECT_MAX_BYTES;return V=this.toString("hex",0,B).replace(/(.{2})/g,"$1 ").trim(),this.length>B&&(V+=" ... "),"<Buffer "+V+">"},e.prototype.compare=function(V,B,j,ee,N){if(Z(V,Uint8Array)&&(V=e.from(V,V.offset,V.byteLength)),!e.isBuffer(V))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof V);if(B===void 0&&(B=0),j===void 0&&(j=V?V.length:0),ee===void 0&&(ee=0),N===void 0&&(N=this.length),B<0||j>V.length||ee<0||N>this.length)throw new RangeError("out of range index");if(ee>=N&&B>=j)return 0;if(ee>=N)return-1;if(B>=j)return 1;if(this===V)return 0;for(var $=(N>>>=0)-(ee>>>=0),K=(j>>>=0)-(B>>>=0),te=Math.min($,K),ie=this.slice(ee,N),le=V.slice(B,j),se=0;se<te;++se)if(ie[se]!==le[se]){$=ie[se],K=le[se];break}return $<K?-1:K<$?1:0},e.prototype.includes=function(V,B,j){return this.indexOf(V,B,j)!==-1},e.prototype.indexOf=function(V,B,j){return s(this,V,B,j,!0)},e.prototype.lastIndexOf=function(V,B,j){return s(this,V,B,j,!1)},e.prototype.write=function(V,B,j,ee){if(B===void 0)ee="utf8",j=this.length,B=0;else if(j===void 0&&typeof B=="string")ee=B,j=this.length,B=0;else{if(!isFinite(B))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");B>>>=0,isFinite(j)?(j>>>=0,ee===void 0&&(ee="utf8")):(ee=j,j=void 0)}var N=this.length-B;if((j===void 0||j>N)&&(j=N),V.length>0&&(j<0||B<0)||B>this.length)throw new RangeError("Attempt to write outside buffer bounds");ee||(ee="utf8");for(var $=!1;;)switch(ee){case"hex":return p(this,V,B,j);case"utf8":case"utf-8":return c(this,V,B,j);case"ascii":return i(this,V,B,j);case"latin1":case"binary":return y(this,V,B,j);case"base64":return f(this,V,B,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,V,B,j);default:if($)throw new TypeError("Unknown encoding: "+ee);ee=(""+ee).toLowerCase(),$=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(V,B,j){var ee="";j=Math.min(V.length,j);for(var N=B;N<j;++N)ee+=String.fromCharCode(127&V[N]);return ee}function L(V,B,j){var ee="";j=Math.min(V.length,j);for(var N=B;N<j;++N)ee+=String.fromCharCode(V[N]);return ee}function A(V,B,j){var ee=V.length;(!B||B<0)&&(B=0),(!j||j<0||j>ee)&&(j=ee);for(var N="",$=B;$<j;++$)N+=H(V[$]);return N}function I(V,B,j){for(var ee=V.slice(B,j),N="",$=0;$<ee.length;$+=2)N+=String.fromCharCode(ee[$]+256*ee[$+1]);return N}function P(V,B,j){if(V%1!=0||V<0)throw new RangeError("offset is not uint");if(V+B>j)throw new RangeError("Trying to access beyond buffer length")}function S(V,B,j,ee,N,$){if(!e.isBuffer(V))throw new TypeError('"buffer" argument must be a Buffer instance');if(B>N||B<$)throw new RangeError('"value" argument is out of bounds');if(j+ee>V.length)throw new RangeError("Index out of range")}function E(V,B,j,ee,N,$){if(j+ee>V.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("Index out of range")}function z(V,B,j,ee,N){return B=+B,j>>>=0,N||E(V,0,j,4),k.write(V,B,j,ee,23,4),j+4}function D(V,B,j,ee,N){return B=+B,j>>>=0,N||E(V,0,j,8),k.write(V,B,j,ee,52,8),j+8}e.prototype.slice=function(V,B){var j=this.length;(V=~~V)<0?(V+=j)<0&&(V=0):V>j&&(V=j),(B=B===void 0?j:~~B)<0?(B+=j)<0&&(B=0):B>j&&(B=j),B<V&&(B=V);var ee=this.subarray(V,B);return ee.__proto__=e.prototype,ee},e.prototype.readUIntLE=function(V,B,j){V>>>=0,B>>>=0,j||P(V,B,this.length);for(var ee=this[V],N=1,$=0;++$<B&&(N*=256);)ee+=this[V+$]*N;return ee},e.prototype.readUIntBE=function(V,B,j){V>>>=0,B>>>=0,j||P(V,B,this.length);for(var ee=this[V+--B],N=1;B>0&&(N*=256);)ee+=this[V+--B]*N;return ee},e.prototype.readUInt8=function(V,B){return V>>>=0,B||P(V,1,this.length),this[V]},e.prototype.readUInt16LE=function(V,B){return V>>>=0,B||P(V,2,this.length),this[V]|this[V+1]<<8},e.prototype.readUInt16BE=function(V,B){return V>>>=0,B||P(V,2,this.length),this[V]<<8|this[V+1]},e.prototype.readUInt32LE=function(V,B){return V>>>=0,B||P(V,4,this.length),(this[V]|this[V+1]<<8|this[V+2]<<16)+16777216*this[V+3]},e.prototype.readUInt32BE=function(V,B){return V>>>=0,B||P(V,4,this.length),16777216*this[V]+(this[V+1]<<16|this[V+2]<<8|this[V+3])},e.prototype.readIntLE=function(V,B,j){V>>>=0,B>>>=0,j||P(V,B,this.length);for(var ee=this[V],N=1,$=0;++$<B&&(N*=256);)ee+=this[V+$]*N;return ee>=(N*=128)&&(ee-=Math.pow(2,8*B)),ee},e.prototype.readIntBE=function(V,B,j){V>>>=0,B>>>=0,j||P(V,B,this.length);for(var ee=B,N=1,$=this[V+--ee];ee>0&&(N*=256);)$+=this[V+--ee]*N;return $>=(N*=128)&&($-=Math.pow(2,8*B)),$},e.prototype.readInt8=function(V,B){return V>>>=0,B||P(V,1,this.length),128&this[V]?-1*(255-this[V]+1):this[V]},e.prototype.readInt16LE=function(V,B){V>>>=0,B||P(V,2,this.length);var j=this[V]|this[V+1]<<8;return 32768&j?4294901760|j:j},e.prototype.readInt16BE=function(V,B){V>>>=0,B||P(V,2,this.length);var j=this[V+1]|this[V]<<8;return 32768&j?4294901760|j:j},e.prototype.readInt32LE=function(V,B){return V>>>=0,B||P(V,4,this.length),this[V]|this[V+1]<<8|this[V+2]<<16|this[V+3]<<24},e.prototype.readInt32BE=function(V,B){return V>>>=0,B||P(V,4,this.length),this[V]<<24|this[V+1]<<16|this[V+2]<<8|this[V+3]},e.prototype.readFloatLE=function(V,B){return V>>>=0,B||P(V,4,this.length),k.read(this,V,!0,23,4)},e.prototype.readFloatBE=function(V,B){return V>>>=0,B||P(V,4,this.length),k.read(this,V,!1,23,4)},e.prototype.readDoubleLE=function(V,B){return V>>>=0,B||P(V,8,this.length),k.read(this,V,!0,52,8)},e.prototype.readDoubleBE=function(V,B){return V>>>=0,B||P(V,8,this.length),k.read(this,V,!1,52,8)},e.prototype.writeUIntLE=function(V,B,j,ee){V=+V,B>>>=0,j>>>=0,ee||S(this,V,B,j,Math.pow(2,8*j)-1,0);var N=1,$=0;for(this[B]=255&V;++$<j&&(N*=256);)this[B+$]=V/N&255;return B+j},e.prototype.writeUIntBE=function(V,B,j,ee){V=+V,B>>>=0,j>>>=0,ee||S(this,V,B,j,Math.pow(2,8*j)-1,0);var N=j-1,$=1;for(this[B+N]=255&V;--N>=0&&($*=256);)this[B+N]=V/$&255;return B+j},e.prototype.writeUInt8=function(V,B,j){return V=+V,B>>>=0,j||S(this,V,B,1,255,0),this[B]=255&V,B+1},e.prototype.writeUInt16LE=function(V,B,j){return V=+V,B>>>=0,j||S(this,V,B,2,65535,0),this[B]=255&V,this[B+1]=V>>>8,B+2},e.prototype.writeUInt16BE=function(V,B,j){return V=+V,B>>>=0,j||S(this,V,B,2,65535,0),this[B]=V>>>8,this[B+1]=255&V,B+2},e.prototype.writeUInt32LE=function(V,B,j){return V=+V,B>>>=0,j||S(this,V,B,4,4294967295,0),this[B+3]=V>>>24,this[B+2]=V>>>16,this[B+1]=V>>>8,this[B]=255&V,B+4},e.prototype.writeUInt32BE=function(V,B,j){return V=+V,B>>>=0,j||S(this,V,B,4,4294967295,0),this[B]=V>>>24,this[B+1]=V>>>16,this[B+2]=V>>>8,this[B+3]=255&V,B+4},e.prototype.writeIntLE=function(V,B,j,ee){if(V=+V,B>>>=0,!ee){var N=Math.pow(2,8*j-1);S(this,V,B,j,N-1,-N)}var $=0,K=1,te=0;for(this[B]=255&V;++$<j&&(K*=256);)V<0&&te===0&&this[B+$-1]!==0&&(te=1),this[B+$]=(V/K>>0)-te&255;return B+j},e.prototype.writeIntBE=function(V,B,j,ee){if(V=+V,B>>>=0,!ee){var N=Math.pow(2,8*j-1);S(this,V,B,j,N-1,-N)}var $=j-1,K=1,te=0;for(this[B+$]=255&V;--$>=0&&(K*=256);)V<0&&te===0&&this[B+$+1]!==0&&(te=1),this[B+$]=(V/K>>0)-te&255;return B+j},e.prototype.writeInt8=function(V,B,j){return V=+V,B>>>=0,j||S(this,V,B,1,127,-128),V<0&&(V=255+V+1),this[B]=255&V,B+1},e.prototype.writeInt16LE=function(V,B,j){return V=+V,B>>>=0,j||S(this,V,B,2,32767,-32768),this[B]=255&V,this[B+1]=V>>>8,B+2},e.prototype.writeInt16BE=function(V,B,j){return V=+V,B>>>=0,j||S(this,V,B,2,32767,-32768),this[B]=V>>>8,this[B+1]=255&V,B+2},e.prototype.writeInt32LE=function(V,B,j){return V=+V,B>>>=0,j||S(this,V,B,4,2147483647,-2147483648),this[B]=255&V,this[B+1]=V>>>8,this[B+2]=V>>>16,this[B+3]=V>>>24,B+4},e.prototype.writeInt32BE=function(V,B,j){return V=+V,B>>>=0,j||S(this,V,B,4,2147483647,-2147483648),V<0&&(V=4294967295+V+1),this[B]=V>>>24,this[B+1]=V>>>16,this[B+2]=V>>>8,this[B+3]=255&V,B+4},e.prototype.writeFloatLE=function(V,B,j){return z(this,V,B,!0,j)},e.prototype.writeFloatBE=function(V,B,j){return z(this,V,B,!1,j)},e.prototype.writeDoubleLE=function(V,B,j){return D(this,V,B,!0,j)},e.prototype.writeDoubleBE=function(V,B,j){return D(this,V,B,!1,j)},e.prototype.copy=function(V,B,j,ee){if(!e.isBuffer(V))throw new TypeError("argument should be a Buffer");if(j||(j=0),ee||ee===0||(ee=this.length),B>=V.length&&(B=V.length),B||(B=0),ee>0&&ee<j&&(ee=j),ee===j||V.length===0||this.length===0)return 0;if(B<0)throw new RangeError("targetStart out of bounds");if(j<0||j>=this.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("sourceEnd out of bounds");ee>this.length&&(ee=this.length),V.length-B<ee-j&&(ee=V.length-B+j);var N=ee-j;if(this===V&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(B,j,ee);else if(this===V&&j<B&&B<ee)for(var $=N-1;$>=0;--$)V[$+B]=this[$+j];else Uint8Array.prototype.set.call(V,this.subarray(j,ee),B);return N},e.prototype.fill=function(V,B,j,ee){if(typeof V=="string"){if(typeof B=="string"?(ee=B,B=0,j=this.length):typeof j=="string"&&(ee=j,j=this.length),ee!==void 0&&typeof ee!="string")throw new TypeError("encoding must be a string");if(typeof ee=="string"&&!e.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee);if(V.length===1){var N=V.charCodeAt(0);(ee==="utf8"&&N<128||ee==="latin1")&&(V=N)}}else typeof V=="number"&&(V&=255);if(B<0||this.length<B||this.length<j)throw new RangeError("Out of range index");if(j<=B)return this;var $;if(B>>>=0,j=j===void 0?this.length:j>>>0,V||(V=0),typeof V=="number")for($=B;$<j;++$)this[$]=V;else{var K=e.isBuffer(V)?V:e.from(V,ee),te=K.length;if(te===0)throw new TypeError('The value "'+V+'" is invalid for argument "value"');for($=0;$<j-B;++$)this[$+B]=K[$%te]}return this};var U=/[^+/0-9A-Za-z-_]/g;function H(V){return V<16?"0"+V.toString(16):V.toString(16)}function Y(V,B){var j;B=B||1/0;for(var ee=V.length,N=null,$=[],K=0;K<ee;++K){if((j=V.charCodeAt(K))>55295&&j<57344){if(!N){if(j>56319){(B-=3)>-1&&$.push(239,191,189);continue}if(K+1===ee){(B-=3)>-1&&$.push(239,191,189);continue}N=j;continue}if(j<56320){(B-=3)>-1&&$.push(239,191,189),N=j;continue}j=65536+(N-55296<<10|j-56320)}else N&&(B-=3)>-1&&$.push(239,191,189);if(N=null,j<128){if((B-=1)<0)break;$.push(j)}else if(j<2048){if((B-=2)<0)break;$.push(j>>6|192,63&j|128)}else if(j<65536){if((B-=3)<0)break;$.push(j>>12|224,j>>6&63|128,63&j|128)}else{if(!(j<1114112))throw new Error("Invalid code point");if((B-=4)<0)break;$.push(j>>18|240,j>>12&63|128,j>>6&63|128,63&j|128)}}return $}function J(V){return v.toByteArray(function(B){if((B=(B=B.split("=")[0]).trim().replace(U,"")).length<2)return"";for(;B.length%4!=0;)B+="=";return B}(V))}function W(V,B,j,ee){for(var N=0;N<ee&&!(N+j>=B.length||N>=V.length);++N)B[N+j]=V[N];return N}function Z(V,B){return V instanceof B||V!=null&&V.constructor!=null&&V.constructor.name!=null&&V.constructor.name===B.name}function re(V){return V!=V}}).call(this)}).call(this,g("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(g,Q,X){Q.exports=function(m,v,k){return v<k?m<v?v:m>k?k:m:m<k?k:m>v?v:m}},{}],87:[function(g,Q,X){var m=g("clamp");function v(k,x){x==null&&(x=!0);var e=k[0],t=k[1],r=k[2],l=k[3];return l==null&&(l=x?1:255),x&&(e*=255,t*=255,r*=255,l*=255),16777216*(e=255&m(e,0,255))+((t=255&m(t,0,255))<<16)+((r=255&m(r,0,255))<<8)+(l=255&m(l,0,255))}Q.exports=v,Q.exports.to=v,Q.exports.from=function(k,x){var e=(k=+k)>>>24,t=(16711680&k)>>>16,r=(65280&k)>>>8,l=255&k;return x===!1?[e,t,r,l]:[e/255,t/255,r/255,l/255]}},{clamp:86}],88:[function(g,Q,X){Q.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(g,Q,X){var m=g("color-rgba"),v=g("clamp"),k=g("dtype");Q.exports=function(x,e){e!=="float"&&e||(e="array"),e==="uint"&&(e="uint8"),e==="uint_clamped"&&(e="uint8_clamped");var t=new(k(e))(4),r=e!=="uint8"&&e!=="uint8_clamped";return x.length&&typeof x!="string"||((x=m(x))[0]/=255,x[1]/=255,x[2]/=255),function(l){return l instanceof Uint8Array||l instanceof Uint8ClampedArray||!!(Array.isArray(l)&&(l[0]>1||l[0]===0)&&(l[1]>1||l[1]===0)&&(l[2]>1||l[2]===0)&&(!l[3]||l[3]>1))}(x)?(t[0]=x[0],t[1]=x[1],t[2]=x[2],t[3]=x[3]!=null?x[3]:255,r&&(t[0]/=255,t[1]/=255,t[2]/=255,t[3]/=255),t):(r?(t[0]=x[0],t[1]=x[1],t[2]=x[2],t[3]=x[3]!=null?x[3]:1):(t[0]=v(Math.floor(255*x[0]),0,255),t[1]=v(Math.floor(255*x[1]),0,255),t[2]=v(Math.floor(255*x[2]),0,255),t[3]=x[3]==null?255:v(Math.floor(255*x[3]),0,255)),t)}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(g,Q,X){(function(m){(function(){var v=g("color-name"),k=g("is-plain-obj"),x=g("defined");Q.exports=function(t){var r,l,n=[],d=1;if(typeof t=="string")if(v[t])n=v[t].slice(),l="rgb";else if(t==="transparent")d=0,l="rgb",n=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(t)){var u=(s=t.slice(1)).length;d=1,u<=4?(n=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],u===4&&(d=parseInt(s[3]+s[3],16)/255)):(n=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],u===8&&(d=parseInt(s[6]+s[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),l="rgb"}else if(r=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(t)){var o=r[1],h=o==="rgb",s=o.replace(/a$/,"");l=s,u=s==="cmyk"?4:s==="gray"?1:3,n=r[2].trim().split(/\s*,\s*/).map(function(p,c){if(/%$/.test(p))return c===u?parseFloat(p)/100:s==="rgb"?255*parseFloat(p)/100:parseFloat(p);if(s[c]==="h"){if(/deg$/.test(p))return parseFloat(p);if(e[p]!==void 0)return e[p]}return parseFloat(p)}),o===s&&n.push(1),d=h||n[u]===void 0?1:n[u],n=n.slice(0,u)}else t.length>10&&/[0-9](?:\s|\/)/.test(t)&&(n=t.match(/([0-9]+)/g).map(function(p){return parseFloat(p)}),l=t.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(t))if(k(t)){var a=x(t.r,t.red,t.R,null);a!==null?(l="rgb",n=[a,x(t.g,t.green,t.G),x(t.b,t.blue,t.B)]):(l="hsl",n=[x(t.h,t.hue,t.H),x(t.s,t.saturation,t.S),x(t.l,t.lightness,t.L,t.b,t.brightness)]),d=x(t.a,t.alpha,t.opacity,1),t.opacity!=null&&(d/=100)}else(Array.isArray(t)||m.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(t))&&(n=[t[0],t[1],t[2]],l="rgb",d=t.length===4?t[3]:1);else l="rgb",n=[t>>>16,(65280&t)>>>8,255&t];return{space:l,values:n,alpha:d}};var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this)}).call(this,typeof qi<"u"?qi:typeof self<"u"?self:typeof window<"u"?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(g,Q,X){var m=g("color-parse"),v=g("color-space/hsl"),k=g("clamp");Q.exports=function(x){var e,t=m(x);return t.space?((e=Array(3))[0]=k(t.values[0],0,255),e[1]=k(t.values[1],0,255),e[2]=k(t.values[2],0,255),t.space[0]==="h"&&(e=v.rgb(e)),e.push(k(t.alpha,0,1)),e):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(g,Q,X){var m=g("./rgb");Q.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(v){var k,x,e,t,r,l=v[0]/360,n=v[1]/100,d=v[2]/100;if(n===0)return[r=255*d,r,r];k=2*d-(x=d<.5?d*(1+n):d+n-d*n),t=[0,0,0];for(var u=0;u<3;u++)(e=l+1/3*-(u-1))<0?e++:e>1&&e--,r=6*e<1?k+6*(x-k)*e:2*e<1?x:3*e<2?k+(x-k)*(2/3-e)*6:k,t[u]=255*r;return t}},m.hsl=function(v){var k,x,e=v[0]/255,t=v[1]/255,r=v[2]/255,l=Math.min(e,t,r),n=Math.max(e,t,r),d=n-l;return n===l?k=0:e===n?k=(t-r)/d:t===n?k=2+(r-e)/d:r===n&&(k=4+(e-t)/d),(k=Math.min(60*k,360))<0&&(k+=360),x=(l+n)/2,[k,100*(n===l?0:x<=.5?d/(n+l):d/(2-n-l)),100*x]}},{"./rgb":93}],93:[function(g,Q,X){Q.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(g,Q,X){Q.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(g,Q,X){Q.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(g,Q,X){Q.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(g,Q,X){Q.exports=["normal","italic","oblique"]},{}],98:[function(g,Q,X){Q.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(g,Q,X){Q.exports={parse:g("./parse"),stringify:g("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(g,Q,X){var m=g("css-font-size-keywords");Q.exports={isSize:function(v){return/^[\d\.]/.test(v)||v.indexOf("/")!==-1||m.indexOf(v)!==-1}}},{"css-font-size-keywords":95}],101:[function(g,Q,X){var m=g("unquote"),v=g("css-global-keywords"),k=g("css-system-font-keywords"),x=g("css-font-weight-keywords"),e=g("css-font-style-keywords"),t=g("css-font-stretch-keywords"),r=g("string-split-by"),l=g("./lib/util").isSize;Q.exports=d;var n=d.cache={};function d(o){if(typeof o!="string")throw new Error("Font argument must be a string.");if(n[o])return n[o];if(o==="")throw new Error("Cannot parse an empty string.");if(k.indexOf(o)!==-1)return n[o]={system:o};for(var h,s={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},a=r(o,/\s+/);h=a.shift();){if(v.indexOf(h)!==-1)return["style","variant","weight","stretch"].forEach(function(c){s[c]=h}),n[o]=s;if(e.indexOf(h)===-1)if(h!=="normal"&&h!=="small-caps")if(t.indexOf(h)===-1){if(x.indexOf(h)===-1){if(l(h)){var p=r(h,"/");if(s.size=p[0],p[1]!=null?s.lineHeight=u(p[1]):a[0]==="/"&&(a.shift(),s.lineHeight=u(a.shift())),!a.length)throw new Error("Missing required font-family.");return s.family=r(a.join(" "),/\s*,\s*/).map(m),n[o]=s}throw new Error("Unknown or unsupported font token: "+h)}s.weight=h}else s.stretch=h;else s.variant=h;else s.style=h}throw new Error("Missing required font-size.")}function u(o){var h=parseFloat(o);return h.toString()===o?h:o}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":306,unquote:329}],102:[function(g,Q,X){var m=g("pick-by-alias"),v=g("./lib/util").isSize,k=h(g("css-global-keywords")),x=h(g("css-system-font-keywords")),e=h(g("css-font-weight-keywords")),t=h(g("css-font-style-keywords")),r=h(g("css-font-stretch-keywords")),l={normal:1,"small-caps":1},n={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},d="1rem",u="serif";function o(s,a){if(s&&!a[s]&&!k[s])throw Error("Unknown keyword `"+s+"`");return s}function h(s){for(var a={},p=0;p<s.length;p++)a[s[p]]=1;return a}Q.exports=function(s){if((s=m(s,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return s.system&&o(s.system,x),s.system;if(o(s.style,t),o(s.variant,l),o(s.weight,e),o(s.stretch,r),s.size==null&&(s.size=d),typeof s.size=="number"&&(s.size+="px"),!v)throw Error("Bad size value `"+s.size+"`");s.family||(s.family=u),Array.isArray(s.family)&&(s.family.length||(s.family=[u]),s.family=s.family.map(function(p){return n[p]?p:'"'+p+'"'}).join(", "));var a=[];return a.push(s.style),s.variant!==s.style&&a.push(s.variant),s.weight!==s.variant&&s.weight!==s.style&&a.push(s.weight),s.stretch!==s.weight&&s.stretch!==s.variant&&s.stretch!==s.style&&a.push(s.stretch),a.push(s.size+(s.lineHeight==null||s.lineHeight==="normal"||s.lineHeight+""=="1"?"":"/"+s.lineHeight)),a.push(s.family),a.filter(Boolean).join(" ")}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(g,Q,X){Q.exports=["inherit","initial","unset"]},{}],104:[function(g,Q,X){Q.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(g,Q,X){var m,v=g("type/value/is"),k=g("type/value/ensure"),x=g("type/plain-function/ensure"),e=g("es5-ext/object/copy"),t=g("es5-ext/object/normalize-options"),r=g("es5-ext/object/map"),l=Function.prototype.bind,n=Object.defineProperty,d=Object.prototype.hasOwnProperty;m=function(u,o,h){var s,a=k(o)&&x(o.value);return delete(s=e(o)).writable,delete s.value,s.get=function(){return!h.overwriteDefinition&&d.call(this,u)?a:(o.value=l.call(a,h.resolveContext?h.resolveContext(this):this),n(this,u,o),this[u])},s},Q.exports=function(u){var o=t(arguments[1]);return v(o.resolveContext)&&x(o.resolveContext),r(u,function(h,s){return m(s,h,o)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":322,"type/value/ensure":326,"type/value/is":327}],106:[function(g,Q,X){var m=g("type/value/is"),v=g("type/plain-function/is"),k=g("es5-ext/object/assign"),x=g("es5-ext/object/normalize-options"),e=g("es5-ext/string/#/contains");(Q.exports=function(t,r){var l,n,d,u,o;return arguments.length<2||typeof t!="string"?(u=r,r=t,t=null):u=arguments[2],m(t)?(l=e.call(t,"c"),n=e.call(t,"e"),d=e.call(t,"w")):(l=d=!0,n=!1),o={value:r,configurable:l,enumerable:n,writable:d},u?k(x(u),o):o}).gs=function(t,r,l){var n,d,u,o;return typeof t!="string"?(u=l,l=r,r=t,t=null):u=arguments[3],m(r)?v(r)?m(l)?v(l)||(u=l,l=void 0):l=void 0:(u=r,r=l=void 0):r=void 0,m(t)?(n=e.call(t,"c"),d=e.call(t,"e")):(n=!0,d=!1),o={get:r,set:l,configurable:n,enumerable:d},u?k(x(u),o):o}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":323,"type/value/is":327}],107:[function(g,Q,X){(function(m,v){v(typeof X=="object"&&Q!==void 0?X:m.d3=m.d3||{})})(this,function(m){function v(P,S){return P<S?-1:P>S?1:P>=S?0:NaN}function k(P){var S;return P.length===1&&(S=P,P=function(E,z){return v(S(E),z)}),{left:function(E,z,D,U){for(D==null&&(D=0),U==null&&(U=E.length);D<U;){var H=D+U>>>1;P(E[H],z)<0?D=H+1:U=H}return D},right:function(E,z,D,U){for(D==null&&(D=0),U==null&&(U=E.length);D<U;){var H=D+U>>>1;P(E[H],z)>0?U=H:D=H+1}return D}}}var x=k(v),e=x.right,t=x.left;function r(P,S){return[P,S]}function l(P){return P===null?NaN:+P}function n(P,S){var E,z,D=P.length,U=0,H=-1,Y=0,J=0;if(S==null)for(;++H<D;)isNaN(E=l(P[H]))||(J+=(z=E-Y)*(E-(Y+=z/++U)));else for(;++H<D;)isNaN(E=l(S(P[H],H,P)))||(J+=(z=E-Y)*(E-(Y+=z/++U)));if(U>1)return J/(U-1)}function d(P,S){var E=n(P,S);return E&&Math.sqrt(E)}function u(P,S){var E,z,D,U=P.length,H=-1;if(S==null){for(;++H<U;)if((E=P[H])!=null&&E>=E)for(z=D=E;++H<U;)(E=P[H])!=null&&(z>E&&(z=E),D<E&&(D=E))}else for(;++H<U;)if((E=S(P[H],H,P))!=null&&E>=E)for(z=D=E;++H<U;)(E=S(P[H],H,P))!=null&&(z>E&&(z=E),D<E&&(D=E));return[z,D]}var o=Array.prototype,h=o.slice,s=o.map;function a(P){return function(){return P}}function p(P){return P}function c(P,S,E){P=+P,S=+S,E=(D=arguments.length)<2?(S=P,P=0,1):D<3?1:+E;for(var z=-1,D=0|Math.max(0,Math.ceil((S-P)/E)),U=new Array(D);++z<D;)U[z]=P+z*E;return U}var i=Math.sqrt(50),y=Math.sqrt(10),f=Math.sqrt(2);function w(P,S,E){var z=(S-P)/Math.max(0,E),D=Math.floor(Math.log(z)/Math.LN10),U=z/Math.pow(10,D);return D>=0?(U>=i?10:U>=y?5:U>=f?2:1)*Math.pow(10,D):-Math.pow(10,-D)/(U>=i?10:U>=y?5:U>=f?2:1)}function b(P,S,E){var z=Math.abs(S-P)/Math.max(0,E),D=Math.pow(10,Math.floor(Math.log(z)/Math.LN10)),U=z/D;return U>=i?D*=10:U>=y?D*=5:U>=f&&(D*=2),S<P?-D:D}function _(P){return Math.ceil(Math.log(P.length)/Math.LN2)+1}function T(P,S,E){if(E==null&&(E=l),z=P.length){if((S=+S)<=0||z<2)return+E(P[0],0,P);if(S>=1)return+E(P[z-1],z-1,P);var z,D=(z-1)*S,U=Math.floor(D),H=+E(P[U],U,P);return H+(+E(P[U+1],U+1,P)-H)*(D-U)}}function L(P,S){var E,z,D=P.length,U=-1;if(S==null){for(;++U<D;)if((E=P[U])!=null&&E>=E)for(z=E;++U<D;)(E=P[U])!=null&&z>E&&(z=E)}else for(;++U<D;)if((E=S(P[U],U,P))!=null&&E>=E)for(z=E;++U<D;)(E=S(P[U],U,P))!=null&&z>E&&(z=E);return z}function A(P){if(!(D=P.length))return[];for(var S=-1,E=L(P,I),z=new Array(E);++S<E;)for(var D,U=-1,H=z[S]=new Array(D);++U<D;)H[U]=P[U][S];return z}function I(P){return P.length}m.bisect=e,m.bisectRight=e,m.bisectLeft=t,m.ascending=v,m.bisector=k,m.cross=function(P,S,E){var z,D,U,H,Y=P.length,J=S.length,W=new Array(Y*J);for(E==null&&(E=r),z=U=0;z<Y;++z)for(H=P[z],D=0;D<J;++D,++U)W[U]=E(H,S[D]);return W},m.descending=function(P,S){return S<P?-1:S>P?1:S>=P?0:NaN},m.deviation=d,m.extent=u,m.histogram=function(){var P=p,S=u,E=_;function z(D){var U,H,Y=D.length,J=new Array(Y);for(U=0;U<Y;++U)J[U]=P(D[U],U,D);var W=S(J),Z=W[0],re=W[1],V=E(J,Z,re);Array.isArray(V)||(V=b(Z,re,V),V=c(Math.ceil(Z/V)*V,re,V));for(var B=V.length;V[0]<=Z;)V.shift(),--B;for(;V[B-1]>re;)V.pop(),--B;var j,ee=new Array(B+1);for(U=0;U<=B;++U)(j=ee[U]=[]).x0=U>0?V[U-1]:Z,j.x1=U<B?V[U]:re;for(U=0;U<Y;++U)Z<=(H=J[U])&&H<=re&&ee[e(V,H,0,B)].push(D[U]);return ee}return z.value=function(D){return arguments.length?(P=typeof D=="function"?D:a(D),z):P},z.domain=function(D){return arguments.length?(S=typeof D=="function"?D:a([D[0],D[1]]),z):S},z.thresholds=function(D){return arguments.length?(E=typeof D=="function"?D:Array.isArray(D)?a(h.call(D)):a(D),z):E},z},m.thresholdFreedmanDiaconis=function(P,S,E){return P=s.call(P,l).sort(v),Math.ceil((E-S)/(2*(T(P,.75)-T(P,.25))*Math.pow(P.length,-1/3)))},m.thresholdScott=function(P,S,E){return Math.ceil((E-S)/(3.5*d(P)*Math.pow(P.length,-1/3)))},m.thresholdSturges=_,m.max=function(P,S){var E,z,D=P.length,U=-1;if(S==null){for(;++U<D;)if((E=P[U])!=null&&E>=E)for(z=E;++U<D;)(E=P[U])!=null&&E>z&&(z=E)}else for(;++U<D;)if((E=S(P[U],U,P))!=null&&E>=E)for(z=E;++U<D;)(E=S(P[U],U,P))!=null&&E>z&&(z=E);return z},m.mean=function(P,S){var E,z=P.length,D=z,U=-1,H=0;if(S==null)for(;++U<z;)isNaN(E=l(P[U]))?--D:H+=E;else for(;++U<z;)isNaN(E=l(S(P[U],U,P)))?--D:H+=E;if(D)return H/D},m.median=function(P,S){var E,z=P.length,D=-1,U=[];if(S==null)for(;++D<z;)isNaN(E=l(P[D]))||U.push(E);else for(;++D<z;)isNaN(E=l(S(P[D],D,P)))||U.push(E);return T(U.sort(v),.5)},m.merge=function(P){for(var S,E,z,D=P.length,U=-1,H=0;++U<D;)H+=P[U].length;for(E=new Array(H);--D>=0;)for(S=(z=P[D]).length;--S>=0;)E[--H]=z[S];return E},m.min=L,m.pairs=function(P,S){S==null&&(S=r);for(var E=0,z=P.length-1,D=P[0],U=new Array(z<0?0:z);E<z;)U[E]=S(D,D=P[++E]);return U},m.permute=function(P,S){for(var E=S.length,z=new Array(E);E--;)z[E]=P[S[E]];return z},m.quantile=T,m.range=c,m.scan=function(P,S){if(E=P.length){var E,z,D=0,U=0,H=P[U];for(S==null&&(S=v);++D<E;)(S(z=P[D],H)<0||S(H,H)!==0)&&(H=z,U=D);return S(H,H)===0?U:void 0}},m.shuffle=function(P,S,E){for(var z,D,U=(E==null?P.length:E)-(S=S==null?0:+S);U;)D=Math.random()*U--|0,z=P[U+S],P[U+S]=P[D+S],P[D+S]=z;return P},m.sum=function(P,S){var E,z=P.length,D=-1,U=0;if(S==null)for(;++D<z;)(E=+P[D])&&(U+=E);else for(;++D<z;)(E=+S(P[D],D,P))&&(U+=E);return U},m.ticks=function(P,S,E){var z,D,U,H,Y=-1;if(E=+E,(P=+P)==(S=+S)&&E>0)return[P];if((z=S<P)&&(D=P,P=S,S=D),(H=w(P,S,E))===0||!isFinite(H))return[];if(H>0)for(P=Math.ceil(P/H),S=Math.floor(S/H),U=new Array(D=Math.ceil(S-P+1));++Y<D;)U[Y]=(P+Y)*H;else for(P=Math.floor(P*H),S=Math.ceil(S*H),U=new Array(D=Math.ceil(P-S+1));++Y<D;)U[Y]=(P-Y)/H;return z&&U.reverse(),U},m.tickIncrement=w,m.tickStep=b,m.transpose=A,m.variance=n,m.zip=function(){return A(arguments)},Object.defineProperty(m,"__esModule",{value:!0})})},{}],108:[function(g,Q,X){(function(m,v){v(typeof X=="object"&&Q!==void 0?X:m.d3=m.d3||{})})(this,function(m){function v(){}function k(u,o){var h=new v;if(u instanceof v)u.each(function(i,y){h.set(y,i)});else if(Array.isArray(u)){var s,a=-1,p=u.length;if(o==null)for(;++a<p;)h.set(a,u[a]);else for(;++a<p;)h.set(o(s=u[a],a,u),s)}else if(u)for(var c in u)h.set(c,u[c]);return h}function x(){return{}}function e(u,o,h){u[o]=h}function t(){return k()}function r(u,o,h){u.set(o,h)}function l(){}v.prototype=k.prototype={constructor:v,has:function(u){return"$"+u in this},get:function(u){return this["$"+u]},set:function(u,o){return this["$"+u]=o,this},remove:function(u){var o="$"+u;return o in this&&delete this[o]},clear:function(){for(var u in this)u[0]==="$"&&delete this[u]},keys:function(){var u=[];for(var o in this)o[0]==="$"&&u.push(o.slice(1));return u},values:function(){var u=[];for(var o in this)o[0]==="$"&&u.push(this[o]);return u},entries:function(){var u=[];for(var o in this)o[0]==="$"&&u.push({key:o.slice(1),value:this[o]});return u},size:function(){var u=0;for(var o in this)o[0]==="$"&&++u;return u},empty:function(){for(var u in this)if(u[0]==="$")return!1;return!0},each:function(u){for(var o in this)o[0]==="$"&&u(this[o],o.slice(1),this)}};var n=k.prototype;function d(u,o){var h=new l;if(u instanceof l)u.each(function(p){h.add(p)});else if(u){var s=-1,a=u.length;if(o==null)for(;++s<a;)h.add(u[s]);else for(;++s<a;)h.add(o(u[s],s,u))}return h}l.prototype=d.prototype={constructor:l,has:n.has,add:function(u){return this["$"+(u+="")]=u,this},remove:n.remove,clear:n.clear,values:n.keys,size:n.size,empty:n.empty,each:n.each},m.nest=function(){var u,o,h,s=[],a=[];function p(c,i,y,f){if(i>=s.length)return u!=null&&c.sort(u),o!=null?o(c):c;for(var w,b,_,T=-1,L=c.length,A=s[i++],I=k(),P=y();++T<L;)(_=I.get(w=A(b=c[T])+""))?_.push(b):I.set(w,[b]);return I.each(function(S,E){f(P,E,p(S,i,y,f))}),P}return h={object:function(c){return p(c,0,x,e)},map:function(c){return p(c,0,t,r)},entries:function(c){return function i(y,f){if(++f>s.length)return y;var w,b=a[f-1];return o!=null&&f>=s.length?w=y.entries():(w=[],y.each(function(_,T){w.push({key:T,values:i(_,f)})})),b!=null?w.sort(function(_,T){return b(_.key,T.key)}):w}(p(c,0,t,r),0)},key:function(c){return s.push(c),h},sortKeys:function(c){return a[s.length-1]=c,h},sortValues:function(c){return u=c,h},rollup:function(c){return o=c,h}}},m.set=d,m.map=k,m.keys=function(u){var o=[];for(var h in u)o.push(h);return o},m.values=function(u){var o=[];for(var h in u)o.push(u[h]);return o},m.entries=function(u){var o=[];for(var h in u)o.push({key:h,value:u[h]});return o},Object.defineProperty(m,"__esModule",{value:!0})})},{}],109:[function(g,Q,X){(function(m,v){v(typeof X=="object"&&Q!==void 0?X:(m=m||self).d3=m.d3||{})})(this,function(m){function v(oe,de,Te){oe.prototype=de.prototype=Te,Te.constructor=oe}function k(oe,de){var Te=Object.create(oe.prototype);for(var Ee in de)Te[Ee]=de[Ee];return Te}function x(){}var e="\\s*([+-]?\\d+)\\s*",t="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",r="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l=/^#([0-9a-f]{3,8})$/,n=new RegExp("^rgb\\("+[e,e,e]+"\\)$"),d=new RegExp("^rgb\\("+[r,r,r]+"\\)$"),u=new RegExp("^rgba\\("+[e,e,e,t]+"\\)$"),o=new RegExp("^rgba\\("+[r,r,r,t]+"\\)$"),h=new RegExp("^hsl\\("+[t,r,r]+"\\)$"),s=new RegExp("^hsla\\("+[t,r,r,t]+"\\)$"),a={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function p(){return this.rgb().formatHex()}function c(){return this.rgb().formatRgb()}function i(oe){var de,Te;return oe=(oe+"").trim().toLowerCase(),(de=l.exec(oe))?(Te=de[1].length,de=parseInt(de[1],16),Te===6?y(de):Te===3?new _(de>>8&15|de>>4&240,de>>4&15|240&de,(15&de)<<4|15&de,1):Te===8?f(de>>24&255,de>>16&255,de>>8&255,(255&de)/255):Te===4?f(de>>12&15|de>>8&240,de>>8&15|de>>4&240,de>>4&15|240&de,((15&de)<<4|15&de)/255):null):(de=n.exec(oe))?new _(de[1],de[2],de[3],1):(de=d.exec(oe))?new _(255*de[1]/100,255*de[2]/100,255*de[3]/100,1):(de=u.exec(oe))?f(de[1],de[2],de[3],de[4]):(de=o.exec(oe))?f(255*de[1]/100,255*de[2]/100,255*de[3]/100,de[4]):(de=h.exec(oe))?I(de[1],de[2]/100,de[3]/100,1):(de=s.exec(oe))?I(de[1],de[2]/100,de[3]/100,de[4]):a.hasOwnProperty(oe)?y(a[oe]):oe==="transparent"?new _(NaN,NaN,NaN,0):null}function y(oe){return new _(oe>>16&255,oe>>8&255,255&oe,1)}function f(oe,de,Te,Ee){return Ee<=0&&(oe=de=Te=NaN),new _(oe,de,Te,Ee)}function w(oe){return oe instanceof x||(oe=i(oe)),oe?new _((oe=oe.rgb()).r,oe.g,oe.b,oe.opacity):new _}function b(oe,de,Te,Ee){return arguments.length===1?w(oe):new _(oe,de,Te,Ee==null?1:Ee)}function _(oe,de,Te,Ee){this.r=+oe,this.g=+de,this.b=+Te,this.opacity=+Ee}function T(){return"#"+A(this.r)+A(this.g)+A(this.b)}function L(){var oe=this.opacity;return((oe=isNaN(oe)?1:Math.max(0,Math.min(1,oe)))===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(oe===1?")":", "+oe+")")}function A(oe){return((oe=Math.max(0,Math.min(255,Math.round(oe)||0)))<16?"0":"")+oe.toString(16)}function I(oe,de,Te,Ee){return Ee<=0?oe=de=Te=NaN:Te<=0||Te>=1?oe=de=NaN:de<=0&&(oe=NaN),new E(oe,de,Te,Ee)}function P(oe){if(oe instanceof E)return new E(oe.h,oe.s,oe.l,oe.opacity);if(oe instanceof x||(oe=i(oe)),!oe)return new E;if(oe instanceof E)return oe;var de=(oe=oe.rgb()).r/255,Te=oe.g/255,Ee=oe.b/255,Me=Math.min(de,Te,Ee),De=Math.max(de,Te,Ee),Ie=NaN,Oe=De-Me,Ze=(De+Me)/2;return Oe?(Ie=de===De?(Te-Ee)/Oe+6*(Te<Ee):Te===De?(Ee-de)/Oe+2:(de-Te)/Oe+4,Oe/=Ze<.5?De+Me:2-De-Me,Ie*=60):Oe=Ze>0&&Ze<1?0:Ie,new E(Ie,Oe,Ze,oe.opacity)}function S(oe,de,Te,Ee){return arguments.length===1?P(oe):new E(oe,de,Te,Ee==null?1:Ee)}function E(oe,de,Te,Ee){this.h=+oe,this.s=+de,this.l=+Te,this.opacity=+Ee}function z(oe,de,Te){return 255*(oe<60?de+(Te-de)*oe/60:oe<180?Te:oe<240?de+(Te-de)*(240-oe)/60:de)}v(x,i,{copy:function(oe){return Object.assign(new this.constructor,this,oe)},displayable:function(){return this.rgb().displayable()},hex:p,formatHex:p,formatHsl:function(){return P(this).formatHsl()},formatRgb:c,toString:c}),v(_,b,k(x,{brighter:function(oe){return oe=oe==null?1/.7:Math.pow(1/.7,oe),new _(this.r*oe,this.g*oe,this.b*oe,this.opacity)},darker:function(oe){return oe=oe==null?.7:Math.pow(.7,oe),new _(this.r*oe,this.g*oe,this.b*oe,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:T,formatHex:T,formatRgb:L,toString:L})),v(E,S,k(x,{brighter:function(oe){return oe=oe==null?1/.7:Math.pow(1/.7,oe),new E(this.h,this.s,this.l*oe,this.opacity)},darker:function(oe){return oe=oe==null?.7:Math.pow(.7,oe),new E(this.h,this.s,this.l*oe,this.opacity)},rgb:function(){var oe=this.h%360+360*(this.h<0),de=isNaN(oe)||isNaN(this.s)?0:this.s,Te=this.l,Ee=Te+(Te<.5?Te:1-Te)*de,Me=2*Te-Ee;return new _(z(oe>=240?oe-240:oe+120,Me,Ee),z(oe,Me,Ee),z(oe<120?oe+240:oe-120,Me,Ee),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var oe=this.opacity;return((oe=isNaN(oe)?1:Math.max(0,Math.min(1,oe)))===1?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(oe===1?")":", "+oe+")")}}));var D=Math.PI/180,U=180/Math.PI,H=6/29,Y=3*H*H;function J(oe){if(oe instanceof Z)return new Z(oe.l,oe.a,oe.b,oe.opacity);if(oe instanceof $)return K(oe);oe instanceof _||(oe=w(oe));var de,Te,Ee=j(oe.r),Me=j(oe.g),De=j(oe.b),Ie=re((.2225045*Ee+.7168786*Me+.0606169*De)/1);return Ee===Me&&Me===De?de=Te=Ie:(de=re((.4360747*Ee+.3850649*Me+.1430804*De)/.96422),Te=re((.0139322*Ee+.0971045*Me+.7141733*De)/.82521)),new Z(116*Ie-16,500*(de-Ie),200*(Ie-Te),oe.opacity)}function W(oe,de,Te,Ee){return arguments.length===1?J(oe):new Z(oe,de,Te,Ee==null?1:Ee)}function Z(oe,de,Te,Ee){this.l=+oe,this.a=+de,this.b=+Te,this.opacity=+Ee}function re(oe){return oe>.008856451679035631?Math.pow(oe,1/3):oe/Y+4/29}function V(oe){return oe>H?oe*oe*oe:Y*(oe-4/29)}function B(oe){return 255*(oe<=.0031308?12.92*oe:1.055*Math.pow(oe,1/2.4)-.055)}function j(oe){return(oe/=255)<=.04045?oe/12.92:Math.pow((oe+.055)/1.055,2.4)}function ee(oe){if(oe instanceof $)return new $(oe.h,oe.c,oe.l,oe.opacity);if(oe instanceof Z||(oe=J(oe)),oe.a===0&&oe.b===0)return new $(NaN,0<oe.l&&oe.l<100?0:NaN,oe.l,oe.opacity);var de=Math.atan2(oe.b,oe.a)*U;return new $(de<0?de+360:de,Math.sqrt(oe.a*oe.a+oe.b*oe.b),oe.l,oe.opacity)}function N(oe,de,Te,Ee){return arguments.length===1?ee(oe):new $(oe,de,Te,Ee==null?1:Ee)}function $(oe,de,Te,Ee){this.h=+oe,this.c=+de,this.l=+Te,this.opacity=+Ee}function K(oe){if(isNaN(oe.h))return new Z(oe.l,0,0,oe.opacity);var de=oe.h*D;return new Z(oe.l,Math.cos(de)*oe.c,Math.sin(de)*oe.c,oe.opacity)}v(Z,W,k(x,{brighter:function(oe){return new Z(this.l+18*(oe==null?1:oe),this.a,this.b,this.opacity)},darker:function(oe){return new Z(this.l-18*(oe==null?1:oe),this.a,this.b,this.opacity)},rgb:function(){var oe=(this.l+16)/116,de=isNaN(this.a)?oe:oe+this.a/500,Te=isNaN(this.b)?oe:oe-this.b/200;return new _(B(3.1338561*(de=.96422*V(de))-1.6168667*(oe=1*V(oe))-.4906146*(Te=.82521*V(Te))),B(-.9787684*de+1.9161415*oe+.033454*Te),B(.0719453*de-.2289914*oe+1.4052427*Te),this.opacity)}})),v($,N,k(x,{brighter:function(oe){return new $(this.h,this.c,this.l+18*(oe==null?1:oe),this.opacity)},darker:function(oe){return new $(this.h,this.c,this.l-18*(oe==null?1:oe),this.opacity)},rgb:function(){return K(this).rgb()}}));var te=-.14861,ie=1.78277,le=-.29227,se=-.90649,ve=1.97294,fe=ve*se,ye=ve*ie,Ae=ie*le-se*te;function pe(oe){if(oe instanceof we)return new we(oe.h,oe.s,oe.l,oe.opacity);oe instanceof _||(oe=w(oe));var de=oe.r/255,Te=oe.g/255,Ee=oe.b/255,Me=(Ae*Ee+fe*de-ye*Te)/(Ae+fe-ye),De=Ee-Me,Ie=(ve*(Te-Me)-le*De)/se,Oe=Math.sqrt(Ie*Ie+De*De)/(ve*Me*(1-Me)),Ze=Oe?Math.atan2(Ie,De)*U-120:NaN;return new we(Ze<0?Ze+360:Ze,Oe,Me,oe.opacity)}function ge(oe,de,Te,Ee){return arguments.length===1?pe(oe):new we(oe,de,Te,Ee==null?1:Ee)}function we(oe,de,Te,Ee){this.h=+oe,this.s=+de,this.l=+Te,this.opacity=+Ee}v(we,ge,k(x,{brighter:function(oe){return oe=oe==null?1/.7:Math.pow(1/.7,oe),new we(this.h,this.s,this.l*oe,this.opacity)},darker:function(oe){return oe=oe==null?.7:Math.pow(.7,oe),new we(this.h,this.s,this.l*oe,this.opacity)},rgb:function(){var oe=isNaN(this.h)?0:(this.h+120)*D,de=+this.l,Te=isNaN(this.s)?0:this.s*de*(1-de),Ee=Math.cos(oe),Me=Math.sin(oe);return new _(255*(de+Te*(te*Ee+ie*Me)),255*(de+Te*(le*Ee+se*Me)),255*(de+Te*(ve*Ee)),this.opacity)}})),m.color=i,m.cubehelix=ge,m.gray=function(oe,de){return new Z(oe,0,0,de==null?1:de)},m.hcl=N,m.hsl=S,m.lab=W,m.lch=function(oe,de,Te,Ee){return arguments.length===1?ee(oe):new $(Te,de,oe,Ee==null?1:Ee)},m.rgb=b,Object.defineProperty(m,"__esModule",{value:!0})})},{}],110:[function(g,Q,X){(function(m,v){v(typeof X=="object"&&Q!==void 0?X:(m=m||self).d3=m.d3||{})})(this,function(m){var v={value:function(){}};function k(){for(var l,n=0,d=arguments.length,u={};n<d;++n){if(!(l=arguments[n]+"")||l in u||/[\s.]/.test(l))throw new Error("illegal type: "+l);u[l]=[]}return new x(u)}function x(l){this._=l}function e(l,n){return l.trim().split(/^|\s+/).map(function(d){var u="",o=d.indexOf(".");if(o>=0&&(u=d.slice(o+1),d=d.slice(0,o)),d&&!n.hasOwnProperty(d))throw new Error("unknown type: "+d);return{type:d,name:u}})}function t(l,n){for(var d,u=0,o=l.length;u<o;++u)if((d=l[u]).name===n)return d.value}function r(l,n,d){for(var u=0,o=l.length;u<o;++u)if(l[u].name===n){l[u]=v,l=l.slice(0,u).concat(l.slice(u+1));break}return d!=null&&l.push({name:n,value:d}),l}x.prototype=k.prototype={constructor:x,on:function(l,n){var d,u=this._,o=e(l+"",u),h=-1,s=o.length;if(!(arguments.length<2)){if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++h<s;)if(d=(l=o[h]).type)u[d]=r(u[d],l.name,n);else if(n==null)for(d in u)u[d]=r(u[d],l.name,null);return this}for(;++h<s;)if((d=(l=o[h]).type)&&(d=t(u[d],l.name)))return d},copy:function(){var l={},n=this._;for(var d in n)l[d]=n[d].slice();return new x(l)},call:function(l,n){if((d=arguments.length-2)>0)for(var d,u,o=new Array(d),h=0;h<d;++h)o[h]=arguments[h+2];if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(h=0,d=(u=this._[l]).length;h<d;++h)u[h].value.apply(n,o)},apply:function(l,n,d){if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(var u=this._[l],o=0,h=u.length;o<h;++o)u[o].value.apply(n,d)}},m.dispatch=k,Object.defineProperty(m,"__esModule",{value:!0})})},{}],111:[function(g,Q,X){(function(m,v){typeof X=="object"&&Q!==void 0?v(X,g("d3-quadtree"),g("d3-collection"),g("d3-dispatch"),g("d3-timer")):v(m.d3=m.d3||{},m.d3,m.d3,m.d3,m.d3)})(this,function(m,v,k,x,e){function t(a){return function(){return a}}function r(){return 1e-6*(Math.random()-.5)}function l(a){return a.x+a.vx}function n(a){return a.y+a.vy}function d(a){return a.index}function u(a,p){var c=a.get(p);if(!c)throw new Error("missing: "+p);return c}function o(a){return a.x}function h(a){return a.y}var s=Math.PI*(3-Math.sqrt(5));m.forceCenter=function(a,p){var c;function i(){var y,f,w=c.length,b=0,_=0;for(y=0;y<w;++y)b+=(f=c[y]).x,_+=f.y;for(b=b/w-a,_=_/w-p,y=0;y<w;++y)(f=c[y]).x-=b,f.y-=_}return a==null&&(a=0),p==null&&(p=0),i.initialize=function(y){c=y},i.x=function(y){return arguments.length?(a=+y,i):a},i.y=function(y){return arguments.length?(p=+y,i):p},i},m.forceCollide=function(a){var p,c,i=1,y=1;function f(){for(var _,T,L,A,I,P,S,E=p.length,z=0;z<y;++z)for(T=v.quadtree(p,l,n).visitAfter(w),_=0;_<E;++_)L=p[_],P=c[L.index],S=P*P,A=L.x+L.vx,I=L.y+L.vy,T.visit(D);function D(U,H,Y,J,W){var Z=U.data,re=U.r,V=P+re;if(!Z)return H>A+V||J<A-V||Y>I+V||W<I-V;if(Z.index>L.index){var B=A-Z.x-Z.vx,j=I-Z.y-Z.vy,ee=B*B+j*j;ee<V*V&&(B===0&&(ee+=(B=r())*B),j===0&&(ee+=(j=r())*j),ee=(V-(ee=Math.sqrt(ee)))/ee*i,L.vx+=(B*=ee)*(V=(re*=re)/(S+re)),L.vy+=(j*=ee)*V,Z.vx-=B*(V=1-V),Z.vy-=j*V)}}}function w(_){if(_.data)return _.r=c[_.data.index];for(var T=_.r=0;T<4;++T)_[T]&&_[T].r>_.r&&(_.r=_[T].r)}function b(){if(p){var _,T,L=p.length;for(c=new Array(L),_=0;_<L;++_)T=p[_],c[T.index]=+a(T,_,p)}}return typeof a!="function"&&(a=t(a==null?1:+a)),f.initialize=function(_){p=_,b()},f.iterations=function(_){return arguments.length?(y=+_,f):y},f.strength=function(_){return arguments.length?(i=+_,f):i},f.radius=function(_){return arguments.length?(a=typeof _=="function"?_:t(+_),b(),f):a},f},m.forceLink=function(a){var p,c,i,y,f,w=d,b=function(S){return 1/Math.min(y[S.source.index],y[S.target.index])},_=t(30),T=1;function L(S){for(var E=0,z=a.length;E<T;++E)for(var D,U,H,Y,J,W,Z,re=0;re<z;++re)U=(D=a[re]).source,Y=(H=D.target).x+H.vx-U.x-U.vx||r(),J=H.y+H.vy-U.y-U.vy||r(),Y*=W=((W=Math.sqrt(Y*Y+J*J))-c[re])/W*S*p[re],J*=W,H.vx-=Y*(Z=f[re]),H.vy-=J*Z,U.vx+=Y*(Z=1-Z),U.vy+=J*Z}function A(){if(i){var S,E,z=i.length,D=a.length,U=k.map(i,w);for(S=0,y=new Array(z);S<D;++S)(E=a[S]).index=S,typeof E.source!="object"&&(E.source=u(U,E.source)),typeof E.target!="object"&&(E.target=u(U,E.target)),y[E.source.index]=(y[E.source.index]||0)+1,y[E.target.index]=(y[E.target.index]||0)+1;for(S=0,f=new Array(D);S<D;++S)E=a[S],f[S]=y[E.source.index]/(y[E.source.index]+y[E.target.index]);p=new Array(D),I(),c=new Array(D),P()}}function I(){if(i)for(var S=0,E=a.length;S<E;++S)p[S]=+b(a[S],S,a)}function P(){if(i)for(var S=0,E=a.length;S<E;++S)c[S]=+_(a[S],S,a)}return a==null&&(a=[]),L.initialize=function(S){i=S,A()},L.links=function(S){return arguments.length?(a=S,A(),L):a},L.id=function(S){return arguments.length?(w=S,L):w},L.iterations=function(S){return arguments.length?(T=+S,L):T},L.strength=function(S){return arguments.length?(b=typeof S=="function"?S:t(+S),I(),L):b},L.distance=function(S){return arguments.length?(_=typeof S=="function"?S:t(+S),P(),L):_},L},m.forceManyBody=function(){var a,p,c,i,y=t(-30),f=1,w=1/0,b=.81;function _(I){var P,S=a.length,E=v.quadtree(a,o,h).visitAfter(L);for(c=I,P=0;P<S;++P)p=a[P],E.visit(A)}function T(){if(a){var I,P,S=a.length;for(i=new Array(S),I=0;I<S;++I)P=a[I],i[P.index]=+y(P,I,a)}}function L(I){var P,S,E,z,D,U=0,H=0;if(I.length){for(E=z=D=0;D<4;++D)(P=I[D])&&(S=Math.abs(P.value))&&(U+=P.value,H+=S,E+=S*P.x,z+=S*P.y);I.x=E/H,I.y=z/H}else{(P=I).x=P.data.x,P.y=P.data.y;do U+=i[P.data.index];while(P=P.next)}I.value=U}function A(I,P,S,E){if(!I.value)return!0;var z=I.x-p.x,D=I.y-p.y,U=E-P,H=z*z+D*D;if(U*U/b<H)return H<w&&(z===0&&(H+=(z=r())*z),D===0&&(H+=(D=r())*D),H<f&&(H=Math.sqrt(f*H)),p.vx+=z*I.value*c/H,p.vy+=D*I.value*c/H),!0;if(!(I.length||H>=w)){(I.data!==p||I.next)&&(z===0&&(H+=(z=r())*z),D===0&&(H+=(D=r())*D),H<f&&(H=Math.sqrt(f*H)));do I.data!==p&&(U=i[I.data.index]*c/H,p.vx+=z*U,p.vy+=D*U);while(I=I.next)}}return _.initialize=function(I){a=I,T()},_.strength=function(I){return arguments.length?(y=typeof I=="function"?I:t(+I),T(),_):y},_.distanceMin=function(I){return arguments.length?(f=I*I,_):Math.sqrt(f)},_.distanceMax=function(I){return arguments.length?(w=I*I,_):Math.sqrt(w)},_.theta=function(I){return arguments.length?(b=I*I,_):Math.sqrt(b)},_},m.forceRadial=function(a,p,c){var i,y,f,w=t(.1);function b(T){for(var L=0,A=i.length;L<A;++L){var I=i[L],P=I.x-p||1e-6,S=I.y-c||1e-6,E=Math.sqrt(P*P+S*S),z=(f[L]-E)*y[L]*T/E;I.vx+=P*z,I.vy+=S*z}}function _(){if(i){var T,L=i.length;for(y=new Array(L),f=new Array(L),T=0;T<L;++T)f[T]=+a(i[T],T,i),y[T]=isNaN(f[T])?0:+w(i[T],T,i)}}return typeof a!="function"&&(a=t(+a)),p==null&&(p=0),c==null&&(c=0),b.initialize=function(T){i=T,_()},b.strength=function(T){return arguments.length?(w=typeof T=="function"?T:t(+T),_(),b):w},b.radius=function(T){return arguments.length?(a=typeof T=="function"?T:t(+T),_(),b):a},b.x=function(T){return arguments.length?(p=+T,b):p},b.y=function(T){return arguments.length?(c=+T,b):c},b},m.forceSimulation=function(a){var p,c=1,i=.001,y=1-Math.pow(i,1/300),f=0,w=.6,b=k.map(),_=e.timer(L),T=x.dispatch("tick","end");function L(){A(),T.call("tick",p),c<i&&(_.stop(),T.call("end",p))}function A(S){var E,z,D=a.length;S===void 0&&(S=1);for(var U=0;U<S;++U)for(c+=(f-c)*y,b.each(function(H){H(c)}),E=0;E<D;++E)(z=a[E]).fx==null?z.x+=z.vx*=w:(z.x=z.fx,z.vx=0),z.fy==null?z.y+=z.vy*=w:(z.y=z.fy,z.vy=0);return p}function I(){for(var S,E=0,z=a.length;E<z;++E){if((S=a[E]).index=E,S.fx!=null&&(S.x=S.fx),S.fy!=null&&(S.y=S.fy),isNaN(S.x)||isNaN(S.y)){var D=10*Math.sqrt(E),U=E*s;S.x=D*Math.cos(U),S.y=D*Math.sin(U)}(isNaN(S.vx)||isNaN(S.vy))&&(S.vx=S.vy=0)}}function P(S){return S.initialize&&S.initialize(a),S}return a==null&&(a=[]),I(),p={tick:A,restart:function(){return _.restart(L),p},stop:function(){return _.stop(),p},nodes:function(S){return arguments.length?(a=S,I(),b.each(P),p):a},alpha:function(S){return arguments.length?(c=+S,p):c},alphaMin:function(S){return arguments.length?(i=+S,p):i},alphaDecay:function(S){return arguments.length?(y=+S,p):+y},alphaTarget:function(S){return arguments.length?(f=+S,p):f},velocityDecay:function(S){return arguments.length?(w=1-S,p):1-w},force:function(S,E){return arguments.length>1?(E==null?b.remove(S):b.set(S,P(E)),p):b.get(S)},find:function(S,E,z){var D,U,H,Y,J,W=0,Z=a.length;for(z==null?z=1/0:z*=z,W=0;W<Z;++W)(H=(D=S-(Y=a[W]).x)*D+(U=E-Y.y)*U)<z&&(J=Y,z=H);return J},on:function(S,E){return arguments.length>1?(T.on(S,E),p):T.on(S)}}},m.forceX=function(a){var p,c,i,y=t(.1);function f(b){for(var _,T=0,L=p.length;T<L;++T)(_=p[T]).vx+=(i[T]-_.x)*c[T]*b}function w(){if(p){var b,_=p.length;for(c=new Array(_),i=new Array(_),b=0;b<_;++b)c[b]=isNaN(i[b]=+a(p[b],b,p))?0:+y(p[b],b,p)}}return typeof a!="function"&&(a=t(a==null?0:+a)),f.initialize=function(b){p=b,w()},f.strength=function(b){return arguments.length?(y=typeof b=="function"?b:t(+b),w(),f):y},f.x=function(b){return arguments.length?(a=typeof b=="function"?b:t(+b),w(),f):a},f},m.forceY=function(a){var p,c,i,y=t(.1);function f(b){for(var _,T=0,L=p.length;T<L;++T)(_=p[T]).vy+=(i[T]-_.y)*c[T]*b}function w(){if(p){var b,_=p.length;for(c=new Array(_),i=new Array(_),b=0;b<_;++b)c[b]=isNaN(i[b]=+a(p[b],b,p))?0:+y(p[b],b,p)}}return typeof a!="function"&&(a=t(a==null?0:+a)),f.initialize=function(b){p=b,w()},f.strength=function(b){return arguments.length?(y=typeof b=="function"?b:t(+b),w(),f):y},f.y=function(b){return arguments.length?(a=typeof b=="function"?b:t(+b),w(),f):a},f},Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(g,Q,X){(function(m,v){v(typeof X=="object"&&Q!==void 0?X:(m=typeof globalThis<"u"?globalThis:m||self).d3=m.d3||{})})(this,function(m){function v(p,c){if((i=(p=c?p.toExponential(c-1):p.toExponential()).indexOf("e"))<0)return null;var i,y=p.slice(0,i);return[y.length>1?y[0]+y.slice(2):y,+p.slice(i+1)]}function k(p){return(p=v(Math.abs(p)))?p[1]:NaN}var x,e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function t(p){if(!(c=e.exec(p)))throw new Error("invalid format: "+p);var c;return new r({fill:c[1],align:c[2],sign:c[3],symbol:c[4],zero:c[5],width:c[6],comma:c[7],precision:c[8]&&c[8].slice(1),trim:c[9],type:c[10]})}function r(p){this.fill=p.fill===void 0?" ":p.fill+"",this.align=p.align===void 0?">":p.align+"",this.sign=p.sign===void 0?"-":p.sign+"",this.symbol=p.symbol===void 0?"":p.symbol+"",this.zero=!!p.zero,this.width=p.width===void 0?void 0:+p.width,this.comma=!!p.comma,this.precision=p.precision===void 0?void 0:+p.precision,this.trim=!!p.trim,this.type=p.type===void 0?"":p.type+""}function l(p,c){var i=v(p,c);if(!i)return p+"";var y=i[0],f=i[1];return f<0?"0."+new Array(-f).join("0")+y:y.length>f+1?y.slice(0,f+1)+"."+y.slice(f+1):y+new Array(f-y.length+2).join("0")}t.prototype=r.prototype,r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var n={"%":function(p,c){return(100*p).toFixed(c)},b:function(p){return Math.round(p).toString(2)},c:function(p){return p+""},d:function(p){return Math.abs(p=Math.round(p))>=1e21?p.toLocaleString("en").replace(/,/g,""):p.toString(10)},e:function(p,c){return p.toExponential(c)},f:function(p,c){return p.toFixed(c)},g:function(p,c){return p.toPrecision(c)},o:function(p){return Math.round(p).toString(8)},p:function(p,c){return l(100*p,c)},r:l,s:function(p,c){var i=v(p,c);if(!i)return p+"";var y=i[0],f=i[1],w=f-(x=3*Math.max(-8,Math.min(8,Math.floor(f/3))))+1,b=y.length;return w===b?y:w>b?y+new Array(w-b+1).join("0"):w>0?y.slice(0,w)+"."+y.slice(w):"0."+new Array(1-w).join("0")+v(p,Math.max(0,c+w-1))[0]},X:function(p){return Math.round(p).toString(16).toUpperCase()},x:function(p){return Math.round(p).toString(16)}};function d(p){return p}var u,o=Array.prototype.map,h=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function s(p){var c,i,y=p.grouping===void 0||p.thousands===void 0?d:(c=o.call(p.grouping,Number),i=p.thousands+"",function(P,S){for(var E=P.length,z=[],D=0,U=c[0],H=0;E>0&&U>0&&(H+U+1>S&&(U=Math.max(1,S-H)),z.push(P.substring(E-=U,E+U)),!((H+=U+1)>S));)U=c[D=(D+1)%c.length];return z.reverse().join(i)}),f=p.currency===void 0?"":p.currency[0]+"",w=p.currency===void 0?"":p.currency[1]+"",b=p.decimal===void 0?".":p.decimal+"",_=p.numerals===void 0?d:function(P){return function(S){return S.replace(/[0-9]/g,function(E){return P[+E]})}}(o.call(p.numerals,String)),T=p.percent===void 0?"%":p.percent+"",L=p.minus===void 0?"-":p.minus+"",A=p.nan===void 0?"NaN":p.nan+"";function I(P){var S=(P=t(P)).fill,E=P.align,z=P.sign,D=P.symbol,U=P.zero,H=P.width,Y=P.comma,J=P.precision,W=P.trim,Z=P.type;Z==="n"?(Y=!0,Z="g"):n[Z]||(J===void 0&&(J=12),W=!0,Z="g"),(U||S==="0"&&E==="=")&&(U=!0,S="0",E="=");var re=D==="$"?f:D==="#"&&/[boxX]/.test(Z)?"0"+Z.toLowerCase():"",V=D==="$"?w:/[%p]/.test(Z)?T:"",B=n[Z],j=/[defgprs%]/.test(Z);function ee(N){var $,K,te,ie=re,le=V;if(Z==="c")le=B(N)+le,N="";else{var se=(N=+N)<0||1/N<0;if(N=isNaN(N)?A:B(Math.abs(N),J),W&&(N=function(ye){e:for(var Ae,pe=ye.length,ge=1,we=-1;ge<pe;++ge)switch(ye[ge]){case".":we=Ae=ge;break;case"0":we===0&&(we=ge),Ae=ge;break;default:if(!+ye[ge])break e;we>0&&(we=0)}return we>0?ye.slice(0,we)+ye.slice(Ae+1):ye}(N)),se&&+N==0&&z!=="+"&&(se=!1),ie=(se?z==="("?z:L:z==="-"||z==="("?"":z)+ie,le=(Z==="s"?h[8+x/3]:"")+le+(se&&z==="("?")":""),j){for($=-1,K=N.length;++$<K;)if(48>(te=N.charCodeAt($))||te>57){le=(te===46?b+N.slice($+1):N.slice($))+le,N=N.slice(0,$);break}}}Y&&!U&&(N=y(N,1/0));var ve=ie.length+N.length+le.length,fe=ve<H?new Array(H-ve+1).join(S):"";switch(Y&&U&&(N=y(fe+N,fe.length?H-le.length:1/0),fe=""),E){case"<":N=ie+N+le+fe;break;case"=":N=ie+fe+N+le;break;case"^":N=fe.slice(0,ve=fe.length>>1)+ie+N+le+fe.slice(ve);break;default:N=fe+ie+N+le}return _(N)}return J=J===void 0?6:/[gprs]/.test(Z)?Math.max(1,Math.min(21,J)):Math.max(0,Math.min(20,J)),ee.toString=function(){return P+""},ee}return{format:I,formatPrefix:function(P,S){var E=I(((P=t(P)).type="f",P)),z=3*Math.max(-8,Math.min(8,Math.floor(k(S)/3))),D=Math.pow(10,-z),U=h[8+z/3];return function(H){return E(D*H)+U}}}}function a(p){return u=s(p),m.format=u.format,m.formatPrefix=u.formatPrefix,u}a({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),m.FormatSpecifier=r,m.formatDefaultLocale=a,m.formatLocale=s,m.formatSpecifier=t,m.precisionFixed=function(p){return Math.max(0,-k(Math.abs(p)))},m.precisionPrefix=function(p,c){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(k(c)/3)))-k(Math.abs(p)))},m.precisionRound=function(p,c){return p=Math.abs(p),c=Math.abs(c)-p,Math.max(0,k(c)-k(p))+1},Object.defineProperty(m,"__esModule",{value:!0})})},{}],113:[function(g,Q,X){(function(m,v){typeof X=="object"&&Q!==void 0?v(X,g("d3-geo"),g("d3-array")):v(m.d3=m.d3||{},m.d3,m.d3)})(this,function(m,v,k){var x=Math.abs,e=Math.atan,t=Math.atan2,r=Math.cos,l=Math.exp,n=Math.floor,d=Math.log,u=Math.max,o=Math.min,h=Math.pow,s=Math.round,a=Math.sign||function(je){return je>0?1:je<0?-1:0},p=Math.sin,c=Math.tan,i=1e-6,y=Math.PI,f=y/2,w=y/4,b=Math.SQRT1_2,_=E(2),T=E(y),L=2*y,A=180/y,I=y/180;function P(je){return je>1?f:je<-1?-f:Math.asin(je)}function S(je){return je>1?0:je<-1?y:Math.acos(je)}function E(je){return je>0?Math.sqrt(je):0}function z(je){return(l(je)-l(-je))/2}function D(je){return(l(je)+l(-je))/2}function U(je){var Ye=c(je/2),et=2*d(r(je/2))/(Ye*Ye);function lt(gt,pt){var St=r(gt),Jt=r(pt),$t=p(pt),Yt=Jt*St,ar=-((1-Yt?d((1+Yt)/2)/(1-Yt):-.5)+et/(1+Yt));return[ar*Jt*p(gt),ar*$t]}return lt.invert=function(gt,pt){var St,Jt=E(gt*gt+pt*pt),$t=-je/2,Yt=50;if(!Jt)return[0,0];do{var ar=$t/2,pr=r(ar),br=p(ar),_r=br/pr,Dr=-d(x(pr));$t-=St=(2/_r*Dr-et*_r-Jt)/(-Dr/(br*br)+1-et/(2*pr*pr))*(pr<0?.7:1)}while(x(St)>i&&--Yt>0);var an=p($t);return[t(gt*an,Jt*r($t)),P(pt*an/Jt)]},lt}function H(je,Ye){var et=r(Ye),lt=function(gt){return gt?gt/Math.sin(gt):1}(S(et*r(je/=2)));return[2*et*p(je)*lt,p(Ye)*lt]}function Y(je){var Ye=p(je),et=r(je),lt=je>=0?1:-1,gt=c(lt*je),pt=(1+Ye-et)/2;function St(Jt,$t){var Yt=r($t),ar=r(Jt/=2);return[(1+Yt)*p(Jt),(lt*$t>-t(ar,gt)-.001?0:10*-lt)+pt+p($t)*et-(1+Yt)*Ye*ar]}return St.invert=function(Jt,$t){var Yt=0,ar=0,pr=50;do{var br=r(Yt),_r=p(Yt),Dr=r(ar),an=p(ar),dn=1+Dr,Pn=dn*_r-Jt,Dn=pt+an*et-dn*Ye*br-$t,qn=dn*br/2,zn=-_r*an,va=Ye*dn*_r/2,Sa=et*Dr+Ye*br*an,Ua=zn*va-Sa*qn,ja=(Dn*zn-Pn*Sa)/Ua/2,Va=(Pn*va-Dn*qn)/Ua;x(Va)>2&&(Va/=2),Yt-=ja,ar-=Va}while((x(ja)>i||x(Va)>i)&&--pr>0);return lt*ar>-t(r(Yt),gt)-.001?[2*Yt,ar]:null},St}function J(je,Ye){var et=c(Ye/2),lt=E(1-et*et),gt=1+lt*r(je/=2),pt=p(je)*lt/gt,St=et/gt,Jt=pt*pt,$t=St*St;return[4/3*pt*(3+Jt-3*$t),4/3*St*(3+3*Jt-$t)]}H.invert=function(je,Ye){if(!(je*je+4*Ye*Ye>y*y+i)){var et=je,lt=Ye,gt=25;do{var pt,St=p(et),Jt=p(et/2),$t=r(et/2),Yt=p(lt),ar=r(lt),pr=p(2*lt),br=Yt*Yt,_r=ar*ar,Dr=Jt*Jt,an=1-_r*$t*$t,dn=an?S(ar*$t)*E(pt=1/an):pt=0,Pn=2*dn*ar*Jt-je,Dn=dn*Yt-Ye,qn=pt*(_r*Dr+dn*ar*$t*br),zn=pt*(.5*St*pr-2*dn*Yt*Jt),va=.25*pt*(pr*Jt-dn*Yt*_r*St),Sa=pt*(br*$t+dn*Dr*ar),Ua=zn*va-Sa*qn;if(!Ua)break;var ja=(Dn*zn-Pn*Sa)/Ua,Va=(Pn*va-Dn*qn)/Ua;et-=ja,lt-=Va}while((x(ja)>i||x(Va)>i)&&--gt>0);return[et,lt]}},J.invert=function(je,Ye){if(Ye*=3/8,!(je*=3/8)&&x(Ye)>1)return null;var et=1+je*je+Ye*Ye,lt=E((et-E(et*et-4*Ye*Ye))/2),gt=P(lt)/3,pt=lt?function(Yt){return d(Yt+E(Yt*Yt-1))}(x(Ye/lt))/3:function(Yt){return d(Yt+E(Yt*Yt+1))}(x(je))/3,St=r(gt),Jt=D(pt),$t=Jt*Jt-St*St;return[2*a(je)*t(z(pt)*St,.25-$t),2*a(Ye)*t(Jt*p(gt),.25+$t)]};var W=E(8),Z=d(1+_);function re(je,Ye){var et=x(Ye);return et<w?[je,d(c(w+Ye/2))]:[je*r(et)*(2*_-1/p(et)),a(Ye)*(2*_*(et-w)-d(c(et/2)))]}function V(je){var Ye=2*y/je;function et(lt,gt){var pt=v.geoAzimuthalEquidistantRaw(lt,gt);if(x(lt)>f){var St=t(pt[1],pt[0]),Jt=E(pt[0]*pt[0]+pt[1]*pt[1]),$t=Ye*s((St-f)/Ye)+f,Yt=t(p(St-=$t),2-r(St));St=$t+P(y/Jt*p(Yt))-Yt,pt[0]=Jt*r(St),pt[1]=Jt*p(St)}return pt}return et.invert=function(lt,gt){var pt=E(lt*lt+gt*gt);if(pt>f){var St=t(gt,lt),Jt=Ye*s((St-f)/Ye)+f,$t=St>Jt?-1:1,Yt=pt*r(Jt-St),ar=1/c($t*S((Yt-y)/E(y*(y-2*Yt)+pt*pt)));St=Jt+2*e((ar+$t*E(ar*ar-3))/3),lt=pt*r(St),gt=pt*p(St)}return v.geoAzimuthalEquidistantRaw.invert(lt,gt)},et}function B(je,Ye){if(arguments.length<2&&(Ye=je),Ye===1)return v.geoAzimuthalEqualAreaRaw;if(Ye===1/0)return j;function et(lt,gt){var pt=v.geoAzimuthalEqualAreaRaw(lt/Ye,gt);return pt[0]*=je,pt}return et.invert=function(lt,gt){var pt=v.geoAzimuthalEqualAreaRaw.invert(lt/je,gt);return pt[0]*=Ye,pt},et}function j(je,Ye){return[je*r(Ye)/r(Ye/=2),2*p(Ye)]}function ee(je,Ye,et){var lt,gt,pt,St=100;et=et===void 0?0:+et,Ye=+Ye;do(gt=je(et))===(pt=je(et+i))&&(pt=gt+i),et-=lt=-1*i*(gt-Ye)/(gt-pt);while(St-- >0&&x(lt)>i);return St<0?NaN:et}function N(je,Ye,et){return Ye===void 0&&(Ye=40),et===void 0&&(et=1e-12),function(lt,gt,pt,St){var Jt,$t,Yt;pt=pt===void 0?0:+pt,St=St===void 0?0:+St;for(var ar=0;ar<Ye;ar++){var pr=je(pt,St),br=pr[0]-lt,_r=pr[1]-gt;if(x(br)<et&&x(_r)<et)break;var Dr=br*br+_r*_r;if(Dr>Jt)pt-=$t/=2,St-=Yt/=2;else{Jt=Dr;var an=(pt>0?-1:1)*et,dn=(St>0?-1:1)*et,Pn=je(pt+an,St),Dn=je(pt,St+dn),qn=(Pn[0]-pr[0])/an,zn=(Pn[1]-pr[1])/an,va=(Dn[0]-pr[0])/dn,Sa=(Dn[1]-pr[1])/dn,Ua=Sa*qn-zn*va,ja=(x(Ua)<.5?.5:1)/Ua;if(pt+=$t=(_r*va-br*Sa)*ja,St+=Yt=(br*zn-_r*qn)*ja,x($t)<et&&x(Yt)<et)break}}return[pt,St]}}function $(){var je=B(1.68,2);function Ye(et,lt){if(et+lt<-1.4){var gt=(et-lt+1.6)*(et+lt+1.4)/8;et+=gt,lt-=.8*gt*p(lt+y/2)}var pt=je(et,lt),St=(1-r(et*lt))/12;return pt[1]<0&&(pt[0]*=1+St),pt[1]>0&&(pt[1]*=1+St/1.5*pt[0]*pt[0]),pt}return Ye.invert=N(Ye),Ye}function K(je,Ye){var et,lt=je*p(Ye),gt=30;do Ye-=et=(Ye+p(Ye)-lt)/(1+r(Ye));while(x(et)>i&&--gt>0);return Ye/2}function te(je,Ye,et){function lt(gt,pt){return[je*gt*r(pt=K(et,pt)),Ye*p(pt)]}return lt.invert=function(gt,pt){return pt=P(pt/Ye),[gt/(je*r(pt)),P((2*pt+p(2*pt))/et)]},lt}re.invert=function(je,Ye){if((lt=x(Ye))<Z)return[je,2*e(l(Ye))-f];var et,lt,gt=w,pt=25;do{var St=r(gt/2),Jt=c(gt/2);gt-=et=(W*(gt-w)-d(Jt)-lt)/(W-St*St/(2*Jt))}while(x(et)>1e-12&&--pt>0);return[je/(r(gt)*(W-1/p(gt))),a(Ye)*gt]},j.invert=function(je,Ye){var et=2*P(Ye/2);return[je*r(et/2)/r(et),et]};var ie=te(_/f,_,y),le=2.00276,se=1.11072;function ve(je,Ye){var et=K(y,Ye);return[le*je/(1/r(Ye)+se/r(et)),(Ye+_*p(et))/le]}function fe(je){var Ye=0,et=v.geoProjectionMutator(je),lt=et(Ye);return lt.parallel=function(gt){return arguments.length?et(Ye=gt*I):Ye*A},lt}function ye(je,Ye){return[je*r(Ye),Ye]}function Ae(je){if(!je)return ye;var Ye=1/c(je);function et(lt,gt){var pt=Ye+je-gt,St=pt&&lt*r(gt)/pt;return[pt*p(St),Ye-pt*r(St)]}return et.invert=function(lt,gt){var pt=E(lt*lt+(gt=Ye-gt)*gt),St=Ye+je-pt;return[pt/r(St)*t(lt,gt),St]},et}function pe(je){function Ye(et,lt){var gt=f-lt,pt=gt&&et*je*p(gt)/gt;return[gt*p(pt)/je,f-gt*r(pt)]}return Ye.invert=function(et,lt){var gt=et*je,pt=f-lt,St=E(gt*gt+pt*pt),Jt=t(gt,pt);return[(St?St/p(St):1)*Jt/je,f-St]},Ye}ve.invert=function(je,Ye){var et,lt,gt=le*Ye,pt=Ye<0?-w:w,St=25;do lt=gt-_*p(pt),pt-=et=(p(2*pt)+2*pt-y*p(lt))/(2*r(2*pt)+2+y*r(lt)*_*r(pt));while(x(et)>i&&--St>0);return lt=gt-_*p(pt),[je*(1/r(lt)+se/r(pt))/le,lt]},ye.invert=function(je,Ye){return[je/r(Ye),Ye]};var ge=te(1,4/y,y);function we(je,Ye,et,lt,gt,pt){var St,Jt=r(pt);if(x(je)>1||x(pt)>1)St=S(et*gt+Ye*lt*Jt);else{var $t=p(je/2),Yt=p(pt/2);St=2*P(E($t*$t+Ye*lt*Yt*Yt))}return x(St)>i?[St,t(lt*p(pt),Ye*gt-et*lt*Jt)]:[0,0]}function oe(je,Ye,et){return S((je*je+Ye*Ye-et*et)/(2*je*Ye))}function de(je){return je-2*y*n((je+y)/(2*y))}function Te(je,Ye,et){for(var lt,gt=[[je[0],je[1],p(je[1]),r(je[1])],[Ye[0],Ye[1],p(Ye[1]),r(Ye[1])],[et[0],et[1],p(et[1]),r(et[1])]],pt=gt[2],St=0;St<3;++St,pt=lt)lt=gt[St],pt.v=we(lt[1]-pt[1],pt[3],pt[2],lt[3],lt[2],lt[0]-pt[0]),pt.point=[0,0];var Jt=oe(gt[0].v[0],gt[2].v[0],gt[1].v[0]),$t=oe(gt[0].v[0],gt[1].v[0],gt[2].v[0]),Yt=y-Jt;gt[2].point[1]=0,gt[0].point[0]=-(gt[1].point[0]=gt[0].v[0]/2);var ar=[gt[2].point[0]=gt[0].point[0]+gt[2].v[0]*r(Jt),2*(gt[0].point[1]=gt[1].point[1]=gt[2].v[0]*p(Jt))];return function(pr,br){var _r,Dr=p(br),an=r(br),dn=new Array(3);for(_r=0;_r<3;++_r){var Pn=gt[_r];if(dn[_r]=we(br-Pn[1],Pn[3],Pn[2],an,Dr,pr-Pn[0]),!dn[_r][0])return Pn.point;dn[_r][1]=de(dn[_r][1]-Pn.v[1])}var Dn=ar.slice();for(_r=0;_r<3;++_r){var qn=_r==2?0:_r+1,zn=oe(gt[_r].v[0],dn[_r][0],dn[qn][0]);dn[_r][1]<0&&(zn=-zn),_r?_r==1?(zn=$t-zn,Dn[0]-=dn[_r][0]*r(zn),Dn[1]-=dn[_r][0]*p(zn)):(zn=Yt-zn,Dn[0]+=dn[_r][0]*r(zn),Dn[1]+=dn[_r][0]*p(zn)):(Dn[0]+=dn[_r][0]*r(zn),Dn[1]-=dn[_r][0]*p(zn))}return Dn[0]/=3,Dn[1]/=3,Dn}}function Ee(je){return je[0]*=I,je[1]*=I,je}function Me(je,Ye,et){var lt=v.geoCentroid({type:"MultiPoint",coordinates:[je,Ye,et]}),gt=[-lt[0],-lt[1]],pt=v.geoRotation(gt),St=Te(Ee(pt(je)),Ee(pt(Ye)),Ee(pt(et)));St.invert=N(St);var Jt=v.geoProjection(St).rotate(gt),$t=Jt.center;return delete Jt.rotate,Jt.center=function(Yt){return arguments.length?$t(pt(Yt)):pt.invert($t())},Jt.clipAngle(90)}function De(je,Ye){var et=E(1-p(Ye));return[2/T*je*et,T*(1-et)]}function Ie(je){var Ye=c(je);function et(lt,gt){return[lt,(lt?lt/p(lt):1)*(p(gt)*r(lt)-Ye*r(gt))]}return et.invert=Ye?function(lt,gt){lt&&(gt*=p(lt)/lt);var pt=r(lt);return[lt,2*t(E(pt*pt+Ye*Ye-gt*gt)-pt,Ye-gt)]}:function(lt,gt){return[lt,P(lt?gt*c(lt)/lt:gt)]},et}De.invert=function(je,Ye){var et=(et=Ye/T-1)*et;return[et>0?je*E(y/et)/2:0,P(1-et)]};var Oe=E(3);function Ze(je,Ye){return[Oe*je*(2*r(2*Ye/3)-1)/T,Oe*T*p(Ye/3)]}function Fe(je){var Ye=r(je);function et(lt,gt){return[lt*Ye,p(gt)/Ye]}return et.invert=function(lt,gt){return[lt/Ye,P(gt*Ye)]},et}function Pe(je){var Ye=r(je);function et(lt,gt){return[lt*Ye,(1+Ye)*c(gt/2)]}return et.invert=function(lt,gt){return[lt/Ye,2*e(gt/(1+Ye))]},et}function ze(je,Ye){var et=E(8/(3*y));return[et*je*(1-x(Ye)/y),et*Ye]}function Ge(je,Ye){var et=E(4-3*p(x(Ye)));return[2/E(6*y)*je*et,a(Ye)*E(2*y/3)*(2-et)]}function $e(je,Ye){var et=E(y*(4+y));return[2/et*je*(1+E(1-4*Ye*Ye/(y*y))),4/et*Ye]}function ot(je,Ye){var et=(2+f)*p(Ye);Ye/=2;for(var lt=0,gt=1/0;lt<10&&x(gt)>i;lt++){var pt=r(Ye);Ye-=gt=(Ye+p(Ye)*(pt+2)-et)/(2*pt*(1+pt))}return[2/E(y*(4+y))*je*(1+r(Ye)),2*E(y/(4+y))*p(Ye)]}function vt(je,Ye){return[je*(1+r(Ye))/E(2+y),2*Ye/E(2+y)]}function bt(je,Ye){for(var et=(1+f)*p(Ye),lt=0,gt=1/0;lt<10&&x(gt)>i;lt++)Ye-=gt=(Ye+p(Ye)-et)/(1+r(Ye));return et=E(2+y),[je*(1+r(Ye))/et,2*Ye/et]}Ze.invert=function(je,Ye){var et=3*P(Ye/(Oe*T));return[T*je/(Oe*(2*r(2*et/3)-1)),et]},ze.invert=function(je,Ye){var et=E(8/(3*y)),lt=Ye/et;return[je/(et*(1-x(lt)/y)),lt]},Ge.invert=function(je,Ye){var et=2-x(Ye)/E(2*y/3);return[je*E(6*y)/(2*et),a(Ye)*P((4-et*et)/3)]},$e.invert=function(je,Ye){var et=E(y*(4+y))/2;return[je*et/(1+E(1-Ye*Ye*(4+y)/(4*y))),Ye*et/2]},ot.invert=function(je,Ye){var et=Ye*E((4+y)/y)/2,lt=P(et),gt=r(lt);return[je/(2/E(y*(4+y))*(1+gt)),P((lt+et*(gt+2))/(2+f))]},vt.invert=function(je,Ye){var et=E(2+y),lt=Ye*et/2;return[et*je/(1+r(lt)),lt]},bt.invert=function(je,Ye){var et=1+f,lt=E(et/2);return[2*je*lt/(1+r(Ye*=lt)),P((Ye+p(Ye))/et)]};var yt=3+2*_;function tt(je,Ye){var et=p(je/=2),lt=r(je),gt=E(r(Ye)),pt=r(Ye/=2),St=p(Ye)/(pt+_*lt*gt),Jt=E(2/(1+St*St)),$t=E((_*pt+(lt+et)*gt)/(_*pt+(lt-et)*gt));return[yt*(Jt*($t-1/$t)-2*d($t)),yt*(Jt*St*($t+1/$t)-2*e(St))]}tt.invert=function(je,Ye){if(!(et=J.invert(je/1.2,1.065*Ye)))return null;var et,lt=et[0],gt=et[1],pt=20;je/=yt,Ye/=yt;do{var St=lt/2,Jt=gt/2,$t=p(St),Yt=r(St),ar=p(Jt),pr=r(Jt),br=r(gt),_r=E(br),Dr=ar/(pr+_*Yt*_r),an=Dr*Dr,dn=E(2/(1+an)),Pn=(_*pr+(Yt+$t)*_r)/(_*pr+(Yt-$t)*_r),Dn=E(Pn),qn=Dn-1/Dn,zn=Dn+1/Dn,va=dn*qn-2*d(Dn)-je,Sa=dn*Dr*zn-2*e(Dr)-Ye,Ua=ar&&b*_r*$t*an/ar,ja=(_*Yt*pr+_r)/(2*(pr+_*Yt*_r)*(pr+_*Yt*_r)*_r),Va=-.5*Dr*dn*dn*dn,Ti=Va*Ua,bi=Va*ja,si=(si=2*pr+_*_r*(Yt-$t))*si*Dn,li=(_*Yt*pr*_r+br)/si,_i=-_*$t*ar/(_r*si),Ni=qn*Ti-2*li/Dn+dn*(li+li/Pn),Qi=qn*bi-2*_i/Dn+dn*(_i+_i/Pn),eo=Dr*zn*Ti-2*Ua/(1+an)+dn*zn*Ua+dn*Dr*(li-li/Pn),to=Dr*zn*bi-2*ja/(1+an)+dn*zn*ja+dn*Dr*(_i-_i/Pn),ro=Qi*eo-to*Ni;if(!ro)break;var za=(Sa*Qi-va*to)/ro,ht=(va*eo-Sa*Ni)/ro;lt-=za,gt=u(-f,o(f,gt-ht))}while((x(za)>i||x(ht)>i)&&--pt>0);return x(x(gt)-f)<i?[0,gt]:pt&&[lt,gt]};var Ke=r(35*I);function mt(je,Ye){var et=c(Ye/2);return[je*Ke*E(1-et*et),(1+Ke)*et]}function Ft(je,Ye){var et=Ye/2,lt=r(et);return[2*je/T*r(Ye)*lt*lt,T*c(et)]}function Vt(je){var Ye=1-je,et=gt(y,0)[0]-gt(-y,0)[0],lt=E(2*(gt(0,f)[1]-gt(0,-f)[1])/et);function gt(Jt,$t){var Yt=r($t),ar=p($t);return[Yt/(Ye+je*Yt)*Jt,Ye*$t+je*ar]}function pt(Jt,$t){var Yt=gt(Jt,$t);return[Yt[0]*lt,Yt[1]/lt]}function St(Jt){return pt(0,Jt)[1]}return pt.invert=function(Jt,$t){var Yt=ee(St,$t);return[Jt/lt*(je+Ye/r(Yt)),Yt]},pt}function Xt(je){return[je[0]/2,P(c(je[1]/2*I))*A]}function Gt(je){return[2*je[0],2*e(p(je[1]*I))*A]}function nr(je,Ye){var et=2*y/Ye,lt=je*je;function gt(pt,St){var Jt=v.geoAzimuthalEquidistantRaw(pt,St),$t=Jt[0],Yt=Jt[1],ar=$t*$t+Yt*Yt;if(ar>lt){var pr=E(ar),br=t(Yt,$t),_r=et*s(br/et),Dr=br-_r,an=je*r(Dr),dn=(je*p(Dr)-Dr*p(an))/(f-an),Pn=It(Dr,dn),Dn=(y-je)/Be(Pn,an,y);$t=pr;var qn,zn=50;do $t-=qn=(je+Be(Pn,an,$t)*Dn-pr)/(Pn($t)*Dn);while(x(qn)>i&&--zn>0);Yt=Dr*p($t),$t<f&&(Yt-=dn*($t-f));var va=p(_r),Sa=r(_r);Jt[0]=$t*Sa-Yt*va,Jt[1]=$t*va+Yt*Sa}return Jt}return gt.invert=function(pt,St){var Jt=pt*pt+St*St;if(Jt>lt){var $t=E(Jt),Yt=t(St,pt),ar=et*s(Yt/et),pr=Yt-ar;pt=$t*r(pr),St=$t*p(pr);for(var br=pt-f,_r=p(pt),Dr=St/_r,an=pt<f?1/0:0,dn=10;;){var Pn=je*p(Dr),Dn=je*r(Dr),qn=p(Dn),zn=f-Dn,va=(Pn-Dr*qn)/zn,Sa=It(Dr,va);if(x(an)<1e-12||!--dn)break;Dr-=an=(Dr*_r-va*br-St)/(_r-2*br*(zn*(Dn+Dr*Pn*r(Dn)-qn)-Pn*(Pn-Dr*qn))/(zn*zn))}pt=($t=je+Be(Sa,Dn,pt)*(y-je)/Be(Sa,Dn,y))*r(Yt=ar+Dr),St=$t*p(Yt)}return v.geoAzimuthalEquidistantRaw.invert(pt,St)},gt}function It(je,Ye){return function(et){var lt=je*r(et);return et<f&&(lt-=Ye),E(1+lt*lt)}}function Be(je,Ye,et){for(var lt=(et-Ye)/50,gt=je(Ye)+je(et),pt=1,St=Ye;pt<50;++pt)gt+=2*je(St+=lt);return .5*gt*lt}function He(je,Ye,et,lt,gt,pt,St,Jt){function $t(Yt,ar){if(!ar)return[je*Yt/y,0];var pr=ar*ar,br=je+pr*(Ye+pr*(et+pr*lt)),_r=ar*(gt-1+pr*(pt-Jt+pr*St)),Dr=(br*br+_r*_r)/(2*_r),an=Yt*P(br/Dr)/y;return[Dr*p(an),ar*(1+pr*Jt)+Dr*(1-r(an))]}return arguments.length<8&&(Jt=0),$t.invert=function(Yt,ar){var pr,br,_r=y*Yt/je,Dr=ar,an=50;do{var dn=Dr*Dr,Pn=je+dn*(Ye+dn*(et+dn*lt)),Dn=Dr*(gt-1+dn*(pt-Jt+dn*St)),qn=Pn*Pn+Dn*Dn,zn=2*Dn,va=qn/zn,Sa=va*va,Ua=P(Pn/va)/y,ja=_r*Ua,Va=Pn*Pn,Ti=(2*Ye+dn*(4*et+6*dn*lt))*Dr,bi=gt+dn*(3*pt+5*dn*St),si=(2*(Pn*Ti+Dn*(bi-1))*zn-qn*(2*(bi-1)))/(zn*zn),li=r(ja),_i=p(ja),Ni=va*li,Qi=va*_i,eo=_r/y*(1/E(1-Va/Sa))*(Ti*va-Pn*si)/Sa,to=Qi-Yt,ro=Dr*(1+dn*Jt)+va-Ni-ar,za=si*_i+Ni*eo,ht=Ni*Ua,Dt=1+si-(si*li-Qi*eo),sr=Qi*Ua,Ht=za*sr-Dt*ht;if(!Ht)break;_r-=pr=(ro*za-to*Dt)/Ht,Dr-=br=(to*sr-ro*ht)/Ht}while((x(pr)>i||x(br)>i)&&--an>0);return[_r,Dr]},$t}mt.invert=function(je,Ye){var et=Ye/(1+Ke);return[je&&je/(Ke*E(1-et*et)),2*e(et)]},Ft.invert=function(je,Ye){var et=e(Ye/T),lt=r(et),gt=2*et;return[je*T/2/(r(gt)*lt*lt),gt]};var he=He(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),be=He(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),Re=He(5/6*y,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Ue(je,Ye){var et=je*je,lt=Ye*Ye;return[je*(1-.162388*lt)*(.87-952426e-9*et*et),Ye*(1+lt/12)]}Ue.invert=function(je,Ye){var et,lt=je,gt=Ye,pt=50;do{var St=gt*gt;gt-=et=(gt*(1+St/12)-Ye)/(1+St/4)}while(x(et)>i&&--pt>0);pt=50,je/=1-.162388*St;do{var Jt=(Jt=lt*lt)*Jt;lt-=et=(lt*(.87-952426e-9*Jt)-je)/(.87-.00476213*Jt)}while(x(et)>i&&--pt>0);return[lt,gt]};var Xe=He(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function qe(je){var Ye=je(f,0)[0]-je(-f,0)[0];function et(lt,gt){var pt=lt>0?-.5:.5,St=je(lt+pt*y,gt);return St[0]-=pt*Ye,St}return je.invert&&(et.invert=function(lt,gt){var pt=lt>0?-.5:.5,St=je.invert(lt+pt*Ye,gt),Jt=St[0]-pt*y;return Jt<-y?Jt+=2*y:Jt>y&&(Jt-=2*y),St[0]=Jt,St}),et}function st(je,Ye){var et=a(je),lt=a(Ye),gt=r(Ye),pt=r(je)*gt,St=p(je)*gt,Jt=p(lt*Ye);je=x(t(St,Jt)),Ye=P(pt),x(je-f)>i&&(je%=f);var $t=function(Yt,ar){if(ar===f)return[0,0];var pr,br,_r=p(ar),Dr=_r*_r,an=Dr*Dr,dn=1+an,Pn=1+3*an,Dn=1-an,qn=P(1/E(dn)),zn=Dn+Dr*dn*qn,va=(1-_r)/zn,Sa=E(va),Ua=va*dn,ja=E(Ua),Va=Sa*Dn;if(Yt===0)return[0,-(Va+Dr*ja)];var Ti,bi=r(ar),si=1/bi,li=2*_r*bi,_i=(-zn*bi-(-3*Dr+qn*Pn)*li*(1-_r))/(zn*zn),Ni=-si*li,Qi=-si*(Dr*dn*_i+va*Pn*li),eo=-2*si*(Dn*(.5*_i/Sa)-2*Dr*Sa*li),to=4*Yt/y;if(Yt>.222*y||ar<y/4&&Yt>.175*y){if(pr=(Va+Dr*E(Ua*(1+an)-Va*Va))/(1+an),Yt>y/4)return[pr,pr];var ro=pr,za=.5*pr;pr=.5*(za+ro),br=50;do{var ht=E(Ua-pr*pr),Dt=pr*(eo+Ni*ht)+Qi*P(pr/ja)-to;if(!Dt)break;Dt<0?za=pr:ro=pr,pr=.5*(za+ro)}while(x(ro-za)>i&&--br>0)}else{pr=i,br=25;do{var sr=pr*pr,Ht=E(Ua-sr),lr=eo+Ni*Ht,Pr=pr*lr+Qi*P(pr/ja)-to,Nr=lr+(Qi-Ni*sr)/Ht;pr-=Ti=Ht?Pr/Nr:0}while(x(Ti)>i&&--br>0)}return[pr,-Va-Dr*E(Ua-pr*pr)]}(je>y/4?f-je:je,Ye);return je>y/4&&(Jt=$t[0],$t[0]=-$t[1],$t[1]=-Jt),$t[0]*=et,$t[1]*=-lt,$t}function it(je,Ye){var et,lt,gt,pt,St,Jt;if(Ye<i)return[(pt=p(je))-(et=Ye*(je-pt*(lt=r(je)))/4)*lt,lt+et*pt,1-Ye*pt*pt/2,je-et];if(Ye>=1-i)return et=(1-Ye)/4,gt=1/(lt=D(je)),[(pt=((Jt=l(2*(Jt=je)))-1)/(Jt+1))+et*((St=lt*z(je))-je)/(lt*lt),gt-et*pt*gt*(St-je),gt+et*pt*gt*(St+je),2*e(l(je))-f+et*(St-je)/lt];var $t=[1,0,0,0,0,0,0,0,0],Yt=[E(Ye),0,0,0,0,0,0,0,0],ar=0;for(lt=E(1-Ye),St=1;x(Yt[ar]/$t[ar])>i&&ar<8;)et=$t[ar++],Yt[ar]=(et-lt)/2,$t[ar]=(et+lt)/2,lt=E(et*lt),St*=2;gt=St*$t[ar]*je;do gt=(P(pt=Yt[ar]*p(lt=gt)/$t[ar])+gt)/2;while(--ar);return[p(gt),pt=r(gt),pt/r(gt-lt),gt]}function Tt(je,Ye){if(!Ye)return je;if(Ye===1)return d(c(je/2+w));for(var et=1,lt=E(1-Ye),gt=E(Ye),pt=0;x(gt)>i;pt++){if(je%y){var St=e(lt*c(je)/et);St<0&&(St+=y),je+=St+~~(je/y)*y}else je+=je;gt=(et+lt)/2,lt=E(et*lt),gt=((et=gt)-lt)/2}return je/(h(2,pt)*et)}function Pt(je,Ye){var et=(_-1)/(_+1),lt=E(1-et*et),gt=Tt(f,lt*lt),pt=d(c(y/4+x(Ye)/2)),St=l(-1*pt)/E(et),Jt=function(Yt,ar){var pr=Yt*Yt,br=ar+1,_r=1-pr-ar*ar;return[.5*((Yt>=0?f:-f)-t(_r,2*Yt)),-.25*d(_r*_r+4*pr)+.5*d(br*br+pr)]}(St*r(-1*je),St*p(-1*je)),$t=function(Yt,ar,pr){var br=x(Yt),_r=z(x(ar));if(br){var Dr=1/p(br),an=1/(c(br)*c(br)),dn=-(an+pr*(_r*_r*Dr*Dr)-1+pr),Pn=(-dn+E(dn*dn-4*((pr-1)*an)))/2;return[Tt(e(1/E(Pn)),pr)*a(Yt),Tt(e(E((Pn/an-1)/pr)),1-pr)*a(ar)]}return[0,Tt(e(_r),1-pr)*a(ar)]}(Jt[0],Jt[1],lt*lt);return[-$t[1],(Ye>=0?1:-1)*(.5*gt-$t[0])]}function rt(je){var Ye=p(je),et=r(je),lt=ut(je);function gt(pt,St){var Jt=lt(pt,St);pt=Jt[0],St=Jt[1];var $t=p(St),Yt=r(St),ar=r(pt),pr=S(Ye*$t+et*Yt*ar),br=p(pr),_r=x(br)>i?pr/br:1;return[_r*et*p(pt),(x(pt)>f?_r:-_r)*(Ye*Yt-et*$t*ar)]}return lt.invert=ut(-je),gt.invert=function(pt,St){var Jt=E(pt*pt+St*St),$t=-p(Jt),Yt=r(Jt),ar=Jt*Yt,pr=-St*$t,br=Jt*Ye,_r=E(ar*ar+pr*pr-br*br),Dr=t(ar*br+pr*_r,pr*br-ar*_r),an=(Jt>f?-1:1)*t(pt*$t,Jt*r(Dr)*Yt+St*p(Dr)*$t);return lt.invert(an,Dr)},gt}function ut(je){var Ye=p(je),et=r(je);return function(lt,gt){var pt=r(gt),St=r(lt)*pt,Jt=p(lt)*pt,$t=p(gt);return[t(Jt,St*et-$t*Ye),P($t*et+St*Ye)]}}st.invert=function(je,Ye){x(je)>1&&(je=2*a(je)-je),x(Ye)>1&&(Ye=2*a(Ye)-Ye);var et=a(je),lt=a(Ye),gt=-et*je,pt=-lt*Ye,St=pt/gt<1,Jt=function(pr,br){for(var _r=0,Dr=1,an=.5,dn=50;;){var Pn=an*an,Dn=E(an),qn=P(1/E(1+Pn)),zn=1-Pn+an*(1+Pn)*qn,va=(1-Dn)/zn,Sa=E(va),Ua=va*(1+Pn),ja=Sa*(1-Pn),Va=E(Ua-pr*pr),Ti=br+ja+an*Va;if(x(Dr-_r)<1e-12||--dn==0||Ti===0)break;Ti>0?_r=an:Dr=an,an=.5*(_r+Dr)}if(!dn)return null;var bi=P(Dn),si=r(bi),li=1/si,_i=2*Dn*si,Ni=(-zn*si-(-3*an+qn*(1+3*Pn))*_i*(1-Dn))/(zn*zn);return[y/4*(pr*(-2*li*(.5*Ni/Sa*(1-Pn)-2*an*Sa*_i)+-li*_i*Va)+-li*(an*(1+Pn)*Ni+va*(1+3*Pn)*_i)*P(pr/E(Ua))),bi]}(St?pt:gt,St?gt:pt),$t=Jt[0],Yt=Jt[1],ar=r(Yt);return St&&($t=-f-$t),[et*(t(p($t)*ar,-p(Yt))+y),lt*P(r($t)*ar)]},Pt.invert=function(je,Ye){var et,lt,gt,pt,St,Jt,$t=(_-1)/(_+1),Yt=E(1-$t*$t),ar=Tt(f,Yt*Yt),pr=(lt=-je,gt=Yt*Yt,(et=.5*ar-Ye)?(pt=it(et,gt),lt?(Jt=(St=it(lt,1-gt))[1]*St[1]+gt*pt[0]*pt[0]*St[0]*St[0],[[pt[0]*St[2]/Jt,pt[1]*pt[2]*St[0]*St[1]/Jt],[pt[1]*St[1]/Jt,-pt[0]*pt[2]*St[0]*St[2]/Jt],[pt[2]*St[1]*St[2]/Jt,-gt*pt[0]*pt[1]*St[0]/Jt]]):[[pt[0],0],[pt[1],0],[pt[2],0]]):[[0,(St=it(lt,1-gt))[0]/St[1]],[1/St[1],0],[St[2]/St[1],0]]),br=function(_r,Dr){var an=Dr[0]*Dr[0]+Dr[1]*Dr[1];return[(_r[0]*Dr[0]+_r[1]*Dr[1])/an,(_r[1]*Dr[0]-_r[0]*Dr[1])/an]}(pr[0],pr[1]);return[t(br[1],br[0])/-1,2*e(l(-.5*d($t*br[0]*br[0]+$t*br[1]*br[1])))-f]};var Bt=P(1-1/3)*A,wt=Fe(0);function Lt(je){var Ye=Bt*I,et=De(y,Ye)[0]-De(-y,Ye)[0],lt=wt(0,Ye)[1],gt=De(0,Ye)[1],pt=T-gt,St=L/je,Jt=4/L,$t=lt+pt*pt*4/L;function Yt(ar,pr){var br,_r=x(pr);if(_r>Ye){var Dr=o(je-1,u(0,n((ar+y)/St)));(br=De(ar+=y*(je-1)/je-Dr*St,_r))[0]=br[0]*L/et-L*(je-1)/(2*je)+Dr*L/je,br[1]=lt+4*(br[1]-gt)*pt/L,pr<0&&(br[1]=-br[1])}else br=wt(ar,pr);return br[0]*=Jt,br[1]/=$t,br}return Yt.invert=function(ar,pr){ar/=Jt;var br=x(pr*=$t);if(br>lt){var _r=o(je-1,u(0,n((ar+y)/St)));ar=(ar+y*(je-1)/je-_r*St)*et/L;var Dr=De.invert(ar,.25*(br-lt)*L/pt+gt);return Dr[0]-=y*(je-1)/je-_r*St,pr<0&&(Dr[1]=-Dr[1]),Dr}return wt.invert(ar,pr)},Yt}function Se(je,Ye){return[je,1&Ye?90-i:Bt]}function We(je,Ye){return[je,1&Ye?-90+i:-Bt]}function nt(je){return[je[0]*(1-i),je[1]]}function ft(je){var Ye,et=1+je,lt=P(p(1/et)),gt=2*E(y/(Ye=y+4*lt*et)),pt=.5*gt*(et+E(je*(2+je))),St=je*je,Jt=et*et;function $t(Yt,ar){var pr,br,_r=1-p(ar);if(_r&&_r<2){var Dr,an=f-ar,dn=25;do{var Pn=p(an),Dn=r(an),qn=lt+t(Pn,et-Dn),zn=1+Jt-2*et*Dn;an-=Dr=(an-St*lt-et*Pn+zn*qn-.5*_r*Ye)/(2*et*Pn*qn)}while(x(Dr)>1e-12&&--dn>0);pr=gt*E(zn),br=Yt*qn/y}else pr=gt*(je+_r),br=Yt*lt/y;return[pr*p(br),pt-pr*r(br)]}return $t.invert=function(Yt,ar){var pr=Yt*Yt+(ar-=pt)*ar,br=(1+Jt-pr/(gt*gt))/(2*et),_r=S(br),Dr=p(_r),an=lt+t(Dr,et-br);return[P(Yt/E(pr))*y/an,P(1-2*(_r-St*lt-et*Dr+(1+Jt-2*et*br)*an)/Ye)]},$t}function Mt(je,Ye){return Ye>-.7109889596207567?((je=ie(je,Ye))[1]+=.0528035274542,je):ye(je,Ye)}function Nt(je,Ye){return x(Ye)>.7109889596207567?((je=ie(je,Ye))[1]-=Ye>0?.0528035274542:-.0528035274542,je):ye(je,Ye)}function Zt(je,Ye,et,lt){var gt=E(4*y/(2*et+(1+je-Ye/2)*p(2*et)+(je+Ye)/2*p(4*et)+Ye/2*p(6*et))),pt=E(lt*p(et)*E((1+je*r(2*et)+Ye*r(4*et))/(1+je+Ye))),St=et*$t(1);function Jt(pr){return E(1+je*r(2*pr)+Ye*r(4*pr))}function $t(pr){var br=pr*et;return(2*br+(1+je-Ye/2)*p(2*br)+(je+Ye)/2*p(4*br)+Ye/2*p(6*br))/et}function Yt(pr){return Jt(pr)*p(pr)}var ar=function(pr,br){var _r=et*ee($t,St*p(br)/et,br/y);isNaN(_r)&&(_r=et*a(br));var Dr=gt*Jt(_r);return[Dr*pt*pr/y*r(_r),Dr/pt*p(_r)]};return ar.invert=function(pr,br){var _r=ee(Yt,br*pt/gt);return[pr*y/(r(_r)*gt*pt*Jt(_r)),P(et*$t(_r/et)/St)]},et===0&&(gt=E(lt/y),(ar=function(pr,br){return[pr*gt,p(br)/gt]}).invert=function(pr,br){return[pr/gt,P(br*gt)]}),ar}function Ut(je,Ye,et,lt,gt){lt===void 0&&(lt=1e-8),gt===void 0&&(gt=20);var pt=je(Ye),St=je(.5*(Ye+et)),Jt=je(et);return function $t(Yt,ar,pr,br,_r,Dr,an,dn,Pn,Dn,qn){if(qn.nanEncountered)return NaN;var zn,va,Sa,Ua,ja,Va,Ti,bi,si,li;if(va=Yt(ar+.25*(zn=pr-ar)),Sa=Yt(pr-.25*zn),isNaN(va))qn.nanEncountered=!0;else{if(!isNaN(Sa))return li=((Va=(Ua=zn*(br+4*va+_r)/12)+(ja=zn*(_r+4*Sa+Dr)/12))-an)/15,Dn>Pn?(qn.maxDepthCount++,Va+li):Math.abs(li)<dn?Va+li:(bi=$t(Yt,ar,Ti=ar+.5*zn,br,va,_r,Ua,.5*dn,Pn,Dn+1,qn),isNaN(bi)?(qn.nanEncountered=!0,NaN):(si=$t(Yt,Ti,pr,_r,Sa,Dr,ja,.5*dn,Pn,Dn+1,qn),isNaN(si)?(qn.nanEncountered=!0,NaN):bi+si));qn.nanEncountered=!0}}(je,Ye,et,pt,St,Jt,(pt+4*St+Jt)*(et-Ye)/6,lt,gt,1,{maxDepthCount:0,nanEncountered:!1})}function fr(je,Ye,et){function lt(_r){return je+(1-je)*h(1-h(_r,Ye),1/Ye)}function gt(_r){return Ut(lt,0,_r,1e-4)}for(var pt=1/gt(1),St=1e3,Jt=(1+1e-8)*pt,$t=[],Yt=0;Yt<=St;Yt++)$t.push(gt(Yt/St)*Jt);function ar(_r){var Dr=0,an=St,dn=500;do $t[dn]>_r?an=dn:Dr=dn,dn=Dr+an>>1;while(dn>Dr);var Pn=$t[dn+1]-$t[dn];return Pn&&(Pn=(_r-$t[dn+1])/Pn),(dn+1+Pn)/St}var pr=2*ar(1)/y*pt/et,br=function(_r,Dr){var an=ar(x(p(Dr))),dn=lt(an)*_r;return an/=pr,[dn,Dr>=0?an:-an]};return br.invert=function(_r,Dr){var an;return x(Dr*=pr)<1&&(an=a(Dr)*P(gt(x(Dr))*pt)),[_r/lt(x(Dr)),an]},br}function Tr(je,Ye){return x(je[0]-Ye[0])<i&&x(je[1]-Ye[1])<i}function ur(je,Ye){for(var et,lt,gt,pt=-1,St=je.length,Jt=je[0],$t=[];++pt<St;){lt=((et=je[pt])[0]-Jt[0])/Ye,gt=(et[1]-Jt[1])/Ye;for(var Yt=0;Yt<Ye;++Yt)$t.push([Jt[0]+Yt*lt,Jt[1]+Yt*gt]);Jt=et}return $t.push(et),$t}function Kt(je){var Ye,et,lt,gt,pt,St,Jt,$t=[],Yt=je[0].length;for(Jt=0;Jt<Yt;++Jt)et=(Ye=je[0][Jt])[0][0],lt=Ye[0][1],gt=Ye[1][1],pt=Ye[2][0],St=Ye[2][1],$t.push(ur([[et+i,lt+i],[et+i,gt-i],[pt-i,gt-i],[pt-i,St+i]],30));for(Jt=je[1].length-1;Jt>=0;--Jt)et=(Ye=je[1][Jt])[0][0],lt=Ye[0][1],gt=Ye[1][1],pt=Ye[2][0],St=Ye[2][1],$t.push(ur([[pt-i,St-i],[pt-i,gt+i],[et+i,gt+i],[et+i,lt-i]],30));return{type:"Polygon",coordinates:[k.merge($t)]}}function Qt(je,Ye,et){var lt,gt;function pt($t,Yt){for(var ar=Yt<0?-1:1,pr=Ye[+(Yt<0)],br=0,_r=pr.length-1;br<_r&&$t>pr[br][2][0];++br);var Dr=je($t-pr[br][1][0],Yt);return Dr[0]+=je(pr[br][1][0],ar*Yt>ar*pr[br][0][1]?pr[br][0][1]:Yt)[0],Dr}et?pt.invert=et(pt):je.invert&&(pt.invert=function($t,Yt){for(var ar=gt[+(Yt<0)],pr=Ye[+(Yt<0)],br=0,_r=ar.length;br<_r;++br){var Dr=ar[br];if(Dr[0][0]<=$t&&$t<Dr[1][0]&&Dr[0][1]<=Yt&&Yt<Dr[1][1]){var an=je.invert($t-je(pr[br][1][0],0)[0],Yt);return an[0]+=pr[br][1][0],Tr(pt(an[0],an[1]),[$t,Yt])?an:null}}});var St=v.geoProjection(pt),Jt=St.stream;return St.stream=function($t){var Yt=St.rotate(),ar=Jt($t),pr=(St.rotate([0,0]),Jt($t));return St.rotate(Yt),ar.sphere=function(){v.geoStream(lt,pr)},ar},St.lobes=function($t){return arguments.length?(lt=Kt($t),Ye=$t.map(function(Yt){return Yt.map(function(ar){return[[ar[0][0]*I,ar[0][1]*I],[ar[1][0]*I,ar[1][1]*I],[ar[2][0]*I,ar[2][1]*I]]})}),gt=Ye.map(function(Yt){return Yt.map(function(ar){var pr,br=je(ar[0][0],ar[0][1])[0],_r=je(ar[2][0],ar[2][1])[0],Dr=je(ar[1][0],ar[0][1])[1],an=je(ar[1][0],ar[1][1])[1];return Dr>an&&(pr=Dr,Dr=an,an=pr),[[br,Dr],[_r,an]]})}),St):Ye.map(function(Yt){return Yt.map(function(ar){return[[ar[0][0]*A,ar[0][1]*A],[ar[1][0]*A,ar[1][1]*A],[ar[2][0]*A,ar[2][1]*A]]})})},Ye!=null&&St.lobes(Ye),St}Mt.invert=function(je,Ye){return Ye>-.7109889596207567?ie.invert(je,Ye-.0528035274542):ye.invert(je,Ye)},Nt.invert=function(je,Ye){return x(Ye)>.7109889596207567?ie.invert(je,Ye+(Ye>0?.0528035274542:-.0528035274542)):ye.invert(je,Ye)};var er=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],cr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],gr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Mr=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],Ir=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],Fr=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Yr(je,Ye){return[3/L*je*E(y*y/3-Ye*Ye),Ye]}function fn(je){function Ye(et,lt){if(x(x(lt)-f)<i)return[0,lt<0?-2:2];var gt=p(lt),pt=h((1+gt)/(1-gt),je/2),St=.5*(pt+1/pt)+r(et*=je);return[2*p(et)/St,(pt-1/pt)/St]}return Ye.invert=function(et,lt){var gt=x(lt);if(x(gt-2)<i)return et?null:[0,a(lt)*f];if(gt>2)return null;var pt=(et/=2)*et,St=(lt/=2)*lt,Jt=2*lt/(1+pt+St);return Jt=h((1+Jt)/(1-Jt),1/je),[t(2*et,1-pt-St)/je,P((Jt-1)/(Jt+1))]},Ye}Yr.invert=function(je,Ye){return[L/3*je/E(y*y/3-Ye*Ye),Ye]};var en=y/_;function Rn(je,Ye){return[je*(1+E(r(Ye)))/2,Ye/(r(Ye/2)*r(je/6))]}function nn(je,Ye){var et=je*je,lt=Ye*Ye;return[je*(.975534+lt*(-.0143059*et-.119161+-.0547009*lt)),Ye*(1.00384+et*(.0802894+-.02855*lt+199025e-9*et)+lt*(.0998909+-.0491032*lt))]}function yn(je,Ye){return[p(je)/r(Ye),c(Ye)*r(je)]}function bn(je){var Ye=r(je),et=c(w+je/2);function lt(gt,pt){var St=pt-je,Jt=x(St)<i?gt*Ye:x(Jt=w+pt/2)<i||x(x(Jt)-f)<i?0:gt*St/d(c(Jt)/et);return[Jt,St]}return lt.invert=function(gt,pt){var St,Jt=pt+je;return[x(pt)<i?gt/Ye:x(St=w+Jt/2)<i||x(x(St)-f)<i?0:gt*d(c(St)/et)/pt,Jt]},lt}function ta(je,Ye){return[je,1.25*d(c(w+.4*Ye))]}function Br(je){var Ye=je.length-1;function et(lt,gt){for(var pt,St=r(gt),Jt=2/(1+St*r(lt)),$t=Jt*St*p(lt),Yt=Jt*p(gt),ar=Ye,pr=je[ar],br=pr[0],_r=pr[1];--ar>=0;)br=(pr=je[ar])[0]+$t*(pt=br)-Yt*_r,_r=pr[1]+$t*_r+Yt*pt;return[br=$t*(pt=br)-Yt*_r,_r=$t*_r+Yt*pt]}return et.invert=function(lt,gt){var pt=20,St=lt,Jt=gt;do{for(var $t,Yt=Ye,ar=je[Yt],pr=ar[0],br=ar[1],_r=0,Dr=0;--Yt>=0;)_r=pr+St*($t=_r)-Jt*Dr,Dr=br+St*Dr+Jt*$t,pr=(ar=je[Yt])[0]+St*($t=pr)-Jt*br,br=ar[1]+St*br+Jt*$t;var an,dn,Pn=(_r=pr+St*($t=_r)-Jt*Dr)*_r+(Dr=br+St*Dr+Jt*$t)*Dr;St-=an=((pr=St*($t=pr)-Jt*br-lt)*_r+(br=St*br+Jt*$t-gt)*Dr)/Pn,Jt-=dn=(br*_r-pr*Dr)/Pn}while(x(an)+x(dn)>1e-12&&--pt>0);if(pt){var Dn=E(St*St+Jt*Jt),qn=2*e(.5*Dn),zn=p(qn);return[t(St*zn,Dn*r(qn)),Dn?P(Jt*zn/Dn):0]}},et}Rn.invert=function(je,Ye){var et=x(je),lt=x(Ye),gt=i,pt=f;lt<en?pt*=lt/en:gt+=6*S(en/lt);for(var St=0;St<25;St++){var Jt=p(pt),$t=E(r(pt)),Yt=p(pt/2),ar=r(pt/2),pr=p(gt/6),br=r(gt/6),_r=.5*gt*(1+$t)-et,Dr=pt/(ar*br)-lt,an=$t?-.25*gt*Jt/$t:0,dn=.5*(1+$t),Pn=(1+.5*pt*Yt/ar)/(ar*br),Dn=pt/ar*(pr/6)/(br*br),qn=an*Dn-Pn*dn,zn=(_r*Dn-Dr*dn)/qn,va=(Dr*an-_r*Pn)/qn;if(pt-=zn,gt-=va,x(zn)<i&&x(va)<i)break}return[je<0?-gt:gt,Ye<0?-pt:pt]},nn.invert=function(je,Ye){var et=a(je)*y,lt=Ye/2,gt=50;do{var pt=et*et,St=lt*lt,Jt=et*lt,$t=et*(.975534+St*(-.0143059*pt-.119161+-.0547009*St))-je,Yt=lt*(1.00384+pt*(.0802894+-.02855*St+199025e-9*pt)+St*(.0998909+-.0491032*St))-Ye,ar=.975534-St*(.119161+3*pt*.0143059+.0547009*St),pr=-Jt*(.238322+.2188036*St+.0286118*pt),br=Jt*(.1605788+7961e-7*pt+-.0571*St),_r=1.00384+pt*(.0802894+199025e-9*pt)+St*(3*(.0998909-.02855*pt)-.245516*St),Dr=pr*br-_r*ar,an=(Yt*pr-$t*_r)/Dr,dn=($t*br-Yt*ar)/Dr;et-=an,lt-=dn}while((x(an)>i||x(dn)>i)&&--gt>0);return gt&&[et,lt]},yn.invert=function(je,Ye){var et=je*je,lt=Ye*Ye+1,gt=et+lt,pt=je?b*E((gt-E(gt*gt-4*et))/et):1/E(lt);return[P(je*pt),a(Ye)*S(pt)]},ta.invert=function(je,Ye){return[je,2.5*e(l(.8*Ye))-.625*y]};var rn=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],gn=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Qr=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],un=[[.9245,0],[0,0],[.01943,0]],Gn=[[.721316,0],[0,0],[-.00881625,-.00617325]];function wn(je,Ye){var et=v.geoProjection(Br(je)).rotate(Ye).clipAngle(90),lt=v.geoRotation(Ye),gt=et.center;return delete et.rotate,et.center=function(pt){return arguments.length?gt(lt(pt)):lt.invert(gt())},et}var Ln=E(6),oa=E(7);function tr(je,Ye){var et=P(7*p(Ye)/(3*Ln));return[Ln*je*(2*r(2*et/3)-1)/oa,9*p(et/3)/oa]}function mr(je,Ye){for(var et,lt=(1+b)*p(Ye),gt=Ye,pt=0;pt<25&&(gt-=et=(p(gt/2)+p(gt)-lt)/(.5*r(gt/2)+r(gt)),!(x(et)<i));pt++);return[je*(1+2*r(gt)/r(gt/2))/(3*_),2*E(3)*p(gt/2)/E(2+_)]}function Ct(je,Ye){for(var et,lt=E(6/(4+y)),gt=(1+y/4)*p(Ye),pt=Ye/2,St=0;St<25&&(pt-=et=(pt/2+p(pt)-gt)/(.5+r(pt)),!(x(et)<i));St++);return[lt*(.5+r(pt))*je/1.5,lt*pt]}function or(je,Ye){var et=Ye*Ye,lt=et*et,gt=et*lt;return[je*(.84719-.13063*et+gt*gt*(.05494*et-.04515-.02326*lt+.00331*gt)),Ye*(1.01183+lt*lt*(.01926*et-.02625-.00396*lt))]}function hr(je,Ye){return[je*(1+r(Ye))/2,2*(Ye-c(Ye/2))]}tr.invert=function(je,Ye){var et=3*P(Ye*oa/9);return[je*oa/(Ln*(2*r(2*et/3)-1)),P(3*p(et)*Ln/7)]},mr.invert=function(je,Ye){var et=Ye*E(2+_)/(2*E(3)),lt=2*P(et);return[3*_*je/(1+2*r(lt)/r(lt/2)),P((et+p(lt))/(1+b))]},Ct.invert=function(je,Ye){var et=E(6/(4+y)),lt=Ye/et;return x(x(lt)-f)<i&&(lt=lt<0?-f:f),[1.5*je/(et*(.5+r(lt))),P((lt/2+p(lt))/(1+y/4))]},or.invert=function(je,Ye){var et,lt,gt,pt,St=Ye,Jt=25;do St-=et=(St*(1.01183+(gt=(lt=St*St)*lt)*gt*(.01926*lt-.02625-.00396*gt))-Ye)/(1.01183+gt*gt*(.21186*lt-.23625+-.05148*gt));while(x(et)>1e-12&&--Jt>0);return[je/(.84719-.13063*(lt=St*St)+(pt=lt*(gt=lt*lt))*pt*(.05494*lt-.04515-.02326*gt+.00331*pt)),St]},hr.invert=function(je,Ye){for(var et=Ye/2,lt=0,gt=1/0;lt<10&&x(gt)>i;++lt){var pt=r(Ye/2);Ye-=gt=(Ye-c(Ye/2)-et)/(1-.5/(pt*pt))}return[2*je/(1+r(Ye)),Ye]};var Rr=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function zr(je,Ye){var et=p(Ye),lt=r(Ye),gt=a(je);if(je===0||x(Ye)===f)return[0,Ye];if(Ye===0)return[je,0];if(x(je)===f)return[je*lt,f*et];var pt=y/(2*je)-2*je/y,St=2*Ye/y,Jt=(1-St*St)/(et-St),$t=pt*pt,Yt=Jt*Jt,ar=1+$t/Yt,pr=1+Yt/$t,br=(pt*et/Jt-pt/2)/ar,_r=(Yt*et/$t+Jt/2)/pr,Dr=_r*_r-(Yt*et*et/$t+Jt*et-1)/pr;return[f*(br+E(br*br+lt*lt/ar)*gt),f*(_r+E(Dr<0?0:Dr)*a(-Ye*pt)*gt)]}zr.invert=function(je,Ye){var et=(je/=f)*je,lt=et+(Ye/=f)*Ye,gt=y*y;return[je?(lt-1+E((1-lt)*(1-lt)+4*et))/(2*je)*f:0,ee(function(pt){return lt*(y*p(pt)-2*pt)*y+4*pt*pt*(Ye-p(pt))+2*y*pt-gt*Ye},0)]};function Or(je,Ye){var et=Ye*Ye;return[je,Ye*(1.0148+et*et*(.23185+et*(.02406*et-.14499)))]}function Ar(je,Ye){if(x(Ye)<i)return[je,0];var et=c(Ye),lt=je*p(Ye);return[p(lt)/et,Ye+(1-r(lt))/et]}function vr(je,Ye){var et=wr(je[1],je[0]),lt=wr(Ye[1],Ye[0]),gt=function(St,Jt){return t(St[0]*Jt[1]-St[1]*Jt[0],St[0]*Jt[0]+St[1]*Jt[1])}(et,lt),pt=Er(et)/Er(lt);return xr([1,0,je[0][0],0,1,je[0][1]],xr([pt,0,0,0,pt,0],xr([r(gt),p(gt),0,-p(gt),r(gt),0],[1,0,-Ye[0][0],0,1,-Ye[0][1]])))}function xr(je,Ye){return[je[0]*Ye[0]+je[1]*Ye[3],je[0]*Ye[1]+je[1]*Ye[4],je[0]*Ye[2]+je[1]*Ye[5]+je[2],je[3]*Ye[0]+je[4]*Ye[3],je[3]*Ye[1]+je[4]*Ye[4],je[3]*Ye[2]+je[4]*Ye[5]+je[5]]}function wr(je,Ye){return[je[0]-Ye[0],je[1]-Ye[1]]}function Er(je){return E(je[0]*je[0]+je[1]*je[1])}function qr(je,Ye,et){function lt(St,Jt){var $t,Yt=Ye(St,Jt),ar=Yt.project([St*A,Jt*A]);return($t=Yt.transform)?[$t[0]*ar[0]+$t[1]*ar[1]+$t[2],-($t[3]*ar[0]+$t[4]*ar[1]+$t[5])]:(ar[1]=-ar[1],ar)}(function St(Jt,$t){if(Jt.edges=function(Dr){for(var an=Dr.length,dn=[],Pn=Dr[an-1],Dn=0;Dn<an;++Dn)dn.push([Pn,Pn=Dr[Dn]]);return dn}(Jt.face),$t.face){var Yt=Jt.shared=function(Dr,an){for(var dn,Pn,Dn=Dr.length,qn=null,zn=0;zn<Dn;++zn){dn=Dr[zn];for(var va=an.length;--va>=0;)if(Pn=an[va],dn[0]===Pn[0]&&dn[1]===Pn[1]){if(qn)return[qn,dn];qn=dn}}}(Jt.face,$t.face),ar=vr(Yt.map($t.project),Yt.map(Jt.project));Jt.transform=$t.transform?xr($t.transform,ar):ar;for(var pr=$t.edges,br=0,_r=pr.length;br<_r;++br)Hr(Yt[0],pr[br][1])&&Hr(Yt[1],pr[br][0])&&(pr[br]=Jt),Hr(Yt[0],pr[br][0])&&Hr(Yt[1],pr[br][1])&&(pr[br]=Jt);for(pr=Jt.edges,br=0,_r=pr.length;br<_r;++br)Hr(Yt[0],pr[br][0])&&Hr(Yt[1],pr[br][1])&&(pr[br]=$t),Hr(Yt[0],pr[br][1])&&Hr(Yt[1],pr[br][0])&&(pr[br]=$t)}else Jt.transform=$t.transform;return Jt.children&&Jt.children.forEach(function(Dr){St(Dr,Jt)}),Jt})(je,{transform:null}),$r(je)&&(lt.invert=function(St,Jt){var $t=function Yt(ar,pr){var br=ar.project.invert,_r=ar.transform,Dr=pr;if(_r&&(_r=function(qn){var zn=1/(qn[0]*qn[4]-qn[1]*qn[3]);return[zn*qn[4],-zn*qn[1],zn*(qn[1]*qn[5]-qn[2]*qn[4]),-zn*qn[3],zn*qn[0],zn*(qn[2]*qn[3]-qn[0]*qn[5])]}(_r),Dr=[_r[0]*Dr[0]+_r[1]*Dr[1]+_r[2],_r[3]*Dr[0]+_r[4]*Dr[1]+_r[5]]),br&&ar===function(qn){return Ye(qn[0]*I,qn[1]*I)}(an=br(Dr)))return an;for(var an,dn=ar.children,Pn=0,Dn=dn&&dn.length;Pn<Dn;++Pn)if(an=Yt(dn[Pn],pr))return an}(je,[St,-Jt]);return $t&&($t[0]*=I,$t[1]*=I,$t)});var gt=v.geoProjection(lt),pt=gt.stream;return gt.stream=function(St){var Jt=gt.rotate(),$t=pt(St),Yt=(gt.rotate([0,0]),pt(St));return gt.rotate(Jt),$t.sphere=function(){Yt.polygonStart(),Yt.lineStart(),function ar(pr,br,_r){var Dr,an,dn=br.edges,Pn=dn.length,Dn={type:"MultiPoint",coordinates:br.face},qn=br.face.filter(function(Ti){return x(Ti[1])!==90}),zn=v.geoBounds({type:"MultiPoint",coordinates:qn}),va=!1,Sa=-1,Ua=zn[1][0]-zn[0][0],ja=Ua===180||Ua===360?[(zn[0][0]+zn[1][0])/2,(zn[0][1]+zn[1][1])/2]:v.geoCentroid(Dn);if(_r)for(;++Sa<Pn&&dn[Sa]!==_r;);++Sa;for(var Va=0;Va<Pn;++Va)an=dn[(Va+Sa)%Pn],Array.isArray(an)?(va||(pr.point((Dr=v.geoInterpolate(an[0],ja)(i))[0],Dr[1]),va=!0),pr.point((Dr=v.geoInterpolate(an[1],ja)(i))[0],Dr[1])):(va=!1,an!==_r&&ar(pr,an,br))}(Yt,je),Yt.lineEnd(),Yt.polygonEnd()},$t},gt.angle(et==null?-30:et*A)}function Hr(je,Ye){return je&&Ye&&je[0]===Ye[0]&&je[1]===Ye[1]}function $r(je){return je.project.invert||je.children&&je.children.some($r)}Or.invert=function(je,Ye){Ye>1.790857183?Ye=1.790857183:Ye<-1.790857183&&(Ye=-1.790857183);var et,lt=Ye;do{var gt=lt*lt;lt-=et=(lt*(1.0148+gt*gt*(.23185+gt*(.02406*gt-.14499)))-Ye)/(1.0148+gt*gt*(5*.23185+gt*(.21654*gt-1.01493)))}while(x(et)>i);return[je,lt]},Ar.invert=function(je,Ye){if(x(Ye)<i)return[je,0];var et,lt=je*je+Ye*Ye,gt=.5*Ye,pt=10;do{var St=c(gt),Jt=1/r(gt),$t=lt-2*Ye*gt+gt*gt;gt-=et=(St*$t+2*(gt-Ye))/(2+$t*Jt*Jt+2*(gt-Ye)*St)}while(x(et)>i&&--pt>0);return St=c(gt),[(x(Ye)<x(gt+1/St)?P(je*St):a(Ye)*a(je)*(S(x(je*St))+f))/p(gt),gt]};var tn=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],vn=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(je){return je.map(function(Ye){return tn[Ye]})}),_n=2/E(3);function Tn(je,Ye){var et=De(je,Ye);return[et[0]*_n,et[1]]}function Cn(je,Ye){for(var et=0,lt=je.length,gt=0;et<lt;++et)gt+=je[et]*Ye[et];return gt}function On(je){return[t(je[1],je[0])*A,P(u(-1,o(1,je[2])))*A]}function Zn(je){var Ye=je[0]*I,et=je[1]*I,lt=r(et);return[lt*r(Ye),lt*p(Ye),p(et)]}function Aa(){}function Ma(je,Ye){return{type:"FeatureCollection",features:je.features.map(function(et){return Sn(et,Ye)})}}function Sn(je,Ye){return{type:"Feature",id:je.id,properties:je.properties,geometry:Qn(je.geometry,Ye)}}function Qn(je,Ye){if(!je)return null;if(je.type==="GeometryCollection")return function(lt,gt){return{type:"GeometryCollection",geometries:lt.geometries.map(function(pt){return Qn(pt,gt)})}}(je,Ye);var et;switch(je.type){case"Point":case"MultiPoint":et=di;break;case"LineString":case"MultiLineString":et=Di;break;case"Polygon":case"MultiPolygon":case"Sphere":et=fo;break;default:return null}return v.geoStream(je,Ye(et)),et.result()}Tn.invert=function(je,Ye){return De.invert(je/_n,Ye)};var Kn=[],Da=[],di={point:function(je,Ye){Kn.push([je,Ye])},result:function(){var je=Kn.length?Kn.length<2?{type:"Point",coordinates:Kn[0]}:{type:"MultiPoint",coordinates:Kn}:null;return Kn=[],je}},Di={lineStart:Aa,point:function(je,Ye){Kn.push([je,Ye])},lineEnd:function(){Kn.length&&(Da.push(Kn),Kn=[])},result:function(){var je=Da.length?Da.length<2?{type:"LineString",coordinates:Da[0]}:{type:"MultiLineString",coordinates:Da}:null;return Da=[],je}},fo={polygonStart:Aa,lineStart:Aa,point:function(je,Ye){Kn.push([je,Ye])},lineEnd:function(){var je=Kn.length;if(je){do Kn.push(Kn[0].slice());while(++je<4);Da.push(Kn),Kn=[]}},polygonEnd:Aa,result:function(){if(!Da.length)return null;var je=[],Ye=[];return Da.forEach(function(et){(function(lt){if((gt=lt.length)<4)return!1;for(var gt,pt=0,St=lt[gt-1][1]*lt[0][0]-lt[gt-1][0]*lt[0][1];++pt<gt;)St+=lt[pt-1][1]*lt[pt][0]-lt[pt-1][0]*lt[pt][1];return St<=0})(et)?je.push([et]):Ye.push(et)}),Ye.forEach(function(et){var lt=et[0];je.some(function(gt){if(function(pt,St){for(var Jt=St[0],$t=St[1],Yt=!1,ar=0,pr=pt.length,br=pr-1;ar<pr;br=ar++){var _r=pt[ar],Dr=_r[0],an=_r[1],dn=pt[br],Pn=dn[0],Dn=dn[1];an>$t^Dn>$t&&Jt<(Pn-Dr)*($t-an)/(Dn-an)+Dr&&(Yt=!Yt)}return Yt}(gt[0],lt))return gt.push(et),!0})||je.push([et])}),Da=[],je.length?je.length>1?{type:"MultiPolygon",coordinates:je}:{type:"Polygon",coordinates:je[0]}:null}};function Wa(je){var Ye=je(f,0)[0]-je(-f,0)[0];function et(lt,gt){var pt=x(lt)<f,St=je(pt?lt:lt>0?lt-y:lt+y,gt),Jt=(St[0]-St[1])*b,$t=(St[0]+St[1])*b;if(pt)return[Jt,$t];var Yt=Ye*b,ar=Jt>0^$t>0?-1:1;return[ar*Jt-a($t)*Yt,ar*$t-a(Jt)*Yt]}return je.invert&&(et.invert=function(lt,gt){var pt=(lt+gt)*b,St=(gt-lt)*b,Jt=x(pt)<.5*Ye&&x(St)<.5*Ye;if(!Jt){var $t=Ye*b,Yt=pt>0^St>0?-1:1,ar=-Yt*lt+(St>0?1:-1)*$t,pr=-Yt*gt+(pt>0?1:-1)*$t;pt=(-ar-pr)*b,St=(ar-pr)*b}var br=je.invert(pt,St);return Jt||(br[0]+=pt>0?y:-y),br}),v.geoProjection(et).rotate([-90,-90,45]).clipAngle(179.999)}function Za(){return Wa(Pt).scale(111.48)}function Ki(je){var Ye=p(je);function et(lt,gt){var pt=Ye?c(lt*Ye/2)/Ye:lt/2;if(!gt)return[2*pt,-je];var St=2*e(pt*p(gt)),Jt=1/c(gt);return[p(St)*Jt,gt+(1-r(St))*Jt-je]}return et.invert=function(lt,gt){if(x(gt+=je)<i)return[Ye?2*e(Ye*lt/2)/Ye:lt,0];var pt,St=lt*lt+gt*gt,Jt=0,$t=10;do{var Yt=c(Jt),ar=1/r(Jt),pr=St-2*gt*Jt+Jt*Jt;Jt-=pt=(Yt*pr+2*(Jt-gt))/(2+pr*ar*ar+2*(Jt-gt)*Yt)}while(x(pt)>i&&--$t>0);var br=lt*(Yt=c(Jt)),_r=c(x(gt)<x(Jt+1/Yt)?.5*P(br):.5*S(br)+y/4)/p(Jt);return[Ye?2*e(Ye*_r)/Ye:2*_r,Jt]},et}var Na=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function ho(je,Ye){var et,lt=o(18,36*x(Ye)/y),gt=n(lt),pt=lt-gt,St=(et=Na[gt])[0],Jt=et[1],$t=(et=Na[++gt])[0],Yt=et[1],ar=(et=Na[o(19,++gt)])[0],pr=et[1];return[je*($t+pt*(ar-St)/2+pt*pt*(ar-2*$t+St)/2),(Ye>0?f:-f)*(Yt+pt*(pr-Jt)/2+pt*pt*(pr-2*Yt+Jt)/2)]}function vo(je,Ye){var et=function(St){function Jt($t,Yt){var ar=r(Yt),pr=(St-1)/(St-ar*r($t));return[pr*ar*p($t),pr*p(Yt)]}return Jt.invert=function($t,Yt){var ar=$t*$t+Yt*Yt,pr=E(ar),br=(St-E(1-ar*(St+1)/(St-1)))/((St-1)/pr+pr/(St-1));return[t($t*br,pr*E(1-br*br)),pr?P(Yt*br/pr):0]},Jt}(je);if(!Ye)return et;var lt=r(Ye),gt=p(Ye);function pt(St,Jt){var $t=et(St,Jt),Yt=$t[1],ar=Yt*gt/(je-1)+lt;return[$t[0]*lt/ar,Yt/ar]}return pt.invert=function(St,Jt){var $t=(je-1)/(je-1-Jt*gt);return et.invert($t*St,$t*Jt*lt)},pt}Na.forEach(function(je){je[1]*=1.0144}),ho.invert=function(je,Ye){var et=Ye/f,lt=90*et,gt=o(18,x(lt/5)),pt=u(0,n(gt));do{var St=Na[pt][1],Jt=Na[pt+1][1],$t=Na[o(19,pt+2)][1],Yt=$t-St,ar=$t-2*Jt+St,pr=2*(x(et)-Jt)/Yt,br=ar/Yt,_r=pr*(1-br*pr*(1-2*br*pr));if(_r>=0||pt===1){lt=(Ye>=0?5:-5)*(_r+gt);var Dr,an=50;do _r=(gt=o(18,x(lt)/5))-(pt=n(gt)),St=Na[pt][1],Jt=Na[pt+1][1],$t=Na[o(19,pt+2)][1],lt-=(Dr=(Ye>=0?f:-f)*(Jt+_r*($t-St)/2+_r*_r*($t-2*Jt+St)/2)-Ye)*A;while(x(Dr)>1e-12&&--an>0);break}}while(--pt>=0);var dn=Na[pt][0],Pn=Na[pt+1][0],Dn=Na[o(19,pt+2)][0];return[je/(Pn+_r*(Dn-dn)/2+_r*_r*(Dn-2*Pn+dn)/2),lt*I]};var wi=-179.9999,$i=179.9999,yo=-89.9999;function So(je){return je.length>0}function Bi(je){return je===-90||je===90?[0,je]:[-180,(Ye=je,Math.floor(1e4*Ye)/1e4)];var Ye}function mi(je){var Ye=je[0],et=je[1],lt=!1;return Ye<=wi?(Ye=-180,lt=!0):Ye>=$i&&(Ye=180,lt=!0),et<=yo?(et=-90,lt=!0):et>=89.9999&&(et=90,lt=!0),lt?[Ye,et]:je}function Zi(je){return je.map(mi)}function Ms(je,Ye,et){for(var lt=0,gt=je.length;lt<gt;++lt){var pt=je[lt].slice();et.push({index:-1,polygon:Ye,ring:pt});for(var St=0,Jt=pt.length;St<Jt;++St){var $t=pt[St],Yt=$t[0],ar=$t[1];if(Yt<=wi||Yt>=$i||ar<=yo||ar>=89.9999){pt[St]=mi($t);for(var pr=St+1;pr<Jt;++pr){var br=pt[pr],_r=br[0],Dr=br[1];if(_r>wi&&_r<$i&&Dr>yo&&Dr<89.9999)break}if(pr===St+1)continue;if(St){var an={index:-1,polygon:Ye,ring:pt.slice(0,St+1)};an.ring[an.ring.length-1]=Bi(ar),et[et.length-1]=an}else et.pop();if(pr>=Jt)break;et.push({index:-1,polygon:Ye,ring:pt=pt.slice(pr-1)}),pt[0]=Bi(pt[0][1]),St=-1,Jt=pt.length}}}}function Cs(je){var Ye,et,lt,gt,pt,St,Jt=je.length,$t={},Yt={};for(Ye=0;Ye<Jt;++Ye)lt=(et=je[Ye]).ring[0],pt=et.ring[et.ring.length-1],lt[0]!==pt[0]||lt[1]!==pt[1]?(et.index=Ye,$t[lt]=Yt[pt]=et):(et.polygon.push(et.ring),je[Ye]=null);for(Ye=0;Ye<Jt;++Ye)if(et=je[Ye]){if(lt=et.ring[0],pt=et.ring[et.ring.length-1],gt=Yt[lt],St=$t[pt],delete $t[lt],delete Yt[pt],lt[0]===pt[0]&&lt[1]===pt[1]){et.polygon.push(et.ring);continue}gt?(delete Yt[lt],delete $t[gt.ring[0]],gt.ring.pop(),je[gt.index]=null,et={index:-1,polygon:gt.polygon,ring:gt.ring.concat(et.ring)},gt===St?et.polygon.push(et.ring):(et.index=Jt++,je.push($t[et.ring[0]]=Yt[et.ring[et.ring.length-1]]=et))):St?(delete $t[pt],delete Yt[St.ring[St.ring.length-1]],et.ring.pop(),et={index:Jt++,polygon:St.polygon,ring:et.ring.concat(St.ring)},je[St.index]=null,je.push($t[et.ring[0]]=Yt[et.ring[et.ring.length-1]]=et)):(et.ring.push(et.ring[0]),et.polygon.push(et.ring))}}function Xa(je){var Ye={type:"Feature",geometry:ys(je.geometry)};return je.id!=null&&(Ye.id=je.id),je.bbox!=null&&(Ye.bbox=je.bbox),je.properties!=null&&(Ye.properties=je.properties),Ye}function ys(je){if(je==null)return je;var Ye,et,lt,gt;switch(je.type){case"GeometryCollection":Ye={type:"GeometryCollection",geometries:je.geometries.map(ys)};break;case"Point":Ye={type:"Point",coordinates:mi(je.coordinates)};break;case"MultiPoint":case"LineString":Ye={type:je.type,coordinates:Zi(je.coordinates)};break;case"MultiLineString":Ye={type:"MultiLineString",coordinates:je.coordinates.map(Zi)};break;case"Polygon":var pt=[];Ms(je.coordinates,pt,et=[]),Cs(et),Ye={type:"Polygon",coordinates:pt};break;case"MultiPolygon":et=[],lt=-1,gt=je.coordinates.length;for(var St=new Array(gt);++lt<gt;)Ms(je.coordinates[lt],St[lt]=[],et);Cs(et),Ye={type:"MultiPolygon",coordinates:St.filter(So)};break;default:return je}return je.bbox!=null&&(Ye.bbox=je.bbox),Ye}function as(je,Ye){var et=c(Ye/2),lt=p(w*et);return[je*(.74482-.34588*lt*lt),1.70711*et]}function Ps(je,Ye,et){var lt=v.geoInterpolate(Ye,et),gt=lt(.5),pt=v.geoRotation([-gt[0],-gt[1]])(Ye),St=lt.distance/2,Jt=-P(p(pt[1]*I)/p(St)),$t=[-gt[0],-gt[1],-(pt[0]>0?y-Jt:Jt)*A],Yt=v.geoProjection(je(St)).rotate($t),ar=v.geoRotation($t),pr=Yt.center;return delete Yt.rotate,Yt.center=function(br){return arguments.length?pr(ar(br)):ar.invert(pr())},Yt.clipAngle(90)}function Is(je){var Ye=r(je);function et(lt,gt){var pt=v.geoGnomonicRaw(lt,gt);return pt[0]*=Ye,pt}return et.invert=function(lt,gt){return v.geoGnomonicRaw.invert(lt/Ye,gt)},et}function As(je,Ye){return Ps(Is,je,Ye)}function Os(je){if(!(je*=2))return v.geoAzimuthalEquidistantRaw;var Ye=-je/2,et=-Ye,lt=je*je,gt=c(et),pt=.5/p(et);function St(Jt,$t){var Yt=S(r($t)*r(Jt-Ye)),ar=S(r($t)*r(Jt-et));return[((Yt*=Yt)-(ar*=ar))/(2*je),($t<0?-1:1)*E(4*lt*ar-(lt-Yt+ar)*(lt-Yt+ar))/(2*je)]}return St.invert=function(Jt,$t){var Yt,ar,pr=$t*$t,br=r(E(pr+(Yt=Jt+Ye)*Yt)),_r=r(E(pr+(Yt=Jt+et)*Yt));return[t(ar=br-_r,Yt=(br+_r)*gt),($t<0?-1:1)*S(E(Yt*Yt+ar*ar)*pt)]},St}function Co(je,Ye){return Ps(Os,je,Ye)}function Po(je,Ye){if(x(Ye)<i)return[je,0];var et=x(Ye/f),lt=P(et);if(x(je)<i||x(x(Ye)-f)<i)return[0,a(Ye)*y*c(lt/2)];var gt=r(lt),pt=x(y/je-je/y)/2,St=pt*pt,Jt=gt/(et+gt-1),$t=Jt*(2/et-1),Yt=$t*$t,ar=Yt+St,pr=Jt-Yt,br=St+Jt;return[a(je)*y*(pt*pr+E(St*pr*pr-ar*(Jt*Jt-Yt)))/ar,a(Ye)*y*($t*br-pt*E((St+1)*ar-br*br))/ar]}function qo(je,Ye){if(x(Ye)<i)return[je,0];var et=x(Ye/f),lt=P(et);if(x(je)<i||x(x(Ye)-f)<i)return[0,a(Ye)*y*c(lt/2)];var gt=r(lt),pt=x(y/je-je/y)/2,St=pt*pt,Jt=gt*(E(1+St)-pt*gt)/(1+St*et*et);return[a(je)*y*Jt,a(Ye)*y*E(1-Jt*(2*pt+Jt))]}function Go(je,Ye){if(x(Ye)<i)return[je,0];var et=Ye/f,lt=P(et);if(x(je)<i||x(x(Ye)-f)<i)return[0,y*c(lt/2)];var gt=(y/je-je/y)/2,pt=et/(1+r(lt));return[y*(a(je)*E(gt*gt+1-pt*pt)-gt),y*pt]}function Yo(je,Ye){if(!Ye)return[je,0];var et=x(Ye);if(!je||et===f)return[0,Ye];var lt=et/f,gt=lt*lt,pt=(8*lt-gt*(gt+2)-5)/(2*gt*(lt-1)),St=pt*pt,Jt=lt*pt,$t=gt+St+2*Jt,Yt=lt+3*pt,ar=je/f,pr=ar+1/ar,br=a(x(je)-f)*E(pr*pr-4),_r=br*br,Dr=(br*($t+St-1)+2*E($t*(gt+St*_r-1)+(1-gt)*(gt*(Yt*Yt+4*St)+12*Jt*St+4*St*St)))/(4*$t+_r);return[a(je)*f*Dr,a(Ye)*f*E(1+br*x(Dr)-Dr*Dr)]}function is(je,Ye,et,lt){var gt=y/3;je=u(je,i),Ye=u(Ye,i),je=o(je,f),Ye=o(Ye,y-i),et=u(et,0),et=o(et,100-i);var pt=(lt=u(lt,i))/100,St=S((et/100+1)*r(gt))/gt,Jt=p(je)/p(St*f),$t=Ye/y,Yt=E(pt*p(je/2)/p(Ye/2));return function(ar,pr,br,_r,Dr){function an(dn,Pn){var Dn=br*p(_r*Pn),qn=E(1-Dn*Dn),zn=E(2/(1+qn*r(dn*=Dr)));return[ar*qn*zn*p(dn),pr*Dn*zn]}return an.invert=function(dn,Pn){var Dn=dn/ar,qn=Pn/pr,zn=E(Dn*Dn+qn*qn),va=2*P(zn/2);return[t(dn*c(va),ar*zn)/Dr,zn&&P(Pn*p(va)/(pr*br*zn))/_r]},an}(Yt/E($t*Jt*St),1/(Yt*E($t*Jt*St)),Jt,St,$t)}function xo(){var je=65*I,Ye=60*I,et=20,lt=200,gt=v.geoProjectionMutator(is),pt=gt(je,Ye,et,lt);return pt.poleline=function(St){return arguments.length?gt(je=+St*I,Ye,et,lt):je*A},pt.parallels=function(St){return arguments.length?gt(je,Ye=+St*I,et,lt):Ye*A},pt.inflation=function(St){return arguments.length?gt(je,Ye,et=+St,lt):et},pt.ratio=function(St){return arguments.length?gt(je,Ye,et,lt=+St):lt},pt.scale(163.775)}as.invert=function(je,Ye){var et=Ye/1.70711,lt=p(w*et);return[je/(.74482-.34588*lt*lt),2*e(et)]},Po.invert=function(je,Ye){if(x(Ye)<i)return[je,0];if(x(je)<i)return[0,f*p(2*e(Ye/y))];var et=(je/=y)*je,lt=(Ye/=y)*Ye,gt=et+lt,pt=gt*gt,St=-x(Ye)*(1+gt),Jt=St-2*lt+et,$t=-2*St+1+2*lt+pt,Yt=lt/$t+(2*Jt*Jt*Jt/($t*$t*$t)-9*St*Jt/($t*$t))/27,ar=(St-Jt*Jt/(3*$t))/$t,pr=2*E(-ar/3),br=S(3*Yt/(ar*pr))/3;return[y*(gt-1+E(1+2*(et-lt)+pt))/(2*je),a(Ye)*y*(-pr*r(br+y/3)-Jt/(3*$t))]},qo.invert=function(je,Ye){if(!je)return[0,f*p(2*e(Ye/y))];var et=x(je/y),lt=(1-et*et-(Ye/=y)*Ye)/(2*et),gt=E(lt*lt+1);return[a(je)*y*(gt-lt),a(Ye)*f*p(2*t(E((1-2*lt*et)*(lt+gt)-et),E(gt+lt+et)))]},Go.invert=function(je,Ye){if(!Ye)return[je,0];var et=Ye/y,lt=(y*y*(1-et*et)-je*je)/(2*y*je);return[je?y*(a(je)*E(lt*lt+1)-lt):0,f*p(2*e(et))]},Yo.invert=function(je,Ye){var et;if(!je||!Ye)return[je,Ye];Ye/=y;var lt=a(je)*je/f,gt=(lt*lt-1+4*Ye*Ye)/x(lt),pt=gt*gt,St=2*Ye,Jt=50;do{var $t=St*St,Yt=(8*St-$t*($t+2)-5)/(2*$t*(St-1)),ar=(3*St-$t*St-10)/(2*$t*St),pr=Yt*Yt,br=St*Yt,_r=St+Yt,Dr=_r*_r,an=St+3*Yt,dn=-2*_r*(4*br*pr+(1-4*$t+3*$t*$t)*(1+ar)+pr*(14*$t-6-pt+(8*$t-8-2*pt)*ar)+br*(12*$t-8+(10*$t-10-pt)*ar)),Pn=E(Dr*($t+pr*pt-1)+(1-$t)*($t*(an*an+4*pr)+pr*(12*br+4*pr)));St-=et=(gt*(Dr+pr-1)+2*Pn-lt*(4*Dr+pt))/(gt*(2*Yt*ar+2*_r*(1+ar))+dn/Pn-8*_r*(gt*(-1+pr+Dr)+2*Pn)*(1+ar)/(pt+4*Dr))}while(et>i&&--Jt>0);return[a(je)*(E(gt*gt+4)+gt)*y/4,f*St]};var xs=4*y+3*E(3),po=2*E(2*y*E(3)/xs),Wo=te(po*E(3)/y,po,xs/6);function bs(je,Ye){return[je*E(1-3*Ye*Ye/(y*y)),Ye]}function Io(je,Ye){var et=r(Ye),lt=r(je)*et,gt=1-lt,pt=r(je=t(p(je)*et,-p(Ye))),St=p(je);return[St*(et=E(1-lt*lt))-pt*gt,-pt*et-St*gt]}function Ga(je,Ye){var et=H(je,Ye);return[(et[0]+je/f)/2,(et[1]+Ye)/2]}bs.invert=function(je,Ye){return[je/E(1-3*Ye*Ye/(y*y)),Ye]},Io.invert=function(je,Ye){var et=(je*je+Ye*Ye)/-2,lt=E(-et*(2+et)),gt=Ye*et+je*lt,pt=je*et-Ye*lt,St=E(pt*pt+gt*gt);return[t(lt*gt,St*(1+et)),St?-P(lt*pt/St):0]},Ga.invert=function(je,Ye){var et=je,lt=Ye,gt=25;do{var pt,St=r(lt),Jt=p(lt),$t=p(2*lt),Yt=Jt*Jt,ar=St*St,pr=p(et),br=r(et/2),_r=p(et/2),Dr=_r*_r,an=1-ar*br*br,dn=an?S(St*br)*E(pt=1/an):pt=0,Pn=.5*(2*dn*St*_r+et/f)-je,Dn=.5*(dn*Jt+lt)-Ye,qn=.5*pt*(ar*Dr+dn*St*br*Yt)+.5/f,zn=pt*(pr*$t/4-dn*Jt*_r),va=.125*pt*($t*_r-dn*Jt*ar*pr),Sa=.5*pt*(Yt*br+dn*Dr*St)+.5,Ua=zn*va-Sa*qn,ja=(Dn*zn-Pn*Sa)/Ua,Va=(Pn*va-Dn*qn)/Ua;et-=ja,lt-=Va}while((x(ja)>i||x(Va)>i)&&--gt>0);return[et,lt]},m.geoNaturalEarth=v.geoNaturalEarth1,m.geoNaturalEarthRaw=v.geoNaturalEarth1Raw,m.geoAiry=function(){var je=f,Ye=v.geoProjectionMutator(U),et=Ye(je);return et.radius=function(lt){return arguments.length?Ye(je=lt*I):je*A},et.scale(179.976).clipAngle(147)},m.geoAiryRaw=U,m.geoAitoff=function(){return v.geoProjection(H).scale(152.63)},m.geoAitoffRaw=H,m.geoArmadillo=function(){var je=20*I,Ye=je>=0?1:-1,et=c(Ye*je),lt=v.geoProjectionMutator(Y),gt=lt(je),pt=gt.stream;return gt.parallel=function(St){return arguments.length?(et=c((Ye=(je=St*I)>=0?1:-1)*je),lt(je)):je*A},gt.stream=function(St){var Jt=gt.rotate(),$t=pt(St),Yt=(gt.rotate([0,0]),pt(St)),ar=gt.precision();return gt.rotate(Jt),$t.sphere=function(){Yt.polygonStart(),Yt.lineStart();for(var pr=-180*Ye;Ye*pr<180;pr+=90*Ye)Yt.point(pr,90*Ye);if(je)for(;Ye*(pr-=3*Ye*ar)>=-180;)Yt.point(pr,Ye*-t(r(pr*I/2),et)*A);Yt.lineEnd(),Yt.polygonEnd()},$t},gt.scale(218.695).center([0,28.0974])},m.geoArmadilloRaw=Y,m.geoAugust=function(){return v.geoProjection(J).scale(66.1603)},m.geoAugustRaw=J,m.geoBaker=function(){return v.geoProjection(re).scale(112.314)},m.geoBakerRaw=re,m.geoBerghaus=function(){var je=5,Ye=v.geoProjectionMutator(V),et=Ye(je),lt=et.stream,gt=-r(.01*I),pt=p(.01*I);return et.lobes=function(St){return arguments.length?Ye(je=+St):je},et.stream=function(St){var Jt=et.rotate(),$t=lt(St),Yt=(et.rotate([0,0]),lt(St));return et.rotate(Jt),$t.sphere=function(){Yt.polygonStart(),Yt.lineStart();for(var ar=0,pr=360/je,br=2*y/je,_r=90-180/je,Dr=f;ar<je;++ar,_r-=pr,Dr-=br)Yt.point(t(pt*r(Dr),gt)*A,P(pt*p(Dr))*A),_r<-90?(Yt.point(-90,-180-_r-.01),Yt.point(-90,-180-_r+.01)):(Yt.point(90,_r+.01),Yt.point(90,_r-.01));Yt.lineEnd(),Yt.polygonEnd()},$t},et.scale(87.8076).center([0,17.1875]).clipAngle(179.999)},m.geoBerghausRaw=V,m.geoBertin1953=function(){return v.geoProjection($()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])},m.geoBertin1953Raw=$,m.geoBoggs=function(){return v.geoProjection(ve).scale(160.857)},m.geoBoggsRaw=ve,m.geoBonne=function(){return fe(Ae).scale(123.082).center([0,26.1441]).parallel(45)},m.geoBonneRaw=Ae,m.geoBottomley=function(){var je=.5,Ye=v.geoProjectionMutator(pe),et=Ye(je);return et.fraction=function(lt){return arguments.length?Ye(je=+lt):je},et.scale(158.837)},m.geoBottomleyRaw=pe,m.geoBromley=function(){return v.geoProjection(ge).scale(152.63)},m.geoBromleyRaw=ge,m.geoChamberlin=Me,m.geoChamberlinRaw=Te,m.geoChamberlinAfrica=function(){return Me([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])},m.geoCollignon=function(){return v.geoProjection(De).scale(95.6464).center([0,30])},m.geoCollignonRaw=De,m.geoCraig=function(){return fe(Ie).scale(249.828).clipAngle(90)},m.geoCraigRaw=Ie,m.geoCraster=function(){return v.geoProjection(Ze).scale(156.19)},m.geoCrasterRaw=Ze,m.geoCylindricalEqualArea=function(){return fe(Fe).parallel(38.58).scale(195.044)},m.geoCylindricalEqualAreaRaw=Fe,m.geoCylindricalStereographic=function(){return fe(Pe).scale(124.75)},m.geoCylindricalStereographicRaw=Pe,m.geoEckert1=function(){return v.geoProjection(ze).scale(165.664)},m.geoEckert1Raw=ze,m.geoEckert2=function(){return v.geoProjection(Ge).scale(165.664)},m.geoEckert2Raw=Ge,m.geoEckert3=function(){return v.geoProjection($e).scale(180.739)},m.geoEckert3Raw=$e,m.geoEckert4=function(){return v.geoProjection(ot).scale(180.739)},m.geoEckert4Raw=ot,m.geoEckert5=function(){return v.geoProjection(vt).scale(173.044)},m.geoEckert5Raw=vt,m.geoEckert6=function(){return v.geoProjection(bt).scale(173.044)},m.geoEckert6Raw=bt,m.geoEisenlohr=function(){return v.geoProjection(tt).scale(62.5271)},m.geoEisenlohrRaw=tt,m.geoFahey=function(){return v.geoProjection(mt).scale(137.152)},m.geoFaheyRaw=mt,m.geoFoucaut=function(){return v.geoProjection(Ft).scale(135.264)},m.geoFoucautRaw=Ft,m.geoFoucautSinusoidal=function(){var je=.5,Ye=v.geoProjectionMutator(Vt),et=Ye(je);return et.alpha=function(lt){return arguments.length?Ye(je=+lt):je},et.scale(168.725)},m.geoFoucautSinusoidalRaw=Vt,m.geoGilbert=function(je){je==null&&(je=v.geoOrthographic);var Ye=je(),et=v.geoEquirectangular().scale(A).precision(0).clipAngle(null).translate([0,0]);function lt(pt){return Ye(Xt(pt))}function gt(pt){lt[pt]=function(){return arguments.length?(Ye[pt].apply(Ye,arguments),lt):Ye[pt]()}}return Ye.invert&&(lt.invert=function(pt){return Gt(Ye.invert(pt))}),lt.stream=function(pt){var St=Ye.stream(pt),Jt=et.stream({point:function($t,Yt){St.point($t/2,P(c(-Yt/2*I))*A)},lineStart:function(){St.lineStart()},lineEnd:function(){St.lineEnd()},polygonStart:function(){St.polygonStart()},polygonEnd:function(){St.polygonEnd()}});return Jt.sphere=St.sphere,Jt},lt.rotate=function(pt){return arguments.length?(et.rotate(pt),lt):et.rotate()},lt.center=function(pt){return arguments.length?(Ye.center(Xt(pt)),lt):Gt(Ye.center())},gt("angle"),gt("clipAngle"),gt("clipExtent"),gt("fitExtent"),gt("fitHeight"),gt("fitSize"),gt("fitWidth"),gt("scale"),gt("translate"),gt("precision"),lt.scale(249.5)},m.geoGingery=function(){var je=6,Ye=30*I,et=r(Ye),lt=p(Ye),gt=v.geoProjectionMutator(nr),pt=gt(Ye,je),St=pt.stream,Jt=-r(.01*I),$t=p(.01*I);return pt.radius=function(Yt){return arguments.length?(et=r(Ye=Yt*I),lt=p(Ye),gt(Ye,je)):Ye*A},pt.lobes=function(Yt){return arguments.length?gt(Ye,je=+Yt):je},pt.stream=function(Yt){var ar=pt.rotate(),pr=St(Yt),br=(pt.rotate([0,0]),St(Yt));return pt.rotate(ar),pr.sphere=function(){br.polygonStart(),br.lineStart();for(var _r=0,Dr=2*y/je,an=0;_r<je;++_r,an-=Dr)br.point(t($t*r(an),Jt)*A,P($t*p(an))*A),br.point(t(lt*r(an-Dr/2),et)*A,P(lt*p(an-Dr/2))*A);br.lineEnd(),br.polygonEnd()},pr},pt.rotate([90,-40]).scale(91.7095).clipAngle(179.999)},m.geoGingeryRaw=nr,m.geoGinzburg4=function(){return v.geoProjection(he).scale(149.995)},m.geoGinzburg4Raw=he,m.geoGinzburg5=function(){return v.geoProjection(be).scale(153.93)},m.geoGinzburg5Raw=be,m.geoGinzburg6=function(){return v.geoProjection(Re).scale(130.945)},m.geoGinzburg6Raw=Re,m.geoGinzburg8=function(){return v.geoProjection(Ue).scale(131.747)},m.geoGinzburg8Raw=Ue,m.geoGinzburg9=function(){return v.geoProjection(Xe).scale(131.087)},m.geoGinzburg9Raw=Xe,m.geoGringorten=function(){return v.geoProjection(qe(st)).scale(239.75)},m.geoGringortenRaw=st,m.geoGuyou=function(){return v.geoProjection(qe(Pt)).scale(151.496)},m.geoGuyouRaw=Pt,m.geoHammer=function(){var je=2,Ye=v.geoProjectionMutator(B),et=Ye(je);return et.coefficient=function(lt){return arguments.length?Ye(je=+lt):je},et.scale(169.529)},m.geoHammerRaw=B,m.geoHammerRetroazimuthal=function(){var je=0,Ye=v.geoProjectionMutator(rt),et=Ye(je),lt=et.rotate,gt=et.stream,pt=v.geoCircle();return et.parallel=function(St){if(!arguments.length)return je*A;var Jt=et.rotate();return Ye(je=St*I).rotate(Jt)},et.rotate=function(St){return arguments.length?(lt.call(et,[St[0],St[1]-je*A]),pt.center([-St[0],-St[1]]),et):((St=lt.call(et))[1]+=je*A,St)},et.stream=function(St){return(St=gt(St)).sphere=function(){St.polygonStart();var Jt,$t=pt.radius(89.99)().coordinates[0],Yt=$t.length-1,ar=-1;for(St.lineStart();++ar<Yt;)St.point((Jt=$t[ar])[0],Jt[1]);for(St.lineEnd(),Yt=($t=pt.radius(90.01)().coordinates[0]).length-1,St.lineStart();--ar>=0;)St.point((Jt=$t[ar])[0],Jt[1]);St.lineEnd(),St.polygonEnd()},St},et.scale(79.4187).parallel(45).clipAngle(179.999)},m.geoHammerRetroazimuthalRaw=rt,m.geoHealpix=function(){var je=4,Ye=v.geoProjectionMutator(Lt),et=Ye(je),lt=et.stream;return et.lobes=function(gt){return arguments.length?Ye(je=+gt):je},et.stream=function(gt){var pt=et.rotate(),St=lt(gt),Jt=(et.rotate([0,0]),lt(gt));return et.rotate(pt),St.sphere=function(){var $t,Yt;v.geoStream(($t=180/je,Yt=[].concat(k.range(-180,180+$t/2,$t).map(Se),k.range(180,-180-$t/2,-$t).map(We)),{type:"Polygon",coordinates:[$t===180?Yt.map(nt):Yt]}),Jt)},St},et.scale(239.75)},m.geoHealpixRaw=Lt,m.geoHill=function(){var je=1,Ye=v.geoProjectionMutator(ft),et=Ye(je);return et.ratio=function(lt){return arguments.length?Ye(je=+lt):je},et.scale(167.774).center([0,18.67])},m.geoHillRaw=ft,m.geoHomolosine=function(){return v.geoProjection(Nt).scale(152.63)},m.geoHomolosineRaw=Nt,m.geoHufnagel=function(){var je=1,Ye=0,et=45*I,lt=2,gt=v.geoProjectionMutator(Zt),pt=gt(je,Ye,et,lt);return pt.a=function(St){return arguments.length?gt(je=+St,Ye,et,lt):je},pt.b=function(St){return arguments.length?gt(je,Ye=+St,et,lt):Ye},pt.psiMax=function(St){return arguments.length?gt(je,Ye,et=+St*I,lt):et*A},pt.ratio=function(St){return arguments.length?gt(je,Ye,et,lt=+St):lt},pt.scale(180.739)},m.geoHufnagelRaw=Zt,m.geoHyperelliptical=function(){var je=0,Ye=2.5,et=1.183136,lt=v.geoProjectionMutator(fr),gt=lt(je,Ye,et);return gt.alpha=function(pt){return arguments.length?lt(je=+pt,Ye,et):je},gt.k=function(pt){return arguments.length?lt(je,Ye=+pt,et):Ye},gt.gamma=function(pt){return arguments.length?lt(je,Ye,et=+pt):et},gt.scale(152.63)},m.geoHyperellipticalRaw=fr,m.geoInterrupt=Qt,m.geoInterruptedBoggs=function(){return Qt(ve,er).scale(160.857)},m.geoInterruptedHomolosine=function(){return Qt(Nt,cr).scale(152.63)},m.geoInterruptedMollweide=function(){return Qt(ie,gr).scale(169.529)},m.geoInterruptedMollweideHemispheres=function(){return Qt(ie,Mr).scale(169.529).rotate([20,0])},m.geoInterruptedSinuMollweide=function(){return Qt(Mt,Ir,N).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},m.geoInterruptedSinusoidal=function(){return Qt(ye,Fr).scale(152.63).rotate([-20,0])},m.geoKavrayskiy7=function(){return v.geoProjection(Yr).scale(158.837)},m.geoKavrayskiy7Raw=Yr,m.geoLagrange=function(){var je=.5,Ye=v.geoProjectionMutator(fn),et=Ye(je);return et.spacing=function(lt){return arguments.length?Ye(je=+lt):je},et.scale(124.75)},m.geoLagrangeRaw=fn,m.geoLarrivee=function(){return v.geoProjection(Rn).scale(97.2672)},m.geoLarriveeRaw=Rn,m.geoLaskowski=function(){return v.geoProjection(nn).scale(139.98)},m.geoLaskowskiRaw=nn,m.geoLittrow=function(){return v.geoProjection(yn).scale(144.049).clipAngle(89.999)},m.geoLittrowRaw=yn,m.geoLoximuthal=function(){return fe(bn).parallel(40).scale(158.837)},m.geoLoximuthalRaw=bn,m.geoMiller=function(){return v.geoProjection(ta).scale(108.318)},m.geoMillerRaw=ta,m.geoModifiedStereographic=wn,m.geoModifiedStereographicRaw=Br,m.geoModifiedStereographicAlaska=function(){return wn(rn,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)},m.geoModifiedStereographicGs48=function(){return wn(gn,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])},m.geoModifiedStereographicGs50=function(){return wn(Qr,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])},m.geoModifiedStereographicMiller=function(){return wn(un,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)},m.geoModifiedStereographicLee=function(){return wn(Gn,[165,10]).scale(250).clipAngle(130).center([-165,-10])},m.geoMollweide=function(){return v.geoProjection(ie).scale(169.529)},m.geoMollweideRaw=ie,m.geoMtFlatPolarParabolic=function(){return v.geoProjection(tr).scale(164.859)},m.geoMtFlatPolarParabolicRaw=tr,m.geoMtFlatPolarQuartic=function(){return v.geoProjection(mr).scale(188.209)},m.geoMtFlatPolarQuarticRaw=mr,m.geoMtFlatPolarSinusoidal=function(){return v.geoProjection(Ct).scale(166.518)},m.geoMtFlatPolarSinusoidalRaw=Ct,m.geoNaturalEarth2=function(){return v.geoProjection(or).scale(175.295)},m.geoNaturalEarth2Raw=or,m.geoNellHammer=function(){return v.geoProjection(hr).scale(152.63)},m.geoNellHammerRaw=hr,m.geoInterruptedQuarticAuthalic=function(){return Qt(B(1/0),Rr).rotate([20,0]).scale(152.63)},m.geoNicolosi=function(){return v.geoProjection(zr).scale(127.267)},m.geoNicolosiRaw=zr,m.geoPatterson=function(){return v.geoProjection(Or).scale(139.319)},m.geoPattersonRaw=Or,m.geoPolyconic=function(){return v.geoProjection(Ar).scale(103.74)},m.geoPolyconicRaw=Ar,m.geoPolyhedral=qr,m.geoPolyhedralButterfly=function(je){je=je||function(et){var lt=v.geoCentroid({type:"MultiPoint",coordinates:et});return v.geoGnomonic().scale(1).translate([0,0]).rotate([-lt[0],-lt[1]])};var Ye=vn.map(function(et){return{face:et,project:je(et)}});return[-1,0,0,1,0,1,4,5].forEach(function(et,lt){var gt=Ye[et];gt&&(gt.children||(gt.children=[])).push(Ye[lt])}),qr(Ye[0],function(et,lt){return Ye[et<-y/2?lt<0?6:4:et<0?lt<0?2:0:et<y/2?lt<0?3:1:lt<0?7:5]}).angle(-30).scale(101.858).center([0,45])},m.geoPolyhedralCollignon=function(je){je=je||function(et){var lt=v.geoCentroid({type:"MultiPoint",coordinates:et});return v.geoProjection(Tn).translate([0,0]).scale(1).rotate(lt[1]>0?[-lt[0],0]:[180-lt[0],180])};var Ye=vn.map(function(et){return{face:et,project:je(et)}});return[-1,0,0,1,0,1,4,5].forEach(function(et,lt){var gt=Ye[et];gt&&(gt.children||(gt.children=[])).push(Ye[lt])}),qr(Ye[0],function(et,lt){return Ye[et<-y/2?lt<0?6:4:et<0?lt<0?2:0:et<y/2?lt<0?3:1:lt<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])},m.geoPolyhedralWaterman=function(je){je=je||function(pt){var St=pt.length===6?v.geoCentroid({type:"MultiPoint",coordinates:pt}):pt[0];return v.geoGnomonic().scale(1).translate([0,0]).rotate([-St[0],-St[1]])};var Ye=vn.map(function(pt){for(var St,Jt=pt.map(Zn),$t=Jt.length,Yt=Jt[$t-1],ar=[],pr=0;pr<$t;++pr)St=Jt[pr],ar.push(On([.9486832980505138*Yt[0]+.31622776601683794*St[0],.9486832980505138*Yt[1]+.31622776601683794*St[1],.9486832980505138*Yt[2]+.31622776601683794*St[2]]),On([.9486832980505138*St[0]+.31622776601683794*Yt[0],.9486832980505138*St[1]+.31622776601683794*Yt[1],.9486832980505138*St[2]+.31622776601683794*Yt[2]])),Yt=St;return ar}),et=[],lt=[-1,0,0,1,0,1,4,5];Ye.forEach(function(pt,St){for(var Jt,$t,Yt=vn[St],ar=Yt.length,pr=et[St]=[],br=0;br<ar;++br)Ye.push([Yt[br],pt[(2*br+2)%(2*ar)],pt[(2*br+1)%(2*ar)]]),lt.push(St),pr.push((Jt=Zn(pt[(2*br+2)%(2*ar)]),$t=Zn(pt[(2*br+1)%(2*ar)]),[Jt[1]*$t[2]-Jt[2]*$t[1],Jt[2]*$t[0]-Jt[0]*$t[2],Jt[0]*$t[1]-Jt[1]*$t[0]]))});var gt=Ye.map(function(pt){return{project:je(pt),face:pt}});return lt.forEach(function(pt,St){var Jt=gt[pt];Jt&&(Jt.children||(Jt.children=[])).push(gt[St])}),qr(gt[0],function(pt,St){var Jt=r(St),$t=[Jt*r(pt),Jt*p(pt),p(St)],Yt=pt<-y/2?St<0?6:4:pt<0?St<0?2:0:pt<y/2?St<0?3:1:St<0?7:5,ar=et[Yt];return gt[Cn(ar[0],$t)<0?8+3*Yt:Cn(ar[1],$t)<0?8+3*Yt+1:Cn(ar[2],$t)<0?8+3*Yt+2:Yt]}).angle(-30).scale(110.625).center([0,45])},m.geoProject=function(je,Ye){var et,lt=Ye.stream;if(!lt)throw new Error("invalid projection");switch(je&&je.type){case"Feature":et=Sn;break;case"FeatureCollection":et=Ma;break;default:et=Qn}return et(je,lt)},m.geoGringortenQuincuncial=function(){return Wa(st).scale(176.423)},m.geoPeirceQuincuncial=Za,m.geoPierceQuincuncial=Za,m.geoQuantize=function(je,Ye){if(!(0<=(Ye=+Ye)&&Ye<=20))throw new Error("invalid digits");function et(Yt){var ar=Yt.length,pr=2,br=new Array(ar);for(br[0]=+Yt[0].toFixed(Ye),br[1]=+Yt[1].toFixed(Ye);pr<ar;)br[pr]=Yt[pr],++pr;return br}function lt(Yt){return Yt.map(et)}function gt(Yt){for(var ar=et(Yt[0]),pr=[ar],br=1;br<Yt.length;br++){var _r=et(Yt[br]);(_r.length>2||_r[0]!=ar[0]||_r[1]!=ar[1])&&(pr.push(_r),ar=_r)}return pr.length===1&&Yt.length>1&&pr.push(et(Yt[Yt.length-1])),pr}function pt(Yt){return Yt.map(gt)}function St(Yt){if(Yt==null)return Yt;var ar;switch(Yt.type){case"GeometryCollection":ar={type:"GeometryCollection",geometries:Yt.geometries.map(St)};break;case"Point":ar={type:"Point",coordinates:et(Yt.coordinates)};break;case"MultiPoint":ar={type:Yt.type,coordinates:lt(Yt.coordinates)};break;case"LineString":ar={type:Yt.type,coordinates:gt(Yt.coordinates)};break;case"MultiLineString":case"Polygon":ar={type:Yt.type,coordinates:pt(Yt.coordinates)};break;case"MultiPolygon":ar={type:"MultiPolygon",coordinates:Yt.coordinates.map(pt)};break;default:return Yt}return Yt.bbox!=null&&(ar.bbox=Yt.bbox),ar}function Jt(Yt){var ar={type:"Feature",properties:Yt.properties,geometry:St(Yt.geometry)};return Yt.id!=null&&(ar.id=Yt.id),Yt.bbox!=null&&(ar.bbox=Yt.bbox),ar}if(je!=null)switch(je.type){case"Feature":return Jt(je);case"FeatureCollection":var $t={type:"FeatureCollection",features:je.features.map(Jt)};return je.bbox!=null&&($t.bbox=je.bbox),$t;default:return St(je)}return je},m.geoQuincuncial=Wa,m.geoRectangularPolyconic=function(){return fe(Ki).scale(131.215)},m.geoRectangularPolyconicRaw=Ki,m.geoRobinson=function(){return v.geoProjection(ho).scale(152.63)},m.geoRobinsonRaw=ho,m.geoSatellite=function(){var je=2,Ye=0,et=v.geoProjectionMutator(vo),lt=et(je,Ye);return lt.distance=function(gt){return arguments.length?et(je=+gt,Ye):je},lt.tilt=function(gt){return arguments.length?et(je,Ye=gt*I):Ye*A},lt.scale(432.147).clipAngle(S(1/je)*A-1e-6)},m.geoSatelliteRaw=vo,m.geoSinuMollweide=function(){return v.geoProjection(Mt).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},m.geoSinuMollweideRaw=Mt,m.geoSinusoidal=function(){return v.geoProjection(ye).scale(152.63)},m.geoSinusoidalRaw=ye,m.geoStitch=function(je){if(je==null)return je;switch(je.type){case"Feature":return Xa(je);case"FeatureCollection":var Ye={type:"FeatureCollection",features:je.features.map(Xa)};return je.bbox!=null&&(Ye.bbox=je.bbox),Ye;default:return ys(je)}},m.geoTimes=function(){return v.geoProjection(as).scale(146.153)},m.geoTimesRaw=as,m.geoTwoPointAzimuthal=As,m.geoTwoPointAzimuthalRaw=Is,m.geoTwoPointAzimuthalUsa=function(){return As([-158,21.5],[-77,39]).clipAngle(60).scale(400)},m.geoTwoPointEquidistant=Co,m.geoTwoPointEquidistantRaw=Os,m.geoTwoPointEquidistantUsa=function(){return Co([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)},m.geoVanDerGrinten=function(){return v.geoProjection(Po).scale(79.4183)},m.geoVanDerGrintenRaw=Po,m.geoVanDerGrinten2=function(){return v.geoProjection(qo).scale(79.4183)},m.geoVanDerGrinten2Raw=qo,m.geoVanDerGrinten3=function(){return v.geoProjection(Go).scale(79.4183)},m.geoVanDerGrinten3Raw=Go,m.geoVanDerGrinten4=function(){return v.geoProjection(Yo).scale(127.16)},m.geoVanDerGrinten4Raw=Yo,m.geoWagner=xo,m.geoWagner7=function(){return xo().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)},m.geoWagnerRaw=is,m.geoWagner4=function(){return v.geoProjection(Wo).scale(176.84)},m.geoWagner4Raw=Wo,m.geoWagner6=function(){return v.geoProjection(bs).scale(152.63)},m.geoWagner6Raw=bs,m.geoWiechel=function(){return v.geoProjection(Io).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)},m.geoWiechelRaw=Io,m.geoWinkel3=function(){return v.geoProjection(Ga).scale(158.837)},m.geoWinkel3Raw=Ga,Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-array":107,"d3-geo":114}],114:[function(g,Q,X){(function(m,v){typeof X=="object"&&Q!==void 0?v(X,g("d3-array")):v((m=m||self).d3=m.d3||{},m.d3)})(this,function(m,v){function k(){return new x}function x(){this.reset()}x.prototype={constructor:x,reset:function(){this.s=this.t=0},add:function(ht){t(e,ht,this.t),t(this,e.s,this.s),this.s?this.t+=e.t:this.s=e.t},valueOf:function(){return this.s}};var e=new x;function t(ht,Dt,sr){var Ht=ht.s=Dt+sr,lr=Ht-Dt,Pr=Ht-lr;ht.t=Dt-Pr+(sr-lr)}var r=1e-6,l=Math.PI,n=l/2,d=l/4,u=2*l,o=180/l,h=l/180,s=Math.abs,a=Math.atan,p=Math.atan2,c=Math.cos,i=Math.ceil,y=Math.exp,f=Math.log,w=Math.pow,b=Math.sin,_=Math.sign||function(ht){return ht>0?1:ht<0?-1:0},T=Math.sqrt,L=Math.tan;function A(ht){return ht>1?0:ht<-1?l:Math.acos(ht)}function I(ht){return ht>1?n:ht<-1?-n:Math.asin(ht)}function P(ht){return(ht=b(ht/2))*ht}function S(){}function E(ht,Dt){ht&&D.hasOwnProperty(ht.type)&&D[ht.type](ht,Dt)}var z={Feature:function(ht,Dt){E(ht.geometry,Dt)},FeatureCollection:function(ht,Dt){for(var sr=ht.features,Ht=-1,lr=sr.length;++Ht<lr;)E(sr[Ht].geometry,Dt)}},D={Sphere:function(ht,Dt){Dt.sphere()},Point:function(ht,Dt){ht=ht.coordinates,Dt.point(ht[0],ht[1],ht[2])},MultiPoint:function(ht,Dt){for(var sr=ht.coordinates,Ht=-1,lr=sr.length;++Ht<lr;)ht=sr[Ht],Dt.point(ht[0],ht[1],ht[2])},LineString:function(ht,Dt){U(ht.coordinates,Dt,0)},MultiLineString:function(ht,Dt){for(var sr=ht.coordinates,Ht=-1,lr=sr.length;++Ht<lr;)U(sr[Ht],Dt,0)},Polygon:function(ht,Dt){H(ht.coordinates,Dt)},MultiPolygon:function(ht,Dt){for(var sr=ht.coordinates,Ht=-1,lr=sr.length;++Ht<lr;)H(sr[Ht],Dt)},GeometryCollection:function(ht,Dt){for(var sr=ht.geometries,Ht=-1,lr=sr.length;++Ht<lr;)E(sr[Ht],Dt)}};function U(ht,Dt,sr){var Ht,lr=-1,Pr=ht.length-sr;for(Dt.lineStart();++lr<Pr;)Ht=ht[lr],Dt.point(Ht[0],Ht[1],Ht[2]);Dt.lineEnd()}function H(ht,Dt){var sr=-1,Ht=ht.length;for(Dt.polygonStart();++sr<Ht;)U(ht[sr],Dt,1);Dt.polygonEnd()}function Y(ht,Dt){ht&&z.hasOwnProperty(ht.type)?z[ht.type](ht,Dt):E(ht,Dt)}var J,W,Z,re,V,B=k(),j=k(),ee={point:S,lineStart:S,lineEnd:S,polygonStart:function(){B.reset(),ee.lineStart=N,ee.lineEnd=$},polygonEnd:function(){var ht=+B;j.add(ht<0?u+ht:ht),this.lineStart=this.lineEnd=this.point=S},sphere:function(){j.add(u)}};function N(){ee.point=K}function $(){te(J,W)}function K(ht,Dt){ee.point=te,J=ht,W=Dt,Z=ht*=h,re=c(Dt=(Dt*=h)/2+d),V=b(Dt)}function te(ht,Dt){var sr=(ht*=h)-Z,Ht=sr>=0?1:-1,lr=Ht*sr,Pr=c(Dt=(Dt*=h)/2+d),Nr=b(Dt),Zr=V*Nr,ln=re*Pr+Zr*c(lr),on=Zr*Ht*b(lr);B.add(p(on,ln)),Z=ht,re=Pr,V=Nr}function ie(ht){return[p(ht[1],ht[0]),I(ht[2])]}function le(ht){var Dt=ht[0],sr=ht[1],Ht=c(sr);return[Ht*c(Dt),Ht*b(Dt),b(sr)]}function se(ht,Dt){return ht[0]*Dt[0]+ht[1]*Dt[1]+ht[2]*Dt[2]}function ve(ht,Dt){return[ht[1]*Dt[2]-ht[2]*Dt[1],ht[2]*Dt[0]-ht[0]*Dt[2],ht[0]*Dt[1]-ht[1]*Dt[0]]}function fe(ht,Dt){ht[0]+=Dt[0],ht[1]+=Dt[1],ht[2]+=Dt[2]}function ye(ht,Dt){return[ht[0]*Dt,ht[1]*Dt,ht[2]*Dt]}function Ae(ht){var Dt=T(ht[0]*ht[0]+ht[1]*ht[1]+ht[2]*ht[2]);ht[0]/=Dt,ht[1]/=Dt,ht[2]/=Dt}var pe,ge,we,oe,de,Te,Ee,Me,De,Ie,Oe,Ze,Fe,Pe,ze,Ge,$e,ot,vt,bt,yt,tt,Ke,mt,Ft,Vt,Xt=k(),Gt={point:nr,lineStart:Be,lineEnd:He,polygonStart:function(){Gt.point=he,Gt.lineStart=be,Gt.lineEnd=Re,Xt.reset(),ee.polygonStart()},polygonEnd:function(){ee.polygonEnd(),Gt.point=nr,Gt.lineStart=Be,Gt.lineEnd=He,B<0?(pe=-(we=180),ge=-(oe=90)):Xt>r?oe=90:Xt<-r&&(ge=-90),Ie[0]=pe,Ie[1]=we},sphere:function(){pe=-(we=180),ge=-(oe=90)}};function nr(ht,Dt){De.push(Ie=[pe=ht,we=ht]),Dt<ge&&(ge=Dt),Dt>oe&&(oe=Dt)}function It(ht,Dt){var sr=le([ht*h,Dt*h]);if(Me){var Ht=ve(Me,sr),lr=ve([Ht[1],-Ht[0],0],Ht);Ae(lr),lr=ie(lr);var Pr,Nr=ht-de,Zr=Nr>0?1:-1,ln=lr[0]*o*Zr,on=s(Nr)>180;on^(Zr*de<ln&&ln<Zr*ht)?(Pr=lr[1]*o)>oe&&(oe=Pr):on^(Zr*de<(ln=(ln+360)%360-180)&&ln<Zr*ht)?(Pr=-lr[1]*o)<ge&&(ge=Pr):(Dt<ge&&(ge=Dt),Dt>oe&&(oe=Dt)),on?ht<de?Ue(pe,ht)>Ue(pe,we)&&(we=ht):Ue(ht,we)>Ue(pe,we)&&(pe=ht):we>=pe?(ht<pe&&(pe=ht),ht>we&&(we=ht)):ht>de?Ue(pe,ht)>Ue(pe,we)&&(we=ht):Ue(ht,we)>Ue(pe,we)&&(pe=ht)}else De.push(Ie=[pe=ht,we=ht]);Dt<ge&&(ge=Dt),Dt>oe&&(oe=Dt),Me=sr,de=ht}function Be(){Gt.point=It}function He(){Ie[0]=pe,Ie[1]=we,Gt.point=nr,Me=null}function he(ht,Dt){if(Me){var sr=ht-de;Xt.add(s(sr)>180?sr+(sr>0?360:-360):sr)}else Te=ht,Ee=Dt;ee.point(ht,Dt),It(ht,Dt)}function be(){ee.lineStart()}function Re(){he(Te,Ee),ee.lineEnd(),s(Xt)>r&&(pe=-(we=180)),Ie[0]=pe,Ie[1]=we,Me=null}function Ue(ht,Dt){return(Dt-=ht)<0?Dt+360:Dt}function Xe(ht,Dt){return ht[0]-Dt[0]}function qe(ht,Dt){return ht[0]<=ht[1]?ht[0]<=Dt&&Dt<=ht[1]:Dt<ht[0]||ht[1]<Dt}var st={sphere:S,point:it,lineStart:Pt,lineEnd:Bt,polygonStart:function(){st.lineStart=wt,st.lineEnd=Lt},polygonEnd:function(){st.lineStart=Pt,st.lineEnd=Bt}};function it(ht,Dt){ht*=h;var sr=c(Dt*=h);Tt(sr*c(ht),sr*b(ht),b(Dt))}function Tt(ht,Dt,sr){++Oe,Fe+=(ht-Fe)/Oe,Pe+=(Dt-Pe)/Oe,ze+=(sr-ze)/Oe}function Pt(){st.point=rt}function rt(ht,Dt){ht*=h;var sr=c(Dt*=h);mt=sr*c(ht),Ft=sr*b(ht),Vt=b(Dt),st.point=ut,Tt(mt,Ft,Vt)}function ut(ht,Dt){ht*=h;var sr=c(Dt*=h),Ht=sr*c(ht),lr=sr*b(ht),Pr=b(Dt),Nr=p(T((Nr=Ft*Pr-Vt*lr)*Nr+(Nr=Vt*Ht-mt*Pr)*Nr+(Nr=mt*lr-Ft*Ht)*Nr),mt*Ht+Ft*lr+Vt*Pr);Ze+=Nr,Ge+=Nr*(mt+(mt=Ht)),$e+=Nr*(Ft+(Ft=lr)),ot+=Nr*(Vt+(Vt=Pr)),Tt(mt,Ft,Vt)}function Bt(){st.point=it}function wt(){st.point=Se}function Lt(){We(tt,Ke),st.point=it}function Se(ht,Dt){tt=ht,Ke=Dt,ht*=h,Dt*=h,st.point=We;var sr=c(Dt);mt=sr*c(ht),Ft=sr*b(ht),Vt=b(Dt),Tt(mt,Ft,Vt)}function We(ht,Dt){ht*=h;var sr=c(Dt*=h),Ht=sr*c(ht),lr=sr*b(ht),Pr=b(Dt),Nr=Ft*Pr-Vt*lr,Zr=Vt*Ht-mt*Pr,ln=mt*lr-Ft*Ht,on=T(Nr*Nr+Zr*Zr+ln*ln),mn=I(on),kn=on&&-mn/on;vt+=kn*Nr,bt+=kn*Zr,yt+=kn*ln,Ze+=mn,Ge+=mn*(mt+(mt=Ht)),$e+=mn*(Ft+(Ft=lr)),ot+=mn*(Vt+(Vt=Pr)),Tt(mt,Ft,Vt)}function nt(ht){return function(){return ht}}function ft(ht,Dt){function sr(Ht,lr){return Ht=ht(Ht,lr),Dt(Ht[0],Ht[1])}return ht.invert&&Dt.invert&&(sr.invert=function(Ht,lr){return(Ht=Dt.invert(Ht,lr))&&ht.invert(Ht[0],Ht[1])}),sr}function Mt(ht,Dt){return[s(ht)>l?ht+Math.round(-ht/u)*u:ht,Dt]}function Nt(ht,Dt,sr){return(ht%=u)?Dt||sr?ft(Ut(ht),fr(Dt,sr)):Ut(ht):Dt||sr?fr(Dt,sr):Mt}function Zt(ht){return function(Dt,sr){return[(Dt+=ht)>l?Dt-u:Dt<-l?Dt+u:Dt,sr]}}function Ut(ht){var Dt=Zt(ht);return Dt.invert=Zt(-ht),Dt}function fr(ht,Dt){var sr=c(ht),Ht=b(ht),lr=c(Dt),Pr=b(Dt);function Nr(Zr,ln){var on=c(ln),mn=c(Zr)*on,kn=b(Zr)*on,cn=b(ln),Mn=cn*sr+mn*Ht;return[p(kn*lr-Mn*Pr,mn*sr-cn*Ht),I(Mn*lr+kn*Pr)]}return Nr.invert=function(Zr,ln){var on=c(ln),mn=c(Zr)*on,kn=b(Zr)*on,cn=b(ln),Mn=cn*lr-kn*Pr;return[p(kn*lr+cn*Pr,mn*sr+Mn*Ht),I(Mn*sr-mn*Ht)]},Nr}function Tr(ht){function Dt(sr){return(sr=ht(sr[0]*h,sr[1]*h))[0]*=o,sr[1]*=o,sr}return ht=Nt(ht[0]*h,ht[1]*h,ht.length>2?ht[2]*h:0),Dt.invert=function(sr){return(sr=ht.invert(sr[0]*h,sr[1]*h))[0]*=o,sr[1]*=o,sr},Dt}function ur(ht,Dt,sr,Ht,lr,Pr){if(sr){var Nr=c(Dt),Zr=b(Dt),ln=Ht*sr;lr==null?(lr=Dt+Ht*u,Pr=Dt-ln/2):(lr=Kt(Nr,lr),Pr=Kt(Nr,Pr),(Ht>0?lr<Pr:lr>Pr)&&(lr+=Ht*u));for(var on,mn=lr;Ht>0?mn>Pr:mn<Pr;mn-=ln)on=ie([Nr,-Zr*c(mn),-Zr*b(mn)]),ht.point(on[0],on[1])}}function Kt(ht,Dt){(Dt=le(Dt))[0]-=ht,Ae(Dt);var sr=A(-Dt[1]);return((-Dt[2]<0?-sr:sr)+u-r)%u}function Qt(){var ht,Dt=[];return{point:function(sr,Ht,lr){ht.push([sr,Ht,lr])},lineStart:function(){Dt.push(ht=[])},lineEnd:S,rejoin:function(){Dt.length>1&&Dt.push(Dt.pop().concat(Dt.shift()))},result:function(){var sr=Dt;return Dt=[],ht=null,sr}}}function er(ht,Dt){return s(ht[0]-Dt[0])<r&&s(ht[1]-Dt[1])<r}function cr(ht,Dt,sr,Ht){this.x=ht,this.z=Dt,this.o=sr,this.e=Ht,this.v=!1,this.n=this.p=null}function gr(ht,Dt,sr,Ht,lr){var Pr,Nr,Zr=[],ln=[];if(ht.forEach(function(Fn){if(!((Hn=Fn.length-1)<=0)){var Hn,sa,Xr=Fn[0],na=Fn[Hn];if(er(Xr,na)){if(!Xr[2]&&!na[2]){for(lr.lineStart(),Pr=0;Pr<Hn;++Pr)lr.point((Xr=Fn[Pr])[0],Xr[1]);return void lr.lineEnd()}na[0]+=2*r}Zr.push(sa=new cr(Xr,Fn,null,!0)),ln.push(sa.o=new cr(Xr,null,sa,!1)),Zr.push(sa=new cr(na,Fn,null,!1)),ln.push(sa.o=new cr(na,null,sa,!0))}}),Zr.length){for(ln.sort(Dt),Mr(Zr),Mr(ln),Pr=0,Nr=ln.length;Pr<Nr;++Pr)ln[Pr].e=sr=!sr;for(var on,mn,kn=Zr[0];;){for(var cn=kn,Mn=!0;cn.v;)if((cn=cn.n)===kn)return;on=cn.z,lr.lineStart();do{if(cn.v=cn.o.v=!0,cn.e){if(Mn)for(Pr=0,Nr=on.length;Pr<Nr;++Pr)lr.point((mn=on[Pr])[0],mn[1]);else Ht(cn.x,cn.n.x,1,lr);cn=cn.n}else{if(Mn)for(on=cn.p.z,Pr=on.length-1;Pr>=0;--Pr)lr.point((mn=on[Pr])[0],mn[1]);else Ht(cn.x,cn.p.x,-1,lr);cn=cn.p}on=(cn=cn.o).z,Mn=!Mn}while(!cn.v);lr.lineEnd()}}}function Mr(ht){if(Dt=ht.length){for(var Dt,sr,Ht=0,lr=ht[0];++Ht<Dt;)lr.n=sr=ht[Ht],sr.p=lr,lr=sr;lr.n=sr=ht[0],sr.p=lr}}Mt.invert=Mt;var Ir=k();function Fr(ht){return s(ht[0])<=l?ht[0]:_(ht[0])*((s(ht[0])+l)%u-l)}function Yr(ht,Dt){var sr=Fr(Dt),Ht=Dt[1],lr=b(Ht),Pr=[b(sr),-c(sr),0],Nr=0,Zr=0;Ir.reset(),lr===1?Ht=n+r:lr===-1&&(Ht=-n-r);for(var ln=0,on=ht.length;ln<on;++ln)if(kn=(mn=ht[ln]).length)for(var mn,kn,cn=mn[kn-1],Mn=Fr(cn),Fn=cn[1]/2+d,Hn=b(Fn),sa=c(Fn),Xr=0;Xr<kn;++Xr,Mn=In,Hn=ra,sa=ka,cn=na){var na=mn[Xr],In=Fr(na),jn=na[1]/2+d,ra=b(jn),ka=c(jn),Pa=In-Mn,En=Pa>=0?1:-1,Ra=En*Pa,Ca=Ra>l,ga=Hn*ra;if(Ir.add(p(ga*En*b(Ra),sa*ka+ga*c(Ra))),Nr+=Ca?Pa+En*u:Pa,Ca^Mn>=sr^In>=sr){var Fa=ve(le(cn),le(na));Ae(Fa);var Ea=ve(Pr,Fa);Ae(Ea);var ti=(Ca^Pa>=0?-1:1)*I(Ea[2]);(Ht>ti||Ht===ti&&(Fa[0]||Fa[1]))&&(Zr+=Ca^Pa>=0?1:-1)}}return(Nr<-r||Nr<r&&Ir<-r)^1&Zr}function fn(ht,Dt,sr,Ht){return function(lr){var Pr,Nr,Zr,ln=Dt(lr),on=Qt(),mn=Dt(on),kn=!1,cn={point:Mn,lineStart:Hn,lineEnd:sa,polygonStart:function(){cn.point=Xr,cn.lineStart=na,cn.lineEnd=In,Nr=[],Pr=[]},polygonEnd:function(){cn.point=Mn,cn.lineStart=Hn,cn.lineEnd=sa,Nr=v.merge(Nr);var jn=Yr(Pr,Ht);Nr.length?(kn||(lr.polygonStart(),kn=!0),gr(Nr,Rn,jn,sr,lr)):jn&&(kn||(lr.polygonStart(),kn=!0),lr.lineStart(),sr(null,null,1,lr),lr.lineEnd()),kn&&(lr.polygonEnd(),kn=!1),Nr=Pr=null},sphere:function(){lr.polygonStart(),lr.lineStart(),sr(null,null,1,lr),lr.lineEnd(),lr.polygonEnd()}};function Mn(jn,ra){ht(jn,ra)&&lr.point(jn,ra)}function Fn(jn,ra){ln.point(jn,ra)}function Hn(){cn.point=Fn,ln.lineStart()}function sa(){cn.point=Mn,ln.lineEnd()}function Xr(jn,ra){Zr.push([jn,ra]),mn.point(jn,ra)}function na(){mn.lineStart(),Zr=[]}function In(){Xr(Zr[0][0],Zr[0][1]),mn.lineEnd();var jn,ra,ka,Pa,En=mn.clean(),Ra=on.result(),Ca=Ra.length;if(Zr.pop(),Pr.push(Zr),Zr=null,Ca)if(1&En){if((ra=(ka=Ra[0]).length-1)>0){for(kn||(lr.polygonStart(),kn=!0),lr.lineStart(),jn=0;jn<ra;++jn)lr.point((Pa=ka[jn])[0],Pa[1]);lr.lineEnd()}}else Ca>1&&2&En&&Ra.push(Ra.pop().concat(Ra.shift())),Nr.push(Ra.filter(en))}return cn}}function en(ht){return ht.length>1}function Rn(ht,Dt){return((ht=ht.x)[0]<0?ht[1]-n-r:n-ht[1])-((Dt=Dt.x)[0]<0?Dt[1]-n-r:n-Dt[1])}var nn=fn(function(){return!0},function(ht){var Dt,sr=NaN,Ht=NaN,lr=NaN;return{lineStart:function(){ht.lineStart(),Dt=1},point:function(Pr,Nr){var Zr=Pr>0?l:-l,ln=s(Pr-sr);s(ln-l)<r?(ht.point(sr,Ht=(Ht+Nr)/2>0?n:-n),ht.point(lr,Ht),ht.lineEnd(),ht.lineStart(),ht.point(Zr,Ht),ht.point(Pr,Ht),Dt=0):lr!==Zr&&ln>=l&&(s(sr-lr)<r&&(sr-=lr*r),s(Pr-Zr)<r&&(Pr-=Zr*r),Ht=function(on,mn,kn,cn){var Mn,Fn,Hn=b(on-kn);return s(Hn)>r?a((b(mn)*(Fn=c(cn))*b(kn)-b(cn)*(Mn=c(mn))*b(on))/(Mn*Fn*Hn)):(mn+cn)/2}(sr,Ht,Pr,Nr),ht.point(lr,Ht),ht.lineEnd(),ht.lineStart(),ht.point(Zr,Ht),Dt=0),ht.point(sr=Pr,Ht=Nr),lr=Zr},lineEnd:function(){ht.lineEnd(),sr=Ht=NaN},clean:function(){return 2-Dt}}},function(ht,Dt,sr,Ht){var lr;if(ht==null)lr=sr*n,Ht.point(-l,lr),Ht.point(0,lr),Ht.point(l,lr),Ht.point(l,0),Ht.point(l,-lr),Ht.point(0,-lr),Ht.point(-l,-lr),Ht.point(-l,0),Ht.point(-l,lr);else if(s(ht[0]-Dt[0])>r){var Pr=ht[0]<Dt[0]?l:-l;lr=sr*Pr/2,Ht.point(-Pr,lr),Ht.point(0,lr),Ht.point(Pr,lr)}else Ht.point(Dt[0],Dt[1])},[-l,-n]);function yn(ht){var Dt=c(ht),sr=6*h,Ht=Dt>0,lr=s(Dt)>r;function Pr(ln,on){return c(ln)*c(on)>Dt}function Nr(ln,on,mn){var kn=[1,0,0],cn=ve(le(ln),le(on)),Mn=se(cn,cn),Fn=cn[0],Hn=Mn-Fn*Fn;if(!Hn)return!mn&&ln;var sa=Dt*Mn/Hn,Xr=-Dt*Fn/Hn,na=ve(kn,cn),In=ye(kn,sa);fe(In,ye(cn,Xr));var jn=na,ra=se(In,jn),ka=se(jn,jn),Pa=ra*ra-ka*(se(In,In)-1);if(!(Pa<0)){var En=T(Pa),Ra=ye(jn,(-ra-En)/ka);if(fe(Ra,In),Ra=ie(Ra),!mn)return Ra;var Ca,ga=ln[0],Fa=on[0],Ea=ln[1],ti=on[1];Fa<ga&&(Ca=ga,ga=Fa,Fa=Ca);var aa=Fa-ga,Ja=s(aa-l)<r;if(!Ja&&ti<Ea&&(Ca=Ea,Ea=ti,ti=Ca),Ja||aa<r?Ja?Ea+ti>0^Ra[1]<(s(Ra[0]-ga)<r?Ea:ti):Ea<=Ra[1]&&Ra[1]<=ti:aa>l^(ga<=Ra[0]&&Ra[0]<=Fa)){var ji=ye(jn,(-ra+En)/ka);return fe(ji,In),[Ra,ie(ji)]}}}function Zr(ln,on){var mn=Ht?ht:l-ht,kn=0;return ln<-mn?kn|=1:ln>mn&&(kn|=2),on<-mn?kn|=4:on>mn&&(kn|=8),kn}return fn(Pr,function(ln){var on,mn,kn,cn,Mn;return{lineStart:function(){cn=kn=!1,Mn=1},point:function(Fn,Hn){var sa,Xr=[Fn,Hn],na=Pr(Fn,Hn),In=Ht?na?0:Zr(Fn,Hn):na?Zr(Fn+(Fn<0?l:-l),Hn):0;if(!on&&(cn=kn=na)&&ln.lineStart(),na!==kn&&(!(sa=Nr(on,Xr))||er(on,sa)||er(Xr,sa))&&(Xr[2]=1),na!==kn)Mn=0,na?(ln.lineStart(),sa=Nr(Xr,on),ln.point(sa[0],sa[1])):(sa=Nr(on,Xr),ln.point(sa[0],sa[1],2),ln.lineEnd()),on=sa;else if(lr&&on&&Ht^na){var jn;In&mn||!(jn=Nr(Xr,on,!0))||(Mn=0,Ht?(ln.lineStart(),ln.point(jn[0][0],jn[0][1]),ln.point(jn[1][0],jn[1][1]),ln.lineEnd()):(ln.point(jn[1][0],jn[1][1]),ln.lineEnd(),ln.lineStart(),ln.point(jn[0][0],jn[0][1],3)))}!na||on&&er(on,Xr)||ln.point(Xr[0],Xr[1]),on=Xr,kn=na,mn=In},lineEnd:function(){kn&&ln.lineEnd(),on=null},clean:function(){return Mn|(cn&&kn)<<1}}},function(ln,on,mn,kn){ur(kn,ht,sr,mn,ln,on)},Ht?[0,-ht]:[-l,ht-l])}function bn(ht,Dt,sr,Ht){function lr(on,mn){return ht<=on&&on<=sr&&Dt<=mn&&mn<=Ht}function Pr(on,mn,kn,cn){var Mn=0,Fn=0;if(on==null||(Mn=Nr(on,kn))!==(Fn=Nr(mn,kn))||ln(on,mn)<0^kn>0)do cn.point(Mn===0||Mn===3?ht:sr,Mn>1?Ht:Dt);while((Mn=(Mn+kn+4)%4)!==Fn);else cn.point(mn[0],mn[1])}function Nr(on,mn){return s(on[0]-ht)<r?mn>0?0:3:s(on[0]-sr)<r?mn>0?2:1:s(on[1]-Dt)<r?mn>0?1:0:mn>0?3:2}function Zr(on,mn){return ln(on.x,mn.x)}function ln(on,mn){var kn=Nr(on,1),cn=Nr(mn,1);return kn!==cn?kn-cn:kn===0?mn[1]-on[1]:kn===1?on[0]-mn[0]:kn===2?on[1]-mn[1]:mn[0]-on[0]}return function(on){var mn,kn,cn,Mn,Fn,Hn,sa,Xr,na,In,jn,ra=on,ka=Qt(),Pa={point:En,lineStart:function(){Pa.point=Ra,kn&&kn.push(cn=[]),In=!0,na=!1,sa=Xr=NaN},lineEnd:function(){mn&&(Ra(Mn,Fn),Hn&&na&&ka.rejoin(),mn.push(ka.result())),Pa.point=En,na&&ra.lineEnd()},polygonStart:function(){ra=ka,mn=[],kn=[],jn=!0},polygonEnd:function(){var Ca=function(){for(var Ea=0,ti=0,aa=kn.length;ti<aa;++ti)for(var Ja,ji,Qo=kn[ti],Fo=1,bo=Qo.length,xa=Qo[0],gi=xa[0],_o=xa[1];Fo<bo;++Fo)Ja=gi,ji=_o,xa=Qo[Fo],gi=xa[0],_o=xa[1],ji<=Ht?_o>Ht&&(gi-Ja)*(Ht-ji)>(_o-ji)*(ht-Ja)&&++Ea:_o<=Ht&&(gi-Ja)*(Ht-ji)<(_o-ji)*(ht-Ja)&&--Ea;return Ea}(),ga=jn&&Ca,Fa=(mn=v.merge(mn)).length;(ga||Fa)&&(on.polygonStart(),ga&&(on.lineStart(),Pr(null,null,1,on),on.lineEnd()),Fa&&gr(mn,Zr,Ca,Pr,on),on.polygonEnd()),ra=on,mn=kn=cn=null}};function En(Ca,ga){lr(Ca,ga)&&ra.point(Ca,ga)}function Ra(Ca,ga){var Fa=lr(Ca,ga);if(kn&&cn.push([Ca,ga]),In)Mn=Ca,Fn=ga,Hn=Fa,In=!1,Fa&&(ra.lineStart(),ra.point(Ca,ga));else if(Fa&&na)ra.point(Ca,ga);else{var Ea=[sa=Math.max(-1e9,Math.min(1e9,sa)),Xr=Math.max(-1e9,Math.min(1e9,Xr))],ti=[Ca=Math.max(-1e9,Math.min(1e9,Ca)),ga=Math.max(-1e9,Math.min(1e9,ga))];(function(aa,Ja,ji,Qo,Fo,bo){var xa,gi=aa[0],_o=aa[1],Ka=0,ki=1,Gi=Ja[0]-gi,ni=Ja[1]-_o;if(xa=ji-gi,Gi||!(xa>0)){if(xa/=Gi,Gi<0){if(xa<Ka)return;xa<ki&&(ki=xa)}else if(Gi>0){if(xa>ki)return;xa>Ka&&(Ka=xa)}if(xa=Fo-gi,Gi||!(xa<0)){if(xa/=Gi,Gi<0){if(xa>ki)return;xa>Ka&&(Ka=xa)}else if(Gi>0){if(xa<Ka)return;xa<ki&&(ki=xa)}if(xa=Qo-_o,ni||!(xa>0)){if(xa/=ni,ni<0){if(xa<Ka)return;xa<ki&&(ki=xa)}else if(ni>0){if(xa>ki)return;xa>Ka&&(Ka=xa)}if(xa=bo-_o,ni||!(xa<0)){if(xa/=ni,ni<0){if(xa>ki)return;xa>Ka&&(Ka=xa)}else if(ni>0){if(xa<Ka)return;xa<ki&&(ki=xa)}return Ka>0&&(aa[0]=gi+Ka*Gi,aa[1]=_o+Ka*ni),ki<1&&(Ja[0]=gi+ki*Gi,Ja[1]=_o+ki*ni),!0}}}}})(Ea,ti,ht,Dt,sr,Ht)?(na||(ra.lineStart(),ra.point(Ea[0],Ea[1])),ra.point(ti[0],ti[1]),Fa||ra.lineEnd(),jn=!1):Fa&&(ra.lineStart(),ra.point(Ca,ga),jn=!1)}sa=Ca,Xr=ga,na=Fa}return Pa}}var ta,Br,rn,gn=k(),Qr={sphere:S,point:S,lineStart:function(){Qr.point=Gn,Qr.lineEnd=un},lineEnd:S,polygonStart:S,polygonEnd:S};function un(){Qr.point=Qr.lineEnd=S}function Gn(ht,Dt){ta=ht*=h,Br=b(Dt*=h),rn=c(Dt),Qr.point=wn}function wn(ht,Dt){ht*=h;var sr=b(Dt*=h),Ht=c(Dt),lr=s(ht-ta),Pr=c(lr),Nr=Ht*b(lr),Zr=rn*sr-Br*Ht*Pr,ln=Br*sr+rn*Ht*Pr;gn.add(p(T(Nr*Nr+Zr*Zr),ln)),ta=ht,Br=sr,rn=Ht}function Ln(ht){return gn.reset(),Y(ht,Qr),+gn}var oa=[null,null],tr={type:"LineString",coordinates:oa};function mr(ht,Dt){return oa[0]=ht,oa[1]=Dt,Ln(tr)}var Ct={Feature:function(ht,Dt){return hr(ht.geometry,Dt)},FeatureCollection:function(ht,Dt){for(var sr=ht.features,Ht=-1,lr=sr.length;++Ht<lr;)if(hr(sr[Ht].geometry,Dt))return!0;return!1}},or={Sphere:function(){return!0},Point:function(ht,Dt){return Rr(ht.coordinates,Dt)},MultiPoint:function(ht,Dt){for(var sr=ht.coordinates,Ht=-1,lr=sr.length;++Ht<lr;)if(Rr(sr[Ht],Dt))return!0;return!1},LineString:function(ht,Dt){return zr(ht.coordinates,Dt)},MultiLineString:function(ht,Dt){for(var sr=ht.coordinates,Ht=-1,lr=sr.length;++Ht<lr;)if(zr(sr[Ht],Dt))return!0;return!1},Polygon:function(ht,Dt){return Or(ht.coordinates,Dt)},MultiPolygon:function(ht,Dt){for(var sr=ht.coordinates,Ht=-1,lr=sr.length;++Ht<lr;)if(Or(sr[Ht],Dt))return!0;return!1},GeometryCollection:function(ht,Dt){for(var sr=ht.geometries,Ht=-1,lr=sr.length;++Ht<lr;)if(hr(sr[Ht],Dt))return!0;return!1}};function hr(ht,Dt){return!(!ht||!or.hasOwnProperty(ht.type))&&or[ht.type](ht,Dt)}function Rr(ht,Dt){return mr(ht,Dt)===0}function zr(ht,Dt){for(var sr,Ht,lr,Pr=0,Nr=ht.length;Pr<Nr;Pr++){if((Ht=mr(ht[Pr],Dt))===0||Pr>0&&(lr=mr(ht[Pr],ht[Pr-1]))>0&&sr<=lr&&Ht<=lr&&(sr+Ht-lr)*(1-Math.pow((sr-Ht)/lr,2))<1e-12*lr)return!0;sr=Ht}return!1}function Or(ht,Dt){return!!Yr(ht.map(Ar),vr(Dt))}function Ar(ht){return(ht=ht.map(vr)).pop(),ht}function vr(ht){return[ht[0]*h,ht[1]*h]}function xr(ht,Dt,sr){var Ht=v.range(ht,Dt-r,sr).concat(Dt);return function(lr){return Ht.map(function(Pr){return[lr,Pr]})}}function wr(ht,Dt,sr){var Ht=v.range(ht,Dt-r,sr).concat(Dt);return function(lr){return Ht.map(function(Pr){return[Pr,lr]})}}function Er(){var ht,Dt,sr,Ht,lr,Pr,Nr,Zr,ln,on,mn,kn,cn=10,Mn=cn,Fn=90,Hn=360,sa=2.5;function Xr(){return{type:"MultiLineString",coordinates:na()}}function na(){return v.range(i(Ht/Fn)*Fn,sr,Fn).map(mn).concat(v.range(i(Zr/Hn)*Hn,Nr,Hn).map(kn)).concat(v.range(i(Dt/cn)*cn,ht,cn).filter(function(In){return s(In%Fn)>r}).map(ln)).concat(v.range(i(Pr/Mn)*Mn,lr,Mn).filter(function(In){return s(In%Hn)>r}).map(on))}return Xr.lines=function(){return na().map(function(In){return{type:"LineString",coordinates:In}})},Xr.outline=function(){return{type:"Polygon",coordinates:[mn(Ht).concat(kn(Nr).slice(1),mn(sr).reverse().slice(1),kn(Zr).reverse().slice(1))]}},Xr.extent=function(In){return arguments.length?Xr.extentMajor(In).extentMinor(In):Xr.extentMinor()},Xr.extentMajor=function(In){return arguments.length?(Ht=+In[0][0],sr=+In[1][0],Zr=+In[0][1],Nr=+In[1][1],Ht>sr&&(In=Ht,Ht=sr,sr=In),Zr>Nr&&(In=Zr,Zr=Nr,Nr=In),Xr.precision(sa)):[[Ht,Zr],[sr,Nr]]},Xr.extentMinor=function(In){return arguments.length?(Dt=+In[0][0],ht=+In[1][0],Pr=+In[0][1],lr=+In[1][1],Dt>ht&&(In=Dt,Dt=ht,ht=In),Pr>lr&&(In=Pr,Pr=lr,lr=In),Xr.precision(sa)):[[Dt,Pr],[ht,lr]]},Xr.step=function(In){return arguments.length?Xr.stepMajor(In).stepMinor(In):Xr.stepMinor()},Xr.stepMajor=function(In){return arguments.length?(Fn=+In[0],Hn=+In[1],Xr):[Fn,Hn]},Xr.stepMinor=function(In){return arguments.length?(cn=+In[0],Mn=+In[1],Xr):[cn,Mn]},Xr.precision=function(In){return arguments.length?(sa=+In,ln=xr(Pr,lr,90),on=wr(Dt,ht,sa),mn=xr(Zr,Nr,90),kn=wr(Ht,sr,sa),Xr):sa},Xr.extentMajor([[-180,-90+r],[180,90-r]]).extentMinor([[-180,-80-r],[180,80+r]])}function qr(ht){return ht}var Hr,$r,tn,vn,_n=k(),Tn=k(),Cn={point:S,lineStart:S,lineEnd:S,polygonStart:function(){Cn.lineStart=On,Cn.lineEnd=Ma},polygonEnd:function(){Cn.lineStart=Cn.lineEnd=Cn.point=S,_n.add(s(Tn)),Tn.reset()},result:function(){var ht=_n/2;return _n.reset(),ht}};function On(){Cn.point=Zn}function Zn(ht,Dt){Cn.point=Aa,Hr=tn=ht,$r=vn=Dt}function Aa(ht,Dt){Tn.add(vn*ht-tn*Dt),tn=ht,vn=Dt}function Ma(){Aa(Hr,$r)}var Sn=1/0,Qn=Sn,Kn=-Sn,Da=Kn,di={point:function(ht,Dt){ht<Sn&&(Sn=ht),ht>Kn&&(Kn=ht),Dt<Qn&&(Qn=Dt),Dt>Da&&(Da=Dt)},lineStart:S,lineEnd:S,polygonStart:S,polygonEnd:S,result:function(){var ht=[[Sn,Qn],[Kn,Da]];return Kn=Da=-(Qn=Sn=1/0),ht}},Di,fo,Wa,Za,Ki=0,Na=0,ho=0,vo=0,wi=0,$i=0,yo=0,So=0,Bi=0,mi={point:Zi,lineStart:Ms,lineEnd:ys,polygonStart:function(){mi.lineStart=as,mi.lineEnd=Ps},polygonEnd:function(){mi.point=Zi,mi.lineStart=Ms,mi.lineEnd=ys},result:function(){var ht=Bi?[yo/Bi,So/Bi]:$i?[vo/$i,wi/$i]:ho?[Ki/ho,Na/ho]:[NaN,NaN];return Ki=Na=ho=vo=wi=$i=yo=So=Bi=0,ht}};function Zi(ht,Dt){Ki+=ht,Na+=Dt,++ho}function Ms(){mi.point=Cs}function Cs(ht,Dt){mi.point=Xa,Zi(Wa=ht,Za=Dt)}function Xa(ht,Dt){var sr=ht-Wa,Ht=Dt-Za,lr=T(sr*sr+Ht*Ht);vo+=lr*(Wa+ht)/2,wi+=lr*(Za+Dt)/2,$i+=lr,Zi(Wa=ht,Za=Dt)}function ys(){mi.point=Zi}function as(){mi.point=Is}function Ps(){As(Di,fo)}function Is(ht,Dt){mi.point=As,Zi(Di=Wa=ht,fo=Za=Dt)}function As(ht,Dt){var sr=ht-Wa,Ht=Dt-Za,lr=T(sr*sr+Ht*Ht);vo+=lr*(Wa+ht)/2,wi+=lr*(Za+Dt)/2,$i+=lr,yo+=(lr=Za*ht-Wa*Dt)*(Wa+ht),So+=lr*(Za+Dt),Bi+=3*lr,Zi(Wa=ht,Za=Dt)}function Os(ht){this._context=ht}Os.prototype={_radius:4.5,pointRadius:function(ht){return this._radius=ht,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(ht,Dt){switch(this._point){case 0:this._context.moveTo(ht,Dt),this._point=1;break;case 1:this._context.lineTo(ht,Dt);break;default:this._context.moveTo(ht+this._radius,Dt),this._context.arc(ht,Dt,this._radius,0,u)}},result:S};var Co,Po,qo,Go,Yo,is=k(),xo={point:S,lineStart:function(){xo.point=xs},lineEnd:function(){Co&&po(Po,qo),xo.point=S},polygonStart:function(){Co=!0},polygonEnd:function(){Co=null},result:function(){var ht=+is;return is.reset(),ht}};function xs(ht,Dt){xo.point=po,Po=Go=ht,qo=Yo=Dt}function po(ht,Dt){Go-=ht,Yo-=Dt,is.add(T(Go*Go+Yo*Yo)),Go=ht,Yo=Dt}function Wo(){this._string=[]}function bs(ht){return"m0,"+ht+"a"+ht+","+ht+" 0 1,1 0,"+-2*ht+"a"+ht+","+ht+" 0 1,1 0,"+2*ht+"z"}function Io(ht){return function(Dt){var sr=new Ga;for(var Ht in ht)sr[Ht]=ht[Ht];return sr.stream=Dt,sr}}function Ga(){}function je(ht,Dt,sr){var Ht=ht.clipExtent&&ht.clipExtent();return ht.scale(150).translate([0,0]),Ht!=null&&ht.clipExtent(null),Y(sr,ht.stream(di)),Dt(di.result()),Ht!=null&&ht.clipExtent(Ht),ht}function Ye(ht,Dt,sr){return je(ht,function(Ht){var lr=Dt[1][0]-Dt[0][0],Pr=Dt[1][1]-Dt[0][1],Nr=Math.min(lr/(Ht[1][0]-Ht[0][0]),Pr/(Ht[1][1]-Ht[0][1])),Zr=+Dt[0][0]+(lr-Nr*(Ht[1][0]+Ht[0][0]))/2,ln=+Dt[0][1]+(Pr-Nr*(Ht[1][1]+Ht[0][1]))/2;ht.scale(150*Nr).translate([Zr,ln])},sr)}function et(ht,Dt,sr){return Ye(ht,[[0,0],Dt],sr)}function lt(ht,Dt,sr){return je(ht,function(Ht){var lr=+Dt,Pr=lr/(Ht[1][0]-Ht[0][0]),Nr=(lr-Pr*(Ht[1][0]+Ht[0][0]))/2,Zr=-Pr*Ht[0][1];ht.scale(150*Pr).translate([Nr,Zr])},sr)}function gt(ht,Dt,sr){return je(ht,function(Ht){var lr=+Dt,Pr=lr/(Ht[1][1]-Ht[0][1]),Nr=-Pr*Ht[0][0],Zr=(lr-Pr*(Ht[1][1]+Ht[0][1]))/2;ht.scale(150*Pr).translate([Nr,Zr])},sr)}Wo.prototype={_radius:4.5,_circle:bs(4.5),pointRadius:function(ht){return(ht=+ht)!==this._radius&&(this._radius=ht,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(ht,Dt){switch(this._point){case 0:this._string.push("M",ht,",",Dt),this._point=1;break;case 1:this._string.push("L",ht,",",Dt);break;default:this._circle==null&&(this._circle=bs(this._radius)),this._string.push("M",ht,",",Dt,this._circle)}},result:function(){if(this._string.length){var ht=this._string.join("");return this._string=[],ht}return null}},Ga.prototype={constructor:Ga,point:function(ht,Dt){this.stream.point(ht,Dt)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var pt=c(30*h);function St(ht,Dt){return+Dt?function(sr,Ht){function lr(Pr,Nr,Zr,ln,on,mn,kn,cn,Mn,Fn,Hn,sa,Xr,na){var In=kn-Pr,jn=cn-Nr,ra=In*In+jn*jn;if(ra>4*Ht&&Xr--){var ka=ln+Fn,Pa=on+Hn,En=mn+sa,Ra=T(ka*ka+Pa*Pa+En*En),Ca=I(En/=Ra),ga=s(s(En)-1)<r||s(Zr-Mn)<r?(Zr+Mn)/2:p(Pa,ka),Fa=sr(ga,Ca),Ea=Fa[0],ti=Fa[1],aa=Ea-Pr,Ja=ti-Nr,ji=jn*aa-In*Ja;(ji*ji/ra>Ht||s((In*aa+jn*Ja)/ra-.5)>.3||ln*Fn+on*Hn+mn*sa<pt)&&(lr(Pr,Nr,Zr,ln,on,mn,Ea,ti,ga,ka/=Ra,Pa/=Ra,En,Xr,na),na.point(Ea,ti),lr(Ea,ti,ga,ka,Pa,En,kn,cn,Mn,Fn,Hn,sa,Xr,na))}}return function(Pr){var Nr,Zr,ln,on,mn,kn,cn,Mn,Fn,Hn,sa,Xr,na={point:In,lineStart:jn,lineEnd:ka,polygonStart:function(){Pr.polygonStart(),na.lineStart=Pa},polygonEnd:function(){Pr.polygonEnd(),na.lineStart=jn}};function In(Ca,ga){Ca=sr(Ca,ga),Pr.point(Ca[0],Ca[1])}function jn(){Mn=NaN,na.point=ra,Pr.lineStart()}function ra(Ca,ga){var Fa=le([Ca,ga]),Ea=sr(Ca,ga);lr(Mn,Fn,cn,Hn,sa,Xr,Mn=Ea[0],Fn=Ea[1],cn=Ca,Hn=Fa[0],sa=Fa[1],Xr=Fa[2],16,Pr),Pr.point(Mn,Fn)}function ka(){na.point=In,Pr.lineEnd()}function Pa(){jn(),na.point=En,na.lineEnd=Ra}function En(Ca,ga){ra(Nr=Ca,ga),Zr=Mn,ln=Fn,on=Hn,mn=sa,kn=Xr,na.point=ra}function Ra(){lr(Mn,Fn,cn,Hn,sa,Xr,Zr,ln,Nr,on,mn,kn,16,Pr),na.lineEnd=ka,ka()}return na}}(ht,Dt):function(sr){return Io({point:function(Ht,lr){Ht=sr(Ht,lr),this.stream.point(Ht[0],Ht[1])}})}(ht)}var Jt=Io({point:function(ht,Dt){this.stream.point(ht*h,Dt*h)}});function $t(ht,Dt,sr,Ht,lr){function Pr(Nr,Zr){return[Dt+ht*(Nr*=Ht),sr-ht*(Zr*=lr)]}return Pr.invert=function(Nr,Zr){return[(Nr-Dt)/ht*Ht,(sr-Zr)/ht*lr]},Pr}function Yt(ht,Dt,sr,Ht,lr,Pr){var Nr=c(Pr),Zr=b(Pr),ln=Nr*ht,on=Zr*ht,mn=Nr/ht,kn=Zr/ht,cn=(Zr*sr-Nr*Dt)/ht,Mn=(Zr*Dt+Nr*sr)/ht;function Fn(Hn,sa){return[ln*(Hn*=Ht)-on*(sa*=lr)+Dt,sr-on*Hn-ln*sa]}return Fn.invert=function(Hn,sa){return[Ht*(mn*Hn-kn*sa+cn),lr*(Mn-kn*Hn-mn*sa)]},Fn}function ar(ht){return pr(function(){return ht})()}function pr(ht){var Dt,sr,Ht,lr,Pr,Nr,Zr,ln,on,mn,kn=150,cn=480,Mn=250,Fn=0,Hn=0,sa=0,Xr=0,na=0,In=0,jn=1,ra=1,ka=null,Pa=nn,En=null,Ra=qr,Ca=.5;function ga(aa){return ln(aa[0]*h,aa[1]*h)}function Fa(aa){return(aa=ln.invert(aa[0],aa[1]))&&[aa[0]*o,aa[1]*o]}function Ea(){var aa=Yt(kn,0,0,jn,ra,In).apply(null,Dt(Fn,Hn)),Ja=(In?Yt:$t)(kn,cn-aa[0],Mn-aa[1],jn,ra,In);return sr=Nt(sa,Xr,na),Zr=ft(Dt,Ja),ln=ft(sr,Zr),Nr=St(Zr,Ca),ti()}function ti(){return on=mn=null,ga}return ga.stream=function(aa){return on&&mn===aa?on:on=Jt(function(Ja){return Io({point:function(ji,Qo){var Fo=Ja(ji,Qo);return this.stream.point(Fo[0],Fo[1])}})}(sr)(Pa(Nr(Ra(mn=aa)))))},ga.preclip=function(aa){return arguments.length?(Pa=aa,ka=void 0,ti()):Pa},ga.postclip=function(aa){return arguments.length?(Ra=aa,En=Ht=lr=Pr=null,ti()):Ra},ga.clipAngle=function(aa){return arguments.length?(Pa=+aa?yn(ka=aa*h):(ka=null,nn),ti()):ka*o},ga.clipExtent=function(aa){return arguments.length?(Ra=aa==null?(En=Ht=lr=Pr=null,qr):bn(En=+aa[0][0],Ht=+aa[0][1],lr=+aa[1][0],Pr=+aa[1][1]),ti()):En==null?null:[[En,Ht],[lr,Pr]]},ga.scale=function(aa){return arguments.length?(kn=+aa,Ea()):kn},ga.translate=function(aa){return arguments.length?(cn=+aa[0],Mn=+aa[1],Ea()):[cn,Mn]},ga.center=function(aa){return arguments.length?(Fn=aa[0]%360*h,Hn=aa[1]%360*h,Ea()):[Fn*o,Hn*o]},ga.rotate=function(aa){return arguments.length?(sa=aa[0]%360*h,Xr=aa[1]%360*h,na=aa.length>2?aa[2]%360*h:0,Ea()):[sa*o,Xr*o,na*o]},ga.angle=function(aa){return arguments.length?(In=aa%360*h,Ea()):In*o},ga.reflectX=function(aa){return arguments.length?(jn=aa?-1:1,Ea()):jn<0},ga.reflectY=function(aa){return arguments.length?(ra=aa?-1:1,Ea()):ra<0},ga.precision=function(aa){return arguments.length?(Nr=St(Zr,Ca=aa*aa),ti()):T(Ca)},ga.fitExtent=function(aa,Ja){return Ye(ga,aa,Ja)},ga.fitSize=function(aa,Ja){return et(ga,aa,Ja)},ga.fitWidth=function(aa,Ja){return lt(ga,aa,Ja)},ga.fitHeight=function(aa,Ja){return gt(ga,aa,Ja)},function(){return Dt=ht.apply(this,arguments),ga.invert=Dt.invert&&Fa,Ea()}}function br(ht){var Dt=0,sr=l/3,Ht=pr(ht),lr=Ht(Dt,sr);return lr.parallels=function(Pr){return arguments.length?Ht(Dt=Pr[0]*h,sr=Pr[1]*h):[Dt*o,sr*o]},lr}function _r(ht,Dt){var sr=b(ht),Ht=(sr+b(Dt))/2;if(s(Ht)<r)return function(Zr){var ln=c(Zr);function on(mn,kn){return[mn*ln,b(kn)/ln]}return on.invert=function(mn,kn){return[mn/ln,I(kn*ln)]},on}(ht);var lr=1+sr*(2*Ht-sr),Pr=T(lr)/Ht;function Nr(Zr,ln){var on=T(lr-2*Ht*b(ln))/Ht;return[on*b(Zr*=Ht),Pr-on*c(Zr)]}return Nr.invert=function(Zr,ln){var on=Pr-ln,mn=p(Zr,s(on))*_(on);return on*Ht<0&&(mn-=l*_(Zr)*_(on)),[mn/Ht,I((lr-(Zr*Zr+on*on)*Ht*Ht)/(2*Ht))]},Nr}function Dr(){return br(_r).scale(155.424).center([0,33.6442])}function an(){return Dr().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function dn(ht){return function(Dt,sr){var Ht=c(Dt),lr=c(sr),Pr=ht(Ht*lr);return[Pr*lr*b(Dt),Pr*b(sr)]}}function Pn(ht){return function(Dt,sr){var Ht=T(Dt*Dt+sr*sr),lr=ht(Ht),Pr=b(lr),Nr=c(lr);return[p(Dt*Pr,Ht*Nr),I(Ht&&sr*Pr/Ht)]}}var Dn=dn(function(ht){return T(2/(1+ht))});Dn.invert=Pn(function(ht){return 2*I(ht/2)});var qn=dn(function(ht){return(ht=A(ht))&&ht/b(ht)});function zn(ht,Dt){return[ht,f(L((n+Dt)/2))]}function va(ht){var Dt,sr,Ht,lr=ar(ht),Pr=lr.center,Nr=lr.scale,Zr=lr.translate,ln=lr.clipExtent,on=null;function mn(){var kn=l*Nr(),cn=lr(Tr(lr.rotate()).invert([0,0]));return ln(on==null?[[cn[0]-kn,cn[1]-kn],[cn[0]+kn,cn[1]+kn]]:ht===zn?[[Math.max(cn[0]-kn,on),Dt],[Math.min(cn[0]+kn,sr),Ht]]:[[on,Math.max(cn[1]-kn,Dt)],[sr,Math.min(cn[1]+kn,Ht)]])}return lr.scale=function(kn){return arguments.length?(Nr(kn),mn()):Nr()},lr.translate=function(kn){return arguments.length?(Zr(kn),mn()):Zr()},lr.center=function(kn){return arguments.length?(Pr(kn),mn()):Pr()},lr.clipExtent=function(kn){return arguments.length?(kn==null?on=Dt=sr=Ht=null:(on=+kn[0][0],Dt=+kn[0][1],sr=+kn[1][0],Ht=+kn[1][1]),mn()):on==null?null:[[on,Dt],[sr,Ht]]},mn()}function Sa(ht){return L((n+ht)/2)}function Ua(ht,Dt){var sr=c(ht),Ht=ht===Dt?b(ht):f(sr/c(Dt))/f(Sa(Dt)/Sa(ht)),lr=sr*w(Sa(ht),Ht)/Ht;if(!Ht)return zn;function Pr(Nr,Zr){lr>0?Zr<-n+r&&(Zr=-n+r):Zr>n-r&&(Zr=n-r);var ln=lr/w(Sa(Zr),Ht);return[ln*b(Ht*Nr),lr-ln*c(Ht*Nr)]}return Pr.invert=function(Nr,Zr){var ln=lr-Zr,on=_(Ht)*T(Nr*Nr+ln*ln),mn=p(Nr,s(ln))*_(ln);return ln*Ht<0&&(mn-=l*_(Nr)*_(ln)),[mn/Ht,2*a(w(lr/on,1/Ht))-n]},Pr}function ja(ht,Dt){return[ht,Dt]}function Va(ht,Dt){var sr=c(ht),Ht=ht===Dt?b(ht):(sr-c(Dt))/(Dt-ht),lr=sr/Ht+ht;if(s(Ht)<r)return ja;function Pr(Nr,Zr){var ln=lr-Zr,on=Ht*Nr;return[ln*b(on),lr-ln*c(on)]}return Pr.invert=function(Nr,Zr){var ln=lr-Zr,on=p(Nr,s(ln))*_(ln);return ln*Ht<0&&(on-=l*_(Nr)*_(ln)),[on/Ht,lr-_(Ht)*T(Nr*Nr+ln*ln)]},Pr}qn.invert=Pn(function(ht){return ht}),zn.invert=function(ht,Dt){return[ht,2*a(y(Dt))-n]},ja.invert=ja;var Ti=1.340264,bi=-.081106,si=893e-6,li=.003796,_i=T(3)/2;function Ni(ht,Dt){var sr=I(_i*b(Dt)),Ht=sr*sr,lr=Ht*Ht*Ht;return[ht*c(sr)/(_i*(Ti+3*bi*Ht+lr*(7*si+9*li*Ht))),sr*(Ti+bi*Ht+lr*(si+li*Ht))]}function Qi(ht,Dt){var sr=c(Dt),Ht=c(ht)*sr;return[sr*b(ht)/Ht,b(Dt)/Ht]}function eo(ht,Dt){var sr=Dt*Dt,Ht=sr*sr;return[ht*(.8707-.131979*sr+Ht*(Ht*(.003971*sr-.001529*Ht)-.013791)),Dt*(1.007226+sr*(.015085+Ht*(.028874*sr-.044475-.005916*Ht)))]}function to(ht,Dt){return[c(Dt)*b(ht),b(Dt)]}function ro(ht,Dt){var sr=c(Dt),Ht=1+c(ht)*sr;return[sr*b(ht)/Ht,b(Dt)/Ht]}function za(ht,Dt){return[f(L((n+Dt)/2)),-ht]}Ni.invert=function(ht,Dt){for(var sr,Ht=Dt,lr=Ht*Ht,Pr=lr*lr*lr,Nr=0;Nr<12&&(Pr=(lr=(Ht-=sr=(Ht*(Ti+bi*lr+Pr*(si+li*lr))-Dt)/(Ti+3*bi*lr+Pr*(7*si+9*li*lr)))*Ht)*lr*lr,!(s(sr)<1e-12));++Nr);return[_i*ht*(Ti+3*bi*lr+Pr*(7*si+9*li*lr))/c(Ht),I(b(Ht)/_i)]},Qi.invert=Pn(a),eo.invert=function(ht,Dt){var sr,Ht=Dt,lr=25;do{var Pr=Ht*Ht,Nr=Pr*Pr;Ht-=sr=(Ht*(1.007226+Pr*(.015085+Nr*(.028874*Pr-.044475-.005916*Nr)))-Dt)/(1.007226+Pr*(.045255+Nr*(.259866*Pr-.311325-.005916*11*Nr)))}while(s(sr)>r&&--lr>0);return[ht/(.8707+(Pr=Ht*Ht)*(Pr*(Pr*Pr*Pr*(.003971-.001529*Pr)-.013791)-.131979)),Ht]},to.invert=Pn(I),ro.invert=Pn(function(ht){return 2*a(ht)}),za.invert=function(ht,Dt){return[-Dt,2*a(y(ht))-n]},m.geoAlbers=an,m.geoAlbersUsa=function(){var ht,Dt,sr,Ht,lr,Pr,Nr=an(),Zr=Dr().rotate([154,0]).center([-2,58.5]).parallels([55,65]),ln=Dr().rotate([157,0]).center([-3,19.9]).parallels([8,18]),on={point:function(cn,Mn){Pr=[cn,Mn]}};function mn(cn){var Mn=cn[0],Fn=cn[1];return Pr=null,sr.point(Mn,Fn),Pr||(Ht.point(Mn,Fn),Pr)||(lr.point(Mn,Fn),Pr)}function kn(){return ht=Dt=null,mn}return mn.invert=function(cn){var Mn=Nr.scale(),Fn=Nr.translate(),Hn=(cn[0]-Fn[0])/Mn,sa=(cn[1]-Fn[1])/Mn;return(sa>=.12&&sa<.234&&Hn>=-.425&&Hn<-.214?Zr:sa>=.166&&sa<.234&&Hn>=-.214&&Hn<-.115?ln:Nr).invert(cn)},mn.stream=function(cn){return ht&&Dt===cn?ht:(Mn=[Nr.stream(Dt=cn),Zr.stream(cn),ln.stream(cn)],Fn=Mn.length,ht={point:function(Hn,sa){for(var Xr=-1;++Xr<Fn;)Mn[Xr].point(Hn,sa)},sphere:function(){for(var Hn=-1;++Hn<Fn;)Mn[Hn].sphere()},lineStart:function(){for(var Hn=-1;++Hn<Fn;)Mn[Hn].lineStart()},lineEnd:function(){for(var Hn=-1;++Hn<Fn;)Mn[Hn].lineEnd()},polygonStart:function(){for(var Hn=-1;++Hn<Fn;)Mn[Hn].polygonStart()},polygonEnd:function(){for(var Hn=-1;++Hn<Fn;)Mn[Hn].polygonEnd()}});var Mn,Fn},mn.precision=function(cn){return arguments.length?(Nr.precision(cn),Zr.precision(cn),ln.precision(cn),kn()):Nr.precision()},mn.scale=function(cn){return arguments.length?(Nr.scale(cn),Zr.scale(.35*cn),ln.scale(cn),mn.translate(Nr.translate())):Nr.scale()},mn.translate=function(cn){if(!arguments.length)return Nr.translate();var Mn=Nr.scale(),Fn=+cn[0],Hn=+cn[1];return sr=Nr.translate(cn).clipExtent([[Fn-.455*Mn,Hn-.238*Mn],[Fn+.455*Mn,Hn+.238*Mn]]).stream(on),Ht=Zr.translate([Fn-.307*Mn,Hn+.201*Mn]).clipExtent([[Fn-.425*Mn+r,Hn+.12*Mn+r],[Fn-.214*Mn-r,Hn+.234*Mn-r]]).stream(on),lr=ln.translate([Fn-.205*Mn,Hn+.212*Mn]).clipExtent([[Fn-.214*Mn+r,Hn+.166*Mn+r],[Fn-.115*Mn-r,Hn+.234*Mn-r]]).stream(on),kn()},mn.fitExtent=function(cn,Mn){return Ye(mn,cn,Mn)},mn.fitSize=function(cn,Mn){return et(mn,cn,Mn)},mn.fitWidth=function(cn,Mn){return lt(mn,cn,Mn)},mn.fitHeight=function(cn,Mn){return gt(mn,cn,Mn)},mn.scale(1070)},m.geoArea=function(ht){return j.reset(),Y(ht,ee),2*j},m.geoAzimuthalEqualArea=function(){return ar(Dn).scale(124.75).clipAngle(179.999)},m.geoAzimuthalEqualAreaRaw=Dn,m.geoAzimuthalEquidistant=function(){return ar(qn).scale(79.4188).clipAngle(179.999)},m.geoAzimuthalEquidistantRaw=qn,m.geoBounds=function(ht){var Dt,sr,Ht,lr,Pr,Nr,Zr;if(oe=we=-(pe=ge=1/0),De=[],Y(ht,Gt),sr=De.length){for(De.sort(Xe),Dt=1,Pr=[Ht=De[0]];Dt<sr;++Dt)qe(Ht,(lr=De[Dt])[0])||qe(Ht,lr[1])?(Ue(Ht[0],lr[1])>Ue(Ht[0],Ht[1])&&(Ht[1]=lr[1]),Ue(lr[0],Ht[1])>Ue(Ht[0],Ht[1])&&(Ht[0]=lr[0])):Pr.push(Ht=lr);for(Nr=-1/0,Dt=0,Ht=Pr[sr=Pr.length-1];Dt<=sr;Ht=lr,++Dt)lr=Pr[Dt],(Zr=Ue(Ht[1],lr[0]))>Nr&&(Nr=Zr,pe=lr[0],we=Ht[1])}return De=Ie=null,pe===1/0||ge===1/0?[[NaN,NaN],[NaN,NaN]]:[[pe,ge],[we,oe]]},m.geoCentroid=function(ht){Oe=Ze=Fe=Pe=ze=Ge=$e=ot=vt=bt=yt=0,Y(ht,st);var Dt=vt,sr=bt,Ht=yt,lr=Dt*Dt+sr*sr+Ht*Ht;return lr<1e-12&&(Dt=Ge,sr=$e,Ht=ot,Ze<r&&(Dt=Fe,sr=Pe,Ht=ze),(lr=Dt*Dt+sr*sr+Ht*Ht)<1e-12)?[NaN,NaN]:[p(sr,Dt)*o,I(Ht/T(lr))*o]},m.geoCircle=function(){var ht,Dt,sr=nt([0,0]),Ht=nt(90),lr=nt(6),Pr={point:function(Zr,ln){ht.push(Zr=Dt(Zr,ln)),Zr[0]*=o,Zr[1]*=o}};function Nr(){var Zr=sr.apply(this,arguments),ln=Ht.apply(this,arguments)*h,on=lr.apply(this,arguments)*h;return ht=[],Dt=Nt(-Zr[0]*h,-Zr[1]*h,0).invert,ur(Pr,ln,on,1),Zr={type:"Polygon",coordinates:[ht]},ht=Dt=null,Zr}return Nr.center=function(Zr){return arguments.length?(sr=typeof Zr=="function"?Zr:nt([+Zr[0],+Zr[1]]),Nr):sr},Nr.radius=function(Zr){return arguments.length?(Ht=typeof Zr=="function"?Zr:nt(+Zr),Nr):Ht},Nr.precision=function(Zr){return arguments.length?(lr=typeof Zr=="function"?Zr:nt(+Zr),Nr):lr},Nr},m.geoClipAntimeridian=nn,m.geoClipCircle=yn,m.geoClipExtent=function(){var ht,Dt,sr,Ht=0,lr=0,Pr=960,Nr=500;return sr={stream:function(Zr){return ht&&Dt===Zr?ht:ht=bn(Ht,lr,Pr,Nr)(Dt=Zr)},extent:function(Zr){return arguments.length?(Ht=+Zr[0][0],lr=+Zr[0][1],Pr=+Zr[1][0],Nr=+Zr[1][1],ht=Dt=null,sr):[[Ht,lr],[Pr,Nr]]}}},m.geoClipRectangle=bn,m.geoConicConformal=function(){return br(Ua).scale(109.5).parallels([30,30])},m.geoConicConformalRaw=Ua,m.geoConicEqualArea=Dr,m.geoConicEqualAreaRaw=_r,m.geoConicEquidistant=function(){return br(Va).scale(131.154).center([0,13.9389])},m.geoConicEquidistantRaw=Va,m.geoContains=function(ht,Dt){return(ht&&Ct.hasOwnProperty(ht.type)?Ct[ht.type]:hr)(ht,Dt)},m.geoDistance=mr,m.geoEqualEarth=function(){return ar(Ni).scale(177.158)},m.geoEqualEarthRaw=Ni,m.geoEquirectangular=function(){return ar(ja).scale(152.63)},m.geoEquirectangularRaw=ja,m.geoGnomonic=function(){return ar(Qi).scale(144.049).clipAngle(60)},m.geoGnomonicRaw=Qi,m.geoGraticule=Er,m.geoGraticule10=function(){return Er()()},m.geoIdentity=function(){var ht,Dt,sr,Ht,lr,Pr,Nr,Zr=1,ln=0,on=0,mn=1,kn=1,cn=0,Mn=null,Fn=1,Hn=1,sa=Io({point:function(jn,ra){var ka=In([jn,ra]);this.stream.point(ka[0],ka[1])}}),Xr=qr;function na(){return Fn=Zr*mn,Hn=Zr*kn,Pr=Nr=null,In}function In(jn){var ra=jn[0]*Fn,ka=jn[1]*Hn;if(cn){var Pa=ka*ht-ra*Dt;ra=ra*ht+ka*Dt,ka=Pa}return[ra+ln,ka+on]}return In.invert=function(jn){var ra=jn[0]-ln,ka=jn[1]-on;if(cn){var Pa=ka*ht+ra*Dt;ra=ra*ht-ka*Dt,ka=Pa}return[ra/Fn,ka/Hn]},In.stream=function(jn){return Pr&&Nr===jn?Pr:Pr=sa(Xr(Nr=jn))},In.postclip=function(jn){return arguments.length?(Xr=jn,Mn=sr=Ht=lr=null,na()):Xr},In.clipExtent=function(jn){return arguments.length?(Xr=jn==null?(Mn=sr=Ht=lr=null,qr):bn(Mn=+jn[0][0],sr=+jn[0][1],Ht=+jn[1][0],lr=+jn[1][1]),na()):Mn==null?null:[[Mn,sr],[Ht,lr]]},In.scale=function(jn){return arguments.length?(Zr=+jn,na()):Zr},In.translate=function(jn){return arguments.length?(ln=+jn[0],on=+jn[1],na()):[ln,on]},In.angle=function(jn){return arguments.length?(Dt=b(cn=jn%360*h),ht=c(cn),na()):cn*o},In.reflectX=function(jn){return arguments.length?(mn=jn?-1:1,na()):mn<0},In.reflectY=function(jn){return arguments.length?(kn=jn?-1:1,na()):kn<0},In.fitExtent=function(jn,ra){return Ye(In,jn,ra)},In.fitSize=function(jn,ra){return et(In,jn,ra)},In.fitWidth=function(jn,ra){return lt(In,jn,ra)},In.fitHeight=function(jn,ra){return gt(In,jn,ra)},In},m.geoInterpolate=function(ht,Dt){var sr=ht[0]*h,Ht=ht[1]*h,lr=Dt[0]*h,Pr=Dt[1]*h,Nr=c(Ht),Zr=b(Ht),ln=c(Pr),on=b(Pr),mn=Nr*c(sr),kn=Nr*b(sr),cn=ln*c(lr),Mn=ln*b(lr),Fn=2*I(T(P(Pr-Ht)+Nr*ln*P(lr-sr))),Hn=b(Fn),sa=Fn?function(Xr){var na=b(Xr*=Fn)/Hn,In=b(Fn-Xr)/Hn,jn=In*mn+na*cn,ra=In*kn+na*Mn,ka=In*Zr+na*on;return[p(ra,jn)*o,p(ka,T(jn*jn+ra*ra))*o]}:function(){return[sr*o,Ht*o]};return sa.distance=Fn,sa},m.geoLength=Ln,m.geoMercator=function(){return va(zn).scale(961/u)},m.geoMercatorRaw=zn,m.geoNaturalEarth1=function(){return ar(eo).scale(175.295)},m.geoNaturalEarth1Raw=eo,m.geoOrthographic=function(){return ar(to).scale(249.5).clipAngle(90+r)},m.geoOrthographicRaw=to,m.geoPath=function(ht,Dt){var sr,Ht,lr=4.5;function Pr(Nr){return Nr&&(typeof lr=="function"&&Ht.pointRadius(+lr.apply(this,arguments)),Y(Nr,sr(Ht))),Ht.result()}return Pr.area=function(Nr){return Y(Nr,sr(Cn)),Cn.result()},Pr.measure=function(Nr){return Y(Nr,sr(xo)),xo.result()},Pr.bounds=function(Nr){return Y(Nr,sr(di)),di.result()},Pr.centroid=function(Nr){return Y(Nr,sr(mi)),mi.result()},Pr.projection=function(Nr){return arguments.length?(sr=Nr==null?(ht=null,qr):(ht=Nr).stream,Pr):ht},Pr.context=function(Nr){return arguments.length?(Ht=Nr==null?(Dt=null,new Wo):new Os(Dt=Nr),typeof lr!="function"&&Ht.pointRadius(lr),Pr):Dt},Pr.pointRadius=function(Nr){return arguments.length?(lr=typeof Nr=="function"?Nr:(Ht.pointRadius(+Nr),+Nr),Pr):lr},Pr.projection(ht).context(Dt)},m.geoProjection=ar,m.geoProjectionMutator=pr,m.geoRotation=Tr,m.geoStereographic=function(){return ar(ro).scale(250).clipAngle(142)},m.geoStereographicRaw=ro,m.geoStream=Y,m.geoTransform=function(ht){return{stream:Io(ht)}},m.geoTransverseMercator=function(){var ht=va(za),Dt=ht.center,sr=ht.rotate;return ht.center=function(Ht){return arguments.length?Dt([-Ht[1],Ht[0]]):[(Ht=Dt())[1],-Ht[0]]},ht.rotate=function(Ht){return arguments.length?sr([Ht[0],Ht[1],Ht.length>2?Ht[2]+90:90]):[(Ht=sr())[0],Ht[1],Ht[2]-90]},sr([0,0,90]).scale(159.155)},m.geoTransverseMercatorRaw=za,Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-array":107}],115:[function(g,Q,X){(function(m,v){v(typeof X=="object"&&Q!==void 0?X:(m=m||self).d3=m.d3||{})})(this,function(m){function v(se,ve){return se.parent===ve.parent?1:2}function k(se,ve){return se+ve.x}function x(se,ve){return Math.max(se,ve.y)}function e(se){var ve=0,fe=se.children,ye=fe&&fe.length;if(ye)for(;--ye>=0;)ve+=fe[ye].value;else ve=1;se.value=ve}function t(se,ve){var fe,ye,Ae,pe,ge,we=new d(se),oe=+se.value&&(we.value=se.value),de=[we];for(ve==null&&(ve=r);fe=de.pop();)if(oe&&(fe.value=+fe.data.value),(Ae=ve(fe.data))&&(ge=Ae.length))for(fe.children=new Array(ge),pe=ge-1;pe>=0;--pe)de.push(ye=fe.children[pe]=new d(Ae[pe])),ye.parent=fe,ye.depth=fe.depth+1;return we.eachBefore(n)}function r(se){return se.children}function l(se){se.data=se.data.data}function n(se){var ve=0;do se.height=ve;while((se=se.parent)&&se.height<++ve)}function d(se){this.data=se,this.depth=this.height=0,this.parent=null}d.prototype=t.prototype={constructor:d,count:function(){return this.eachAfter(e)},each:function(se){var ve,fe,ye,Ae,pe=this,ge=[pe];do for(ve=ge.reverse(),ge=[];pe=ve.pop();)if(se(pe),fe=pe.children)for(ye=0,Ae=fe.length;ye<Ae;++ye)ge.push(fe[ye]);while(ge.length);return this},eachAfter:function(se){for(var ve,fe,ye,Ae=this,pe=[Ae],ge=[];Ae=pe.pop();)if(ge.push(Ae),ve=Ae.children)for(fe=0,ye=ve.length;fe<ye;++fe)pe.push(ve[fe]);for(;Ae=ge.pop();)se(Ae);return this},eachBefore:function(se){for(var ve,fe,ye=this,Ae=[ye];ye=Ae.pop();)if(se(ye),ve=ye.children)for(fe=ve.length-1;fe>=0;--fe)Ae.push(ve[fe]);return this},sum:function(se){return this.eachAfter(function(ve){for(var fe=+se(ve.data)||0,ye=ve.children,Ae=ye&&ye.length;--Ae>=0;)fe+=ye[Ae].value;ve.value=fe})},sort:function(se){return this.eachBefore(function(ve){ve.children&&ve.children.sort(se)})},path:function(se){for(var ve=this,fe=function(pe,ge){if(pe===ge)return pe;var we=pe.ancestors(),oe=ge.ancestors(),de=null;for(pe=we.pop(),ge=oe.pop();pe===ge;)de=pe,pe=we.pop(),ge=oe.pop();return de}(ve,se),ye=[ve];ve!==fe;)ve=ve.parent,ye.push(ve);for(var Ae=ye.length;se!==fe;)ye.splice(Ae,0,se),se=se.parent;return ye},ancestors:function(){for(var se=this,ve=[se];se=se.parent;)ve.push(se);return ve},descendants:function(){var se=[];return this.each(function(ve){se.push(ve)}),se},leaves:function(){var se=[];return this.eachBefore(function(ve){ve.children||se.push(ve)}),se},links:function(){var se=this,ve=[];return se.each(function(fe){fe!==se&&ve.push({source:fe.parent,target:fe})}),ve},copy:function(){return t(this).eachBefore(l)}};var u=Array.prototype.slice;function o(se){for(var ve,fe,ye=0,Ae=(se=function(ge){for(var we,oe,de=ge.length;de;)oe=Math.random()*de--|0,we=ge[de],ge[de]=ge[oe],ge[oe]=we;return ge}(u.call(se))).length,pe=[];ye<Ae;)ve=se[ye],fe&&a(fe,ve)?++ye:(fe=c(pe=h(pe,ve)),ye=0);return fe}function h(se,ve){var fe,ye;if(p(ve,se))return[ve];for(fe=0;fe<se.length;++fe)if(s(ve,se[fe])&&p(i(se[fe],ve),se))return[se[fe],ve];for(fe=0;fe<se.length-1;++fe)for(ye=fe+1;ye<se.length;++ye)if(s(i(se[fe],se[ye]),ve)&&s(i(se[fe],ve),se[ye])&&s(i(se[ye],ve),se[fe])&&p(y(se[fe],se[ye],ve),se))return[se[fe],se[ye],ve];throw new Error}function s(se,ve){var fe=se.r-ve.r,ye=ve.x-se.x,Ae=ve.y-se.y;return fe<0||fe*fe<ye*ye+Ae*Ae}function a(se,ve){var fe=se.r-ve.r+1e-6,ye=ve.x-se.x,Ae=ve.y-se.y;return fe>0&&fe*fe>ye*ye+Ae*Ae}function p(se,ve){for(var fe=0;fe<ve.length;++fe)if(!a(se,ve[fe]))return!1;return!0}function c(se){switch(se.length){case 1:return{x:(ve=se[0]).x,y:ve.y,r:ve.r};case 2:return i(se[0],se[1]);case 3:return y(se[0],se[1],se[2])}var ve}function i(se,ve){var fe=se.x,ye=se.y,Ae=se.r,pe=ve.x,ge=ve.y,we=ve.r,oe=pe-fe,de=ge-ye,Te=we-Ae,Ee=Math.sqrt(oe*oe+de*de);return{x:(fe+pe+oe/Ee*Te)/2,y:(ye+ge+de/Ee*Te)/2,r:(Ee+Ae+we)/2}}function y(se,ve,fe){var ye=se.x,Ae=se.y,pe=se.r,ge=ve.x,we=ve.y,oe=ve.r,de=fe.x,Te=fe.y,Ee=fe.r,Me=ye-ge,De=ye-de,Ie=Ae-we,Oe=Ae-Te,Ze=oe-pe,Fe=Ee-pe,Pe=ye*ye+Ae*Ae-pe*pe,ze=Pe-ge*ge-we*we+oe*oe,Ge=Pe-de*de-Te*Te+Ee*Ee,$e=De*Ie-Me*Oe,ot=(Ie*Ge-Oe*ze)/(2*$e)-ye,vt=(Oe*Ze-Ie*Fe)/$e,bt=(De*ze-Me*Ge)/(2*$e)-Ae,yt=(Me*Fe-De*Ze)/$e,tt=vt*vt+yt*yt-1,Ke=2*(pe+ot*vt+bt*yt),mt=ot*ot+bt*bt-pe*pe,Ft=-(tt?(Ke+Math.sqrt(Ke*Ke-4*tt*mt))/(2*tt):mt/Ke);return{x:ye+ot+vt*Ft,y:Ae+bt+yt*Ft,r:Ft}}function f(se,ve,fe){var ye,Ae,pe,ge,we=se.x-ve.x,oe=se.y-ve.y,de=we*we+oe*oe;de?(Ae=ve.r+fe.r,Ae*=Ae,ge=se.r+fe.r,Ae>(ge*=ge)?(ye=(de+ge-Ae)/(2*de),pe=Math.sqrt(Math.max(0,ge/de-ye*ye)),fe.x=se.x-ye*we-pe*oe,fe.y=se.y-ye*oe+pe*we):(ye=(de+Ae-ge)/(2*de),pe=Math.sqrt(Math.max(0,Ae/de-ye*ye)),fe.x=ve.x+ye*we-pe*oe,fe.y=ve.y+ye*oe+pe*we)):(fe.x=ve.x+fe.r,fe.y=ve.y)}function w(se,ve){var fe=se.r+ve.r-1e-6,ye=ve.x-se.x,Ae=ve.y-se.y;return fe>0&&fe*fe>ye*ye+Ae*Ae}function b(se){var ve=se._,fe=se.next._,ye=ve.r+fe.r,Ae=(ve.x*fe.r+fe.x*ve.r)/ye,pe=(ve.y*fe.r+fe.y*ve.r)/ye;return Ae*Ae+pe*pe}function _(se){this._=se,this.next=null,this.previous=null}function T(se){if(!(Ae=se.length))return 0;var ve,fe,ye,Ae,pe,ge,we,oe,de,Te,Ee;if((ve=se[0]).x=0,ve.y=0,!(Ae>1))return ve.r;if(fe=se[1],ve.x=-fe.r,fe.x=ve.r,fe.y=0,!(Ae>2))return ve.r+fe.r;f(fe,ve,ye=se[2]),ve=new _(ve),fe=new _(fe),ye=new _(ye),ve.next=ye.previous=fe,fe.next=ve.previous=ye,ye.next=fe.previous=ve;e:for(we=3;we<Ae;++we){f(ve._,fe._,ye=se[we]),ye=new _(ye),oe=fe.next,de=ve.previous,Te=fe._.r,Ee=ve._.r;do if(Te<=Ee){if(w(oe._,ye._)){fe=oe,ve.next=fe,fe.previous=ve,--we;continue e}Te+=oe._.r,oe=oe.next}else{if(w(de._,ye._)){(ve=de).next=fe,fe.previous=ve,--we;continue e}Ee+=de._.r,de=de.previous}while(oe!==de.next);for(ye.previous=ve,ye.next=fe,ve.next=fe.previous=fe=ye,pe=b(ve);(ye=ye.next)!==fe;)(ge=b(ye))<pe&&(ve=ye,pe=ge);fe=ve.next}for(ve=[fe._],ye=fe;(ye=ye.next)!==fe;)ve.push(ye._);for(ye=o(ve),we=0;we<Ae;++we)(ve=se[we]).x-=ye.x,ve.y-=ye.y;return ye.r}function L(se){return se==null?null:A(se)}function A(se){if(typeof se!="function")throw new Error;return se}function I(){return 0}function P(se){return function(){return se}}function S(se){return Math.sqrt(se.value)}function E(se){return function(ve){ve.children||(ve.r=Math.max(0,+se(ve)||0))}}function z(se,ve){return function(fe){if(ye=fe.children){var ye,Ae,pe,ge=ye.length,we=se(fe)*ve||0;if(we)for(Ae=0;Ae<ge;++Ae)ye[Ae].r+=we;if(pe=T(ye),we)for(Ae=0;Ae<ge;++Ae)ye[Ae].r-=we;fe.r=pe+we}}}function D(se){return function(ve){var fe=ve.parent;ve.r*=se,fe&&(ve.x=fe.x+se*ve.x,ve.y=fe.y+se*ve.y)}}function U(se){se.x0=Math.round(se.x0),se.y0=Math.round(se.y0),se.x1=Math.round(se.x1),se.y1=Math.round(se.y1)}function H(se,ve,fe,ye,Ae){for(var pe,ge=se.children,we=-1,oe=ge.length,de=se.value&&(ye-ve)/se.value;++we<oe;)(pe=ge[we]).y0=fe,pe.y1=Ae,pe.x0=ve,pe.x1=ve+=pe.value*de}var Y={depth:-1},J={};function W(se){return se.id}function Z(se){return se.parentId}function re(se,ve){return se.parent===ve.parent?1:2}function V(se){var ve=se.children;return ve?ve[0]:se.t}function B(se){var ve=se.children;return ve?ve[ve.length-1]:se.t}function j(se,ve,fe){var ye=fe/(ve.i-se.i);ve.c-=ye,ve.s+=fe,se.c+=ye,ve.z+=fe,ve.m+=fe}function ee(se,ve,fe){return se.a.parent===ve.parent?se.a:fe}function N(se,ve){this._=se,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=ve}function $(se,ve,fe,ye,Ae){for(var pe,ge=se.children,we=-1,oe=ge.length,de=se.value&&(Ae-fe)/se.value;++we<oe;)(pe=ge[we]).x0=ve,pe.x1=ye,pe.y0=fe,pe.y1=fe+=pe.value*de}N.prototype=Object.create(d.prototype);var K=(1+Math.sqrt(5))/2;function te(se,ve,fe,ye,Ae,pe){for(var ge,we,oe,de,Te,Ee,Me,De,Ie,Oe,Ze,Fe=[],Pe=ve.children,ze=0,Ge=0,$e=Pe.length,ot=ve.value;ze<$e;){oe=Ae-fe,de=pe-ye;do Te=Pe[Ge++].value;while(!Te&&Ge<$e);for(Ee=Me=Te,Ze=Te*Te*(Oe=Math.max(de/oe,oe/de)/(ot*se)),Ie=Math.max(Me/Ze,Ze/Ee);Ge<$e;++Ge){if(Te+=we=Pe[Ge].value,we<Ee&&(Ee=we),we>Me&&(Me=we),Ze=Te*Te*Oe,(De=Math.max(Me/Ze,Ze/Ee))>Ie){Te-=we;break}Ie=De}Fe.push(ge={value:Te,dice:oe<de,children:Pe.slice(ze,Ge)}),ge.dice?H(ge,fe,ye,Ae,ot?ye+=de*Te/ot:pe):$(ge,fe,ye,ot?fe+=oe*Te/ot:Ae,pe),ot-=Te,ze=Ge}return Fe}var ie=function se(ve){function fe(ye,Ae,pe,ge,we){te(ve,ye,Ae,pe,ge,we)}return fe.ratio=function(ye){return se((ye=+ye)>1?ye:1)},fe}(K),le=function se(ve){function fe(ye,Ae,pe,ge,we){if((oe=ye._squarify)&&oe.ratio===ve)for(var oe,de,Te,Ee,Me,De=-1,Ie=oe.length,Oe=ye.value;++De<Ie;){for(Te=(de=oe[De]).children,Ee=de.value=0,Me=Te.length;Ee<Me;++Ee)de.value+=Te[Ee].value;de.dice?H(de,Ae,pe,ge,pe+=(we-pe)*de.value/Oe):$(de,Ae,pe,Ae+=(ge-Ae)*de.value/Oe,we),Oe-=de.value}else ye._squarify=oe=te(ve,ye,Ae,pe,ge,we),oe.ratio=ve}return fe.ratio=function(ye){return se((ye=+ye)>1?ye:1)},fe}(K);m.cluster=function(){var se=v,ve=1,fe=1,ye=!1;function Ae(pe){var ge,we=0;pe.eachAfter(function(Me){var De=Me.children;De?(Me.x=function(Ie){return Ie.reduce(k,0)/Ie.length}(De),Me.y=function(Ie){return 1+Ie.reduce(x,0)}(De)):(Me.x=ge?we+=se(Me,ge):0,Me.y=0,ge=Me)});var oe=function(Me){for(var De;De=Me.children;)Me=De[0];return Me}(pe),de=function(Me){for(var De;De=Me.children;)Me=De[De.length-1];return Me}(pe),Te=oe.x-se(oe,de)/2,Ee=de.x+se(de,oe)/2;return pe.eachAfter(ye?function(Me){Me.x=(Me.x-pe.x)*ve,Me.y=(pe.y-Me.y)*fe}:function(Me){Me.x=(Me.x-Te)/(Ee-Te)*ve,Me.y=(1-(pe.y?Me.y/pe.y:1))*fe})}return Ae.separation=function(pe){return arguments.length?(se=pe,Ae):se},Ae.size=function(pe){return arguments.length?(ye=!1,ve=+pe[0],fe=+pe[1],Ae):ye?null:[ve,fe]},Ae.nodeSize=function(pe){return arguments.length?(ye=!0,ve=+pe[0],fe=+pe[1],Ae):ye?[ve,fe]:null},Ae},m.hierarchy=t,m.pack=function(){var se=null,ve=1,fe=1,ye=I;function Ae(pe){return pe.x=ve/2,pe.y=fe/2,se?pe.eachBefore(E(se)).eachAfter(z(ye,.5)).eachBefore(D(1)):pe.eachBefore(E(S)).eachAfter(z(I,1)).eachAfter(z(ye,pe.r/Math.min(ve,fe))).eachBefore(D(Math.min(ve,fe)/(2*pe.r))),pe}return Ae.radius=function(pe){return arguments.length?(se=L(pe),Ae):se},Ae.size=function(pe){return arguments.length?(ve=+pe[0],fe=+pe[1],Ae):[ve,fe]},Ae.padding=function(pe){return arguments.length?(ye=typeof pe=="function"?pe:P(+pe),Ae):ye},Ae},m.packEnclose=o,m.packSiblings=function(se){return T(se),se},m.partition=function(){var se=1,ve=1,fe=0,ye=!1;function Ae(pe){var ge=pe.height+1;return pe.x0=pe.y0=fe,pe.x1=se,pe.y1=ve/ge,pe.eachBefore(function(we,oe){return function(de){de.children&&H(de,de.x0,we*(de.depth+1)/oe,de.x1,we*(de.depth+2)/oe);var Te=de.x0,Ee=de.y0,Me=de.x1-fe,De=de.y1-fe;Me<Te&&(Te=Me=(Te+Me)/2),De<Ee&&(Ee=De=(Ee+De)/2),de.x0=Te,de.y0=Ee,de.x1=Me,de.y1=De}}(ve,ge)),ye&&pe.eachBefore(U),pe}return Ae.round=function(pe){return arguments.length?(ye=!!pe,Ae):ye},Ae.size=function(pe){return arguments.length?(se=+pe[0],ve=+pe[1],Ae):[se,ve]},Ae.padding=function(pe){return arguments.length?(fe=+pe,Ae):fe},Ae},m.stratify=function(){var se=W,ve=Z;function fe(ye){var Ae,pe,ge,we,oe,de,Te,Ee=ye.length,Me=new Array(Ee),De={};for(pe=0;pe<Ee;++pe)Ae=ye[pe],oe=Me[pe]=new d(Ae),(de=se(Ae,pe,ye))!=null&&(de+="")&&(De[Te="$"+(oe.id=de)]=Te in De?J:oe);for(pe=0;pe<Ee;++pe)if(oe=Me[pe],(de=ve(ye[pe],pe,ye))!=null&&(de+="")){if(!(we=De["$"+de]))throw new Error("missing: "+de);if(we===J)throw new Error("ambiguous: "+de);we.children?we.children.push(oe):we.children=[oe],oe.parent=we}else{if(ge)throw new Error("multiple roots");ge=oe}if(!ge)throw new Error("no root");if(ge.parent=Y,ge.eachBefore(function(Ie){Ie.depth=Ie.parent.depth+1,--Ee}).eachBefore(n),ge.parent=null,Ee>0)throw new Error("cycle");return ge}return fe.id=function(ye){return arguments.length?(se=A(ye),fe):se},fe.parentId=function(ye){return arguments.length?(ve=A(ye),fe):ve},fe},m.tree=function(){var se=re,ve=1,fe=1,ye=null;function Ae(oe){var de=function(Fe){for(var Pe,ze,Ge,$e,ot,vt=new N(Fe,0),bt=[vt];Pe=bt.pop();)if(Ge=Pe._.children)for(Pe.children=new Array(ot=Ge.length),$e=ot-1;$e>=0;--$e)bt.push(ze=Pe.children[$e]=new N(Ge[$e],$e)),ze.parent=Pe;return(vt.parent=new N(null,0)).children=[vt],vt}(oe);if(de.eachAfter(pe),de.parent.m=-de.z,de.eachBefore(ge),ye)oe.eachBefore(we);else{var Te=oe,Ee=oe,Me=oe;oe.eachBefore(function(Fe){Fe.x<Te.x&&(Te=Fe),Fe.x>Ee.x&&(Ee=Fe),Fe.depth>Me.depth&&(Me=Fe)});var De=Te===Ee?1:se(Te,Ee)/2,Ie=De-Te.x,Oe=ve/(Ee.x+De+Ie),Ze=fe/(Me.depth||1);oe.eachBefore(function(Fe){Fe.x=(Fe.x+Ie)*Oe,Fe.y=Fe.depth*Ze})}return oe}function pe(oe){var de=oe.children,Te=oe.parent.children,Ee=oe.i?Te[oe.i-1]:null;if(de){(function(De){for(var Ie,Oe=0,Ze=0,Fe=De.children,Pe=Fe.length;--Pe>=0;)(Ie=Fe[Pe]).z+=Oe,Ie.m+=Oe,Oe+=Ie.s+(Ze+=Ie.c)})(oe);var Me=(de[0].z+de[de.length-1].z)/2;Ee?(oe.z=Ee.z+se(oe._,Ee._),oe.m=oe.z-Me):oe.z=Me}else Ee&&(oe.z=Ee.z+se(oe._,Ee._));oe.parent.A=function(De,Ie,Oe){if(Ie){for(var Ze,Fe=De,Pe=De,ze=Ie,Ge=Fe.parent.children[0],$e=Fe.m,ot=Pe.m,vt=ze.m,bt=Ge.m;ze=B(ze),Fe=V(Fe),ze&&Fe;)Ge=V(Ge),(Pe=B(Pe)).a=De,(Ze=ze.z+vt-Fe.z-$e+se(ze._,Fe._))>0&&(j(ee(ze,De,Oe),De,Ze),$e+=Ze,ot+=Ze),vt+=ze.m,$e+=Fe.m,bt+=Ge.m,ot+=Pe.m;ze&&!B(Pe)&&(Pe.t=ze,Pe.m+=vt-ot),Fe&&!V(Ge)&&(Ge.t=Fe,Ge.m+=$e-bt,Oe=De)}return Oe}(oe,Ee,oe.parent.A||Te[0])}function ge(oe){oe._.x=oe.z+oe.parent.m,oe.m+=oe.parent.m}function we(oe){oe.x*=ve,oe.y=oe.depth*fe}return Ae.separation=function(oe){return arguments.length?(se=oe,Ae):se},Ae.size=function(oe){return arguments.length?(ye=!1,ve=+oe[0],fe=+oe[1],Ae):ye?null:[ve,fe]},Ae.nodeSize=function(oe){return arguments.length?(ye=!0,ve=+oe[0],fe=+oe[1],Ae):ye?[ve,fe]:null},Ae},m.treemap=function(){var se=ie,ve=!1,fe=1,ye=1,Ae=[0],pe=I,ge=I,we=I,oe=I,de=I;function Te(Me){return Me.x0=Me.y0=0,Me.x1=fe,Me.y1=ye,Me.eachBefore(Ee),Ae=[0],ve&&Me.eachBefore(U),Me}function Ee(Me){var De=Ae[Me.depth],Ie=Me.x0+De,Oe=Me.y0+De,Ze=Me.x1-De,Fe=Me.y1-De;Ze<Ie&&(Ie=Ze=(Ie+Ze)/2),Fe<Oe&&(Oe=Fe=(Oe+Fe)/2),Me.x0=Ie,Me.y0=Oe,Me.x1=Ze,Me.y1=Fe,Me.children&&(De=Ae[Me.depth+1]=pe(Me)/2,Ie+=de(Me)-De,Oe+=ge(Me)-De,(Ze-=we(Me)-De)<Ie&&(Ie=Ze=(Ie+Ze)/2),(Fe-=oe(Me)-De)<Oe&&(Oe=Fe=(Oe+Fe)/2),se(Me,Ie,Oe,Ze,Fe))}return Te.round=function(Me){return arguments.length?(ve=!!Me,Te):ve},Te.size=function(Me){return arguments.length?(fe=+Me[0],ye=+Me[1],Te):[fe,ye]},Te.tile=function(Me){return arguments.length?(se=A(Me),Te):se},Te.padding=function(Me){return arguments.length?Te.paddingInner(Me).paddingOuter(Me):Te.paddingInner()},Te.paddingInner=function(Me){return arguments.length?(pe=typeof Me=="function"?Me:P(+Me),Te):pe},Te.paddingOuter=function(Me){return arguments.length?Te.paddingTop(Me).paddingRight(Me).paddingBottom(Me).paddingLeft(Me):Te.paddingTop()},Te.paddingTop=function(Me){return arguments.length?(ge=typeof Me=="function"?Me:P(+Me),Te):ge},Te.paddingRight=function(Me){return arguments.length?(we=typeof Me=="function"?Me:P(+Me),Te):we},Te.paddingBottom=function(Me){return arguments.length?(oe=typeof Me=="function"?Me:P(+Me),Te):oe},Te.paddingLeft=function(Me){return arguments.length?(de=typeof Me=="function"?Me:P(+Me),Te):de},Te},m.treemapBinary=function(se,ve,fe,ye,Ae){var pe,ge,we=se.children,oe=we.length,de=new Array(oe+1);for(de[0]=ge=pe=0;pe<oe;++pe)de[pe+1]=ge+=we[pe].value;(function Te(Ee,Me,De,Ie,Oe,Ze,Fe){if(Ee>=Me-1){var Pe=we[Ee];return Pe.x0=Ie,Pe.y0=Oe,Pe.x1=Ze,void(Pe.y1=Fe)}for(var ze=de[Ee],Ge=De/2+ze,$e=Ee+1,ot=Me-1;$e<ot;){var vt=$e+ot>>>1;de[vt]<Ge?$e=vt+1:ot=vt}Ge-de[$e-1]<de[$e]-Ge&&Ee+1<$e&&--$e;var bt=de[$e]-ze,yt=De-bt;if(Ze-Ie>Fe-Oe){var tt=(Ie*yt+Ze*bt)/De;Te(Ee,$e,bt,Ie,Oe,tt,Fe),Te($e,Me,yt,tt,Oe,Ze,Fe)}else{var Ke=(Oe*yt+Fe*bt)/De;Te(Ee,$e,bt,Ie,Oe,Ze,Ke),Te($e,Me,yt,Ie,Ke,Ze,Fe)}})(0,oe,se.value,ve,fe,ye,Ae)},m.treemapDice=H,m.treemapResquarify=le,m.treemapSlice=$,m.treemapSliceDice=function(se,ve,fe,ye,Ae){(1&se.depth?$:H)(se,ve,fe,ye,Ae)},m.treemapSquarify=ie,Object.defineProperty(m,"__esModule",{value:!0})})},{}],116:[function(g,Q,X){(function(m,v){typeof X=="object"&&Q!==void 0?v(X,g("d3-color")):v((m=m||self).d3=m.d3||{},m.d3)})(this,function(m,v){function k(K,te,ie,le,se){var ve=K*K,fe=ve*K;return((1-3*K+3*ve-fe)*te+(4-6*ve+3*fe)*ie+(1+3*K+3*ve-3*fe)*le+fe*se)/6}function x(K){var te=K.length-1;return function(ie){var le=ie<=0?ie=0:ie>=1?(ie=1,te-1):Math.floor(ie*te),se=K[le],ve=K[le+1],fe=le>0?K[le-1]:2*se-ve,ye=le<te-1?K[le+2]:2*ve-se;return k((ie-le/te)*te,fe,se,ve,ye)}}function e(K){var te=K.length;return function(ie){var le=Math.floor(((ie%=1)<0?++ie:ie)*te),se=K[(le+te-1)%te],ve=K[le%te],fe=K[(le+1)%te],ye=K[(le+2)%te];return k((ie-le/te)*te,se,ve,fe,ye)}}function t(K){return function(){return K}}function r(K,te){return function(ie){return K+ie*te}}function l(K,te){var ie=te-K;return ie?r(K,ie>180||ie<-180?ie-360*Math.round(ie/360):ie):t(isNaN(K)?te:K)}function n(K){return(K=+K)==1?d:function(te,ie){return ie-te?function(le,se,ve){return le=Math.pow(le,ve),se=Math.pow(se,ve)-le,ve=1/ve,function(fe){return Math.pow(le+fe*se,ve)}}(te,ie,K):t(isNaN(te)?ie:te)}}function d(K,te){var ie=te-K;return ie?r(K,ie):t(isNaN(K)?te:K)}var u=function K(te){var ie=n(te);function le(se,ve){var fe=ie((se=v.rgb(se)).r,(ve=v.rgb(ve)).r),ye=ie(se.g,ve.g),Ae=ie(se.b,ve.b),pe=d(se.opacity,ve.opacity);return function(ge){return se.r=fe(ge),se.g=ye(ge),se.b=Ae(ge),se.opacity=pe(ge),se+""}}return le.gamma=K,le}(1);function o(K){return function(te){var ie,le,se=te.length,ve=new Array(se),fe=new Array(se),ye=new Array(se);for(ie=0;ie<se;++ie)le=v.rgb(te[ie]),ve[ie]=le.r||0,fe[ie]=le.g||0,ye[ie]=le.b||0;return ve=K(ve),fe=K(fe),ye=K(ye),le.opacity=1,function(Ae){return le.r=ve(Ae),le.g=fe(Ae),le.b=ye(Ae),le+""}}}var h=o(x),s=o(e);function a(K,te){te||(te=[]);var ie,le=K?Math.min(te.length,K.length):0,se=te.slice();return function(ve){for(ie=0;ie<le;++ie)se[ie]=K[ie]*(1-ve)+te[ie]*ve;return se}}function p(K){return ArrayBuffer.isView(K)&&!(K instanceof DataView)}function c(K,te){var ie,le=te?te.length:0,se=K?Math.min(le,K.length):0,ve=new Array(se),fe=new Array(le);for(ie=0;ie<se;++ie)ve[ie]=T(K[ie],te[ie]);for(;ie<le;++ie)fe[ie]=te[ie];return function(ye){for(ie=0;ie<se;++ie)fe[ie]=ve[ie](ye);return fe}}function i(K,te){var ie=new Date;return K=+K,te=+te,function(le){return ie.setTime(K*(1-le)+te*le),ie}}function y(K,te){return K=+K,te=+te,function(ie){return K*(1-ie)+te*ie}}function f(K,te){var ie,le={},se={};for(ie in K!==null&&typeof K=="object"||(K={}),te!==null&&typeof te=="object"||(te={}),te)ie in K?le[ie]=T(K[ie],te[ie]):se[ie]=te[ie];return function(ve){for(ie in le)se[ie]=le[ie](ve);return se}}var w=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,b=new RegExp(w.source,"g");function _(K,te){var ie,le,se,ve=w.lastIndex=b.lastIndex=0,fe=-1,ye=[],Ae=[];for(K+="",te+="";(ie=w.exec(K))&&(le=b.exec(te));)(se=le.index)>ve&&(se=te.slice(ve,se),ye[fe]?ye[fe]+=se:ye[++fe]=se),(ie=ie[0])===(le=le[0])?ye[fe]?ye[fe]+=le:ye[++fe]=le:(ye[++fe]=null,Ae.push({i:fe,x:y(ie,le)})),ve=b.lastIndex;return ve<te.length&&(se=te.slice(ve),ye[fe]?ye[fe]+=se:ye[++fe]=se),ye.length<2?Ae[0]?function(pe){return function(ge){return pe(ge)+""}}(Ae[0].x):function(pe){return function(){return pe}}(te):(te=Ae.length,function(pe){for(var ge,we=0;we<te;++we)ye[(ge=Ae[we]).i]=ge.x(pe);return ye.join("")})}function T(K,te){var ie,le=typeof te;return te==null||le==="boolean"?t(te):(le==="number"?y:le==="string"?(ie=v.color(te))?(te=ie,u):_:te instanceof v.color?u:te instanceof Date?i:p(te)?a:Array.isArray(te)?c:typeof te.valueOf!="function"&&typeof te.toString!="function"||isNaN(te)?f:y)(K,te)}var L,A,I,P,S=180/Math.PI,E={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function z(K,te,ie,le,se,ve){var fe,ye,Ae;return(fe=Math.sqrt(K*K+te*te))&&(K/=fe,te/=fe),(Ae=K*ie+te*le)&&(ie-=K*Ae,le-=te*Ae),(ye=Math.sqrt(ie*ie+le*le))&&(ie/=ye,le/=ye,Ae/=ye),K*le<te*ie&&(K=-K,te=-te,Ae=-Ae,fe=-fe),{translateX:se,translateY:ve,rotate:Math.atan2(te,K)*S,skewX:Math.atan(Ae)*S,scaleX:fe,scaleY:ye}}function D(K,te,ie,le){function se(ve){return ve.length?ve.pop()+" ":""}return function(ve,fe){var ye=[],Ae=[];return ve=K(ve),fe=K(fe),function(pe,ge,we,oe,de,Te){if(pe!==we||ge!==oe){var Ee=de.push("translate(",null,te,null,ie);Te.push({i:Ee-4,x:y(pe,we)},{i:Ee-2,x:y(ge,oe)})}else(we||oe)&&de.push("translate("+we+te+oe+ie)}(ve.translateX,ve.translateY,fe.translateX,fe.translateY,ye,Ae),function(pe,ge,we,oe){pe!==ge?(pe-ge>180?ge+=360:ge-pe>180&&(pe+=360),oe.push({i:we.push(se(we)+"rotate(",null,le)-2,x:y(pe,ge)})):ge&&we.push(se(we)+"rotate("+ge+le)}(ve.rotate,fe.rotate,ye,Ae),function(pe,ge,we,oe){pe!==ge?oe.push({i:we.push(se(we)+"skewX(",null,le)-2,x:y(pe,ge)}):ge&&we.push(se(we)+"skewX("+ge+le)}(ve.skewX,fe.skewX,ye,Ae),function(pe,ge,we,oe,de,Te){if(pe!==we||ge!==oe){var Ee=de.push(se(de)+"scale(",null,",",null,")");Te.push({i:Ee-4,x:y(pe,we)},{i:Ee-2,x:y(ge,oe)})}else we===1&&oe===1||de.push(se(de)+"scale("+we+","+oe+")")}(ve.scaleX,ve.scaleY,fe.scaleX,fe.scaleY,ye,Ae),ve=fe=null,function(pe){for(var ge,we=-1,oe=Ae.length;++we<oe;)ye[(ge=Ae[we]).i]=ge.x(pe);return ye.join("")}}}var U=D(function(K){return K==="none"?E:(L||(L=document.createElement("DIV"),A=document.documentElement,I=document.defaultView),L.style.transform=K,K=I.getComputedStyle(A.appendChild(L),null).getPropertyValue("transform"),A.removeChild(L),z(+(K=K.slice(7,-1).split(","))[0],+K[1],+K[2],+K[3],+K[4],+K[5]))},"px, ","px)","deg)"),H=D(function(K){return K==null?E:(P||(P=document.createElementNS("http://www.w3.org/2000/svg","g")),P.setAttribute("transform",K),(K=P.transform.baseVal.consolidate())?z((K=K.matrix).a,K.b,K.c,K.d,K.e,K.f):E)},", ",")",")"),Y=Math.SQRT2;function J(K){return((K=Math.exp(K))+1/K)/2}function W(K){return function(te,ie){var le=K((te=v.hsl(te)).h,(ie=v.hsl(ie)).h),se=d(te.s,ie.s),ve=d(te.l,ie.l),fe=d(te.opacity,ie.opacity);return function(ye){return te.h=le(ye),te.s=se(ye),te.l=ve(ye),te.opacity=fe(ye),te+""}}}var Z=W(l),re=W(d);function V(K){return function(te,ie){var le=K((te=v.hcl(te)).h,(ie=v.hcl(ie)).h),se=d(te.c,ie.c),ve=d(te.l,ie.l),fe=d(te.opacity,ie.opacity);return function(ye){return te.h=le(ye),te.c=se(ye),te.l=ve(ye),te.opacity=fe(ye),te+""}}}var B=V(l),j=V(d);function ee(K){return function te(ie){function le(se,ve){var fe=K((se=v.cubehelix(se)).h,(ve=v.cubehelix(ve)).h),ye=d(se.s,ve.s),Ae=d(se.l,ve.l),pe=d(se.opacity,ve.opacity);return function(ge){return se.h=fe(ge),se.s=ye(ge),se.l=Ae(Math.pow(ge,ie)),se.opacity=pe(ge),se+""}}return ie=+ie,le.gamma=te,le}(1)}var N=ee(l),$=ee(d);m.interpolate=T,m.interpolateArray=function(K,te){return(p(te)?a:c)(K,te)},m.interpolateBasis=x,m.interpolateBasisClosed=e,m.interpolateCubehelix=N,m.interpolateCubehelixLong=$,m.interpolateDate=i,m.interpolateDiscrete=function(K){var te=K.length;return function(ie){return K[Math.max(0,Math.min(te-1,Math.floor(ie*te)))]}},m.interpolateHcl=B,m.interpolateHclLong=j,m.interpolateHsl=Z,m.interpolateHslLong=re,m.interpolateHue=function(K,te){var ie=l(+K,+te);return function(le){var se=ie(le);return se-360*Math.floor(se/360)}},m.interpolateLab=function(K,te){var ie=d((K=v.lab(K)).l,(te=v.lab(te)).l),le=d(K.a,te.a),se=d(K.b,te.b),ve=d(K.opacity,te.opacity);return function(fe){return K.l=ie(fe),K.a=le(fe),K.b=se(fe),K.opacity=ve(fe),K+""}},m.interpolateNumber=y,m.interpolateNumberArray=a,m.interpolateObject=f,m.interpolateRgb=u,m.interpolateRgbBasis=h,m.interpolateRgbBasisClosed=s,m.interpolateRound=function(K,te){return K=+K,te=+te,function(ie){return Math.round(K*(1-ie)+te*ie)}},m.interpolateString=_,m.interpolateTransformCss=U,m.interpolateTransformSvg=H,m.interpolateZoom=function(K,te){var ie,le,se=K[0],ve=K[1],fe=K[2],ye=te[0],Ae=te[1],pe=te[2],ge=ye-se,we=Ae-ve,oe=ge*ge+we*we;if(oe<1e-12)le=Math.log(pe/fe)/Y,ie=function(Ie){return[se+Ie*ge,ve+Ie*we,fe*Math.exp(Y*Ie*le)]};else{var de=Math.sqrt(oe),Te=(pe*pe-fe*fe+4*oe)/(2*fe*2*de),Ee=(pe*pe-fe*fe-4*oe)/(2*pe*2*de),Me=Math.log(Math.sqrt(Te*Te+1)-Te),De=Math.log(Math.sqrt(Ee*Ee+1)-Ee);le=(De-Me)/Y,ie=function(Ie){var Oe,Ze=Ie*le,Fe=J(Me),Pe=fe/(2*de)*(Fe*(Oe=Y*Ze+Me,((Oe=Math.exp(2*Oe))-1)/(Oe+1))-function(ze){return((ze=Math.exp(ze))-1/ze)/2}(Me));return[se+Pe*ge,ve+Pe*we,fe*Fe/J(Y*Ze+Me)]}}return ie.duration=1e3*le,ie},m.piecewise=function(K,te){for(var ie=0,le=te.length-1,se=te[0],ve=new Array(le<0?0:le);ie<le;)ve[ie]=K(se,se=te[++ie]);return function(fe){var ye=Math.max(0,Math.min(le-1,Math.floor(fe*=le)));return ve[ye](fe-ye)}},m.quantize=function(K,te){for(var ie=new Array(te),le=0;le<te;++le)ie[le]=K(le/(te-1));return ie},Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-color":109}],117:[function(g,Q,X){(function(m,v){v(typeof X=="object"&&Q!==void 0?X:(m=m||self).d3=m.d3||{})})(this,function(m){var v=Math.PI,k=2*v,x=k-1e-6;function e(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function t(){return new e}e.prototype=t.prototype={constructor:e,moveTo:function(r,l){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+l)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(r,l){this._+="L"+(this._x1=+r)+","+(this._y1=+l)},quadraticCurveTo:function(r,l,n,d){this._+="Q"+ +r+","+ +l+","+(this._x1=+n)+","+(this._y1=+d)},bezierCurveTo:function(r,l,n,d,u,o){this._+="C"+ +r+","+ +l+","+ +n+","+ +d+","+(this._x1=+u)+","+(this._y1=+o)},arcTo:function(r,l,n,d,u){r=+r,l=+l,n=+n,d=+d,u=+u;var o=this._x1,h=this._y1,s=n-r,a=d-l,p=o-r,c=h-l,i=p*p+c*c;if(u<0)throw new Error("negative radius: "+u);if(this._x1===null)this._+="M"+(this._x1=r)+","+(this._y1=l);else if(i>1e-6)if(Math.abs(c*s-a*p)>1e-6&&u){var y=n-o,f=d-h,w=s*s+a*a,b=y*y+f*f,_=Math.sqrt(w),T=Math.sqrt(i),L=u*Math.tan((v-Math.acos((w+i-b)/(2*_*T)))/2),A=L/T,I=L/_;Math.abs(A-1)>1e-6&&(this._+="L"+(r+A*p)+","+(l+A*c)),this._+="A"+u+","+u+",0,0,"+ +(c*y>p*f)+","+(this._x1=r+I*s)+","+(this._y1=l+I*a)}else this._+="L"+(this._x1=r)+","+(this._y1=l)},arc:function(r,l,n,d,u,o){r=+r,l=+l,o=!!o;var h=(n=+n)*Math.cos(d),s=n*Math.sin(d),a=r+h,p=l+s,c=1^o,i=o?d-u:u-d;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+a+","+p:(Math.abs(this._x1-a)>1e-6||Math.abs(this._y1-p)>1e-6)&&(this._+="L"+a+","+p),n&&(i<0&&(i=i%k+k),i>x?this._+="A"+n+","+n+",0,1,"+c+","+(r-h)+","+(l-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=a)+","+(this._y1=p):i>1e-6&&(this._+="A"+n+","+n+",0,"+ +(i>=v)+","+c+","+(this._x1=r+n*Math.cos(u))+","+(this._y1=l+n*Math.sin(u))))},rect:function(r,l,n,d){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+l)+"h"+ +n+"v"+ +d+"h"+-n+"Z"},toString:function(){return this._}},m.path=t,Object.defineProperty(m,"__esModule",{value:!0})})},{}],118:[function(g,Q,X){(function(m,v){v(typeof X=="object"&&Q!==void 0?X:(m=m||self).d3=m.d3||{})})(this,function(m){function v(d,u,o,h){if(isNaN(u)||isNaN(o))return d;var s,a,p,c,i,y,f,w,b,_=d._root,T={data:h},L=d._x0,A=d._y0,I=d._x1,P=d._y1;if(!_)return d._root=T,d;for(;_.length;)if((y=u>=(a=(L+I)/2))?L=a:I=a,(f=o>=(p=(A+P)/2))?A=p:P=p,s=_,!(_=_[w=f<<1|y]))return s[w]=T,d;if(c=+d._x.call(null,_.data),i=+d._y.call(null,_.data),u===c&&o===i)return T.next=_,s?s[w]=T:d._root=T,d;do s=s?s[w]=new Array(4):d._root=new Array(4),(y=u>=(a=(L+I)/2))?L=a:I=a,(f=o>=(p=(A+P)/2))?A=p:P=p;while((w=f<<1|y)==(b=(i>=p)<<1|c>=a));return s[b]=_,s[w]=T,d}function k(d,u,o,h,s){this.node=d,this.x0=u,this.y0=o,this.x1=h,this.y1=s}function x(d){return d[0]}function e(d){return d[1]}function t(d,u,o){var h=new r(u==null?x:u,o==null?e:o,NaN,NaN,NaN,NaN);return d==null?h:h.addAll(d)}function r(d,u,o,h,s,a){this._x=d,this._y=u,this._x0=o,this._y0=h,this._x1=s,this._y1=a,this._root=void 0}function l(d){for(var u={data:d.data},o=u;d=d.next;)o=o.next={data:d.data};return u}var n=t.prototype=r.prototype;n.copy=function(){var d,u,o=new r(this._x,this._y,this._x0,this._y0,this._x1,this._y1),h=this._root;if(!h)return o;if(!h.length)return o._root=l(h),o;for(d=[{source:h,target:o._root=new Array(4)}];h=d.pop();)for(var s=0;s<4;++s)(u=h.source[s])&&(u.length?d.push({source:u,target:h.target[s]=new Array(4)}):h.target[s]=l(u));return o},n.add=function(d){var u=+this._x.call(null,d),o=+this._y.call(null,d);return v(this.cover(u,o),u,o,d)},n.addAll=function(d){var u,o,h,s,a=d.length,p=new Array(a),c=new Array(a),i=1/0,y=1/0,f=-1/0,w=-1/0;for(o=0;o<a;++o)isNaN(h=+this._x.call(null,u=d[o]))||isNaN(s=+this._y.call(null,u))||(p[o]=h,c[o]=s,h<i&&(i=h),h>f&&(f=h),s<y&&(y=s),s>w&&(w=s));if(i>f||y>w)return this;for(this.cover(i,y).cover(f,w),o=0;o<a;++o)v(this,p[o],c[o],d[o]);return this},n.cover=function(d,u){if(isNaN(d=+d)||isNaN(u=+u))return this;var o=this._x0,h=this._y0,s=this._x1,a=this._y1;if(isNaN(o))s=(o=Math.floor(d))+1,a=(h=Math.floor(u))+1;else{for(var p,c,i=s-o,y=this._root;o>d||d>=s||h>u||u>=a;)switch(c=(u<h)<<1|d<o,(p=new Array(4))[c]=y,y=p,i*=2,c){case 0:s=o+i,a=h+i;break;case 1:o=s-i,a=h+i;break;case 2:s=o+i,h=a-i;break;case 3:o=s-i,h=a-i}this._root&&this._root.length&&(this._root=y)}return this._x0=o,this._y0=h,this._x1=s,this._y1=a,this},n.data=function(){var d=[];return this.visit(function(u){if(!u.length)do d.push(u.data);while(u=u.next)}),d},n.extent=function(d){return arguments.length?this.cover(+d[0][0],+d[0][1]).cover(+d[1][0],+d[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},n.find=function(d,u,o){var h,s,a,p,c,i,y,f=this._x0,w=this._y0,b=this._x1,_=this._y1,T=[],L=this._root;for(L&&T.push(new k(L,f,w,b,_)),o==null?o=1/0:(f=d-o,w=u-o,b=d+o,_=u+o,o*=o);i=T.pop();)if(!(!(L=i.node)||(s=i.x0)>b||(a=i.y0)>_||(p=i.x1)<f||(c=i.y1)<w))if(L.length){var A=(s+p)/2,I=(a+c)/2;T.push(new k(L[3],A,I,p,c),new k(L[2],s,I,A,c),new k(L[1],A,a,p,I),new k(L[0],s,a,A,I)),(y=(u>=I)<<1|d>=A)&&(i=T[T.length-1],T[T.length-1]=T[T.length-1-y],T[T.length-1-y]=i)}else{var P=d-+this._x.call(null,L.data),S=u-+this._y.call(null,L.data),E=P*P+S*S;if(E<o){var z=Math.sqrt(o=E);f=d-z,w=u-z,b=d+z,_=u+z,h=L.data}}return h},n.remove=function(d){if(isNaN(a=+this._x.call(null,d))||isNaN(p=+this._y.call(null,d)))return this;var u,o,h,s,a,p,c,i,y,f,w,b,_=this._root,T=this._x0,L=this._y0,A=this._x1,I=this._y1;if(!_)return this;if(_.length)for(;;){if((y=a>=(c=(T+A)/2))?T=c:A=c,(f=p>=(i=(L+I)/2))?L=i:I=i,u=_,!(_=_[w=f<<1|y]))return this;if(!_.length)break;(u[w+1&3]||u[w+2&3]||u[w+3&3])&&(o=u,b=w)}for(;_.data!==d;)if(h=_,!(_=_.next))return this;return(s=_.next)&&delete _.next,h?(s?h.next=s:delete h.next,this):u?(s?u[w]=s:delete u[w],(_=u[0]||u[1]||u[2]||u[3])&&_===(u[3]||u[2]||u[1]||u[0])&&!_.length&&(o?o[b]=_:this._root=_),this):(this._root=s,this)},n.removeAll=function(d){for(var u=0,o=d.length;u<o;++u)this.remove(d[u]);return this},n.root=function(){return this._root},n.size=function(){var d=0;return this.visit(function(u){if(!u.length)do++d;while(u=u.next)}),d},n.visit=function(d){var u,o,h,s,a,p,c=[],i=this._root;for(i&&c.push(new k(i,this._x0,this._y0,this._x1,this._y1));u=c.pop();)if(!d(i=u.node,h=u.x0,s=u.y0,a=u.x1,p=u.y1)&&i.length){var y=(h+a)/2,f=(s+p)/2;(o=i[3])&&c.push(new k(o,y,f,a,p)),(o=i[2])&&c.push(new k(o,h,f,y,p)),(o=i[1])&&c.push(new k(o,y,s,a,f)),(o=i[0])&&c.push(new k(o,h,s,y,f))}return this},n.visitAfter=function(d){var u,o=[],h=[];for(this._root&&o.push(new k(this._root,this._x0,this._y0,this._x1,this._y1));u=o.pop();){var s=u.node;if(s.length){var a,p=u.x0,c=u.y0,i=u.x1,y=u.y1,f=(p+i)/2,w=(c+y)/2;(a=s[0])&&o.push(new k(a,p,c,f,w)),(a=s[1])&&o.push(new k(a,f,c,i,w)),(a=s[2])&&o.push(new k(a,p,w,f,y)),(a=s[3])&&o.push(new k(a,f,w,i,y))}h.push(u)}for(;u=h.pop();)d(u.node,u.x0,u.y0,u.x1,u.y1);return this},n.x=function(d){return arguments.length?(this._x=d,this):this._x},n.y=function(d){return arguments.length?(this._y=d,this):this._y},m.quadtree=t,Object.defineProperty(m,"__esModule",{value:!0})})},{}],119:[function(g,Q,X){(function(m,v){typeof X=="object"&&Q!==void 0?v(X,g("d3-path")):v((m=m||self).d3=m.d3||{},m.d3)})(this,function(m,v){function k(Se){return function(){return Se}}var x=Math.abs,e=Math.atan2,t=Math.cos,r=Math.max,l=Math.min,n=Math.sin,d=Math.sqrt,u=Math.PI,o=u/2,h=2*u;function s(Se){return Se>1?0:Se<-1?u:Math.acos(Se)}function a(Se){return Se>=1?o:Se<=-1?-o:Math.asin(Se)}function p(Se){return Se.innerRadius}function c(Se){return Se.outerRadius}function i(Se){return Se.startAngle}function y(Se){return Se.endAngle}function f(Se){return Se&&Se.padAngle}function w(Se,We,nt,ft,Mt,Nt,Zt,Ut){var fr=nt-Se,Tr=ft-We,ur=Zt-Mt,Kt=Ut-Nt,Qt=Kt*fr-ur*Tr;if(!(Qt*Qt<1e-12))return[Se+(Qt=(ur*(We-Nt)-Kt*(Se-Mt))/Qt)*fr,We+Qt*Tr]}function b(Se,We,nt,ft,Mt,Nt,Zt){var Ut=Se-nt,fr=We-ft,Tr=(Zt?Nt:-Nt)/d(Ut*Ut+fr*fr),ur=Tr*fr,Kt=-Tr*Ut,Qt=Se+ur,er=We+Kt,cr=nt+ur,gr=ft+Kt,Mr=(Qt+cr)/2,Ir=(er+gr)/2,Fr=cr-Qt,Yr=gr-er,fn=Fr*Fr+Yr*Yr,en=Mt-Nt,Rn=Qt*gr-cr*er,nn=(Yr<0?-1:1)*d(r(0,en*en*fn-Rn*Rn)),yn=(Rn*Yr-Fr*nn)/fn,bn=(-Rn*Fr-Yr*nn)/fn,ta=(Rn*Yr+Fr*nn)/fn,Br=(-Rn*Fr+Yr*nn)/fn,rn=yn-Mr,gn=bn-Ir,Qr=ta-Mr,un=Br-Ir;return rn*rn+gn*gn>Qr*Qr+un*un&&(yn=ta,bn=Br),{cx:yn,cy:bn,x01:-ur,y01:-Kt,x11:yn*(Mt/en-1),y11:bn*(Mt/en-1)}}function _(Se){this._context=Se}function T(Se){return new _(Se)}function L(Se){return Se[0]}function A(Se){return Se[1]}function I(){var Se=L,We=A,nt=k(!0),ft=null,Mt=T,Nt=null;function Zt(Ut){var fr,Tr,ur,Kt=Ut.length,Qt=!1;for(ft==null&&(Nt=Mt(ur=v.path())),fr=0;fr<=Kt;++fr)!(fr<Kt&&nt(Tr=Ut[fr],fr,Ut))===Qt&&((Qt=!Qt)?Nt.lineStart():Nt.lineEnd()),Qt&&Nt.point(+Se(Tr,fr,Ut),+We(Tr,fr,Ut));if(ur)return Nt=null,ur+""||null}return Zt.x=function(Ut){return arguments.length?(Se=typeof Ut=="function"?Ut:k(+Ut),Zt):Se},Zt.y=function(Ut){return arguments.length?(We=typeof Ut=="function"?Ut:k(+Ut),Zt):We},Zt.defined=function(Ut){return arguments.length?(nt=typeof Ut=="function"?Ut:k(!!Ut),Zt):nt},Zt.curve=function(Ut){return arguments.length?(Mt=Ut,ft!=null&&(Nt=Mt(ft)),Zt):Mt},Zt.context=function(Ut){return arguments.length?(Ut==null?ft=Nt=null:Nt=Mt(ft=Ut),Zt):ft},Zt}function P(){var Se=L,We=null,nt=k(0),ft=A,Mt=k(!0),Nt=null,Zt=T,Ut=null;function fr(ur){var Kt,Qt,er,cr,gr,Mr=ur.length,Ir=!1,Fr=new Array(Mr),Yr=new Array(Mr);for(Nt==null&&(Ut=Zt(gr=v.path())),Kt=0;Kt<=Mr;++Kt){if(!(Kt<Mr&&Mt(cr=ur[Kt],Kt,ur))===Ir)if(Ir=!Ir)Qt=Kt,Ut.areaStart(),Ut.lineStart();else{for(Ut.lineEnd(),Ut.lineStart(),er=Kt-1;er>=Qt;--er)Ut.point(Fr[er],Yr[er]);Ut.lineEnd(),Ut.areaEnd()}Ir&&(Fr[Kt]=+Se(cr,Kt,ur),Yr[Kt]=+nt(cr,Kt,ur),Ut.point(We?+We(cr,Kt,ur):Fr[Kt],ft?+ft(cr,Kt,ur):Yr[Kt]))}if(gr)return Ut=null,gr+""||null}function Tr(){return I().defined(Mt).curve(Zt).context(Nt)}return fr.x=function(ur){return arguments.length?(Se=typeof ur=="function"?ur:k(+ur),We=null,fr):Se},fr.x0=function(ur){return arguments.length?(Se=typeof ur=="function"?ur:k(+ur),fr):Se},fr.x1=function(ur){return arguments.length?(We=ur==null?null:typeof ur=="function"?ur:k(+ur),fr):We},fr.y=function(ur){return arguments.length?(nt=typeof ur=="function"?ur:k(+ur),ft=null,fr):nt},fr.y0=function(ur){return arguments.length?(nt=typeof ur=="function"?ur:k(+ur),fr):nt},fr.y1=function(ur){return arguments.length?(ft=ur==null?null:typeof ur=="function"?ur:k(+ur),fr):ft},fr.lineX0=fr.lineY0=function(){return Tr().x(Se).y(nt)},fr.lineY1=function(){return Tr().x(Se).y(ft)},fr.lineX1=function(){return Tr().x(We).y(nt)},fr.defined=function(ur){return arguments.length?(Mt=typeof ur=="function"?ur:k(!!ur),fr):Mt},fr.curve=function(ur){return arguments.length?(Zt=ur,Nt!=null&&(Ut=Zt(Nt)),fr):Zt},fr.context=function(ur){return arguments.length?(ur==null?Nt=Ut=null:Ut=Zt(Nt=ur),fr):Nt},fr}function S(Se,We){return We<Se?-1:We>Se?1:We>=Se?0:NaN}function E(Se){return Se}_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(Se,We){switch(Se=+Se,We=+We,this._point){case 0:this._point=1,this._line?this._context.lineTo(Se,We):this._context.moveTo(Se,We);break;case 1:this._point=2;default:this._context.lineTo(Se,We)}}};var z=U(T);function D(Se){this._curve=Se}function U(Se){function We(nt){return new D(Se(nt))}return We._curve=Se,We}function H(Se){var We=Se.curve;return Se.angle=Se.x,delete Se.x,Se.radius=Se.y,delete Se.y,Se.curve=function(nt){return arguments.length?We(U(nt)):We()._curve},Se}function Y(){return H(I().curve(z))}function J(){var Se=P().curve(z),We=Se.curve,nt=Se.lineX0,ft=Se.lineX1,Mt=Se.lineY0,Nt=Se.lineY1;return Se.angle=Se.x,delete Se.x,Se.startAngle=Se.x0,delete Se.x0,Se.endAngle=Se.x1,delete Se.x1,Se.radius=Se.y,delete Se.y,Se.innerRadius=Se.y0,delete Se.y0,Se.outerRadius=Se.y1,delete Se.y1,Se.lineStartAngle=function(){return H(nt())},delete Se.lineX0,Se.lineEndAngle=function(){return H(ft())},delete Se.lineX1,Se.lineInnerRadius=function(){return H(Mt())},delete Se.lineY0,Se.lineOuterRadius=function(){return H(Nt())},delete Se.lineY1,Se.curve=function(Zt){return arguments.length?We(U(Zt)):We()._curve},Se}function W(Se,We){return[(We=+We)*Math.cos(Se-=Math.PI/2),We*Math.sin(Se)]}D.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(Se,We){this._curve.point(We*Math.sin(Se),We*-Math.cos(Se))}};var Z=Array.prototype.slice;function re(Se){return Se.source}function V(Se){return Se.target}function B(Se){var We=re,nt=V,ft=L,Mt=A,Nt=null;function Zt(){var Ut,fr=Z.call(arguments),Tr=We.apply(this,fr),ur=nt.apply(this,fr);if(Nt||(Nt=Ut=v.path()),Se(Nt,+ft.apply(this,(fr[0]=Tr,fr)),+Mt.apply(this,fr),+ft.apply(this,(fr[0]=ur,fr)),+Mt.apply(this,fr)),Ut)return Nt=null,Ut+""||null}return Zt.source=function(Ut){return arguments.length?(We=Ut,Zt):We},Zt.target=function(Ut){return arguments.length?(nt=Ut,Zt):nt},Zt.x=function(Ut){return arguments.length?(ft=typeof Ut=="function"?Ut:k(+Ut),Zt):ft},Zt.y=function(Ut){return arguments.length?(Mt=typeof Ut=="function"?Ut:k(+Ut),Zt):Mt},Zt.context=function(Ut){return arguments.length?(Nt=Ut==null?null:Ut,Zt):Nt},Zt}function j(Se,We,nt,ft,Mt){Se.moveTo(We,nt),Se.bezierCurveTo(We=(We+ft)/2,nt,We,Mt,ft,Mt)}function ee(Se,We,nt,ft,Mt){Se.moveTo(We,nt),Se.bezierCurveTo(We,nt=(nt+Mt)/2,ft,nt,ft,Mt)}function N(Se,We,nt,ft,Mt){var Nt=W(We,nt),Zt=W(We,nt=(nt+Mt)/2),Ut=W(ft,nt),fr=W(ft,Mt);Se.moveTo(Nt[0],Nt[1]),Se.bezierCurveTo(Zt[0],Zt[1],Ut[0],Ut[1],fr[0],fr[1])}var $={draw:function(Se,We){var nt=Math.sqrt(We/u);Se.moveTo(nt,0),Se.arc(0,0,nt,0,h)}},K={draw:function(Se,We){var nt=Math.sqrt(We/5)/2;Se.moveTo(-3*nt,-nt),Se.lineTo(-nt,-nt),Se.lineTo(-nt,-3*nt),Se.lineTo(nt,-3*nt),Se.lineTo(nt,-nt),Se.lineTo(3*nt,-nt),Se.lineTo(3*nt,nt),Se.lineTo(nt,nt),Se.lineTo(nt,3*nt),Se.lineTo(-nt,3*nt),Se.lineTo(-nt,nt),Se.lineTo(-3*nt,nt),Se.closePath()}},te=Math.sqrt(1/3),ie=2*te,le={draw:function(Se,We){var nt=Math.sqrt(We/ie),ft=nt*te;Se.moveTo(0,-nt),Se.lineTo(ft,0),Se.lineTo(0,nt),Se.lineTo(-ft,0),Se.closePath()}},se=Math.sin(u/10)/Math.sin(7*u/10),ve=Math.sin(h/10)*se,fe=-Math.cos(h/10)*se,ye={draw:function(Se,We){var nt=Math.sqrt(.8908130915292852*We),ft=ve*nt,Mt=fe*nt;Se.moveTo(0,-nt),Se.lineTo(ft,Mt);for(var Nt=1;Nt<5;++Nt){var Zt=h*Nt/5,Ut=Math.cos(Zt),fr=Math.sin(Zt);Se.lineTo(fr*nt,-Ut*nt),Se.lineTo(Ut*ft-fr*Mt,fr*ft+Ut*Mt)}Se.closePath()}},Ae={draw:function(Se,We){var nt=Math.sqrt(We),ft=-nt/2;Se.rect(ft,ft,nt,nt)}},pe=Math.sqrt(3),ge={draw:function(Se,We){var nt=-Math.sqrt(We/(3*pe));Se.moveTo(0,2*nt),Se.lineTo(-pe*nt,-nt),Se.lineTo(pe*nt,-nt),Se.closePath()}},we=-.5,oe=Math.sqrt(3)/2,de=1/Math.sqrt(12),Te=3*(de/2+1),Ee={draw:function(Se,We){var nt=Math.sqrt(We/Te),ft=nt/2,Mt=nt*de,Nt=ft,Zt=nt*de+nt,Ut=-Nt,fr=Zt;Se.moveTo(ft,Mt),Se.lineTo(Nt,Zt),Se.lineTo(Ut,fr),Se.lineTo(we*ft-oe*Mt,oe*ft+we*Mt),Se.lineTo(we*Nt-oe*Zt,oe*Nt+we*Zt),Se.lineTo(we*Ut-oe*fr,oe*Ut+we*fr),Se.lineTo(we*ft+oe*Mt,we*Mt-oe*ft),Se.lineTo(we*Nt+oe*Zt,we*Zt-oe*Nt),Se.lineTo(we*Ut+oe*fr,we*fr-oe*Ut),Se.closePath()}},Me=[$,K,le,Ae,ye,ge,Ee];function De(){}function Ie(Se,We,nt){Se._context.bezierCurveTo((2*Se._x0+Se._x1)/3,(2*Se._y0+Se._y1)/3,(Se._x0+2*Se._x1)/3,(Se._y0+2*Se._y1)/3,(Se._x0+4*Se._x1+We)/6,(Se._y0+4*Se._y1+nt)/6)}function Oe(Se){this._context=Se}function Ze(Se){this._context=Se}function Fe(Se){this._context=Se}function Pe(Se,We){this._basis=new Oe(Se),this._beta=We}Oe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ie(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(Se,We){switch(Se=+Se,We=+We,this._point){case 0:this._point=1,this._line?this._context.lineTo(Se,We):this._context.moveTo(Se,We);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ie(this,Se,We)}this._x0=this._x1,this._x1=Se,this._y0=this._y1,this._y1=We}},Ze.prototype={areaStart:De,areaEnd:De,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(Se,We){switch(Se=+Se,We=+We,this._point){case 0:this._point=1,this._x2=Se,this._y2=We;break;case 1:this._point=2,this._x3=Se,this._y3=We;break;case 2:this._point=3,this._x4=Se,this._y4=We,this._context.moveTo((this._x0+4*this._x1+Se)/6,(this._y0+4*this._y1+We)/6);break;default:Ie(this,Se,We)}this._x0=this._x1,this._x1=Se,this._y0=this._y1,this._y1=We}},Fe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(Se,We){switch(Se=+Se,We=+We,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var nt=(this._x0+4*this._x1+Se)/6,ft=(this._y0+4*this._y1+We)/6;this._line?this._context.lineTo(nt,ft):this._context.moveTo(nt,ft);break;case 3:this._point=4;default:Ie(this,Se,We)}this._x0=this._x1,this._x1=Se,this._y0=this._y1,this._y1=We}},Pe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var Se=this._x,We=this._y,nt=Se.length-1;if(nt>0)for(var ft,Mt=Se[0],Nt=We[0],Zt=Se[nt]-Mt,Ut=We[nt]-Nt,fr=-1;++fr<=nt;)ft=fr/nt,this._basis.point(this._beta*Se[fr]+(1-this._beta)*(Mt+ft*Zt),this._beta*We[fr]+(1-this._beta)*(Nt+ft*Ut));this._x=this._y=null,this._basis.lineEnd()},point:function(Se,We){this._x.push(+Se),this._y.push(+We)}};var ze=function Se(We){function nt(ft){return We===1?new Oe(ft):new Pe(ft,We)}return nt.beta=function(ft){return Se(+ft)},nt}(.85);function Ge(Se,We,nt){Se._context.bezierCurveTo(Se._x1+Se._k*(Se._x2-Se._x0),Se._y1+Se._k*(Se._y2-Se._y0),Se._x2+Se._k*(Se._x1-We),Se._y2+Se._k*(Se._y1-nt),Se._x2,Se._y2)}function $e(Se,We){this._context=Se,this._k=(1-We)/6}$e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ge(this,this._x1,this._y1)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(Se,We){switch(Se=+Se,We=+We,this._point){case 0:this._point=1,this._line?this._context.lineTo(Se,We):this._context.moveTo(Se,We);break;case 1:this._point=2,this._x1=Se,this._y1=We;break;case 2:this._point=3;default:Ge(this,Se,We)}this._x0=this._x1,this._x1=this._x2,this._x2=Se,this._y0=this._y1,this._y1=this._y2,this._y2=We}};var ot=function Se(We){function nt(ft){return new $e(ft,We)}return nt.tension=function(ft){return Se(+ft)},nt}(0);function vt(Se,We){this._context=Se,this._k=(1-We)/6}vt.prototype={areaStart:De,areaEnd:De,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Se,We){switch(Se=+Se,We=+We,this._point){case 0:this._point=1,this._x3=Se,this._y3=We;break;case 1:this._point=2,this._context.moveTo(this._x4=Se,this._y4=We);break;case 2:this._point=3,this._x5=Se,this._y5=We;break;default:Ge(this,Se,We)}this._x0=this._x1,this._x1=this._x2,this._x2=Se,this._y0=this._y1,this._y1=this._y2,this._y2=We}};var bt=function Se(We){function nt(ft){return new vt(ft,We)}return nt.tension=function(ft){return Se(+ft)},nt}(0);function yt(Se,We){this._context=Se,this._k=(1-We)/6}yt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(Se,We){switch(Se=+Se,We=+We,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ge(this,Se,We)}this._x0=this._x1,this._x1=this._x2,this._x2=Se,this._y0=this._y1,this._y1=this._y2,this._y2=We}};var tt=function Se(We){function nt(ft){return new yt(ft,We)}return nt.tension=function(ft){return Se(+ft)},nt}(0);function Ke(Se,We,nt){var ft=Se._x1,Mt=Se._y1,Nt=Se._x2,Zt=Se._y2;if(Se._l01_a>1e-12){var Ut=2*Se._l01_2a+3*Se._l01_a*Se._l12_a+Se._l12_2a,fr=3*Se._l01_a*(Se._l01_a+Se._l12_a);ft=(ft*Ut-Se._x0*Se._l12_2a+Se._x2*Se._l01_2a)/fr,Mt=(Mt*Ut-Se._y0*Se._l12_2a+Se._y2*Se._l01_2a)/fr}if(Se._l23_a>1e-12){var Tr=2*Se._l23_2a+3*Se._l23_a*Se._l12_a+Se._l12_2a,ur=3*Se._l23_a*(Se._l23_a+Se._l12_a);Nt=(Nt*Tr+Se._x1*Se._l23_2a-We*Se._l12_2a)/ur,Zt=(Zt*Tr+Se._y1*Se._l23_2a-nt*Se._l12_2a)/ur}Se._context.bezierCurveTo(ft,Mt,Nt,Zt,Se._x2,Se._y2)}function mt(Se,We){this._context=Se,this._alpha=We}mt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(Se,We){if(Se=+Se,We=+We,this._point){var nt=this._x2-Se,ft=this._y2-We;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(nt*nt+ft*ft,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Se,We):this._context.moveTo(Se,We);break;case 1:this._point=2;break;case 2:this._point=3;default:Ke(this,Se,We)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Se,this._y0=this._y1,this._y1=this._y2,this._y2=We}};var Ft=function Se(We){function nt(ft){return We?new mt(ft,We):new $e(ft,0)}return nt.alpha=function(ft){return Se(+ft)},nt}(.5);function Vt(Se,We){this._context=Se,this._alpha=We}Vt.prototype={areaStart:De,areaEnd:De,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Se,We){if(Se=+Se,We=+We,this._point){var nt=this._x2-Se,ft=this._y2-We;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(nt*nt+ft*ft,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=Se,this._y3=We;break;case 1:this._point=2,this._context.moveTo(this._x4=Se,this._y4=We);break;case 2:this._point=3,this._x5=Se,this._y5=We;break;default:Ke(this,Se,We)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Se,this._y0=this._y1,this._y1=this._y2,this._y2=We}};var Xt=function Se(We){function nt(ft){return We?new Vt(ft,We):new vt(ft,0)}return nt.alpha=function(ft){return Se(+ft)},nt}(.5);function Gt(Se,We){this._context=Se,this._alpha=We}Gt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(Se,We){if(Se=+Se,We=+We,this._point){var nt=this._x2-Se,ft=this._y2-We;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(nt*nt+ft*ft,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ke(this,Se,We)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Se,this._y0=this._y1,this._y1=this._y2,this._y2=We}};var nr=function Se(We){function nt(ft){return We?new Gt(ft,We):new yt(ft,0)}return nt.alpha=function(ft){return Se(+ft)},nt}(.5);function It(Se){this._context=Se}function Be(Se){return Se<0?-1:1}function He(Se,We,nt){var ft=Se._x1-Se._x0,Mt=We-Se._x1,Nt=(Se._y1-Se._y0)/(ft||Mt<0&&-0),Zt=(nt-Se._y1)/(Mt||ft<0&&-0),Ut=(Nt*Mt+Zt*ft)/(ft+Mt);return(Be(Nt)+Be(Zt))*Math.min(Math.abs(Nt),Math.abs(Zt),.5*Math.abs(Ut))||0}function he(Se,We){var nt=Se._x1-Se._x0;return nt?(3*(Se._y1-Se._y0)/nt-We)/2:We}function be(Se,We,nt){var ft=Se._x0,Mt=Se._y0,Nt=Se._x1,Zt=Se._y1,Ut=(Nt-ft)/3;Se._context.bezierCurveTo(ft+Ut,Mt+Ut*We,Nt-Ut,Zt-Ut*nt,Nt,Zt)}function Re(Se){this._context=Se}function Ue(Se){this._context=new Xe(Se)}function Xe(Se){this._context=Se}function qe(Se){this._context=Se}function st(Se){var We,nt,ft=Se.length-1,Mt=new Array(ft),Nt=new Array(ft),Zt=new Array(ft);for(Mt[0]=0,Nt[0]=2,Zt[0]=Se[0]+2*Se[1],We=1;We<ft-1;++We)Mt[We]=1,Nt[We]=4,Zt[We]=4*Se[We]+2*Se[We+1];for(Mt[ft-1]=2,Nt[ft-1]=7,Zt[ft-1]=8*Se[ft-1]+Se[ft],We=1;We<ft;++We)nt=Mt[We]/Nt[We-1],Nt[We]-=nt,Zt[We]-=nt*Zt[We-1];for(Mt[ft-1]=Zt[ft-1]/Nt[ft-1],We=ft-2;We>=0;--We)Mt[We]=(Zt[We]-Mt[We+1])/Nt[We];for(Nt[ft-1]=(Se[ft]+Mt[ft-1])/2,We=0;We<ft-1;++We)Nt[We]=2*Se[We+1]-Mt[We+1];return[Mt,Nt]}function it(Se,We){this._context=Se,this._t=We}function Tt(Se,We){if((Mt=Se.length)>1)for(var nt,ft,Mt,Nt=1,Zt=Se[We[0]],Ut=Zt.length;Nt<Mt;++Nt)for(ft=Zt,Zt=Se[We[Nt]],nt=0;nt<Ut;++nt)Zt[nt][1]+=Zt[nt][0]=isNaN(ft[nt][1])?ft[nt][0]:ft[nt][1]}function Pt(Se){for(var We=Se.length,nt=new Array(We);--We>=0;)nt[We]=We;return nt}function rt(Se,We){return Se[We]}function ut(Se){var We=Se.map(Bt);return Pt(Se).sort(function(nt,ft){return We[nt]-We[ft]})}function Bt(Se){for(var We,nt=-1,ft=0,Mt=Se.length,Nt=-1/0;++nt<Mt;)(We=+Se[nt][1])>Nt&&(Nt=We,ft=nt);return ft}function wt(Se){var We=Se.map(Lt);return Pt(Se).sort(function(nt,ft){return We[nt]-We[ft]})}function Lt(Se){for(var We,nt=0,ft=-1,Mt=Se.length;++ft<Mt;)(We=+Se[ft][1])&&(nt+=We);return nt}It.prototype={areaStart:De,areaEnd:De,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(Se,We){Se=+Se,We=+We,this._point?this._context.lineTo(Se,We):(this._point=1,this._context.moveTo(Se,We))}},Re.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:be(this,this._t0,he(this,this._t0))}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(Se,We){var nt=NaN;if(We=+We,(Se=+Se)!==this._x1||We!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Se,We):this._context.moveTo(Se,We);break;case 1:this._point=2;break;case 2:this._point=3,be(this,he(this,nt=He(this,Se,We)),nt);break;default:be(this,this._t0,nt=He(this,Se,We))}this._x0=this._x1,this._x1=Se,this._y0=this._y1,this._y1=We,this._t0=nt}}},(Ue.prototype=Object.create(Re.prototype)).point=function(Se,We){Re.prototype.point.call(this,We,Se)},Xe.prototype={moveTo:function(Se,We){this._context.moveTo(We,Se)},closePath:function(){this._context.closePath()},lineTo:function(Se,We){this._context.lineTo(We,Se)},bezierCurveTo:function(Se,We,nt,ft,Mt,Nt){this._context.bezierCurveTo(We,Se,ft,nt,Nt,Mt)}},qe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var Se=this._x,We=this._y,nt=Se.length;if(nt)if(this._line?this._context.lineTo(Se[0],We[0]):this._context.moveTo(Se[0],We[0]),nt===2)this._context.lineTo(Se[1],We[1]);else for(var ft=st(Se),Mt=st(We),Nt=0,Zt=1;Zt<nt;++Nt,++Zt)this._context.bezierCurveTo(ft[0][Nt],Mt[0][Nt],ft[1][Nt],Mt[1][Nt],Se[Zt],We[Zt]);(this._line||this._line!==0&&nt===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(Se,We){this._x.push(+Se),this._y.push(+We)}},it.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(Se,We){switch(Se=+Se,We=+We,this._point){case 0:this._point=1,this._line?this._context.lineTo(Se,We):this._context.moveTo(Se,We);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,We),this._context.lineTo(Se,We);else{var nt=this._x*(1-this._t)+Se*this._t;this._context.lineTo(nt,this._y),this._context.lineTo(nt,We)}}this._x=Se,this._y=We}},m.arc=function(){var Se=p,We=c,nt=k(0),ft=null,Mt=i,Nt=y,Zt=f,Ut=null;function fr(){var Tr,ur,Kt=+Se.apply(this,arguments),Qt=+We.apply(this,arguments),er=Mt.apply(this,arguments)-o,cr=Nt.apply(this,arguments)-o,gr=x(cr-er),Mr=cr>er;if(Ut||(Ut=Tr=v.path()),Qt<Kt&&(ur=Qt,Qt=Kt,Kt=ur),Qt>1e-12)if(gr>h-1e-12)Ut.moveTo(Qt*t(er),Qt*n(er)),Ut.arc(0,0,Qt,er,cr,!Mr),Kt>1e-12&&(Ut.moveTo(Kt*t(cr),Kt*n(cr)),Ut.arc(0,0,Kt,cr,er,Mr));else{var Ir,Fr,Yr=er,fn=cr,en=er,Rn=cr,nn=gr,yn=gr,bn=Zt.apply(this,arguments)/2,ta=bn>1e-12&&(ft?+ft.apply(this,arguments):d(Kt*Kt+Qt*Qt)),Br=l(x(Qt-Kt)/2,+nt.apply(this,arguments)),rn=Br,gn=Br;if(ta>1e-12){var Qr=a(ta/Kt*n(bn)),un=a(ta/Qt*n(bn));(nn-=2*Qr)>1e-12?(en+=Qr*=Mr?1:-1,Rn-=Qr):(nn=0,en=Rn=(er+cr)/2),(yn-=2*un)>1e-12?(Yr+=un*=Mr?1:-1,fn-=un):(yn=0,Yr=fn=(er+cr)/2)}var Gn=Qt*t(Yr),wn=Qt*n(Yr),Ln=Kt*t(Rn),oa=Kt*n(Rn);if(Br>1e-12){var tr,mr=Qt*t(fn),Ct=Qt*n(fn),or=Kt*t(en),hr=Kt*n(en);if(gr<u&&(tr=w(Gn,wn,or,hr,mr,Ct,Ln,oa))){var Rr=Gn-tr[0],zr=wn-tr[1],Or=mr-tr[0],Ar=Ct-tr[1],vr=1/n(s((Rr*Or+zr*Ar)/(d(Rr*Rr+zr*zr)*d(Or*Or+Ar*Ar)))/2),xr=d(tr[0]*tr[0]+tr[1]*tr[1]);rn=l(Br,(Kt-xr)/(vr-1)),gn=l(Br,(Qt-xr)/(vr+1))}}yn>1e-12?gn>1e-12?(Ir=b(or,hr,Gn,wn,Qt,gn,Mr),Fr=b(mr,Ct,Ln,oa,Qt,gn,Mr),Ut.moveTo(Ir.cx+Ir.x01,Ir.cy+Ir.y01),gn<Br?Ut.arc(Ir.cx,Ir.cy,gn,e(Ir.y01,Ir.x01),e(Fr.y01,Fr.x01),!Mr):(Ut.arc(Ir.cx,Ir.cy,gn,e(Ir.y01,Ir.x01),e(Ir.y11,Ir.x11),!Mr),Ut.arc(0,0,Qt,e(Ir.cy+Ir.y11,Ir.cx+Ir.x11),e(Fr.cy+Fr.y11,Fr.cx+Fr.x11),!Mr),Ut.arc(Fr.cx,Fr.cy,gn,e(Fr.y11,Fr.x11),e(Fr.y01,Fr.x01),!Mr))):(Ut.moveTo(Gn,wn),Ut.arc(0,0,Qt,Yr,fn,!Mr)):Ut.moveTo(Gn,wn),Kt>1e-12&&nn>1e-12?rn>1e-12?(Ir=b(Ln,oa,mr,Ct,Kt,-rn,Mr),Fr=b(Gn,wn,or,hr,Kt,-rn,Mr),Ut.lineTo(Ir.cx+Ir.x01,Ir.cy+Ir.y01),rn<Br?Ut.arc(Ir.cx,Ir.cy,rn,e(Ir.y01,Ir.x01),e(Fr.y01,Fr.x01),!Mr):(Ut.arc(Ir.cx,Ir.cy,rn,e(Ir.y01,Ir.x01),e(Ir.y11,Ir.x11),!Mr),Ut.arc(0,0,Kt,e(Ir.cy+Ir.y11,Ir.cx+Ir.x11),e(Fr.cy+Fr.y11,Fr.cx+Fr.x11),Mr),Ut.arc(Fr.cx,Fr.cy,rn,e(Fr.y11,Fr.x11),e(Fr.y01,Fr.x01),!Mr))):Ut.arc(0,0,Kt,Rn,en,Mr):Ut.lineTo(Ln,oa)}else Ut.moveTo(0,0);if(Ut.closePath(),Tr)return Ut=null,Tr+""||null}return fr.centroid=function(){var Tr=(+Se.apply(this,arguments)+ +We.apply(this,arguments))/2,ur=(+Mt.apply(this,arguments)+ +Nt.apply(this,arguments))/2-u/2;return[t(ur)*Tr,n(ur)*Tr]},fr.innerRadius=function(Tr){return arguments.length?(Se=typeof Tr=="function"?Tr:k(+Tr),fr):Se},fr.outerRadius=function(Tr){return arguments.length?(We=typeof Tr=="function"?Tr:k(+Tr),fr):We},fr.cornerRadius=function(Tr){return arguments.length?(nt=typeof Tr=="function"?Tr:k(+Tr),fr):nt},fr.padRadius=function(Tr){return arguments.length?(ft=Tr==null?null:typeof Tr=="function"?Tr:k(+Tr),fr):ft},fr.startAngle=function(Tr){return arguments.length?(Mt=typeof Tr=="function"?Tr:k(+Tr),fr):Mt},fr.endAngle=function(Tr){return arguments.length?(Nt=typeof Tr=="function"?Tr:k(+Tr),fr):Nt},fr.padAngle=function(Tr){return arguments.length?(Zt=typeof Tr=="function"?Tr:k(+Tr),fr):Zt},fr.context=function(Tr){return arguments.length?(Ut=Tr==null?null:Tr,fr):Ut},fr},m.area=P,m.areaRadial=J,m.curveBasis=function(Se){return new Oe(Se)},m.curveBasisClosed=function(Se){return new Ze(Se)},m.curveBasisOpen=function(Se){return new Fe(Se)},m.curveBundle=ze,m.curveCardinal=ot,m.curveCardinalClosed=bt,m.curveCardinalOpen=tt,m.curveCatmullRom=Ft,m.curveCatmullRomClosed=Xt,m.curveCatmullRomOpen=nr,m.curveLinear=T,m.curveLinearClosed=function(Se){return new It(Se)},m.curveMonotoneX=function(Se){return new Re(Se)},m.curveMonotoneY=function(Se){return new Ue(Se)},m.curveNatural=function(Se){return new qe(Se)},m.curveStep=function(Se){return new it(Se,.5)},m.curveStepAfter=function(Se){return new it(Se,1)},m.curveStepBefore=function(Se){return new it(Se,0)},m.line=I,m.lineRadial=Y,m.linkHorizontal=function(){return B(j)},m.linkRadial=function(){var Se=B(N);return Se.angle=Se.x,delete Se.x,Se.radius=Se.y,delete Se.y,Se},m.linkVertical=function(){return B(ee)},m.pie=function(){var Se=E,We=S,nt=null,ft=k(0),Mt=k(h),Nt=k(0);function Zt(Ut){var fr,Tr,ur,Kt,Qt,er=Ut.length,cr=0,gr=new Array(er),Mr=new Array(er),Ir=+ft.apply(this,arguments),Fr=Math.min(h,Math.max(-h,Mt.apply(this,arguments)-Ir)),Yr=Math.min(Math.abs(Fr)/er,Nt.apply(this,arguments)),fn=Yr*(Fr<0?-1:1);for(fr=0;fr<er;++fr)(Qt=Mr[gr[fr]=fr]=+Se(Ut[fr],fr,Ut))>0&&(cr+=Qt);for(We!=null?gr.sort(function(en,Rn){return We(Mr[en],Mr[Rn])}):nt!=null&&gr.sort(function(en,Rn){return nt(Ut[en],Ut[Rn])}),fr=0,ur=cr?(Fr-er*fn)/cr:0;fr<er;++fr,Ir=Kt)Tr=gr[fr],Kt=Ir+((Qt=Mr[Tr])>0?Qt*ur:0)+fn,Mr[Tr]={data:Ut[Tr],index:fr,value:Qt,startAngle:Ir,endAngle:Kt,padAngle:Yr};return Mr}return Zt.value=function(Ut){return arguments.length?(Se=typeof Ut=="function"?Ut:k(+Ut),Zt):Se},Zt.sortValues=function(Ut){return arguments.length?(We=Ut,nt=null,Zt):We},Zt.sort=function(Ut){return arguments.length?(nt=Ut,We=null,Zt):nt},Zt.startAngle=function(Ut){return arguments.length?(ft=typeof Ut=="function"?Ut:k(+Ut),Zt):ft},Zt.endAngle=function(Ut){return arguments.length?(Mt=typeof Ut=="function"?Ut:k(+Ut),Zt):Mt},Zt.padAngle=function(Ut){return arguments.length?(Nt=typeof Ut=="function"?Ut:k(+Ut),Zt):Nt},Zt},m.pointRadial=W,m.radialArea=J,m.radialLine=Y,m.stack=function(){var Se=k([]),We=Pt,nt=Tt,ft=rt;function Mt(Nt){var Zt,Ut,fr=Se.apply(this,arguments),Tr=Nt.length,ur=fr.length,Kt=new Array(ur);for(Zt=0;Zt<ur;++Zt){for(var Qt,er=fr[Zt],cr=Kt[Zt]=new Array(Tr),gr=0;gr<Tr;++gr)cr[gr]=Qt=[0,+ft(Nt[gr],er,gr,Nt)],Qt.data=Nt[gr];cr.key=er}for(Zt=0,Ut=We(Kt);Zt<ur;++Zt)Kt[Ut[Zt]].index=Zt;return nt(Kt,Ut),Kt}return Mt.keys=function(Nt){return arguments.length?(Se=typeof Nt=="function"?Nt:k(Z.call(Nt)),Mt):Se},Mt.value=function(Nt){return arguments.length?(ft=typeof Nt=="function"?Nt:k(+Nt),Mt):ft},Mt.order=function(Nt){return arguments.length?(We=Nt==null?Pt:typeof Nt=="function"?Nt:k(Z.call(Nt)),Mt):We},Mt.offset=function(Nt){return arguments.length?(nt=Nt==null?Tt:Nt,Mt):nt},Mt},m.stackOffsetDiverging=function(Se,We){if((Ut=Se.length)>0)for(var nt,ft,Mt,Nt,Zt,Ut,fr=0,Tr=Se[We[0]].length;fr<Tr;++fr)for(Nt=Zt=0,nt=0;nt<Ut;++nt)(Mt=(ft=Se[We[nt]][fr])[1]-ft[0])>0?(ft[0]=Nt,ft[1]=Nt+=Mt):Mt<0?(ft[1]=Zt,ft[0]=Zt+=Mt):(ft[0]=0,ft[1]=Mt)},m.stackOffsetExpand=function(Se,We){if((ft=Se.length)>0){for(var nt,ft,Mt,Nt=0,Zt=Se[0].length;Nt<Zt;++Nt){for(Mt=nt=0;nt<ft;++nt)Mt+=Se[nt][Nt][1]||0;if(Mt)for(nt=0;nt<ft;++nt)Se[nt][Nt][1]/=Mt}Tt(Se,We)}},m.stackOffsetNone=Tt,m.stackOffsetSilhouette=function(Se,We){if((nt=Se.length)>0){for(var nt,ft=0,Mt=Se[We[0]],Nt=Mt.length;ft<Nt;++ft){for(var Zt=0,Ut=0;Zt<nt;++Zt)Ut+=Se[Zt][ft][1]||0;Mt[ft][1]+=Mt[ft][0]=-Ut/2}Tt(Se,We)}},m.stackOffsetWiggle=function(Se,We){if((Mt=Se.length)>0&&(ft=(nt=Se[We[0]]).length)>0){for(var nt,ft,Mt,Nt=0,Zt=1;Zt<ft;++Zt){for(var Ut=0,fr=0,Tr=0;Ut<Mt;++Ut){for(var ur=Se[We[Ut]],Kt=ur[Zt][1]||0,Qt=(Kt-(ur[Zt-1][1]||0))/2,er=0;er<Ut;++er){var cr=Se[We[er]];Qt+=(cr[Zt][1]||0)-(cr[Zt-1][1]||0)}fr+=Kt,Tr+=Qt*Kt}nt[Zt-1][1]+=nt[Zt-1][0]=Nt,fr&&(Nt-=Tr/fr)}nt[Zt-1][1]+=nt[Zt-1][0]=Nt,Tt(Se,We)}},m.stackOrderAppearance=ut,m.stackOrderAscending=wt,m.stackOrderDescending=function(Se){return wt(Se).reverse()},m.stackOrderInsideOut=function(Se){var We,nt,ft=Se.length,Mt=Se.map(Lt),Nt=ut(Se),Zt=0,Ut=0,fr=[],Tr=[];for(We=0;We<ft;++We)nt=Nt[We],Zt<Ut?(Zt+=Mt[nt],fr.push(nt)):(Ut+=Mt[nt],Tr.push(nt));return Tr.reverse().concat(fr)},m.stackOrderNone=Pt,m.stackOrderReverse=function(Se){return Pt(Se).reverse()},m.symbol=function(){var Se=k($),We=k(64),nt=null;function ft(){var Mt;if(nt||(nt=Mt=v.path()),Se.apply(this,arguments).draw(nt,+We.apply(this,arguments)),Mt)return nt=null,Mt+""||null}return ft.type=function(Mt){return arguments.length?(Se=typeof Mt=="function"?Mt:k(Mt),ft):Se},ft.size=function(Mt){return arguments.length?(We=typeof Mt=="function"?Mt:k(+Mt),ft):We},ft.context=function(Mt){return arguments.length?(nt=Mt==null?null:Mt,ft):nt},ft},m.symbolCircle=$,m.symbolCross=K,m.symbolDiamond=le,m.symbolSquare=Ae,m.symbolStar=ye,m.symbolTriangle=ge,m.symbolWye=Ee,m.symbols=Me,Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-path":117}],120:[function(g,Q,X){(function(m,v){typeof X=="object"&&Q!==void 0?v(X,g("d3-time")):v((m=m||self).d3=m.d3||{},m.d3)})(this,function(m,v){function k(tt){if(0<=tt.y&&tt.y<100){var Ke=new Date(-1,tt.m,tt.d,tt.H,tt.M,tt.S,tt.L);return Ke.setFullYear(tt.y),Ke}return new Date(tt.y,tt.m,tt.d,tt.H,tt.M,tt.S,tt.L)}function x(tt){if(0<=tt.y&&tt.y<100){var Ke=new Date(Date.UTC(-1,tt.m,tt.d,tt.H,tt.M,tt.S,tt.L));return Ke.setUTCFullYear(tt.y),Ke}return new Date(Date.UTC(tt.y,tt.m,tt.d,tt.H,tt.M,tt.S,tt.L))}function e(tt,Ke,mt){return{y:tt,m:Ke,d:mt,H:0,M:0,S:0,L:0}}function t(tt){var Ke=tt.dateTime,mt=tt.date,Ft=tt.time,Vt=tt.periods,Xt=tt.days,Gt=tt.shortDays,nr=tt.months,It=tt.shortMonths,Be=s(Vt),He=a(Vt),he=s(Xt),be=a(Xt),Re=s(Gt),Ue=a(Gt),Xe=s(nr),qe=a(nr),st=s(It),it=a(It),Tt={a:function(Lt){return Gt[Lt.getDay()]},A:function(Lt){return Xt[Lt.getDay()]},b:function(Lt){return It[Lt.getMonth()]},B:function(Lt){return nr[Lt.getMonth()]},c:null,d:J,e:J,f:B,H:W,I:Z,j:re,L:V,m:j,M:ee,p:function(Lt){return Vt[+(Lt.getHours()>=12)]},q:function(Lt){return 1+~~(Lt.getMonth()/3)},Q:$e,s:ot,S:N,u:$,U:K,V:te,w:ie,W:le,x:null,X:null,y:se,Y:ve,Z:fe,"%":Ge},Pt={a:function(Lt){return Gt[Lt.getUTCDay()]},A:function(Lt){return Xt[Lt.getUTCDay()]},b:function(Lt){return It[Lt.getUTCMonth()]},B:function(Lt){return nr[Lt.getUTCMonth()]},c:null,d:ye,e:ye,f:oe,H:Ae,I:pe,j:ge,L:we,m:de,M:Te,p:function(Lt){return Vt[+(Lt.getUTCHours()>=12)]},q:function(Lt){return 1+~~(Lt.getUTCMonth()/3)},Q:$e,s:ot,S:Ee,u:Me,U:De,V:Ie,w:Oe,W:Ze,x:null,X:null,y:Fe,Y:Pe,Z:ze,"%":Ge},rt={a:function(Lt,Se,We){var nt=Re.exec(Se.slice(We));return nt?(Lt.w=Ue[nt[0].toLowerCase()],We+nt[0].length):-1},A:function(Lt,Se,We){var nt=he.exec(Se.slice(We));return nt?(Lt.w=be[nt[0].toLowerCase()],We+nt[0].length):-1},b:function(Lt,Se,We){var nt=st.exec(Se.slice(We));return nt?(Lt.m=it[nt[0].toLowerCase()],We+nt[0].length):-1},B:function(Lt,Se,We){var nt=Xe.exec(Se.slice(We));return nt?(Lt.m=qe[nt[0].toLowerCase()],We+nt[0].length):-1},c:function(Lt,Se,We){return wt(Lt,Ke,Se,We)},d:A,e:A,f:D,H:P,I:P,j:I,L:z,m:L,M:S,p:function(Lt,Se,We){var nt=Be.exec(Se.slice(We));return nt?(Lt.p=He[nt[0].toLowerCase()],We+nt[0].length):-1},q:T,Q:H,s:Y,S:E,u:c,U:i,V:y,w:p,W:f,x:function(Lt,Se,We){return wt(Lt,mt,Se,We)},X:function(Lt,Se,We){return wt(Lt,Ft,Se,We)},y:b,Y:w,Z:_,"%":U};function ut(Lt,Se){return function(We){var nt,ft,Mt,Nt=[],Zt=-1,Ut=0,fr=Lt.length;for(We instanceof Date||(We=new Date(+We));++Zt<fr;)Lt.charCodeAt(Zt)===37&&(Nt.push(Lt.slice(Ut,Zt)),(ft=l[nt=Lt.charAt(++Zt)])!=null?nt=Lt.charAt(++Zt):ft=nt==="e"?" ":"0",(Mt=Se[nt])&&(nt=Mt(We,ft)),Nt.push(nt),Ut=Zt+1);return Nt.push(Lt.slice(Ut,Zt)),Nt.join("")}}function Bt(Lt,Se){return function(We){var nt,ft,Mt=e(1900,void 0,1);if(wt(Mt,Lt,We+="",0)!=We.length)return null;if("Q"in Mt)return new Date(Mt.Q);if("s"in Mt)return new Date(1e3*Mt.s+("L"in Mt?Mt.L:0));if(Se&&!("Z"in Mt)&&(Mt.Z=0),"p"in Mt&&(Mt.H=Mt.H%12+12*Mt.p),Mt.m===void 0&&(Mt.m="q"in Mt?Mt.q:0),"V"in Mt){if(Mt.V<1||Mt.V>53)return null;"w"in Mt||(Mt.w=1),"Z"in Mt?(ft=(nt=x(e(Mt.y,0,1))).getUTCDay(),nt=ft>4||ft===0?v.utcMonday.ceil(nt):v.utcMonday(nt),nt=v.utcDay.offset(nt,7*(Mt.V-1)),Mt.y=nt.getUTCFullYear(),Mt.m=nt.getUTCMonth(),Mt.d=nt.getUTCDate()+(Mt.w+6)%7):(ft=(nt=k(e(Mt.y,0,1))).getDay(),nt=ft>4||ft===0?v.timeMonday.ceil(nt):v.timeMonday(nt),nt=v.timeDay.offset(nt,7*(Mt.V-1)),Mt.y=nt.getFullYear(),Mt.m=nt.getMonth(),Mt.d=nt.getDate()+(Mt.w+6)%7)}else("W"in Mt||"U"in Mt)&&("w"in Mt||(Mt.w="u"in Mt?Mt.u%7:"W"in Mt?1:0),ft="Z"in Mt?x(e(Mt.y,0,1)).getUTCDay():k(e(Mt.y,0,1)).getDay(),Mt.m=0,Mt.d="W"in Mt?(Mt.w+6)%7+7*Mt.W-(ft+5)%7:Mt.w+7*Mt.U-(ft+6)%7);return"Z"in Mt?(Mt.H+=Mt.Z/100|0,Mt.M+=Mt.Z%100,x(Mt)):k(Mt)}}function wt(Lt,Se,We,nt){for(var ft,Mt,Nt=0,Zt=Se.length,Ut=We.length;Nt<Zt;){if(nt>=Ut)return-1;if((ft=Se.charCodeAt(Nt++))===37){if(ft=Se.charAt(Nt++),!(Mt=rt[ft in l?Se.charAt(Nt++):ft])||(nt=Mt(Lt,We,nt))<0)return-1}else if(ft!=We.charCodeAt(nt++))return-1}return nt}return Tt.x=ut(mt,Tt),Tt.X=ut(Ft,Tt),Tt.c=ut(Ke,Tt),Pt.x=ut(mt,Pt),Pt.X=ut(Ft,Pt),Pt.c=ut(Ke,Pt),{format:function(Lt){var Se=ut(Lt+="",Tt);return Se.toString=function(){return Lt},Se},parse:function(Lt){var Se=Bt(Lt+="",!1);return Se.toString=function(){return Lt},Se},utcFormat:function(Lt){var Se=ut(Lt+="",Pt);return Se.toString=function(){return Lt},Se},utcParse:function(Lt){var Se=Bt(Lt+="",!0);return Se.toString=function(){return Lt},Se}}}var r,l={"-":"",_:" ",0:"0"},n=/^\s*\d+/,d=/^%/,u=/[\\^$*+?|[\]().{}]/g;function o(tt,Ke,mt){var Ft=tt<0?"-":"",Vt=(Ft?-tt:tt)+"",Xt=Vt.length;return Ft+(Xt<mt?new Array(mt-Xt+1).join(Ke)+Vt:Vt)}function h(tt){return tt.replace(u,"\\$&")}function s(tt){return new RegExp("^(?:"+tt.map(h).join("|")+")","i")}function a(tt){for(var Ke={},mt=-1,Ft=tt.length;++mt<Ft;)Ke[tt[mt].toLowerCase()]=mt;return Ke}function p(tt,Ke,mt){var Ft=n.exec(Ke.slice(mt,mt+1));return Ft?(tt.w=+Ft[0],mt+Ft[0].length):-1}function c(tt,Ke,mt){var Ft=n.exec(Ke.slice(mt,mt+1));return Ft?(tt.u=+Ft[0],mt+Ft[0].length):-1}function i(tt,Ke,mt){var Ft=n.exec(Ke.slice(mt,mt+2));return Ft?(tt.U=+Ft[0],mt+Ft[0].length):-1}function y(tt,Ke,mt){var Ft=n.exec(Ke.slice(mt,mt+2));return Ft?(tt.V=+Ft[0],mt+Ft[0].length):-1}function f(tt,Ke,mt){var Ft=n.exec(Ke.slice(mt,mt+2));return Ft?(tt.W=+Ft[0],mt+Ft[0].length):-1}function w(tt,Ke,mt){var Ft=n.exec(Ke.slice(mt,mt+4));return Ft?(tt.y=+Ft[0],mt+Ft[0].length):-1}function b(tt,Ke,mt){var Ft=n.exec(Ke.slice(mt,mt+2));return Ft?(tt.y=+Ft[0]+(+Ft[0]>68?1900:2e3),mt+Ft[0].length):-1}function _(tt,Ke,mt){var Ft=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Ke.slice(mt,mt+6));return Ft?(tt.Z=Ft[1]?0:-(Ft[2]+(Ft[3]||"00")),mt+Ft[0].length):-1}function T(tt,Ke,mt){var Ft=n.exec(Ke.slice(mt,mt+1));return Ft?(tt.q=3*Ft[0]-3,mt+Ft[0].length):-1}function L(tt,Ke,mt){var Ft=n.exec(Ke.slice(mt,mt+2));return Ft?(tt.m=Ft[0]-1,mt+Ft[0].length):-1}function A(tt,Ke,mt){var Ft=n.exec(Ke.slice(mt,mt+2));return Ft?(tt.d=+Ft[0],mt+Ft[0].length):-1}function I(tt,Ke,mt){var Ft=n.exec(Ke.slice(mt,mt+3));return Ft?(tt.m=0,tt.d=+Ft[0],mt+Ft[0].length):-1}function P(tt,Ke,mt){var Ft=n.exec(Ke.slice(mt,mt+2));return Ft?(tt.H=+Ft[0],mt+Ft[0].length):-1}function S(tt,Ke,mt){var Ft=n.exec(Ke.slice(mt,mt+2));return Ft?(tt.M=+Ft[0],mt+Ft[0].length):-1}function E(tt,Ke,mt){var Ft=n.exec(Ke.slice(mt,mt+2));return Ft?(tt.S=+Ft[0],mt+Ft[0].length):-1}function z(tt,Ke,mt){var Ft=n.exec(Ke.slice(mt,mt+3));return Ft?(tt.L=+Ft[0],mt+Ft[0].length):-1}function D(tt,Ke,mt){var Ft=n.exec(Ke.slice(mt,mt+6));return Ft?(tt.L=Math.floor(Ft[0]/1e3),mt+Ft[0].length):-1}function U(tt,Ke,mt){var Ft=d.exec(Ke.slice(mt,mt+1));return Ft?mt+Ft[0].length:-1}function H(tt,Ke,mt){var Ft=n.exec(Ke.slice(mt));return Ft?(tt.Q=+Ft[0],mt+Ft[0].length):-1}function Y(tt,Ke,mt){var Ft=n.exec(Ke.slice(mt));return Ft?(tt.s=+Ft[0],mt+Ft[0].length):-1}function J(tt,Ke){return o(tt.getDate(),Ke,2)}function W(tt,Ke){return o(tt.getHours(),Ke,2)}function Z(tt,Ke){return o(tt.getHours()%12||12,Ke,2)}function re(tt,Ke){return o(1+v.timeDay.count(v.timeYear(tt),tt),Ke,3)}function V(tt,Ke){return o(tt.getMilliseconds(),Ke,3)}function B(tt,Ke){return V(tt,Ke)+"000"}function j(tt,Ke){return o(tt.getMonth()+1,Ke,2)}function ee(tt,Ke){return o(tt.getMinutes(),Ke,2)}function N(tt,Ke){return o(tt.getSeconds(),Ke,2)}function $(tt){var Ke=tt.getDay();return Ke===0?7:Ke}function K(tt,Ke){return o(v.timeSunday.count(v.timeYear(tt)-1,tt),Ke,2)}function te(tt,Ke){var mt=tt.getDay();return tt=mt>=4||mt===0?v.timeThursday(tt):v.timeThursday.ceil(tt),o(v.timeThursday.count(v.timeYear(tt),tt)+(v.timeYear(tt).getDay()===4),Ke,2)}function ie(tt){return tt.getDay()}function le(tt,Ke){return o(v.timeMonday.count(v.timeYear(tt)-1,tt),Ke,2)}function se(tt,Ke){return o(tt.getFullYear()%100,Ke,2)}function ve(tt,Ke){return o(tt.getFullYear()%1e4,Ke,4)}function fe(tt){var Ke=tt.getTimezoneOffset();return(Ke>0?"-":(Ke*=-1,"+"))+o(Ke/60|0,"0",2)+o(Ke%60,"0",2)}function ye(tt,Ke){return o(tt.getUTCDate(),Ke,2)}function Ae(tt,Ke){return o(tt.getUTCHours(),Ke,2)}function pe(tt,Ke){return o(tt.getUTCHours()%12||12,Ke,2)}function ge(tt,Ke){return o(1+v.utcDay.count(v.utcYear(tt),tt),Ke,3)}function we(tt,Ke){return o(tt.getUTCMilliseconds(),Ke,3)}function oe(tt,Ke){return we(tt,Ke)+"000"}function de(tt,Ke){return o(tt.getUTCMonth()+1,Ke,2)}function Te(tt,Ke){return o(tt.getUTCMinutes(),Ke,2)}function Ee(tt,Ke){return o(tt.getUTCSeconds(),Ke,2)}function Me(tt){var Ke=tt.getUTCDay();return Ke===0?7:Ke}function De(tt,Ke){return o(v.utcSunday.count(v.utcYear(tt)-1,tt),Ke,2)}function Ie(tt,Ke){var mt=tt.getUTCDay();return tt=mt>=4||mt===0?v.utcThursday(tt):v.utcThursday.ceil(tt),o(v.utcThursday.count(v.utcYear(tt),tt)+(v.utcYear(tt).getUTCDay()===4),Ke,2)}function Oe(tt){return tt.getUTCDay()}function Ze(tt,Ke){return o(v.utcMonday.count(v.utcYear(tt)-1,tt),Ke,2)}function Fe(tt,Ke){return o(tt.getUTCFullYear()%100,Ke,2)}function Pe(tt,Ke){return o(tt.getUTCFullYear()%1e4,Ke,4)}function ze(){return"+0000"}function Ge(){return"%"}function $e(tt){return+tt}function ot(tt){return Math.floor(+tt/1e3)}function vt(tt){return r=t(tt),m.timeFormat=r.format,m.timeParse=r.parse,m.utcFormat=r.utcFormat,m.utcParse=r.utcParse,r}vt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var bt=Date.prototype.toISOString?function(tt){return tt.toISOString()}:m.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),yt=+new Date("2000-01-01T00:00:00.000Z")?function(tt){var Ke=new Date(tt);return isNaN(Ke)?null:Ke}:m.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");m.isoFormat=bt,m.isoParse=yt,m.timeFormatDefaultLocale=vt,m.timeFormatLocale=t,Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-time":121}],121:[function(g,Q,X){(function(m,v){v(typeof X=="object"&&Q!==void 0?X:(m=m||self).d3=m.d3||{})})(this,function(m){var v=new Date,k=new Date;function x(de,Te,Ee,Me){function De(Ie){return de(Ie=arguments.length===0?new Date:new Date(+Ie)),Ie}return De.floor=function(Ie){return de(Ie=new Date(+Ie)),Ie},De.ceil=function(Ie){return de(Ie=new Date(Ie-1)),Te(Ie,1),de(Ie),Ie},De.round=function(Ie){var Oe=De(Ie),Ze=De.ceil(Ie);return Ie-Oe<Ze-Ie?Oe:Ze},De.offset=function(Ie,Oe){return Te(Ie=new Date(+Ie),Oe==null?1:Math.floor(Oe)),Ie},De.range=function(Ie,Oe,Ze){var Fe,Pe=[];if(Ie=De.ceil(Ie),Ze=Ze==null?1:Math.floor(Ze),!(Ie<Oe&&Ze>0))return Pe;do Pe.push(Fe=new Date(+Ie)),Te(Ie,Ze),de(Ie);while(Fe<Ie&&Ie<Oe);return Pe},De.filter=function(Ie){return x(function(Oe){if(Oe>=Oe)for(;de(Oe),!Ie(Oe);)Oe.setTime(Oe-1)},function(Oe,Ze){if(Oe>=Oe)if(Ze<0)for(;++Ze<=0;)for(;Te(Oe,-1),!Ie(Oe););else for(;--Ze>=0;)for(;Te(Oe,1),!Ie(Oe););})},Ee&&(De.count=function(Ie,Oe){return v.setTime(+Ie),k.setTime(+Oe),de(v),de(k),Math.floor(Ee(v,k))},De.every=function(Ie){return Ie=Math.floor(Ie),isFinite(Ie)&&Ie>0?Ie>1?De.filter(Me?function(Oe){return Me(Oe)%Ie==0}:function(Oe){return De.count(0,Oe)%Ie==0}):De:null}),De}var e=x(function(){},function(de,Te){de.setTime(+de+Te)},function(de,Te){return Te-de});e.every=function(de){return de=Math.floor(de),isFinite(de)&&de>0?de>1?x(function(Te){Te.setTime(Math.floor(Te/de)*de)},function(Te,Ee){Te.setTime(+Te+Ee*de)},function(Te,Ee){return(Ee-Te)/de}):e:null};var t=e.range,r=x(function(de){de.setTime(de-de.getMilliseconds())},function(de,Te){de.setTime(+de+1e3*Te)},function(de,Te){return(Te-de)/1e3},function(de){return de.getUTCSeconds()}),l=r.range,n=x(function(de){de.setTime(de-de.getMilliseconds()-1e3*de.getSeconds())},function(de,Te){de.setTime(+de+6e4*Te)},function(de,Te){return(Te-de)/6e4},function(de){return de.getMinutes()}),d=n.range,u=x(function(de){de.setTime(de-de.getMilliseconds()-1e3*de.getSeconds()-6e4*de.getMinutes())},function(de,Te){de.setTime(+de+36e5*Te)},function(de,Te){return(Te-de)/36e5},function(de){return de.getHours()}),o=u.range,h=x(function(de){de.setHours(0,0,0,0)},function(de,Te){de.setDate(de.getDate()+Te)},function(de,Te){return(Te-de-6e4*(Te.getTimezoneOffset()-de.getTimezoneOffset()))/864e5},function(de){return de.getDate()-1}),s=h.range;function a(de){return x(function(Te){Te.setDate(Te.getDate()-(Te.getDay()+7-de)%7),Te.setHours(0,0,0,0)},function(Te,Ee){Te.setDate(Te.getDate()+7*Ee)},function(Te,Ee){return(Ee-Te-6e4*(Ee.getTimezoneOffset()-Te.getTimezoneOffset()))/6048e5})}var p=a(0),c=a(1),i=a(2),y=a(3),f=a(4),w=a(5),b=a(6),_=p.range,T=c.range,L=i.range,A=y.range,I=f.range,P=w.range,S=b.range,E=x(function(de){de.setDate(1),de.setHours(0,0,0,0)},function(de,Te){de.setMonth(de.getMonth()+Te)},function(de,Te){return Te.getMonth()-de.getMonth()+12*(Te.getFullYear()-de.getFullYear())},function(de){return de.getMonth()}),z=E.range,D=x(function(de){de.setMonth(0,1),de.setHours(0,0,0,0)},function(de,Te){de.setFullYear(de.getFullYear()+Te)},function(de,Te){return Te.getFullYear()-de.getFullYear()},function(de){return de.getFullYear()});D.every=function(de){return isFinite(de=Math.floor(de))&&de>0?x(function(Te){Te.setFullYear(Math.floor(Te.getFullYear()/de)*de),Te.setMonth(0,1),Te.setHours(0,0,0,0)},function(Te,Ee){Te.setFullYear(Te.getFullYear()+Ee*de)}):null};var U=D.range,H=x(function(de){de.setUTCSeconds(0,0)},function(de,Te){de.setTime(+de+6e4*Te)},function(de,Te){return(Te-de)/6e4},function(de){return de.getUTCMinutes()}),Y=H.range,J=x(function(de){de.setUTCMinutes(0,0,0)},function(de,Te){de.setTime(+de+36e5*Te)},function(de,Te){return(Te-de)/36e5},function(de){return de.getUTCHours()}),W=J.range,Z=x(function(de){de.setUTCHours(0,0,0,0)},function(de,Te){de.setUTCDate(de.getUTCDate()+Te)},function(de,Te){return(Te-de)/864e5},function(de){return de.getUTCDate()-1}),re=Z.range;function V(de){return x(function(Te){Te.setUTCDate(Te.getUTCDate()-(Te.getUTCDay()+7-de)%7),Te.setUTCHours(0,0,0,0)},function(Te,Ee){Te.setUTCDate(Te.getUTCDate()+7*Ee)},function(Te,Ee){return(Ee-Te)/6048e5})}var B=V(0),j=V(1),ee=V(2),N=V(3),$=V(4),K=V(5),te=V(6),ie=B.range,le=j.range,se=ee.range,ve=N.range,fe=$.range,ye=K.range,Ae=te.range,pe=x(function(de){de.setUTCDate(1),de.setUTCHours(0,0,0,0)},function(de,Te){de.setUTCMonth(de.getUTCMonth()+Te)},function(de,Te){return Te.getUTCMonth()-de.getUTCMonth()+12*(Te.getUTCFullYear()-de.getUTCFullYear())},function(de){return de.getUTCMonth()}),ge=pe.range,we=x(function(de){de.setUTCMonth(0,1),de.setUTCHours(0,0,0,0)},function(de,Te){de.setUTCFullYear(de.getUTCFullYear()+Te)},function(de,Te){return Te.getUTCFullYear()-de.getUTCFullYear()},function(de){return de.getUTCFullYear()});we.every=function(de){return isFinite(de=Math.floor(de))&&de>0?x(function(Te){Te.setUTCFullYear(Math.floor(Te.getUTCFullYear()/de)*de),Te.setUTCMonth(0,1),Te.setUTCHours(0,0,0,0)},function(Te,Ee){Te.setUTCFullYear(Te.getUTCFullYear()+Ee*de)}):null};var oe=we.range;m.timeDay=h,m.timeDays=s,m.timeFriday=w,m.timeFridays=P,m.timeHour=u,m.timeHours=o,m.timeInterval=x,m.timeMillisecond=e,m.timeMilliseconds=t,m.timeMinute=n,m.timeMinutes=d,m.timeMonday=c,m.timeMondays=T,m.timeMonth=E,m.timeMonths=z,m.timeSaturday=b,m.timeSaturdays=S,m.timeSecond=r,m.timeSeconds=l,m.timeSunday=p,m.timeSundays=_,m.timeThursday=f,m.timeThursdays=I,m.timeTuesday=i,m.timeTuesdays=L,m.timeWednesday=y,m.timeWednesdays=A,m.timeWeek=p,m.timeWeeks=_,m.timeYear=D,m.timeYears=U,m.utcDay=Z,m.utcDays=re,m.utcFriday=K,m.utcFridays=ye,m.utcHour=J,m.utcHours=W,m.utcMillisecond=e,m.utcMilliseconds=t,m.utcMinute=H,m.utcMinutes=Y,m.utcMonday=j,m.utcMondays=le,m.utcMonth=pe,m.utcMonths=ge,m.utcSaturday=te,m.utcSaturdays=Ae,m.utcSecond=r,m.utcSeconds=l,m.utcSunday=B,m.utcSundays=ie,m.utcThursday=$,m.utcThursdays=fe,m.utcTuesday=ee,m.utcTuesdays=se,m.utcWednesday=N,m.utcWednesdays=ve,m.utcWeek=B,m.utcWeeks=ie,m.utcYear=we,m.utcYears=oe,Object.defineProperty(m,"__esModule",{value:!0})})},{}],122:[function(g,Q,X){arguments[4][121][0].apply(X,arguments)},{dup:121}],123:[function(g,Q,X){(function(m,v){v(typeof X=="object"&&Q!==void 0?X:(m=m||self).d3=m.d3||{})})(this,function(m){var v,k,x=0,e=0,t=0,r=0,l=0,n=0,d=typeof performance=="object"&&performance.now?performance:Date,u=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(f){setTimeout(f,17)};function o(){return l||(u(h),l=d.now()+n)}function h(){l=0}function s(){this._call=this._time=this._next=null}function a(f,w,b){var _=new s;return _.restart(f,w,b),_}function p(){o(),++x;for(var f,w=v;w;)(f=l-w._time)>=0&&w._call.call(null,f),w=w._next;--x}function c(){l=(r=d.now())+n,x=e=0;try{p()}finally{x=0,function(){for(var f,w,b=v,_=1/0;b;)b._call?(_>b._time&&(_=b._time),f=b,b=b._next):(w=b._next,b._next=null,b=f?f._next=w:v=w);k=f,y(_)}(),l=0}}function i(){var f=d.now(),w=f-r;w>1e3&&(n-=w,r=f)}function y(f){x||(e&&(e=clearTimeout(e)),f-l>24?(f<1/0&&(e=setTimeout(c,f-d.now()-n)),t&&(t=clearInterval(t))):(t||(r=d.now(),t=setInterval(i,1e3)),x=1,u(c)))}s.prototype=a.prototype={constructor:s,restart:function(f,w,b){if(typeof f!="function")throw new TypeError("callback is not a function");b=(b==null?o():+b)+(w==null?0:+w),this._next||k===this||(k?k._next=this:v=this,k=this),this._call=f,this._time=b,y()},stop:function(){this._call&&(this._call=null,this._time=1/0,y())}},m.interval=function(f,w,b){var _=new s,T=w;return w==null?(_.restart(f,w,b),_):(w=+w,b=b==null?o():+b,_.restart(function L(A){A+=T,_.restart(L,T+=w,b),f(A)},w,b),_)},m.now=o,m.timeout=function(f,w,b){var _=new s;return w=w==null?0:+w,_.restart(function(T){_.stop(),f(T+w)},w,b),_},m.timer=a,m.timerFlush=p,Object.defineProperty(m,"__esModule",{value:!0})})},{}],124:[function(g,Q,X){Q.exports=function(){for(var m=0;m<arguments.length;m++)if(arguments[m]!==void 0)return arguments[m]}},{}],125:[function(g,Q,X){Q.exports=k;var m=(k.canvas=document.createElement("canvas")).getContext("2d"),v=x([32,126]);function k(e,t){Array.isArray(e)&&(e=e.join(", "));var r,l={},n=16,d=.05;t&&(t.length===2&&typeof t[0]=="number"?r=x(t):Array.isArray(t)?r=t:(t.o?r=x(t.o):t.pairs&&(r=t.pairs),t.fontSize&&(n=t.fontSize),t.threshold!=null&&(d=t.threshold))),r||(r=v),m.font=n+"px "+e;for(var u=0;u<r.length;u++){var o=r[u],h=m.measureText(o[0]).width+m.measureText(o[1]).width,s=m.measureText(o).width;if(Math.abs(h-s)>n*d){var a=(s-h)/n;l[o]=1e3*a}}return l}function x(e){for(var t=[],r=e[0];r<=e[1];r++)for(var l=String.fromCharCode(r),n=e[0];n<e[1];n++){var d=l+String.fromCharCode(n);t.push(d)}return t}k.createPairs=x,k.ascii=v},{}],126:[function(g,Q,X){var m=g("abs-svg-path"),v=g("normalize-svg-path"),k={M:"moveTo",C:"bezierCurveTo"};Q.exports=function(x,e){x.beginPath(),v(m(e)).forEach(function(t){var r=t[0],l=t.slice(1);x[k[r]].apply(x,l)}),x.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(g,Q,X){Q.exports=function(m){switch(m){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(g,Q,X){Q.exports=function(m,v){switch(v===void 0&&(v=0),typeof m){case"number":if(m>0)return function(k,x){var e,t;for(e=new Array(k),t=0;t<k;++t)e[t]=x;return e}(0|m,v);break;case"object":if(typeof m.length=="number")return function k(x,e,t){var r=0|x[t];if(r<=0)return[];var l,n=new Array(r);if(t===x.length-1)for(l=0;l<r;++l)n[l]=e;else for(l=0;l<r;++l)n[l]=k(x,e,t+1);return n}(m,v,0)}return[]}},{}],129:[function(g,Q,X){function m(I,P,S){S=S||2;var E,z,D,U,H,Y,J,W=P&&P.length,Z=W?P[0]*S:I.length,re=v(I,0,Z,S,!0),V=[];if(!re||re.next===re.prev)return V;if(W&&(re=function(j,ee,N,$){var K,te,ie,le,se,ve=[];for(K=0,te=ee.length;K<te;K++)ie=ee[K]*$,le=K<te-1?ee[K+1]*$:j.length,(se=v(j,ie,le,$,!1))===se.next&&(se.steiner=!0),ve.push(h(se));for(ve.sort(n),K=0;K<ve.length;K++)d(ve[K],N),N=k(N,N.next);return N}(I,P,re,S)),I.length>80*S){E=D=I[0],z=U=I[1];for(var B=S;B<Z;B+=S)(H=I[B])<E&&(E=H),(Y=I[B+1])<z&&(z=Y),H>D&&(D=H),Y>U&&(U=Y);J=(J=Math.max(D-E,U-z))!==0?1/J:0}return x(re,V,S,E,z,J),V}function v(I,P,S,E,z){var D,U;if(z===A(I,P,S,E)>0)for(D=P;D<S;D+=E)U=_(D,I[D],I[D+1],U);else for(D=S-E;D>=P;D-=E)U=_(D,I[D],I[D+1],U);return U&&c(U,U.next)&&(T(U),U=U.next),U}function k(I,P){if(!I)return I;P||(P=I);var S,E=I;do if(S=!1,E.steiner||!c(E,E.next)&&p(E.prev,E,E.next)!==0)E=E.next;else{if(T(E),(E=P=E.prev)===E.next)break;S=!0}while(S||E!==P);return P}function x(I,P,S,E,z,D,U){if(I){!U&&D&&function(W,Z,re,V){var B=W;do B.z===null&&(B.z=o(B.x,B.y,Z,re,V)),B.prevZ=B.prev,B.nextZ=B.next,B=B.next;while(B!==W);B.prevZ.nextZ=null,B.prevZ=null,function(j){var ee,N,$,K,te,ie,le,se,ve=1;do{for(N=j,j=null,te=null,ie=0;N;){for(ie++,$=N,le=0,ee=0;ee<ve&&(le++,$=$.nextZ);ee++);for(se=ve;le>0||se>0&&$;)le!==0&&(se===0||!$||N.z<=$.z)?(K=N,N=N.nextZ,le--):(K=$,$=$.nextZ,se--),te?te.nextZ=K:j=K,K.prevZ=te,te=K;N=$}te.nextZ=null,ve*=2}while(ie>1)}(B)}(I,E,z,D);for(var H,Y,J=I;I.prev!==I.next;)if(H=I.prev,Y=I.next,D?t(I,E,z,D):e(I))P.push(H.i/S),P.push(I.i/S),P.push(Y.i/S),T(I),I=Y.next,J=Y.next;else if((I=Y)===J){U?U===1?x(I=r(k(I),P,S),P,S,E,z,D,2):U===2&&l(I,P,S,E,z,D):x(k(I),P,S,E,z,D,1);break}}}function e(I){var P=I.prev,S=I,E=I.next;if(p(P,S,E)>=0)return!1;for(var z=I.next.next;z!==I.prev;){if(s(P.x,P.y,S.x,S.y,E.x,E.y,z.x,z.y)&&p(z.prev,z,z.next)>=0)return!1;z=z.next}return!0}function t(I,P,S,E){var z=I.prev,D=I,U=I.next;if(p(z,D,U)>=0)return!1;for(var H=z.x<D.x?z.x<U.x?z.x:U.x:D.x<U.x?D.x:U.x,Y=z.y<D.y?z.y<U.y?z.y:U.y:D.y<U.y?D.y:U.y,J=z.x>D.x?z.x>U.x?z.x:U.x:D.x>U.x?D.x:U.x,W=z.y>D.y?z.y>U.y?z.y:U.y:D.y>U.y?D.y:U.y,Z=o(H,Y,P,S,E),re=o(J,W,P,S,E),V=I.prevZ,B=I.nextZ;V&&V.z>=Z&&B&&B.z<=re;){if(V!==I.prev&&V!==I.next&&s(z.x,z.y,D.x,D.y,U.x,U.y,V.x,V.y)&&p(V.prev,V,V.next)>=0||(V=V.prevZ,B!==I.prev&&B!==I.next&&s(z.x,z.y,D.x,D.y,U.x,U.y,B.x,B.y)&&p(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;V&&V.z>=Z;){if(V!==I.prev&&V!==I.next&&s(z.x,z.y,D.x,D.y,U.x,U.y,V.x,V.y)&&p(V.prev,V,V.next)>=0)return!1;V=V.prevZ}for(;B&&B.z<=re;){if(B!==I.prev&&B!==I.next&&s(z.x,z.y,D.x,D.y,U.x,U.y,B.x,B.y)&&p(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function r(I,P,S){var E=I;do{var z=E.prev,D=E.next.next;!c(z,D)&&i(z,E,E.next,D)&&w(z,D)&&w(D,z)&&(P.push(z.i/S),P.push(E.i/S),P.push(D.i/S),T(E),T(E.next),E=I=D),E=E.next}while(E!==I);return k(E)}function l(I,P,S,E,z,D){var U=I;do{for(var H=U.next.next;H!==U.prev;){if(U.i!==H.i&&a(U,H)){var Y=b(U,H);return U=k(U,U.next),Y=k(Y,Y.next),x(U,P,S,E,z,D),void x(Y,P,S,E,z,D)}H=H.next}U=U.next}while(U!==I)}function n(I,P){return I.x-P.x}function d(I,P){if(P=function(E,z){var D,U=z,H=E.x,Y=E.y,J=-1/0;do{if(Y<=U.y&&Y>=U.next.y&&U.next.y!==U.y){var W=U.x+(Y-U.y)*(U.next.x-U.x)/(U.next.y-U.y);if(W<=H&&W>J){if(J=W,W===H){if(Y===U.y)return U;if(Y===U.next.y)return U.next}D=U.x<U.next.x?U:U.next}}U=U.next}while(U!==z);if(!D)return null;if(H===J)return D;var Z,re=D,V=D.x,B=D.y,j=1/0;U=D;do H>=U.x&&U.x>=V&&H!==U.x&&s(Y<B?H:J,Y,V,B,Y<B?J:H,Y,U.x,U.y)&&(Z=Math.abs(Y-U.y)/(H-U.x),w(U,E)&&(Z<j||Z===j&&(U.x>D.x||U.x===D.x&&u(D,U)))&&(D=U,j=Z)),U=U.next;while(U!==re);return D}(I,P)){var S=b(P,I);k(P,P.next),k(S,S.next)}}function u(I,P){return p(I.prev,I,P.prev)<0&&p(P.next,I,I.next)<0}function o(I,P,S,E,z){return(I=1431655765&((I=858993459&((I=252645135&((I=16711935&((I=32767*(I-S)*z)|I<<8))|I<<4))|I<<2))|I<<1))|(P=1431655765&((P=858993459&((P=252645135&((P=16711935&((P=32767*(P-E)*z)|P<<8))|P<<4))|P<<2))|P<<1))<<1}function h(I){var P=I,S=I;do(P.x<S.x||P.x===S.x&&P.y<S.y)&&(S=P),P=P.next;while(P!==I);return S}function s(I,P,S,E,z,D,U,H){return(z-U)*(P-H)-(I-U)*(D-H)>=0&&(I-U)*(E-H)-(S-U)*(P-H)>=0&&(S-U)*(D-H)-(z-U)*(E-H)>=0}function a(I,P){return I.next.i!==P.i&&I.prev.i!==P.i&&!function(S,E){var z=S;do{if(z.i!==S.i&&z.next.i!==S.i&&z.i!==E.i&&z.next.i!==E.i&&i(z,z.next,S,E))return!0;z=z.next}while(z!==S);return!1}(I,P)&&(w(I,P)&&w(P,I)&&function(S,E){var z=S,D=!1,U=(S.x+E.x)/2,H=(S.y+E.y)/2;do z.y>H!=z.next.y>H&&z.next.y!==z.y&&U<(z.next.x-z.x)*(H-z.y)/(z.next.y-z.y)+z.x&&(D=!D),z=z.next;while(z!==S);return D}(I,P)&&(p(I.prev,I,P.prev)||p(I,P.prev,P))||c(I,P)&&p(I.prev,I,I.next)>0&&p(P.prev,P,P.next)>0)}function p(I,P,S){return(P.y-I.y)*(S.x-P.x)-(P.x-I.x)*(S.y-P.y)}function c(I,P){return I.x===P.x&&I.y===P.y}function i(I,P,S,E){var z=f(p(I,P,S)),D=f(p(I,P,E)),U=f(p(S,E,I)),H=f(p(S,E,P));return z!==D&&U!==H||!(z!==0||!y(I,S,P))||!(D!==0||!y(I,E,P))||!(U!==0||!y(S,I,E))||!(H!==0||!y(S,P,E))}function y(I,P,S){return P.x<=Math.max(I.x,S.x)&&P.x>=Math.min(I.x,S.x)&&P.y<=Math.max(I.y,S.y)&&P.y>=Math.min(I.y,S.y)}function f(I){return I>0?1:I<0?-1:0}function w(I,P){return p(I.prev,I,I.next)<0?p(I,P,I.next)>=0&&p(I,I.prev,P)>=0:p(I,P,I.prev)<0||p(I,I.next,P)<0}function b(I,P){var S=new L(I.i,I.x,I.y),E=new L(P.i,P.x,P.y),z=I.next,D=P.prev;return I.next=P,P.prev=I,S.next=z,z.prev=S,E.next=S,S.prev=E,D.next=E,E.prev=D,E}function _(I,P,S,E){var z=new L(I,P,S);return E?(z.next=E.next,z.prev=E,E.next.prev=z,E.next=z):(z.prev=z,z.next=z),z}function T(I){I.next.prev=I.prev,I.prev.next=I.next,I.prevZ&&(I.prevZ.nextZ=I.nextZ),I.nextZ&&(I.nextZ.prevZ=I.prevZ)}function L(I,P,S){this.i=I,this.x=P,this.y=S,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(I,P,S,E){for(var z=0,D=P,U=S-E;D<S;D+=E)z+=(I[U]-I[D])*(I[D+1]+I[U+1]),U=D;return z}Q.exports=m,Q.exports.default=m,m.deviation=function(I,P,S,E){var z=P&&P.length,D=z?P[0]*S:I.length,U=Math.abs(A(I,0,D,S));if(z)for(var H=0,Y=P.length;H<Y;H++){var J=P[H]*S,W=H<Y-1?P[H+1]*S:I.length;U-=Math.abs(A(I,J,W,S))}var Z=0;for(H=0;H<E.length;H+=3){var re=E[H]*S,V=E[H+1]*S,B=E[H+2]*S;Z+=Math.abs((I[re]-I[B])*(I[V+1]-I[re+1])-(I[re]-I[V])*(I[B+1]-I[re+1]))}return U===0&&Z===0?0:Math.abs((Z-U)/U)},m.flatten=function(I){for(var P=I[0][0].length,S={vertices:[],holes:[],dimensions:P},E=0,z=0;z<I.length;z++){for(var D=0;D<I[z].length;D++)for(var U=0;U<P;U++)S.vertices.push(I[z][D][U]);z>0&&(E+=I[z-1].length,S.holes.push(E))}return S}},{}],130:[function(g,Q,X){var m=g("strongly-connected-components");Q.exports=function(v,k){var x,e=[],t=[],r=[],l={},n=[];function d(i){var y,f,w=!1;for(t.push(i),r[i]=!0,y=0;y<n[i].length;y++)(f=n[i][y])===x?(u(x,t),w=!0):r[f]||(w=d(f));if(w)(function _(T){r[T]=!1,l.hasOwnProperty(T)&&Object.keys(l[T]).forEach(function(L){delete l[T][L],r[L]&&_(L)})})(i);else for(y=0;y<n[i].length;y++){f=n[i][y];var b=l[f];b||(b={},l[f]=b),b[f]=!0}return t.pop(),w}function u(i,y){var f=[].concat(y).concat(i);k?k(d):e.push(f)}function o(i){(function(L){for(var A=0;A<v.length;A++)A<L&&(v[A]=[]),v[A]=v[A].filter(function(I){return I>=L})})(i);for(var y,f=m(v).components.filter(function(L){return L.length>1}),w=1/0,b=0;b<f.length;b++)for(var _=0;_<f[b].length;_++)f[b][_]<w&&(w=f[b][_],y=b);var T=f[y];return!!T&&{leastVertex:w,adjList:v.map(function(L,A){return T.indexOf(A)===-1?[]:L.filter(function(I){return T.indexOf(I)!==-1})})}}x=0;for(var h=v.length;x<h;){var s=o(x);if(x=s.leastVertex,n=s.adjList){for(var a=0;a<n.length;a++)for(var p=0;p<n[a].length;p++){var c=n[a][p];r[+c]=!1,l[c]={}}d(x),x+=1}else x=h}return k?void 0:e}},{"strongly-connected-components":307}],131:[function(g,Q,X){var m=g("../../object/valid-value");Q.exports=function(){return m(this).length=0,this}},{"../../object/valid-value":162}],132:[function(g,Q,X){Q.exports=g("./is-implemented")()?Array.from:g("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(g,Q,X){Q.exports=function(){var m,v,k=Array.from;return typeof k=="function"&&(v=k(m=["raz","dwa"]),Boolean(v&&v!==m&&v[1]==="dwa"))}},{}],134:[function(g,Q,X){var m=g("es6-symbol").iterator,v=g("../../function/is-arguments"),k=g("../../function/is-function"),x=g("../../number/to-pos-integer"),e=g("../../object/valid-callable"),t=g("../../object/valid-value"),r=g("../../object/is-value"),l=g("../../string/is-string"),n=Array.isArray,d=Function.prototype.call,u={configurable:!0,enumerable:!0,writable:!0,value:null},o=Object.defineProperty;Q.exports=function(h){var s,a,p,c,i,y,f,w,b,_,T=arguments[1],L=arguments[2];if(h=Object(t(h)),r(T)&&e(T),this&&this!==Array&&k(this))s=this;else{if(!T){if(v(h))return(i=h.length)!==1?Array.apply(null,h):((c=new Array(1))[0]=h[0],c);if(n(h)){for(c=new Array(i=h.length),a=0;a<i;++a)c[a]=h[a];return c}}c=[]}if(!n(h)){if((b=h[m])!==void 0){for(f=e(b).call(h),s&&(c=new s),w=f.next(),a=0;!w.done;)_=T?d.call(T,L,w.value,a):w.value,s?(u.value=_,o(c,a,u)):c[a]=_,w=f.next(),++a;i=a}else if(l(h)){for(i=h.length,s&&(c=new s),a=0,p=0;a<i;++a)_=h[a],a+1<i&&(y=_.charCodeAt(0))>=55296&&y<=56319&&(_+=h[++a]),_=T?d.call(T,L,_,p):_,s?(u.value=_,o(c,p,u)):c[p]=_,++p;i=p}}if(i===void 0)for(i=x(h.length),s&&(c=new s(i)),a=0;a<i;++a)_=T?d.call(T,L,h[a],a):h[a],s?(u.value=_,o(c,a,u)):c[a]=_;return s&&(u.value=null,c.length=i),c}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(g,Q,X){var m=Object.prototype.toString,v=m.call(function(){return arguments}());Q.exports=function(k){return m.call(k)===v}},{}],136:[function(g,Q,X){var m=Object.prototype.toString,v=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);Q.exports=function(k){return typeof k=="function"&&v(m.call(k))}},{}],137:[function(g,Q,X){Q.exports=function(){}},{}],138:[function(g,Q,X){Q.exports=g("./is-implemented")()?Math.sign:g("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(g,Q,X){Q.exports=function(){var m=Math.sign;return typeof m=="function"&&m(10)===1&&m(-20)===-1}},{}],140:[function(g,Q,X){Q.exports=function(m){return m=Number(m),isNaN(m)||m===0?m:m>0?1:-1}},{}],141:[function(g,Q,X){var m=g("../math/sign"),v=Math.abs,k=Math.floor;Q.exports=function(x){return isNaN(x)?0:(x=Number(x))!==0&&isFinite(x)?m(x)*k(v(x)):x}},{"../math/sign":138}],142:[function(g,Q,X){var m=g("./to-integer"),v=Math.max;Q.exports=function(k){return v(0,m(k))}},{"./to-integer":141}],143:[function(g,Q,X){var m=g("./valid-callable"),v=g("./valid-value"),k=Function.prototype.bind,x=Function.prototype.call,e=Object.keys,t=Object.prototype.propertyIsEnumerable;Q.exports=function(r,l){return function(n,d){var u,o=arguments[2],h=arguments[3];return n=Object(v(n)),m(d),u=e(n),h&&u.sort(typeof h=="function"?k.call(h,n):void 0),typeof r!="function"&&(r=u[r]),x.call(r,u,function(s,a){return t.call(n,s)?x.call(d,o,n[s],s,n,a):l})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(g,Q,X){Q.exports=g("./is-implemented")()?Object.assign:g("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(g,Q,X){Q.exports=function(){var m,v=Object.assign;return typeof v=="function"&&(v(m={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),m.foo+m.bar+m.trzy==="razdwatrzy")}},{}],146:[function(g,Q,X){var m=g("../keys"),v=g("../valid-value"),k=Math.max;Q.exports=function(x,e){var t,r,l,n=k(arguments.length,2);for(x=Object(v(x)),l=function(d){try{x[d]=e[d]}catch(u){t||(t=u)}},r=1;r<n;++r)m(e=arguments[r]).forEach(l);if(t!==void 0)throw t;return x}},{"../keys":152,"../valid-value":162}],147:[function(g,Q,X){var m=g("../array/from"),v=g("./assign"),k=g("./valid-value");Q.exports=function(x){var e=Object(k(x)),t=arguments[1],r=Object(arguments[2]);if(e!==x&&!t)return e;var l={};return t?m(t,function(n){(r.ensure||n in x)&&(l[n]=x[n])}):v(l,x),l}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(g,Q,X){var m,v,k,x,e=Object.create;g("./set-prototype-of/is-implemented")()||(m=g("./set-prototype-of/shim")),Q.exports=m?m.level!==1?e:(v={},k={},x={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(t){k[t]=t!=="__proto__"?x:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(v,k),Object.defineProperty(m,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:v}),function(t,r){return e(t===null?v:t,r)}):e},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(g,Q,X){Q.exports=g("./_iterate")("forEach")},{"./_iterate":143}],150:[function(g,Q,X){var m=g("./is-value"),v={function:!0,object:!0};Q.exports=function(k){return m(k)&&v[typeof k]||!1}},{"./is-value":151}],151:[function(g,Q,X){var m=g("../function/noop")();Q.exports=function(v){return v!==m&&v!==null}},{"../function/noop":137}],152:[function(g,Q,X){Q.exports=g("./is-implemented")()?Object.keys:g("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(g,Q,X){Q.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},{}],154:[function(g,Q,X){var m=g("../is-value"),v=Object.keys;Q.exports=function(k){return v(m(k)?Object(k):k)}},{"../is-value":151}],155:[function(g,Q,X){var m=g("./valid-callable"),v=g("./for-each"),k=Function.prototype.call;Q.exports=function(x,e){var t={},r=arguments[2];return m(e),v(x,function(l,n,d,u){t[n]=k.call(e,r,l,n,d,u)}),t}},{"./for-each":149,"./valid-callable":160}],156:[function(g,Q,X){var m=g("./is-value"),v=Array.prototype.forEach,k=Object.create,x=function(e,t){var r;for(r in e)t[r]=e[r]};Q.exports=function(e){var t=k(null);return v.call(arguments,function(r){m(r)&&x(Object(r),t)}),t}},{"./is-value":151}],157:[function(g,Q,X){Q.exports=g("./is-implemented")()?Object.setPrototypeOf:g("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(g,Q,X){var m=Object.create,v=Object.getPrototypeOf,k={};Q.exports=function(){var x=Object.setPrototypeOf,e=arguments[0]||m;return typeof x=="function"&&v(x(e(null),k))===k}},{}],159:[function(g,Q,X){var m,v=g("../is-object"),k=g("../valid-value"),x=Object.prototype.isPrototypeOf,e=Object.defineProperty,t={configurable:!0,enumerable:!1,writable:!0,value:void 0};m=function(r,l){if(k(r),l===null||v(l))return r;throw new TypeError("Prototype must be null or an object")},Q.exports=function(r){var l,n;return r?(r.level===2?r.set?(n=r.set,l=function(d,u){return n.call(m(d,u),u),d}):l=function(d,u){return m(d,u).__proto__=u,d}:l=function d(u,o){var h;return m(u,o),(h=x.call(d.nullPolyfill,u))&&delete d.nullPolyfill.__proto__,o===null&&(o=d.nullPolyfill),u.__proto__=o,h&&e(d.nullPolyfill,"__proto__",t),u},Object.defineProperty(l,"level",{configurable:!1,enumerable:!1,writable:!1,value:r.level})):null}(function(){var r,l=Object.create(null),n={},d=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(d){try{(r=d.set).call(l,n)}catch{}if(Object.getPrototypeOf(l)===n)return{set:r,level:2}}return l.__proto__=n,Object.getPrototypeOf(l)===n?{level:2}:((l={}).__proto__=n,Object.getPrototypeOf(l)===n&&{level:1})}()),g("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(g,Q,X){Q.exports=function(m){if(typeof m!="function")throw new TypeError(m+" is not a function");return m}},{}],161:[function(g,Q,X){var m=g("./is-object");Q.exports=function(v){if(!m(v))throw new TypeError(v+" is not an Object");return v}},{"./is-object":150}],162:[function(g,Q,X){var m=g("./is-value");Q.exports=function(v){if(!m(v))throw new TypeError("Cannot use null or undefined");return v}},{"./is-value":151}],163:[function(g,Q,X){Q.exports=g("./is-implemented")()?String.prototype.contains:g("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(g,Q,X){var m="razdwatrzy";Q.exports=function(){return typeof m.contains=="function"&&m.contains("dwa")===!0&&m.contains("foo")===!1}},{}],165:[function(g,Q,X){var m=String.prototype.indexOf;Q.exports=function(v){return m.call(this,v,arguments[1])>-1}},{}],166:[function(g,Q,X){var m=Object.prototype.toString,v=m.call("");Q.exports=function(k){return typeof k=="string"||k&&typeof k=="object"&&(k instanceof String||m.call(k)===v)||!1}},{}],167:[function(g,Q,X){var m=Object.create(null),v=Math.random;Q.exports=function(){var k;do k=v().toString(36).slice(2);while(m[k]);return k}},{}],168:[function(g,Q,X){var m,v=g("es5-ext/object/set-prototype-of"),k=g("es5-ext/string/#/contains"),x=g("d"),e=g("es6-symbol"),t=g("./"),r=Object.defineProperty;m=Q.exports=function(l,n){if(!(this instanceof m))throw new TypeError("Constructor requires 'new'");t.call(this,l),n=n?k.call(n,"key+value")?"key+value":k.call(n,"key")?"key":"value":"value",r(this,"__kind__",x("",n))},v&&v(m,t),delete m.prototype.constructor,m.prototype=Object.create(t.prototype,{_resolve:x(function(l){return this.__kind__==="value"?this.__list__[l]:this.__kind__==="key+value"?[l,this.__list__[l]]:l})}),r(m.prototype,e.toStringTag,x("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(g,Q,X){var m=g("es5-ext/function/is-arguments"),v=g("es5-ext/object/valid-callable"),k=g("es5-ext/string/is-string"),x=g("./get"),e=Array.isArray,t=Function.prototype.call,r=Array.prototype.some;Q.exports=function(l,n){var d,u,o,h,s,a,p,c,i=arguments[2];if(e(l)||m(l)?d="array":k(l)?d="string":l=x(l),v(n),o=function(){h=!0},d!=="array")if(d!=="string")for(u=l.next();!u.done;){if(t.call(n,i,u.value,o),h)return;u=l.next()}else for(a=l.length,s=0;s<a&&(p=l[s],s+1<a&&(c=p.charCodeAt(0))>=55296&&c<=56319&&(p+=l[++s]),t.call(n,i,p,o),!h);++s);else r.call(l,function(y){return t.call(n,i,y,o),h})}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(g,Q,X){var m=g("es5-ext/function/is-arguments"),v=g("es5-ext/string/is-string"),k=g("./array"),x=g("./string"),e=g("./valid-iterable"),t=g("es6-symbol").iterator;Q.exports=function(r){return typeof e(r)[t]=="function"?r[t]():m(r)?new k(r):v(r)?new x(r):new k(r)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(g,Q,X){var m,v=g("es5-ext/array/#/clear"),k=g("es5-ext/object/assign"),x=g("es5-ext/object/valid-callable"),e=g("es5-ext/object/valid-value"),t=g("d"),r=g("d/auto-bind"),l=g("es6-symbol"),n=Object.defineProperty,d=Object.defineProperties;Q.exports=m=function(u,o){if(!(this instanceof m))throw new TypeError("Constructor requires 'new'");d(this,{__list__:t("w",e(u)),__context__:t("w",o),__nextIndex__:t("w",0)}),o&&(x(o.on),o.on("_add",this._onAdd),o.on("_delete",this._onDelete),o.on("_clear",this._onClear))},delete m.prototype.constructor,d(m.prototype,k({_next:t(function(){var u;if(this.__list__)return this.__redo__&&(u=this.__redo__.shift())!==void 0?u:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:t(function(){return this._createResult(this._next())}),_createResult:t(function(u){return u===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(u)}}),_resolve:t(function(u){return this.__list__[u]}),_unBind:t(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:t(function(){return"[object "+(this[l.toStringTag]||"Object")+"]"})},r({_onAdd:t(function(u){u>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(o,h){o>=u&&(this.__redo__[h]=++o)},this),this.__redo__.push(u)):n(this,"__redo__",t("c",[u])))}),_onDelete:t(function(u){var o;u>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&((o=this.__redo__.indexOf(u))!==-1&&this.__redo__.splice(o,1),this.__redo__.forEach(function(h,s){h>u&&(this.__redo__[s]=--h)},this)))}),_onClear:t(function(){this.__redo__&&v.call(this.__redo__),this.__nextIndex__=0})}))),n(m.prototype,l.iterator,t(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(g,Q,X){var m=g("es5-ext/function/is-arguments"),v=g("es5-ext/object/is-value"),k=g("es5-ext/string/is-string"),x=g("es6-symbol").iterator,e=Array.isArray;Q.exports=function(t){return!!v(t)&&(!!e(t)||!!k(t)||!!m(t)||typeof t[x]=="function")}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(g,Q,X){var m,v=g("es5-ext/object/set-prototype-of"),k=g("d"),x=g("es6-symbol"),e=g("./"),t=Object.defineProperty;m=Q.exports=function(r){if(!(this instanceof m))throw new TypeError("Constructor requires 'new'");r=String(r),e.call(this,r),t(this,"__length__",k("",r.length))},v&&v(m,e),delete m.prototype.constructor,m.prototype=Object.create(e.prototype,{_next:k(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:k(function(r){var l,n=this.__list__[r];return this.__nextIndex__===this.__length__?n:(l=n.charCodeAt(0))>=55296&&l<=56319?n+this.__list__[this.__nextIndex__++]:n})}),t(m.prototype,x.toStringTag,k("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(g,Q,X){var m=g("./is-iterable");Q.exports=function(v){if(!m(v))throw new TypeError(v+" is not iterable");return v}},{"./is-iterable":172}],175:[function(g,Q,X){Q.exports=g("./is-implemented")()?g("ext/global-this").Symbol:g("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(g,Q,X){var m=g("ext/global-this"),v={object:!0,symbol:!0};Q.exports=function(){var k,x=m.Symbol;if(typeof x!="function")return!1;k=x("test symbol");try{String(k)}catch{return!1}return!!v[typeof x.iterator]&&!!v[typeof x.toPrimitive]&&!!v[typeof x.toStringTag]}},{"ext/global-this":188}],177:[function(g,Q,X){Q.exports=function(m){return!!m&&(typeof m=="symbol"||!!m.constructor&&m.constructor.name==="Symbol"&&m[m.constructor.toStringTag]==="Symbol")}},{}],178:[function(g,Q,X){var m=g("d"),v=Object.create,k=Object.defineProperty,x=Object.prototype,e=v(null);Q.exports=function(t){for(var r,l,n=0;e[t+(n||"")];)++n;return e[t+=n||""]=!0,k(x,r="@@"+t,m.gs(null,function(d){l||(l=!0,k(this,r,m(d)),l=!1)})),r}},{d:106}],179:[function(g,Q,X){var m=g("d"),v=g("ext/global-this").Symbol;Q.exports=function(k){return Object.defineProperties(k,{hasInstance:m("",v&&v.hasInstance||k("hasInstance")),isConcatSpreadable:m("",v&&v.isConcatSpreadable||k("isConcatSpreadable")),iterator:m("",v&&v.iterator||k("iterator")),match:m("",v&&v.match||k("match")),replace:m("",v&&v.replace||k("replace")),search:m("",v&&v.search||k("search")),species:m("",v&&v.species||k("species")),split:m("",v&&v.split||k("split")),toPrimitive:m("",v&&v.toPrimitive||k("toPrimitive")),toStringTag:m("",v&&v.toStringTag||k("toStringTag")),unscopables:m("",v&&v.unscopables||k("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(g,Q,X){var m=g("d"),v=g("../../../validate-symbol"),k=Object.create(null);Q.exports=function(x){return Object.defineProperties(x,{for:m(function(e){return k[e]?k[e]:k[e]=x(String(e))}),keyFor:m(function(e){var t;for(t in v(e),k)if(k[t]===e)return t})})}},{"../../../validate-symbol":182,d:106}],181:[function(g,Q,X){var m,v,k,x=g("d"),e=g("./validate-symbol"),t=g("ext/global-this").Symbol,r=g("./lib/private/generate-name"),l=g("./lib/private/setup/standard-symbols"),n=g("./lib/private/setup/symbol-registry"),d=Object.create,u=Object.defineProperties,o=Object.defineProperty;if(typeof t=="function")try{String(t()),k=!0}catch{}else t=null;v=function(h){if(this instanceof v)throw new TypeError("Symbol is not a constructor");return m(h)},Q.exports=m=function h(s){var a;if(this instanceof h)throw new TypeError("Symbol is not a constructor");return k?t(s):(a=d(v.prototype),s=s===void 0?"":String(s),u(a,{__description__:x("",s),__name__:x("",r(s))}))},l(m),n(m),u(v.prototype,{constructor:x(m),toString:x("",function(){return this.__name__})}),u(m.prototype,{toString:x(function(){return"Symbol ("+e(this).__description__+")"}),valueOf:x(function(){return e(this)})}),o(m.prototype,m.toPrimitive,x("",function(){var h=e(this);return typeof h=="symbol"?h:h.toString()})),o(m.prototype,m.toStringTag,x("c","Symbol")),o(v.prototype,m.toStringTag,x("c",m.prototype[m.toStringTag])),o(v.prototype,m.toPrimitive,x("c",m.prototype[m.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(g,Q,X){var m=g("./is-symbol");Q.exports=function(v){if(!m(v))throw new TypeError(v+" is not a symbol");return v}},{"./is-symbol":177}],183:[function(g,Q,X){Q.exports=g("./is-implemented")()?WeakMap:g("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(g,Q,X){Q.exports=function(){var m,v;if(typeof WeakMap!="function")return!1;try{m=new WeakMap([[v={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return String(m)==="[object WeakMap]"&&typeof m.set=="function"&&m.set({},1)===m&&typeof m.delete=="function"&&typeof m.has=="function"&&m.get(v)==="one"}},{}],185:[function(g,Q,X){Q.exports=typeof WeakMap=="function"&&Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"},{}],186:[function(g,Q,X){var m,v=g("es5-ext/object/is-value"),k=g("es5-ext/object/set-prototype-of"),x=g("es5-ext/object/valid-object"),e=g("es5-ext/object/valid-value"),t=g("es5-ext/string/random-uniq"),r=g("d"),l=g("es6-iterator/get"),n=g("es6-iterator/for-of"),d=g("es6-symbol").toStringTag,u=g("./is-native-implemented"),o=Array.isArray,h=Object.defineProperty,s=Object.prototype.hasOwnProperty,a=Object.getPrototypeOf;Q.exports=m=function(){var p,c=arguments[0];if(!(this instanceof m))throw new TypeError("Constructor requires 'new'");return p=u&&k&&WeakMap!==m?k(new WeakMap,a(this)):this,v(c)&&(o(c)||(c=l(c))),h(p,"__weakMapData__",r("c","$weakMap$"+t())),c&&n(c,function(i){e(i),p.set(i[0],i[1])}),p},u&&(k&&k(m,WeakMap),m.prototype=Object.create(WeakMap.prototype,{constructor:r(m)})),Object.defineProperties(m.prototype,{delete:r(function(p){return!!s.call(x(p),this.__weakMapData__)&&(delete p[this.__weakMapData__],!0)}),get:r(function(p){if(s.call(x(p),this.__weakMapData__))return p[this.__weakMapData__]}),has:r(function(p){return s.call(x(p),this.__weakMapData__)}),set:r(function(p,c){return h(x(p),this.__weakMapData__,r("c",c)),this}),toString:r(function(){return"[object WeakMap]"})}),h(m.prototype,d,r("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(g,Q,X){var m=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};Q.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return m()}try{return __global__||m()}finally{delete Object.prototype.__global__}}()},{}],188:[function(g,Q,X){Q.exports=g("./is-implemented")()?globalThis:g("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(g,Q,X){Q.exports=function(){return typeof globalThis=="object"&&!!globalThis&&globalThis.Array===Array}},{}],190:[function(g,Q,X){var m=g("is-string-blank");Q.exports=function(v){var k=typeof v;if(k==="string"){var x=v;if((v=+v)==0&&m(x))return!1}else if(k!=="number")return!1;return v-v<1}},{"is-string-blank":237}],191:[function(g,Q,X){var m=g("dtype");Q.exports=function(v,k,x){if(!v)throw new TypeError("must specify data as first parameter");if(x=0|+(x||0),Array.isArray(v)&&v[0]&&typeof v[0][0]=="number"){var e,t,r,l,n=v[0].length,d=v.length*n;k&&typeof k!="string"||(k=new(m(k||"float32"))(d+x));var u=k.length-x;if(d!==u)throw new Error("source length "+d+" ("+n+"x"+v.length+") does not match destination length "+u);for(e=0,r=x;e<v.length;e++)for(t=0;t<n;t++)k[r++]=v[e][t]===null?NaN:v[e][t]}else if(k&&typeof k!="string")k.set(v,x);else{var o=m(k||"float32");if(Array.isArray(v)||k==="array")for(k=new o(v.length+x),e=0,r=x,l=k.length;r<l;r++,e++)k[r]=v[e]===null?NaN:v[e];else x===0?k=new o(v):(k=new o(v.length+x)).set(v,x)}return k}},{dtype:127}],192:[function(g,Q,X){var m=g("css-font/stringify"),v=[32,126];Q.exports=function(k){var x=(k=k||{}).shape?k.shape:k.canvas?[k.canvas.width,k.canvas.height]:[512,512],e=k.canvas||document.createElement("canvas"),t=k.font,r=typeof k.step=="number"?[k.step,k.step]:k.step||[32,32],l=k.chars||v;if(t&&typeof t!="string"&&(t=m(t)),Array.isArray(l)){if(l.length===2&&typeof l[0]=="number"&&typeof l[1]=="number"){for(var n=[],d=l[0],u=0;d<=l[1];d++)n[u++]=String.fromCharCode(d);l=n}}else l=String(l).split("");x=x.slice(),e.width=x[0],e.height=x[1];var o=e.getContext("2d");o.fillStyle="#000",o.fillRect(0,0,e.width,e.height),o.font=t,o.textAlign="center",o.textBaseline="middle",o.fillStyle="#fff";var h=r[0]/2,s=r[1]/2;for(d=0;d<l.length;d++)o.fillText(l[d],h,s),(h+=r[0])>x[0]-r[0]/2&&(h=r[0]/2,s+=r[1]);return e}},{"css-font/stringify":102}],193:[function(g,Q,X){function m(e,t){t||(t={}),(typeof e=="string"||Array.isArray(e))&&(t.family=e);var r=Array.isArray(t.family)?t.family.join(", "):t.family;if(!r)throw Error("`family` must be defined");var l=t.size||t.fontSize||t.em||48,n=t.weight||t.fontWeight||"",d=(e=[t.style||t.fontStyle||"",n,l].join(" ")+"px "+r,t.origin||"top");if(m.cache[r]&&l<=m.cache[r].em)return v(m.cache[r],d);var u=t.canvas||m.canvas,o=u.getContext("2d"),h={upper:t.upper!==void 0?t.upper:"H",lower:t.lower!==void 0?t.lower:"x",descent:t.descent!==void 0?t.descent:"p",ascent:t.ascent!==void 0?t.ascent:"h",tittle:t.tittle!==void 0?t.tittle:"i",overshoot:t.overshoot!==void 0?t.overshoot:"O"},s=Math.ceil(1.5*l);u.height=s,u.width=.5*s,o.font=e;var a={top:0};o.clearRect(0,0,s,s),o.textBaseline="top",o.fillStyle="black",o.fillText("H",0,0);var p=k(o.getImageData(0,0,s,s));o.clearRect(0,0,s,s),o.textBaseline="bottom",o.fillText("H",0,s);var c=k(o.getImageData(0,0,s,s));a.lineHeight=a.bottom=s-c+p,o.clearRect(0,0,s,s),o.textBaseline="alphabetic",o.fillText("H",0,s);var i=s-k(o.getImageData(0,0,s,s))-1+p;a.baseline=a.alphabetic=i,o.clearRect(0,0,s,s),o.textBaseline="middle",o.fillText("H",0,.5*s);var y=k(o.getImageData(0,0,s,s));a.median=a.middle=s-y-1+p-.5*s,o.clearRect(0,0,s,s),o.textBaseline="hanging",o.fillText("H",0,.5*s);var f=k(o.getImageData(0,0,s,s));a.hanging=s-f-1+p-.5*s,o.clearRect(0,0,s,s),o.textBaseline="ideographic",o.fillText("H",0,s);var w=k(o.getImageData(0,0,s,s));if(a.ideographic=s-w-1+p,h.upper&&(o.clearRect(0,0,s,s),o.textBaseline="top",o.fillText(h.upper,0,0),a.upper=k(o.getImageData(0,0,s,s)),a.capHeight=a.baseline-a.upper),h.lower&&(o.clearRect(0,0,s,s),o.textBaseline="top",o.fillText(h.lower,0,0),a.lower=k(o.getImageData(0,0,s,s)),a.xHeight=a.baseline-a.lower),h.tittle&&(o.clearRect(0,0,s,s),o.textBaseline="top",o.fillText(h.tittle,0,0),a.tittle=k(o.getImageData(0,0,s,s))),h.ascent&&(o.clearRect(0,0,s,s),o.textBaseline="top",o.fillText(h.ascent,0,0),a.ascent=k(o.getImageData(0,0,s,s))),h.descent&&(o.clearRect(0,0,s,s),o.textBaseline="top",o.fillText(h.descent,0,0),a.descent=x(o.getImageData(0,0,s,s))),h.overshoot){o.clearRect(0,0,s,s),o.textBaseline="top",o.fillText(h.overshoot,0,0);var b=x(o.getImageData(0,0,s,s));a.overshoot=b-i}for(var _ in a)a[_]/=l;return a.em=l,m.cache[r]=a,v(a,d)}function v(e,t){var r={};for(var l in typeof t=="string"&&(t=e[t]),e)l!=="em"&&(r[l]=e[l]-t);return r}function k(e){for(var t=e.height,r=e.data,l=3;l<r.length;l+=4)if(r[l]!==0)return Math.floor(.25*(l-3)/t)}function x(e){for(var t=e.height,r=e.data,l=r.length-1;l>0;l-=4)if(r[l]!==0)return Math.floor(.25*(l-3)/t)}Q.exports=m,m.canvas=document.createElement("canvas"),m.cache={}},{}],194:[function(g,Q,X){Q.exports=function(m,v){if(typeof m!="string")throw new TypeError("must specify type string");if(v=v||{},typeof document>"u"&&!v.canvas)return null;var k=v.canvas||document.createElement("canvas");typeof v.width=="number"&&(k.width=v.width),typeof v.height=="number"&&(k.height=v.height);var x,e=v;try{var t=[m];m.indexOf("webgl")===0&&t.push("experimental-"+m);for(var r=0;r<t.length;r++)if(x=k.getContext(t[r],e))return x}catch{x=null}return x||null}},{}],195:[function(g,Q,X){Q.exports=function(m,v){var k=v[0],x=v[1],e=v[2],t=v[3],r=v[4],l=v[5],n=v[6],d=v[7],u=v[8],o=v[9],h=v[10],s=v[11],a=v[12],p=v[13],c=v[14],i=v[15];return m[0]=l*(h*i-s*c)-o*(n*i-d*c)+p*(n*s-d*h),m[1]=-(x*(h*i-s*c)-o*(e*i-t*c)+p*(e*s-t*h)),m[2]=x*(n*i-d*c)-l*(e*i-t*c)+p*(e*d-t*n),m[3]=-(x*(n*s-d*h)-l*(e*s-t*h)+o*(e*d-t*n)),m[4]=-(r*(h*i-s*c)-u*(n*i-d*c)+a*(n*s-d*h)),m[5]=k*(h*i-s*c)-u*(e*i-t*c)+a*(e*s-t*h),m[6]=-(k*(n*i-d*c)-r*(e*i-t*c)+a*(e*d-t*n)),m[7]=k*(n*s-d*h)-r*(e*s-t*h)+u*(e*d-t*n),m[8]=r*(o*i-s*p)-u*(l*i-d*p)+a*(l*s-d*o),m[9]=-(k*(o*i-s*p)-u*(x*i-t*p)+a*(x*s-t*o)),m[10]=k*(l*i-d*p)-r*(x*i-t*p)+a*(x*d-t*l),m[11]=-(k*(l*s-d*o)-r*(x*s-t*o)+u*(x*d-t*l)),m[12]=-(r*(o*c-h*p)-u*(l*c-n*p)+a*(l*h-n*o)),m[13]=k*(o*c-h*p)-u*(x*c-e*p)+a*(x*h-e*o),m[14]=-(k*(l*c-n*p)-r*(x*c-e*p)+a*(x*n-e*l)),m[15]=k*(l*h-n*o)-r*(x*h-e*o)+u*(x*n-e*l),m}},{}],196:[function(g,Q,X){Q.exports=function(m){var v=new Float32Array(16);return v[0]=m[0],v[1]=m[1],v[2]=m[2],v[3]=m[3],v[4]=m[4],v[5]=m[5],v[6]=m[6],v[7]=m[7],v[8]=m[8],v[9]=m[9],v[10]=m[10],v[11]=m[11],v[12]=m[12],v[13]=m[13],v[14]=m[14],v[15]=m[15],v}},{}],197:[function(g,Q,X){Q.exports=function(m,v){return m[0]=v[0],m[1]=v[1],m[2]=v[2],m[3]=v[3],m[4]=v[4],m[5]=v[5],m[6]=v[6],m[7]=v[7],m[8]=v[8],m[9]=v[9],m[10]=v[10],m[11]=v[11],m[12]=v[12],m[13]=v[13],m[14]=v[14],m[15]=v[15],m}},{}],198:[function(g,Q,X){Q.exports=function(){var m=new Float32Array(16);return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=1,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=1,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}},{}],199:[function(g,Q,X){Q.exports=function(m){var v=m[0],k=m[1],x=m[2],e=m[3],t=m[4],r=m[5],l=m[6],n=m[7],d=m[8],u=m[9],o=m[10],h=m[11],s=m[12],a=m[13],p=m[14],c=m[15];return(v*r-k*t)*(o*c-h*p)-(v*l-x*t)*(u*c-h*a)+(v*n-e*t)*(u*p-o*a)+(k*l-x*r)*(d*c-h*s)-(k*n-e*r)*(d*p-o*s)+(x*n-e*l)*(d*a-u*s)}},{}],200:[function(g,Q,X){Q.exports=function(m,v){var k=v[0],x=v[1],e=v[2],t=v[3],r=k+k,l=x+x,n=e+e,d=k*r,u=x*r,o=x*l,h=e*r,s=e*l,a=e*n,p=t*r,c=t*l,i=t*n;return m[0]=1-o-a,m[1]=u+i,m[2]=h-c,m[3]=0,m[4]=u-i,m[5]=1-d-a,m[6]=s+p,m[7]=0,m[8]=h+c,m[9]=s-p,m[10]=1-d-o,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}},{}],201:[function(g,Q,X){Q.exports=function(m,v,k){var x,e,t,r=k[0],l=k[1],n=k[2],d=Math.sqrt(r*r+l*l+n*n);return Math.abs(d)<1e-6?null:(r*=d=1/d,l*=d,n*=d,x=Math.sin(v),e=Math.cos(v),t=1-e,m[0]=r*r*t+e,m[1]=l*r*t+n*x,m[2]=n*r*t-l*x,m[3]=0,m[4]=r*l*t-n*x,m[5]=l*l*t+e,m[6]=n*l*t+r*x,m[7]=0,m[8]=r*n*t+l*x,m[9]=l*n*t-r*x,m[10]=n*n*t+e,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m)}},{}],202:[function(g,Q,X){Q.exports=function(m,v,k){var x=v[0],e=v[1],t=v[2],r=v[3],l=x+x,n=e+e,d=t+t,u=x*l,o=x*n,h=x*d,s=e*n,a=e*d,p=t*d,c=r*l,i=r*n,y=r*d;return m[0]=1-(s+p),m[1]=o+y,m[2]=h-i,m[3]=0,m[4]=o-y,m[5]=1-(u+p),m[6]=a+c,m[7]=0,m[8]=h+i,m[9]=a-c,m[10]=1-(u+s),m[11]=0,m[12]=k[0],m[13]=k[1],m[14]=k[2],m[15]=1,m}},{}],203:[function(g,Q,X){Q.exports=function(m,v){return m[0]=v[0],m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=v[1],m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=v[2],m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}},{}],204:[function(g,Q,X){Q.exports=function(m,v){return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=1,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=1,m[11]=0,m[12]=v[0],m[13]=v[1],m[14]=v[2],m[15]=1,m}},{}],205:[function(g,Q,X){Q.exports=function(m,v){var k=Math.sin(v),x=Math.cos(v);return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=x,m[6]=k,m[7]=0,m[8]=0,m[9]=-k,m[10]=x,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}},{}],206:[function(g,Q,X){Q.exports=function(m,v){var k=Math.sin(v),x=Math.cos(v);return m[0]=x,m[1]=0,m[2]=-k,m[3]=0,m[4]=0,m[5]=1,m[6]=0,m[7]=0,m[8]=k,m[9]=0,m[10]=x,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}},{}],207:[function(g,Q,X){Q.exports=function(m,v){var k=Math.sin(v),x=Math.cos(v);return m[0]=x,m[1]=k,m[2]=0,m[3]=0,m[4]=-k,m[5]=x,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=1,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}},{}],208:[function(g,Q,X){Q.exports=function(m,v,k,x,e,t,r){var l=1/(k-v),n=1/(e-x),d=1/(t-r);return m[0]=2*t*l,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=2*t*n,m[6]=0,m[7]=0,m[8]=(k+v)*l,m[9]=(e+x)*n,m[10]=(r+t)*d,m[11]=-1,m[12]=0,m[13]=0,m[14]=r*t*2*d,m[15]=0,m}},{}],209:[function(g,Q,X){Q.exports=function(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=1,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=1,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}},{}],210:[function(g,Q,X){Q.exports={create:g("./create"),clone:g("./clone"),copy:g("./copy"),identity:g("./identity"),transpose:g("./transpose"),invert:g("./invert"),adjoint:g("./adjoint"),determinant:g("./determinant"),multiply:g("./multiply"),translate:g("./translate"),scale:g("./scale"),rotate:g("./rotate"),rotateX:g("./rotateX"),rotateY:g("./rotateY"),rotateZ:g("./rotateZ"),fromRotation:g("./fromRotation"),fromRotationTranslation:g("./fromRotationTranslation"),fromScaling:g("./fromScaling"),fromTranslation:g("./fromTranslation"),fromXRotation:g("./fromXRotation"),fromYRotation:g("./fromYRotation"),fromZRotation:g("./fromZRotation"),fromQuat:g("./fromQuat"),frustum:g("./frustum"),perspective:g("./perspective"),perspectiveFromFieldOfView:g("./perspectiveFromFieldOfView"),ortho:g("./ortho"),lookAt:g("./lookAt"),str:g("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(g,Q,X){Q.exports=function(m,v){var k=v[0],x=v[1],e=v[2],t=v[3],r=v[4],l=v[5],n=v[6],d=v[7],u=v[8],o=v[9],h=v[10],s=v[11],a=v[12],p=v[13],c=v[14],i=v[15],y=k*l-x*r,f=k*n-e*r,w=k*d-t*r,b=x*n-e*l,_=x*d-t*l,T=e*d-t*n,L=u*p-o*a,A=u*c-h*a,I=u*i-s*a,P=o*c-h*p,S=o*i-s*p,E=h*i-s*c,z=y*E-f*S+w*P+b*I-_*A+T*L;return z?(z=1/z,m[0]=(l*E-n*S+d*P)*z,m[1]=(e*S-x*E-t*P)*z,m[2]=(p*T-c*_+i*b)*z,m[3]=(h*_-o*T-s*b)*z,m[4]=(n*I-r*E-d*A)*z,m[5]=(k*E-e*I+t*A)*z,m[6]=(c*w-a*T-i*f)*z,m[7]=(u*T-h*w+s*f)*z,m[8]=(r*S-l*I+d*L)*z,m[9]=(x*I-k*S-t*L)*z,m[10]=(a*_-p*w+i*y)*z,m[11]=(o*w-u*_-s*y)*z,m[12]=(l*A-r*P-n*L)*z,m[13]=(k*P-x*A+e*L)*z,m[14]=(p*f-a*b-c*y)*z,m[15]=(u*b-o*f+h*y)*z,m):null}},{}],212:[function(g,Q,X){var m=g("./identity");Q.exports=function(v,k,x,e){var t,r,l,n,d,u,o,h,s,a,p=k[0],c=k[1],i=k[2],y=e[0],f=e[1],w=e[2],b=x[0],_=x[1],T=x[2];return Math.abs(p-b)<1e-6&&Math.abs(c-_)<1e-6&&Math.abs(i-T)<1e-6?m(v):(o=p-b,h=c-_,s=i-T,a=1/Math.sqrt(o*o+h*h+s*s),t=f*(s*=a)-w*(h*=a),r=w*(o*=a)-y*s,l=y*h-f*o,(a=Math.sqrt(t*t+r*r+l*l))?(t*=a=1/a,r*=a,l*=a):(t=0,r=0,l=0),n=h*l-s*r,d=s*t-o*l,u=o*r-h*t,(a=Math.sqrt(n*n+d*d+u*u))?(n*=a=1/a,d*=a,u*=a):(n=0,d=0,u=0),v[0]=t,v[1]=n,v[2]=o,v[3]=0,v[4]=r,v[5]=d,v[6]=h,v[7]=0,v[8]=l,v[9]=u,v[10]=s,v[11]=0,v[12]=-(t*p+r*c+l*i),v[13]=-(n*p+d*c+u*i),v[14]=-(o*p+h*c+s*i),v[15]=1,v)}},{"./identity":209}],213:[function(g,Q,X){Q.exports=function(m,v,k){var x=v[0],e=v[1],t=v[2],r=v[3],l=v[4],n=v[5],d=v[6],u=v[7],o=v[8],h=v[9],s=v[10],a=v[11],p=v[12],c=v[13],i=v[14],y=v[15],f=k[0],w=k[1],b=k[2],_=k[3];return m[0]=f*x+w*l+b*o+_*p,m[1]=f*e+w*n+b*h+_*c,m[2]=f*t+w*d+b*s+_*i,m[3]=f*r+w*u+b*a+_*y,f=k[4],w=k[5],b=k[6],_=k[7],m[4]=f*x+w*l+b*o+_*p,m[5]=f*e+w*n+b*h+_*c,m[6]=f*t+w*d+b*s+_*i,m[7]=f*r+w*u+b*a+_*y,f=k[8],w=k[9],b=k[10],_=k[11],m[8]=f*x+w*l+b*o+_*p,m[9]=f*e+w*n+b*h+_*c,m[10]=f*t+w*d+b*s+_*i,m[11]=f*r+w*u+b*a+_*y,f=k[12],w=k[13],b=k[14],_=k[15],m[12]=f*x+w*l+b*o+_*p,m[13]=f*e+w*n+b*h+_*c,m[14]=f*t+w*d+b*s+_*i,m[15]=f*r+w*u+b*a+_*y,m}},{}],214:[function(g,Q,X){Q.exports=function(m,v,k,x,e,t,r){var l=1/(v-k),n=1/(x-e),d=1/(t-r);return m[0]=-2*l,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=-2*n,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=2*d,m[11]=0,m[12]=(v+k)*l,m[13]=(e+x)*n,m[14]=(r+t)*d,m[15]=1,m}},{}],215:[function(g,Q,X){Q.exports=function(m,v,k,x,e){var t=1/Math.tan(v/2),r=1/(x-e);return m[0]=t/k,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=t,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=(e+x)*r,m[11]=-1,m[12]=0,m[13]=0,m[14]=2*e*x*r,m[15]=0,m}},{}],216:[function(g,Q,X){Q.exports=function(m,v,k,x){var e=Math.tan(v.upDegrees*Math.PI/180),t=Math.tan(v.downDegrees*Math.PI/180),r=Math.tan(v.leftDegrees*Math.PI/180),l=Math.tan(v.rightDegrees*Math.PI/180),n=2/(r+l),d=2/(e+t);return m[0]=n,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=d,m[6]=0,m[7]=0,m[8]=-(r-l)*n*.5,m[9]=(e-t)*d*.5,m[10]=x/(k-x),m[11]=-1,m[12]=0,m[13]=0,m[14]=x*k/(k-x),m[15]=0,m}},{}],217:[function(g,Q,X){Q.exports=function(m,v,k,x){var e,t,r,l,n,d,u,o,h,s,a,p,c,i,y,f,w,b,_,T,L,A,I,P,S=x[0],E=x[1],z=x[2],D=Math.sqrt(S*S+E*E+z*z);return Math.abs(D)<1e-6?null:(S*=D=1/D,E*=D,z*=D,e=Math.sin(k),t=Math.cos(k),r=1-t,l=v[0],n=v[1],d=v[2],u=v[3],o=v[4],h=v[5],s=v[6],a=v[7],p=v[8],c=v[9],i=v[10],y=v[11],f=S*S*r+t,w=E*S*r+z*e,b=z*S*r-E*e,_=S*E*r-z*e,T=E*E*r+t,L=z*E*r+S*e,A=S*z*r+E*e,I=E*z*r-S*e,P=z*z*r+t,m[0]=l*f+o*w+p*b,m[1]=n*f+h*w+c*b,m[2]=d*f+s*w+i*b,m[3]=u*f+a*w+y*b,m[4]=l*_+o*T+p*L,m[5]=n*_+h*T+c*L,m[6]=d*_+s*T+i*L,m[7]=u*_+a*T+y*L,m[8]=l*A+o*I+p*P,m[9]=n*A+h*I+c*P,m[10]=d*A+s*I+i*P,m[11]=u*A+a*I+y*P,v!==m&&(m[12]=v[12],m[13]=v[13],m[14]=v[14],m[15]=v[15]),m)}},{}],218:[function(g,Q,X){Q.exports=function(m,v,k){var x=Math.sin(k),e=Math.cos(k),t=v[4],r=v[5],l=v[6],n=v[7],d=v[8],u=v[9],o=v[10],h=v[11];return v!==m&&(m[0]=v[0],m[1]=v[1],m[2]=v[2],m[3]=v[3],m[12]=v[12],m[13]=v[13],m[14]=v[14],m[15]=v[15]),m[4]=t*e+d*x,m[5]=r*e+u*x,m[6]=l*e+o*x,m[7]=n*e+h*x,m[8]=d*e-t*x,m[9]=u*e-r*x,m[10]=o*e-l*x,m[11]=h*e-n*x,m}},{}],219:[function(g,Q,X){Q.exports=function(m,v,k){var x=Math.sin(k),e=Math.cos(k),t=v[0],r=v[1],l=v[2],n=v[3],d=v[8],u=v[9],o=v[10],h=v[11];return v!==m&&(m[4]=v[4],m[5]=v[5],m[6]=v[6],m[7]=v[7],m[12]=v[12],m[13]=v[13],m[14]=v[14],m[15]=v[15]),m[0]=t*e-d*x,m[1]=r*e-u*x,m[2]=l*e-o*x,m[3]=n*e-h*x,m[8]=t*x+d*e,m[9]=r*x+u*e,m[10]=l*x+o*e,m[11]=n*x+h*e,m}},{}],220:[function(g,Q,X){Q.exports=function(m,v,k){var x=Math.sin(k),e=Math.cos(k),t=v[0],r=v[1],l=v[2],n=v[3],d=v[4],u=v[5],o=v[6],h=v[7];return v!==m&&(m[8]=v[8],m[9]=v[9],m[10]=v[10],m[11]=v[11],m[12]=v[12],m[13]=v[13],m[14]=v[14],m[15]=v[15]),m[0]=t*e+d*x,m[1]=r*e+u*x,m[2]=l*e+o*x,m[3]=n*e+h*x,m[4]=d*e-t*x,m[5]=u*e-r*x,m[6]=o*e-l*x,m[7]=h*e-n*x,m}},{}],221:[function(g,Q,X){Q.exports=function(m,v,k){var x=k[0],e=k[1],t=k[2];return m[0]=v[0]*x,m[1]=v[1]*x,m[2]=v[2]*x,m[3]=v[3]*x,m[4]=v[4]*e,m[5]=v[5]*e,m[6]=v[6]*e,m[7]=v[7]*e,m[8]=v[8]*t,m[9]=v[9]*t,m[10]=v[10]*t,m[11]=v[11]*t,m[12]=v[12],m[13]=v[13],m[14]=v[14],m[15]=v[15],m}},{}],222:[function(g,Q,X){Q.exports=function(m){return"mat4("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+", "+m[4]+", "+m[5]+", "+m[6]+", "+m[7]+", "+m[8]+", "+m[9]+", "+m[10]+", "+m[11]+", "+m[12]+", "+m[13]+", "+m[14]+", "+m[15]+")"}},{}],223:[function(g,Q,X){Q.exports=function(m,v,k){var x,e,t,r,l,n,d,u,o,h,s,a,p=k[0],c=k[1],i=k[2];return v===m?(m[12]=v[0]*p+v[4]*c+v[8]*i+v[12],m[13]=v[1]*p+v[5]*c+v[9]*i+v[13],m[14]=v[2]*p+v[6]*c+v[10]*i+v[14],m[15]=v[3]*p+v[7]*c+v[11]*i+v[15]):(x=v[0],e=v[1],t=v[2],r=v[3],l=v[4],n=v[5],d=v[6],u=v[7],o=v[8],h=v[9],s=v[10],a=v[11],m[0]=x,m[1]=e,m[2]=t,m[3]=r,m[4]=l,m[5]=n,m[6]=d,m[7]=u,m[8]=o,m[9]=h,m[10]=s,m[11]=a,m[12]=x*p+l*c+o*i+v[12],m[13]=e*p+n*c+h*i+v[13],m[14]=t*p+d*c+s*i+v[14],m[15]=r*p+u*c+a*i+v[15]),m}},{}],224:[function(g,Q,X){Q.exports=function(m,v){if(m===v){var k=v[1],x=v[2],e=v[3],t=v[6],r=v[7],l=v[11];m[1]=v[4],m[2]=v[8],m[3]=v[12],m[4]=k,m[6]=v[9],m[7]=v[13],m[8]=x,m[9]=t,m[11]=v[14],m[12]=e,m[13]=r,m[14]=l}else m[0]=v[0],m[1]=v[4],m[2]=v[8],m[3]=v[12],m[4]=v[1],m[5]=v[5],m[6]=v[9],m[7]=v[13],m[8]=v[2],m[9]=v[6],m[10]=v[10],m[11]=v[14],m[12]=v[3],m[13]=v[7],m[14]=v[11],m[15]=v[15];return m}},{}],225:[function(g,Q,X){var m=g("css-font"),v=g("pick-by-alias"),k=g("regl"),x=g("gl-util/context"),e=g("es6-weak-map"),t=g("color-normalize"),r=g("font-atlas"),l=g("typedarray-pool"),n=g("parse-rect"),d=g("is-plain-obj"),u=g("parse-unit"),o=g("to-px"),h=g("detect-kerning"),s=g("object-assign"),a=g("font-measure"),p=g("flatten-vertex-data"),c=g("bit-twiddle").nextPow2,i=new e,y=!1;if(document.body){var f=document.body.appendChild(document.createElement("div"));f.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(f).fontStretch&&(y=!0),document.body.removeChild(f)}var w=function(b){(function(_){return typeof _=="function"&&_._gl&&_.prop&&_.texture&&_.buffer})(b)?(b={regl:b},this.gl=b.regl._gl):this.gl=x(b),this.shader=i.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=b.regl||k({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),i.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(d(b)?b:{})};w.prototype.createShader=function(){var b=this.regl,_=b({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:b.prop("count"),offset:b.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:b.this("sizeBuffer")},width:{offset:0,stride:8,buffer:b.this("sizeBuffer")},char:b.this("charBuffer"),position:b.this("position")},uniforms:{atlasSize:function(T,L){return[L.atlas.width,L.atlas.height]},atlasDim:function(T,L){return[L.atlas.cols,L.atlas.rows]},atlas:function(T,L){return L.atlas.texture},charStep:function(T,L){return L.atlas.step},em:function(T,L){return L.atlas.em},color:b.prop("color"),opacity:b.prop("opacity"),viewport:b.this("viewportArray"),scale:b.this("scale"),align:b.prop("align"),baseline:b.prop("baseline"),translate:b.this("translate"),positionOffset:b.prop("positionOffset")},primitive:"points",viewport:b.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`});return{regl:b,draw:_,atlas:{}}},w.prototype.update=function(b){var _=this;if(typeof b=="string")b={text:b};else if(!b)return;(b=v(b,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity!=null&&(Array.isArray(b.opacity)?this.opacity=b.opacity.map(function(de){return parseFloat(de)}):this.opacity=parseFloat(b.opacity)),b.viewport!=null&&(this.viewport=n(b.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),b.kerning!=null&&(this.kerning=b.kerning),b.offset!=null&&(typeof b.offset=="number"&&(b.offset=[b.offset,0]),this.positionOffset=p(b.offset)),b.direction&&(this.direction=b.direction),b.range&&(this.range=b.range,this.scale=[1/(b.range[2]-b.range[0]),1/(b.range[3]-b.range[1])],this.translate=[-b.range[0],-b.range[1]]),b.scale&&(this.scale=b.scale),b.translate&&(this.translate=b.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||b.font||(b.font=w.baseFontSize+"px sans-serif");var T,L=!1,A=!1;if(b.font&&(Array.isArray(b.font)?b.font:[b.font]).forEach(function(de,Te){if(typeof de=="string")try{de=m.parse(de)}catch{de=m.parse(w.baseFontSize+"px "+de)}else de=m.parse(m.stringify(de));var Ee=m.stringify({size:w.baseFontSize,family:de.family,stretch:y?de.stretch:void 0,variant:de.variant,weight:de.weight,style:de.style}),Me=u(de.size),De=Math.round(Me[0]*o(Me[1]));if(De!==_.fontSize[Te]&&(A=!0,_.fontSize[Te]=De),!(_.font[Te]&&Ee==_.font[Te].baseString||(L=!0,_.font[Te]=w.fonts[Ee],_.font[Te]))){var Ie=de.family.join(", "),Oe=[de.style];de.style!=de.variant&&Oe.push(de.variant),de.variant!=de.weight&&Oe.push(de.weight),y&&de.weight!=de.stretch&&Oe.push(de.stretch),_.font[Te]={baseString:Ee,family:Ie,weight:de.weight,stretch:de.stretch,style:de.style,variant:de.variant,width:{},kerning:{},metrics:a(Ie,{origin:"top",fontSize:w.baseFontSize,fontStyle:Oe.join(" ")})},w.fonts[Ee]=_.font[Te]}}),(L||A)&&this.font.forEach(function(de,Te){var Ee=m.stringify({size:_.fontSize[Te],family:de.family,stretch:y?de.stretch:void 0,variant:de.variant,weight:de.weight,style:de.style});if(_.fontAtlas[Te]=_.shader.atlas[Ee],!_.fontAtlas[Te]){var Me=de.metrics;_.shader.atlas[Ee]=_.fontAtlas[Te]={fontString:Ee,step:2*Math.ceil(_.fontSize[Te]*Me.bottom*.5),em:_.fontSize[Te],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:_.regl.texture()}}b.text==null&&(b.text=_.text)}),typeof b.text=="string"&&b.position&&b.position.length>2){for(var I=Array(.5*b.position.length),P=0;P<I.length;P++)I[P]=b.text;b.text=I}if(b.text!=null||L){if(this.textOffsets=[0],Array.isArray(b.text)){this.count=b.text[0].length,this.counts=[this.count];for(var S=1;S<b.text.length;S++)this.textOffsets[S]=this.textOffsets[S-1]+b.text[S-1].length,this.count+=b.text[S].length,this.counts.push(b.text[S].length);this.text=b.text.join("")}else this.text=b.text,this.count=this.text.length,this.counts=[this.count];T=[],this.font.forEach(function(de,Te){w.atlasContext.font=de.baseString;for(var Ee=_.fontAtlas[Te],Me=0;Me<_.text.length;Me++){var De=_.text.charAt(Me);if(Ee.ids[De]==null&&(Ee.ids[De]=Ee.chars.length,Ee.chars.push(De),T.push(De)),de.width[De]==null&&(de.width[De]=w.atlasContext.measureText(De).width/w.baseFontSize,_.kerning)){var Ie=[];for(var Oe in de.width)Ie.push(Oe+De,De+Oe);s(de.kerning,h(de.family,{pairs:Ie}))}}})}if(b.position)if(b.position.length>2){for(var E=!b.position[0].length,z=l.mallocFloat(2*this.count),D=0,U=0;D<this.counts.length;D++){var H=this.counts[D];if(E)for(var Y=0;Y<H;Y++)z[U++]=b.position[2*D],z[U++]=b.position[2*D+1];else for(var J=0;J<H;J++)z[U++]=b.position[D][0],z[U++]=b.position[D][1]}this.position.call?this.position({type:"float",data:z}):this.position=this.regl.buffer({type:"float",data:z}),l.freeFloat(z)}else this.position.destroy&&this.position.destroy(),this.position={constant:b.position};if(b.text||L){var W=l.mallocUint8(this.count),Z=l.mallocFloat(2*this.count);this.textWidth=[];for(var re=0,V=0;re<this.counts.length;re++){for(var B=this.counts[re],j=this.font[re]||this.font[0],ee=this.fontAtlas[re]||this.fontAtlas[0],N=0;N<B;N++){var $=this.text.charAt(V),K=this.text.charAt(V-1);if(W[V]=ee.ids[$],Z[2*V]=j.width[$],N){var te=Z[2*V-2],ie=Z[2*V],le=Z[2*V-1]+.5*te+.5*ie;if(this.kerning){var se=j.kerning[K+$];se&&(le+=.001*se)}Z[2*V+1]=le}else Z[2*V+1]=.5*Z[2*V];V++}this.textWidth.push(Z.length?.5*Z[2*V-2]+Z[2*V-1]:0)}b.align||(b.align=this.align),this.charBuffer({data:W,type:"uint8",usage:"stream"}),this.sizeBuffer({data:Z,type:"float",usage:"stream"}),l.freeUint8(W),l.freeFloat(Z),T.length&&this.font.forEach(function(de,Te){var Ee=_.fontAtlas[Te],Me=Ee.step,De=Math.floor(w.maxAtlasSize/Me),Ie=Math.min(De,Ee.chars.length),Oe=Math.ceil(Ee.chars.length/Ie),Ze=c(Ie*Me),Fe=c(Oe*Me);Ee.width=Ze,Ee.height=Fe,Ee.rows=Oe,Ee.cols=Ie,Ee.em&&Ee.texture({data:r({canvas:w.atlasCanvas,font:Ee.fontString,chars:Ee.chars,shape:[Ze,Fe],step:[Me,Me]})})})}if(b.align&&(this.align=b.align,this.alignOffset=this.textWidth.map(function(de,Te){var Ee=Array.isArray(_.align)?_.align.length>1?_.align[Te]:_.align[0]:_.align;if(typeof Ee=="number")return Ee;switch(Ee){case"right":case"end":return-de;case"center":case"centre":case"middle":return .5*-de}return 0})),this.baseline==null&&b.baseline==null&&(b.baseline=0),b.baseline!=null&&(this.baseline=b.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(de,Te){var Ee=(_.font[Te]||_.font[0]).metrics,Me=0;return Me+=.5*Ee.bottom,Me+=typeof de=="number"?de-Ee.baseline:-Ee[de],Me*=-1})),b.color!=null)if(b.color||(b.color="transparent"),typeof b.color!="string"&&isNaN(b.color)){var ve;if(typeof b.color[0]=="number"&&b.color.length>this.counts.length){var fe=b.color.length;ve=l.mallocUint8(fe);for(var ye=(b.color.subarray||b.color.slice).bind(b.color),Ae=0;Ae<fe;Ae+=4)ve.set(t(ye(Ae,Ae+4),"uint8"),Ae)}else{var pe=b.color.length;ve=l.mallocUint8(4*pe);for(var ge=0;ge<pe;ge++)ve.set(t(b.color[ge]||0,"uint8"),4*ge)}this.color=ve}else this.color=t(b.color,"uint8");if(b.position||b.text||b.color||b.baseline||b.align||b.font||b.offset||b.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var we=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(we);for(var oe=0;oe<this.batch.length;oe++)this.batch[oe]={count:this.counts.length>1?this.counts[oe]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[oe]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*oe,4*oe+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[oe]:this.opacity,baseline:this.baselineOffset[oe]!=null?this.baselineOffset[oe]:this.baselineOffset[0],align:this.align?this.alignOffset[oe]!=null?this.alignOffset[oe]:this.alignOffset[0]:0,atlas:this.fontAtlas[oe]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*oe,2*oe+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]},w.prototype.destroy=function(){},w.prototype.kerning=!0,w.prototype.position={constant:new Float32Array(2)},w.prototype.translate=null,w.prototype.scale=null,w.prototype.font=null,w.prototype.text="",w.prototype.positionOffset=[0,0],w.prototype.opacity=1,w.prototype.color=new Uint8Array([0,0,0,255]),w.prototype.alignOffset=[0,0],w.maxAtlasSize=1024,w.atlasCanvas=document.createElement("canvas"),w.atlasContext=w.atlasCanvas.getContext("2d",{alpha:!1}),w.baseFontSize=64,w.fonts={},Q.exports=w},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:284,"to-px":315,"typedarray-pool":328}],226:[function(g,Q,X){(function(m){(function(){var v=g("pick-by-alias");function k(t){if(t.container)if(t.container==document.body)document.body.style.width||(t.canvas.width=t.width||t.pixelRatio*m.innerWidth),document.body.style.height||(t.canvas.height=t.height||t.pixelRatio*m.innerHeight);else{var r=t.container.getBoundingClientRect();t.canvas.width=t.width||r.right-r.left,t.canvas.height=t.height||r.bottom-r.top}}function x(t){return typeof t.getContext=="function"&&"width"in t&&"height"in t}function e(){var t=document.createElement("canvas");return t.style.position="absolute",t.style.top=0,t.style.left=0,t}Q.exports=function(t){var r;if(t?typeof t=="string"&&(t={container:t}):t={},x(t)?t={container:t}:t=typeof(r=t).nodeName=="string"&&typeof r.appendChild=="function"&&typeof r.getBoundingClientRect=="function"?{container:t}:function(n){return typeof n.drawArrays=="function"||typeof n.drawElements=="function"}(t)?{gl:t}:v(t,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),t.pixelRatio||(t.pixelRatio=m.pixelRatio||1),t.gl)return t.gl;if(t.canvas&&(t.container=t.canvas.parentNode),t.container){if(typeof t.container=="string"){var l=document.querySelector(t.container);if(!l)throw Error("Element "+t.container+" is not found");t.container=l}x(t.container)?(t.canvas=t.container,t.container=t.canvas.parentNode):t.canvas||(t.canvas=e(),t.container.appendChild(t.canvas),k(t))}else if(!t.canvas){if(typeof document>"u")throw Error("Not DOM environment. Use headless-gl.");t.container=document.body||document.documentElement,t.canvas=e(),t.container.appendChild(t.canvas),k(t)}return t.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(n){try{t.gl=t.canvas.getContext(n,t.attrs)}catch{}return t.gl}),t.gl}}).call(this)}).call(this,typeof qi<"u"?qi:typeof self<"u"?self:typeof window<"u"?window:{})},{"pick-by-alias":253}],227:[function(g,Q,X){Q.exports=function(m){typeof m=="string"&&(m=[m]);for(var v=[].slice.call(arguments,1),k=[],x=0;x<m.length-1;x++)k.push(m[x],v[x]||"");return k.push(m[x]),k.join("")}},{}],228:[function(g,Q,X){(function(m){(function(){var v,k=g("is-browser");v=typeof m.matchMedia=="function"?!m.matchMedia("(hover: none)").matches:k,Q.exports=v}).call(this)}).call(this,typeof qi<"u"?qi:typeof self<"u"?self:typeof window<"u"?window:{})},{"is-browser":232}],229:[function(g,Q,X){var m=g("is-browser");Q.exports=m&&function(){var v=!1;try{var k=Object.defineProperty({},"passive",{get:function(){v=!0}});window.addEventListener("test",null,k),window.removeEventListener("test",null,k)}catch{v=!1}return v}()},{"is-browser":232}],230:[function(g,Q,X){X.read=function(m,v,k,x,e){var t,r,l=8*e-x-1,n=(1<<l)-1,d=n>>1,u=-7,o=k?e-1:0,h=k?-1:1,s=m[v+o];for(o+=h,t=s&(1<<-u)-1,s>>=-u,u+=l;u>0;t=256*t+m[v+o],o+=h,u-=8);for(r=t&(1<<-u)-1,t>>=-u,u+=x;u>0;r=256*r+m[v+o],o+=h,u-=8);if(t===0)t=1-d;else{if(t===n)return r?NaN:1/0*(s?-1:1);r+=Math.pow(2,x),t-=d}return(s?-1:1)*r*Math.pow(2,t-x)},X.write=function(m,v,k,x,e,t){var r,l,n,d=8*t-e-1,u=(1<<d)-1,o=u>>1,h=e===23?Math.pow(2,-24)-Math.pow(2,-77):0,s=x?0:t-1,a=x?1:-1,p=v<0||v===0&&1/v<0?1:0;for(v=Math.abs(v),isNaN(v)||v===1/0?(l=isNaN(v)?1:0,r=u):(r=Math.floor(Math.log(v)/Math.LN2),v*(n=Math.pow(2,-r))<1&&(r--,n*=2),(v+=r+o>=1?h/n:h*Math.pow(2,1-o))*n>=2&&(r++,n/=2),r+o>=u?(l=0,r=u):r+o>=1?(l=(v*n-1)*Math.pow(2,e),r+=o):(l=v*Math.pow(2,o-1)*Math.pow(2,e),r=0));e>=8;m[k+s]=255&l,s+=a,l/=256,e-=8);for(r=r<<e|l,d+=e;d>0;m[k+s]=255&r,s+=a,r/=256,d-=8);m[k+s-a]|=128*p}},{}],231:[function(g,Q,X){typeof Object.create=="function"?Q.exports=function(m,v){v&&(m.super_=v,m.prototype=Object.create(v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}))}:Q.exports=function(m,v){if(v){m.super_=v;var k=function(){};k.prototype=v.prototype,m.prototype=new k,m.prototype.constructor=m}}},{}],232:[function(g,Q,X){Q.exports=!0},{}],233:[function(g,Q,X){Q.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(g,Q,X){Q.exports=k,Q.exports.isMobile=k,Q.exports.default=k;var m=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,v=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function k(x){x||(x={});var e=x.ua;if(e||typeof navigator>"u"||(e=navigator.userAgent),e&&e.headers&&typeof e.headers["user-agent"]=="string"&&(e=e.headers["user-agent"]),typeof e!="string")return!1;var t=x.tablet?v.test(e):m.test(e);return!t&&x.tablet&&x.featureDetect&&navigator&&navigator.maxTouchPoints>1&&e.indexOf("Macintosh")!==-1&&e.indexOf("Safari")!==-1&&(t=!0),t}},{}],235:[function(g,Q,X){Q.exports=function(m){var v=typeof m;return m!==null&&(v==="object"||v==="function")}},{}],236:[function(g,Q,X){var m=Object.prototype.toString;Q.exports=function(v){var k;return m.call(v)==="[object Object]"&&((k=Object.getPrototypeOf(v))===null||k===Object.getPrototypeOf({}))}},{}],237:[function(g,Q,X){Q.exports=function(m){for(var v,k=m.length,x=0;x<k;x++)if(((v=m.charCodeAt(x))<9||v>13)&&v!==32&&v!==133&&v!==160&&v!==5760&&v!==6158&&(v<8192||v>8205)&&v!==8232&&v!==8233&&v!==8239&&v!==8287&&v!==8288&&v!==12288&&v!==65279)return!1;return!0}},{}],238:[function(g,Q,X){Q.exports=function(m){return typeof m=="string"&&(m=m.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(m)&&/[\dz]$/i.test(m)&&m.length>4))}},{}],239:[function(g,Q,X){(function(m,v){typeof X=="object"&&Q!==void 0?Q.exports=v():(m=m||self).mapboxgl=v()})(this,function(){var m,v,k;function x(e,t){if(m)if(v){var r="var sharedChunk = {}; ("+m+")(sharedChunk); ("+v+")(sharedChunk);",l={};m(l),(k=t(l)).workerUrl=window.URL.createObjectURL(new Blob([r],{type:"text/javascript"}))}else v=t;else m=t}return x(0,function(e){function t(M,O){return M(O={exports:{}},O.exports),O.exports}var r=l;function l(M,O,G,ne){this.cx=3*M,this.bx=3*(G-M)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*O,this.by=3*(ne-O)-this.cy,this.ay=1-this.cy-this.by,this.p1x=M,this.p1y=ne,this.p2x=G,this.p2y=ne}l.prototype.sampleCurveX=function(M){return((this.ax*M+this.bx)*M+this.cx)*M},l.prototype.sampleCurveY=function(M){return((this.ay*M+this.by)*M+this.cy)*M},l.prototype.sampleCurveDerivativeX=function(M){return(3*this.ax*M+2*this.bx)*M+this.cx},l.prototype.solveCurveX=function(M,O){var G,ne,me,_e,Ce;for(O===void 0&&(O=1e-6),me=M,Ce=0;Ce<8;Ce++){if(_e=this.sampleCurveX(me)-M,Math.abs(_e)<O)return me;var Ne=this.sampleCurveDerivativeX(me);if(Math.abs(Ne)<1e-6)break;me-=_e/Ne}if((me=M)<(G=0))return G;if(me>(ne=1))return ne;for(;G<ne;){if(_e=this.sampleCurveX(me),Math.abs(_e-M)<O)return me;M>_e?G=me:ne=me,me=.5*(ne-G)+G}return me},l.prototype.solve=function(M,O){return this.sampleCurveY(this.solveCurveX(M,O))};var n=d;function d(M,O){this.x=M,this.y=O}function u(M,O,G,ne){var me=new r(M,O,G,ne);return function(_e){return me.solve(_e)}}d.prototype={clone:function(){return new d(this.x,this.y)},add:function(M){return this.clone()._add(M)},sub:function(M){return this.clone()._sub(M)},multByPoint:function(M){return this.clone()._multByPoint(M)},divByPoint:function(M){return this.clone()._divByPoint(M)},mult:function(M){return this.clone()._mult(M)},div:function(M){return this.clone()._div(M)},rotate:function(M){return this.clone()._rotate(M)},rotateAround:function(M,O){return this.clone()._rotateAround(M,O)},matMult:function(M){return this.clone()._matMult(M)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(M){return this.x===M.x&&this.y===M.y},dist:function(M){return Math.sqrt(this.distSqr(M))},distSqr:function(M){var O=M.x-this.x,G=M.y-this.y;return O*O+G*G},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(M){return Math.atan2(this.y-M.y,this.x-M.x)},angleWith:function(M){return this.angleWithSep(M.x,M.y)},angleWithSep:function(M,O){return Math.atan2(this.x*O-this.y*M,this.x*M+this.y*O)},_matMult:function(M){var O=M[0]*this.x+M[1]*this.y,G=M[2]*this.x+M[3]*this.y;return this.x=O,this.y=G,this},_add:function(M){return this.x+=M.x,this.y+=M.y,this},_sub:function(M){return this.x-=M.x,this.y-=M.y,this},_mult:function(M){return this.x*=M,this.y*=M,this},_div:function(M){return this.x/=M,this.y/=M,this},_multByPoint:function(M){return this.x*=M.x,this.y*=M.y,this},_divByPoint:function(M){return this.x/=M.x,this.y/=M.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var M=this.y;return this.y=this.x,this.x=-M,this},_rotate:function(M){var O=Math.cos(M),G=Math.sin(M),ne=O*this.x-G*this.y,me=G*this.x+O*this.y;return this.x=ne,this.y=me,this},_rotateAround:function(M,O){var G=Math.cos(M),ne=Math.sin(M),me=O.x+G*(this.x-O.x)-ne*(this.y-O.y),_e=O.y+ne*(this.x-O.x)+G*(this.y-O.y);return this.x=me,this.y=_e,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},d.convert=function(M){return M instanceof d?M:Array.isArray(M)?new d(M[0],M[1]):M};var o=u(.25,.1,.25,1);function h(M,O,G){return Math.min(G,Math.max(O,M))}function s(M,O,G){var ne=G-O,me=((M-O)%ne+ne)%ne+O;return me===O?G:me}function a(M){for(var O=[],G=arguments.length-1;G-- >0;)O[G]=arguments[G+1];for(var ne=0,me=O;ne<me.length;ne+=1){var _e=me[ne];for(var Ce in _e)M[Ce]=_e[Ce]}return M}var p=1;function c(){return p++}function i(){return function M(O){return O?(O^16*Math.random()>>O/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,M)}()}function y(M){return!!M&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(M)}function f(M,O){M.forEach(function(G){O[G]&&(O[G]=O[G].bind(O))})}function w(M,O){return M.indexOf(O,M.length-O.length)!==-1}function b(M,O,G){var ne={};for(var me in M)ne[me]=O.call(G||this,M[me],me,M);return ne}function _(M,O,G){var ne={};for(var me in M)O.call(G||this,M[me],me,M)&&(ne[me]=M[me]);return ne}function T(M){return Array.isArray(M)?M.map(T):typeof M=="object"&&M?b(M,T):M}var L={};function A(M){L[M]||(typeof console<"u"&&console.warn(M),L[M]=!0)}function I(M,O,G){return(G.y-M.y)*(O.x-M.x)>(O.y-M.y)*(G.x-M.x)}function P(M){for(var O=0,G=0,ne=M.length,me=ne-1,_e=void 0,Ce=void 0;G<ne;me=G++)_e=M[G],O+=((Ce=M[me]).x-_e.x)*(_e.y+Ce.y);return O}function S(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function E(M){var O={};if(M.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(ne,me,_e,Ce){var Ne=_e||Ce;return O[me]=!Ne||Ne.toLowerCase(),""}),O["max-age"]){var G=parseInt(O["max-age"],10);isNaN(G)?delete O["max-age"]:O["max-age"]=G}return O}var z=null;function D(M){if(z==null){var O=M.navigator?M.navigator.userAgent:null;z=!!M.safari||!(!O||!(/\b(iPad|iPhone|iPod)\b/.test(O)||O.match("Safari")&&!O.match("Chrome")))}return z}function U(M){try{var O=self[M];return O.setItem("_mapbox_test_",1),O.removeItem("_mapbox_test_"),!0}catch{return!1}}var H,Y,J,W,Z=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),re=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,V=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,B={now:Z,frame:function(M){var O=re(M);return{cancel:function(){return V(O)}}},getImageData:function(M,O){O===void 0&&(O=0);var G=self.document.createElement("canvas"),ne=G.getContext("2d");if(!ne)throw new Error("failed to create canvas 2d context");return G.width=M.width,G.height=M.height,ne.drawImage(M,0,0,M.width,M.height),ne.getImageData(-O,-O,M.width+2*O,M.height+2*O)},resolveURL:function(M){return H||(H=self.document.createElement("a")),H.href=M,H.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(Y==null&&(Y=self.matchMedia("(prefers-reduced-motion: reduce)")),Y.matches)}},j={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ee={supported:!1,testSupport:function(M){N||!W||($?K(M):J=M)}},N=!1,$=!1;function K(M){var O=M.createTexture();M.bindTexture(M.TEXTURE_2D,O);try{if(M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,W),M.isContextLost())return;ee.supported=!0}catch{}M.deleteTexture(O),N=!0}self.document&&((W=self.document.createElement("img")).onload=function(){J&&K(J),J=null,$=!0},W.onerror=function(){N=!0,J=null},W.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var te="01",ie=function(M,O){this._transformRequestFn=M,this._customAccessToken=O,this._createSkuToken()};function le(M){return M.indexOf("mapbox:")===0}ie.prototype._createSkuToken=function(){var M=function(){for(var O="",G=0;G<10;G++)O+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",te,O].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=M.token,this._skuTokenExpiresAt=M.tokenExpiresAt},ie.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ie.prototype.transformRequest=function(M,O){return this._transformRequestFn&&this._transformRequestFn(M,O)||{url:M}},ie.prototype.normalizeStyleURL=function(M,O){if(!le(M))return M;var G=ye(M);return G.path="/styles/v1"+G.path,this._makeAPIURL(G,this._customAccessToken||O)},ie.prototype.normalizeGlyphsURL=function(M,O){if(!le(M))return M;var G=ye(M);return G.path="/fonts/v1"+G.path,this._makeAPIURL(G,this._customAccessToken||O)},ie.prototype.normalizeSourceURL=function(M,O){if(!le(M))return M;var G=ye(M);return G.path="/v4/"+G.authority+".json",G.params.push("secure"),this._makeAPIURL(G,this._customAccessToken||O)},ie.prototype.normalizeSpriteURL=function(M,O,G,ne){var me=ye(M);return le(M)?(me.path="/styles/v1"+me.path+"/sprite"+O+G,this._makeAPIURL(me,this._customAccessToken||ne)):(me.path+=""+O+G,Ae(me))},ie.prototype.normalizeTileURL=function(M,O){if(this._isSkuTokenExpired()&&this._createSkuToken(),M&&!le(M))return M;var G=ye(M),ne=B.devicePixelRatio>=2||O===512?"@2x":"",me=ee.supported?".webp":"$1";G.path=G.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+ne+me),G.path=G.path.replace(/^.+\/v4\//,"/"),G.path="/v4"+G.path;var _e=this._customAccessToken||function(Ce){for(var Ne=0,Qe=Ce;Ne<Qe.length;Ne+=1){var ct=Qe[Ne].match(/^access_token=(.*)$/);if(ct)return ct[1]}return null}(G.params)||j.ACCESS_TOKEN;return j.REQUIRE_ACCESS_TOKEN&&_e&&this._skuToken&&G.params.push("sku="+this._skuToken),this._makeAPIURL(G,_e)},ie.prototype.canonicalizeTileURL=function(M,O){var G=ye(M);if(!G.path.match(/(^\/v4\/)/)||!G.path.match(/\.[\w]+$/))return M;var ne="mapbox://tiles/";ne+=G.path.replace("/v4/","");var me=G.params;return O&&(me=me.filter(function(_e){return!_e.match(/^access_token=/)})),me.length&&(ne+="?"+me.join("&")),ne},ie.prototype.canonicalizeTileset=function(M,O){for(var G=!!O&&le(O),ne=[],me=0,_e=M.tiles||[];me<_e.length;me+=1){var Ce=_e[me];ve(Ce)?ne.push(this.canonicalizeTileURL(Ce,G)):ne.push(Ce)}return ne},ie.prototype._makeAPIURL=function(M,O){var G="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ne=ye(j.API_URL);if(M.protocol=ne.protocol,M.authority=ne.authority,ne.path!=="/"&&(M.path=""+ne.path+M.path),!j.REQUIRE_ACCESS_TOKEN)return Ae(M);if(!(O=O||j.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+G);if(O[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+G);return M.params=M.params.filter(function(me){return me.indexOf("access_token")===-1}),M.params.push("access_token="+O),Ae(M)};var se=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function ve(M){return se.test(M)}var fe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ye(M){var O=M.match(fe);if(!O)throw new Error("Unable to parse URL object");return{protocol:O[1],authority:O[2],path:O[3]||"/",params:O[4]?O[4].split("&"):[]}}function Ae(M){var O=M.params.length?"?"+M.params.join("&"):"";return M.protocol+"://"+M.authority+M.path+O}function pe(M){if(!M)return null;var O,G=M.split(".");if(!G||G.length!==3)return null;try{return JSON.parse((O=G[1],decodeURIComponent(self.atob(O).split("").map(function(ne){return"%"+("00"+ne.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch{return null}}var ge=function(M){this.type=M,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};ge.prototype.getStorageKey=function(M){var O,G=pe(j.ACCESS_TOKEN),ne="";return G&&G.u?(O=G.u,ne=self.btoa(encodeURIComponent(O).replace(/%([0-9A-F]{2})/g,function(me,_e){return String.fromCharCode(Number("0x"+_e))}))):ne=j.ACCESS_TOKEN||"",M?"mapbox.eventData."+M+":"+ne:"mapbox.eventData:"+ne},ge.prototype.fetchEventData=function(){var M=U("localStorage"),O=this.getStorageKey(),G=this.getStorageKey("uuid");if(M)try{var ne=self.localStorage.getItem(O);ne&&(this.eventData=JSON.parse(ne));var me=self.localStorage.getItem(G);me&&(this.anonId=me)}catch{A("Unable to read from LocalStorage")}},ge.prototype.saveEventData=function(){var M=U("localStorage"),O=this.getStorageKey(),G=this.getStorageKey("uuid");if(M)try{self.localStorage.setItem(G,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(O,JSON.stringify(this.eventData))}catch{A("Unable to write to LocalStorage")}},ge.prototype.processRequests=function(M){},ge.prototype.postEvent=function(M,O,G,ne){var me=this;if(j.EVENTS_URL){var _e=ye(j.EVENTS_URL);_e.params.push("access_token="+(ne||j.ACCESS_TOKEN||""));var Ce={event:this.type,created:new Date(M).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:te,userId:this.anonId},Ne=O?a(Ce,O):Ce,Qe={url:Ae(_e),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Ne])};this.pendingRequest=Ft(Qe,function(ct){me.pendingRequest=null,G(ct),me.saveEventData(),me.processRequests(ne)})}},ge.prototype.queueRequest=function(M,O){this.queue.push(M),this.processRequests(O)};var we,oe,de=function(M){function O(){M.call(this,"map.load"),this.success={},this.skuToken=""}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.postMapLoadEvent=function(G,ne,me,_e){this.skuToken=me,(j.EVENTS_URL&&_e||j.ACCESS_TOKEN&&Array.isArray(G)&&G.some(function(Ce){return le(Ce)||ve(Ce)}))&&this.queueRequest({id:ne,timestamp:Date.now()},_e)},O.prototype.processRequests=function(G){var ne=this;if(!this.pendingRequest&&this.queue.length!==0){var me=this.queue.shift(),_e=me.id,Ce=me.timestamp;_e&&this.success[_e]||(this.anonId||this.fetchEventData(),y(this.anonId)||(this.anonId=i()),this.postEvent(Ce,{skuToken:this.skuToken},function(Ne){Ne||_e&&(ne.success[_e]=!0)},G))}},O}(ge),Te=new(function(M){function O(G){M.call(this,"appUserTurnstile"),this._customAccessToken=G}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.postTurnstileEvent=function(G,ne){j.EVENTS_URL&&j.ACCESS_TOKEN&&Array.isArray(G)&&G.some(function(me){return le(me)||ve(me)})&&this.queueRequest(Date.now(),ne)},O.prototype.processRequests=function(G){var ne=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var me=pe(j.ACCESS_TOKEN),_e=me?me.u:j.ACCESS_TOKEN,Ce=_e!==this.eventData.tokenU;y(this.anonId)||(this.anonId=i(),Ce=!0);var Ne=this.queue.shift();if(this.eventData.lastSuccess){var Qe=new Date(this.eventData.lastSuccess),ct=new Date(Ne),dt=(Ne-this.eventData.lastSuccess)/864e5;Ce=Ce||dt>=1||dt<-1||Qe.getDate()!==ct.getDate()}else Ce=!0;if(!Ce)return this.processRequests();this.postEvent(Ne,{"enabled.telemetry":!1},function(Rt){Rt||(ne.eventData.lastSuccess=Ne,ne.eventData.tokenU=_e)},G)}},O}(ge)),Ee=Te.postTurnstileEvent.bind(Te),Me=new de,De=Me.postMapLoadEvent.bind(Me),Ie=500,Oe=50;function Ze(){self.caches&&!we&&(we=self.caches.open("mapbox-tiles"))}function Fe(M,O,G){if(Ze(),we){var ne={status:O.status,statusText:O.statusText,headers:new self.Headers};O.headers.forEach(function(_e,Ce){return ne.headers.set(Ce,_e)});var me=E(O.headers.get("Cache-Control")||"");me["no-store"]||(me["max-age"]&&ne.headers.set("Expires",new Date(G+1e3*me["max-age"]).toUTCString()),new Date(ne.headers.get("Expires")).getTime()-G<42e4||function(_e,Ce){if(oe===void 0)try{new Response(new ReadableStream),oe=!0}catch{oe=!1}oe?Ce(_e.body):_e.blob().then(Ce)}(O,function(_e){var Ce=new self.Response(_e,ne);Ze(),we&&we.then(function(Ne){return Ne.put(Pe(M.url),Ce)}).catch(function(Ne){return A(Ne.message)})}))}}function Pe(M){var O=M.indexOf("?");return O<0?M:M.slice(0,O)}function ze(M,O){if(Ze(),!we)return O(null);var G=Pe(M.url);we.then(function(ne){ne.match(G).then(function(me){var _e=function(Ce){if(!Ce)return!1;var Ne=new Date(Ce.headers.get("Expires")||0),Qe=E(Ce.headers.get("Cache-Control")||"");return Ne>Date.now()&&!Qe["no-cache"]}(me);ne.delete(G),_e&&ne.put(G,me.clone()),O(null,me,_e)}).catch(O)}).catch(O)}var Ge,$e=1/0;function ot(){return Ge==null&&(Ge=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),Ge}var vt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(vt);var bt=function(M){function O(G,ne,me){ne===401&&ve(me)&&(G+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),M.call(this,G),this.status=ne,this.url=me,this.name=this.constructor.name,this.message=G}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},O}(Error),yt=S()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href};function tt(M,O){var G,ne=new self.AbortController,me=new self.Request(M.url,{method:M.method||"GET",body:M.body,credentials:M.credentials,headers:M.headers,referrer:yt(),signal:ne.signal}),_e=!1,Ce=!1,Ne=(G=me.url).indexOf("sku=")>0&&ve(G);M.type==="json"&&me.headers.set("Accept","application/json");var Qe=function(dt,Rt,Wt){if(!Ce){if(dt&&dt.message!=="SecurityError"&&A(dt),Rt&&Wt)return ct(Rt);var qt=Date.now();self.fetch(me).then(function(ir){if(ir.ok){var yr=Ne?ir.clone():null;return ct(ir,yr,qt)}return O(new bt(ir.statusText,ir.status,M.url))}).catch(function(ir){ir.code!==20&&O(new Error(ir.message))})}},ct=function(dt,Rt,Wt){(M.type==="arrayBuffer"?dt.arrayBuffer():M.type==="json"?dt.json():dt.text()).then(function(qt){Ce||(Rt&&Wt&&Fe(me,Rt,Wt),_e=!0,O(null,qt,dt.headers.get("Cache-Control"),dt.headers.get("Expires")))}).catch(function(qt){Ce||O(new Error(qt.message))})};return Ne?ze(me,Qe):Qe(null,null),{cancel:function(){Ce=!0,_e||ne.abort()}}}var Ke=function(M,O){if(G=M.url,!(/^file:/.test(G)||/^file:/.test(yt())&&!/^\w+:/.test(G))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return tt(M,O);if(S()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",M,O,void 0,!0)}var G;return function(ne,me){var _e=new self.XMLHttpRequest;for(var Ce in _e.open(ne.method||"GET",ne.url,!0),ne.type==="arrayBuffer"&&(_e.responseType="arraybuffer"),ne.headers)_e.setRequestHeader(Ce,ne.headers[Ce]);return ne.type==="json"&&(_e.responseType="text",_e.setRequestHeader("Accept","application/json")),_e.withCredentials=ne.credentials==="include",_e.onerror=function(){me(new Error(_e.statusText))},_e.onload=function(){if((_e.status>=200&&_e.status<300||_e.status===0)&&_e.response!==null){var Ne=_e.response;if(ne.type==="json")try{Ne=JSON.parse(_e.response)}catch(Qe){return me(Qe)}me(null,Ne,_e.getResponseHeader("Cache-Control"),_e.getResponseHeader("Expires"))}else me(new bt(_e.statusText,_e.status,ne.url))},_e.send(ne.body),{cancel:function(){return _e.abort()}}}(M,O)},mt=function(M,O){return Ke(a(M,{type:"arrayBuffer"}),O)},Ft=function(M,O){return Ke(a(M,{method:"POST"}),O)},Vt,Xt;Vt=[],Xt=0;var Gt=function(M,O){if(ee.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),Xt>=j.MAX_PARALLEL_IMAGE_REQUESTS){var G={requestParameters:M,callback:O,cancelled:!1,cancel:function(){this.cancelled=!0}};return Vt.push(G),G}Xt++;var ne=!1,me=function(){if(!ne)for(ne=!0,Xt--;Vt.length&&Xt<j.MAX_PARALLEL_IMAGE_REQUESTS;){var Ce=Vt.shift(),Ne=Ce.requestParameters,Qe=Ce.callback;Ce.cancelled||(Ce.cancel=Gt(Ne,Qe).cancel)}},_e=mt(M,function(Ce,Ne,Qe,ct){me(),Ce?O(Ce):Ne&&(ot()?function(dt,Rt){var Wt=new self.Blob([new Uint8Array(dt)],{type:"image/png"});self.createImageBitmap(Wt).then(function(qt){Rt(null,qt)}).catch(function(qt){Rt(new Error("Could not load image because of "+qt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Ne,O):function(dt,Rt,Wt,qt){var ir=new self.Image,yr=self.URL;ir.onload=function(){Rt(null,ir),yr.revokeObjectURL(ir.src)},ir.onerror=function(){return Rt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Cr=new self.Blob([new Uint8Array(dt)],{type:"image/png"});ir.cacheControl=Wt,ir.expires=qt,ir.src=dt.byteLength?yr.createObjectURL(Cr):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(Ne,O,Qe,ct))});return{cancel:function(){_e.cancel(),me()}}};function nr(M,O,G){G[M]&&G[M].indexOf(O)!==-1||(G[M]=G[M]||[],G[M].push(O))}function It(M,O,G){if(G&&G[M]){var ne=G[M].indexOf(O);ne!==-1&&G[M].splice(ne,1)}}var Be=function(M,O){O===void 0&&(O={}),a(this,O),this.type=M},He=function(M){function O(G,ne){ne===void 0&&(ne={}),M.call(this,"error",a({error:G},ne))}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O}(Be),he=function(){};he.prototype.on=function(M,O){return this._listeners=this._listeners||{},nr(M,O,this._listeners),this},he.prototype.off=function(M,O){return It(M,O,this._listeners),It(M,O,this._oneTimeListeners),this},he.prototype.once=function(M,O){return this._oneTimeListeners=this._oneTimeListeners||{},nr(M,O,this._oneTimeListeners),this},he.prototype.fire=function(M,O){typeof M=="string"&&(M=new Be(M,O||{}));var G=M.type;if(this.listens(G)){M.target=this;for(var ne=0,me=this._listeners&&this._listeners[G]?this._listeners[G].slice():[];ne<me.length;ne+=1)me[ne].call(this,M);for(var _e=0,Ce=this._oneTimeListeners&&this._oneTimeListeners[G]?this._oneTimeListeners[G].slice():[];_e<Ce.length;_e+=1){var Ne=Ce[_e];It(G,Ne,this._oneTimeListeners),Ne.call(this,M)}var Qe=this._eventedParent;Qe&&(a(M,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Qe.fire(M))}else M instanceof He&&console.error(M.error);return this},he.prototype.listens=function(M){return this._listeners&&this._listeners[M]&&this._listeners[M].length>0||this._oneTimeListeners&&this._oneTimeListeners[M]&&this._oneTimeListeners[M].length>0||this._eventedParent&&this._eventedParent.listens(M)},he.prototype.setEventedParent=function(M,O){return this._eventedParent=M,this._eventedParentData=O,this};var be={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Re=function(M,O,G,ne){this.message=(M?M+": ":"")+G,ne&&(this.identifier=ne),O!=null&&O.__line__&&(this.line=O.__line__)};function Ue(M){var O=M.key,G=M.value;return G?[new Re(O,G,"constants have been deprecated as of v8")]:[]}function Xe(M){for(var O=[],G=arguments.length-1;G-- >0;)O[G]=arguments[G+1];for(var ne=0,me=O;ne<me.length;ne+=1){var _e=me[ne];for(var Ce in _e)M[Ce]=_e[Ce]}return M}function qe(M){return M instanceof Number||M instanceof String||M instanceof Boolean?M.valueOf():M}function st(M){if(Array.isArray(M))return M.map(st);if(M instanceof Object&&!(M instanceof Number||M instanceof String||M instanceof Boolean)){var O={};for(var G in M)O[G]=st(M[G]);return O}return qe(M)}var it=function(M){function O(G,ne){M.call(this,ne),this.message=ne,this.key=G}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O}(Error),Tt=function(M,O){O===void 0&&(O=[]),this.parent=M,this.bindings={};for(var G=0,ne=O;G<ne.length;G+=1){var me=ne[G],_e=me[0],Ce=me[1];this.bindings[_e]=Ce}};Tt.prototype.concat=function(M){return new Tt(this,M)},Tt.prototype.get=function(M){if(this.bindings[M])return this.bindings[M];if(this.parent)return this.parent.get(M);throw new Error(M+" not found in scope.")},Tt.prototype.has=function(M){return!!this.bindings[M]||!!this.parent&&this.parent.has(M)};var Pt={kind:"null"},rt={kind:"number"},ut={kind:"string"},Bt={kind:"boolean"},wt={kind:"color"},Lt={kind:"object"},Se={kind:"value"},We={kind:"collator"},nt={kind:"formatted"},ft={kind:"resolvedImage"};function Mt(M,O){return{kind:"array",itemType:M,N:O}}function Nt(M){if(M.kind==="array"){var O=Nt(M.itemType);return typeof M.N=="number"?"array<"+O+", "+M.N+">":M.itemType.kind==="value"?"array":"array<"+O+">"}return M.kind}var Zt=[Pt,rt,ut,Bt,wt,nt,Lt,Mt(Se),ft];function Ut(M,O){if(O.kind==="error")return null;if(M.kind==="array"){if(O.kind==="array"&&(O.N===0&&O.itemType.kind==="value"||!Ut(M.itemType,O.itemType))&&(typeof M.N!="number"||M.N===O.N))return null}else{if(M.kind===O.kind)return null;if(M.kind==="value"){for(var G=0,ne=Zt;G<ne.length;G+=1)if(!Ut(ne[G],O))return null}}return"Expected "+Nt(M)+" but found "+Nt(O)+" instead."}function fr(M,O){return O.some(function(G){return G.kind===M.kind})}function Tr(M,O){return O.some(function(G){return G==="null"?M===null:G==="array"?Array.isArray(M):G==="object"?M&&!Array.isArray(M)&&typeof M=="object":G===typeof M})}var ur=t(function(M,O){var G={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ne(Qe){return(Qe=Math.round(Qe))<0?0:Qe>255?255:Qe}function me(Qe){return Qe<0?0:Qe>1?1:Qe}function _e(Qe){return Qe[Qe.length-1]==="%"?ne(parseFloat(Qe)/100*255):ne(parseInt(Qe))}function Ce(Qe){return Qe[Qe.length-1]==="%"?me(parseFloat(Qe)/100):me(parseFloat(Qe))}function Ne(Qe,ct,dt){return dt<0?dt+=1:dt>1&&(dt-=1),6*dt<1?Qe+(ct-Qe)*dt*6:2*dt<1?ct:3*dt<2?Qe+(ct-Qe)*(2/3-dt)*6:Qe}try{O.parseCSSColor=function(Qe){var ct,dt=Qe.replace(/ /g,"").toLowerCase();if(dt in G)return G[dt].slice();if(dt[0]==="#")return dt.length===4?(ct=parseInt(dt.substr(1),16))>=0&&ct<=4095?[(3840&ct)>>4|(3840&ct)>>8,240&ct|(240&ct)>>4,15&ct|(15&ct)<<4,1]:null:dt.length===7&&(ct=parseInt(dt.substr(1),16))>=0&&ct<=16777215?[(16711680&ct)>>16,(65280&ct)>>8,255&ct,1]:null;var Rt=dt.indexOf("("),Wt=dt.indexOf(")");if(Rt!==-1&&Wt+1===dt.length){var qt=dt.substr(0,Rt),ir=dt.substr(Rt+1,Wt-(Rt+1)).split(","),yr=1;switch(qt){case"rgba":if(ir.length!==4)return null;yr=Ce(ir.pop());case"rgb":return ir.length!==3?null:[_e(ir[0]),_e(ir[1]),_e(ir[2]),yr];case"hsla":if(ir.length!==4)return null;yr=Ce(ir.pop());case"hsl":if(ir.length!==3)return null;var Cr=(parseFloat(ir[0])%360+360)%360/360,Lr=Ce(ir[1]),Ur=Ce(ir[2]),Vr=Ur<=.5?Ur*(Lr+1):Ur+Lr-Ur*Lr,Wr=2*Ur-Vr;return[ne(255*Ne(Wr,Vr,Cr+1/3)),ne(255*Ne(Wr,Vr,Cr)),ne(255*Ne(Wr,Vr,Cr-1/3)),yr];default:return null}}return null}}catch{}}).parseCSSColor,Kt=function(M,O,G,ne){ne===void 0&&(ne=1),this.r=M,this.g=O,this.b=G,this.a=ne};Kt.parse=function(M){if(M){if(M instanceof Kt)return M;if(typeof M=="string"){var O=ur(M);if(O)return new Kt(O[0]/255*O[3],O[1]/255*O[3],O[2]/255*O[3],O[3])}}},Kt.prototype.toString=function(){var M=this.toArray(),O=M[0],G=M[1],ne=M[2],me=M[3];return"rgba("+Math.round(O)+","+Math.round(G)+","+Math.round(ne)+","+me+")"},Kt.prototype.toArray=function(){var M=this.r,O=this.g,G=this.b,ne=this.a;return ne===0?[0,0,0,0]:[255*M/ne,255*O/ne,255*G/ne,ne]},Kt.black=new Kt(0,0,0,1),Kt.white=new Kt(1,1,1,1),Kt.transparent=new Kt(0,0,0,0),Kt.red=new Kt(1,0,0,1);var Qt=function(M,O,G){this.sensitivity=M?O?"variant":"case":O?"accent":"base",this.locale=G,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Qt.prototype.compare=function(M,O){return this.collator.compare(M,O)},Qt.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var er=function(M,O,G,ne,me){this.text=M,this.image=O,this.scale=G,this.fontStack=ne,this.textColor=me},cr=function(M){this.sections=M};cr.fromString=function(M){return new cr([new er(M,null,null,null,null)])},cr.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(M){return M.text.length!==0||M.image&&M.image.name.length!==0})},cr.factory=function(M){return M instanceof cr?M:cr.fromString(M)},cr.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(M){return M.text}).join("")},cr.prototype.serialize=function(){for(var M=["format"],O=0,G=this.sections;O<G.length;O+=1){var ne=G[O];if(ne.image)M.push(["image",ne.image.name]);else{M.push(ne.text);var me={};ne.fontStack&&(me["text-font"]=["literal",ne.fontStack.split(",")]),ne.scale&&(me["font-scale"]=ne.scale),ne.textColor&&(me["text-color"]=["rgba"].concat(ne.textColor.toArray())),M.push(me)}}return M};var gr=function(M){this.name=M.name,this.available=M.available};function Mr(M,O,G,ne){return typeof M=="number"&&M>=0&&M<=255&&typeof O=="number"&&O>=0&&O<=255&&typeof G=="number"&&G>=0&&G<=255?ne===void 0||typeof ne=="number"&&ne>=0&&ne<=1?null:"Invalid rgba value ["+[M,O,G,ne].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof ne=="number"?[M,O,G,ne]:[M,O,G]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Ir(M){if(M===null||typeof M=="string"||typeof M=="boolean"||typeof M=="number"||M instanceof Kt||M instanceof Qt||M instanceof cr||M instanceof gr)return!0;if(Array.isArray(M)){for(var O=0,G=M;O<G.length;O+=1)if(!Ir(G[O]))return!1;return!0}if(typeof M=="object"){for(var ne in M)if(!Ir(M[ne]))return!1;return!0}return!1}function Fr(M){if(M===null)return Pt;if(typeof M=="string")return ut;if(typeof M=="boolean")return Bt;if(typeof M=="number")return rt;if(M instanceof Kt)return wt;if(M instanceof Qt)return We;if(M instanceof cr)return nt;if(M instanceof gr)return ft;if(Array.isArray(M)){for(var O,G=M.length,ne=0,me=M;ne<me.length;ne+=1){var _e=Fr(me[ne]);if(O){if(O===_e)continue;O=Se;break}O=_e}return Mt(O||Se,G)}return Lt}function Yr(M){var O=typeof M;return M===null?"":O==="string"||O==="number"||O==="boolean"?String(M):M instanceof Kt||M instanceof cr||M instanceof gr?M.toString():JSON.stringify(M)}gr.prototype.toString=function(){return this.name},gr.fromString=function(M){return M?new gr({name:M,available:!1}):null},gr.prototype.serialize=function(){return["image",this.name]};var fn=function(M,O){this.type=M,this.value=O};fn.parse=function(M,O){if(M.length!==2)return O.error("'literal' expression requires exactly one argument, but found "+(M.length-1)+" instead.");if(!Ir(M[1]))return O.error("invalid value");var G=M[1],ne=Fr(G),me=O.expectedType;return ne.kind!=="array"||ne.N!==0||!me||me.kind!=="array"||typeof me.N=="number"&&me.N!==0||(ne=me),new fn(ne,G)},fn.prototype.evaluate=function(){return this.value},fn.prototype.eachChild=function(){},fn.prototype.outputDefined=function(){return!0},fn.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Kt?["rgba"].concat(this.value.toArray()):this.value instanceof cr?this.value.serialize():this.value};var en=function(M){this.name="ExpressionEvaluationError",this.message=M};en.prototype.toJSON=function(){return this.message};var Rn={string:ut,number:rt,boolean:Bt,object:Lt},nn=function(M,O){this.type=M,this.args=O};nn.parse=function(M,O){if(M.length<2)return O.error("Expected at least one argument.");var G,ne=1,me=M[0];if(me==="array"){var _e,Ce;if(M.length>2){var Ne=M[1];if(typeof Ne!="string"||!(Ne in Rn)||Ne==="object")return O.error('The item type argument of "array" must be one of string, number, boolean',1);_e=Rn[Ne],ne++}else _e=Se;if(M.length>3){if(M[2]!==null&&(typeof M[2]!="number"||M[2]<0||M[2]!==Math.floor(M[2])))return O.error('The length argument to "array" must be a positive integer literal',2);Ce=M[2],ne++}G=Mt(_e,Ce)}else G=Rn[me];for(var Qe=[];ne<M.length;ne++){var ct=O.parse(M[ne],ne,Se);if(!ct)return null;Qe.push(ct)}return new nn(G,Qe)},nn.prototype.evaluate=function(M){for(var O=0;O<this.args.length;O++){var G=this.args[O].evaluate(M);if(!Ut(this.type,Fr(G)))return G;if(O===this.args.length-1)throw new en("Expected value to be of type "+Nt(this.type)+", but found "+Nt(Fr(G))+" instead.")}return null},nn.prototype.eachChild=function(M){this.args.forEach(M)},nn.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},nn.prototype.serialize=function(){var M=this.type,O=[M.kind];if(M.kind==="array"){var G=M.itemType;if(G.kind==="string"||G.kind==="number"||G.kind==="boolean"){O.push(G.kind);var ne=M.N;(typeof ne=="number"||this.args.length>1)&&O.push(ne)}}return O.concat(this.args.map(function(me){return me.serialize()}))};var yn=function(M){this.type=nt,this.sections=M};yn.parse=function(M,O){if(M.length<2)return O.error("Expected at least one argument.");var G=M[1];if(!Array.isArray(G)&&typeof G=="object")return O.error("First argument must be an image or text section.");for(var ne=[],me=!1,_e=1;_e<=M.length-1;++_e){var Ce=M[_e];if(me&&typeof Ce=="object"&&!Array.isArray(Ce)){me=!1;var Ne=null;if(Ce["font-scale"]&&!(Ne=O.parse(Ce["font-scale"],1,rt)))return null;var Qe=null;if(Ce["text-font"]&&!(Qe=O.parse(Ce["text-font"],1,Mt(ut))))return null;var ct=null;if(Ce["text-color"]&&!(ct=O.parse(Ce["text-color"],1,wt)))return null;var dt=ne[ne.length-1];dt.scale=Ne,dt.font=Qe,dt.textColor=ct}else{var Rt=O.parse(M[_e],1,Se);if(!Rt)return null;var Wt=Rt.type.kind;if(Wt!=="string"&&Wt!=="value"&&Wt!=="null"&&Wt!=="resolvedImage")return O.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");me=!0,ne.push({content:Rt,scale:null,font:null,textColor:null})}}return new yn(ne)},yn.prototype.evaluate=function(M){return new cr(this.sections.map(function(O){var G=O.content.evaluate(M);return Fr(G)===ft?new er("",G,null,null,null):new er(Yr(G),null,O.scale?O.scale.evaluate(M):null,O.font?O.font.evaluate(M).join(","):null,O.textColor?O.textColor.evaluate(M):null)}))},yn.prototype.eachChild=function(M){for(var O=0,G=this.sections;O<G.length;O+=1){var ne=G[O];M(ne.content),ne.scale&&M(ne.scale),ne.font&&M(ne.font),ne.textColor&&M(ne.textColor)}},yn.prototype.outputDefined=function(){return!1},yn.prototype.serialize=function(){for(var M=["format"],O=0,G=this.sections;O<G.length;O+=1){var ne=G[O];M.push(ne.content.serialize());var me={};ne.scale&&(me["font-scale"]=ne.scale.serialize()),ne.font&&(me["text-font"]=ne.font.serialize()),ne.textColor&&(me["text-color"]=ne.textColor.serialize()),M.push(me)}return M};var bn=function(M){this.type=ft,this.input=M};bn.parse=function(M,O){if(M.length!==2)return O.error("Expected two arguments.");var G=O.parse(M[1],1,ut);return G?new bn(G):O.error("No image name provided.")},bn.prototype.evaluate=function(M){var O=this.input.evaluate(M),G=gr.fromString(O);return G&&M.availableImages&&(G.available=M.availableImages.indexOf(O)>-1),G},bn.prototype.eachChild=function(M){M(this.input)},bn.prototype.outputDefined=function(){return!1},bn.prototype.serialize=function(){return["image",this.input.serialize()]};var ta={"to-boolean":Bt,"to-color":wt,"to-number":rt,"to-string":ut},Br=function(M,O){this.type=M,this.args=O};Br.parse=function(M,O){if(M.length<2)return O.error("Expected at least one argument.");var G=M[0];if((G==="to-boolean"||G==="to-string")&&M.length!==2)return O.error("Expected one argument.");for(var ne=ta[G],me=[],_e=1;_e<M.length;_e++){var Ce=O.parse(M[_e],_e,Se);if(!Ce)return null;me.push(Ce)}return new Br(ne,me)},Br.prototype.evaluate=function(M){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(M));if(this.type.kind==="color"){for(var O,G,ne=0,me=this.args;ne<me.length;ne+=1){if(G=null,(O=me[ne].evaluate(M))instanceof Kt)return O;if(typeof O=="string"){var _e=M.parseColor(O);if(_e)return _e}else if(Array.isArray(O)&&!(G=O.length<3||O.length>4?"Invalid rbga value "+JSON.stringify(O)+": expected an array containing either three or four numeric values.":Mr(O[0],O[1],O[2],O[3])))return new Kt(O[0]/255,O[1]/255,O[2]/255,O[3])}throw new en(G||"Could not parse color from value '"+(typeof O=="string"?O:String(JSON.stringify(O)))+"'")}if(this.type.kind==="number"){for(var Ce=null,Ne=0,Qe=this.args;Ne<Qe.length;Ne+=1){if((Ce=Qe[Ne].evaluate(M))===null)return 0;var ct=Number(Ce);if(!isNaN(ct))return ct}throw new en("Could not convert "+JSON.stringify(Ce)+" to number.")}return this.type.kind==="formatted"?cr.fromString(Yr(this.args[0].evaluate(M))):this.type.kind==="resolvedImage"?gr.fromString(Yr(this.args[0].evaluate(M))):Yr(this.args[0].evaluate(M))},Br.prototype.eachChild=function(M){this.args.forEach(M)},Br.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},Br.prototype.serialize=function(){if(this.type.kind==="formatted")return new yn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new bn(this.args[0]).serialize();var M=["to-"+this.type.kind];return this.eachChild(function(O){M.push(O.serialize())}),M};var rn=["Unknown","Point","LineString","Polygon"],gn=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};gn.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},gn.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?rn[this.feature.type]:this.feature.type:null},gn.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},gn.prototype.canonicalID=function(){return this.canonical},gn.prototype.properties=function(){return this.feature&&this.feature.properties||{}},gn.prototype.parseColor=function(M){var O=this._parseColorCache[M];return O||(O=this._parseColorCache[M]=Kt.parse(M)),O};var Qr=function(M,O,G,ne){this.name=M,this.type=O,this._evaluate=G,this.args=ne};Qr.prototype.evaluate=function(M){return this._evaluate(M,this.args)},Qr.prototype.eachChild=function(M){this.args.forEach(M)},Qr.prototype.outputDefined=function(){return!1},Qr.prototype.serialize=function(){return[this.name].concat(this.args.map(function(M){return M.serialize()}))},Qr.parse=function(M,O){var G,ne=M[0],me=Qr.definitions[ne];if(!me)return O.error('Unknown expression "'+ne+'". If you wanted a literal array, use ["literal", [...]].',0);for(var _e=Array.isArray(me)?me[0]:me.type,Ce=Array.isArray(me)?[[me[1],me[2]]]:me.overloads,Ne=Ce.filter(function(ca){var $n=ca[0];return!Array.isArray($n)||$n.length===M.length-1}),Qe=null,ct=0,dt=Ne;ct<dt.length;ct+=1){var Rt=dt[ct],Wt=Rt[0],qt=Rt[1];Qe=new tn(O.registry,O.path,null,O.scope);for(var ir=[],yr=!1,Cr=1;Cr<M.length;Cr++){var Lr=M[Cr],Ur=Array.isArray(Wt)?Wt[Cr-1]:Wt.type,Vr=Qe.parse(Lr,1+ir.length,Ur);if(!Vr){yr=!0;break}ir.push(Vr)}if(!yr)if(Array.isArray(Wt)&&Wt.length!==ir.length)Qe.error("Expected "+Wt.length+" arguments, but found "+ir.length+" instead.");else{for(var Wr=0;Wr<ir.length;Wr++){var hn=Array.isArray(Wt)?Wt[Wr]:Wt.type,xn=ir[Wr];Qe.concat(Wr+1).checkSubtype(hn,xn.type)}if(Qe.errors.length===0)return new Qr(ne,_e,qt,ir)}}if(Ne.length===1)(G=O.errors).push.apply(G,Qe.errors);else{for(var Nn=(Ne.length?Ne:Ce).map(function(ca){var $n,ma=ca[0];return $n=ma,Array.isArray($n)?"("+$n.map(Nt).join(", ")+")":"("+Nt($n.type)+"...)"}).join(" | "),Bn=[],Wn=1;Wn<M.length;Wn++){var la=O.parse(M[Wn],1+Bn.length);if(!la)return null;Bn.push(Nt(la.type))}O.error("Expected arguments of type "+Nn+", but found ("+Bn.join(", ")+") instead.")}return null},Qr.register=function(M,O){for(var G in Qr.definitions=O,O)M[G]=Qr};var un=function(M,O,G){this.type=We,this.locale=G,this.caseSensitive=M,this.diacriticSensitive=O};un.parse=function(M,O){if(M.length!==2)return O.error("Expected one argument.");var G=M[1];if(typeof G!="object"||Array.isArray(G))return O.error("Collator options argument must be an object.");var ne=O.parse(G["case-sensitive"]!==void 0&&G["case-sensitive"],1,Bt);if(!ne)return null;var me=O.parse(G["diacritic-sensitive"]!==void 0&&G["diacritic-sensitive"],1,Bt);if(!me)return null;var _e=null;return G.locale&&!(_e=O.parse(G.locale,1,ut))?null:new un(ne,me,_e)},un.prototype.evaluate=function(M){return new Qt(this.caseSensitive.evaluate(M),this.diacriticSensitive.evaluate(M),this.locale?this.locale.evaluate(M):null)},un.prototype.eachChild=function(M){M(this.caseSensitive),M(this.diacriticSensitive),this.locale&&M(this.locale)},un.prototype.outputDefined=function(){return!1},un.prototype.serialize=function(){var M={};return M["case-sensitive"]=this.caseSensitive.serialize(),M["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(M.locale=this.locale.serialize()),["collator",M]};function Gn(M,O){M[0]=Math.min(M[0],O[0]),M[1]=Math.min(M[1],O[1]),M[2]=Math.max(M[2],O[0]),M[3]=Math.max(M[3],O[1])}function wn(M,O){return!(M[0]<=O[0])&&!(M[2]>=O[2])&&!(M[1]<=O[1])&&!(M[3]>=O[3])}function Ln(M,O){var G,ne=(180+M[0])/360,me=(G=M[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+G*Math.PI/360)))/360),_e=Math.pow(2,O.z);return[Math.round(ne*_e*8192),Math.round(me*_e*8192)]}function oa(M,O,G){return O[1]>M[1]!=G[1]>M[1]&&M[0]<(G[0]-O[0])*(M[1]-O[1])/(G[1]-O[1])+O[0]}function tr(M,O){for(var G,ne,me,_e,Ce,Ne,Qe,ct=!1,dt=0,Rt=O.length;dt<Rt;dt++)for(var Wt=O[dt],qt=0,ir=Wt.length;qt<ir-1;qt++){if(G=M,ne=Wt[qt],me=Wt[qt+1],_e=void 0,Ce=void 0,Ne=void 0,Qe=void 0,_e=G[0]-ne[0],Ce=G[1]-ne[1],Ne=G[0]-me[0],Qe=G[1]-me[1],_e*Qe-Ne*Ce==0&&_e*Ne<=0&&Ce*Qe<=0)return!1;oa(M,Wt[qt],Wt[qt+1])&&(ct=!ct)}return ct}function mr(M,O){for(var G=0;G<O.length;G++)if(tr(M,O[G]))return!0;return!1}function Ct(M,O,G,ne){var me=M[0]-G[0],_e=M[1]-G[1],Ce=O[0]-G[0],Ne=O[1]-G[1],Qe=ne[0]-G[0],ct=ne[1]-G[1],dt=me*ct-Qe*_e,Rt=Ce*ct-Qe*Ne;return dt>0&&Rt<0||dt<0&&Rt>0}function or(M,O,G){for(var ne=0,me=G;ne<me.length;ne+=1)for(var _e=me[ne],Ce=0;Ce<_e.length-1;++Ce)if(Ne=M,Qe=O,ct=_e[Ce],dt=_e[Ce+1],Rt=void 0,Wt=void 0,qt=void 0,ir=void 0,qt=[Qe[0]-Ne[0],Qe[1]-Ne[1]],ir=[dt[0]-ct[0],dt[1]-ct[1]],(Rt=ir)[0]*(Wt=qt)[1]-Rt[1]*Wt[0]!=0&&Ct(Ne,Qe,ct,dt)&&Ct(ct,dt,Ne,Qe))return!0;var Ne,Qe,ct,dt,Rt,Wt,qt,ir;return!1}function hr(M,O){for(var G=0;G<M.length;++G)if(!tr(M[G],O))return!1;for(var ne=0;ne<M.length-1;++ne)if(or(M[ne],M[ne+1],O))return!1;return!0}function Rr(M,O){for(var G=0;G<O.length;G++)if(hr(M,O[G]))return!0;return!1}function zr(M,O,G){for(var ne=[],me=0;me<M.length;me++){for(var _e=[],Ce=0;Ce<M[me].length;Ce++){var Ne=Ln(M[me][Ce],G);Gn(O,Ne),_e.push(Ne)}ne.push(_e)}return ne}function Or(M,O,G){for(var ne=[],me=0;me<M.length;me++){var _e=zr(M[me],O,G);ne.push(_e)}return ne}function Ar(M,O,G,ne){if(M[0]<G[0]||M[0]>G[2]){var me=.5*ne,_e=M[0]-G[0]>me?-ne:G[0]-M[0]>me?ne:0;_e===0&&(_e=M[0]-G[2]>me?-ne:G[2]-M[0]>me?ne:0),M[0]+=_e}Gn(O,M)}function vr(M,O,G,ne){for(var me=8192*Math.pow(2,ne.z),_e=[8192*ne.x,8192*ne.y],Ce=[],Ne=0,Qe=M;Ne<Qe.length;Ne+=1)for(var ct=0,dt=Qe[Ne];ct<dt.length;ct+=1){var Rt=dt[ct],Wt=[Rt.x+_e[0],Rt.y+_e[1]];Ar(Wt,O,G,me),Ce.push(Wt)}return Ce}function xr(M,O,G,ne){for(var me,_e=8192*Math.pow(2,ne.z),Ce=[8192*ne.x,8192*ne.y],Ne=[],Qe=0,ct=M;Qe<ct.length;Qe+=1){for(var dt=[],Rt=0,Wt=ct[Qe];Rt<Wt.length;Rt+=1){var qt=Wt[Rt],ir=[qt.x+Ce[0],qt.y+Ce[1]];Gn(O,ir),dt.push(ir)}Ne.push(dt)}if(O[2]-O[0]<=_e/2){(me=O)[0]=me[1]=1/0,me[2]=me[3]=-1/0;for(var yr=0,Cr=Ne;yr<Cr.length;yr+=1)for(var Lr=0,Ur=Cr[yr];Lr<Ur.length;Lr+=1)Ar(Ur[Lr],O,G,_e)}return Ne}var wr=function(M,O){this.type=Bt,this.geojson=M,this.geometries=O};function Er(M){if(M instanceof Qr&&(M.name==="get"&&M.args.length===1||M.name==="feature-state"||M.name==="has"&&M.args.length===1||M.name==="properties"||M.name==="geometry-type"||M.name==="id"||/^filter-/.test(M.name))||M instanceof wr)return!1;var O=!0;return M.eachChild(function(G){O&&!Er(G)&&(O=!1)}),O}function qr(M){if(M instanceof Qr&&M.name==="feature-state")return!1;var O=!0;return M.eachChild(function(G){O&&!qr(G)&&(O=!1)}),O}function Hr(M,O){if(M instanceof Qr&&O.indexOf(M.name)>=0)return!1;var G=!0;return M.eachChild(function(ne){G&&!Hr(ne,O)&&(G=!1)}),G}wr.parse=function(M,O){if(M.length!==2)return O.error("'within' expression requires exactly one argument, but found "+(M.length-1)+" instead.");if(Ir(M[1])){var G=M[1];if(G.type==="FeatureCollection")for(var ne=0;ne<G.features.length;++ne){var me=G.features[ne].geometry.type;if(me==="Polygon"||me==="MultiPolygon")return new wr(G,G.features[ne].geometry)}else if(G.type==="Feature"){var _e=G.geometry.type;if(_e==="Polygon"||_e==="MultiPolygon")return new wr(G,G.geometry)}else if(G.type==="Polygon"||G.type==="MultiPolygon")return new wr(G,G)}return O.error("'within' expression requires valid geojson object that contains polygon geometry type.")},wr.prototype.evaluate=function(M){if(M.geometry()!=null&&M.canonicalID()!=null){if(M.geometryType()==="Point")return function(O,G){var ne=[1/0,1/0,-1/0,-1/0],me=[1/0,1/0,-1/0,-1/0],_e=O.canonicalID();if(G.type==="Polygon"){var Ce=zr(G.coordinates,me,_e),Ne=vr(O.geometry(),ne,me,_e);if(!wn(ne,me))return!1;for(var Qe=0,ct=Ne;Qe<ct.length;Qe+=1)if(!tr(ct[Qe],Ce))return!1}if(G.type==="MultiPolygon"){var dt=Or(G.coordinates,me,_e),Rt=vr(O.geometry(),ne,me,_e);if(!wn(ne,me))return!1;for(var Wt=0,qt=Rt;Wt<qt.length;Wt+=1)if(!mr(qt[Wt],dt))return!1}return!0}(M,this.geometries);if(M.geometryType()==="LineString")return function(O,G){var ne=[1/0,1/0,-1/0,-1/0],me=[1/0,1/0,-1/0,-1/0],_e=O.canonicalID();if(G.type==="Polygon"){var Ce=zr(G.coordinates,me,_e),Ne=xr(O.geometry(),ne,me,_e);if(!wn(ne,me))return!1;for(var Qe=0,ct=Ne;Qe<ct.length;Qe+=1)if(!hr(ct[Qe],Ce))return!1}if(G.type==="MultiPolygon"){var dt=Or(G.coordinates,me,_e),Rt=xr(O.geometry(),ne,me,_e);if(!wn(ne,me))return!1;for(var Wt=0,qt=Rt;Wt<qt.length;Wt+=1)if(!Rr(qt[Wt],dt))return!1}return!0}(M,this.geometries)}return!1},wr.prototype.eachChild=function(){},wr.prototype.outputDefined=function(){return!0},wr.prototype.serialize=function(){return["within",this.geojson]};var $r=function(M,O){this.type=O.type,this.name=M,this.boundExpression=O};$r.parse=function(M,O){if(M.length!==2||typeof M[1]!="string")return O.error("'var' expression requires exactly one string literal argument.");var G=M[1];return O.scope.has(G)?new $r(G,O.scope.get(G)):O.error('Unknown variable "'+G+'". Make sure "'+G+'" has been bound in an enclosing "let" expression before using it.',1)},$r.prototype.evaluate=function(M){return this.boundExpression.evaluate(M)},$r.prototype.eachChild=function(){},$r.prototype.outputDefined=function(){return!1},$r.prototype.serialize=function(){return["var",this.name]};var tn=function(M,O,G,ne,me){O===void 0&&(O=[]),ne===void 0&&(ne=new Tt),me===void 0&&(me=[]),this.registry=M,this.path=O,this.key=O.map(function(_e){return"["+_e+"]"}).join(""),this.scope=ne,this.errors=me,this.expectedType=G};function vn(M,O){for(var G,ne,me=M.length-1,_e=0,Ce=me,Ne=0;_e<=Ce;)if(G=M[Ne=Math.floor((_e+Ce)/2)],ne=M[Ne+1],G<=O){if(Ne===me||O<ne)return Ne;_e=Ne+1}else{if(!(G>O))throw new en("Input is not a number.");Ce=Ne-1}return 0}tn.prototype.parse=function(M,O,G,ne,me){return me===void 0&&(me={}),O?this.concat(O,G,ne)._parse(M,me):this._parse(M,me)},tn.prototype._parse=function(M,O){function G(ct,dt,Rt){return Rt==="assert"?new nn(dt,[ct]):Rt==="coerce"?new Br(dt,[ct]):ct}if(M!==null&&typeof M!="string"&&typeof M!="boolean"&&typeof M!="number"||(M=["literal",M]),Array.isArray(M)){if(M.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ne=M[0];if(typeof ne!="string")return this.error("Expression name must be a string, but found "+typeof ne+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var me=this.registry[ne];if(me){var _e=me.parse(M,this);if(!_e)return null;if(this.expectedType){var Ce=this.expectedType,Ne=_e.type;if(Ce.kind!=="string"&&Ce.kind!=="number"&&Ce.kind!=="boolean"&&Ce.kind!=="object"&&Ce.kind!=="array"||Ne.kind!=="value")if(Ce.kind!=="color"&&Ce.kind!=="formatted"&&Ce.kind!=="resolvedImage"||Ne.kind!=="value"&&Ne.kind!=="string"){if(this.checkSubtype(Ce,Ne))return null}else _e=G(_e,Ce,O.typeAnnotation||"coerce");else _e=G(_e,Ce,O.typeAnnotation||"assert")}if(!(_e instanceof fn)&&_e.type.kind!=="resolvedImage"&&function ct(dt){if(dt instanceof $r)return ct(dt.boundExpression);if(dt instanceof Qr&&dt.name==="error"||dt instanceof un||dt instanceof wr)return!1;var Rt=dt instanceof Br||dt instanceof nn,Wt=!0;return dt.eachChild(function(qt){Wt=Rt?Wt&&ct(qt):Wt&&qt instanceof fn}),Wt?Er(dt)&&Hr(dt,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}(_e)){var Qe=new gn;try{_e=new fn(_e.type,_e.evaluate(Qe))}catch(ct){return this.error(ct.message),null}}return _e}return this.error('Unknown expression "'+ne+'". If you wanted a literal array, use ["literal", [...]].',0)}return M===void 0?this.error("'undefined' value invalid. Use null instead."):typeof M=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof M+" instead.")},tn.prototype.concat=function(M,O,G){var ne=typeof M=="number"?this.path.concat(M):this.path,me=G?this.scope.concat(G):this.scope;return new tn(this.registry,ne,O||null,me,this.errors)},tn.prototype.error=function(M){for(var O=[],G=arguments.length-1;G-- >0;)O[G]=arguments[G+1];var ne=""+this.key+O.map(function(me){return"["+me+"]"}).join("");this.errors.push(new it(ne,M))},tn.prototype.checkSubtype=function(M,O){var G=Ut(M,O);return G&&this.error(G),G};var _n=function(M,O,G){this.type=M,this.input=O,this.labels=[],this.outputs=[];for(var ne=0,me=G;ne<me.length;ne+=1){var _e=me[ne],Ce=_e[0],Ne=_e[1];this.labels.push(Ce),this.outputs.push(Ne)}};function Tn(M,O,G){return M*(1-G)+O*G}_n.parse=function(M,O){if(M.length-1<4)return O.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if((M.length-1)%2!=0)return O.error("Expected an even number of arguments.");var G=O.parse(M[1],1,rt);if(!G)return null;var ne=[],me=null;O.expectedType&&O.expectedType.kind!=="value"&&(me=O.expectedType);for(var _e=1;_e<M.length;_e+=2){var Ce=_e===1?-1/0:M[_e],Ne=M[_e+1],Qe=_e,ct=_e+1;if(typeof Ce!="number")return O.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Qe);if(ne.length&&ne[ne.length-1][0]>=Ce)return O.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Qe);var dt=O.parse(Ne,ct,me);if(!dt)return null;me=me||dt.type,ne.push([Ce,dt])}return new _n(me,G,ne)},_n.prototype.evaluate=function(M){var O=this.labels,G=this.outputs;if(O.length===1)return G[0].evaluate(M);var ne=this.input.evaluate(M);if(ne<=O[0])return G[0].evaluate(M);var me=O.length;return ne>=O[me-1]?G[me-1].evaluate(M):G[vn(O,ne)].evaluate(M)},_n.prototype.eachChild=function(M){M(this.input);for(var O=0,G=this.outputs;O<G.length;O+=1)M(G[O])},_n.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})},_n.prototype.serialize=function(){for(var M=["step",this.input.serialize()],O=0;O<this.labels.length;O++)O>0&&M.push(this.labels[O]),M.push(this.outputs[O].serialize());return M};var Cn=Object.freeze({__proto__:null,number:Tn,color:function(M,O,G){return new Kt(Tn(M.r,O.r,G),Tn(M.g,O.g,G),Tn(M.b,O.b,G),Tn(M.a,O.a,G))},array:function(M,O,G){return M.map(function(ne,me){return Tn(ne,O[me],G)})}}),On=6/29,Zn=3*On*On,Aa=Math.PI/180,Ma=180/Math.PI;function Sn(M){return M>.008856451679035631?Math.pow(M,1/3):M/Zn+4/29}function Qn(M){return M>On?M*M*M:Zn*(M-4/29)}function Kn(M){return 255*(M<=.0031308?12.92*M:1.055*Math.pow(M,1/2.4)-.055)}function Da(M){return(M/=255)<=.04045?M/12.92:Math.pow((M+.055)/1.055,2.4)}function di(M){var O=Da(M.r),G=Da(M.g),ne=Da(M.b),me=Sn((.4124564*O+.3575761*G+.1804375*ne)/.95047),_e=Sn((.2126729*O+.7151522*G+.072175*ne)/1);return{l:116*_e-16,a:500*(me-_e),b:200*(_e-Sn((.0193339*O+.119192*G+.9503041*ne)/1.08883)),alpha:M.a}}function Di(M){var O=(M.l+16)/116,G=isNaN(M.a)?O:O+M.a/500,ne=isNaN(M.b)?O:O-M.b/200;return O=1*Qn(O),G=.95047*Qn(G),ne=1.08883*Qn(ne),new Kt(Kn(3.2404542*G-1.5371385*O-.4985314*ne),Kn(-.969266*G+1.8760108*O+.041556*ne),Kn(.0556434*G-.2040259*O+1.0572252*ne),M.alpha)}function fo(M,O,G){var ne=O-M;return M+G*(ne>180||ne<-180?ne-360*Math.round(ne/360):ne)}var Wa={forward:di,reverse:Di,interpolate:function(M,O,G){return{l:Tn(M.l,O.l,G),a:Tn(M.a,O.a,G),b:Tn(M.b,O.b,G),alpha:Tn(M.alpha,O.alpha,G)}}},Za={forward:function(M){var O=di(M),G=O.l,ne=O.a,me=O.b,_e=Math.atan2(me,ne)*Ma;return{h:_e<0?_e+360:_e,c:Math.sqrt(ne*ne+me*me),l:G,alpha:M.a}},reverse:function(M){var O=M.h*Aa,G=M.c;return Di({l:M.l,a:Math.cos(O)*G,b:Math.sin(O)*G,alpha:M.alpha})},interpolate:function(M,O,G){return{h:fo(M.h,O.h,G),c:Tn(M.c,O.c,G),l:Tn(M.l,O.l,G),alpha:Tn(M.alpha,O.alpha,G)}}},Ki=Object.freeze({__proto__:null,lab:Wa,hcl:Za}),Na=function(M,O,G,ne,me){this.type=M,this.operator=O,this.interpolation=G,this.input=ne,this.labels=[],this.outputs=[];for(var _e=0,Ce=me;_e<Ce.length;_e+=1){var Ne=Ce[_e],Qe=Ne[0],ct=Ne[1];this.labels.push(Qe),this.outputs.push(ct)}};function ho(M,O,G,ne){var me=ne-G,_e=M-G;return me===0?0:O===1?_e/me:(Math.pow(O,_e)-1)/(Math.pow(O,me)-1)}Na.interpolationFactor=function(M,O,G,ne){var me=0;if(M.name==="exponential")me=ho(O,M.base,G,ne);else if(M.name==="linear")me=ho(O,1,G,ne);else if(M.name==="cubic-bezier"){var _e=M.controlPoints;me=new r(_e[0],_e[1],_e[2],_e[3]).solve(ho(O,1,G,ne))}return me},Na.parse=function(M,O){var G=M[0],ne=M[1],me=M[2],_e=M.slice(3);if(!Array.isArray(ne)||ne.length===0)return O.error("Expected an interpolation type expression.",1);if(ne[0]==="linear")ne={name:"linear"};else if(ne[0]==="exponential"){var Ce=ne[1];if(typeof Ce!="number")return O.error("Exponential interpolation requires a numeric base.",1,1);ne={name:"exponential",base:Ce}}else{if(ne[0]!=="cubic-bezier")return O.error("Unknown interpolation type "+String(ne[0]),1,0);var Ne=ne.slice(1);if(Ne.length!==4||Ne.some(function(Cr){return typeof Cr!="number"||Cr<0||Cr>1}))return O.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ne={name:"cubic-bezier",controlPoints:Ne}}if(M.length-1<4)return O.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if((M.length-1)%2!=0)return O.error("Expected an even number of arguments.");if(!(me=O.parse(me,2,rt)))return null;var Qe=[],ct=null;G==="interpolate-hcl"||G==="interpolate-lab"?ct=wt:O.expectedType&&O.expectedType.kind!=="value"&&(ct=O.expectedType);for(var dt=0;dt<_e.length;dt+=2){var Rt=_e[dt],Wt=_e[dt+1],qt=dt+3,ir=dt+4;if(typeof Rt!="number")return O.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',qt);if(Qe.length&&Qe[Qe.length-1][0]>=Rt)return O.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',qt);var yr=O.parse(Wt,ir,ct);if(!yr)return null;ct=ct||yr.type,Qe.push([Rt,yr])}return ct.kind==="number"||ct.kind==="color"||ct.kind==="array"&&ct.itemType.kind==="number"&&typeof ct.N=="number"?new Na(ct,G,ne,me,Qe):O.error("Type "+Nt(ct)+" is not interpolatable.")},Na.prototype.evaluate=function(M){var O=this.labels,G=this.outputs;if(O.length===1)return G[0].evaluate(M);var ne=this.input.evaluate(M);if(ne<=O[0])return G[0].evaluate(M);var me=O.length;if(ne>=O[me-1])return G[me-1].evaluate(M);var _e=vn(O,ne),Ce=O[_e],Ne=O[_e+1],Qe=Na.interpolationFactor(this.interpolation,ne,Ce,Ne),ct=G[_e].evaluate(M),dt=G[_e+1].evaluate(M);return this.operator==="interpolate"?Cn[this.type.kind.toLowerCase()](ct,dt,Qe):this.operator==="interpolate-hcl"?Za.reverse(Za.interpolate(Za.forward(ct),Za.forward(dt),Qe)):Wa.reverse(Wa.interpolate(Wa.forward(ct),Wa.forward(dt),Qe))},Na.prototype.eachChild=function(M){M(this.input);for(var O=0,G=this.outputs;O<G.length;O+=1)M(G[O])},Na.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})},Na.prototype.serialize=function(){var M;M=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var O=[this.operator,M,this.input.serialize()],G=0;G<this.labels.length;G++)O.push(this.labels[G],this.outputs[G].serialize());return O};var vo=function(M,O){this.type=M,this.args=O};vo.parse=function(M,O){if(M.length<2)return O.error("Expectected at least one argument.");var G=null,ne=O.expectedType;ne&&ne.kind!=="value"&&(G=ne);for(var me=[],_e=0,Ce=M.slice(1);_e<Ce.length;_e+=1){var Ne=Ce[_e],Qe=O.parse(Ne,1+me.length,G,void 0,{typeAnnotation:"omit"});if(!Qe)return null;G=G||Qe.type,me.push(Qe)}var ct=ne&&me.some(function(dt){return Ut(ne,dt.type)});return new vo(ct?Se:G,me)},vo.prototype.evaluate=function(M){for(var O,G=null,ne=0,me=0,_e=this.args;me<_e.length&&(ne++,(G=_e[me].evaluate(M))&&G instanceof gr&&!G.available&&(O||(O=G.name),G=null,ne===this.args.length&&(G=O)),G===null);me+=1);return G},vo.prototype.eachChild=function(M){this.args.forEach(M)},vo.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},vo.prototype.serialize=function(){var M=["coalesce"];return this.eachChild(function(O){M.push(O.serialize())}),M};var wi=function(M,O){this.type=O.type,this.bindings=[].concat(M),this.result=O};wi.prototype.evaluate=function(M){return this.result.evaluate(M)},wi.prototype.eachChild=function(M){for(var O=0,G=this.bindings;O<G.length;O+=1)M(G[O][1]);M(this.result)},wi.parse=function(M,O){if(M.length<4)return O.error("Expected at least 3 arguments, but found "+(M.length-1)+" instead.");for(var G=[],ne=1;ne<M.length-1;ne+=2){var me=M[ne];if(typeof me!="string")return O.error("Expected string, but found "+typeof me+" instead.",ne);if(/[^a-zA-Z0-9_]/.test(me))return O.error("Variable names must contain only alphanumeric characters or '_'.",ne);var _e=O.parse(M[ne+1],ne+1);if(!_e)return null;G.push([me,_e])}var Ce=O.parse(M[M.length-1],M.length-1,O.expectedType,G);return Ce?new wi(G,Ce):null},wi.prototype.outputDefined=function(){return this.result.outputDefined()},wi.prototype.serialize=function(){for(var M=["let"],O=0,G=this.bindings;O<G.length;O+=1){var ne=G[O],me=ne[0],_e=ne[1];M.push(me,_e.serialize())}return M.push(this.result.serialize()),M};var $i=function(M,O,G){this.type=M,this.index=O,this.input=G};$i.parse=function(M,O){if(M.length!==3)return O.error("Expected 2 arguments, but found "+(M.length-1)+" instead.");var G=O.parse(M[1],1,rt),ne=O.parse(M[2],2,Mt(O.expectedType||Se));if(!G||!ne)return null;var me=ne.type;return new $i(me.itemType,G,ne)},$i.prototype.evaluate=function(M){var O=this.index.evaluate(M),G=this.input.evaluate(M);if(O<0)throw new en("Array index out of bounds: "+O+" < 0.");if(O>=G.length)throw new en("Array index out of bounds: "+O+" > "+(G.length-1)+".");if(O!==Math.floor(O))throw new en("Array index must be an integer, but found "+O+" instead.");return G[O]},$i.prototype.eachChild=function(M){M(this.index),M(this.input)},$i.prototype.outputDefined=function(){return!1},$i.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var yo=function(M,O){this.type=Bt,this.needle=M,this.haystack=O};yo.parse=function(M,O){if(M.length!==3)return O.error("Expected 2 arguments, but found "+(M.length-1)+" instead.");var G=O.parse(M[1],1,Se),ne=O.parse(M[2],2,Se);return G&&ne?fr(G.type,[Bt,ut,rt,Pt,Se])?new yo(G,ne):O.error("Expected first argument to be of type boolean, string, number or null, but found "+Nt(G.type)+" instead"):null},yo.prototype.evaluate=function(M){var O=this.needle.evaluate(M),G=this.haystack.evaluate(M);if(!G)return!1;if(!Tr(O,["boolean","string","number","null"]))throw new en("Expected first argument to be of type boolean, string, number or null, but found "+Nt(Fr(O))+" instead.");if(!Tr(G,["string","array"]))throw new en("Expected second argument to be of type array or string, but found "+Nt(Fr(G))+" instead.");return G.indexOf(O)>=0},yo.prototype.eachChild=function(M){M(this.needle),M(this.haystack)},yo.prototype.outputDefined=function(){return!0},yo.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var So=function(M,O,G){this.type=rt,this.needle=M,this.haystack=O,this.fromIndex=G};So.parse=function(M,O){if(M.length<=2||M.length>=5)return O.error("Expected 3 or 4 arguments, but found "+(M.length-1)+" instead.");var G=O.parse(M[1],1,Se),ne=O.parse(M[2],2,Se);if(!G||!ne)return null;if(!fr(G.type,[Bt,ut,rt,Pt,Se]))return O.error("Expected first argument to be of type boolean, string, number or null, but found "+Nt(G.type)+" instead");if(M.length===4){var me=O.parse(M[3],3,rt);return me?new So(G,ne,me):null}return new So(G,ne)},So.prototype.evaluate=function(M){var O=this.needle.evaluate(M),G=this.haystack.evaluate(M);if(!Tr(O,["boolean","string","number","null"]))throw new en("Expected first argument to be of type boolean, string, number or null, but found "+Nt(Fr(O))+" instead.");if(!Tr(G,["string","array"]))throw new en("Expected second argument to be of type array or string, but found "+Nt(Fr(G))+" instead.");if(this.fromIndex){var ne=this.fromIndex.evaluate(M);return G.indexOf(O,ne)}return G.indexOf(O)},So.prototype.eachChild=function(M){M(this.needle),M(this.haystack),this.fromIndex&&M(this.fromIndex)},So.prototype.outputDefined=function(){return!1},So.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var M=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),M]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Bi=function(M,O,G,ne,me,_e){this.inputType=M,this.type=O,this.input=G,this.cases=ne,this.outputs=me,this.otherwise=_e};Bi.parse=function(M,O){if(M.length<5)return O.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if(M.length%2!=1)return O.error("Expected an even number of arguments.");var G,ne;O.expectedType&&O.expectedType.kind!=="value"&&(ne=O.expectedType);for(var me={},_e=[],Ce=2;Ce<M.length-1;Ce+=2){var Ne=M[Ce],Qe=M[Ce+1];Array.isArray(Ne)||(Ne=[Ne]);var ct=O.concat(Ce);if(Ne.length===0)return ct.error("Expected at least one branch label.");for(var dt=0,Rt=Ne;dt<Rt.length;dt+=1){var Wt=Rt[dt];if(typeof Wt!="number"&&typeof Wt!="string")return ct.error("Branch labels must be numbers or strings.");if(typeof Wt=="number"&&Math.abs(Wt)>Number.MAX_SAFE_INTEGER)return ct.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Wt=="number"&&Math.floor(Wt)!==Wt)return ct.error("Numeric branch labels must be integer values.");if(G){if(ct.checkSubtype(G,Fr(Wt)))return null}else G=Fr(Wt);if(me[String(Wt)]!==void 0)return ct.error("Branch labels must be unique.");me[String(Wt)]=_e.length}var qt=O.parse(Qe,Ce,ne);if(!qt)return null;ne=ne||qt.type,_e.push(qt)}var ir=O.parse(M[1],1,Se);if(!ir)return null;var yr=O.parse(M[M.length-1],M.length-1,ne);return yr?ir.type.kind!=="value"&&O.concat(1).checkSubtype(G,ir.type)?null:new Bi(G,ne,ir,me,_e,yr):null},Bi.prototype.evaluate=function(M){var O=this.input.evaluate(M);return(Fr(O)===this.inputType&&this.outputs[this.cases[O]]||this.otherwise).evaluate(M)},Bi.prototype.eachChild=function(M){M(this.input),this.outputs.forEach(M),M(this.otherwise)},Bi.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})&&this.otherwise.outputDefined()},Bi.prototype.serialize=function(){for(var M=this,O=["match",this.input.serialize()],G=[],ne={},me=0,_e=Object.keys(this.cases).sort();me<_e.length;me+=1){var Ce=_e[me];(Rt=ne[this.cases[Ce]])===void 0?(ne[this.cases[Ce]]=G.length,G.push([this.cases[Ce],[Ce]])):G[Rt][1].push(Ce)}for(var Ne=function(qt){return M.inputType.kind==="number"?Number(qt):qt},Qe=0,ct=G;Qe<ct.length;Qe+=1){var dt=ct[Qe],Rt=dt[0],Wt=dt[1];Wt.length===1?O.push(Ne(Wt[0])):O.push(Wt.map(Ne)),O.push(this.outputs[outputIndex$1].serialize())}return O.push(this.otherwise.serialize()),O};var mi=function(M,O,G){this.type=M,this.branches=O,this.otherwise=G};mi.parse=function(M,O){if(M.length<4)return O.error("Expected at least 3 arguments, but found only "+(M.length-1)+".");if(M.length%2!=0)return O.error("Expected an odd number of arguments.");var G;O.expectedType&&O.expectedType.kind!=="value"&&(G=O.expectedType);for(var ne=[],me=1;me<M.length-1;me+=2){var _e=O.parse(M[me],me,Bt);if(!_e)return null;var Ce=O.parse(M[me+1],me+1,G);if(!Ce)return null;ne.push([_e,Ce]),G=G||Ce.type}var Ne=O.parse(M[M.length-1],M.length-1,G);return Ne?new mi(G,ne,Ne):null},mi.prototype.evaluate=function(M){for(var O=0,G=this.branches;O<G.length;O+=1){var ne=G[O],me=ne[0],_e=ne[1];if(me.evaluate(M))return _e.evaluate(M)}return this.otherwise.evaluate(M)},mi.prototype.eachChild=function(M){for(var O=0,G=this.branches;O<G.length;O+=1){var ne=G[O],me=ne[0],_e=ne[1];M(me),M(_e)}M(this.otherwise)},mi.prototype.outputDefined=function(){return this.branches.every(function(M){return M[0],M[1].outputDefined()})&&this.otherwise.outputDefined()},mi.prototype.serialize=function(){var M=["case"];return this.eachChild(function(O){M.push(O.serialize())}),M};var Zi=function(M,O,G,ne){this.type=M,this.input=O,this.beginIndex=G,this.endIndex=ne};function Ms(M,O){return M==="=="||M==="!="?O.kind==="boolean"||O.kind==="string"||O.kind==="number"||O.kind==="null"||O.kind==="value":O.kind==="string"||O.kind==="number"||O.kind==="value"}function Cs(M,O,G,ne){return ne.compare(O,G)===0}function Xa(M,O,G){var ne=M!=="=="&&M!=="!=";return function(){function me(_e,Ce,Ne){this.type=Bt,this.lhs=_e,this.rhs=Ce,this.collator=Ne,this.hasUntypedArgument=_e.type.kind==="value"||Ce.type.kind==="value"}return me.parse=function(_e,Ce){if(_e.length!==3&&_e.length!==4)return Ce.error("Expected two or three arguments.");var Ne=_e[0],Qe=Ce.parse(_e[1],1,Se);if(!Qe)return null;if(!Ms(Ne,Qe.type))return Ce.concat(1).error('"'+Ne+`" comparisons are not supported for type '`+Nt(Qe.type)+"'.");var ct=Ce.parse(_e[2],2,Se);if(!ct)return null;if(!Ms(Ne,ct.type))return Ce.concat(2).error('"'+Ne+`" comparisons are not supported for type '`+Nt(ct.type)+"'.");if(Qe.type.kind!==ct.type.kind&&Qe.type.kind!=="value"&&ct.type.kind!=="value")return Ce.error("Cannot compare types '"+Nt(Qe.type)+"' and '"+Nt(ct.type)+"'.");ne&&(Qe.type.kind==="value"&&ct.type.kind!=="value"?Qe=new nn(ct.type,[Qe]):Qe.type.kind!=="value"&&ct.type.kind==="value"&&(ct=new nn(Qe.type,[ct])));var dt=null;if(_e.length===4){if(Qe.type.kind!=="string"&&ct.type.kind!=="string"&&Qe.type.kind!=="value"&&ct.type.kind!=="value")return Ce.error("Cannot use collator to compare non-string types.");if(!(dt=Ce.parse(_e[3],3,We)))return null}return new me(Qe,ct,dt)},me.prototype.evaluate=function(_e){var Ce=this.lhs.evaluate(_e),Ne=this.rhs.evaluate(_e);if(ne&&this.hasUntypedArgument){var Qe=Fr(Ce),ct=Fr(Ne);if(Qe.kind!==ct.kind||Qe.kind!=="string"&&Qe.kind!=="number")throw new en('Expected arguments for "'+M+'" to be (string, string) or (number, number), but found ('+Qe.kind+", "+ct.kind+") instead.")}if(this.collator&&!ne&&this.hasUntypedArgument){var dt=Fr(Ce),Rt=Fr(Ne);if(dt.kind!=="string"||Rt.kind!=="string")return O(_e,Ce,Ne)}return this.collator?G(_e,Ce,Ne,this.collator.evaluate(_e)):O(_e,Ce,Ne)},me.prototype.eachChild=function(_e){_e(this.lhs),_e(this.rhs),this.collator&&_e(this.collator)},me.prototype.outputDefined=function(){return!0},me.prototype.serialize=function(){var _e=[M];return this.eachChild(function(Ce){_e.push(Ce.serialize())}),_e},me}()}Zi.parse=function(M,O){if(M.length<=2||M.length>=5)return O.error("Expected 3 or 4 arguments, but found "+(M.length-1)+" instead.");var G=O.parse(M[1],1,Se),ne=O.parse(M[2],2,rt);if(!G||!ne)return null;if(!fr(G.type,[Mt(Se),ut,Se]))return O.error("Expected first argument to be of type array or string, but found "+Nt(G.type)+" instead");if(M.length===4){var me=O.parse(M[3],3,rt);return me?new Zi(G.type,G,ne,me):null}return new Zi(G.type,G,ne)},Zi.prototype.evaluate=function(M){var O=this.input.evaluate(M),G=this.beginIndex.evaluate(M);if(!Tr(O,["string","array"]))throw new en("Expected first argument to be of type array or string, but found "+Nt(Fr(O))+" instead.");if(this.endIndex){var ne=this.endIndex.evaluate(M);return O.slice(G,ne)}return O.slice(G)},Zi.prototype.eachChild=function(M){M(this.input),M(this.beginIndex),this.endIndex&&M(this.endIndex)},Zi.prototype.outputDefined=function(){return!1},Zi.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var M=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),M]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var ys=Xa("==",function(M,O,G){return O===G},Cs),as=Xa("!=",function(M,O,G){return O!==G},function(M,O,G,ne){return!Cs(0,O,G,ne)}),Ps=Xa("<",function(M,O,G){return O<G},function(M,O,G,ne){return ne.compare(O,G)<0}),Is=Xa(">",function(M,O,G){return O>G},function(M,O,G,ne){return ne.compare(O,G)>0}),As=Xa("<=",function(M,O,G){return O<=G},function(M,O,G,ne){return ne.compare(O,G)<=0}),Os=Xa(">=",function(M,O,G){return O>=G},function(M,O,G,ne){return ne.compare(O,G)>=0}),Co=function(M,O,G,ne,me){this.type=ut,this.number=M,this.locale=O,this.currency=G,this.minFractionDigits=ne,this.maxFractionDigits=me};Co.parse=function(M,O){if(M.length!==3)return O.error("Expected two arguments.");var G=O.parse(M[1],1,rt);if(!G)return null;var ne=M[2];if(typeof ne!="object"||Array.isArray(ne))return O.error("NumberFormat options argument must be an object.");var me=null;if(ne.locale&&!(me=O.parse(ne.locale,1,ut)))return null;var _e=null;if(ne.currency&&!(_e=O.parse(ne.currency,1,ut)))return null;var Ce=null;if(ne["min-fraction-digits"]&&!(Ce=O.parse(ne["min-fraction-digits"],1,rt)))return null;var Ne=null;return ne["max-fraction-digits"]&&!(Ne=O.parse(ne["max-fraction-digits"],1,rt))?null:new Co(G,me,_e,Ce,Ne)},Co.prototype.evaluate=function(M){return new Intl.NumberFormat(this.locale?this.locale.evaluate(M):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(M):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(M):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(M):void 0}).format(this.number.evaluate(M))},Co.prototype.eachChild=function(M){M(this.number),this.locale&&M(this.locale),this.currency&&M(this.currency),this.minFractionDigits&&M(this.minFractionDigits),this.maxFractionDigits&&M(this.maxFractionDigits)},Co.prototype.outputDefined=function(){return!1},Co.prototype.serialize=function(){var M={};return this.locale&&(M.locale=this.locale.serialize()),this.currency&&(M.currency=this.currency.serialize()),this.minFractionDigits&&(M["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(M["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),M]};var Po=function(M){this.type=rt,this.input=M};Po.parse=function(M,O){if(M.length!==2)return O.error("Expected 1 argument, but found "+(M.length-1)+" instead.");var G=O.parse(M[1],1);return G?G.type.kind!=="array"&&G.type.kind!=="string"&&G.type.kind!=="value"?O.error("Expected argument of type string or array, but found "+Nt(G.type)+" instead."):new Po(G):null},Po.prototype.evaluate=function(M){var O=this.input.evaluate(M);if(typeof O=="string"||Array.isArray(O))return O.length;throw new en("Expected value to be of type string or array, but found "+Nt(Fr(O))+" instead.")},Po.prototype.eachChild=function(M){M(this.input)},Po.prototype.outputDefined=function(){return!1},Po.prototype.serialize=function(){var M=["length"];return this.eachChild(function(O){M.push(O.serialize())}),M};var qo={"==":ys,"!=":as,">":Is,"<":Ps,">=":Os,"<=":As,array:nn,at:$i,boolean:nn,case:mi,coalesce:vo,collator:un,format:yn,image:bn,in:yo,"index-of":So,interpolate:Na,"interpolate-hcl":Na,"interpolate-lab":Na,length:Po,let:wi,literal:fn,match:Bi,number:nn,"number-format":Co,object:nn,slice:Zi,step:_n,string:nn,"to-boolean":Br,"to-color":Br,"to-number":Br,"to-string":Br,var:$r,within:wr};function Go(M,O){var G=O[0],ne=O[1],me=O[2],_e=O[3];G=G.evaluate(M),ne=ne.evaluate(M),me=me.evaluate(M);var Ce=_e?_e.evaluate(M):1,Ne=Mr(G,ne,me,Ce);if(Ne)throw new en(Ne);return new Kt(G/255*Ce,ne/255*Ce,me/255*Ce,Ce)}function Yo(M,O){return M in O}function is(M,O){var G=O[M];return G===void 0?null:G}function xo(M){return{type:M}}function xs(M){return{result:"success",value:M}}function po(M){return{result:"error",value:M}}function Wo(M){return M["property-type"]==="data-driven"||M["property-type"]==="cross-faded-data-driven"}function bs(M){return!!M.expression&&M.expression.parameters.indexOf("zoom")>-1}function Io(M){return!!M.expression&&M.expression.interpolated}function Ga(M){return M instanceof Number?"number":M instanceof String?"string":M instanceof Boolean?"boolean":Array.isArray(M)?"array":M===null?"null":typeof M}function je(M){return typeof M=="object"&&M!==null&&!Array.isArray(M)}function Ye(M){return M}function et(M,O,G){return M!==void 0?M:O!==void 0?O:G!==void 0?G:void 0}function lt(M,O,G,ne,me){return et(typeof G===me?ne[G]:void 0,M.default,O.default)}function gt(M,O,G){if(Ga(G)!=="number")return et(M.default,O.default);var ne=M.stops.length;if(ne===1||G<=M.stops[0][0])return M.stops[0][1];if(G>=M.stops[ne-1][0])return M.stops[ne-1][1];var me=vn(M.stops.map(function(_e){return _e[0]}),G);return M.stops[me][1]}function pt(M,O,G){var ne=M.base!==void 0?M.base:1;if(Ga(G)!=="number")return et(M.default,O.default);var me=M.stops.length;if(me===1||G<=M.stops[0][0])return M.stops[0][1];if(G>=M.stops[me-1][0])return M.stops[me-1][1];var _e=vn(M.stops.map(function(Rt){return Rt[0]}),G),Ce=function(Rt,Wt,qt,ir){var yr=ir-qt,Cr=Rt-qt;return yr===0?0:Wt===1?Cr/yr:(Math.pow(Wt,Cr)-1)/(Math.pow(Wt,yr)-1)}(G,ne,M.stops[_e][0],M.stops[_e+1][0]),Ne=M.stops[_e][1],Qe=M.stops[_e+1][1],ct=Cn[O.type]||Ye;if(M.colorSpace&&M.colorSpace!=="rgb"){var dt=Ki[M.colorSpace];ct=function(Rt,Wt){return dt.reverse(dt.interpolate(dt.forward(Rt),dt.forward(Wt),Ce))}}return typeof Ne.evaluate=="function"?{evaluate:function(){for(var Rt=[],Wt=arguments.length;Wt--;)Rt[Wt]=arguments[Wt];var qt=Ne.evaluate.apply(void 0,Rt),ir=Qe.evaluate.apply(void 0,Rt);if(qt!==void 0&&ir!==void 0)return ct(qt,ir,Ce)}}:ct(Ne,Qe,Ce)}function St(M,O,G){return O.type==="color"?G=Kt.parse(G):O.type==="formatted"?G=cr.fromString(G.toString()):O.type==="resolvedImage"?G=gr.fromString(G.toString()):Ga(G)===O.type||O.type==="enum"&&O.values[G]||(G=void 0),et(G,M.default,O.default)}Qr.register(qo,{error:[{kind:"error"},[ut],function(M,O){var G=O[0];throw new en(G.evaluate(M))}],typeof:[ut,[Se],function(M,O){return Nt(Fr(O[0].evaluate(M)))}],"to-rgba":[Mt(rt,4),[wt],function(M,O){return O[0].evaluate(M).toArray()}],rgb:[wt,[rt,rt,rt],Go],rgba:[wt,[rt,rt,rt,rt],Go],has:{type:Bt,overloads:[[[ut],function(M,O){return Yo(O[0].evaluate(M),M.properties())}],[[ut,Lt],function(M,O){var G=O[0],ne=O[1];return Yo(G.evaluate(M),ne.evaluate(M))}]]},get:{type:Se,overloads:[[[ut],function(M,O){return is(O[0].evaluate(M),M.properties())}],[[ut,Lt],function(M,O){var G=O[0],ne=O[1];return is(G.evaluate(M),ne.evaluate(M))}]]},"feature-state":[Se,[ut],function(M,O){return is(O[0].evaluate(M),M.featureState||{})}],properties:[Lt,[],function(M){return M.properties()}],"geometry-type":[ut,[],function(M){return M.geometryType()}],id:[Se,[],function(M){return M.id()}],zoom:[rt,[],function(M){return M.globals.zoom}],"heatmap-density":[rt,[],function(M){return M.globals.heatmapDensity||0}],"line-progress":[rt,[],function(M){return M.globals.lineProgress||0}],accumulated:[Se,[],function(M){return M.globals.accumulated===void 0?null:M.globals.accumulated}],"+":[rt,xo(rt),function(M,O){for(var G=0,ne=0,me=O;ne<me.length;ne+=1)G+=me[ne].evaluate(M);return G}],"*":[rt,xo(rt),function(M,O){for(var G=1,ne=0,me=O;ne<me.length;ne+=1)G*=me[ne].evaluate(M);return G}],"-":{type:rt,overloads:[[[rt,rt],function(M,O){var G=O[0],ne=O[1];return G.evaluate(M)-ne.evaluate(M)}],[[rt],function(M,O){return-O[0].evaluate(M)}]]},"/":[rt,[rt,rt],function(M,O){var G=O[0],ne=O[1];return G.evaluate(M)/ne.evaluate(M)}],"%":[rt,[rt,rt],function(M,O){var G=O[0],ne=O[1];return G.evaluate(M)%ne.evaluate(M)}],ln2:[rt,[],function(){return Math.LN2}],pi:[rt,[],function(){return Math.PI}],e:[rt,[],function(){return Math.E}],"^":[rt,[rt,rt],function(M,O){var G=O[0],ne=O[1];return Math.pow(G.evaluate(M),ne.evaluate(M))}],sqrt:[rt,[rt],function(M,O){var G=O[0];return Math.sqrt(G.evaluate(M))}],log10:[rt,[rt],function(M,O){var G=O[0];return Math.log(G.evaluate(M))/Math.LN10}],ln:[rt,[rt],function(M,O){var G=O[0];return Math.log(G.evaluate(M))}],log2:[rt,[rt],function(M,O){var G=O[0];return Math.log(G.evaluate(M))/Math.LN2}],sin:[rt,[rt],function(M,O){var G=O[0];return Math.sin(G.evaluate(M))}],cos:[rt,[rt],function(M,O){var G=O[0];return Math.cos(G.evaluate(M))}],tan:[rt,[rt],function(M,O){var G=O[0];return Math.tan(G.evaluate(M))}],asin:[rt,[rt],function(M,O){var G=O[0];return Math.asin(G.evaluate(M))}],acos:[rt,[rt],function(M,O){var G=O[0];return Math.acos(G.evaluate(M))}],atan:[rt,[rt],function(M,O){var G=O[0];return Math.atan(G.evaluate(M))}],min:[rt,xo(rt),function(M,O){return Math.min.apply(Math,O.map(function(G){return G.evaluate(M)}))}],max:[rt,xo(rt),function(M,O){return Math.max.apply(Math,O.map(function(G){return G.evaluate(M)}))}],abs:[rt,[rt],function(M,O){var G=O[0];return Math.abs(G.evaluate(M))}],round:[rt,[rt],function(M,O){var G=O[0].evaluate(M);return G<0?-Math.round(-G):Math.round(G)}],floor:[rt,[rt],function(M,O){var G=O[0];return Math.floor(G.evaluate(M))}],ceil:[rt,[rt],function(M,O){var G=O[0];return Math.ceil(G.evaluate(M))}],"filter-==":[Bt,[ut,Se],function(M,O){var G=O[0],ne=O[1];return M.properties()[G.value]===ne.value}],"filter-id-==":[Bt,[Se],function(M,O){var G=O[0];return M.id()===G.value}],"filter-type-==":[Bt,[ut],function(M,O){var G=O[0];return M.geometryType()===G.value}],"filter-<":[Bt,[ut,Se],function(M,O){var G=O[0],ne=O[1],me=M.properties()[G.value],_e=ne.value;return typeof me==typeof _e&&me<_e}],"filter-id-<":[Bt,[Se],function(M,O){var G=O[0],ne=M.id(),me=G.value;return typeof ne==typeof me&&ne<me}],"filter->":[Bt,[ut,Se],function(M,O){var G=O[0],ne=O[1],me=M.properties()[G.value],_e=ne.value;return typeof me==typeof _e&&me>_e}],"filter-id->":[Bt,[Se],function(M,O){var G=O[0],ne=M.id(),me=G.value;return typeof ne==typeof me&&ne>me}],"filter-<=":[Bt,[ut,Se],function(M,O){var G=O[0],ne=O[1],me=M.properties()[G.value],_e=ne.value;return typeof me==typeof _e&&me<=_e}],"filter-id-<=":[Bt,[Se],function(M,O){var G=O[0],ne=M.id(),me=G.value;return typeof ne==typeof me&&ne<=me}],"filter->=":[Bt,[ut,Se],function(M,O){var G=O[0],ne=O[1],me=M.properties()[G.value],_e=ne.value;return typeof me==typeof _e&&me>=_e}],"filter-id->=":[Bt,[Se],function(M,O){var G=O[0],ne=M.id(),me=G.value;return typeof ne==typeof me&&ne>=me}],"filter-has":[Bt,[Se],function(M,O){return O[0].value in M.properties()}],"filter-has-id":[Bt,[],function(M){return M.id()!==null&&M.id()!==void 0}],"filter-type-in":[Bt,[Mt(ut)],function(M,O){return O[0].value.indexOf(M.geometryType())>=0}],"filter-id-in":[Bt,[Mt(Se)],function(M,O){return O[0].value.indexOf(M.id())>=0}],"filter-in-small":[Bt,[ut,Mt(Se)],function(M,O){var G=O[0];return O[1].value.indexOf(M.properties()[G.value])>=0}],"filter-in-large":[Bt,[ut,Mt(Se)],function(M,O){var G=O[0],ne=O[1];return function(me,_e,Ce,Ne){for(;Ce<=Ne;){var Qe=Ce+Ne>>1;if(_e[Qe]===me)return!0;_e[Qe]>me?Ne=Qe-1:Ce=Qe+1}return!1}(M.properties()[G.value],ne.value,0,ne.value.length-1)}],all:{type:Bt,overloads:[[[Bt,Bt],function(M,O){var G=O[0],ne=O[1];return G.evaluate(M)&&ne.evaluate(M)}],[xo(Bt),function(M,O){for(var G=0,ne=O;G<ne.length;G+=1)if(!ne[G].evaluate(M))return!1;return!0}]]},any:{type:Bt,overloads:[[[Bt,Bt],function(M,O){var G=O[0],ne=O[1];return G.evaluate(M)||ne.evaluate(M)}],[xo(Bt),function(M,O){for(var G=0,ne=O;G<ne.length;G+=1)if(ne[G].evaluate(M))return!0;return!1}]]},"!":[Bt,[Bt],function(M,O){return!O[0].evaluate(M)}],"is-supported-script":[Bt,[ut],function(M,O){var G=O[0],ne=M.globals&&M.globals.isSupportedScript;return!ne||ne(G.evaluate(M))}],upcase:[ut,[ut],function(M,O){return O[0].evaluate(M).toUpperCase()}],downcase:[ut,[ut],function(M,O){return O[0].evaluate(M).toLowerCase()}],concat:[ut,xo(Se),function(M,O){return O.map(function(G){return Yr(G.evaluate(M))}).join("")}],"resolved-locale":[ut,[We],function(M,O){return O[0].evaluate(M).resolvedLocale()}]});var Jt=function(M,O){this.expression=M,this._warningHistory={},this._evaluator=new gn,this._defaultValue=O?function(G){return G.type==="color"&&je(G.default)?new Kt(0,0,0,0):G.type==="color"?Kt.parse(G.default)||null:G.default===void 0?null:G.default}(O):null,this._enumValues=O&&O.type==="enum"?O.values:null};function $t(M){return Array.isArray(M)&&M.length>0&&typeof M[0]=="string"&&M[0]in qo}function Yt(M,O){var G=new tn(qo,[],O?function(me){var _e={color:wt,string:ut,number:rt,enum:ut,boolean:Bt,formatted:nt,resolvedImage:ft};return me.type==="array"?Mt(_e[me.value]||Se,me.length):_e[me.type]}(O):void 0),ne=G.parse(M,void 0,void 0,void 0,O&&O.type==="string"?{typeAnnotation:"coerce"}:void 0);return ne?xs(new Jt(ne,O)):po(G.errors)}Jt.prototype.evaluateWithoutErrorHandling=function(M,O,G,ne,me,_e){return this._evaluator.globals=M,this._evaluator.feature=O,this._evaluator.featureState=G,this._evaluator.canonical=ne,this._evaluator.availableImages=me||null,this._evaluator.formattedSection=_e,this.expression.evaluate(this._evaluator)},Jt.prototype.evaluate=function(M,O,G,ne,me,_e){this._evaluator.globals=M,this._evaluator.feature=O||null,this._evaluator.featureState=G||null,this._evaluator.canonical=ne,this._evaluator.availableImages=me||null,this._evaluator.formattedSection=_e||null;try{var Ce=this.expression.evaluate(this._evaluator);if(Ce==null||typeof Ce=="number"&&Ce!=Ce)return this._defaultValue;if(this._enumValues&&!(Ce in this._enumValues))throw new en("Expected value to be one of "+Object.keys(this._enumValues).map(function(Ne){return JSON.stringify(Ne)}).join(", ")+", but found "+JSON.stringify(Ce)+" instead.");return Ce}catch(Ne){return this._warningHistory[Ne.message]||(this._warningHistory[Ne.message]=!0,typeof console<"u"&&console.warn(Ne.message)),this._defaultValue}};var ar=function(M,O){this.kind=M,this._styleExpression=O,this.isStateDependent=M!=="constant"&&!qr(O.expression)};ar.prototype.evaluateWithoutErrorHandling=function(M,O,G,ne,me,_e){return this._styleExpression.evaluateWithoutErrorHandling(M,O,G,ne,me,_e)},ar.prototype.evaluate=function(M,O,G,ne,me,_e){return this._styleExpression.evaluate(M,O,G,ne,me,_e)};var pr=function(M,O,G,ne){this.kind=M,this.zoomStops=G,this._styleExpression=O,this.isStateDependent=M!=="camera"&&!qr(O.expression),this.interpolationType=ne};function br(M,O){if((M=Yt(M,O)).result==="error")return M;var G=M.value.expression,ne=Er(G);if(!ne&&!Wo(O))return po([new it("","data expressions not supported")]);var me=Hr(G,["zoom"]);if(!me&&!bs(O))return po([new it("","zoom expressions not supported")]);var _e=function Ne(Qe){var ct=null;if(Qe instanceof wi)ct=Ne(Qe.result);else if(Qe instanceof vo)for(var dt=0,Rt=Qe.args;dt<Rt.length;dt+=1){var Wt=Rt[dt];if(ct=Ne(Wt))break}else(Qe instanceof _n||Qe instanceof Na)&&Qe.input instanceof Qr&&Qe.input.name==="zoom"&&(ct=Qe);return ct instanceof it||Qe.eachChild(function(qt){var ir=Ne(qt);ir instanceof it?ct=ir:!ct&&ir?ct=new it("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):ct&&ir&&ct!==ir&&(ct=new it("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),ct}(G);if(!_e&&!me)return po([new it("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(_e instanceof it)return po([_e]);if(_e instanceof Na&&!Io(O))return po([new it("",'"interpolate" expressions cannot be used with this property')]);if(!_e)return xs(new ar(ne?"constant":"source",M.value));var Ce=_e instanceof Na?_e.interpolation:void 0;return xs(new pr(ne?"camera":"composite",M.value,_e.labels,Ce))}pr.prototype.evaluateWithoutErrorHandling=function(M,O,G,ne,me,_e){return this._styleExpression.evaluateWithoutErrorHandling(M,O,G,ne,me,_e)},pr.prototype.evaluate=function(M,O,G,ne,me,_e){return this._styleExpression.evaluate(M,O,G,ne,me,_e)},pr.prototype.interpolationFactor=function(M,O,G){return this.interpolationType?Na.interpolationFactor(this.interpolationType,M,O,G):0};var _r=function(M,O){this._parameters=M,this._specification=O,Xe(this,function G(ne,me){var _e,Ce,Ne,Qe=me.type==="color",ct=ne.stops&&typeof ne.stops[0][0]=="object",dt=ct||ne.property!==void 0,Rt=ct||!dt,Wt=ne.type||(Io(me)?"exponential":"interval");if(Qe&&((ne=Xe({},ne)).stops&&(ne.stops=ne.stops.map(function(ca){return[ca[0],Kt.parse(ca[1])]})),ne.default?ne.default=Kt.parse(ne.default):ne.default=Kt.parse(me.default)),ne.colorSpace&&ne.colorSpace!=="rgb"&&!Ki[ne.colorSpace])throw new Error("Unknown color space: "+ne.colorSpace);if(Wt==="exponential")_e=pt;else if(Wt==="interval")_e=gt;else if(Wt==="categorical"){_e=lt,Ce=Object.create(null);for(var qt=0,ir=ne.stops;qt<ir.length;qt+=1){var yr=ir[qt];Ce[yr[0]]=yr[1]}Ne=typeof ne.stops[0][0]}else{if(Wt!=="identity")throw new Error('Unknown function type "'+Wt+'"');_e=St}if(ct){for(var Cr={},Lr=[],Ur=0;Ur<ne.stops.length;Ur++){var Vr=ne.stops[Ur],Wr=Vr[0].zoom;Cr[Wr]===void 0&&(Cr[Wr]={zoom:Wr,type:ne.type,property:ne.property,default:ne.default,stops:[]},Lr.push(Wr)),Cr[Wr].stops.push([Vr[0].value,Vr[1]])}for(var hn=[],xn=0,Nn=Lr;xn<Nn.length;xn+=1){var Bn=Nn[xn];hn.push([Cr[Bn].zoom,G(Cr[Bn],me)])}var Wn={name:"linear"};return{kind:"composite",interpolationType:Wn,interpolationFactor:Na.interpolationFactor.bind(void 0,Wn),zoomStops:hn.map(function(ca){return ca[0]}),evaluate:function(ca,$n){var ma=ca.zoom;return pt({stops:hn,base:ne.base},me,ma).evaluate(ma,$n)}}}if(Rt){var la=Wt==="exponential"?{name:"exponential",base:ne.base!==void 0?ne.base:1}:null;return{kind:"camera",interpolationType:la,interpolationFactor:Na.interpolationFactor.bind(void 0,la),zoomStops:ne.stops.map(function(ca){return ca[0]}),evaluate:function(ca){var $n=ca.zoom;return _e(ne,me,$n,Ce,Ne)}}}return{kind:"source",evaluate:function(ca,$n){var ma=$n&&$n.properties?$n.properties[ne.property]:void 0;return ma===void 0?et(ne.default,me.default):_e(ne,me,ma,Ce,Ne)}}}(this._parameters,this._specification))};function Dr(M){var O=M.key,G=M.value,ne=M.valueSpec||{},me=M.objectElementValidators||{},_e=M.style,Ce=M.styleSpec,Ne=[],Qe=Ga(G);if(Qe!=="object")return[new Re(O,G,"object expected, "+Qe+" found")];for(var ct in G){var dt=ct.split(".")[0],Rt=ne[dt]||ne["*"],Wt=void 0;if(me[dt])Wt=me[dt];else if(ne[dt])Wt=sr;else if(me["*"])Wt=me["*"];else{if(!ne["*"]){Ne.push(new Re(O,G[ct],'unknown property "'+ct+'"'));continue}Wt=sr}Ne=Ne.concat(Wt({key:(O&&O+".")+ct,value:G[ct],valueSpec:Rt,style:_e,styleSpec:Ce,object:G,objectKey:ct},G))}for(var qt in ne)me[qt]||ne[qt].required&&ne[qt].default===void 0&&G[qt]===void 0&&Ne.push(new Re(O,G,'missing required property "'+qt+'"'));return Ne}function an(M){var O=M.value,G=M.valueSpec,ne=M.style,me=M.styleSpec,_e=M.key,Ce=M.arrayElementValidator||sr;if(Ga(O)!=="array")return[new Re(_e,O,"array expected, "+Ga(O)+" found")];if(G.length&&O.length!==G.length)return[new Re(_e,O,"array length "+G.length+" expected, length "+O.length+" found")];if(G["min-length"]&&O.length<G["min-length"])return[new Re(_e,O,"array length at least "+G["min-length"]+" expected, length "+O.length+" found")];var Ne={type:G.value,values:G.values};me.$version<7&&(Ne.function=G.function),Ga(G.value)==="object"&&(Ne=G.value);for(var Qe=[],ct=0;ct<O.length;ct++)Qe=Qe.concat(Ce({array:O,arrayIndex:ct,value:O[ct],valueSpec:Ne,style:ne,styleSpec:me,key:_e+"["+ct+"]"}));return Qe}function dn(M){var O=M.key,G=M.value,ne=M.valueSpec,me=Ga(G);return me==="number"&&G!=G&&(me="NaN"),me!=="number"?[new Re(O,G,"number expected, "+me+" found")]:"minimum"in ne&&G<ne.minimum?[new Re(O,G,G+" is less than the minimum value "+ne.minimum)]:"maximum"in ne&&G>ne.maximum?[new Re(O,G,G+" is greater than the maximum value "+ne.maximum)]:[]}function Pn(M){var O,G,ne,me=M.valueSpec,_e=qe(M.value.type),Ce={},Ne=_e!=="categorical"&&M.value.property===void 0,Qe=!Ne,ct=Ga(M.value.stops)==="array"&&Ga(M.value.stops[0])==="array"&&Ga(M.value.stops[0][0])==="object",dt=Dr({key:M.key,value:M.value,valueSpec:M.styleSpec.function,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{stops:function(qt){if(_e==="identity")return[new Re(qt.key,qt.value,'identity function may not have a "stops" property')];var ir=[],yr=qt.value;return ir=ir.concat(an({key:qt.key,value:yr,valueSpec:qt.valueSpec,style:qt.style,styleSpec:qt.styleSpec,arrayElementValidator:Rt})),Ga(yr)==="array"&&yr.length===0&&ir.push(new Re(qt.key,yr,"array must have at least one stop")),ir},default:function(qt){return sr({key:qt.key,value:qt.value,valueSpec:me,style:qt.style,styleSpec:qt.styleSpec})}}});return _e==="identity"&&Ne&&dt.push(new Re(M.key,M.value,'missing required property "property"')),_e==="identity"||M.value.stops||dt.push(new Re(M.key,M.value,'missing required property "stops"')),_e==="exponential"&&M.valueSpec.expression&&!Io(M.valueSpec)&&dt.push(new Re(M.key,M.value,"exponential functions not supported")),M.styleSpec.$version>=8&&(Qe&&!Wo(M.valueSpec)?dt.push(new Re(M.key,M.value,"property functions not supported")):Ne&&!bs(M.valueSpec)&&dt.push(new Re(M.key,M.value,"zoom functions not supported"))),_e!=="categorical"&&!ct||M.value.property!==void 0||dt.push(new Re(M.key,M.value,'"property" property is required')),dt;function Rt(qt){var ir=[],yr=qt.value,Cr=qt.key;if(Ga(yr)!=="array")return[new Re(Cr,yr,"array expected, "+Ga(yr)+" found")];if(yr.length!==2)return[new Re(Cr,yr,"array length 2 expected, length "+yr.length+" found")];if(ct){if(Ga(yr[0])!=="object")return[new Re(Cr,yr,"object expected, "+Ga(yr[0])+" found")];if(yr[0].zoom===void 0)return[new Re(Cr,yr,"object stop key must have zoom")];if(yr[0].value===void 0)return[new Re(Cr,yr,"object stop key must have value")];if(ne&&ne>qe(yr[0].zoom))return[new Re(Cr,yr[0].zoom,"stop zoom values must appear in ascending order")];qe(yr[0].zoom)!==ne&&(ne=qe(yr[0].zoom),G=void 0,Ce={}),ir=ir.concat(Dr({key:Cr+"[0]",value:yr[0],valueSpec:{zoom:{}},style:qt.style,styleSpec:qt.styleSpec,objectElementValidators:{zoom:dn,value:Wt}}))}else ir=ir.concat(Wt({key:Cr+"[0]",value:yr[0],valueSpec:{},style:qt.style,styleSpec:qt.styleSpec},yr));return $t(st(yr[1]))?ir.concat([new Re(Cr+"[1]",yr[1],"expressions are not allowed in function stops.")]):ir.concat(sr({key:Cr+"[1]",value:yr[1],valueSpec:me,style:qt.style,styleSpec:qt.styleSpec}))}function Wt(qt,ir){var yr=Ga(qt.value),Cr=qe(qt.value),Lr=qt.value!==null?qt.value:ir;if(O){if(yr!==O)return[new Re(qt.key,Lr,yr+" stop domain type must match previous stop domain type "+O)]}else O=yr;if(yr!=="number"&&yr!=="string"&&yr!=="boolean")return[new Re(qt.key,Lr,"stop domain value must be a number, string, or boolean")];if(yr!=="number"&&_e!=="categorical"){var Ur="number expected, "+yr+" found";return Wo(me)&&_e===void 0&&(Ur+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Re(qt.key,Lr,Ur)]}return _e!=="categorical"||yr!=="number"||isFinite(Cr)&&Math.floor(Cr)===Cr?_e!=="categorical"&&yr==="number"&&G!==void 0&&Cr<G?[new Re(qt.key,Lr,"stop domain values must appear in ascending order")]:(G=Cr,_e==="categorical"&&Cr in Ce?[new Re(qt.key,Lr,"stop domain values must be unique")]:(Ce[Cr]=!0,[])):[new Re(qt.key,Lr,"integer expected, found "+Cr)]}}function Dn(M){var O=(M.expressionContext==="property"?br:Yt)(st(M.value),M.valueSpec);if(O.result==="error")return O.value.map(function(ne){return new Re(""+M.key+ne.key,M.value,ne.message)});var G=O.value.expression||O.value._styleExpression.expression;if(M.expressionContext==="property"&&M.propertyKey==="text-font"&&!G.outputDefined())return[new Re(M.key,M.value,'Invalid data expression for "'+M.propertyKey+'". Output values must be contained as literals within the expression.')];if(M.expressionContext==="property"&&M.propertyType==="layout"&&!qr(G))return[new Re(M.key,M.value,'"feature-state" data expressions are not supported with layout properties.')];if(M.expressionContext==="filter"&&!qr(G))return[new Re(M.key,M.value,'"feature-state" data expressions are not supported with filters.')];if(M.expressionContext&&M.expressionContext.indexOf("cluster")===0){if(!Hr(G,["zoom","feature-state"]))return[new Re(M.key,M.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(M.expressionContext==="cluster-initial"&&!Er(G))return[new Re(M.key,M.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function qn(M){var O=M.key,G=M.value,ne=M.valueSpec,me=[];return Array.isArray(ne.values)?ne.values.indexOf(qe(G))===-1&&me.push(new Re(O,G,"expected one of ["+ne.values.join(", ")+"], "+JSON.stringify(G)+" found")):Object.keys(ne.values).indexOf(qe(G))===-1&&me.push(new Re(O,G,"expected one of ["+Object.keys(ne.values).join(", ")+"], "+JSON.stringify(G)+" found")),me}function zn(M){if(M===!0||M===!1)return!0;if(!Array.isArray(M)||M.length===0)return!1;switch(M[0]){case"has":return M.length>=2&&M[1]!=="$id"&&M[1]!=="$type";case"in":return M.length>=3&&(typeof M[1]!="string"||Array.isArray(M[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return M.length!==3||Array.isArray(M[1])||Array.isArray(M[2]);case"any":case"all":for(var O=0,G=M.slice(1);O<G.length;O+=1){var ne=G[O];if(!zn(ne)&&typeof ne!="boolean")return!1}return!0;default:return!0}}_r.deserialize=function(M){return new _r(M._parameters,M._specification)},_r.serialize=function(M){return{_parameters:M._parameters,_specification:M._specification}};var va={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Sa(M){if(M==null)return{filter:function(){return!0},needGeometry:!1};zn(M)||(M=ja(M));var O=Yt(M,va);if(O.result==="error")throw new Error(O.value.map(function(G){return G.key+": "+G.message}).join(", "));return{filter:function(G,ne,me){return O.value.evaluate(G,ne,{},me)},needGeometry:function G(ne){if(!Array.isArray(ne))return!1;if(ne[0]==="within")return!0;for(var me=1;me<ne.length;me++)if(G(ne[me]))return!0;return!1}(M)}}function Ua(M,O){return M<O?-1:M>O?1:0}function ja(M){if(!M)return!0;var O,G=M[0];return M.length<=1?G!=="any":G==="=="?Va(M[1],M[2],"=="):G==="!="?si(Va(M[1],M[2],"==")):G==="<"||G===">"||G==="<="||G===">="?Va(M[1],M[2],G):G==="any"?(O=M.slice(1),["any"].concat(O.map(ja))):G==="all"?["all"].concat(M.slice(1).map(ja)):G==="none"?["all"].concat(M.slice(1).map(ja).map(si)):G==="in"?Ti(M[1],M.slice(2)):G==="!in"?si(Ti(M[1],M.slice(2))):G==="has"?bi(M[1]):G==="!has"?si(bi(M[1])):G!=="within"||M}function Va(M,O,G){switch(M){case"$type":return["filter-type-"+G,O];case"$id":return["filter-id-"+G,O];default:return["filter-"+G,M,O]}}function Ti(M,O){if(O.length===0)return!1;switch(M){case"$type":return["filter-type-in",["literal",O]];case"$id":return["filter-id-in",["literal",O]];default:return O.length>200&&!O.some(function(G){return typeof G!=typeof O[0]})?["filter-in-large",M,["literal",O.sort(Ua)]]:["filter-in-small",M,["literal",O]]}}function bi(M){switch(M){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",M]}}function si(M){return["!",M]}function li(M){return zn(st(M.value))?Dn(Xe({},M,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function O(G){var ne=G.value,me=G.key;if(Ga(ne)!=="array")return[new Re(me,ne,"array expected, "+Ga(ne)+" found")];var _e,Ce=G.styleSpec,Ne=[];if(ne.length<1)return[new Re(me,ne,"filter array must have at least 1 element")];switch(Ne=Ne.concat(qn({key:me+"[0]",value:ne[0],valueSpec:Ce.filter_operator,style:G.style,styleSpec:G.styleSpec})),qe(ne[0])){case"<":case"<=":case">":case">=":ne.length>=2&&qe(ne[1])==="$type"&&Ne.push(new Re(me,ne,'"$type" cannot be use with operator "'+ne[0]+'"'));case"==":case"!=":ne.length!==3&&Ne.push(new Re(me,ne,'filter array for operator "'+ne[0]+'" must have 3 elements'));case"in":case"!in":ne.length>=2&&(_e=Ga(ne[1]))!=="string"&&Ne.push(new Re(me+"[1]",ne[1],"string expected, "+_e+" found"));for(var Qe=2;Qe<ne.length;Qe++)_e=Ga(ne[Qe]),qe(ne[1])==="$type"?Ne=Ne.concat(qn({key:me+"["+Qe+"]",value:ne[Qe],valueSpec:Ce.geometry_type,style:G.style,styleSpec:G.styleSpec})):_e!=="string"&&_e!=="number"&&_e!=="boolean"&&Ne.push(new Re(me+"["+Qe+"]",ne[Qe],"string, number, or boolean expected, "+_e+" found"));break;case"any":case"all":case"none":for(var ct=1;ct<ne.length;ct++)Ne=Ne.concat(O({key:me+"["+ct+"]",value:ne[ct],style:G.style,styleSpec:G.styleSpec}));break;case"has":case"!has":_e=Ga(ne[1]),ne.length!==2?Ne.push(new Re(me,ne,'filter array for "'+ne[0]+'" operator must have 2 elements')):_e!=="string"&&Ne.push(new Re(me+"[1]",ne[1],"string expected, "+_e+" found"));break;case"within":_e=Ga(ne[1]),ne.length!==2?Ne.push(new Re(me,ne,'filter array for "'+ne[0]+'" operator must have 2 elements')):_e!=="object"&&Ne.push(new Re(me+"[1]",ne[1],"object expected, "+_e+" found"))}return Ne}(M)}function _i(M,O){var G=M.key,ne=M.style,me=M.styleSpec,_e=M.value,Ce=M.objectKey,Ne=me[O+"_"+M.layerType];if(!Ne)return[];var Qe=Ce.match(/^(.*)-transition$/);if(O==="paint"&&Qe&&Ne[Qe[1]]&&Ne[Qe[1]].transition)return sr({key:G,value:_e,valueSpec:me.transition,style:ne,styleSpec:me});var ct,dt=M.valueSpec||Ne[Ce];if(!dt)return[new Re(G,_e,'unknown property "'+Ce+'"')];if(Ga(_e)==="string"&&Wo(dt)&&!dt.tokens&&(ct=/^{([^}]+)}$/.exec(_e)))return[new Re(G,_e,'"'+Ce+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(ct[1])+" }`.")];var Rt=[];return M.layerType==="symbol"&&(Ce==="text-field"&&ne&&!ne.glyphs&&Rt.push(new Re(G,_e,'use of "text-field" requires a style "glyphs" property')),Ce==="text-font"&&je(st(_e))&&qe(_e.type)==="identity"&&Rt.push(new Re(G,_e,'"text-font" does not support identity functions'))),Rt.concat(sr({key:M.key,value:_e,valueSpec:dt,style:ne,styleSpec:me,expressionContext:"property",propertyType:O,propertyKey:Ce}))}function Ni(M){return _i(M,"paint")}function Qi(M){return _i(M,"layout")}function eo(M){var O=[],G=M.value,ne=M.key,me=M.style,_e=M.styleSpec;G.type||G.ref||O.push(new Re(ne,G,'either "type" or "ref" is required'));var Ce,Ne=qe(G.type),Qe=qe(G.ref);if(G.id)for(var ct=qe(G.id),dt=0;dt<M.arrayIndex;dt++){var Rt=me.layers[dt];qe(Rt.id)===ct&&O.push(new Re(ne,G.id,'duplicate layer id "'+G.id+'", previously used at line '+Rt.id.__line__))}if("ref"in G)["type","source","source-layer","filter","layout"].forEach(function(ir){ir in G&&O.push(new Re(ne,G[ir],'"'+ir+'" is prohibited for ref layers'))}),me.layers.forEach(function(ir){qe(ir.id)===Qe&&(Ce=ir)}),Ce?Ce.ref?O.push(new Re(ne,G.ref,"ref cannot reference another ref layer")):Ne=qe(Ce.type):O.push(new Re(ne,G.ref,'ref layer "'+Qe+'" not found'));else if(Ne!=="background")if(G.source){var Wt=me.sources&&me.sources[G.source],qt=Wt&&qe(Wt.type);Wt?qt==="vector"&&Ne==="raster"?O.push(new Re(ne,G.source,'layer "'+G.id+'" requires a raster source')):qt==="raster"&&Ne!=="raster"?O.push(new Re(ne,G.source,'layer "'+G.id+'" requires a vector source')):qt!=="vector"||G["source-layer"]?qt==="raster-dem"&&Ne!=="hillshade"?O.push(new Re(ne,G.source,"raster-dem source can only be used with layer type 'hillshade'.")):Ne!=="line"||!G.paint||!G.paint["line-gradient"]||qt==="geojson"&&Wt.lineMetrics||O.push(new Re(ne,G,'layer "'+G.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):O.push(new Re(ne,G,'layer "'+G.id+'" must specify a "source-layer"')):O.push(new Re(ne,G.source,'source "'+G.source+'" not found'))}else O.push(new Re(ne,G,'missing required property "source"'));return O=O.concat(Dr({key:ne,value:G,valueSpec:_e.layer,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return sr({key:ne+".type",value:G.type,valueSpec:_e.layer.type,style:M.style,styleSpec:M.styleSpec,object:G,objectKey:"type"})},filter:li,layout:function(ir){return Dr({layer:G,key:ir.key,value:ir.value,style:ir.style,styleSpec:ir.styleSpec,objectElementValidators:{"*":function(yr){return Qi(Xe({layerType:Ne},yr))}}})},paint:function(ir){return Dr({layer:G,key:ir.key,value:ir.value,style:ir.style,styleSpec:ir.styleSpec,objectElementValidators:{"*":function(yr){return Ni(Xe({layerType:Ne},yr))}}})}}}))}function to(M){var O=M.value,G=M.key,ne=Ga(O);return ne!=="string"?[new Re(G,O,"string expected, "+ne+" found")]:[]}var ro={promoteId:function(M){var O=M.key,G=M.value;if(Ga(G)==="string")return to({key:O,value:G});var ne=[];for(var me in G)ne.push.apply(ne,to({key:O+"."+me,value:G[me]}));return ne}};function za(M){var O=M.value,G=M.key,ne=M.styleSpec,me=M.style;if(!O.type)return[new Re(G,O,'"type" is required')];var _e,Ce=qe(O.type);switch(Ce){case"vector":case"raster":case"raster-dem":return _e=Dr({key:G,value:O,valueSpec:ne["source_"+Ce.replace("-","_")],style:M.style,styleSpec:ne,objectElementValidators:ro});case"geojson":if(_e=Dr({key:G,value:O,valueSpec:ne.source_geojson,style:me,styleSpec:ne,objectElementValidators:ro}),O.cluster)for(var Ne in O.clusterProperties){var Qe=O.clusterProperties[Ne],ct=Qe[0],dt=Qe[1],Rt=typeof ct=="string"?[ct,["accumulated"],["get",Ne]]:ct;_e.push.apply(_e,Dn({key:G+"."+Ne+".map",value:dt,expressionContext:"cluster-map"})),_e.push.apply(_e,Dn({key:G+"."+Ne+".reduce",value:Rt,expressionContext:"cluster-reduce"}))}return _e;case"video":return Dr({key:G,value:O,valueSpec:ne.source_video,style:me,styleSpec:ne});case"image":return Dr({key:G,value:O,valueSpec:ne.source_image,style:me,styleSpec:ne});case"canvas":return[new Re(G,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return qn({key:G+".type",value:O.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:me,styleSpec:ne})}}function ht(M){var O=M.value,G=M.styleSpec,ne=G.light,me=M.style,_e=[],Ce=Ga(O);if(O===void 0)return _e;if(Ce!=="object")return _e=_e.concat([new Re("light",O,"object expected, "+Ce+" found")]);for(var Ne in O){var Qe=Ne.match(/^(.*)-transition$/);_e=Qe&&ne[Qe[1]]&&ne[Qe[1]].transition?_e.concat(sr({key:Ne,value:O[Ne],valueSpec:G.transition,style:me,styleSpec:G})):ne[Ne]?_e.concat(sr({key:Ne,value:O[Ne],valueSpec:ne[Ne],style:me,styleSpec:G})):_e.concat([new Re(Ne,O[Ne],'unknown property "'+Ne+'"')])}return _e}var Dt={"*":function(){return[]},array:an,boolean:function(M){var O=M.value,G=M.key,ne=Ga(O);return ne!=="boolean"?[new Re(G,O,"boolean expected, "+ne+" found")]:[]},number:dn,color:function(M){var O=M.key,G=M.value,ne=Ga(G);return ne!=="string"?[new Re(O,G,"color expected, "+ne+" found")]:ur(G)===null?[new Re(O,G,'color expected, "'+G+'" found')]:[]},constants:Ue,enum:qn,filter:li,function:Pn,layer:eo,object:Dr,source:za,light:ht,string:to,formatted:function(M){return to(M).length===0?[]:Dn(M)},resolvedImage:function(M){return to(M).length===0?[]:Dn(M)}};function sr(M){var O=M.value,G=M.valueSpec,ne=M.styleSpec;return G.expression&&je(qe(O))?Pn(M):G.expression&&$t(st(O))?Dn(M):G.type&&Dt[G.type]?Dt[G.type](M):Dr(Xe({},M,{valueSpec:G.type?ne[G.type]:G}))}function Ht(M){var O=M.value,G=M.key,ne=to(M);return ne.length||(O.indexOf("{fontstack}")===-1&&ne.push(new Re(G,O,'"glyphs" url must include a "{fontstack}" token')),O.indexOf("{range}")===-1&&ne.push(new Re(G,O,'"glyphs" url must include a "{range}" token'))),ne}function lr(M,O){O===void 0&&(O=be);var G=[];return G=G.concat(sr({key:"",value:M,valueSpec:O.$root,styleSpec:O,style:M,objectElementValidators:{glyphs:Ht,"*":function(){return[]}}})),M.constants&&(G=G.concat(Ue({key:"constants",value:M.constants,style:M,styleSpec:O}))),Pr(G)}function Pr(M){return[].concat(M).sort(function(O,G){return O.line-G.line})}function Nr(M){return function(){for(var O=[],G=arguments.length;G--;)O[G]=arguments[G];return Pr(M.apply(this,O))}}lr.source=Nr(za),lr.light=Nr(ht),lr.layer=Nr(eo),lr.filter=Nr(li),lr.paintProperty=Nr(Ni),lr.layoutProperty=Nr(Qi);var Zr=lr,ln=Zr.light,on=Zr.paintProperty,mn=Zr.layoutProperty;function kn(M,O){var G=!1;if(O&&O.length)for(var ne=0,me=O;ne<me.length;ne+=1){var _e=me[ne];M.fire(new He(new Error(_e.message))),G=!0}return G}var cn=Mn;function Mn(M,O,G){var ne=this.cells=[];if(M instanceof ArrayBuffer){this.arrayBuffer=M;var me=new Int32Array(this.arrayBuffer);M=me[0],O=me[1],G=me[2],this.d=O+2*G;for(var _e=0;_e<this.d*this.d;_e++){var Ce=me[3+_e],Ne=me[3+_e+1];ne.push(Ce===Ne?null:me.subarray(Ce,Ne))}var Qe=me[3+ne.length],ct=me[3+ne.length+1];this.keys=me.subarray(Qe,ct),this.bboxes=me.subarray(ct),this.insert=this._insertReadonly}else{this.d=O+2*G;for(var dt=0;dt<this.d*this.d;dt++)ne.push([]);this.keys=[],this.bboxes=[]}this.n=O,this.extent=M,this.padding=G,this.scale=O/M,this.uid=0;var Rt=G/O*M;this.min=-Rt,this.max=M+Rt}Mn.prototype.insert=function(M,O,G,ne,me){this._forEachCell(O,G,ne,me,this._insertCell,this.uid++),this.keys.push(M),this.bboxes.push(O),this.bboxes.push(G),this.bboxes.push(ne),this.bboxes.push(me)},Mn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Mn.prototype._insertCell=function(M,O,G,ne,me,_e){this.cells[me].push(_e)},Mn.prototype.query=function(M,O,G,ne,me){var _e=this.min,Ce=this.max;if(M<=_e&&O<=_e&&Ce<=G&&Ce<=ne&&!me)return Array.prototype.slice.call(this.keys);var Ne=[];return this._forEachCell(M,O,G,ne,this._queryCell,Ne,{},me),Ne},Mn.prototype._queryCell=function(M,O,G,ne,me,_e,Ce,Ne){var Qe=this.cells[me];if(Qe!==null)for(var ct=this.keys,dt=this.bboxes,Rt=0;Rt<Qe.length;Rt++){var Wt=Qe[Rt];if(Ce[Wt]===void 0){var qt=4*Wt;(Ne?Ne(dt[qt+0],dt[qt+1],dt[qt+2],dt[qt+3]):M<=dt[qt+2]&&O<=dt[qt+3]&&G>=dt[qt+0]&&ne>=dt[qt+1])?(Ce[Wt]=!0,_e.push(ct[Wt])):Ce[Wt]=!1}}},Mn.prototype._forEachCell=function(M,O,G,ne,me,_e,Ce,Ne){for(var Qe=this._convertToCellCoord(M),ct=this._convertToCellCoord(O),dt=this._convertToCellCoord(G),Rt=this._convertToCellCoord(ne),Wt=Qe;Wt<=dt;Wt++)for(var qt=ct;qt<=Rt;qt++){var ir=this.d*qt+Wt;if((!Ne||Ne(this._convertFromCellCoord(Wt),this._convertFromCellCoord(qt),this._convertFromCellCoord(Wt+1),this._convertFromCellCoord(qt+1)))&&me.call(this,M,O,G,ne,ir,_e,Ce,Ne))return}},Mn.prototype._convertFromCellCoord=function(M){return(M-this.padding)/this.scale},Mn.prototype._convertToCellCoord=function(M){return Math.max(0,Math.min(this.d-1,Math.floor(M*this.scale)+this.padding))},Mn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var M=this.cells,O=3+this.cells.length+1+1,G=0,ne=0;ne<this.cells.length;ne++)G+=this.cells[ne].length;var me=new Int32Array(O+G+this.keys.length+this.bboxes.length);me[0]=this.extent,me[1]=this.n,me[2]=this.padding;for(var _e=O,Ce=0;Ce<M.length;Ce++){var Ne=M[Ce];me[3+Ce]=_e,me.set(Ne,_e),_e+=Ne.length}return me[3+M.length]=_e,me.set(this.keys,_e),_e+=this.keys.length,me[3+M.length+1]=_e,me.set(this.bboxes,_e),_e+=this.bboxes.length,me.buffer};var Fn=self.ImageData,Hn=self.ImageBitmap,sa={};function Xr(M,O,G){G===void 0&&(G={}),Object.defineProperty(O,"_classRegistryKey",{value:M,writeable:!1}),sa[M]={klass:O,omit:G.omit||[],shallow:G.shallow||[]}}for(var na in Xr("Object",Object),cn.serialize=function(M,O){var G=M.toArrayBuffer();return O&&O.push(G),{buffer:G}},cn.deserialize=function(M){return new cn(M.buffer)},Xr("Grid",cn),Xr("Color",Kt),Xr("Error",Error),Xr("ResolvedImage",gr),Xr("StylePropertyFunction",_r),Xr("StyleExpression",Jt,{omit:["_evaluator"]}),Xr("ZoomDependentExpression",pr),Xr("ZoomConstantExpression",ar),Xr("CompoundExpression",Qr,{omit:["_evaluate"]}),qo)qo[na]._classRegistryKey||Xr("Expression_"+na,qo[na]);function In(M){return M&&typeof ArrayBuffer<"u"&&(M instanceof ArrayBuffer||M.constructor&&M.constructor.name==="ArrayBuffer")}function jn(M){return Hn&&M instanceof Hn}function ra(M,O){if(M==null||typeof M=="boolean"||typeof M=="number"||typeof M=="string"||M instanceof Boolean||M instanceof Number||M instanceof String||M instanceof Date||M instanceof RegExp)return M;if(In(M)||jn(M))return O&&O.push(M),M;if(ArrayBuffer.isView(M)){var G=M;return O&&O.push(G.buffer),G}if(M instanceof Fn)return O&&O.push(M.data.buffer),M;if(Array.isArray(M)){for(var ne=[],me=0,_e=M;me<_e.length;me+=1){var Ce=_e[me];ne.push(ra(Ce,O))}return ne}if(typeof M=="object"){var Ne=M.constructor,Qe=Ne._classRegistryKey;if(!Qe)throw new Error("can't serialize object of unregistered class");var ct=Ne.serialize?Ne.serialize(M,O):{};if(!Ne.serialize){for(var dt in M)if(M.hasOwnProperty(dt)&&!(sa[Qe].omit.indexOf(dt)>=0)){var Rt=M[dt];ct[dt]=sa[Qe].shallow.indexOf(dt)>=0?Rt:ra(Rt,O)}M instanceof Error&&(ct.message=M.message)}if(ct.$name)throw new Error("$name property is reserved for worker serialization logic.");return Qe!=="Object"&&(ct.$name=Qe),ct}throw new Error("can't serialize object of type "+typeof M)}function ka(M){if(M==null||typeof M=="boolean"||typeof M=="number"||typeof M=="string"||M instanceof Boolean||M instanceof Number||M instanceof String||M instanceof Date||M instanceof RegExp||In(M)||jn(M)||ArrayBuffer.isView(M)||M instanceof Fn)return M;if(Array.isArray(M))return M.map(ka);if(typeof M=="object"){var O=M.$name||"Object",G=sa[O].klass;if(!G)throw new Error("can't deserialize unregistered class "+O);if(G.deserialize)return G.deserialize(M);for(var ne=Object.create(G.prototype),me=0,_e=Object.keys(M);me<_e.length;me+=1){var Ce=_e[me];if(Ce!=="$name"){var Ne=M[Ce];ne[Ce]=sa[O].shallow.indexOf(Ce)>=0?Ne:ka(Ne)}}return ne}throw new Error("can't deserialize object of type "+typeof M)}var Pa=function(){this.first=!0};Pa.prototype.update=function(M,O){var G=Math.floor(M);return this.first?(this.first=!1,this.lastIntegerZoom=G,this.lastIntegerZoomTime=0,this.lastZoom=M,this.lastFloorZoom=G,!0):(this.lastFloorZoom>G?(this.lastIntegerZoom=G+1,this.lastIntegerZoomTime=O):this.lastFloorZoom<G&&(this.lastIntegerZoom=G,this.lastIntegerZoomTime=O),M!==this.lastZoom&&(this.lastZoom=M,this.lastFloorZoom=G,!0))};var En={"Latin-1 Supplement":function(M){return M>=128&&M<=255},Arabic:function(M){return M>=1536&&M<=1791},"Arabic Supplement":function(M){return M>=1872&&M<=1919},"Arabic Extended-A":function(M){return M>=2208&&M<=2303},"Hangul Jamo":function(M){return M>=4352&&M<=4607},"Unified Canadian Aboriginal Syllabics":function(M){return M>=5120&&M<=5759},Khmer:function(M){return M>=6016&&M<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(M){return M>=6320&&M<=6399},"General Punctuation":function(M){return M>=8192&&M<=8303},"Letterlike Symbols":function(M){return M>=8448&&M<=8527},"Number Forms":function(M){return M>=8528&&M<=8591},"Miscellaneous Technical":function(M){return M>=8960&&M<=9215},"Control Pictures":function(M){return M>=9216&&M<=9279},"Optical Character Recognition":function(M){return M>=9280&&M<=9311},"Enclosed Alphanumerics":function(M){return M>=9312&&M<=9471},"Geometric Shapes":function(M){return M>=9632&&M<=9727},"Miscellaneous Symbols":function(M){return M>=9728&&M<=9983},"Miscellaneous Symbols and Arrows":function(M){return M>=11008&&M<=11263},"CJK Radicals Supplement":function(M){return M>=11904&&M<=12031},"Kangxi Radicals":function(M){return M>=12032&&M<=12255},"Ideographic Description Characters":function(M){return M>=12272&&M<=12287},"CJK Symbols and Punctuation":function(M){return M>=12288&&M<=12351},Hiragana:function(M){return M>=12352&&M<=12447},Katakana:function(M){return M>=12448&&M<=12543},Bopomofo:function(M){return M>=12544&&M<=12591},"Hangul Compatibility Jamo":function(M){return M>=12592&&M<=12687},Kanbun:function(M){return M>=12688&&M<=12703},"Bopomofo Extended":function(M){return M>=12704&&M<=12735},"CJK Strokes":function(M){return M>=12736&&M<=12783},"Katakana Phonetic Extensions":function(M){return M>=12784&&M<=12799},"Enclosed CJK Letters and Months":function(M){return M>=12800&&M<=13055},"CJK Compatibility":function(M){return M>=13056&&M<=13311},"CJK Unified Ideographs Extension A":function(M){return M>=13312&&M<=19903},"Yijing Hexagram Symbols":function(M){return M>=19904&&M<=19967},"CJK Unified Ideographs":function(M){return M>=19968&&M<=40959},"Yi Syllables":function(M){return M>=40960&&M<=42127},"Yi Radicals":function(M){return M>=42128&&M<=42191},"Hangul Jamo Extended-A":function(M){return M>=43360&&M<=43391},"Hangul Syllables":function(M){return M>=44032&&M<=55215},"Hangul Jamo Extended-B":function(M){return M>=55216&&M<=55295},"Private Use Area":function(M){return M>=57344&&M<=63743},"CJK Compatibility Ideographs":function(M){return M>=63744&&M<=64255},"Arabic Presentation Forms-A":function(M){return M>=64336&&M<=65023},"Vertical Forms":function(M){return M>=65040&&M<=65055},"CJK Compatibility Forms":function(M){return M>=65072&&M<=65103},"Small Form Variants":function(M){return M>=65104&&M<=65135},"Arabic Presentation Forms-B":function(M){return M>=65136&&M<=65279},"Halfwidth and Fullwidth Forms":function(M){return M>=65280&&M<=65519}};function Ra(M){for(var O=0,G=M;O<G.length;O+=1)if(ga(G[O].charCodeAt(0)))return!0;return!1}function Ca(M){return!En.Arabic(M)&&!En["Arabic Supplement"](M)&&!En["Arabic Extended-A"](M)&&!En["Arabic Presentation Forms-A"](M)&&!En["Arabic Presentation Forms-B"](M)}function ga(M){return M===746||M===747||!(M<4352)&&(!!En["Bopomofo Extended"](M)||!!En.Bopomofo(M)||!(!En["CJK Compatibility Forms"](M)||M>=65097&&M<=65103)||!!En["CJK Compatibility Ideographs"](M)||!!En["CJK Compatibility"](M)||!!En["CJK Radicals Supplement"](M)||!!En["CJK Strokes"](M)||!(!En["CJK Symbols and Punctuation"](M)||M>=12296&&M<=12305||M>=12308&&M<=12319||M===12336)||!!En["CJK Unified Ideographs Extension A"](M)||!!En["CJK Unified Ideographs"](M)||!!En["Enclosed CJK Letters and Months"](M)||!!En["Hangul Compatibility Jamo"](M)||!!En["Hangul Jamo Extended-A"](M)||!!En["Hangul Jamo Extended-B"](M)||!!En["Hangul Jamo"](M)||!!En["Hangul Syllables"](M)||!!En.Hiragana(M)||!!En["Ideographic Description Characters"](M)||!!En.Kanbun(M)||!!En["Kangxi Radicals"](M)||!!En["Katakana Phonetic Extensions"](M)||!(!En.Katakana(M)||M===12540)||!(!En["Halfwidth and Fullwidth Forms"](M)||M===65288||M===65289||M===65293||M>=65306&&M<=65310||M===65339||M===65341||M===65343||M>=65371&&M<=65503||M===65507||M>=65512&&M<=65519)||!(!En["Small Form Variants"](M)||M>=65112&&M<=65118||M>=65123&&M<=65126)||!!En["Unified Canadian Aboriginal Syllabics"](M)||!!En["Unified Canadian Aboriginal Syllabics Extended"](M)||!!En["Vertical Forms"](M)||!!En["Yijing Hexagram Symbols"](M)||!!En["Yi Syllables"](M)||!!En["Yi Radicals"](M))}function Fa(M){return!(ga(M)||function(O){return!(!En["Latin-1 Supplement"](O)||O!==167&&O!==169&&O!==174&&O!==177&&O!==188&&O!==189&&O!==190&&O!==215&&O!==247)||!(!En["General Punctuation"](O)||O!==8214&&O!==8224&&O!==8225&&O!==8240&&O!==8241&&O!==8251&&O!==8252&&O!==8258&&O!==8263&&O!==8264&&O!==8265&&O!==8273)||!!En["Letterlike Symbols"](O)||!!En["Number Forms"](O)||!(!En["Miscellaneous Technical"](O)||!(O>=8960&&O<=8967||O>=8972&&O<=8991||O>=8996&&O<=9e3||O===9003||O>=9085&&O<=9114||O>=9150&&O<=9165||O===9167||O>=9169&&O<=9179||O>=9186&&O<=9215))||!(!En["Control Pictures"](O)||O===9251)||!!En["Optical Character Recognition"](O)||!!En["Enclosed Alphanumerics"](O)||!!En["Geometric Shapes"](O)||!(!En["Miscellaneous Symbols"](O)||O>=9754&&O<=9759)||!(!En["Miscellaneous Symbols and Arrows"](O)||!(O>=11026&&O<=11055||O>=11088&&O<=11097||O>=11192&&O<=11243))||!!En["CJK Symbols and Punctuation"](O)||!!En.Katakana(O)||!!En["Private Use Area"](O)||!!En["CJK Compatibility Forms"](O)||!!En["Small Form Variants"](O)||!!En["Halfwidth and Fullwidth Forms"](O)||O===8734||O===8756||O===8757||O>=9984&&O<=10087||O>=10102&&O<=10131||O===65532||O===65533}(M))}function Ea(M){return M>=1424&&M<=2303||En["Arabic Presentation Forms-A"](M)||En["Arabic Presentation Forms-B"](M)}function ti(M,O){return!(!O&&Ea(M))&&!(M>=2304&&M<=3583||M>=3840&&M<=4255||En.Khmer(M))}function aa(M){for(var O=0,G=M;O<G.length;O+=1)if(Ea(G[O].charCodeAt(0)))return!0;return!1}var Ja="deferred",ji="loading",Qo="loaded",Fo="error",bo=null,xa="unavailable",gi=null,_o=function(M){M&&typeof M=="string"&&M.indexOf("NetworkError")>-1&&(xa=Fo),bo&&bo(M)};function Ka(){ki.fire(new Be("pluginStateChange",{pluginStatus:xa,pluginURL:gi}))}var ki=new he,Gi=function(){return xa},ni=function(){if(xa!==Ja||!gi)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");xa=ji,Ka(),gi&&mt({url:gi},function(M){M?_o(M):(xa=Qo,Ka())})},mo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return xa===Qo||mo.applyArabicShaping!=null},isLoading:function(){return xa===ji},setState:function(M){xa=M.pluginStatus,gi=M.pluginURL},isParsed:function(){return mo.applyArabicShaping!=null&&mo.processBidirectionalText!=null&&mo.processStyledBidirectionalText!=null},getPluginURL:function(){return gi}},ai=function(M,O){this.zoom=M,O?(this.now=O.now,this.fadeDuration=O.fadeDuration,this.zoomHistory=O.zoomHistory,this.transition=O.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Pa,this.transition={})};ai.prototype.isSupportedScript=function(M){return function(O,G){for(var ne=0,me=O;ne<me.length;ne+=1)if(!ti(me[ne].charCodeAt(0),G))return!1;return!0}(M,mo.isLoaded())},ai.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ai.prototype.getCrossfadeParameters=function(){var M=this.zoom,O=M-Math.floor(M),G=this.crossFadingFactor();return M>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:O+(1-O)*G}:{fromScale:.5,toScale:1,t:1-(1-G)*O}};var no=function(M,O){this.property=M,this.value=O,this.expression=function(G,ne){if(je(G))return new _r(G,ne);if($t(G)){var me=br(G,ne);if(me.result==="error")throw new Error(me.value.map(function(Ce){return Ce.key+": "+Ce.message}).join(", "));return me.value}var _e=G;return typeof G=="string"&&ne.type==="color"&&(_e=Kt.parse(G)),{kind:"constant",evaluate:function(){return _e}}}(O===void 0?M.specification.default:O,M.specification)};no.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},no.prototype.possiblyEvaluate=function(M,O,G){return this.property.possiblyEvaluate(this,M,O,G)};var ps=function(M){this.property=M,this.value=new no(M,void 0)};ps.prototype.transitioned=function(M,O){return new Ys(this.property,this.value,O,a({},M.transition,this.transition),M.now)},ps.prototype.untransitioned=function(){return new Ys(this.property,this.value,null,{},0)};var os=function(M){this._properties=M,this._values=Object.create(M.defaultTransitionablePropertyValues)};os.prototype.getValue=function(M){return T(this._values[M].value.value)},os.prototype.setValue=function(M,O){this._values.hasOwnProperty(M)||(this._values[M]=new ps(this._values[M].property)),this._values[M].value=new no(this._values[M].property,O===null?void 0:T(O))},os.prototype.getTransition=function(M){return T(this._values[M].transition)},os.prototype.setTransition=function(M,O){this._values.hasOwnProperty(M)||(this._values[M]=new ps(this._values[M].property)),this._values[M].transition=T(O)||void 0},os.prototype.serialize=function(){for(var M={},O=0,G=Object.keys(this._values);O<G.length;O+=1){var ne=G[O],me=this.getValue(ne);me!==void 0&&(M[ne]=me);var _e=this.getTransition(ne);_e!==void 0&&(M[ne+"-transition"]=_e)}return M},os.prototype.transitioned=function(M,O){for(var G=new zi(this._properties),ne=0,me=Object.keys(this._values);ne<me.length;ne+=1){var _e=me[ne];G._values[_e]=this._values[_e].transitioned(M,O._values[_e])}return G},os.prototype.untransitioned=function(){for(var M=new zi(this._properties),O=0,G=Object.keys(this._values);O<G.length;O+=1){var ne=G[O];M._values[ne]=this._values[ne].untransitioned()}return M};var Ys=function(M,O,G,ne,me){this.property=M,this.value=O,this.begin=me+ne.delay||0,this.end=this.begin+ne.duration||0,M.specification.transition&&(ne.delay||ne.duration)&&(this.prior=G)};Ys.prototype.possiblyEvaluate=function(M,O,G){var ne=M.now||0,me=this.value.possiblyEvaluate(M,O,G),_e=this.prior;if(_e){if(ne>this.end)return this.prior=null,me;if(this.value.isDataDriven())return this.prior=null,me;if(ne<this.begin)return _e.possiblyEvaluate(M,O,G);var Ce=(ne-this.begin)/(this.end-this.begin);return this.property.interpolate(_e.possiblyEvaluate(M,O,G),me,function(Ne){if(Ne<=0)return 0;if(Ne>=1)return 1;var Qe=Ne*Ne,ct=Qe*Ne;return 4*(Ne<.5?ct:3*(Ne-Qe)+ct-.75)}(Ce))}return me};var zi=function(M){this._properties=M,this._values=Object.create(M.defaultTransitioningPropertyValues)};zi.prototype.possiblyEvaluate=function(M,O,G){for(var ne=new ss(this._properties),me=0,_e=Object.keys(this._values);me<_e.length;me+=1){var Ce=_e[me];ne._values[Ce]=this._values[Ce].possiblyEvaluate(M,O,G)}return ne},zi.prototype.hasTransition=function(){for(var M=0,O=Object.keys(this._values);M<O.length;M+=1){var G=O[M];if(this._values[G].prior)return!0}return!1};var Ws=function(M){this._properties=M,this._values=Object.create(M.defaultPropertyValues)};Ws.prototype.getValue=function(M){return T(this._values[M].value)},Ws.prototype.setValue=function(M,O){this._values[M]=new no(this._values[M].property,O===null?void 0:T(O))},Ws.prototype.serialize=function(){for(var M={},O=0,G=Object.keys(this._values);O<G.length;O+=1){var ne=G[O],me=this.getValue(ne);me!==void 0&&(M[ne]=me)}return M},Ws.prototype.possiblyEvaluate=function(M,O,G){for(var ne=new ss(this._properties),me=0,_e=Object.keys(this._values);me<_e.length;me+=1){var Ce=_e[me];ne._values[Ce]=this._values[Ce].possiblyEvaluate(M,O,G)}return ne};var Ri=function(M,O,G){this.property=M,this.value=O,this.parameters=G};Ri.prototype.isConstant=function(){return this.value.kind==="constant"},Ri.prototype.constantOr=function(M){return this.value.kind==="constant"?this.value.value:M},Ri.prototype.evaluate=function(M,O,G,ne){return this.property.evaluate(this.value,this.parameters,M,O,G,ne)};var ss=function(M){this._properties=M,this._values=Object.create(M.defaultPossiblyEvaluatedValues)};ss.prototype.get=function(M){return this._values[M]};var fa=function(M){this.specification=M};fa.prototype.possiblyEvaluate=function(M,O){return M.expression.evaluate(O)},fa.prototype.interpolate=function(M,O,G){var ne=Cn[this.specification.type];return ne?ne(M,O,G):M};var ba=function(M,O){this.specification=M,this.overrides=O};ba.prototype.possiblyEvaluate=function(M,O,G,ne){return M.expression.kind==="constant"||M.expression.kind==="camera"?new Ri(this,{kind:"constant",value:M.expression.evaluate(O,null,{},G,ne)},O):new Ri(this,M.expression,O)},ba.prototype.interpolate=function(M,O,G){if(M.value.kind!=="constant"||O.value.kind!=="constant")return M;if(M.value.value===void 0||O.value.value===void 0)return new Ri(this,{kind:"constant",value:void 0},M.parameters);var ne=Cn[this.specification.type];return ne?new Ri(this,{kind:"constant",value:ne(M.value.value,O.value.value,G)},M.parameters):M},ba.prototype.evaluate=function(M,O,G,ne,me,_e){return M.kind==="constant"?M.value:M.evaluate(O,G,ne,me,_e)};var Zs=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.possiblyEvaluate=function(G,ne,me,_e){if(G.value===void 0)return new Ri(this,{kind:"constant",value:void 0},ne);if(G.expression.kind==="constant"){var Ce=G.expression.evaluate(ne,null,{},me,_e),Ne=G.property.specification.type==="resolvedImage"&&typeof Ce!="string"?Ce.name:Ce,Qe=this._calculate(Ne,Ne,Ne,ne);return new Ri(this,{kind:"constant",value:Qe},ne)}if(G.expression.kind==="camera"){var ct=this._calculate(G.expression.evaluate({zoom:ne.zoom-1}),G.expression.evaluate({zoom:ne.zoom}),G.expression.evaluate({zoom:ne.zoom+1}),ne);return new Ri(this,{kind:"constant",value:ct},ne)}return new Ri(this,G.expression,ne)},O.prototype.evaluate=function(G,ne,me,_e,Ce,Ne){if(G.kind==="source"){var Qe=G.evaluate(ne,me,_e,Ce,Ne);return this._calculate(Qe,Qe,Qe,ne)}return G.kind==="composite"?this._calculate(G.evaluate({zoom:Math.floor(ne.zoom)-1},me,_e),G.evaluate({zoom:Math.floor(ne.zoom)},me,_e),G.evaluate({zoom:Math.floor(ne.zoom)+1},me,_e),ne):G.value},O.prototype._calculate=function(G,ne,me,_e){return _e.zoom>_e.zoomHistory.lastIntegerZoom?{from:G,to:ne}:{from:me,to:ne}},O.prototype.interpolate=function(G){return G},O}(ba),Xs=function(M){this.specification=M};Xs.prototype.possiblyEvaluate=function(M,O,G,ne){if(M.value!==void 0){if(M.expression.kind==="constant"){var me=M.expression.evaluate(O,null,{},G,ne);return this._calculate(me,me,me,O)}return this._calculate(M.expression.evaluate(new ai(Math.floor(O.zoom-1),O)),M.expression.evaluate(new ai(Math.floor(O.zoom),O)),M.expression.evaluate(new ai(Math.floor(O.zoom+1),O)),O)}},Xs.prototype._calculate=function(M,O,G,ne){return ne.zoom>ne.zoomHistory.lastIntegerZoom?{from:M,to:O}:{from:G,to:O}},Xs.prototype.interpolate=function(M){return M};var ls=function(M){this.specification=M};ls.prototype.possiblyEvaluate=function(M,O,G,ne){return!!M.expression.evaluate(O,null,{},G,ne)},ls.prototype.interpolate=function(){return!1};var Oo=function(M){for(var O in this.properties=M,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],M){var G=M[O];G.specification.overridable&&this.overridableProperties.push(O);var ne=this.defaultPropertyValues[O]=new no(G,void 0),me=this.defaultTransitionablePropertyValues[O]=new ps(G);this.defaultTransitioningPropertyValues[O]=me.untransitioned(),this.defaultPossiblyEvaluatedValues[O]=ne.possiblyEvaluate({})}};Xr("DataDrivenProperty",ba),Xr("DataConstantProperty",fa),Xr("CrossFadedDataDrivenProperty",Zs),Xr("CrossFadedProperty",Xs),Xr("ColorRampProperty",ls);var Zo=function(M){function O(G,ne){if(M.call(this),this.id=G.id,this.type=G.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},G.type!=="custom"&&(G=G,this.metadata=G.metadata,this.minzoom=G.minzoom,this.maxzoom=G.maxzoom,G.type!=="background"&&(this.source=G.source,this.sourceLayer=G["source-layer"],this.filter=G.filter),ne.layout&&(this._unevaluatedLayout=new Ws(ne.layout)),ne.paint)){for(var me in this._transitionablePaint=new os(ne.paint),G.paint)this.setPaintProperty(me,G.paint[me],{validate:!1});for(var _e in G.layout)this.setLayoutProperty(_e,G.layout[_e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ss(ne.paint)}}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},O.prototype.getLayoutProperty=function(G){return G==="visibility"?this.visibility:this._unevaluatedLayout.getValue(G)},O.prototype.setLayoutProperty=function(G,ne,me){if(me===void 0&&(me={}),ne!=null){var _e="layers."+this.id+".layout."+G;if(this._validate(mn,_e,G,ne,me))return}G!=="visibility"?this._unevaluatedLayout.setValue(G,ne):this.visibility=ne},O.prototype.getPaintProperty=function(G){return w(G,"-transition")?this._transitionablePaint.getTransition(G.slice(0,-11)):this._transitionablePaint.getValue(G)},O.prototype.setPaintProperty=function(G,ne,me){if(me===void 0&&(me={}),ne!=null){var _e="layers."+this.id+".paint."+G;if(this._validate(on,_e,G,ne,me))return!1}if(w(G,"-transition"))return this._transitionablePaint.setTransition(G.slice(0,-11),ne||void 0),!1;var Ce=this._transitionablePaint._values[G],Ne=Ce.property.specification["property-type"]==="cross-faded-data-driven",Qe=Ce.value.isDataDriven(),ct=Ce.value;this._transitionablePaint.setValue(G,ne),this._handleSpecialPaintPropertyUpdate(G);var dt=this._transitionablePaint._values[G].value;return dt.isDataDriven()||Qe||Ne||this._handleOverridablePaintPropertyUpdate(G,ct,dt)},O.prototype._handleSpecialPaintPropertyUpdate=function(G){},O.prototype._handleOverridablePaintPropertyUpdate=function(G,ne,me){return!1},O.prototype.isHidden=function(G){return!!(this.minzoom&&G<this.minzoom)||!!(this.maxzoom&&G>=this.maxzoom)||this.visibility==="none"},O.prototype.updateTransitions=function(G){this._transitioningPaint=this._transitionablePaint.transitioned(G,this._transitioningPaint)},O.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},O.prototype.recalculate=function(G,ne){G.getCrossfadeParameters&&(this._crossfadeParameters=G.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(G,void 0,ne)),this.paint=this._transitioningPaint.possiblyEvaluate(G,void 0,ne)},O.prototype.serialize=function(){var G={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(G.layout=G.layout||{},G.layout.visibility=this.visibility),_(G,function(ne,me){return!(ne===void 0||me==="layout"&&!Object.keys(ne).length||me==="paint"&&!Object.keys(ne).length)})},O.prototype._validate=function(G,ne,me,_e,Ce){return Ce===void 0&&(Ce={}),(!Ce||Ce.validate!==!1)&&kn(this,G.call(Zr,{key:ne,layerType:this.type,objectKey:me,value:_e,styleSpec:be,style:{glyphs:!0,sprite:!0}}))},O.prototype.is3D=function(){return!1},O.prototype.isTileClipped=function(){return!1},O.prototype.hasOffscreenPass=function(){return!1},O.prototype.resize=function(){},O.prototype.isStateDependent=function(){for(var G in this.paint._values){var ne=this.paint.get(G);if(ne instanceof Ri&&Wo(ne.property.specification)&&(ne.value.kind==="source"||ne.value.kind==="composite")&&ne.value.isStateDependent)return!0}return!1},O}(he),cl={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Ds=function(M,O){this._structArray=M,this._pos1=O*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},$a=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function ii(M,O){O===void 0&&(O=1);var G=0,ne=0;return{members:M.map(function(me){var _e,Ce=(_e=me.type,cl[_e].BYTES_PER_ELEMENT),Ne=G=_s(G,Math.max(O,Ce)),Qe=me.components||1;return ne=Math.max(ne,Ce),G+=Ce*Qe,{name:me.name,type:me.type,components:Qe,offset:Ne}}),size:_s(G,Math.max(ne,O)),alignment:O}}function _s(M,O){return Math.ceil(M/O)*O}$a.serialize=function(M,O){return M._trim(),O&&(M.isTransferred=!0,O.push(M.arrayBuffer)),{length:M.length,arrayBuffer:M.arrayBuffer}},$a.deserialize=function(M){var O=Object.create(this.prototype);return O.arrayBuffer=M.arrayBuffer,O.length=M.length,O.capacity=M.arrayBuffer.byteLength/O.bytesPerElement,O._refreshViews(),O},$a.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},$a.prototype.clear=function(){this.length=0},$a.prototype.resize=function(M){this.reserve(M),this.length=M},$a.prototype.reserve=function(M){if(M>this.capacity){this.capacity=Math.max(M,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var O=this.uint8;this._refreshViews(),O&&this.uint8.set(O)}},$a.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var ds=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ne){var me=this.length;return this.resize(me+1),this.emplace(me,G,ne)},O.prototype.emplace=function(G,ne,me){var _e=2*G;return this.int16[_e+0]=ne,this.int16[_e+1]=me,G},O}($a);ds.prototype.bytesPerElement=4,Xr("StructArrayLayout2i4",ds);var Pi=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ne,me,_e){var Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,G,ne,me,_e)},O.prototype.emplace=function(G,ne,me,_e,Ce){var Ne=4*G;return this.int16[Ne+0]=ne,this.int16[Ne+1]=me,this.int16[Ne+2]=_e,this.int16[Ne+3]=Ce,G},O}($a);Pi.prototype.bytesPerElement=8,Xr("StructArrayLayout4i8",Pi);var ws=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ne,me,_e,Ce,Ne){var Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,G,ne,me,_e,Ce,Ne)},O.prototype.emplace=function(G,ne,me,_e,Ce,Ne,Qe){var ct=6*G;return this.int16[ct+0]=ne,this.int16[ct+1]=me,this.int16[ct+2]=_e,this.int16[ct+3]=Ce,this.int16[ct+4]=Ne,this.int16[ct+5]=Qe,G},O}($a);ws.prototype.bytesPerElement=12,Xr("StructArrayLayout2i4i12",ws);var zs=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ne,me,_e,Ce,Ne){var Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,G,ne,me,_e,Ce,Ne)},O.prototype.emplace=function(G,ne,me,_e,Ce,Ne,Qe){var ct=4*G,dt=8*G;return this.int16[ct+0]=ne,this.int16[ct+1]=me,this.uint8[dt+4]=_e,this.uint8[dt+5]=Ce,this.uint8[dt+6]=Ne,this.uint8[dt+7]=Qe,G},O}($a);zs.prototype.bytesPerElement=8,Xr("StructArrayLayout2i4ub8",zs);var Ss=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ne,me,_e,Ce,Ne,Qe,ct,dt,Rt){var Wt=this.length;return this.resize(Wt+1),this.emplace(Wt,G,ne,me,_e,Ce,Ne,Qe,ct,dt,Rt)},O.prototype.emplace=function(G,ne,me,_e,Ce,Ne,Qe,ct,dt,Rt,Wt){var qt=9*G,ir=18*G;return this.uint16[qt+0]=ne,this.uint16[qt+1]=me,this.uint16[qt+2]=_e,this.uint16[qt+3]=Ce,this.uint16[qt+4]=Ne,this.uint16[qt+5]=Qe,this.uint16[qt+6]=ct,this.uint16[qt+7]=dt,this.uint8[ir+16]=Rt,this.uint8[ir+17]=Wt,G},O}($a);Ss.prototype.bytesPerElement=18,Xr("StructArrayLayout8ui2ub18",Ss);var Rs=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ne,me,_e,Ce,Ne,Qe,ct,dt,Rt,Wt,qt){var ir=this.length;return this.resize(ir+1),this.emplace(ir,G,ne,me,_e,Ce,Ne,Qe,ct,dt,Rt,Wt,qt)},O.prototype.emplace=function(G,ne,me,_e,Ce,Ne,Qe,ct,dt,Rt,Wt,qt,ir){var yr=12*G;return this.int16[yr+0]=ne,this.int16[yr+1]=me,this.int16[yr+2]=_e,this.int16[yr+3]=Ce,this.uint16[yr+4]=Ne,this.uint16[yr+5]=Qe,this.uint16[yr+6]=ct,this.uint16[yr+7]=dt,this.int16[yr+8]=Rt,this.int16[yr+9]=Wt,this.int16[yr+10]=qt,this.int16[yr+11]=ir,G},O}($a);Rs.prototype.bytesPerElement=24,Xr("StructArrayLayout4i4ui4i24",Rs);var ms=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ne,me){var _e=this.length;return this.resize(_e+1),this.emplace(_e,G,ne,me)},O.prototype.emplace=function(G,ne,me,_e){var Ce=3*G;return this.float32[Ce+0]=ne,this.float32[Ce+1]=me,this.float32[Ce+2]=_e,G},O}($a);ms.prototype.bytesPerElement=12,Xr("StructArrayLayout3f12",ms);var ul=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G){var ne=this.length;return this.resize(ne+1),this.emplace(ne,G)},O.prototype.emplace=function(G,ne){var me=1*G;return this.uint32[me+0]=ne,G},O}($a);ul.prototype.bytesPerElement=4,Xr("StructArrayLayout1ul4",ul);var _l=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ne,me,_e,Ce,Ne,Qe,ct,dt){var Rt=this.length;return this.resize(Rt+1),this.emplace(Rt,G,ne,me,_e,Ce,Ne,Qe,ct,dt)},O.prototype.emplace=function(G,ne,me,_e,Ce,Ne,Qe,ct,dt,Rt){var Wt=10*G,qt=5*G;return this.int16[Wt+0]=ne,this.int16[Wt+1]=me,this.int16[Wt+2]=_e,this.int16[Wt+3]=Ce,this.int16[Wt+4]=Ne,this.int16[Wt+5]=Qe,this.uint32[qt+3]=ct,this.uint16[Wt+8]=dt,this.uint16[Wt+9]=Rt,G},O}($a);_l.prototype.bytesPerElement=20,Xr("StructArrayLayout6i1ul2ui20",_l);var Ts=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ne,me,_e,Ce,Ne){var Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,G,ne,me,_e,Ce,Ne)},O.prototype.emplace=function(G,ne,me,_e,Ce,Ne,Qe){var ct=6*G;return this.int16[ct+0]=ne,this.int16[ct+1]=me,this.int16[ct+2]=_e,this.int16[ct+3]=Ce,this.int16[ct+4]=Ne,this.int16[ct+5]=Qe,G},O}($a);Ts.prototype.bytesPerElement=12,Xr("StructArrayLayout2i2i2i12",Ts);var fl=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ne,me,_e,Ce){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,G,ne,me,_e,Ce)},O.prototype.emplace=function(G,ne,me,_e,Ce,Ne){var Qe=4*G,ct=8*G;return this.float32[Qe+0]=ne,this.float32[Qe+1]=me,this.float32[Qe+2]=_e,this.int16[ct+6]=Ce,this.int16[ct+7]=Ne,G},O}($a);fl.prototype.bytesPerElement=16,Xr("StructArrayLayout2f1f2i16",fl);var Fs=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ne,me,_e){var Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,G,ne,me,_e)},O.prototype.emplace=function(G,ne,me,_e,Ce){var Ne=12*G,Qe=3*G;return this.uint8[Ne+0]=ne,this.uint8[Ne+1]=me,this.float32[Qe+1]=_e,this.float32[Qe+2]=Ce,G},O}($a);Fs.prototype.bytesPerElement=12,Xr("StructArrayLayout2ub2f12",Fs);var ao=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ne,me){var _e=this.length;return this.resize(_e+1),this.emplace(_e,G,ne,me)},O.prototype.emplace=function(G,ne,me,_e){var Ce=3*G;return this.uint16[Ce+0]=ne,this.uint16[Ce+1]=me,this.uint16[Ce+2]=_e,G},O}($a);ao.prototype.bytesPerElement=6,Xr("StructArrayLayout3ui6",ao);var wl=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ne,me,_e,Ce,Ne,Qe,ct,dt,Rt,Wt,qt,ir,yr,Cr,Lr,Ur){var Vr=this.length;return this.resize(Vr+1),this.emplace(Vr,G,ne,me,_e,Ce,Ne,Qe,ct,dt,Rt,Wt,qt,ir,yr,Cr,Lr,Ur)},O.prototype.emplace=function(G,ne,me,_e,Ce,Ne,Qe,ct,dt,Rt,Wt,qt,ir,yr,Cr,Lr,Ur,Vr){var Wr=24*G,hn=12*G,xn=48*G;return this.int16[Wr+0]=ne,this.int16[Wr+1]=me,this.uint16[Wr+2]=_e,this.uint16[Wr+3]=Ce,this.uint32[hn+2]=Ne,this.uint32[hn+3]=Qe,this.uint32[hn+4]=ct,this.uint16[Wr+10]=dt,this.uint16[Wr+11]=Rt,this.uint16[Wr+12]=Wt,this.float32[hn+7]=qt,this.float32[hn+8]=ir,this.uint8[xn+36]=yr,this.uint8[xn+37]=Cr,this.uint8[xn+38]=Lr,this.uint32[hn+10]=Ur,this.int16[Wr+22]=Vr,G},O}($a);wl.prototype.bytesPerElement=48,Xr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",wl);var Tl=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ne,me,_e,Ce,Ne,Qe,ct,dt,Rt,Wt,qt,ir,yr,Cr,Lr,Ur,Vr,Wr,hn,xn,Nn,Bn,Wn,la,ca,$n,ma){var pa=this.length;return this.resize(pa+1),this.emplace(pa,G,ne,me,_e,Ce,Ne,Qe,ct,dt,Rt,Wt,qt,ir,yr,Cr,Lr,Ur,Vr,Wr,hn,xn,Nn,Bn,Wn,la,ca,$n,ma)},O.prototype.emplace=function(G,ne,me,_e,Ce,Ne,Qe,ct,dt,Rt,Wt,qt,ir,yr,Cr,Lr,Ur,Vr,Wr,hn,xn,Nn,Bn,Wn,la,ca,$n,ma,pa){var ua=34*G,Qa=17*G;return this.int16[ua+0]=ne,this.int16[ua+1]=me,this.int16[ua+2]=_e,this.int16[ua+3]=Ce,this.int16[ua+4]=Ne,this.int16[ua+5]=Qe,this.int16[ua+6]=ct,this.int16[ua+7]=dt,this.uint16[ua+8]=Rt,this.uint16[ua+9]=Wt,this.uint16[ua+10]=qt,this.uint16[ua+11]=ir,this.uint16[ua+12]=yr,this.uint16[ua+13]=Cr,this.uint16[ua+14]=Lr,this.uint16[ua+15]=Ur,this.uint16[ua+16]=Vr,this.uint16[ua+17]=Wr,this.uint16[ua+18]=hn,this.uint16[ua+19]=xn,this.uint16[ua+20]=Nn,this.uint16[ua+21]=Bn,this.uint16[ua+22]=Wn,this.uint32[Qa+12]=la,this.float32[Qa+13]=ca,this.float32[Qa+14]=$n,this.float32[Qa+15]=ma,this.float32[Qa+16]=pa,G},O}($a);Tl.prototype.bytesPerElement=68,Xr("StructArrayLayout8i15ui1ul4f68",Tl);var ce=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G){var ne=this.length;return this.resize(ne+1),this.emplace(ne,G)},O.prototype.emplace=function(G,ne){var me=1*G;return this.float32[me+0]=ne,G},O}($a);ce.prototype.bytesPerElement=4,Xr("StructArrayLayout1f4",ce);var C=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ne,me){var _e=this.length;return this.resize(_e+1),this.emplace(_e,G,ne,me)},O.prototype.emplace=function(G,ne,me,_e){var Ce=3*G;return this.int16[Ce+0]=ne,this.int16[Ce+1]=me,this.int16[Ce+2]=_e,G},O}($a);C.prototype.bytesPerElement=6,Xr("StructArrayLayout3i6",C);var R=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ne,me){var _e=this.length;return this.resize(_e+1),this.emplace(_e,G,ne,me)},O.prototype.emplace=function(G,ne,me,_e){var Ce=2*G,Ne=4*G;return this.uint32[Ce+0]=ne,this.uint16[Ne+2]=me,this.uint16[Ne+3]=_e,G},O}($a);R.prototype.bytesPerElement=8,Xr("StructArrayLayout1ul2ui8",R);var F=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ne){var me=this.length;return this.resize(me+1),this.emplace(me,G,ne)},O.prototype.emplace=function(G,ne,me){var _e=2*G;return this.uint16[_e+0]=ne,this.uint16[_e+1]=me,G},O}($a);F.prototype.bytesPerElement=4,Xr("StructArrayLayout2ui4",F);var q=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G){var ne=this.length;return this.resize(ne+1),this.emplace(ne,G)},O.prototype.emplace=function(G,ne){var me=1*G;return this.uint16[me+0]=ne,G},O}($a);q.prototype.bytesPerElement=2,Xr("StructArrayLayout1ui2",q);var ae=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ne){var me=this.length;return this.resize(me+1),this.emplace(me,G,ne)},O.prototype.emplace=function(G,ne,me){var _e=2*G;return this.float32[_e+0]=ne,this.float32[_e+1]=me,G},O}($a);ae.prototype.bytesPerElement=8,Xr("StructArrayLayout2f8",ae);var ue=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(G,ne,me,_e){var Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,G,ne,me,_e)},O.prototype.emplace=function(G,ne,me,_e,Ce){var Ne=4*G;return this.float32[Ne+0]=ne,this.float32[Ne+1]=me,this.float32[Ne+2]=_e,this.float32[Ne+3]=Ce,G},O}($a);ue.prototype.bytesPerElement=16,Xr("StructArrayLayout4f16",ue);var xe=function(M){function O(){M.apply(this,arguments)}M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O;var G={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return G.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},G.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},G.x1.get=function(){return this._structArray.int16[this._pos2+2]},G.y1.get=function(){return this._structArray.int16[this._pos2+3]},G.x2.get=function(){return this._structArray.int16[this._pos2+4]},G.y2.get=function(){return this._structArray.int16[this._pos2+5]},G.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},G.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},G.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},G.anchorPoint.get=function(){return new n(this.anchorPointX,this.anchorPointY)},Object.defineProperties(O.prototype,G),O}(Ds);xe.prototype.size=20;var ke=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.get=function(G){return new xe(this,G)},O}(_l);Xr("CollisionBoxArray",ke);var Le=function(M){function O(){M.apply(this,arguments)}M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O;var G={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return G.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},G.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},G.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},G.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},G.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},G.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},G.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},G.segment.get=function(){return this._structArray.uint16[this._pos2+10]},G.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},G.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},G.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},G.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},G.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},G.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},G.placedOrientation.set=function(ne){this._structArray.uint8[this._pos1+37]=ne},G.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},G.hidden.set=function(ne){this._structArray.uint8[this._pos1+38]=ne},G.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},G.crossTileID.set=function(ne){this._structArray.uint32[this._pos4+10]=ne},G.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(O.prototype,G),O}(Ds);Le.prototype.size=48;var Ve=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.get=function(G){return new Le(this,G)},O}(wl);Xr("PlacedSymbolArray",Ve);var Je=function(M){function O(){M.apply(this,arguments)}M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O;var G={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return G.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},G.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},G.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},G.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},G.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},G.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},G.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},G.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},G.key.get=function(){return this._structArray.uint16[this._pos2+8]},G.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},G.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},G.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},G.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},G.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},G.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},G.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},G.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},G.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},G.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},G.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},G.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},G.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},G.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},G.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},G.crossTileID.set=function(ne){this._structArray.uint32[this._pos4+12]=ne},G.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},G.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},G.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},G.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(O.prototype,G),O}(Ds);Je.prototype.size=68;var at=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.get=function(G){return new Je(this,G)},O}(Tl);Xr("SymbolInstanceArray",at);var _t=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.getoffsetX=function(G){return this.float32[1*G+0]},O}(ce);Xr("GlyphOffsetArray",_t);var Et=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.getx=function(G){return this.int16[3*G+0]},O.prototype.gety=function(G){return this.int16[3*G+1]},O.prototype.gettileUnitDistanceFromAnchor=function(G){return this.int16[3*G+2]},O}(C);Xr("SymbolLineVertexArray",Et);var kt=function(M){function O(){M.apply(this,arguments)}M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O;var G={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return G.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},G.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},G.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(O.prototype,G),O}(Ds);kt.prototype.size=8;var At=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.get=function(G){return new kt(this,G)},O}(R);Xr("FeatureIndexArray",At);var xt=ii([{name:"a_pos",components:2,type:"Int16"}],4).members,zt=function(M){M===void 0&&(M=[]),this.segments=M};function Ot(M,O){return 256*(M=h(Math.floor(M),0,255))+(O=h(Math.floor(O),0,255))}zt.prototype.prepareSegment=function(M,O,G,ne){var me=this.segments[this.segments.length-1];return M>zt.MAX_VERTEX_ARRAY_LENGTH&&A("Max vertices per segment is "+zt.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+M),(!me||me.vertexLength+M>zt.MAX_VERTEX_ARRAY_LENGTH||me.sortKey!==ne)&&(me={vertexOffset:O.length,primitiveOffset:G.length,vertexLength:0,primitiveLength:0},ne!==void 0&&(me.sortKey=ne),this.segments.push(me)),me},zt.prototype.get=function(){return this.segments},zt.prototype.destroy=function(){for(var M=0,O=this.segments;M<O.length;M+=1){var G=O[M];for(var ne in G.vaos)G.vaos[ne].destroy()}},zt.simpleSegment=function(M,O,G,ne){return new zt([{vertexOffset:M,primitiveOffset:O,vertexLength:G,primitiveLength:ne,vaos:{},sortKey:0}])},zt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Xr("SegmentVector",zt);var jt=ii([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),rr=t(function(M){M.exports=function(O,G){var ne,me,_e,Ce,Ne,Qe,ct,dt;for(ne=3&O.length,me=O.length-ne,_e=G,Ne=3432918353,Qe=461845907,dt=0;dt<me;)ct=255&O.charCodeAt(dt)|(255&O.charCodeAt(++dt))<<8|(255&O.charCodeAt(++dt))<<16|(255&O.charCodeAt(++dt))<<24,++dt,_e=27492+(65535&(Ce=5*(65535&(_e=(_e^=ct=(65535&(ct=(ct=(65535&ct)*Ne+(((ct>>>16)*Ne&65535)<<16)&4294967295)<<15|ct>>>17))*Qe+(((ct>>>16)*Qe&65535)<<16)&4294967295)<<13|_e>>>19))+((5*(_e>>>16)&65535)<<16)&4294967295))+((58964+(Ce>>>16)&65535)<<16);switch(ct=0,ne){case 3:ct^=(255&O.charCodeAt(dt+2))<<16;case 2:ct^=(255&O.charCodeAt(dt+1))<<8;case 1:_e^=ct=(65535&(ct=(ct=(65535&(ct^=255&O.charCodeAt(dt)))*Ne+(((ct>>>16)*Ne&65535)<<16)&4294967295)<<15|ct>>>17))*Qe+(((ct>>>16)*Qe&65535)<<16)&4294967295}return _e^=O.length,_e=2246822507*(65535&(_e^=_e>>>16))+((2246822507*(_e>>>16)&65535)<<16)&4294967295,_e=3266489909*(65535&(_e^=_e>>>13))+((3266489909*(_e>>>16)&65535)<<16)&4294967295,(_e^=_e>>>16)>>>0}}),dr=t(function(M){M.exports=function(O,G){for(var ne,me=O.length,_e=G^me,Ce=0;me>=4;)ne=1540483477*(65535&(ne=255&O.charCodeAt(Ce)|(255&O.charCodeAt(++Ce))<<8|(255&O.charCodeAt(++Ce))<<16|(255&O.charCodeAt(++Ce))<<24))+((1540483477*(ne>>>16)&65535)<<16),_e=1540483477*(65535&_e)+((1540483477*(_e>>>16)&65535)<<16)^(ne=1540483477*(65535&(ne^=ne>>>24))+((1540483477*(ne>>>16)&65535)<<16)),me-=4,++Ce;switch(me){case 3:_e^=(255&O.charCodeAt(Ce+2))<<16;case 2:_e^=(255&O.charCodeAt(Ce+1))<<8;case 1:_e=1540483477*(65535&(_e^=255&O.charCodeAt(Ce)))+((1540483477*(_e>>>16)&65535)<<16)}return _e=1540483477*(65535&(_e^=_e>>>13))+((1540483477*(_e>>>16)&65535)<<16),(_e^=_e>>>15)>>>0}}),Sr=rr,kr=rr,Kr=dr;Sr.murmur3=kr,Sr.murmur2=Kr;var Jr=function(){this.ids=[],this.positions=[],this.indexed=!1};Jr.prototype.add=function(M,O,G,ne){this.ids.push(sn(M)),this.positions.push(O,G,ne)},Jr.prototype.getPositions=function(M){for(var O=sn(M),G=0,ne=this.ids.length-1;G<ne;){var me=G+ne>>1;this.ids[me]>=O?ne=me:G=me+1}for(var _e=[];this.ids[G]===O;){var Ce=this.positions[3*G],Ne=this.positions[3*G+1],Qe=this.positions[3*G+2];_e.push({index:Ce,start:Ne,end:Qe}),G++}return _e},Jr.serialize=function(M,O){var G=new Float64Array(M.ids),ne=new Uint32Array(M.positions);return function me(_e,Ce,Ne,Qe){for(;Ne<Qe;){for(var ct=_e[Ne+Qe>>1],dt=Ne-1,Rt=Qe+1;;){do dt++;while(_e[dt]<ct);do Rt--;while(_e[Rt]>ct);if(dt>=Rt)break;Un(_e,dt,Rt),Un(Ce,3*dt,3*Rt),Un(Ce,3*dt+1,3*Rt+1),Un(Ce,3*dt+2,3*Rt+2)}Rt-Ne<Qe-Rt?(me(_e,Ce,Ne,Rt),Ne=Rt+1):(me(_e,Ce,Rt+1,Qe),Qe=Rt)}}(G,ne,0,G.length-1),O&&O.push(G.buffer,ne.buffer),{ids:G,positions:ne}},Jr.deserialize=function(M){var O=new Jr;return O.ids=M.ids,O.positions=M.positions,O.indexed=!0,O};var pn=Math.pow(2,53)-1;function sn(M){var O=+M;return!isNaN(O)&&O<=pn?O:Sr(String(M))}function Un(M,O,G){var ne=M[O];M[O]=M[G],M[G]=ne}Xr("FeaturePositionMap",Jr);var Xn=function(M,O){this.gl=M.gl,this.location=O},ha=function(M){function O(G,ne){M.call(this,G,ne),this.current=0}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.set=function(G){this.current!==G&&(this.current=G,this.gl.uniform1i(this.location,G))},O}(Xn),Gr=function(M){function O(G,ne){M.call(this,G,ne),this.current=0}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.set=function(G){this.current!==G&&(this.current=G,this.gl.uniform1f(this.location,G))},O}(Xn),An=function(M){function O(G,ne){M.call(this,G,ne),this.current=[0,0]}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.set=function(G){G[0]===this.current[0]&&G[1]===this.current[1]||(this.current=G,this.gl.uniform2f(this.location,G[0],G[1]))},O}(Xn),Jn=function(M){function O(G,ne){M.call(this,G,ne),this.current=[0,0,0]}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.set=function(G){G[0]===this.current[0]&&G[1]===this.current[1]&&G[2]===this.current[2]||(this.current=G,this.gl.uniform3f(this.location,G[0],G[1],G[2]))},O}(Xn),Yn=function(M){function O(G,ne){M.call(this,G,ne),this.current=[0,0,0,0]}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.set=function(G){G[0]===this.current[0]&&G[1]===this.current[1]&&G[2]===this.current[2]&&G[3]===this.current[3]||(this.current=G,this.gl.uniform4f(this.location,G[0],G[1],G[2],G[3]))},O}(Xn),ia=function(M){function O(G,ne){M.call(this,G,ne),this.current=Kt.transparent}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.set=function(G){G.r===this.current.r&&G.g===this.current.g&&G.b===this.current.b&&G.a===this.current.a||(this.current=G,this.gl.uniform4f(this.location,G.r,G.g,G.b,G.a))},O}(Xn),da=new Float32Array(16),La=function(M){function O(G,ne){M.call(this,G,ne),this.current=da}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.set=function(G){if(G[12]!==this.current[12]||G[0]!==this.current[0])return this.current=G,void this.gl.uniformMatrix4fv(this.location,!1,G);for(var ne=1;ne<16;ne++)if(G[ne]!==this.current[ne]){this.current=G,this.gl.uniformMatrix4fv(this.location,!1,G);break}},O}(Xn);function ea(M){return[Ot(255*M.r,255*M.g),Ot(255*M.b,255*M.a)]}var _a=function(M,O,G){this.value=M,this.uniformNames=O.map(function(ne){return"u_"+ne}),this.type=G};_a.prototype.setUniform=function(M,O,G){M.set(G.constantOr(this.value))},_a.prototype.getBinding=function(M,O,G){return this.type==="color"?new ia(M,O):new Gr(M,O)};var ya=function(M,O){this.uniformNames=O.map(function(G){return"u_"+G}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};ya.prototype.setConstantPatternPositions=function(M,O){this.pixelRatioFrom=O.pixelRatio,this.pixelRatioTo=M.pixelRatio,this.patternFrom=O.tlbr,this.patternTo=M.tlbr},ya.prototype.setUniform=function(M,O,G,ne){var me=ne==="u_pattern_to"?this.patternTo:ne==="u_pattern_from"?this.patternFrom:ne==="u_pixel_ratio_to"?this.pixelRatioTo:ne==="u_pixel_ratio_from"?this.pixelRatioFrom:null;me&&M.set(me)},ya.prototype.getBinding=function(M,O,G){return G.substr(0,9)==="u_pattern"?new Yn(M,O):new Gr(M,O)};var Ia=function(M,O,G,ne){this.expression=M,this.type=G,this.maxValue=0,this.paintVertexAttributes=O.map(function(me){return{name:"a_"+me,type:"Float32",components:G==="color"?2:1,offset:0}}),this.paintVertexArray=new ne};Ia.prototype.populatePaintArray=function(M,O,G,ne,me){var _e=this.paintVertexArray.length,Ce=this.expression.evaluate(new ai(0),O,{},ne,[],me);this.paintVertexArray.resize(M),this._setPaintValue(_e,M,Ce)},Ia.prototype.updatePaintArray=function(M,O,G,ne){var me=this.expression.evaluate({zoom:0},G,ne);this._setPaintValue(M,O,me)},Ia.prototype._setPaintValue=function(M,O,G){if(this.type==="color")for(var ne=ea(G),me=M;me<O;me++)this.paintVertexArray.emplace(me,ne[0],ne[1]);else{for(var _e=M;_e<O;_e++)this.paintVertexArray.emplace(_e,G);this.maxValue=Math.max(this.maxValue,Math.abs(G))}},Ia.prototype.upload=function(M){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=M.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ia.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var wa=function(M,O,G,ne,me,_e){this.expression=M,this.uniformNames=O.map(function(Ce){return"u_"+Ce+"_t"}),this.type=G,this.useIntegerZoom=ne,this.zoom=me,this.maxValue=0,this.paintVertexAttributes=O.map(function(Ce){return{name:"a_"+Ce,type:"Float32",components:G==="color"?4:2,offset:0}}),this.paintVertexArray=new _e};wa.prototype.populatePaintArray=function(M,O,G,ne,me){var _e=this.expression.evaluate(new ai(this.zoom),O,{},ne,[],me),Ce=this.expression.evaluate(new ai(this.zoom+1),O,{},ne,[],me),Ne=this.paintVertexArray.length;this.paintVertexArray.resize(M),this._setPaintValue(Ne,M,_e,Ce)},wa.prototype.updatePaintArray=function(M,O,G,ne){var me=this.expression.evaluate({zoom:this.zoom},G,ne),_e=this.expression.evaluate({zoom:this.zoom+1},G,ne);this._setPaintValue(M,O,me,_e)},wa.prototype._setPaintValue=function(M,O,G,ne){if(this.type==="color")for(var me=ea(G),_e=ea(ne),Ce=M;Ce<O;Ce++)this.paintVertexArray.emplace(Ce,me[0],me[1],_e[0],_e[1]);else{for(var Ne=M;Ne<O;Ne++)this.paintVertexArray.emplace(Ne,G,ne);this.maxValue=Math.max(this.maxValue,Math.abs(G),Math.abs(ne))}},wa.prototype.upload=function(M){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=M.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},wa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},wa.prototype.setUniform=function(M,O){var G=this.useIntegerZoom?Math.floor(O.zoom):O.zoom,ne=h(this.expression.interpolationFactor(G,this.zoom,this.zoom+1),0,1);M.set(ne)},wa.prototype.getBinding=function(M,O,G){return new Gr(M,O)};var Oa=function(M,O,G,ne,me,_e){this.expression=M,this.type=O,this.useIntegerZoom=G,this.zoom=ne,this.layerId=_e,this.zoomInPaintVertexArray=new me,this.zoomOutPaintVertexArray=new me};Oa.prototype.populatePaintArray=function(M,O,G){var ne=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(M),this.zoomOutPaintVertexArray.resize(M),this._setPaintValues(ne,M,O.patterns&&O.patterns[this.layerId],G)},Oa.prototype.updatePaintArray=function(M,O,G,ne,me){this._setPaintValues(M,O,G.patterns&&G.patterns[this.layerId],me)},Oa.prototype._setPaintValues=function(M,O,G,ne){if(ne&&G){var me=G.min,_e=G.mid,Ce=G.max,Ne=ne[me],Qe=ne[_e],ct=ne[Ce];if(Ne&&Qe&&ct)for(var dt=M;dt<O;dt++)this.zoomInPaintVertexArray.emplace(dt,Qe.tl[0],Qe.tl[1],Qe.br[0],Qe.br[1],Ne.tl[0],Ne.tl[1],Ne.br[0],Ne.br[1],Qe.pixelRatio,Ne.pixelRatio),this.zoomOutPaintVertexArray.emplace(dt,Qe.tl[0],Qe.tl[1],Qe.br[0],Qe.br[1],ct.tl[0],ct.tl[1],ct.br[0],ct.br[1],Qe.pixelRatio,ct.pixelRatio)}},Oa.prototype.upload=function(M){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=M.createVertexBuffer(this.zoomInPaintVertexArray,jt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=M.createVertexBuffer(this.zoomOutPaintVertexArray,jt.members,this.expression.isStateDependent))},Oa.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ha=function(M,O,G,ne){this.binders={},this.layoutAttributes=ne,this._buffers=[];var me=[];for(var _e in M.paint._values)if(G(_e)){var Ce=M.paint.get(_e);if(Ce instanceof Ri&&Wo(Ce.property.specification)){var Ne=Ii(_e,M.type),Qe=Ce.value,ct=Ce.property.specification.type,dt=Ce.property.useIntegerZoom,Rt=Ce.property.specification["property-type"],Wt=Rt==="cross-faded"||Rt==="cross-faded-data-driven";if(Qe.kind==="constant")this.binders[_e]=Wt?new ya(Qe.value,Ne):new _a(Qe.value,Ne,ct),me.push("/u_"+_e);else if(Qe.kind==="source"||Wt){var qt=Oi(_e,ct,"source");this.binders[_e]=Wt?new Oa(Qe,ct,dt,O,qt,M.id):new Ia(Qe,Ne,ct,qt),me.push("/a_"+_e)}else{var ir=Oi(_e,ct,"composite");this.binders[_e]=new wa(Qe,Ne,ct,dt,O,ir),me.push("/z_"+_e)}}}this.cacheKey=me.sort().join("")};Ha.prototype.getMaxValue=function(M){var O=this.binders[M];return O instanceof Ia||O instanceof wa?O.maxValue:0},Ha.prototype.populatePaintArrays=function(M,O,G,ne,me){for(var _e in this.binders){var Ce=this.binders[_e];(Ce instanceof Ia||Ce instanceof wa||Ce instanceof Oa)&&Ce.populatePaintArray(M,O,G,ne,me)}},Ha.prototype.setConstantPatternPositions=function(M,O){for(var G in this.binders){var ne=this.binders[G];ne instanceof ya&&ne.setConstantPatternPositions(M,O)}},Ha.prototype.updatePaintArrays=function(M,O,G,ne,me){var _e=!1;for(var Ce in M)for(var Ne=0,Qe=O.getPositions(Ce);Ne<Qe.length;Ne+=1){var ct=Qe[Ne],dt=G.feature(ct.index);for(var Rt in this.binders){var Wt=this.binders[Rt];if((Wt instanceof Ia||Wt instanceof wa||Wt instanceof Oa)&&Wt.expression.isStateDependent===!0){var qt=ne.paint.get(Rt);Wt.expression=qt.value,Wt.updatePaintArray(ct.start,ct.end,dt,M[Ce],me),_e=!0}}}return _e},Ha.prototype.defines=function(){var M=[];for(var O in this.binders){var G=this.binders[O];(G instanceof _a||G instanceof ya)&&M.push.apply(M,G.uniformNames.map(function(ne){return"#define HAS_UNIFORM_"+ne}))}return M},Ha.prototype.getPaintVertexBuffers=function(){return this._buffers},Ha.prototype.getUniforms=function(M,O){var G=[];for(var ne in this.binders){var me=this.binders[ne];if(me instanceof _a||me instanceof ya||me instanceof wa)for(var _e=0,Ce=me.uniformNames;_e<Ce.length;_e+=1){var Ne=Ce[_e];if(O[Ne]){var Qe=me.getBinding(M,O[Ne],Ne);G.push({name:Ne,property:ne,binding:Qe})}}}return G},Ha.prototype.setUniforms=function(M,O,G,ne){for(var me=0,_e=O;me<_e.length;me+=1){var Ce=_e[me],Ne=Ce.name,Qe=Ce.property,ct=Ce.binding;this.binders[Qe].setUniform(ct,ne,G.get(Qe),Ne)}},Ha.prototype.updatePaintBuffers=function(M){for(var O in this._buffers=[],this.binders){var G=this.binders[O];if(M&&G instanceof Oa){var ne=M.fromScale===2?G.zoomInPaintVertexBuffer:G.zoomOutPaintVertexBuffer;ne&&this._buffers.push(ne)}else(G instanceof Ia||G instanceof wa)&&G.paintVertexBuffer&&this._buffers.push(G.paintVertexBuffer)}},Ha.prototype.upload=function(M){for(var O in this.binders){var G=this.binders[O];(G instanceof Ia||G instanceof wa||G instanceof Oa)&&G.upload(M)}this.updatePaintBuffers()},Ha.prototype.destroy=function(){for(var M in this.binders){var O=this.binders[M];(O instanceof Ia||O instanceof wa||O instanceof Oa)&&O.destroy()}};var fi=function(M,O,G,ne){ne===void 0&&(ne=function(){return!0}),this.programConfigurations={};for(var me=0,_e=O;me<_e.length;me+=1){var Ce=_e[me];this.programConfigurations[Ce.id]=new Ha(Ce,G,ne,M)}this.needsUpload=!1,this._featureMap=new Jr,this._bufferOffset=0};function Ii(M,O){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[M]||[M.replace(O+"-","").replace(/-/g,"_")]}function Oi(M,O,G){var ne={color:{source:ae,composite:ue},number:{source:ce,composite:ae}},me=function(_e){return{"line-pattern":{source:Ss,composite:Ss},"fill-pattern":{source:Ss,composite:Ss},"fill-extrusion-pattern":{source:Ss,composite:Ss}}[_e]}(M);return me&&me[G]||ne[O][G]}fi.prototype.populatePaintArrays=function(M,O,G,ne,me,_e){for(var Ce in this.programConfigurations)this.programConfigurations[Ce].populatePaintArrays(M,O,ne,me,_e);O.id!==void 0&&this._featureMap.add(O.id,G,this._bufferOffset,M),this._bufferOffset=M,this.needsUpload=!0},fi.prototype.updatePaintArrays=function(M,O,G,ne){for(var me=0,_e=G;me<_e.length;me+=1){var Ce=_e[me];this.needsUpload=this.programConfigurations[Ce.id].updatePaintArrays(M,this._featureMap,O,Ce,ne)||this.needsUpload}},fi.prototype.get=function(M){return this.programConfigurations[M]},fi.prototype.upload=function(M){if(this.needsUpload){for(var O in this.programConfigurations)this.programConfigurations[O].upload(M);this.needsUpload=!1}},fi.prototype.destroy=function(){for(var M in this.programConfigurations)this.programConfigurations[M].destroy()},Xr("ConstantBinder",_a),Xr("CrossFadedConstantBinder",ya),Xr("SourceExpressionBinder",Ia),Xr("CrossFadedCompositeBinder",Oa),Xr("CompositeExpressionBinder",wa),Xr("ProgramConfiguration",Ha,{omit:["_buffers"]}),Xr("ProgramConfigurationSet",fi);var ui,Mi=(ui=15,{min:-1*Math.pow(2,ui-1),max:Math.pow(2,ui-1)-1});function vi(M){for(var O=8192/M.extent,G=M.loadGeometry(),ne=0;ne<G.length;ne++)for(var me=G[ne],_e=0;_e<me.length;_e++){var Ce=me[_e];Ce.x=Math.round(Ce.x*O),Ce.y=Math.round(Ce.y*O),(Ce.x<Mi.min||Ce.x>Mi.max||Ce.y<Mi.min||Ce.y>Mi.max)&&(A("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Ce.x=h(Ce.x,Mi.min,Mi.max),Ce.y=h(Ce.y,Mi.min,Mi.max))}return G}function wo(M,O,G,ne,me){M.emplaceBack(2*O+(ne+1)/2,2*G+(me+1)/2)}var Yi=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=M.index,this.hasPattern=!1,this.layoutVertexArray=new ds,this.indexArray=new ao,this.segments=new zt,this.programConfigurations=new fi(xt,M.layers,M.zoom),this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};function Bo(M,O){for(var G=0;G<M.length;G++)if(cs(O,M[G]))return!0;for(var ne=0;ne<O.length;ne++)if(cs(M,O[ne]))return!0;return!!hl(M,O)}function Es(M,O,G){return!!cs(M,O)||!!To(O,M,G)}function Js(M,O){if(M.length===1)return Ml(O,M[0]);for(var G=0;G<O.length;G++)for(var ne=O[G],me=0;me<ne.length;me++)if(cs(M,ne[me]))return!0;for(var _e=0;_e<M.length;_e++)if(Ml(O,M[_e]))return!0;for(var Ce=0;Ce<O.length;Ce++)if(hl(M,O[Ce]))return!0;return!1}function kl(M,O,G){if(M.length>1){if(hl(M,O))return!0;for(var ne=0;ne<O.length;ne++)if(To(O[ne],M,G))return!0}for(var me=0;me<M.length;me++)if(To(M[me],O,G))return!0;return!1}function hl(M,O){if(M.length===0||O.length===0)return!1;for(var G=0;G<M.length-1;G++)for(var ne=M[G],me=M[G+1],_e=0;_e<O.length-1;_e++)if(pl(ne,me,O[_e],O[_e+1]))return!0;return!1}function pl(M,O,G,ne){return I(M,G,ne)!==I(O,G,ne)&&I(M,O,G)!==I(M,O,ne)}function To(M,O,G){var ne=G*G;if(O.length===1)return M.distSqr(O[0])<ne;for(var me=1;me<O.length;me++)if(rl(M,O[me-1],O[me])<ne)return!0;return!1}function rl(M,O,G){var ne=O.distSqr(G);if(ne===0)return M.distSqr(O);var me=((M.x-O.x)*(G.x-O.x)+(M.y-O.y)*(G.y-O.y))/ne;return me<0?M.distSqr(O):me>1?M.distSqr(G):M.distSqr(G.sub(O)._mult(me)._add(O))}function Ml(M,O){for(var G,ne,me,_e=!1,Ce=0;Ce<M.length;Ce++)for(var Ne=0,Qe=(G=M[Ce]).length-1;Ne<G.length;Qe=Ne++)ne=G[Ne],me=G[Qe],ne.y>O.y!=me.y>O.y&&O.x<(me.x-ne.x)*(O.y-ne.y)/(me.y-ne.y)+ne.x&&(_e=!_e);return _e}function cs(M,O){for(var G=!1,ne=0,me=M.length-1;ne<M.length;me=ne++){var _e=M[ne],Ce=M[me];_e.y>O.y!=Ce.y>O.y&&O.x<(Ce.x-_e.x)*(O.y-_e.y)/(Ce.y-_e.y)+_e.x&&(G=!G)}return G}function Al(M,O,G){var ne=G[0],me=G[2];if(M.x<ne.x&&O.x<ne.x||M.x>me.x&&O.x>me.x||M.y<ne.y&&O.y<ne.y||M.y>me.y&&O.y>me.y)return!1;var _e=I(M,O,G[0]);return _e!==I(M,O,G[1])||_e!==I(M,O,G[2])||_e!==I(M,O,G[3])}function Ai(M,O,G){var ne=O.paint.get(M).value;return ne.kind==="constant"?ne.value:G.programConfigurations.get(O.id).getMaxValue(M)}function Do(M){return Math.sqrt(M[0]*M[0]+M[1]*M[1])}function zo(M,O,G,ne,me){if(!O[0]&&!O[1])return M;var _e=n.convert(O)._mult(me);G==="viewport"&&_e._rotate(-ne);for(var Ce=[],Ne=0;Ne<M.length;Ne++){var Qe=M[Ne];Ce.push(Qe.sub(_e))}return Ce}Yi.prototype.populate=function(M,O,G){var ne=this.layers[0],me=[],_e=null;ne.type==="circle"&&(_e=ne.layout.get("circle-sort-key"));for(var Ce=0,Ne=M;Ce<Ne.length;Ce+=1){var Qe=Ne[Ce],ct=Qe.feature,dt=Qe.id,Rt=Qe.index,Wt=Qe.sourceLayerIndex,qt=this.layers[0]._featureFilter.needGeometry,ir={type:ct.type,id:dt,properties:ct.properties,geometry:qt?vi(ct):[]};if(this.layers[0]._featureFilter.filter(new ai(this.zoom),ir,G)){qt||(ir.geometry=vi(ct));var yr=_e?_e.evaluate(ir,{},G):void 0,Cr={id:dt,properties:ct.properties,type:ct.type,sourceLayerIndex:Wt,index:Rt,geometry:ir.geometry,patterns:{},sortKey:yr};me.push(Cr)}}_e&&me.sort(function(Wn,la){return Wn.sortKey-la.sortKey});for(var Lr=0,Ur=me;Lr<Ur.length;Lr+=1){var Vr=Ur[Lr],Wr=Vr,hn=Wr.geometry,xn=Wr.index,Nn=Wr.sourceLayerIndex,Bn=M[xn].feature;this.addFeature(Vr,hn,xn,G),O.featureIndex.insert(Bn,hn,xn,Nn,this.index)}},Yi.prototype.update=function(M,O,G){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,O,this.stateDependentLayers,G)},Yi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Yi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Yi.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,xt),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},Yi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Yi.prototype.addFeature=function(M,O,G,ne){for(var me=0,_e=O;me<_e.length;me+=1)for(var Ce=0,Ne=_e[me];Ce<Ne.length;Ce+=1){var Qe=Ne[Ce],ct=Qe.x,dt=Qe.y;if(!(ct<0||ct>=8192||dt<0||dt>=8192)){var Rt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,M.sortKey),Wt=Rt.vertexLength;wo(this.layoutVertexArray,ct,dt,-1,-1),wo(this.layoutVertexArray,ct,dt,1,-1),wo(this.layoutVertexArray,ct,dt,1,1),wo(this.layoutVertexArray,ct,dt,-1,1),this.indexArray.emplaceBack(Wt,Wt+1,Wt+2),this.indexArray.emplaceBack(Wt,Wt+3,Wt+2),Rt.vertexLength+=4,Rt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,G,{},ne)},Xr("CircleBucket",Yi,{omit:["layers"]});var zl=new Oo({"circle-sort-key":new ba(be.layout_circle["circle-sort-key"])}),Au={paint:new Oo({"circle-radius":new ba(be.paint_circle["circle-radius"]),"circle-color":new ba(be.paint_circle["circle-color"]),"circle-blur":new ba(be.paint_circle["circle-blur"]),"circle-opacity":new ba(be.paint_circle["circle-opacity"]),"circle-translate":new fa(be.paint_circle["circle-translate"]),"circle-translate-anchor":new fa(be.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new fa(be.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new fa(be.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ba(be.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ba(be.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ba(be.paint_circle["circle-stroke-opacity"])}),layout:zl},es=typeof Float32Array<"u"?Float32Array:Array;function uc(M){return M[0]=1,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=1,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=1,M[11]=0,M[12]=0,M[13]=0,M[14]=0,M[15]=1,M}function Sl(M,O,G){var ne=O[0],me=O[1],_e=O[2],Ce=O[3],Ne=O[4],Qe=O[5],ct=O[6],dt=O[7],Rt=O[8],Wt=O[9],qt=O[10],ir=O[11],yr=O[12],Cr=O[13],Lr=O[14],Ur=O[15],Vr=G[0],Wr=G[1],hn=G[2],xn=G[3];return M[0]=Vr*ne+Wr*Ne+hn*Rt+xn*yr,M[1]=Vr*me+Wr*Qe+hn*Wt+xn*Cr,M[2]=Vr*_e+Wr*ct+hn*qt+xn*Lr,M[3]=Vr*Ce+Wr*dt+hn*ir+xn*Ur,Vr=G[4],Wr=G[5],hn=G[6],xn=G[7],M[4]=Vr*ne+Wr*Ne+hn*Rt+xn*yr,M[5]=Vr*me+Wr*Qe+hn*Wt+xn*Cr,M[6]=Vr*_e+Wr*ct+hn*qt+xn*Lr,M[7]=Vr*Ce+Wr*dt+hn*ir+xn*Ur,Vr=G[8],Wr=G[9],hn=G[10],xn=G[11],M[8]=Vr*ne+Wr*Ne+hn*Rt+xn*yr,M[9]=Vr*me+Wr*Qe+hn*Wt+xn*Cr,M[10]=Vr*_e+Wr*ct+hn*qt+xn*Lr,M[11]=Vr*Ce+Wr*dt+hn*ir+xn*Ur,Vr=G[12],Wr=G[13],hn=G[14],xn=G[15],M[12]=Vr*ne+Wr*Ne+hn*Rt+xn*yr,M[13]=Vr*me+Wr*Qe+hn*Wt+xn*Cr,M[14]=Vr*_e+Wr*ct+hn*qt+xn*Lr,M[15]=Vr*Ce+Wr*dt+hn*ir+xn*Ur,M}Math.hypot||(Math.hypot=function(){for(var M=arguments,O=0,G=arguments.length;G--;)O+=M[G]*M[G];return Math.sqrt(O)});var Su=Sl,nl,Eu=function(M,O,G){return M[0]=O[0]-G[0],M[1]=O[1]-G[1],M[2]=O[2]-G[2],M};nl=new es(3),es!=Float32Array&&(nl[0]=0,nl[1]=0,nl[2]=0);function Rl(M,O,G){var ne=O[0],me=O[1],_e=O[2],Ce=O[3];return M[0]=G[0]*ne+G[4]*me+G[8]*_e+G[12]*Ce,M[1]=G[1]*ne+G[5]*me+G[9]*_e+G[13]*Ce,M[2]=G[2]*ne+G[6]*me+G[10]*_e+G[14]*Ce,M[3]=G[3]*ne+G[7]*me+G[11]*_e+G[15]*Ce,M}(function(){(function(){var M=new es(4);return es!=Float32Array&&(M[0]=0,M[1]=0,M[2]=0,M[3]=0),M})()})();var fc=function(M){var O=M[0],G=M[1];return O*O+G*G},ip=(function(){(function(){var M=new es(2);return es!=Float32Array&&(M[0]=0,M[1]=0),M})()}(),function(M){function O(G){M.call(this,G,Au)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.createBucket=function(G){return new Yi(G)},O.prototype.queryRadius=function(G){var ne=G;return Ai("circle-radius",this,ne)+Ai("circle-stroke-width",this,ne)+Do(this.paint.get("circle-translate"))},O.prototype.queryIntersectsFeature=function(G,ne,me,_e,Ce,Ne,Qe,ct){for(var dt=zo(G,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Ne.angle,Qe),Rt=this.paint.get("circle-radius").evaluate(ne,me)+this.paint.get("circle-stroke-width").evaluate(ne,me),Wt=this.paint.get("circle-pitch-alignment")==="map",qt=Wt?dt:function(Nn,Bn){return Nn.map(function(Wn){return vf(Wn,Bn)})}(dt,ct),ir=Wt?Rt*Qe:Rt,yr=0,Cr=_e;yr<Cr.length;yr+=1)for(var Lr=0,Ur=Cr[yr];Lr<Ur.length;Lr+=1){var Vr=Ur[Lr],Wr=Wt?Vr:vf(Vr,ct),hn=ir,xn=Rl([],[Vr.x,Vr.y,0,1],ct);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?hn*=xn[3]/Ne.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(hn*=Ne.cameraToCenterDistance/xn[3]),Es(qt,Wr,hn))return!0}return!1},O}(Zo));function vf(M,O){var G=Rl([],[M.x,M.y,0,1],O);return new n(G[0]/G[3],G[1]/G[3])}var yf=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O}(Yi);function Lu(M,O,G,ne){var me=O.width,_e=O.height;if(ne){if(ne instanceof Uint8ClampedArray)ne=new Uint8Array(ne.buffer);else if(ne.length!==me*_e*G)throw new RangeError("mismatched image size")}else ne=new Uint8Array(me*_e*G);return M.width=me,M.height=_e,M.data=ne,M}function xf(M,O,G){var ne=O.width,me=O.height;if(ne!==M.width||me!==M.height){var _e=Lu({},{width:ne,height:me},G);Cu(M,_e,{x:0,y:0},{x:0,y:0},{width:Math.min(M.width,ne),height:Math.min(M.height,me)},G),M.width=ne,M.height=me,M.data=_e.data}}function Cu(M,O,G,ne,me,_e){if(me.width===0||me.height===0)return O;if(me.width>M.width||me.height>M.height||G.x>M.width-me.width||G.y>M.height-me.height)throw new RangeError("out of range source coordinates for image copy");if(me.width>O.width||me.height>O.height||ne.x>O.width-me.width||ne.y>O.height-me.height)throw new RangeError("out of range destination coordinates for image copy");for(var Ce=M.data,Ne=O.data,Qe=0;Qe<me.height;Qe++)for(var ct=((G.y+Qe)*M.width+G.x)*_e,dt=((ne.y+Qe)*O.width+ne.x)*_e,Rt=0;Rt<me.width*_e;Rt++)Ne[dt+Rt]=Ce[ct+Rt];return O}Xr("HeatmapBucket",yf,{omit:["layers"]});var El=function(M,O){Lu(this,M,1,O)};El.prototype.resize=function(M){xf(this,M,1)},El.prototype.clone=function(){return new El({width:this.width,height:this.height},new Uint8Array(this.data))},El.copy=function(M,O,G,ne,me){Cu(M,O,G,ne,me,1)};var ts=function(M,O){Lu(this,M,4,O)};ts.prototype.resize=function(M){xf(this,M,4)},ts.prototype.replace=function(M,O){O?this.data.set(M):M instanceof Uint8ClampedArray?this.data=new Uint8Array(M.buffer):this.data=M},ts.prototype.clone=function(){return new ts({width:this.width,height:this.height},new Uint8Array(this.data))},ts.copy=function(M,O,G,ne,me){Cu(M,O,G,ne,me,4)},Xr("AlphaImage",El),Xr("RGBAImage",ts);var op={paint:new Oo({"heatmap-radius":new ba(be.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ba(be.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new fa(be.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ls(be.paint_heatmap["heatmap-color"]),"heatmap-opacity":new fa(be.paint_heatmap["heatmap-opacity"])})};function bf(M,O){for(var G=new Uint8Array(1024),ne={},me=0,_e=0;me<256;me++,_e+=4){ne[O]=me/255;var Ce=M.evaluate(ne);G[_e+0]=Math.floor(255*Ce.r/Ce.a),G[_e+1]=Math.floor(255*Ce.g/Ce.a),G[_e+2]=Math.floor(255*Ce.b/Ce.a),G[_e+3]=Math.floor(255*Ce.a)}return new ts({width:256,height:1},G)}var sp=function(M){function O(G){M.call(this,G,op),this._updateColorRamp()}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.createBucket=function(G){return new yf(G)},O.prototype._handleSpecialPaintPropertyUpdate=function(G){G==="heatmap-color"&&this._updateColorRamp()},O.prototype._updateColorRamp=function(){var G=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=bf(G,"heatmapDensity"),this.colorRampTexture=null},O.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},O.prototype.queryRadius=function(){return 0},O.prototype.queryIntersectsFeature=function(){return!1},O.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},O}(Zo),lp={paint:new Oo({"hillshade-illumination-direction":new fa(be.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new fa(be.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new fa(be.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new fa(be.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new fa(be.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new fa(be.paint_hillshade["hillshade-accent-color"])})},cp=function(M){function O(G){M.call(this,G,lp)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},O}(Zo),_f=ii([{name:"a_pos",components:2,type:"Int16"}],4).members,Pu=Rc,up=Rc;function Rc(M,O,G){G=G||2;var ne,me,_e,Ce,Ne,Qe,ct,dt=O&&O.length,Rt=dt?O[0]*G:M.length,Wt=wf(M,0,Rt,G,!0),qt=[];if(!Wt||Wt.next===Wt.prev)return qt;if(dt&&(Wt=function(yr,Cr,Lr,Ur){var Vr,Wr,hn,xn,Nn,Bn=[];for(Vr=0,Wr=Cr.length;Vr<Wr;Vr++)hn=Cr[Vr]*Ur,xn=Vr<Wr-1?Cr[Vr+1]*Ur:yr.length,(Nn=wf(yr,hn,xn,Ur,!1))===Nn.next&&(Nn.steiner=!0),Bn.push(yp(Nn));for(Bn.sort(mp),Vr=0;Vr<Bn.length;Vr++)gp(Bn[Vr],Lr),Lr=dl(Lr,Lr.next);return Lr}(M,O,Wt,G)),M.length>80*G){ne=_e=M[0],me=Ce=M[1];for(var ir=G;ir<Rt;ir+=G)(Ne=M[ir])<ne&&(ne=Ne),(Qe=M[ir+1])<me&&(me=Qe),Ne>_e&&(_e=Ne),Qe>Ce&&(Ce=Qe);ct=(ct=Math.max(_e-ne,Ce-me))!==0?1/ct:0}return hc(Wt,qt,G,ne,me,ct),qt}function wf(M,O,G,ne,me){var _e,Ce;if(me===Du(M,O,G,ne)>0)for(_e=O;_e<G;_e+=ne)Ce=Mf(_e,M[_e],M[_e+1],Ce);else for(_e=G-ne;_e>=O;_e-=ne)Ce=Mf(_e,M[_e],M[_e+1],Ce);return Ce&&Fc(Ce,Ce.next)&&(dc(Ce),Ce=Ce.next),Ce}function dl(M,O){if(!M)return M;O||(O=M);var G,ne=M;do if(G=!1,ne.steiner||!Fc(ne,ne.next)&&io(ne.prev,ne,ne.next)!==0)ne=ne.next;else{if(dc(ne),(ne=O=ne.prev)===ne.next)break;G=!0}while(G||ne!==O);return O}function hc(M,O,G,ne,me,_e,Ce){if(M){!Ce&&_e&&function(dt,Rt,Wt,qt){var ir=dt;do ir.z===null&&(ir.z=Iu(ir.x,ir.y,Rt,Wt,qt)),ir.prevZ=ir.prev,ir.nextZ=ir.next,ir=ir.next;while(ir!==dt);ir.prevZ.nextZ=null,ir.prevZ=null,function(yr){var Cr,Lr,Ur,Vr,Wr,hn,xn,Nn,Bn=1;do{for(Lr=yr,yr=null,Wr=null,hn=0;Lr;){for(hn++,Ur=Lr,xn=0,Cr=0;Cr<Bn&&(xn++,Ur=Ur.nextZ);Cr++);for(Nn=Bn;xn>0||Nn>0&&Ur;)xn!==0&&(Nn===0||!Ur||Lr.z<=Ur.z)?(Vr=Lr,Lr=Lr.nextZ,xn--):(Vr=Ur,Ur=Ur.nextZ,Nn--),Wr?Wr.nextZ=Vr:yr=Vr,Vr.prevZ=Wr,Wr=Vr;Lr=Ur}Wr.nextZ=null,Bn*=2}while(hn>1)}(ir)}(M,ne,me,_e);for(var Ne,Qe,ct=M;M.prev!==M.next;)if(Ne=M.prev,Qe=M.next,_e?hp(M,ne,me,_e):fp(M))O.push(Ne.i/G),O.push(M.i/G),O.push(Qe.i/G),dc(M),M=Qe.next,ct=Qe.next;else if((M=Qe)===ct){Ce?Ce===1?hc(M=pp(dl(M),O,G),O,G,ne,me,_e,2):Ce===2&&dp(M,O,G,ne,me,_e):hc(dl(M),O,G,ne,me,_e,1);break}}}function fp(M){var O=M.prev,G=M,ne=M.next;if(io(O,G,ne)>=0)return!1;for(var me=M.next.next;me!==M.prev;){if(Fl(O.x,O.y,G.x,G.y,ne.x,ne.y,me.x,me.y)&&io(me.prev,me,me.next)>=0)return!1;me=me.next}return!0}function hp(M,O,G,ne){var me=M.prev,_e=M,Ce=M.next;if(io(me,_e,Ce)>=0)return!1;for(var Ne=me.x<_e.x?me.x<Ce.x?me.x:Ce.x:_e.x<Ce.x?_e.x:Ce.x,Qe=me.y<_e.y?me.y<Ce.y?me.y:Ce.y:_e.y<Ce.y?_e.y:Ce.y,ct=me.x>_e.x?me.x>Ce.x?me.x:Ce.x:_e.x>Ce.x?_e.x:Ce.x,dt=me.y>_e.y?me.y>Ce.y?me.y:Ce.y:_e.y>Ce.y?_e.y:Ce.y,Rt=Iu(Ne,Qe,O,G,ne),Wt=Iu(ct,dt,O,G,ne),qt=M.prevZ,ir=M.nextZ;qt&&qt.z>=Rt&&ir&&ir.z<=Wt;){if(qt!==M.prev&&qt!==M.next&&Fl(me.x,me.y,_e.x,_e.y,Ce.x,Ce.y,qt.x,qt.y)&&io(qt.prev,qt,qt.next)>=0||(qt=qt.prevZ,ir!==M.prev&&ir!==M.next&&Fl(me.x,me.y,_e.x,_e.y,Ce.x,Ce.y,ir.x,ir.y)&&io(ir.prev,ir,ir.next)>=0))return!1;ir=ir.nextZ}for(;qt&&qt.z>=Rt;){if(qt!==M.prev&&qt!==M.next&&Fl(me.x,me.y,_e.x,_e.y,Ce.x,Ce.y,qt.x,qt.y)&&io(qt.prev,qt,qt.next)>=0)return!1;qt=qt.prevZ}for(;ir&&ir.z<=Wt;){if(ir!==M.prev&&ir!==M.next&&Fl(me.x,me.y,_e.x,_e.y,Ce.x,Ce.y,ir.x,ir.y)&&io(ir.prev,ir,ir.next)>=0)return!1;ir=ir.nextZ}return!0}function pp(M,O,G){var ne=M;do{var me=ne.prev,_e=ne.next.next;!Fc(me,_e)&&Tf(me,ne,ne.next,_e)&&pc(me,_e)&&pc(_e,me)&&(O.push(me.i/G),O.push(ne.i/G),O.push(_e.i/G),dc(ne),dc(ne.next),ne=M=_e),ne=ne.next}while(ne!==M);return dl(ne)}function dp(M,O,G,ne,me,_e){var Ce=M;do{for(var Ne=Ce.next.next;Ne!==Ce.prev;){if(Ce.i!==Ne.i&&xp(Ce,Ne)){var Qe=kf(Ce,Ne);return Ce=dl(Ce,Ce.next),Qe=dl(Qe,Qe.next),hc(Ce,O,G,ne,me,_e),void hc(Qe,O,G,ne,me,_e)}Ne=Ne.next}Ce=Ce.next}while(Ce!==M)}function mp(M,O){return M.x-O.x}function gp(M,O){if(O=function(ne,me){var _e,Ce=me,Ne=ne.x,Qe=ne.y,ct=-1/0;do{if(Qe<=Ce.y&&Qe>=Ce.next.y&&Ce.next.y!==Ce.y){var dt=Ce.x+(Qe-Ce.y)*(Ce.next.x-Ce.x)/(Ce.next.y-Ce.y);if(dt<=Ne&&dt>ct){if(ct=dt,dt===Ne){if(Qe===Ce.y)return Ce;if(Qe===Ce.next.y)return Ce.next}_e=Ce.x<Ce.next.x?Ce:Ce.next}}Ce=Ce.next}while(Ce!==me);if(!_e)return null;if(Ne===ct)return _e;var Rt,Wt=_e,qt=_e.x,ir=_e.y,yr=1/0;Ce=_e;do Ne>=Ce.x&&Ce.x>=qt&&Ne!==Ce.x&&Fl(Qe<ir?Ne:ct,Qe,qt,ir,Qe<ir?ct:Ne,Qe,Ce.x,Ce.y)&&(Rt=Math.abs(Qe-Ce.y)/(Ne-Ce.x),pc(Ce,ne)&&(Rt<yr||Rt===yr&&(Ce.x>_e.x||Ce.x===_e.x&&vp(_e,Ce)))&&(_e=Ce,yr=Rt)),Ce=Ce.next;while(Ce!==Wt);return _e}(M,O)){var G=kf(O,M);dl(O,O.next),dl(G,G.next)}}function vp(M,O){return io(M.prev,M,O.prev)<0&&io(O.next,M,M.next)<0}function Iu(M,O,G,ne,me){return(M=1431655765&((M=858993459&((M=252645135&((M=16711935&((M=32767*(M-G)*me)|M<<8))|M<<4))|M<<2))|M<<1))|(O=1431655765&((O=858993459&((O=252645135&((O=16711935&((O=32767*(O-ne)*me)|O<<8))|O<<4))|O<<2))|O<<1))<<1}function yp(M){var O=M,G=M;do(O.x<G.x||O.x===G.x&&O.y<G.y)&&(G=O),O=O.next;while(O!==M);return G}function Fl(M,O,G,ne,me,_e,Ce,Ne){return(me-Ce)*(O-Ne)-(M-Ce)*(_e-Ne)>=0&&(M-Ce)*(ne-Ne)-(G-Ce)*(O-Ne)>=0&&(G-Ce)*(_e-Ne)-(me-Ce)*(ne-Ne)>=0}function xp(M,O){return M.next.i!==O.i&&M.prev.i!==O.i&&!function(G,ne){var me=G;do{if(me.i!==G.i&&me.next.i!==G.i&&me.i!==ne.i&&me.next.i!==ne.i&&Tf(me,me.next,G,ne))return!0;me=me.next}while(me!==G);return!1}(M,O)&&(pc(M,O)&&pc(O,M)&&function(G,ne){var me=G,_e=!1,Ce=(G.x+ne.x)/2,Ne=(G.y+ne.y)/2;do me.y>Ne!=me.next.y>Ne&&me.next.y!==me.y&&Ce<(me.next.x-me.x)*(Ne-me.y)/(me.next.y-me.y)+me.x&&(_e=!_e),me=me.next;while(me!==G);return _e}(M,O)&&(io(M.prev,M,O.prev)||io(M,O.prev,O))||Fc(M,O)&&io(M.prev,M,M.next)>0&&io(O.prev,O,O.next)>0)}function io(M,O,G){return(O.y-M.y)*(G.x-O.x)-(O.x-M.x)*(G.y-O.y)}function Fc(M,O){return M.x===O.x&&M.y===O.y}function Tf(M,O,G,ne){var me=Nc(io(M,O,G)),_e=Nc(io(M,O,ne)),Ce=Nc(io(G,ne,M)),Ne=Nc(io(G,ne,O));return me!==_e&&Ce!==Ne||!(me!==0||!Bc(M,G,O))||!(_e!==0||!Bc(M,ne,O))||!(Ce!==0||!Bc(G,M,ne))||!(Ne!==0||!Bc(G,O,ne))}function Bc(M,O,G){return O.x<=Math.max(M.x,G.x)&&O.x>=Math.min(M.x,G.x)&&O.y<=Math.max(M.y,G.y)&&O.y>=Math.min(M.y,G.y)}function Nc(M){return M>0?1:M<0?-1:0}function pc(M,O){return io(M.prev,M,M.next)<0?io(M,O,M.next)>=0&&io(M,M.prev,O)>=0:io(M,O,M.prev)<0||io(M,M.next,O)<0}function kf(M,O){var G=new Ou(M.i,M.x,M.y),ne=new Ou(O.i,O.x,O.y),me=M.next,_e=O.prev;return M.next=O,O.prev=M,G.next=me,me.prev=G,ne.next=G,G.prev=ne,_e.next=ne,ne.prev=_e,ne}function Mf(M,O,G,ne){var me=new Ou(M,O,G);return ne?(me.next=ne.next,me.prev=ne,ne.next.prev=me,ne.next=me):(me.prev=me,me.next=me),me}function dc(M){M.next.prev=M.prev,M.prev.next=M.next,M.prevZ&&(M.prevZ.nextZ=M.nextZ),M.nextZ&&(M.nextZ.prevZ=M.prevZ)}function Ou(M,O,G){this.i=M,this.x=O,this.y=G,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Du(M,O,G,ne){for(var me=0,_e=O,Ce=G-ne;_e<G;_e+=ne)me+=(M[Ce]-M[_e])*(M[_e+1]+M[Ce+1]),Ce=_e;return me}function bp(M,O,G,ne,me){(function _e(Ce,Ne,Qe,ct,dt){for(;ct>Qe;){if(ct-Qe>600){var Rt=ct-Qe+1,Wt=Ne-Qe+1,qt=Math.log(Rt),ir=.5*Math.exp(2*qt/3),yr=.5*Math.sqrt(qt*ir*(Rt-ir)/Rt)*(Wt-Rt/2<0?-1:1),Cr=Math.max(Qe,Math.floor(Ne-Wt*ir/Rt+yr)),Lr=Math.min(ct,Math.floor(Ne+(Rt-Wt)*ir/Rt+yr));_e(Ce,Ne,Cr,Lr,dt)}var Ur=Ce[Ne],Vr=Qe,Wr=ct;for(mc(Ce,Qe,Ne),dt(Ce[ct],Ur)>0&&mc(Ce,Qe,ct);Vr<Wr;){for(mc(Ce,Vr,Wr),Vr++,Wr--;dt(Ce[Vr],Ur)<0;)Vr++;for(;dt(Ce[Wr],Ur)>0;)Wr--}dt(Ce[Qe],Ur)===0?mc(Ce,Qe,Wr):(Wr++,mc(Ce,Wr,ct)),Wr<=Ne&&(Qe=Wr+1),Ne<=Wr&&(ct=Wr-1)}})(M,O,G||0,ne||M.length-1,me||_p)}function mc(M,O,G){var ne=M[O];M[O]=M[G],M[G]=ne}function _p(M,O){return M<O?-1:M>O?1:0}function zu(M,O){var G=M.length;if(G<=1)return[M];for(var ne,me,_e=[],Ce=0;Ce<G;Ce++){var Ne=P(M[Ce]);Ne!==0&&(M[Ce].area=Math.abs(Ne),me===void 0&&(me=Ne<0),me===Ne<0?(ne&&_e.push(ne),ne=[M[Ce]]):ne.push(M[Ce]))}if(ne&&_e.push(ne),O>1)for(var Qe=0;Qe<_e.length;Qe++)_e[Qe].length<=O||(bp(_e[Qe],O,1,_e[Qe].length-1,wp),_e[Qe]=_e[Qe].slice(0,O));return _e}function wp(M,O){return O.area-M.area}function Ru(M,O,G){for(var ne=G.patternDependencies,me=!1,_e=0,Ce=O;_e<Ce.length;_e+=1){var Ne=Ce[_e].paint.get(M+"-pattern");Ne.isConstant()||(me=!0);var Qe=Ne.constantOr(null);Qe&&(me=!0,ne[Qe.to]=!0,ne[Qe.from]=!0)}return me}function Fu(M,O,G,ne,me){for(var _e=me.patternDependencies,Ce=0,Ne=O;Ce<Ne.length;Ce+=1){var Qe=Ne[Ce],ct=Qe.paint.get(M+"-pattern").value;if(ct.kind!=="constant"){var dt=ct.evaluate({zoom:ne-1},G,{},me.availableImages),Rt=ct.evaluate({zoom:ne},G,{},me.availableImages),Wt=ct.evaluate({zoom:ne+1},G,{},me.availableImages);dt=dt&&dt.name?dt.name:dt,Rt=Rt&&Rt.name?Rt.name:Rt,Wt=Wt&&Wt.name?Wt.name:Wt,_e[dt]=!0,_e[Rt]=!0,_e[Wt]=!0,G.patterns[Qe.id]={min:dt,mid:Rt,max:Wt}}}return G}Rc.deviation=function(M,O,G,ne){var me=O&&O.length,_e=me?O[0]*G:M.length,Ce=Math.abs(Du(M,0,_e,G));if(me)for(var Ne=0,Qe=O.length;Ne<Qe;Ne++){var ct=O[Ne]*G,dt=Ne<Qe-1?O[Ne+1]*G:M.length;Ce-=Math.abs(Du(M,ct,dt,G))}var Rt=0;for(Ne=0;Ne<ne.length;Ne+=3){var Wt=ne[Ne]*G,qt=ne[Ne+1]*G,ir=ne[Ne+2]*G;Rt+=Math.abs((M[Wt]-M[ir])*(M[qt+1]-M[Wt+1])-(M[Wt]-M[qt])*(M[ir+1]-M[Wt+1]))}return Ce===0&&Rt===0?0:Math.abs((Rt-Ce)/Ce)},Rc.flatten=function(M){for(var O=M[0][0].length,G={vertices:[],holes:[],dimensions:O},ne=0,me=0;me<M.length;me++){for(var _e=0;_e<M[me].length;_e++)for(var Ce=0;Ce<O;Ce++)G.vertices.push(M[me][_e][Ce]);me>0&&(ne+=M[me-1].length,G.holes.push(ne))}return G},Pu.default=up;var Bs=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=M.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ds,this.indexArray=new ao,this.indexArray2=new F,this.programConfigurations=new fi(_f,M.layers,M.zoom),this.segments=new zt,this.segments2=new zt,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};Bs.prototype.populate=function(M,O,G){this.hasPattern=Ru("fill",this.layers,O);for(var ne=this.layers[0].layout.get("fill-sort-key"),me=[],_e=0,Ce=M;_e<Ce.length;_e+=1){var Ne=Ce[_e],Qe=Ne.feature,ct=Ne.id,dt=Ne.index,Rt=Ne.sourceLayerIndex,Wt=this.layers[0]._featureFilter.needGeometry,qt={type:Qe.type,id:ct,properties:Qe.properties,geometry:Wt?vi(Qe):[]};if(this.layers[0]._featureFilter.filter(new ai(this.zoom),qt,G)){Wt||(qt.geometry=vi(Qe));var ir=ne?ne.evaluate(qt,{},G,O.availableImages):void 0,yr={id:ct,properties:Qe.properties,type:Qe.type,sourceLayerIndex:Rt,index:dt,geometry:qt.geometry,patterns:{},sortKey:ir};me.push(yr)}}ne&&me.sort(function(Wn,la){return Wn.sortKey-la.sortKey});for(var Cr=0,Lr=me;Cr<Lr.length;Cr+=1){var Ur=Lr[Cr],Vr=Ur,Wr=Vr.geometry,hn=Vr.index,xn=Vr.sourceLayerIndex;if(this.hasPattern){var Nn=Fu("fill",this.layers,Ur,this.zoom,O);this.patternFeatures.push(Nn)}else this.addFeature(Ur,Wr,hn,G,{});var Bn=M[hn].feature;O.featureIndex.insert(Bn,Wr,hn,xn,this.index)}},Bs.prototype.update=function(M,O,G){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,O,this.stateDependentLayers,G)},Bs.prototype.addFeatures=function(M,O,G){for(var ne=0,me=this.patternFeatures;ne<me.length;ne+=1){var _e=me[ne];this.addFeature(_e,_e.geometry,_e.index,O,G)}},Bs.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Bs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Bs.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,_f),this.indexBuffer=M.createIndexBuffer(this.indexArray),this.indexBuffer2=M.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(M),this.uploaded=!0},Bs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Bs.prototype.addFeature=function(M,O,G,ne,me){for(var _e=0,Ce=zu(O,500);_e<Ce.length;_e+=1){for(var Ne=Ce[_e],Qe=0,ct=0,dt=Ne;ct<dt.length;ct+=1)Qe+=dt[ct].length;for(var Rt=this.segments.prepareSegment(Qe,this.layoutVertexArray,this.indexArray),Wt=Rt.vertexLength,qt=[],ir=[],yr=0,Cr=Ne;yr<Cr.length;yr+=1){var Lr=Cr[yr];if(Lr.length!==0){Lr!==Ne[0]&&ir.push(qt.length/2);var Ur=this.segments2.prepareSegment(Lr.length,this.layoutVertexArray,this.indexArray2),Vr=Ur.vertexLength;this.layoutVertexArray.emplaceBack(Lr[0].x,Lr[0].y),this.indexArray2.emplaceBack(Vr+Lr.length-1,Vr),qt.push(Lr[0].x),qt.push(Lr[0].y);for(var Wr=1;Wr<Lr.length;Wr++)this.layoutVertexArray.emplaceBack(Lr[Wr].x,Lr[Wr].y),this.indexArray2.emplaceBack(Vr+Wr-1,Vr+Wr),qt.push(Lr[Wr].x),qt.push(Lr[Wr].y);Ur.vertexLength+=Lr.length,Ur.primitiveLength+=Lr.length}}for(var hn=Pu(qt,ir),xn=0;xn<hn.length;xn+=3)this.indexArray.emplaceBack(Wt+hn[xn],Wt+hn[xn+1],Wt+hn[xn+2]);Rt.vertexLength+=Qe,Rt.primitiveLength+=hn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,G,me,ne)},Xr("FillBucket",Bs,{omit:["layers","patternFeatures"]});var Tp=new Oo({"fill-sort-key":new ba(be.layout_fill["fill-sort-key"])}),kp={paint:new Oo({"fill-antialias":new fa(be.paint_fill["fill-antialias"]),"fill-opacity":new ba(be.paint_fill["fill-opacity"]),"fill-color":new ba(be.paint_fill["fill-color"]),"fill-outline-color":new ba(be.paint_fill["fill-outline-color"]),"fill-translate":new fa(be.paint_fill["fill-translate"]),"fill-translate-anchor":new fa(be.paint_fill["fill-translate-anchor"]),"fill-pattern":new Zs(be.paint_fill["fill-pattern"])}),layout:Tp},Mp=function(M){function O(G){M.call(this,G,kp)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.recalculate=function(G,ne){M.prototype.recalculate.call(this,G,ne);var me=this.paint._values["fill-outline-color"];me.value.kind==="constant"&&me.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},O.prototype.createBucket=function(G){return new Bs(G)},O.prototype.queryRadius=function(){return Do(this.paint.get("fill-translate"))},O.prototype.queryIntersectsFeature=function(G,ne,me,_e,Ce,Ne,Qe){return Js(zo(G,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Ne.angle,Qe),_e)},O.prototype.isTileClipped=function(){return!0},O}(Zo),Af=ii([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Sf=Bl;function Bl(M,O,G,ne,me){this.properties={},this.extent=G,this.type=0,this._pbf=M,this._geometry=-1,this._keys=ne,this._values=me,M.readFields(Ap,this,O)}function Ap(M,O,G){M==1?O.id=G.readVarint():M==2?function(ne,me){for(var _e=ne.readVarint()+ne.pos;ne.pos<_e;){var Ce=me._keys[ne.readVarint()],Ne=me._values[ne.readVarint()];me.properties[Ce]=Ne}}(G,O):M==3?O.type=G.readVarint():M==4&&(O._geometry=G.pos)}function Sp(M){for(var O,G,ne=0,me=0,_e=M.length,Ce=_e-1;me<_e;Ce=me++)O=M[me],ne+=((G=M[Ce]).x-O.x)*(O.y+G.y);return ne}Bl.types=["Unknown","Point","LineString","Polygon"],Bl.prototype.loadGeometry=function(){var M=this._pbf;M.pos=this._geometry;for(var O,G=M.readVarint()+M.pos,ne=1,me=0,_e=0,Ce=0,Ne=[];M.pos<G;){if(me<=0){var Qe=M.readVarint();ne=7&Qe,me=Qe>>3}if(me--,ne===1||ne===2)_e+=M.readSVarint(),Ce+=M.readSVarint(),ne===1&&(O&&Ne.push(O),O=[]),O.push(new n(_e,Ce));else{if(ne!==7)throw new Error("unknown command "+ne);O&&O.push(O[0].clone())}}return O&&Ne.push(O),Ne},Bl.prototype.bbox=function(){var M=this._pbf;M.pos=this._geometry;for(var O=M.readVarint()+M.pos,G=1,ne=0,me=0,_e=0,Ce=1/0,Ne=-1/0,Qe=1/0,ct=-1/0;M.pos<O;){if(ne<=0){var dt=M.readVarint();G=7&dt,ne=dt>>3}if(ne--,G===1||G===2)(me+=M.readSVarint())<Ce&&(Ce=me),me>Ne&&(Ne=me),(_e+=M.readSVarint())<Qe&&(Qe=_e),_e>ct&&(ct=_e);else if(G!==7)throw new Error("unknown command "+G)}return[Ce,Qe,Ne,ct]},Bl.prototype.toGeoJSON=function(M,O,G){var ne,me,_e=this.extent*Math.pow(2,G),Ce=this.extent*M,Ne=this.extent*O,Qe=this.loadGeometry(),ct=Bl.types[this.type];function dt(qt){for(var ir=0;ir<qt.length;ir++){var yr=qt[ir],Cr=180-360*(yr.y+Ne)/_e;qt[ir]=[360*(yr.x+Ce)/_e-180,360/Math.PI*Math.atan(Math.exp(Cr*Math.PI/180))-90]}}switch(this.type){case 1:var Rt=[];for(ne=0;ne<Qe.length;ne++)Rt[ne]=Qe[ne][0];dt(Qe=Rt);break;case 2:for(ne=0;ne<Qe.length;ne++)dt(Qe[ne]);break;case 3:for(Qe=function(qt){var ir=qt.length;if(ir<=1)return[qt];for(var yr,Cr,Lr=[],Ur=0;Ur<ir;Ur++){var Vr=Sp(qt[Ur]);Vr!==0&&(Cr===void 0&&(Cr=Vr<0),Cr===Vr<0?(yr&&Lr.push(yr),yr=[qt[Ur]]):yr.push(qt[Ur]))}return yr&&Lr.push(yr),Lr}(Qe),ne=0;ne<Qe.length;ne++)for(me=0;me<Qe[ne].length;me++)dt(Qe[ne][me])}Qe.length===1?Qe=Qe[0]:ct="Multi"+ct;var Wt={type:"Feature",geometry:{type:ct,coordinates:Qe},properties:this.properties};return"id"in this&&(Wt.id=this.id),Wt};var Ef=Lf;function Lf(M,O){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=M,this._keys=[],this._values=[],this._features=[],M.readFields(Ep,this,O),this.length=this._features.length}function Ep(M,O,G){M===15?O.version=G.readVarint():M===1?O.name=G.readString():M===5?O.extent=G.readVarint():M===2?O._features.push(G.pos):M===3?O._keys.push(G.readString()):M===4&&O._values.push(function(ne){for(var me=null,_e=ne.readVarint()+ne.pos;ne.pos<_e;){var Ce=ne.readVarint()>>3;me=Ce===1?ne.readString():Ce===2?ne.readFloat():Ce===3?ne.readDouble():Ce===4?ne.readVarint64():Ce===5?ne.readVarint():Ce===6?ne.readSVarint():Ce===7?ne.readBoolean():null}return me}(G))}function Lp(M,O,G){if(M===3){var ne=new Ef(G,G.readVarint()+G.pos);ne.length&&(O[ne.name]=ne)}}Lf.prototype.feature=function(M){if(M<0||M>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[M];var O=this._pbf.readVarint()+this._pbf.pos;return new Sf(this._pbf,O,this.extent,this._keys,this._values)};var Nl={VectorTile:function(M,O){this.layers=M.readFields(Lp,{},O)},VectorTileFeature:Sf,VectorTileLayer:Ef},Cp=Nl.VectorTileFeature.types,Bu=Math.pow(2,13);function gc(M,O,G,ne,me,_e,Ce,Ne){M.emplaceBack(O,G,2*Math.floor(ne*Bu)+Ce,me*Bu*2,_e*Bu*2,Math.round(Ne))}var Ns=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=M.index,this.hasPattern=!1,this.layoutVertexArray=new ws,this.indexArray=new ao,this.programConfigurations=new fi(Af,M.layers,M.zoom),this.segments=new zt,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};function Pp(M,O){return M.x===O.x&&(M.x<0||M.x>8192)||M.y===O.y&&(M.y<0||M.y>8192)}function Ip(M){return M.every(function(O){return O.x<0})||M.every(function(O){return O.x>8192})||M.every(function(O){return O.y<0})||M.every(function(O){return O.y>8192})}Ns.prototype.populate=function(M,O,G){this.features=[],this.hasPattern=Ru("fill-extrusion",this.layers,O);for(var ne=0,me=M;ne<me.length;ne+=1){var _e=me[ne],Ce=_e.feature,Ne=_e.id,Qe=_e.index,ct=_e.sourceLayerIndex,dt=this.layers[0]._featureFilter.needGeometry,Rt={type:Ce.type,id:Ne,properties:Ce.properties,geometry:dt?vi(Ce):[]};if(this.layers[0]._featureFilter.filter(new ai(this.zoom),Rt,G)){var Wt={id:Ne,sourceLayerIndex:ct,index:Qe,geometry:dt?Rt.geometry:vi(Ce),properties:Ce.properties,type:Ce.type,patterns:{}};Ce.id!==void 0&&(Wt.id=Ce.id),this.hasPattern?this.features.push(Fu("fill-extrusion",this.layers,Wt,this.zoom,O)):this.addFeature(Wt,Wt.geometry,Qe,G,{}),O.featureIndex.insert(Ce,Wt.geometry,Qe,ct,this.index,!0)}}},Ns.prototype.addFeatures=function(M,O,G){for(var ne=0,me=this.features;ne<me.length;ne+=1){var _e=me[ne],Ce=_e.geometry;this.addFeature(_e,Ce,_e.index,O,G)}},Ns.prototype.update=function(M,O,G){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,O,this.stateDependentLayers,G)},Ns.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ns.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ns.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,Af),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},Ns.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ns.prototype.addFeature=function(M,O,G,ne,me){for(var _e=0,Ce=zu(O,500);_e<Ce.length;_e+=1){for(var Ne=Ce[_e],Qe=0,ct=0,dt=Ne;ct<dt.length;ct+=1)Qe+=dt[ct].length;for(var Rt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Wt=0,qt=Ne;Wt<qt.length;Wt+=1){var ir=qt[Wt];if(ir.length!==0&&!Ip(ir))for(var yr=0,Cr=0;Cr<ir.length;Cr++){var Lr=ir[Cr];if(Cr>=1){var Ur=ir[Cr-1];if(!Pp(Lr,Ur)){Rt.vertexLength+4>zt.MAX_VERTEX_ARRAY_LENGTH&&(Rt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Vr=Lr.sub(Ur)._perp()._unit(),Wr=Ur.dist(Lr);yr+Wr>32768&&(yr=0),gc(this.layoutVertexArray,Lr.x,Lr.y,Vr.x,Vr.y,0,0,yr),gc(this.layoutVertexArray,Lr.x,Lr.y,Vr.x,Vr.y,0,1,yr),yr+=Wr,gc(this.layoutVertexArray,Ur.x,Ur.y,Vr.x,Vr.y,0,0,yr),gc(this.layoutVertexArray,Ur.x,Ur.y,Vr.x,Vr.y,0,1,yr);var hn=Rt.vertexLength;this.indexArray.emplaceBack(hn,hn+2,hn+1),this.indexArray.emplaceBack(hn+1,hn+2,hn+3),Rt.vertexLength+=4,Rt.primitiveLength+=2}}}}if(Rt.vertexLength+Qe>zt.MAX_VERTEX_ARRAY_LENGTH&&(Rt=this.segments.prepareSegment(Qe,this.layoutVertexArray,this.indexArray)),Cp[M.type]==="Polygon"){for(var xn=[],Nn=[],Bn=Rt.vertexLength,Wn=0,la=Ne;Wn<la.length;Wn+=1){var ca=la[Wn];if(ca.length!==0){ca!==Ne[0]&&Nn.push(xn.length/2);for(var $n=0;$n<ca.length;$n++){var ma=ca[$n];gc(this.layoutVertexArray,ma.x,ma.y,0,0,1,1,0),xn.push(ma.x),xn.push(ma.y)}}}for(var pa=Pu(xn,Nn),ua=0;ua<pa.length;ua+=3)this.indexArray.emplaceBack(Bn+pa[ua],Bn+pa[ua+2],Bn+pa[ua+1]);Rt.primitiveLength+=pa.length/3,Rt.vertexLength+=Qe}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,G,me,ne)},Xr("FillExtrusionBucket",Ns,{omit:["layers","features"]});var Op={paint:new Oo({"fill-extrusion-opacity":new fa(be["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ba(be["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new fa(be["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new fa(be["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Zs(be["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ba(be["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ba(be["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new fa(be["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Dp=function(M){function O(G){M.call(this,G,Op)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.createBucket=function(G){return new Ns(G)},O.prototype.queryRadius=function(){return Do(this.paint.get("fill-extrusion-translate"))},O.prototype.is3D=function(){return!0},O.prototype.queryIntersectsFeature=function(G,ne,me,_e,Ce,Ne,Qe,ct){var dt=zo(G,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Ne.angle,Qe),Rt=this.paint.get("fill-extrusion-height").evaluate(ne,me),Wt=this.paint.get("fill-extrusion-base").evaluate(ne,me),qt=function(yr,Cr,Lr,Ur){for(var Vr=[],Wr=0,hn=yr;Wr<hn.length;Wr+=1){var xn=hn[Wr],Nn=[xn.x,xn.y,Ur,1];Rl(Nn,Nn,Cr),Vr.push(new n(Nn[0]/Nn[3],Nn[1]/Nn[3]))}return Vr}(dt,ct,0,0),ir=function(yr,Cr,Lr,Ur){for(var Vr=[],Wr=[],hn=Ur[8]*Cr,xn=Ur[9]*Cr,Nn=Ur[10]*Cr,Bn=Ur[11]*Cr,Wn=Ur[8]*Lr,la=Ur[9]*Lr,ca=Ur[10]*Lr,$n=Ur[11]*Lr,ma=0,pa=yr;ma<pa.length;ma+=1){for(var ua=pa[ma],Qa=[],qa=[],ri=0,Ta=ua;ri<Ta.length;ri+=1){var Ya=Ta[ri],xi=Ya.x,hi=Ya.y,Ei=Ur[0]*xi+Ur[4]*hi+Ur[12],pi=Ur[1]*xi+Ur[5]*hi+Ur[13],lo=Ur[2]*xi+Ur[6]*hi+Ur[14],Li=Ur[3]*xi+Ur[7]*hi+Ur[15],Ro=lo+Nn,Mo=Li+Bn,Eo=Ei+Wn,Xo=pi+la,jo=lo+ca,co=Li+$n,Lo=new n((Ei+hn)/Mo,(pi+xn)/Mo);Lo.z=Ro/Mo,Qa.push(Lo);var Xi=new n(Eo/co,Xo/co);Xi.z=jo/co,qa.push(Xi)}Vr.push(Qa),Wr.push(qa)}return[Vr,Wr]}(_e,Wt,Rt,ct);return function(yr,Cr,Lr){var Ur=1/0;Js(Lr,Cr)&&(Ur=Cf(Lr,Cr[0]));for(var Vr=0;Vr<Cr.length;Vr++)for(var Wr=Cr[Vr],hn=yr[Vr],xn=0;xn<Wr.length-1;xn++){var Nn=Wr[xn],Bn=Wr[xn+1],Wn=hn[xn],la=hn[xn+1],ca=[Nn,Bn,la,Wn,Nn];Bo(Lr,ca)&&(Ur=Math.min(Ur,Cf(Lr,ca)))}return Ur!==1/0&&Ur}(ir[0],ir[1],qt)},O}(Zo);function vc(M,O){return M.x*O.x+M.y*O.y}function Cf(M,O){if(M.length===1){for(var G,ne=0,me=O[ne++];!G||me.equals(G);)if(!(G=O[ne++]))return 1/0;for(;ne<O.length;ne++){var _e=O[ne],Ce=M[0],Ne=G.sub(me),Qe=_e.sub(me),ct=Ce.sub(me),dt=vc(Ne,Ne),Rt=vc(Ne,Qe),Wt=vc(Qe,Qe),qt=vc(ct,Ne),ir=vc(ct,Qe),yr=dt*Wt-Rt*Rt,Cr=(Wt*qt-Rt*ir)/yr,Lr=(dt*ir-Rt*qt)/yr,Ur=1-Cr-Lr,Vr=me.z*Ur+G.z*Cr+_e.z*Lr;if(isFinite(Vr))return Vr}return 1/0}for(var Wr=1/0,hn=0,xn=O;hn<xn.length;hn+=1){var Nn=xn[hn];Wr=Math.min(Wr,Nn.z)}return Wr}var Pf=ii([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,zp=Nl.VectorTileFeature.types,Rp=Math.cos(Math.PI/180*37.5),If=Math.pow(2,14)/.5,rs=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=M.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new zs,this.indexArray=new ao,this.programConfigurations=new fi(Pf,M.layers,M.zoom),this.segments=new zt,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};rs.prototype.populate=function(M,O,G){this.hasPattern=Ru("line",this.layers,O);for(var ne=this.layers[0].layout.get("line-sort-key"),me=[],_e=0,Ce=M;_e<Ce.length;_e+=1){var Ne=Ce[_e],Qe=Ne.feature,ct=Ne.id,dt=Ne.index,Rt=Ne.sourceLayerIndex,Wt=this.layers[0]._featureFilter.needGeometry,qt={type:Qe.type,id:ct,properties:Qe.properties,geometry:Wt?vi(Qe):[]};if(this.layers[0]._featureFilter.filter(new ai(this.zoom),qt,G)){Wt||(qt.geometry=vi(Qe));var ir=ne?ne.evaluate(qt,{},G):void 0,yr={id:ct,properties:Qe.properties,type:Qe.type,sourceLayerIndex:Rt,index:dt,geometry:qt.geometry,patterns:{},sortKey:ir};me.push(yr)}}ne&&me.sort(function(Wn,la){return Wn.sortKey-la.sortKey});for(var Cr=0,Lr=me;Cr<Lr.length;Cr+=1){var Ur=Lr[Cr],Vr=Ur,Wr=Vr.geometry,hn=Vr.index,xn=Vr.sourceLayerIndex;if(this.hasPattern){var Nn=Fu("line",this.layers,Ur,this.zoom,O);this.patternFeatures.push(Nn)}else this.addFeature(Ur,Wr,hn,G,{});var Bn=M[hn].feature;O.featureIndex.insert(Bn,Wr,hn,xn,this.index)}},rs.prototype.update=function(M,O,G){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,O,this.stateDependentLayers,G)},rs.prototype.addFeatures=function(M,O,G){for(var ne=0,me=this.patternFeatures;ne<me.length;ne+=1){var _e=me[ne];this.addFeature(_e,_e.geometry,_e.index,O,G)}},rs.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},rs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},rs.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,Pf),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},rs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},rs.prototype.addFeature=function(M,O,G,ne,me){for(var _e=this.layers[0].layout,Ce=_e.get("line-join").evaluate(M,{}),Ne=_e.get("line-cap"),Qe=_e.get("line-miter-limit"),ct=_e.get("line-round-limit"),dt=0,Rt=O;dt<Rt.length;dt+=1){var Wt=Rt[dt];this.addLine(Wt,M,Ce,Ne,Qe,ct)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,G,me,ne)},rs.prototype.addLine=function(M,O,G,ne,me,_e){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,O.properties&&O.properties.hasOwnProperty("mapbox_clip_start")&&O.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+O.properties.mapbox_clip_start,this.clipEnd=+O.properties.mapbox_clip_end;for(var Ce=0;Ce<M.length-1;Ce++)this.totalDistance+=M[Ce].dist(M[Ce+1]);this.updateScaledDistance()}for(var Ne=zp[O.type]==="Polygon",Qe=M.length;Qe>=2&&M[Qe-1].equals(M[Qe-2]);)Qe--;for(var ct=0;ct<Qe-1&&M[ct].equals(M[ct+1]);)ct++;if(!(Qe<(Ne?3:2))){G==="bevel"&&(me=1.05);var dt,Rt=this.overscaling<=16?122880/(512*this.overscaling):0,Wt=this.segments.prepareSegment(10*Qe,this.layoutVertexArray,this.indexArray),qt=void 0,ir=void 0,yr=void 0,Cr=void 0;this.e1=this.e2=-1,Ne&&(dt=M[Qe-2],Cr=M[ct].sub(dt)._unit()._perp());for(var Lr=ct;Lr<Qe;Lr++)if(!(ir=Lr===Qe-1?Ne?M[ct+1]:void 0:M[Lr+1])||!M[Lr].equals(ir)){Cr&&(yr=Cr),dt&&(qt=dt),dt=M[Lr],Cr=ir?ir.sub(dt)._unit()._perp():yr;var Ur=(yr=yr||Cr).add(Cr);Ur.x===0&&Ur.y===0||Ur._unit();var Vr=yr.x*Cr.x+yr.y*Cr.y,Wr=Ur.x*Cr.x+Ur.y*Cr.y,hn=Wr!==0?1/Wr:1/0,xn=2*Math.sqrt(2-2*Wr),Nn=Wr<Rp&&qt&&ir,Bn=yr.x*Cr.y-yr.y*Cr.x>0;if(Nn&&Lr>ct){var Wn=dt.dist(qt);if(Wn>2*Rt){var la=dt.sub(dt.sub(qt)._mult(Rt/Wn)._round());this.updateDistance(qt,la),this.addCurrentVertex(la,yr,0,0,Wt),qt=la}}var ca=qt&&ir,$n=ca?G:Ne?"butt":ne;if(ca&&$n==="round"&&(hn<_e?$n="miter":hn<=2&&($n="fakeround")),$n==="miter"&&hn>me&&($n="bevel"),$n==="bevel"&&(hn>2&&($n="flipbevel"),hn<me&&($n="miter")),qt&&this.updateDistance(qt,dt),$n==="miter")Ur._mult(hn),this.addCurrentVertex(dt,Ur,0,0,Wt);else if($n==="flipbevel"){if(hn>100)Ur=Cr.mult(-1);else{var ma=hn*yr.add(Cr).mag()/yr.sub(Cr).mag();Ur._perp()._mult(ma*(Bn?-1:1))}this.addCurrentVertex(dt,Ur,0,0,Wt),this.addCurrentVertex(dt,Ur.mult(-1),0,0,Wt)}else if($n==="bevel"||$n==="fakeround"){var pa=-Math.sqrt(hn*hn-1),ua=Bn?pa:0,Qa=Bn?0:pa;if(qt&&this.addCurrentVertex(dt,yr,ua,Qa,Wt),$n==="fakeround")for(var qa=Math.round(180*xn/Math.PI/20),ri=1;ri<qa;ri++){var Ta=ri/qa;if(Ta!==.5){var Ya=Ta-.5;Ta+=Ta*Ya*(Ta-1)*((1.0904+Vr*(Vr*(3.55645-1.43519*Vr)-3.2452))*Ya*Ya+(.848013+Vr*(.215638*Vr-1.06021)))}var xi=Cr.sub(yr)._mult(Ta)._add(yr)._unit()._mult(Bn?-1:1);this.addHalfVertex(dt,xi.x,xi.y,!1,Bn,0,Wt)}ir&&this.addCurrentVertex(dt,Cr,-ua,-Qa,Wt)}else if($n==="butt")this.addCurrentVertex(dt,Ur,0,0,Wt);else if($n==="square"){var hi=qt?1:-1;this.addCurrentVertex(dt,Ur,hi,hi,Wt)}else $n==="round"&&(qt&&(this.addCurrentVertex(dt,yr,0,0,Wt),this.addCurrentVertex(dt,yr,1,1,Wt,!0)),ir&&(this.addCurrentVertex(dt,Cr,-1,-1,Wt,!0),this.addCurrentVertex(dt,Cr,0,0,Wt)));if(Nn&&Lr<Qe-1){var Ei=dt.dist(ir);if(Ei>2*Rt){var pi=dt.add(ir.sub(dt)._mult(Rt/Ei)._round());this.updateDistance(dt,pi),this.addCurrentVertex(pi,Cr,0,0,Wt),dt=pi}}}}},rs.prototype.addCurrentVertex=function(M,O,G,ne,me,_e){_e===void 0&&(_e=!1);var Ce=O.x+O.y*G,Ne=O.y-O.x*G,Qe=-O.x+O.y*ne,ct=-O.y-O.x*ne;this.addHalfVertex(M,Ce,Ne,_e,!1,G,me),this.addHalfVertex(M,Qe,ct,_e,!0,-ne,me),this.distance>If/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(M,O,G,ne,me,_e))},rs.prototype.addHalfVertex=function(M,O,G,ne,me,_e,Ce){var Ne=M.x,Qe=M.y,ct=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((Ne<<1)+(ne?1:0),(Qe<<1)+(me?1:0),Math.round(63*O)+128,Math.round(63*G)+128,1+(_e===0?0:_e<0?-1:1)|(63&ct)<<2,ct>>6);var dt=Ce.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,dt),Ce.primitiveLength++),me?this.e2=dt:this.e1=dt},rs.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(If-1):this.distance},rs.prototype.updateDistance=function(M,O){this.distance+=M.dist(O),this.updateScaledDistance()},Xr("LineBucket",rs,{omit:["layers","patternFeatures"]});var Fp=new Oo({"line-cap":new fa(be.layout_line["line-cap"]),"line-join":new ba(be.layout_line["line-join"]),"line-miter-limit":new fa(be.layout_line["line-miter-limit"]),"line-round-limit":new fa(be.layout_line["line-round-limit"]),"line-sort-key":new ba(be.layout_line["line-sort-key"])}),Of={paint:new Oo({"line-opacity":new ba(be.paint_line["line-opacity"]),"line-color":new ba(be.paint_line["line-color"]),"line-translate":new fa(be.paint_line["line-translate"]),"line-translate-anchor":new fa(be.paint_line["line-translate-anchor"]),"line-width":new ba(be.paint_line["line-width"]),"line-gap-width":new ba(be.paint_line["line-gap-width"]),"line-offset":new ba(be.paint_line["line-offset"]),"line-blur":new ba(be.paint_line["line-blur"]),"line-dasharray":new Xs(be.paint_line["line-dasharray"]),"line-pattern":new Zs(be.paint_line["line-pattern"]),"line-gradient":new ls(be.paint_line["line-gradient"])}),layout:Fp},Df=new(function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.possiblyEvaluate=function(G,ne){return ne=new ai(Math.floor(ne.zoom),{now:ne.now,fadeDuration:ne.fadeDuration,zoomHistory:ne.zoomHistory,transition:ne.transition}),M.prototype.possiblyEvaluate.call(this,G,ne)},O.prototype.evaluate=function(G,ne,me,_e){return ne=a({},ne,{zoom:Math.floor(ne.zoom)}),M.prototype.evaluate.call(this,G,ne,me,_e)},O}(ba))(Of.paint.properties["line-width"].specification);Df.useIntegerZoom=!0;var Bp=function(M){function O(G){M.call(this,G,Of)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._handleSpecialPaintPropertyUpdate=function(G){G==="line-gradient"&&this._updateGradient()},O.prototype._updateGradient=function(){var G=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=bf(G,"lineProgress"),this.gradientTexture=null},O.prototype.recalculate=function(G,ne){M.prototype.recalculate.call(this,G,ne),this.paint._values["line-floorwidth"]=Df.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,G)},O.prototype.createBucket=function(G){return new rs(G)},O.prototype.queryRadius=function(G){var ne=G,me=zf(Ai("line-width",this,ne),Ai("line-gap-width",this,ne)),_e=Ai("line-offset",this,ne);return me/2+Math.abs(_e)+Do(this.paint.get("line-translate"))},O.prototype.queryIntersectsFeature=function(G,ne,me,_e,Ce,Ne,Qe){var ct=zo(G,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Ne.angle,Qe),dt=Qe/2*zf(this.paint.get("line-width").evaluate(ne,me),this.paint.get("line-gap-width").evaluate(ne,me)),Rt=this.paint.get("line-offset").evaluate(ne,me);return Rt&&(_e=function(Wt,qt){for(var ir=[],yr=new n(0,0),Cr=0;Cr<Wt.length;Cr++){for(var Lr=Wt[Cr],Ur=[],Vr=0;Vr<Lr.length;Vr++){var Wr=Lr[Vr-1],hn=Lr[Vr],xn=Lr[Vr+1],Nn=Vr===0?yr:hn.sub(Wr)._unit()._perp(),Bn=Vr===Lr.length-1?yr:xn.sub(hn)._unit()._perp(),Wn=Nn._add(Bn)._unit(),la=Wn.x*Bn.x+Wn.y*Bn.y;Wn._mult(1/la),Ur.push(Wn._mult(qt)._add(hn))}ir.push(Ur)}return ir}(_e,Rt*Qe)),function(Wt,qt,ir){for(var yr=0;yr<qt.length;yr++){var Cr=qt[yr];if(Wt.length>=3){for(var Lr=0;Lr<Cr.length;Lr++)if(cs(Wt,Cr[Lr]))return!0}if(kl(Wt,Cr,ir))return!0}return!1}(ct,_e,dt)},O.prototype.isTileClipped=function(){return!0},O}(Zo);function zf(M,O){return O>0?O+2*M:M}var Nu=ii([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Np=ii([{name:"a_projected_pos",components:3,type:"Float32"}],4),jp=(ii([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),ii([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Rf=(ii([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),ii([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Up=ii([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);ii([{name:"triangle",components:3,type:"Uint16"}]),ii([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ii([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ii([{type:"Float32",name:"offsetX"}]),ii([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function Vp(M,O,G){return M.sections.forEach(function(ne){ne.text=function(me,_e,Ce){var Ne=_e.layout.get("text-transform").evaluate(Ce,{});return Ne==="uppercase"?me=me.toLocaleUpperCase():Ne==="lowercase"&&(me=me.toLocaleLowerCase()),mo.applyArabicShaping&&(me=mo.applyArabicShaping(me)),me}(ne.text,O,G)}),M}var yc={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},Ff=function(M,O,G,ne,me){var _e,Ce,Ne=8*me-ne-1,Qe=(1<<Ne)-1,ct=Qe>>1,dt=-7,Rt=G?me-1:0,Wt=G?-1:1,qt=M[O+Rt];for(Rt+=Wt,_e=qt&(1<<-dt)-1,qt>>=-dt,dt+=Ne;dt>0;_e=256*_e+M[O+Rt],Rt+=Wt,dt-=8);for(Ce=_e&(1<<-dt)-1,_e>>=-dt,dt+=ne;dt>0;Ce=256*Ce+M[O+Rt],Rt+=Wt,dt-=8);if(_e===0)_e=1-ct;else{if(_e===Qe)return Ce?NaN:1/0*(qt?-1:1);Ce+=Math.pow(2,ne),_e-=ct}return(qt?-1:1)*Ce*Math.pow(2,_e-ne)},Bf=function(M,O,G,ne,me,_e){var Ce,Ne,Qe,ct=8*_e-me-1,dt=(1<<ct)-1,Rt=dt>>1,Wt=me===23?Math.pow(2,-24)-Math.pow(2,-77):0,qt=ne?0:_e-1,ir=ne?1:-1,yr=O<0||O===0&&1/O<0?1:0;for(O=Math.abs(O),isNaN(O)||O===1/0?(Ne=isNaN(O)?1:0,Ce=dt):(Ce=Math.floor(Math.log(O)/Math.LN2),O*(Qe=Math.pow(2,-Ce))<1&&(Ce--,Qe*=2),(O+=Ce+Rt>=1?Wt/Qe:Wt*Math.pow(2,1-Rt))*Qe>=2&&(Ce++,Qe/=2),Ce+Rt>=dt?(Ne=0,Ce=dt):Ce+Rt>=1?(Ne=(O*Qe-1)*Math.pow(2,me),Ce+=Rt):(Ne=O*Math.pow(2,Rt-1)*Math.pow(2,me),Ce=0));me>=8;M[G+qt]=255&Ne,qt+=ir,Ne/=256,me-=8);for(Ce=Ce<<me|Ne,ct+=me;ct>0;M[G+qt]=255&Ce,qt+=ir,Ce/=256,ct-=8);M[G+qt-ir]|=128*yr},jc=yi;function yi(M){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(M)?M:new Uint8Array(M||0),this.pos=0,this.type=0,this.length=this.buf.length}yi.Varint=0,yi.Fixed64=1,yi.Bytes=2,yi.Fixed32=5;var Nf=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function al(M){return M.type===yi.Bytes?M.readVarint()+M.pos:M.pos+1}function jl(M,O,G){return G?4294967296*O+(M>>>0):4294967296*(O>>>0)+(M>>>0)}function jf(M,O,G){var ne=O<=16383?1:O<=2097151?2:O<=268435455?3:Math.floor(Math.log(O)/(7*Math.LN2));G.realloc(ne);for(var me=G.pos-1;me>=M;me--)G.buf[me+ne]=G.buf[me]}function Hp(M,O){for(var G=0;G<M.length;G++)O.writeVarint(M[G])}function qp(M,O){for(var G=0;G<M.length;G++)O.writeSVarint(M[G])}function Gp(M,O){for(var G=0;G<M.length;G++)O.writeFloat(M[G])}function Yp(M,O){for(var G=0;G<M.length;G++)O.writeDouble(M[G])}function Wp(M,O){for(var G=0;G<M.length;G++)O.writeBoolean(M[G])}function Zp(M,O){for(var G=0;G<M.length;G++)O.writeFixed32(M[G])}function Xp(M,O){for(var G=0;G<M.length;G++)O.writeSFixed32(M[G])}function Jp(M,O){for(var G=0;G<M.length;G++)O.writeFixed64(M[G])}function Kp(M,O){for(var G=0;G<M.length;G++)O.writeSFixed64(M[G])}function Uc(M,O){return(M[O]|M[O+1]<<8|M[O+2]<<16)+16777216*M[O+3]}function Ul(M,O,G){M[G]=O,M[G+1]=O>>>8,M[G+2]=O>>>16,M[G+3]=O>>>24}function Uf(M,O){return(M[O]|M[O+1]<<8|M[O+2]<<16)+(M[O+3]<<24)}yi.prototype={destroy:function(){this.buf=null},readFields:function(M,O,G){for(G=G||this.length;this.pos<G;){var ne=this.readVarint(),me=ne>>3,_e=this.pos;this.type=7&ne,M(me,O,this),this.pos===_e&&this.skip(ne)}return O},readMessage:function(M,O){return this.readFields(M,O,this.readVarint()+this.pos)},readFixed32:function(){var M=Uc(this.buf,this.pos);return this.pos+=4,M},readSFixed32:function(){var M=Uf(this.buf,this.pos);return this.pos+=4,M},readFixed64:function(){var M=Uc(this.buf,this.pos)+4294967296*Uc(this.buf,this.pos+4);return this.pos+=8,M},readSFixed64:function(){var M=Uc(this.buf,this.pos)+4294967296*Uf(this.buf,this.pos+4);return this.pos+=8,M},readFloat:function(){var M=Ff(this.buf,this.pos,!0,23,4);return this.pos+=4,M},readDouble:function(){var M=Ff(this.buf,this.pos,!0,52,8);return this.pos+=8,M},readVarint:function(M){var O,G,ne=this.buf;return O=127&(G=ne[this.pos++]),G<128?O:(O|=(127&(G=ne[this.pos++]))<<7,G<128?O:(O|=(127&(G=ne[this.pos++]))<<14,G<128?O:(O|=(127&(G=ne[this.pos++]))<<21,G<128?O:function(me,_e,Ce){var Ne,Qe,ct=Ce.buf;if(Qe=ct[Ce.pos++],Ne=(112&Qe)>>4,Qe<128||(Qe=ct[Ce.pos++],Ne|=(127&Qe)<<3,Qe<128)||(Qe=ct[Ce.pos++],Ne|=(127&Qe)<<10,Qe<128)||(Qe=ct[Ce.pos++],Ne|=(127&Qe)<<17,Qe<128)||(Qe=ct[Ce.pos++],Ne|=(127&Qe)<<24,Qe<128)||(Qe=ct[Ce.pos++],Ne|=(1&Qe)<<31,Qe<128))return jl(me,Ne,_e);throw new Error("Expected varint not more than 10 bytes")}(O|=(15&(G=ne[this.pos]))<<28,M,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var M=this.readVarint();return M%2==1?(M+1)/-2:M/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var M=this.readVarint()+this.pos,O=this.pos;return this.pos=M,M-O>=12&&Nf?function(G,ne,me){return Nf.decode(G.subarray(ne,me))}(this.buf,O,M):function(G,ne,me){for(var _e="",Ce=ne;Ce<me;){var Ne,Qe,ct,dt=G[Ce],Rt=null,Wt=dt>239?4:dt>223?3:dt>191?2:1;if(Ce+Wt>me)break;Wt===1?dt<128&&(Rt=dt):Wt===2?(192&(Ne=G[Ce+1]))==128&&(Rt=(31&dt)<<6|63&Ne)<=127&&(Rt=null):Wt===3?(Ne=G[Ce+1],Qe=G[Ce+2],(192&Ne)==128&&(192&Qe)==128&&((Rt=(15&dt)<<12|(63&Ne)<<6|63&Qe)<=2047||Rt>=55296&&Rt<=57343)&&(Rt=null)):Wt===4&&(Ne=G[Ce+1],Qe=G[Ce+2],ct=G[Ce+3],(192&Ne)==128&&(192&Qe)==128&&(192&ct)==128&&((Rt=(15&dt)<<18|(63&Ne)<<12|(63&Qe)<<6|63&ct)<=65535||Rt>=1114112)&&(Rt=null)),Rt===null?(Rt=65533,Wt=1):Rt>65535&&(Rt-=65536,_e+=String.fromCharCode(Rt>>>10&1023|55296),Rt=56320|1023&Rt),_e+=String.fromCharCode(Rt),Ce+=Wt}return _e}(this.buf,O,M)},readBytes:function(){var M=this.readVarint()+this.pos,O=this.buf.subarray(this.pos,M);return this.pos=M,O},readPackedVarint:function(M,O){if(this.type!==yi.Bytes)return M.push(this.readVarint(O));var G=al(this);for(M=M||[];this.pos<G;)M.push(this.readVarint(O));return M},readPackedSVarint:function(M){if(this.type!==yi.Bytes)return M.push(this.readSVarint());var O=al(this);for(M=M||[];this.pos<O;)M.push(this.readSVarint());return M},readPackedBoolean:function(M){if(this.type!==yi.Bytes)return M.push(this.readBoolean());var O=al(this);for(M=M||[];this.pos<O;)M.push(this.readBoolean());return M},readPackedFloat:function(M){if(this.type!==yi.Bytes)return M.push(this.readFloat());var O=al(this);for(M=M||[];this.pos<O;)M.push(this.readFloat());return M},readPackedDouble:function(M){if(this.type!==yi.Bytes)return M.push(this.readDouble());var O=al(this);for(M=M||[];this.pos<O;)M.push(this.readDouble());return M},readPackedFixed32:function(M){if(this.type!==yi.Bytes)return M.push(this.readFixed32());var O=al(this);for(M=M||[];this.pos<O;)M.push(this.readFixed32());return M},readPackedSFixed32:function(M){if(this.type!==yi.Bytes)return M.push(this.readSFixed32());var O=al(this);for(M=M||[];this.pos<O;)M.push(this.readSFixed32());return M},readPackedFixed64:function(M){if(this.type!==yi.Bytes)return M.push(this.readFixed64());var O=al(this);for(M=M||[];this.pos<O;)M.push(this.readFixed64());return M},readPackedSFixed64:function(M){if(this.type!==yi.Bytes)return M.push(this.readSFixed64());var O=al(this);for(M=M||[];this.pos<O;)M.push(this.readSFixed64());return M},skip:function(M){var O=7&M;if(O===yi.Varint)for(;this.buf[this.pos++]>127;);else if(O===yi.Bytes)this.pos=this.readVarint()+this.pos;else if(O===yi.Fixed32)this.pos+=4;else{if(O!==yi.Fixed64)throw new Error("Unimplemented type: "+O);this.pos+=8}},writeTag:function(M,O){this.writeVarint(M<<3|O)},realloc:function(M){for(var O=this.length||16;O<this.pos+M;)O*=2;if(O!==this.length){var G=new Uint8Array(O);G.set(this.buf),this.buf=G,this.length=O}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(M){this.realloc(4),Ul(this.buf,M,this.pos),this.pos+=4},writeSFixed32:function(M){this.realloc(4),Ul(this.buf,M,this.pos),this.pos+=4},writeFixed64:function(M){this.realloc(8),Ul(this.buf,-1&M,this.pos),Ul(this.buf,Math.floor(M*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(M){this.realloc(8),Ul(this.buf,-1&M,this.pos),Ul(this.buf,Math.floor(M*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(M){(M=+M||0)>268435455||M<0?function(O,G){var ne,me;if(O>=0?(ne=O%4294967296|0,me=O/4294967296|0):(me=~(-O/4294967296),4294967295^(ne=~(-O%4294967296))?ne=ne+1|0:(ne=0,me=me+1|0)),O>=18446744073709552e3||O<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");G.realloc(10),function(_e,Ce,Ne){Ne.buf[Ne.pos++]=127&_e|128,_e>>>=7,Ne.buf[Ne.pos++]=127&_e|128,_e>>>=7,Ne.buf[Ne.pos++]=127&_e|128,_e>>>=7,Ne.buf[Ne.pos++]=127&_e|128,_e>>>=7,Ne.buf[Ne.pos]=127&_e}(ne,0,G),function(_e,Ce){var Ne=(7&_e)<<4;Ce.buf[Ce.pos++]|=Ne|((_e>>>=3)?128:0),_e&&(Ce.buf[Ce.pos++]=127&_e|((_e>>>=7)?128:0),_e&&(Ce.buf[Ce.pos++]=127&_e|((_e>>>=7)?128:0),_e&&(Ce.buf[Ce.pos++]=127&_e|((_e>>>=7)?128:0),_e&&(Ce.buf[Ce.pos++]=127&_e|((_e>>>=7)?128:0),_e&&(Ce.buf[Ce.pos++]=127&_e)))))}(me,G)}(M,this):(this.realloc(4),this.buf[this.pos++]=127&M|(M>127?128:0),M<=127||(this.buf[this.pos++]=127&(M>>>=7)|(M>127?128:0),M<=127||(this.buf[this.pos++]=127&(M>>>=7)|(M>127?128:0),M<=127||(this.buf[this.pos++]=M>>>7&127))))},writeSVarint:function(M){this.writeVarint(M<0?2*-M-1:2*M)},writeBoolean:function(M){this.writeVarint(Boolean(M))},writeString:function(M){M=String(M),this.realloc(4*M.length),this.pos++;var O=this.pos;this.pos=function(ne,me,_e){for(var Ce,Ne,Qe=0;Qe<me.length;Qe++){if((Ce=me.charCodeAt(Qe))>55295&&Ce<57344){if(!Ne){Ce>56319||Qe+1===me.length?(ne[_e++]=239,ne[_e++]=191,ne[_e++]=189):Ne=Ce;continue}if(Ce<56320){ne[_e++]=239,ne[_e++]=191,ne[_e++]=189,Ne=Ce;continue}Ce=Ne-55296<<10|Ce-56320|65536,Ne=null}else Ne&&(ne[_e++]=239,ne[_e++]=191,ne[_e++]=189,Ne=null);Ce<128?ne[_e++]=Ce:(Ce<2048?ne[_e++]=Ce>>6|192:(Ce<65536?ne[_e++]=Ce>>12|224:(ne[_e++]=Ce>>18|240,ne[_e++]=Ce>>12&63|128),ne[_e++]=Ce>>6&63|128),ne[_e++]=63&Ce|128)}return _e}(this.buf,M,this.pos);var G=this.pos-O;G>=128&&jf(O,G,this),this.pos=O-1,this.writeVarint(G),this.pos+=G},writeFloat:function(M){this.realloc(4),Bf(this.buf,M,this.pos,!0,23,4),this.pos+=4},writeDouble:function(M){this.realloc(8),Bf(this.buf,M,this.pos,!0,52,8),this.pos+=8},writeBytes:function(M){var O=M.length;this.writeVarint(O),this.realloc(O);for(var G=0;G<O;G++)this.buf[this.pos++]=M[G]},writeRawMessage:function(M,O){this.pos++;var G=this.pos;M(O,this);var ne=this.pos-G;ne>=128&&jf(G,ne,this),this.pos=G-1,this.writeVarint(ne),this.pos+=ne},writeMessage:function(M,O,G){this.writeTag(M,yi.Bytes),this.writeRawMessage(O,G)},writePackedVarint:function(M,O){O.length&&this.writeMessage(M,Hp,O)},writePackedSVarint:function(M,O){O.length&&this.writeMessage(M,qp,O)},writePackedBoolean:function(M,O){O.length&&this.writeMessage(M,Wp,O)},writePackedFloat:function(M,O){O.length&&this.writeMessage(M,Gp,O)},writePackedDouble:function(M,O){O.length&&this.writeMessage(M,Yp,O)},writePackedFixed32:function(M,O){O.length&&this.writeMessage(M,Zp,O)},writePackedSFixed32:function(M,O){O.length&&this.writeMessage(M,Xp,O)},writePackedFixed64:function(M,O){O.length&&this.writeMessage(M,Jp,O)},writePackedSFixed64:function(M,O){O.length&&this.writeMessage(M,Kp,O)},writeBytesField:function(M,O){this.writeTag(M,yi.Bytes),this.writeBytes(O)},writeFixed32Field:function(M,O){this.writeTag(M,yi.Fixed32),this.writeFixed32(O)},writeSFixed32Field:function(M,O){this.writeTag(M,yi.Fixed32),this.writeSFixed32(O)},writeFixed64Field:function(M,O){this.writeTag(M,yi.Fixed64),this.writeFixed64(O)},writeSFixed64Field:function(M,O){this.writeTag(M,yi.Fixed64),this.writeSFixed64(O)},writeVarintField:function(M,O){this.writeTag(M,yi.Varint),this.writeVarint(O)},writeSVarintField:function(M,O){this.writeTag(M,yi.Varint),this.writeSVarint(O)},writeStringField:function(M,O){this.writeTag(M,yi.Bytes),this.writeString(O)},writeFloatField:function(M,O){this.writeTag(M,yi.Fixed32),this.writeFloat(O)},writeDoubleField:function(M,O){this.writeTag(M,yi.Fixed64),this.writeDouble(O)},writeBooleanField:function(M,O){this.writeVarintField(M,Boolean(O))}};function $p(M,O,G){M===1&&G.readMessage(Qp,O)}function Qp(M,O,G){if(M===3){var ne=G.readMessage(ed,{}),me=ne.id,_e=ne.bitmap,Ce=ne.width,Ne=ne.height,Qe=ne.left,ct=ne.top,dt=ne.advance;O.push({id:me,bitmap:new El({width:Ce+6,height:Ne+6},_e),metrics:{width:Ce,height:Ne,left:Qe,top:ct,advance:dt}})}}function ed(M,O,G){M===1?O.id=G.readVarint():M===2?O.bitmap=G.readBytes():M===3?O.width=G.readVarint():M===4?O.height=G.readVarint():M===5?O.left=G.readSVarint():M===6?O.top=G.readSVarint():M===7&&(O.advance=G.readVarint())}function Vf(M){for(var O=0,G=0,ne=0,me=M;ne<me.length;ne+=1){var _e=me[ne];O+=_e.w*_e.h,G=Math.max(G,_e.w)}M.sort(function(yr,Cr){return Cr.h-yr.h});for(var Ce=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(O/.95)),G),h:1/0}],Ne=0,Qe=0,ct=0,dt=M;ct<dt.length;ct+=1)for(var Rt=dt[ct],Wt=Ce.length-1;Wt>=0;Wt--){var qt=Ce[Wt];if(!(Rt.w>qt.w||Rt.h>qt.h)){if(Rt.x=qt.x,Rt.y=qt.y,Qe=Math.max(Qe,Rt.y+Rt.h),Ne=Math.max(Ne,Rt.x+Rt.w),Rt.w===qt.w&&Rt.h===qt.h){var ir=Ce.pop();Wt<Ce.length&&(Ce[Wt]=ir)}else Rt.h===qt.h?(qt.x+=Rt.w,qt.w-=Rt.w):Rt.w===qt.w?(qt.y+=Rt.h,qt.h-=Rt.h):(Ce.push({x:qt.x+Rt.w,y:qt.y,w:qt.w-Rt.w,h:Rt.h}),qt.y+=Rt.h,qt.h-=Rt.h);break}}return{w:Ne,h:Qe,fill:O/(Ne*Qe)||0}}var Vc=function(M,O){var G=O.pixelRatio,ne=O.version,me=O.stretchX,_e=O.stretchY,Ce=O.content;this.paddedRect=M,this.pixelRatio=G,this.stretchX=me,this.stretchY=_e,this.content=Ce,this.version=ne},xc={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};xc.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},xc.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},xc.tlbr.get=function(){return this.tl.concat(this.br)},xc.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Vc.prototype,xc);var bc=function(M,O){var G={},ne={};this.haveRenderCallbacks=[];var me=[];this.addImages(M,G,me),this.addImages(O,ne,me);var _e=Vf(me),Ce=_e.w,Ne=_e.h,Qe=new ts({width:Ce||1,height:Ne||1});for(var ct in M){var dt=M[ct],Rt=G[ct].paddedRect;ts.copy(dt.data,Qe,{x:0,y:0},{x:Rt.x+1,y:Rt.y+1},dt.data)}for(var Wt in O){var qt=O[Wt],ir=ne[Wt].paddedRect,yr=ir.x+1,Cr=ir.y+1,Lr=qt.data.width,Ur=qt.data.height;ts.copy(qt.data,Qe,{x:0,y:0},{x:yr,y:Cr},qt.data),ts.copy(qt.data,Qe,{x:0,y:Ur-1},{x:yr,y:Cr-1},{width:Lr,height:1}),ts.copy(qt.data,Qe,{x:0,y:0},{x:yr,y:Cr+Ur},{width:Lr,height:1}),ts.copy(qt.data,Qe,{x:Lr-1,y:0},{x:yr-1,y:Cr},{width:1,height:Ur}),ts.copy(qt.data,Qe,{x:0,y:0},{x:yr+Lr,y:Cr},{width:1,height:Ur})}this.image=Qe,this.iconPositions=G,this.patternPositions=ne};bc.prototype.addImages=function(M,O,G){for(var ne in M){var me=M[ne],_e={x:0,y:0,w:me.data.width+2,h:me.data.height+2};G.push(_e),O[ne]=new Vc(_e,me),me.hasRenderCallback&&this.haveRenderCallbacks.push(ne)}},bc.prototype.patchUpdatedImages=function(M,O){for(var G in M.dispatchRenderCallbacks(this.haveRenderCallbacks),M.updatedImages)this.patchUpdatedImage(this.iconPositions[G],M.getImage(G),O),this.patchUpdatedImage(this.patternPositions[G],M.getImage(G),O)},bc.prototype.patchUpdatedImage=function(M,O,G){if(M&&O&&M.version!==O.version){M.version=O.version;var ne=M.tl,me=ne[0],_e=ne[1];G.update(O.data,void 0,{x:me,y:_e})}},Xr("ImagePosition",Vc),Xr("ImageAtlas",bc);var gs={horizontal:1,vertical:2,horizontalOnly:3},Vl=function(){this.scale=1,this.fontStack="",this.imageName=null};Vl.forText=function(M,O){var G=new Vl;return G.scale=M||1,G.fontStack=O,G},Vl.forImage=function(M){var O=new Vl;return O.imageName=M,O};var No=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Hc(M,O,G,ne,me,_e,Ce,Ne,Qe,ct,dt,Rt,Wt,qt,ir,yr){var Cr,Lr=No.fromFeature(M,me);Rt===gs.vertical&&Lr.verticalizePunctuation();var Ur=mo.processBidirectionalText,Vr=mo.processStyledBidirectionalText;if(Ur&&Lr.sections.length===1){Cr=[];for(var Wr=0,hn=Ur(Lr.toString(),ju(Lr,ct,_e,O,ne,qt,ir));Wr<hn.length;Wr+=1){var xn=hn[Wr],Nn=new No;Nn.text=xn,Nn.sections=Lr.sections;for(var Bn=0;Bn<xn.length;Bn++)Nn.sectionIndex.push(0);Cr.push(Nn)}}else if(Vr){Cr=[];for(var Wn=0,la=Vr(Lr.text,Lr.sectionIndex,ju(Lr,ct,_e,O,ne,qt,ir));Wn<la.length;Wn+=1){var ca=la[Wn],$n=new No;$n.text=ca[0],$n.sectionIndex=ca[1],$n.sections=Lr.sections,Cr.push($n)}}else Cr=function(ua,Qa){for(var qa=[],ri=ua.text,Ta=0,Ya=0,xi=Qa;Ya<xi.length;Ya+=1){var hi=xi[Ya];qa.push(ua.substring(Ta,hi)),Ta=hi}return Ta<ri.length&&qa.push(ua.substring(Ta,ri.length)),qa}(Lr,ju(Lr,ct,_e,O,ne,qt,ir));var ma=[],pa={positionedLines:ma,text:Lr.toString(),top:dt[1],bottom:dt[1],left:dt[0],right:dt[0],writingMode:Rt,iconsInText:!1,verticalizable:!1};return function(ua,Qa,qa,ri,Ta,Ya,xi,hi,Ei,pi,lo,Li){for(var Ro=0,Mo=-17,Eo=0,Xo=0,jo=hi==="right"?1:hi==="left"?0:.5,co=0,Lo=0,Xi=Ta;Lo<Xi.length;Lo+=1){var go=Xi[Lo];go.trim();var Ba=go.getMaxScale(),ei=24*(Ba-1),Ui={positionedGlyphs:[],lineOffset:0};ua.positionedLines[co]=Ui;var Vi=Ui.positionedGlyphs,Fi=0;if(go.length()){for(var Ci=0;Ci<go.length();Ci++){var oi=go.getSection(Ci),Hi=go.getSectionIndex(Ci),Jo=go.getCharCode(Ci),fs=0,Uo=null,js=null,sl=null,Ao=24,Us=!(Ei===gs.horizontal||!lo&&!ga(Jo)||lo&&(qc[Jo]||(vl=Jo,En.Arabic(vl)||En["Arabic Supplement"](vl)||En["Arabic Extended-A"](vl)||En["Arabic Presentation Forms-A"](vl)||En["Arabic Presentation Forms-B"](vl))));if(oi.imageName){var Vs=ri[oi.imageName];if(!Vs)continue;sl=oi.imageName,ua.iconsInText=ua.iconsInText||!0,js=Vs.paddedRect;var Hs=Vs.displaySize;oi.scale=24*oi.scale/Li,Uo={width:Hs[0],height:Hs[1],left:1,top:-3,advance:Us?Hs[1]:Hs[0]};var Ju=24-Hs[1]*oi.scale;fs=ei+Ju,Ao=Uo.advance;var Jl=Us?Hs[0]*oi.scale-24*Ba:Hs[1]*oi.scale-24*Ba;Jl>0&&Jl>Fi&&(Fi=Jl)}else{var Qc=qa[oi.fontStack],Il=Qc&&Qc[Jo];if(Il&&Il.rect)js=Il.rect,Uo=Il.metrics;else{var eu=Qa[oi.fontStack],tu=eu&&eu[Jo];if(!tu)continue;Uo=tu.metrics}fs=24*(Ba-oi.scale)}Us?(ua.verticalizable=!0,Vi.push({glyph:Jo,imageName:sl,x:Ro,y:Mo+fs,vertical:Us,scale:oi.scale,fontStack:oi.fontStack,sectionIndex:Hi,metrics:Uo,rect:js}),Ro+=Ao*oi.scale+pi):(Vi.push({glyph:Jo,imageName:sl,x:Ro,y:Mo+fs,vertical:Us,scale:oi.scale,fontStack:oi.fontStack,sectionIndex:Hi,metrics:Uo,rect:js}),Ro+=Uo.advance*oi.scale+pi)}if(Vi.length!==0){var ru=Ro-pi;Eo=Math.max(ru,Eo),rd(Vi,0,Vi.length-1,jo,Fi)}Ro=0;var nu=Ya*Ba+Fi;Ui.lineOffset=Math.max(Fi,ei),Mo+=nu,Xo=Math.max(nu,Xo),++co}else Mo+=Ya,++co}var vl,Kl=Mo- -17,au=Uu(xi),$l=au.horizontalAlign,yl=au.verticalAlign;(function(Tc,iu,ou,su,kc,lu,Mc,cu,Ac){var uu=(iu-ou)*kc,Ql=0;Ql=lu!==Mc?-cu*su- -17:(-su*Ac+.5)*Mc;for(var ec=0,tc=Tc;ec<tc.length;ec+=1)for(var fu=tc[ec],rc=0,Sc=fu.positionedGlyphs;rc<Sc.length;rc+=1){var nc=Sc[rc];nc.x+=uu,nc.y+=Ql}})(ua.positionedLines,jo,$l,yl,Eo,Xo,Ya,Kl,Ta.length),ua.top+=-yl*Kl,ua.bottom=ua.top+Kl,ua.left+=-$l*Eo,ua.right=ua.left+Eo}(pa,O,G,ne,Cr,Ce,Ne,Qe,Rt,ct,Wt,yr),!function(ua){for(var Qa=0,qa=ua;Qa<qa.length;Qa+=1)if(qa[Qa].positionedGlyphs.length!==0)return!1;return!0}(ma)&&pa}No.fromFeature=function(M,O){for(var G=new No,ne=0;ne<M.sections.length;ne++){var me=M.sections[ne];me.image?G.addImageSection(me):G.addTextSection(me,O)}return G},No.prototype.length=function(){return this.text.length},No.prototype.getSection=function(M){return this.sections[this.sectionIndex[M]]},No.prototype.getSectionIndex=function(M){return this.sectionIndex[M]},No.prototype.getCharCode=function(M){return this.text.charCodeAt(M)},No.prototype.verticalizePunctuation=function(){this.text=function(M){for(var O="",G=0;G<M.length;G++){var ne=M.charCodeAt(G+1)||null,me=M.charCodeAt(G-1)||null;(!ne||!Fa(ne)||yc[M[G+1]])&&(!me||!Fa(me)||yc[M[G-1]])&&yc[M[G]]?O+=yc[M[G]]:O+=M[G]}return O}(this.text)},No.prototype.trim=function(){for(var M=0,O=0;O<this.text.length&&qc[this.text.charCodeAt(O)];O++)M++;for(var G=this.text.length,ne=this.text.length-1;ne>=0&&ne>=M&&qc[this.text.charCodeAt(ne)];ne--)G--;this.text=this.text.substring(M,G),this.sectionIndex=this.sectionIndex.slice(M,G)},No.prototype.substring=function(M,O){var G=new No;return G.text=this.text.substring(M,O),G.sectionIndex=this.sectionIndex.slice(M,O),G.sections=this.sections,G},No.prototype.toString=function(){return this.text},No.prototype.getMaxScale=function(){var M=this;return this.sectionIndex.reduce(function(O,G){return Math.max(O,M.sections[G].scale)},0)},No.prototype.addTextSection=function(M,O){this.text+=M.text,this.sections.push(Vl.forText(M.scale,M.fontStack||O));for(var G=this.sections.length-1,ne=0;ne<M.text.length;++ne)this.sectionIndex.push(G)},No.prototype.addImageSection=function(M){var O=M.image?M.image.name:"";if(O.length!==0){var G=this.getNextImageSectionCharCode();G?(this.text+=String.fromCharCode(G),this.sections.push(Vl.forImage(O)),this.sectionIndex.push(this.sections.length-1)):A("Reached maximum number of images 6401")}else A("Can't add FormattedSection with an empty image.")},No.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var qc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},us={};function Hf(M,O,G,ne,me,_e){if(O.imageName){var Ce=ne[O.imageName];return Ce?Ce.displaySize[0]*O.scale*24/_e+me:0}var Ne=G[O.fontStack],Qe=Ne&&Ne[M];return Qe?Qe.metrics.advance*O.scale+me:0}function qf(M,O,G,ne){var me=Math.pow(M-O,2);return ne?M<O?me/2:2*me:me+Math.abs(G)*G}function td(M,O,G){var ne=0;return M===10&&(ne-=1e4),G&&(ne+=150),M!==40&&M!==65288||(ne+=50),O!==41&&O!==65289||(ne+=50),ne}function Gf(M,O,G,ne,me,_e){for(var Ce=null,Ne=qf(O,G,me,_e),Qe=0,ct=ne;Qe<ct.length;Qe+=1){var dt=ct[Qe],Rt=qf(O-dt.x,G,me,_e)+dt.badness;Rt<=Ne&&(Ce=dt,Ne=Rt)}return{index:M,x:O,priorBreak:Ce,badness:Ne}}function ju(M,O,G,ne,me,_e,Ce){if(_e!=="point")return[];if(!M)return[];for(var Ne,Qe=[],ct=function(Cr,Lr,Ur,Vr,Wr,hn){for(var xn=0,Nn=0;Nn<Cr.length();Nn++){var Bn=Cr.getSection(Nn);xn+=Hf(Cr.getCharCode(Nn),Bn,Vr,Wr,Lr,hn)}return xn/Math.max(1,Math.ceil(xn/Ur))}(M,O,G,ne,me,Ce),dt=M.text.indexOf("\u200B")>=0,Rt=0,Wt=0;Wt<M.length();Wt++){var qt=M.getSection(Wt),ir=M.getCharCode(Wt);if(qc[ir]||(Rt+=Hf(ir,qt,ne,me,O,Ce)),Wt<M.length()-1){var yr=!!(!((Ne=ir)<11904)&&(En["Bopomofo Extended"](Ne)||En.Bopomofo(Ne)||En["CJK Compatibility Forms"](Ne)||En["CJK Compatibility Ideographs"](Ne)||En["CJK Compatibility"](Ne)||En["CJK Radicals Supplement"](Ne)||En["CJK Strokes"](Ne)||En["CJK Symbols and Punctuation"](Ne)||En["CJK Unified Ideographs Extension A"](Ne)||En["CJK Unified Ideographs"](Ne)||En["Enclosed CJK Letters and Months"](Ne)||En["Halfwidth and Fullwidth Forms"](Ne)||En.Hiragana(Ne)||En["Ideographic Description Characters"](Ne)||En["Kangxi Radicals"](Ne)||En["Katakana Phonetic Extensions"](Ne)||En.Katakana(Ne)||En["Vertical Forms"](Ne)||En["Yi Radicals"](Ne)||En["Yi Syllables"](Ne)));(us[ir]||yr||qt.imageName)&&Qe.push(Gf(Wt+1,Rt,ct,Qe,td(ir,M.getCharCode(Wt+1),yr&&dt),!1))}}return function Cr(Lr){return Lr?Cr(Lr.priorBreak).concat(Lr.index):[]}(Gf(M.length(),Rt,ct,Qe,0,!0))}function Uu(M){var O=.5,G=.5;switch(M){case"right":case"top-right":case"bottom-right":O=1;break;case"left":case"top-left":case"bottom-left":O=0}switch(M){case"bottom":case"bottom-right":case"bottom-left":G=1;break;case"top":case"top-right":case"top-left":G=0}return{horizontalAlign:O,verticalAlign:G}}function rd(M,O,G,ne,me){if(ne||me)for(var _e=M[G],Ce=_e.metrics.advance*_e.scale,Ne=(M[G].x+Ce)*ne,Qe=O;Qe<=G;Qe++)M[Qe].x-=Ne,M[Qe].y+=me}function Yf(M,O,G,ne,me,_e){var Ce,Ne=M.image;if(Ne.content){var Qe=Ne.content,ct=Ne.pixelRatio||1;Ce=[Qe[0]/ct,Qe[1]/ct,Ne.displaySize[0]-Qe[2]/ct,Ne.displaySize[1]-Qe[3]/ct]}var dt,Rt,Wt,qt,ir=O.left*_e,yr=O.right*_e;G==="width"||G==="both"?(qt=me[0]+ir-ne[3],Rt=me[0]+yr+ne[1]):Rt=(qt=me[0]+(ir+yr-Ne.displaySize[0])/2)+Ne.displaySize[0];var Cr=O.top*_e,Lr=O.bottom*_e;return G==="height"||G==="both"?(dt=me[1]+Cr-ne[0],Wt=me[1]+Lr+ne[2]):Wt=(dt=me[1]+(Cr+Lr-Ne.displaySize[1])/2)+Ne.displaySize[1],{image:Ne,top:dt,right:Rt,bottom:Wt,left:qt,collisionPadding:Ce}}us[10]=!0,us[32]=!0,us[38]=!0,us[40]=!0,us[41]=!0,us[43]=!0,us[45]=!0,us[47]=!0,us[173]=!0,us[183]=!0,us[8203]=!0,us[8208]=!0,us[8211]=!0,us[8231]=!0;var Hl=function(M){function O(G,ne,me,_e){M.call(this,G,ne),this.angle=me,_e!==void 0&&(this.segment=_e)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.clone=function(){return new O(this.x,this.y,this.angle,this.segment)},O}(n);Xr("Anchor",Hl);function Vu(M,O){var G=O.expression;if(G.kind==="constant")return{kind:"constant",layoutSize:G.evaluate(new ai(M+1))};if(G.kind==="source")return{kind:"source"};for(var ne=G.zoomStops,me=G.interpolationType,_e=0;_e<ne.length&&ne[_e]<=M;)_e++;for(var Ce=_e=Math.max(0,_e-1);Ce<ne.length&&ne[Ce]<M+1;)Ce++;Ce=Math.min(ne.length-1,Ce);var Ne=ne[_e],Qe=ne[Ce];return G.kind==="composite"?{kind:"composite",minZoom:Ne,maxZoom:Qe,interpolationType:me}:{kind:"camera",minZoom:Ne,maxZoom:Qe,minSize:G.evaluate(new ai(Ne)),maxSize:G.evaluate(new ai(Qe)),interpolationType:me}}function Wf(M,O,G){var ne=O.uSize,me=O.uSizeT,_e=G.lowerSize,Ce=G.upperSize;return M.kind==="source"?_e/128:M.kind==="composite"?Tn(_e/128,Ce/128,me):ne}function Zf(M,O){var G=0,ne=0;if(M.kind==="constant")ne=M.layoutSize;else if(M.kind!=="source"){var me=M.interpolationType,_e=M.minZoom,Ce=M.maxZoom,Ne=me?h(Na.interpolationFactor(me,O,_e,Ce),0,1):0;M.kind==="camera"?ne=Tn(M.minSize,M.maxSize,Ne):G=Ne}return{uSizeT:G,uSize:ne}}var nd=Object.freeze({__proto__:null,getSizeData:Vu,evaluateSizeForFeature:Wf,evaluateSizeForZoom:Zf,SIZE_PACK_FACTOR:128});function Xf(M,O,G,ne,me){if(O.segment===void 0)return!0;for(var _e=O,Ce=O.segment+1,Ne=0;Ne>-G/2;){if(--Ce<0)return!1;Ne-=M[Ce].dist(_e),_e=M[Ce]}Ne+=M[Ce].dist(M[Ce+1]),Ce++;for(var Qe=[],ct=0;Ne<G/2;){var dt=M[Ce-1],Rt=M[Ce],Wt=M[Ce+1];if(!Wt)return!1;var qt=dt.angleTo(Rt)-Rt.angleTo(Wt);for(qt=Math.abs((qt+3*Math.PI)%(2*Math.PI)-Math.PI),Qe.push({distance:Ne,angleDelta:qt}),ct+=qt;Ne-Qe[0].distance>ne;)ct-=Qe.shift().angleDelta;if(ct>me)return!1;Ce++,Ne+=Rt.dist(Wt)}return!0}function Jf(M){for(var O=0,G=0;G<M.length-1;G++)O+=M[G].dist(M[G+1]);return O}function Kf(M,O,G){return M?.6*O*G:0}function $f(M,O){return Math.max(M?M.right-M.left:0,O?O.right-O.left:0)}function ad(M,O,G,ne,me,_e){for(var Ce=Kf(G,me,_e),Ne=$f(G,ne)*_e,Qe=0,ct=Jf(M)/2,dt=0;dt<M.length-1;dt++){var Rt=M[dt],Wt=M[dt+1],qt=Rt.dist(Wt);if(Qe+qt>ct){var ir=(ct-Qe)/qt,yr=Tn(Rt.x,Wt.x,ir),Cr=Tn(Rt.y,Wt.y,ir),Lr=new Hl(yr,Cr,Wt.angleTo(Rt),dt);return Lr._round(),!Ce||Xf(M,Lr,Ne,Ce,O)?Lr:void 0}Qe+=qt}}function id(M,O,G,ne,me,_e,Ce,Ne,Qe){var ct=Kf(ne,_e,Ce),dt=$f(ne,me),Rt=dt*Ce,Wt=M[0].x===0||M[0].x===Qe||M[0].y===0||M[0].y===Qe;return O-Rt<O/4&&(O=Rt+O/4),function qt(ir,yr,Cr,Lr,Ur,Vr,Wr,hn,xn){for(var Nn=Vr/2,Bn=Jf(ir),Wn=0,la=yr-Cr,ca=[],$n=0;$n<ir.length-1;$n++){for(var ma=ir[$n],pa=ir[$n+1],ua=ma.dist(pa),Qa=pa.angleTo(ma);la+Cr<Wn+ua;){var qa=((la+=Cr)-Wn)/ua,ri=Tn(ma.x,pa.x,qa),Ta=Tn(ma.y,pa.y,qa);if(ri>=0&&ri<xn&&Ta>=0&&Ta<xn&&la-Nn>=0&&la+Nn<=Bn){var Ya=new Hl(ri,Ta,Qa,$n);Ya._round(),Lr&&!Xf(ir,Ya,Vr,Lr,Ur)||ca.push(Ya)}}Wn+=ua}return hn||ca.length||Wr||(ca=qt(ir,Wn/2,Cr,Lr,Ur,Vr,Wr,!0,xn)),ca}(M,Wt?O/2*Ne%O:(dt/2+2*_e)*Ce*Ne%O,O,ct,G,Rt,Wt,!1,Qe)}function Qf(M,O,G,ne,me){for(var _e=[],Ce=0;Ce<M.length;Ce++)for(var Ne=M[Ce],Qe=void 0,ct=0;ct<Ne.length-1;ct++){var dt=Ne[ct],Rt=Ne[ct+1];dt.x<O&&Rt.x<O||(dt.x<O?dt=new n(O,dt.y+(Rt.y-dt.y)*((O-dt.x)/(Rt.x-dt.x)))._round():Rt.x<O&&(Rt=new n(O,dt.y+(Rt.y-dt.y)*((O-dt.x)/(Rt.x-dt.x)))._round()),dt.y<G&&Rt.y<G||(dt.y<G?dt=new n(dt.x+(Rt.x-dt.x)*((G-dt.y)/(Rt.y-dt.y)),G)._round():Rt.y<G&&(Rt=new n(dt.x+(Rt.x-dt.x)*((G-dt.y)/(Rt.y-dt.y)),G)._round()),dt.x>=ne&&Rt.x>=ne||(dt.x>=ne?dt=new n(ne,dt.y+(Rt.y-dt.y)*((ne-dt.x)/(Rt.x-dt.x)))._round():Rt.x>=ne&&(Rt=new n(ne,dt.y+(Rt.y-dt.y)*((ne-dt.x)/(Rt.x-dt.x)))._round()),dt.y>=me&&Rt.y>=me||(dt.y>=me?dt=new n(dt.x+(Rt.x-dt.x)*((me-dt.y)/(Rt.y-dt.y)),me)._round():Rt.y>=me&&(Rt=new n(dt.x+(Rt.x-dt.x)*((me-dt.y)/(Rt.y-dt.y)),me)._round()),Qe&&dt.equals(Qe[Qe.length-1])||(Qe=[dt],_e.push(Qe)),Qe.push(Rt)))))}return _e}function eh(M,O,G,ne){var me=[],_e=M.image,Ce=_e.pixelRatio,Ne=_e.paddedRect.w-2,Qe=_e.paddedRect.h-2,ct=M.right-M.left,dt=M.bottom-M.top,Rt=_e.stretchX||[[0,Ne]],Wt=_e.stretchY||[[0,Qe]],qt=function(Ya,xi){return Ya+xi[1]-xi[0]},ir=Rt.reduce(qt,0),yr=Wt.reduce(qt,0),Cr=Ne-ir,Lr=Qe-yr,Ur=0,Vr=ir,Wr=0,hn=yr,xn=0,Nn=Cr,Bn=0,Wn=Lr;if(_e.content&&ne){var la=_e.content;Ur=Gc(Rt,0,la[0]),Wr=Gc(Wt,0,la[1]),Vr=Gc(Rt,la[0],la[2]),hn=Gc(Wt,la[1],la[3]),xn=la[0]-Ur,Bn=la[1]-Wr,Nn=la[2]-la[0]-Vr,Wn=la[3]-la[1]-hn}var ca=function(Ya,xi,hi,Ei){var pi=Yc(Ya.stretch-Ur,Vr,ct,M.left),lo=Wc(Ya.fixed-xn,Nn,Ya.stretch,ir),Li=Yc(xi.stretch-Wr,hn,dt,M.top),Ro=Wc(xi.fixed-Bn,Wn,xi.stretch,yr),Mo=Yc(hi.stretch-Ur,Vr,ct,M.left),Eo=Wc(hi.fixed-xn,Nn,hi.stretch,ir),Xo=Yc(Ei.stretch-Wr,hn,dt,M.top),jo=Wc(Ei.fixed-Bn,Wn,Ei.stretch,yr),co=new n(pi,Li),Lo=new n(Mo,Li),Xi=new n(Mo,Xo),go=new n(pi,Xo),Ba=new n(lo/Ce,Ro/Ce),ei=new n(Eo/Ce,jo/Ce),Ui=O*Math.PI/180;if(Ui){var Vi=Math.sin(Ui),Fi=Math.cos(Ui),Ci=[Fi,-Vi,Vi,Fi];co._matMult(Ci),Lo._matMult(Ci),go._matMult(Ci),Xi._matMult(Ci)}var oi=Ya.stretch+Ya.fixed,Hi=hi.stretch+hi.fixed,Jo=xi.stretch+xi.fixed,fs=Ei.stretch+Ei.fixed;return{tl:co,tr:Lo,bl:go,br:Xi,tex:{x:_e.paddedRect.x+1+oi,y:_e.paddedRect.y+1+Jo,w:Hi-oi,h:fs-Jo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ba,pixelOffsetBR:ei,minFontScaleX:Nn/Ce/ct,minFontScaleY:Wn/Ce/dt,isSDF:G}};if(ne&&(_e.stretchX||_e.stretchY))for(var $n=th(Rt,Cr,ir),ma=th(Wt,Lr,yr),pa=0;pa<$n.length-1;pa++)for(var ua=$n[pa],Qa=$n[pa+1],qa=0;qa<ma.length-1;qa++){var ri=ma[qa],Ta=ma[qa+1];me.push(ca(ua,ri,Qa,Ta))}else me.push(ca({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ne+1},{fixed:0,stretch:Qe+1}));return me}function Gc(M,O,G){for(var ne=0,me=0,_e=M;me<_e.length;me+=1){var Ce=_e[me];ne+=Math.max(O,Math.min(G,Ce[1]))-Math.max(O,Math.min(G,Ce[0]))}return ne}function th(M,O,G){for(var ne=[{fixed:-1,stretch:0}],me=0,_e=M;me<_e.length;me+=1){var Ce=_e[me],Ne=Ce[0],Qe=Ce[1],ct=ne[ne.length-1];ne.push({fixed:Ne-ct.stretch,stretch:ct.stretch}),ne.push({fixed:Ne-ct.stretch,stretch:ct.stretch+(Qe-Ne)})}return ne.push({fixed:O+1,stretch:G}),ne}function Yc(M,O,G,ne){return M/O*G+ne}function Wc(M,O,G,ne){return M-O*G/ne}var Zc=function(M,O,G,ne,me,_e,Ce,Ne,Qe,ct){if(this.boxStartIndex=M.length,Qe){var dt=_e.top,Rt=_e.bottom,Wt=_e.collisionPadding;Wt&&(dt-=Wt[1],Rt+=Wt[3]);var qt=Rt-dt;qt>0&&(qt=Math.max(10,qt),this.circleDiameter=qt)}else{var ir=_e.top*Ce-Ne,yr=_e.bottom*Ce+Ne,Cr=_e.left*Ce-Ne,Lr=_e.right*Ce+Ne,Ur=_e.collisionPadding;if(Ur&&(Cr-=Ur[0]*Ce,ir-=Ur[1]*Ce,Lr+=Ur[2]*Ce,yr+=Ur[3]*Ce),ct){var Vr=new n(Cr,ir),Wr=new n(Lr,ir),hn=new n(Cr,yr),xn=new n(Lr,yr),Nn=ct*Math.PI/180;Vr._rotate(Nn),Wr._rotate(Nn),hn._rotate(Nn),xn._rotate(Nn),Cr=Math.min(Vr.x,Wr.x,hn.x,xn.x),Lr=Math.max(Vr.x,Wr.x,hn.x,xn.x),ir=Math.min(Vr.y,Wr.y,hn.y,xn.y),yr=Math.max(Vr.y,Wr.y,hn.y,xn.y)}M.emplaceBack(O.x,O.y,Cr,ir,Lr,yr,G,ne,me)}this.boxEndIndex=M.length},ql=function(M,O){if(M===void 0&&(M=[]),O===void 0&&(O=od),this.data=M,this.length=this.data.length,this.compare=O,this.length>0)for(var G=(this.length>>1)-1;G>=0;G--)this._down(G)};function od(M,O){return M<O?-1:M>O?1:0}function sd(M,O,G){O===void 0&&(O=1),G===void 0&&(G=!1);for(var ne=1/0,me=1/0,_e=-1/0,Ce=-1/0,Ne=M[0],Qe=0;Qe<Ne.length;Qe++){var ct=Ne[Qe];(!Qe||ct.x<ne)&&(ne=ct.x),(!Qe||ct.y<me)&&(me=ct.y),(!Qe||ct.x>_e)&&(_e=ct.x),(!Qe||ct.y>Ce)&&(Ce=ct.y)}var dt=_e-ne,Rt=Ce-me,Wt=Math.min(dt,Rt),qt=Wt/2,ir=new ql([],ld);if(Wt===0)return new n(ne,me);for(var yr=ne;yr<_e;yr+=Wt)for(var Cr=me;Cr<Ce;Cr+=Wt)ir.push(new Gl(yr+qt,Cr+qt,qt,M));for(var Lr=function(Wr){for(var hn=0,xn=0,Nn=0,Bn=Wr[0],Wn=0,la=Bn.length,ca=la-1;Wn<la;ca=Wn++){var $n=Bn[Wn],ma=Bn[ca],pa=$n.x*ma.y-ma.x*$n.y;xn+=($n.x+ma.x)*pa,Nn+=($n.y+ma.y)*pa,hn+=3*pa}return new Gl(xn/hn,Nn/hn,0,Wr)}(M),Ur=ir.length;ir.length;){var Vr=ir.pop();(Vr.d>Lr.d||!Lr.d)&&(Lr=Vr,G&&console.log("found best %d after %d probes",Math.round(1e4*Vr.d)/1e4,Ur)),Vr.max-Lr.d<=O||(qt=Vr.h/2,ir.push(new Gl(Vr.p.x-qt,Vr.p.y-qt,qt,M)),ir.push(new Gl(Vr.p.x+qt,Vr.p.y-qt,qt,M)),ir.push(new Gl(Vr.p.x-qt,Vr.p.y+qt,qt,M)),ir.push(new Gl(Vr.p.x+qt,Vr.p.y+qt,qt,M)),Ur+=4)}return G&&(console.log("num probes: "+Ur),console.log("best distance: "+Lr.d)),Lr.p}function ld(M,O){return O.max-M.max}function Gl(M,O,G,ne){this.p=new n(M,O),this.h=G,this.d=function(me,_e){for(var Ce=!1,Ne=1/0,Qe=0;Qe<_e.length;Qe++)for(var ct=_e[Qe],dt=0,Rt=ct.length,Wt=Rt-1;dt<Rt;Wt=dt++){var qt=ct[dt],ir=ct[Wt];qt.y>me.y!=ir.y>me.y&&me.x<(ir.x-qt.x)*(me.y-qt.y)/(ir.y-qt.y)+qt.x&&(Ce=!Ce),Ne=Math.min(Ne,rl(me,qt,ir))}return(Ce?1:-1)*Math.sqrt(Ne)}(this.p,ne),this.max=this.d+this.h*Math.SQRT2}ql.prototype.push=function(M){this.data.push(M),this.length++,this._up(this.length-1)},ql.prototype.pop=function(){if(this.length!==0){var M=this.data[0],O=this.data.pop();return this.length--,this.length>0&&(this.data[0]=O,this._down(0)),M}},ql.prototype.peek=function(){return this.data[0]},ql.prototype._up=function(M){for(var O=this.data,G=this.compare,ne=O[M];M>0;){var me=M-1>>1,_e=O[me];if(G(ne,_e)>=0)break;O[M]=_e,M=me}O[M]=ne},ql.prototype._down=function(M){for(var O=this.data,G=this.compare,ne=this.length>>1,me=O[M];M<ne;){var _e=1+(M<<1),Ce=O[_e],Ne=_e+1;if(Ne<this.length&&G(O[Ne],Ce)<0&&(_e=Ne,Ce=O[Ne]),G(Ce,me)>=0)break;O[M]=Ce,M=_e}O[M]=me};var Hu=Number.POSITIVE_INFINITY;function rh(M,O){return O[1]!==Hu?function(G,ne,me){var _e=0,Ce=0;switch(ne=Math.abs(ne),me=Math.abs(me),G){case"top-right":case"top-left":case"top":Ce=me-7;break;case"bottom-right":case"bottom-left":case"bottom":Ce=7-me}switch(G){case"top-right":case"bottom-right":case"right":_e=-ne;break;case"top-left":case"bottom-left":case"left":_e=ne}return[_e,Ce]}(M,O[0],O[1]):function(G,ne){var me=0,_e=0;ne<0&&(ne=0);var Ce=ne/Math.sqrt(2);switch(G){case"top-right":case"top-left":_e=Ce-7;break;case"bottom-right":case"bottom-left":_e=7-Ce;break;case"bottom":_e=7-ne;break;case"top":_e=ne-7}switch(G){case"top-right":case"bottom-right":me=-Ce;break;case"top-left":case"bottom-left":me=Ce;break;case"left":me=ne;break;case"right":me=-ne}return[me,_e]}(M,O[0])}function qu(M){switch(M){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function nh(M,O,G,ne,me,_e,Ce,Ne,Qe,ct,dt,Rt,Wt,qt,ir){var yr=function(Wr,hn,xn,Nn,Bn,Wn,la,ca){for(var $n=Nn.layout.get("text-rotate").evaluate(Wn,{})*Math.PI/180,ma=[],pa=0,ua=hn.positionedLines;pa<ua.length;pa+=1)for(var Qa=ua[pa],qa=0,ri=Qa.positionedGlyphs;qa<ri.length;qa+=1){var Ta=ri[qa];if(Ta.rect){var Ya=Ta.rect||{},xi=4,hi=!0,Ei=1,pi=0,lo=(Bn||ca)&&Ta.vertical,Li=Ta.metrics.advance*Ta.scale/2;if(ca&&hn.verticalizable){var Ro=24*(Ta.scale-1),Mo=(24-Ta.metrics.width*Ta.scale)/2;pi=Qa.lineOffset/2-(Ta.imageName?-Mo:Ro)}if(Ta.imageName){var Eo=la[Ta.imageName];hi=Eo.sdf,xi=1/(Ei=Eo.pixelRatio)}var Xo=Bn?[Ta.x+Li,Ta.y]:[0,0],jo=Bn?[0,0]:[Ta.x+Li+xn[0],Ta.y+xn[1]-pi],co=[0,0];lo&&(co=jo,jo=[0,0]);var Lo=(Ta.metrics.left-xi)*Ta.scale-Li+jo[0],Xi=(-Ta.metrics.top-xi)*Ta.scale+jo[1],go=Lo+Ya.w*Ta.scale/Ei,Ba=Xi+Ya.h*Ta.scale/Ei,ei=new n(Lo,Xi),Ui=new n(go,Xi),Vi=new n(Lo,Ba),Fi=new n(go,Ba);if(lo){var Ci=new n(-Li,Li- -17),oi=-Math.PI/2,Hi=12-Li,Jo=Ta.imageName?Hi:0,fs=new n(22-Hi,-Jo),Uo=new(Function.prototype.bind.apply(n,[null].concat(co)));ei._rotateAround(oi,Ci)._add(fs)._add(Uo),Ui._rotateAround(oi,Ci)._add(fs)._add(Uo),Vi._rotateAround(oi,Ci)._add(fs)._add(Uo),Fi._rotateAround(oi,Ci)._add(fs)._add(Uo)}if($n){var js=Math.sin($n),sl=Math.cos($n),Ao=[sl,-js,js,sl];ei._matMult(Ao),Ui._matMult(Ao),Vi._matMult(Ao),Fi._matMult(Ao)}var Us=new n(0,0),Vs=new n(0,0);ma.push({tl:ei,tr:Ui,bl:Vi,br:Fi,tex:Ya,writingMode:hn.writingMode,glyphOffset:Xo,sectionIndex:Ta.sectionIndex,isSDF:hi,pixelOffsetTL:Us,pixelOffsetBR:Vs,minFontScaleX:0,minFontScaleY:0})}}return ma}(0,G,Ne,me,_e,Ce,ne,M.allowVerticalPlacement),Cr=M.textSizeData,Lr=null;Cr.kind==="source"?(Lr=[128*me.layout.get("text-size").evaluate(Ce,{})])[0]>32640&&A(M.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):Cr.kind==="composite"&&((Lr=[128*qt.compositeTextSizes[0].evaluate(Ce,{},ir),128*qt.compositeTextSizes[1].evaluate(Ce,{},ir)])[0]>32640||Lr[1]>32640)&&A(M.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),M.addSymbols(M.text,yr,Lr,Ne,_e,Ce,ct,O,Qe.lineStartIndex,Qe.lineLength,Wt,ir);for(var Ur=0,Vr=dt;Ur<Vr.length;Ur+=1)Rt[Vr[Ur]]=M.text.placedSymbolArray.length-1;return 4*yr.length}function ah(M){for(var O in M)return M[O];return null}function cd(M,O,G,ne){var me=M.compareText;if(O in me){for(var _e=me[O],Ce=_e.length-1;Ce>=0;Ce--)if(ne.dist(_e[Ce])<G)return!0}else me[O]=[];return me[O].push(ne),!1}var ud=Nl.VectorTileFeature.types,fd=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Xc(M,O,G,ne,me,_e,Ce,Ne,Qe,ct,dt,Rt,Wt){var qt=Ne?Math.min(32640,Math.round(Ne[0])):0,ir=Ne?Math.min(32640,Math.round(Ne[1])):0;M.emplaceBack(O,G,Math.round(32*ne),Math.round(32*me),_e,Ce,(qt<<1)+(Qe?1:0),ir,16*ct,16*dt,256*Rt,256*Wt)}function Gu(M,O,G){M.emplaceBack(O.x,O.y,G),M.emplaceBack(O.x,O.y,G),M.emplaceBack(O.x,O.y,G),M.emplaceBack(O.x,O.y,G)}function hd(M){for(var O=0,G=M.sections;O<G.length;O+=1)if(aa(G[O].text))return!0;return!1}var Yl=function(M){this.layoutVertexArray=new Rs,this.indexArray=new ao,this.programConfigurations=M,this.segments=new zt,this.dynamicLayoutVertexArray=new ms,this.opacityVertexArray=new ul,this.placedSymbolArray=new Ve};Yl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Yl.prototype.upload=function(M,O,G,ne){this.isEmpty()||(G&&(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,Nu.members),this.indexBuffer=M.createIndexBuffer(this.indexArray,O),this.dynamicLayoutVertexBuffer=M.createVertexBuffer(this.dynamicLayoutVertexArray,Np.members,!0),this.opacityVertexBuffer=M.createVertexBuffer(this.opacityVertexArray,fd,!0),this.opacityVertexBuffer.itemSize=1),(G||ne)&&this.programConfigurations.upload(M))},Yl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Xr("SymbolBuffers",Yl);var _c=function(M,O,G){this.layoutVertexArray=new M,this.layoutAttributes=O,this.indexArray=new G,this.segments=new zt,this.collisionVertexArray=new Fs};_c.prototype.upload=function(M){this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=M.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=M.createVertexBuffer(this.collisionVertexArray,jp.members,!0)},_c.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Xr("CollisionBuffers",_c);var ci=function(M){this.collisionBoxArray=M.collisionBoxArray,this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(Ce){return Ce.id}),this.index=M.index,this.pixelRatio=M.pixelRatio,this.sourceLayerIndex=M.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=uc([]),this.placementViewportMatrix=uc([]);var O=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Vu(this.zoom,O["text-size"]),this.iconSizeData=Vu(this.zoom,O["icon-size"]);var G=this.layers[0].layout,ne=G.get("symbol-sort-key"),me=G.get("symbol-z-order");this.sortFeaturesByKey=me!=="viewport-y"&&ne.constantOr(1)!==void 0;var _e=me==="viewport-y"||me==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=_e&&(G.get("text-allow-overlap")||G.get("icon-allow-overlap")||G.get("text-ignore-placement")||G.get("icon-ignore-placement")),G.get("symbol-placement")==="point"&&(this.writingModes=G.get("text-writing-mode").map(function(Ce){return gs[Ce]})),this.stateDependentLayerIds=this.layers.filter(function(Ce){return Ce.isStateDependent()}).map(function(Ce){return Ce.id}),this.sourceID=M.sourceID};ci.prototype.createArrays=function(){this.text=new Yl(new fi(Nu.members,this.layers,this.zoom,function(M){return/^text/.test(M)})),this.icon=new Yl(new fi(Nu.members,this.layers,this.zoom,function(M){return/^icon/.test(M)})),this.glyphOffsetArray=new _t,this.lineVertexArray=new Et,this.symbolInstances=new at},ci.prototype.calculateGlyphDependencies=function(M,O,G,ne,me){for(var _e=0;_e<M.length;_e++)if(O[M.charCodeAt(_e)]=!0,(G||ne)&&me){var Ce=yc[M.charAt(_e)];Ce&&(O[Ce.charCodeAt(0)]=!0)}},ci.prototype.populate=function(M,O,G){var ne=this.layers[0],me=ne.layout,_e=me.get("text-font"),Ce=me.get("text-field"),Ne=me.get("icon-image"),Qe=(Ce.value.kind!=="constant"||Ce.value.value instanceof cr&&!Ce.value.value.isEmpty()||Ce.value.value.toString().length>0)&&(_e.value.kind!=="constant"||_e.value.value.length>0),ct=Ne.value.kind!=="constant"||!!Ne.value.value||Object.keys(Ne.parameters).length>0,dt=me.get("symbol-sort-key");if(this.features=[],Qe||ct){for(var Rt=O.iconDependencies,Wt=O.glyphDependencies,qt=O.availableImages,ir=new ai(this.zoom),yr=0,Cr=M;yr<Cr.length;yr+=1){var Lr=Cr[yr],Ur=Lr.feature,Vr=Lr.id,Wr=Lr.index,hn=Lr.sourceLayerIndex,xn=ne._featureFilter.needGeometry,Nn={type:Ur.type,id:Vr,properties:Ur.properties,geometry:xn?vi(Ur):[]};if(ne._featureFilter.filter(ir,Nn,G)){xn||(Nn.geometry=vi(Ur));var Bn=void 0;if(Qe){var Wn=ne.getValueAndResolveTokens("text-field",Nn,G,qt),la=cr.factory(Wn);hd(la)&&(this.hasRTLText=!0),(!this.hasRTLText||Gi()==="unavailable"||this.hasRTLText&&mo.isParsed())&&(Bn=Vp(la,ne,Nn))}var ca=void 0;if(ct){var $n=ne.getValueAndResolveTokens("icon-image",Nn,G,qt);ca=$n instanceof gr?$n:gr.fromString($n)}if(Bn||ca){var ma=this.sortFeaturesByKey?dt.evaluate(Nn,{},G):void 0,pa={id:Vr,text:Bn,icon:ca,index:Wr,sourceLayerIndex:hn,geometry:vi(Ur),properties:Ur.properties,type:ud[Ur.type],sortKey:ma};if(this.features.push(pa),ca&&(Rt[ca.name]=!0),Bn){var ua=_e.evaluate(Nn,{},G).join(","),Qa=me.get("text-rotation-alignment")==="map"&&me.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(gs.vertical)>=0;for(var qa=0,ri=Bn.sections;qa<ri.length;qa+=1){var Ta=ri[qa];if(Ta.image)Rt[Ta.image.name]=!0;else{var Ya=Ra(Bn.toString()),xi=Ta.fontStack||ua,hi=Wt[xi]=Wt[xi]||{};this.calculateGlyphDependencies(Ta.text,hi,Qa,this.allowVerticalPlacement,Ya)}}}}}}me.get("symbol-placement")==="line"&&(this.features=function(Ei){var pi={},lo={},Li=[],Ro=0;function Mo(Fi){Li.push(Ei[Fi]),Ro++}function Eo(Fi,Ci,oi){var Hi=lo[Fi];return delete lo[Fi],lo[Ci]=Hi,Li[Hi].geometry[0].pop(),Li[Hi].geometry[0]=Li[Hi].geometry[0].concat(oi[0]),Hi}function Xo(Fi,Ci,oi){var Hi=pi[Ci];return delete pi[Ci],pi[Fi]=Hi,Li[Hi].geometry[0].shift(),Li[Hi].geometry[0]=oi[0].concat(Li[Hi].geometry[0]),Hi}function jo(Fi,Ci,oi){var Hi=oi?Ci[0][Ci[0].length-1]:Ci[0][0];return Fi+":"+Hi.x+":"+Hi.y}for(var co=0;co<Ei.length;co++){var Lo=Ei[co],Xi=Lo.geometry,go=Lo.text?Lo.text.toString():null;if(go){var Ba=jo(go,Xi),ei=jo(go,Xi,!0);if(Ba in lo&&ei in pi&&lo[Ba]!==pi[ei]){var Ui=Xo(Ba,ei,Xi),Vi=Eo(Ba,ei,Li[Ui].geometry);delete pi[Ba],delete lo[ei],lo[jo(go,Li[Vi].geometry,!0)]=Vi,Li[Ui].geometry=null}else Ba in lo?Eo(Ba,ei,Xi):ei in pi?Xo(Ba,ei,Xi):(Mo(co),pi[Ba]=Ro-1,lo[ei]=Ro-1)}else Mo(co)}return Li.filter(function(Fi){return Fi.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Ei,pi){return Ei.sortKey-pi.sortKey})}},ci.prototype.update=function(M,O,G){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(M,O,this.layers,G),this.icon.programConfigurations.updatePaintArrays(M,O,this.layers,G))},ci.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},ci.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},ci.prototype.upload=function(M){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(M),this.iconCollisionBox.upload(M)),this.text.upload(M,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(M,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},ci.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},ci.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},ci.prototype.addToLineVertexArray=function(M,O){var G=this.lineVertexArray.length;if(M.segment!==void 0){for(var ne=M.dist(O[M.segment+1]),me=M.dist(O[M.segment]),_e={},Ce=M.segment+1;Ce<O.length;Ce++)_e[Ce]={x:O[Ce].x,y:O[Ce].y,tileUnitDistanceFromAnchor:ne},Ce<O.length-1&&(ne+=O[Ce+1].dist(O[Ce]));for(var Ne=M.segment||0;Ne>=0;Ne--)_e[Ne]={x:O[Ne].x,y:O[Ne].y,tileUnitDistanceFromAnchor:me},Ne>0&&(me+=O[Ne-1].dist(O[Ne]));for(var Qe=0;Qe<O.length;Qe++){var ct=_e[Qe];this.lineVertexArray.emplaceBack(ct.x,ct.y,ct.tileUnitDistanceFromAnchor)}}return{lineStartIndex:G,lineLength:this.lineVertexArray.length-G}},ci.prototype.addSymbols=function(M,O,G,ne,me,_e,Ce,Ne,Qe,ct,dt,Rt){for(var Wt=M.indexArray,qt=M.layoutVertexArray,ir=M.segments.prepareSegment(4*O.length,qt,Wt,_e.sortKey),yr=this.glyphOffsetArray.length,Cr=ir.vertexLength,Lr=this.allowVerticalPlacement&&Ce===gs.vertical?Math.PI/2:0,Ur=_e.text&&_e.text.sections,Vr=0;Vr<O.length;Vr++){var Wr=O[Vr],hn=Wr.tl,xn=Wr.tr,Nn=Wr.bl,Bn=Wr.br,Wn=Wr.tex,la=Wr.pixelOffsetTL,ca=Wr.pixelOffsetBR,$n=Wr.minFontScaleX,ma=Wr.minFontScaleY,pa=Wr.glyphOffset,ua=Wr.isSDF,Qa=Wr.sectionIndex,qa=ir.vertexLength,ri=pa[1];Xc(qt,Ne.x,Ne.y,hn.x,ri+hn.y,Wn.x,Wn.y,G,ua,la.x,la.y,$n,ma),Xc(qt,Ne.x,Ne.y,xn.x,ri+xn.y,Wn.x+Wn.w,Wn.y,G,ua,ca.x,la.y,$n,ma),Xc(qt,Ne.x,Ne.y,Nn.x,ri+Nn.y,Wn.x,Wn.y+Wn.h,G,ua,la.x,ca.y,$n,ma),Xc(qt,Ne.x,Ne.y,Bn.x,ri+Bn.y,Wn.x+Wn.w,Wn.y+Wn.h,G,ua,ca.x,ca.y,$n,ma),Gu(M.dynamicLayoutVertexArray,Ne,Lr),Wt.emplaceBack(qa,qa+1,qa+2),Wt.emplaceBack(qa+1,qa+2,qa+3),ir.vertexLength+=4,ir.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(pa[0]),Vr!==O.length-1&&Qa===O[Vr+1].sectionIndex||M.programConfigurations.populatePaintArrays(qt.length,_e,_e.index,{},Rt,Ur&&Ur[Qa])}M.placedSymbolArray.emplaceBack(Ne.x,Ne.y,yr,this.glyphOffsetArray.length-yr,Cr,Qe,ct,Ne.segment,G?G[0]:0,G?G[1]:0,ne[0],ne[1],Ce,0,!1,0,dt)},ci.prototype._addCollisionDebugVertex=function(M,O,G,ne,me,_e){return O.emplaceBack(0,0),M.emplaceBack(G.x,G.y,ne,me,Math.round(_e.x),Math.round(_e.y))},ci.prototype.addCollisionDebugVertices=function(M,O,G,ne,me,_e,Ce){var Ne=me.segments.prepareSegment(4,me.layoutVertexArray,me.indexArray),Qe=Ne.vertexLength,ct=me.layoutVertexArray,dt=me.collisionVertexArray,Rt=Ce.anchorX,Wt=Ce.anchorY;this._addCollisionDebugVertex(ct,dt,_e,Rt,Wt,new n(M,O)),this._addCollisionDebugVertex(ct,dt,_e,Rt,Wt,new n(G,O)),this._addCollisionDebugVertex(ct,dt,_e,Rt,Wt,new n(G,ne)),this._addCollisionDebugVertex(ct,dt,_e,Rt,Wt,new n(M,ne)),Ne.vertexLength+=4;var qt=me.indexArray;qt.emplaceBack(Qe,Qe+1),qt.emplaceBack(Qe+1,Qe+2),qt.emplaceBack(Qe+2,Qe+3),qt.emplaceBack(Qe+3,Qe),Ne.primitiveLength+=4},ci.prototype.addDebugCollisionBoxes=function(M,O,G,ne){for(var me=M;me<O;me++){var _e=this.collisionBoxArray.get(me),Ce=_e.x1,Ne=_e.y1,Qe=_e.x2,ct=_e.y2;this.addCollisionDebugVertices(Ce,Ne,Qe,ct,ne?this.textCollisionBox:this.iconCollisionBox,_e.anchorPoint,G)}},ci.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new _c(Ts,Rf.members,F),this.iconCollisionBox=new _c(Ts,Rf.members,F);for(var M=0;M<this.symbolInstances.length;M++){var O=this.symbolInstances.get(M);this.addDebugCollisionBoxes(O.textBoxStartIndex,O.textBoxEndIndex,O,!0),this.addDebugCollisionBoxes(O.verticalTextBoxStartIndex,O.verticalTextBoxEndIndex,O,!0),this.addDebugCollisionBoxes(O.iconBoxStartIndex,O.iconBoxEndIndex,O,!1),this.addDebugCollisionBoxes(O.verticalIconBoxStartIndex,O.verticalIconBoxEndIndex,O,!1)}},ci.prototype._deserializeCollisionBoxesForSymbol=function(M,O,G,ne,me,_e,Ce,Ne,Qe){for(var ct={},dt=O;dt<G;dt++){var Rt=M.get(dt);ct.textBox={x1:Rt.x1,y1:Rt.y1,x2:Rt.x2,y2:Rt.y2,anchorPointX:Rt.anchorPointX,anchorPointY:Rt.anchorPointY},ct.textFeatureIndex=Rt.featureIndex;break}for(var Wt=ne;Wt<me;Wt++){var qt=M.get(Wt);ct.verticalTextBox={x1:qt.x1,y1:qt.y1,x2:qt.x2,y2:qt.y2,anchorPointX:qt.anchorPointX,anchorPointY:qt.anchorPointY},ct.verticalTextFeatureIndex=qt.featureIndex;break}for(var ir=_e;ir<Ce;ir++){var yr=M.get(ir);ct.iconBox={x1:yr.x1,y1:yr.y1,x2:yr.x2,y2:yr.y2,anchorPointX:yr.anchorPointX,anchorPointY:yr.anchorPointY},ct.iconFeatureIndex=yr.featureIndex;break}for(var Cr=Ne;Cr<Qe;Cr++){var Lr=M.get(Cr);ct.verticalIconBox={x1:Lr.x1,y1:Lr.y1,x2:Lr.x2,y2:Lr.y2,anchorPointX:Lr.anchorPointX,anchorPointY:Lr.anchorPointY},ct.verticalIconFeatureIndex=Lr.featureIndex;break}return ct},ci.prototype.deserializeCollisionBoxes=function(M){this.collisionArrays=[];for(var O=0;O<this.symbolInstances.length;O++){var G=this.symbolInstances.get(O);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(M,G.textBoxStartIndex,G.textBoxEndIndex,G.verticalTextBoxStartIndex,G.verticalTextBoxEndIndex,G.iconBoxStartIndex,G.iconBoxEndIndex,G.verticalIconBoxStartIndex,G.verticalIconBoxEndIndex))}},ci.prototype.hasTextData=function(){return this.text.segments.get().length>0},ci.prototype.hasIconData=function(){return this.icon.segments.get().length>0},ci.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},ci.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},ci.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},ci.prototype.addIndicesForPlacedSymbol=function(M,O){for(var G=M.placedSymbolArray.get(O),ne=G.vertexStartIndex+4*G.numGlyphs,me=G.vertexStartIndex;me<ne;me+=4)M.indexArray.emplaceBack(me,me+1,me+2),M.indexArray.emplaceBack(me+1,me+2,me+3)},ci.prototype.getSortedSymbolIndexes=function(M){if(this.sortedAngle===M&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var O=Math.sin(M),G=Math.cos(M),ne=[],me=[],_e=[],Ce=0;Ce<this.symbolInstances.length;++Ce){_e.push(Ce);var Ne=this.symbolInstances.get(Ce);ne.push(0|Math.round(O*Ne.anchorX+G*Ne.anchorY)),me.push(Ne.featureIndex)}return _e.sort(function(Qe,ct){return ne[Qe]-ne[ct]||me[ct]-me[Qe]}),_e},ci.prototype.addToSortKeyRanges=function(M,O){var G=this.sortKeyRanges[this.sortKeyRanges.length-1];G&&G.sortKey===O?G.symbolInstanceEnd=M+1:this.sortKeyRanges.push({sortKey:O,symbolInstanceStart:M,symbolInstanceEnd:M+1})},ci.prototype.sortFeatures=function(M){var O=this;if(this.sortFeaturesByY&&this.sortedAngle!==M&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(M),this.sortedAngle=M,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var G=0,ne=this.symbolInstanceIndexes;G<ne.length;G+=1){var me=ne[G],_e=this.symbolInstances.get(me);this.featureSortOrder.push(_e.featureIndex),[_e.rightJustifiedTextSymbolIndex,_e.centerJustifiedTextSymbolIndex,_e.leftJustifiedTextSymbolIndex].forEach(function(Ce,Ne,Qe){Ce>=0&&Qe.indexOf(Ce)===Ne&&O.addIndicesForPlacedSymbol(O.text,Ce)}),_e.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,_e.verticalPlacedTextSymbolIndex),_e.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,_e.placedIconSymbolIndex),_e.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,_e.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Xr("SymbolBucket",ci,{omit:["layers","collisionBoxArray","features","compareText"]}),ci.MAX_GLYPHS=65535,ci.addDynamicAttributes=Gu;var pd=new Oo({"symbol-placement":new fa(be.layout_symbol["symbol-placement"]),"symbol-spacing":new fa(be.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new fa(be.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ba(be.layout_symbol["symbol-sort-key"]),"symbol-z-order":new fa(be.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new fa(be.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new fa(be.layout_symbol["icon-ignore-placement"]),"icon-optional":new fa(be.layout_symbol["icon-optional"]),"icon-rotation-alignment":new fa(be.layout_symbol["icon-rotation-alignment"]),"icon-size":new ba(be.layout_symbol["icon-size"]),"icon-text-fit":new fa(be.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new fa(be.layout_symbol["icon-text-fit-padding"]),"icon-image":new ba(be.layout_symbol["icon-image"]),"icon-rotate":new ba(be.layout_symbol["icon-rotate"]),"icon-padding":new fa(be.layout_symbol["icon-padding"]),"icon-keep-upright":new fa(be.layout_symbol["icon-keep-upright"]),"icon-offset":new ba(be.layout_symbol["icon-offset"]),"icon-anchor":new ba(be.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new fa(be.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new fa(be.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new fa(be.layout_symbol["text-rotation-alignment"]),"text-field":new ba(be.layout_symbol["text-field"]),"text-font":new ba(be.layout_symbol["text-font"]),"text-size":new ba(be.layout_symbol["text-size"]),"text-max-width":new ba(be.layout_symbol["text-max-width"]),"text-line-height":new fa(be.layout_symbol["text-line-height"]),"text-letter-spacing":new ba(be.layout_symbol["text-letter-spacing"]),"text-justify":new ba(be.layout_symbol["text-justify"]),"text-radial-offset":new ba(be.layout_symbol["text-radial-offset"]),"text-variable-anchor":new fa(be.layout_symbol["text-variable-anchor"]),"text-anchor":new ba(be.layout_symbol["text-anchor"]),"text-max-angle":new fa(be.layout_symbol["text-max-angle"]),"text-writing-mode":new fa(be.layout_symbol["text-writing-mode"]),"text-rotate":new ba(be.layout_symbol["text-rotate"]),"text-padding":new fa(be.layout_symbol["text-padding"]),"text-keep-upright":new fa(be.layout_symbol["text-keep-upright"]),"text-transform":new ba(be.layout_symbol["text-transform"]),"text-offset":new ba(be.layout_symbol["text-offset"]),"text-allow-overlap":new fa(be.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new fa(be.layout_symbol["text-ignore-placement"]),"text-optional":new fa(be.layout_symbol["text-optional"])}),Yu={paint:new Oo({"icon-opacity":new ba(be.paint_symbol["icon-opacity"]),"icon-color":new ba(be.paint_symbol["icon-color"]),"icon-halo-color":new ba(be.paint_symbol["icon-halo-color"]),"icon-halo-width":new ba(be.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ba(be.paint_symbol["icon-halo-blur"]),"icon-translate":new fa(be.paint_symbol["icon-translate"]),"icon-translate-anchor":new fa(be.paint_symbol["icon-translate-anchor"]),"text-opacity":new ba(be.paint_symbol["text-opacity"]),"text-color":new ba(be.paint_symbol["text-color"],{runtimeType:wt,getOverride:function(M){return M.textColor},hasOverride:function(M){return!!M.textColor}}),"text-halo-color":new ba(be.paint_symbol["text-halo-color"]),"text-halo-width":new ba(be.paint_symbol["text-halo-width"]),"text-halo-blur":new ba(be.paint_symbol["text-halo-blur"]),"text-translate":new fa(be.paint_symbol["text-translate"]),"text-translate-anchor":new fa(be.paint_symbol["text-translate-anchor"])}),layout:pd},Wl=function(M){this.type=M.property.overrides?M.property.overrides.runtimeType:Pt,this.defaultValue=M};Wl.prototype.evaluate=function(M){if(M.formattedSection){var O=this.defaultValue.property.overrides;if(O&&O.hasOverride(M.formattedSection))return O.getOverride(M.formattedSection)}return M.feature&&M.featureState?this.defaultValue.evaluate(M.feature,M.featureState):this.defaultValue.property.specification.default},Wl.prototype.eachChild=function(M){this.defaultValue.isConstant()||M(this.defaultValue.value._styleExpression.expression)},Wl.prototype.outputDefined=function(){return!1},Wl.prototype.serialize=function(){return null},Xr("FormatSectionOverride",Wl,{omit:["defaultValue"]});var dd=function(M){function O(G){M.call(this,G,Yu)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.recalculate=function(G,ne){if(M.prototype.recalculate.call(this,G,ne),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var me=this.layout.get("text-writing-mode");if(me){for(var _e=[],Ce=0,Ne=me;Ce<Ne.length;Ce+=1){var Qe=Ne[Ce];_e.indexOf(Qe)<0&&_e.push(Qe)}this.layout._values["text-writing-mode"]=_e}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},O.prototype.getValueAndResolveTokens=function(G,ne,me,_e){var Ce=this.layout.get(G).evaluate(ne,{},me,_e),Ne=this._unevaluatedLayout._values[G];return Ne.isDataDriven()||$t(Ne.value)||!Ce?Ce:function(Qe,ct){return ct.replace(/{([^{}]+)}/g,function(dt,Rt){return Rt in Qe?String(Qe[Rt]):""})}(ne.properties,Ce)},O.prototype.createBucket=function(G){return new ci(G)},O.prototype.queryRadius=function(){return 0},O.prototype.queryIntersectsFeature=function(){return!1},O.prototype._setPaintOverrides=function(){for(var G=0,ne=Yu.paint.overridableProperties;G<ne.length;G+=1){var me=ne[G];if(O.hasPaintOverride(this.layout,me)){var _e=this.paint.get(me),Ce=new Wl(_e),Ne=new Jt(Ce,_e.property.specification),Qe=null;Qe=_e.value.kind==="constant"||_e.value.kind==="source"?new ar("source",Ne):new pr("composite",Ne,_e.value.zoomStops,_e.value._interpolationType),this.paint._values[me]=new Ri(_e.property,Qe,_e.parameters)}}},O.prototype._handleOverridablePaintPropertyUpdate=function(G,ne,me){return!(!this.layout||ne.isDataDriven()||me.isDataDriven())&&O.hasPaintOverride(this.layout,G)},O.hasPaintOverride=function(G,ne){var me=G.get("text-field"),_e=Yu.paint.properties[ne],Ce=!1,Ne=function(dt){for(var Rt=0,Wt=dt;Rt<Wt.length;Rt+=1){var qt=Wt[Rt];if(_e.overrides&&_e.overrides.hasOverride(qt))return void(Ce=!0)}};if(me.value.kind==="constant"&&me.value.value instanceof cr)Ne(me.value.value.sections);else if(me.value.kind==="source"){var Qe=function(dt){if(!Ce)if(dt instanceof fn&&Fr(dt.value)===nt){var Rt=dt.value;Ne(Rt.sections)}else dt instanceof yn?Ne(dt.sections):dt.eachChild(Qe)},ct=me.value;ct._styleExpression&&Qe(ct._styleExpression.expression)}return Ce},O}(Zo),md={paint:new Oo({"background-color":new fa(be.paint_background["background-color"]),"background-pattern":new Xs(be.paint_background["background-pattern"]),"background-opacity":new fa(be.paint_background["background-opacity"])})},gd=function(M){function O(G){M.call(this,G,md)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O}(Zo),vd={paint:new Oo({"raster-opacity":new fa(be.paint_raster["raster-opacity"]),"raster-hue-rotate":new fa(be.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new fa(be.paint_raster["raster-brightness-min"]),"raster-brightness-max":new fa(be.paint_raster["raster-brightness-max"]),"raster-saturation":new fa(be.paint_raster["raster-saturation"]),"raster-contrast":new fa(be.paint_raster["raster-contrast"]),"raster-resampling":new fa(be.paint_raster["raster-resampling"]),"raster-fade-duration":new fa(be.paint_raster["raster-fade-duration"])})},yd=function(M){function O(G){M.call(this,G,vd)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O}(Zo),xd=function(M){function O(G){M.call(this,G,{}),this.implementation=G}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},O.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},O.prototype.recalculate=function(){},O.prototype.updateTransitions=function(){},O.prototype.hasTransition=function(){},O.prototype.serialize=function(){},O.prototype.onAdd=function(G){this.implementation.onAdd&&this.implementation.onAdd(G,G.painter.context.gl)},O.prototype.onRemove=function(G){this.implementation.onRemove&&this.implementation.onRemove(G,G.painter.context.gl)},O}(Zo),bd={circle:ip,heatmap:sp,hillshade:cp,fill:Mp,"fill-extrusion":Dp,line:Bp,symbol:dd,background:gd,raster:yd},ih=self.HTMLImageElement,oh=self.HTMLCanvasElement,sh=self.HTMLVideoElement,lh=self.ImageData,Jc=self.ImageBitmap,Ll=function(M,O,G,ne){this.context=M,this.format=G,this.texture=M.gl.createTexture(),this.update(O,ne)};Ll.prototype.update=function(M,O,G){var ne=M.width,me=M.height,_e=!(this.size&&this.size[0]===ne&&this.size[1]===me||G),Ce=this.context,Ne=Ce.gl;if(this.useMipmap=Boolean(O&&O.useMipmap),Ne.bindTexture(Ne.TEXTURE_2D,this.texture),Ce.pixelStoreUnpackFlipY.set(!1),Ce.pixelStoreUnpack.set(1),Ce.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ne.RGBA&&(!O||O.premultiply!==!1)),_e)this.size=[ne,me],M instanceof ih||M instanceof oh||M instanceof sh||M instanceof lh||Jc&&M instanceof Jc?Ne.texImage2D(Ne.TEXTURE_2D,0,this.format,this.format,Ne.UNSIGNED_BYTE,M):Ne.texImage2D(Ne.TEXTURE_2D,0,this.format,ne,me,0,this.format,Ne.UNSIGNED_BYTE,M.data);else{var Qe=G||{x:0,y:0},ct=Qe.x,dt=Qe.y;M instanceof ih||M instanceof oh||M instanceof sh||M instanceof lh||Jc&&M instanceof Jc?Ne.texSubImage2D(Ne.TEXTURE_2D,0,ct,dt,Ne.RGBA,Ne.UNSIGNED_BYTE,M):Ne.texSubImage2D(Ne.TEXTURE_2D,0,ct,dt,ne,me,Ne.RGBA,Ne.UNSIGNED_BYTE,M.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Ne.generateMipmap(Ne.TEXTURE_2D)},Ll.prototype.bind=function(M,O,G){var ne=this.context.gl;ne.bindTexture(ne.TEXTURE_2D,this.texture),G!==ne.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(G=ne.LINEAR),M!==this.filter&&(ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_MAG_FILTER,M),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_MIN_FILTER,G||M),this.filter=M),O!==this.wrap&&(ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_WRAP_S,O),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_WRAP_T,O),this.wrap=O)},Ll.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Ll.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Wu=function(M){var O=this;this._callback=M,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){O._triggered=!1,O._callback()})};Wu.prototype.trigger=function(){var M=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){M._triggered=!1,M._callback()},0))},Wu.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Zl=function(M,O,G){this.target=M,this.parent=O,this.mapId=G,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},f(["receive","process"],this),this.invoker=new Wu(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=S()?M:self};function ch(M,O,G){var ne=2*Math.PI*6378137/256/Math.pow(2,G);return[M*ne-2*Math.PI*6378137/2,O*ne-2*Math.PI*6378137/2]}Zl.prototype.send=function(M,O,G,ne,me){var _e=this;me===void 0&&(me=!1);var Ce=Math.round(1e18*Math.random()).toString(36).substring(0,10);G&&(this.callbacks[Ce]=G);var Ne=D(this.globalScope)?void 0:[];return this.target.postMessage({id:Ce,type:M,hasCallback:!!G,targetMapId:ne,mustQueue:me,sourceMapId:this.mapId,data:ra(O,Ne)},Ne),{cancel:function(){G&&delete _e.callbacks[Ce],_e.target.postMessage({id:Ce,type:"<cancel>",targetMapId:ne,sourceMapId:_e.mapId})}}},Zl.prototype.receive=function(M){var O=M.data,G=O.id;if(G&&(!O.targetMapId||this.mapId===O.targetMapId))if(O.type==="<cancel>"){delete this.tasks[G];var ne=this.cancelCallbacks[G];delete this.cancelCallbacks[G],ne&&ne()}else S()||O.mustQueue?(this.tasks[G]=O,this.taskQueue.push(G),this.invoker.trigger()):this.processTask(G,O)},Zl.prototype.process=function(){if(this.taskQueue.length){var M=this.taskQueue.shift(),O=this.tasks[M];delete this.tasks[M],this.taskQueue.length&&this.invoker.trigger(),O&&this.processTask(M,O)}},Zl.prototype.processTask=function(M,O){var G=this;if(O.type==="<response>"){var ne=this.callbacks[M];delete this.callbacks[M],ne&&(O.error?ne(ka(O.error)):ne(null,ka(O.data)))}else{var me=!1,_e=D(this.globalScope)?void 0:[],Ce=O.hasCallback?function(dt,Rt){me=!0,delete G.cancelCallbacks[M],G.target.postMessage({id:M,type:"<response>",sourceMapId:G.mapId,error:dt?ra(dt):null,data:ra(Rt,_e)},_e)}:function(dt){me=!0},Ne=null,Qe=ka(O.data);if(this.parent[O.type])Ne=this.parent[O.type](O.sourceMapId,Qe,Ce);else if(this.parent.getWorkerSource){var ct=O.type.split(".");Ne=this.parent.getWorkerSource(O.sourceMapId,ct[0],Qe.source)[ct[1]](Qe,Ce)}else Ce(new Error("Could not find function "+O.type));!me&&Ne&&Ne.cancel&&(this.cancelCallbacks[M]=Ne.cancel)}},Zl.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var oo=function(M,O){M&&(O?this.setSouthWest(M).setNorthEast(O):M.length===4?this.setSouthWest([M[0],M[1]]).setNorthEast([M[2],M[3]]):this.setSouthWest(M[0]).setNorthEast(M[1]))};oo.prototype.setNorthEast=function(M){return this._ne=M instanceof Si?new Si(M.lng,M.lat):Si.convert(M),this},oo.prototype.setSouthWest=function(M){return this._sw=M instanceof Si?new Si(M.lng,M.lat):Si.convert(M),this},oo.prototype.extend=function(M){var O,G,ne=this._sw,me=this._ne;if(M instanceof Si)O=M,G=M;else{if(!(M instanceof oo)){if(Array.isArray(M)){if(M.length===4||M.every(Array.isArray)){var _e=M;return this.extend(oo.convert(_e))}var Ce=M;return this.extend(Si.convert(Ce))}return this}if(O=M._sw,G=M._ne,!O||!G)return this}return ne||me?(ne.lng=Math.min(O.lng,ne.lng),ne.lat=Math.min(O.lat,ne.lat),me.lng=Math.max(G.lng,me.lng),me.lat=Math.max(G.lat,me.lat)):(this._sw=new Si(O.lng,O.lat),this._ne=new Si(G.lng,G.lat)),this},oo.prototype.getCenter=function(){return new Si((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},oo.prototype.getSouthWest=function(){return this._sw},oo.prototype.getNorthEast=function(){return this._ne},oo.prototype.getNorthWest=function(){return new Si(this.getWest(),this.getNorth())},oo.prototype.getSouthEast=function(){return new Si(this.getEast(),this.getSouth())},oo.prototype.getWest=function(){return this._sw.lng},oo.prototype.getSouth=function(){return this._sw.lat},oo.prototype.getEast=function(){return this._ne.lng},oo.prototype.getNorth=function(){return this._ne.lat},oo.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},oo.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},oo.prototype.isEmpty=function(){return!(this._sw&&this._ne)},oo.prototype.contains=function(M){var O=Si.convert(M),G=O.lng,ne=O.lat,me=this._sw.lat<=ne&&ne<=this._ne.lat,_e=this._sw.lng<=G&&G<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_e=this._sw.lng>=G&&G>=this._ne.lng),me&&_e},oo.convert=function(M){return!M||M instanceof oo?M:new oo(M)};var Si=function(M,O){if(isNaN(M)||isNaN(O))throw new Error("Invalid LngLat object: ("+M+", "+O+")");if(this.lng=+M,this.lat=+O,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Si.prototype.wrap=function(){return new Si(s(this.lng,-180,180),this.lat)},Si.prototype.toArray=function(){return[this.lng,this.lat]},Si.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Si.prototype.distanceTo=function(M){var O=Math.PI/180,G=this.lat*O,ne=M.lat*O,me=Math.sin(G)*Math.sin(ne)+Math.cos(G)*Math.cos(ne)*Math.cos((M.lng-this.lng)*O);return 63710088e-1*Math.acos(Math.min(me,1))},Si.prototype.toBounds=function(M){M===void 0&&(M=0);var O=360*M/40075017,G=O/Math.cos(Math.PI/180*this.lat);return new oo(new Si(this.lng-G,this.lat-O),new Si(this.lng+G,this.lat+O))},Si.convert=function(M){if(M instanceof Si)return M;if(Array.isArray(M)&&(M.length===2||M.length===3))return new Si(Number(M[0]),Number(M[1]));if(!Array.isArray(M)&&typeof M=="object"&&M!==null)return new Si(Number("lng"in M?M.lng:M.lon),Number(M.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var uh=2*Math.PI*63710088e-1;function fh(M){return uh*Math.cos(M*Math.PI/180)}function hh(M){return(180+M)/360}function ph(M){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+M*Math.PI/360)))/360}function dh(M,O){return M/fh(O)}function Zu(M){var O=180-360*M;return 360/Math.PI*Math.atan(Math.exp(O*Math.PI/180))-90}var Cl=function(M,O,G){G===void 0&&(G=0),this.x=+M,this.y=+O,this.z=+G};Cl.fromLngLat=function(M,O){O===void 0&&(O=0);var G=Si.convert(M);return new Cl(hh(G.lng),ph(G.lat),dh(O,G.lat))},Cl.prototype.toLngLat=function(){return new Si(360*this.x-180,Zu(this.y))},Cl.prototype.toAltitude=function(){return M=this.z,O=this.y,M*fh(Zu(O));var M,O},Cl.prototype.meterInMercatorCoordinateUnits=function(){return 1/uh*(M=Zu(this.y),1/Math.cos(M*Math.PI/180));var M};var Pl=function(M,O,G){this.z=M,this.x=O,this.y=G,this.key=wc(0,M,M,O,G)};Pl.prototype.equals=function(M){return this.z===M.z&&this.x===M.x&&this.y===M.y},Pl.prototype.url=function(M,O){var G,ne,me,_e,Ce,Ne=(G=this.x,ne=this.y,me=this.z,_e=ch(256*G,256*(ne=Math.pow(2,me)-ne-1),me),Ce=ch(256*(G+1),256*(ne+1),me),_e[0]+","+_e[1]+","+Ce[0]+","+Ce[1]),Qe=function(ct,dt,Rt){for(var Wt,qt="",ir=ct;ir>0;ir--)qt+=(dt&(Wt=1<<ir-1)?1:0)+(Rt&Wt?2:0);return qt}(this.z,this.x,this.y);return M[(this.x+this.y)%M.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(O==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",Qe).replace("{bbox-epsg-3857}",Ne)},Pl.prototype.getTilePoint=function(M){var O=Math.pow(2,this.z);return new n(8192*(M.x*O-this.x),8192*(M.y*O-this.y))},Pl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var mh=function(M,O){this.wrap=M,this.canonical=O,this.key=wc(M,O.z,O.z,O.x,O.y)},so=function(M,O,G,ne,me){this.overscaledZ=M,this.wrap=O,this.canonical=new Pl(G,+ne,+me),this.key=wc(O,M,G,ne,me)};function wc(M,O,G,ne,me){(M*=2)<0&&(M=-1*M-1);var _e=1<<G;return(_e*_e*M+_e*me+ne).toString(36)+G.toString(36)+O.toString(36)}so.prototype.equals=function(M){return this.overscaledZ===M.overscaledZ&&this.wrap===M.wrap&&this.canonical.equals(M.canonical)},so.prototype.scaledTo=function(M){var O=this.canonical.z-M;return M>this.canonical.z?new so(M,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new so(M,this.wrap,M,this.canonical.x>>O,this.canonical.y>>O)},so.prototype.calculateScaledKey=function(M,O){var G=this.canonical.z-M;return M>this.canonical.z?wc(this.wrap*+O,M,this.canonical.z,this.canonical.x,this.canonical.y):wc(this.wrap*+O,M,M,this.canonical.x>>G,this.canonical.y>>G)},so.prototype.isChildOf=function(M){if(M.wrap!==this.wrap)return!1;var O=this.canonical.z-M.canonical.z;return M.overscaledZ===0||M.overscaledZ<this.overscaledZ&&M.canonical.x===this.canonical.x>>O&&M.canonical.y===this.canonical.y>>O},so.prototype.children=function(M){if(this.overscaledZ>=M)return[new so(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var O=this.canonical.z+1,G=2*this.canonical.x,ne=2*this.canonical.y;return[new so(O,this.wrap,O,G,ne),new so(O,this.wrap,O,G+1,ne),new so(O,this.wrap,O,G,ne+1),new so(O,this.wrap,O,G+1,ne+1)]},so.prototype.isLessThan=function(M){return this.wrap<M.wrap||!(this.wrap>M.wrap)&&(this.overscaledZ<M.overscaledZ||!(this.overscaledZ>M.overscaledZ)&&(this.canonical.x<M.canonical.x||!(this.canonical.x>M.canonical.x)&&this.canonical.y<M.canonical.y))},so.prototype.wrapped=function(){return new so(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},so.prototype.unwrapTo=function(M){return new so(this.overscaledZ,M,this.canonical.z,this.canonical.x,this.canonical.y)},so.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},so.prototype.toUnwrapped=function(){return new mh(this.wrap,this.canonical)},so.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},so.prototype.getTilePoint=function(M){return this.canonical.getTilePoint(new Cl(M.x-this.wrap,M.y))},Xr("CanonicalTileID",Pl),Xr("OverscaledTileID",so,{omit:["posMatrix"]});var il=function(M,O,G){if(this.uid=M,O.height!==O.width)throw new RangeError("DEM tiles must be square");if(G&&G!=="mapbox"&&G!=="terrarium")return A('"'+G+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=O.height;var ne=this.dim=O.height-2;this.data=new Uint32Array(O.data.buffer),this.encoding=G||"mapbox";for(var me=0;me<ne;me++)this.data[this._idx(-1,me)]=this.data[this._idx(0,me)],this.data[this._idx(ne,me)]=this.data[this._idx(ne-1,me)],this.data[this._idx(me,-1)]=this.data[this._idx(me,0)],this.data[this._idx(me,ne)]=this.data[this._idx(me,ne-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(ne,-1)]=this.data[this._idx(ne-1,0)],this.data[this._idx(-1,ne)]=this.data[this._idx(0,ne-1)],this.data[this._idx(ne,ne)]=this.data[this._idx(ne-1,ne-1)]};il.prototype.get=function(M,O){var G=new Uint8Array(this.data.buffer),ne=4*this._idx(M,O);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(G[ne],G[ne+1],G[ne+2])},il.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},il.prototype._idx=function(M,O){if(M<-1||M>=this.dim+1||O<-1||O>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(O+1)*this.stride+(M+1)},il.prototype._unpackMapbox=function(M,O,G){return(256*M*256+256*O+G)/10-1e4},il.prototype._unpackTerrarium=function(M,O,G){return 256*M+O+G/256-32768},il.prototype.getPixels=function(){return new ts({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},il.prototype.backfillBorder=function(M,O,G){if(this.dim!==M.dim)throw new Error("dem dimension mismatch");var ne=O*this.dim,me=O*this.dim+this.dim,_e=G*this.dim,Ce=G*this.dim+this.dim;switch(O){case-1:ne=me-1;break;case 1:me=ne+1}switch(G){case-1:_e=Ce-1;break;case 1:Ce=_e+1}for(var Ne=-O*this.dim,Qe=-G*this.dim,ct=_e;ct<Ce;ct++)for(var dt=ne;dt<me;dt++)this.data[this._idx(dt,ct)]=M.data[this._idx(dt+Ne,ct+Qe)]},Xr("DEMData",il);var Kc=function(M){this._stringToNumber={},this._numberToString=[];for(var O=0;O<M.length;O++){var G=M[O];this._stringToNumber[G]=O,this._numberToString[O]=G}};Kc.prototype.encode=function(M){return this._stringToNumber[M]},Kc.prototype.decode=function(M){return this._numberToString[M]};var $c=function(M,O,G,ne,me){this.type="Feature",this._vectorTileFeature=M,M._z=O,M._x=G,M._y=ne,this.properties=M.properties,this.id=me},Xu={geometry:{configurable:!0}};Xu.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Xu.geometry.set=function(M){this._geometry=M},$c.prototype.toJSON=function(){var M={geometry:this.geometry};for(var O in this)O!=="_geometry"&&O!=="_vectorTileFeature"&&(M[O]=this[O]);return M},Object.defineProperties($c.prototype,Xu);var Xl=function(){this.state={},this.stateChanges={},this.deletedStates={}};Xl.prototype.updateState=function(M,O,G){var ne=String(O);if(this.stateChanges[M]=this.stateChanges[M]||{},this.stateChanges[M][ne]=this.stateChanges[M][ne]||{},a(this.stateChanges[M][ne],G),this.deletedStates[M]===null)for(var me in this.deletedStates[M]={},this.state[M])me!==ne&&(this.deletedStates[M][me]=null);else if(this.deletedStates[M]&&this.deletedStates[M][ne]===null)for(var _e in this.deletedStates[M][ne]={},this.state[M][ne])G[_e]||(this.deletedStates[M][ne][_e]=null);else for(var Ce in G)this.deletedStates[M]&&this.deletedStates[M][ne]&&this.deletedStates[M][ne][Ce]===null&&delete this.deletedStates[M][ne][Ce]},Xl.prototype.removeFeatureState=function(M,O,G){if(this.deletedStates[M]!==null){var ne=String(O);if(this.deletedStates[M]=this.deletedStates[M]||{},G&&O!==void 0)this.deletedStates[M][ne]!==null&&(this.deletedStates[M][ne]=this.deletedStates[M][ne]||{},this.deletedStates[M][ne][G]=null);else if(O!==void 0)if(this.stateChanges[M]&&this.stateChanges[M][ne])for(G in this.deletedStates[M][ne]={},this.stateChanges[M][ne])this.deletedStates[M][ne][G]=null;else this.deletedStates[M][ne]=null;else this.deletedStates[M]=null}},Xl.prototype.getState=function(M,O){var G=String(O),ne=this.state[M]||{},me=this.stateChanges[M]||{},_e=a({},ne[G],me[G]);if(this.deletedStates[M]===null)return{};if(this.deletedStates[M]){var Ce=this.deletedStates[M][O];if(Ce===null)return{};for(var Ne in Ce)delete _e[Ne]}return _e},Xl.prototype.initializeTileState=function(M,O){M.setFeatureState(this.state,O)},Xl.prototype.coalesceChanges=function(M,O){var G={};for(var ne in this.stateChanges){this.state[ne]=this.state[ne]||{};var me={};for(var _e in this.stateChanges[ne])this.state[ne][_e]||(this.state[ne][_e]={}),a(this.state[ne][_e],this.stateChanges[ne][_e]),me[_e]=this.state[ne][_e];G[ne]=me}for(var Ce in this.deletedStates){this.state[Ce]=this.state[Ce]||{};var Ne={};if(this.deletedStates[Ce]===null)for(var Qe in this.state[Ce])Ne[Qe]={},this.state[Ce][Qe]={};else for(var ct in this.deletedStates[Ce]){if(this.deletedStates[Ce][ct]===null)this.state[Ce][ct]={};else for(var dt=0,Rt=Object.keys(this.deletedStates[Ce][ct]);dt<Rt.length;dt+=1){var Wt=Rt[dt];delete this.state[Ce][ct][Wt]}Ne[ct]=this.state[Ce][ct]}G[Ce]=G[Ce]||{},a(G[Ce],Ne)}if(this.stateChanges={},this.deletedStates={},Object.keys(G).length!==0)for(var qt in M)M[qt].setFeatureState(G,O)};var ol=function(M,O){this.tileID=M,this.x=M.canonical.x,this.y=M.canonical.y,this.z=M.canonical.z,this.grid=new cn(8192,16,0),this.grid3D=new cn(8192,16,0),this.featureIndexArray=new At,this.promoteId=O};function gh(M,O,G,ne,me){return b(M,function(_e,Ce){var Ne=O instanceof ss?O.get(Ce):null;return Ne&&Ne.evaluate?Ne.evaluate(G,ne,me):Ne})}function vh(M){for(var O=1/0,G=1/0,ne=-1/0,me=-1/0,_e=0,Ce=M;_e<Ce.length;_e+=1){var Ne=Ce[_e];O=Math.min(O,Ne.x),G=Math.min(G,Ne.y),ne=Math.max(ne,Ne.x),me=Math.max(me,Ne.y)}return{minX:O,minY:G,maxX:ne,maxY:me}}function _d(M,O){return O-M}ol.prototype.insert=function(M,O,G,ne,me,_e){var Ce=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(G,ne,me);for(var Ne=_e?this.grid3D:this.grid,Qe=0;Qe<O.length;Qe++){for(var ct=O[Qe],dt=[1/0,1/0,-1/0,-1/0],Rt=0;Rt<ct.length;Rt++){var Wt=ct[Rt];dt[0]=Math.min(dt[0],Wt.x),dt[1]=Math.min(dt[1],Wt.y),dt[2]=Math.max(dt[2],Wt.x),dt[3]=Math.max(dt[3],Wt.y)}dt[0]<8192&&dt[1]<8192&&dt[2]>=0&&dt[3]>=0&&Ne.insert(Ce,dt[0],dt[1],dt[2],dt[3])}},ol.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Nl.VectorTile(new jc(this.rawTileData)).layers,this.sourceLayerCoder=new Kc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},ol.prototype.query=function(M,O,G,ne){var me=this;this.loadVTLayers();for(var _e=M.params||{},Ce=8192/M.tileSize/M.scale,Ne=Sa(_e.filter),Qe=M.queryGeometry,ct=M.queryPadding*Ce,dt=vh(Qe),Rt=this.grid.query(dt.minX-ct,dt.minY-ct,dt.maxX+ct,dt.maxY+ct),Wt=vh(M.cameraQueryGeometry),qt=this.grid3D.query(Wt.minX-ct,Wt.minY-ct,Wt.maxX+ct,Wt.maxY+ct,function(hn,xn,Nn,Bn){return function(Wn,la,ca,$n,ma){for(var pa=0,ua=Wn;pa<ua.length;pa+=1){var Qa=ua[pa];if(la<=Qa.x&&ca<=Qa.y&&$n>=Qa.x&&ma>=Qa.y)return!0}var qa=[new n(la,ca),new n(la,ma),new n($n,ma),new n($n,ca)];if(Wn.length>2){for(var ri=0,Ta=qa;ri<Ta.length;ri+=1)if(cs(Wn,Ta[ri]))return!0}for(var Ya=0;Ya<Wn.length-1;Ya++)if(Al(Wn[Ya],Wn[Ya+1],qa))return!0;return!1}(M.cameraQueryGeometry,hn-ct,xn-ct,Nn+ct,Bn+ct)}),ir=0,yr=qt;ir<yr.length;ir+=1){var Cr=yr[ir];Rt.push(Cr)}Rt.sort(_d);for(var Lr,Ur={},Vr=function(hn){var xn=Rt[hn];if(xn!==Lr){Lr=xn;var Nn=me.featureIndexArray.get(xn),Bn=null;me.loadMatchingFeature(Ur,Nn.bucketIndex,Nn.sourceLayerIndex,Nn.featureIndex,Ne,_e.layers,_e.availableImages,O,G,ne,function(Wn,la,ca){return Bn||(Bn=vi(Wn)),la.queryIntersectsFeature(Qe,Wn,ca,Bn,me.z,M.transform,Ce,M.pixelPosMatrix)})}},Wr=0;Wr<Rt.length;Wr++)Vr(Wr);return Ur},ol.prototype.loadMatchingFeature=function(M,O,G,ne,me,_e,Ce,Ne,Qe,ct,dt){var Rt=this.bucketLayerIDs[O];if(!_e||function(Nn,Bn){for(var Wn=0;Wn<Nn.length;Wn++)if(Bn.indexOf(Nn[Wn])>=0)return!0;return!1}(_e,Rt)){var Wt=this.sourceLayerCoder.decode(G),qt=this.vtLayers[Wt].feature(ne);if(me.filter(new ai(this.tileID.overscaledZ),qt))for(var ir=this.getId(qt,Wt),yr=0;yr<Rt.length;yr++){var Cr=Rt[yr];if(!(_e&&_e.indexOf(Cr)<0)){var Lr=Ne[Cr];if(Lr){var Ur={};ir!==void 0&&ct&&(Ur=ct.getState(Lr.sourceLayer||"_geojsonTileLayer",ir));var Vr=Qe[Cr];Vr.paint=gh(Vr.paint,Lr.paint,qt,Ur,Ce),Vr.layout=gh(Vr.layout,Lr.layout,qt,Ur,Ce);var Wr=!dt||dt(qt,Lr,Ur);if(Wr){var hn=new $c(qt,this.z,this.x,this.y,ir);hn.layer=Vr;var xn=M[Cr];xn===void 0&&(xn=M[Cr]=[]),xn.push({featureIndex:ne,feature:hn,intersectionZ:Wr})}}}}}},ol.prototype.lookupSymbolFeatures=function(M,O,G,ne,me,_e,Ce,Ne){var Qe={};this.loadVTLayers();for(var ct=Sa(me),dt=0,Rt=M;dt<Rt.length;dt+=1){var Wt=Rt[dt];this.loadMatchingFeature(Qe,G,ne,Wt,ct,_e,Ce,Ne,O)}return Qe},ol.prototype.hasLayer=function(M){for(var O=0,G=this.bucketLayerIDs;O<G.length;O+=1)for(var ne=0,me=G[O];ne<me.length;ne+=1)if(M===me[ne])return!0;return!1},ol.prototype.getId=function(M,O){var G=M.id;if(this.promoteId){var ne=typeof this.promoteId=="string"?this.promoteId:this.promoteId[O];typeof(G=M.properties[ne])=="boolean"&&(G=Number(G))}return G},Xr("FeatureIndex",ol,{omit:["rawTileData","sourceLayerCoder"]});var ko=function(M,O){this.tileID=M,this.uid=c(),this.uses=0,this.tileSize=O,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ko.prototype.registerFadeDuration=function(M){var O=M+this.timeAdded;O<B.now()||this.fadeEndTime&&O<this.fadeEndTime||(this.fadeEndTime=O)},ko.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},ko.prototype.loadVectorData=function(M,O,G){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",M){for(var ne in M.featureIndex&&(this.latestFeatureIndex=M.featureIndex,M.rawTileData?(this.latestRawTileData=M.rawTileData,this.latestFeatureIndex.rawTileData=M.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=M.collisionBoxArray,this.buckets=function(ct,dt){var Rt={};if(!dt)return Rt;for(var Wt=function(){var yr=ir[qt],Cr=yr.layerIds.map(function(Wr){return dt.getLayer(Wr)}).filter(Boolean);if(Cr.length!==0){yr.layers=Cr,yr.stateDependentLayerIds&&(yr.stateDependentLayers=yr.stateDependentLayerIds.map(function(Wr){return Cr.filter(function(hn){return hn.id===Wr})[0]}));for(var Lr=0,Ur=Cr;Lr<Ur.length;Lr+=1){var Vr=Ur[Lr];Rt[Vr.id]=yr}}},qt=0,ir=ct;qt<ir.length;qt+=1)Wt();return Rt}(M.buckets,O.style),this.hasSymbolBuckets=!1,this.buckets){var me=this.buckets[ne];if(me instanceof ci){if(this.hasSymbolBuckets=!0,!G)break;me.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var _e in this.buckets){var Ce=this.buckets[_e];if(Ce instanceof ci&&Ce.hasRTLText){this.hasRTLText=!0,mo.isLoading()||mo.isLoaded()||Gi()!=="deferred"||ni();break}}for(var Ne in this.queryPadding=0,this.buckets){var Qe=this.buckets[Ne];this.queryPadding=Math.max(this.queryPadding,O.style.getLayer(Ne).queryRadius(Qe))}M.imageAtlas&&(this.imageAtlas=M.imageAtlas),M.glyphAtlasImage&&(this.glyphAtlasImage=M.glyphAtlasImage)}else this.collisionBoxArray=new ke},ko.prototype.unloadVectorData=function(){for(var M in this.buckets)this.buckets[M].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ko.prototype.getBucket=function(M){return this.buckets[M.id]},ko.prototype.upload=function(M){for(var O in this.buckets){var G=this.buckets[O];G.uploadPending()&&G.upload(M)}var ne=M.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ll(M,this.imageAtlas.image,ne.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ll(M,this.glyphAtlasImage,ne.ALPHA),this.glyphAtlasImage=null)},ko.prototype.prepare=function(M){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(M,this.imageAtlasTexture)},ko.prototype.queryRenderedFeatures=function(M,O,G,ne,me,_e,Ce,Ne,Qe,ct){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ne,cameraQueryGeometry:me,scale:_e,tileSize:this.tileSize,pixelPosMatrix:ct,transform:Ne,params:Ce,queryPadding:this.queryPadding*Qe},M,O,G):{}},ko.prototype.querySourceFeatures=function(M,O){var G=this.latestFeatureIndex;if(G&&G.rawTileData){var ne=G.loadVTLayers(),me=O?O.sourceLayer:"",_e=ne._geojsonTileLayer||ne[me];if(_e)for(var Ce=Sa(O&&O.filter),Ne=this.tileID.canonical,Qe=Ne.z,ct=Ne.x,dt=Ne.y,Rt={z:Qe,x:ct,y:dt},Wt=0;Wt<_e.length;Wt++){var qt=_e.feature(Wt);if(Ce.filter(new ai(this.tileID.overscaledZ),qt)){var ir=G.getId(qt,me),yr=new $c(qt,Qe,ct,dt,ir);yr.tile=Rt,M.push(yr)}}}},ko.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},ko.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ko.prototype.setExpiryData=function(M){var O=this.expirationTime;if(M.cacheControl){var G=E(M.cacheControl);G["max-age"]&&(this.expirationTime=Date.now()+1e3*G["max-age"])}else M.expires&&(this.expirationTime=new Date(M.expires).getTime());if(this.expirationTime){var ne=Date.now(),me=!1;if(this.expirationTime>ne)me=!1;else if(O)if(this.expirationTime<O)me=!0;else{var _e=this.expirationTime-O;_e?this.expirationTime=ne+Math.max(_e,3e4):me=!0}else me=!0;me?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ko.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},ko.prototype.setFeatureState=function(M,O){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(M).length!==0){var G=this.latestFeatureIndex.loadVTLayers();for(var ne in this.buckets)if(O.style.hasLayer(ne)){var me=this.buckets[ne],_e=me.layers[0].sourceLayer||"_geojsonTileLayer",Ce=G[_e],Ne=M[_e];if(Ce&&Ne&&Object.keys(Ne).length!==0){me.update(Ne,Ce,this.imageAtlas&&this.imageAtlas.patternPositions||{});var Qe=O&&O.style&&O.style.getLayer(ne);Qe&&(this.queryPadding=Math.max(this.queryPadding,Qe.queryRadius(me)))}}}},ko.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},ko.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<B.now()},ko.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ko.prototype.setHoldDuration=function(M){this.symbolFadeHoldUntil=B.now()+M},ko.prototype.setDependencies=function(M,O){for(var G={},ne=0,me=O;ne<me.length;ne+=1)G[me[ne]]=!0;this.dependencies[M]=G},ko.prototype.hasDependency=function(M,O){for(var G=0,ne=M;G<ne.length;G+=1){var me=ne[G],_e=this.dependencies[me];if(_e){for(var Ce=0,Ne=O;Ce<Ne.length;Ce+=1)if(_e[Ne[Ce]])return!0}}return!1};var ml=self.performance,yh=function(M){this._marks={start:[M.url,"start"].join("#"),end:[M.url,"end"].join("#"),measure:M.url.toString()},ml.mark(this._marks.start)};yh.prototype.finish=function(){ml.mark(this._marks.end);var M=ml.getEntriesByName(this._marks.measure);return M.length===0&&(ml.measure(this._marks.measure,this._marks.start,this._marks.end),M=ml.getEntriesByName(this._marks.measure),ml.clearMarks(this._marks.start),ml.clearMarks(this._marks.end),ml.clearMeasures(this._marks.measure)),M},e.Actor=Zl,e.AlphaImage=El,e.CanonicalTileID=Pl,e.CollisionBoxArray=ke,e.Color=Kt,e.DEMData=il,e.DataConstantProperty=fa,e.DictionaryCoder=Kc,e.EXTENT=8192,e.ErrorEvent=He,e.EvaluationParameters=ai,e.Event=Be,e.Evented=he,e.FeatureIndex=ol,e.FillBucket=Bs,e.FillExtrusionBucket=Ns,e.ImageAtlas=bc,e.ImagePosition=Vc,e.LineBucket=rs,e.LngLat=Si,e.LngLatBounds=oo,e.MercatorCoordinate=Cl,e.ONE_EM=24,e.OverscaledTileID=so,e.Point=n,e.Point$1=n,e.Properties=Oo,e.Protobuf=jc,e.RGBAImage=ts,e.RequestManager=ie,e.RequestPerformance=yh,e.ResourceType=vt,e.SegmentVector=zt,e.SourceFeatureState=Xl,e.StructArrayLayout1ui2=q,e.StructArrayLayout2f1f2i16=fl,e.StructArrayLayout2i4=ds,e.StructArrayLayout3ui6=ao,e.StructArrayLayout4i8=Pi,e.SymbolBucket=ci,e.Texture=Ll,e.Tile=ko,e.Transitionable=os,e.Uniform1f=Gr,e.Uniform1i=ha,e.Uniform2f=An,e.Uniform3f=Jn,e.Uniform4f=Yn,e.UniformColor=ia,e.UniformMatrix4f=La,e.UnwrappedTileID=mh,e.ValidationError=Re,e.WritingMode=gs,e.ZoomHistory=Pa,e.add=function(M,O,G){return M[0]=O[0]+G[0],M[1]=O[1]+G[1],M[2]=O[2]+G[2],M},e.addDynamicAttributes=Gu,e.asyncAll=function(M,O,G){if(!M.length)return G(null,[]);var ne=M.length,me=new Array(M.length),_e=null;M.forEach(function(Ce,Ne){O(Ce,function(Qe,ct){Qe&&(_e=Qe),me[Ne]=ct,--ne==0&&G(_e,me)})})},e.bezier=u,e.bindAll=f,e.browser=B,e.cacheEntryPossiblyAdded=function(M){++$e>Oe&&(M.getActor().send("enforceCacheSizeLimit",Ie),$e=0)},e.clamp=h,e.clearTileCache=function(M){var O=self.caches.delete("mapbox-tiles");M&&O.catch(M).then(function(){return M()})},e.clipLine=Qf,e.clone=function(M){var O=new es(16);return O[0]=M[0],O[1]=M[1],O[2]=M[2],O[3]=M[3],O[4]=M[4],O[5]=M[5],O[6]=M[6],O[7]=M[7],O[8]=M[8],O[9]=M[9],O[10]=M[10],O[11]=M[11],O[12]=M[12],O[13]=M[13],O[14]=M[14],O[15]=M[15],O},e.clone$1=T,e.clone$2=function(M){var O=new es(3);return O[0]=M[0],O[1]=M[1],O[2]=M[2],O},e.collisionCircleLayout=Up,e.config=j,e.create=function(){var M=new es(16);return es!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[11]=0,M[12]=0,M[13]=0,M[14]=0),M[0]=1,M[5]=1,M[10]=1,M[15]=1,M},e.create$1=function(){var M=new es(9);return es!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[5]=0,M[6]=0,M[7]=0),M[0]=1,M[4]=1,M[8]=1,M},e.create$2=function(){var M=new es(4);return es!=Float32Array&&(M[1]=0,M[2]=0),M[0]=1,M[3]=1,M},e.createCommonjsModule=t,e.createExpression=Yt,e.createLayout=ii,e.createStyleLayer=function(M){return M.type==="custom"?new xd(M):new bd[M.type](M)},e.cross=function(M,O,G){var ne=O[0],me=O[1],_e=O[2],Ce=G[0],Ne=G[1],Qe=G[2];return M[0]=me*Qe-_e*Ne,M[1]=_e*Ce-ne*Qe,M[2]=ne*Ne-me*Ce,M},e.deepEqual=function M(O,G){if(Array.isArray(O)){if(!Array.isArray(G)||O.length!==G.length)return!1;for(var ne=0;ne<O.length;ne++)if(!M(O[ne],G[ne]))return!1;return!0}if(typeof O=="object"&&O!==null&&G!==null){if(typeof G!="object"||Object.keys(O).length!==Object.keys(G).length)return!1;for(var me in O)if(!M(O[me],G[me]))return!1;return!0}return O===G},e.dot=function(M,O){return M[0]*O[0]+M[1]*O[1]+M[2]*O[2]},e.dot$1=function(M,O){return M[0]*O[0]+M[1]*O[1]+M[2]*O[2]+M[3]*O[3]},e.ease=o,e.emitValidationErrors=kn,e.endsWith=w,e.enforceCacheSizeLimit=function(M){Ze(),we&&we.then(function(O){O.keys().then(function(G){for(var ne=0;ne<G.length-M;ne++)O.delete(G[ne])})})},e.evaluateSizeForFeature=Wf,e.evaluateSizeForZoom=Zf,e.evaluateVariableOffset=rh,e.evented=ki,e.extend=a,e.featureFilter=Sa,e.filterObject=_,e.fromRotation=function(M,O){var G=Math.sin(O),ne=Math.cos(O);return M[0]=ne,M[1]=G,M[2]=0,M[3]=-G,M[4]=ne,M[5]=0,M[6]=0,M[7]=0,M[8]=1,M},e.getAnchorAlignment=Uu,e.getAnchorJustification=qu,e.getArrayBuffer=mt,e.getImage=Gt,e.getJSON=function(M,O){return Ke(a(M,{type:"json"}),O)},e.getRTLTextPluginStatus=Gi,e.getReferrer=yt,e.getVideo=function(M,O){var G,ne,me=self.document.createElement("video");me.muted=!0,me.onloadstart=function(){O(null,me)};for(var _e=0;_e<M.length;_e++){var Ce=self.document.createElement("source");G=M[_e],ne=void 0,(ne=self.document.createElement("a")).href=G,(ne.protocol!==self.document.location.protocol||ne.host!==self.document.location.host)&&(me.crossOrigin="Anonymous"),Ce.src=M[_e],me.appendChild(Ce)}return{cancel:function(){}}},e.identity=uc,e.invert=function(M,O){var G=O[0],ne=O[1],me=O[2],_e=O[3],Ce=O[4],Ne=O[5],Qe=O[6],ct=O[7],dt=O[8],Rt=O[9],Wt=O[10],qt=O[11],ir=O[12],yr=O[13],Cr=O[14],Lr=O[15],Ur=G*Ne-ne*Ce,Vr=G*Qe-me*Ce,Wr=G*ct-_e*Ce,hn=ne*Qe-me*Ne,xn=ne*ct-_e*Ne,Nn=me*ct-_e*Qe,Bn=dt*yr-Rt*ir,Wn=dt*Cr-Wt*ir,la=dt*Lr-qt*ir,ca=Rt*Cr-Wt*yr,$n=Rt*Lr-qt*yr,ma=Wt*Lr-qt*Cr,pa=Ur*ma-Vr*$n+Wr*ca+hn*la-xn*Wn+Nn*Bn;return pa?(pa=1/pa,M[0]=(Ne*ma-Qe*$n+ct*ca)*pa,M[1]=(me*$n-ne*ma-_e*ca)*pa,M[2]=(yr*Nn-Cr*xn+Lr*hn)*pa,M[3]=(Wt*xn-Rt*Nn-qt*hn)*pa,M[4]=(Qe*la-Ce*ma-ct*Wn)*pa,M[5]=(G*ma-me*la+_e*Wn)*pa,M[6]=(Cr*Wr-ir*Nn-Lr*Vr)*pa,M[7]=(dt*Nn-Wt*Wr+qt*Vr)*pa,M[8]=(Ce*$n-Ne*la+ct*Bn)*pa,M[9]=(ne*la-G*$n-_e*Bn)*pa,M[10]=(ir*xn-yr*Wr+Lr*Ur)*pa,M[11]=(Rt*Wr-dt*xn-qt*Ur)*pa,M[12]=(Ne*Wn-Ce*ca-Qe*Bn)*pa,M[13]=(G*ca-ne*Wn+me*Bn)*pa,M[14]=(yr*Vr-ir*hn-Cr*Ur)*pa,M[15]=(dt*hn-Rt*Vr+Wt*Ur)*pa,M):null},e.isChar=En,e.isMapboxURL=le,e.keysDifference=function(M,O){var G=[];for(var ne in M)ne in O||G.push(ne);return G},e.makeRequest=Ke,e.mapObject=b,e.mercatorXfromLng=hh,e.mercatorYfromLat=ph,e.mercatorZfromAltitude=dh,e.mul=Su,e.multiply=Sl,e.mvt=Nl,e.normalize=function(M,O){var G=O[0],ne=O[1],me=O[2],_e=G*G+ne*ne+me*me;return _e>0&&(_e=1/Math.sqrt(_e)),M[0]=O[0]*_e,M[1]=O[1]*_e,M[2]=O[2]*_e,M},e.number=Tn,e.offscreenCanvasSupported=ot,e.ortho=function(M,O,G,ne,me,_e,Ce){var Ne=1/(O-G),Qe=1/(ne-me),ct=1/(_e-Ce);return M[0]=-2*Ne,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=-2*Qe,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=2*ct,M[11]=0,M[12]=(O+G)*Ne,M[13]=(me+ne)*Qe,M[14]=(Ce+_e)*ct,M[15]=1,M},e.parseGlyphPBF=function(M){return new jc(M).readFields($p,[])},e.pbf=jc,e.performSymbolLayout=function(M,O,G,ne,me,_e,Ce){M.createArrays();var Ne=512*M.overscaling;M.tilePixelRatio=8192/Ne,M.compareText={},M.iconsNeedLinear=!1;var Qe=M.layers[0].layout,ct=M.layers[0]._unevaluatedLayout._values,dt={};if(M.textSizeData.kind==="composite"){var Rt=M.textSizeData,Wt=Rt.minZoom,qt=Rt.maxZoom;dt.compositeTextSizes=[ct["text-size"].possiblyEvaluate(new ai(Wt),Ce),ct["text-size"].possiblyEvaluate(new ai(qt),Ce)]}if(M.iconSizeData.kind==="composite"){var ir=M.iconSizeData,yr=ir.minZoom,Cr=ir.maxZoom;dt.compositeIconSizes=[ct["icon-size"].possiblyEvaluate(new ai(yr),Ce),ct["icon-size"].possiblyEvaluate(new ai(Cr),Ce)]}dt.layoutTextSize=ct["text-size"].possiblyEvaluate(new ai(M.zoom+1),Ce),dt.layoutIconSize=ct["icon-size"].possiblyEvaluate(new ai(M.zoom+1),Ce),dt.textMaxSize=ct["text-size"].possiblyEvaluate(new ai(18));for(var Lr=24*Qe.get("text-line-height"),Ur=Qe.get("text-rotation-alignment")==="map"&&Qe.get("symbol-placement")!=="point",Vr=Qe.get("text-keep-upright"),Wr=Qe.get("text-size"),hn=function(){var Bn=Nn[xn],Wn=Qe.get("text-font").evaluate(Bn,{},Ce).join(","),la=Wr.evaluate(Bn,{},Ce),ca=dt.layoutTextSize.evaluate(Bn,{},Ce),$n=dt.layoutIconSize.evaluate(Bn,{},Ce),ma={horizontal:{},vertical:void 0},pa=Bn.text,ua=[0,0];if(pa){var Qa=pa.toString(),qa=24*Qe.get("text-letter-spacing").evaluate(Bn,{},Ce),ri=function(Ba){for(var ei=0,Ui=Ba;ei<Ui.length;ei+=1)if(!Ca(Ui[ei].charCodeAt(0)))return!1;return!0}(Qa)?qa:0,Ta=Qe.get("text-anchor").evaluate(Bn,{},Ce),Ya=Qe.get("text-variable-anchor");if(!Ya){var xi=Qe.get("text-radial-offset").evaluate(Bn,{},Ce);ua=xi?rh(Ta,[24*xi,Hu]):Qe.get("text-offset").evaluate(Bn,{},Ce).map(function(Ba){return 24*Ba})}var hi=Ur?"center":Qe.get("text-justify").evaluate(Bn,{},Ce),Ei=Qe.get("symbol-placement"),pi=Ei==="point"?24*Qe.get("text-max-width").evaluate(Bn,{},Ce):0,lo=function(){M.allowVerticalPlacement&&Ra(Qa)&&(ma.vertical=Hc(pa,O,G,me,Wn,pi,Lr,Ta,"left",ri,ua,gs.vertical,!0,Ei,ca,la))};if(!Ur&&Ya){for(var Li=hi==="auto"?Ya.map(function(Ba){return qu(Ba)}):[hi],Ro=!1,Mo=0;Mo<Li.length;Mo++){var Eo=Li[Mo];if(!ma.horizontal[Eo])if(Ro)ma.horizontal[Eo]=ma.horizontal[0];else{var Xo=Hc(pa,O,G,me,Wn,pi,Lr,"center",Eo,ri,ua,gs.horizontal,!1,Ei,ca,la);Xo&&(ma.horizontal[Eo]=Xo,Ro=Xo.positionedLines.length===1)}}lo()}else{hi==="auto"&&(hi=qu(Ta));var jo=Hc(pa,O,G,me,Wn,pi,Lr,Ta,hi,ri,ua,gs.horizontal,!1,Ei,ca,la);jo&&(ma.horizontal[hi]=jo),lo(),Ra(Qa)&&Ur&&Vr&&(ma.vertical=Hc(pa,O,G,me,Wn,pi,Lr,Ta,hi,ri,ua,gs.vertical,!1,Ei,ca,la))}}var co=void 0,Lo=!1;if(Bn.icon&&Bn.icon.name){var Xi=ne[Bn.icon.name];Xi&&(co=function(Ba,ei,Ui){var Vi=Uu(Ui),Fi=Vi.horizontalAlign,Ci=Vi.verticalAlign,oi=ei[0],Hi=ei[1],Jo=oi-Ba.displaySize[0]*Fi,fs=Jo+Ba.displaySize[0],Uo=Hi-Ba.displaySize[1]*Ci;return{image:Ba,top:Uo,bottom:Uo+Ba.displaySize[1],left:Jo,right:fs}}(me[Bn.icon.name],Qe.get("icon-offset").evaluate(Bn,{},Ce),Qe.get("icon-anchor").evaluate(Bn,{},Ce)),Lo=Xi.sdf,M.sdfIcons===void 0?M.sdfIcons=Xi.sdf:M.sdfIcons!==Xi.sdf&&A("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Xi.pixelRatio!==M.pixelRatio||Qe.get("icon-rotate").constantOr(1)!==0)&&(M.iconsNeedLinear=!0))}var go=ah(ma.horizontal)||ma.vertical;M.iconsInText=!!go&&go.iconsInText,(go||co)&&function(Ba,ei,Ui,Vi,Fi,Ci,oi,Hi,Jo,fs,Uo){var js=Ci.textMaxSize.evaluate(ei,{});js===void 0&&(js=oi);var sl,Ao=Ba.layers[0].layout,Us=Ao.get("icon-offset").evaluate(ei,{},Uo),Vs=ah(Ui.horizontal),Hs=oi/24,Ju=Ba.tilePixelRatio*Hs,Jl=Ba.tilePixelRatio*js/24,Qc=Ba.tilePixelRatio*Hi,Il=Ba.tilePixelRatio*Ao.get("symbol-spacing"),eu=Ao.get("text-padding")*Ba.tilePixelRatio,tu=Ao.get("icon-padding")*Ba.tilePixelRatio,ru=Ao.get("text-max-angle")/180*Math.PI,nu=Ao.get("text-rotation-alignment")==="map"&&Ao.get("symbol-placement")!=="point",vl=Ao.get("icon-rotation-alignment")==="map"&&Ao.get("symbol-placement")!=="point",Kl=Ao.get("symbol-placement"),au=Il/2,$l=Ao.get("icon-text-fit");Vi&&$l!=="none"&&(Ba.allowVerticalPlacement&&Ui.vertical&&(sl=Yf(Vi,Ui.vertical,$l,Ao.get("icon-text-fit-padding"),Us,Hs)),Vs&&(Vi=Yf(Vi,Vs,$l,Ao.get("icon-text-fit-padding"),Us,Hs)));var yl=function(Td,Ec){Ec.x<0||Ec.x>=8192||Ec.y<0||Ec.y>=8192||function(Wi,qs,kd,xl,tf,wh,hu,Ks,pu,Lc,du,mu,rf,Th,Cc,kh,Mh,Ah,Sh,Eh,vs,gu,Lh,$s,Md){var nf,Ol,ac,ic,oc,sc=Wi.addToLineVertexArray(qs,kd),Ch=0,Ph=0,Ih=0,Oh=0,af=-1,of=-1,ll={},Dh=Sr(""),sf=0,lf=0;if(Ks._unevaluatedLayout.getValue("text-radial-offset")===void 0?(nf=Ks.layout.get("text-offset").evaluate(vs,{},$s).map(function(Ic){return 24*Ic}),sf=nf[0],lf=nf[1]):(sf=24*Ks.layout.get("text-radial-offset").evaluate(vs,{},$s),lf=Hu),Wi.allowVerticalPlacement&&xl.vertical){var zh=Ks.layout.get("text-rotate").evaluate(vs,{},$s)+90,Ad=xl.vertical;ic=new Zc(pu,qs,Lc,du,mu,Ad,rf,Th,Cc,zh),hu&&(oc=new Zc(pu,qs,Lc,du,mu,hu,Mh,Ah,Cc,zh))}if(tf){var cf=Ks.layout.get("icon-rotate").evaluate(vs,{}),Rh=Ks.layout.get("icon-text-fit")!=="none",Fh=eh(tf,cf,Lh,Rh),uf=hu?eh(hu,cf,Lh,Rh):void 0;ac=new Zc(pu,qs,Lc,du,mu,tf,Mh,Ah,!1,cf),Ch=4*Fh.length;var Bh=Wi.iconSizeData,Pc=null;Bh.kind==="source"?(Pc=[128*Ks.layout.get("icon-size").evaluate(vs,{})])[0]>32640&&A(Wi.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):Bh.kind==="composite"&&((Pc=[128*gu.compositeIconSizes[0].evaluate(vs,{},$s),128*gu.compositeIconSizes[1].evaluate(vs,{},$s)])[0]>32640||Pc[1]>32640)&&A(Wi.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Wi.addSymbols(Wi.icon,Fh,Pc,Eh,Sh,vs,!1,qs,sc.lineStartIndex,sc.lineLength,-1,$s),af=Wi.icon.placedSymbolArray.length-1,uf&&(Ph=4*uf.length,Wi.addSymbols(Wi.icon,uf,Pc,Eh,Sh,vs,gs.vertical,qs,sc.lineStartIndex,sc.lineLength,-1,$s),of=Wi.icon.placedSymbolArray.length-1)}for(var Nh in xl.horizontal){var vu=xl.horizontal[Nh];if(!Ol){Dh=Sr(vu.text);var Sd=Ks.layout.get("text-rotate").evaluate(vs,{},$s);Ol=new Zc(pu,qs,Lc,du,mu,vu,rf,Th,Cc,Sd)}var jh=vu.positionedLines.length===1;if(Ih+=nh(Wi,qs,vu,wh,Ks,Cc,vs,kh,sc,xl.vertical?gs.horizontal:gs.horizontalOnly,jh?Object.keys(xl.horizontal):[Nh],ll,af,gu,$s),jh)break}xl.vertical&&(Oh+=nh(Wi,qs,xl.vertical,wh,Ks,Cc,vs,kh,sc,gs.vertical,["vertical"],ll,of,gu,$s));var Ed=Ol?Ol.boxStartIndex:Wi.collisionBoxArray.length,Ld=Ol?Ol.boxEndIndex:Wi.collisionBoxArray.length,Cd=ic?ic.boxStartIndex:Wi.collisionBoxArray.length,Pd=ic?ic.boxEndIndex:Wi.collisionBoxArray.length,Id=ac?ac.boxStartIndex:Wi.collisionBoxArray.length,Od=ac?ac.boxEndIndex:Wi.collisionBoxArray.length,Dd=oc?oc.boxStartIndex:Wi.collisionBoxArray.length,zd=oc?oc.boxEndIndex:Wi.collisionBoxArray.length,Qs=-1,yu=function(Ic,Vh){return Ic&&Ic.circleDiameter?Math.max(Ic.circleDiameter,Vh):Vh};Qs=yu(Ol,Qs),Qs=yu(ic,Qs),Qs=yu(ac,Qs);var Uh=(Qs=yu(oc,Qs))>-1?1:0;Uh&&(Qs*=Md/24),Wi.glyphOffsetArray.length>=ci.MAX_GLYPHS&&A("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),vs.sortKey!==void 0&&Wi.addToSortKeyRanges(Wi.symbolInstances.length,vs.sortKey),Wi.symbolInstances.emplaceBack(qs.x,qs.y,ll.right>=0?ll.right:-1,ll.center>=0?ll.center:-1,ll.left>=0?ll.left:-1,ll.vertical||-1,af,of,Dh,Ed,Ld,Cd,Pd,Id,Od,Dd,zd,Lc,Ih,Oh,Ch,Ph,Uh,0,rf,sf,lf,Qs)}(Ba,Ec,Td,Ui,Vi,Fi,sl,Ba.layers[0],Ba.collisionBoxArray,ei.index,ei.sourceLayerIndex,Ba.index,Ju,eu,nu,Jo,Qc,tu,vl,Us,ei,Ci,fs,Uo,oi)};if(Kl==="line")for(var Tc=0,iu=Qf(ei.geometry,0,0,8192,8192);Tc<iu.length;Tc+=1)for(var ou=iu[Tc],su=id(ou,Il,ru,Ui.vertical||Vs,Vi,24,Jl,Ba.overscaling,8192),kc=0,lu=su;kc<lu.length;kc+=1){var Mc=lu[kc],cu=Vs;cu&&cd(Ba,cu.text,au,Mc)||yl(ou,Mc)}else if(Kl==="line-center")for(var Ac=0,uu=ei.geometry;Ac<uu.length;Ac+=1){var Ql=uu[Ac];if(Ql.length>1){var ec=ad(Ql,ru,Ui.vertical||Vs,Vi,24,Jl);ec&&yl(Ql,ec)}}else if(ei.type==="Polygon")for(var tc=0,fu=zu(ei.geometry,0);tc<fu.length;tc+=1){var rc=fu[tc],Sc=sd(rc,16);yl(rc[0],new Hl(Sc.x,Sc.y,0))}else if(ei.type==="LineString")for(var nc=0,xh=ei.geometry;nc<xh.length;nc+=1){var Ku=xh[nc];yl(Ku,new Hl(Ku[0].x,Ku[0].y,0))}else if(ei.type==="Point")for(var $u=0,bh=ei.geometry;$u<bh.length;$u+=1)for(var wd=bh[$u],Qu=0,_h=wd;Qu<_h.length;Qu+=1){var ef=_h[Qu];yl([ef],new Hl(ef.x,ef.y,0))}}(M,Bn,ma,co,ne,dt,ca,$n,ua,Lo,Ce)},xn=0,Nn=M.features;xn<Nn.length;xn+=1)hn();_e&&M.generateCollisionDebugBuffers()},e.perspective=function(M,O,G,ne,me){var _e,Ce=1/Math.tan(O/2);return M[0]=Ce/G,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=Ce,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[11]=-1,M[12]=0,M[13]=0,M[15]=0,me!=null&&me!==1/0?(_e=1/(ne-me),M[10]=(me+ne)*_e,M[14]=2*me*ne*_e):(M[10]=-1,M[14]=-2*ne),M},e.pick=function(M,O){for(var G={},ne=0;ne<O.length;ne++){var me=O[ne];me in M&&(G[me]=M[me])}return G},e.plugin=mo,e.polygonIntersectsPolygon=Bo,e.postMapLoadEvent=De,e.postTurnstileEvent=Ee,e.potpack=Vf,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.register=Xr,e.registerForPluginStateChange=function(M){return M({pluginStatus:xa,pluginURL:gi}),ki.on("pluginStateChange",M),M},e.rotate=function(M,O,G){var ne=O[0],me=O[1],_e=O[2],Ce=O[3],Ne=Math.sin(G),Qe=Math.cos(G);return M[0]=ne*Qe+_e*Ne,M[1]=me*Qe+Ce*Ne,M[2]=ne*-Ne+_e*Qe,M[3]=me*-Ne+Ce*Qe,M},e.rotateX=function(M,O,G){var ne=Math.sin(G),me=Math.cos(G),_e=O[4],Ce=O[5],Ne=O[6],Qe=O[7],ct=O[8],dt=O[9],Rt=O[10],Wt=O[11];return O!==M&&(M[0]=O[0],M[1]=O[1],M[2]=O[2],M[3]=O[3],M[12]=O[12],M[13]=O[13],M[14]=O[14],M[15]=O[15]),M[4]=_e*me+ct*ne,M[5]=Ce*me+dt*ne,M[6]=Ne*me+Rt*ne,M[7]=Qe*me+Wt*ne,M[8]=ct*me-_e*ne,M[9]=dt*me-Ce*ne,M[10]=Rt*me-Ne*ne,M[11]=Wt*me-Qe*ne,M},e.rotateZ=function(M,O,G){var ne=Math.sin(G),me=Math.cos(G),_e=O[0],Ce=O[1],Ne=O[2],Qe=O[3],ct=O[4],dt=O[5],Rt=O[6],Wt=O[7];return O!==M&&(M[8]=O[8],M[9]=O[9],M[10]=O[10],M[11]=O[11],M[12]=O[12],M[13]=O[13],M[14]=O[14],M[15]=O[15]),M[0]=_e*me+ct*ne,M[1]=Ce*me+dt*ne,M[2]=Ne*me+Rt*ne,M[3]=Qe*me+Wt*ne,M[4]=ct*me-_e*ne,M[5]=dt*me-Ce*ne,M[6]=Rt*me-Ne*ne,M[7]=Wt*me-Qe*ne,M},e.scale=function(M,O,G){var ne=G[0],me=G[1],_e=G[2];return M[0]=O[0]*ne,M[1]=O[1]*ne,M[2]=O[2]*ne,M[3]=O[3]*ne,M[4]=O[4]*me,M[5]=O[5]*me,M[6]=O[6]*me,M[7]=O[7]*me,M[8]=O[8]*_e,M[9]=O[9]*_e,M[10]=O[10]*_e,M[11]=O[11]*_e,M[12]=O[12],M[13]=O[13],M[14]=O[14],M[15]=O[15],M},e.scale$1=function(M,O,G){return M[0]=O[0]*G,M[1]=O[1]*G,M[2]=O[2]*G,M[3]=O[3]*G,M},e.scale$2=function(M,O,G){return M[0]=O[0]*G,M[1]=O[1]*G,M[2]=O[2]*G,M},e.setCacheLimits=function(M,O){Ie=M,Oe=O},e.setRTLTextPlugin=function(M,O,G){if(G===void 0&&(G=!1),xa===Ja||xa===ji||xa===Qo)throw new Error("setRTLTextPlugin cannot be called multiple times.");gi=B.resolveURL(M),xa=Ja,bo=O,Ka(),G||ni()},e.sphericalToCartesian=function(M){var O=M[0],G=M[1],ne=M[2];return G+=90,G*=Math.PI/180,ne*=Math.PI/180,{x:O*Math.cos(G)*Math.sin(ne),y:O*Math.sin(G)*Math.sin(ne),z:O*Math.cos(ne)}},e.sqrLen=fc,e.styleSpec=be,e.sub=Eu,e.symbolSize=nd,e.transformMat3=function(M,O,G){var ne=O[0],me=O[1],_e=O[2];return M[0]=ne*G[0]+me*G[3]+_e*G[6],M[1]=ne*G[1]+me*G[4]+_e*G[7],M[2]=ne*G[2]+me*G[5]+_e*G[8],M},e.transformMat4=Rl,e.translate=function(M,O,G){var ne,me,_e,Ce,Ne,Qe,ct,dt,Rt,Wt,qt,ir,yr=G[0],Cr=G[1],Lr=G[2];return O===M?(M[12]=O[0]*yr+O[4]*Cr+O[8]*Lr+O[12],M[13]=O[1]*yr+O[5]*Cr+O[9]*Lr+O[13],M[14]=O[2]*yr+O[6]*Cr+O[10]*Lr+O[14],M[15]=O[3]*yr+O[7]*Cr+O[11]*Lr+O[15]):(ne=O[0],me=O[1],_e=O[2],Ce=O[3],Ne=O[4],Qe=O[5],ct=O[6],dt=O[7],Rt=O[8],Wt=O[9],qt=O[10],ir=O[11],M[0]=ne,M[1]=me,M[2]=_e,M[3]=Ce,M[4]=Ne,M[5]=Qe,M[6]=ct,M[7]=dt,M[8]=Rt,M[9]=Wt,M[10]=qt,M[11]=ir,M[12]=ne*yr+Ne*Cr+Rt*Lr+O[12],M[13]=me*yr+Qe*Cr+Wt*Lr+O[13],M[14]=_e*yr+ct*Cr+qt*Lr+O[14],M[15]=Ce*yr+dt*Cr+ir*Lr+O[15]),M},e.triggerPluginCompletionEvent=_o,e.uniqueId=c,e.validateCustomStyleLayer=function(M){var O=[],G=M.id;return G===void 0&&O.push({message:"layers."+G+': missing required property "id"'}),M.render===void 0&&O.push({message:"layers."+G+': missing required method "render"'}),M.renderingMode&&M.renderingMode!=="2d"&&M.renderingMode!=="3d"&&O.push({message:"layers."+G+': property "renderingMode" must be either "2d" or "3d"'}),O},e.validateLight=ln,e.validateStyle=Zr,e.values=function(M){var O=[];for(var G in M)O.push(M[G]);return O},e.vectorTile=Nl,e.version="1.10.1",e.warnOnce=A,e.webpSupported=ee,e.window=self,e.wrap=s}),x(0,function(e){function t(Be){var He=typeof Be;if(He==="number"||He==="boolean"||He==="string"||Be==null)return JSON.stringify(Be);if(Array.isArray(Be)){for(var he="[",be=0,Re=Be;be<Re.length;be+=1)he+=t(Re[be])+",";return he+"]"}for(var Ue=Object.keys(Be).sort(),Xe="{",qe=0;qe<Ue.length;qe++)Xe+=JSON.stringify(Ue[qe])+":"+t(Be[Ue[qe]])+",";return Xe+"}"}function r(Be){for(var He="",he=0,be=e.refProperties;he<be.length;he+=1)He+="/"+t(Be[be[he]]);return He}var l=function(Be){this.keyCache={},Be&&this.replace(Be)};l.prototype.replace=function(Be){this._layerConfigs={},this._layers={},this.update(Be,[])},l.prototype.update=function(Be,He){for(var he=this,be=0,Re=Be;be<Re.length;be+=1){var Ue=Re[be];this._layerConfigs[Ue.id]=Ue;var Xe=this._layers[Ue.id]=e.createStyleLayer(Ue);Xe._featureFilter=e.featureFilter(Xe.filter),this.keyCache[Ue.id]&&delete this.keyCache[Ue.id]}for(var qe=0,st=He;qe<st.length;qe+=1){var it=st[qe];delete this.keyCache[it],delete this._layerConfigs[it],delete this._layers[it]}this.familiesBySource={};for(var Tt=0,Pt=function(We,nt){for(var ft={},Mt=0;Mt<We.length;Mt++){var Nt=nt&&nt[We[Mt].id]||r(We[Mt]);nt&&(nt[We[Mt].id]=Nt);var Zt=ft[Nt];Zt||(Zt=ft[Nt]=[]),Zt.push(We[Mt])}var Ut=[];for(var fr in ft)Ut.push(ft[fr]);return Ut}(e.values(this._layerConfigs),this.keyCache);Tt<Pt.length;Tt+=1){var rt=Pt[Tt].map(function(We){return he._layers[We.id]}),ut=rt[0];if(ut.visibility!=="none"){var Bt=ut.source||"",wt=this.familiesBySource[Bt];wt||(wt=this.familiesBySource[Bt]={});var Lt=ut.sourceLayer||"_geojsonTileLayer",Se=wt[Lt];Se||(Se=wt[Lt]=[]),Se.push(rt)}}};var n=function(Be){var He={},he=[];for(var be in Be){var Re=Be[be],Ue=He[be]={};for(var Xe in Re){var qe=Re[+Xe];if(qe&&qe.bitmap.width!==0&&qe.bitmap.height!==0){var st={x:0,y:0,w:qe.bitmap.width+2,h:qe.bitmap.height+2};he.push(st),Ue[Xe]={rect:st,metrics:qe.metrics}}}}var it=e.potpack(he),Tt=it.w,Pt=it.h,rt=new e.AlphaImage({width:Tt||1,height:Pt||1});for(var ut in Be){var Bt=Be[ut];for(var wt in Bt){var Lt=Bt[+wt];if(Lt&&Lt.bitmap.width!==0&&Lt.bitmap.height!==0){var Se=He[ut][wt].rect;e.AlphaImage.copy(Lt.bitmap,rt,{x:0,y:0},{x:Se.x+1,y:Se.y+1},Lt.bitmap)}}}this.image=rt,this.positions=He};e.register("GlyphAtlas",n);var d=function(Be){this.tileID=new e.OverscaledTileID(Be.tileID.overscaledZ,Be.tileID.wrap,Be.tileID.canonical.z,Be.tileID.canonical.x,Be.tileID.canonical.y),this.uid=Be.uid,this.zoom=Be.zoom,this.pixelRatio=Be.pixelRatio,this.tileSize=Be.tileSize,this.source=Be.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Be.showCollisionBoxes,this.collectResourceTiming=!!Be.collectResourceTiming,this.returnDependencies=!!Be.returnDependencies,this.promoteId=Be.promoteId};function u(Be,He,he){for(var be=new e.EvaluationParameters(He),Re=0,Ue=Be;Re<Ue.length;Re+=1)Ue[Re].recalculate(be,he)}function o(Be,He){var he=e.getArrayBuffer(Be.request,function(be,Re,Ue,Xe){be?He(be):Re&&He(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(Re)),rawData:Re,cacheControl:Ue,expires:Xe})});return function(){he.cancel(),He()}}d.prototype.parse=function(Be,He,he,be,Re){var Ue=this;this.status="parsing",this.data=Be,this.collisionBoxArray=new e.CollisionBoxArray;var Xe=new e.DictionaryCoder(Object.keys(Be.layers).sort()),qe=new e.FeatureIndex(this.tileID,this.promoteId);qe.bucketLayerIDs=[];var st,it,Tt,Pt,rt={},ut={featureIndex:qe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:he},Bt=He.familiesBySource[this.source];for(var wt in Bt){var Lt=Be.layers[wt];if(Lt){Lt.version===1&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+wt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Se=Xe.encode(wt),We=[],nt=0;nt<Lt.length;nt++){var ft=Lt.feature(nt),Mt=qe.getId(ft,wt);We.push({feature:ft,id:Mt,index:nt,sourceLayerIndex:Se})}for(var Nt=0,Zt=Bt[wt];Nt<Zt.length;Nt+=1){var Ut=Zt[Nt],fr=Ut[0];fr.minzoom&&this.zoom<Math.floor(fr.minzoom)||fr.maxzoom&&this.zoom>=fr.maxzoom||fr.visibility!=="none"&&(u(Ut,this.zoom,he),(rt[fr.id]=fr.createBucket({index:qe.bucketLayerIDs.length,layers:Ut,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Se,sourceID:this.source})).populate(We,ut,this.tileID.canonical),qe.bucketLayerIDs.push(Ut.map(function(er){return er.id})))}}}var Tr=e.mapObject(ut.glyphDependencies,function(er){return Object.keys(er).map(Number)});Object.keys(Tr).length?be.send("getGlyphs",{uid:this.uid,stacks:Tr},function(er,cr){st||(st=er,it=cr,Qt.call(Ue))}):it={};var ur=Object.keys(ut.iconDependencies);ur.length?be.send("getImages",{icons:ur,source:this.source,tileID:this.tileID,type:"icons"},function(er,cr){st||(st=er,Tt=cr,Qt.call(Ue))}):Tt={};var Kt=Object.keys(ut.patternDependencies);function Qt(){if(st)return Re(st);if(it&&Tt&&Pt){var er=new n(it),cr=new e.ImageAtlas(Tt,Pt);for(var gr in rt){var Mr=rt[gr];Mr instanceof e.SymbolBucket?(u(Mr.layers,this.zoom,he),e.performSymbolLayout(Mr,it,er.positions,Tt,cr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Mr.hasPattern&&(Mr instanceof e.LineBucket||Mr instanceof e.FillBucket||Mr instanceof e.FillExtrusionBucket)&&(u(Mr.layers,this.zoom,he),Mr.addFeatures(ut,this.tileID.canonical,cr.patternPositions))}this.status="done",Re(null,{buckets:e.values(rt).filter(function(Ir){return!Ir.isEmpty()}),featureIndex:qe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:er.image,imageAtlas:cr,glyphMap:this.returnDependencies?it:null,iconMap:this.returnDependencies?Tt:null,glyphPositions:this.returnDependencies?er.positions:null})}}Kt.length?be.send("getImages",{icons:Kt,source:this.source,tileID:this.tileID,type:"patterns"},function(er,cr){st||(st=er,Pt=cr,Qt.call(Ue))}):Pt={},Qt.call(this)};var h=function(Be,He,he,be){this.actor=Be,this.layerIndex=He,this.availableImages=he,this.loadVectorData=be||o,this.loading={},this.loaded={}};h.prototype.loadTile=function(Be,He){var he=this,be=Be.uid;this.loading||(this.loading={});var Re=!!(Be&&Be.request&&Be.request.collectResourceTiming)&&new e.RequestPerformance(Be.request),Ue=this.loading[be]=new d(Be);Ue.abort=this.loadVectorData(Be,function(Xe,qe){if(delete he.loading[be],Xe||!qe)return Ue.status="done",he.loaded[be]=Ue,He(Xe);var st=qe.rawData,it={};qe.expires&&(it.expires=qe.expires),qe.cacheControl&&(it.cacheControl=qe.cacheControl);var Tt={};if(Re){var Pt=Re.finish();Pt&&(Tt.resourceTiming=JSON.parse(JSON.stringify(Pt)))}Ue.vectorTile=qe.vectorTile,Ue.parse(qe.vectorTile,he.layerIndex,he.availableImages,he.actor,function(rt,ut){if(rt||!ut)return He(rt);He(null,e.extend({rawTileData:st.slice(0)},ut,it,Tt))}),he.loaded=he.loaded||{},he.loaded[be]=Ue})},h.prototype.reloadTile=function(Be,He){var he=this,be=this.loaded,Re=Be.uid,Ue=this;if(be&&be[Re]){var Xe=be[Re];Xe.showCollisionBoxes=Be.showCollisionBoxes;var qe=function(st,it){var Tt=Xe.reloadCallback;Tt&&(delete Xe.reloadCallback,Xe.parse(Xe.vectorTile,Ue.layerIndex,he.availableImages,Ue.actor,Tt)),He(st,it)};Xe.status==="parsing"?Xe.reloadCallback=qe:Xe.status==="done"&&(Xe.vectorTile?Xe.parse(Xe.vectorTile,this.layerIndex,this.availableImages,this.actor,qe):qe())}},h.prototype.abortTile=function(Be,He){var he=this.loading,be=Be.uid;he&&he[be]&&he[be].abort&&(he[be].abort(),delete he[be]),He()},h.prototype.removeTile=function(Be,He){var he=this.loaded,be=Be.uid;he&&he[be]&&delete he[be],He()};var s=e.window.ImageBitmap,a=function(){this.loaded={}};a.prototype.loadTile=function(Be,He){var he=Be.uid,be=Be.encoding,Re=Be.rawImageData,Ue=s&&Re instanceof s?this.getImageData(Re):Re,Xe=new e.DEMData(he,Ue,be);this.loaded=this.loaded||{},this.loaded[he]=Xe,He(null,Xe)},a.prototype.getImageData=function(Be){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Be.width,Be.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Be.width,this.offscreenCanvas.height=Be.height,this.offscreenCanvasContext.drawImage(Be,0,0,Be.width,Be.height);var He=this.offscreenCanvasContext.getImageData(-1,-1,Be.width+2,Be.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:He.width,height:He.height},He.data)},a.prototype.removeTile=function(Be){var He=this.loaded,he=Be.uid;He&&He[he]&&delete He[he]};var p=function Be(He,he){var be,Re=He&&He.type;if(Re==="FeatureCollection")for(be=0;be<He.features.length;be++)Be(He.features[be],he);else if(Re==="GeometryCollection")for(be=0;be<He.geometries.length;be++)Be(He.geometries[be],he);else if(Re==="Feature")Be(He.geometry,he);else if(Re==="Polygon")c(He.coordinates,he);else if(Re==="MultiPolygon")for(be=0;be<He.coordinates.length;be++)c(He.coordinates[be],he);return He};function c(Be,He){if(Be.length!==0){i(Be[0],He);for(var he=1;he<Be.length;he++)i(Be[he],!He)}}function i(Be,He){for(var he=0,be=0,Re=Be.length,Ue=Re-1;be<Re;Ue=be++)he+=(Be[be][0]-Be[Ue][0])*(Be[Ue][1]+Be[be][1]);he>=0!=!!He&&Be.reverse()}var y=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,f=function(Be){this._feature=Be,this.extent=e.EXTENT,this.type=Be.type,this.properties=Be.tags,"id"in Be&&!isNaN(Be.id)&&(this.id=parseInt(Be.id,10))};f.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Be=[],He=0,he=this._feature.geometry;He<he.length;He+=1){var be=he[He];Be.push([new e.Point$1(be[0],be[1])])}return Be}for(var Re=[],Ue=0,Xe=this._feature.geometry;Ue<Xe.length;Ue+=1){for(var qe=[],st=0,it=Xe[Ue];st<it.length;st+=1){var Tt=it[st];qe.push(new e.Point$1(Tt[0],Tt[1]))}Re.push(qe)}return Re},f.prototype.toGeoJSON=function(Be,He,he){return y.call(this,Be,He,he)};var w=function(Be){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=Be.length,this._features=Be};w.prototype.feature=function(Be){return new f(this._features[Be])};var b=e.vectorTile.VectorTileFeature,_=T;function T(Be,He){this.options=He||{},this.features=Be,this.length=Be.length}function L(Be,He){this.id=typeof Be.id=="number"?Be.id:void 0,this.type=Be.type,this.rawGeometry=Be.type===1?[Be.geometry]:Be.geometry,this.properties=Be.tags,this.extent=He||4096}T.prototype.feature=function(Be){return new L(this.features[Be],this.options.extent)},L.prototype.loadGeometry=function(){var Be=this.rawGeometry;this.geometry=[];for(var He=0;He<Be.length;He++){for(var he=Be[He],be=[],Re=0;Re<he.length;Re++)be.push(new e.Point$1(he[Re][0],he[Re][1]));this.geometry.push(be)}return this.geometry},L.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Be=this.geometry,He=1/0,he=-1/0,be=1/0,Re=-1/0,Ue=0;Ue<Be.length;Ue++)for(var Xe=Be[Ue],qe=0;qe<Xe.length;qe++){var st=Xe[qe];He=Math.min(He,st.x),he=Math.max(he,st.x),be=Math.min(be,st.y),Re=Math.max(Re,st.y)}return[He,be,he,Re]},L.prototype.toGeoJSON=b.prototype.toGeoJSON;var A=E,I=E,P=function(Be,He){He=He||{};var he={};for(var be in Be)he[be]=new _(Be[be].features,He),he[be].name=be,he[be].version=He.version,he[be].extent=He.extent;return E({layers:he})},S=_;function E(Be){var He=new e.pbf;return function(he,be){for(var Re in he.layers)be.writeMessage(3,z,he.layers[Re])}(Be,He),He.finish()}function z(Be,He){var he;He.writeVarintField(15,Be.version||1),He.writeStringField(1,Be.name||""),He.writeVarintField(5,Be.extent||4096);var be={keys:[],values:[],keycache:{},valuecache:{}};for(he=0;he<Be.length;he++)be.feature=Be.feature(he),He.writeMessage(2,D,be);var Re=be.keys;for(he=0;he<Re.length;he++)He.writeStringField(3,Re[he]);var Ue=be.values;for(he=0;he<Ue.length;he++)He.writeMessage(4,W,Ue[he])}function D(Be,He){var he=Be.feature;he.id!==void 0&&He.writeVarintField(1,he.id),He.writeMessage(2,U,Be),He.writeVarintField(3,he.type),He.writeMessage(4,J,he)}function U(Be,He){var he=Be.feature,be=Be.keys,Re=Be.values,Ue=Be.keycache,Xe=Be.valuecache;for(var qe in he.properties){var st=Ue[qe];st===void 0&&(be.push(qe),st=be.length-1,Ue[qe]=st),He.writeVarint(st);var it=he.properties[qe],Tt=typeof it;Tt!=="string"&&Tt!=="boolean"&&Tt!=="number"&&(it=JSON.stringify(it));var Pt=Tt+":"+it,rt=Xe[Pt];rt===void 0&&(Re.push(it),rt=Re.length-1,Xe[Pt]=rt),He.writeVarint(rt)}}function H(Be,He){return(He<<3)+(7&Be)}function Y(Be){return Be<<1^Be>>31}function J(Be,He){for(var he=Be.loadGeometry(),be=Be.type,Re=0,Ue=0,Xe=he.length,qe=0;qe<Xe;qe++){var st=he[qe],it=1;be===1&&(it=st.length),He.writeVarint(H(1,it));for(var Tt=be===3?st.length-1:st.length,Pt=0;Pt<Tt;Pt++){Pt===1&&be!==1&&He.writeVarint(H(2,Tt-1));var rt=st[Pt].x-Re,ut=st[Pt].y-Ue;He.writeVarint(Y(rt)),He.writeVarint(Y(ut)),Re+=rt,Ue+=ut}be===3&&He.writeVarint(H(7,1))}}function W(Be,He){var he=typeof Be;he==="string"?He.writeStringField(1,Be):he==="boolean"?He.writeBooleanField(7,Be):he==="number"&&(Be%1!=0?He.writeDoubleField(3,Be):Be<0?He.writeSVarintField(6,Be):He.writeVarintField(5,Be))}function Z(Be,He,he,be,Re,Ue){if(!(Re-be<=he)){var Xe=be+Re>>1;(function qe(st,it,Tt,Pt,rt,ut){for(;rt>Pt;){if(rt-Pt>600){var Bt=rt-Pt+1,wt=Tt-Pt+1,Lt=Math.log(Bt),Se=.5*Math.exp(2*Lt/3),We=.5*Math.sqrt(Lt*Se*(Bt-Se)/Bt)*(wt-Bt/2<0?-1:1),nt=Math.max(Pt,Math.floor(Tt-wt*Se/Bt+We)),ft=Math.min(rt,Math.floor(Tt+(Bt-wt)*Se/Bt+We));qe(st,it,Tt,nt,ft,ut)}var Mt=it[2*Tt+ut],Nt=Pt,Zt=rt;for(re(st,it,Pt,Tt),it[2*rt+ut]>Mt&&re(st,it,Pt,rt);Nt<Zt;){for(re(st,it,Nt,Zt),Nt++,Zt--;it[2*Nt+ut]<Mt;)Nt++;for(;it[2*Zt+ut]>Mt;)Zt--}it[2*Pt+ut]===Mt?re(st,it,Pt,Zt):(Zt++,re(st,it,Zt,rt)),Zt<=Tt&&(Pt=Zt+1),Tt<=Zt&&(rt=Zt-1)}})(Be,He,Xe,be,Re,Ue%2),Z(Be,He,he,be,Xe-1,Ue+1),Z(Be,He,he,Xe+1,Re,Ue+1)}}function re(Be,He,he,be){V(Be,he,be),V(He,2*he,2*be),V(He,2*he+1,2*be+1)}function V(Be,He,he){var be=Be[He];Be[He]=Be[he],Be[he]=be}function B(Be,He,he,be){var Re=Be-he,Ue=He-be;return Re*Re+Ue*Ue}A.fromVectorTileJs=I,A.fromGeojsonVt=P,A.GeoJSONWrapper=S;var j=function(Be){return Be[0]},ee=function(Be){return Be[1]},N=function(Be,He,he,be,Re){He===void 0&&(He=j),he===void 0&&(he=ee),be===void 0&&(be=64),Re===void 0&&(Re=Float64Array),this.nodeSize=be,this.points=Be;for(var Ue=Be.length<65536?Uint16Array:Uint32Array,Xe=this.ids=new Ue(Be.length),qe=this.coords=new Re(2*Be.length),st=0;st<Be.length;st++)Xe[st]=st,qe[2*st]=He(Be[st]),qe[2*st+1]=he(Be[st]);Z(Xe,qe,be,0,Xe.length-1,0)};N.prototype.range=function(Be,He,he,be){return function(Re,Ue,Xe,qe,st,it,Tt){for(var Pt,rt,ut=[0,Re.length-1,0],Bt=[];ut.length;){var wt=ut.pop(),Lt=ut.pop(),Se=ut.pop();if(Lt-Se<=Tt)for(var We=Se;We<=Lt;We++)Pt=Ue[2*We],rt=Ue[2*We+1],Pt>=Xe&&Pt<=st&&rt>=qe&&rt<=it&&Bt.push(Re[We]);else{var nt=Math.floor((Se+Lt)/2);Pt=Ue[2*nt],rt=Ue[2*nt+1],Pt>=Xe&&Pt<=st&&rt>=qe&&rt<=it&&Bt.push(Re[nt]);var ft=(wt+1)%2;(wt===0?Xe<=Pt:qe<=rt)&&(ut.push(Se),ut.push(nt-1),ut.push(ft)),(wt===0?st>=Pt:it>=rt)&&(ut.push(nt+1),ut.push(Lt),ut.push(ft))}}return Bt}(this.ids,this.coords,Be,He,he,be,this.nodeSize)},N.prototype.within=function(Be,He,he){return function(be,Re,Ue,Xe,qe,st){for(var it=[0,be.length-1,0],Tt=[],Pt=qe*qe;it.length;){var rt=it.pop(),ut=it.pop(),Bt=it.pop();if(ut-Bt<=st)for(var wt=Bt;wt<=ut;wt++)B(Re[2*wt],Re[2*wt+1],Ue,Xe)<=Pt&&Tt.push(be[wt]);else{var Lt=Math.floor((Bt+ut)/2),Se=Re[2*Lt],We=Re[2*Lt+1];B(Se,We,Ue,Xe)<=Pt&&Tt.push(be[Lt]);var nt=(rt+1)%2;(rt===0?Ue-qe<=Se:Xe-qe<=We)&&(it.push(Bt),it.push(Lt-1),it.push(nt)),(rt===0?Ue+qe>=Se:Xe+qe>=We)&&(it.push(Lt+1),it.push(ut),it.push(nt))}}return Tt}(this.ids,this.coords,Be,He,he,this.nodeSize)};var $={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Be){return Be}},K=function(Be){this.options=ye(Object.create($),Be),this.trees=new Array(this.options.maxZoom+1)};function te(Be,He,he,be,Re){return{x:Be,y:He,zoom:1/0,id:he,parentId:-1,numPoints:be,properties:Re}}function ie(Be,He){var he=Be.geometry.coordinates,be=he[0],Re=he[1];return{x:ve(be),y:fe(Re),zoom:1/0,index:He,parentId:-1}}function le(Be){return{type:"Feature",id:Be.id,properties:se(Be),geometry:{type:"Point",coordinates:[(be=Be.x,360*(be-.5)),(He=Be.y,he=(180-360*He)*Math.PI/180,360*Math.atan(Math.exp(he))/Math.PI-90)]}};var He,he,be}function se(Be){var He=Be.numPoints,he=He>=1e4?Math.round(He/1e3)+"k":He>=1e3?Math.round(He/100)/10+"k":He;return ye(ye({},Be.properties),{cluster:!0,cluster_id:Be.id,point_count:He,point_count_abbreviated:he})}function ve(Be){return Be/360+.5}function fe(Be){var He=Math.sin(Be*Math.PI/180),he=.5-.25*Math.log((1+He)/(1-He))/Math.PI;return he<0?0:he>1?1:he}function ye(Be,He){for(var he in He)Be[he]=He[he];return Be}function Ae(Be){return Be.x}function pe(Be){return Be.y}function ge(Be,He,he,be,Re,Ue){var Xe=Re-he,qe=Ue-be;if(Xe!==0||qe!==0){var st=((Be-he)*Xe+(He-be)*qe)/(Xe*Xe+qe*qe);st>1?(he=Re,be=Ue):st>0&&(he+=Xe*st,be+=qe*st)}return(Xe=Be-he)*Xe+(qe=He-be)*qe}function we(Be,He,he,be){var Re={id:Be===void 0?null:Be,type:He,geometry:he,tags:be,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ue){var Xe=Ue.geometry,qe=Ue.type;if(qe==="Point"||qe==="MultiPoint"||qe==="LineString")oe(Ue,Xe);else if(qe==="Polygon"||qe==="MultiLineString")for(var st=0;st<Xe.length;st++)oe(Ue,Xe[st]);else if(qe==="MultiPolygon")for(st=0;st<Xe.length;st++)for(var it=0;it<Xe[st].length;it++)oe(Ue,Xe[st][it])}(Re),Re}function oe(Be,He){for(var he=0;he<He.length;he+=3)Be.minX=Math.min(Be.minX,He[he]),Be.minY=Math.min(Be.minY,He[he+1]),Be.maxX=Math.max(Be.maxX,He[he]),Be.maxY=Math.max(Be.maxY,He[he+1])}function de(Be,He,he,be){if(He.geometry){var Re=He.geometry.coordinates,Ue=He.geometry.type,Xe=Math.pow(he.tolerance/((1<<he.maxZoom)*he.extent),2),qe=[],st=He.id;if(he.promoteId?st=He.properties[he.promoteId]:he.generateId&&(st=be||0),Ue==="Point")Te(Re,qe);else if(Ue==="MultiPoint")for(var it=0;it<Re.length;it++)Te(Re[it],qe);else if(Ue==="LineString")Ee(Re,qe,Xe,!1);else if(Ue==="MultiLineString"){if(he.lineMetrics){for(it=0;it<Re.length;it++)qe=[],Ee(Re[it],qe,Xe,!1),Be.push(we(st,"LineString",qe,He.properties));return}Me(Re,qe,Xe,!1)}else if(Ue==="Polygon")Me(Re,qe,Xe,!0);else{if(Ue!=="MultiPolygon"){if(Ue==="GeometryCollection"){for(it=0;it<He.geometry.geometries.length;it++)de(Be,{id:st,geometry:He.geometry.geometries[it],properties:He.properties},he,be);return}throw new Error("Input data is not a valid GeoJSON object.")}for(it=0;it<Re.length;it++){var Tt=[];Me(Re[it],Tt,Xe,!0),qe.push(Tt)}}Be.push(we(st,Ue,qe,He.properties))}}function Te(Be,He){He.push(De(Be[0])),He.push(Ie(Be[1])),He.push(0)}function Ee(Be,He,he,be){for(var Re,Ue,Xe=0,qe=0;qe<Be.length;qe++){var st=De(Be[qe][0]),it=Ie(Be[qe][1]);He.push(st),He.push(it),He.push(0),qe>0&&(Xe+=be?(Re*it-st*Ue)/2:Math.sqrt(Math.pow(st-Re,2)+Math.pow(it-Ue,2))),Re=st,Ue=it}var Tt=He.length-3;He[2]=1,function Pt(rt,ut,Bt,wt){for(var Lt,Se=wt,We=Bt-ut>>1,nt=Bt-ut,ft=rt[ut],Mt=rt[ut+1],Nt=rt[Bt],Zt=rt[Bt+1],Ut=ut+3;Ut<Bt;Ut+=3){var fr=ge(rt[Ut],rt[Ut+1],ft,Mt,Nt,Zt);if(fr>Se)Lt=Ut,Se=fr;else if(fr===Se){var Tr=Math.abs(Ut-We);Tr<nt&&(Lt=Ut,nt=Tr)}}Se>wt&&(Lt-ut>3&&Pt(rt,ut,Lt,wt),rt[Lt+2]=Se,Bt-Lt>3&&Pt(rt,Lt,Bt,wt))}(He,0,Tt,he),He[Tt+2]=1,He.size=Math.abs(Xe),He.start=0,He.end=He.size}function Me(Be,He,he,be){for(var Re=0;Re<Be.length;Re++){var Ue=[];Ee(Be[Re],Ue,he,be),He.push(Ue)}}function De(Be){return Be/360+.5}function Ie(Be){var He=Math.sin(Be*Math.PI/180),he=.5-.25*Math.log((1+He)/(1-He))/Math.PI;return he<0?0:he>1?1:he}function Oe(Be,He,he,be,Re,Ue,Xe,qe){if(be/=He,Ue>=(he/=He)&&Xe<be)return Be;if(Xe<he||Ue>=be)return null;for(var st=[],it=0;it<Be.length;it++){var Tt=Be[it],Pt=Tt.geometry,rt=Tt.type,ut=Re===0?Tt.minX:Tt.minY,Bt=Re===0?Tt.maxX:Tt.maxY;if(ut>=he&&Bt<be)st.push(Tt);else if(!(Bt<he||ut>=be)){var wt=[];if(rt==="Point"||rt==="MultiPoint")Ze(Pt,wt,he,be,Re);else if(rt==="LineString")Fe(Pt,wt,he,be,Re,!1,qe.lineMetrics);else if(rt==="MultiLineString")ze(Pt,wt,he,be,Re,!1);else if(rt==="Polygon")ze(Pt,wt,he,be,Re,!0);else if(rt==="MultiPolygon")for(var Lt=0;Lt<Pt.length;Lt++){var Se=[];ze(Pt[Lt],Se,he,be,Re,!0),Se.length&&wt.push(Se)}if(wt.length){if(qe.lineMetrics&&rt==="LineString"){for(Lt=0;Lt<wt.length;Lt++)st.push(we(Tt.id,rt,wt[Lt],Tt.tags));continue}rt!=="LineString"&&rt!=="MultiLineString"||(wt.length===1?(rt="LineString",wt=wt[0]):rt="MultiLineString"),rt!=="Point"&&rt!=="MultiPoint"||(rt=wt.length===3?"Point":"MultiPoint"),st.push(we(Tt.id,rt,wt,Tt.tags))}}}return st.length?st:null}function Ze(Be,He,he,be,Re){for(var Ue=0;Ue<Be.length;Ue+=3){var Xe=Be[Ue+Re];Xe>=he&&Xe<=be&&(He.push(Be[Ue]),He.push(Be[Ue+1]),He.push(Be[Ue+2]))}}function Fe(Be,He,he,be,Re,Ue,Xe){for(var qe,st,it=Pe(Be),Tt=Re===0?$e:ot,Pt=Be.start,rt=0;rt<Be.length-3;rt+=3){var ut=Be[rt],Bt=Be[rt+1],wt=Be[rt+2],Lt=Be[rt+3],Se=Be[rt+4],We=Re===0?ut:Bt,nt=Re===0?Lt:Se,ft=!1;Xe&&(qe=Math.sqrt(Math.pow(ut-Lt,2)+Math.pow(Bt-Se,2))),We<he?nt>he&&(st=Tt(it,ut,Bt,Lt,Se,he),Xe&&(it.start=Pt+qe*st)):We>be?nt<be&&(st=Tt(it,ut,Bt,Lt,Se,be),Xe&&(it.start=Pt+qe*st)):Ge(it,ut,Bt,wt),nt<he&&We>=he&&(st=Tt(it,ut,Bt,Lt,Se,he),ft=!0),nt>be&&We<=be&&(st=Tt(it,ut,Bt,Lt,Se,be),ft=!0),!Ue&&ft&&(Xe&&(it.end=Pt+qe*st),He.push(it),it=Pe(Be)),Xe&&(Pt+=qe)}var Mt=Be.length-3;ut=Be[Mt],Bt=Be[Mt+1],wt=Be[Mt+2],(We=Re===0?ut:Bt)>=he&&We<=be&&Ge(it,ut,Bt,wt),Mt=it.length-3,Ue&&Mt>=3&&(it[Mt]!==it[0]||it[Mt+1]!==it[1])&&Ge(it,it[0],it[1],it[2]),it.length&&He.push(it)}function Pe(Be){var He=[];return He.size=Be.size,He.start=Be.start,He.end=Be.end,He}function ze(Be,He,he,be,Re,Ue){for(var Xe=0;Xe<Be.length;Xe++)Fe(Be[Xe],He,he,be,Re,Ue,!1)}function Ge(Be,He,he,be){Be.push(He),Be.push(he),Be.push(be)}function $e(Be,He,he,be,Re,Ue){var Xe=(Ue-He)/(be-He);return Be.push(Ue),Be.push(he+(Re-he)*Xe),Be.push(1),Xe}function ot(Be,He,he,be,Re,Ue){var Xe=(Ue-he)/(Re-he);return Be.push(He+(be-He)*Xe),Be.push(Ue),Be.push(1),Xe}function vt(Be,He){for(var he=[],be=0;be<Be.length;be++){var Re,Ue=Be[be],Xe=Ue.type;if(Xe==="Point"||Xe==="MultiPoint"||Xe==="LineString")Re=bt(Ue.geometry,He);else if(Xe==="MultiLineString"||Xe==="Polygon"){Re=[];for(var qe=0;qe<Ue.geometry.length;qe++)Re.push(bt(Ue.geometry[qe],He))}else if(Xe==="MultiPolygon")for(Re=[],qe=0;qe<Ue.geometry.length;qe++){for(var st=[],it=0;it<Ue.geometry[qe].length;it++)st.push(bt(Ue.geometry[qe][it],He));Re.push(st)}he.push(we(Ue.id,Xe,Re,Ue.tags))}return he}function bt(Be,He){var he=[];he.size=Be.size,Be.start!==void 0&&(he.start=Be.start,he.end=Be.end);for(var be=0;be<Be.length;be+=3)he.push(Be[be]+He,Be[be+1],Be[be+2]);return he}function yt(Be,He){if(Be.transformed)return Be;var he,be,Re,Ue=1<<Be.z,Xe=Be.x,qe=Be.y;for(he=0;he<Be.features.length;he++){var st=Be.features[he],it=st.geometry,Tt=st.type;if(st.geometry=[],Tt===1)for(be=0;be<it.length;be+=2)st.geometry.push(tt(it[be],it[be+1],He,Ue,Xe,qe));else for(be=0;be<it.length;be++){var Pt=[];for(Re=0;Re<it[be].length;Re+=2)Pt.push(tt(it[be][Re],it[be][Re+1],He,Ue,Xe,qe));st.geometry.push(Pt)}}return Be.transformed=!0,Be}function tt(Be,He,he,be,Re,Ue){return[Math.round(he*(Be*be-Re)),Math.round(he*(He*be-Ue))]}function Ke(Be,He,he,be,Re){for(var Ue=He===Re.maxZoom?0:Re.tolerance/((1<<He)*Re.extent),Xe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:he,y:be,z:He,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},qe=0;qe<Be.length;qe++){Xe.numFeatures++,mt(Xe,Be[qe],Ue,Re);var st=Be[qe].minX,it=Be[qe].minY,Tt=Be[qe].maxX,Pt=Be[qe].maxY;st<Xe.minX&&(Xe.minX=st),it<Xe.minY&&(Xe.minY=it),Tt>Xe.maxX&&(Xe.maxX=Tt),Pt>Xe.maxY&&(Xe.maxY=Pt)}return Xe}function mt(Be,He,he,be){var Re=He.geometry,Ue=He.type,Xe=[];if(Ue==="Point"||Ue==="MultiPoint")for(var qe=0;qe<Re.length;qe+=3)Xe.push(Re[qe]),Xe.push(Re[qe+1]),Be.numPoints++,Be.numSimplified++;else if(Ue==="LineString")Ft(Xe,Re,Be,he,!1,!1);else if(Ue==="MultiLineString"||Ue==="Polygon")for(qe=0;qe<Re.length;qe++)Ft(Xe,Re[qe],Be,he,Ue==="Polygon",qe===0);else if(Ue==="MultiPolygon")for(var st=0;st<Re.length;st++){var it=Re[st];for(qe=0;qe<it.length;qe++)Ft(Xe,it[qe],Be,he,!0,qe===0)}if(Xe.length){var Tt=He.tags||null;if(Ue==="LineString"&&be.lineMetrics){for(var Pt in Tt={},He.tags)Tt[Pt]=He.tags[Pt];Tt.mapbox_clip_start=Re.start/Re.size,Tt.mapbox_clip_end=Re.end/Re.size}var rt={geometry:Xe,type:Ue==="Polygon"||Ue==="MultiPolygon"?3:Ue==="LineString"||Ue==="MultiLineString"?2:1,tags:Tt};He.id!==null&&(rt.id=He.id),Be.features.push(rt)}}function Ft(Be,He,he,be,Re,Ue){var Xe=be*be;if(be>0&&He.size<(Re?Xe:be))he.numPoints+=He.length/3;else{for(var qe=[],st=0;st<He.length;st+=3)(be===0||He[st+2]>Xe)&&(he.numSimplified++,qe.push(He[st]),qe.push(He[st+1])),he.numPoints++;Re&&function(it,Tt){for(var Pt=0,rt=0,ut=it.length,Bt=ut-2;rt<ut;Bt=rt,rt+=2)Pt+=(it[rt]-it[Bt])*(it[rt+1]+it[Bt+1]);if(Pt>0===Tt)for(rt=0,ut=it.length;rt<ut/2;rt+=2){var wt=it[rt],Lt=it[rt+1];it[rt]=it[ut-2-rt],it[rt+1]=it[ut-1-rt],it[ut-2-rt]=wt,it[ut-1-rt]=Lt}}(qe,Ue),Be.push(qe)}}function Vt(Be,He){var he=(He=this.options=function(Re,Ue){for(var Xe in Ue)Re[Xe]=Ue[Xe];return Re}(Object.create(this.options),He)).debug;if(he&&console.time("preprocess data"),He.maxZoom<0||He.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(He.promoteId&&He.generateId)throw new Error("promoteId and generateId cannot be used together.");var be=function(Re,Ue){var Xe=[];if(Re.type==="FeatureCollection")for(var qe=0;qe<Re.features.length;qe++)de(Xe,Re.features[qe],Ue,qe);else Re.type==="Feature"?de(Xe,Re,Ue):de(Xe,{geometry:Re},Ue);return Xe}(Be,He);this.tiles={},this.tileCoords=[],he&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",He.indexMaxZoom,He.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(be=function(Re,Ue){var Xe=Ue.buffer/Ue.extent,qe=Re,st=Oe(Re,1,-1-Xe,Xe,0,-1,2,Ue),it=Oe(Re,1,1-Xe,2+Xe,0,-1,2,Ue);return(st||it)&&(qe=Oe(Re,1,-Xe,1+Xe,0,-1,2,Ue)||[],st&&(qe=vt(st,1).concat(qe)),it&&(qe=qe.concat(vt(it,-1)))),qe}(be,He)).length&&this.splitTile(be,0,0,0),he&&(be.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Xt(Be,He,he){return 32*((1<<Be)*he+He)+Be}function Gt(Be,He){var he=Be.tileID.canonical;if(!this._geoJSONIndex)return He(null,null);var be=this._geoJSONIndex.getTile(he.z,he.x,he.y);if(!be)return He(null,null);var Re=new w(be.features),Ue=A(Re);Ue.byteOffset===0&&Ue.byteLength===Ue.buffer.byteLength||(Ue=new Uint8Array(Ue)),He(null,{vectorTile:Re,rawData:Ue.buffer})}K.prototype.load=function(Be){var He=this.options,he=He.log,be=He.minZoom,Re=He.maxZoom,Ue=He.nodeSize;he&&console.time("total time");var Xe="prepare "+Be.length+" points";he&&console.time(Xe),this.points=Be;for(var qe=[],st=0;st<Be.length;st++)Be[st].geometry&&qe.push(ie(Be[st],st));this.trees[Re+1]=new N(qe,Ae,pe,Ue,Float32Array),he&&console.timeEnd(Xe);for(var it=Re;it>=be;it--){var Tt=+Date.now();qe=this._cluster(qe,it),this.trees[it]=new N(qe,Ae,pe,Ue,Float32Array),he&&console.log("z%d: %d clusters in %dms",it,qe.length,+Date.now()-Tt)}return he&&console.timeEnd("total time"),this},K.prototype.getClusters=function(Be,He){var he=((Be[0]+180)%360+360)%360-180,be=Math.max(-90,Math.min(90,Be[1])),Re=Be[2]===180?180:((Be[2]+180)%360+360)%360-180,Ue=Math.max(-90,Math.min(90,Be[3]));if(Be[2]-Be[0]>=360)he=-180,Re=180;else if(he>Re){var Xe=this.getClusters([he,be,180,Ue],He),qe=this.getClusters([-180,be,Re,Ue],He);return Xe.concat(qe)}for(var st=this.trees[this._limitZoom(He)],it=[],Tt=0,Pt=st.range(ve(he),fe(Ue),ve(Re),fe(be));Tt<Pt.length;Tt+=1){var rt=Pt[Tt],ut=st.points[rt];it.push(ut.numPoints?le(ut):this.points[ut.index])}return it},K.prototype.getChildren=function(Be){var He=this._getOriginId(Be),he=this._getOriginZoom(Be),be="No cluster with the specified id.",Re=this.trees[he];if(!Re)throw new Error(be);var Ue=Re.points[He];if(!Ue)throw new Error(be);for(var Xe=this.options.radius/(this.options.extent*Math.pow(2,he-1)),qe=[],st=0,it=Re.within(Ue.x,Ue.y,Xe);st<it.length;st+=1){var Tt=it[st],Pt=Re.points[Tt];Pt.parentId===Be&&qe.push(Pt.numPoints?le(Pt):this.points[Pt.index])}if(qe.length===0)throw new Error(be);return qe},K.prototype.getLeaves=function(Be,He,he){He=He||10,he=he||0;var be=[];return this._appendLeaves(be,Be,He,he,0),be},K.prototype.getTile=function(Be,He,he){var be=this.trees[this._limitZoom(Be)],Re=Math.pow(2,Be),Ue=this.options,Xe=Ue.extent,qe=Ue.radius/Xe,st=(he-qe)/Re,it=(he+1+qe)/Re,Tt={features:[]};return this._addTileFeatures(be.range((He-qe)/Re,st,(He+1+qe)/Re,it),be.points,He,he,Re,Tt),He===0&&this._addTileFeatures(be.range(1-qe/Re,st,1,it),be.points,Re,he,Re,Tt),He===Re-1&&this._addTileFeatures(be.range(0,st,qe/Re,it),be.points,-1,he,Re,Tt),Tt.features.length?Tt:null},K.prototype.getClusterExpansionZoom=function(Be){for(var He=this._getOriginZoom(Be)-1;He<=this.options.maxZoom;){var he=this.getChildren(Be);if(He++,he.length!==1)break;Be=he[0].properties.cluster_id}return He},K.prototype._appendLeaves=function(Be,He,he,be,Re){for(var Ue=0,Xe=this.getChildren(He);Ue<Xe.length;Ue+=1){var qe=Xe[Ue],st=qe.properties;if(st&&st.cluster?Re+st.point_count<=be?Re+=st.point_count:Re=this._appendLeaves(Be,st.cluster_id,he,be,Re):Re<be?Re++:Be.push(qe),Be.length===he)break}return Re},K.prototype._addTileFeatures=function(Be,He,he,be,Re,Ue){for(var Xe=0,qe=Be;Xe<qe.length;Xe+=1){var st=He[qe[Xe]],it=st.numPoints,Tt={type:1,geometry:[[Math.round(this.options.extent*(st.x*Re-he)),Math.round(this.options.extent*(st.y*Re-be))]],tags:it?se(st):this.points[st.index].properties},Pt=void 0;it?Pt=st.id:this.options.generateId?Pt=st.index:this.points[st.index].id&&(Pt=this.points[st.index].id),Pt!==void 0&&(Tt.id=Pt),Ue.features.push(Tt)}},K.prototype._limitZoom=function(Be){return Math.max(this.options.minZoom,Math.min(Be,this.options.maxZoom+1))},K.prototype._cluster=function(Be,He){for(var he=[],be=this.options,Re=be.radius,Ue=be.extent,Xe=be.reduce,qe=Re/(Ue*Math.pow(2,He)),st=0;st<Be.length;st++){var it=Be[st];if(!(it.zoom<=He)){it.zoom=He;for(var Tt=this.trees[He+1],Pt=Tt.within(it.x,it.y,qe),rt=it.numPoints||1,ut=it.x*rt,Bt=it.y*rt,wt=Xe&&rt>1?this._map(it,!0):null,Lt=(st<<5)+(He+1)+this.points.length,Se=0,We=Pt;Se<We.length;Se+=1){var nt=We[Se],ft=Tt.points[nt];if(!(ft.zoom<=He)){ft.zoom=He;var Mt=ft.numPoints||1;ut+=ft.x*Mt,Bt+=ft.y*Mt,rt+=Mt,ft.parentId=Lt,Xe&&(wt||(wt=this._map(it,!0)),Xe(wt,this._map(ft)))}}rt===1?he.push(it):(it.parentId=Lt,he.push(te(ut/rt,Bt/rt,Lt,rt,wt)))}}return he},K.prototype._getOriginId=function(Be){return Be-this.points.length>>5},K.prototype._getOriginZoom=function(Be){return(Be-this.points.length)%32},K.prototype._map=function(Be,He){if(Be.numPoints)return He?ye({},Be.properties):Be.properties;var he=this.points[Be.index].properties,be=this.options.map(he);return He&&be===he?ye({},be):be},Vt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Vt.prototype.splitTile=function(Be,He,he,be,Re,Ue,Xe){for(var qe=[Be,He,he,be],st=this.options,it=st.debug;qe.length;){be=qe.pop(),he=qe.pop(),He=qe.pop(),Be=qe.pop();var Tt=1<<He,Pt=Xt(He,he,be),rt=this.tiles[Pt];if(!rt&&(it>1&&console.time("creation"),rt=this.tiles[Pt]=Ke(Be,He,he,be,st),this.tileCoords.push({z:He,x:he,y:be}),it)){it>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",He,he,be,rt.numFeatures,rt.numPoints,rt.numSimplified),console.timeEnd("creation"));var ut="z"+He;this.stats[ut]=(this.stats[ut]||0)+1,this.total++}if(rt.source=Be,Re){if(He===st.maxZoom||He===Re)continue;var Bt=1<<Re-He;if(he!==Math.floor(Ue/Bt)||be!==Math.floor(Xe/Bt))continue}else if(He===st.indexMaxZoom||rt.numPoints<=st.indexMaxPoints)continue;if(rt.source=null,Be.length!==0){it>1&&console.time("clipping");var wt,Lt,Se,We,nt,ft,Mt=.5*st.buffer/st.extent,Nt=.5-Mt,Zt=.5+Mt,Ut=1+Mt;wt=Lt=Se=We=null,nt=Oe(Be,Tt,he-Mt,he+Zt,0,rt.minX,rt.maxX,st),ft=Oe(Be,Tt,he+Nt,he+Ut,0,rt.minX,rt.maxX,st),Be=null,nt&&(wt=Oe(nt,Tt,be-Mt,be+Zt,1,rt.minY,rt.maxY,st),Lt=Oe(nt,Tt,be+Nt,be+Ut,1,rt.minY,rt.maxY,st),nt=null),ft&&(Se=Oe(ft,Tt,be-Mt,be+Zt,1,rt.minY,rt.maxY,st),We=Oe(ft,Tt,be+Nt,be+Ut,1,rt.minY,rt.maxY,st),ft=null),it>1&&console.timeEnd("clipping"),qe.push(wt||[],He+1,2*he,2*be),qe.push(Lt||[],He+1,2*he,2*be+1),qe.push(Se||[],He+1,2*he+1,2*be),qe.push(We||[],He+1,2*he+1,2*be+1)}}},Vt.prototype.getTile=function(Be,He,he){var be=this.options,Re=be.extent,Ue=be.debug;if(Be<0||Be>24)return null;var Xe=1<<Be,qe=Xt(Be,He=(He%Xe+Xe)%Xe,he);if(this.tiles[qe])return yt(this.tiles[qe],Re);Ue>1&&console.log("drilling down to z%d-%d-%d",Be,He,he);for(var st,it=Be,Tt=He,Pt=he;!st&&it>0;)it--,Tt=Math.floor(Tt/2),Pt=Math.floor(Pt/2),st=this.tiles[Xt(it,Tt,Pt)];return st&&st.source?(Ue>1&&console.log("found parent tile z%d-%d-%d",it,Tt,Pt),Ue>1&&console.time("drilling down"),this.splitTile(st.source,it,Tt,Pt,Be,He,he),Ue>1&&console.timeEnd("drilling down"),this.tiles[qe]?yt(this.tiles[qe],Re):null):null};var nr=function(Be){function He(he,be,Re,Ue){Be.call(this,he,be,Re,Gt),Ue&&(this.loadGeoJSON=Ue)}return Be&&(He.__proto__=Be),He.prototype=Object.create(Be&&Be.prototype),He.prototype.constructor=He,He.prototype.loadData=function(he,be){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=be,this._pendingLoadDataParams=he,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},He.prototype._loadData=function(){var he=this;if(this._pendingCallback&&this._pendingLoadDataParams){var be=this._pendingCallback,Re=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Ue=!!(Re&&Re.request&&Re.request.collectResourceTiming)&&new e.RequestPerformance(Re.request);this.loadGeoJSON(Re,function(Xe,qe){if(Xe||!qe)return be(Xe);if(typeof qe!="object")return be(new Error("Input data given to '"+Re.source+"' is not a valid GeoJSON object."));p(qe,!0);try{he._geoJSONIndex=Re.cluster?new K(function(Tt){var Pt=Tt.superclusterOptions,rt=Tt.clusterProperties;if(!rt||!Pt)return Pt;for(var ut={},Bt={},wt={accumulated:null,zoom:0},Lt={properties:null},Se=Object.keys(rt),We=0,nt=Se;We<nt.length;We+=1){var ft=nt[We],Mt=rt[ft],Nt=Mt[0],Zt=Mt[1],Ut=e.createExpression(Zt),fr=e.createExpression(typeof Nt=="string"?[Nt,["accumulated"],["get",ft]]:Nt);ut[ft]=Ut.value,Bt[ft]=fr.value}return Pt.map=function(Tr){Lt.properties=Tr;for(var ur={},Kt=0,Qt=Se;Kt<Qt.length;Kt+=1){var er=Qt[Kt];ur[er]=ut[er].evaluate(wt,Lt)}return ur},Pt.reduce=function(Tr,ur){Lt.properties=ur;for(var Kt=0,Qt=Se;Kt<Qt.length;Kt+=1){var er=Qt[Kt];wt.accumulated=Tr[er],Tr[er]=Bt[er].evaluate(wt,Lt)}},Pt}(Re)).load(qe.features):function(Tt,Pt){return new Vt(Tt,Pt)}(qe,Re.geojsonVtOptions)}catch(Tt){return be(Tt)}he.loaded={};var st={};if(Ue){var it=Ue.finish();it&&(st.resourceTiming={},st.resourceTiming[Re.source]=JSON.parse(JSON.stringify(it)))}be(null,st)})}},He.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},He.prototype.reloadTile=function(he,be){var Re=this.loaded,Ue=he.uid;return Re&&Re[Ue]?Be.prototype.reloadTile.call(this,he,be):this.loadTile(he,be)},He.prototype.loadGeoJSON=function(he,be){if(he.request)e.getJSON(he.request,be);else{if(typeof he.data!="string")return be(new Error("Input data given to '"+he.source+"' is not a valid GeoJSON object."));try{return be(null,JSON.parse(he.data))}catch{return be(new Error("Input data given to '"+he.source+"' is not a valid GeoJSON object."))}}},He.prototype.removeSource=function(he,be){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),be()},He.prototype.getClusterExpansionZoom=function(he,be){try{be(null,this._geoJSONIndex.getClusterExpansionZoom(he.clusterId))}catch(Re){be(Re)}},He.prototype.getClusterChildren=function(he,be){try{be(null,this._geoJSONIndex.getChildren(he.clusterId))}catch(Re){be(Re)}},He.prototype.getClusterLeaves=function(he,be){try{be(null,this._geoJSONIndex.getLeaves(he.clusterId,he.limit,he.offset))}catch(Re){be(Re)}},He}(h),It=function(Be){var He=this;this.self=Be,this.actor=new e.Actor(Be,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:h,geojson:nr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(he,be){if(He.workerSourceTypes[he])throw new Error('Worker source with name "'+he+'" already registered.');He.workerSourceTypes[he]=be},this.self.registerRTLTextPlugin=function(he){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=he.applyArabicShaping,e.plugin.processBidirectionalText=he.processBidirectionalText,e.plugin.processStyledBidirectionalText=he.processStyledBidirectionalText}};return It.prototype.setReferrer=function(Be,He){this.referrer=He},It.prototype.setImages=function(Be,He,he){for(var be in this.availableImages[Be]=He,this.workerSources[Be]){var Re=this.workerSources[Be][be];for(var Ue in Re)Re[Ue].availableImages=He}he()},It.prototype.setLayers=function(Be,He,he){this.getLayerIndex(Be).replace(He),he()},It.prototype.updateLayers=function(Be,He,he){this.getLayerIndex(Be).update(He.layers,He.removedIds),he()},It.prototype.loadTile=function(Be,He,he){this.getWorkerSource(Be,He.type,He.source).loadTile(He,he)},It.prototype.loadDEMTile=function(Be,He,he){this.getDEMWorkerSource(Be,He.source).loadTile(He,he)},It.prototype.reloadTile=function(Be,He,he){this.getWorkerSource(Be,He.type,He.source).reloadTile(He,he)},It.prototype.abortTile=function(Be,He,he){this.getWorkerSource(Be,He.type,He.source).abortTile(He,he)},It.prototype.removeTile=function(Be,He,he){this.getWorkerSource(Be,He.type,He.source).removeTile(He,he)},It.prototype.removeDEMTile=function(Be,He){this.getDEMWorkerSource(Be,He.source).removeTile(He)},It.prototype.removeSource=function(Be,He,he){if(this.workerSources[Be]&&this.workerSources[Be][He.type]&&this.workerSources[Be][He.type][He.source]){var be=this.workerSources[Be][He.type][He.source];delete this.workerSources[Be][He.type][He.source],be.removeSource!==void 0?be.removeSource(He,he):he()}},It.prototype.loadWorkerSource=function(Be,He,he){try{this.self.importScripts(He.url),he()}catch(be){he(be.toString())}},It.prototype.syncRTLPluginState=function(Be,He,he){try{e.plugin.setState(He);var be=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&be!=null){this.self.importScripts(be);var Re=e.plugin.isParsed();he(Re?void 0:new Error("RTL Text Plugin failed to import scripts from "+be),Re)}}catch(Ue){he(Ue.toString())}},It.prototype.getAvailableImages=function(Be){var He=this.availableImages[Be];return He||(He=[]),He},It.prototype.getLayerIndex=function(Be){var He=this.layerIndexes[Be];return He||(He=this.layerIndexes[Be]=new l),He},It.prototype.getWorkerSource=function(Be,He,he){var be=this;if(this.workerSources[Be]||(this.workerSources[Be]={}),this.workerSources[Be][He]||(this.workerSources[Be][He]={}),!this.workerSources[Be][He][he]){var Re={send:function(Ue,Xe,qe){be.actor.send(Ue,Xe,qe,Be)}};this.workerSources[Be][He][he]=new this.workerSourceTypes[He](Re,this.getLayerIndex(Be),this.getAvailableImages(Be))}return this.workerSources[Be][He][he]},It.prototype.getDEMWorkerSource=function(Be,He){return this.demWorkerSources[Be]||(this.demWorkerSources[Be]={}),this.demWorkerSources[Be][He]||(this.demWorkerSources[Be][He]=new a),this.demWorkerSources[Be][He]},It.prototype.enforceCacheSizeLimit=function(Be,He){e.enforceCacheSizeLimit(He)},typeof WorkerGlobalScope<"u"&&e.window!==void 0&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new It(e.window)),It}),x(0,function(e){var t=e.createCommonjsModule(function(C){function R(ae){return!F(ae)}function F(ae){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var ue,xe,ke=new Blob([""],{type:"text/javascript"}),Le=URL.createObjectURL(ke);try{xe=new Worker(Le),ue=!0}catch{ue=!1}return xe&&xe.terminate(),URL.revokeObjectURL(Le),ue}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var ue=document.createElement("canvas");ue.width=ue.height=1;var xe=ue.getContext("2d");if(!xe)return!1;var ke=xe.getImageData(0,0,1,1);return ke&&ke.width===ue.width}()?function(ue){return q[ue]===void 0&&(q[ue]=function(xe){var ke=function(Ve){var Je=document.createElement("canvas"),at=Object.create(R.webGLContextAttributes);return at.failIfMajorPerformanceCaveat=Ve,Je.probablySupportsContext?Je.probablySupportsContext("webgl",at)||Je.probablySupportsContext("experimental-webgl",at):Je.supportsContext?Je.supportsContext("webgl",at)||Je.supportsContext("experimental-webgl",at):Je.getContext("webgl",at)||Je.getContext("experimental-webgl",at)}(xe);if(!ke)return!1;var Le=ke.createShader(ke.VERTEX_SHADER);return!Le||ke.isContextLost()?!1:(ke.shaderSource(Le,"void main() {}"),ke.compileShader(Le),ke.getShaderParameter(Le,ke.COMPILE_STATUS)===!0)}(ue)),q[ue]}(ae&&ae.failIfMajorPerformanceCaveat)?void 0:"insufficient WebGL support":"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support"}C.exports?C.exports=R:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=R,window.mapboxgl.notSupportedReason=F);var q={};R.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),r={create:function(C,R,F){var q=e.window.document.createElement(C);return R!==void 0&&(q.className=R),F&&F.appendChild(q),q},createNS:function(C,R){return e.window.document.createElementNS(C,R)}},l=e.window.document.documentElement.style;function n(C){if(!l)return C[0];for(var R=0;R<C.length;R++)if(C[R]in l)return C[R];return C[0]}var d,u=n(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);r.disableDrag=function(){l&&u&&(d=l[u],l[u]="none")},r.enableDrag=function(){l&&u&&(l[u]=d)};var o=n(["transform","WebkitTransform"]);r.setTransform=function(C,R){C.style[o]=R};var h=!1;try{var s=Object.defineProperty({},"passive",{get:function(){h=!0}});e.window.addEventListener("test",s,s),e.window.removeEventListener("test",s,s)}catch{h=!1}r.addEventListener=function(C,R,F,q){q===void 0&&(q={}),"passive"in q&&h?C.addEventListener(R,F,q):C.addEventListener(R,F,q.capture)},r.removeEventListener=function(C,R,F,q){q===void 0&&(q={}),"passive"in q&&h?C.removeEventListener(R,F,q):C.removeEventListener(R,F,q.capture)};var a=function(C){C.preventDefault(),C.stopPropagation(),e.window.removeEventListener("click",a,!0)};function p(C){var R=C.userImage;return R&&R.render&&R.render()?(C.data.replace(new Uint8Array(R.data.buffer)),!0):!1}r.suppressClick=function(){e.window.addEventListener("click",a,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",a,!0)},0)},r.mousePos=function(C,R){var F=C.getBoundingClientRect();return new e.Point(R.clientX-F.left-C.clientLeft,R.clientY-F.top-C.clientTop)},r.touchPos=function(C,R){for(var F=C.getBoundingClientRect(),q=[],ae=0;ae<R.length;ae++)q.push(new e.Point(R[ae].clientX-F.left-C.clientLeft,R[ae].clientY-F.top-C.clientTop));return q},r.mouseButton=function(C){return e.window.InstallTrigger!==void 0&&C.button===2&&C.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:C.button},r.remove=function(C){C.parentNode&&C.parentNode.removeChild(C)};var c=function(C){function R(){C.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.isLoaded=function(){return this.loaded},R.prototype.setLoaded=function(F){if(this.loaded!==F&&(this.loaded=F,F)){for(var q=0,ae=this.requestors;q<ae.length;q+=1){var ue=ae[q],xe=ue.ids,ke=ue.callback;this._notify(xe,ke)}this.requestors=[]}},R.prototype.getImage=function(F){return this.images[F]},R.prototype.addImage=function(F,q){this._validate(F,q)&&(this.images[F]=q)},R.prototype._validate=function(F,q){var ae=!0;return this._validateStretch(q.stretchX,q.data&&q.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+F+'" has invalid "stretchX" value'))),ae=!1),this._validateStretch(q.stretchY,q.data&&q.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+F+'" has invalid "stretchY" value'))),ae=!1),this._validateContent(q.content,q)||(this.fire(new e.ErrorEvent(new Error('Image "'+F+'" has invalid "content" value'))),ae=!1),ae},R.prototype._validateStretch=function(F,q){if(!F)return!0;for(var ae=0,ue=0,xe=F;ue<xe.length;ue+=1){var ke=xe[ue];if(ke[0]<ae||ke[1]<ke[0]||q<ke[1])return!1;ae=ke[1]}return!0},R.prototype._validateContent=function(F,q){return!F||F.length===4&&!(F[0]<0||q.data.width<F[0])&&!(F[1]<0||q.data.height<F[1])&&!(F[2]<0||q.data.width<F[2])&&!(F[3]<0||q.data.height<F[3])&&!(F[2]<F[0])&&!(F[3]<F[1])},R.prototype.updateImage=function(F,q){var ae=this.images[F];q.version=ae.version+1,this.images[F]=q,this.updatedImages[F]=!0},R.prototype.removeImage=function(F){var q=this.images[F];delete this.images[F],delete this.patterns[F],q.userImage&&q.userImage.onRemove&&q.userImage.onRemove()},R.prototype.listImages=function(){return Object.keys(this.images)},R.prototype.getImages=function(F,q){var ae=!0;if(!this.isLoaded())for(var ue=0,xe=F;ue<xe.length;ue+=1){var ke=xe[ue];this.images[ke]||(ae=!1)}this.isLoaded()||ae?this._notify(F,q):this.requestors.push({ids:F,callback:q})},R.prototype._notify=function(F,q){for(var ae={},ue=0,xe=F;ue<xe.length;ue+=1){var ke=xe[ue];this.images[ke]||this.fire(new e.Event("styleimagemissing",{id:ke}));var Le=this.images[ke];Le?ae[ke]={data:Le.data.clone(),pixelRatio:Le.pixelRatio,sdf:Le.sdf,version:Le.version,stretchX:Le.stretchX,stretchY:Le.stretchY,content:Le.content,hasRenderCallback:Boolean(Le.userImage&&Le.userImage.render)}:e.warnOnce('Image "'+ke+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}q(null,ae)},R.prototype.getPixelSize=function(){var F=this.atlasImage;return{width:F.width,height:F.height}},R.prototype.getPattern=function(F){var q=this.patterns[F],ae=this.getImage(F);if(!ae)return null;if(q&&q.position.version===ae.version)return q.position;if(q)q.position.version=ae.version;else{var ue={w:ae.data.width+2,h:ae.data.height+2,x:0,y:0},xe=new e.ImagePosition(ue,ae);this.patterns[F]={bin:ue,position:xe}}return this._updatePatternAtlas(),this.patterns[F].position},R.prototype.bind=function(F){var q=F.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(F,this.atlasImage,q.RGBA),this.atlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE)},R.prototype._updatePatternAtlas=function(){var F=[];for(var q in this.patterns)F.push(this.patterns[q].bin);var ae=e.potpack(F),ue=ae.w,xe=ae.h,ke=this.atlasImage;for(var Le in ke.resize({width:ue||1,height:xe||1}),this.patterns){var Ve=this.patterns[Le].bin,Je=Ve.x+1,at=Ve.y+1,_t=this.images[Le].data,Et=_t.width,kt=_t.height;e.RGBAImage.copy(_t,ke,{x:0,y:0},{x:Je,y:at},{width:Et,height:kt}),e.RGBAImage.copy(_t,ke,{x:0,y:kt-1},{x:Je,y:at-1},{width:Et,height:1}),e.RGBAImage.copy(_t,ke,{x:0,y:0},{x:Je,y:at+kt},{width:Et,height:1}),e.RGBAImage.copy(_t,ke,{x:Et-1,y:0},{x:Je-1,y:at},{width:1,height:kt}),e.RGBAImage.copy(_t,ke,{x:0,y:0},{x:Je+Et,y:at},{width:1,height:kt})}this.dirty=!0},R.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},R.prototype.dispatchRenderCallbacks=function(F){for(var q=0,ae=F;q<ae.length;q+=1){var ue=ae[q];if(!this.callbackDispatchedThisFrame[ue]){this.callbackDispatchedThisFrame[ue]=!0;var xe=this.images[ue];p(xe)&&this.updateImage(ue,xe)}}},R}(e.Evented),i=w,y=w,f=1e20;function w(C,R,F,q,ae,ue){this.fontSize=C||24,this.buffer=R===void 0?3:R,this.cutoff=q||.25,this.fontFamily=ae||"sans-serif",this.fontWeight=ue||"normal",this.radius=F||8;var xe=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=xe,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(xe*xe),this.gridInner=new Float64Array(xe*xe),this.f=new Float64Array(xe),this.d=new Float64Array(xe),this.z=new Float64Array(xe+1),this.v=new Int16Array(xe),this.middle=Math.round(xe/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function b(C,R,F,q,ae,ue,xe){for(var ke=0;ke<R;ke++){for(var Le=0;Le<F;Le++)q[Le]=C[Le*R+ke];for(_(q,ae,ue,xe,F),Le=0;Le<F;Le++)C[Le*R+ke]=ae[Le]}for(Le=0;Le<F;Le++){for(ke=0;ke<R;ke++)q[ke]=C[Le*R+ke];for(_(q,ae,ue,xe,R),ke=0;ke<R;ke++)C[Le*R+ke]=Math.sqrt(ae[ke])}}function _(C,R,F,q,ae){F[0]=0,q[0]=-f,q[1]=+f;for(var ue=1,xe=0;ue<ae;ue++){for(var ke=(C[ue]+ue*ue-(C[F[xe]]+F[xe]*F[xe]))/(2*ue-2*F[xe]);ke<=q[xe];)xe--,ke=(C[ue]+ue*ue-(C[F[xe]]+F[xe]*F[xe]))/(2*ue-2*F[xe]);F[++xe]=ue,q[xe]=ke,q[xe+1]=+f}for(ue=0,xe=0;ue<ae;ue++){for(;q[xe+1]<ue;)xe++;R[ue]=(ue-F[xe])*(ue-F[xe])+C[F[xe]]}}w.prototype.draw=function(C){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(C,this.buffer,this.middle);for(var R=this.ctx.getImageData(0,0,this.size,this.size),F=new Uint8ClampedArray(this.size*this.size),q=0;q<this.size*this.size;q++){var ae=R.data[4*q+3]/255;this.gridOuter[q]=ae===1?0:ae===0?f:Math.pow(Math.max(0,.5-ae),2),this.gridInner[q]=ae===1?f:ae===0?0:Math.pow(Math.max(0,ae-.5),2)}for(b(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),b(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),q=0;q<this.size*this.size;q++){var ue=this.gridOuter[q]-this.gridInner[q];F[q]=Math.max(0,Math.min(255,Math.round(255-255*(ue/this.radius+this.cutoff))))}return F},i.default=y;var T=function(C,R){this.requestManager=C,this.localIdeographFontFamily=R,this.entries={}};T.prototype.setURL=function(C){this.url=C},T.prototype.getGlyphs=function(C,R){var F=this,q=[];for(var ae in C)for(var ue=0,xe=C[ae];ue<xe.length;ue+=1){var ke=xe[ue];q.push({stack:ae,id:ke})}e.asyncAll(q,function(Le,Ve){var Je=Le.stack,at=Le.id,_t=F.entries[Je];_t||(_t=F.entries[Je]={glyphs:{},requests:{},ranges:{}});var Et=_t.glyphs[at];if(Et===void 0){if(Et=F._tinySDF(_t,Je,at))return _t.glyphs[at]=Et,void Ve(null,{stack:Je,id:at,glyph:Et});var kt=Math.floor(at/256);if(256*kt>65535)Ve(new Error("glyphs > 65535 not supported"));else if(_t.ranges[kt])Ve(null,{stack:Je,id:at,glyph:Et});else{var At=_t.requests[kt];At||(At=_t.requests[kt]=[],T.loadGlyphRange(Je,kt,F.url,F.requestManager,function(xt,zt){if(zt){for(var Ot in zt)F._doesCharSupportLocalGlyph(+Ot)||(_t.glyphs[+Ot]=zt[+Ot]);_t.ranges[kt]=!0}for(var jt=0,rr=At;jt<rr.length;jt+=1)(0,rr[jt])(xt,zt);delete _t.requests[kt]})),At.push(function(xt,zt){xt?Ve(xt):zt&&Ve(null,{stack:Je,id:at,glyph:zt[at]||null})})}}else Ve(null,{stack:Je,id:at,glyph:Et})},function(Le,Ve){if(Le)R(Le);else if(Ve){for(var Je={},at=0,_t=Ve;at<_t.length;at+=1){var Et=_t[at],kt=Et.stack,At=Et.id,xt=Et.glyph;(Je[kt]||(Je[kt]={}))[At]=xt&&{id:xt.id,bitmap:xt.bitmap.clone(),metrics:xt.metrics}}R(null,Je)}})},T.prototype._doesCharSupportLocalGlyph=function(C){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](C)||e.isChar["Hangul Syllables"](C)||e.isChar.Hiragana(C)||e.isChar.Katakana(C))},T.prototype._tinySDF=function(C,R,F){var q=this.localIdeographFontFamily;if(q&&this._doesCharSupportLocalGlyph(F)){var ae=C.tinySDF;if(!ae){var ue="400";/bold/i.test(R)?ue="900":/medium/i.test(R)?ue="500":/light/i.test(R)&&(ue="200"),ae=C.tinySDF=new T.TinySDF(24,3,8,.25,q,ue)}return{id:F,bitmap:new e.AlphaImage({width:30,height:30},ae.draw(String.fromCharCode(F))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},T.loadGlyphRange=function(C,R,F,q,ae){var ue=256*R,xe=ue+255,ke=q.transformRequest(q.normalizeGlyphsURL(F).replace("{fontstack}",C).replace("{range}",ue+"-"+xe),e.ResourceType.Glyphs);e.getArrayBuffer(ke,function(Le,Ve){if(Le)ae(Le);else if(Ve){for(var Je={},at=0,_t=e.parseGlyphPBF(Ve);at<_t.length;at+=1){var Et=_t[at];Je[Et.id]=Et}ae(null,Je)}})},T.TinySDF=i;var L=function(){this.specification=e.styleSpec.light.position};L.prototype.possiblyEvaluate=function(C,R){return e.sphericalToCartesian(C.expression.evaluate(R))},L.prototype.interpolate=function(C,R,F){return{x:e.number(C.x,R.x,F),y:e.number(C.y,R.y,F),z:e.number(C.z,R.z,F)}};var A=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new L,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),I=function(C){function R(F){C.call(this),this._transitionable=new e.Transitionable(A),this.setLight(F),this._transitioning=this._transitionable.untransitioned()}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getLight=function(){return this._transitionable.serialize()},R.prototype.setLight=function(F,q){if(q===void 0&&(q={}),!this._validate(e.validateLight,F,q))for(var ae in F){var ue=F[ae];e.endsWith(ae,"-transition")?this._transitionable.setTransition(ae.slice(0,-11),ue):this._transitionable.setValue(ae,ue)}},R.prototype.updateTransitions=function(F){this._transitioning=this._transitionable.transitioned(F,this._transitioning)},R.prototype.hasTransition=function(){return this._transitioning.hasTransition()},R.prototype.recalculate=function(F){this.properties=this._transitioning.possiblyEvaluate(F)},R.prototype._validate=function(F,q,ae){return(!ae||ae.validate!==!1)&&e.emitValidationErrors(this,F.call(e.validateStyle,e.extend({value:q,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},R}(e.Evented),P=function(C,R){this.width=C,this.height=R,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};P.prototype.getDash=function(C,R){var F=C.join(",")+String(R);return this.dashEntry[F]||(this.dashEntry[F]=this.addDash(C,R)),this.dashEntry[F]},P.prototype.getDashRanges=function(C,R,F){var q=[],ae=C.length%2==1?-C[C.length-1]*F:0,ue=C[0]*F,xe=!0;q.push({left:ae,right:ue,isDash:xe,zeroLength:C[0]===0});for(var ke=C[0],Le=1;Le<C.length;Le++){xe=!xe;var Ve=C[Le];ae=ke*F,ue=(ke+=Ve)*F,q.push({left:ae,right:ue,isDash:xe,zeroLength:Ve===0})}return q},P.prototype.addRoundDash=function(C,R,F){for(var q=R/2,ae=-F;ae<=F;ae++)for(var ue=this.nextRow+F+ae,xe=this.width*ue,ke=0,Le=C[ke],Ve=0;Ve<this.width;Ve++){Ve/Le.right>1&&(Le=C[++ke]);var Je=Math.abs(Ve-Le.left),at=Math.abs(Ve-Le.right),_t=Math.min(Je,at),Et=void 0,kt=ae/F*(q+1);if(Le.isDash){var At=q-Math.abs(kt);Et=Math.sqrt(_t*_t+At*At)}else Et=q-Math.sqrt(_t*_t+kt*kt);this.data[xe+Ve]=Math.max(0,Math.min(255,Et+128))}},P.prototype.addRegularDash=function(C){for(var R=C.length-1;R>=0;--R){var F=C[R],q=C[R+1];F.zeroLength?C.splice(R,1):q&&q.isDash===F.isDash&&(q.left=F.left,C.splice(R,1))}var ae=C[0],ue=C[C.length-1];ae.isDash===ue.isDash&&(ae.left=ue.left-this.width,ue.right=ae.right+this.width);for(var xe=this.width*this.nextRow,ke=0,Le=C[ke],Ve=0;Ve<this.width;Ve++){Ve/Le.right>1&&(Le=C[++ke]);var Je=Math.abs(Ve-Le.left),at=Math.abs(Ve-Le.right),_t=Math.min(Je,at),Et=Le.isDash?_t:-_t;this.data[xe+Ve]=Math.max(0,Math.min(255,Et+128))}},P.prototype.addDash=function(C,R){var F=R?7:0,q=2*F+1;if(this.nextRow+q>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var ae=0,ue=0;ue<C.length;ue++)ae+=C[ue];if(ae!==0){var xe=this.width/ae,ke=this.getDashRanges(C,this.width,xe);R?this.addRoundDash(ke,xe,F):this.addRegularDash(ke)}var Le={y:(this.nextRow+F+.5)/this.height,height:2*F/this.height,width:ae};return this.nextRow+=q,this.dirty=!0,Le},P.prototype.bind=function(C){var R=C.gl;this.texture?(R.bindTexture(R.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,R.texSubImage2D(R.TEXTURE_2D,0,0,0,this.width,this.height,R.ALPHA,R.UNSIGNED_BYTE,this.data))):(this.texture=R.createTexture(),R.bindTexture(R.TEXTURE_2D,this.texture),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_S,R.REPEAT),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_T,R.REPEAT),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,R.LINEAR),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,R.LINEAR),R.texImage2D(R.TEXTURE_2D,0,R.ALPHA,this.width,this.height,0,R.ALPHA,R.UNSIGNED_BYTE,this.data))};var S=function C(R,F){this.workerPool=R,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var q=this.workerPool.acquire(this.id),ae=0;ae<q.length;ae++){var ue=q[ae],xe=new C.Actor(ue,F,this.id);xe.name="Worker "+ae,this.actors.push(xe)}};function E(C,R,F){var q=function(ae,ue){if(ae)return F(ae);if(ue){var xe=e.pick(e.extend(ue,C),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);ue.vector_layers&&(xe.vectorLayers=ue.vector_layers,xe.vectorLayerIds=xe.vectorLayers.map(function(ke){return ke.id})),xe.tiles=R.canonicalizeTileset(xe,C.url),F(null,xe)}};return C.url?e.getJSON(R.transformRequest(R.normalizeSourceURL(C.url),e.ResourceType.Source),q):e.browser.frame(function(){return q(null,C)})}S.prototype.broadcast=function(C,R,F){F=F||function(){},e.asyncAll(this.actors,function(q,ae){q.send(C,R,ae)},F)},S.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},S.prototype.remove=function(){this.actors.forEach(function(C){C.remove()}),this.actors=[],this.workerPool.release(this.id)},S.Actor=e.Actor;var z=function(C,R,F){this.bounds=e.LngLatBounds.convert(this.validateBounds(C)),this.minzoom=R||0,this.maxzoom=F||24};z.prototype.validateBounds=function(C){return Array.isArray(C)&&C.length===4?[Math.max(-180,C[0]),Math.max(-90,C[1]),Math.min(180,C[2]),Math.min(90,C[3])]:[-180,-90,180,90]},z.prototype.contains=function(C){var R=Math.pow(2,C.z),F=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*R),q=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*R),ae=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*R),ue=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*R);return C.x>=F&&C.x<ae&&C.y>=q&&C.y<ue};var D=function(C){function R(F,q,ae,ue){if(C.call(this),this.id=F,this.dispatcher=ae,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(q,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},q),this._collectResourceTiming=q.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(ue)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.load=function(){var F=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=E(this._options,this.map._requestManager,function(q,ae){F._tileJSONRequest=null,F._loaded=!0,q?F.fire(new e.ErrorEvent(q)):ae&&(e.extend(F,ae),ae.bounds&&(F.tileBounds=new z(ae.bounds,F.minzoom,F.maxzoom)),e.postTurnstileEvent(ae.tiles,F.map._requestManager._customAccessToken),e.postMapLoadEvent(ae.tiles,F.map._getMapId(),F.map._requestManager._skuToken,F.map._requestManager._customAccessToken),F.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),F.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},R.prototype.loaded=function(){return this._loaded},R.prototype.hasTile=function(F){return!this.tileBounds||this.tileBounds.contains(F.canonical)},R.prototype.onAdd=function(F){this.map=F,this.load()},R.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},R.prototype.serialize=function(){return e.extend({},this._options)},R.prototype.loadTile=function(F,q){var ae=this.map._requestManager.normalizeTileURL(F.tileID.canonical.url(this.tiles,this.scheme)),ue={request:this.map._requestManager.transformRequest(ae,e.ResourceType.Tile),uid:F.uid,tileID:F.tileID,zoom:F.tileID.overscaledZ,tileSize:this.tileSize*F.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function xe(ke,Le){return delete F.request,F.aborted?q(null):ke&&ke.status!==404?q(ke):(Le&&Le.resourceTiming&&(F.resourceTiming=Le.resourceTiming),this.map._refreshExpiredTiles&&Le&&F.setExpiryData(Le),F.loadVectorData(Le,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),q(null),void(F.reloadCallback&&(this.loadTile(F,F.reloadCallback),F.reloadCallback=null)))}ue.request.collectResourceTiming=this._collectResourceTiming,F.actor&&F.state!=="expired"?F.state==="loading"?F.reloadCallback=q:F.request=F.actor.send("reloadTile",ue,xe.bind(this)):(F.actor=this.dispatcher.getActor(),F.request=F.actor.send("loadTile",ue,xe.bind(this)))},R.prototype.abortTile=function(F){F.request&&(F.request.cancel(),delete F.request),F.actor&&F.actor.send("abortTile",{uid:F.uid,type:this.type,source:this.id},void 0)},R.prototype.unloadTile=function(F){F.unloadVectorData(),F.actor&&F.actor.send("removeTile",{uid:F.uid,type:this.type,source:this.id},void 0)},R.prototype.hasTransition=function(){return!1},R}(e.Evented),U=function(C){function R(F,q,ae,ue){C.call(this),this.id=F,this.dispatcher=ae,this.setEventedParent(ue),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},q),e.extend(this,e.pick(q,["url","scheme","tileSize"]))}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.load=function(){var F=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=E(this._options,this.map._requestManager,function(q,ae){F._tileJSONRequest=null,F._loaded=!0,q?F.fire(new e.ErrorEvent(q)):ae&&(e.extend(F,ae),ae.bounds&&(F.tileBounds=new z(ae.bounds,F.minzoom,F.maxzoom)),e.postTurnstileEvent(ae.tiles),e.postMapLoadEvent(ae.tiles,F.map._getMapId(),F.map._requestManager._skuToken),F.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),F.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},R.prototype.loaded=function(){return this._loaded},R.prototype.onAdd=function(F){this.map=F,this.load()},R.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},R.prototype.serialize=function(){return e.extend({},this._options)},R.prototype.hasTile=function(F){return!this.tileBounds||this.tileBounds.contains(F.canonical)},R.prototype.loadTile=function(F,q){var ae=this,ue=this.map._requestManager.normalizeTileURL(F.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);F.request=e.getImage(this.map._requestManager.transformRequest(ue,e.ResourceType.Tile),function(xe,ke){if(delete F.request,F.aborted)F.state="unloaded",q(null);else if(xe)F.state="errored",q(xe);else if(ke){ae.map._refreshExpiredTiles&&F.setExpiryData(ke),delete ke.cacheControl,delete ke.expires;var Le=ae.map.painter.context,Ve=Le.gl;F.texture=ae.map.painter.getTileTexture(ke.width),F.texture?F.texture.update(ke,{useMipmap:!0}):(F.texture=new e.Texture(Le,ke,Ve.RGBA,{useMipmap:!0}),F.texture.bind(Ve.LINEAR,Ve.CLAMP_TO_EDGE,Ve.LINEAR_MIPMAP_NEAREST),Le.extTextureFilterAnisotropic&&Ve.texParameterf(Ve.TEXTURE_2D,Le.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Le.extTextureFilterAnisotropicMax)),F.state="loaded",e.cacheEntryPossiblyAdded(ae.dispatcher),q(null)}})},R.prototype.abortTile=function(F,q){F.request&&(F.request.cancel(),delete F.request),q()},R.prototype.unloadTile=function(F,q){F.texture&&this.map.painter.saveTileTexture(F.texture),q()},R.prototype.hasTransition=function(){return!1},R}(e.Evented),H=function(C){function R(F,q,ae,ue){C.call(this,F,q,ae,ue),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},q),this.encoding=q.encoding||"mapbox"}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},R.prototype.loadTile=function(F,q){var ae=this.map._requestManager.normalizeTileURL(F.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function ue(xe,ke){xe&&(F.state="errored",q(xe)),ke&&(F.dem=ke,F.needsHillshadePrepare=!0,F.state="loaded",q(null))}F.request=e.getImage(this.map._requestManager.transformRequest(ae,e.ResourceType.Tile),function(xe,ke){if(delete F.request,F.aborted)F.state="unloaded",q(null);else if(xe)F.state="errored",q(xe);else if(ke){this.map._refreshExpiredTiles&&F.setExpiryData(ke),delete ke.cacheControl,delete ke.expires;var Le=e.window.ImageBitmap&&ke instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported()?ke:e.browser.getImageData(ke,1),Ve={uid:F.uid,coord:F.tileID,source:this.id,rawImageData:Le,encoding:this.encoding};F.actor&&F.state!=="expired"||(F.actor=this.dispatcher.getActor(),F.actor.send("loadDEMTile",Ve,ue.bind(this)))}}.bind(this)),F.neighboringTiles=this._getNeighboringTiles(F.tileID)},R.prototype._getNeighboringTiles=function(F){var q=F.canonical,ae=Math.pow(2,q.z),ue=(q.x-1+ae)%ae,xe=q.x===0?F.wrap-1:F.wrap,ke=(q.x+1+ae)%ae,Le=q.x+1===ae?F.wrap+1:F.wrap,Ve={};return Ve[new e.OverscaledTileID(F.overscaledZ,xe,q.z,ue,q.y).key]={backfilled:!1},Ve[new e.OverscaledTileID(F.overscaledZ,Le,q.z,ke,q.y).key]={backfilled:!1},q.y>0&&(Ve[new e.OverscaledTileID(F.overscaledZ,xe,q.z,ue,q.y-1).key]={backfilled:!1},Ve[new e.OverscaledTileID(F.overscaledZ,F.wrap,q.z,q.x,q.y-1).key]={backfilled:!1},Ve[new e.OverscaledTileID(F.overscaledZ,Le,q.z,ke,q.y-1).key]={backfilled:!1}),q.y+1<ae&&(Ve[new e.OverscaledTileID(F.overscaledZ,xe,q.z,ue,q.y+1).key]={backfilled:!1},Ve[new e.OverscaledTileID(F.overscaledZ,F.wrap,q.z,q.x,q.y+1).key]={backfilled:!1},Ve[new e.OverscaledTileID(F.overscaledZ,Le,q.z,ke,q.y+1).key]={backfilled:!1}),Ve},R.prototype.unloadTile=function(F){F.demTexture&&this.map.painter.saveTileTexture(F.demTexture),F.fbo&&(F.fbo.destroy(),delete F.fbo),F.dem&&delete F.dem,delete F.neighboringTiles,F.state="unloaded",F.actor&&F.actor.send("removeDEMTile",{uid:F.uid,source:this.id})},R}(U),Y=function(C){function R(F,q,ae,ue){C.call(this),this.id=F,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=ae.getActor(),this.setEventedParent(ue),this._data=q.data,this._options=e.extend({},q),this._collectResourceTiming=q.collectResourceTiming,this._resourceTiming=[],q.maxzoom!==void 0&&(this.maxzoom=q.maxzoom),q.type&&(this.type=q.type),q.attribution&&(this.attribution=q.attribution),this.promoteId=q.promoteId;var xe=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:q.cluster||!1,geojsonVtOptions:{buffer:(q.buffer!==void 0?q.buffer:128)*xe,tolerance:(q.tolerance!==void 0?q.tolerance:.375)*xe,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:q.lineMetrics||!1,generateId:q.generateId||!1},superclusterOptions:{maxZoom:q.clusterMaxZoom!==void 0?Math.min(q.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:(q.clusterRadius||50)*xe,log:!1,generateId:q.generateId||!1},clusterProperties:q.clusterProperties},q.workerOptions)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.load=function(){var F=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(q){if(q)F.fire(new e.ErrorEvent(q));else{var ae={dataType:"source",sourceDataType:"metadata"};F._collectResourceTiming&&F._resourceTiming&&F._resourceTiming.length>0&&(ae.resourceTiming=F._resourceTiming,F._resourceTiming=[]),F.fire(new e.Event("data",ae))}})},R.prototype.onAdd=function(F){this.map=F,this.load()},R.prototype.setData=function(F){var q=this;return this._data=F,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ae){if(ae)q.fire(new e.ErrorEvent(ae));else{var ue={dataType:"source",sourceDataType:"content"};q._collectResourceTiming&&q._resourceTiming&&q._resourceTiming.length>0&&(ue.resourceTiming=q._resourceTiming,q._resourceTiming=[]),q.fire(new e.Event("data",ue))}}),this},R.prototype.getClusterExpansionZoom=function(F,q){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:F,source:this.id},q),this},R.prototype.getClusterChildren=function(F,q){return this.actor.send("geojson.getClusterChildren",{clusterId:F,source:this.id},q),this},R.prototype.getClusterLeaves=function(F,q,ae,ue){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:F,limit:q,offset:ae},ue),this},R.prototype._updateWorkerData=function(F){var q=this;this._loaded=!1;var ae=e.extend({},this.workerOptions),ue=this._data;typeof ue=="string"?(ae.request=this.map._requestManager.transformRequest(e.browser.resolveURL(ue),e.ResourceType.Source),ae.request.collectResourceTiming=this._collectResourceTiming):ae.data=JSON.stringify(ue),this.actor.send(this.type+".loadData",ae,function(xe,ke){q._removed||ke&&ke.abandoned||(q._loaded=!0,ke&&ke.resourceTiming&&ke.resourceTiming[q.id]&&(q._resourceTiming=ke.resourceTiming[q.id].slice(0)),q.actor.send(q.type+".coalesce",{source:ae.source},null),F(xe))})},R.prototype.loaded=function(){return this._loaded},R.prototype.loadTile=function(F,q){var ae=this,ue=F.actor?"reloadTile":"loadTile";F.actor=this.actor;var xe={type:this.type,uid:F.uid,tileID:F.tileID,zoom:F.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};F.request=this.actor.send(ue,xe,function(ke,Le){return delete F.request,F.unloadVectorData(),F.aborted?q(null):ke?q(ke):(F.loadVectorData(Le,ae.map.painter,ue==="reloadTile"),q(null))})},R.prototype.abortTile=function(F){F.request&&(F.request.cancel(),delete F.request),F.aborted=!0},R.prototype.unloadTile=function(F){F.unloadVectorData(),this.actor.send("removeTile",{uid:F.uid,type:this.type,source:this.id})},R.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},R.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},R.prototype.hasTransition=function(){return!1},R}(e.Evented),J=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),W=function(C){function R(F,q,ae,ue){C.call(this),this.id=F,this.dispatcher=ae,this.coordinates=q.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(ue),this.options=q}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.load=function(F,q){var ae=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),function(ue,xe){ae._loaded=!0,ue?ae.fire(new e.ErrorEvent(ue)):xe&&(ae.image=xe,F&&(ae.coordinates=F),q&&q(),ae._finishLoading())})},R.prototype.loaded=function(){return this._loaded},R.prototype.updateImage=function(F){var q=this;return this.image&&F.url?(this.options.url=F.url,this.load(F.coordinates,function(){q.texture=null}),this):this},R.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},R.prototype.onAdd=function(F){this.map=F,this.load()},R.prototype.setCoordinates=function(F){var q=this;this.coordinates=F;var ae=F.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(xe){for(var ke=1/0,Le=1/0,Ve=-1/0,Je=-1/0,at=0,_t=xe;at<_t.length;at+=1){var Et=_t[at];ke=Math.min(ke,Et.x),Le=Math.min(Le,Et.y),Ve=Math.max(Ve,Et.x),Je=Math.max(Je,Et.y)}var kt=Ve-ke,At=Je-Le,xt=Math.max(kt,At),zt=Math.max(0,Math.floor(-Math.log(xt)/Math.LN2)),Ot=Math.pow(2,zt);return new e.CanonicalTileID(zt,Math.floor((ke+Ve)/2*Ot),Math.floor((Le+Je)/2*Ot))}(ae),this.minzoom=this.maxzoom=this.tileID.z;var ue=ae.map(function(xe){return q.tileID.getTilePoint(xe)._round()});return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(ue[0].x,ue[0].y,0,0),this._boundsArray.emplaceBack(ue[1].x,ue[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(ue[3].x,ue[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(ue[2].x,ue[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},R.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var F=this.map.painter.context,q=F.gl;for(var ae in this.boundsBuffer||(this.boundsBuffer=F.createVertexBuffer(this._boundsArray,J.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(F,this.image,q.RGBA),this.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE)),this.tiles){var ue=this.tiles[ae];ue.state!=="loaded"&&(ue.state="loaded",ue.texture=this.texture)}}},R.prototype.loadTile=function(F,q){this.tileID&&this.tileID.equals(F.tileID.canonical)?(this.tiles[String(F.tileID.wrap)]=F,F.buckets={},q(null)):(F.state="errored",q(null))},R.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},R.prototype.hasTransition=function(){return!1},R}(e.Evented),Z=function(C){function R(F,q,ae,ue){C.call(this,F,q,ae,ue),this.roundZoom=!0,this.type="video",this.options=q}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.load=function(){var F=this;this._loaded=!1;var q=this.options;this.urls=[];for(var ae=0,ue=q.urls;ae<ue.length;ae+=1){var xe=ue[ae];this.urls.push(this.map._requestManager.transformRequest(xe,e.ResourceType.Source).url)}e.getVideo(this.urls,function(ke,Le){F._loaded=!0,ke?F.fire(new e.ErrorEvent(ke)):Le&&(F.video=Le,F.video.loop=!0,F.video.addEventListener("playing",function(){F.map.triggerRepaint()}),F.map&&F.video.play(),F._finishLoading())})},R.prototype.pause=function(){this.video&&this.video.pause()},R.prototype.play=function(){this.video&&this.video.play()},R.prototype.seek=function(F){if(this.video){var q=this.video.seekable;F<q.start(0)||F>q.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+q.start(0)+" and "+q.end(0)+"-second mark."))):this.video.currentTime=F}},R.prototype.getVideo=function(){return this.video},R.prototype.onAdd=function(F){this.map||(this.map=F,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},R.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var F=this.map.painter.context,q=F.gl;for(var ae in this.boundsBuffer||(this.boundsBuffer=F.createVertexBuffer(this._boundsArray,J.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE),q.texSubImage2D(q.TEXTURE_2D,0,0,0,q.RGBA,q.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(F,this.video,q.RGBA),this.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE)),this.tiles){var ue=this.tiles[ae];ue.state!=="loaded"&&(ue.state="loaded",ue.texture=this.texture)}}},R.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},R.prototype.hasTransition=function(){return this.video&&!this.video.paused},R}(W),re=function(C){function R(F,q,ae,ue){C.call(this,F,q,ae,ue),q.coordinates?Array.isArray(q.coordinates)&&q.coordinates.length===4&&!q.coordinates.some(function(xe){return!Array.isArray(xe)||xe.length!==2||xe.some(function(ke){return typeof ke!="number"})})||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'missing required property "coordinates"'))),q.animate&&typeof q.animate!="boolean"&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'optional "animate" property must be a boolean value'))),q.canvas?typeof q.canvas=="string"||q.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'missing required property "canvas"'))),this.options=q,this.animate=q.animate===void 0||q.animate}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},R.prototype.getCanvas=function(){return this.canvas},R.prototype.onAdd=function(F){this.map=F,this.load(),this.canvas&&this.animate&&this.play()},R.prototype.onRemove=function(){this.pause()},R.prototype.prepare=function(){var F=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,F=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,F=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var q=this.map.painter.context,ae=q.gl;for(var ue in this.boundsBuffer||(this.boundsBuffer=q.createVertexBuffer(this._boundsArray,J.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(F||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(q,this.canvas,ae.RGBA,{premultiply:!0}),this.tiles){var xe=this.tiles[ue];xe.state!=="loaded"&&(xe.state="loaded",xe.texture=this.texture)}}},R.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},R.prototype.hasTransition=function(){return this._playing},R.prototype._hasInvalidDimensions=function(){for(var F=0,q=[this.canvas.width,this.canvas.height];F<q.length;F+=1){var ae=q[F];if(isNaN(ae)||ae<=0)return!0}return!1},R}(W),V={vector:D,raster:U,"raster-dem":H,geojson:Y,video:Z,image:W,canvas:re};function B(C,R){var F=e.identity([]);return e.translate(F,F,[1,1,0]),e.scale(F,F,[.5*C.width,.5*C.height,1]),e.multiply(F,F,C.calculatePosMatrix(R.toUnwrapped()))}function j(C,R,F,q,ae,ue){var xe=function(At,xt,zt){if(At)for(var Ot=0,jt=At;Ot<jt.length;Ot+=1){var rr=xt[jt[Ot]];if(rr&&rr.source===zt&&rr.type==="fill-extrusion")return!0}else for(var dr in xt){var Sr=xt[dr];if(Sr.source===zt&&Sr.type==="fill-extrusion")return!0}return!1}(ae&&ae.layers,R,C.id),ke=ue.maxPitchScaleFactor(),Le=C.tilesIn(q,ke,xe);Le.sort(ee);for(var Ve=[],Je=0,at=Le;Je<at.length;Je+=1){var _t=at[Je];Ve.push({wrappedTileID:_t.tileID.wrapped().key,queryResults:_t.tile.queryRenderedFeatures(R,F,C._state,_t.queryGeometry,_t.cameraQueryGeometry,_t.scale,ae,ue,ke,B(C.transform,_t.tileID))})}var Et=function(At){for(var xt={},zt={},Ot=0,jt=At;Ot<jt.length;Ot+=1){var rr=jt[Ot],dr=rr.queryResults,Sr=rr.wrappedTileID,kr=zt[Sr]=zt[Sr]||{};for(var Kr in dr)for(var Jr=dr[Kr],pn=kr[Kr]=kr[Kr]||{},sn=xt[Kr]=xt[Kr]||[],Un=0,Xn=Jr;Un<Xn.length;Un+=1){var ha=Xn[Un];pn[ha.featureIndex]||(pn[ha.featureIndex]=!0,sn.push(ha))}}return xt}(Ve);for(var kt in Et)Et[kt].forEach(function(At){var xt=At.feature,zt=C.getFeatureState(xt.layer["source-layer"],xt.id);xt.source=xt.layer.source,xt.layer["source-layer"]&&(xt.sourceLayer=xt.layer["source-layer"]),xt.state=zt});return Et}function ee(C,R){var F=C.tileID,q=R.tileID;return F.overscaledZ-q.overscaledZ||F.canonical.y-q.canonical.y||F.wrap-q.wrap||F.canonical.x-q.canonical.x}var N=function(C,R){this.max=C,this.onRemove=R,this.reset()};N.prototype.reset=function(){for(var C in this.data)for(var R=0,F=this.data[C];R<F.length;R+=1){var q=F[R];q.timeout&&clearTimeout(q.timeout),this.onRemove(q.value)}return this.data={},this.order=[],this},N.prototype.add=function(C,R,F){var q=this,ae=C.wrapped().key;this.data[ae]===void 0&&(this.data[ae]=[]);var ue={value:R,timeout:void 0};if(F!==void 0&&(ue.timeout=setTimeout(function(){q.remove(C,ue)},F)),this.data[ae].push(ue),this.order.push(ae),this.order.length>this.max){var xe=this._getAndRemoveByKey(this.order[0]);xe&&this.onRemove(xe)}return this},N.prototype.has=function(C){return C.wrapped().key in this.data},N.prototype.getAndRemove=function(C){return this.has(C)?this._getAndRemoveByKey(C.wrapped().key):null},N.prototype._getAndRemoveByKey=function(C){var R=this.data[C].shift();return R.timeout&&clearTimeout(R.timeout),this.data[C].length===0&&delete this.data[C],this.order.splice(this.order.indexOf(C),1),R.value},N.prototype.getByKey=function(C){var R=this.data[C];return R?R[0].value:null},N.prototype.get=function(C){return this.has(C)?this.data[C.wrapped().key][0].value:null},N.prototype.remove=function(C,R){if(!this.has(C))return this;var F=C.wrapped().key,q=R===void 0?0:this.data[F].indexOf(R),ae=this.data[F][q];return this.data[F].splice(q,1),ae.timeout&&clearTimeout(ae.timeout),this.data[F].length===0&&delete this.data[F],this.onRemove(ae.value),this.order.splice(this.order.indexOf(F),1),this},N.prototype.setMaxSize=function(C){for(this.max=C;this.order.length>this.max;){var R=this._getAndRemoveByKey(this.order[0]);R&&this.onRemove(R)}return this},N.prototype.filter=function(C){var R=[];for(var F in this.data)for(var q=0,ae=this.data[F];q<ae.length;q+=1){var ue=ae[q];C(ue.value)||R.push(ue)}for(var xe=0,ke=R;xe<ke.length;xe+=1){var Le=ke[xe];this.remove(Le.value.tileID,Le)}};var $=function(C,R,F){this.context=C;var q=C.gl;this.buffer=q.createBuffer(),this.dynamicDraw=Boolean(F),this.context.unbindVAO(),C.bindElementBuffer.set(this.buffer),q.bufferData(q.ELEMENT_ARRAY_BUFFER,R.arrayBuffer,this.dynamicDraw?q.DYNAMIC_DRAW:q.STATIC_DRAW),this.dynamicDraw||delete R.arrayBuffer};$.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},$.prototype.updateData=function(C){var R=this.context.gl;this.context.unbindVAO(),this.bind(),R.bufferSubData(R.ELEMENT_ARRAY_BUFFER,0,C.arrayBuffer)},$.prototype.destroy=function(){var C=this.context.gl;this.buffer&&(C.deleteBuffer(this.buffer),delete this.buffer)};var K={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},te=function(C,R,F,q){this.length=R.length,this.attributes=F,this.itemSize=R.bytesPerElement,this.dynamicDraw=q,this.context=C;var ae=C.gl;this.buffer=ae.createBuffer(),C.bindVertexBuffer.set(this.buffer),ae.bufferData(ae.ARRAY_BUFFER,R.arrayBuffer,this.dynamicDraw?ae.DYNAMIC_DRAW:ae.STATIC_DRAW),this.dynamicDraw||delete R.arrayBuffer};te.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},te.prototype.updateData=function(C){var R=this.context.gl;this.bind(),R.bufferSubData(R.ARRAY_BUFFER,0,C.arrayBuffer)},te.prototype.enableAttributes=function(C,R){for(var F=0;F<this.attributes.length;F++){var q=this.attributes[F],ae=R.attributes[q.name];ae!==void 0&&C.enableVertexAttribArray(ae)}},te.prototype.setVertexAttribPointers=function(C,R,F){for(var q=0;q<this.attributes.length;q++){var ae=this.attributes[q],ue=R.attributes[ae.name];ue!==void 0&&C.vertexAttribPointer(ue,ae.components,C[K[ae.type]],!1,this.itemSize,ae.offset+this.itemSize*(F||0))}},te.prototype.destroy=function(){var C=this.context.gl;this.buffer&&(C.deleteBuffer(this.buffer),delete this.buffer)};var ie=function(C){this.gl=C.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ie.prototype.get=function(){return this.current},ie.prototype.set=function(C){},ie.prototype.getDefault=function(){return this.default},ie.prototype.setDefault=function(){this.set(this.default)};var le=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return e.Color.transparent},R.prototype.set=function(F){var q=this.current;(F.r!==q.r||F.g!==q.g||F.b!==q.b||F.a!==q.a||this.dirty)&&(this.gl.clearColor(F.r,F.g,F.b,F.a),this.current=F,this.dirty=!1)},R}(ie),se=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return 1},R.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.clearDepth(F),this.current=F,this.dirty=!1)},R}(ie),ve=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return 0},R.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.clearStencil(F),this.current=F,this.dirty=!1)},R}(ie),fe=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return[!0,!0,!0,!0]},R.prototype.set=function(F){var q=this.current;(F[0]!==q[0]||F[1]!==q[1]||F[2]!==q[2]||F[3]!==q[3]||this.dirty)&&(this.gl.colorMask(F[0],F[1],F[2],F[3]),this.current=F,this.dirty=!1)},R}(ie),ye=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return!0},R.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.depthMask(F),this.current=F,this.dirty=!1)},R}(ie),Ae=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return 255},R.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.stencilMask(F),this.current=F,this.dirty=!1)},R}(ie),pe=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},R.prototype.set=function(F){var q=this.current;(F.func!==q.func||F.ref!==q.ref||F.mask!==q.mask||this.dirty)&&(this.gl.stencilFunc(F.func,F.ref,F.mask),this.current=F,this.dirty=!1)},R}(ie),ge=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){var F=this.gl;return[F.KEEP,F.KEEP,F.KEEP]},R.prototype.set=function(F){var q=this.current;(F[0]!==q[0]||F[1]!==q[1]||F[2]!==q[2]||this.dirty)&&(this.gl.stencilOp(F[0],F[1],F[2]),this.current=F,this.dirty=!1)},R}(ie),we=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(F){if(F!==this.current||this.dirty){var q=this.gl;F?q.enable(q.STENCIL_TEST):q.disable(q.STENCIL_TEST),this.current=F,this.dirty=!1}},R}(ie),oe=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return[0,1]},R.prototype.set=function(F){var q=this.current;(F[0]!==q[0]||F[1]!==q[1]||this.dirty)&&(this.gl.depthRange(F[0],F[1]),this.current=F,this.dirty=!1)},R}(ie),de=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(F){if(F!==this.current||this.dirty){var q=this.gl;F?q.enable(q.DEPTH_TEST):q.disable(q.DEPTH_TEST),this.current=F,this.dirty=!1}},R}(ie),Te=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return this.gl.LESS},R.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.depthFunc(F),this.current=F,this.dirty=!1)},R}(ie),Ee=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(F){if(F!==this.current||this.dirty){var q=this.gl;F?q.enable(q.BLEND):q.disable(q.BLEND),this.current=F,this.dirty=!1}},R}(ie),Me=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){var F=this.gl;return[F.ONE,F.ZERO]},R.prototype.set=function(F){var q=this.current;(F[0]!==q[0]||F[1]!==q[1]||this.dirty)&&(this.gl.blendFunc(F[0],F[1]),this.current=F,this.dirty=!1)},R}(ie),De=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return e.Color.transparent},R.prototype.set=function(F){var q=this.current;(F.r!==q.r||F.g!==q.g||F.b!==q.b||F.a!==q.a||this.dirty)&&(this.gl.blendColor(F.r,F.g,F.b,F.a),this.current=F,this.dirty=!1)},R}(ie),Ie=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return this.gl.FUNC_ADD},R.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.blendEquation(F),this.current=F,this.dirty=!1)},R}(ie),Oe=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(F){if(F!==this.current||this.dirty){var q=this.gl;F?q.enable(q.CULL_FACE):q.disable(q.CULL_FACE),this.current=F,this.dirty=!1}},R}(ie),Ze=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return this.gl.BACK},R.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.cullFace(F),this.current=F,this.dirty=!1)},R}(ie),Fe=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return this.gl.CCW},R.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.frontFace(F),this.current=F,this.dirty=!1)},R}(ie),Pe=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.useProgram(F),this.current=F,this.dirty=!1)},R}(ie),ze=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return this.gl.TEXTURE0},R.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.activeTexture(F),this.current=F,this.dirty=!1)},R}(ie),Ge=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){var F=this.gl;return[0,0,F.drawingBufferWidth,F.drawingBufferHeight]},R.prototype.set=function(F){var q=this.current;(F[0]!==q[0]||F[1]!==q[1]||F[2]!==q[2]||F[3]!==q[3]||this.dirty)&&(this.gl.viewport(F[0],F[1],F[2],F[3]),this.current=F,this.dirty=!1)},R}(ie),$e=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(F){if(F!==this.current||this.dirty){var q=this.gl;q.bindFramebuffer(q.FRAMEBUFFER,F),this.current=F,this.dirty=!1}},R}(ie),ot=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(F){if(F!==this.current||this.dirty){var q=this.gl;q.bindRenderbuffer(q.RENDERBUFFER,F),this.current=F,this.dirty=!1}},R}(ie),vt=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(F){if(F!==this.current||this.dirty){var q=this.gl;q.bindTexture(q.TEXTURE_2D,F),this.current=F,this.dirty=!1}},R}(ie),bt=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(F){if(F!==this.current||this.dirty){var q=this.gl;q.bindBuffer(q.ARRAY_BUFFER,F),this.current=F,this.dirty=!1}},R}(ie),yt=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(F){var q=this.gl;q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,F),this.current=F,this.dirty=!1},R}(ie),tt=function(C){function R(F){C.call(this,F),this.vao=F.extVertexArrayObject}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(F){this.vao&&(F!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(F),this.current=F,this.dirty=!1)},R}(ie),Ke=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return 4},R.prototype.set=function(F){if(F!==this.current||this.dirty){var q=this.gl;q.pixelStorei(q.UNPACK_ALIGNMENT,F),this.current=F,this.dirty=!1}},R}(ie),mt=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(F){if(F!==this.current||this.dirty){var q=this.gl;q.pixelStorei(q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F),this.current=F,this.dirty=!1}},R}(ie),Ft=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(F){if(F!==this.current||this.dirty){var q=this.gl;q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,F),this.current=F,this.dirty=!1}},R}(ie),Vt=function(C){function R(F,q){C.call(this,F),this.context=F,this.parent=q}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R}(ie),Xt=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.setDirty=function(){this.dirty=!0},R.prototype.set=function(F){if(F!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var q=this.gl;q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,F,0),this.current=F,this.dirty=!1}},R}(Vt),Gt=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.set=function(F){if(F!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var q=this.gl;q.framebufferRenderbuffer(q.FRAMEBUFFER,q.DEPTH_ATTACHMENT,q.RENDERBUFFER,F),this.current=F,this.dirty=!1}},R}(Vt),nr=function(C,R,F,q){this.context=C,this.width=R,this.height=F;var ae=C.gl,ue=this.framebuffer=ae.createFramebuffer();this.colorAttachment=new Xt(C,ue),q&&(this.depthAttachment=new Gt(C,ue))};nr.prototype.destroy=function(){var C=this.context.gl,R=this.colorAttachment.get();if(R&&C.deleteTexture(R),this.depthAttachment){var F=this.depthAttachment.get();F&&C.deleteRenderbuffer(F)}C.deleteFramebuffer(this.framebuffer)};var It=function(C,R,F){this.func=C,this.mask=R,this.range=F};It.ReadOnly=!1,It.ReadWrite=!0,It.disabled=new It(519,It.ReadOnly,[0,1]);var Be=function(C,R,F,q,ae,ue){this.test=C,this.ref=R,this.mask=F,this.fail=q,this.depthFail=ae,this.pass=ue};Be.disabled=new Be({func:519,mask:0},0,0,7680,7680,7680);var He=function(C,R,F){this.blendFunction=C,this.blendColor=R,this.mask=F};He.disabled=new He(He.Replace=[1,0],e.Color.transparent,[!1,!1,!1,!1]),He.unblended=new He(He.Replace,e.Color.transparent,[!0,!0,!0,!0]),He.alphaBlended=new He([1,771],e.Color.transparent,[!0,!0,!0,!0]);var he=function(C,R,F){this.enable=C,this.mode=R,this.frontFace=F};he.disabled=new he(!1,1029,2305),he.backCCW=new he(!0,1029,2305);var be=function(C){this.gl=C,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new le(this),this.clearDepth=new se(this),this.clearStencil=new ve(this),this.colorMask=new fe(this),this.depthMask=new ye(this),this.stencilMask=new Ae(this),this.stencilFunc=new pe(this),this.stencilOp=new ge(this),this.stencilTest=new we(this),this.depthRange=new oe(this),this.depthTest=new de(this),this.depthFunc=new Te(this),this.blend=new Ee(this),this.blendFunc=new Me(this),this.blendColor=new De(this),this.blendEquation=new Ie(this),this.cullFace=new Oe(this),this.cullFaceSide=new Ze(this),this.frontFace=new Fe(this),this.program=new Pe(this),this.activeTexture=new ze(this),this.viewport=new Ge(this),this.bindFramebuffer=new $e(this),this.bindRenderbuffer=new ot(this),this.bindTexture=new vt(this),this.bindVertexBuffer=new bt(this),this.bindElementBuffer=new yt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new tt(this),this.pixelStoreUnpack=new Ke(this),this.pixelStoreUnpackPremultiplyAlpha=new mt(this),this.pixelStoreUnpackFlipY=new Ft(this),this.extTextureFilterAnisotropic=C.getExtension("EXT_texture_filter_anisotropic")||C.getExtension("MOZ_EXT_texture_filter_anisotropic")||C.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=C.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=C.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(C.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=C.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=C.getExtension("EXT_disjoint_timer_query")};be.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},be.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},be.prototype.createIndexBuffer=function(C,R){return new $(this,C,R)},be.prototype.createVertexBuffer=function(C,R,F){return new te(this,C,R,F)},be.prototype.createRenderbuffer=function(C,R,F){var q=this.gl,ae=q.createRenderbuffer();return this.bindRenderbuffer.set(ae),q.renderbufferStorage(q.RENDERBUFFER,C,R,F),this.bindRenderbuffer.set(null),ae},be.prototype.createFramebuffer=function(C,R,F){return new nr(this,C,R,F)},be.prototype.clear=function(C){var R=C.color,F=C.depth,q=this.gl,ae=0;R&&(ae|=q.COLOR_BUFFER_BIT,this.clearColor.set(R),this.colorMask.set([!0,!0,!0,!0])),F!==void 0&&(ae|=q.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(F),this.depthMask.set(!0)),q.clear(ae)},be.prototype.setCullFace=function(C){C.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(C.mode),this.frontFace.set(C.frontFace))},be.prototype.setDepthMode=function(C){C.func!==this.gl.ALWAYS||C.mask?(this.depthTest.set(!0),this.depthFunc.set(C.func),this.depthMask.set(C.mask),this.depthRange.set(C.range)):this.depthTest.set(!1)},be.prototype.setStencilMode=function(C){C.test.func!==this.gl.ALWAYS||C.mask?(this.stencilTest.set(!0),this.stencilMask.set(C.mask),this.stencilOp.set([C.fail,C.depthFail,C.pass]),this.stencilFunc.set({func:C.test.func,ref:C.ref,mask:C.test.mask})):this.stencilTest.set(!1)},be.prototype.setColorMode=function(C){e.deepEqual(C.blendFunction,He.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(C.blendFunction),this.blendColor.set(C.blendColor)),this.colorMask.set(C.mask)},be.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Re=function(C){function R(F,q,ae){var ue=this;C.call(this),this.id=F,this.dispatcher=ae,this.on("data",function(xe){xe.dataType==="source"&&xe.sourceDataType==="metadata"&&(ue._sourceLoaded=!0),ue._sourceLoaded&&!ue._paused&&xe.dataType==="source"&&xe.sourceDataType==="content"&&(ue.reload(),ue.transform&&ue.update(ue.transform))}),this.on("error",function(){ue._sourceErrored=!0}),this._source=function(xe,ke,Le,Ve){var Je=new V[ke.type](xe,ke,Le,Ve);if(Je.id!==xe)throw new Error("Expected Source id to be "+xe+" instead of "+Je.id);return e.bindAll(["load","abort","unload","serialize","prepare"],Je),Je}(F,q,ae,this),this._tiles={},this._cache=new N(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.onAdd=function(F){this.map=F,this._maxTileCacheSize=F?F._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(F)},R.prototype.onRemove=function(F){this._source&&this._source.onRemove&&this._source.onRemove(F)},R.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var F in this._tiles){var q=this._tiles[F];if(q.state!=="loaded"&&q.state!=="errored")return!1}return!0},R.prototype.getSource=function(){return this._source},R.prototype.pause=function(){this._paused=!0},R.prototype.resume=function(){if(this._paused){var F=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,F&&this.reload(),this.transform&&this.update(this.transform)}},R.prototype._loadTile=function(F,q){return this._source.loadTile(F,q)},R.prototype._unloadTile=function(F){if(this._source.unloadTile)return this._source.unloadTile(F,function(){})},R.prototype._abortTile=function(F){if(this._source.abortTile)return this._source.abortTile(F,function(){})},R.prototype.serialize=function(){return this._source.serialize()},R.prototype.prepare=function(F){for(var q in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var ae=this._tiles[q];ae.upload(F),ae.prepare(this.map.style.imageManager)}},R.prototype.getIds=function(){return e.values(this._tiles).map(function(F){return F.tileID}).sort(Ue).map(function(F){return F.key})},R.prototype.getRenderableIds=function(F){var q=this,ae=[];for(var ue in this._tiles)this._isIdRenderable(ue,F)&&ae.push(this._tiles[ue]);return F?ae.sort(function(xe,ke){var Le=xe.tileID,Ve=ke.tileID,Je=new e.Point(Le.canonical.x,Le.canonical.y)._rotate(q.transform.angle),at=new e.Point(Ve.canonical.x,Ve.canonical.y)._rotate(q.transform.angle);return Le.overscaledZ-Ve.overscaledZ||at.y-Je.y||at.x-Je.x}).map(function(xe){return xe.tileID.key}):ae.map(function(xe){return xe.tileID}).sort(Ue).map(function(xe){return xe.key})},R.prototype.hasRenderableParent=function(F){var q=this.findLoadedParent(F,0);return!!q&&this._isIdRenderable(q.tileID.key)},R.prototype._isIdRenderable=function(F,q){return this._tiles[F]&&this._tiles[F].hasData()&&!this._coveredTiles[F]&&(q||!this._tiles[F].holdingForFade())},R.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var F in this._cache.reset(),this._tiles)this._tiles[F].state!=="errored"&&this._reloadTile(F,"reloading")},R.prototype._reloadTile=function(F,q){var ae=this._tiles[F];ae&&(ae.state!=="loading"&&(ae.state=q),this._loadTile(ae,this._tileLoaded.bind(this,ae,F,q)))},R.prototype._tileLoaded=function(F,q,ae,ue){if(ue)return F.state="errored",void(ue.status!==404?this._source.fire(new e.ErrorEvent(ue,{tile:F})):this.update(this.transform));F.timeAdded=e.browser.now(),ae==="expired"&&(F.refreshedUponExpiration=!0),this._setTileReloadTimer(q,F),this.getSource().type==="raster-dem"&&F.dem&&this._backfillDEM(F),this._state.initializeTileState(F,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:F,coord:F.tileID}))},R.prototype._backfillDEM=function(F){for(var q=this.getRenderableIds(),ae=0;ae<q.length;ae++){var ue=q[ae];if(F.neighboringTiles&&F.neighboringTiles[ue]){var xe=this.getTileByID(ue);ke(F,xe),ke(xe,F)}}function ke(Le,Ve){Le.needsHillshadePrepare=!0;var Je=Ve.tileID.canonical.x-Le.tileID.canonical.x,at=Ve.tileID.canonical.y-Le.tileID.canonical.y,_t=Math.pow(2,Le.tileID.canonical.z),Et=Ve.tileID.key;Je===0&&at===0||Math.abs(at)>1||(Math.abs(Je)>1&&(Math.abs(Je+_t)===1?Je+=_t:Math.abs(Je-_t)===1&&(Je-=_t)),Ve.dem&&Le.dem&&(Le.dem.backfillBorder(Ve.dem,Je,at),Le.neighboringTiles&&Le.neighboringTiles[Et]&&(Le.neighboringTiles[Et].backfilled=!0)))}},R.prototype.getTile=function(F){return this.getTileByID(F.key)},R.prototype.getTileByID=function(F){return this._tiles[F]},R.prototype._retainLoadedChildren=function(F,q,ae,ue){for(var xe in this._tiles){var ke=this._tiles[xe];if(!(ue[xe]||!ke.hasData()||ke.tileID.overscaledZ<=q||ke.tileID.overscaledZ>ae)){for(var Le=ke.tileID;ke&&ke.tileID.overscaledZ>q+1;){var Ve=ke.tileID.scaledTo(ke.tileID.overscaledZ-1);(ke=this._tiles[Ve.key])&&ke.hasData()&&(Le=Ve)}for(var Je=Le;Je.overscaledZ>q;)if(F[(Je=Je.scaledTo(Je.overscaledZ-1)).key]){ue[Le.key]=Le;break}}}},R.prototype.findLoadedParent=function(F,q){if(F.key in this._loadedParentTiles){var ae=this._loadedParentTiles[F.key];return ae&&ae.tileID.overscaledZ>=q?ae:null}for(var ue=F.overscaledZ-1;ue>=q;ue--){var xe=F.scaledTo(ue),ke=this._getLoadedTile(xe);if(ke)return ke}},R.prototype._getLoadedTile=function(F){var q=this._tiles[F.key];return q&&q.hasData()?q:this._cache.getByKey(F.wrapped().key)},R.prototype.updateCacheSize=function(F){var q=(Math.ceil(F.width/this._source.tileSize)+1)*(Math.ceil(F.height/this._source.tileSize)+1),ae=Math.floor(5*q),ue=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,ae):ae;this._cache.setMaxSize(ue)},R.prototype.handleWrapJump=function(F){var q=(F-(this._prevLng===void 0?F:this._prevLng))/360,ae=Math.round(q);if(this._prevLng=F,ae){var ue={};for(var xe in this._tiles){var ke=this._tiles[xe];ke.tileID=ke.tileID.unwrapTo(ke.tileID.wrap+ae),ue[ke.tileID.key]=ke}for(var Le in this._tiles=ue,this._timers)clearTimeout(this._timers[Le]),delete this._timers[Le];for(var Ve in this._tiles){var Je=this._tiles[Ve];this._setTileReloadTimer(Ve,Je)}}},R.prototype.update=function(F){var q=this;if(this.transform=F,this._sourceLoaded&&!this._paused){var ae;this.updateCacheSize(F),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?ae=F.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(kr){return new e.OverscaledTileID(kr.canonical.z,kr.wrap,kr.canonical.z,kr.canonical.x,kr.canonical.y)}):(ae=F.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(ae=ae.filter(function(kr){return q._source.hasTile(kr)}))):ae=[];var ue=F.coveringZoomLevel(this._source),xe=Math.max(ue-R.maxOverzooming,this._source.minzoom),ke=Math.max(ue+R.maxUnderzooming,this._source.minzoom),Le=this._updateRetainedTiles(ae,ue);if(Xe(this._source.type)){for(var Ve={},Je={},at=0,_t=Object.keys(Le);at<_t.length;at+=1){var Et=_t[at],kt=Le[Et],At=this._tiles[Et];if(At&&!(At.fadeEndTime&&At.fadeEndTime<=e.browser.now())){var xt=this.findLoadedParent(kt,xe);xt&&(this._addTile(xt.tileID),Ve[xt.tileID.key]=xt.tileID),Je[Et]=kt}}for(var zt in this._retainLoadedChildren(Je,ue,ke,Le),Ve)Le[zt]||(this._coveredTiles[zt]=!0,Le[zt]=Ve[zt])}for(var Ot in Le)this._tiles[Ot].clearFadeHold();for(var jt=0,rr=e.keysDifference(this._tiles,Le);jt<rr.length;jt+=1){var dr=rr[jt],Sr=this._tiles[dr];Sr.hasSymbolBuckets&&!Sr.holdingForFade()?Sr.setHoldDuration(this.map._fadeDuration):Sr.hasSymbolBuckets&&!Sr.symbolFadeFinished()||this._removeTile(dr)}this._updateLoadedParentTileCache()}},R.prototype.releaseSymbolFadeTiles=function(){for(var F in this._tiles)this._tiles[F].holdingForFade()&&this._removeTile(F)},R.prototype._updateRetainedTiles=function(F,q){for(var ae={},ue={},xe=Math.max(q-R.maxOverzooming,this._source.minzoom),ke=Math.max(q+R.maxUnderzooming,this._source.minzoom),Le={},Ve=0,Je=F;Ve<Je.length;Ve+=1){var at=Je[Ve],_t=this._addTile(at);ae[at.key]=at,_t.hasData()||q<this._source.maxzoom&&(Le[at.key]=at)}this._retainLoadedChildren(Le,q,ke,ae);for(var Et=0,kt=F;Et<kt.length;Et+=1){var At=kt[Et],xt=this._tiles[At.key];if(!xt.hasData()){if(q+1>this._source.maxzoom){var zt=At.children(this._source.maxzoom)[0],Ot=this.getTile(zt);if(Ot&&Ot.hasData()){ae[zt.key]=zt;continue}}else{var jt=At.children(this._source.maxzoom);if(ae[jt[0].key]&&ae[jt[1].key]&&ae[jt[2].key]&&ae[jt[3].key])continue}for(var rr=xt.wasRequested(),dr=At.overscaledZ-1;dr>=xe;--dr){var Sr=At.scaledTo(dr);if(ue[Sr.key]||(ue[Sr.key]=!0,!(xt=this.getTile(Sr))&&rr&&(xt=this._addTile(Sr)),xt&&(ae[Sr.key]=Sr,rr=xt.wasRequested(),xt.hasData())))break}}}return ae},R.prototype._updateLoadedParentTileCache=function(){for(var F in this._loadedParentTiles={},this._tiles){for(var q=[],ae=void 0,ue=this._tiles[F].tileID;ue.overscaledZ>0;){if(ue.key in this._loadedParentTiles){ae=this._loadedParentTiles[ue.key];break}q.push(ue.key);var xe=ue.scaledTo(ue.overscaledZ-1);if(ae=this._getLoadedTile(xe))break;ue=xe}for(var ke=0,Le=q;ke<Le.length;ke+=1){var Ve=Le[ke];this._loadedParentTiles[Ve]=ae}}},R.prototype._addTile=function(F){var q=this._tiles[F.key];if(q)return q;(q=this._cache.getAndRemove(F))&&(this._setTileReloadTimer(F.key,q),q.tileID=F,this._state.initializeTileState(q,this.map?this.map.painter:null),this._cacheTimers[F.key]&&(clearTimeout(this._cacheTimers[F.key]),delete this._cacheTimers[F.key],this._setTileReloadTimer(F.key,q)));var ae=Boolean(q);return ae||(q=new e.Tile(F,this._source.tileSize*F.overscaleFactor()),this._loadTile(q,this._tileLoaded.bind(this,q,F.key,q.state))),q?(q.uses++,this._tiles[F.key]=q,ae||this._source.fire(new e.Event("dataloading",{tile:q,coord:q.tileID,dataType:"source"})),q):null},R.prototype._setTileReloadTimer=function(F,q){var ae=this;F in this._timers&&(clearTimeout(this._timers[F]),delete this._timers[F]);var ue=q.getExpiryTimeout();ue&&(this._timers[F]=setTimeout(function(){ae._reloadTile(F,"expired"),delete ae._timers[F]},ue))},R.prototype._removeTile=function(F){var q=this._tiles[F];q&&(q.uses--,delete this._tiles[F],this._timers[F]&&(clearTimeout(this._timers[F]),delete this._timers[F]),q.uses>0||(q.hasData()&&q.state!=="reloading"?this._cache.add(q.tileID,q,q.getExpiryTimeout()):(q.aborted=!0,this._abortTile(q),this._unloadTile(q))))},R.prototype.clearTiles=function(){for(var F in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(F);this._cache.reset()},R.prototype.tilesIn=function(F,q,ae){var ue=this,xe=[],ke=this.transform;if(!ke)return xe;for(var Le=ae?ke.getCameraQueryGeometry(F):F,Ve=F.map(function(dr){return ke.pointCoordinate(dr)}),Je=Le.map(function(dr){return ke.pointCoordinate(dr)}),at=this.getIds(),_t=1/0,Et=1/0,kt=-1/0,At=-1/0,xt=0,zt=Je;xt<zt.length;xt+=1){var Ot=zt[xt];_t=Math.min(_t,Ot.x),Et=Math.min(Et,Ot.y),kt=Math.max(kt,Ot.x),At=Math.max(At,Ot.y)}for(var jt=function(dr){var Sr=ue._tiles[at[dr]];if(!Sr.holdingForFade()){var kr=Sr.tileID,Kr=Math.pow(2,ke.zoom-Sr.tileID.overscaledZ),Jr=q*Sr.queryPadding*e.EXTENT/Sr.tileSize/Kr,pn=[kr.getTilePoint(new e.MercatorCoordinate(_t,Et)),kr.getTilePoint(new e.MercatorCoordinate(kt,At))];if(pn[0].x-Jr<e.EXTENT&&pn[0].y-Jr<e.EXTENT&&pn[1].x+Jr>=0&&pn[1].y+Jr>=0){var sn=Ve.map(function(Xn){return kr.getTilePoint(Xn)}),Un=Je.map(function(Xn){return kr.getTilePoint(Xn)});xe.push({tile:Sr,tileID:kr,queryGeometry:sn,cameraQueryGeometry:Un,scale:Kr})}}},rr=0;rr<at.length;rr++)jt(rr);return xe},R.prototype.getVisibleCoordinates=function(F){for(var q=this,ae=this.getRenderableIds(F).map(function(Le){return q._tiles[Le].tileID}),ue=0,xe=ae;ue<xe.length;ue+=1){var ke=xe[ue];ke.posMatrix=this.transform.calculatePosMatrix(ke.toUnwrapped())}return ae},R.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Xe(this._source.type))for(var F in this._tiles){var q=this._tiles[F];if(q.fadeEndTime!==void 0&&q.fadeEndTime>=e.browser.now())return!0}return!1},R.prototype.setFeatureState=function(F,q,ae){F=F||"_geojsonTileLayer",this._state.updateState(F,q,ae)},R.prototype.removeFeatureState=function(F,q,ae){F=F||"_geojsonTileLayer",this._state.removeFeatureState(F,q,ae)},R.prototype.getFeatureState=function(F,q){return F=F||"_geojsonTileLayer",this._state.getState(F,q)},R.prototype.setDependencies=function(F,q,ae){var ue=this._tiles[F];ue&&ue.setDependencies(q,ae)},R.prototype.reloadTilesForDependencies=function(F,q){for(var ae in this._tiles)this._tiles[ae].hasDependency(F,q)&&this._reloadTile(ae,"reloading");this._cache.filter(function(ue){return!ue.hasDependency(F,q)})},R}(e.Evented);function Ue(C,R){var F=Math.abs(2*C.wrap)-+(C.wrap<0),q=Math.abs(2*R.wrap)-+(R.wrap<0);return C.overscaledZ-R.overscaledZ||q-F||R.canonical.y-C.canonical.y||R.canonical.x-C.canonical.x}function Xe(C){return C==="raster"||C==="image"||C==="video"}function qe(){return new e.window.Worker(ce.workerUrl)}Re.maxOverzooming=10,Re.maxUnderzooming=3;var st="mapboxgl_preloaded_worker_pool",it=function(){this.active={}};it.prototype.acquire=function(C){if(!this.workers)for(this.workers=[];this.workers.length<it.workerCount;)this.workers.push(new qe);return this.active[C]=!0,this.workers.slice()},it.prototype.release=function(C){delete this.active[C],this.numActive()===0&&(this.workers.forEach(function(R){R.terminate()}),this.workers=null)},it.prototype.isPreloaded=function(){return!!this.active[st]},it.prototype.numActive=function(){return Object.keys(this.active).length};var Tt,Pt=Math.floor(e.browser.hardwareConcurrency/2);function rt(){return Tt||(Tt=new it),Tt}function ut(C,R){var F={};for(var q in C)q!=="ref"&&(F[q]=C[q]);return e.refProperties.forEach(function(ae){ae in R&&(F[ae]=R[ae])}),F}function Bt(C){C=C.slice();for(var R=Object.create(null),F=0;F<C.length;F++)R[C[F].id]=C[F];for(var q=0;q<C.length;q++)"ref"in C[q]&&(C[q]=ut(C[q],R[C[q].ref]));return C}it.workerCount=Math.max(Math.min(Pt,6),1);var wt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Lt(C,R,F){F.push({command:wt.addSource,args:[C,R[C]]})}function Se(C,R,F){R.push({command:wt.removeSource,args:[C]}),F[C]=!0}function We(C,R,F,q){Se(C,F,q),Lt(C,R,F)}function nt(C,R,F){var q;for(q in C[F])if(C[F].hasOwnProperty(q)&&q!=="data"&&!e.deepEqual(C[F][q],R[F][q]))return!1;for(q in R[F])if(R[F].hasOwnProperty(q)&&q!=="data"&&!e.deepEqual(C[F][q],R[F][q]))return!1;return!0}function ft(C,R,F,q,ae,ue){var xe;for(xe in R=R||{},C=C||{})C.hasOwnProperty(xe)&&(e.deepEqual(C[xe],R[xe])||F.push({command:ue,args:[q,xe,R[xe],ae]}));for(xe in R)R.hasOwnProperty(xe)&&!C.hasOwnProperty(xe)&&(e.deepEqual(C[xe],R[xe])||F.push({command:ue,args:[q,xe,R[xe],ae]}))}function Mt(C){return C.id}function Nt(C,R){return C[R.id]=R,C}function Zt(C,R){if(!C)return[{command:wt.setStyle,args:[R]}];var F=[];try{if(!e.deepEqual(C.version,R.version))return[{command:wt.setStyle,args:[R]}];e.deepEqual(C.center,R.center)||F.push({command:wt.setCenter,args:[R.center]}),e.deepEqual(C.zoom,R.zoom)||F.push({command:wt.setZoom,args:[R.zoom]}),e.deepEqual(C.bearing,R.bearing)||F.push({command:wt.setBearing,args:[R.bearing]}),e.deepEqual(C.pitch,R.pitch)||F.push({command:wt.setPitch,args:[R.pitch]}),e.deepEqual(C.sprite,R.sprite)||F.push({command:wt.setSprite,args:[R.sprite]}),e.deepEqual(C.glyphs,R.glyphs)||F.push({command:wt.setGlyphs,args:[R.glyphs]}),e.deepEqual(C.transition,R.transition)||F.push({command:wt.setTransition,args:[R.transition]}),e.deepEqual(C.light,R.light)||F.push({command:wt.setLight,args:[R.light]});var q={},ae=[];(function(xe,ke,Le,Ve){var Je;for(Je in ke=ke||{},xe=xe||{})xe.hasOwnProperty(Je)&&(ke.hasOwnProperty(Je)||Se(Je,Le,Ve));for(Je in ke)ke.hasOwnProperty(Je)&&(xe.hasOwnProperty(Je)?e.deepEqual(xe[Je],ke[Je])||(xe[Je].type==="geojson"&&ke[Je].type==="geojson"&&nt(xe,ke,Je)?Le.push({command:wt.setGeoJSONSourceData,args:[Je,ke[Je].data]}):We(Je,ke,Le,Ve)):Lt(Je,ke,Le))})(C.sources,R.sources,ae,q);var ue=[];C.layers&&C.layers.forEach(function(xe){q[xe.source]?F.push({command:wt.removeLayer,args:[xe.id]}):ue.push(xe)}),F=F.concat(ae),function(xe,ke,Le){ke=ke||[];var Ve,Je,at,_t,Et,kt,At,xt=(xe=xe||[]).map(Mt),zt=ke.map(Mt),Ot=xe.reduce(Nt,{}),jt=ke.reduce(Nt,{}),rr=xt.slice(),dr=Object.create(null);for(Ve=0,Je=0;Ve<xt.length;Ve++)at=xt[Ve],jt.hasOwnProperty(at)?Je++:(Le.push({command:wt.removeLayer,args:[at]}),rr.splice(rr.indexOf(at,Je),1));for(Ve=0,Je=0;Ve<zt.length;Ve++)at=zt[zt.length-1-Ve],rr[rr.length-1-Ve]!==at&&(Ot.hasOwnProperty(at)?(Le.push({command:wt.removeLayer,args:[at]}),rr.splice(rr.lastIndexOf(at,rr.length-Je),1)):Je++,kt=rr[rr.length-Ve],Le.push({command:wt.addLayer,args:[jt[at],kt]}),rr.splice(rr.length-Ve,0,at),dr[at]=!0);for(Ve=0;Ve<zt.length;Ve++)if(_t=Ot[at=zt[Ve]],Et=jt[at],!dr[at]&&!e.deepEqual(_t,Et))if(e.deepEqual(_t.source,Et.source)&&e.deepEqual(_t["source-layer"],Et["source-layer"])&&e.deepEqual(_t.type,Et.type)){for(At in ft(_t.layout,Et.layout,Le,at,null,wt.setLayoutProperty),ft(_t.paint,Et.paint,Le,at,null,wt.setPaintProperty),e.deepEqual(_t.filter,Et.filter)||Le.push({command:wt.setFilter,args:[at,Et.filter]}),e.deepEqual(_t.minzoom,Et.minzoom)&&e.deepEqual(_t.maxzoom,Et.maxzoom)||Le.push({command:wt.setLayerZoomRange,args:[at,Et.minzoom,Et.maxzoom]}),_t)_t.hasOwnProperty(At)&&At!=="layout"&&At!=="paint"&&At!=="filter"&&At!=="metadata"&&At!=="minzoom"&&At!=="maxzoom"&&(At.indexOf("paint.")===0?ft(_t[At],Et[At],Le,at,At.slice(6),wt.setPaintProperty):e.deepEqual(_t[At],Et[At])||Le.push({command:wt.setLayerProperty,args:[at,At,Et[At]]}));for(At in Et)Et.hasOwnProperty(At)&&!_t.hasOwnProperty(At)&&At!=="layout"&&At!=="paint"&&At!=="filter"&&At!=="metadata"&&At!=="minzoom"&&At!=="maxzoom"&&(At.indexOf("paint.")===0?ft(_t[At],Et[At],Le,at,At.slice(6),wt.setPaintProperty):e.deepEqual(_t[At],Et[At])||Le.push({command:wt.setLayerProperty,args:[at,At,Et[At]]}))}else Le.push({command:wt.removeLayer,args:[at]}),kt=rr[rr.lastIndexOf(at)+1],Le.push({command:wt.addLayer,args:[Et,kt]})}(ue,R.layers,F)}catch(xe){console.warn("Unable to compute style diff:",xe),F=[{command:wt.setStyle,args:[R]}]}return F}var Ut=function(C,R){this.reset(C,R)};Ut.prototype.reset=function(C,R){this.points=C||[],this._distances=[0];for(var F=1;F<this.points.length;F++)this._distances[F]=this._distances[F-1]+this.points[F].dist(this.points[F-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(R||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Ut.prototype.lerp=function(C){if(this.points.length===1)return this.points[0];C=e.clamp(C,0,1);for(var R=1,F=this._distances[R],q=C*this.paddedLength+this.padding;F<q&&R<this._distances.length;)F=this._distances[++R];var ae=R-1,ue=this._distances[ae],xe=F-ue,ke=xe>0?(q-ue)/xe:0;return this.points[ae].mult(1-ke).add(this.points[R].mult(ke))};var fr=function(C,R,F){var q=this.boxCells=[],ae=this.circleCells=[];this.xCellCount=Math.ceil(C/F),this.yCellCount=Math.ceil(R/F);for(var ue=0;ue<this.xCellCount*this.yCellCount;ue++)q.push([]),ae.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=C,this.height=R,this.xScale=this.xCellCount/C,this.yScale=this.yCellCount/R,this.boxUid=0,this.circleUid=0};function Tr(C,R,F,q,ae){var ue=e.create();return R?(e.scale(ue,ue,[1/ae,1/ae,1]),F||e.rotateZ(ue,ue,q.angle)):e.multiply(ue,q.labelPlaneMatrix,C),ue}function ur(C,R,F,q,ae){if(R){var ue=e.clone(C);return e.scale(ue,ue,[ae,ae,1]),F||e.rotateZ(ue,ue,-q.angle),ue}return q.glCoordMatrix}function Kt(C,R){var F=[C.x,C.y,0,1];Rn(F,F,R);var q=F[3];return{point:new e.Point(F[0]/q,F[1]/q),signedDistanceFromCamera:q}}function Qt(C,R){return .5+C/R*.5}function er(C,R){var F=C[0]/C[3],q=C[1]/C[3];return F>=-R[0]&&F<=R[0]&&q>=-R[1]&&q<=R[1]}function cr(C,R,F,q,ae,ue,xe,ke){var Le=q?C.textSizeData:C.iconSizeData,Ve=e.evaluateSizeForZoom(Le,F.transform.zoom),Je=[256/F.width*2+1,256/F.height*2+1],at=q?C.text.dynamicLayoutVertexArray:C.icon.dynamicLayoutVertexArray;at.clear();for(var _t=C.lineVertexArray,Et=q?C.text.placedSymbolArray:C.icon.placedSymbolArray,kt=F.transform.width/F.transform.height,At=!1,xt=0;xt<Et.length;xt++){var zt=Et.get(xt);if(zt.hidden||zt.writingMode===e.WritingMode.vertical&&!At)en(zt.numGlyphs,at);else{At=!1;var Ot=[zt.anchorX,zt.anchorY,0,1];if(e.transformMat4(Ot,Ot,R),er(Ot,Je)){var jt=Ot[3],rr=Qt(F.transform.cameraToCenterDistance,jt),dr=e.evaluateSizeForFeature(Le,Ve,zt),Sr=xe?dr/rr:dr*rr,kr=new e.Point(zt.anchorX,zt.anchorY),Kr=Kt(kr,ae).point,Jr={},pn=Ir(zt,Sr,!1,ke,R,ae,ue,C.glyphOffsetArray,_t,at,Kr,kr,Jr,kt);At=pn.useVertical,(pn.notEnoughRoom||At||pn.needsFlipping&&Ir(zt,Sr,!0,ke,R,ae,ue,C.glyphOffsetArray,_t,at,Kr,kr,Jr,kt).notEnoughRoom)&&en(zt.numGlyphs,at)}else en(zt.numGlyphs,at)}}q?C.text.dynamicLayoutVertexBuffer.updateData(at):C.icon.dynamicLayoutVertexBuffer.updateData(at)}function gr(C,R,F,q,ae,ue,xe,ke,Le,Ve,Je){var at=ke.glyphStartIndex+ke.numGlyphs,_t=ke.lineStartIndex,Et=ke.lineStartIndex+ke.lineLength,kt=R.getoffsetX(ke.glyphStartIndex),At=R.getoffsetX(at-1),xt=Yr(C*kt,F,q,ae,ue,xe,ke.segment,_t,Et,Le,Ve,Je);if(!xt)return null;var zt=Yr(C*At,F,q,ae,ue,xe,ke.segment,_t,Et,Le,Ve,Je);return zt?{first:xt,last:zt}:null}function Mr(C,R,F,q){return C===e.WritingMode.horizontal&&Math.abs(F.y-R.y)>Math.abs(F.x-R.x)*q?{useVertical:!0}:(C===e.WritingMode.vertical?R.y<F.y:R.x>F.x)?{needsFlipping:!0}:null}function Ir(C,R,F,q,ae,ue,xe,ke,Le,Ve,Je,at,_t,Et){var kt,At=R/24,xt=C.lineOffsetX*At,zt=C.lineOffsetY*At;if(C.numGlyphs>1){var Ot=C.glyphStartIndex+C.numGlyphs,jt=C.lineStartIndex,rr=C.lineStartIndex+C.lineLength,dr=gr(At,ke,xt,zt,F,Je,at,C,Le,ue,_t);if(!dr)return{notEnoughRoom:!0};var Sr=Kt(dr.first.point,xe).point,kr=Kt(dr.last.point,xe).point;if(q&&!F){var Kr=Mr(C.writingMode,Sr,kr,Et);if(Kr)return Kr}kt=[dr.first];for(var Jr=C.glyphStartIndex+1;Jr<Ot-1;Jr++)kt.push(Yr(At*ke.getoffsetX(Jr),xt,zt,F,Je,at,C.segment,jt,rr,Le,ue,_t));kt.push(dr.last)}else{if(q&&!F){var pn=Kt(at,ae).point,sn=C.lineStartIndex+C.segment+1,Un=new e.Point(Le.getx(sn),Le.gety(sn)),Xn=Kt(Un,ae),ha=Xn.signedDistanceFromCamera>0?Xn.point:Fr(at,Un,pn,1,ae),Gr=Mr(C.writingMode,pn,ha,Et);if(Gr)return Gr}var An=Yr(At*ke.getoffsetX(C.glyphStartIndex),xt,zt,F,Je,at,C.segment,C.lineStartIndex,C.lineStartIndex+C.lineLength,Le,ue,_t);if(!An)return{notEnoughRoom:!0};kt=[An]}for(var Jn=0,Yn=kt;Jn<Yn.length;Jn+=1){var ia=Yn[Jn];e.addDynamicAttributes(Ve,ia.point,ia.angle)}return{}}function Fr(C,R,F,q,ae){var ue=Kt(C.add(C.sub(R)._unit()),ae).point,xe=F.sub(ue);return F.add(xe._mult(q/xe.mag()))}function Yr(C,R,F,q,ae,ue,xe,ke,Le,Ve,Je,at){var _t=q?C-R:C+R,Et=_t>0?1:-1,kt=0;q&&(Et*=-1,kt=Math.PI),Et<0&&(kt+=Math.PI);for(var At=Et>0?ke+xe:ke+xe+1,xt=ae,zt=ae,Ot=0,jt=0,rr=Math.abs(_t),dr=[];Ot+jt<=rr;){if((At+=Et)<ke||At>=Le)return null;if(zt=xt,dr.push(xt),(xt=at[At])===void 0){var Sr=new e.Point(Ve.getx(At),Ve.gety(At)),kr=Kt(Sr,Je);if(kr.signedDistanceFromCamera>0)xt=at[At]=kr.point;else{var Kr=At-Et;xt=Fr(Ot===0?ue:new e.Point(Ve.getx(Kr),Ve.gety(Kr)),Sr,zt,rr-Ot+1,Je)}}Ot+=jt,jt=zt.dist(xt)}var Jr=(rr-Ot)/jt,pn=xt.sub(zt),sn=pn.mult(Jr)._add(zt);sn._add(pn._unit()._perp()._mult(F*Et));var Un=kt+Math.atan2(xt.y-zt.y,xt.x-zt.x);return dr.push(sn),{point:sn,angle:Un,path:dr}}fr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},fr.prototype.insert=function(C,R,F,q,ae){this._forEachCell(R,F,q,ae,this._insertBoxCell,this.boxUid++),this.boxKeys.push(C),this.bboxes.push(R),this.bboxes.push(F),this.bboxes.push(q),this.bboxes.push(ae)},fr.prototype.insertCircle=function(C,R,F,q){this._forEachCell(R-q,F-q,R+q,F+q,this._insertCircleCell,this.circleUid++),this.circleKeys.push(C),this.circles.push(R),this.circles.push(F),this.circles.push(q)},fr.prototype._insertBoxCell=function(C,R,F,q,ae,ue){this.boxCells[ae].push(ue)},fr.prototype._insertCircleCell=function(C,R,F,q,ae,ue){this.circleCells[ae].push(ue)},fr.prototype._query=function(C,R,F,q,ae,ue){if(F<0||C>this.width||q<0||R>this.height)return!ae&&[];var xe=[];if(C<=0&&R<=0&&this.width<=F&&this.height<=q){if(ae)return!0;for(var ke=0;ke<this.boxKeys.length;ke++)xe.push({key:this.boxKeys[ke],x1:this.bboxes[4*ke],y1:this.bboxes[4*ke+1],x2:this.bboxes[4*ke+2],y2:this.bboxes[4*ke+3]});for(var Le=0;Le<this.circleKeys.length;Le++){var Ve=this.circles[3*Le],Je=this.circles[3*Le+1],at=this.circles[3*Le+2];xe.push({key:this.circleKeys[Le],x1:Ve-at,y1:Je-at,x2:Ve+at,y2:Je+at})}return ue?xe.filter(ue):xe}var _t={hitTest:ae,seenUids:{box:{},circle:{}}};return this._forEachCell(C,R,F,q,this._queryCell,xe,_t,ue),ae?xe.length>0:xe},fr.prototype._queryCircle=function(C,R,F,q,ae){var ue=C-F,xe=C+F,ke=R-F,Le=R+F;if(xe<0||ue>this.width||Le<0||ke>this.height)return!q&&[];var Ve=[],Je={hitTest:q,circle:{x:C,y:R,radius:F},seenUids:{box:{},circle:{}}};return this._forEachCell(ue,ke,xe,Le,this._queryCellCircle,Ve,Je,ae),q?Ve.length>0:Ve},fr.prototype.query=function(C,R,F,q,ae){return this._query(C,R,F,q,!1,ae)},fr.prototype.hitTest=function(C,R,F,q,ae){return this._query(C,R,F,q,!0,ae)},fr.prototype.hitTestCircle=function(C,R,F,q){return this._queryCircle(C,R,F,!0,q)},fr.prototype._queryCell=function(C,R,F,q,ae,ue,xe,ke){var Le=xe.seenUids,Ve=this.boxCells[ae];if(Ve!==null)for(var Je=this.bboxes,at=0,_t=Ve;at<_t.length;at+=1){var Et=_t[at];if(!Le.box[Et]){Le.box[Et]=!0;var kt=4*Et;if(C<=Je[kt+2]&&R<=Je[kt+3]&&F>=Je[kt+0]&&q>=Je[kt+1]&&(!ke||ke(this.boxKeys[Et]))){if(xe.hitTest)return ue.push(!0),!0;ue.push({key:this.boxKeys[Et],x1:Je[kt],y1:Je[kt+1],x2:Je[kt+2],y2:Je[kt+3]})}}}var At=this.circleCells[ae];if(At!==null)for(var xt=this.circles,zt=0,Ot=At;zt<Ot.length;zt+=1){var jt=Ot[zt];if(!Le.circle[jt]){Le.circle[jt]=!0;var rr=3*jt;if(this._circleAndRectCollide(xt[rr],xt[rr+1],xt[rr+2],C,R,F,q)&&(!ke||ke(this.circleKeys[jt]))){if(xe.hitTest)return ue.push(!0),!0;var dr=xt[rr],Sr=xt[rr+1],kr=xt[rr+2];ue.push({key:this.circleKeys[jt],x1:dr-kr,y1:Sr-kr,x2:dr+kr,y2:Sr+kr})}}}},fr.prototype._queryCellCircle=function(C,R,F,q,ae,ue,xe,ke){var Le=xe.circle,Ve=xe.seenUids,Je=this.boxCells[ae];if(Je!==null)for(var at=this.bboxes,_t=0,Et=Je;_t<Et.length;_t+=1){var kt=Et[_t];if(!Ve.box[kt]){Ve.box[kt]=!0;var At=4*kt;if(this._circleAndRectCollide(Le.x,Le.y,Le.radius,at[At+0],at[At+1],at[At+2],at[At+3])&&(!ke||ke(this.boxKeys[kt])))return ue.push(!0),!0}}var xt=this.circleCells[ae];if(xt!==null)for(var zt=this.circles,Ot=0,jt=xt;Ot<jt.length;Ot+=1){var rr=jt[Ot];if(!Ve.circle[rr]){Ve.circle[rr]=!0;var dr=3*rr;if(this._circlesCollide(zt[dr],zt[dr+1],zt[dr+2],Le.x,Le.y,Le.radius)&&(!ke||ke(this.circleKeys[rr])))return ue.push(!0),!0}}},fr.prototype._forEachCell=function(C,R,F,q,ae,ue,xe,ke){for(var Le=this._convertToXCellCoord(C),Ve=this._convertToYCellCoord(R),Je=this._convertToXCellCoord(F),at=this._convertToYCellCoord(q),_t=Le;_t<=Je;_t++)for(var Et=Ve;Et<=at;Et++){var kt=this.xCellCount*Et+_t;if(ae.call(this,C,R,F,q,kt,ue,xe,ke))return}},fr.prototype._convertToXCellCoord=function(C){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(C*this.xScale)))},fr.prototype._convertToYCellCoord=function(C){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(C*this.yScale)))},fr.prototype._circlesCollide=function(C,R,F,q,ae,ue){var xe=q-C,ke=ae-R,Le=F+ue;return Le*Le>xe*xe+ke*ke},fr.prototype._circleAndRectCollide=function(C,R,F,q,ae,ue,xe){var ke=(ue-q)/2,Le=Math.abs(C-(q+ke));if(Le>ke+F)return!1;var Ve=(xe-ae)/2,Je=Math.abs(R-(ae+Ve));if(Je>Ve+F)return!1;if(Le<=ke||Je<=Ve)return!0;var at=Le-ke,_t=Je-Ve;return at*at+_t*_t<=F*F};var fn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function en(C,R){for(var F=0;F<C;F++){var q=R.length;R.resize(q+4),R.float32.set(fn,3*q)}}function Rn(C,R,F){var q=R[0],ae=R[1];return C[0]=F[0]*q+F[4]*ae+F[12],C[1]=F[1]*q+F[5]*ae+F[13],C[3]=F[3]*q+F[7]*ae+F[15],C}var nn=function(C,R,F){R===void 0&&(R=new fr(C.width+200,C.height+200,25)),F===void 0&&(F=new fr(C.width+200,C.height+200,25)),this.transform=C,this.grid=R,this.ignoredGrid=F,this.pitchfactor=Math.cos(C._pitch)*C.cameraToCenterDistance,this.screenRightBoundary=C.width+100,this.screenBottomBoundary=C.height+100,this.gridRightBoundary=C.width+200,this.gridBottomBoundary=C.height+200};function yn(C,R,F){return R*(e.EXTENT/(C.tileSize*Math.pow(2,F-C.tileID.overscaledZ)))}nn.prototype.placeCollisionBox=function(C,R,F,q,ae){var ue=this.projectAndGetPerspectiveRatio(q,C.anchorPointX,C.anchorPointY),xe=F*ue.perspectiveRatio,ke=C.x1*xe+ue.point.x,Le=C.y1*xe+ue.point.y,Ve=C.x2*xe+ue.point.x,Je=C.y2*xe+ue.point.y;return!this.isInsideGrid(ke,Le,Ve,Je)||!R&&this.grid.hitTest(ke,Le,Ve,Je,ae)?{box:[],offscreen:!1}:{box:[ke,Le,Ve,Je],offscreen:this.isOffscreen(ke,Le,Ve,Je)}},nn.prototype.placeCollisionCircles=function(C,R,F,q,ae,ue,xe,ke,Le,Ve,Je,at,_t){var Et=[],kt=new e.Point(R.anchorX,R.anchorY),At=Kt(kt,ue),xt=Qt(this.transform.cameraToCenterDistance,At.signedDistanceFromCamera),zt=(Ve?ae/xt:ae*xt)/e.ONE_EM,Ot=Kt(kt,xe).point,jt=gr(zt,q,R.lineOffsetX*zt,R.lineOffsetY*zt,!1,Ot,kt,R,F,xe,{}),rr=!1,dr=!1,Sr=!0;if(jt){for(var kr=.5*at*xt+_t,Kr=new e.Point(-100,-100),Jr=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),pn=new Ut,sn=jt.first,Un=jt.last,Xn=[],ha=sn.path.length-1;ha>=1;ha--)Xn.push(sn.path[ha]);for(var Gr=1;Gr<Un.path.length;Gr++)Xn.push(Un.path[Gr]);var An=2.5*kr;if(ke){var Jn=Xn.map(function(wo){return Kt(wo,ke)});Xn=Jn.some(function(wo){return wo.signedDistanceFromCamera<=0})?[]:Jn.map(function(wo){return wo.point})}var Yn=[];if(Xn.length>0){for(var ia=Xn[0].clone(),da=Xn[0].clone(),La=1;La<Xn.length;La++)ia.x=Math.min(ia.x,Xn[La].x),ia.y=Math.min(ia.y,Xn[La].y),da.x=Math.max(da.x,Xn[La].x),da.y=Math.max(da.y,Xn[La].y);Yn=ia.x>=Kr.x&&da.x<=Jr.x&&ia.y>=Kr.y&&da.y<=Jr.y?[Xn]:da.x<Kr.x||ia.x>Jr.x||da.y<Kr.y||ia.y>Jr.y?[]:e.clipLine([Xn],Kr.x,Kr.y,Jr.x,Jr.y)}for(var ea=0,_a=Yn;ea<_a.length;ea+=1){var ya=_a[ea];pn.reset(ya,.25*kr);var Ia=0;Ia=pn.length<=.5*kr?1:Math.ceil(pn.paddedLength/An)+1;for(var wa=0;wa<Ia;wa++){var Oa=wa/Math.max(Ia-1,1),Ha=pn.lerp(Oa),fi=Ha.x+100,Ii=Ha.y+100;Et.push(fi,Ii,kr,0);var Oi=fi-kr,ui=Ii-kr,Mi=fi+kr,vi=Ii+kr;if(Sr=Sr&&this.isOffscreen(Oi,ui,Mi,vi),dr=dr||this.isInsideGrid(Oi,ui,Mi,vi),!C&&this.grid.hitTestCircle(fi,Ii,kr,Je)&&(rr=!0,!Le))return{circles:[],offscreen:!1,collisionDetected:rr}}}}return{circles:!Le&&rr||!dr?[]:Et,offscreen:Sr,collisionDetected:rr}},nn.prototype.queryRenderedSymbols=function(C){if(C.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var R=[],F=1/0,q=1/0,ae=-1/0,ue=-1/0,xe=0,ke=C;xe<ke.length;xe+=1){var Le=ke[xe],Ve=new e.Point(Le.x+100,Le.y+100);F=Math.min(F,Ve.x),q=Math.min(q,Ve.y),ae=Math.max(ae,Ve.x),ue=Math.max(ue,Ve.y),R.push(Ve)}for(var Je={},at={},_t=0,Et=this.grid.query(F,q,ae,ue).concat(this.ignoredGrid.query(F,q,ae,ue));_t<Et.length;_t+=1){var kt=Et[_t],At=kt.key;if(Je[At.bucketInstanceId]===void 0&&(Je[At.bucketInstanceId]={}),!Je[At.bucketInstanceId][At.featureIndex]){var xt=[new e.Point(kt.x1,kt.y1),new e.Point(kt.x2,kt.y1),new e.Point(kt.x2,kt.y2),new e.Point(kt.x1,kt.y2)];e.polygonIntersectsPolygon(R,xt)&&(Je[At.bucketInstanceId][At.featureIndex]=!0,at[At.bucketInstanceId]===void 0&&(at[At.bucketInstanceId]=[]),at[At.bucketInstanceId].push(At.featureIndex))}}return at},nn.prototype.insertCollisionBox=function(C,R,F,q,ae){var ue={bucketInstanceId:F,featureIndex:q,collisionGroupID:ae};(R?this.ignoredGrid:this.grid).insert(ue,C[0],C[1],C[2],C[3])},nn.prototype.insertCollisionCircles=function(C,R,F,q,ae){for(var ue=R?this.ignoredGrid:this.grid,xe={bucketInstanceId:F,featureIndex:q,collisionGroupID:ae},ke=0;ke<C.length;ke+=4)ue.insertCircle(xe,C[ke],C[ke+1],C[ke+2])},nn.prototype.projectAndGetPerspectiveRatio=function(C,R,F){var q=[R,F,0,1];return Rn(q,q,C),{point:new e.Point((q[0]/q[3]+1)/2*this.transform.width+100,(-q[1]/q[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/q[3]*.5}},nn.prototype.isOffscreen=function(C,R,F,q){return F<100||C>=this.screenRightBoundary||q<100||R>this.screenBottomBoundary},nn.prototype.isInsideGrid=function(C,R,F,q){return F>=0&&C<this.gridRightBoundary&&q>=0&&R<this.gridBottomBoundary},nn.prototype.getViewportMatrix=function(){var C=e.identity([]);return e.translate(C,C,[-100,-100,0]),C};var bn=function(C,R,F,q){this.opacity=C?Math.max(0,Math.min(1,C.opacity+(C.placed?R:-R))):q&&F?1:0,this.placed=F};bn.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var ta=function(C,R,F,q,ae){this.text=new bn(C?C.text:null,R,F,ae),this.icon=new bn(C?C.icon:null,R,q,ae)};ta.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Br=function(C,R,F){this.text=C,this.icon=R,this.skipFade=F},rn=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},gn=function(C,R,F,q,ae){this.bucketInstanceId=C,this.featureIndex=R,this.sourceLayerIndex=F,this.bucketIndex=q,this.tileID=ae},Qr=function(C){this.crossSourceCollisions=C,this.maxGroupID=0,this.collisionGroups={}};function un(C,R,F,q,ae){var ue=e.getAnchorAlignment(C),xe=-(ue.horizontalAlign-.5)*R,ke=-(ue.verticalAlign-.5)*F,Le=e.evaluateVariableOffset(C,q);return new e.Point(xe+Le[0]*ae,ke+Le[1]*ae)}function Gn(C,R,F,q,ae,ue){var xe=C.x1,ke=C.x2,Le=C.y1,Ve=C.y2,Je=C.anchorPointX,at=C.anchorPointY,_t=new e.Point(R,F);return q&&_t._rotate(ae?ue:-ue),{x1:xe+_t.x,y1:Le+_t.y,x2:ke+_t.x,y2:Ve+_t.y,anchorPointX:Je,anchorPointY:at}}Qr.prototype.get=function(C){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[C]){var R=++this.maxGroupID;this.collisionGroups[C]={ID:R,predicate:function(F){return F.collisionGroupID===R}}}return this.collisionGroups[C]};var wn=function(C,R,F,q){this.transform=C.clone(),this.collisionIndex=new nn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=R,this.retainedQueryData={},this.collisionGroups=new Qr(F),this.collisionCircleArrays={},this.prevPlacement=q,q&&(q.prevPlacement=void 0),this.placedOrientations={}};function Ln(C,R,F,q,ae){C.emplaceBack(R?1:0,F?1:0,q||0,ae||0),C.emplaceBack(R?1:0,F?1:0,q||0,ae||0),C.emplaceBack(R?1:0,F?1:0,q||0,ae||0),C.emplaceBack(R?1:0,F?1:0,q||0,ae||0)}wn.prototype.getBucketParts=function(C,R,F,q){var ae=F.getBucket(R),ue=F.latestFeatureIndex;if(ae&&ue&&R.id===ae.layerIds[0]){var xe=F.collisionBoxArray,ke=ae.layers[0].layout,Le=Math.pow(2,this.transform.zoom-F.tileID.overscaledZ),Ve=F.tileSize/e.EXTENT,Je=this.transform.calculatePosMatrix(F.tileID.toUnwrapped()),at=ke.get("text-pitch-alignment")==="map",_t=ke.get("text-rotation-alignment")==="map",Et=yn(F,1,this.transform.zoom),kt=Tr(Je,at,_t,this.transform,Et),At=null;if(at){var xt=ur(Je,at,_t,this.transform,Et);At=e.multiply([],this.transform.labelPlaneMatrix,xt)}this.retainedQueryData[ae.bucketInstanceId]=new gn(ae.bucketInstanceId,ue,ae.sourceLayerIndex,ae.index,F.tileID);var zt={bucket:ae,layout:ke,posMatrix:Je,textLabelPlaneMatrix:kt,labelToScreenMatrix:At,scale:Le,textPixelRatio:Ve,holdingForFade:F.holdingForFade(),collisionBoxArray:xe,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(ae.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(ae.sourceID)};if(q)for(var Ot=0,jt=ae.sortKeyRanges;Ot<jt.length;Ot+=1){var rr=jt[Ot],dr=rr.sortKey,Sr=rr.symbolInstanceStart,kr=rr.symbolInstanceEnd;C.push({sortKey:dr,symbolInstanceStart:Sr,symbolInstanceEnd:kr,parameters:zt})}else C.push({symbolInstanceStart:0,symbolInstanceEnd:ae.symbolInstances.length,parameters:zt})}},wn.prototype.attemptAnchorPlacement=function(C,R,F,q,ae,ue,xe,ke,Le,Ve,Je,at,_t,Et,kt){var At,xt=[at.textOffset0,at.textOffset1],zt=un(C,F,q,xt,ae),Ot=this.collisionIndex.placeCollisionBox(Gn(R,zt.x,zt.y,ue,xe,this.transform.angle),Je,ke,Le,Ve.predicate);if(!(kt&&this.collisionIndex.placeCollisionBox(Gn(kt,zt.x,zt.y,ue,xe,this.transform.angle),Je,ke,Le,Ve.predicate).box.length===0)&&Ot.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[at.crossTileID]&&this.prevPlacement.placements[at.crossTileID]&&this.prevPlacement.placements[at.crossTileID].text&&(At=this.prevPlacement.variableOffsets[at.crossTileID].anchor),this.variableOffsets[at.crossTileID]={textOffset:xt,width:F,height:q,anchor:C,textBoxScale:ae,prevAnchor:At},this.markUsedJustification(_t,C,at,Et),_t.allowVerticalPlacement&&(this.markUsedOrientation(_t,Et,at),this.placedOrientations[at.crossTileID]=Et),{shift:zt,placedGlyphBoxes:Ot}},wn.prototype.placeLayerBucketPart=function(C,R,F){var q=this,ae=C.parameters,ue=ae.bucket,xe=ae.layout,ke=ae.posMatrix,Le=ae.textLabelPlaneMatrix,Ve=ae.labelToScreenMatrix,Je=ae.textPixelRatio,at=ae.holdingForFade,_t=ae.collisionBoxArray,Et=ae.partiallyEvaluatedTextSize,kt=ae.collisionGroup,At=xe.get("text-optional"),xt=xe.get("icon-optional"),zt=xe.get("text-allow-overlap"),Ot=xe.get("icon-allow-overlap"),jt=xe.get("text-rotation-alignment")==="map",rr=xe.get("text-pitch-alignment")==="map",dr=xe.get("icon-text-fit")!=="none",Sr=xe.get("symbol-z-order")==="viewport-y",kr=zt&&(Ot||!ue.hasIconData()||xt),Kr=Ot&&(zt||!ue.hasTextData()||At);!ue.collisionArrays&&_t&&ue.deserializeCollisionBoxes(_t);var Jr=function(Gr,An){if(!R[Gr.crossTileID])if(at)q.placements[Gr.crossTileID]=new Br(!1,!1,!1);else{var Jn,Yn=!1,ia=!1,da=!0,La=null,ea={box:null,offscreen:null},_a={box:null,offscreen:null},ya=null,Ia=null,wa=0,Oa=0,Ha=0;An.textFeatureIndex?wa=An.textFeatureIndex:Gr.useRuntimeCollisionCircles&&(wa=Gr.featureIndex),An.verticalTextFeatureIndex&&(Oa=An.verticalTextFeatureIndex);var fi=An.textBox;if(fi){var Ii=function(Ai){var Do=e.WritingMode.horizontal;if(ue.allowVerticalPlacement&&!Ai&&q.prevPlacement){var zo=q.prevPlacement.placedOrientations[Gr.crossTileID];zo&&(q.placedOrientations[Gr.crossTileID]=zo,Do=zo,q.markUsedOrientation(ue,Do,Gr))}return Do},Oi=function(Ai,Do){if(ue.allowVerticalPlacement&&Gr.numVerticalGlyphVertices>0&&An.verticalTextBox)for(var zo=0,zl=ue.writingModes;zo<zl.length&&(zl[zo]===e.WritingMode.vertical?(ea=Do(),_a=ea):ea=Ai(),!(ea&&ea.box&&ea.box.length));zo+=1);else ea=Ai()};if(xe.get("text-variable-anchor")){var ui=xe.get("text-variable-anchor");if(q.prevPlacement&&q.prevPlacement.variableOffsets[Gr.crossTileID]){var Mi=q.prevPlacement.variableOffsets[Gr.crossTileID];ui.indexOf(Mi.anchor)>0&&(ui=ui.filter(function(Ai){return Ai!==Mi.anchor})).unshift(Mi.anchor)}var vi=function(Ai,Do,zo){for(var zl=Ai.x2-Ai.x1,Au=Ai.y2-Ai.y1,es=Gr.textBoxScale,uc=dr&&!Ot?Do:null,Sl={box:[],offscreen:!1},Su=zt?2*ui.length:ui.length,nl=0;nl<Su;++nl){var Eu=ui[nl%ui.length],Rl=nl>=ui.length,fc=q.attemptAnchorPlacement(Eu,Ai,zl,Au,es,jt,rr,Je,ke,kt,Rl,Gr,ue,zo,uc);if(fc&&(Sl=fc.placedGlyphBoxes)&&Sl.box&&Sl.box.length){Yn=!0,La=fc.shift;break}}return Sl};Oi(function(){return vi(fi,An.iconBox,e.WritingMode.horizontal)},function(){var Ai=An.verticalTextBox,Do=ea&&ea.box&&ea.box.length;return ue.allowVerticalPlacement&&!Do&&Gr.numVerticalGlyphVertices>0&&Ai?vi(Ai,An.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}}),ea&&(Yn=ea.box,da=ea.offscreen);var wo=Ii(ea&&ea.box);if(!Yn&&q.prevPlacement){var Yi=q.prevPlacement.variableOffsets[Gr.crossTileID];Yi&&(q.variableOffsets[Gr.crossTileID]=Yi,q.markUsedJustification(ue,Yi.anchor,Gr,wo))}}else{var Bo=function(Ai,Do){var zo=q.collisionIndex.placeCollisionBox(Ai,zt,Je,ke,kt.predicate);return zo&&zo.box&&zo.box.length&&(q.markUsedOrientation(ue,Do,Gr),q.placedOrientations[Gr.crossTileID]=Do),zo};Oi(function(){return Bo(fi,e.WritingMode.horizontal)},function(){var Ai=An.verticalTextBox;return ue.allowVerticalPlacement&&Gr.numVerticalGlyphVertices>0&&Ai?Bo(Ai,e.WritingMode.vertical):{box:null,offscreen:null}}),Ii(ea&&ea.box&&ea.box.length)}}if(Yn=(Jn=ea)&&Jn.box&&Jn.box.length>0,da=Jn&&Jn.offscreen,Gr.useRuntimeCollisionCircles){var Es=ue.text.placedSymbolArray.get(Gr.centerJustifiedTextSymbolIndex),Js=e.evaluateSizeForFeature(ue.textSizeData,Et,Es),kl=xe.get("text-padding"),hl=Gr.collisionCircleDiameter;ya=q.collisionIndex.placeCollisionCircles(zt,Es,ue.lineVertexArray,ue.glyphOffsetArray,Js,ke,Le,Ve,F,rr,kt.predicate,hl,kl),Yn=zt||ya.circles.length>0&&!ya.collisionDetected,da=da&&ya.offscreen}if(An.iconFeatureIndex&&(Ha=An.iconFeatureIndex),An.iconBox){var pl=function(Ai){var Do=dr&&La?Gn(Ai,La.x,La.y,jt,rr,q.transform.angle):Ai;return q.collisionIndex.placeCollisionBox(Do,Ot,Je,ke,kt.predicate)};ia=_a&&_a.box&&_a.box.length&&An.verticalIconBox?(Ia=pl(An.verticalIconBox)).box.length>0:(Ia=pl(An.iconBox)).box.length>0,da=da&&Ia.offscreen}var To=At||Gr.numHorizontalGlyphVertices===0&&Gr.numVerticalGlyphVertices===0,rl=xt||Gr.numIconVertices===0;if(To||rl?rl?To||(ia=ia&&Yn):Yn=ia&&Yn:ia=Yn=ia&&Yn,Yn&&Jn&&Jn.box&&(_a&&_a.box&&Oa?q.collisionIndex.insertCollisionBox(Jn.box,xe.get("text-ignore-placement"),ue.bucketInstanceId,Oa,kt.ID):q.collisionIndex.insertCollisionBox(Jn.box,xe.get("text-ignore-placement"),ue.bucketInstanceId,wa,kt.ID)),ia&&Ia&&q.collisionIndex.insertCollisionBox(Ia.box,xe.get("icon-ignore-placement"),ue.bucketInstanceId,Ha,kt.ID),ya&&(Yn&&q.collisionIndex.insertCollisionCircles(ya.circles,xe.get("text-ignore-placement"),ue.bucketInstanceId,wa,kt.ID),F)){var Ml=ue.bucketInstanceId,cs=q.collisionCircleArrays[Ml];cs===void 0&&(cs=q.collisionCircleArrays[Ml]=new rn);for(var Al=0;Al<ya.circles.length;Al+=4)cs.circles.push(ya.circles[Al+0]),cs.circles.push(ya.circles[Al+1]),cs.circles.push(ya.circles[Al+2]),cs.circles.push(ya.collisionDetected?1:0)}q.placements[Gr.crossTileID]=new Br(Yn||kr,ia||Kr,da||ue.justReloaded),R[Gr.crossTileID]=!0}};if(Sr)for(var pn=ue.getSortedSymbolIndexes(this.transform.angle),sn=pn.length-1;sn>=0;--sn){var Un=pn[sn];Jr(ue.symbolInstances.get(Un),ue.collisionArrays[Un])}else for(var Xn=C.symbolInstanceStart;Xn<C.symbolInstanceEnd;Xn++)Jr(ue.symbolInstances.get(Xn),ue.collisionArrays[Xn]);if(F&&ue.bucketInstanceId in this.collisionCircleArrays){var ha=this.collisionCircleArrays[ue.bucketInstanceId];e.invert(ha.invProjMatrix,ke),ha.viewportMatrix=this.collisionIndex.getViewportMatrix()}ue.justReloaded=!1},wn.prototype.markUsedJustification=function(C,R,F,q){var ae,ue={left:F.leftJustifiedTextSymbolIndex,center:F.centerJustifiedTextSymbolIndex,right:F.rightJustifiedTextSymbolIndex};ae=q===e.WritingMode.vertical?F.verticalPlacedTextSymbolIndex:ue[e.getAnchorJustification(R)];for(var xe=0,ke=[F.leftJustifiedTextSymbolIndex,F.centerJustifiedTextSymbolIndex,F.rightJustifiedTextSymbolIndex,F.verticalPlacedTextSymbolIndex];xe<ke.length;xe+=1){var Le=ke[xe];Le>=0&&(C.text.placedSymbolArray.get(Le).crossTileID=ae>=0&&Le!==ae?0:F.crossTileID)}},wn.prototype.markUsedOrientation=function(C,R,F){for(var q=R===e.WritingMode.horizontal||R===e.WritingMode.horizontalOnly?R:0,ae=R===e.WritingMode.vertical?R:0,ue=0,xe=[F.leftJustifiedTextSymbolIndex,F.centerJustifiedTextSymbolIndex,F.rightJustifiedTextSymbolIndex];ue<xe.length;ue+=1){var ke=xe[ue];C.text.placedSymbolArray.get(ke).placedOrientation=q}F.verticalPlacedTextSymbolIndex&&(C.text.placedSymbolArray.get(F.verticalPlacedTextSymbolIndex).placedOrientation=ae)},wn.prototype.commit=function(C){this.commitTime=C,this.zoomAtLastRecencyCheck=this.transform.zoom;var R=this.prevPlacement,F=!1;this.prevZoomAdjustment=R?R.zoomAdjustment(this.transform.zoom):0;var q=R?R.symbolFadeChange(C):1,ae=R?R.opacities:{},ue=R?R.variableOffsets:{},xe=R?R.placedOrientations:{};for(var ke in this.placements){var Le=this.placements[ke],Ve=ae[ke];Ve?(this.opacities[ke]=new ta(Ve,q,Le.text,Le.icon),F=F||Le.text!==Ve.text.placed||Le.icon!==Ve.icon.placed):(this.opacities[ke]=new ta(null,q,Le.text,Le.icon,Le.skipFade),F=F||Le.text||Le.icon)}for(var Je in ae){var at=ae[Je];if(!this.opacities[Je]){var _t=new ta(at,q,!1,!1);_t.isHidden()||(this.opacities[Je]=_t,F=F||at.text.placed||at.icon.placed)}}for(var Et in ue)this.variableOffsets[Et]||!this.opacities[Et]||this.opacities[Et].isHidden()||(this.variableOffsets[Et]=ue[Et]);for(var kt in xe)this.placedOrientations[kt]||!this.opacities[kt]||this.opacities[kt].isHidden()||(this.placedOrientations[kt]=xe[kt]);F?this.lastPlacementChangeTime=C:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=R?R.lastPlacementChangeTime:C)},wn.prototype.updateLayerOpacities=function(C,R){for(var F={},q=0,ae=R;q<ae.length;q+=1){var ue=ae[q],xe=ue.getBucket(C);xe&&ue.latestFeatureIndex&&C.id===xe.layerIds[0]&&this.updateBucketOpacities(xe,F,ue.collisionBoxArray)}},wn.prototype.updateBucketOpacities=function(C,R,F){var q=this;C.hasTextData()&&C.text.opacityVertexArray.clear(),C.hasIconData()&&C.icon.opacityVertexArray.clear(),C.hasIconCollisionBoxData()&&C.iconCollisionBox.collisionVertexArray.clear(),C.hasTextCollisionBoxData()&&C.textCollisionBox.collisionVertexArray.clear();var ae=C.layers[0].layout,ue=new ta(null,0,!1,!1,!0),xe=ae.get("text-allow-overlap"),ke=ae.get("icon-allow-overlap"),Le=ae.get("text-variable-anchor"),Ve=ae.get("text-rotation-alignment")==="map",Je=ae.get("text-pitch-alignment")==="map",at=ae.get("icon-text-fit")!=="none",_t=new ta(null,0,xe&&(ke||!C.hasIconData()||ae.get("icon-optional")),ke&&(xe||!C.hasTextData()||ae.get("text-optional")),!0);!C.collisionArrays&&F&&(C.hasIconCollisionBoxData()||C.hasTextCollisionBoxData())&&C.deserializeCollisionBoxes(F);for(var Et=function(zt,Ot,jt){for(var rr=0;rr<Ot/4;rr++)zt.opacityVertexArray.emplaceBack(jt)},kt=function(zt){var Ot=C.symbolInstances.get(zt),jt=Ot.numHorizontalGlyphVertices,rr=Ot.numVerticalGlyphVertices,dr=Ot.crossTileID,Sr=R[dr],kr=q.opacities[dr];Sr?kr=ue:kr||(kr=_t,q.opacities[dr]=kr),R[dr]=!0;var Kr=jt>0||rr>0,Jr=Ot.numIconVertices>0,pn=q.placedOrientations[Ot.crossTileID],sn=pn===e.WritingMode.vertical,Un=pn===e.WritingMode.horizontal||pn===e.WritingMode.horizontalOnly;if(Kr){var Xn=zr(kr.text),ha=sn?Or:Xn;Et(C.text,jt,ha);var Gr=Un?Or:Xn;Et(C.text,rr,Gr);var An=kr.text.isHidden();[Ot.rightJustifiedTextSymbolIndex,Ot.centerJustifiedTextSymbolIndex,Ot.leftJustifiedTextSymbolIndex].forEach(function(Ha){Ha>=0&&(C.text.placedSymbolArray.get(Ha).hidden=An||sn?1:0)}),Ot.verticalPlacedTextSymbolIndex>=0&&(C.text.placedSymbolArray.get(Ot.verticalPlacedTextSymbolIndex).hidden=An||Un?1:0);var Jn=q.variableOffsets[Ot.crossTileID];Jn&&q.markUsedJustification(C,Jn.anchor,Ot,pn);var Yn=q.placedOrientations[Ot.crossTileID];Yn&&(q.markUsedJustification(C,"left",Ot,Yn),q.markUsedOrientation(C,Yn,Ot))}if(Jr){var ia=zr(kr.icon),da=!(at&&Ot.verticalPlacedIconSymbolIndex&&sn);if(Ot.placedIconSymbolIndex>=0){var La=da?ia:Or;Et(C.icon,Ot.numIconVertices,La),C.icon.placedSymbolArray.get(Ot.placedIconSymbolIndex).hidden=kr.icon.isHidden()}if(Ot.verticalPlacedIconSymbolIndex>=0){var ea=da?Or:ia;Et(C.icon,Ot.numVerticalIconVertices,ea),C.icon.placedSymbolArray.get(Ot.verticalPlacedIconSymbolIndex).hidden=kr.icon.isHidden()}}if(C.hasIconCollisionBoxData()||C.hasTextCollisionBoxData()){var _a=C.collisionArrays[zt];if(_a){var ya=new e.Point(0,0);if(_a.textBox||_a.verticalTextBox){var Ia=!0;if(Le){var wa=q.variableOffsets[dr];wa?(ya=un(wa.anchor,wa.width,wa.height,wa.textOffset,wa.textBoxScale),Ve&&ya._rotate(Je?q.transform.angle:-q.transform.angle)):Ia=!1}_a.textBox&&Ln(C.textCollisionBox.collisionVertexArray,kr.text.placed,!Ia||sn,ya.x,ya.y),_a.verticalTextBox&&Ln(C.textCollisionBox.collisionVertexArray,kr.text.placed,!Ia||Un,ya.x,ya.y)}var Oa=Boolean(!Un&&_a.verticalIconBox);_a.iconBox&&Ln(C.iconCollisionBox.collisionVertexArray,kr.icon.placed,Oa,at?ya.x:0,at?ya.y:0),_a.verticalIconBox&&Ln(C.iconCollisionBox.collisionVertexArray,kr.icon.placed,!Oa,at?ya.x:0,at?ya.y:0)}}},At=0;At<C.symbolInstances.length;At++)kt(At);if(C.sortFeatures(this.transform.angle),this.retainedQueryData[C.bucketInstanceId]&&(this.retainedQueryData[C.bucketInstanceId].featureSortOrder=C.featureSortOrder),C.hasTextData()&&C.text.opacityVertexBuffer&&C.text.opacityVertexBuffer.updateData(C.text.opacityVertexArray),C.hasIconData()&&C.icon.opacityVertexBuffer&&C.icon.opacityVertexBuffer.updateData(C.icon.opacityVertexArray),C.hasIconCollisionBoxData()&&C.iconCollisionBox.collisionVertexBuffer&&C.iconCollisionBox.collisionVertexBuffer.updateData(C.iconCollisionBox.collisionVertexArray),C.hasTextCollisionBoxData()&&C.textCollisionBox.collisionVertexBuffer&&C.textCollisionBox.collisionVertexBuffer.updateData(C.textCollisionBox.collisionVertexArray),C.bucketInstanceId in this.collisionCircleArrays){var xt=this.collisionCircleArrays[C.bucketInstanceId];C.placementInvProjMatrix=xt.invProjMatrix,C.placementViewportMatrix=xt.viewportMatrix,C.collisionCircleArray=xt.circles,delete this.collisionCircleArrays[C.bucketInstanceId]}},wn.prototype.symbolFadeChange=function(C){return this.fadeDuration===0?1:(C-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},wn.prototype.zoomAdjustment=function(C){return Math.max(0,(this.transform.zoom-C)/1.5)},wn.prototype.hasTransitions=function(C){return this.stale||C-this.lastPlacementChangeTime<this.fadeDuration},wn.prototype.stillRecent=function(C,R){var F=this.zoomAtLastRecencyCheck===R?1-this.zoomAdjustment(R):1;return this.zoomAtLastRecencyCheck=R,this.commitTime+this.fadeDuration*F>C},wn.prototype.setStale=function(){this.stale=!0};var oa=Math.pow(2,25),tr=Math.pow(2,24),mr=Math.pow(2,17),Ct=Math.pow(2,16),or=Math.pow(2,9),hr=Math.pow(2,8),Rr=Math.pow(2,1);function zr(C){if(C.opacity===0&&!C.placed)return 0;if(C.opacity===1&&C.placed)return 4294967295;var R=C.placed?1:0,F=Math.floor(127*C.opacity);return F*oa+R*tr+F*mr+R*Ct+F*or+R*hr+F*Rr+R}var Or=0,Ar=function(C){this._sortAcrossTiles=C.layout.get("symbol-z-order")!=="viewport-y"&&C.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Ar.prototype.continuePlacement=function(C,R,F,q,ae){for(var ue=this._bucketParts;this._currentTileIndex<C.length;){var xe=C[this._currentTileIndex];if(R.getBucketParts(ue,q,xe,this._sortAcrossTiles),this._currentTileIndex++,ae())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,ue.sort(function(Le,Ve){return Le.sortKey-Ve.sortKey}));this._currentPartIndex<ue.length;){var ke=ue[this._currentPartIndex];if(R.placeLayerBucketPart(ke,this._seenCrossTileIDs,F),this._currentPartIndex++,ae())return!0}return!1};var vr=function(C,R,F,q,ae,ue,xe){this.placement=new wn(C,ae,ue,xe),this._currentPlacementIndex=R.length-1,this._forceFullPlacement=F,this._showCollisionBoxes=q,this._done=!1};vr.prototype.isDone=function(){return this._done},vr.prototype.continuePlacement=function(C,R,F){for(var q=this,ae=e.browser.now(),ue=function(){var Le=e.browser.now()-ae;return!q._forceFullPlacement&&Le>2};this._currentPlacementIndex>=0;){var xe=R[C[this._currentPlacementIndex]],ke=this.placement.collisionIndex.transform.zoom;if(xe.type==="symbol"&&(!xe.minzoom||xe.minzoom<=ke)&&(!xe.maxzoom||xe.maxzoom>ke)){if(this._inProgressLayer||(this._inProgressLayer=new Ar(xe)),this._inProgressLayer.continuePlacement(F[xe.source],this.placement,this._showCollisionBoxes,xe,ue))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},vr.prototype.commit=function(C){return this.placement.commit(C),this.placement};var xr=512/e.EXTENT/2,wr=function(C,R,F){this.tileID=C,this.indexedSymbolInstances={},this.bucketInstanceId=F;for(var q=0;q<R.length;q++){var ae=R.get(q),ue=ae.key;this.indexedSymbolInstances[ue]||(this.indexedSymbolInstances[ue]=[]),this.indexedSymbolInstances[ue].push({crossTileID:ae.crossTileID,coord:this.getScaledCoordinates(ae,C)})}};wr.prototype.getScaledCoordinates=function(C,R){var F=R.canonical.z-this.tileID.canonical.z,q=xr/Math.pow(2,F);return{x:Math.floor((R.canonical.x*e.EXTENT+C.anchorX)*q),y:Math.floor((R.canonical.y*e.EXTENT+C.anchorY)*q)}},wr.prototype.findMatches=function(C,R,F){for(var q=this.tileID.canonical.z<R.canonical.z?1:Math.pow(2,this.tileID.canonical.z-R.canonical.z),ae=0;ae<C.length;ae++){var ue=C.get(ae);if(!ue.crossTileID){var xe=this.indexedSymbolInstances[ue.key];if(xe)for(var ke=this.getScaledCoordinates(ue,R),Le=0,Ve=xe;Le<Ve.length;Le+=1){var Je=Ve[Le];if(Math.abs(Je.coord.x-ke.x)<=q&&Math.abs(Je.coord.y-ke.y)<=q&&!F[Je.crossTileID]){F[Je.crossTileID]=!0,ue.crossTileID=Je.crossTileID;break}}}}};var Er=function(){this.maxCrossTileID=0};Er.prototype.generate=function(){return++this.maxCrossTileID};var qr=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};qr.prototype.handleWrapJump=function(C){var R=Math.round((C-this.lng)/360);if(R!==0)for(var F in this.indexes){var q=this.indexes[F],ae={};for(var ue in q){var xe=q[ue];xe.tileID=xe.tileID.unwrapTo(xe.tileID.wrap+R),ae[xe.tileID.key]=xe}this.indexes[F]=ae}this.lng=C},qr.prototype.addBucket=function(C,R,F){if(this.indexes[C.overscaledZ]&&this.indexes[C.overscaledZ][C.key]){if(this.indexes[C.overscaledZ][C.key].bucketInstanceId===R.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(C.overscaledZ,this.indexes[C.overscaledZ][C.key])}for(var q=0;q<R.symbolInstances.length;q++)R.symbolInstances.get(q).crossTileID=0;this.usedCrossTileIDs[C.overscaledZ]||(this.usedCrossTileIDs[C.overscaledZ]={});var ae=this.usedCrossTileIDs[C.overscaledZ];for(var ue in this.indexes){var xe=this.indexes[ue];if(Number(ue)>C.overscaledZ)for(var ke in xe){var Le=xe[ke];Le.tileID.isChildOf(C)&&Le.findMatches(R.symbolInstances,C,ae)}else{var Ve=xe[C.scaledTo(Number(ue)).key];Ve&&Ve.findMatches(R.symbolInstances,C,ae)}}for(var Je=0;Je<R.symbolInstances.length;Je++){var at=R.symbolInstances.get(Je);at.crossTileID||(at.crossTileID=F.generate(),ae[at.crossTileID]=!0)}return this.indexes[C.overscaledZ]===void 0&&(this.indexes[C.overscaledZ]={}),this.indexes[C.overscaledZ][C.key]=new wr(C,R.symbolInstances,R.bucketInstanceId),!0},qr.prototype.removeBucketCrossTileIDs=function(C,R){for(var F in R.indexedSymbolInstances)for(var q=0,ae=R.indexedSymbolInstances[F];q<ae.length;q+=1){var ue=ae[q];delete this.usedCrossTileIDs[C][ue.crossTileID]}},qr.prototype.removeStaleBuckets=function(C){var R=!1;for(var F in this.indexes){var q=this.indexes[F];for(var ae in q)C[q[ae].bucketInstanceId]||(this.removeBucketCrossTileIDs(F,q[ae]),delete q[ae],R=!0)}return R};var Hr=function(){this.layerIndexes={},this.crossTileIDs=new Er,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Hr.prototype.addLayer=function(C,R,F){var q=this.layerIndexes[C.id];q===void 0&&(q=this.layerIndexes[C.id]=new qr);var ae=!1,ue={};q.handleWrapJump(F);for(var xe=0,ke=R;xe<ke.length;xe+=1){var Le=ke[xe],Ve=Le.getBucket(C);Ve&&C.id===Ve.layerIds[0]&&(Ve.bucketInstanceId||(Ve.bucketInstanceId=++this.maxBucketInstanceId),q.addBucket(Le.tileID,Ve,this.crossTileIDs)&&(ae=!0),ue[Ve.bucketInstanceId]=!0)}return q.removeStaleBuckets(ue)&&(ae=!0),ae},Hr.prototype.pruneUnusedLayers=function(C){var R={};for(var F in C.forEach(function(q){R[q]=!0}),this.layerIndexes)R[F]||delete this.layerIndexes[F]};var $r=function(C,R){return e.emitValidationErrors(C,R&&R.filter(function(F){return F.identifier!=="source.canvas"}))},tn=e.pick(wt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),vn=e.pick(wt,["setCenter","setZoom","setBearing","setPitch"]),_n=function(){var C={},R=e.styleSpec.$version;for(var F in e.styleSpec.$root){var q=e.styleSpec.$root[F];if(q.required){var ae=null;(ae=F==="version"?R:q.type==="array"?[]:{})!=null&&(C[F]=ae)}}return C}(),Tn=function(C){function R(F,q){var ae=this;q===void 0&&(q={}),C.call(this),this.map=F,this.dispatcher=new S(rt(),this),this.imageManager=new c,this.imageManager.setEventedParent(this),this.glyphManager=new T(F._requestManager,q.localIdeographFontFamily),this.lineAtlas=new P(256,512),this.crossTileSymbolIndex=new Hr,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var ue=this;this._rtlTextPluginCallback=R.registerForPluginStateChange(function(xe){var ke={pluginStatus:xe.pluginStatus,pluginURL:xe.pluginURL};ue.dispatcher.broadcast("syncRTLPluginState",ke,function(Le,Ve){if(e.triggerPluginCompletionEvent(Le),Ve&&Ve.every(function(at){return at}))for(var Je in ue.sourceCaches)ue.sourceCaches[Je].reload()})}),this.on("data",function(xe){if(xe.dataType==="source"&&xe.sourceDataType==="metadata"){var ke=ae.sourceCaches[xe.sourceId];if(ke){var Le=ke.getSource();if(Le&&Le.vectorLayerIds)for(var Ve in ae._layers){var Je=ae._layers[Ve];Je.source===Le.id&&ae._validateLayer(Je)}}}})}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.loadURL=function(F,q){var ae=this;q===void 0&&(q={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var ue=typeof q.validate=="boolean"?q.validate:!e.isMapboxURL(F);F=this.map._requestManager.normalizeStyleURL(F,q.accessToken);var xe=this.map._requestManager.transformRequest(F,e.ResourceType.Style);this._request=e.getJSON(xe,function(ke,Le){ae._request=null,ke?ae.fire(new e.ErrorEvent(ke)):Le&&ae._load(Le,ue)})},R.prototype.loadJSON=function(F,q){var ae=this;q===void 0&&(q={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){ae._request=null,ae._load(F,q.validate!==!1)})},R.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(_n,!1)},R.prototype._load=function(F,q){if(!q||!$r(this,e.validateStyle(F))){for(var ae in this._loaded=!0,this.stylesheet=F,F.sources)this.addSource(ae,F.sources[ae],{validate:!1});F.sprite?this._loadSprite(F.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(F.glyphs);var ue=Bt(this.stylesheet.layers);this._order=ue.map(function(Ve){return Ve.id}),this._layers={},this._serializedLayers={};for(var xe=0,ke=ue;xe<ke.length;xe+=1){var Le=ke[xe];(Le=e.createStyleLayer(Le)).setEventedParent(this,{layer:{id:Le.id}}),this._layers[Le.id]=Le,this._serializedLayers[Le.id]=Le.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new I(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},R.prototype._loadSprite=function(F){var q=this;this._spriteRequest=function(ae,ue,xe){var ke,Le,Ve,Je=e.browser.devicePixelRatio>1?"@2x":"",at=e.getJSON(ue.transformRequest(ue.normalizeSpriteURL(ae,Je,".json"),e.ResourceType.SpriteJSON),function(kt,At){at=null,Ve||(Ve=kt,ke=At,Et())}),_t=e.getImage(ue.transformRequest(ue.normalizeSpriteURL(ae,Je,".png"),e.ResourceType.SpriteImage),function(kt,At){_t=null,Ve||(Ve=kt,Le=At,Et())});function Et(){if(Ve)xe(Ve);else if(ke&&Le){var kt=e.browser.getImageData(Le),At={};for(var xt in ke){var zt=ke[xt],Ot=zt.width,jt=zt.height,rr=zt.x,dr=zt.y,Sr=zt.sdf,kr=zt.pixelRatio,Kr=zt.stretchX,Jr=zt.stretchY,pn=zt.content,sn=new e.RGBAImage({width:Ot,height:jt});e.RGBAImage.copy(kt,sn,{x:rr,y:dr},{x:0,y:0},{width:Ot,height:jt}),At[xt]={data:sn,pixelRatio:kr,sdf:Sr,stretchX:Kr,stretchY:Jr,content:pn}}xe(null,At)}}return{cancel:function(){at&&(at.cancel(),at=null),_t&&(_t.cancel(),_t=null)}}}(F,this.map._requestManager,function(ae,ue){if(q._spriteRequest=null,ae)q.fire(new e.ErrorEvent(ae));else if(ue)for(var xe in ue)q.imageManager.addImage(xe,ue[xe]);q.imageManager.setLoaded(!0),q._availableImages=q.imageManager.listImages(),q.dispatcher.broadcast("setImages",q._availableImages),q.fire(new e.Event("data",{dataType:"style"}))})},R.prototype._validateLayer=function(F){var q=this.sourceCaches[F.source];if(q){var ae=F.sourceLayer;if(ae){var ue=q.getSource();(ue.type==="geojson"||ue.vectorLayerIds&&ue.vectorLayerIds.indexOf(ae)===-1)&&this.fire(new e.ErrorEvent(new Error('Source layer "'+ae+'" does not exist on source "'+ue.id+'" as specified by style layer "'+F.id+'"')))}}},R.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var F in this.sourceCaches)if(!this.sourceCaches[F].loaded())return!1;return!!this.imageManager.isLoaded()},R.prototype._serializeLayers=function(F){for(var q=[],ae=0,ue=F;ae<ue.length;ae+=1){var xe=ue[ae],ke=this._layers[xe];ke.type!=="custom"&&q.push(ke.serialize())}return q},R.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var F in this.sourceCaches)if(this.sourceCaches[F].hasTransition())return!0;for(var q in this._layers)if(this._layers[q].hasTransition())return!0;return!1},R.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},R.prototype.update=function(F){if(this._loaded){var q=this._changed;if(this._changed){var ae=Object.keys(this._updatedLayers),ue=Object.keys(this._removedLayers);for(var xe in(ae.length||ue.length)&&this._updateWorkerLayers(ae,ue),this._updatedSources){var ke=this._updatedSources[xe];ke==="reload"?this._reloadSource(xe):ke==="clear"&&this._clearSource(xe)}for(var Le in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Le].updateTransitions(F);this.light.updateTransitions(F),this._resetUpdates()}for(var Ve in this.sourceCaches)this.sourceCaches[Ve].used=!1;for(var Je=0,at=this._order;Je<at.length;Je+=1){var _t=at[Je],Et=this._layers[_t];Et.recalculate(F,this._availableImages),!Et.isHidden(F.zoom)&&Et.source&&(this.sourceCaches[Et.source].used=!0)}this.light.recalculate(F),this.z=F.zoom,q&&this.fire(new e.Event("data",{dataType:"style"}))}},R.prototype._updateTilesForChangedImages=function(){var F=Object.keys(this._changedImages);if(F.length){for(var q in this.sourceCaches)this.sourceCaches[q].reloadTilesForDependencies(["icons","patterns"],F);this._changedImages={}}},R.prototype._updateWorkerLayers=function(F,q){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(F),removedIds:q})},R.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},R.prototype.setState=function(F){var q=this;if(this._checkLoaded(),$r(this,e.validateStyle(F)))return!1;(F=e.clone$1(F)).layers=Bt(F.layers);var ae=Zt(this.serialize(),F).filter(function(xe){return!(xe.command in vn)});if(ae.length===0)return!1;var ue=ae.filter(function(xe){return!(xe.command in tn)});if(ue.length>0)throw new Error("Unimplemented: "+ue.map(function(xe){return xe.command}).join(", ")+".");return ae.forEach(function(xe){xe.command!=="setTransition"&&q[xe.command].apply(q,xe.args)}),this.stylesheet=F,!0},R.prototype.addImage=function(F,q){if(this.getImage(F))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(F,q),this._availableImages=this.imageManager.listImages(),this._changedImages[F]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},R.prototype.updateImage=function(F,q){this.imageManager.updateImage(F,q)},R.prototype.getImage=function(F){return this.imageManager.getImage(F)},R.prototype.removeImage=function(F){if(!this.getImage(F))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(F),this._availableImages=this.imageManager.listImages(),this._changedImages[F]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},R.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},R.prototype.addSource=function(F,q,ae){var ue=this;if(ae===void 0&&(ae={}),this._checkLoaded(),this.sourceCaches[F]!==void 0)throw new Error("There is already a source with this ID");if(!q.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(q).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(q.type)>=0)||!this._validate(e.validateStyle.source,"sources."+F,q,null,ae)){this.map&&this.map._collectResourceTiming&&(q.collectResourceTiming=!0);var xe=this.sourceCaches[F]=new Re(F,q,this.dispatcher);xe.style=this,xe.setEventedParent(this,function(){return{isSourceLoaded:ue.loaded(),source:xe.serialize(),sourceId:F}}),xe.onAdd(this.map),this._changed=!0}},R.prototype.removeSource=function(F){if(this._checkLoaded(),this.sourceCaches[F]===void 0)throw new Error("There is no source with this ID");for(var q in this._layers)if(this._layers[q].source===F)return this.fire(new e.ErrorEvent(new Error('Source "'+F+'" cannot be removed while layer "'+q+'" is using it.')));var ae=this.sourceCaches[F];delete this.sourceCaches[F],delete this._updatedSources[F],ae.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:F})),ae.setEventedParent(null),ae.clearTiles(),ae.onRemove&&ae.onRemove(this.map),this._changed=!0},R.prototype.setGeoJSONSourceData=function(F,q){this._checkLoaded(),this.sourceCaches[F].getSource().setData(q),this._changed=!0},R.prototype.getSource=function(F){return this.sourceCaches[F]&&this.sourceCaches[F].getSource()},R.prototype.addLayer=function(F,q,ae){ae===void 0&&(ae={}),this._checkLoaded();var ue=F.id;if(this.getLayer(ue))this.fire(new e.ErrorEvent(new Error('Layer with id "'+ue+'" already exists on this map')));else{var xe;if(F.type==="custom"){if($r(this,e.validateCustomStyleLayer(F)))return;xe=e.createStyleLayer(F)}else{if(typeof F.source=="object"&&(this.addSource(ue,F.source),F=e.clone$1(F),F=e.extend(F,{source:ue})),this._validate(e.validateStyle.layer,"layers."+ue,F,{arrayIndex:-1},ae))return;xe=e.createStyleLayer(F),this._validateLayer(xe),xe.setEventedParent(this,{layer:{id:ue}}),this._serializedLayers[xe.id]=xe.serialize()}var ke=q?this._order.indexOf(q):this._order.length;if(q&&ke===-1)this.fire(new e.ErrorEvent(new Error('Layer with id "'+q+'" does not exist on this map.')));else{if(this._order.splice(ke,0,ue),this._layerOrderChanged=!0,this._layers[ue]=xe,this._removedLayers[ue]&&xe.source&&xe.type!=="custom"){var Le=this._removedLayers[ue];delete this._removedLayers[ue],Le.type!==xe.type?this._updatedSources[xe.source]="clear":(this._updatedSources[xe.source]="reload",this.sourceCaches[xe.source].pause())}this._updateLayer(xe),xe.onAdd&&xe.onAdd(this.map)}}},R.prototype.moveLayer=function(F,q){if(this._checkLoaded(),this._changed=!0,this._layers[F]){if(F!==q){var ae=this._order.indexOf(F);this._order.splice(ae,1);var ue=q?this._order.indexOf(q):this._order.length;q&&ue===-1?this.fire(new e.ErrorEvent(new Error('Layer with id "'+q+'" does not exist on this map.'))):(this._order.splice(ue,0,F),this._layerOrderChanged=!0)}}else this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be moved.")))},R.prototype.removeLayer=function(F){this._checkLoaded();var q=this._layers[F];if(q){q.setEventedParent(null);var ae=this._order.indexOf(F);this._order.splice(ae,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[F]=q,delete this._layers[F],delete this._serializedLayers[F],delete this._updatedLayers[F],delete this._updatedPaintProps[F],q.onRemove&&q.onRemove(this.map)}else this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be removed.")))},R.prototype.getLayer=function(F){return this._layers[F]},R.prototype.hasLayer=function(F){return F in this._layers},R.prototype.setLayerZoomRange=function(F,q,ae){this._checkLoaded();var ue=this.getLayer(F);ue?ue.minzoom===q&&ue.maxzoom===ae||(q!=null&&(ue.minzoom=q),ae!=null&&(ue.maxzoom=ae),this._updateLayer(ue)):this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot have zoom extent.")))},R.prototype.setFilter=function(F,q,ae){ae===void 0&&(ae={}),this._checkLoaded();var ue=this.getLayer(F);if(ue){if(!e.deepEqual(ue.filter,q))return q==null?(ue.filter=void 0,void this._updateLayer(ue)):void(this._validate(e.validateStyle.filter,"layers."+ue.id+".filter",q,null,ae)||(ue.filter=e.clone$1(q),this._updateLayer(ue)))}else this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be filtered.")))},R.prototype.getFilter=function(F){return e.clone$1(this.getLayer(F).filter)},R.prototype.setLayoutProperty=function(F,q,ae,ue){ue===void 0&&(ue={}),this._checkLoaded();var xe=this.getLayer(F);xe?e.deepEqual(xe.getLayoutProperty(q),ae)||(xe.setLayoutProperty(q,ae,ue),this._updateLayer(xe)):this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be styled.")))},R.prototype.getLayoutProperty=function(F,q){var ae=this.getLayer(F);if(ae)return ae.getLayoutProperty(q);this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style.")))},R.prototype.setPaintProperty=function(F,q,ae,ue){ue===void 0&&(ue={}),this._checkLoaded();var xe=this.getLayer(F);xe?e.deepEqual(xe.getPaintProperty(q),ae)||(xe.setPaintProperty(q,ae,ue)&&this._updateLayer(xe),this._changed=!0,this._updatedPaintProps[F]=!0):this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be styled.")))},R.prototype.getPaintProperty=function(F,q){return this.getLayer(F).getPaintProperty(q)},R.prototype.setFeatureState=function(F,q){this._checkLoaded();var ae=F.source,ue=F.sourceLayer,xe=this.sourceCaches[ae];if(xe!==void 0){var ke=xe.getSource().type;ke==="geojson"&&ue?this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):ke!=="vector"||ue?(F.id===void 0&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),xe.setFeatureState(ue,F.id,q)):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+ae+"' does not exist in the map's style.")))},R.prototype.removeFeatureState=function(F,q){this._checkLoaded();var ae=F.source,ue=this.sourceCaches[ae];if(ue!==void 0){var xe=ue.getSource().type,ke=xe==="vector"?F.sourceLayer:void 0;xe!=="vector"||ke?q&&typeof F.id!="string"&&typeof F.id!="number"?this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):ue.removeFeatureState(ke,F.id,q):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+ae+"' does not exist in the map's style.")))},R.prototype.getFeatureState=function(F){this._checkLoaded();var q=F.source,ae=F.sourceLayer,ue=this.sourceCaches[q];if(ue!==void 0){if(ue.getSource().type!=="vector"||ae)return F.id===void 0&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),ue.getFeatureState(ae,F.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+q+"' does not exist in the map's style.")))},R.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},R.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function(F){return F.serialize()}),layers:this._serializeLayers(this._order)},function(F){return F!==void 0})},R.prototype._updateLayer=function(F){this._updatedLayers[F.id]=!0,F.source&&!this._updatedSources[F.source]&&this.sourceCaches[F.source].getSource().type!=="raster"&&(this._updatedSources[F.source]="reload",this.sourceCaches[F.source].pause()),this._changed=!0},R.prototype._flattenAndSortRenderedFeatures=function(F){for(var q=this,ae=function(pn){return q._layers[pn].type==="fill-extrusion"},ue={},xe=[],ke=this._order.length-1;ke>=0;ke--){var Le=this._order[ke];if(ae(Le)){ue[Le]=ke;for(var Ve=0,Je=F;Ve<Je.length;Ve+=1){var at=Je[Ve][Le];if(at)for(var _t=0,Et=at;_t<Et.length;_t+=1){var kt=Et[_t];xe.push(kt)}}}}xe.sort(function(pn,sn){return sn.intersectionZ-pn.intersectionZ});for(var At=[],xt=this._order.length-1;xt>=0;xt--){var zt=this._order[xt];if(ae(zt))for(var Ot=xe.length-1;Ot>=0;Ot--){var jt=xe[Ot].feature;if(ue[jt.layer.id]<xt)break;At.push(jt),xe.pop()}else for(var rr=0,dr=F;rr<dr.length;rr+=1){var Sr=dr[rr][zt];if(Sr)for(var kr=0,Kr=Sr;kr<Kr.length;kr+=1){var Jr=Kr[kr];At.push(Jr.feature)}}}return At},R.prototype.queryRenderedFeatures=function(F,q,ae){q&&q.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",q.filter,null,q);var ue={};if(q&&q.layers){if(!Array.isArray(q.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var xe=0,ke=q.layers;xe<ke.length;xe+=1){var Le=ke[xe],Ve=this._layers[Le];if(!Ve)return this.fire(new e.ErrorEvent(new Error("The layer '"+Le+"' does not exist in the map's style and cannot be queried for features."))),[];ue[Ve.source]=!0}}var Je=[];for(var at in q.availableImages=this._availableImages,this.sourceCaches)q.layers&&!ue[at]||Je.push(j(this.sourceCaches[at],this._layers,this._serializedLayers,F,q,ae));return this.placement&&Je.push(function(_t,Et,kt,At,xt,zt,Ot){for(var jt={},rr=zt.queryRenderedSymbols(At),dr=[],Sr=0,kr=Object.keys(rr).map(Number);Sr<kr.length;Sr+=1){var Kr=kr[Sr];dr.push(Ot[Kr])}dr.sort(ee);for(var Jr=function(){var ha=sn[pn],Gr=ha.featureIndex.lookupSymbolFeatures(rr[ha.bucketInstanceId],Et,ha.bucketIndex,ha.sourceLayerIndex,xt.filter,xt.layers,xt.availableImages,_t);for(var An in Gr){var Jn=jt[An]=jt[An]||[],Yn=Gr[An];Yn.sort(function(ea,_a){var ya=ha.featureSortOrder;if(ya){var Ia=ya.indexOf(ea.featureIndex);return ya.indexOf(_a.featureIndex)-Ia}return _a.featureIndex-ea.featureIndex});for(var ia=0,da=Yn;ia<da.length;ia+=1){var La=da[ia];Jn.push(La)}}},pn=0,sn=dr;pn<sn.length;pn+=1)Jr();var Un=function(ha){jt[ha].forEach(function(Gr){var An=Gr.feature,Jn=_t[ha],Yn=kt[Jn.source].getFeatureState(An.layer["source-layer"],An.id);An.source=An.layer.source,An.layer["source-layer"]&&(An.sourceLayer=An.layer["source-layer"]),An.state=Yn})};for(var Xn in jt)Un(Xn);return jt}(this._layers,this._serializedLayers,this.sourceCaches,F,q,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Je)},R.prototype.querySourceFeatures=function(F,q){q&&q.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",q.filter,null,q);var ae=this.sourceCaches[F];return ae?function(ue,xe){for(var ke=ue.getRenderableIds().map(function(Et){return ue.getTileByID(Et)}),Le=[],Ve={},Je=0;Je<ke.length;Je++){var at=ke[Je],_t=at.tileID.canonical.key;Ve[_t]||(Ve[_t]=!0,at.querySourceFeatures(Le,xe))}return Le}(ae,q):[]},R.prototype.addSourceType=function(F,q,ae){return R.getSourceType(F)?ae(new Error('A source type called "'+F+'" already exists.')):(R.setSourceType(F,q),q.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:F,url:q.workerSourceURL},ae):ae(null,null))},R.prototype.getLight=function(){return this.light.getLight()},R.prototype.setLight=function(F,q){q===void 0&&(q={}),this._checkLoaded();var ae=this.light.getLight(),ue=!1;for(var xe in F)if(!e.deepEqual(F[xe],ae[xe])){ue=!0;break}if(ue){var ke={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(F,q),this.light.updateTransitions(ke)}},R.prototype._validate=function(F,q,ae,ue,xe){return xe===void 0&&(xe={}),(!xe||xe.validate!==!1)&&$r(this,F.call(e.validateStyle,e.extend({key:q,style:this.serialize(),value:ae,styleSpec:e.styleSpec},ue)))},R.prototype._remove=function(){for(var F in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[F].setEventedParent(null);for(var q in this.sourceCaches)this.sourceCaches[q].clearTiles(),this.sourceCaches[q].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},R.prototype._clearSource=function(F){this.sourceCaches[F].clearTiles()},R.prototype._reloadSource=function(F){this.sourceCaches[F].resume(),this.sourceCaches[F].reload()},R.prototype._updateSources=function(F){for(var q in this.sourceCaches)this.sourceCaches[q].update(F)},R.prototype._generateCollisionBoxes=function(){for(var F in this.sourceCaches)this._reloadSource(F)},R.prototype._updatePlacement=function(F,q,ae,ue,xe){xe===void 0&&(xe=!1);for(var ke=!1,Le=!1,Ve={},Je=0,at=this._order;Je<at.length;Je+=1){var _t=at[Je],Et=this._layers[_t];if(Et.type==="symbol"){if(!Ve[Et.source]){var kt=this.sourceCaches[Et.source];Ve[Et.source]=kt.getRenderableIds(!0).map(function(rr){return kt.getTileByID(rr)}).sort(function(rr,dr){return dr.tileID.overscaledZ-rr.tileID.overscaledZ||(rr.tileID.isLessThan(dr.tileID)?-1:1)})}var At=this.crossTileSymbolIndex.addLayer(Et,Ve[Et.source],F.center.lng);ke=ke||At}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((xe=xe||this._layerOrderChanged||ae===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),F.zoom))&&(this.pauseablePlacement=new vr(F,this._order,xe,q,ae,ue,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Ve),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),Le=!0),ke&&this.pauseablePlacement.placement.setStale()),Le||ke)for(var xt=0,zt=this._order;xt<zt.length;xt+=1){var Ot=zt[xt],jt=this._layers[Ot];jt.type==="symbol"&&this.placement.updateLayerOpacities(jt,Ve[jt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())},R.prototype._releaseSymbolFadeTiles=function(){for(var F in this.sourceCaches)this.sourceCaches[F].releaseSymbolFadeTiles()},R.prototype.getImages=function(F,q,ae){this.imageManager.getImages(q.icons,ae),this._updateTilesForChangedImages();var ue=this.sourceCaches[q.source];ue&&ue.setDependencies(q.tileID.key,q.type,q.icons)},R.prototype.getGlyphs=function(F,q,ae){this.glyphManager.getGlyphs(q.stacks,ae)},R.prototype.getResource=function(F,q,ae){return e.makeRequest(q,ae)},R}(e.Evented);Tn.getSourceType=function(C){return V[C]},Tn.setSourceType=function(C,R){V[C]=R},Tn.registerForPluginStateChange=e.registerForPluginStateChange;var Cn=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),On=Xa(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Zn=Xa(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Aa=Xa(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Ma=Xa(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Sn=Xa("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Qn=Xa(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Kn=Xa(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Da=Xa("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),di=Xa("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Di=Xa("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),fo=Xa(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Wa=Xa(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Za=Xa(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Ki=Xa(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Na=Xa(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),ho=Xa(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),vo=Xa(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),wi=Xa(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),$i=Xa(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),yo=Xa(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),So=Xa(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Bi=Xa(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),mi=Xa(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Zi=Xa(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Ms=Xa(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Cs=Xa(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Xa(C,R){var F=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,q={};return{fragmentSource:C=C.replace(F,function(ae,ue,xe,ke,Le){return q[Le]=!0,ue==="define"?`
#ifndef HAS_UNIFORM_u_`+Le+`
varying `+xe+" "+ke+" "+Le+`;
#else
uniform `+xe+" "+ke+" u_"+Le+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Le+`
    `+xe+" "+ke+" "+Le+" = u_"+Le+`;
#endif
`}),vertexSource:R=R.replace(F,function(ae,ue,xe,ke,Le){var Ve=ke==="float"?"vec2":"vec4",Je=Le.match(/color/)?"color":Ve;return q[Le]?ue==="define"?`
#ifndef HAS_UNIFORM_u_`+Le+`
uniform lowp float u_`+Le+`_t;
attribute `+xe+" "+Ve+" a_"+Le+`;
varying `+xe+" "+ke+" "+Le+`;
#else
uniform `+xe+" "+ke+" u_"+Le+`;
#endif
`:Je==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Le+`
    `+Le+" = a_"+Le+`;
#else
    `+xe+" "+ke+" "+Le+" = u_"+Le+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Le+`
    `+Le+" = unpack_mix_"+Je+"(a_"+Le+", u_"+Le+`_t);
#else
    `+xe+" "+ke+" "+Le+" = u_"+Le+`;
#endif
`:ue==="define"?`
#ifndef HAS_UNIFORM_u_`+Le+`
uniform lowp float u_`+Le+`_t;
attribute `+xe+" "+Ve+" a_"+Le+`;
#else
uniform `+xe+" "+ke+" u_"+Le+`;
#endif
`:Je==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Le+`
    `+xe+" "+ke+" "+Le+" = a_"+Le+`;
#else
    `+xe+" "+ke+" "+Le+" = u_"+Le+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Le+`
    `+xe+" "+ke+" "+Le+" = unpack_mix_"+Je+"(a_"+Le+", u_"+Le+`_t);
#else
    `+xe+" "+ke+" "+Le+" = u_"+Le+`;
#endif
`})}}var ys=Object.freeze({__proto__:null,prelude:On,background:Zn,backgroundPattern:Aa,circle:Ma,clippingMask:Sn,heatmap:Qn,heatmapTexture:Kn,collisionBox:Da,collisionCircle:di,debug:Di,fill:fo,fillOutline:Wa,fillOutlinePattern:Za,fillPattern:Ki,fillExtrusion:Na,fillExtrusionPattern:ho,hillshadePrepare:vo,hillshade:wi,line:$i,lineGradient:yo,linePattern:So,lineSDF:Bi,raster:mi,symbolIcon:Zi,symbolSDF:Ms,symbolTextAndIcon:Cs}),as=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};as.prototype.bind=function(C,R,F,q,ae,ue,xe,ke){this.context=C;for(var Le=this.boundPaintVertexBuffers.length!==q.length,Ve=0;!Le&&Ve<q.length;Ve++)this.boundPaintVertexBuffers[Ve]!==q[Ve]&&(Le=!0);var Je=!this.vao||this.boundProgram!==R||this.boundLayoutVertexBuffer!==F||Le||this.boundIndexBuffer!==ae||this.boundVertexOffset!==ue||this.boundDynamicVertexBuffer!==xe||this.boundDynamicVertexBuffer2!==ke;!C.extVertexArrayObject||Je?this.freshBind(R,F,q,ae,ue,xe,ke):(C.bindVertexArrayOES.set(this.vao),xe&&xe.bind(),ae&&ae.dynamicDraw&&ae.bind(),ke&&ke.bind())},as.prototype.freshBind=function(C,R,F,q,ae,ue,xe){var ke,Le=C.numAttributes,Ve=this.context,Je=Ve.gl;if(Ve.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ve.extVertexArrayObject.createVertexArrayOES(),Ve.bindVertexArrayOES.set(this.vao),ke=0,this.boundProgram=C,this.boundLayoutVertexBuffer=R,this.boundPaintVertexBuffers=F,this.boundIndexBuffer=q,this.boundVertexOffset=ae,this.boundDynamicVertexBuffer=ue,this.boundDynamicVertexBuffer2=xe;else{ke=Ve.currentNumAttributes||0;for(var at=Le;at<ke;at++)Je.disableVertexAttribArray(at)}R.enableAttributes(Je,C);for(var _t=0,Et=F;_t<Et.length;_t+=1)Et[_t].enableAttributes(Je,C);ue&&ue.enableAttributes(Je,C),xe&&xe.enableAttributes(Je,C),R.bind(),R.setVertexAttribPointers(Je,C,ae);for(var kt=0,At=F;kt<At.length;kt+=1){var xt=At[kt];xt.bind(),xt.setVertexAttribPointers(Je,C,ae)}ue&&(ue.bind(),ue.setVertexAttribPointers(Je,C,ae)),q&&q.bind(),xe&&(xe.bind(),xe.setVertexAttribPointers(Je,C,ae)),Ve.currentNumAttributes=Le},as.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Ps=function(C,R,F,q,ae){var ue=C.gl;this.program=ue.createProgram();var xe=F?F.defines():[];ae&&xe.push("#define OVERDRAW_INSPECTOR;");var ke=xe.concat(On.fragmentSource,R.fragmentSource).join(`
`),Le=xe.concat(On.vertexSource,R.vertexSource).join(`
`),Ve=ue.createShader(ue.FRAGMENT_SHADER);if(ue.isContextLost())this.failedToCreate=!0;else{ue.shaderSource(Ve,ke),ue.compileShader(Ve),ue.attachShader(this.program,Ve);var Je=ue.createShader(ue.VERTEX_SHADER);if(ue.isContextLost())this.failedToCreate=!0;else{ue.shaderSource(Je,Le),ue.compileShader(Je),ue.attachShader(this.program,Je);for(var at=F?F.layoutAttributes:[],_t=0;_t<at.length;_t++)ue.bindAttribLocation(this.program,_t,at[_t].name);ue.linkProgram(this.program),ue.deleteShader(Je),ue.deleteShader(Ve),this.numAttributes=ue.getProgramParameter(this.program,ue.ACTIVE_ATTRIBUTES),this.attributes={};for(var Et={},kt=0;kt<this.numAttributes;kt++){var At=ue.getActiveAttrib(this.program,kt);At&&(this.attributes[At.name]=ue.getAttribLocation(this.program,At.name))}for(var xt=ue.getProgramParameter(this.program,ue.ACTIVE_UNIFORMS),zt=0;zt<xt;zt++){var Ot=ue.getActiveUniform(this.program,zt);Ot&&(Et[Ot.name]=ue.getUniformLocation(this.program,Ot.name))}this.fixedUniforms=q(C,Et),this.binderUniforms=F?F.getUniforms(C,Et):[]}}};function Is(C,R,F){var q=1/yn(F,1,R.transform.tileZoom),ae=Math.pow(2,F.tileID.overscaledZ),ue=F.tileSize*Math.pow(2,R.transform.tileZoom)/ae,xe=ue*(F.tileID.canonical.x+F.tileID.wrap*ae),ke=ue*F.tileID.canonical.y;return{u_image:0,u_texsize:F.imageAtlasTexture.size,u_scale:[q,C.fromScale,C.toScale],u_fade:C.t,u_pixel_coord_upper:[xe>>16,ke>>16],u_pixel_coord_lower:[65535&xe,65535&ke]}}Ps.prototype.draw=function(C,R,F,q,ae,ue,xe,ke,Le,Ve,Je,at,_t,Et,kt,At){var xt,zt=C.gl;if(!this.failedToCreate){for(var Ot in C.program.set(this.program),C.setDepthMode(F),C.setStencilMode(q),C.setColorMode(ae),C.setCullFace(ue),this.fixedUniforms)this.fixedUniforms[Ot].set(xe[Ot]);Et&&Et.setUniforms(C,this.binderUniforms,at,{zoom:_t});for(var jt=(xt={},xt[zt.LINES]=2,xt[zt.TRIANGLES]=3,xt[zt.LINE_STRIP]=1,xt)[R],rr=0,dr=Je.get();rr<dr.length;rr+=1){var Sr=dr[rr],kr=Sr.vaos||(Sr.vaos={});(kr[ke]||(kr[ke]=new as)).bind(C,this,Le,Et?Et.getPaintVertexBuffers():[],Ve,Sr.vertexOffset,kt,At),zt.drawElements(R,Sr.primitiveLength*jt,zt.UNSIGNED_SHORT,Sr.primitiveOffset*jt*2)}}};var As=function(C,R,F,q){var ae=R.style.light,ue=ae.properties.get("position"),xe=[ue.x,ue.y,ue.z],ke=e.create$1();ae.properties.get("anchor")==="viewport"&&e.fromRotation(ke,-R.transform.angle),e.transformMat3(xe,xe,ke);var Le=ae.properties.get("color");return{u_matrix:C,u_lightpos:xe,u_lightintensity:ae.properties.get("intensity"),u_lightcolor:[Le.r,Le.g,Le.b],u_vertical_gradient:+F,u_opacity:q}},Os=function(C,R,F,q,ae,ue,xe){return e.extend(As(C,R,F,q),Is(ue,R,xe),{u_height_factor:-Math.pow(2,ae.overscaledZ)/xe.tileSize/8})},Co=function(C){return{u_matrix:C}},Po=function(C,R,F,q){return e.extend(Co(C),Is(F,R,q))},qo=function(C,R){return{u_matrix:C,u_world:R}},Go=function(C,R,F,q,ae){return e.extend(Po(C,R,F,q),{u_world:ae})},Yo=function(C,R,F,q){var ae,ue,xe=C.transform;if(q.paint.get("circle-pitch-alignment")==="map"){var ke=yn(F,1,xe.zoom);ae=!0,ue=[ke,ke]}else ae=!1,ue=xe.pixelsToGLUnits;return{u_camera_to_center_distance:xe.cameraToCenterDistance,u_scale_with_map:+(q.paint.get("circle-pitch-scale")==="map"),u_matrix:C.translatePosMatrix(R.posMatrix,F,q.paint.get("circle-translate"),q.paint.get("circle-translate-anchor")),u_pitch_with_map:+ae,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:ue}},is=function(C,R,F){var q=yn(F,1,R.zoom),ae=Math.pow(2,R.zoom-F.tileID.overscaledZ),ue=F.tileID.overscaleFactor();return{u_matrix:C,u_camera_to_center_distance:R.cameraToCenterDistance,u_pixels_to_tile_units:q,u_extrude_scale:[R.pixelsToGLUnits[0]/(q*ae),R.pixelsToGLUnits[1]/(q*ae)],u_overscale_factor:ue}},xo=function(C,R,F){return{u_matrix:C,u_inv_matrix:R,u_camera_to_center_distance:F.cameraToCenterDistance,u_viewport_size:[F.width,F.height]}},xs=function(C,R,F){return F===void 0&&(F=1),{u_matrix:C,u_color:R,u_overlay:0,u_overlay_scale:F}},po=function(C){return{u_matrix:C}},Wo=function(C,R,F,q){return{u_matrix:C,u_extrude_scale:yn(R,1,F),u_intensity:q}};function bs(C,R){var F=Math.pow(2,R.canonical.z),q=R.canonical.y;return[new e.MercatorCoordinate(0,q/F).toLngLat().lat,new e.MercatorCoordinate(0,(q+1)/F).toLngLat().lat]}var Io=function(C,R,F){var q=C.transform;return{u_matrix:lt(C,R,F),u_ratio:1/yn(R,1,q.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/q.pixelsToGLUnits[0],1/q.pixelsToGLUnits[1]]}},Ga=function(C,R,F){return e.extend(Io(C,R,F),{u_image:0})},je=function(C,R,F,q){var ae=C.transform,ue=et(R,ae);return{u_matrix:lt(C,R,F),u_texsize:R.imageAtlasTexture.size,u_ratio:1/yn(R,1,ae.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[ue,q.fromScale,q.toScale],u_fade:q.t,u_units_to_pixels:[1/ae.pixelsToGLUnits[0],1/ae.pixelsToGLUnits[1]]}},Ye=function(C,R,F,q,ae){var ue=C.transform,xe=C.lineAtlas,ke=et(R,ue),Le=F.layout.get("line-cap")==="round",Ve=xe.getDash(q.from,Le),Je=xe.getDash(q.to,Le),at=Ve.width*ae.fromScale,_t=Je.width*ae.toScale;return e.extend(Io(C,R,F),{u_patternscale_a:[ke/at,-Ve.height/2],u_patternscale_b:[ke/_t,-Je.height/2],u_sdfgamma:xe.width/(256*Math.min(at,_t)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Ve.y,u_tex_y_b:Je.y,u_mix:ae.t})};function et(C,R){return 1/yn(C,1,R.tileZoom)}function lt(C,R,F){return C.translatePosMatrix(R.tileID.posMatrix,R,F.paint.get("line-translate"),F.paint.get("line-translate-anchor"))}var gt=function(C,R,F,q,ae){return{u_matrix:C,u_tl_parent:R,u_scale_parent:F,u_buffer_scale:1,u_fade_t:q.mix,u_opacity:q.opacity*ae.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ae.paint.get("raster-brightness-min"),u_brightness_high:ae.paint.get("raster-brightness-max"),u_saturation_factor:(xe=ae.paint.get("raster-saturation"),xe>0?1-1/(1.001-xe):-xe),u_contrast_factor:(ue=ae.paint.get("raster-contrast"),ue>0?1/(1-ue):1+ue),u_spin_weights:pt(ae.paint.get("raster-hue-rotate"))};var ue,xe};function pt(C){C*=Math.PI/180;var R=Math.sin(C),F=Math.cos(C);return[(2*F+1)/3,(-Math.sqrt(3)*R-F+1)/3,(Math.sqrt(3)*R-F+1)/3]}var St,Jt=function(C,R,F,q,ae,ue,xe,ke,Le,Ve){var Je=ae.transform;return{u_is_size_zoom_constant:+(C==="constant"||C==="source"),u_is_size_feature_constant:+(C==="constant"||C==="camera"),u_size_t:R?R.uSizeT:0,u_size:R?R.uSize:0,u_camera_to_center_distance:Je.cameraToCenterDistance,u_pitch:Je.pitch/360*2*Math.PI,u_rotate_symbol:+F,u_aspect_ratio:Je.width/Je.height,u_fade_change:ae.options.fadeDuration?ae.symbolFadeChange:1,u_matrix:ue,u_label_plane_matrix:xe,u_coord_matrix:ke,u_is_text:+Le,u_pitch_with_map:+q,u_texsize:Ve,u_texture:0}},$t=function(C,R,F,q,ae,ue,xe,ke,Le,Ve,Je){var at=ae.transform;return e.extend(Jt(C,R,F,q,ae,ue,xe,ke,Le,Ve),{u_gamma_scale:q?Math.cos(at._pitch)*at.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+Je})},Yt=function(C,R,F,q,ae,ue,xe,ke,Le,Ve){return e.extend($t(C,R,F,q,ae,ue,xe,ke,!0,Le,!0),{u_texsize_icon:Ve,u_texture_icon:1})},ar=function(C,R,F){return{u_matrix:C,u_opacity:R,u_color:F}},pr=function(C,R,F,q,ae,ue){return e.extend(function(xe,ke,Le,Ve){var Je=Le.imageManager.getPattern(xe.from.toString()),at=Le.imageManager.getPattern(xe.to.toString()),_t=Le.imageManager.getPixelSize(),Et=_t.width,kt=_t.height,At=Math.pow(2,Ve.tileID.overscaledZ),xt=Ve.tileSize*Math.pow(2,Le.transform.tileZoom)/At,zt=xt*(Ve.tileID.canonical.x+Ve.tileID.wrap*At),Ot=xt*Ve.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Je.tl,u_pattern_br_a:Je.br,u_pattern_tl_b:at.tl,u_pattern_br_b:at.br,u_texsize:[Et,kt],u_mix:ke.t,u_pattern_size_a:Je.displaySize,u_pattern_size_b:at.displaySize,u_scale_a:ke.fromScale,u_scale_b:ke.toScale,u_tile_units_to_pixels:1/yn(Ve,1,Le.transform.tileZoom),u_pixel_coord_upper:[zt>>16,Ot>>16],u_pixel_coord_lower:[65535&zt,65535&Ot]}}(q,ue,F,ae),{u_matrix:C,u_opacity:R})},br={fillExtrusion:function(C,R){return{u_matrix:new e.UniformMatrix4f(C,R.u_matrix),u_lightpos:new e.Uniform3f(C,R.u_lightpos),u_lightintensity:new e.Uniform1f(C,R.u_lightintensity),u_lightcolor:new e.Uniform3f(C,R.u_lightcolor),u_vertical_gradient:new e.Uniform1f(C,R.u_vertical_gradient),u_opacity:new e.Uniform1f(C,R.u_opacity)}},fillExtrusionPattern:function(C,R){return{u_matrix:new e.UniformMatrix4f(C,R.u_matrix),u_lightpos:new e.Uniform3f(C,R.u_lightpos),u_lightintensity:new e.Uniform1f(C,R.u_lightintensity),u_lightcolor:new e.Uniform3f(C,R.u_lightcolor),u_vertical_gradient:new e.Uniform1f(C,R.u_vertical_gradient),u_height_factor:new e.Uniform1f(C,R.u_height_factor),u_image:new e.Uniform1i(C,R.u_image),u_texsize:new e.Uniform2f(C,R.u_texsize),u_pixel_coord_upper:new e.Uniform2f(C,R.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(C,R.u_pixel_coord_lower),u_scale:new e.Uniform3f(C,R.u_scale),u_fade:new e.Uniform1f(C,R.u_fade),u_opacity:new e.Uniform1f(C,R.u_opacity)}},fill:function(C,R){return{u_matrix:new e.UniformMatrix4f(C,R.u_matrix)}},fillPattern:function(C,R){return{u_matrix:new e.UniformMatrix4f(C,R.u_matrix),u_image:new e.Uniform1i(C,R.u_image),u_texsize:new e.Uniform2f(C,R.u_texsize),u_pixel_coord_upper:new e.Uniform2f(C,R.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(C,R.u_pixel_coord_lower),u_scale:new e.Uniform3f(C,R.u_scale),u_fade:new e.Uniform1f(C,R.u_fade)}},fillOutline:function(C,R){return{u_matrix:new e.UniformMatrix4f(C,R.u_matrix),u_world:new e.Uniform2f(C,R.u_world)}},fillOutlinePattern:function(C,R){return{u_matrix:new e.UniformMatrix4f(C,R.u_matrix),u_world:new e.Uniform2f(C,R.u_world),u_image:new e.Uniform1i(C,R.u_image),u_texsize:new e.Uniform2f(C,R.u_texsize),u_pixel_coord_upper:new e.Uniform2f(C,R.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(C,R.u_pixel_coord_lower),u_scale:new e.Uniform3f(C,R.u_scale),u_fade:new e.Uniform1f(C,R.u_fade)}},circle:function(C,R){return{u_camera_to_center_distance:new e.Uniform1f(C,R.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(C,R.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(C,R.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(C,R.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(C,R.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(C,R.u_matrix)}},collisionBox:function(C,R){return{u_matrix:new e.UniformMatrix4f(C,R.u_matrix),u_camera_to_center_distance:new e.Uniform1f(C,R.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(C,R.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(C,R.u_extrude_scale),u_overscale_factor:new e.Uniform1f(C,R.u_overscale_factor)}},collisionCircle:function(C,R){return{u_matrix:new e.UniformMatrix4f(C,R.u_matrix),u_inv_matrix:new e.UniformMatrix4f(C,R.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(C,R.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(C,R.u_viewport_size)}},debug:function(C,R){return{u_color:new e.UniformColor(C,R.u_color),u_matrix:new e.UniformMatrix4f(C,R.u_matrix),u_overlay:new e.Uniform1i(C,R.u_overlay),u_overlay_scale:new e.Uniform1f(C,R.u_overlay_scale)}},clippingMask:function(C,R){return{u_matrix:new e.UniformMatrix4f(C,R.u_matrix)}},heatmap:function(C,R){return{u_extrude_scale:new e.Uniform1f(C,R.u_extrude_scale),u_intensity:new e.Uniform1f(C,R.u_intensity),u_matrix:new e.UniformMatrix4f(C,R.u_matrix)}},heatmapTexture:function(C,R){return{u_matrix:new e.UniformMatrix4f(C,R.u_matrix),u_world:new e.Uniform2f(C,R.u_world),u_image:new e.Uniform1i(C,R.u_image),u_color_ramp:new e.Uniform1i(C,R.u_color_ramp),u_opacity:new e.Uniform1f(C,R.u_opacity)}},hillshade:function(C,R){return{u_matrix:new e.UniformMatrix4f(C,R.u_matrix),u_image:new e.Uniform1i(C,R.u_image),u_latrange:new e.Uniform2f(C,R.u_latrange),u_light:new e.Uniform2f(C,R.u_light),u_shadow:new e.UniformColor(C,R.u_shadow),u_highlight:new e.UniformColor(C,R.u_highlight),u_accent:new e.UniformColor(C,R.u_accent)}},hillshadePrepare:function(C,R){return{u_matrix:new e.UniformMatrix4f(C,R.u_matrix),u_image:new e.Uniform1i(C,R.u_image),u_dimension:new e.Uniform2f(C,R.u_dimension),u_zoom:new e.Uniform1f(C,R.u_zoom),u_maxzoom:new e.Uniform1f(C,R.u_maxzoom),u_unpack:new e.Uniform4f(C,R.u_unpack)}},line:function(C,R){return{u_matrix:new e.UniformMatrix4f(C,R.u_matrix),u_ratio:new e.Uniform1f(C,R.u_ratio),u_device_pixel_ratio:new e.Uniform1f(C,R.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(C,R.u_units_to_pixels)}},lineGradient:function(C,R){return{u_matrix:new e.UniformMatrix4f(C,R.u_matrix),u_ratio:new e.Uniform1f(C,R.u_ratio),u_device_pixel_ratio:new e.Uniform1f(C,R.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(C,R.u_units_to_pixels),u_image:new e.Uniform1i(C,R.u_image)}},linePattern:function(C,R){return{u_matrix:new e.UniformMatrix4f(C,R.u_matrix),u_texsize:new e.Uniform2f(C,R.u_texsize),u_ratio:new e.Uniform1f(C,R.u_ratio),u_device_pixel_ratio:new e.Uniform1f(C,R.u_device_pixel_ratio),u_image:new e.Uniform1i(C,R.u_image),u_units_to_pixels:new e.Uniform2f(C,R.u_units_to_pixels),u_scale:new e.Uniform3f(C,R.u_scale),u_fade:new e.Uniform1f(C,R.u_fade)}},lineSDF:function(C,R){return{u_matrix:new e.UniformMatrix4f(C,R.u_matrix),u_ratio:new e.Uniform1f(C,R.u_ratio),u_device_pixel_ratio:new e.Uniform1f(C,R.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(C,R.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(C,R.u_patternscale_a),u_patternscale_b:new e.Uniform2f(C,R.u_patternscale_b),u_sdfgamma:new e.Uniform1f(C,R.u_sdfgamma),u_image:new e.Uniform1i(C,R.u_image),u_tex_y_a:new e.Uniform1f(C,R.u_tex_y_a),u_tex_y_b:new e.Uniform1f(C,R.u_tex_y_b),u_mix:new e.Uniform1f(C,R.u_mix)}},raster:function(C,R){return{u_matrix:new e.UniformMatrix4f(C,R.u_matrix),u_tl_parent:new e.Uniform2f(C,R.u_tl_parent),u_scale_parent:new e.Uniform1f(C,R.u_scale_parent),u_buffer_scale:new e.Uniform1f(C,R.u_buffer_scale),u_fade_t:new e.Uniform1f(C,R.u_fade_t),u_opacity:new e.Uniform1f(C,R.u_opacity),u_image0:new e.Uniform1i(C,R.u_image0),u_image1:new e.Uniform1i(C,R.u_image1),u_brightness_low:new e.Uniform1f(C,R.u_brightness_low),u_brightness_high:new e.Uniform1f(C,R.u_brightness_high),u_saturation_factor:new e.Uniform1f(C,R.u_saturation_factor),u_contrast_factor:new e.Uniform1f(C,R.u_contrast_factor),u_spin_weights:new e.Uniform3f(C,R.u_spin_weights)}},symbolIcon:function(C,R){return{u_is_size_zoom_constant:new e.Uniform1i(C,R.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(C,R.u_is_size_feature_constant),u_size_t:new e.Uniform1f(C,R.u_size_t),u_size:new e.Uniform1f(C,R.u_size),u_camera_to_center_distance:new e.Uniform1f(C,R.u_camera_to_center_distance),u_pitch:new e.Uniform1f(C,R.u_pitch),u_rotate_symbol:new e.Uniform1i(C,R.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(C,R.u_aspect_ratio),u_fade_change:new e.Uniform1f(C,R.u_fade_change),u_matrix:new e.UniformMatrix4f(C,R.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(C,R.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(C,R.u_coord_matrix),u_is_text:new e.Uniform1i(C,R.u_is_text),u_pitch_with_map:new e.Uniform1i(C,R.u_pitch_with_map),u_texsize:new e.Uniform2f(C,R.u_texsize),u_texture:new e.Uniform1i(C,R.u_texture)}},symbolSDF:function(C,R){return{u_is_size_zoom_constant:new e.Uniform1i(C,R.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(C,R.u_is_size_feature_constant),u_size_t:new e.Uniform1f(C,R.u_size_t),u_size:new e.Uniform1f(C,R.u_size),u_camera_to_center_distance:new e.Uniform1f(C,R.u_camera_to_center_distance),u_pitch:new e.Uniform1f(C,R.u_pitch),u_rotate_symbol:new e.Uniform1i(C,R.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(C,R.u_aspect_ratio),u_fade_change:new e.Uniform1f(C,R.u_fade_change),u_matrix:new e.UniformMatrix4f(C,R.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(C,R.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(C,R.u_coord_matrix),u_is_text:new e.Uniform1i(C,R.u_is_text),u_pitch_with_map:new e.Uniform1i(C,R.u_pitch_with_map),u_texsize:new e.Uniform2f(C,R.u_texsize),u_texture:new e.Uniform1i(C,R.u_texture),u_gamma_scale:new e.Uniform1f(C,R.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(C,R.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(C,R.u_is_halo)}},symbolTextAndIcon:function(C,R){return{u_is_size_zoom_constant:new e.Uniform1i(C,R.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(C,R.u_is_size_feature_constant),u_size_t:new e.Uniform1f(C,R.u_size_t),u_size:new e.Uniform1f(C,R.u_size),u_camera_to_center_distance:new e.Uniform1f(C,R.u_camera_to_center_distance),u_pitch:new e.Uniform1f(C,R.u_pitch),u_rotate_symbol:new e.Uniform1i(C,R.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(C,R.u_aspect_ratio),u_fade_change:new e.Uniform1f(C,R.u_fade_change),u_matrix:new e.UniformMatrix4f(C,R.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(C,R.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(C,R.u_coord_matrix),u_is_text:new e.Uniform1i(C,R.u_is_text),u_pitch_with_map:new e.Uniform1i(C,R.u_pitch_with_map),u_texsize:new e.Uniform2f(C,R.u_texsize),u_texsize_icon:new e.Uniform2f(C,R.u_texsize_icon),u_texture:new e.Uniform1i(C,R.u_texture),u_texture_icon:new e.Uniform1i(C,R.u_texture_icon),u_gamma_scale:new e.Uniform1f(C,R.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(C,R.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(C,R.u_is_halo)}},background:function(C,R){return{u_matrix:new e.UniformMatrix4f(C,R.u_matrix),u_opacity:new e.Uniform1f(C,R.u_opacity),u_color:new e.UniformColor(C,R.u_color)}},backgroundPattern:function(C,R){return{u_matrix:new e.UniformMatrix4f(C,R.u_matrix),u_opacity:new e.Uniform1f(C,R.u_opacity),u_image:new e.Uniform1i(C,R.u_image),u_pattern_tl_a:new e.Uniform2f(C,R.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(C,R.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(C,R.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(C,R.u_pattern_br_b),u_texsize:new e.Uniform2f(C,R.u_texsize),u_mix:new e.Uniform1f(C,R.u_mix),u_pattern_size_a:new e.Uniform2f(C,R.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(C,R.u_pattern_size_b),u_scale_a:new e.Uniform1f(C,R.u_scale_a),u_scale_b:new e.Uniform1f(C,R.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(C,R.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(C,R.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(C,R.u_tile_units_to_pixels)}}};function _r(C,R,F,q,ae,ue,xe){for(var ke=C.context,Le=ke.gl,Ve=C.useProgram("collisionBox"),Je=[],at=0,_t=0,Et=0;Et<q.length;Et++){var kt=q[Et],At=R.getTile(kt),xt=At.getBucket(F);if(xt){var zt=kt.posMatrix;ae[0]===0&&ae[1]===0||(zt=C.translatePosMatrix(kt.posMatrix,At,ae,ue));var Ot=xe?xt.textCollisionBox:xt.iconCollisionBox,jt=xt.collisionCircleArray;if(jt.length>0){var rr=e.create(),dr=zt;e.mul(rr,xt.placementInvProjMatrix,C.transform.glCoordMatrix),e.mul(rr,rr,xt.placementViewportMatrix),Je.push({circleArray:jt,circleOffset:_t,transform:dr,invTransform:rr}),_t=at+=jt.length/4}Ot&&Ve.draw(ke,Le.LINES,It.disabled,Be.disabled,C.colorModeForRenderPass(),he.disabled,is(zt,C.transform,At),F.id,Ot.layoutVertexBuffer,Ot.indexBuffer,Ot.segments,null,C.transform.zoom,null,null,Ot.collisionVertexBuffer)}}if(xe&&Je.length){var Sr=C.useProgram("collisionCircle"),kr=new e.StructArrayLayout2f1f2i16;kr.resize(4*at),kr._trim();for(var Kr=0,Jr=0,pn=Je;Jr<pn.length;Jr+=1)for(var sn=pn[Jr],Un=0;Un<sn.circleArray.length/4;Un++){var Xn=4*Un,ha=sn.circleArray[Xn+0],Gr=sn.circleArray[Xn+1],An=sn.circleArray[Xn+2],Jn=sn.circleArray[Xn+3];kr.emplace(Kr++,ha,Gr,An,Jn,0),kr.emplace(Kr++,ha,Gr,An,Jn,1),kr.emplace(Kr++,ha,Gr,An,Jn,2),kr.emplace(Kr++,ha,Gr,An,Jn,3)}(!St||St.length<2*at)&&(St=function(ya){var Ia=2*ya,wa=new e.StructArrayLayout3ui6;wa.resize(Ia),wa._trim();for(var Oa=0;Oa<Ia;Oa++){var Ha=6*Oa;wa.uint16[Ha+0]=4*Oa+0,wa.uint16[Ha+1]=4*Oa+1,wa.uint16[Ha+2]=4*Oa+2,wa.uint16[Ha+3]=4*Oa+2,wa.uint16[Ha+4]=4*Oa+3,wa.uint16[Ha+5]=4*Oa+0}return wa}(at));for(var Yn=ke.createIndexBuffer(St,!0),ia=ke.createVertexBuffer(kr,e.collisionCircleLayout.members,!0),da=0,La=Je;da<La.length;da+=1){var ea=La[da],_a=xo(ea.transform,ea.invTransform,C.transform);Sr.draw(ke,Le.TRIANGLES,It.disabled,Be.disabled,C.colorModeForRenderPass(),he.disabled,_a,F.id,ia,Yn,e.SegmentVector.simpleSegment(0,2*ea.circleOffset,ea.circleArray.length,ea.circleArray.length/2),null,C.transform.zoom,null,null,null)}ia.destroy(),Yn.destroy()}}var Dr=e.identity(new Float32Array(16));function an(C,R,F,q,ae,ue){var xe=e.getAnchorAlignment(C),ke=-(xe.horizontalAlign-.5)*R,Le=-(xe.verticalAlign-.5)*F,Ve=e.evaluateVariableOffset(C,q);return new e.Point((ke/ae+Ve[0])*ue,(Le/ae+Ve[1])*ue)}function dn(C,R,F,q,ae,ue,xe,ke,Le,Ve,Je){var at=C.text.placedSymbolArray,_t=C.text.dynamicLayoutVertexArray,Et=C.icon.dynamicLayoutVertexArray,kt={};_t.clear();for(var At=0;At<at.length;At++){var xt=at.get(At),zt=C.allowVerticalPlacement&&!xt.placedOrientation,Ot=xt.hidden||!xt.crossTileID||zt?null:q[xt.crossTileID];if(Ot){var jt=new e.Point(xt.anchorX,xt.anchorY),rr=Kt(jt,F?ke:xe),dr=Qt(ue.cameraToCenterDistance,rr.signedDistanceFromCamera),Sr=ae.evaluateSizeForFeature(C.textSizeData,Ve,xt)*dr/e.ONE_EM;F&&(Sr*=C.tilePixelRatio/Le);for(var kr=Ot.width,Kr=Ot.height,Jr=an(Ot.anchor,kr,Kr,Ot.textOffset,Ot.textBoxScale,Sr),pn=F?Kt(jt.add(Jr),xe).point:rr.point.add(R?Jr.rotate(-ue.angle):Jr),sn=C.allowVerticalPlacement&&xt.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,Un=0;Un<xt.numGlyphs;Un++)e.addDynamicAttributes(_t,pn,sn);Je&&xt.associatedIconIndex>=0&&(kt[xt.associatedIconIndex]={shiftedAnchor:pn,angle:sn})}else en(xt.numGlyphs,_t)}if(Je){Et.clear();for(var Xn=C.icon.placedSymbolArray,ha=0;ha<Xn.length;ha++){var Gr=Xn.get(ha);if(Gr.hidden)en(Gr.numGlyphs,Et);else{var An=kt[ha];if(An)for(var Jn=0;Jn<Gr.numGlyphs;Jn++)e.addDynamicAttributes(Et,An.shiftedAnchor,An.angle);else en(Gr.numGlyphs,Et)}}C.icon.dynamicLayoutVertexBuffer.updateData(Et)}C.text.dynamicLayoutVertexBuffer.updateData(_t)}function Pn(C,R,F){return F.iconsInText&&R?"symbolTextAndIcon":C?"symbolSDF":"symbolIcon"}function Dn(C,R,F,q,ae,ue,xe,ke,Le,Ve,Je,at){for(var _t=C.context,Et=_t.gl,kt=C.transform,At=ke==="map",xt=Le==="map",zt=At&&F.layout.get("symbol-placement")!=="point",Ot=At&&!xt&&!zt,jt=F.layout.get("symbol-sort-key").constantOr(1)!==void 0,rr=C.depthModeForSublayer(0,It.ReadOnly),dr=F.layout.get("text-variable-anchor"),Sr=[],kr=0,Kr=q;kr<Kr.length;kr+=1){var Jr=Kr[kr],pn=R.getTile(Jr),sn=pn.getBucket(F);if(sn){var Un=ae?sn.text:sn.icon;if(Un&&Un.segments.get().length){var Xn=Un.programConfigurations.get(F.id),ha=ae||sn.sdfIcons,Gr=ae?sn.textSizeData:sn.iconSizeData,An=xt||kt.pitch!==0,Jn=C.useProgram(Pn(ha,ae,sn),Xn),Yn=e.evaluateSizeForZoom(Gr,kt.zoom),ia=void 0,da=[0,0],La=void 0,ea=void 0,_a=null,ya=void 0;if(ae){if(La=pn.glyphAtlasTexture,ea=Et.LINEAR,ia=pn.glyphAtlasTexture.size,sn.iconsInText){da=pn.imageAtlasTexture.size,_a=pn.imageAtlasTexture;var Ia=Gr.kind==="composite"||Gr.kind==="camera";ya=An||C.options.rotating||C.options.zooming||Ia?Et.LINEAR:Et.NEAREST}}else{var wa=F.layout.get("icon-size").constantOr(0)!==1||sn.iconsNeedLinear;La=pn.imageAtlasTexture,ea=ha||C.options.rotating||C.options.zooming||wa||An?Et.LINEAR:Et.NEAREST,ia=pn.imageAtlasTexture.size}var Oa=yn(pn,1,C.transform.zoom),Ha=Tr(Jr.posMatrix,xt,At,C.transform,Oa),fi=ur(Jr.posMatrix,xt,At,C.transform,Oa),Ii=dr&&sn.hasTextData(),Oi=F.layout.get("icon-text-fit")!=="none"&&Ii&&sn.hasIconData();zt&&cr(sn,Jr.posMatrix,C,ae,Ha,fi,xt,Ve);var ui=C.translatePosMatrix(Jr.posMatrix,pn,ue,xe),Mi=zt||ae&&dr||Oi?Dr:Ha,vi=C.translatePosMatrix(fi,pn,ue,xe,!0),wo=ha&&F.paint.get(ae?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Yi={program:Jn,buffers:Un,uniformValues:ha?sn.iconsInText?Yt(Gr.kind,Yn,Ot,xt,C,ui,Mi,vi,ia,da):$t(Gr.kind,Yn,Ot,xt,C,ui,Mi,vi,ae,ia,!0):Jt(Gr.kind,Yn,Ot,xt,C,ui,Mi,vi,ae,ia),atlasTexture:La,atlasTextureIcon:_a,atlasInterpolation:ea,atlasInterpolationIcon:ya,isSDF:ha,hasHalo:wo};if(jt)for(var Bo=0,Es=Un.segments.get();Bo<Es.length;Bo+=1){var Js=Es[Bo];Sr.push({segments:new e.SegmentVector([Js]),sortKey:Js.sortKey,state:Yi})}else Sr.push({segments:Un.segments,sortKey:0,state:Yi})}}}jt&&Sr.sort(function(Ml,cs){return Ml.sortKey-cs.sortKey});for(var kl=0,hl=Sr;kl<hl.length;kl+=1){var pl=hl[kl],To=pl.state;if(_t.activeTexture.set(Et.TEXTURE0),To.atlasTexture.bind(To.atlasInterpolation,Et.CLAMP_TO_EDGE),To.atlasTextureIcon&&(_t.activeTexture.set(Et.TEXTURE1),To.atlasTextureIcon&&To.atlasTextureIcon.bind(To.atlasInterpolationIcon,Et.CLAMP_TO_EDGE)),To.isSDF){var rl=To.uniformValues;To.hasHalo&&(rl.u_is_halo=1,qn(To.buffers,pl.segments,F,C,To.program,rr,Je,at,rl)),rl.u_is_halo=0}qn(To.buffers,pl.segments,F,C,To.program,rr,Je,at,To.uniformValues)}}function qn(C,R,F,q,ae,ue,xe,ke,Le){var Ve=q.context,Je=Ve.gl;ae.draw(Ve,Je.TRIANGLES,ue,xe,ke,he.disabled,Le,F.id,C.layoutVertexBuffer,C.indexBuffer,R,F.paint,q.transform.zoom,C.programConfigurations.get(F.id),C.dynamicLayoutVertexBuffer,C.opacityVertexBuffer)}function zn(C,R,F,q,ae,ue,xe){var ke,Le,Ve,Je,at,_t=C.context.gl,Et=F.paint.get("fill-pattern"),kt=Et&&Et.constantOr(1),At=F.getCrossfadeParameters();xe?(Le=kt&&!F.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ke=_t.LINES):(Le=kt?"fillPattern":"fill",ke=_t.TRIANGLES);for(var xt=0,zt=q;xt<zt.length;xt+=1){var Ot=zt[xt],jt=R.getTile(Ot);if(!kt||jt.patternsLoaded()){var rr=jt.getBucket(F);if(rr){var dr=rr.programConfigurations.get(F.id),Sr=C.useProgram(Le,dr);kt&&(C.context.activeTexture.set(_t.TEXTURE0),jt.imageAtlasTexture.bind(_t.LINEAR,_t.CLAMP_TO_EDGE),dr.updatePaintBuffers(At));var kr=Et.constantOr(null);if(kr&&jt.imageAtlas){var Kr=jt.imageAtlas,Jr=Kr.patternPositions[kr.to.toString()],pn=Kr.patternPositions[kr.from.toString()];Jr&&pn&&dr.setConstantPatternPositions(Jr,pn)}var sn=C.translatePosMatrix(Ot.posMatrix,jt,F.paint.get("fill-translate"),F.paint.get("fill-translate-anchor"));if(xe){Je=rr.indexBuffer2,at=rr.segments2;var Un=[_t.drawingBufferWidth,_t.drawingBufferHeight];Ve=Le==="fillOutlinePattern"&&kt?Go(sn,C,At,jt,Un):qo(sn,Un)}else Je=rr.indexBuffer,at=rr.segments,Ve=kt?Po(sn,C,At,jt):Co(sn);Sr.draw(C.context,ke,ae,C.stencilModeForClipping(Ot),ue,he.disabled,Ve,F.id,rr.layoutVertexBuffer,Je,at,F.paint,C.transform.zoom,dr)}}}}function va(C,R,F,q,ae,ue,xe){for(var ke=C.context,Le=ke.gl,Ve=F.paint.get("fill-extrusion-pattern"),Je=Ve.constantOr(1),at=F.getCrossfadeParameters(),_t=F.paint.get("fill-extrusion-opacity"),Et=0,kt=q;Et<kt.length;Et+=1){var At=kt[Et],xt=R.getTile(At),zt=xt.getBucket(F);if(zt){var Ot=zt.programConfigurations.get(F.id),jt=C.useProgram(Je?"fillExtrusionPattern":"fillExtrusion",Ot);Je&&(C.context.activeTexture.set(Le.TEXTURE0),xt.imageAtlasTexture.bind(Le.LINEAR,Le.CLAMP_TO_EDGE),Ot.updatePaintBuffers(at));var rr=Ve.constantOr(null);if(rr&&xt.imageAtlas){var dr=xt.imageAtlas,Sr=dr.patternPositions[rr.to.toString()],kr=dr.patternPositions[rr.from.toString()];Sr&&kr&&Ot.setConstantPatternPositions(Sr,kr)}var Kr=C.translatePosMatrix(At.posMatrix,xt,F.paint.get("fill-extrusion-translate"),F.paint.get("fill-extrusion-translate-anchor")),Jr=F.paint.get("fill-extrusion-vertical-gradient"),pn=Je?Os(Kr,C,Jr,_t,At,at,xt):As(Kr,C,Jr,_t);jt.draw(ke,ke.gl.TRIANGLES,ae,ue,xe,he.backCCW,pn,F.id,zt.layoutVertexBuffer,zt.indexBuffer,zt.segments,F.paint,C.transform.zoom,Ot)}}}function Sa(C,R,F,q,ae,ue){var xe=C.context,ke=xe.gl,Le=R.fbo;if(Le){var Ve=C.useProgram("hillshade");xe.activeTexture.set(ke.TEXTURE0),ke.bindTexture(ke.TEXTURE_2D,Le.colorAttachment.get());var Je=function(at,_t,Et){var kt=Et.paint.get("hillshade-shadow-color"),At=Et.paint.get("hillshade-highlight-color"),xt=Et.paint.get("hillshade-accent-color"),zt=Et.paint.get("hillshade-illumination-direction")*(Math.PI/180);Et.paint.get("hillshade-illumination-anchor")==="viewport"&&(zt-=at.transform.angle);var Ot=!at.options.moving;return{u_matrix:at.transform.calculatePosMatrix(_t.tileID.toUnwrapped(),Ot),u_image:0,u_latrange:bs(at,_t.tileID),u_light:[Et.paint.get("hillshade-exaggeration"),zt],u_shadow:kt,u_highlight:At,u_accent:xt}}(C,R,F);Ve.draw(xe,ke.TRIANGLES,q,ae,ue,he.disabled,Je,F.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments)}}function Ua(C,R,F,q,ae,ue,xe){var ke=C.context,Le=ke.gl,Ve=R.dem;if(Ve&&Ve.data){var Je=Ve.dim,at=Ve.stride,_t=Ve.getPixels();if(ke.activeTexture.set(Le.TEXTURE1),ke.pixelStoreUnpackPremultiplyAlpha.set(!1),R.demTexture=R.demTexture||C.getTileTexture(at),R.demTexture){var Et=R.demTexture;Et.update(_t,{premultiply:!1}),Et.bind(Le.NEAREST,Le.CLAMP_TO_EDGE)}else R.demTexture=new e.Texture(ke,_t,Le.RGBA,{premultiply:!1}),R.demTexture.bind(Le.NEAREST,Le.CLAMP_TO_EDGE);ke.activeTexture.set(Le.TEXTURE0);var kt=R.fbo;if(!kt){var At=new e.Texture(ke,{width:Je,height:Je,data:null},Le.RGBA);At.bind(Le.LINEAR,Le.CLAMP_TO_EDGE),(kt=R.fbo=ke.createFramebuffer(Je,Je,!0)).colorAttachment.set(At.texture)}ke.bindFramebuffer.set(kt.framebuffer),ke.viewport.set([0,0,Je,Je]),C.useProgram("hillshadePrepare").draw(ke,Le.TRIANGLES,ae,ue,xe,he.disabled,function(xt,zt,Ot){var jt=zt.stride,rr=e.create();return e.ortho(rr,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(rr,rr,[0,-e.EXTENT,0]),{u_matrix:rr,u_image:1,u_dimension:[jt,jt],u_zoom:xt.overscaledZ,u_maxzoom:Ot,u_unpack:zt.getUnpackVector()}}(R.tileID,Ve,q),F.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments),R.needsHillshadePrepare=!1}}function ja(C,R,F,q,ae){var ue=q.paint.get("raster-fade-duration");if(ue>0){var xe=e.browser.now(),ke=(xe-C.timeAdded)/ue,Le=R?(xe-R.timeAdded)/ue:-1,Ve=F.getSource(),Je=ae.coveringZoomLevel({tileSize:Ve.tileSize,roundZoom:Ve.roundZoom}),at=!R||Math.abs(R.tileID.overscaledZ-Je)>Math.abs(C.tileID.overscaledZ-Je),_t=at&&C.refreshedUponExpiration?1:e.clamp(at?ke:1-Le,0,1);return C.refreshedUponExpiration&&ke>=1&&(C.refreshedUponExpiration=!1),R?{opacity:1,mix:1-_t}:{opacity:_t,mix:0}}return{opacity:1,mix:0}}var Va=new e.Color(1,0,0,1),Ti=new e.Color(0,1,0,1),bi=new e.Color(0,0,1,1),si=new e.Color(1,0,1,1),li=new e.Color(0,1,1,1);function _i(C){var R=C.transform.padding;Ni(C,C.transform.height-(R.top||0),3,Va),Ni(C,R.bottom||0,3,Ti),Qi(C,R.left||0,3,bi),Qi(C,C.transform.width-(R.right||0),3,si);var F=C.transform.centerPoint;(function(q,ae,ue,xe){eo(q,ae-1,ue-10,2,20,xe),eo(q,ae-10,ue-1,20,2,xe)})(C,F.x,C.transform.height-F.y,li)}function Ni(C,R,F,q){eo(C,0,R+F/2,C.transform.width,F,q)}function Qi(C,R,F,q){eo(C,R-F/2,0,F,C.transform.height,q)}function eo(C,R,F,q,ae,ue){var xe=C.context,ke=xe.gl;ke.enable(ke.SCISSOR_TEST),ke.scissor(R*e.browser.devicePixelRatio,F*e.browser.devicePixelRatio,q*e.browser.devicePixelRatio,ae*e.browser.devicePixelRatio),xe.clear({color:ue}),ke.disable(ke.SCISSOR_TEST)}function to(C,R,F){var q=C.context,ae=q.gl,ue=F.posMatrix,xe=C.useProgram("debug"),ke=It.disabled,Le=Be.disabled,Ve=C.colorModeForRenderPass();q.activeTexture.set(ae.TEXTURE0),C.emptyTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),xe.draw(q,ae.LINE_STRIP,ke,Le,Ve,he.disabled,xs(ue,e.Color.red),"$debug",C.debugBuffer,C.tileBorderIndexBuffer,C.debugSegments);var Je=R.getTileByID(F.key).latestRawTileData,at=Je&&Je.byteLength||0,_t=Math.floor(at/1024),Et=R.getTile(F).tileSize,kt=512/Math.min(Et,512)*(F.overscaledZ/C.transform.zoom)*.5,At=F.canonical.toString();F.overscaledZ!==F.canonical.z&&(At+=" => "+F.overscaledZ),function(xt,zt){xt.initDebugOverlayCanvas();var Ot=xt.debugOverlayCanvas,jt=xt.context.gl,rr=xt.debugOverlayCanvas.getContext("2d");rr.clearRect(0,0,Ot.width,Ot.height),rr.shadowColor="white",rr.shadowBlur=2,rr.lineWidth=1.5,rr.strokeStyle="white",rr.textBaseline="top",rr.font="bold 36px Open Sans, sans-serif",rr.fillText(zt,5,5),rr.strokeText(zt,5,5),xt.debugOverlayTexture.update(Ot),xt.debugOverlayTexture.bind(jt.LINEAR,jt.CLAMP_TO_EDGE)}(C,At+" "+_t+"kb"),xe.draw(q,ae.TRIANGLES,ke,Le,He.alphaBlended,he.disabled,xs(ue,e.Color.transparent,kt),"$debug",C.debugBuffer,C.quadTriangleIndexBuffer,C.debugSegments)}var ro={symbol:function(C,R,F,q,ae){if(C.renderPass==="translucent"){var ue=Be.disabled,xe=C.colorModeForRenderPass();F.layout.get("text-variable-anchor")&&function(ke,Le,Ve,Je,at,_t,Et){for(var kt=Le.transform,At=at==="map",xt=_t==="map",zt=0,Ot=ke;zt<Ot.length;zt+=1){var jt=Ot[zt],rr=Je.getTile(jt),dr=rr.getBucket(Ve);if(dr&&dr.text&&dr.text.segments.get().length){var Sr=dr.textSizeData,kr=e.evaluateSizeForZoom(Sr,kt.zoom),Kr=yn(rr,1,Le.transform.zoom),Jr=Tr(jt.posMatrix,xt,At,Le.transform,Kr),pn=Ve.layout.get("icon-text-fit")!=="none"&&dr.hasIconData();if(kr){var sn=Math.pow(2,kt.zoom-rr.tileID.overscaledZ);dn(dr,At,xt,Et,e.symbolSize,kt,Jr,jt.posMatrix,sn,kr,pn)}}}}(q,C,F,R,F.layout.get("text-rotation-alignment"),F.layout.get("text-pitch-alignment"),ae),F.paint.get("icon-opacity").constantOr(1)!==0&&Dn(C,R,F,q,!1,F.paint.get("icon-translate"),F.paint.get("icon-translate-anchor"),F.layout.get("icon-rotation-alignment"),F.layout.get("icon-pitch-alignment"),F.layout.get("icon-keep-upright"),ue,xe),F.paint.get("text-opacity").constantOr(1)!==0&&Dn(C,R,F,q,!0,F.paint.get("text-translate"),F.paint.get("text-translate-anchor"),F.layout.get("text-rotation-alignment"),F.layout.get("text-pitch-alignment"),F.layout.get("text-keep-upright"),ue,xe),R.map.showCollisionBoxes&&(_r(C,R,F,q,F.paint.get("text-translate"),F.paint.get("text-translate-anchor"),!0),_r(C,R,F,q,F.paint.get("icon-translate"),F.paint.get("icon-translate-anchor"),!1))}},circle:function(C,R,F,q){if(C.renderPass==="translucent"){var ae=F.paint.get("circle-opacity"),ue=F.paint.get("circle-stroke-width"),xe=F.paint.get("circle-stroke-opacity"),ke=F.layout.get("circle-sort-key").constantOr(1)!==void 0;if(ae.constantOr(1)!==0||ue.constantOr(1)!==0&&xe.constantOr(1)!==0){for(var Le=C.context,Ve=Le.gl,Je=C.depthModeForSublayer(0,It.ReadOnly),at=Be.disabled,_t=C.colorModeForRenderPass(),Et=[],kt=0;kt<q.length;kt++){var At=q[kt],xt=R.getTile(At),zt=xt.getBucket(F);if(zt){var Ot=zt.programConfigurations.get(F.id),jt={programConfiguration:Ot,program:C.useProgram("circle",Ot),layoutVertexBuffer:zt.layoutVertexBuffer,indexBuffer:zt.indexBuffer,uniformValues:Yo(C,At,xt,F)};if(ke)for(var rr=0,dr=zt.segments.get();rr<dr.length;rr+=1){var Sr=dr[rr];Et.push({segments:new e.SegmentVector([Sr]),sortKey:Sr.sortKey,state:jt})}else Et.push({segments:zt.segments,sortKey:0,state:jt})}}ke&&Et.sort(function(Jn,Yn){return Jn.sortKey-Yn.sortKey});for(var kr=0,Kr=Et;kr<Kr.length;kr+=1){var Jr=Kr[kr],pn=Jr.state,sn=pn.programConfiguration,Un=pn.program,Xn=pn.layoutVertexBuffer,ha=pn.indexBuffer,Gr=pn.uniformValues,An=Jr.segments;Un.draw(Le,Ve.TRIANGLES,Je,at,_t,he.disabled,Gr,F.id,Xn,ha,An,F.paint,C.transform.zoom,sn)}}}},heatmap:function(C,R,F,q){if(F.paint.get("heatmap-opacity")!==0)if(C.renderPass==="offscreen"){var ae=C.context,ue=ae.gl,xe=Be.disabled,ke=new He([ue.ONE,ue.ONE],e.Color.transparent,[!0,!0,!0,!0]);(function(At,xt,zt){var Ot=At.gl;At.activeTexture.set(Ot.TEXTURE1),At.viewport.set([0,0,xt.width/4,xt.height/4]);var jt=zt.heatmapFbo;if(jt)Ot.bindTexture(Ot.TEXTURE_2D,jt.colorAttachment.get()),At.bindFramebuffer.set(jt.framebuffer);else{var rr=Ot.createTexture();Ot.bindTexture(Ot.TEXTURE_2D,rr),Ot.texParameteri(Ot.TEXTURE_2D,Ot.TEXTURE_WRAP_S,Ot.CLAMP_TO_EDGE),Ot.texParameteri(Ot.TEXTURE_2D,Ot.TEXTURE_WRAP_T,Ot.CLAMP_TO_EDGE),Ot.texParameteri(Ot.TEXTURE_2D,Ot.TEXTURE_MIN_FILTER,Ot.LINEAR),Ot.texParameteri(Ot.TEXTURE_2D,Ot.TEXTURE_MAG_FILTER,Ot.LINEAR),jt=zt.heatmapFbo=At.createFramebuffer(xt.width/4,xt.height/4,!1),function(dr,Sr,kr,Kr){var Jr=dr.gl,pn=dr.extRenderToTextureHalfFloat?dr.extTextureHalfFloat.HALF_FLOAT_OES:Jr.UNSIGNED_BYTE;Jr.texImage2D(Jr.TEXTURE_2D,0,Jr.RGBA,Sr.width/4,Sr.height/4,0,Jr.RGBA,pn,null),Kr.colorAttachment.set(kr)}(At,xt,rr,jt)}})(ae,C,F),ae.clear({color:e.Color.transparent});for(var Le=0;Le<q.length;Le++){var Ve=q[Le];if(!R.hasRenderableParent(Ve)){var Je=R.getTile(Ve),at=Je.getBucket(F);if(at){var _t=at.programConfigurations.get(F.id),Et=C.useProgram("heatmap",_t),kt=C.transform.zoom;Et.draw(ae,ue.TRIANGLES,It.disabled,xe,ke,he.disabled,Wo(Ve.posMatrix,Je,kt,F.paint.get("heatmap-intensity")),F.id,at.layoutVertexBuffer,at.indexBuffer,at.segments,F.paint,C.transform.zoom,_t)}}}ae.viewport.set([0,0,C.width,C.height])}else C.renderPass==="translucent"&&(C.context.setColorMode(C.colorModeForRenderPass()),function(At,xt){var zt=At.context,Ot=zt.gl,jt=xt.heatmapFbo;if(!!jt){zt.activeTexture.set(Ot.TEXTURE0),Ot.bindTexture(Ot.TEXTURE_2D,jt.colorAttachment.get()),zt.activeTexture.set(Ot.TEXTURE1);var rr=xt.colorRampTexture;rr||(rr=xt.colorRampTexture=new e.Texture(zt,xt.colorRamp,Ot.RGBA)),rr.bind(Ot.LINEAR,Ot.CLAMP_TO_EDGE),At.useProgram("heatmapTexture").draw(zt,Ot.TRIANGLES,It.disabled,Be.disabled,At.colorModeForRenderPass(),he.disabled,function(dr,Sr,kr,Kr){var Jr=e.create();e.ortho(Jr,0,dr.width,dr.height,0,0,1);var pn=dr.context.gl;return{u_matrix:Jr,u_world:[pn.drawingBufferWidth,pn.drawingBufferHeight],u_image:kr,u_color_ramp:Kr,u_opacity:Sr.paint.get("heatmap-opacity")}}(At,xt,0,1),xt.id,At.viewportBuffer,At.quadTriangleIndexBuffer,At.viewportSegments,xt.paint,At.transform.zoom)}}(C,F))},line:function(C,R,F,q){if(C.renderPass==="translucent"){var ae=F.paint.get("line-opacity"),ue=F.paint.get("line-width");if(ae.constantOr(1)!==0&&ue.constantOr(1)!==0){var xe=C.depthModeForSublayer(0,It.ReadOnly),ke=C.colorModeForRenderPass(),Le=F.paint.get("line-dasharray"),Ve=F.paint.get("line-pattern"),Je=Ve.constantOr(1),at=F.paint.get("line-gradient"),_t=F.getCrossfadeParameters(),Et=Je?"linePattern":Le?"lineSDF":at?"lineGradient":"line",kt=C.context,At=kt.gl,xt=!0;if(at){kt.activeTexture.set(At.TEXTURE0);var zt=F.gradientTexture;if(!F.gradient)return;zt||(zt=F.gradientTexture=new e.Texture(kt,F.gradient,At.RGBA)),zt.bind(At.LINEAR,At.CLAMP_TO_EDGE)}for(var Ot=0,jt=q;Ot<jt.length;Ot+=1){var rr=jt[Ot],dr=R.getTile(rr);if(!Je||dr.patternsLoaded()){var Sr=dr.getBucket(F);if(Sr){var kr=Sr.programConfigurations.get(F.id),Kr=C.context.program.get(),Jr=C.useProgram(Et,kr),pn=xt||Jr.program!==Kr,sn=Ve.constantOr(null);if(sn&&dr.imageAtlas){var Un=dr.imageAtlas,Xn=Un.patternPositions[sn.to.toString()],ha=Un.patternPositions[sn.from.toString()];Xn&&ha&&kr.setConstantPatternPositions(Xn,ha)}var Gr=Je?je(C,dr,F,_t):Le?Ye(C,dr,F,Le,_t):at?Ga(C,dr,F):Io(C,dr,F);Je?(kt.activeTexture.set(At.TEXTURE0),dr.imageAtlasTexture.bind(At.LINEAR,At.CLAMP_TO_EDGE),kr.updatePaintBuffers(_t)):Le&&(pn||C.lineAtlas.dirty)&&(kt.activeTexture.set(At.TEXTURE0),C.lineAtlas.bind(kt)),Jr.draw(kt,At.TRIANGLES,xe,C.stencilModeForClipping(rr),ke,he.disabled,Gr,F.id,Sr.layoutVertexBuffer,Sr.indexBuffer,Sr.segments,F.paint,C.transform.zoom,kr),xt=!1}}}}}},fill:function(C,R,F,q){var ae=F.paint.get("fill-color"),ue=F.paint.get("fill-opacity");if(ue.constantOr(1)!==0){var xe=C.colorModeForRenderPass(),ke=F.paint.get("fill-pattern"),Le=C.opaquePassEnabledForLayer()&&!ke.constantOr(1)&&ae.constantOr(e.Color.transparent).a===1&&ue.constantOr(0)===1?"opaque":"translucent";if(C.renderPass===Le){var Ve=C.depthModeForSublayer(1,C.renderPass==="opaque"?It.ReadWrite:It.ReadOnly);zn(C,R,F,q,Ve,xe,!1)}if(C.renderPass==="translucent"&&F.paint.get("fill-antialias")){var Je=C.depthModeForSublayer(F.getPaintProperty("fill-outline-color")?2:0,It.ReadOnly);zn(C,R,F,q,Je,xe,!0)}}},"fill-extrusion":function(C,R,F,q){var ae=F.paint.get("fill-extrusion-opacity");if(ae!==0&&C.renderPass==="translucent"){var ue=new It(C.context.gl.LEQUAL,It.ReadWrite,C.depthRangeFor3D);if(ae!==1||F.paint.get("fill-extrusion-pattern").constantOr(1))va(C,R,F,q,ue,Be.disabled,He.disabled),va(C,R,F,q,ue,C.stencilModeFor3D(),C.colorModeForRenderPass());else{var xe=C.colorModeForRenderPass();va(C,R,F,q,ue,Be.disabled,xe)}}},hillshade:function(C,R,F,q){if(C.renderPass==="offscreen"||C.renderPass==="translucent"){for(var ae=C.context,ue=R.getSource().maxzoom,xe=C.depthModeForSublayer(0,It.ReadOnly),ke=C.colorModeForRenderPass(),Le=C.renderPass==="translucent"?C.stencilConfigForOverlap(q):[{},q],Ve=Le[0],Je=0,at=Le[1];Je<at.length;Je+=1){var _t=at[Je],Et=R.getTile(_t);Et.needsHillshadePrepare&&C.renderPass==="offscreen"?Ua(C,Et,F,ue,xe,Be.disabled,ke):C.renderPass==="translucent"&&Sa(C,Et,F,xe,Ve[_t.overscaledZ],ke)}ae.viewport.set([0,0,C.width,C.height])}},raster:function(C,R,F,q){if(C.renderPass==="translucent"&&F.paint.get("raster-opacity")!==0&&q.length)for(var ae=C.context,ue=ae.gl,xe=R.getSource(),ke=C.useProgram("raster"),Le=C.colorModeForRenderPass(),Ve=xe instanceof W?[{},q]:C.stencilConfigForOverlap(q),Je=Ve[0],at=Ve[1],_t=at[at.length-1].overscaledZ,Et=!C.options.moving,kt=0,At=at;kt<At.length;kt+=1){var xt=At[kt],zt=C.depthModeForSublayer(xt.overscaledZ-_t,F.paint.get("raster-opacity")===1?It.ReadWrite:It.ReadOnly,ue.LESS),Ot=R.getTile(xt),jt=C.transform.calculatePosMatrix(xt.toUnwrapped(),Et);Ot.registerFadeDuration(F.paint.get("raster-fade-duration"));var rr=R.findLoadedParent(xt,0),dr=ja(Ot,rr,R,F,C.transform),Sr=void 0,kr=void 0,Kr=F.paint.get("raster-resampling")==="nearest"?ue.NEAREST:ue.LINEAR;ae.activeTexture.set(ue.TEXTURE0),Ot.texture.bind(Kr,ue.CLAMP_TO_EDGE,ue.LINEAR_MIPMAP_NEAREST),ae.activeTexture.set(ue.TEXTURE1),rr?(rr.texture.bind(Kr,ue.CLAMP_TO_EDGE,ue.LINEAR_MIPMAP_NEAREST),Sr=Math.pow(2,rr.tileID.overscaledZ-Ot.tileID.overscaledZ),kr=[Ot.tileID.canonical.x*Sr%1,Ot.tileID.canonical.y*Sr%1]):Ot.texture.bind(Kr,ue.CLAMP_TO_EDGE,ue.LINEAR_MIPMAP_NEAREST);var Jr=gt(jt,kr||[0,0],Sr||1,dr,F);xe instanceof W?ke.draw(ae,ue.TRIANGLES,zt,Be.disabled,Le,he.disabled,Jr,F.id,xe.boundsBuffer,C.quadTriangleIndexBuffer,xe.boundsSegments):ke.draw(ae,ue.TRIANGLES,zt,Je[xt.overscaledZ],Le,he.disabled,Jr,F.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments)}},background:function(C,R,F){var q=F.paint.get("background-color"),ae=F.paint.get("background-opacity");if(ae!==0){var ue=C.context,xe=ue.gl,ke=C.transform,Le=ke.tileSize,Ve=F.paint.get("background-pattern");if(!C.isPatternMissing(Ve)){var Je=!Ve&&q.a===1&&ae===1&&C.opaquePassEnabledForLayer()?"opaque":"translucent";if(C.renderPass===Je){var at=Be.disabled,_t=C.depthModeForSublayer(0,Je==="opaque"?It.ReadWrite:It.ReadOnly),Et=C.colorModeForRenderPass(),kt=C.useProgram(Ve?"backgroundPattern":"background"),At=ke.coveringTiles({tileSize:Le});Ve&&(ue.activeTexture.set(xe.TEXTURE0),C.imageManager.bind(C.context));for(var xt=F.getCrossfadeParameters(),zt=0,Ot=At;zt<Ot.length;zt+=1){var jt=Ot[zt],rr=C.transform.calculatePosMatrix(jt.toUnwrapped()),dr=Ve?pr(rr,ae,C,Ve,{tileID:jt,tileSize:Le},xt):ar(rr,ae,q);kt.draw(ue,xe.TRIANGLES,_t,at,Et,he.disabled,dr,F.id,C.tileExtentBuffer,C.quadTriangleIndexBuffer,C.tileExtentSegments)}}}}},debug:function(C,R,F){for(var q=0;q<F.length;q++)to(C,R,F[q])},custom:function(C,R,F){var q=C.context,ae=F.implementation;if(C.renderPass==="offscreen"){var ue=ae.prerender;ue&&(C.setCustomLayerDefaults(),q.setColorMode(C.colorModeForRenderPass()),ue.call(ae,q.gl,C.transform.customLayerMatrix()),q.setDirty(),C.setBaseState())}else if(C.renderPass==="translucent"){C.setCustomLayerDefaults(),q.setColorMode(C.colorModeForRenderPass()),q.setStencilMode(Be.disabled);var xe=ae.renderingMode==="3d"?new It(C.context.gl.LEQUAL,It.ReadWrite,C.depthRangeFor3D):C.depthModeForSublayer(0,It.ReadOnly);q.setDepthMode(xe),ae.render(q.gl,C.transform.customLayerMatrix()),q.setDirty(),C.setBaseState(),q.bindFramebuffer.set(null)}}},za=function(C,R){this.context=new be(C),this.transform=R,this._tileTextures={},this.setup(),this.numSublayers=Re.maxUnderzooming+Re.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Hr,this.gpuTimers={}};za.prototype.resize=function(C,R){if(this.width=C*e.browser.devicePixelRatio,this.height=R*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var F=0,q=this.style._order;F<q.length;F+=1){var ae=q[F];this.style._layers[ae].resize()}},za.prototype.setup=function(){var C=this.context,R=new e.StructArrayLayout2i4;R.emplaceBack(0,0),R.emplaceBack(e.EXTENT,0),R.emplaceBack(0,e.EXTENT),R.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=C.createVertexBuffer(R,Cn.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var F=new e.StructArrayLayout2i4;F.emplaceBack(0,0),F.emplaceBack(e.EXTENT,0),F.emplaceBack(0,e.EXTENT),F.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=C.createVertexBuffer(F,Cn.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var q=new e.StructArrayLayout4i8;q.emplaceBack(0,0,0,0),q.emplaceBack(e.EXTENT,0,e.EXTENT,0),q.emplaceBack(0,e.EXTENT,0,e.EXTENT),q.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=C.createVertexBuffer(q,J.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var ae=new e.StructArrayLayout2i4;ae.emplaceBack(0,0),ae.emplaceBack(1,0),ae.emplaceBack(0,1),ae.emplaceBack(1,1),this.viewportBuffer=C.createVertexBuffer(ae,Cn.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var ue=new e.StructArrayLayout1ui2;ue.emplaceBack(0),ue.emplaceBack(1),ue.emplaceBack(3),ue.emplaceBack(2),ue.emplaceBack(0),this.tileBorderIndexBuffer=C.createIndexBuffer(ue);var xe=new e.StructArrayLayout3ui6;xe.emplaceBack(0,1,2),xe.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=C.createIndexBuffer(xe),this.emptyTexture=new e.Texture(C,{width:1,height:1,data:new Uint8Array([0,0,0,0])},C.gl.RGBA);var ke=this.context.gl;this.stencilClearMode=new Be({func:ke.ALWAYS,mask:0},0,255,ke.ZERO,ke.ZERO,ke.ZERO)},za.prototype.clearStencil=function(){var C=this.context,R=C.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var F=e.create();e.ortho(F,0,this.width,this.height,0,0,1),e.scale(F,F,[R.drawingBufferWidth,R.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(C,R.TRIANGLES,It.disabled,this.stencilClearMode,He.disabled,he.disabled,po(F),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},za.prototype._renderTileClippingMasks=function(C,R){if(this.currentStencilSource!==C.source&&C.isTileClipped()&&R&&R.length){this.currentStencilSource=C.source;var F=this.context,q=F.gl;this.nextStencilID+R.length>256&&this.clearStencil(),F.setColorMode(He.disabled),F.setDepthMode(It.disabled);var ae=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var ue=0,xe=R;ue<xe.length;ue+=1){var ke=xe[ue],Le=this._tileClippingMaskIDs[ke.key]=this.nextStencilID++;ae.draw(F,q.TRIANGLES,It.disabled,new Be({func:q.ALWAYS,mask:0},Le,255,q.KEEP,q.KEEP,q.REPLACE),He.disabled,he.disabled,po(ke.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},za.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var C=this.nextStencilID++,R=this.context.gl;return new Be({func:R.NOTEQUAL,mask:255},C,255,R.KEEP,R.KEEP,R.REPLACE)},za.prototype.stencilModeForClipping=function(C){var R=this.context.gl;return new Be({func:R.EQUAL,mask:255},this._tileClippingMaskIDs[C.key],0,R.KEEP,R.KEEP,R.REPLACE)},za.prototype.stencilConfigForOverlap=function(C){var R,F=this.context.gl,q=C.sort(function(Le,Ve){return Ve.overscaledZ-Le.overscaledZ}),ae=q[q.length-1].overscaledZ,ue=q[0].overscaledZ-ae+1;if(ue>1){this.currentStencilSource=void 0,this.nextStencilID+ue>256&&this.clearStencil();for(var xe={},ke=0;ke<ue;ke++)xe[ke+ae]=new Be({func:F.GEQUAL,mask:255},ke+this.nextStencilID,255,F.KEEP,F.KEEP,F.REPLACE);return this.nextStencilID+=ue,[xe,q]}return[(R={},R[ae]=Be.disabled,R),q]},za.prototype.colorModeForRenderPass=function(){var C=this.context.gl;return this._showOverdrawInspector?new He([C.CONSTANT_COLOR,C.ONE],new e.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?He.unblended:He.alphaBlended},za.prototype.depthModeForSublayer=function(C,R,F){if(!this.opaquePassEnabledForLayer())return It.disabled;var q=1-((1+this.currentLayer)*this.numSublayers+C)*this.depthEpsilon;return new It(F||this.context.gl.LEQUAL,R,[q,q])},za.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},za.prototype.render=function(C,R){var F=this;this.style=C,this.options=R,this.lineAtlas=C.lineAtlas,this.imageManager=C.imageManager,this.glyphManager=C.glyphManager,this.symbolFadeChange=C.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var q=this.style._order,ae=this.style.sourceCaches;for(var ue in ae){var xe=ae[ue];xe.used&&xe.prepare(this.context)}var ke,Le,Ve={},Je={},at={};for(var _t in ae){var Et=ae[_t];Ve[_t]=Et.getVisibleCoordinates(),Je[_t]=Ve[_t].slice().reverse(),at[_t]=Et.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var kt=0;kt<q.length;kt++){var At=q[kt];if(this.style._layers[At].is3D()){this.opaquePassCutoff=kt;break}}this.renderPass="offscreen";for(var xt=0,zt=q;xt<zt.length;xt+=1){var Ot=zt[xt],jt=this.style._layers[Ot];if(jt.hasOffscreenPass()&&!jt.isHidden(this.transform.zoom)){var rr=Je[jt.source];(jt.type==="custom"||rr.length)&&this.renderLayer(this,ae[jt.source],jt,rr)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:R.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=R.showOverdrawInspector,this.depthRangeFor3D=[0,1-(C._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=q.length-1;this.currentLayer>=0;this.currentLayer--){var dr=this.style._layers[q[this.currentLayer]],Sr=ae[dr.source],kr=Ve[dr.source];this._renderTileClippingMasks(dr,kr),this.renderLayer(this,Sr,dr,kr)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<q.length;this.currentLayer++){var Kr=this.style._layers[q[this.currentLayer]],Jr=ae[Kr.source],pn=(Kr.type==="symbol"?at:Je)[Kr.source];this._renderTileClippingMasks(Kr,Ve[Kr.source]),this.renderLayer(this,Jr,Kr,pn)}this.options.showTileBoundaries&&(e.values(this.style._layers).forEach(function(sn){sn.source&&!sn.isHidden(F.transform.zoom)&&(sn.source!==(Le&&Le.id)&&(Le=F.style.sourceCaches[sn.source]),(!ke||ke.getSource().maxzoom<Le.getSource().maxzoom)&&(ke=Le))}),ke&&ro.debug(this,ke,ke.getVisibleCoordinates())),this.options.showPadding&&_i(this),this.context.setDefault()},za.prototype.renderLayer=function(C,R,F,q){F.isHidden(this.transform.zoom)||(F.type==="background"||F.type==="custom"||q.length)&&(this.id=F.id,this.gpuTimingStart(F),ro[F.type](C,R,F,q,this.style.placement.variableOffsets),this.gpuTimingEnd())},za.prototype.gpuTimingStart=function(C){if(this.options.gpuTiming){var R=this.context.extTimerQuery,F=this.gpuTimers[C.id];F||(F=this.gpuTimers[C.id]={calls:0,cpuTime:0,query:R.createQueryEXT()}),F.calls++,R.beginQueryEXT(R.TIME_ELAPSED_EXT,F.query)}},za.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var C=this.context.extTimerQuery;C.endQueryEXT(C.TIME_ELAPSED_EXT)}},za.prototype.collectGpuTimers=function(){var C=this.gpuTimers;return this.gpuTimers={},C},za.prototype.queryGpuTimers=function(C){var R={};for(var F in C){var q=C[F],ae=this.context.extTimerQuery,ue=ae.getQueryObjectEXT(q.query,ae.QUERY_RESULT_EXT)/1e6;ae.deleteQueryEXT(q.query),R[F]=ue}return R},za.prototype.translatePosMatrix=function(C,R,F,q,ae){if(!F[0]&&!F[1])return C;var ue=ae?q==="map"?this.transform.angle:0:q==="viewport"?-this.transform.angle:0;if(ue){var xe=Math.sin(ue),ke=Math.cos(ue);F=[F[0]*ke-F[1]*xe,F[0]*xe+F[1]*ke]}var Le=[ae?F[0]:yn(R,F[0],this.transform.zoom),ae?F[1]:yn(R,F[1],this.transform.zoom),0],Ve=new Float32Array(16);return e.translate(Ve,C,Le),Ve},za.prototype.saveTileTexture=function(C){var R=this._tileTextures[C.size[0]];R?R.push(C):this._tileTextures[C.size[0]]=[C]},za.prototype.getTileTexture=function(C){var R=this._tileTextures[C];return R&&R.length>0?R.pop():null},za.prototype.isPatternMissing=function(C){if(!C)return!1;if(!C.from||!C.to)return!0;var R=this.imageManager.getPattern(C.from.toString()),F=this.imageManager.getPattern(C.to.toString());return!R||!F},za.prototype.useProgram=function(C,R){this.cache=this.cache||{};var F=""+C+(R?R.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[F]||(this.cache[F]=new Ps(this.context,ys[C],R,br[C],this._showOverdrawInspector)),this.cache[F]},za.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},za.prototype.setBaseState=function(){var C=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(C.FUNC_ADD)},za.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var C=this.context.gl;this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,C.RGBA)}},za.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var ht=function(C,R){this.points=C,this.planes=R};ht.fromInvProjectionMatrix=function(C,R,F){var q=Math.pow(2,F),ae=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(xe){return e.transformMat4([],xe,C)}).map(function(xe){return e.scale$1([],xe,1/xe[3]/R*q)}),ue=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(xe){var ke=e.sub([],ae[xe[0]],ae[xe[1]]),Le=e.sub([],ae[xe[2]],ae[xe[1]]),Ve=e.normalize([],e.cross([],ke,Le)),Je=-e.dot(Ve,ae[xe[1]]);return Ve.concat(Je)});return new ht(ae,ue)};var Dt=function(C,R){this.min=C,this.max=R,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};Dt.prototype.quadrant=function(C){for(var R=[C%2==0,C<2],F=e.clone$2(this.min),q=e.clone$2(this.max),ae=0;ae<R.length;ae++)F[ae]=R[ae]?this.min[ae]:this.center[ae],q[ae]=R[ae]?this.center[ae]:this.max[ae];return q[2]=this.max[2],new Dt(F,q)},Dt.prototype.distanceX=function(C){return Math.max(Math.min(this.max[0],C[0]),this.min[0])-C[0]},Dt.prototype.distanceY=function(C){return Math.max(Math.min(this.max[1],C[1]),this.min[1])-C[1]},Dt.prototype.intersects=function(C){for(var R=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],F=!0,q=0;q<C.planes.length;q++){for(var ae=C.planes[q],ue=0,xe=0;xe<R.length;xe++)ue+=e.dot$1(ae,R[xe])>=0;if(ue===0)return 0;ue!==R.length&&(F=!1)}if(F)return 2;for(var ke=0;ke<3;ke++){for(var Le=Number.MAX_VALUE,Ve=-Number.MAX_VALUE,Je=0;Je<C.points.length;Je++){var at=C.points[Je][ke]-this.min[ke];Le=Math.min(Le,at),Ve=Math.max(Ve,at)}if(Ve<0||Le>this.max[ke]-this.min[ke])return 0}return 1};var sr=function(C,R,F,q){if(C===void 0&&(C=0),R===void 0&&(R=0),F===void 0&&(F=0),q===void 0&&(q=0),isNaN(C)||C<0||isNaN(R)||R<0||isNaN(F)||F<0||isNaN(q)||q<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=C,this.bottom=R,this.left=F,this.right=q};sr.prototype.interpolate=function(C,R,F){return R.top!=null&&C.top!=null&&(this.top=e.number(C.top,R.top,F)),R.bottom!=null&&C.bottom!=null&&(this.bottom=e.number(C.bottom,R.bottom,F)),R.left!=null&&C.left!=null&&(this.left=e.number(C.left,R.left,F)),R.right!=null&&C.right!=null&&(this.right=e.number(C.right,R.right,F)),this},sr.prototype.getCenter=function(C,R){var F=e.clamp((this.left+C-this.right)/2,0,C),q=e.clamp((this.top+R-this.bottom)/2,0,R);return new e.Point(F,q)},sr.prototype.equals=function(C){return this.top===C.top&&this.bottom===C.bottom&&this.left===C.left&&this.right===C.right},sr.prototype.clone=function(){return new sr(this.top,this.bottom,this.left,this.right)},sr.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Ht=function(C,R,F,q,ae){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=ae===void 0||ae,this._minZoom=C||0,this._maxZoom=R||22,this._minPitch=F==null?0:F,this._maxPitch=q==null?60:q,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new sr,this._posMatrixCache={},this._alignedPosMatrixCache={}},lr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Ht.prototype.clone=function(){var C=new Ht(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return C.tileSize=this.tileSize,C.latRange=this.latRange,C.width=this.width,C.height=this.height,C._center=this._center,C.zoom=this.zoom,C.angle=this.angle,C._fov=this._fov,C._pitch=this._pitch,C._unmodified=this._unmodified,C._edgeInsets=this._edgeInsets.clone(),C._calcMatrices(),C},lr.minZoom.get=function(){return this._minZoom},lr.minZoom.set=function(C){this._minZoom!==C&&(this._minZoom=C,this.zoom=Math.max(this.zoom,C))},lr.maxZoom.get=function(){return this._maxZoom},lr.maxZoom.set=function(C){this._maxZoom!==C&&(this._maxZoom=C,this.zoom=Math.min(this.zoom,C))},lr.minPitch.get=function(){return this._minPitch},lr.minPitch.set=function(C){this._minPitch!==C&&(this._minPitch=C,this.pitch=Math.max(this.pitch,C))},lr.maxPitch.get=function(){return this._maxPitch},lr.maxPitch.set=function(C){this._maxPitch!==C&&(this._maxPitch=C,this.pitch=Math.min(this.pitch,C))},lr.renderWorldCopies.get=function(){return this._renderWorldCopies},lr.renderWorldCopies.set=function(C){C===void 0?C=!0:C===null&&(C=!1),this._renderWorldCopies=C},lr.worldSize.get=function(){return this.tileSize*this.scale},lr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},lr.size.get=function(){return new e.Point(this.width,this.height)},lr.bearing.get=function(){return-this.angle/Math.PI*180},lr.bearing.set=function(C){var R=-e.wrap(C,-180,180)*Math.PI/180;this.angle!==R&&(this._unmodified=!1,this.angle=R,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},lr.pitch.get=function(){return this._pitch/Math.PI*180},lr.pitch.set=function(C){var R=e.clamp(C,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==R&&(this._unmodified=!1,this._pitch=R,this._calcMatrices())},lr.fov.get=function(){return this._fov/Math.PI*180},lr.fov.set=function(C){C=Math.max(.01,Math.min(60,C)),this._fov!==C&&(this._unmodified=!1,this._fov=C/180*Math.PI,this._calcMatrices())},lr.zoom.get=function(){return this._zoom},lr.zoom.set=function(C){var R=Math.min(Math.max(C,this.minZoom),this.maxZoom);this._zoom!==R&&(this._unmodified=!1,this._zoom=R,this.scale=this.zoomScale(R),this.tileZoom=Math.floor(R),this.zoomFraction=R-this.tileZoom,this._constrain(),this._calcMatrices())},lr.center.get=function(){return this._center},lr.center.set=function(C){C.lat===this._center.lat&&C.lng===this._center.lng||(this._unmodified=!1,this._center=C,this._constrain(),this._calcMatrices())},lr.padding.get=function(){return this._edgeInsets.toJSON()},lr.padding.set=function(C){this._edgeInsets.equals(C)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,C,1),this._calcMatrices())},lr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Ht.prototype.isPaddingEqual=function(C){return this._edgeInsets.equals(C)},Ht.prototype.interpolatePadding=function(C,R,F){this._unmodified=!1,this._edgeInsets.interpolate(C,R,F),this._constrain(),this._calcMatrices()},Ht.prototype.coveringZoomLevel=function(C){var R=(C.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/C.tileSize));return Math.max(0,R)},Ht.prototype.getVisibleUnwrappedCoordinates=function(C){var R=[new e.UnwrappedTileID(0,C)];if(this._renderWorldCopies)for(var F=this.pointCoordinate(new e.Point(0,0)),q=this.pointCoordinate(new e.Point(this.width,0)),ae=this.pointCoordinate(new e.Point(this.width,this.height)),ue=this.pointCoordinate(new e.Point(0,this.height)),xe=Math.floor(Math.min(F.x,q.x,ae.x,ue.x)),ke=Math.floor(Math.max(F.x,q.x,ae.x,ue.x)),Le=xe-1;Le<=ke+1;Le++)Le!==0&&R.push(new e.UnwrappedTileID(Le,C));return R},Ht.prototype.coveringTiles=function(C){var R=this.coveringZoomLevel(C),F=R;if(C.minzoom!==void 0&&R<C.minzoom)return[];C.maxzoom!==void 0&&R>C.maxzoom&&(R=C.maxzoom);var q=e.MercatorCoordinate.fromLngLat(this.center),ae=Math.pow(2,R),ue=[ae*q.x,ae*q.y,0],xe=ht.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,R),ke=C.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ke=R);var Le=function(pn){return{aabb:new Dt([pn*ae,0,0],[(pn+1)*ae,ae,0]),zoom:0,x:0,y:0,wrap:pn,fullyVisible:!1}},Ve=[],Je=[],at=R,_t=C.reparseOverscaled?F:R;if(this._renderWorldCopies)for(var Et=1;Et<=3;Et++)Ve.push(Le(-Et)),Ve.push(Le(Et));for(Ve.push(Le(0));Ve.length>0;){var kt=Ve.pop(),At=kt.x,xt=kt.y,zt=kt.fullyVisible;if(!zt){var Ot=kt.aabb.intersects(xe);if(Ot===0)continue;zt=Ot===2}var jt=kt.aabb.distanceX(ue),rr=kt.aabb.distanceY(ue),dr=Math.max(Math.abs(jt),Math.abs(rr)),Sr=3+(1<<at-kt.zoom)-2;if(kt.zoom===at||dr>Sr&&kt.zoom>=ke)Je.push({tileID:new e.OverscaledTileID(kt.zoom===at?_t:kt.zoom,kt.wrap,kt.zoom,At,xt),distanceSq:e.sqrLen([ue[0]-.5-At,ue[1]-.5-xt])});else for(var kr=0;kr<4;kr++){var Kr=(At<<1)+kr%2,Jr=(xt<<1)+(kr>>1);Ve.push({aabb:kt.aabb.quadrant(kr),zoom:kt.zoom+1,x:Kr,y:Jr,wrap:kt.wrap,fullyVisible:zt})}}return Je.sort(function(pn,sn){return pn.distanceSq-sn.distanceSq}).map(function(pn){return pn.tileID})},Ht.prototype.resize=function(C,R){this.width=C,this.height=R,this.pixelsToGLUnits=[2/C,-2/R],this._constrain(),this._calcMatrices()},lr.unmodified.get=function(){return this._unmodified},Ht.prototype.zoomScale=function(C){return Math.pow(2,C)},Ht.prototype.scaleZoom=function(C){return Math.log(C)/Math.LN2},Ht.prototype.project=function(C){var R=e.clamp(C.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(C.lng)*this.worldSize,e.mercatorYfromLat(R)*this.worldSize)},Ht.prototype.unproject=function(C){return new e.MercatorCoordinate(C.x/this.worldSize,C.y/this.worldSize).toLngLat()},lr.point.get=function(){return this.project(this.center)},Ht.prototype.setLocationAtPoint=function(C,R){var F=this.pointCoordinate(R),q=this.pointCoordinate(this.centerPoint),ae=this.locationCoordinate(C),ue=new e.MercatorCoordinate(ae.x-(F.x-q.x),ae.y-(F.y-q.y));this.center=this.coordinateLocation(ue),this._renderWorldCopies&&(this.center=this.center.wrap())},Ht.prototype.locationPoint=function(C){return this.coordinatePoint(this.locationCoordinate(C))},Ht.prototype.pointLocation=function(C){return this.coordinateLocation(this.pointCoordinate(C))},Ht.prototype.locationCoordinate=function(C){return e.MercatorCoordinate.fromLngLat(C)},Ht.prototype.coordinateLocation=function(C){return C.toLngLat()},Ht.prototype.pointCoordinate=function(C){var R=[C.x,C.y,0,1],F=[C.x,C.y,1,1];e.transformMat4(R,R,this.pixelMatrixInverse),e.transformMat4(F,F,this.pixelMatrixInverse);var q=R[3],ae=F[3],ue=R[0]/q,xe=F[0]/ae,ke=R[1]/q,Le=F[1]/ae,Ve=R[2]/q,Je=F[2]/ae,at=Ve===Je?0:(0-Ve)/(Je-Ve);return new e.MercatorCoordinate(e.number(ue,xe,at)/this.worldSize,e.number(ke,Le,at)/this.worldSize)},Ht.prototype.coordinatePoint=function(C){var R=[C.x*this.worldSize,C.y*this.worldSize,0,1];return e.transformMat4(R,R,this.pixelMatrix),new e.Point(R[0]/R[3],R[1]/R[3])},Ht.prototype.getBounds=function(){return new e.LngLatBounds().extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},Ht.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Ht.prototype.setMaxBounds=function(C){C?(this.lngRange=[C.getWest(),C.getEast()],this.latRange=[C.getSouth(),C.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Ht.prototype.calculatePosMatrix=function(C,R){R===void 0&&(R=!1);var F=C.key,q=R?this._alignedPosMatrixCache:this._posMatrixCache;if(q[F])return q[F];var ae=C.canonical,ue=this.worldSize/this.zoomScale(ae.z),xe=ae.x+Math.pow(2,ae.z)*C.wrap,ke=e.identity(new Float64Array(16));return e.translate(ke,ke,[xe*ue,ae.y*ue,0]),e.scale(ke,ke,[ue/e.EXTENT,ue/e.EXTENT,1]),e.multiply(ke,R?this.alignedProjMatrix:this.projMatrix,ke),q[F]=new Float32Array(ke),q[F]},Ht.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Ht.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var C,R,F,q,ae=-90,ue=90,xe=-180,ke=180,Le=this.size,Ve=this._unmodified;if(this.latRange){var Je=this.latRange;ae=e.mercatorYfromLat(Je[1])*this.worldSize,C=(ue=e.mercatorYfromLat(Je[0])*this.worldSize)-ae<Le.y?Le.y/(ue-ae):0}if(this.lngRange){var at=this.lngRange;xe=e.mercatorXfromLng(at[0])*this.worldSize,R=(ke=e.mercatorXfromLng(at[1])*this.worldSize)-xe<Le.x?Le.x/(ke-xe):0}var _t=this.point,Et=Math.max(R||0,C||0);if(Et)return this.center=this.unproject(new e.Point(R?(ke+xe)/2:_t.x,C?(ue+ae)/2:_t.y)),this.zoom+=this.scaleZoom(Et),this._unmodified=Ve,void(this._constraining=!1);if(this.latRange){var kt=_t.y,At=Le.y/2;kt-At<ae&&(q=ae+At),kt+At>ue&&(q=ue-At)}if(this.lngRange){var xt=_t.x,zt=Le.x/2;xt-zt<xe&&(F=xe+zt),xt+zt>ke&&(F=ke-zt)}F===void 0&&q===void 0||(this.center=this.unproject(new e.Point(F!==void 0?F:_t.x,q!==void 0?q:_t.y))),this._unmodified=Ve,this._constraining=!1}},Ht.prototype._calcMatrices=function(){if(this.height){var C=this._fov/2,R=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(C)*this.height;var F=Math.PI/2+this._pitch,q=this._fov*(.5+R.y/this.height),ae=Math.sin(q)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-F-q,.01,Math.PI-.01)),ue=this.point,xe=ue.x,ke=ue.y,Le=1.01*(Math.cos(Math.PI/2-this._pitch)*ae+this.cameraToCenterDistance),Ve=this.height/50,Je=new Float64Array(16);e.perspective(Je,this._fov,this.width/this.height,Ve,Le),Je[8]=2*-R.x/this.width,Je[9]=2*R.y/this.height,e.scale(Je,Je,[1,-1,1]),e.translate(Je,Je,[0,0,-this.cameraToCenterDistance]),e.rotateX(Je,Je,this._pitch),e.rotateZ(Je,Je,this.angle),e.translate(Je,Je,[-xe,-ke,0]),this.mercatorMatrix=e.scale([],Je,[this.worldSize,this.worldSize,this.worldSize]),e.scale(Je,Je,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Je,this.invProjMatrix=e.invert([],this.projMatrix);var at=this.width%2/2,_t=this.height%2/2,Et=Math.cos(this.angle),kt=Math.sin(this.angle),At=xe-Math.round(xe)+Et*at+kt*_t,xt=ke-Math.round(ke)+Et*_t+kt*at,zt=new Float64Array(Je);if(e.translate(zt,zt,[At>.5?At-1:At,xt>.5?xt-1:xt,0]),this.alignedProjMatrix=zt,Je=e.create(),e.scale(Je,Je,[this.width/2,-this.height/2,1]),e.translate(Je,Je,[1,-1,0]),this.labelPlaneMatrix=Je,Je=e.create(),e.scale(Je,Je,[1,-1,1]),e.translate(Je,Je,[-1,-1,0]),e.scale(Je,Je,[2/this.width,2/this.height,1]),this.glCoordMatrix=Je,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(Je=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=Je,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Ht.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var C=this.pointCoordinate(new e.Point(0,0)),R=[C.x*this.worldSize,C.y*this.worldSize,0,1];return e.transformMat4(R,R,this.pixelMatrix)[3]/this.cameraToCenterDistance},Ht.prototype.getCameraPoint=function(){var C=this._pitch,R=Math.tan(C)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,R))},Ht.prototype.getCameraQueryGeometry=function(C){var R=this.getCameraPoint();if(C.length===1)return[C[0],R];for(var F=R.x,q=R.y,ae=R.x,ue=R.y,xe=0,ke=C;xe<ke.length;xe+=1){var Le=ke[xe];F=Math.min(F,Le.x),q=Math.min(q,Le.y),ae=Math.max(ae,Le.x),ue=Math.max(ue,Le.y)}return[new e.Point(F,q),new e.Point(ae,q),new e.Point(ae,ue),new e.Point(F,ue),new e.Point(F,q)]},Object.defineProperties(Ht.prototype,lr);var Pr=function(C){var R,F,q,ae,ue;this._hashName=C&&encodeURIComponent(C),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(R=this._updateHashUnthrottled.bind(this),F=300,q=!1,ae=null,ue=function(){ae=null,q&&(R(),ae=setTimeout(ue,F),q=!1)},function(){return q=!0,ae||ue(),ae})};Pr.prototype.addTo=function(C){return this._map=C,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Pr.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Pr.prototype.getHashString=function(C){var R=this._map.getCenter(),F=Math.round(100*this._map.getZoom())/100,q=Math.ceil((F*Math.LN2+Math.log(512/360/.5))/Math.LN10),ae=Math.pow(10,q),ue=Math.round(R.lng*ae)/ae,xe=Math.round(R.lat*ae)/ae,ke=this._map.getBearing(),Le=this._map.getPitch(),Ve="";if(Ve+=C?"/"+ue+"/"+xe+"/"+F:F+"/"+xe+"/"+ue,(ke||Le)&&(Ve+="/"+Math.round(10*ke)/10),Le&&(Ve+="/"+Math.round(Le)),this._hashName){var Je=this._hashName,at=!1,_t=e.window.location.hash.slice(1).split("&").map(function(Et){var kt=Et.split("=")[0];return kt===Je?(at=!0,kt+"="+Ve):Et}).filter(function(Et){return Et});return at||_t.push(Je+"="+Ve),"#"+_t.join("&")}return"#"+Ve},Pr.prototype._getCurrentHash=function(){var C,R=this,F=e.window.location.hash.replace("#","");return this._hashName?(F.split("&").map(function(q){return q.split("=")}).forEach(function(q){q[0]===R._hashName&&(C=q)}),(C&&C[1]||"").split("/")):F.split("/")},Pr.prototype._onHashChange=function(){var C=this._getCurrentHash();if(C.length>=3&&!C.some(function(F){return isNaN(F)})){var R=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(C[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+C[2],+C[1]],zoom:+C[0],bearing:R,pitch:+(C[4]||0)}),!0}return!1},Pr.prototype._updateHashUnthrottled=function(){var C=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",C)}catch{}};var Nr={linearity:.3,easing:e.bezier(0,0,.3,1)},Zr=e.extend({deceleration:2500,maxSpeed:1400},Nr),ln=e.extend({deceleration:20,maxSpeed:1400},Nr),on=e.extend({deceleration:1e3,maxSpeed:360},Nr),mn=e.extend({deceleration:1e3,maxSpeed:90},Nr),kn=function(C){this._map=C,this.clear()};function cn(C,R){(!C.duration||C.duration<R.duration)&&(C.duration=R.duration,C.easing=R.easing)}function Mn(C,R,F){var q=F.maxSpeed,ae=F.linearity,ue=F.deceleration,xe=e.clamp(C*ae/(R/1e3),-q,q),ke=Math.abs(xe)/(ue*ae);return{easing:F.easing,duration:1e3*ke,amount:xe*(ke/2)}}kn.prototype.clear=function(){this._inertiaBuffer=[]},kn.prototype.record=function(C){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:C})},kn.prototype._drainInertiaBuffer=function(){for(var C=this._inertiaBuffer,R=e.browser.now();C.length>0&&R-C[0].time>160;)C.shift()},kn.prototype._onMoveEnd=function(C){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var R={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},F=0,q=this._inertiaBuffer;F<q.length;F+=1){var ae=q[F].settings;R.zoom+=ae.zoomDelta||0,R.bearing+=ae.bearingDelta||0,R.pitch+=ae.pitchDelta||0,ae.panDelta&&R.pan._add(ae.panDelta),ae.around&&(R.around=ae.around),ae.pinchAround&&(R.pinchAround=ae.pinchAround)}var ue=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,xe={};if(R.pan.mag()){var ke=Mn(R.pan.mag(),ue,e.extend({},Zr,C||{}));xe.offset=R.pan.mult(ke.amount/R.pan.mag()),xe.center=this._map.transform.center,cn(xe,ke)}if(R.zoom){var Le=Mn(R.zoom,ue,ln);xe.zoom=this._map.transform.zoom+Le.amount,cn(xe,Le)}if(R.bearing){var Ve=Mn(R.bearing,ue,on);xe.bearing=this._map.transform.bearing+e.clamp(Ve.amount,-179,179),cn(xe,Ve)}if(R.pitch){var Je=Mn(R.pitch,ue,mn);xe.pitch=this._map.transform.pitch+Je.amount,cn(xe,Je)}if(xe.zoom||xe.bearing){var at=R.pinchAround===void 0?R.around:R.pinchAround;xe.around=at?this._map.unproject(at):this._map.getCenter()}return this.clear(),e.extend(xe,{noMoveStart:!0})}};var Fn=function(C){function R(q,ae,ue,xe){xe===void 0&&(xe={});var ke=r.mousePos(ae.getCanvasContainer(),ue),Le=ae.unproject(ke);C.call(this,q,e.extend({point:ke,lngLat:Le,originalEvent:ue},xe)),this._defaultPrevented=!1,this.target=ae}C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R;var F={defaultPrevented:{configurable:!0}};return R.prototype.preventDefault=function(){this._defaultPrevented=!0},F.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(R.prototype,F),R}(e.Event),Hn=function(C){function R(q,ae,ue){var xe=q==="touchend"?ue.changedTouches:ue.touches,ke=r.touchPos(ae.getCanvasContainer(),xe),Le=ke.map(function(at){return ae.unproject(at)}),Ve=ke.reduce(function(at,_t,Et,kt){return at.add(_t.div(kt.length))},new e.Point(0,0)),Je=ae.unproject(Ve);C.call(this,q,{points:ke,point:Ve,lngLats:Le,lngLat:Je,originalEvent:ue}),this._defaultPrevented=!1}C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R;var F={defaultPrevented:{configurable:!0}};return R.prototype.preventDefault=function(){this._defaultPrevented=!0},F.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(R.prototype,F),R}(e.Event),sa=function(C){function R(q,ae,ue){C.call(this,q,{originalEvent:ue}),this._defaultPrevented=!1}C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R;var F={defaultPrevented:{configurable:!0}};return R.prototype.preventDefault=function(){this._defaultPrevented=!0},F.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(R.prototype,F),R}(e.Event),Xr=function(C,R){this._map=C,this._clickTolerance=R.clickTolerance};Xr.prototype.reset=function(){delete this._mousedownPos},Xr.prototype.wheel=function(C){return this._firePreventable(new sa(C.type,this._map,C))},Xr.prototype.mousedown=function(C,R){return this._mousedownPos=R,this._firePreventable(new Fn(C.type,this._map,C))},Xr.prototype.mouseup=function(C){this._map.fire(new Fn(C.type,this._map,C))},Xr.prototype.click=function(C,R){this._mousedownPos&&this._mousedownPos.dist(R)>=this._clickTolerance||this._map.fire(new Fn(C.type,this._map,C))},Xr.prototype.dblclick=function(C){return this._firePreventable(new Fn(C.type,this._map,C))},Xr.prototype.mouseover=function(C){this._map.fire(new Fn(C.type,this._map,C))},Xr.prototype.mouseout=function(C){this._map.fire(new Fn(C.type,this._map,C))},Xr.prototype.touchstart=function(C){return this._firePreventable(new Hn(C.type,this._map,C))},Xr.prototype.touchmove=function(C){this._map.fire(new Hn(C.type,this._map,C))},Xr.prototype.touchend=function(C){this._map.fire(new Hn(C.type,this._map,C))},Xr.prototype.touchcancel=function(C){this._map.fire(new Hn(C.type,this._map,C))},Xr.prototype._firePreventable=function(C){if(this._map.fire(C),C.defaultPrevented)return{}},Xr.prototype.isEnabled=function(){return!0},Xr.prototype.isActive=function(){return!1},Xr.prototype.enable=function(){},Xr.prototype.disable=function(){};var na=function(C){this._map=C};na.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},na.prototype.mousemove=function(C){this._map.fire(new Fn(C.type,this._map,C))},na.prototype.mousedown=function(){this._delayContextMenu=!0},na.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Fn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},na.prototype.contextmenu=function(C){this._delayContextMenu?this._contextMenuEvent=C:this._map.fire(new Fn(C.type,this._map,C)),this._map.listens("contextmenu")&&C.preventDefault()},na.prototype.isEnabled=function(){return!0},na.prototype.isActive=function(){return!1},na.prototype.enable=function(){},na.prototype.disable=function(){};var In=function(C,R){this._map=C,this._el=C.getCanvasContainer(),this._container=C.getContainer(),this._clickTolerance=R.clickTolerance||1};function jn(C,R){for(var F={},q=0;q<C.length;q++)F[C[q].identifier]=R[q];return F}In.prototype.isEnabled=function(){return!!this._enabled},In.prototype.isActive=function(){return!!this._active},In.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},In.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},In.prototype.mousedown=function(C,R){this.isEnabled()&&C.shiftKey&&C.button===0&&(r.disableDrag(),this._startPos=this._lastPos=R,this._active=!0)},In.prototype.mousemoveWindow=function(C,R){if(this._active){var F=R;if(!(this._lastPos.equals(F)||!this._box&&F.dist(this._startPos)<this._clickTolerance)){var q=this._startPos;this._lastPos=F,this._box||(this._box=r.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",C));var ae=Math.min(q.x,F.x),ue=Math.max(q.x,F.x),xe=Math.min(q.y,F.y),ke=Math.max(q.y,F.y);r.setTransform(this._box,"translate("+ae+"px,"+xe+"px)"),this._box.style.width=ue-ae+"px",this._box.style.height=ke-xe+"px"}}},In.prototype.mouseupWindow=function(C,R){var F=this;if(this._active&&C.button===0){var q=this._startPos,ae=R;if(this.reset(),r.suppressClick(),q.x!==ae.x||q.y!==ae.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:C})),{cameraAnimation:function(ue){return ue.fitScreenCoordinates(q,ae,F._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",C)}},In.prototype.keydown=function(C){this._active&&C.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",C))},In.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(r.remove(this._box),this._box=null),r.enableDrag(),delete this._startPos,delete this._lastPos},In.prototype._fireEvent=function(C,R){return this._map.fire(new e.Event(C,{originalEvent:R}))};var ra=function(C){this.reset(),this.numTouches=C.numTouches};ra.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},ra.prototype.touchstart=function(C,R,F){(this.centroid||F.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=C.timeStamp),F.length===this.numTouches&&(this.centroid=function(q){for(var ae=new e.Point(0,0),ue=0,xe=q;ue<xe.length;ue+=1){var ke=xe[ue];ae._add(ke)}return ae.div(q.length)}(R),this.touches=jn(F,R)))},ra.prototype.touchmove=function(C,R,F){if(!this.aborted&&this.centroid){var q=jn(F,R);for(var ae in this.touches){var ue=this.touches[ae],xe=q[ae];(!xe||xe.dist(ue)>30)&&(this.aborted=!0)}}},ra.prototype.touchend=function(C,R,F){if((!this.centroid||C.timeStamp-this.startTime>500)&&(this.aborted=!0),F.length===0){var q=!this.aborted&&this.centroid;if(this.reset(),q)return q}};var ka=function(C){this.singleTap=new ra(C),this.numTaps=C.numTaps,this.reset()};ka.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},ka.prototype.touchstart=function(C,R,F){this.singleTap.touchstart(C,R,F)},ka.prototype.touchmove=function(C,R,F){this.singleTap.touchmove(C,R,F)},ka.prototype.touchend=function(C,R,F){var q=this.singleTap.touchend(C,R,F);if(q){var ae=C.timeStamp-this.lastTime<500,ue=!this.lastTap||this.lastTap.dist(q)<30;if(ae&&ue||this.reset(),this.count++,this.lastTime=C.timeStamp,this.lastTap=q,this.count===this.numTaps)return this.reset(),q}};var Pa=function(){this._zoomIn=new ka({numTouches:1,numTaps:2}),this._zoomOut=new ka({numTouches:2,numTaps:1}),this.reset()};Pa.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Pa.prototype.touchstart=function(C,R,F){this._zoomIn.touchstart(C,R,F),this._zoomOut.touchstart(C,R,F)},Pa.prototype.touchmove=function(C,R,F){this._zoomIn.touchmove(C,R,F),this._zoomOut.touchmove(C,R,F)},Pa.prototype.touchend=function(C,R,F){var q=this,ae=this._zoomIn.touchend(C,R,F),ue=this._zoomOut.touchend(C,R,F);return ae?(this._active=!0,C.preventDefault(),setTimeout(function(){return q.reset()},0),{cameraAnimation:function(xe){return xe.easeTo({duration:300,zoom:xe.getZoom()+1,around:xe.unproject(ae)},{originalEvent:C})}}):ue?(this._active=!0,C.preventDefault(),setTimeout(function(){return q.reset()},0),{cameraAnimation:function(xe){return xe.easeTo({duration:300,zoom:xe.getZoom()-1,around:xe.unproject(ue)},{originalEvent:C})}}):void 0},Pa.prototype.touchcancel=function(){this.reset()},Pa.prototype.enable=function(){this._enabled=!0},Pa.prototype.disable=function(){this._enabled=!1,this.reset()},Pa.prototype.isEnabled=function(){return this._enabled},Pa.prototype.isActive=function(){return this._active};var En=function(C){this.reset(),this._clickTolerance=C.clickTolerance||1};En.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},En.prototype._correctButton=function(C,R){return!1},En.prototype._move=function(C,R){return{}},En.prototype.mousedown=function(C,R){if(!this._lastPoint){var F=r.mouseButton(C);this._correctButton(C,F)&&(this._lastPoint=R,this._eventButton=F)}},En.prototype.mousemoveWindow=function(C,R){var F=this._lastPoint;if(F&&(C.preventDefault(),this._moved||!(R.dist(F)<this._clickTolerance)))return this._moved=!0,this._lastPoint=R,this._move(F,R)},En.prototype.mouseupWindow=function(C){r.mouseButton(C)===this._eventButton&&(this._moved&&r.suppressClick(),this.reset())},En.prototype.enable=function(){this._enabled=!0},En.prototype.disable=function(){this._enabled=!1,this.reset()},En.prototype.isEnabled=function(){return this._enabled},En.prototype.isActive=function(){return this._active};var Ra=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.mousedown=function(F,q){C.prototype.mousedown.call(this,F,q),this._lastPoint&&(this._active=!0)},R.prototype._correctButton=function(F,q){return q===0&&!F.ctrlKey},R.prototype._move=function(F,q){return{around:q,panDelta:q.sub(F)}},R}(En),Ca=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype._correctButton=function(F,q){return q===0&&F.ctrlKey||q===2},R.prototype._move=function(F,q){var ae=.8*(q.x-F.x);if(ae)return this._active=!0,{bearingDelta:ae}},R.prototype.contextmenu=function(F){F.preventDefault()},R}(En),ga=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype._correctButton=function(F,q){return q===0&&F.ctrlKey||q===2},R.prototype._move=function(F,q){var ae=-.5*(q.y-F.y);if(ae)return this._active=!0,{pitchDelta:ae}},R.prototype.contextmenu=function(F){F.preventDefault()},R}(En),Fa=function(C){this._minTouches=1,this._clickTolerance=C.clickTolerance||1,this.reset()};Fa.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},Fa.prototype.touchstart=function(C,R,F){return this._calculateTransform(C,R,F)},Fa.prototype.touchmove=function(C,R,F){if(this._active)return C.preventDefault(),this._calculateTransform(C,R,F)},Fa.prototype.touchend=function(C,R,F){this._calculateTransform(C,R,F),this._active&&F.length<this._minTouches&&this.reset()},Fa.prototype.touchcancel=function(){this.reset()},Fa.prototype._calculateTransform=function(C,R,F){F.length>0&&(this._active=!0);var q=jn(F,R),ae=new e.Point(0,0),ue=new e.Point(0,0),xe=0;for(var ke in q){var Le=q[ke],Ve=this._touches[ke];Ve&&(ae._add(Le),ue._add(Le.sub(Ve)),xe++,q[ke]=Le)}if(this._touches=q,!(xe<this._minTouches)&&ue.mag()){var Je=ue.div(xe);if(this._sum._add(Je),!(this._sum.mag()<this._clickTolerance))return{around:ae.div(xe),panDelta:Je}}},Fa.prototype.enable=function(){this._enabled=!0},Fa.prototype.disable=function(){this._enabled=!1,this.reset()},Fa.prototype.isEnabled=function(){return this._enabled},Fa.prototype.isActive=function(){return this._active};var Ea=function(){this.reset()};function ti(C,R,F){for(var q=0;q<C.length;q++)if(C[q].identifier===F)return R[q]}Ea.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Ea.prototype._start=function(C){},Ea.prototype._move=function(C,R,F){return{}},Ea.prototype.touchstart=function(C,R,F){this._firstTwoTouches||F.length<2||(this._firstTwoTouches=[F[0].identifier,F[1].identifier],this._start([R[0],R[1]]))},Ea.prototype.touchmove=function(C,R,F){if(this._firstTwoTouches){C.preventDefault();var q=this._firstTwoTouches,ae=q[0],ue=q[1],xe=ti(F,R,ae),ke=ti(F,R,ue);if(xe&&ke){var Le=this._aroundCenter?null:xe.add(ke).div(2);return this._move([xe,ke],Le,C)}}},Ea.prototype.touchend=function(C,R,F){if(this._firstTwoTouches){var q=this._firstTwoTouches,ae=q[0],ue=q[1],xe=ti(F,R,ae),ke=ti(F,R,ue);xe&&ke||(this._active&&r.suppressClick(),this.reset())}},Ea.prototype.touchcancel=function(){this.reset()},Ea.prototype.enable=function(C){this._enabled=!0,this._aroundCenter=!!C&&C.around==="center"},Ea.prototype.disable=function(){this._enabled=!1,this.reset()},Ea.prototype.isEnabled=function(){return this._enabled},Ea.prototype.isActive=function(){return this._active};function aa(C,R){return Math.log(C/R)/Math.LN2}var Ja=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.reset=function(){C.prototype.reset.call(this),delete this._distance,delete this._startDistance},R.prototype._start=function(F){this._startDistance=this._distance=F[0].dist(F[1])},R.prototype._move=function(F,q){var ae=this._distance;if(this._distance=F[0].dist(F[1]),this._active||!(Math.abs(aa(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:aa(this._distance,ae),pinchAround:q}},R}(Ea);function ji(C,R){return 180*C.angleWith(R)/Math.PI}var Qo=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.reset=function(){C.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},R.prototype._start=function(F){this._startVector=this._vector=F[0].sub(F[1]),this._minDiameter=F[0].dist(F[1])},R.prototype._move=function(F,q){var ae=this._vector;if(this._vector=F[0].sub(F[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ji(this._vector,ae),pinchAround:q}},R.prototype._isBelowThreshold=function(F){this._minDiameter=Math.min(this._minDiameter,F.mag());var q=25/(Math.PI*this._minDiameter)*360,ae=ji(F,this._startVector);return Math.abs(ae)<q},R}(Ea);function Fo(C){return Math.abs(C.y)>Math.abs(C.x)}var bo=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.reset=function(){C.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},R.prototype._start=function(F){this._lastPoints=F,Fo(F[0].sub(F[1]))&&(this._valid=!1)},R.prototype._move=function(F,q,ae){var ue=F[0].sub(this._lastPoints[0]),xe=F[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(ue,xe,ae.timeStamp),this._valid)return this._lastPoints=F,this._active=!0,{pitchDelta:-.5*((ue.y+xe.y)/2)}},R.prototype.gestureBeginsVertically=function(F,q,ae){if(this._valid!==void 0)return this._valid;var ue=F.mag()>=2,xe=q.mag()>=2;if(ue||xe){if(!ue||!xe)return this._firstMove===void 0&&(this._firstMove=ae),ae-this._firstMove<100&&void 0;var ke=F.y>0==q.y>0;return Fo(F)&&Fo(q)&&ke}},R}(Ea),xa={panStep:100,bearingStep:15,pitchStep:10},gi=function(){var C=xa;this._panStep=C.panStep,this._bearingStep=C.bearingStep,this._pitchStep=C.pitchStep};function _o(C){return C*(2-C)}gi.prototype.reset=function(){this._active=!1},gi.prototype.keydown=function(C){var R=this;if(!(C.altKey||C.ctrlKey||C.metaKey)){var F=0,q=0,ae=0,ue=0,xe=0;switch(C.keyCode){case 61:case 107:case 171:case 187:F=1;break;case 189:case 109:case 173:F=-1;break;case 37:C.shiftKey?q=-1:(C.preventDefault(),ue=-1);break;case 39:C.shiftKey?q=1:(C.preventDefault(),ue=1);break;case 38:C.shiftKey?ae=1:(C.preventDefault(),xe=-1);break;case 40:C.shiftKey?ae=-1:(C.preventDefault(),xe=1);break;default:return}return{cameraAnimation:function(ke){var Le=ke.getZoom();ke.easeTo({duration:300,easeId:"keyboardHandler",easing:_o,zoom:F?Math.round(Le)+F*(C.shiftKey?2:1):Le,bearing:ke.getBearing()+q*R._bearingStep,pitch:ke.getPitch()+ae*R._pitchStep,offset:[-ue*R._panStep,-xe*R._panStep],center:ke.getCenter()},{originalEvent:C})}}}},gi.prototype.enable=function(){this._enabled=!0},gi.prototype.disable=function(){this._enabled=!1,this.reset()},gi.prototype.isEnabled=function(){return this._enabled},gi.prototype.isActive=function(){return this._active};var Ka=function(C,R){this._map=C,this._el=C.getCanvasContainer(),this._handler=R,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Ka.prototype.setZoomRate=function(C){this._defaultZoomRate=C},Ka.prototype.setWheelZoomRate=function(C){this._wheelZoomRate=C},Ka.prototype.isEnabled=function(){return!!this._enabled},Ka.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Ka.prototype.isZooming=function(){return!!this._zooming},Ka.prototype.enable=function(C){this.isEnabled()||(this._enabled=!0,this._aroundCenter=C&&C.around==="center")},Ka.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ka.prototype.wheel=function(C){if(this.isEnabled()){var R=C.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*C.deltaY:C.deltaY,F=e.browser.now(),q=F-(this._lastWheelEventTime||0);this._lastWheelEventTime=F,R!==0&&R%4.000244140625==0?this._type="wheel":R!==0&&Math.abs(R)<4?this._type="trackpad":q>400?(this._type=null,this._lastValue=R,this._timeout=setTimeout(this._onTimeout,40,C)):this._type||(this._type=Math.abs(q*R)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,R+=this._lastValue)),C.shiftKey&&R&&(R/=4),this._type&&(this._lastWheelEvent=C,this._delta-=R,this._active||this._start(C)),C.preventDefault()}},Ka.prototype._onTimeout=function(C){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(C)},Ka.prototype._start=function(C){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var R=r.mousePos(this._el,C);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(R)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Ka.prototype.renderFrame=function(){return this._onScrollFrame()},Ka.prototype._onScrollFrame=function(){var C=this;if(this._frameId&&(this._frameId=null,this.isActive())){var R=this._map.transform;if(this._delta!==0){var F=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,q=2/(1+Math.exp(-Math.abs(this._delta*F)));this._delta<0&&q!==0&&(q=1/q);var ae=typeof this._targetZoom=="number"?R.zoomScale(this._targetZoom):R.scale;this._targetZoom=Math.min(R.maxZoom,Math.max(R.minZoom,R.scaleZoom(ae*q))),this._type==="wheel"&&(this._startZoom=R.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var ue,xe=typeof this._targetZoom=="number"?this._targetZoom:R.zoom,ke=this._startZoom,Le=this._easing,Ve=!1;if(this._type==="wheel"&&ke&&Le){var Je=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),at=Le(Je);ue=e.number(ke,xe,at),Je<1?this._frameId||(this._frameId=!0):Ve=!0}else ue=xe,Ve=!0;return this._active=!0,Ve&&(this._active=!1,this._finishTimeout=setTimeout(function(){C._zooming=!1,C._handler._triggerRenderFrame(),delete C._targetZoom,delete C._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Ve,zoomDelta:ue-R.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Ka.prototype._smoothOutEasing=function(C){var R=e.ease;if(this._prevEase){var F=this._prevEase,q=(e.browser.now()-F.start)/F.duration,ae=F.easing(q+.01)-F.easing(q),ue=.27/Math.sqrt(ae*ae+1e-4)*.01,xe=Math.sqrt(.0729-ue*ue);R=e.bezier(ue,xe,.25,1)}return this._prevEase={start:e.browser.now(),duration:C,easing:R},R},Ka.prototype.reset=function(){this._active=!1};var ki=function(C,R){this._clickZoom=C,this._tapZoom=R};ki.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},ki.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},ki.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},ki.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Gi=function(){this.reset()};Gi.prototype.reset=function(){this._active=!1},Gi.prototype.dblclick=function(C,R){return C.preventDefault(),{cameraAnimation:function(F){F.easeTo({duration:300,zoom:F.getZoom()+(C.shiftKey?-1:1),around:F.unproject(R)},{originalEvent:C})}}},Gi.prototype.enable=function(){this._enabled=!0},Gi.prototype.disable=function(){this._enabled=!1,this.reset()},Gi.prototype.isEnabled=function(){return this._enabled},Gi.prototype.isActive=function(){return this._active};var ni=function(){this._tap=new ka({numTouches:1,numTaps:1}),this.reset()};ni.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ni.prototype.touchstart=function(C,R,F){this._swipePoint||(this._tapTime&&C.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?F.length>0&&(this._swipePoint=R[0],this._swipeTouch=F[0].identifier):this._tap.touchstart(C,R,F))},ni.prototype.touchmove=function(C,R,F){if(this._tapTime){if(this._swipePoint){if(F[0].identifier!==this._swipeTouch)return;var q=R[0],ae=q.y-this._swipePoint.y;return this._swipePoint=q,C.preventDefault(),this._active=!0,{zoomDelta:ae/128}}}else this._tap.touchmove(C,R,F)},ni.prototype.touchend=function(C,R,F){this._tapTime?this._swipePoint&&F.length===0&&this.reset():this._tap.touchend(C,R,F)&&(this._tapTime=C.timeStamp)},ni.prototype.touchcancel=function(){this.reset()},ni.prototype.enable=function(){this._enabled=!0},ni.prototype.disable=function(){this._enabled=!1,this.reset()},ni.prototype.isEnabled=function(){return this._enabled},ni.prototype.isActive=function(){return this._active};var mo=function(C,R,F){this._el=C,this._mousePan=R,this._touchPan=F};mo.prototype.enable=function(C){this._inertiaOptions=C||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},mo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},mo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},mo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var ai=function(C,R,F){this._pitchWithRotate=C.pitchWithRotate,this._mouseRotate=R,this._mousePitch=F};ai.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},ai.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},ai.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},ai.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var no=function(C,R,F,q){this._el=C,this._touchZoom=R,this._touchRotate=F,this._tapDragZoom=q,this._rotationDisabled=!1,this._enabled=!0};no.prototype.enable=function(C){this._touchZoom.enable(C),this._rotationDisabled||this._touchRotate.enable(C),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},no.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},no.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},no.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},no.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},no.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var ps=function(C){return C.zoom||C.drag||C.pitch||C.rotate},os=function(C){function R(){C.apply(this,arguments)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R}(e.Event);function Ys(C){return C.panDelta&&C.panDelta.mag()||C.zoomDelta||C.bearingDelta||C.pitchDelta}var zi=function(C,R){this._map=C,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new kn(C),this._bearingSnap=R.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(R),e.bindAll(["handleEvent","handleWindowEvent"],this);var F=this._el;this._listeners=[[F,"touchstart",{passive:!1}],[F,"touchmove",{passive:!1}],[F,"touchend",void 0],[F,"touchcancel",void 0],[F,"mousedown",void 0],[F,"mousemove",void 0],[F,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[F,"mouseover",void 0],[F,"mouseout",void 0],[F,"dblclick",void 0],[F,"click",void 0],[F,"keydown",{capture:!1}],[F,"keyup",void 0],[F,"wheel",{passive:!1}],[F,"contextmenu",void 0],[e.window,"blur",void 0]];for(var q=0,ae=this._listeners;q<ae.length;q+=1){var ue=ae[q],xe=ue[0],ke=ue[1],Le=ue[2];r.addEventListener(xe,ke,xe===e.window.document?this.handleWindowEvent:this.handleEvent,Le)}};zi.prototype.destroy=function(){for(var C=0,R=this._listeners;C<R.length;C+=1){var F=R[C],q=F[0],ae=F[1],ue=F[2];r.removeEventListener(q,ae,q===e.window.document?this.handleWindowEvent:this.handleEvent,ue)}},zi.prototype._addDefaultHandlers=function(C){var R=this._map,F=R.getCanvasContainer();this._add("mapEvent",new Xr(R,C));var q=R.boxZoom=new In(R,C);this._add("boxZoom",q);var ae=new Pa,ue=new Gi;R.doubleClickZoom=new ki(ue,ae),this._add("tapZoom",ae),this._add("clickZoom",ue);var xe=new ni;this._add("tapDragZoom",xe);var ke=R.touchPitch=new bo;this._add("touchPitch",ke);var Le=new Ca(C),Ve=new ga(C);R.dragRotate=new ai(C,Le,Ve),this._add("mouseRotate",Le,["mousePitch"]),this._add("mousePitch",Ve,["mouseRotate"]);var Je=new Ra(C),at=new Fa(C);R.dragPan=new mo(F,Je,at),this._add("mousePan",Je),this._add("touchPan",at,["touchZoom","touchRotate"]);var _t=new Qo,Et=new Ja;R.touchZoomRotate=new no(F,Et,_t,xe),this._add("touchRotate",_t,["touchPan","touchZoom"]),this._add("touchZoom",Et,["touchPan","touchRotate"]);var kt=R.scrollZoom=new Ka(R,this);this._add("scrollZoom",kt,["mousePan"]);var At=R.keyboard=new gi;this._add("keyboard",At),this._add("blockableMapEvent",new na(R));for(var xt=0,zt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];xt<zt.length;xt+=1){var Ot=zt[xt];C.interactive&&C[Ot]&&R[Ot].enable(C[Ot])}},zi.prototype._add=function(C,R,F){this._handlers.push({handlerName:C,handler:R,allowed:F}),this._handlersById[C]=R},zi.prototype.stop=function(){if(!this._updatingCamera){for(var C=0,R=this._handlers;C<R.length;C+=1)R[C].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},zi.prototype.isActive=function(){for(var C=0,R=this._handlers;C<R.length;C+=1)if(R[C].handler.isActive())return!0;return!1},zi.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},zi.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},zi.prototype.isMoving=function(){return Boolean(ps(this._eventsInProgress))||this.isZooming()},zi.prototype._blockedByActive=function(C,R,F){for(var q in C)if(q!==F&&(!R||R.indexOf(q)<0))return!0;return!1},zi.prototype.handleWindowEvent=function(C){this.handleEvent(C,C.type+"Window")},zi.prototype._getMapTouches=function(C){for(var R=[],F=0,q=C;F<q.length;F+=1){var ae=q[F],ue=ae.target;this._el.contains(ue)&&R.push(ae)}return R},zi.prototype.handleEvent=function(C,R){if(C.type!=="blur"){this._updatingCamera=!0;for(var F=C.type==="renderFrame"?void 0:C,q={needsRenderFrame:!1},ae={},ue={},xe=C.touches?this._getMapTouches(C.touches):void 0,ke=xe?r.touchPos(this._el,xe):r.mousePos(this._el,C),Le=0,Ve=this._handlers;Le<Ve.length;Le+=1){var Je=Ve[Le],at=Je.handlerName,_t=Je.handler,Et=Je.allowed;if(_t.isEnabled()){var kt=void 0;this._blockedByActive(ue,Et,at)?_t.reset():_t[R||C.type]&&(kt=_t[R||C.type](C,ke,xe),this.mergeHandlerResult(q,ae,kt,at,F),kt&&kt.needsRenderFrame&&this._triggerRenderFrame()),(kt||_t.isActive())&&(ue[at]=_t)}}var At={};for(var xt in this._previousActiveHandlers)ue[xt]||(At[xt]=F);this._previousActiveHandlers=ue,(Object.keys(At).length||Ys(q))&&(this._changes.push([q,ae,At]),this._triggerRenderFrame()),(Object.keys(ue).length||Ys(q))&&this._map._stop(!0),this._updatingCamera=!1;var zt=q.cameraAnimation;zt&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],zt(this._map))}else this.stop()},zi.prototype.mergeHandlerResult=function(C,R,F,q,ae){if(F){e.extend(C,F);var ue={handlerName:q,originalEvent:F.originalEvent||ae};F.zoomDelta!==void 0&&(R.zoom=ue),F.panDelta!==void 0&&(R.drag=ue),F.pitchDelta!==void 0&&(R.pitch=ue),F.bearingDelta!==void 0&&(R.rotate=ue)}},zi.prototype._applyChanges=function(){for(var C={},R={},F={},q=0,ae=this._changes;q<ae.length;q+=1){var ue=ae[q],xe=ue[0],ke=ue[1],Le=ue[2];xe.panDelta&&(C.panDelta=(C.panDelta||new e.Point(0,0))._add(xe.panDelta)),xe.zoomDelta&&(C.zoomDelta=(C.zoomDelta||0)+xe.zoomDelta),xe.bearingDelta&&(C.bearingDelta=(C.bearingDelta||0)+xe.bearingDelta),xe.pitchDelta&&(C.pitchDelta=(C.pitchDelta||0)+xe.pitchDelta),xe.around!==void 0&&(C.around=xe.around),xe.pinchAround!==void 0&&(C.pinchAround=xe.pinchAround),xe.noInertia&&(C.noInertia=xe.noInertia),e.extend(R,ke),e.extend(F,Le)}this._updateMapTransform(C,R,F),this._changes=[]},zi.prototype._updateMapTransform=function(C,R,F){var q=this._map,ae=q.transform;if(!Ys(C))return this._fireEvents(R,F);var ue=C.panDelta,xe=C.zoomDelta,ke=C.bearingDelta,Le=C.pitchDelta,Ve=C.around,Je=C.pinchAround;Je!==void 0&&(Ve=Je),q._stop(!0),Ve=Ve||q.transform.centerPoint;var at=ae.pointLocation(ue?Ve.sub(ue):Ve);ke&&(ae.bearing+=ke),Le&&(ae.pitch+=Le),xe&&(ae.zoom+=xe),ae.setLocationAtPoint(at,Ve),this._map._update(),C.noInertia||this._inertia.record(C),this._fireEvents(R,F)},zi.prototype._fireEvents=function(C,R){var F=this,q=ps(this._eventsInProgress),ae=ps(C),ue={};for(var xe in C){var ke=C[xe].originalEvent;this._eventsInProgress[xe]||(ue[xe+"start"]=ke),this._eventsInProgress[xe]=C[xe]}for(var Le in!q&&ae&&this._fireEvent("movestart",ae.originalEvent),ue)this._fireEvent(Le,ue[Le]);for(var Ve in C.rotate&&(this._bearingChanged=!0),ae&&this._fireEvent("move",ae.originalEvent),C){var Je=C[Ve].originalEvent;this._fireEvent(Ve,Je)}var at,_t={};for(var Et in this._eventsInProgress){var kt=this._eventsInProgress[Et],At=kt.handlerName,xt=kt.originalEvent;this._handlersById[At].isActive()||(delete this._eventsInProgress[Et],at=R[At]||xt,_t[Et+"end"]=at)}for(var zt in _t)this._fireEvent(zt,_t[zt]);var Ot=ps(this._eventsInProgress);if((q||ae)&&!Ot){this._updatingCamera=!0;var jt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),rr=function(dr){return dr!==0&&-F._bearingSnap<dr&&dr<F._bearingSnap};jt?(rr(jt.bearing||this._map.getBearing())&&(jt.bearing=0),this._map.easeTo(jt,{originalEvent:at})):(this._map.fire(new e.Event("moveend",{originalEvent:at})),rr(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},zi.prototype._fireEvent=function(C,R){this._map.fire(new e.Event(C,R?{originalEvent:R}:{}))},zi.prototype._triggerRenderFrame=function(){var C=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(R){delete C._frameId,C.handleEvent(new os("renderFrame",{timeStamp:R})),C._applyChanges()}))};var Ws=function(C){function R(F,q){C.call(this),this._moving=!1,this._zooming=!1,this.transform=F,this._bearingSnap=q.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},R.prototype.setCenter=function(F,q){return this.jumpTo({center:F},q)},R.prototype.panBy=function(F,q,ae){return F=e.Point.convert(F).mult(-1),this.panTo(this.transform.center,e.extend({offset:F},q),ae)},R.prototype.panTo=function(F,q,ae){return this.easeTo(e.extend({center:F},q),ae)},R.prototype.getZoom=function(){return this.transform.zoom},R.prototype.setZoom=function(F,q){return this.jumpTo({zoom:F},q),this},R.prototype.zoomTo=function(F,q,ae){return this.easeTo(e.extend({zoom:F},q),ae)},R.prototype.zoomIn=function(F,q){return this.zoomTo(this.getZoom()+1,F,q),this},R.prototype.zoomOut=function(F,q){return this.zoomTo(this.getZoom()-1,F,q),this},R.prototype.getBearing=function(){return this.transform.bearing},R.prototype.setBearing=function(F,q){return this.jumpTo({bearing:F},q),this},R.prototype.getPadding=function(){return this.transform.padding},R.prototype.setPadding=function(F,q){return this.jumpTo({padding:F},q),this},R.prototype.rotateTo=function(F,q,ae){return this.easeTo(e.extend({bearing:F},q),ae)},R.prototype.resetNorth=function(F,q){return this.rotateTo(0,e.extend({duration:1e3},F),q),this},R.prototype.resetNorthPitch=function(F,q){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},F),q),this},R.prototype.snapToNorth=function(F,q){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(F,q):this},R.prototype.getPitch=function(){return this.transform.pitch},R.prototype.setPitch=function(F,q){return this.jumpTo({pitch:F},q),this},R.prototype.cameraForBounds=function(F,q){return F=e.LngLatBounds.convert(F),this._cameraForBoxAndBearing(F.getNorthWest(),F.getSouthEast(),0,q)},R.prototype._cameraForBoxAndBearing=function(F,q,ae,ue){var xe={top:0,bottom:0,right:0,left:0};if(typeof(ue=e.extend({padding:xe,offset:[0,0],maxZoom:this.transform.maxZoom},ue)).padding=="number"){var ke=ue.padding;ue.padding={top:ke,bottom:ke,right:ke,left:ke}}ue.padding=e.extend(xe,ue.padding);var Le=this.transform,Ve=Le.padding,Je=Le.project(e.LngLat.convert(F)),at=Le.project(e.LngLat.convert(q)),_t=Je.rotate(-ae*Math.PI/180),Et=at.rotate(-ae*Math.PI/180),kt=new e.Point(Math.max(_t.x,Et.x),Math.max(_t.y,Et.y)),At=new e.Point(Math.min(_t.x,Et.x),Math.min(_t.y,Et.y)),xt=kt.sub(At),zt=(Le.width-(Ve.left+Ve.right+ue.padding.left+ue.padding.right))/xt.x,Ot=(Le.height-(Ve.top+Ve.bottom+ue.padding.top+ue.padding.bottom))/xt.y;if(!(Ot<0||zt<0)){var jt=Math.min(Le.scaleZoom(Le.scale*Math.min(zt,Ot)),ue.maxZoom),rr=e.Point.convert(ue.offset),dr=(ue.padding.left-ue.padding.right)/2,Sr=(ue.padding.top-ue.padding.bottom)/2,kr=new e.Point(rr.x+dr,rr.y+Sr).mult(Le.scale/Le.zoomScale(jt));return{center:Le.unproject(Je.add(at).div(2).sub(kr)),zoom:jt,bearing:ae}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},R.prototype.fitBounds=function(F,q,ae){return this._fitInternal(this.cameraForBounds(F,q),q,ae)},R.prototype.fitScreenCoordinates=function(F,q,ae,ue,xe){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(F)),this.transform.pointLocation(e.Point.convert(q)),ae,ue),ue,xe)},R.prototype._fitInternal=function(F,q,ae){return F?(delete(q=e.extend(F,q)).padding,q.linear?this.easeTo(q,ae):this.flyTo(q,ae)):this},R.prototype.jumpTo=function(F,q){this.stop();var ae=this.transform,ue=!1,xe=!1,ke=!1;return"zoom"in F&&ae.zoom!==+F.zoom&&(ue=!0,ae.zoom=+F.zoom),F.center!==void 0&&(ae.center=e.LngLat.convert(F.center)),"bearing"in F&&ae.bearing!==+F.bearing&&(xe=!0,ae.bearing=+F.bearing),"pitch"in F&&ae.pitch!==+F.pitch&&(ke=!0,ae.pitch=+F.pitch),F.padding==null||ae.isPaddingEqual(F.padding)||(ae.padding=F.padding),this.fire(new e.Event("movestart",q)).fire(new e.Event("move",q)),ue&&this.fire(new e.Event("zoomstart",q)).fire(new e.Event("zoom",q)).fire(new e.Event("zoomend",q)),xe&&this.fire(new e.Event("rotatestart",q)).fire(new e.Event("rotate",q)).fire(new e.Event("rotateend",q)),ke&&this.fire(new e.Event("pitchstart",q)).fire(new e.Event("pitch",q)).fire(new e.Event("pitchend",q)),this.fire(new e.Event("moveend",q))},R.prototype.easeTo=function(F,q){var ae=this;this._stop(!1,F.easeId),((F=e.extend({offset:[0,0],duration:500,easing:e.ease},F)).animate===!1||!F.essential&&e.browser.prefersReducedMotion)&&(F.duration=0);var ue=this.transform,xe=this.getZoom(),ke=this.getBearing(),Le=this.getPitch(),Ve=this.getPadding(),Je="zoom"in F?+F.zoom:xe,at="bearing"in F?this._normalizeBearing(F.bearing,ke):ke,_t="pitch"in F?+F.pitch:Le,Et="padding"in F?F.padding:ue.padding,kt=e.Point.convert(F.offset),At=ue.centerPoint.add(kt),xt=ue.pointLocation(At),zt=e.LngLat.convert(F.center||xt);this._normalizeCenter(zt);var Ot,jt,rr=ue.project(xt),dr=ue.project(zt).sub(rr),Sr=ue.zoomScale(Je-xe);F.around&&(Ot=e.LngLat.convert(F.around),jt=ue.locationPoint(Ot));var kr={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Je!==xe,this._rotating=this._rotating||ke!==at,this._pitching=this._pitching||_t!==Le,this._padding=!ue.isPaddingEqual(Et),this._easeId=F.easeId,this._prepareEase(q,F.noMoveStart,kr),clearTimeout(this._easeEndTimeoutID),this._ease(function(Kr){if(ae._zooming&&(ue.zoom=e.number(xe,Je,Kr)),ae._rotating&&(ue.bearing=e.number(ke,at,Kr)),ae._pitching&&(ue.pitch=e.number(Le,_t,Kr)),ae._padding&&(ue.interpolatePadding(Ve,Et,Kr),At=ue.centerPoint.add(kt)),Ot)ue.setLocationAtPoint(Ot,jt);else{var Jr=ue.zoomScale(ue.zoom-xe),pn=Je>xe?Math.min(2,Sr):Math.max(.5,Sr),sn=Math.pow(pn,1-Kr),Un=ue.unproject(rr.add(dr.mult(Kr*sn)).mult(Jr));ue.setLocationAtPoint(ue.renderWorldCopies?Un.wrap():Un,At)}ae._fireMoveEvents(q)},function(Kr){ae._afterEase(q,Kr)},F),this},R.prototype._prepareEase=function(F,q,ae){ae===void 0&&(ae={}),this._moving=!0,q||ae.moving||this.fire(new e.Event("movestart",F)),this._zooming&&!ae.zooming&&this.fire(new e.Event("zoomstart",F)),this._rotating&&!ae.rotating&&this.fire(new e.Event("rotatestart",F)),this._pitching&&!ae.pitching&&this.fire(new e.Event("pitchstart",F))},R.prototype._fireMoveEvents=function(F){this.fire(new e.Event("move",F)),this._zooming&&this.fire(new e.Event("zoom",F)),this._rotating&&this.fire(new e.Event("rotate",F)),this._pitching&&this.fire(new e.Event("pitch",F))},R.prototype._afterEase=function(F,q){if(!this._easeId||!q||this._easeId!==q){delete this._easeId;var ae=this._zooming,ue=this._rotating,xe=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,ae&&this.fire(new e.Event("zoomend",F)),ue&&this.fire(new e.Event("rotateend",F)),xe&&this.fire(new e.Event("pitchend",F)),this.fire(new e.Event("moveend",F))}},R.prototype.flyTo=function(F,q){var ae=this;if(!F.essential&&e.browser.prefersReducedMotion){var ue=e.pick(F,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ue,q)}this.stop(),F=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},F);var xe=this.transform,ke=this.getZoom(),Le=this.getBearing(),Ve=this.getPitch(),Je=this.getPadding(),at="zoom"in F?e.clamp(+F.zoom,xe.minZoom,xe.maxZoom):ke,_t="bearing"in F?this._normalizeBearing(F.bearing,Le):Le,Et="pitch"in F?+F.pitch:Ve,kt="padding"in F?F.padding:xe.padding,At=xe.zoomScale(at-ke),xt=e.Point.convert(F.offset),zt=xe.centerPoint.add(xt),Ot=xe.pointLocation(zt),jt=e.LngLat.convert(F.center||Ot);this._normalizeCenter(jt);var rr=xe.project(Ot),dr=xe.project(jt).sub(rr),Sr=F.curve,kr=Math.max(xe.width,xe.height),Kr=kr/At,Jr=dr.mag();if("minZoom"in F){var pn=e.clamp(Math.min(F.minZoom,ke,at),xe.minZoom,xe.maxZoom),sn=kr/xe.zoomScale(pn-ke);Sr=Math.sqrt(sn/Jr*2)}var Un=Sr*Sr;function Xn(ea){var _a=(Kr*Kr-kr*kr+(ea?-1:1)*Un*Un*Jr*Jr)/(2*(ea?Kr:kr)*Un*Jr);return Math.log(Math.sqrt(_a*_a+1)-_a)}function ha(ea){return(Math.exp(ea)-Math.exp(-ea))/2}function Gr(ea){return(Math.exp(ea)+Math.exp(-ea))/2}var An=Xn(0),Jn=function(ea){return Gr(An)/Gr(An+Sr*ea)},Yn=function(ea){return kr*((Gr(An)*(ha(_a=An+Sr*ea)/Gr(_a))-ha(An))/Un)/Jr;var _a},ia=(Xn(1)-An)/Sr;if(Math.abs(Jr)<1e-6||!isFinite(ia)){if(Math.abs(kr-Kr)<1e-6)return this.easeTo(F,q);var da=Kr<kr?-1:1;ia=Math.abs(Math.log(Kr/kr))/Sr,Yn=function(){return 0},Jn=function(ea){return Math.exp(da*Sr*ea)}}if("duration"in F)F.duration=+F.duration;else{var La="screenSpeed"in F?+F.screenSpeed/Sr:+F.speed;F.duration=1e3*ia/La}return F.maxDuration&&F.duration>F.maxDuration&&(F.duration=0),this._zooming=!0,this._rotating=Le!==_t,this._pitching=Et!==Ve,this._padding=!xe.isPaddingEqual(kt),this._prepareEase(q,!1),this._ease(function(ea){var _a=ea*ia,ya=1/Jn(_a);xe.zoom=ea===1?at:ke+xe.scaleZoom(ya),ae._rotating&&(xe.bearing=e.number(Le,_t,ea)),ae._pitching&&(xe.pitch=e.number(Ve,Et,ea)),ae._padding&&(xe.interpolatePadding(Je,kt,ea),zt=xe.centerPoint.add(xt));var Ia=ea===1?jt:xe.unproject(rr.add(dr.mult(Yn(_a))).mult(ya));xe.setLocationAtPoint(xe.renderWorldCopies?Ia.wrap():Ia,zt),ae._fireMoveEvents(q)},function(){return ae._afterEase(q)},F),this},R.prototype.isEasing=function(){return!!this._easeFrameId},R.prototype.stop=function(){return this._stop()},R.prototype._stop=function(F,q){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var ae=this._onEaseEnd;delete this._onEaseEnd,ae.call(this,q)}if(!F){var ue=this.handlers;ue&&ue.stop()}return this},R.prototype._ease=function(F,q,ae){ae.animate===!1||ae.duration===0?(F(1),q()):(this._easeStart=e.browser.now(),this._easeOptions=ae,this._onEaseFrame=F,this._onEaseEnd=q,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},R.prototype._renderFrameCallback=function(){var F=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(F)),F<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},R.prototype._normalizeBearing=function(F,q){F=e.wrap(F,-180,180);var ae=Math.abs(F-q);return Math.abs(F-360-q)<ae&&(F-=360),Math.abs(F+360-q)<ae&&(F+=360),F},R.prototype._normalizeCenter=function(F){var q=this.transform;if(q.renderWorldCopies&&!q.lngRange){var ae=F.lng-q.center.lng;F.lng+=ae>180?-360:ae<-180?360:0}},R}(e.Evented),Ri=function(C){C===void 0&&(C={}),this.options=C,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Ri.prototype.getDefaultPosition=function(){return"bottom-right"},Ri.prototype.onAdd=function(C){var R=this.options&&this.options.compact;return this._map=C,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=r.create("div","mapboxgl-ctrl-attrib-inner",this._container),R&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),R===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Ri.prototype.onRemove=function(){r.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Ri.prototype._updateEditLink=function(){var C=this._editLink;C||(C=this._editLink=this._container.querySelector(".mapbox-improve-map"));var R=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(C){var F=R.reduce(function(q,ae,ue){return ae.value&&(q+=ae.key+"="+ae.value+(ue<R.length-1?"&":"")),q},"?");C.href=e.config.FEEDBACK_URL+"/"+F+(this._map._hash?this._map._hash.getHashString(!0):""),C.rel="noopener nofollow"}},Ri.prototype._updateData=function(C){!C||C.sourceDataType!=="metadata"&&C.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Ri.prototype._updateAttributions=function(){if(this._map.style){var C=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?C=C.concat(this.options.customAttribution.map(function(ke){return typeof ke!="string"?"":ke})):typeof this.options.customAttribution=="string"&&C.push(this.options.customAttribution)),this._map.style.stylesheet){var R=this._map.style.stylesheet;this.styleOwner=R.owner,this.styleId=R.id}var F=this._map.style.sourceCaches;for(var q in F){var ae=F[q];if(ae.used){var ue=ae.getSource();ue.attribution&&C.indexOf(ue.attribution)<0&&C.push(ue.attribution)}}C.sort(function(ke,Le){return ke.length-Le.length});var xe=(C=C.filter(function(ke,Le){for(var Ve=Le+1;Ve<C.length;Ve++)if(C[Ve].indexOf(ke)>=0)return!1;return!0})).join(" | ");xe!==this._attribHTML&&(this._attribHTML=xe,C.length?(this._innerContainer.innerHTML=xe,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Ri.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var ss=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};ss.prototype.onAdd=function(C){this._map=C,this._container=r.create("div","mapboxgl-ctrl");var R=r.create("a","mapboxgl-ctrl-logo");return R.target="_blank",R.rel="noopener nofollow",R.href="https://www.mapbox.com/",R.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),R.setAttribute("rel","noopener nofollow"),this._container.appendChild(R),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ss.prototype.onRemove=function(){r.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ss.prototype.getDefaultPosition=function(){return"bottom-left"},ss.prototype._updateLogo=function(C){C&&C.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},ss.prototype._logoRequired=function(){if(this._map.style){var C=this._map.style.sourceCaches;for(var R in C)if(C[R].getSource().mapbox_logo)return!0;return!1}},ss.prototype._updateCompact=function(){var C=this._container.children;if(C.length){var R=C[0];this._map.getCanvasContainer().offsetWidth<250?R.classList.add("mapboxgl-compact"):R.classList.remove("mapboxgl-compact")}};var fa=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};fa.prototype.add=function(C){var R=++this._id;return this._queue.push({callback:C,id:R,cancelled:!1}),R},fa.prototype.remove=function(C){for(var R=this._currentlyRunning,F=0,q=R?this._queue.concat(R):this._queue;F<q.length;F+=1){var ae=q[F];if(ae.id===C)return void(ae.cancelled=!0)}},fa.prototype.run=function(C){C===void 0&&(C=0);var R=this._currentlyRunning=this._queue;this._queue=[];for(var F=0,q=R;F<q.length;F+=1){var ae=q[F];if(!ae.cancelled&&(ae.callback(C),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},fa.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var ba={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Zs=e.window.HTMLImageElement,Xs=e.window.HTMLElement,ls=e.window.ImageBitmap,Oo={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Zo=function(C){function R(q){var ae=this;if((q=e.extend({},Oo,q)).minZoom!=null&&q.maxZoom!=null&&q.minZoom>q.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(q.minPitch!=null&&q.maxPitch!=null&&q.minPitch>q.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(q.minPitch!=null&&q.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(q.maxPitch!=null&&q.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var ue=new Ht(q.minZoom,q.maxZoom,q.minPitch,q.maxPitch,q.renderWorldCopies);if(C.call(this,ue,q),this._interactive=q.interactive,this._maxTileCacheSize=q.maxTileCacheSize,this._failIfMajorPerformanceCaveat=q.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=q.preserveDrawingBuffer,this._antialias=q.antialias,this._trackResize=q.trackResize,this._bearingSnap=q.bearingSnap,this._refreshExpiredTiles=q.refreshExpiredTiles,this._fadeDuration=q.fadeDuration,this._crossSourceCollisions=q.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=q.collectResourceTiming,this._renderTaskQueue=new fa,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},ba,q.locale),this._requestManager=new e.RequestManager(q.transformRequest,q.accessToken),typeof q.container=="string"){if(this._container=e.window.document.getElementById(q.container),!this._container)throw new Error("Container '"+q.container+"' not found.")}else{if(!(q.container instanceof Xs))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=q.container}if(q.maxBounds&&this.setMaxBounds(q.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return ae._update(!1)}),this.on("moveend",function(){return ae._update(!1)}),this.on("zoom",function(){return ae._update(!0)}),e.window!==void 0&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new zi(this,q);var xe=typeof q.hash=="string"&&q.hash||void 0;this._hash=q.hash&&new Pr(xe).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:q.center,zoom:q.zoom,bearing:q.bearing,pitch:q.pitch}),q.bounds&&(this.resize(),this.fitBounds(q.bounds,e.extend({},q.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=q.localIdeographFontFamily,q.style&&this.setStyle(q.style,{localIdeographFontFamily:q.localIdeographFontFamily}),q.attributionControl&&this.addControl(new Ri({customAttribution:q.customAttribution})),this.addControl(new ss,q.logoPosition),this.on("style.load",function(){ae.transform.unmodified&&ae.jumpTo(ae.style.stylesheet)}),this.on("data",function(ke){ae._update(ke.dataType==="style"),ae.fire(new e.Event(ke.dataType+"data",ke))}),this.on("dataloading",function(ke){ae.fire(new e.Event(ke.dataType+"dataloading",ke))})}C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R;var F={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return R.prototype._getMapId=function(){return this._mapId},R.prototype.addControl=function(q,ae){if(ae===void 0&&q.getDefaultPosition&&(ae=q.getDefaultPosition()),ae===void 0&&(ae="top-right"),!q||!q.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var ue=q.onAdd(this);this._controls.push(q);var xe=this._controlPositions[ae];return ae.indexOf("bottom")!==-1?xe.insertBefore(ue,xe.firstChild):xe.appendChild(ue),this},R.prototype.removeControl=function(q){if(!q||!q.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var ae=this._controls.indexOf(q);return ae>-1&&this._controls.splice(ae,1),q.onRemove(this),this},R.prototype.resize=function(q){var ae=this._containerDimensions(),ue=ae[0],xe=ae[1];this._resizeCanvas(ue,xe),this.transform.resize(ue,xe),this.painter.resize(ue,xe);var ke=!this._moving;return ke&&(this.stop(),this.fire(new e.Event("movestart",q)).fire(new e.Event("move",q))),this.fire(new e.Event("resize",q)),ke&&this.fire(new e.Event("moveend",q)),this},R.prototype.getBounds=function(){return this.transform.getBounds()},R.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},R.prototype.setMaxBounds=function(q){return this.transform.setMaxBounds(e.LngLatBounds.convert(q)),this._update()},R.prototype.setMinZoom=function(q){if((q=q==null?-2:q)>=-2&&q<=this.transform.maxZoom)return this.transform.minZoom=q,this._update(),this.getZoom()<q&&this.setZoom(q),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},R.prototype.getMinZoom=function(){return this.transform.minZoom},R.prototype.setMaxZoom=function(q){if((q=q==null?22:q)>=this.transform.minZoom)return this.transform.maxZoom=q,this._update(),this.getZoom()>q&&this.setZoom(q),this;throw new Error("maxZoom must be greater than the current minZoom")},R.prototype.getMaxZoom=function(){return this.transform.maxZoom},R.prototype.setMinPitch=function(q){if((q=q==null?0:q)<0)throw new Error("minPitch must be greater than or equal to 0");if(q>=0&&q<=this.transform.maxPitch)return this.transform.minPitch=q,this._update(),this.getPitch()<q&&this.setPitch(q),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},R.prototype.getMinPitch=function(){return this.transform.minPitch},R.prototype.setMaxPitch=function(q){if((q=q==null?60:q)>60)throw new Error("maxPitch must be less than or equal to 60");if(q>=this.transform.minPitch)return this.transform.maxPitch=q,this._update(),this.getPitch()>q&&this.setPitch(q),this;throw new Error("maxPitch must be greater than the current minPitch")},R.prototype.getMaxPitch=function(){return this.transform.maxPitch},R.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},R.prototype.setRenderWorldCopies=function(q){return this.transform.renderWorldCopies=q,this._update()},R.prototype.project=function(q){return this.transform.locationPoint(e.LngLat.convert(q))},R.prototype.unproject=function(q){return this.transform.pointLocation(e.Point.convert(q))},R.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},R.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},R.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},R.prototype._createDelegatedListener=function(q,ae,ue){var xe,ke=this;if(q==="mouseenter"||q==="mouseover"){var Le=!1;return{layer:ae,listener:ue,delegates:{mousemove:function(Je){var at=ke.getLayer(ae)?ke.queryRenderedFeatures(Je.point,{layers:[ae]}):[];at.length?Le||(Le=!0,ue.call(ke,new Fn(q,ke,Je.originalEvent,{features:at}))):Le=!1},mouseout:function(){Le=!1}}}}if(q==="mouseleave"||q==="mouseout"){var Ve=!1;return{layer:ae,listener:ue,delegates:{mousemove:function(Je){(ke.getLayer(ae)?ke.queryRenderedFeatures(Je.point,{layers:[ae]}):[]).length?Ve=!0:Ve&&(Ve=!1,ue.call(ke,new Fn(q,ke,Je.originalEvent)))},mouseout:function(Je){Ve&&(Ve=!1,ue.call(ke,new Fn(q,ke,Je.originalEvent)))}}}}return{layer:ae,listener:ue,delegates:(xe={},xe[q]=function(Je){var at=ke.getLayer(ae)?ke.queryRenderedFeatures(Je.point,{layers:[ae]}):[];at.length&&(Je.features=at,ue.call(ke,Je),delete Je.features)},xe)}},R.prototype.on=function(q,ae,ue){if(ue===void 0)return C.prototype.on.call(this,q,ae);var xe=this._createDelegatedListener(q,ae,ue);for(var ke in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[q]=this._delegatedListeners[q]||[],this._delegatedListeners[q].push(xe),xe.delegates)this.on(ke,xe.delegates[ke]);return this},R.prototype.once=function(q,ae,ue){if(ue===void 0)return C.prototype.once.call(this,q,ae);var xe=this._createDelegatedListener(q,ae,ue);for(var ke in xe.delegates)this.once(ke,xe.delegates[ke]);return this},R.prototype.off=function(q,ae,ue){var xe=this;return ue===void 0?C.prototype.off.call(this,q,ae):(this._delegatedListeners&&this._delegatedListeners[q]&&function(ke){for(var Le=ke[q],Ve=0;Ve<Le.length;Ve++){var Je=Le[Ve];if(Je.layer===ae&&Je.listener===ue){for(var at in Je.delegates)xe.off(at,Je.delegates[at]);return Le.splice(Ve,1),xe}}}(this._delegatedListeners),this)},R.prototype.queryRenderedFeatures=function(q,ae){if(!this.style)return[];var ue;if(ae!==void 0||q===void 0||q instanceof e.Point||Array.isArray(q)||(ae=q,q=void 0),ae=ae||{},(q=q||[[0,0],[this.transform.width,this.transform.height]])instanceof e.Point||typeof q[0]=="number")ue=[e.Point.convert(q)];else{var xe=e.Point.convert(q[0]),ke=e.Point.convert(q[1]);ue=[xe,new e.Point(ke.x,xe.y),ke,new e.Point(xe.x,ke.y),xe]}return this.style.queryRenderedFeatures(ue,ae,this.transform)},R.prototype.querySourceFeatures=function(q,ae){return this.style.querySourceFeatures(q,ae)},R.prototype.setStyle=function(q,ae){return(ae=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},ae)).diff!==!1&&ae.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&q?(this._diffStyle(q,ae),this):(this._localIdeographFontFamily=ae.localIdeographFontFamily,this._updateStyle(q,ae))},R.prototype._getUIString=function(q){var ae=this._locale[q];if(ae==null)throw new Error("Missing UI string '"+q+"'");return ae},R.prototype._updateStyle=function(q,ae){return this.style&&(this.style.setEventedParent(null),this.style._remove()),q?(this.style=new Tn(this,ae||{}),this.style.setEventedParent(this,{style:this.style}),typeof q=="string"?this.style.loadURL(q):this.style.loadJSON(q),this):(delete this.style,this)},R.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Tn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},R.prototype._diffStyle=function(q,ae){var ue=this;if(typeof q=="string"){var xe=this._requestManager.normalizeStyleURL(q),ke=this._requestManager.transformRequest(xe,e.ResourceType.Style);e.getJSON(ke,function(Le,Ve){Le?ue.fire(new e.ErrorEvent(Le)):Ve&&ue._updateDiff(Ve,ae)})}else typeof q=="object"&&this._updateDiff(q,ae)},R.prototype._updateDiff=function(q,ae){try{this.style.setState(q)&&this._update(!0)}catch(ue){e.warnOnce("Unable to perform style diff: "+(ue.message||ue.error||ue)+".  Rebuilding the style from scratch."),this._updateStyle(q,ae)}},R.prototype.getStyle=function(){if(this.style)return this.style.serialize()},R.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},R.prototype.addSource=function(q,ae){return this._lazyInitEmptyStyle(),this.style.addSource(q,ae),this._update(!0)},R.prototype.isSourceLoaded=function(q){var ae=this.style&&this.style.sourceCaches[q];if(ae!==void 0)return ae.loaded();this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+q+"'")))},R.prototype.areTilesLoaded=function(){var q=this.style&&this.style.sourceCaches;for(var ae in q){var ue=q[ae]._tiles;for(var xe in ue){var ke=ue[xe];if(ke.state!=="loaded"&&ke.state!=="errored")return!1}}return!0},R.prototype.addSourceType=function(q,ae,ue){return this._lazyInitEmptyStyle(),this.style.addSourceType(q,ae,ue)},R.prototype.removeSource=function(q){return this.style.removeSource(q),this._update(!0)},R.prototype.getSource=function(q){return this.style.getSource(q)},R.prototype.addImage=function(q,ae,ue){ue===void 0&&(ue={});var xe=ue.pixelRatio;xe===void 0&&(xe=1);var ke=ue.sdf;ke===void 0&&(ke=!1);var Le=ue.stretchX,Ve=ue.stretchY,Je=ue.content;if(this._lazyInitEmptyStyle(),ae instanceof Zs||ls&&ae instanceof ls){var at=e.browser.getImageData(ae),_t=at.width,Et=at.height,kt=at.data;this.style.addImage(q,{data:new e.RGBAImage({width:_t,height:Et},kt),pixelRatio:xe,stretchX:Le,stretchY:Ve,content:Je,sdf:ke,version:0})}else{if(ae.width===void 0||ae.height===void 0)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var At=ae.width,xt=ae.height,zt=ae.data,Ot=ae;this.style.addImage(q,{data:new e.RGBAImage({width:At,height:xt},new Uint8Array(zt)),pixelRatio:xe,stretchX:Le,stretchY:Ve,content:Je,sdf:ke,version:0,userImage:Ot}),Ot.onAdd&&Ot.onAdd(this,q)}},R.prototype.updateImage=function(q,ae){var ue=this.style.getImage(q);if(!ue)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var xe=ae instanceof Zs||ls&&ae instanceof ls?e.browser.getImageData(ae):ae,ke=xe.width,Le=xe.height,Ve=xe.data;if(ke===void 0||Le===void 0)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(ke!==ue.data.width||Le!==ue.data.height)return this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var Je=!(ae instanceof Zs||ls&&ae instanceof ls);ue.data.replace(Ve,Je),this.style.updateImage(q,ue)},R.prototype.hasImage=function(q){return q?!!this.style.getImage(q):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},R.prototype.removeImage=function(q){this.style.removeImage(q)},R.prototype.loadImage=function(q,ae){e.getImage(this._requestManager.transformRequest(q,e.ResourceType.Image),ae)},R.prototype.listImages=function(){return this.style.listImages()},R.prototype.addLayer=function(q,ae){return this._lazyInitEmptyStyle(),this.style.addLayer(q,ae),this._update(!0)},R.prototype.moveLayer=function(q,ae){return this.style.moveLayer(q,ae),this._update(!0)},R.prototype.removeLayer=function(q){return this.style.removeLayer(q),this._update(!0)},R.prototype.getLayer=function(q){return this.style.getLayer(q)},R.prototype.setLayerZoomRange=function(q,ae,ue){return this.style.setLayerZoomRange(q,ae,ue),this._update(!0)},R.prototype.setFilter=function(q,ae,ue){return ue===void 0&&(ue={}),this.style.setFilter(q,ae,ue),this._update(!0)},R.prototype.getFilter=function(q){return this.style.getFilter(q)},R.prototype.setPaintProperty=function(q,ae,ue,xe){return xe===void 0&&(xe={}),this.style.setPaintProperty(q,ae,ue,xe),this._update(!0)},R.prototype.getPaintProperty=function(q,ae){return this.style.getPaintProperty(q,ae)},R.prototype.setLayoutProperty=function(q,ae,ue,xe){return xe===void 0&&(xe={}),this.style.setLayoutProperty(q,ae,ue,xe),this._update(!0)},R.prototype.getLayoutProperty=function(q,ae){return this.style.getLayoutProperty(q,ae)},R.prototype.setLight=function(q,ae){return ae===void 0&&(ae={}),this._lazyInitEmptyStyle(),this.style.setLight(q,ae),this._update(!0)},R.prototype.getLight=function(){return this.style.getLight()},R.prototype.setFeatureState=function(q,ae){return this.style.setFeatureState(q,ae),this._update()},R.prototype.removeFeatureState=function(q,ae){return this.style.removeFeatureState(q,ae),this._update()},R.prototype.getFeatureState=function(q){return this.style.getFeatureState(q)},R.prototype.getContainer=function(){return this._container},R.prototype.getCanvasContainer=function(){return this._canvasContainer},R.prototype.getCanvas=function(){return this._canvas},R.prototype._containerDimensions=function(){var q=0,ae=0;return this._container&&(q=this._container.clientWidth||400,ae=this._container.clientHeight||300),[q,ae]},R.prototype._detectMissingCSS=function(){e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},R.prototype._setupContainer=function(){var q=this._container;q.classList.add("mapboxgl-map"),(this._missingCSSCanary=r.create("div","mapboxgl-canary",q)).style.visibility="hidden",this._detectMissingCSS();var ae=this._canvasContainer=r.create("div","mapboxgl-canvas-container",q);this._interactive&&ae.classList.add("mapboxgl-interactive"),this._canvas=r.create("canvas","mapboxgl-canvas",ae),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var ue=this._containerDimensions();this._resizeCanvas(ue[0],ue[1]);var xe=this._controlContainer=r.create("div","mapboxgl-control-container",q),ke=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Le){ke[Le]=r.create("div","mapboxgl-ctrl-"+Le,xe)})},R.prototype._resizeCanvas=function(q,ae){var ue=e.browser.devicePixelRatio||1;this._canvas.width=ue*q,this._canvas.height=ue*ae,this._canvas.style.width=q+"px",this._canvas.style.height=ae+"px"},R.prototype._setupPainter=function(){var q=e.extend({},t.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),ae=this._canvas.getContext("webgl",q)||this._canvas.getContext("experimental-webgl",q);ae?(this.painter=new za(ae,this.transform),e.webpSupported.testSupport(ae)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))},R.prototype._contextLost=function(q){q.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:q}))},R.prototype._contextRestored=function(q){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:q}))},R.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},R.prototype._update=function(q){return this.style?(this._styleDirty=this._styleDirty||q,this._sourcesDirty=!0,this.triggerRepaint(),this):this},R.prototype._requestRenderFrame=function(q){return this._update(),this._renderTaskQueue.add(q)},R.prototype._cancelRenderFrame=function(q){this._renderTaskQueue.remove(q)},R.prototype._render=function(q){var ae,ue=this,xe=0,ke=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(ae=ke.createQueryEXT(),ke.beginQueryEXT(ke.TIME_ELAPSED_EXT,ae),xe=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(q),!this._removed){var Le=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Ve=this.transform.zoom,Je=e.browser.now();this.style.zoomHistory.update(Ve,Je);var at=new e.EvaluationParameters(Ve,{now:Je,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),_t=at.crossFadingFactor();_t===1&&_t===this._crossFadingFactor||(Le=!0,this._crossFadingFactor=_t),this.style.update(at)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||Le)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Et=e.browser.now()-xe;ke.endQueryEXT(ke.TIME_ELAPSED_EXT,ae),setTimeout(function(){var At=ke.getQueryObjectEXT(ae,ke.QUERY_RESULT_EXT)/1e6;ke.deleteQueryEXT(ae),ue.fire(new e.Event("gpu-timing-frame",{cpuTime:Et,gpuTime:At}))},50)}if(this.listens("gpu-timing-layer")){var kt=this.painter.collectGpuTimers();setTimeout(function(){var At=ue.painter.queryGpuTimers(kt);ue.fire(new e.Event("gpu-timing-layer",{layerTimes:At}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new e.Event("idle"))),this}},R.prototype.remove=function(){this._hash&&this._hash.remove();for(var q=0,ae=this._controls;q<ae.length;q+=1)ae[q].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),e.window!==void 0&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var ue=this.painter.context.gl.getExtension("WEBGL_lose_context");ue&&ue.loseContext(),cl(this._canvasContainer),cl(this._controlContainer),cl(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},R.prototype.triggerRepaint=function(){var q=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(ae){q._frame=null,q._render(ae)}))},R.prototype._onWindowOnline=function(){this._update()},R.prototype._onWindowResize=function(q){this._trackResize&&this.resize({originalEvent:q})._update()},F.showTileBoundaries.get=function(){return!!this._showTileBoundaries},F.showTileBoundaries.set=function(q){this._showTileBoundaries!==q&&(this._showTileBoundaries=q,this._update())},F.showPadding.get=function(){return!!this._showPadding},F.showPadding.set=function(q){this._showPadding!==q&&(this._showPadding=q,this._update())},F.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},F.showCollisionBoxes.set=function(q){this._showCollisionBoxes!==q&&(this._showCollisionBoxes=q,q?this.style._generateCollisionBoxes():this._update())},F.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},F.showOverdrawInspector.set=function(q){this._showOverdrawInspector!==q&&(this._showOverdrawInspector=q,this._update())},F.repaint.get=function(){return!!this._repaint},F.repaint.set=function(q){this._repaint!==q&&(this._repaint=q,this.triggerRepaint())},F.vertices.get=function(){return!!this._vertices},F.vertices.set=function(q){this._vertices=q,this._update()},R.prototype._setCacheLimits=function(q,ae){e.setCacheLimits(q,ae)},F.version.get=function(){return e.version},Object.defineProperties(R.prototype,F),R}(Ws);function cl(C){C.parentNode&&C.parentNode.removeChild(C)}var Ds={showCompass:!0,showZoom:!0,visualizePitch:!1},$a=function(C){var R=this;this.options=e.extend({},Ds,C),this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(F){return F.preventDefault()}),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(F){return R._map.zoomIn({},{originalEvent:F})}),r.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(F){return R._map.zoomOut({},{originalEvent:F})}),r.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(F){R.options.visualizePitch?R._map.resetNorthPitch({},{originalEvent:F}):R._map.resetNorth({},{originalEvent:F})}),this._compassIcon=r.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};$a.prototype._updateZoomButtons=function(){var C=this._map.getZoom();this._zoomInButton.disabled=C===this._map.getMaxZoom(),this._zoomOutButton.disabled=C===this._map.getMinZoom()},$a.prototype._rotateCompassArrow=function(){var C=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=C},$a.prototype.onAdd=function(C){return this._map=C,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ii(this._map,this._compass,this.options.visualizePitch)),this._container},$a.prototype.onRemove=function(){r.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},$a.prototype._createButton=function(C,R){var F=r.create("button",C,this._container);return F.type="button",F.addEventListener("click",R),F},$a.prototype._setButtonTitle=function(C,R){var F=this._map._getUIString("NavigationControl."+R);C.title=F,C.setAttribute("aria-label",F)};var ii=function(C,R,F){F===void 0&&(F=!1),this._clickTolerance=10,this.element=R,this.mouseRotate=new Ca({clickTolerance:C.dragRotate._mouseRotate._clickTolerance}),this.map=C,F&&(this.mousePitch=new ga({clickTolerance:C.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),r.addEventListener(R,"mousedown",this.mousedown),r.addEventListener(R,"touchstart",this.touchstart,{passive:!1}),r.addEventListener(R,"touchmove",this.touchmove),r.addEventListener(R,"touchend",this.touchend),r.addEventListener(R,"touchcancel",this.reset)};function _s(C,R,F){if(C=new e.LngLat(C.lng,C.lat),R){var q=new e.LngLat(C.lng-360,C.lat),ae=new e.LngLat(C.lng+360,C.lat),ue=F.locationPoint(C).distSqr(R);F.locationPoint(q).distSqr(R)<ue?C=q:F.locationPoint(ae).distSqr(R)<ue&&(C=ae)}for(;Math.abs(C.lng-F.center.lng)>180;){var xe=F.locationPoint(C);if(xe.x>=0&&xe.y>=0&&xe.x<=F.width&&xe.y<=F.height)break;C.lng>F.center.lng?C.lng-=360:C.lng+=360}return C}ii.prototype.down=function(C,R){this.mouseRotate.mousedown(C,R),this.mousePitch&&this.mousePitch.mousedown(C,R),r.disableDrag()},ii.prototype.move=function(C,R){var F=this.map,q=this.mouseRotate.mousemoveWindow(C,R);if(q&&q.bearingDelta&&F.setBearing(F.getBearing()+q.bearingDelta),this.mousePitch){var ae=this.mousePitch.mousemoveWindow(C,R);ae&&ae.pitchDelta&&F.setPitch(F.getPitch()+ae.pitchDelta)}},ii.prototype.off=function(){var C=this.element;r.removeEventListener(C,"mousedown",this.mousedown),r.removeEventListener(C,"touchstart",this.touchstart,{passive:!1}),r.removeEventListener(C,"touchmove",this.touchmove),r.removeEventListener(C,"touchend",this.touchend),r.removeEventListener(C,"touchcancel",this.reset),this.offTemp()},ii.prototype.offTemp=function(){r.enableDrag(),r.removeEventListener(e.window,"mousemove",this.mousemove),r.removeEventListener(e.window,"mouseup",this.mouseup)},ii.prototype.mousedown=function(C){this.down(e.extend({},C,{ctrlKey:!0,preventDefault:function(){return C.preventDefault()}}),r.mousePos(this.element,C)),r.addEventListener(e.window,"mousemove",this.mousemove),r.addEventListener(e.window,"mouseup",this.mouseup)},ii.prototype.mousemove=function(C){this.move(C,r.mousePos(this.element,C))},ii.prototype.mouseup=function(C){this.mouseRotate.mouseupWindow(C),this.mousePitch&&this.mousePitch.mouseupWindow(C),this.offTemp()},ii.prototype.touchstart=function(C){C.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=r.touchPos(this.element,C.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return C.preventDefault()}},this._startPos))},ii.prototype.touchmove=function(C){C.targetTouches.length!==1?this.reset():(this._lastPos=r.touchPos(this.element,C.targetTouches)[0],this.move({preventDefault:function(){return C.preventDefault()}},this._lastPos))},ii.prototype.touchend=function(C){C.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},ii.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var ds={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Pi(C,R,F){var q=C.classList;for(var ae in ds)q.remove("mapboxgl-"+F+"-anchor-"+ae);q.add("mapboxgl-"+F+"-anchor-"+R)}var ws,zs=function(C){function R(F,q){var ae=this;if(C.call(this),(F instanceof e.window.HTMLElement||q)&&(F=e.extend({element:F},q)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=F&&F.anchor||"center",this._color=F&&F.color||"#3FB1CE",this._draggable=F&&F.draggable||!1,this._state="inactive",this._rotation=F&&F.rotation||0,this._rotationAlignment=F&&F.rotationAlignment||"auto",this._pitchAlignment=F&&F.pitchAlignment&&F.pitchAlignment!=="auto"?F.pitchAlignment:this._rotationAlignment,F&&F.element)this._element=F.element,this._offset=e.Point.convert(F&&F.offset||[0,0]);else{this._defaultMarker=!0,this._element=r.create("div"),this._element.setAttribute("aria-label","Map marker");var ue=r.createNS("http://www.w3.org/2000/svg","svg");ue.setAttributeNS(null,"display","block"),ue.setAttributeNS(null,"height","41px"),ue.setAttributeNS(null,"width","27px"),ue.setAttributeNS(null,"viewBox","0 0 27 41");var xe=r.createNS("http://www.w3.org/2000/svg","g");xe.setAttributeNS(null,"stroke","none"),xe.setAttributeNS(null,"stroke-width","1"),xe.setAttributeNS(null,"fill","none"),xe.setAttributeNS(null,"fill-rule","evenodd");var ke=r.createNS("http://www.w3.org/2000/svg","g");ke.setAttributeNS(null,"fill-rule","nonzero");var Le=r.createNS("http://www.w3.org/2000/svg","g");Le.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Le.setAttributeNS(null,"fill","#000000");for(var Ve=0,Je=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Ve<Je.length;Ve+=1){var at=Je[Ve],_t=r.createNS("http://www.w3.org/2000/svg","ellipse");_t.setAttributeNS(null,"opacity","0.04"),_t.setAttributeNS(null,"cx","10.5"),_t.setAttributeNS(null,"cy","5.80029008"),_t.setAttributeNS(null,"rx",at.rx),_t.setAttributeNS(null,"ry",at.ry),Le.appendChild(_t)}var Et=r.createNS("http://www.w3.org/2000/svg","g");Et.setAttributeNS(null,"fill",this._color);var kt=r.createNS("http://www.w3.org/2000/svg","path");kt.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Et.appendChild(kt);var At=r.createNS("http://www.w3.org/2000/svg","g");At.setAttributeNS(null,"opacity","0.25"),At.setAttributeNS(null,"fill","#000000");var xt=r.createNS("http://www.w3.org/2000/svg","path");xt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),At.appendChild(xt);var zt=r.createNS("http://www.w3.org/2000/svg","g");zt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),zt.setAttributeNS(null,"fill","#FFFFFF");var Ot=r.createNS("http://www.w3.org/2000/svg","g");Ot.setAttributeNS(null,"transform","translate(8.0, 8.0)");var jt=r.createNS("http://www.w3.org/2000/svg","circle");jt.setAttributeNS(null,"fill","#000000"),jt.setAttributeNS(null,"opacity","0.25"),jt.setAttributeNS(null,"cx","5.5"),jt.setAttributeNS(null,"cy","5.5"),jt.setAttributeNS(null,"r","5.4999962");var rr=r.createNS("http://www.w3.org/2000/svg","circle");rr.setAttributeNS(null,"fill","#FFFFFF"),rr.setAttributeNS(null,"cx","5.5"),rr.setAttributeNS(null,"cy","5.5"),rr.setAttributeNS(null,"r","5.4999962"),Ot.appendChild(jt),Ot.appendChild(rr),ke.appendChild(Le),ke.appendChild(Et),ke.appendChild(At),ke.appendChild(zt),ke.appendChild(Ot),ue.appendChild(ke),this._element.appendChild(ue),this._offset=e.Point.convert(F&&F.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(dr){dr.preventDefault()}),this._element.addEventListener("mousedown",function(dr){dr.preventDefault()}),this._element.addEventListener("focus",function(){var dr=ae._map.getContainer();dr.scrollTop=0,dr.scrollLeft=0}),Pi(this._element,this._anchor,"marker"),this._popup=null}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.addTo=function(F){return this.remove(),this._map=F,F.getCanvasContainer().appendChild(this._element),F.on("move",this._update),F.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},R.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),r.remove(this._element),this._popup&&this._popup.remove(),this},R.prototype.getLngLat=function(){return this._lngLat},R.prototype.setLngLat=function(F){return this._lngLat=e.LngLat.convert(F),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},R.prototype.getElement=function(){return this._element},R.prototype.setPopup=function(F){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),F){if(!("offset"in F.options)){var q=Math.sqrt(Math.pow(13.5,2)/2);F.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[q,-1*(24.6+q)],"bottom-right":[-q,-1*(24.6+q)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=F,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},R.prototype._onKeyPress=function(F){var q=F.code,ae=F.charCode||F.keyCode;q!=="Space"&&q!=="Enter"&&ae!==32&&ae!==13||this.togglePopup()},R.prototype._onMapClick=function(F){var q=F.originalEvent.target,ae=this._element;this._popup&&(q===ae||ae.contains(q))&&this.togglePopup()},R.prototype.getPopup=function(){return this._popup},R.prototype.togglePopup=function(){var F=this._popup;return F?(F.isOpen()?F.remove():F.addTo(this._map),this):this},R.prototype._update=function(F){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=_s(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var q="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?q="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(q="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var ae="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?ae="rotateX(0deg)":this._pitchAlignment==="map"&&(ae="rotateX("+this._map.getPitch()+"deg)"),F&&F.type!=="moveend"||(this._pos=this._pos.round()),r.setTransform(this._element,ds[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+ae+" "+q)}},R.prototype.getOffset=function(){return this._offset},R.prototype.setOffset=function(F){return this._offset=e.Point.convert(F),this._update(),this},R.prototype._onMove=function(F){this._pos=F.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},R.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new e.Event("dragend")),this._state="inactive"},R.prototype._addDragHandler=function(F){this._element.contains(F.originalEvent.target)&&(F.preventDefault(),this._positionDelta=F.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},R.prototype.setDraggable=function(F){return this._draggable=!!F,this._map&&(F?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},R.prototype.isDraggable=function(){return this._draggable},R.prototype.setRotation=function(F){return this._rotation=F||0,this._update(),this},R.prototype.getRotation=function(){return this._rotation},R.prototype.setRotationAlignment=function(F){return this._rotationAlignment=F||"auto",this._update(),this},R.prototype.getRotationAlignment=function(){return this._rotationAlignment},R.prototype.setPitchAlignment=function(F){return this._pitchAlignment=F&&F!=="auto"?F:this._rotationAlignment,this._update(),this},R.prototype.getPitchAlignment=function(){return this._pitchAlignment},R}(e.Evented),Ss={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Rs=0,ms=!1,ul=function(C){function R(F){C.call(this),this.options=e.extend({},Ss,F),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.onAdd=function(F){var q;return this._map=F,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),q=this._setupUI,ws!==void 0?q(ws):e.window.navigator.permissions!==void 0?e.window.navigator.permissions.query({name:"geolocation"}).then(function(ae){ws=ae.state!=="denied",q(ws)}):(ws=!!e.window.navigator.geolocation,q(ws)),this._container},R.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),r.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Rs=0,ms=!1},R.prototype._isOutOfMapMaxBounds=function(F){var q=this._map.getMaxBounds(),ae=F.coords;return q&&(ae.longitude<q.getWest()||ae.longitude>q.getEast()||ae.latitude<q.getSouth()||ae.latitude>q.getNorth())},R.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},R.prototype._onSuccess=function(F){if(this._map){if(this._isOutOfMapMaxBounds(F))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",F)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=F,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(F),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(F),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",F)),this._finish()}},R.prototype._updateCamera=function(F){var q=new e.LngLat(F.coords.longitude,F.coords.latitude),ae=F.coords.accuracy,ue=this._map.getBearing(),xe=e.extend({bearing:ue},this.options.fitBoundsOptions);this._map.fitBounds(q.toBounds(ae),xe,{geolocateSource:!0})},R.prototype._updateMarker=function(F){if(F){var q=new e.LngLat(F.coords.longitude,F.coords.latitude);this._accuracyCircleMarker.setLngLat(q).addTo(this._map),this._userLocationDotMarker.setLngLat(q).addTo(this._map),this._accuracy=F.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},R.prototype._updateCircleRadius=function(){var F=this._map._container.clientHeight/2,q=this._map.unproject([0,F]),ae=this._map.unproject([1,F]),ue=q.distanceTo(ae),xe=Math.ceil(2*this._accuracy/ue);this._circleElement.style.width=xe+"px",this._circleElement.style.height=xe+"px"},R.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},R.prototype._onError=function(F){if(this._map){if(this.options.trackUserLocation)if(F.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var q=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=q,this._geolocateButton.setAttribute("aria-label",q),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(F.code===3&&ms)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",F)),this._finish()}},R.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},R.prototype._setupUI=function(F){var q=this;if(this._container.addEventListener("contextmenu",function(xe){return xe.preventDefault()}),this._geolocateButton=r.create("button","mapboxgl-ctrl-geolocate",this._container),r.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",F===!1){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var ae=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=ae,this._geolocateButton.setAttribute("aria-label",ae)}else{var ue=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=ue,this._geolocateButton.setAttribute("aria-label",ue)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=r.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new zs(this._dotElement),this._circleElement=r.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new zs({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(xe){var ke=xe.originalEvent&&xe.originalEvent.type==="resize";xe.geolocateSource||q._watchState!=="ACTIVE_LOCK"||ke||(q._watchState="BACKGROUND",q._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),q._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),q.fire(new e.Event("trackuserlocationend")))})},R.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Rs--,ms=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var F;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Rs>1?(F={maximumAge:6e5,timeout:0},ms=!0):(F=this.options.positionOptions,ms=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,F)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},R.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},R}(e.Evented),_l={maxWidth:100,unit:"metric"},Ts=function(C){this.options=e.extend({},_l,C),e.bindAll(["_onMove","setUnit"],this)};function fl(C,R,F){var q=F&&F.maxWidth||100,ae=C._container.clientHeight/2,ue=C.unproject([0,ae]),xe=C.unproject([q,ae]),ke=ue.distanceTo(xe);if(F&&F.unit==="imperial"){var Le=3.2808*ke;Le>5280?Fs(R,q,Le/5280,C._getUIString("ScaleControl.Miles")):Fs(R,q,Le,C._getUIString("ScaleControl.Feet"))}else F&&F.unit==="nautical"?Fs(R,q,ke/1852,C._getUIString("ScaleControl.NauticalMiles")):ke>=1e3?Fs(R,q,ke/1e3,C._getUIString("ScaleControl.Kilometers")):Fs(R,q,ke,C._getUIString("ScaleControl.Meters"))}function Fs(C,R,F,q){var ae,ue,xe,ke=(ae=F,ue=Math.pow(10,(""+Math.floor(ae)).length-1),xe=(xe=ae/ue)>=10?10:xe>=5?5:xe>=3?3:xe>=2?2:xe>=1?1:function(Ve){var Je=Math.pow(10,Math.ceil(-Math.log(Ve)/Math.LN10));return Math.round(Ve*Je)/Je}(xe),ue*xe),Le=ke/F;C.style.width=R*Le+"px",C.innerHTML=ke+"&nbsp;"+q}Ts.prototype.getDefaultPosition=function(){return"bottom-left"},Ts.prototype._onMove=function(){fl(this._map,this._container,this.options)},Ts.prototype.onAdd=function(C){return this._map=C,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",C.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ts.prototype.onRemove=function(){r.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ts.prototype.setUnit=function(C){this.options.unit=C,fl(this._map,this._container,this.options)};var ao=function(C){this._fullscreen=!1,C&&C.container&&(C.container instanceof e.window.HTMLElement?this._container=C.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};ao.prototype.onAdd=function(C){return this._map=C,this._container||(this._container=this._map.getContainer()),this._controlContainer=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},ao.prototype.onRemove=function(){r.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},ao.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},ao.prototype._setupUI=function(){var C=this._fullscreenButton=r.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);r.create("span","mapboxgl-ctrl-icon",C).setAttribute("aria-hidden",!0),C.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},ao.prototype._updateTitle=function(){var C=this._getTitle();this._fullscreenButton.setAttribute("aria-label",C),this._fullscreenButton.title=C},ao.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},ao.prototype._isFullscreen=function(){return this._fullscreen},ao.prototype._changeIcon=function(){(e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},ao.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var wl={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Tl=function(C){function R(F){C.call(this),this.options=e.extend(Object.create(wl),F),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return C&&(R.__proto__=C),R.prototype=Object.create(C&&C.prototype),R.prototype.constructor=R,R.prototype.addTo=function(F){return this._map&&this.remove(),this._map=F,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},R.prototype.isOpen=function(){return!!this._map},R.prototype.remove=function(){return this._content&&r.remove(this._content),this._container&&(r.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},R.prototype.getLngLat=function(){return this._lngLat},R.prototype.setLngLat=function(F){return this._lngLat=e.LngLat.convert(F),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},R.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},R.prototype.getElement=function(){return this._container},R.prototype.setText=function(F){return this.setDOMContent(e.window.document.createTextNode(F))},R.prototype.setHTML=function(F){var q,ae=e.window.document.createDocumentFragment(),ue=e.window.document.createElement("body");for(ue.innerHTML=F;q=ue.firstChild;)ae.appendChild(q);return this.setDOMContent(ae)},R.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},R.prototype.setMaxWidth=function(F){return this.options.maxWidth=F,this._update(),this},R.prototype.setDOMContent=function(F){return this._createContent(),this._content.appendChild(F),this._update(),this},R.prototype.addClassName=function(F){this._container&&this._container.classList.add(F)},R.prototype.removeClassName=function(F){this._container&&this._container.classList.remove(F)},R.prototype.toggleClassName=function(F){if(this._container)return this._container.classList.toggle(F)},R.prototype._createContent=function(){this._content&&r.remove(this._content),this._content=r.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=r.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},R.prototype._onMouseUp=function(F){this._update(F.point)},R.prototype._onMouseMove=function(F){this._update(F.point)},R.prototype._onDrag=function(F){this._update(F.point)},R.prototype._update=function(F){var q=this,ae=this._lngLat||this._trackPointer;if(this._map&&ae&&this._content&&(this._container||(this._container=r.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=r.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(_t){return q._container.classList.add(_t)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=_s(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||F)){var ue=this._pos=this._trackPointer&&F?F:this._map.project(this._lngLat),xe=this.options.anchor,ke=function _t(Et){if(Et){if(typeof Et=="number"){var kt=Math.round(Math.sqrt(.5*Math.pow(Et,2)));return{center:new e.Point(0,0),top:new e.Point(0,Et),"top-left":new e.Point(kt,kt),"top-right":new e.Point(-kt,kt),bottom:new e.Point(0,-Et),"bottom-left":new e.Point(kt,-kt),"bottom-right":new e.Point(-kt,-kt),left:new e.Point(Et,0),right:new e.Point(-Et,0)}}if(Et instanceof e.Point||Array.isArray(Et)){var At=e.Point.convert(Et);return{center:At,top:At,"top-left":At,"top-right":At,bottom:At,"bottom-left":At,"bottom-right":At,left:At,right:At}}return{center:e.Point.convert(Et.center||[0,0]),top:e.Point.convert(Et.top||[0,0]),"top-left":e.Point.convert(Et["top-left"]||[0,0]),"top-right":e.Point.convert(Et["top-right"]||[0,0]),bottom:e.Point.convert(Et.bottom||[0,0]),"bottom-left":e.Point.convert(Et["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(Et["bottom-right"]||[0,0]),left:e.Point.convert(Et.left||[0,0]),right:e.Point.convert(Et.right||[0,0])}}return _t(new e.Point(0,0))}(this.options.offset);if(!xe){var Le,Ve=this._container.offsetWidth,Je=this._container.offsetHeight;Le=ue.y+ke.bottom.y<Je?["top"]:ue.y>this._map.transform.height-Je?["bottom"]:[],ue.x<Ve/2?Le.push("left"):ue.x>this._map.transform.width-Ve/2&&Le.push("right"),xe=Le.length===0?"bottom":Le.join("-")}var at=ue.add(ke[xe]).round();r.setTransform(this._container,ds[xe]+" translate("+at.x+"px,"+at.y+"px)"),Pi(this._container,xe,"popup")}},R.prototype._onClose=function(){this.remove()},R}(e.Evented),ce={version:e.version,supported:t,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:Zo,NavigationControl:$a,GeolocateControl:ul,AttributionControl:Ri,ScaleControl:Ts,FullscreenControl:ao,Popup:Tl,Marker:zs,Style:Tn,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:function(){rt().acquire(st)},clearPrewarmedResources:function(){var C=Tt;C&&(C.isPreloaded()&&C.numActive()===1?(C.release(st),Tt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(C){e.config.ACCESS_TOKEN=C},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(C){e.config.API_URL=C},get workerCount(){return it.workerCount},set workerCount(C){it.workerCount=C},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(C){e.config.MAX_PARALLEL_IMAGE_REQUESTS=C},clearStorage:function(C){e.clearTileCache(C)},workerUrl:""};return ce}),k})},{}],240:[function(g,Q,X){Q.exports=Math.log2||function(m){return Math.log(m)*Math.LOG2E}},{}],241:[function(g,Q,X){Q.exports=function(v,k){k||(k=v,v=window);var x=0,e=0,t=0,r={shift:!1,alt:!1,control:!1,meta:!1},l=!1;function n(y){var f=!1;return"altKey"in y&&(f=f||y.altKey!==r.alt,r.alt=!!y.altKey),"shiftKey"in y&&(f=f||y.shiftKey!==r.shift,r.shift=!!y.shiftKey),"ctrlKey"in y&&(f=f||y.ctrlKey!==r.control,r.control=!!y.ctrlKey),"metaKey"in y&&(f=f||y.metaKey!==r.meta,r.meta=!!y.metaKey),f}function d(y,f){var w=m.x(f),b=m.y(f);"buttons"in f&&(y=0|f.buttons),(y!==x||w!==e||b!==t||n(f))&&(x=0|y,e=w||0,t=b||0,k&&k(x,e,t,r))}function u(y){d(0,y)}function o(){(x||e||t||r.shift||r.alt||r.meta||r.control)&&(e=t=0,x=0,r.shift=r.alt=r.control=r.meta=!1,k&&k(0,0,0,r))}function h(y){n(y)&&k&&k(x,e,t,r)}function s(y){m.buttons(y)===0?d(0,y):d(x,y)}function a(y){d(x|m.buttons(y),y)}function p(y){d(x&~m.buttons(y),y)}function c(){l||(l=!0,v.addEventListener("mousemove",s),v.addEventListener("mousedown",a),v.addEventListener("mouseup",p),v.addEventListener("mouseleave",u),v.addEventListener("mouseenter",u),v.addEventListener("mouseout",u),v.addEventListener("mouseover",u),v.addEventListener("blur",o),v.addEventListener("keyup",h),v.addEventListener("keydown",h),v.addEventListener("keypress",h),v!==window&&(window.addEventListener("blur",o),window.addEventListener("keyup",h),window.addEventListener("keydown",h),window.addEventListener("keypress",h)))}c();var i={element:v};return Object.defineProperties(i,{enabled:{get:function(){return l},set:function(y){y?c():function(){!l||(l=!1,v.removeEventListener("mousemove",s),v.removeEventListener("mousedown",a),v.removeEventListener("mouseup",p),v.removeEventListener("mouseleave",u),v.removeEventListener("mouseenter",u),v.removeEventListener("mouseout",u),v.removeEventListener("mouseover",u),v.removeEventListener("blur",o),v.removeEventListener("keyup",h),v.removeEventListener("keydown",h),v.removeEventListener("keypress",h),v!==window&&(window.removeEventListener("blur",o),window.removeEventListener("keyup",h),window.removeEventListener("keydown",h),window.removeEventListener("keypress",h)))}()},enumerable:!0},buttons:{get:function(){return x},enumerable:!0},x:{get:function(){return e},enumerable:!0},y:{get:function(){return t},enumerable:!0},mods:{get:function(){return r},enumerable:!0}}),i};var m=g("mouse-event")},{"mouse-event":243}],242:[function(g,Q,X){var m={left:0,top:0};Q.exports=function(v,k,x){k=k||v.currentTarget||v.srcElement,Array.isArray(x)||(x=[0,0]);var e=v.clientX||0,t=v.clientY||0,r=(l=k,l===window||l===document||l===document.body?m:l.getBoundingClientRect()),l;return x[0]=e-r.left,x[1]=t-r.top,x}},{}],243:[function(g,Q,X){function m(v){return v.target||v.srcElement||window}X.buttons=function(v){if(typeof v=="object"){if("buttons"in v)return v.buttons;if("which"in v){if((k=v.which)===2)return 4;if(k===3)return 2;if(k>0)return 1<<k-1}else if("button"in v){var k;if((k=v.button)===1)return 4;if(k===2)return 2;if(k>=0)return 1<<k}}return 0},X.element=m,X.x=function(v){if(typeof v=="object"){if("offsetX"in v)return v.offsetX;var k=m(v).getBoundingClientRect();return v.clientX-k.left}return 0},X.y=function(v){if(typeof v=="object"){if("offsetY"in v)return v.offsetY;var k=m(v).getBoundingClientRect();return v.clientY-k.top}return 0}},{}],244:[function(g,Q,X){var m=g("to-px");Q.exports=function(v,k,x){typeof v=="function"&&(x=!!k,k=v,v=window);var e=m("ex",v),t=function(r){x&&r.preventDefault();var l=r.deltaX||0,n=r.deltaY||0,d=r.deltaZ||0,u=1;switch(r.deltaMode){case 1:u=e;break;case 2:u=window.innerHeight}if(n*=u,d*=u,(l*=u)||n||d)return k(l,n,d,r)};return v.addEventListener("wheel",t),t}},{"to-px":315}],245:[function(g,Q,X){(function(m,v){(function(){/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(k,x,e){x[k]=x[k]||e(),Q!==void 0&&Q.exports&&(Q.exports=x[k])})("Promise",m!==void 0?m:this,function(){var k,x,e,t=Object.prototype.toString,r=v!==void 0?function(y){return v(y)}:setTimeout;try{Object.defineProperty({},"x",{}),k=function(y,f,w,b){return Object.defineProperty(y,f,{value:w,writable:!0,configurable:b!==!1})}}catch{k=function(f,w,b){return f[w]=b,f}}function l(y,f){e.add(y,f),x||(x=r(e.drain))}function n(y){var f,w=typeof y;return y==null||w!="object"&&w!="function"||(f=y.then),typeof f=="function"&&f}function d(){for(var y=0;y<this.chain.length;y++)u(this,this.state===1?this.chain[y].success:this.chain[y].failure,this.chain[y]);this.chain.length=0}function u(y,f,w){var b,_;try{f===!1?w.reject(y.msg):(b=f===!0?y.msg:f.call(void 0,y.msg))===w.promise?w.reject(TypeError("Promise-chain cycle")):(_=n(b))?_.call(b,w.resolve,w.reject):w.resolve(b)}catch(T){w.reject(T)}}function o(y){var f,w=this;if(!w.triggered){w.triggered=!0,w.def&&(w=w.def);try{(f=n(y))?l(function(){var b=new a(w);try{f.call(y,function(){o.apply(b,arguments)},function(){h.apply(b,arguments)})}catch(_){h.call(b,_)}}):(w.msg=y,w.state=1,w.chain.length>0&&l(d,w))}catch(b){h.call(new a(w),b)}}}function h(y){var f=this;f.triggered||(f.triggered=!0,f.def&&(f=f.def),f.msg=y,f.state=2,f.chain.length>0&&l(d,f))}function s(y,f,w,b){for(var _=0;_<f.length;_++)(function(T){y.resolve(f[T]).then(function(L){w(T,L)},b)})(_)}function a(y){this.def=y,this.triggered=!1}function p(y){this.promise=y,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function c(y){if(typeof y!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var f=new p(this);this.then=function(w,b){var _={success:typeof w!="function"||w,failure:typeof b=="function"&&b};return _.promise=new this.constructor(function(T,L){if(typeof T!="function"||typeof L!="function")throw TypeError("Not a function");_.resolve=T,_.reject=L}),f.chain.push(_),f.state!==0&&l(d,f),_.promise},this.catch=function(w){return this.then(void 0,w)};try{y.call(void 0,function(w){o.call(f,w)},function(w){h.call(f,w)})}catch(w){h.call(f,w)}}e=function(){var y,f,w;function b(_,T){this.fn=_,this.self=T,this.next=void 0}return{add:function(_,T){w=new b(_,T),f?f.next=w:y=w,f=w,w=void 0},drain:function(){var _=y;for(y=f=x=void 0;_;)_.fn.call(_.self),_=_.next}}}();var i=k({},"constructor",c,!1);return c.prototype=i,k(i,"__NPO__",0,!1),k(c,"resolve",function(y){return y&&typeof y=="object"&&y.__NPO__===1?y:new this(function(f,w){if(typeof f!="function"||typeof w!="function")throw TypeError("Not a function");f(y)})}),k(c,"reject",function(y){return new this(function(f,w){if(typeof f!="function"||typeof w!="function")throw TypeError("Not a function");w(y)})}),k(c,"all",function(y){var f=this;return t.call(y)!="[object Array]"?f.reject(TypeError("Not an array")):y.length===0?f.resolve([]):new f(function(w,b){if(typeof w!="function"||typeof b!="function")throw TypeError("Not a function");var _=y.length,T=Array(_),L=0;s(f,y,function(A,I){T[A]=I,++L===_&&w(T)},b)})}),k(c,"race",function(y){var f=this;return t.call(y)!="[object Array]"?f.reject(TypeError("Not an array")):new f(function(w,b){if(typeof w!="function"||typeof b!="function")throw TypeError("Not a function");s(f,y,function(_,T){w(T)},b)})}),c})}).call(this)}).call(this,typeof qi<"u"?qi:typeof self<"u"?self:typeof window<"u"?window:{},g("timers").setImmediate)},{timers:312}],246:[function(g,Q,X){var m=Math.PI,v=r(120);function k(l,n,d,u){return["C",l,n,d,u,d,u]}function x(l,n,d,u,o,h){return["C",l/3+2/3*d,n/3+2/3*u,o/3+2/3*d,h/3+2/3*u,o,h]}function e(l,n,d,u,o,h,s,a,p,c){if(c)I=c[0],P=c[1],L=c[2],A=c[3];else{var i=t(l,n,-o);l=i.x,n=i.y;var y=(l-(a=(i=t(a,p,-o)).x))/2,f=(n-(p=i.y))/2,w=y*y/(d*d)+f*f/(u*u);w>1&&(d*=w=Math.sqrt(w),u*=w);var b=d*d,_=u*u,T=(h==s?-1:1)*Math.sqrt(Math.abs((b*_-b*f*f-_*y*y)/(b*f*f+_*y*y)));T==1/0&&(T=1);var L=T*d*f/u+(l+a)/2,A=T*-u*y/d+(n+p)/2,I=Math.asin(((n-A)/u).toFixed(9)),P=Math.asin(((p-A)/u).toFixed(9));(I=l<L?m-I:I)<0&&(I=2*m+I),(P=a<L?m-P:P)<0&&(P=2*m+P),s&&I>P&&(I-=2*m),!s&&P>I&&(P-=2*m)}if(Math.abs(P-I)>v){var S=P,E=a,z=p;P=I+v*(s&&P>I?1:-1);var D=e(a=L+d*Math.cos(P),p=A+u*Math.sin(P),d,u,o,0,s,E,z,[P,S,L,A])}var U=Math.tan((P-I)/4),H=4/3*d*U,Y=4/3*u*U,J=[2*l-(l+H*Math.sin(I)),2*n-(n-Y*Math.cos(I)),a+H*Math.sin(P),p-Y*Math.cos(P),a,p];if(c)return J;D&&(J=J.concat(D));for(var W=0;W<J.length;){var Z=t(J[W],J[W+1],o);J[W++]=Z.x,J[W++]=Z.y}return J}function t(l,n,d){return{x:l*Math.cos(d)-n*Math.sin(d),y:l*Math.sin(d)+n*Math.cos(d)}}function r(l){return l*(m/180)}Q.exports=function(l){for(var n,d=[],u=0,o=0,h=0,s=0,a=null,p=null,c=0,i=0,y=0,f=l.length;y<f;y++){var w=l[y],b=w[0];switch(b){case"M":h=w[1],s=w[2];break;case"A":(w=e(c,i,w[1],w[2],r(w[3]),w[4],w[5],w[6],w[7])).unshift("C"),w.length>7&&(d.push(w.splice(0,7)),w.unshift("C"));break;case"S":var _=c,T=i;n!="C"&&n!="S"||(_+=_-u,T+=T-o),w=["C",_,T,w[1],w[2],w[3],w[4]];break;case"T":n=="Q"||n=="T"?(a=2*c-a,p=2*i-p):(a=c,p=i),w=x(c,i,a,p,w[1],w[2]);break;case"Q":a=w[1],p=w[2],w=x(c,i,w[1],w[2],w[3],w[4]);break;case"L":w=k(c,i,w[1],w[2]);break;case"H":w=k(c,i,w[1],i);break;case"V":w=k(c,i,c,w[1]);break;case"Z":w=k(c,i,h,s)}n=b,c=w[w.length-2],i=w[w.length-1],w.length>4?(u=w[w.length-4],o=w[w.length-3]):(u=c,o=i),d.push(w)}return d}},{}],247:[function(g,Q,X){var m=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;function x(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}Q.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if(Object.getOwnPropertyNames(t).map(function(n){return t[n]}).join("")!=="0123456789")return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(n){l[n]=n}),Object.keys(Object.assign({},l)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(e,t){for(var r,l,n=x(e),d=1;d<arguments.length;d++){for(var u in r=Object(arguments[d]))v.call(r,u)&&(n[u]=r[u]);if(m){l=m(r);for(var o=0;o<l.length;o++)k.call(r,l[o])&&(n[l[o]]=r[l[o]])}}return n}},{}],248:[function(g,Q,X){function m(x,e){if(typeof x!="string")return[x];var t=[x];typeof e=="string"||Array.isArray(e)?e={brackets:e}:e||(e={});var r=e.brackets?Array.isArray(e.brackets)?e.brackets:[e.brackets]:["{}","[]","()"],l=e.escape||"___",n=!!e.flat;r.forEach(function(u){var o=new RegExp(["\\",u[0],"[^\\",u[0],"\\",u[1],"]*\\",u[1]].join("")),h=[];function s(a,p,c){var i=t.push(a.slice(u[0].length,-u[1].length))-1;return h.push(i),l+i+l}t.forEach(function(a,p){for(var c,i=0;a!=c;)if(c=a,a=a.replace(o,s),i++>1e4)throw Error("References have circular dependency. Please, check them.");t[p]=a}),h=h.reverse(),t=t.map(function(a){return h.forEach(function(p){a=a.replace(new RegExp("(\\"+l+p+"\\"+l+")","g"),u[0]+"$1"+u[1])}),a})});var d=new RegExp("\\"+l+"([0-9]+)\\"+l);return n?t:function u(o,h,s){for(var a,p=[],c=0;a=d.exec(o);){if(c++>1e4)throw Error("Circular references in parenthesis");p.push(o.slice(0,a.index)),p.push(u(h[a[1]],h)),o=o.slice(a.index+a[0].length)}return p.push(o),p}(t[0],t)}function v(x,e){if(e&&e.flat){var t,r=e&&e.escape||"___",l=x[0];if(!l)return"";for(var n=new RegExp("\\"+r+"([0-9]+)\\"+r),d=0;l!=t;){if(d++>1e4)throw Error("Circular references in "+x);t=l,l=l.replace(n,u)}return l}return x.reduce(function o(h,s){return Array.isArray(s)&&(s=s.reduce(o,"")),h+s},"");function u(o,h){if(x[h]==null)throw Error("Reference "+h+"is undefined");return x[h]}}function k(x,e){return Array.isArray(x)?v(x,e):m(x,e)}k.parse=m,k.stringify=v,Q.exports=k},{}],249:[function(g,Q,X){var m=g("pick-by-alias");Q.exports=function(v){var k;return arguments.length>1&&(v=arguments),typeof v=="string"?v=v.split(/\s/).map(parseFloat):typeof v=="number"&&(v=[v]),v.length&&typeof v[0]=="number"?k=v.length===1?{width:v[0],height:v[0],x:0,y:0}:v.length===2?{width:v[0],height:v[1],x:0,y:0}:{x:v[0],y:v[1],width:v[2]-v[0]||0,height:v[3]-v[1]||0}:v&&(v=m(v,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),k={x:v.left||0,y:v.top||0},v.width==null?v.right?k.width=v.right-k.x:k.width=0:k.width=v.width,v.height==null?v.bottom?k.height=v.bottom-k.y:k.height=0:k.height=v.height),k}},{"pick-by-alias":253}],250:[function(g,Q,X){Q.exports=function(x){var e=[];return x.replace(v,function(t,r,l){var n=r.toLowerCase();for(l=function(d){var u=d.match(k);return u?u.map(Number):[]}(l),n=="m"&&l.length>2&&(e.push([r].concat(l.splice(0,2))),n="l",r=r=="m"?"l":"L");;){if(l.length==m[n])return l.unshift(r),e.push(l);if(l.length<m[n])throw new Error("malformed path data");e.push([r].concat(l.splice(0,m[n])))}}),e};var m={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},v=/([astvzqmhlc])([^astvzqmhlc]*)/gi,k=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},{}],251:[function(g,Q,X){Q.exports=function(m,v){v||(v=[0,""]),m=String(m);var k=parseFloat(m,10);return v[0]=k,v[1]=m.match(/[\d.\-\+]*\s*(.*)/)[1]||"",v}},{}],252:[function(g,Q,X){(function(m){(function(){(function(){var v,k,x,e,t,r;typeof performance<"u"&&performance!==null&&performance.now?Q.exports=function(){return performance.now()}:m!=null&&m.hrtime?(Q.exports=function(){return(v()-t)/1e6},k=m.hrtime,e=(v=function(){var l;return 1e9*(l=k())[0]+l[1]})(),r=1e9*m.uptime(),t=e-r):Date.now?(Q.exports=function(){return Date.now()-x},x=Date.now()):(Q.exports=function(){return new Date().getTime()-x},x=new Date().getTime())}).call(this)}).call(this)}).call(this,g("_process"))},{_process:278}],253:[function(g,Q,X){Q.exports=function(k,x,e){var t,r,l={};if(typeof x=="string"&&(x=v(x)),Array.isArray(x)){var n={};for(r=0;r<x.length;r++)n[x[r]]=!0;x=n}for(t in x)x[t]=v(x[t]);var d={};for(t in x){var u=x[t];if(Array.isArray(u))for(r=0;r<u.length;r++){var o=u[r];if(e&&(d[o]=!0),o in k){if(l[t]=k[o],e)for(var h=r;h<u.length;h++)d[u[h]]=!0;break}}else t in k&&(x[t]&&(l[t]=k[t]),e&&(d[t]=!0))}if(e)for(t in k)d[t]||(l[t]=k[t]);return l};var m={};function v(k){return m[k]?m[k]:(typeof k=="string"&&(k=m[k]=k.split(/\s*,\s*|\s+/)),k)}},{}],254:[function(g,Q,X){Q.exports=function(m,v,k,x){var e=m[0],t=m[1],r=!1;k===void 0&&(k=0),x===void 0&&(x=v.length);for(var l=x-k,n=0,d=l-1;n<l;d=n++){var u=v[n+k][0],o=v[n+k][1],h=v[d+k][0],s=v[d+k][1];o>t!=s>t&&e<(h-u)*(t-o)/(s-o)+u&&(r=!r)}return r}},{}],255:[function(g,Q,X){/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var m,v=g("./lib/build-log"),k=g("./lib/epsilon"),x=g("./lib/intersecter"),e=g("./lib/segment-chainer"),t=g("./lib/segment-selector"),r=g("./lib/geojson"),l=!1,n=k();function d(u,o,h){var s=m.segments(u),a=m.segments(o),p=h(m.combine(s,a));return m.polygon(p)}m={buildLog:function(u){return u===!0?l=v():u===!1&&(l=!1),l!==!1&&l.list},epsilon:function(u){return n.epsilon(u)},segments:function(u){var o=x(!0,n,l);return u.regions.forEach(o.addRegion),{segments:o.calculate(u.inverted),inverted:u.inverted}},combine:function(u,o){return{combined:x(!1,n,l).calculate(u.segments,u.inverted,o.segments,o.inverted),inverted1:u.inverted,inverted2:o.inverted}},selectUnion:function(u){return{segments:t.union(u.combined,l),inverted:u.inverted1||u.inverted2}},selectIntersect:function(u){return{segments:t.intersect(u.combined,l),inverted:u.inverted1&&u.inverted2}},selectDifference:function(u){return{segments:t.difference(u.combined,l),inverted:u.inverted1&&!u.inverted2}},selectDifferenceRev:function(u){return{segments:t.differenceRev(u.combined,l),inverted:!u.inverted1&&u.inverted2}},selectXor:function(u){return{segments:t.xor(u.combined,l),inverted:u.inverted1!==u.inverted2}},polygon:function(u){return{regions:e(u.segments,n,l),inverted:u.inverted}},polygonFromGeoJSON:function(u){return r.toPolygon(m,u)},polygonToGeoJSON:function(u){return r.fromPolygon(m,n,u)},union:function(u,o){return d(u,o,m.selectUnion)},intersect:function(u,o){return d(u,o,m.selectIntersect)},difference:function(u,o){return d(u,o,m.selectDifference)},differenceRev:function(u,o){return d(u,o,m.selectDifferenceRev)},xor:function(u,o){return d(u,o,m.selectXor)}},typeof window=="object"&&(window.PolyBool=m),Q.exports=m},{"./lib/build-log":256,"./lib/epsilon":257,"./lib/geojson":258,"./lib/intersecter":259,"./lib/segment-chainer":261,"./lib/segment-selector":262}],256:[function(g,Q,X){Q.exports=function(){var m,v=0,k=!1;function x(e,t){return m.list.push({type:e,data:t?JSON.parse(JSON.stringify(t)):void 0}),m}return m={list:[],segmentId:function(){return v++},checkIntersection:function(e,t){return x("check",{seg1:e,seg2:t})},segmentChop:function(e,t){return x("div_seg",{seg:e,pt:t}),x("chop",{seg:e,pt:t})},statusRemove:function(e){return x("pop_seg",{seg:e})},segmentUpdate:function(e){return x("seg_update",{seg:e})},segmentNew:function(e,t){return x("new_seg",{seg:e,primary:t})},segmentRemove:function(e){return x("rem_seg",{seg:e})},tempStatus:function(e,t,r){return x("temp_status",{seg:e,above:t,below:r})},rewind:function(e){return x("rewind",{seg:e})},status:function(e,t,r){return x("status",{seg:e,above:t,below:r})},vert:function(e){return e===k?m:(k=e,x("vert",{x:e}))},log:function(e){return typeof e!="string"&&(e=JSON.stringify(e,!1,"  ")),x("log",{txt:e})},reset:function(){return x("reset")},selected:function(e){return x("selected",{segs:e})},chainStart:function(e){return x("chain_start",{seg:e})},chainRemoveHead:function(e,t){return x("chain_rem_head",{index:e,pt:t})},chainRemoveTail:function(e,t){return x("chain_rem_tail",{index:e,pt:t})},chainNew:function(e,t){return x("chain_new",{pt1:e,pt2:t})},chainMatch:function(e){return x("chain_match",{index:e})},chainClose:function(e){return x("chain_close",{index:e})},chainAddHead:function(e,t){return x("chain_add_head",{index:e,pt:t})},chainAddTail:function(e,t){return x("chain_add_tail",{index:e,pt:t})},chainConnect:function(e,t){return x("chain_con",{index1:e,index2:t})},chainReverse:function(e){return x("chain_rev",{index:e})},chainJoin:function(e,t){return x("chain_join",{index1:e,index2:t})},done:function(){return x("done")}}}},{}],257:[function(g,Q,X){Q.exports=function(m){typeof m!="number"&&(m=1e-10);var v={epsilon:function(k){return typeof k=="number"&&(m=k),m},pointAboveOrOnLine:function(k,x,e){var t=x[0],r=x[1],l=e[0],n=e[1],d=k[0];return(l-t)*(k[1]-r)-(n-r)*(d-t)>=-m},pointBetween:function(k,x,e){var t=k[1]-x[1],r=e[0]-x[0],l=k[0]-x[0],n=e[1]-x[1],d=l*r+t*n;return!(d<m)&&!(d-(r*r+n*n)>-m)},pointsSameX:function(k,x){return Math.abs(k[0]-x[0])<m},pointsSameY:function(k,x){return Math.abs(k[1]-x[1])<m},pointsSame:function(k,x){return v.pointsSameX(k,x)&&v.pointsSameY(k,x)},pointsCompare:function(k,x){return v.pointsSameX(k,x)?v.pointsSameY(k,x)?0:k[1]<x[1]?-1:1:k[0]<x[0]?-1:1},pointsCollinear:function(k,x,e){var t=k[0]-x[0],r=k[1]-x[1],l=x[0]-e[0],n=x[1]-e[1];return Math.abs(t*n-l*r)<m},linesIntersect:function(k,x,e,t){var r=x[0]-k[0],l=x[1]-k[1],n=t[0]-e[0],d=t[1]-e[1],u=r*d-l*n;if(Math.abs(u)<m)return!1;var o=k[0]-e[0],h=k[1]-e[1],s=(n*h-d*o)/u,a=(r*h-l*o)/u,p={alongA:0,alongB:0,pt:[k[0]+s*r,k[1]+s*l]};return p.alongA=s<=-m?-2:s<m?-1:s-1<=-m?0:s-1<m?1:2,p.alongB=a<=-m?-2:a<m?-1:a-1<=-m?0:a-1<m?1:2,p},pointInsideRegion:function(k,x){for(var e=k[0],t=k[1],r=x[x.length-1][0],l=x[x.length-1][1],n=!1,d=0;d<x.length;d++){var u=x[d][0],o=x[d][1];o-t>m!=l-t>m&&(r-u)*(t-o)/(l-o)+u-e>m&&(n=!n),r=u,l=o}return n}};return v}},{}],258:[function(g,Q,X){var m={toPolygon:function(v,k){function x(r){if(r.length<=0)return v.segments({inverted:!1,regions:[]});function l(u){var o=u.slice(0,u.length-1);return v.segments({inverted:!1,regions:[o]})}for(var n=l(r[0]),d=1;d<r.length;d++)n=v.selectDifference(v.combine(n,l(r[d])));return n}if(k.type==="Polygon")return v.polygon(x(k.coordinates));if(k.type==="MultiPolygon"){for(var e=v.segments({inverted:!1,regions:[]}),t=0;t<k.coordinates.length;t++)e=v.selectUnion(v.combine(e,x(k.coordinates[t])));return v.polygon(e)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(v,k,x){function e(a,p){return k.pointInsideRegion([.5*(a[0][0]+a[1][0]),.5*(a[0][1]+a[1][1])],p)}function t(a){return{region:a,children:[]}}x=v.polygon(v.segments(x));var r=t(null);function l(a,p){for(var c=0;c<a.children.length;c++)if(e(p,(y=a.children[c]).region))return void l(y,p);var i=t(p);for(c=0;c<a.children.length;c++){var y;e((y=a.children[c]).region,p)&&(i.children.push(y),a.children.splice(c,1),c--)}a.children.push(i)}for(var n=0;n<x.regions.length;n++){var d=x.regions[n];d.length<3||l(r,d)}function u(a,p){for(var c=0,i=a[a.length-1][0],y=a[a.length-1][1],f=[],w=0;w<a.length;w++){var b=a[w][0],_=a[w][1];f.push([b,_]),c+=_*i-b*y,i=b,y=_}return c<0!==p&&f.reverse(),f.push([f[0][0],f[0][1]]),f}var o=[];function h(a){var p=[u(a.region,!1)];o.push(p);for(var c=0;c<a.children.length;c++)p.push(s(a.children[c]))}function s(a){for(var p=0;p<a.children.length;p++)h(a.children[p]);return u(a.region,!0)}for(n=0;n<r.children.length;n++)h(r.children[n]);return o.length<=0?{type:"Polygon",coordinates:[]}:o.length==1?{type:"Polygon",coordinates:o[0]}:{type:"MultiPolygon",coordinates:o}}};Q.exports=m},{}],259:[function(g,Q,X){var m=g("./linked-list");Q.exports=function(v,k,x){function e(u,o,h){return{id:x?x.segmentId():-1,start:u,end:o,myFill:{above:h.myFill.above,below:h.myFill.below},otherFill:null}}var t=m.create();function r(u,o){t.insertBefore(u,function(h){return function(s,a,p,c,i,y){var f=k.pointsCompare(a,i);return f!==0?f:k.pointsSame(p,y)?0:s!==c?s?1:-1:k.pointAboveOrOnLine(p,c?i:y,c?y:i)?1:-1}(u.isStart,u.pt,o,h.isStart,h.pt,h.other.pt)<0})}function l(u,o){var h=function(s,a){var p=m.node({isStart:!0,pt:s.start,seg:s,primary:a,other:null,status:null});return r(p,s.end),p}(u,o);return function(s,a,p){var c=m.node({isStart:!1,pt:a.end,seg:a,primary:p,other:s,status:null});s.other=c,r(c,s.pt)}(h,u,o),h}function n(u,o){var h=e(o,u.seg.end,u.seg);return function(s,a){x&&x.segmentChop(s.seg,a),s.other.remove(),s.seg.end=a,s.other.pt=a,r(s.other,s.pt)}(u,o),l(h,u.primary)}function d(u,o){var h=m.create();function s(A){return h.findTransition(function(I){var P,S,E,z,D,U;return P=A,S=I.ev,E=P.seg.start,z=P.seg.end,D=S.seg.start,U=S.seg.end,(k.pointsCollinear(E,D,U)?k.pointsCollinear(z,D,U)||k.pointAboveOrOnLine(z,D,U)?1:-1:k.pointAboveOrOnLine(E,D,U)?1:-1)>0})}function a(A,I){var P=A.seg,S=I.seg,E=P.start,z=P.end,D=S.start,U=S.end;x&&x.checkIntersection(P,S);var H=k.linesIntersect(E,z,D,U);if(H===!1){if(!k.pointsCollinear(E,z,D)||k.pointsSame(E,U)||k.pointsSame(z,D))return!1;var Y=k.pointsSame(E,D),J=k.pointsSame(z,U);if(Y&&J)return I;var W=!Y&&k.pointBetween(E,D,U),Z=!J&&k.pointBetween(z,D,U);if(Y)return Z?n(I,z):n(A,U),I;W&&(J||(Z?n(I,z):n(A,U)),n(I,E))}else H.alongA===0&&(H.alongB===-1?n(A,D):H.alongB===0?n(A,H.pt):H.alongB===1&&n(A,U)),H.alongB===0&&(H.alongA===-1?n(I,E):H.alongA===0?n(I,H.pt):H.alongA===1&&n(I,z));return!1}for(var p=[];!t.isEmpty();){var c=t.getHead();if(x&&x.vert(c.pt[0]),c.isStart){let A=function(){if(y){var I=a(c,y);if(I)return I}return!!f&&a(c,f)};x&&x.segmentNew(c.seg,c.primary);var i=s(c),y=i.before?i.before.ev:null,f=i.after?i.after.ev:null;x&&x.tempStatus(c.seg,!!y&&y.seg,!!f&&f.seg);var w,b=A();if(b){var _;v?(_=c.seg.myFill.below===null||c.seg.myFill.above!==c.seg.myFill.below)&&(b.seg.myFill.above=!b.seg.myFill.above):b.seg.otherFill=c.seg.myFill,x&&x.segmentUpdate(b.seg),c.other.remove(),c.remove()}if(t.getHead()!==c){x&&x.rewind(c.seg);continue}v?(_=c.seg.myFill.below===null||c.seg.myFill.above!==c.seg.myFill.below,c.seg.myFill.below=f?f.seg.myFill.above:u,c.seg.myFill.above=_?!c.seg.myFill.below:c.seg.myFill.below):c.seg.otherFill===null&&(w=f?c.primary===f.primary?f.seg.otherFill.above:f.seg.myFill.above:c.primary?o:u,c.seg.otherFill={above:w,below:w}),x&&x.status(c.seg,!!y&&y.seg,!!f&&f.seg),c.other.status=i.insert(m.node({ev:c}))}else{var T=c.status;if(T===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(h.exists(T.prev)&&h.exists(T.next)&&a(T.prev.ev,T.next.ev),x&&x.statusRemove(T.ev.seg),T.remove(),!c.primary){var L=c.seg.myFill;c.seg.myFill=c.seg.otherFill,c.seg.otherFill=L}p.push(c.seg)}t.getHead().remove()}return x&&x.done(),p}return v?{addRegion:function(u){for(var o,h,s,a=u[u.length-1],p=0;p<u.length;p++){o=a,a=u[p];var c=k.pointsCompare(o,a);c!==0&&l((h=c<0?o:a,s=c<0?a:o,{id:x?x.segmentId():-1,start:h,end:s,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(u){return d(u,!1)}}:{calculate:function(u,o,h,s){return u.forEach(function(a){l(e(a.start,a.end,a),!0)}),h.forEach(function(a){l(e(a.start,a.end,a),!1)}),d(o,s)}}}},{"./linked-list":260}],260:[function(g,Q,X){Q.exports={create:function(){var m={root:{root:!0,next:null},exists:function(v){return v!==null&&v!==m.root},isEmpty:function(){return m.root.next===null},getHead:function(){return m.root.next},insertBefore:function(v,k){for(var x=m.root,e=m.root.next;e!==null;){if(k(e))return v.prev=e.prev,v.next=e,e.prev.next=v,void(e.prev=v);x=e,e=e.next}x.next=v,v.prev=x,v.next=null},findTransition:function(v){for(var k=m.root,x=m.root.next;x!==null&&!v(x);)k=x,x=x.next;return{before:k===m.root?null:k,after:x,insert:function(e){return e.prev=k,e.next=x,k.next=e,x!==null&&(x.prev=e),e}}}};return m},node:function(m){return m.prev=null,m.next=null,m.remove=function(){m.prev.next=m.next,m.next&&(m.next.prev=m.prev),m.prev=null,m.next=null},m}}},{}],261:[function(g,Q,X){Q.exports=function(m,v,k){var x=[],e=[];return m.forEach(function(t){var r=t.start,l=t.end;if(v.pointsSame(r,l))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{k&&k.chainStart(t);for(var n={index:0,matches_head:!1,matches_pt1:!1},d={index:0,matches_head:!1,matches_pt1:!1},u=n,o=0;o<x.length;o++){var h=(i=x[o])[0],s=(i[1],i[i.length-1]);if(i[i.length-2],v.pointsSame(h,r)){if(A(o,!0,!0))break}else if(v.pointsSame(h,l)){if(A(o,!0,!1))break}else if(v.pointsSame(s,r)){if(A(o,!1,!0))break}else if(v.pointsSame(s,l)&&A(o,!1,!1))break}if(u===n)return x.push([r,l]),void(k&&k.chainNew(r,l));if(u===d){k&&k.chainMatch(n.index);var a=n.index,p=n.matches_pt1?l:r,c=n.matches_head,i=x[a],y=c?i[0]:i[i.length-1],f=c?i[1]:i[i.length-2],w=c?i[i.length-1]:i[0],b=c?i[i.length-2]:i[1];return v.pointsCollinear(f,y,p)&&(c?(k&&k.chainRemoveHead(n.index,p),i.shift()):(k&&k.chainRemoveTail(n.index,p),i.pop()),y=f),v.pointsSame(w,p)?(x.splice(a,1),v.pointsCollinear(b,w,y)&&(c?(k&&k.chainRemoveTail(n.index,y),i.pop()):(k&&k.chainRemoveHead(n.index,y),i.shift())),k&&k.chainClose(n.index),void e.push(i)):void(c?(k&&k.chainAddHead(n.index,p),i.unshift(p)):(k&&k.chainAddTail(n.index,p),i.push(p)))}var _=n.index,T=d.index;k&&k.chainConnect(_,T);var L=x[_].length<x[T].length;n.matches_head?d.matches_head?L?(I(_),P(_,T)):(I(T),P(T,_)):P(T,_):d.matches_head?P(_,T):L?(I(_),P(T,_)):(I(T),P(_,T))}function A(S,E,z){return u.index=S,u.matches_head=E,u.matches_pt1=z,u===n?(u=d,!1):(u=null,!0)}function I(S){k&&k.chainReverse(S),x[S].reverse()}function P(S,E){var z=x[S],D=x[E],U=z[z.length-1],H=z[z.length-2],Y=D[0],J=D[1];v.pointsCollinear(H,U,Y)&&(k&&k.chainRemoveTail(S,U),z.pop(),U=H),v.pointsCollinear(U,Y,J)&&(k&&k.chainRemoveHead(E,Y),D.shift()),k&&k.chainJoin(S,E),x[S]=z.concat(D),x.splice(E,1)}}),e}},{}],262:[function(g,Q,X){function m(k,x,e){var t=[];return k.forEach(function(r){var l=(r.myFill.above?8:0)+(r.myFill.below?4:0)+(r.otherFill&&r.otherFill.above?2:0)+(r.otherFill&&r.otherFill.below?1:0);x[l]!==0&&t.push({id:e?e.segmentId():-1,start:r.start,end:r.end,myFill:{above:x[l]===1,below:x[l]===2},otherFill:null})}),e&&e.selected(t),t}var v={union:function(k,x){return m(k,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],x)},intersect:function(k,x){return m(k,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],x)},difference:function(k,x){return m(k,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],x)},differenceRev:function(k,x){return m(k,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],x)},xor:function(k,x){return m(k,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],x)}};Q.exports=v},{}],263:[function(g,Q,X){var m=g("stream").Transform,v=g("stream-parser");function k(){m.call(this,{readableObjectMode:!0})}function x(e,t,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=e,t&&(this.code=t),r&&(this.statusCode=r)}k.prototype=Object.create(m.prototype),k.prototype.constructor=k,v(k.prototype),X.ParserStream=k,X.sliceEq=function(e,t,r){for(var l=t,n=0;n<r.length;)if(e[l++]!==r[n++])return!1;return!0},X.str2arr=function(e,t){var r=[],l=0;if(t&&t==="hex")for(;l<e.length;)r.push(parseInt(e.slice(l,l+2),16)),l+=2;else for(;l<e.length;l++)r.push(255&e.charCodeAt(l));return r},X.readUInt16LE=function(e,t){return e[t]|e[t+1]<<8},X.readUInt16BE=function(e,t){return e[t+1]|e[t]<<8},X.readUInt32LE=function(e,t){return e[t]|e[t+1]<<8|e[t+2]<<16|16777216*e[t+3]},X.readUInt32BE=function(e,t){return e[t+3]|e[t+2]<<8|e[t+1]<<16|16777216*e[t]},x.prototype=Object.create(Error.prototype),x.prototype.constructor=x,X.ProbeError=x},{stream:286,"stream-parser":302}],264:[function(g,Q,X){function m(x,e){var t=new Error(x);return t.code=e,t}function v(x){try{return decodeURIComponent(escape(x))}catch{return x}}function k(x,e,t){this.input=x.subarray(e,t),this.start=e;var r=String.fromCharCode.apply(null,this.input.subarray(0,4));if(r!=="II*\0"&&r!=="MM\0*")throw m("invalid TIFF signature","EBADDATA");this.big_endian=r[0]==="M"}k.prototype.each=function(x){this.aborted=!1;var e=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:e}];this.ifds_to_read.length>0&&!this.aborted;){var t=this.ifds_to_read.shift();t.offset&&this.scan_ifd(t.id,t.offset,x)}},k.prototype.read_uint16=function(x){var e=this.input;if(x+2>e.length)throw m("unexpected EOF","EBADDATA");return this.big_endian?256*e[x]+e[x+1]:e[x]+256*e[x+1]},k.prototype.read_uint32=function(x){var e=this.input;if(x+4>e.length)throw m("unexpected EOF","EBADDATA");return this.big_endian?16777216*e[x]+65536*e[x+1]+256*e[x+2]+e[x+3]:e[x]+256*e[x+1]+65536*e[x+2]+16777216*e[x+3]},k.prototype.is_subifd_link=function(x,e){return x===0&&e===34665||x===0&&e===34853||x===34665&&e===40965},k.prototype.exif_format_length=function(x){switch(x){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},k.prototype.exif_format_read=function(x,e){var t;switch(x){case 1:case 2:return t=this.input[e];case 6:return(t=this.input[e])|33554430*(128&t);case 3:return t=this.read_uint16(e);case 8:return(t=this.read_uint16(e))|131070*(32768&t);case 4:return t=this.read_uint32(e);case 9:return 0|(t=this.read_uint32(e));case 5:case 10:case 11:case 12:case 7:default:return null}},k.prototype.scan_ifd=function(x,e,t){var r=this.read_uint16(e);e+=2;for(var l=0;l<r;l++){var n=this.read_uint16(e),d=this.read_uint16(e+2),u=this.read_uint32(e+4),o=this.exif_format_length(d),h=u*o,s=h<=4?e+8:this.read_uint32(e+8),a=!1;if(s+h>this.input.length)throw m("unexpected EOF","EBADDATA");for(var p=[],c=s,i=0;i<u;i++,c+=o){var y=this.exif_format_read(d,c);if(y===null){p=null;break}p.push(y)}if(Array.isArray(p)&&d===2&&(p=v(String.fromCharCode.apply(null,p)))&&p[p.length-1]==="\0"&&(p=p.slice(0,-1)),this.is_subifd_link(x,n)&&Array.isArray(p)&&Number.isInteger(p[0])&&p[0]>0&&(this.ifds_to_read.push({id:n,offset:p[0]}),a=!0),t({is_big_endian:this.big_endian,ifd:x,tag:n,format:d,count:u,entry_offset:e+this.start,data_length:h,data_offset:s+this.start,value:p,is_subifd_link:a})===!1)return void(this.aborted=!0);e+=12}x===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(e)})},Q.exports.ExifParser=k,Q.exports.get_orientation=function(x){var e=0;try{return new k(x,0,x.length).each(function(t){if(t.ifd===0&&t.tag===274&&Array.isArray(t.value))return e=t.value[0],!1}),e}catch{return-1}}},{}],265:[function(g,Q,X){var m=g("./common").readUInt16BE,v=g("./common").readUInt32BE;function k(n,d){if(n.length<4+d)return null;var u=v(n,d);return n.length<u+d||u<8?null:{boxtype:String.fromCharCode.apply(null,n.slice(d+4,d+8)),data:n.slice(d+8,d+u),end:d+u}}function x(n,d){for(var u=0;;){var o=k(n,u);if(!o)break;switch(o.boxtype){case"ispe":d.sizes.push({width:v(o.data,4),height:v(o.data,8)});break;case"irot":d.transforms.push({type:"irot",value:3&o.data[0]});break;case"imir":d.transforms.push({type:"imir",value:1&o.data[0]})}u=o.end}}function e(n,d,u){for(var o=0,h=0;h<u;h++)o=256*o+(n[d+h]||0);return o}function t(n,d){for(var u=n[4]>>4&15,o=15&n[4],h=n[5]>>4&15,s=m(n,6),a=8,p=0;p<s;p++){var c=m(n,a),i=m(n,a+=2),y=e(n,a+=2,h),f=m(n,a+=h);if(a+=2,i===0&&f===1){var w=e(n,a,u),b=e(n,a+u,o);d.item_loc[c]={length:b,offset:w+y}}a+=f*(u+o)}}function r(n,d){for(var u=m(n,4),o=6,h=0;h<u;h++){var s=k(n,o);if(!s)break;if(s.boxtype==="infe"){for(var a=m(s.data,4),p="",c=8;c<s.data.length&&s.data[c];c++)p+=String.fromCharCode(s.data[c]);d.item_inf[p]=a}o=s.end}}function l(n,d){for(var u=0;;){var o=k(n,u);if(!o)break;o.boxtype==="ipco"&&x(o.data,d),u=o.end}}Q.exports.unbox=k,Q.exports.readSizeFromMeta=function(n){var d={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(c,i){for(var y=4;;){var f=k(c,y);if(!f)break;f.boxtype==="iprp"&&l(f.data,i),f.boxtype==="iloc"&&t(f.data,i),f.boxtype==="iinf"&&r(f.data,i),y=f.end}}(n,d),d.sizes.length){var u,o,h,s=(u=d.sizes,o=u.reduce(function(c,i){return c.width>i.width||c.width===i.width&&c.height>i.height?c:i}),h=u.reduce(function(c,i){return c.height>i.height||c.height===i.height&&c.width>i.width?c:i}),o.width>h.height||o.width===h.height&&o.height>h.width?o:h),a=1;d.transforms.forEach(function(c){var i={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},y={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(c.type==="imir"&&(a=c.value===0?y[a]:i[a=i[a=y[a]]]),c.type==="irot")for(var f=0;f<c.value;f++)a=i[a]});var p=null;return d.item_inf.Exif&&(p=d.item_loc[d.item_inf.Exif]),{width:s.width,height:s.height,orientation:d.transforms.length?a:null,variants:d.sizes,exif_location:p}}},Q.exports.getMimeType=function(n){var d=String.fromCharCode.apply(null,n.slice(0,4)),u={};u[d]=!0;for(var o=8;o<n.length;o+=4)u[String.fromCharCode.apply(null,n.slice(o,o+4))]=!0;if(u.mif1||u.msf1||u.miaf)return d==="avif"||d==="avis"||d==="avio"?{type:"avif",mime:"image/avif"}:d==="heic"||d==="heix"?{type:"heic",mime:"image/heic"}:d==="hevc"||d==="hevx"?{type:"heic",mime:"image/heic-sequence"}:u.avif||u.avis?{type:"avif",mime:"image/avif"}:u.heic||u.heix||u.hevc||u.hevx||u.heis?u.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":263}],266:[function(g,Q,X){var m=g("../common").str2arr,v=g("../common").sliceEq,k=g("../common").readUInt32BE,x=g("../miaf_utils"),e=g("../exif_utils"),t=m("ftyp");Q.exports=function(r){if(v(r,4,t)){var l=x.unbox(r,0);if(l){var n=x.getMimeType(l.data);if(n){for(var d,u=l.end;;){var o=x.unbox(r,u);if(!o)break;if(u=o.end,o.boxtype==="mdat")return;if(o.boxtype==="meta"){d=o.data;break}}if(d){var h=x.readSizeFromMeta(d);if(h){var s={width:h.width,height:h.height,type:n.type,mime:n.mime,wUnits:"px",hUnits:"px"};if(h.variants.length>1&&(s.variants=h.variants),h.orientation&&(s.orientation=h.orientation),h.exif_location&&h.exif_location.offset+h.exif_location.length<=r.length){var a=k(r,h.exif_location.offset),p=r.slice(h.exif_location.offset+a+4,h.exif_location.offset+h.exif_location.length),c=e.get_orientation(p);c>0&&(s.orientation=c)}return s}}}}}}},{"../common":263,"../exif_utils":264,"../miaf_utils":265}],267:[function(g,Q,X){var m=g("../common").str2arr,v=g("../common").sliceEq,k=g("../common").readUInt16LE,x=m("BM");Q.exports=function(e){if(!(e.length<26)&&v(e,0,x))return{width:k(e,18),height:k(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":263}],268:[function(g,Q,X){var m=g("../common").str2arr,v=g("../common").sliceEq,k=g("../common").readUInt16LE,x=m("GIF87a"),e=m("GIF89a");Q.exports=function(t){if(!(t.length<10)&&(v(t,0,x)||v(t,0,e)))return{width:k(t,6),height:k(t,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":263}],269:[function(g,Q,X){var m=g("../common").readUInt16LE;Q.exports=function(v){var k=m(v,0),x=m(v,2),e=m(v,4);if(k===0&&x===1&&e){for(var t=[],r={width:0,height:0},l=0;l<e;l++){var n=v[6+16*l]||256,d=v[6+16*l+1]||256,u={width:n,height:d};t.push(u),(n>r.width||d>r.height)&&(r=u)}return{width:r.width,height:r.height,variants:t,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":263}],270:[function(g,Q,X){var m=g("../common").readUInt16BE,v=g("../common").str2arr,k=g("../common").sliceEq,x=g("../exif_utils"),e=v("Exif\0\0");Q.exports=function(t){if(!(t.length<2)&&t[0]===255&&t[1]===216&&t[2]===255)for(var r=2;;){for(;;){if(t.length-r<2)return;if(t[r++]===255)break}for(var l,n,d=t[r++];d===255;)d=t[r++];if(208<=d&&d<=217||d===1)l=0;else{if(!(192<=d&&d<=254)||t.length-r<2)return;l=m(t,r)-2,r+=2}if(d===217||d===218)return;if(d===225&&l>=10&&k(t,r,e)&&(n=x.get_orientation(t.slice(r+6,r+l))),l>=5&&192<=d&&d<=207&&d!==196&&d!==200&&d!==204){if(t.length-r<l)return;var u={width:m(t,r+3),height:m(t,r+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return n>0&&(u.orientation=n),u}r+=l}}},{"../common":263,"../exif_utils":264}],271:[function(g,Q,X){var m=g("../common").str2arr,v=g("../common").sliceEq,k=g("../common").readUInt32BE,x=m(`\x89PNG\r

`),e=m("IHDR");Q.exports=function(t){if(!(t.length<24)&&v(t,0,x)&&v(t,12,e))return{width:k(t,16),height:k(t,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":263}],272:[function(g,Q,X){var m=g("../common").str2arr,v=g("../common").sliceEq,k=g("../common").readUInt32BE,x=m("8BPS\0");Q.exports=function(e){if(!(e.length<22)&&v(e,0,x))return{width:k(e,18),height:k(e,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":263}],273:[function(g,Q,X){function m(n){return typeof n=="number"&&isFinite(n)&&n>0}var v=/<[-_.:a-zA-Z0-9][^>]*>/,k=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,x=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,e=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,t=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,r=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function l(n){return r.test(n)?n.match(r)[0]:"px"}Q.exports=function(n){if(function(w){var b,_=0,T=w.length;for(w[0]===239&&w[1]===187&&w[2]===191&&(_=3);_<T&&((b=w[_])===32||b===9||b===13||b===10);)_++;return _!==T&&w[_]===60}(n)){for(var d="",u=0;u<n.length;u++)d+=String.fromCharCode(n[u]);var o=(d.match(v)||[""])[0];if(k.test(o)){var h=function(w){var b=w.match(x),_=w.match(e),T=w.match(t);return{width:b&&(b[1]||b[2]),height:_&&(_[1]||_[2]),viewbox:T&&(T[1]||T[2])}}(o),s=parseFloat(h.width),a=parseFloat(h.height);if(h.width&&h.height)return!m(s)||!m(a)?void 0:{width:s,height:a,type:"svg",mime:"image/svg+xml",wUnits:l(h.width),hUnits:l(h.height)};var p=(h.viewbox||"").split(" "),c={width:p[2],height:p[3]},i=parseFloat(c.width),y=parseFloat(c.height);if(m(i)&&m(y)&&l(c.width)===l(c.height)){var f=i/y;return h.width?m(s)?{width:s,height:s/f,type:"svg",mime:"image/svg+xml",wUnits:l(h.width),hUnits:l(h.width)}:void 0:h.height?m(a)?{width:a*f,height:a,type:"svg",mime:"image/svg+xml",wUnits:l(h.height),hUnits:l(h.height)}:void 0:{width:i,height:y,type:"svg",mime:"image/svg+xml",wUnits:l(c.width),hUnits:l(c.height)}}}}}},{}],274:[function(g,Q,X){var m=g("../common").str2arr,v=g("../common").sliceEq,k=g("../common").readUInt16LE,x=g("../common").readUInt16BE,e=g("../common").readUInt32LE,t=g("../common").readUInt32BE,r=m("II*\0"),l=m("MM\0*");function n(o,h,s){return s?x(o,h):k(o,h)}function d(o,h,s){return s?t(o,h):e(o,h)}function u(o,h,s){var a=n(o,h+2,s);return d(o,h+4,s)!==1||a!==3&&a!==4?null:a===3?n(o,h+8,s):d(o,h+8,s)}Q.exports=function(o){if(!(o.length<8)&&(v(o,0,r)||v(o,0,l))){var h=o[0]===77,s=d(o,4,h)-8;if(!(s<0)){var a=s+8;if(!(o.length-a<2)){var p=12*n(o,a+0,h);if(!(p<=0||(a+=2,o.length-a<p))){var c,i,y,f;for(c=0;c<p;c+=12)(f=n(o,a+c,h))===256?i=u(o,a+c,h):f===257&&(y=u(o,a+c,h));return i&&y?{width:i,height:y,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},{"../common":263}],275:[function(g,Q,X){var m=g("../common").str2arr,v=g("../common").sliceEq,k=g("../common").readUInt16LE,x=g("../common").readUInt32LE,e=g("../exif_utils"),t=m("RIFF"),r=m("WEBP");function l(u,o){if(u[o+3]===157&&u[o+4]===1&&u[o+5]===42)return{width:16383&k(u,o+6),height:16383&k(u,o+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function n(u,o){if(u[o]===47){var h=x(u,o+1);return{width:1+(16383&h),height:1+(h>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function d(u,o){return{width:1+(u[o+6]<<16|u[o+5]<<8|u[o+4]),height:1+(u[o+9]<<o|u[o+8]<<8|u[o+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}Q.exports=function(u){if(!(u.length<16)&&(v(u,0,t)||v(u,8,r))){var o=12,h=null,s=0,a=x(u,4)+8;if(!(a>u.length)){for(;o+8<a;)if(u[o]!==0){var p=String.fromCharCode.apply(null,u.slice(o,o+4)),c=x(u,o+4);p==="VP8 "&&c>=10?h=h||l(u,o+8):p==="VP8L"&&c>=9?h=h||n(u,o+8):p==="VP8X"&&c>=10?h=h||d(u,o+8):p==="EXIF"&&(s=e.get_orientation(u.slice(o+8,o+8+c)),o=1/0),o+=8+c}else o++;if(h)return s>0&&(h.orientation=s),h}}}},{"../common":263,"../exif_utils":264}],276:[function(g,Q,X){Q.exports={avif:g("./parse_sync/avif"),bmp:g("./parse_sync/bmp"),gif:g("./parse_sync/gif"),ico:g("./parse_sync/ico"),jpeg:g("./parse_sync/jpeg"),png:g("./parse_sync/png"),psd:g("./parse_sync/psd"),svg:g("./parse_sync/svg"),tiff:g("./parse_sync/tiff"),webp:g("./parse_sync/webp")}},{"./parse_sync/avif":266,"./parse_sync/bmp":267,"./parse_sync/gif":268,"./parse_sync/ico":269,"./parse_sync/jpeg":270,"./parse_sync/png":271,"./parse_sync/psd":272,"./parse_sync/svg":273,"./parse_sync/tiff":274,"./parse_sync/webp":275}],277:[function(g,Q,X){var m=g("./lib/parsers_sync");Q.exports=function(v){return function(k){for(var x=Object.keys(m),e=0;e<x.length;e++){var t=m[x[e]](k);if(t)return t}return null}(v)},Q.exports.parsers=m},{"./lib/parsers_sync":276}],278:[function(g,Q,X){var m,v,k=Q.exports={};function x(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function t(a){if(m===setTimeout)return setTimeout(a,0);if((m===x||!m)&&setTimeout)return m=setTimeout,setTimeout(a,0);try{return m(a,0)}catch{try{return m.call(null,a,0)}catch{return m.call(this,a,0)}}}(function(){try{m=typeof setTimeout=="function"?setTimeout:x}catch{m=x}try{v=typeof clearTimeout=="function"?clearTimeout:e}catch{v=e}})();var r,l=[],n=!1,d=-1;function u(){n&&r&&(n=!1,r.length?l=r.concat(l):d=-1,l.length&&o())}function o(){if(!n){var a=t(u);n=!0;for(var p=l.length;p;){for(r=l,l=[];++d<p;)r&&r[d].run();d=-1,p=l.length}r=null,n=!1,function(c){if(v===clearTimeout)return clearTimeout(c);if((v===e||!v)&&clearTimeout)return v=clearTimeout,clearTimeout(c);try{v(c)}catch{try{return v.call(null,c)}catch{return v.call(this,c)}}}(a)}}function h(a,p){this.fun=a,this.array=p}function s(){}k.nextTick=function(a){var p=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)p[c-1]=arguments[c];l.push(new h(a,p)),l.length!==1||n||t(o)},h.prototype.run=function(){this.fun.apply(null,this.array)},k.title="browser",k.browser=!0,k.env={},k.argv=[],k.version="",k.versions={},k.on=s,k.addListener=s,k.once=s,k.off=s,k.removeListener=s,k.removeAllListeners=s,k.emit=s,k.prependListener=s,k.prependOnceListener=s,k.listeners=function(a){return[]},k.binding=function(a){throw new Error("process.binding is not supported")},k.cwd=function(){return"/"},k.chdir=function(a){throw new Error("process.chdir is not supported")},k.umask=function(){return 0}},{}],279:[function(g,Q,X){(function(m){(function(){for(var v=g("performance-now"),k=typeof window>"u"?m:window,x=["moz","webkit"],e="AnimationFrame",t=k["request"+e],r=k["cancel"+e]||k["cancelRequest"+e],l=0;!t&&l<x.length;l++)t=k[x[l]+"Request"+e],r=k[x[l]+"Cancel"+e]||k[x[l]+"CancelRequest"+e];if(!t||!r){var n=0,d=0,u=[];t=function(o){if(u.length===0){var h=v(),s=Math.max(0,1e3/60-(h-n));n=s+h,setTimeout(function(){var a=u.slice(0);u.length=0;for(var p=0;p<a.length;p++)if(!a[p].cancelled)try{a[p].callback(n)}catch(c){setTimeout(function(){throw c},0)}},Math.round(s))}return u.push({handle:++d,callback:o,cancelled:!1}),d},r=function(o){for(var h=0;h<u.length;h++)u[h].handle===o&&(u[h].cancelled=!0)}}Q.exports=function(o){return t.call(k,o)},Q.exports.cancel=function(){r.apply(k,arguments)},Q.exports.polyfill=function(o){o||(o=k),o.requestAnimationFrame=t,o.cancelAnimationFrame=r}}).call(this)}).call(this,typeof qi<"u"?qi:typeof self<"u"?self:typeof window<"u"?window:{})},{"performance-now":252}],280:[function(g,Q,X){var m=g("array-bounds"),v=g("color-normalize"),k=g("update-diff"),x=g("pick-by-alias"),e=g("object-assign"),t=g("flatten-vertex-data"),r=g("to-float32"),l=r.float32,n=r.fract32;Q.exports=function(u,o){if(typeof u=="function"?(o||(o={}),o.regl=u):o=u,o.length&&(o.positions=o),!(u=o.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var h,s,a,p,c,i,y=u._gl,f={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},w=[];return p=u.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),s=u.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),a=u.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),c=u.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),i=u.buffer({usage:"static",type:"float",data:d}),L(o),h=u({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:u.prop("range"),lineWidth:u.prop("lineWidth"),capSize:u.prop("capSize"),opacity:u.prop("opacity"),scale:u.prop("scale"),translate:u.prop("translate"),scaleFract:u.prop("scaleFract"),translateFract:u.prop("translateFract"),viewport:function(I,P){return[P.viewport.x,P.viewport.y,I.viewportWidth,I.viewportHeight]}},attributes:{color:{buffer:p,offset:function(I,P){return 4*P.offset},divisor:1},position:{buffer:s,offset:function(I,P){return 8*P.offset},divisor:1},positionFract:{buffer:a,offset:function(I,P){return 8*P.offset},divisor:1},error:{buffer:c,offset:function(I,P){return 16*P.offset},divisor:1},direction:{buffer:i,stride:24,offset:0},lineOffset:{buffer:i,stride:24,offset:8},capOffset:{buffer:i,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:u.prop("viewport")},viewport:u.prop("viewport"),stencil:!1,instances:u.prop("count"),count:d.length}),e(b,{update:L,draw:_,destroy:A,regl:u,gl:y,canvas:y.canvas,groups:w}),b;function b(I){I?L(I):I===null&&A(),_()}function _(I){if(typeof I=="number")return T(I);I&&!Array.isArray(I)&&(I=[I]),u._refresh(),w.forEach(function(P,S){P&&(I&&(I[S]?P.draw=!0:P.draw=!1),P.draw?T(S):P.draw=!0)})}function T(I){typeof I=="number"&&(I=w[I]),I!=null&&I&&I.count&&I.color&&I.opacity&&I.positions&&I.positions.length>1&&(I.scaleRatio=[I.scale[0]*I.viewport.width,I.scale[1]*I.viewport.height],h(I),I.after&&I.after(I))}function L(I){if(I){I.length!=null?typeof I[0]=="number"&&(I=[{positions:I}]):Array.isArray(I)||(I=[I]);var P=0,S=0;if(b.groups=w=I.map(function(J,W){var Z=w[W];return J&&(typeof J=="function"?J={after:J}:typeof J[0]=="number"&&(J={positions:J}),J=x(J,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),Z||(w[W]=Z={id:W,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},J=e({},f,J)),k(Z,J,[{lineWidth:function(re){return .5*+re},capSize:function(re){return .5*+re},opacity:parseFloat,errors:function(re){return re=t(re),S+=re.length,re},positions:function(re,V){return re=t(re,"float64"),V.count=Math.floor(re.length/2),V.bounds=m(re,2),V.offset=P,P+=V.count,re}},{color:function(re,V){var B=V.count;if(re||(re="transparent"),!Array.isArray(re)||typeof re[0]=="number"){var j=re;re=Array(B);for(var ee=0;ee<B;ee++)re[ee]=j}if(re.length<B)throw Error("Not enough colors");for(var N=new Uint8Array(4*B),$=0;$<B;$++){var K=v(re[$],"uint8");N.set(K,4*$)}return N},range:function(re,V,B){var j=V.bounds;return re||(re=j),V.scale=[1/(re[2]-re[0]),1/(re[3]-re[1])],V.translate=[-re[0],-re[1]],V.scaleFract=n(V.scale),V.translateFract=n(V.translate),re},viewport:function(re){var V;return Array.isArray(re)?V={x:re[0],y:re[1],width:re[2]-re[0],height:re[3]-re[1]}:re?(V={x:re.x||re.left||0,y:re.y||re.top||0},re.right?V.width=re.right-V.x:V.width=re.w||re.width||0,re.bottom?V.height=re.bottom-V.y:V.height=re.h||re.height||0):V={x:0,y:0,width:y.drawingBufferWidth,height:y.drawingBufferHeight},V}}])),Z}),P||S){var E=w.reduce(function(J,W,Z){return J+(W?W.count:0)},0),z=new Float64Array(2*E),D=new Uint8Array(4*E),U=new Float32Array(4*E);w.forEach(function(J,W){if(J){var Z=J.positions,re=J.count,V=J.offset,B=J.color,j=J.errors;re&&(D.set(B,4*V),U.set(j,4*V),z.set(Z,2*V))}});var H=l(z);s(H);var Y=n(z,H);a(Y),p(D),c(U)}}}function A(){s.destroy(),a.destroy(),p.destroy(),c.destroy(),i.destroy()}};var d=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":314,"update-diff":330}],281:[function(g,Q,X){var m=g("color-normalize"),v=g("array-bounds"),k=g("object-assign"),x=g("glslify"),e=g("pick-by-alias"),t=g("flatten-vertex-data"),r=g("earcut"),l=g("array-normalize"),n=g("to-float32"),d=n.float32,u=n.fract32,o=g("es6-weak-map"),h=g("parse-rect"),s=g("array-find-index");function a(p,c){if(!(this instanceof a))return new a(p,c);if(typeof p=="function"?(c||(c={}),c.regl=p):c=p,c.length&&(c.positions=c),!(p=c.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=p._gl,this.regl=p,this.passes=[],this.shaders=a.shaders.has(p)?a.shaders.get(p):a.shaders.set(p,a.createShaders(p)).get(p),this.update(c)}Q.exports=a,a.dashMult=2,a.maxPatternLength=256,a.precisionThreshold=3e6,a.maxPoints=1e4,a.maxLines=2048,a.shaders=new o,a.createShaders=function(p){var c,i=p.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),y={primitive:"triangle strip",instances:p.prop("count"),count:4,offset:0,uniforms:{miterMode:function(w,b){return b.join==="round"?2:1},miterLimit:p.prop("miterLimit"),scale:p.prop("scale"),scaleFract:p.prop("scaleFract"),translateFract:p.prop("translateFract"),translate:p.prop("translate"),thickness:p.prop("thickness"),dashTexture:p.prop("dashTexture"),opacity:p.prop("opacity"),pixelRatio:p.context("pixelRatio"),id:p.prop("id"),dashLength:p.prop("dashLength"),viewport:function(w,b){return[b.viewport.x,b.viewport.y,w.viewportWidth,w.viewportHeight]},depth:p.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(w,b){return!b.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:p.prop("viewport")},viewport:p.prop("viewport")},f=p(k({vert:x([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:x([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:i,divisor:0,stride:8,offset:0},lineTop:{buffer:i,divisor:0,stride:8,offset:4},aCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:p.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:p.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:p.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},y));try{c=p(k({cull:{enable:!0,face:"back"},vert:x([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:x([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:i,divisor:0,stride:8,offset:0},lineTop:{buffer:i,divisor:0,stride:8,offset:4},aColor:{buffer:p.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:p.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},y))}catch{c=f}return{fill:p({primitive:"triangle",elements:function(w,b){return b.triangles},offset:0,vert:x([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:x([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:p.prop("scale"),color:p.prop("fill"),scaleFract:p.prop("scaleFract"),translateFract:p.prop("translateFract"),translate:p.prop("translate"),opacity:p.prop("opacity"),pixelRatio:p.context("pixelRatio"),id:p.prop("id"),viewport:function(w,b){return[b.viewport.x,b.viewport.y,w.viewportWidth,w.viewportHeight]}},attributes:{position:{buffer:p.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:p.prop("positionFractBuffer"),stride:8,offset:8}},blend:y.blend,depth:{enable:!1},scissor:y.scissor,stencil:y.stencil,viewport:y.viewport}),rect:f,miter:c}},a.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},a.prototype.render=function(){for(var p,c=[],i=arguments.length;i--;)c[i]=arguments[i];c.length&&(p=this).update.apply(p,c),this.draw()},a.prototype.draw=function(){for(var p=this,c=[],i=arguments.length;i--;)c[i]=arguments[i];return(c.length?c:this.passes).forEach(function(y,f){var w;if(y&&Array.isArray(y))return(w=p).draw.apply(w,y);typeof y=="number"&&(y=p.passes[y]),y&&y.count>1&&y.opacity&&(p.regl._refresh(),y.fill&&y.triangles&&y.triangles.length>2&&p.shaders.fill(y),y.thickness&&(y.scale[0]*y.viewport.width>a.precisionThreshold||y.scale[1]*y.viewport.height>a.precisionThreshold||y.join==="rect"||!y.join&&(y.thickness<=2||y.count>=a.maxPoints)?p.shaders.rect(y):p.shaders.miter(y)))}),this},a.prototype.update=function(p){var c=this;if(p){p.length!=null?typeof p[0]=="number"&&(p=[{positions:p}]):Array.isArray(p)||(p=[p]);var i=this.regl,y=this.gl;if(p.forEach(function(T,L){var A=c.passes[L];if(T!==void 0)if(T!==null){if(typeof T[0]=="number"&&(T={positions:T}),T=e(T,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),A||(c.passes[L]=A={id:L,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:i.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:i.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:i.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:i.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},T=k({},a.defaults,T)),T.thickness!=null&&(A.thickness=parseFloat(T.thickness)),T.opacity!=null&&(A.opacity=parseFloat(T.opacity)),T.miterLimit!=null&&(A.miterLimit=parseFloat(T.miterLimit)),T.overlay!=null&&(A.overlay=!!T.overlay,L<a.maxLines&&(A.depth=2*(a.maxLines-1-L%a.maxLines)/a.maxLines-1)),T.join!=null&&(A.join=T.join),T.hole!=null&&(A.hole=T.hole),T.fill!=null&&(A.fill=T.fill?m(T.fill,"uint8"):null),T.viewport!=null&&(A.viewport=h(T.viewport)),A.viewport||(A.viewport=h([y.drawingBufferWidth,y.drawingBufferHeight])),T.close!=null&&(A.close=T.close),T.positions===null&&(T.positions=[]),T.positions){var I,P;if(T.positions.x&&T.positions.y){var S=T.positions.x,E=T.positions.y;P=A.count=Math.max(S.length,E.length),I=new Float64Array(2*P);for(var z=0;z<P;z++)I[2*z]=S[z],I[2*z+1]=E[z]}else I=t(T.positions,"float64"),P=A.count=Math.floor(I.length/2);var D=A.bounds=v(I,2);if(A.fill){for(var U=[],H={},Y=0,J=0,W=0,Z=A.count;J<Z;J++){var re=I[2*J],V=I[2*J+1];isNaN(re)||isNaN(V)||re==null||V==null?(re=I[2*Y],V=I[2*Y+1],H[J]=Y):Y=J,U[W++]=re,U[W++]=V}if(T.splitNull){A.count-1 in H||(H[A.count]=A.count-1);var B=Object.keys(H).map(Number).sort(function(mt,Ft){return mt-Ft}),j=[],ee=0,N=A.hole!=null?A.hole[0]:null;if(N!=null){var $=s(B,function(mt){return mt>=N});(B=B.slice(0,$)).push(N)}for(var K=function(mt){var Ft=U.slice(2*ee,2*B[mt]).concat(N?U.slice(2*N):[]),Vt=(A.hole||[]).map(function(Gt){return Gt-N+(B[mt]-ee)}),Xt=r(Ft,Vt);Xt=Xt.map(function(Gt){return Gt+ee+(Gt+ee<B[mt]?0:N-B[mt])}),j.push.apply(j,Xt),ee=B[mt]+1},te=0;te<B.length;te++)K(te);for(var ie=0,le=j.length;ie<le;ie++)H[j[ie]]!=null&&(j[ie]=H[j[ie]]);A.triangles=j}else{for(var se=r(U,A.hole||[]),ve=0,fe=se.length;ve<fe;ve++)H[se[ve]]!=null&&(se[ve]=H[se[ve]]);A.triangles=se}}var ye=new Float64Array(I);l(ye,2,D);var Ae=new Float64Array(2*P+6);A.close?I[0]===I[2*P-2]&&I[1]===I[2*P-1]?(Ae[0]=ye[2*P-4],Ae[1]=ye[2*P-3]):(Ae[0]=ye[2*P-2],Ae[1]=ye[2*P-1]):(Ae[0]=ye[0],Ae[1]=ye[1]),Ae.set(ye,2),A.close?I[0]===I[2*P-2]&&I[1]===I[2*P-1]?(Ae[2*P+2]=ye[2],Ae[2*P+3]=ye[3],A.count-=1):(Ae[2*P+2]=ye[0],Ae[2*P+3]=ye[1],Ae[2*P+4]=ye[2],Ae[2*P+5]=ye[3]):(Ae[2*P+2]=ye[2*P-2],Ae[2*P+3]=ye[2*P-1],Ae[2*P+4]=ye[2*P-2],Ae[2*P+5]=ye[2*P-1]);var pe=d(Ae);A.positionBuffer(pe);var ge=u(Ae,pe);A.positionFractBuffer(ge)}if(T.range?A.range=T.range:A.range||(A.range=A.bounds),(T.range||T.positions)&&A.count){var we=A.bounds,oe=we[2]-we[0],de=we[3]-we[1],Te=A.range[2]-A.range[0],Ee=A.range[3]-A.range[1];A.scale=[oe/Te,de/Ee],A.translate=[-A.range[0]/Te+we[0]/Te||0,-A.range[1]/Ee+we[1]/Ee||0],A.scaleFract=u(A.scale),A.translateFract=u(A.translate)}if(T.dashes){var Me,De=0;if(!T.dashes||T.dashes.length<2)De=1,Me=new Uint8Array([255,255,255,255,255,255,255,255]);else{De=0;for(var Ie=0;Ie<T.dashes.length;++Ie)De+=T.dashes[Ie];Me=new Uint8Array(De*a.dashMult);for(var Oe=0,Ze=255,Fe=0;Fe<2;Fe++)for(var Pe=0;Pe<T.dashes.length;++Pe){for(var ze=0,Ge=T.dashes[Pe]*a.dashMult*.5;ze<Ge;++ze)Me[Oe++]=Ze;Ze^=255}}A.dashLength=De,A.dashTexture({channels:1,data:Me,width:Me.length,height:1,mag:"linear",min:"linear"},0,0)}if(T.color){var $e=A.count,ot=T.color;ot||(ot="transparent");var vt=new Uint8Array(4*$e+4);if(Array.isArray(ot)&&typeof ot[0]!="number"){for(var bt=0;bt<$e;bt++){var yt=m(ot[bt],"uint8");vt.set(yt,4*bt)}vt.set(m(ot[0],"uint8"),4*$e)}else for(var tt=m(ot,"uint8"),Ke=0;Ke<$e+1;Ke++)vt.set(tt,4*Ke);A.colorBuffer({usage:"dynamic",type:"uint8",data:vt})}}else c.passes[L]=null}),p.length<this.passes.length){for(var f=p.length;f<this.passes.length;f++){var w=this.passes[f];w&&(w.colorBuffer.destroy(),w.positionBuffer.destroy(),w.dashTexture.destroy())}this.passes.length=p.length}for(var b=[],_=0;_<this.passes.length;_++)this.passes[_]!==null&&b.push(this.passes[_]);return this.passes=b,this}},a.prototype.destroy=function(){return this.passes.forEach(function(p){p.colorBuffer.destroy(),p.positionBuffer.destroy(),p.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":314}],282:[function(g,Q,X){function m(f,w){return function(b){if(Array.isArray(b))return b}(f)||function(b,_){var T=b==null?null:typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(T!=null){var L,A,I=[],P=!0,S=!1;try{for(T=T.call(b);!(P=(L=T.next()).done)&&(I.push(L.value),!_||I.length!==_);P=!0);}catch(E){S=!0,A=E}finally{try{P||T.return==null||T.return()}finally{if(S)throw A}}return I}}(f,w)||k(f,w)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function v(f){return function(w){if(Array.isArray(w))return x(w)}(f)||function(w){if(typeof Symbol<"u"&&w[Symbol.iterator]!=null||w["@@iterator"]!=null)return Array.from(w)}(f)||k(f)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function k(f,w){if(f){if(typeof f=="string")return x(f,w);var b=Object.prototype.toString.call(f).slice(8,-1);return b==="Object"&&f.constructor&&(b=f.constructor.name),b==="Map"||b==="Set"?Array.from(f):b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?x(f,w):void 0}}function x(f,w){(w==null||w>f.length)&&(w=f.length);for(var b=0,_=new Array(w);b<w;b++)_[b]=f[b];return _}var e=g("color-normalize"),t=g("array-bounds"),r=g("color-id"),l=g("@plotly/point-cluster"),n=g("object-assign"),d=g("glslify"),u=g("pick-by-alias"),o=g("update-diff"),h=g("flatten-vertex-data"),s=g("is-iexplorer"),a=g("to-float32"),p=g("parse-rect"),c=i;function i(f,w){var b=this;if(!(this instanceof i))return new i(f,w);typeof f=="function"?(w||(w={}),w.regl=f):(w=f,f=null),w&&w.length&&(w.positions=w);var _,T=(f=w.regl)._gl,L=[];this.tooManyColors=s,_=f.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),n(this,{regl:f,gl:T,groups:[],markerCache:[null],markerTextures:[null],palette:L,paletteIds:{},paletteTexture:_,maxColors:255,maxSize:100,canvas:T.canvas}),this.update(w);var A={uniforms:{constPointSize:!!w.constPointSize,opacity:f.prop("opacity"),paletteSize:function(S,E){return[b.tooManyColors?0:255,_.height]},pixelRatio:f.context("pixelRatio"),scale:f.prop("scale"),scaleFract:f.prop("scaleFract"),translate:f.prop("translate"),translateFract:f.prop("translateFract"),markerTexture:f.prop("markerTexture"),paletteTexture:_},attributes:{x:function(S,E){return E.xAttr||{buffer:E.positionBuffer,stride:8,offset:0}},y:function(S,E){return E.yAttr||{buffer:E.positionBuffer,stride:8,offset:4}},xFract:function(S,E){return E.xAttr?{constant:[0,0]}:{buffer:E.positionFractBuffer,stride:8,offset:0}},yFract:function(S,E){return E.yAttr?{constant:[0,0]}:{buffer:E.positionFractBuffer,stride:8,offset:4}},size:function(S,E){return E.size.length?{buffer:E.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*E.size/b.maxSize)]}},borderSize:function(S,E){return E.borderSize.length?{buffer:E.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*E.borderSize/b.maxSize)]}},colorId:function(S,E){return E.color.length?{buffer:E.colorBuffer,stride:b.tooManyColors?8:4,offset:0}:{constant:b.tooManyColors?L.slice(4*E.color,4*E.color+4):[E.color]}},borderColorId:function(S,E){return E.borderColor.length?{buffer:E.colorBuffer,stride:b.tooManyColors?8:4,offset:b.tooManyColors?4:2}:{constant:b.tooManyColors?L.slice(4*E.borderColor,4*E.borderColor+4):[E.borderColor]}},isActive:function(S,E){return E.activation===!0?{constant:[1]}:E.activation?E.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:f.prop("viewport")},viewport:f.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:f.prop("elements"),count:f.prop("count"),offset:f.prop("offset"),primitive:"points"},I=n({},A);I.frag=d([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),I.vert=d([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=f(I);var P=n({},A);P.frag=d([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),P.vert=d([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),s&&(P.frag=P.frag.replace("smoothstep","smoothStep"),I.frag=I.frag.replace("smoothstep","smoothStep")),this.drawCircle=f(P)}i.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},i.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},i.prototype.draw=function(){for(var f=this,w=arguments.length,b=new Array(w),_=0;_<w;_++)b[_]=arguments[_];var T=this.groups;if(b.length===1&&Array.isArray(b[0])&&(b[0][0]===null||Array.isArray(b[0][0]))&&(b=b[0]),this.regl._refresh(),b.length)for(var L=0;L<b.length;L++)this.drawItem(L,b[L]);else T.forEach(function(A,I){f.drawItem(I)});return this},i.prototype.drawItem=function(f,w){var b=this.groups,_=b[f];if(typeof w=="number"&&(f=w,_=b[w],w=null),_&&_.count&&_.opacity){_.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,_,w));for(var T=[],L=1;L<_.activation.length;L++)_.activation[L]&&(_.activation[L]===!0||_.activation[L].data.length)&&T.push.apply(T,v(this.getMarkerDrawOptions(L,_,w)));T.length&&this.drawMarker(T)}},i.prototype.getMarkerDrawOptions=function(f,w,b){var _=w.range,T=w.tree,L=w.viewport,A=w.activation,I=w.selectionBuffer,P=w.count;if(this.regl,!T)return b?[n({},w,{markerTexture:this.markerTextures[f],activation:A[f],count:b.length,elements:b,offset:0})]:[n({},w,{markerTexture:this.markerTextures[f],activation:A[f],offset:0})];var S=[],E=T.range(_,{lod:!0,px:[(_[2]-_[0])/L.width,(_[3]-_[1])/L.height]});if(b){for(var z=A[f].data,D=new Uint8Array(P),U=0;U<b.length;U++){var H=b[U];D[H]=z?z[H]:1}I.subdata(D)}for(var Y=E.length;Y--;){var J=m(E[Y],2),W=J[0],Z=J[1];S.push(n({},w,{markerTexture:this.markerTextures[f],activation:b?I:A[f],offset:W,count:Z-W}))}return S},i.prototype.update=function(){for(var f=this,w=arguments.length,b=new Array(w),_=0;_<w;_++)b[_]=arguments[_];if(b.length){b.length===1&&Array.isArray(b[0])&&(b=b[0]);var T=this.groups,L=this.gl,A=this.regl,I=this.maxSize,P=this.maxColors,S=this.palette;this.groups=T=b.map(function(E,z){var D=T[z];if(E===void 0)return D;E===null?E={positions:null}:typeof E=="function"?E={ondraw:E}:typeof E[0]=="number"&&(E={positions:E}),(E=u(E,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions===null&&(E.positions=[]),E.tooManyColors!=null&&(f.tooManyColors=E.tooManyColors),D||(T[z]=D={id:z,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:A.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:A.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:A.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:A.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:A.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},E=n({},i.defaults,E)),E.positions&&!("marker"in E)&&(E.marker=D.marker,delete D.marker),E.marker&&!("positions"in E)&&(E.positions=D.positions,delete D.positions);var U=0,H=0;if(o(D,E,[{snap:!0,size:function(fe,ye){return fe==null&&(fe=i.defaults.size),U+=fe&&fe.length?1:0,fe},borderSize:function(fe,ye){return fe==null&&(fe=i.defaults.borderSize),U+=fe&&fe.length?1:0,fe},opacity:parseFloat,color:function(fe,ye){return fe==null&&(fe=i.defaults.color),fe=f.updateColor(fe),H++,fe},borderColor:function(fe,ye){return fe==null&&(fe=i.defaults.borderColor),fe=f.updateColor(fe),H++,fe},bounds:function(fe,ye,Ae){return"range"in Ae||(Ae.range=null),fe},positions:function(fe,ye,Ae){var pe=ye.snap,ge=ye.positionBuffer,we=ye.positionFractBuffer,oe=ye.selectionBuffer;if(fe.x||fe.y)return fe.x.length?ye.xAttr={buffer:A.buffer(fe.x),offset:0,stride:4,count:fe.x.length}:ye.xAttr={buffer:fe.x.buffer,offset:4*fe.x.offset||0,stride:4*(fe.x.stride||1),count:fe.x.count},fe.y.length?ye.yAttr={buffer:A.buffer(fe.y),offset:0,stride:4,count:fe.y.length}:ye.yAttr={buffer:fe.y.buffer,offset:4*fe.y.offset||0,stride:4*(fe.y.stride||1),count:fe.y.count},ye.count=Math.max(ye.xAttr.count,ye.yAttr.count),fe;fe=h(fe,"float64");var de=ye.count=Math.floor(fe.length/2),Te=ye.bounds=de?t(fe,2):null;if(Ae.range||ye.range||(delete ye.range,Ae.range=Te),Ae.marker||ye.marker||(delete ye.marker,Ae.marker=null),pe&&(pe===!0||de>pe)?ye.tree=l(fe,{bounds:Te}):pe&&pe.length&&(ye.tree=pe),ye.tree){var Ee={primitive:"points",usage:"static",data:ye.tree,type:"uint32"};ye.elements?ye.elements(Ee):ye.elements=A.elements(Ee)}var Me=a.float32(fe);return ge({data:Me,usage:"dynamic"}),we({data:a.fract32(fe,Me),usage:"dynamic"}),oe({data:new Uint8Array(de),type:"uint8",usage:"stream"}),fe}},{marker:function(fe,ye,Ae){var pe=ye.activation;if(pe.forEach(function(Me){return Me&&Me.destroy&&Me.destroy()}),pe.length=0,fe&&typeof fe[0]!="number"){for(var ge=[],we=0,oe=Math.min(fe.length,ye.count);we<oe;we++){var de=f.addMarker(fe[we]);ge[de]||(ge[de]=new Uint8Array(ye.count)),ge[de][we]=1}for(var Te=0;Te<ge.length;Te++)if(ge[Te]){var Ee={data:ge[Te],type:"uint8",usage:"static"};pe[Te]?pe[Te](Ee):pe[Te]=A.buffer(Ee),pe[Te].data=ge[Te]}}else pe[f.addMarker(fe)]=!0;return fe},range:function(fe,ye,Ae){var pe=ye.bounds;if(pe)return fe||(fe=pe),ye.scale=[1/(fe[2]-fe[0]),1/(fe[3]-fe[1])],ye.translate=[-fe[0],-fe[1]],ye.scaleFract=a.fract(ye.scale),ye.translateFract=a.fract(ye.translate),fe},viewport:function(fe){return p(fe||[L.drawingBufferWidth,L.drawingBufferHeight])}}]),U){var Y=D,J=Y.count,W=Y.size,Z=Y.borderSize,re=Y.sizeBuffer,V=new Uint8Array(2*J);if(W.length||Z.length)for(var B=0;B<J;B++)V[2*B]=Math.round(255*(W[B]==null?W:W[B])/I),V[2*B+1]=Math.round(255*(Z[B]==null?Z:Z[B])/I);re({data:V,usage:"dynamic"})}if(H){var j,ee=D,N=ee.count,$=ee.color,K=ee.borderColor,te=ee.colorBuffer;if(f.tooManyColors){if($.length||K.length){j=new Uint8Array(8*N);for(var ie=0;ie<N;ie++){var le=$[ie];j[8*ie]=S[4*le],j[8*ie+1]=S[4*le+1],j[8*ie+2]=S[4*le+2],j[8*ie+3]=S[4*le+3];var se=K[ie];j[8*ie+4]=S[4*se],j[8*ie+5]=S[4*se+1],j[8*ie+6]=S[4*se+2],j[8*ie+7]=S[4*se+3]}}}else if($.length||K.length){j=new Uint8Array(4*N+2);for(var ve=0;ve<N;ve++)$[ve]!=null&&(j[4*ve]=$[ve]%P,j[4*ve+1]=Math.floor($[ve]/P)),K[ve]!=null&&(j[4*ve+2]=K[ve]%P,j[4*ve+3]=Math.floor(K[ve]/P))}te({data:j||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return D})}},i.prototype.addMarker=function(f){var w,b=this.markerTextures,_=this.regl,T=this.markerCache,L=f==null?0:T.indexOf(f);if(L>=0)return L;if(f instanceof Uint8Array||f instanceof Uint8ClampedArray)w=f;else{w=new Uint8Array(f.length);for(var A=0,I=f.length;A<I;A++)w[A]=255*f[A]}var P=Math.floor(Math.sqrt(w.length));return L=b.length,T.push(f),b.push(_.texture({channels:1,data:w,radius:P,mag:"linear",min:"linear"})),L},i.prototype.updateColor=function(f){var w=this.paletteIds,b=this.palette,_=this.maxColors;Array.isArray(f)||(f=[f]);var T=[];if(typeof f[0]=="number"){var L=[];if(Array.isArray(f))for(var A=0;A<f.length;A+=4)L.push(f.slice(A,A+4));else for(var I=0;I<f.length;I+=4)L.push(f.subarray(I,I+4));f=L}for(var P=0;P<f.length;P++){var S=f[P];S=e(S,"uint8");var E=r(S,!1);if(w[E]==null){var z=b.length;w[E]=Math.floor(z/4),b[z]=S[0],b[z+1]=S[1],b[z+2]=S[2],b[z+3]=S[3]}T[P]=w[E]}return!this.tooManyColors&&b.length>4*_&&(this.tooManyColors=!0),this.updatePalette(b),T.length===1?T[0]:T},i.prototype.updatePalette=function(f){if(!this.tooManyColors){var w=this.maxColors,b=this.paletteTexture,_=Math.ceil(.25*f.length/w);if(_>1)for(var T=.25*(f=f.slice()).length%w;T<_*w;T++)f.push(0,0,0,0);b.height<_&&b.resize(w,_),b.subimage({width:Math.min(.25*f.length,w),height:_,data:f},0,0)}},i.prototype.destroy=function(){return this.groups.forEach(function(f){f.sizeBuffer.destroy(),f.positionBuffer.destroy(),f.positionFractBuffer.destroy(),f.colorBuffer.destroy(),f.activation.forEach(function(w){return w&&w.destroy&&w.destroy()}),f.selectionBuffer.destroy(),f.elements&&f.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(f){return f&&f.destroy&&f.destroy()}),this};var y=g("object-assign");Q.exports=function(f,w){var b=new c(f,w),_=b.render.bind(b);return y(_,{render:_,update:b.update.bind(b),draw:b.draw.bind(b),destroy:b.destroy.bind(b),regl:b.regl,gl:b.gl,canvas:b.gl.canvas,groups:b.groups,markers:b.markerCache,palette:b.palette}),_}},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":314,"update-diff":330}],283:[function(g,Q,X){var m=g("regl-scatter2d"),v=g("pick-by-alias"),k=g("array-bounds"),x=g("raf"),e=g("array-range"),t=g("parse-rect"),r=g("flatten-vertex-data");function l(o,h){if(!(this instanceof l))return new l(o);this.traces=[],this.passes={},this.regl=o,this.scatter=m(o),this.canvas=this.scatter.canvas}function n(o,h,s){return(o.id!=null?o.id:o)<<16|(255&h)<<8|255&s}function d(o,h,s){var a,p,c,i,y=o[h],f=o[s];return y.length>2?(y[0],y[2],a=y[1],p=y[3]):y.length?(a=y[0],p=y[1]):(y.x,a=y.y,y.x+y.width,p=y.y+y.height),f.length>2?(c=f[0],i=f[2],f[1],f[3]):f.length?(c=f[0],i=f[1]):(c=f.x,f.y,i=f.x+f.width,f.y+f.height),[c,a,i,p]}function u(o){if(typeof o=="number")return[o,o,o,o];if(o.length===2)return[o[0],o[1],o[0],o[1]];var h=t(o);return[h.x,h.y,h.x+h.width,h.y+h.height]}Q.exports=l,l.prototype.render=function(){for(var o,h=this,s=[],a=arguments.length;a--;)s[a]=arguments[a];return s.length&&(o=this).update.apply(o,s),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=x(function(){h.draw(),h.dirty=!0,h.planned=null})):(this.draw(),this.dirty=!0,x(function(){h.dirty=!1})),this)},l.prototype.update=function(){for(var o,h=[],s=arguments.length;s--;)h[s]=arguments[s];if(h.length){for(var a=0;a<h.length;a++)this.updateItem(a,h[a]);this.traces=this.traces.filter(Boolean);for(var p=[],c=0,i=0;i<this.traces.length;i++){for(var y=this.traces[i],f=this.traces[i].passes,w=0;w<f.length;w++)p.push(this.passes[f[w]]);y.passOffset=c,c+=y.passes.length}return(o=this.scatter).update.apply(o,p),this}},l.prototype.updateItem=function(o,h){var s=this.regl;if(h===null)return this.traces[o]=null,this;if(!h)return this;var a,p=v(h,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),c=this.traces[o]||(this.traces[o]={id:o,buffer:s.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:t([s._gl.drawingBufferWidth,s._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(p.color!=null&&(c.color=p.color),p.size!=null&&(c.size=p.size),p.marker!=null&&(c.marker=p.marker),p.borderColor!=null&&(c.borderColor=p.borderColor),p.borderSize!=null&&(c.borderSize=p.borderSize),p.opacity!=null&&(c.opacity=p.opacity),p.viewport&&(c.viewport=t(p.viewport)),p.diagonal!=null&&(c.diagonal=p.diagonal),p.upper!=null&&(c.upper=p.upper),p.lower!=null&&(c.lower=p.lower),p.data){c.buffer(r(p.data)),c.columns=p.data.length,c.count=p.data[0].length,c.bounds=[];for(var i=0;i<c.columns;i++)c.bounds[i]=k(p.data[i],1)}p.range&&(c.range=p.range,a=c.range&&typeof c.range[0]!="number"),p.domain&&(c.domain=p.domain);var y=!1;p.padding!=null&&(Array.isArray(p.padding)&&p.padding.length===c.columns&&typeof p.padding[p.padding.length-1]=="number"?(c.padding=p.padding.map(u),y=!0):c.padding=u(p.padding));var f=c.columns,w=c.count,b=c.viewport.width,_=c.viewport.height,T=c.viewport.x,L=c.viewport.y,A=b/f,I=_/f;c.passes=[];for(var P=0;P<f;P++)for(var S=0;S<f;S++)if((c.diagonal||S!==P)&&(c.upper||!(P>S))&&(c.lower||!(P<S))){var E=n(c.id,P,S),z=this.passes[E]||(this.passes[E]={});if(p.data&&(p.transpose?z.positions={x:{buffer:c.buffer,offset:S,count:w,stride:f},y:{buffer:c.buffer,offset:P,count:w,stride:f}}:z.positions={x:{buffer:c.buffer,offset:S*w,count:w},y:{buffer:c.buffer,offset:P*w,count:w}},z.bounds=d(c.bounds,P,S)),p.domain||p.viewport||p.data){var D=y?d(c.padding,P,S):c.padding;if(c.domain){var U=d(c.domain,P,S),H=U[0],Y=U[1],J=U[2],W=U[3];z.viewport=[T+H*b+D[0],L+Y*_+D[1],T+J*b-D[2],L+W*_-D[3]]}else z.viewport=[T+S*A+A*D[0],L+P*I+I*D[1],T+(S+1)*A-A*D[2],L+(P+1)*I-I*D[3]]}p.color&&(z.color=c.color),p.size&&(z.size=c.size),p.marker&&(z.marker=c.marker),p.borderSize&&(z.borderSize=c.borderSize),p.borderColor&&(z.borderColor=c.borderColor),p.opacity&&(z.opacity=c.opacity),p.range&&(z.range=a?d(c.range,P,S):c.range||z.bounds),c.passes.push(E)}return this},l.prototype.draw=function(){for(var o,h=[],s=arguments.length;s--;)h[s]=arguments[s];if(h.length){for(var a=[],p=0;p<h.length;p++)if(typeof h[p]=="number"){var c=this.traces[h[p]],i=c.passes,y=c.passOffset;a.push.apply(a,e(y,y+i.length))}else if(h[p].length){var f=h[p],w=this.traces[p],b=w.passes,_=w.passOffset;b=b.map(function(T,L){a[_+L]=f})}(o=this.scatter).draw.apply(o,a)}else this.scatter.draw();return this},l.prototype.destroy=function(){return this.traces.forEach(function(o){o.buffer&&o.buffer.destroy&&o.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:279,"regl-scatter2d":282}],284:[function(g,Q,X){(function(m,v){typeof X=="object"&&Q!==void 0?Q.exports=v():m.createREGL=v()})(this,function(){function m(he,be){this.id=$++,this.type=he,this.data=be}function v(he){return"["+function be(Re){if(Re.length===0)return[];var Ue=Re.charAt(0),Xe=Re.charAt(Re.length-1);if(1<Re.length&&Ue===Xe&&(Ue==='"'||Ue==="'"))return['"'+Re.substr(1,Re.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Ue=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Re))return be(Re.substr(0,Ue.index)).concat(be(Ue[1])).concat(be(Re.substr(Ue.index+Ue[0].length)));if((Ue=Re.split(".")).length===1)return['"'+Re.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Re=[],Xe=0;Xe<Ue.length;++Xe)Re=Re.concat(be(Ue[Xe]));return Re}(he).join("][")+"]"}function k(he){return typeof he=="string"?he.split():he}function x(he){return typeof he=="string"?document.querySelector(he):he}function e(he){var be,Re,Ue,Xe,qe=he||{};he={};var st=[],it=[],Tt=typeof window>"u"?1:window.devicePixelRatio,Pt=!1,rt={},ut=function(wt){},Bt=function(){};if(typeof qe=="string"?be=document.querySelector(qe):typeof qe=="object"&&(typeof qe.nodeName=="string"&&typeof qe.appendChild=="function"&&typeof qe.getBoundingClientRect=="function"?be=qe:typeof qe.drawArrays=="function"||typeof qe.drawElements=="function"?Ue=(Xe=qe).canvas:("gl"in qe?Xe=qe.gl:"canvas"in qe?Ue=x(qe.canvas):"container"in qe&&(Re=x(qe.container)),"attributes"in qe&&(he=qe.attributes),"extensions"in qe&&(st=k(qe.extensions)),"optionalExtensions"in qe&&(it=k(qe.optionalExtensions)),"onDone"in qe&&(ut=qe.onDone),"profile"in qe&&(Pt=!!qe.profile),"pixelRatio"in qe&&(Tt=+qe.pixelRatio),"cachedCode"in qe&&(rt=qe.cachedCode))),be&&(be.nodeName.toLowerCase()==="canvas"?Ue=be:Re=be),!Xe){if(!Ue){if(!(be=function(wt,Lt,Se){function We(){var Mt=window.innerWidth,Nt=window.innerHeight;wt!==document.body&&(Mt=(Nt=ft.getBoundingClientRect()).right-Nt.left,Nt=Nt.bottom-Nt.top),ft.width=Se*Mt,ft.height=Se*Nt}var nt,ft=document.createElement("canvas");return N(ft.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),wt.appendChild(ft),wt===document.body&&(ft.style.position="absolute",N(wt.style,{margin:0,padding:0})),wt!==document.body&&typeof ResizeObserver=="function"?(nt=new ResizeObserver(function(){setTimeout(We)})).observe(wt):window.addEventListener("resize",We,!1),We(),{canvas:ft,onDestroy:function(){nt?nt.disconnect():window.removeEventListener("resize",We),wt.removeChild(ft)}}}(Re||document.body,0,Tt)))return null;Ue=be.canvas,Bt=be.onDestroy}he.premultipliedAlpha===void 0&&(he.premultipliedAlpha=!0),Xe=function(wt,Lt){function Se(We){try{return wt.getContext(We,Lt)}catch{return null}}return Se("webgl")||Se("experimental-webgl")||Se("webgl-experimental")}(Ue,he)}return Xe?{gl:Xe,canvas:Ue,container:Re,extensions:st,optionalExtensions:it,pixelRatio:Tt,profile:Pt,cachedCode:rt,onDone:ut,onDestroy:Bt}:(Bt(),ut("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function t(he,be){for(var Re=Array(he),Ue=0;Ue<he;++Ue)Re[Ue]=be(Ue);return Re}function r(he){var be,Re;return be=(65535<he)<<4,be|=Re=(255<(he>>>=be))<<3,(be|=Re=(15<(he>>>=Re))<<2)|(Re=(3<(he>>>=Re))<<1)|he>>>Re>>1}function l(){function he(Ue){e:{for(var Xe=16;268435456>=Xe;Xe*=16)if(Ue<=Xe){Ue=Xe;break e}Ue=0}return 0<(Xe=Re[r(Ue)>>2]).length?Xe.pop():new ArrayBuffer(Ue)}function be(Ue){Re[r(Ue.byteLength)>>2].push(Ue)}var Re=t(8,function(){return[]});return{alloc:he,free:be,allocType:function(Ue,Xe){var qe=null;switch(Ue){case 5120:qe=new Int8Array(he(Xe),0,Xe);break;case 5121:qe=new Uint8Array(he(Xe),0,Xe);break;case 5122:qe=new Int16Array(he(2*Xe),0,Xe);break;case 5123:qe=new Uint16Array(he(2*Xe),0,Xe);break;case 5124:qe=new Int32Array(he(4*Xe),0,Xe);break;case 5125:qe=new Uint32Array(he(4*Xe),0,Xe);break;case 5126:qe=new Float32Array(he(4*Xe),0,Xe);break;default:return null}return qe.length!==Xe?qe.subarray(0,Xe):qe},freeType:function(Ue){be(Ue.buffer)}}}function n(he){return!!he&&typeof he=="object"&&Array.isArray(he.shape)&&Array.isArray(he.stride)&&typeof he.offset=="number"&&he.shape.length===he.stride.length&&(Array.isArray(he.data)||ve(he.data))}function d(he,be,Re,Ue,Xe,qe){for(var st=0;st<be;++st)for(var it=he[st],Tt=0;Tt<Re;++Tt)for(var Pt=it[Tt],rt=0;rt<Ue;++rt)Xe[qe++]=Pt[rt]}function u(he){return 0|Ae[Object.prototype.toString.call(he)]}function o(he,be){for(var Re=0;Re<be.length;++Re)he[Re]=be[Re]}function h(he,be,Re,Ue,Xe,qe,st){for(var it=0,Tt=0;Tt<Re;++Tt)for(var Pt=0;Pt<Ue;++Pt)he[it++]=be[Xe*Tt+qe*Pt+st]}function s(he,be,Re,Ue){function Xe(ut){this.id=Tt++,this.buffer=he.createBuffer(),this.type=ut,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Re.profile&&(this.stats={size:0})}function qe(ut,Bt,wt){ut.byteLength=Bt.byteLength,he.bufferData(ut.type,Bt,wt)}function st(ut,Bt,wt,Lt,Se,We){if(ut.usage=wt,Array.isArray(Bt)){if(ut.dtype=Lt||5126,0<Bt.length)if(Array.isArray(Bt[0])){Se=oe(Bt);for(var nt=Lt=1;nt<Se.length;++nt)Lt*=Se[nt];ut.dimension=Lt,qe(ut,Bt=we(Bt,Se,ut.dtype),wt),We?ut.persistentData=Bt:le.freeType(Bt)}else typeof Bt[0]=="number"?(ut.dimension=Se,o(Se=le.allocType(ut.dtype,Bt.length),Bt),qe(ut,Se,wt),We?ut.persistentData=Se:le.freeType(Se)):ve(Bt[0])&&(ut.dimension=Bt[0].length,ut.dtype=Lt||u(Bt[0])||5126,qe(ut,Bt=we(Bt,[Bt.length,Bt[0].length],ut.dtype),wt),We?ut.persistentData=Bt:le.freeType(Bt))}else if(ve(Bt))ut.dtype=Lt||u(Bt),ut.dimension=Se,qe(ut,Bt,wt),We&&(ut.persistentData=new Uint8Array(new Uint8Array(Bt.buffer)));else if(n(Bt)){Se=Bt.shape;var ft=Bt.stride,Mt=(nt=Bt.offset,0),Nt=0,Zt=0,Ut=0;Se.length===1?(Mt=Se[0],Nt=1,Zt=ft[0],Ut=0):Se.length===2&&(Mt=Se[0],Nt=Se[1],Zt=ft[0],Ut=ft[1]),ut.dtype=Lt||u(Bt.data)||5126,ut.dimension=Nt,h(Se=le.allocType(ut.dtype,Mt*Nt),Bt.data,Mt,Nt,Zt,Ut,nt),qe(ut,Se,wt),We?ut.persistentData=Se:le.freeType(Se)}else Bt instanceof ArrayBuffer&&(ut.dtype=5121,ut.dimension=Se,qe(ut,Bt,wt),We&&(ut.persistentData=new Uint8Array(new Uint8Array(Bt))))}function it(ut){be.bufferCount--,Ue(ut),he.deleteBuffer(ut.buffer),ut.buffer=null,delete Pt[ut.id]}var Tt=0,Pt={};Xe.prototype.bind=function(){he.bindBuffer(this.type,this.buffer)},Xe.prototype.destroy=function(){it(this)};var rt=[];return Re.profile&&(be.getTotalBufferSize=function(){var ut=0;return Object.keys(Pt).forEach(function(Bt){ut+=Pt[Bt].stats.size}),ut}),{create:function(ut,Bt,wt,Lt){function Se(nt){var ft=35044,Mt=null,Nt=0,Zt=0,Ut=1;return Array.isArray(nt)||ve(nt)||n(nt)||nt instanceof ArrayBuffer?Mt=nt:typeof nt=="number"?Nt=0|nt:nt&&("data"in nt&&(Mt=nt.data),"usage"in nt&&(ft=ge[nt.usage]),"type"in nt&&(Zt=pe[nt.type]),"dimension"in nt&&(Ut=0|nt.dimension),"length"in nt&&(Nt=0|nt.length)),We.bind(),Mt?st(We,Mt,ft,Zt,Ut,Lt):(Nt&&he.bufferData(We.type,Nt,ft),We.dtype=Zt||5121,We.usage=ft,We.dimension=Ut,We.byteLength=Nt),Re.profile&&(We.stats.size=We.byteLength*de[We.dtype]),Se}be.bufferCount++;var We=new Xe(Bt);return Pt[We.id]=We,wt||Se(ut),Se._reglType="buffer",Se._buffer=We,Se.subdata=function(nt,ft){var Mt,Nt=0|(ft||0);if(We.bind(),ve(nt)||nt instanceof ArrayBuffer)he.bufferSubData(We.type,Nt,nt);else if(Array.isArray(nt)){if(0<nt.length)if(typeof nt[0]=="number"){var Zt=le.allocType(We.dtype,nt.length);o(Zt,nt),he.bufferSubData(We.type,Nt,Zt),le.freeType(Zt)}else(Array.isArray(nt[0])||ve(nt[0]))&&(Mt=oe(nt),Zt=we(nt,Mt,We.dtype),he.bufferSubData(We.type,Nt,Zt),le.freeType(Zt))}else if(n(nt)){Mt=nt.shape;var Ut=nt.stride,fr=Zt=0,Tr=0,ur=0;Mt.length===1?(Zt=Mt[0],fr=1,Tr=Ut[0],ur=0):Mt.length===2&&(Zt=Mt[0],fr=Mt[1],Tr=Ut[0],ur=Ut[1]),Mt=Array.isArray(nt.data)?We.dtype:u(nt.data),h(Mt=le.allocType(Mt,Zt*fr),nt.data,Zt,fr,Tr,ur,nt.offset),he.bufferSubData(We.type,Nt,Mt),le.freeType(Mt)}return Se},Re.profile&&(Se.stats=We.stats),Se.destroy=function(){it(We)},Se},createStream:function(ut,Bt){var wt=rt.pop();return wt||(wt=new Xe(ut)),wt.bind(),st(wt,Bt,35040,0,1,!1),wt},destroyStream:function(ut){rt.push(ut)},clear:function(){fe(Pt).forEach(it),rt.forEach(it)},getBuffer:function(ut){return ut&&ut._buffer instanceof Xe?ut._buffer:null},restore:function(){fe(Pt).forEach(function(ut){ut.buffer=he.createBuffer(),he.bindBuffer(ut.type,ut.buffer),he.bufferData(ut.type,ut.persistentData||ut.byteLength,ut.usage)})},_initBuffer:st}}function a(he,be,Re,Ue){function Xe(ut){this.id=Tt++,it[this.id]=this,this.buffer=ut,this.primType=4,this.type=this.vertCount=0}function qe(ut,Bt,wt,Lt,Se,We,nt){var ft;if(ut.buffer.bind(),Bt?((ft=nt)||ve(Bt)&&(!n(Bt)||ve(Bt.data))||(ft=be.oes_element_index_uint?5125:5123),Re._initBuffer(ut.buffer,Bt,wt,ft,3)):(he.bufferData(34963,We,wt),ut.buffer.dtype=ft||5121,ut.buffer.usage=wt,ut.buffer.dimension=3,ut.buffer.byteLength=We),ft=nt,!nt){switch(ut.buffer.dtype){case 5121:case 5120:ft=5121;break;case 5123:case 5122:ft=5123;break;case 5125:case 5124:ft=5125}ut.buffer.dtype=ft}ut.type=ft,0>(Bt=Se)&&(Bt=ut.buffer.byteLength,ft===5123?Bt>>=1:ft===5125&&(Bt>>=2)),ut.vertCount=Bt,Bt=Lt,0>Lt&&(Bt=4,(Lt=ut.buffer.dimension)===1&&(Bt=0),Lt===2&&(Bt=1),Lt===3&&(Bt=4)),ut.primType=Bt}function st(ut){Ue.elementsCount--,delete it[ut.id],ut.buffer.destroy(),ut.buffer=null}var it={},Tt=0,Pt={uint8:5121,uint16:5123};be.oes_element_index_uint&&(Pt.uint32=5125),Xe.prototype.bind=function(){this.buffer.bind()};var rt=[];return{create:function(ut,Bt){function wt(We){if(We)if(typeof We=="number")Lt(We),Se.primType=4,Se.vertCount=0|We,Se.type=5121;else{var nt=null,ft=35044,Mt=-1,Nt=-1,Zt=0,Ut=0;Array.isArray(We)||ve(We)||n(We)?nt=We:("data"in We&&(nt=We.data),"usage"in We&&(ft=ge[We.usage]),"primitive"in We&&(Mt=Te[We.primitive]),"count"in We&&(Nt=0|We.count),"type"in We&&(Ut=Pt[We.type]),"length"in We?Zt=0|We.length:(Zt=Nt,Ut===5123||Ut===5122?Zt*=2:Ut!==5125&&Ut!==5124||(Zt*=4))),qe(Se,nt,ft,Mt,Nt,Zt,Ut)}else Lt(),Se.primType=4,Se.vertCount=0,Se.type=5121;return wt}var Lt=Re.create(null,34963,!0),Se=new Xe(Lt._buffer);return Ue.elementsCount++,wt(ut),wt._reglType="elements",wt._elements=Se,wt.subdata=function(We,nt){return Lt.subdata(We,nt),wt},wt.destroy=function(){st(Se)},wt},createStream:function(ut){var Bt=rt.pop();return Bt||(Bt=new Xe(Re.create(null,34963,!0,!1)._buffer)),qe(Bt,ut,35040,-1,-1,0,0),Bt},destroyStream:function(ut){rt.push(ut)},getElements:function(ut){return typeof ut=="function"&&ut._elements instanceof Xe?ut._elements:null},clear:function(){fe(it).forEach(st)}}}function p(he){for(var be=le.allocType(5123,he.length),Re=0;Re<he.length;++Re)if(isNaN(he[Re]))be[Re]=65535;else if(1/0===he[Re])be[Re]=31744;else if(-1/0===he[Re])be[Re]=64512;else{Ee[0]=he[Re];var Ue=(qe=Me[0])>>>31<<15,Xe=(qe<<1>>>24)-127,qe=qe>>13&1023;be[Re]=-24>Xe?Ue:-14>Xe?Ue+(qe+1024>>-14-Xe):15<Xe?Ue+31744:Ue+(Xe+15<<10)+qe}return be}function c(he){return Array.isArray(he)||ve(he)}function i(he){return"[object "+he+"]"}function y(he){return Array.isArray(he)&&(he.length===0||typeof he[0]=="number")}function f(he){return!(!Array.isArray(he)||he.length===0||!c(he[0]))}function w(he){return Object.prototype.toString.call(he)}function b(he){if(!he)return!1;var be=w(he);return 0<=ot.indexOf(be)||y(he)||f(he)||n(he)}function _(he,be){he.type===36193?(he.data=p(be),le.freeType(be)):he.data=be}function T(he,be,Re,Ue,Xe,qe){if(he=bt[he]!==void 0?bt[he]:Oe[he]*vt[be],qe&&(he*=6),Xe){for(Ue=0;1<=Re;)Ue+=he*Re*Re,Re/=2;return Ue}return he*Re*Ue}function L(he,be,Re,Ue,Xe,qe,st){function it(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function Tt(tr,mr){tr.internalformat=mr.internalformat,tr.format=mr.format,tr.type=mr.type,tr.compressed=mr.compressed,tr.premultiplyAlpha=mr.premultiplyAlpha,tr.flipY=mr.flipY,tr.unpackAlignment=mr.unpackAlignment,tr.colorSpace=mr.colorSpace,tr.width=mr.width,tr.height=mr.height,tr.channels=mr.channels}function Pt(tr,mr){if(typeof mr=="object"&&mr){"premultiplyAlpha"in mr&&(tr.premultiplyAlpha=mr.premultiplyAlpha),"flipY"in mr&&(tr.flipY=mr.flipY),"alignment"in mr&&(tr.unpackAlignment=mr.alignment),"colorSpace"in mr&&(tr.colorSpace=Fr[mr.colorSpace]),"type"in mr&&(tr.type=Yr[mr.type]);var Ct=tr.width,or=tr.height,hr=tr.channels,Rr=!1;"shape"in mr?(Ct=mr.shape[0],or=mr.shape[1],mr.shape.length===3&&(hr=mr.shape[2],Rr=!0)):("radius"in mr&&(Ct=or=mr.radius),"width"in mr&&(Ct=mr.width),"height"in mr&&(or=mr.height),"channels"in mr&&(hr=mr.channels,Rr=!0)),tr.width=0|Ct,tr.height=0|or,tr.channels=0|hr,Ct=!1,"format"in mr&&(Ct=mr.format,or=tr.internalformat=fn[Ct],tr.format=gn[or],Ct in Yr&&!("type"in mr)&&(tr.type=Yr[Ct]),Ct in en&&(tr.compressed=!0),Ct=!0),!Rr&&Ct?tr.channels=Oe[tr.format]:Rr&&!Ct&&tr.channels!==Ie[tr.format]&&(tr.format=tr.internalformat=Ie[tr.channels])}}function rt(tr){he.pixelStorei(37440,tr.flipY),he.pixelStorei(37441,tr.premultiplyAlpha),he.pixelStorei(37443,tr.colorSpace),he.pixelStorei(3317,tr.unpackAlignment)}function ut(){it.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Bt(tr,mr){var Ct=null;if(b(mr)?Ct=mr:mr&&(Pt(tr,mr),"x"in mr&&(tr.xOffset=0|mr.x),"y"in mr&&(tr.yOffset=0|mr.y),b(mr.data)&&(Ct=mr.data)),mr.copy){var or=Xe.viewportWidth,hr=Xe.viewportHeight;tr.width=tr.width||or-tr.xOffset,tr.height=tr.height||hr-tr.yOffset,tr.needsCopy=!0}else if(Ct){if(ve(Ct))tr.channels=tr.channels||4,tr.data=Ct,"type"in mr||tr.type!==5121||(tr.type=0|Ae[Object.prototype.toString.call(Ct)]);else if(y(Ct)){switch(tr.channels=tr.channels||4,hr=(or=Ct).length,tr.type){case 5121:case 5123:case 5125:case 5126:(hr=le.allocType(tr.type,hr)).set(or),tr.data=hr;break;case 36193:tr.data=p(or)}tr.alignment=1,tr.needsFree=!0}else if(n(Ct)){or=Ct.data,Array.isArray(or)||tr.type!==5121||(tr.type=0|Ae[Object.prototype.toString.call(or)]),hr=Ct.shape;var Rr,zr,Or,Ar,vr=Ct.stride;hr.length===3?(Or=hr[2],Ar=vr[2]):Ar=Or=1,Rr=hr[0],zr=hr[1],hr=vr[0],vr=vr[1],tr.alignment=1,tr.width=Rr,tr.height=zr,tr.channels=Or,tr.format=tr.internalformat=Ie[Or],tr.needsFree=!0,Rr=Ar,Ct=Ct.offset,Or=tr.width,Ar=tr.height,zr=tr.channels;for(var xr=le.allocType(tr.type===36193?5126:tr.type,Or*Ar*zr),wr=0,Er=0;Er<Ar;++Er)for(var qr=0;qr<Or;++qr)for(var Hr=0;Hr<zr;++Hr)xr[wr++]=or[hr*qr+vr*Er+Rr*Hr+Ct];_(tr,xr)}else if(w(Ct)===Ze||w(Ct)===Fe||w(Ct)===Pe)w(Ct)===Ze||w(Ct)===Fe?tr.element=Ct:tr.element=Ct.canvas,tr.width=tr.element.width,tr.height=tr.element.height,tr.channels=4;else if(w(Ct)===ze)tr.element=Ct,tr.width=Ct.width,tr.height=Ct.height,tr.channels=4;else if(w(Ct)===Ge)tr.element=Ct,tr.width=Ct.naturalWidth,tr.height=Ct.naturalHeight,tr.channels=4;else if(w(Ct)===$e)tr.element=Ct,tr.width=Ct.videoWidth,tr.height=Ct.videoHeight,tr.channels=4;else if(f(Ct)){for(or=tr.width||Ct[0].length,hr=tr.height||Ct.length,vr=tr.channels,vr=c(Ct[0][0])?vr||Ct[0][0].length:vr||1,Rr=ye.shape(Ct),Or=1,Ar=0;Ar<Rr.length;++Ar)Or*=Rr[Ar];Or=le.allocType(tr.type===36193?5126:tr.type,Or),ye.flatten(Ct,Rr,"",Or),_(tr,Or),tr.alignment=1,tr.width=or,tr.height=hr,tr.channels=vr,tr.format=tr.internalformat=Ie[vr],tr.needsFree=!0}}else tr.width=tr.width||1,tr.height=tr.height||1,tr.channels=tr.channels||4}function wt(tr,mr,Ct,or,hr){var Rr=tr.element,zr=tr.data,Or=tr.internalformat,Ar=tr.format,vr=tr.type,xr=tr.width,wr=tr.height;rt(tr),Rr?he.texSubImage2D(mr,hr,Ct,or,Ar,vr,Rr):tr.compressed?he.compressedTexSubImage2D(mr,hr,Ct,or,Or,xr,wr,zr):tr.needsCopy?(Ue(),he.copyTexSubImage2D(mr,hr,Ct,or,tr.xOffset,tr.yOffset,xr,wr)):he.texSubImage2D(mr,hr,Ct,or,xr,wr,Ar,vr,zr)}function Lt(){return Qr.pop()||new ut}function Se(tr){tr.needsFree&&le.freeType(tr.data),ut.call(tr),Qr.push(tr)}function We(){it.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function nt(tr,mr,Ct){var or=tr.images[0]=Lt();tr.mipmask=1,or.width=tr.width=mr,or.height=tr.height=Ct,or.channels=tr.channels=4}function ft(tr,mr){var Ct=null;if(b(mr))Tt(Ct=tr.images[0]=Lt(),tr),Bt(Ct,mr),tr.mipmask=1;else if(Pt(tr,mr),Array.isArray(mr.mipmap))for(var or=mr.mipmap,hr=0;hr<or.length;++hr)Tt(Ct=tr.images[hr]=Lt(),tr),Ct.width>>=hr,Ct.height>>=hr,Bt(Ct,or[hr]),tr.mipmask|=1<<hr;else Tt(Ct=tr.images[0]=Lt(),tr),Bt(Ct,mr),tr.mipmask=1;Tt(tr,tr.images[0])}function Mt(tr,mr){for(var Ct=tr.images,or=0;or<Ct.length&&Ct[or];++or){var hr=Ct[or],Rr=mr,zr=or,Or=hr.element,Ar=hr.data,vr=hr.internalformat,xr=hr.format,wr=hr.type,Er=hr.width,qr=hr.height;rt(hr),Or?he.texImage2D(Rr,zr,xr,xr,wr,Or):hr.compressed?he.compressedTexImage2D(Rr,zr,vr,Er,qr,0,Ar):hr.needsCopy?(Ue(),he.copyTexImage2D(Rr,zr,xr,hr.xOffset,hr.yOffset,Er,qr,0)):he.texImage2D(Rr,zr,xr,Er,qr,0,xr,wr,Ar||null)}}function Nt(){var tr=un.pop()||new We;it.call(tr);for(var mr=tr.mipmask=0;16>mr;++mr)tr.images[mr]=null;return tr}function Zt(tr){for(var mr=tr.images,Ct=0;Ct<mr.length;++Ct)mr[Ct]&&Se(mr[Ct]),mr[Ct]=null;un.push(tr)}function Ut(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function fr(tr,mr){"min"in mr&&(tr.minFilter=Ir[mr.min],0<=De.indexOf(tr.minFilter)&&!("faces"in mr)&&(tr.genMipmaps=!0)),"mag"in mr&&(tr.magFilter=Mr[mr.mag]);var Ct=tr.wrapS,or=tr.wrapT;if("wrap"in mr){var hr=mr.wrap;typeof hr=="string"?Ct=or=gr[hr]:Array.isArray(hr)&&(Ct=gr[hr[0]],or=gr[hr[1]])}else"wrapS"in mr&&(Ct=gr[mr.wrapS]),"wrapT"in mr&&(or=gr[mr.wrapT]);if(tr.wrapS=Ct,tr.wrapT=or,"anisotropic"in mr&&(tr.anisotropic=mr.anisotropic),"mipmap"in mr){switch(Ct=!1,typeof mr.mipmap){case"string":tr.mipmapHint=cr[mr.mipmap],Ct=tr.genMipmaps=!0;break;case"boolean":Ct=tr.genMipmaps=mr.mipmap;break;case"object":tr.genMipmaps=!1,Ct=!0}!Ct||"min"in mr||(tr.minFilter=9984)}}function Tr(tr,mr){he.texParameteri(mr,10241,tr.minFilter),he.texParameteri(mr,10240,tr.magFilter),he.texParameteri(mr,10242,tr.wrapS),he.texParameteri(mr,10243,tr.wrapT),be.ext_texture_filter_anisotropic&&he.texParameteri(mr,34046,tr.anisotropic),tr.genMipmaps&&(he.hint(33170,tr.mipmapHint),he.generateMipmap(mr))}function ur(tr){it.call(this),this.mipmask=0,this.internalformat=6408,this.id=Gn++,this.refCount=1,this.target=tr,this.texture=he.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Ut,st.profile&&(this.stats={size:0})}function Kt(tr){he.activeTexture(33984),he.bindTexture(tr.target,tr.texture)}function Qt(){var tr=oa[0];tr?he.bindTexture(tr.target,tr.texture):he.bindTexture(3553,null)}function er(tr){var mr=tr.texture,Ct=tr.unit,or=tr.target;0<=Ct&&(he.activeTexture(33984+Ct),he.bindTexture(or,null),oa[Ct]=null),he.deleteTexture(mr),tr.texture=null,tr.params=null,tr.pixels=null,tr.refCount=0,delete wn[tr.id],qe.textureCount--}var cr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},gr={repeat:10497,clamp:33071,mirror:33648},Mr={nearest:9728,linear:9729},Ir=N({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Mr),Fr={none:0,browser:37444},Yr={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},fn={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},en={};be.ext_srgb&&(fn.srgb=35904,fn.srgba=35906),be.oes_texture_float&&(Yr.float32=Yr.float=5126),be.oes_texture_half_float&&(Yr.float16=Yr["half float"]=36193),be.webgl_depth_texture&&(N(fn,{depth:6402,"depth stencil":34041}),N(Yr,{uint16:5123,uint32:5125,"depth stencil":34042})),be.webgl_compressed_texture_s3tc&&N(en,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),be.webgl_compressed_texture_atc&&N(en,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),be.webgl_compressed_texture_pvrtc&&N(en,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),be.webgl_compressed_texture_etc1&&(en["rgb etc1"]=36196);var Rn=Array.prototype.slice.call(he.getParameter(34467));Object.keys(en).forEach(function(tr){var mr=en[tr];0<=Rn.indexOf(mr)&&(fn[tr]=mr)});var nn=Object.keys(fn);Re.textureFormats=nn;var yn=[];Object.keys(fn).forEach(function(tr){yn[fn[tr]]=tr});var bn=[];Object.keys(Yr).forEach(function(tr){bn[Yr[tr]]=tr});var ta=[];Object.keys(Mr).forEach(function(tr){ta[Mr[tr]]=tr});var Br=[];Object.keys(Ir).forEach(function(tr){Br[Ir[tr]]=tr});var rn=[];Object.keys(gr).forEach(function(tr){rn[gr[tr]]=tr});var gn=nn.reduce(function(tr,mr){var Ct=fn[mr];return Ct===6409||Ct===6406||Ct===6409||Ct===6410||Ct===6402||Ct===34041||be.ext_srgb&&(Ct===35904||Ct===35906)?tr[Ct]=Ct:Ct===32855||0<=mr.indexOf("rgba")?tr[Ct]=6408:tr[Ct]=6407,tr},{}),Qr=[],un=[],Gn=0,wn={},Ln=Re.maxTextureUnits,oa=Array(Ln).map(function(){return null});return N(ur.prototype,{bind:function(){this.bindCount+=1;var tr=this.unit;if(0>tr){for(var mr=0;mr<Ln;++mr){var Ct=oa[mr];if(Ct){if(0<Ct.bindCount)continue;Ct.unit=-1}oa[mr]=this,tr=mr;break}st.profile&&qe.maxTextureUnits<tr+1&&(qe.maxTextureUnits=tr+1),this.unit=tr,he.activeTexture(33984+tr),he.bindTexture(this.target,this.texture)}return tr},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&er(this)}}),st.profile&&(qe.getTotalTextureSize=function(){var tr=0;return Object.keys(wn).forEach(function(mr){tr+=wn[mr].stats.size}),tr}),{create2D:function(tr,mr){function Ct(hr,Rr){var zr=or.texInfo;Ut.call(zr);var Or=Nt();return typeof hr=="number"?nt(Or,0|hr,typeof Rr=="number"?0|Rr:0|hr):hr?(fr(zr,hr),ft(Or,hr)):nt(Or,1,1),zr.genMipmaps&&(Or.mipmask=(Or.width<<1)-1),or.mipmask=Or.mipmask,Tt(or,Or),or.internalformat=Or.internalformat,Ct.width=Or.width,Ct.height=Or.height,Kt(or),Mt(Or,3553),Tr(zr,3553),Qt(),Zt(Or),st.profile&&(or.stats.size=T(or.internalformat,or.type,Or.width,Or.height,zr.genMipmaps,!1)),Ct.format=yn[or.internalformat],Ct.type=bn[or.type],Ct.mag=ta[zr.magFilter],Ct.min=Br[zr.minFilter],Ct.wrapS=rn[zr.wrapS],Ct.wrapT=rn[zr.wrapT],Ct}var or=new ur(3553);return wn[or.id]=or,qe.textureCount++,Ct(tr,mr),Ct.subimage=function(hr,Rr,zr,Or){Rr|=0,zr|=0,Or|=0;var Ar=Lt();return Tt(Ar,or),Ar.width=0,Ar.height=0,Bt(Ar,hr),Ar.width=Ar.width||(or.width>>Or)-Rr,Ar.height=Ar.height||(or.height>>Or)-zr,Kt(or),wt(Ar,3553,Rr,zr,Or),Qt(),Se(Ar),Ct},Ct.resize=function(hr,Rr){var zr=0|hr,Or=0|Rr||zr;if(zr===or.width&&Or===or.height)return Ct;Ct.width=or.width=zr,Ct.height=or.height=Or,Kt(or);for(var Ar=0;or.mipmask>>Ar;++Ar){var vr=zr>>Ar,xr=Or>>Ar;if(!vr||!xr)break;he.texImage2D(3553,Ar,or.format,vr,xr,0,or.format,or.type,null)}return Qt(),st.profile&&(or.stats.size=T(or.internalformat,or.type,zr,Or,!1,!1)),Ct},Ct._reglType="texture2d",Ct._texture=or,st.profile&&(Ct.stats=or.stats),Ct.destroy=function(){or.decRef()},Ct},createCube:function(tr,mr,Ct,or,hr,Rr){function zr(vr,xr,wr,Er,qr,Hr){var $r,tn=Or.texInfo;for(Ut.call(tn),$r=0;6>$r;++$r)Ar[$r]=Nt();if(typeof vr!="number"&&vr){if(typeof vr=="object")if(xr)ft(Ar[0],vr),ft(Ar[1],xr),ft(Ar[2],wr),ft(Ar[3],Er),ft(Ar[4],qr),ft(Ar[5],Hr);else if(fr(tn,vr),Pt(Or,vr),"faces"in vr)for(vr=vr.faces,$r=0;6>$r;++$r)Tt(Ar[$r],Or),ft(Ar[$r],vr[$r]);else for($r=0;6>$r;++$r)ft(Ar[$r],vr)}else for(vr=0|vr||1,$r=0;6>$r;++$r)nt(Ar[$r],vr,vr);for(Tt(Or,Ar[0]),Or.mipmask=tn.genMipmaps?(Ar[0].width<<1)-1:Ar[0].mipmask,Or.internalformat=Ar[0].internalformat,zr.width=Ar[0].width,zr.height=Ar[0].height,Kt(Or),$r=0;6>$r;++$r)Mt(Ar[$r],34069+$r);for(Tr(tn,34067),Qt(),st.profile&&(Or.stats.size=T(Or.internalformat,Or.type,zr.width,zr.height,tn.genMipmaps,!0)),zr.format=yn[Or.internalformat],zr.type=bn[Or.type],zr.mag=ta[tn.magFilter],zr.min=Br[tn.minFilter],zr.wrapS=rn[tn.wrapS],zr.wrapT=rn[tn.wrapT],$r=0;6>$r;++$r)Zt(Ar[$r]);return zr}var Or=new ur(34067);wn[Or.id]=Or,qe.cubeCount++;var Ar=Array(6);return zr(tr,mr,Ct,or,hr,Rr),zr.subimage=function(vr,xr,wr,Er,qr){wr|=0,Er|=0,qr|=0;var Hr=Lt();return Tt(Hr,Or),Hr.width=0,Hr.height=0,Bt(Hr,xr),Hr.width=Hr.width||(Or.width>>qr)-wr,Hr.height=Hr.height||(Or.height>>qr)-Er,Kt(Or),wt(Hr,34069+vr,wr,Er,qr),Qt(),Se(Hr),zr},zr.resize=function(vr){if((vr|=0)!==Or.width){zr.width=Or.width=vr,zr.height=Or.height=vr,Kt(Or);for(var xr=0;6>xr;++xr)for(var wr=0;Or.mipmask>>wr;++wr)he.texImage2D(34069+xr,wr,Or.format,vr>>wr,vr>>wr,0,Or.format,Or.type,null);return Qt(),st.profile&&(Or.stats.size=T(Or.internalformat,Or.type,zr.width,zr.height,!1,!0)),zr}},zr._reglType="textureCube",zr._texture=Or,st.profile&&(zr.stats=Or.stats),zr.destroy=function(){Or.decRef()},zr},clear:function(){for(var tr=0;tr<Ln;++tr)he.activeTexture(33984+tr),he.bindTexture(3553,null),oa[tr]=null;fe(wn).forEach(er),qe.cubeCount=0,qe.textureCount=0},getTexture:function(tr){return null},restore:function(){for(var tr=0;tr<Ln;++tr){var mr=oa[tr];mr&&(mr.bindCount=0,mr.unit=-1,oa[tr]=null)}fe(wn).forEach(function(Ct){Ct.texture=he.createTexture(),he.bindTexture(Ct.target,Ct.texture);for(var or=0;32>or;++or)if((Ct.mipmask&1<<or)!=0)if(Ct.target===3553)he.texImage2D(3553,or,Ct.internalformat,Ct.width>>or,Ct.height>>or,0,Ct.internalformat,Ct.type,null);else for(var hr=0;6>hr;++hr)he.texImage2D(34069+hr,or,Ct.internalformat,Ct.width>>or,Ct.height>>or,0,Ct.internalformat,Ct.type,null);Tr(Ct.texInfo,Ct.target)})},refresh:function(){for(var tr=0;tr<Ln;++tr){var mr=oa[tr];mr&&(mr.bindCount=0,mr.unit=-1,oa[tr]=null),he.activeTexture(33984+tr),he.bindTexture(3553,null),he.bindTexture(34067,null)}}}}function A(he,be,Re,Ue,Xe,qe){function st(ur,Kt,Qt){this.target=ur,this.texture=Kt,this.renderbuffer=Qt;var er=ur=0;Kt?(ur=Kt.width,er=Kt.height):Qt&&(ur=Qt.width,er=Qt.height),this.width=ur,this.height=er}function it(ur){ur&&(ur.texture&&ur.texture._texture.decRef(),ur.renderbuffer&&ur.renderbuffer._renderbuffer.decRef())}function Tt(ur,Kt,Qt){ur&&(ur.texture?ur.texture._texture.refCount+=1:ur.renderbuffer._renderbuffer.refCount+=1)}function Pt(ur,Kt){Kt&&(Kt.texture?he.framebufferTexture2D(36160,ur,Kt.target,Kt.texture._texture.texture,0):he.framebufferRenderbuffer(36160,ur,36161,Kt.renderbuffer._renderbuffer.renderbuffer))}function rt(ur){var Kt=3553,Qt=null,er=null,cr=ur;return typeof ur=="object"&&(cr=ur.data,"target"in ur&&(Kt=0|ur.target)),(ur=cr._reglType)==="texture2d"||ur==="textureCube"?Qt=cr:ur==="renderbuffer"&&(er=cr,Kt=36161),new st(Kt,Qt,er)}function ut(ur,Kt,Qt,er,cr){return Qt?((ur=Ue.create2D({width:ur,height:Kt,format:er,type:cr}))._texture.refCount=0,new st(3553,ur,null)):((ur=Xe.create({width:ur,height:Kt,format:er}))._renderbuffer.refCount=0,new st(36161,null,ur))}function Bt(ur){return ur&&(ur.texture||ur.renderbuffer)}function wt(ur,Kt,Qt){ur&&(ur.texture?ur.texture.resize(Kt,Qt):ur.renderbuffer&&ur.renderbuffer.resize(Kt,Qt),ur.width=Kt,ur.height=Qt)}function Lt(){this.id=fr++,Tr[this.id]=this,this.framebuffer=he.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Se(ur){ur.colorAttachments.forEach(it),it(ur.depthAttachment),it(ur.stencilAttachment),it(ur.depthStencilAttachment)}function We(ur){he.deleteFramebuffer(ur.framebuffer),ur.framebuffer=null,qe.framebufferCount--,delete Tr[ur.id]}function nt(ur){var Kt;he.bindFramebuffer(36160,ur.framebuffer);var Qt=ur.colorAttachments;for(Kt=0;Kt<Qt.length;++Kt)Pt(36064+Kt,Qt[Kt]);for(Kt=Qt.length;Kt<Re.maxColorAttachments;++Kt)he.framebufferTexture2D(36160,36064+Kt,3553,null,0);he.framebufferTexture2D(36160,33306,3553,null,0),he.framebufferTexture2D(36160,36096,3553,null,0),he.framebufferTexture2D(36160,36128,3553,null,0),Pt(36096,ur.depthAttachment),Pt(36128,ur.stencilAttachment),Pt(33306,ur.depthStencilAttachment),he.checkFramebufferStatus(36160),he.isContextLost(),he.bindFramebuffer(36160,Mt.next?Mt.next.framebuffer:null),Mt.cur=Mt.next,he.getError()}function ft(ur,Kt){function Qt(cr,gr){var Mr,Ir=0,Fr=0,Yr=!0,fn=!0;Mr=null;var en=!0,Rn="rgba",nn="uint8",yn=1,bn=null,ta=null,Br=null,rn=!1;typeof cr=="number"?(Ir=0|cr,Fr=0|gr||Ir):cr?("shape"in cr?(Ir=(Fr=cr.shape)[0],Fr=Fr[1]):("radius"in cr&&(Ir=Fr=cr.radius),"width"in cr&&(Ir=cr.width),"height"in cr&&(Fr=cr.height)),("color"in cr||"colors"in cr)&&(Mr=cr.color||cr.colors,Array.isArray(Mr)),Mr||("colorCount"in cr&&(yn=0|cr.colorCount),"colorTexture"in cr&&(en=!!cr.colorTexture,Rn="rgba4"),"colorType"in cr&&(nn=cr.colorType,!en)&&(nn==="half float"||nn==="float16"?Rn="rgba16f":nn!=="float"&&nn!=="float32"||(Rn="rgba32f")),"colorFormat"in cr&&(Rn=cr.colorFormat,0<=Nt.indexOf(Rn)?en=!0:0<=Zt.indexOf(Rn)&&(en=!1))),("depthTexture"in cr||"depthStencilTexture"in cr)&&(rn=!(!cr.depthTexture&&!cr.depthStencilTexture)),"depth"in cr&&(typeof cr.depth=="boolean"?Yr=cr.depth:(bn=cr.depth,fn=!1)),"stencil"in cr&&(typeof cr.stencil=="boolean"?fn=cr.stencil:(ta=cr.stencil,Yr=!1)),"depthStencil"in cr&&(typeof cr.depthStencil=="boolean"?Yr=fn=cr.depthStencil:(Br=cr.depthStencil,fn=Yr=!1))):Ir=Fr=1;var gn=null,Qr=null,un=null,Gn=null;if(Array.isArray(Mr))gn=Mr.map(rt);else if(Mr)gn=[rt(Mr)];else for(gn=Array(yn),Mr=0;Mr<yn;++Mr)gn[Mr]=ut(Ir,Fr,en,Rn,nn);for(Ir=Ir||gn[0].width,Fr=Fr||gn[0].height,bn?Qr=rt(bn):Yr&&!fn&&(Qr=ut(Ir,Fr,rn,"depth","uint32")),ta?un=rt(ta):fn&&!Yr&&(un=ut(Ir,Fr,!1,"stencil","uint8")),Br?Gn=rt(Br):!bn&&!ta&&fn&&Yr&&(Gn=ut(Ir,Fr,rn,"depth stencil","depth stencil")),Yr=null,Mr=0;Mr<gn.length;++Mr)Tt(gn[Mr]),gn[Mr]&&gn[Mr].texture&&(fn=Ke[gn[Mr].texture._texture.format]*mt[gn[Mr].texture._texture.type],Yr===null&&(Yr=fn));return Tt(Qr),Tt(un),Tt(Gn),Se(er),er.width=Ir,er.height=Fr,er.colorAttachments=gn,er.depthAttachment=Qr,er.stencilAttachment=un,er.depthStencilAttachment=Gn,Qt.color=gn.map(Bt),Qt.depth=Bt(Qr),Qt.stencil=Bt(un),Qt.depthStencil=Bt(Gn),Qt.width=er.width,Qt.height=er.height,nt(er),Qt}var er=new Lt;return qe.framebufferCount++,Qt(ur,Kt),N(Qt,{resize:function(cr,gr){var Mr=Math.max(0|cr,1),Ir=Math.max(0|gr||Mr,1);if(Mr===er.width&&Ir===er.height)return Qt;for(var Fr=er.colorAttachments,Yr=0;Yr<Fr.length;++Yr)wt(Fr[Yr],Mr,Ir);return wt(er.depthAttachment,Mr,Ir),wt(er.stencilAttachment,Mr,Ir),wt(er.depthStencilAttachment,Mr,Ir),er.width=Qt.width=Mr,er.height=Qt.height=Ir,nt(er),Qt},_reglType:"framebuffer",_framebuffer:er,destroy:function(){We(er),Se(er)},use:function(cr){Mt.setFBO({framebuffer:Qt},cr)}})}var Mt={cur:null,next:null,dirty:!1,setFBO:null},Nt=["rgba"],Zt=["rgba4","rgb565","rgb5 a1"];be.ext_srgb&&Zt.push("srgba"),be.ext_color_buffer_half_float&&Zt.push("rgba16f","rgb16f"),be.webgl_color_buffer_float&&Zt.push("rgba32f");var Ut=["uint8"];be.oes_texture_half_float&&Ut.push("half float","float16"),be.oes_texture_float&&Ut.push("float","float32");var fr=0,Tr={};return N(Mt,{getFramebuffer:function(ur){return typeof ur=="function"&&ur._reglType==="framebuffer"&&(ur=ur._framebuffer)instanceof Lt?ur:null},create:ft,createCube:function(ur){function Kt(er){var cr,gr={color:null},Mr=0,Ir=null;cr="rgba";var Fr="uint8",Yr=1;if(typeof er=="number"?Mr=0|er:er?("shape"in er?Mr=er.shape[0]:("radius"in er&&(Mr=0|er.radius),"width"in er?Mr=0|er.width:"height"in er&&(Mr=0|er.height)),("color"in er||"colors"in er)&&(Ir=er.color||er.colors,Array.isArray(Ir)),Ir||("colorCount"in er&&(Yr=0|er.colorCount),"colorType"in er&&(Fr=er.colorType),"colorFormat"in er&&(cr=er.colorFormat)),"depth"in er&&(gr.depth=er.depth),"stencil"in er&&(gr.stencil=er.stencil),"depthStencil"in er&&(gr.depthStencil=er.depthStencil)):Mr=1,Ir)if(Array.isArray(Ir))for(er=[],cr=0;cr<Ir.length;++cr)er[cr]=Ir[cr];else er=[Ir];else for(er=Array(Yr),Ir={radius:Mr,format:cr,type:Fr},cr=0;cr<Yr;++cr)er[cr]=Ue.createCube(Ir);for(gr.color=Array(er.length),cr=0;cr<er.length;++cr)Yr=er[cr],Mr=Mr||Yr.width,gr.color[cr]={target:34069,data:er[cr]};for(cr=0;6>cr;++cr){for(Yr=0;Yr<er.length;++Yr)gr.color[Yr].target=34069+cr;0<cr&&(gr.depth=Qt[0].depth,gr.stencil=Qt[0].stencil,gr.depthStencil=Qt[0].depthStencil),Qt[cr]?Qt[cr](gr):Qt[cr]=ft(gr)}return N(Kt,{width:Mr,height:Mr,color:er})}var Qt=Array(6);return Kt(ur),N(Kt,{faces:Qt,resize:function(er){var cr=0|er;if(cr===Kt.width)return Kt;var gr=Kt.color;for(er=0;er<gr.length;++er)gr[er].resize(cr);for(er=0;6>er;++er)Qt[er].resize(cr);return Kt.width=Kt.height=cr,Kt},_reglType:"framebufferCube",destroy:function(){Qt.forEach(function(er){er.destroy()})}})},clear:function(){fe(Tr).forEach(We)},restore:function(){Mt.cur=null,Mt.next=null,Mt.dirty=!0,fe(Tr).forEach(function(ur){ur.framebuffer=he.createFramebuffer(),nt(ur)})}})}function I(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function P(he,be,Re,Ue,Xe,qe,st){function it(){this.id=++rt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var wt=be.oes_vertex_array_object;this.vao=wt?wt.createVertexArrayOES():null,ut[this.id]=this,this.buffers=[]}var Tt=Re.maxAttributes,Pt=Array(Tt);for(Re=0;Re<Tt;++Re)Pt[Re]=new I;var rt=0,ut={},Bt={Record:I,scope:{},state:Pt,currentVAO:null,targetVAO:null,restore:be.oes_vertex_array_object?function(){be.oes_vertex_array_object&&fe(ut).forEach(function(wt){wt.refresh()})}:function(){},createVAO:function(wt){function Lt(We){var nt;Array.isArray(We)?(nt=We,Se.elements&&Se.ownsElements&&Se.elements.destroy(),Se.elements=null,Se.ownsElements=!1,Se.offset=0,Se.count=0,Se.instances=-1,Se.primitive=4):(We.elements?(nt=We.elements,Se.ownsElements?(typeof nt=="function"&&nt._reglType==="elements"?Se.elements.destroy():Se.elements(nt),Se.ownsElements=!1):qe.getElements(We.elements)?(Se.elements=We.elements,Se.ownsElements=!1):(Se.elements=qe.create(We.elements),Se.ownsElements=!0)):(Se.elements=null,Se.ownsElements=!1),nt=We.attributes,Se.offset=0,Se.count=-1,Se.instances=-1,Se.primitive=4,Se.elements&&(Se.count=Se.elements._elements.vertCount,Se.primitive=Se.elements._elements.primType),"offset"in We&&(Se.offset=0|We.offset),"count"in We&&(Se.count=0|We.count),"instances"in We&&(Se.instances=0|We.instances),"primitive"in We&&(Se.primitive=Te[We.primitive])),We={};var ft=Se.attributes;ft.length=nt.length;for(var Mt=0;Mt<nt.length;++Mt){var Nt,Zt=nt[Mt],Ut=ft[Mt]=new I,fr=Zt.data||Zt;Array.isArray(fr)||ve(fr)||n(fr)?(Se.buffers[Mt]&&(Nt=Se.buffers[Mt],ve(fr)&&Nt._buffer.byteLength>=fr.byteLength?Nt.subdata(fr):(Nt.destroy(),Se.buffers[Mt]=null)),Se.buffers[Mt]||(Nt=Se.buffers[Mt]=Xe.create(Zt,34962,!1,!0)),Ut.buffer=Xe.getBuffer(Nt),Ut.size=0|Ut.buffer.dimension,Ut.normalized=!1,Ut.type=Ut.buffer.dtype,Ut.offset=0,Ut.stride=0,Ut.divisor=0,Ut.state=1,We[Mt]=1):Xe.getBuffer(Zt)?(Ut.buffer=Xe.getBuffer(Zt),Ut.size=0|Ut.buffer.dimension,Ut.normalized=!1,Ut.type=Ut.buffer.dtype,Ut.offset=0,Ut.stride=0,Ut.divisor=0,Ut.state=1):Xe.getBuffer(Zt.buffer)?(Ut.buffer=Xe.getBuffer(Zt.buffer),Ut.size=0|(+Zt.size||Ut.buffer.dimension),Ut.normalized=!!Zt.normalized||!1,Ut.type="type"in Zt?pe[Zt.type]:Ut.buffer.dtype,Ut.offset=0|(Zt.offset||0),Ut.stride=0|(Zt.stride||0),Ut.divisor=0|(Zt.divisor||0),Ut.state=1):"x"in Zt&&(Ut.x=+Zt.x||0,Ut.y=+Zt.y||0,Ut.z=+Zt.z||0,Ut.w=+Zt.w||0,Ut.state=2)}for(Nt=0;Nt<Se.buffers.length;++Nt)!We[Nt]&&Se.buffers[Nt]&&(Se.buffers[Nt].destroy(),Se.buffers[Nt]=null);return Se.refresh(),Lt}var Se=new it;return Ue.vaoCount+=1,Lt.destroy=function(){for(var We=0;We<Se.buffers.length;++We)Se.buffers[We]&&Se.buffers[We].destroy();Se.buffers.length=0,Se.ownsElements&&(Se.elements.destroy(),Se.elements=null,Se.ownsElements=!1),Se.destroy()},Lt._vao=Se,Lt._reglType="vao",Lt(wt)},getVAO:function(wt){return typeof wt=="function"&&wt._vao?wt._vao:null},destroyBuffer:function(wt){for(var Lt=0;Lt<Pt.length;++Lt){var Se=Pt[Lt];Se.buffer===wt&&(he.disableVertexAttribArray(Lt),Se.buffer=null)}},setVAO:be.oes_vertex_array_object?function(wt){if(wt!==Bt.currentVAO){var Lt=be.oes_vertex_array_object;wt?Lt.bindVertexArrayOES(wt.vao):Lt.bindVertexArrayOES(null),Bt.currentVAO=wt}}:function(wt){if(wt!==Bt.currentVAO){if(wt)wt.bindAttrs();else{for(var Lt=be.angle_instanced_arrays,Se=0;Se<Pt.length;++Se){var We=Pt[Se];We.buffer?(he.enableVertexAttribArray(Se),We.buffer.bind(),he.vertexAttribPointer(Se,We.size,We.type,We.normalized,We.stride,We.offfset),Lt&&We.divisor&&Lt.vertexAttribDivisorANGLE(Se,We.divisor)):(he.disableVertexAttribArray(Se),he.vertexAttrib4f(Se,We.x,We.y,We.z,We.w))}st.elements?he.bindBuffer(34963,st.elements.buffer.buffer):he.bindBuffer(34963,null)}Bt.currentVAO=wt}},clear:be.oes_vertex_array_object?function(){fe(ut).forEach(function(wt){wt.destroy()})}:function(){}};return it.prototype.bindAttrs=function(){for(var wt=be.angle_instanced_arrays,Lt=this.attributes,Se=0;Se<Lt.length;++Se){var We=Lt[Se];We.buffer?(he.enableVertexAttribArray(Se),he.bindBuffer(34962,We.buffer.buffer),he.vertexAttribPointer(Se,We.size,We.type,We.normalized,We.stride,We.offset),wt&&We.divisor&&wt.vertexAttribDivisorANGLE(Se,We.divisor)):(he.disableVertexAttribArray(Se),he.vertexAttrib4f(Se,We.x,We.y,We.z,We.w))}for(wt=Lt.length;wt<Tt;++wt)he.disableVertexAttribArray(wt);(wt=qe.getElements(this.elements))?he.bindBuffer(34963,wt.buffer.buffer):he.bindBuffer(34963,null)},it.prototype.refresh=function(){var wt=be.oes_vertex_array_object;wt&&(wt.bindVertexArrayOES(this.vao),this.bindAttrs(),Bt.currentVAO=null,wt.bindVertexArrayOES(null))},it.prototype.destroy=function(){if(this.vao){var wt=be.oes_vertex_array_object;this===Bt.currentVAO&&(Bt.currentVAO=null,wt.bindVertexArrayOES(null)),wt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ut[this.id]&&(delete ut[this.id],--Ue.vaoCount)},Bt}function S(he,be,Re,Ue){function Xe(Lt,Se,We,nt){this.name=Lt,this.id=Se,this.location=We,this.info=nt}function qe(Lt,Se){for(var We=0;We<Lt.length;++We)if(Lt[We].id===Se.id)return void(Lt[We].location=Se.location);Lt.push(Se)}function st(Lt,Se,We){if(!(ft=(We=Lt===35632?Pt:rt)[Se])){var nt=be.str(Se),ft=he.createShader(Lt);he.shaderSource(ft,nt),he.compileShader(ft),We[Se]=ft}return ft}function it(Lt,Se){this.id=wt++,this.fragId=Lt,this.vertId=Se,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Ue.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Tt(Lt,Se,We){var nt;nt=st(35632,Lt.fragId);var ft=st(35633,Lt.vertId);if(Se=Lt.program=he.createProgram(),he.attachShader(Se,nt),he.attachShader(Se,ft),We)for(nt=0;nt<We.length;++nt)ft=We[nt],he.bindAttribLocation(Se,ft[0],ft[1]);he.linkProgram(Se),ft=he.getProgramParameter(Se,35718),Ue.profile&&(Lt.stats.uniformsCount=ft);var Mt=Lt.uniforms;for(nt=0;nt<ft;++nt)if(We=he.getActiveUniform(Se,nt))if(1<We.size)for(var Nt=0;Nt<We.size;++Nt){var Zt=We.name.replace("[0]","["+Nt+"]");qe(Mt,new Xe(Zt,be.id(Zt),he.getUniformLocation(Se,Zt),We))}else qe(Mt,new Xe(We.name,be.id(We.name),he.getUniformLocation(Se,We.name),We));for(ft=he.getProgramParameter(Se,35721),Ue.profile&&(Lt.stats.attributesCount=ft),Lt=Lt.attributes,nt=0;nt<ft;++nt)(We=he.getActiveAttrib(Se,nt))&&qe(Lt,new Xe(We.name,be.id(We.name),he.getAttribLocation(Se,We.name),We))}var Pt={},rt={},ut={},Bt=[],wt=0;return Ue.profile&&(Re.getMaxUniformsCount=function(){var Lt=0;return Bt.forEach(function(Se){Se.stats.uniformsCount>Lt&&(Lt=Se.stats.uniformsCount)}),Lt},Re.getMaxAttributesCount=function(){var Lt=0;return Bt.forEach(function(Se){Se.stats.attributesCount>Lt&&(Lt=Se.stats.attributesCount)}),Lt}),{clear:function(){var Lt=he.deleteShader.bind(he);fe(Pt).forEach(Lt),Pt={},fe(rt).forEach(Lt),rt={},Bt.forEach(function(Se){he.deleteProgram(Se.program)}),Bt.length=0,ut={},Re.shaderCount=0},program:function(Lt,Se,We,nt){var ft=ut[Se];ft||(ft=ut[Se]={});var Mt=ft[Lt];if(Mt&&(Mt.refCount++,!nt))return Mt;var Nt=new it(Se,Lt);return Re.shaderCount++,Tt(Nt,We,nt),Mt||(ft[Lt]=Nt),Bt.push(Nt),N(Nt,{destroy:function(){if(Nt.refCount--,0>=Nt.refCount){he.deleteProgram(Nt.program);var Zt=Bt.indexOf(Nt);Bt.splice(Zt,1),Re.shaderCount--}0>=ft[Nt.vertId].refCount&&(he.deleteShader(rt[Nt.vertId]),delete rt[Nt.vertId],delete ut[Nt.fragId][Nt.vertId]),Object.keys(ut[Nt.fragId]).length||(he.deleteShader(Pt[Nt.fragId]),delete Pt[Nt.fragId],delete ut[Nt.fragId])}})},restore:function(){Pt={},rt={};for(var Lt=0;Lt<Bt.length;++Lt)Tt(Bt[Lt],null,Bt[Lt].attributes.map(function(Se){return[Se.location,Se.name]}))},shader:st,frag:-1,vert:-1}}function E(he,be,Re,Ue,Xe,qe,st){function it(Tt){var Pt;Pt=be.next===null?5121:be.next.colorAttachments[0].texture._texture.type;var rt=0,ut=0,Bt=Ue.framebufferWidth,wt=Ue.framebufferHeight,Lt=null;return ve(Tt)?Lt=Tt:Tt&&(rt=0|Tt.x,ut=0|Tt.y,Bt=0|(Tt.width||Ue.framebufferWidth-rt),wt=0|(Tt.height||Ue.framebufferHeight-ut),Lt=Tt.data||null),Re(),Tt=Bt*wt*4,Lt||(Pt===5121?Lt=new Uint8Array(Tt):Pt===5126&&(Lt=Lt||new Float32Array(Tt))),he.pixelStorei(3333,4),he.readPixels(rt,ut,Bt,wt,6408,Pt,Lt),Lt}return function(Tt){return Tt&&"framebuffer"in Tt?function(Pt){var rt;return be.setFBO({framebuffer:Pt.framebuffer},function(){rt=it(Pt)}),rt}(Tt):it(Tt)}}function z(he,be){return he>>>be|he<<32-be}function D(he,be){var Re=(65535&he)+(65535&be);return(he>>16)+(be>>16)+(Re>>16)<<16|65535&Re}function U(he){return Array.prototype.slice.call(he)}function H(he){return U(he).join("")}function Y(he){function be(){var rt=[],ut=[];return N(function(){rt.push.apply(rt,U(arguments))},{def:function(){var Bt="v"+Xe++;return ut.push(Bt),0<arguments.length&&(rt.push(Bt,"="),rt.push.apply(rt,U(arguments)),rt.push(";")),Bt},toString:function(){return H([0<ut.length?"var "+ut.join(",")+";":"",H(rt)])}})}function Re(){function rt(Se,We){Bt(Se,We,"=",ut.def(Se,We),";")}var ut=be(),Bt=be(),wt=ut.toString,Lt=Bt.toString;return N(function(){ut.apply(ut,U(arguments))},{def:ut.def,entry:ut,exit:Bt,save:rt,set:function(Se,We,nt){rt(Se,We),ut(Se,We,"=",nt,";")},toString:function(){return wt()+Lt()}})}var Ue=he&&he.cache,Xe=0,qe=[],st=[],it=[],Tt=be(),Pt={};return{global:Tt,link:function(rt,ut){var Bt=ut&&ut.stable;if(!Bt){for(var wt=0;wt<st.length;++wt)if(st[wt]===rt&&!it[wt])return qe[wt]}return wt="g"+Xe++,qe.push(wt),st.push(rt),it.push(Bt),wt},block:be,proc:function(rt,ut){function Bt(){var We="a"+wt.length;return wt.push(We),We}var wt=[];ut=ut||0;for(var Lt=0;Lt<ut;++Lt)Bt();var Se=(Lt=Re()).toString;return Pt[rt]=N(Lt,{arg:Bt,toString:function(){return H(["function(",wt.join(),"){",Se(),"}"])}})},scope:Re,cond:function(){var rt=H(arguments),ut=Re(),Bt=Re(),wt=ut.toString,Lt=Bt.toString;return N(ut,{then:function(){return ut.apply(ut,U(arguments)),this},else:function(){return Bt.apply(Bt,U(arguments)),this},toString:function(){var Se=Lt();return Se&&(Se="else{"+Se+"}"),H(["if(",rt,"){",wt(),"}",Se])}})},compile:function(){var rt=['"use strict";',Tt,"return {"];Object.keys(Pt).forEach(function(wt){rt.push('"',wt,'":',Pt[wt].toString(),",")}),rt.push("}");var ut,Bt=H(rt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return Ue&&(ut=function(wt){for(var Lt,Se="",We=0;We<wt.length;We++)Lt=wt.charCodeAt(We),Se+="0123456789abcdef".charAt(Lt>>>4&15)+"0123456789abcdef".charAt(15&Lt);return Se}(function(wt){for(var Lt=Array(wt.length>>2),Se=0;Se<Lt.length;Se++)Lt[Se]=0;for(Se=0;Se<8*wt.length;Se+=8)Lt[Se>>5]|=(255&wt.charCodeAt(Se/8))<<24-Se%32;var We,nt,ft,Mt,Nt,Zt,Ut,fr,Tr,ur,Kt,Qt=8*wt.length;for(wt=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Se=Array(64),Lt[Qt>>5]|=128<<24-Qt%32,Lt[15+(Qt+64>>9<<4)]=Qt,fr=0;fr<Lt.length;fr+=16){for(Qt=wt[0],We=wt[1],nt=wt[2],ft=wt[3],Mt=wt[4],Nt=wt[5],Zt=wt[6],Ut=wt[7],Tr=0;64>Tr;Tr++){var er;16>Tr?Se[Tr]=Lt[Tr+fr]:(ur=Tr,Kt=D(Kt=z(Kt=Se[Tr-2],17)^z(Kt,19)^Kt>>>10,Se[Tr-7]),er=z(er=Se[Tr-15],7)^z(er,18)^er>>>3,Se[ur]=D(D(Kt,er),Se[Tr-16])),ur=D(D(D(D(Ut,ur=z(ur=Mt,6)^z(ur,11)^z(ur,25)),Mt&Nt^~Mt&Zt),Ft[Tr]),Se[Tr]),Kt=D(Ut=z(Ut=Qt,2)^z(Ut,13)^z(Ut,22),Qt&We^Qt&nt^We&nt),Ut=Zt,Zt=Nt,Nt=Mt,Mt=D(ft,ur),ft=nt,nt=We,We=Qt,Qt=D(ur,Kt)}wt[0]=D(Qt,wt[0]),wt[1]=D(We,wt[1]),wt[2]=D(nt,wt[2]),wt[3]=D(ft,wt[3]),wt[4]=D(Mt,wt[4]),wt[5]=D(Nt,wt[5]),wt[6]=D(Zt,wt[6]),wt[7]=D(Ut,wt[7])}for(Lt="",Se=0;Se<32*wt.length;Se+=8)Lt+=String.fromCharCode(wt[Se>>5]>>>24-Se%32&255);return Lt}(function(wt){for(var Lt,Se,We="",nt=-1;++nt<wt.length;)Lt=wt.charCodeAt(nt),Se=nt+1<wt.length?wt.charCodeAt(nt+1):0,55296<=Lt&&56319>=Lt&&56320<=Se&&57343>=Se&&(Lt=65536+((1023&Lt)<<10)+(1023&Se),nt++),127>=Lt?We+=String.fromCharCode(Lt):2047>=Lt?We+=String.fromCharCode(192|Lt>>>6&31,128|63&Lt):65535>=Lt?We+=String.fromCharCode(224|Lt>>>12&15,128|Lt>>>6&63,128|63&Lt):2097151>=Lt&&(We+=String.fromCharCode(240|Lt>>>18&7,128|Lt>>>12&63,128|Lt>>>6&63,128|63&Lt));return We}(Bt))),Ue[ut])?Ue[ut].apply(null,st):(Bt=Function.apply(null,qe.concat(Bt)),Ue&&(Ue[ut]=Bt),Bt.apply(null,st))}}}function J(he){return Array.isArray(he)||ve(he)||n(he)}function W(he){return he.sort(function(be,Re){return be==="viewport"?-1:Re==="viewport"?1:be<Re?-1:1})}function Z(he,be,Re,Ue){this.thisDep=he,this.contextDep=be,this.propDep=Re,this.append=Ue}function re(he){return he&&!(he.thisDep||he.contextDep||he.propDep)}function V(he){return new Z(!1,!1,!1,he)}function B(he,be){var Re=he.type;if(Re===0)return new Z(!0,1<=(Re=he.data.length),2<=Re,be);if(Re===4)return new Z((Re=he.data).thisDep,Re.contextDep,Re.propDep,be);if(Re===5)return new Z(!1,!1,!1,be);if(Re===6){for(var Ue=Re=!1,Xe=!1,qe=0;qe<he.data.length;++qe){var st=he.data[qe];st.type===1?Xe=!0:st.type===2?Ue=!0:st.type===3?Re=!0:st.type===0?(Re=!0,1<=(st=st.data)&&(Ue=!0),2<=st&&(Xe=!0)):st.type===4&&(Re=Re||st.data.thisDep,Ue=Ue||st.data.contextDep,Xe=Xe||st.data.propDep)}return new Z(Re,Ue,Xe,be)}return new Z(Re===3,Re===2,Re===1,be)}function j(he,be,Re,Ue,Xe,qe,st,it,Tt,Pt,rt,ut,Bt,wt,Lt,Se){function We(Ct){return Ct.replace(".","_")}function nt(Ct,or,hr){var Rr=We(Ct);Gn.push(Ct),un[Rr]=Qr[Rr]=!!hr,wn[Rr]=or}function ft(Ct,or,hr){var Rr=We(Ct);Gn.push(Ct),Array.isArray(hr)?(Qr[Rr]=hr.slice(),un[Rr]=hr.slice()):Qr[Rr]=un[Rr]=hr,Ln[Rr]=or}function Mt(){var Ct=Y({cache:Lt}),or=Ct.link,hr=Ct.global;Ct.id=mr++,Ct.batchId="0";var Rr=or(oa),zr=Ct.shared={props:"a0"};Object.keys(oa).forEach(function(wr){zr[wr]=hr.def(Rr,".",wr)});var Or=Ct.next={},Ar=Ct.current={};Object.keys(Ln).forEach(function(wr){Array.isArray(Qr[wr])&&(Or[wr]=hr.def(zr.next,".",wr),Ar[wr]=hr.def(zr.current,".",wr))});var vr=Ct.constants={};Object.keys(tr).forEach(function(wr){vr[wr]=hr.def(JSON.stringify(tr[wr]))}),Ct.invoke=function(wr,Er){switch(Er.type){case 0:var qr=["this",zr.context,zr.props,Ct.batchId];return wr.def(or(Er.data),".call(",qr.slice(0,Math.max(Er.data.length+1,4)),")");case 1:return wr.def(zr.props,Er.data);case 2:return wr.def(zr.context,Er.data);case 3:return wr.def("this",Er.data);case 4:return Er.data.append(Ct,wr),Er.data.ref;case 5:return Er.data.toString();case 6:return Er.data.map(function(Hr){return Ct.invoke(wr,Hr)})}},Ct.attribCache={};var xr={};return Ct.scopeAttrib=function(wr){if((wr=be.id(wr))in xr)return xr[wr];var Er=Pt.scope[wr];return Er||(Er=Pt.scope[wr]=new bn),xr[wr]=or(Er)},Ct}function Nt(Ct,or){var hr=Ct.static,Rr=Ct.dynamic;if("framebuffer"in hr){var zr=hr.framebuffer;return zr?(zr=it.getFramebuffer(zr),V(function(Ar,vr){var xr=Ar.link(zr),wr=Ar.shared;return vr.set(wr.framebuffer,".next",xr),wr=wr.context,vr.set(wr,".framebufferWidth",xr+".width"),vr.set(wr,".framebufferHeight",xr+".height"),xr})):V(function(Ar,vr){var xr=Ar.shared;return vr.set(xr.framebuffer,".next","null"),xr=xr.context,vr.set(xr,".framebufferWidth",xr+".drawingBufferWidth"),vr.set(xr,".framebufferHeight",xr+".drawingBufferHeight"),"null"})}if("framebuffer"in Rr){var Or=Rr.framebuffer;return B(Or,function(Ar,vr){var xr=Ar.invoke(vr,Or),wr=Ar.shared,Er=wr.framebuffer;return xr=vr.def(Er,".getFramebuffer(",xr,")"),vr.set(Er,".next",xr),wr=wr.context,vr.set(wr,".framebufferWidth",xr+"?"+xr+".width:"+wr+".drawingBufferWidth"),vr.set(wr,".framebufferHeight",xr+"?"+xr+".height:"+wr+".drawingBufferHeight"),xr})}return null}function Zt(Ct,or,hr){function Rr(wr){if(wr in zr){var Er=be.id(zr[wr]);return(wr=V(function(){return Er})).id=Er,wr}if(wr in Or){var qr=Or[wr];return B(qr,function(Hr,$r){var tn=Hr.invoke($r,qr);return $r.def(Hr.shared.strings,".id(",tn,")")})}return null}var zr=Ct.static,Or=Ct.dynamic,Ar=Rr("frag"),vr=Rr("vert"),xr=null;return re(Ar)&&re(vr)?(xr=rt.program(vr.id,Ar.id,null,hr),Ct=V(function(wr,Er){return wr.link(xr)})):Ct=new Z(Ar&&Ar.thisDep||vr&&vr.thisDep,Ar&&Ar.contextDep||vr&&vr.contextDep,Ar&&Ar.propDep||vr&&vr.propDep,function(wr,Er){var qr,Hr,$r=wr.shared.shader;return qr=Ar?Ar.append(wr,Er):Er.def($r,".","frag"),Hr=vr?vr.append(wr,Er):Er.def($r,".","vert"),Er.def($r+".program("+Hr+","+qr+")")}),{frag:Ar,vert:vr,progVar:Ct,program:xr}}function Ut(Ct,or){function hr(tn,vn){if(tn in Rr){var _n=0|Rr[tn];return vn?Or.offset=_n:Or.instances=_n,V(function(Cn,On){return vn&&(Cn.OFFSET=_n),_n})}if(tn in zr){var Tn=zr[tn];return B(Tn,function(Cn,On){var Zn=Cn.invoke(On,Tn);return vn&&(Cn.OFFSET=Zn),Zn})}if(vn){if(xr)return V(function(Cn,On){return Cn.OFFSET=0});if(Ar)return new Z(vr.thisDep,vr.contextDep,vr.propDep,function(Cn,On){return On.def(Cn.shared.vao+".currentVAO?"+Cn.shared.vao+".currentVAO.offset:0")})}else if(Ar)return new Z(vr.thisDep,vr.contextDep,vr.propDep,function(Cn,On){return On.def(Cn.shared.vao+".currentVAO?"+Cn.shared.vao+".currentVAO.instances:-1")});return null}var Rr=Ct.static,zr=Ct.dynamic,Or={},Ar=!1,vr=function(){if("vao"in Rr){var tn=Rr.vao;return tn!==null&&Pt.getVAO(tn)===null&&(tn=Pt.createVAO(tn)),Ar=!0,Or.vao=tn,V(function(_n){var Tn=Pt.getVAO(tn);return Tn?_n.link(Tn):"null"})}if("vao"in zr){Ar=!0;var vn=zr.vao;return B(vn,function(_n,Tn){var Cn=_n.invoke(Tn,vn);return Tn.def(_n.shared.vao+".getVAO("+Cn+")")})}return null}(),xr=!1,wr=function(){if("elements"in Rr){var tn=Rr.elements;if(Or.elements=tn,J(tn)){var vn=Or.elements=qe.create(tn,!0);tn=qe.getElements(vn),xr=!0}else tn&&(tn=qe.getElements(tn),xr=!0);return(vn=V(function(Tn,Cn){if(tn){var On=Tn.link(tn);return Tn.ELEMENTS=On}return Tn.ELEMENTS=null})).value=tn,vn}if("elements"in zr){xr=!0;var _n=zr.elements;return B(_n,function(Tn,Cn){var On=(Zn=Tn.shared).isBufferArgs,Zn=Zn.elements,Aa=Tn.invoke(Cn,_n),Ma=Cn.def("null");return On=Cn.def(On,"(",Aa,")"),Aa=Tn.cond(On).then(Ma,"=",Zn,".createStream(",Aa,");").else(Ma,"=",Zn,".getElements(",Aa,");"),Cn.entry(Aa),Cn.exit(Tn.cond(On).then(Zn,".destroyStream(",Ma,");")),Tn.ELEMENTS=Ma})}return Ar?new Z(vr.thisDep,vr.contextDep,vr.propDep,function(Tn,Cn){return Cn.def(Tn.shared.vao+".currentVAO?"+Tn.shared.elements+".getElements("+Tn.shared.vao+".currentVAO.elements):null")}):null}(),Er=hr("offset",!0),qr=function(){if("primitive"in Rr){var tn=Rr.primitive;return Or.primitive=tn,V(function(_n,Tn){return Te[tn]})}if("primitive"in zr){var vn=zr.primitive;return B(vn,function(_n,Tn){var Cn=_n.constants.primTypes,On=_n.invoke(Tn,vn);return Tn.def(Cn,"[",On,"]")})}return xr?re(wr)?wr.value?V(function(_n,Tn){return Tn.def(_n.ELEMENTS,".primType")}):V(function(){return 4}):new Z(wr.thisDep,wr.contextDep,wr.propDep,function(_n,Tn){var Cn=_n.ELEMENTS;return Tn.def(Cn,"?",Cn,".primType:",4)}):Ar?new Z(vr.thisDep,vr.contextDep,vr.propDep,function(_n,Tn){return Tn.def(_n.shared.vao+".currentVAO?"+_n.shared.vao+".currentVAO.primitive:4")}):null}(),Hr=function(){if("count"in Rr){var tn=0|Rr.count;return Or.count=tn,V(function(){return tn})}if("count"in zr){var vn=zr.count;return B(vn,function(_n,Tn){return _n.invoke(Tn,vn)})}return xr?re(wr)?wr?Er?new Z(Er.thisDep,Er.contextDep,Er.propDep,function(_n,Tn){return Tn.def(_n.ELEMENTS,".vertCount-",_n.OFFSET)}):V(function(_n,Tn){return Tn.def(_n.ELEMENTS,".vertCount")}):V(function(){return-1}):new Z(wr.thisDep||Er.thisDep,wr.contextDep||Er.contextDep,wr.propDep||Er.propDep,function(_n,Tn){var Cn=_n.ELEMENTS;return _n.OFFSET?Tn.def(Cn,"?",Cn,".vertCount-",_n.OFFSET,":-1"):Tn.def(Cn,"?",Cn,".vertCount:-1")}):Ar?new Z(vr.thisDep,vr.contextDep,vr.propDep,function(_n,Tn){return Tn.def(_n.shared.vao,".currentVAO?",_n.shared.vao,".currentVAO.count:-1")}):null}(),$r=hr("instances",!1);return{elements:wr,primitive:qr,count:Hr,instances:$r,offset:Er,vao:vr,vaoActive:Ar,elementsActive:xr,static:Or}}function fr(Ct,or){var hr=Ct.static,Rr=Ct.dynamic,zr={};return Object.keys(hr).forEach(function(Or){var Ar=hr[Or],vr=be.id(Or),xr=new bn;if(J(Ar))xr.state=1,xr.buffer=Xe.getBuffer(Xe.create(Ar,34962,!1,!0)),xr.type=0;else if(Er=Xe.getBuffer(Ar))xr.state=1,xr.buffer=Er,xr.type=0;else if("constant"in Ar){var wr=Ar.constant;xr.buffer="null",xr.state=2,typeof wr=="number"?xr.x=wr:Vt.forEach(function(_n,Tn){Tn<wr.length&&(xr[_n]=wr[Tn])})}else{var Er=J(Ar.buffer)?Xe.getBuffer(Xe.create(Ar.buffer,34962,!1,!0)):Xe.getBuffer(Ar.buffer),qr=0|Ar.offset,Hr=0|Ar.stride,$r=0|Ar.size,tn=!!Ar.normalized,vn=0;"type"in Ar&&(vn=pe[Ar.type]),Ar=0|Ar.divisor,xr.buffer=Er,xr.state=1,xr.size=$r,xr.normalized=tn,xr.type=vn||Er.dtype,xr.offset=qr,xr.stride=Hr,xr.divisor=Ar}zr[Or]=V(function(_n,Tn){var Cn=_n.attribCache;if(vr in Cn)return Cn[vr];var On={isStream:!1};return Object.keys(xr).forEach(function(Zn){On[Zn]=xr[Zn]}),xr.buffer&&(On.buffer=_n.link(xr.buffer),On.type=On.type||On.buffer+".dtype"),Cn[vr]=On})}),Object.keys(Rr).forEach(function(Or){var Ar=Rr[Or];zr[Or]=B(Ar,function(vr,xr){function wr(Cn){xr(tn[Cn],"=",Er,".",Cn,"|0;")}var Er=vr.invoke(xr,Ar),qr=vr.shared,Hr=vr.constants,$r=qr.isBufferArgs,tn=(qr=qr.buffer,{isStream:xr.def(!1)}),vn=new bn;vn.state=1,Object.keys(vn).forEach(function(Cn){tn[Cn]=xr.def(""+vn[Cn])});var _n=tn.buffer,Tn=tn.type;return xr("if(",$r,"(",Er,")){",tn.isStream,"=true;",_n,"=",qr,".createStream(",34962,",",Er,");",Tn,"=",_n,".dtype;","}else{",_n,"=",qr,".getBuffer(",Er,");","if(",_n,"){",Tn,"=",_n,".dtype;",'}else if("constant" in ',Er,"){",tn.state,"=",2,";","if(typeof "+Er+'.constant === "number"){',tn[Vt[0]],"=",Er,".constant;",Vt.slice(1).map(function(Cn){return tn[Cn]}).join("="),"=0;","}else{",Vt.map(function(Cn,On){return tn[Cn]+"="+Er+".constant.length>"+On+"?"+Er+".constant["+On+"]:0;"}).join(""),"}}else{","if(",$r,"(",Er,".buffer)){",_n,"=",qr,".createStream(",34962,",",Er,".buffer);","}else{",_n,"=",qr,".getBuffer(",Er,".buffer);","}",Tn,'="type" in ',Er,"?",Hr.glTypes,"[",Er,".type]:",_n,".dtype;",tn.normalized,"=!!",Er,".normalized;"),wr("size"),wr("offset"),wr("stride"),wr("divisor"),xr("}}"),xr.exit("if(",tn.isStream,"){",qr,".destroyStream(",_n,");","}"),tn})}),zr}function Tr(Ct,or,hr,Rr,zr){function Or(vn){var _n=vr[vn];_n&&(wr[vn]=_n)}var Ar=function(vn,_n){if(typeof(Tn=vn.static).frag=="string"&&typeof Tn.vert=="string"){if(0<Object.keys(_n.dynamic).length)return null;var Tn=_n.static,Cn=Object.keys(Tn);if(0<Cn.length&&typeof Tn[Cn[0]]=="number"){for(var On=[],Zn=0;Zn<Cn.length;++Zn)On.push([0|Tn[Cn[Zn]],Cn[Zn]]);return On}}return null}(Ct,or),vr=function(vn,_n,Tn){function Cn(Ma){if(Ma in On){var Sn=On[Ma];Ma=!0;var Qn,Kn,Da=0|Sn.x,di=0|Sn.y;return"width"in Sn?Qn=0|Sn.width:Ma=!1,"height"in Sn?Kn=0|Sn.height:Ma=!1,new Z(!Ma&&_n&&_n.thisDep,!Ma&&_n&&_n.contextDep,!Ma&&_n&&_n.propDep,function(fo,Wa){var Za=fo.shared.context,Ki=Qn;"width"in Sn||(Ki=Wa.def(Za,".","framebufferWidth","-",Da));var Na=Kn;return"height"in Sn||(Na=Wa.def(Za,".","framebufferHeight","-",di)),[Da,di,Ki,Na]})}if(Ma in Zn){var Di=Zn[Ma];return Ma=B(Di,function(fo,Wa){var Za=fo.invoke(Wa,Di),Ki=fo.shared.context,Na=Wa.def(Za,".x|0"),ho=Wa.def(Za,".y|0");return[Na,ho,Wa.def('"width" in ',Za,"?",Za,".width|0:","(",Ki,".","framebufferWidth","-",Na,")"),Za=Wa.def('"height" in ',Za,"?",Za,".height|0:","(",Ki,".","framebufferHeight","-",ho,")")]}),_n&&(Ma.thisDep=Ma.thisDep||_n.thisDep,Ma.contextDep=Ma.contextDep||_n.contextDep,Ma.propDep=Ma.propDep||_n.propDep),Ma}return _n?new Z(_n.thisDep,_n.contextDep,_n.propDep,function(fo,Wa){var Za=fo.shared.context;return[0,0,Wa.def(Za,".","framebufferWidth"),Wa.def(Za,".","framebufferHeight")]}):null}var On=vn.static,Zn=vn.dynamic;if(vn=Cn("viewport")){var Aa=vn;vn=new Z(vn.thisDep,vn.contextDep,vn.propDep,function(Ma,Sn){var Qn=Aa.append(Ma,Sn),Kn=Ma.shared.context;return Sn.set(Kn,".viewportWidth",Qn[2]),Sn.set(Kn,".viewportHeight",Qn[3]),Qn})}return{viewport:vn,scissor_box:Cn("scissor.box")}}(Ct,qr=Nt(Ct)),xr=Ut(Ct),wr=function(vn,_n){var Tn=vn.static,Cn=vn.dynamic,On={};return Gn.forEach(function(Zn){function Aa(Sn,Qn){if(Zn in Tn){var Kn=Sn(Tn[Zn]);On[Ma]=V(function(){return Kn})}else if(Zn in Cn){var Da=Cn[Zn];On[Ma]=B(Da,function(di,Di){return Qn(di,Di,di.invoke(Di,Da))})}}var Ma=We(Zn);switch(Zn){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return Aa(function(Sn){return Sn},function(Sn,Qn,Kn){return Kn});case"depth.func":return Aa(function(Sn){return nr[Sn]},function(Sn,Qn,Kn){return Qn.def(Sn.constants.compareFuncs,"[",Kn,"]")});case"depth.range":return Aa(function(Sn){return Sn},function(Sn,Qn,Kn){return[Qn.def("+",Kn,"[0]"),Qn=Qn.def("+",Kn,"[1]")]});case"blend.func":return Aa(function(Sn){return[Gt["srcRGB"in Sn?Sn.srcRGB:Sn.src],Gt["dstRGB"in Sn?Sn.dstRGB:Sn.dst],Gt["srcAlpha"in Sn?Sn.srcAlpha:Sn.src],Gt["dstAlpha"in Sn?Sn.dstAlpha:Sn.dst]]},function(Sn,Qn,Kn){function Da(Wa,Za){return Qn.def('"',Wa,Za,'" in ',Kn,"?",Kn,".",Wa,Za,":",Kn,".",Wa)}Sn=Sn.constants.blendFuncs;var di=Da("src","RGB"),Di=Da("dst","RGB"),fo=(di=Qn.def(Sn,"[",di,"]"),Qn.def(Sn,"[",Da("src","Alpha"),"]"));return[di,Di=Qn.def(Sn,"[",Di,"]"),fo,Sn=Qn.def(Sn,"[",Da("dst","Alpha"),"]")]});case"blend.equation":return Aa(function(Sn){return typeof Sn=="string"?[ta[Sn],ta[Sn]]:typeof Sn=="object"?[ta[Sn.rgb],ta[Sn.alpha]]:void 0},function(Sn,Qn,Kn){var Da=Sn.constants.blendEquations,di=Qn.def(),Di=Qn.def();return(Sn=Sn.cond("typeof ",Kn,'==="string"')).then(di,"=",Di,"=",Da,"[",Kn,"];"),Sn.else(di,"=",Da,"[",Kn,".rgb];",Di,"=",Da,"[",Kn,".alpha];"),Qn(Sn),[di,Di]});case"blend.color":return Aa(function(Sn){return t(4,function(Qn){return+Sn[Qn]})},function(Sn,Qn,Kn){return t(4,function(Da){return Qn.def("+",Kn,"[",Da,"]")})});case"stencil.mask":return Aa(function(Sn){return 0|Sn},function(Sn,Qn,Kn){return Qn.def(Kn,"|0")});case"stencil.func":return Aa(function(Sn){return[nr[Sn.cmp||"keep"],Sn.ref||0,"mask"in Sn?Sn.mask:-1]},function(Sn,Qn,Kn){return[Sn=Qn.def('"cmp" in ',Kn,"?",Sn.constants.compareFuncs,"[",Kn,".cmp]",":",7680),Qn.def(Kn,".ref|0"),Qn=Qn.def('"mask" in ',Kn,"?",Kn,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return Aa(function(Sn){return[Zn==="stencil.opBack"?1029:1028,It[Sn.fail||"keep"],It[Sn.zfail||"keep"],It[Sn.zpass||"keep"]]},function(Sn,Qn,Kn){function Da(Di){return Qn.def('"',Di,'" in ',Kn,"?",di,"[",Kn,".",Di,"]:",7680)}var di=Sn.constants.stencilOps;return[Zn==="stencil.opBack"?1029:1028,Da("fail"),Da("zfail"),Da("zpass")]});case"polygonOffset.offset":return Aa(function(Sn){return[0|Sn.factor,0|Sn.units]},function(Sn,Qn,Kn){return[Qn.def(Kn,".factor|0"),Qn=Qn.def(Kn,".units|0")]});case"cull.face":return Aa(function(Sn){var Qn=0;return Sn==="front"?Qn=1028:Sn==="back"&&(Qn=1029),Qn},function(Sn,Qn,Kn){return Qn.def(Kn,'==="front"?',1028,":",1029)});case"lineWidth":return Aa(function(Sn){return Sn},function(Sn,Qn,Kn){return Kn});case"frontFace":return Aa(function(Sn){return Be[Sn]},function(Sn,Qn,Kn){return Qn.def(Kn+'==="cw"?2304:2305')});case"colorMask":return Aa(function(Sn){return Sn.map(function(Qn){return!!Qn})},function(Sn,Qn,Kn){return t(4,function(Da){return"!!"+Kn+"["+Da+"]"})});case"sample.coverage":return Aa(function(Sn){return["value"in Sn?Sn.value:1,!!Sn.invert]},function(Sn,Qn,Kn){return[Qn.def('"value" in ',Kn,"?+",Kn,".value:1"),Qn=Qn.def("!!",Kn,".invert")]})}}),On}(Ct),Er=Zt(Ct,0,Ar);Or("viewport"),Or(We("scissor.box"));var qr,Hr=0<Object.keys(wr).length;if((qr={framebuffer:qr,draw:xr,shader:Er,state:wr,dirty:Hr,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(vn){var _n,Tn=vn.static;if(vn=vn.dynamic,"profile"in Tn){var Cn=!!Tn.profile;(_n=V(function(Zn,Aa){return Cn})).enable=Cn}else if("profile"in vn){var On=vn.profile;_n=B(On,function(Zn,Aa){return Zn.invoke(Aa,On)})}return _n}(Ct),qr.uniforms=function(vn,_n){var Tn=vn.static,Cn=vn.dynamic,On={};return Object.keys(Tn).forEach(function(Zn){var Aa,Ma=Tn[Zn];if(typeof Ma=="number"||typeof Ma=="boolean")Aa=V(function(){return Ma});else if(typeof Ma=="function"){var Sn=Ma._reglType;Sn==="texture2d"||Sn==="textureCube"?Aa=V(function(Qn){return Qn.link(Ma)}):Sn!=="framebuffer"&&Sn!=="framebufferCube"||(Aa=V(function(Qn){return Qn.link(Ma.color[0])}))}else c(Ma)&&(Aa=V(function(Qn){return Qn.global.def("[",t(Ma.length,function(Kn){return Ma[Kn]}),"]")}));Aa.value=Ma,On[Zn]=Aa}),Object.keys(Cn).forEach(function(Zn){var Aa=Cn[Zn];On[Zn]=B(Aa,function(Ma,Sn){return Ma.invoke(Sn,Aa)})}),On}(hr),qr.drawVAO=qr.scopeVAO=xr.vao,!qr.drawVAO&&Er.program&&!Ar&&Re.angle_instanced_arrays&&xr.static.elements){var $r=!0;if(Ct=Er.program.attributes.map(function(vn){return vn=or.static[vn],$r=$r&&!!vn,vn}),$r&&0<Ct.length){var tn=Pt.getVAO(Pt.createVAO({attributes:Ct,elements:xr.static.elements}));qr.drawVAO=new Z(null,null,null,function(vn,_n){return vn.link(tn)}),qr.useVAO=!0}}return Ar?qr.useVAO=!0:qr.attributes=fr(or),qr.context=function(vn){var _n=vn.static,Tn=vn.dynamic,Cn={};return Object.keys(_n).forEach(function(On){var Zn=_n[On];Cn[On]=V(function(Aa,Ma){return typeof Zn=="number"||typeof Zn=="boolean"?""+Zn:Aa.link(Zn)})}),Object.keys(Tn).forEach(function(On){var Zn=Tn[On];Cn[On]=B(Zn,function(Aa,Ma){return Aa.invoke(Ma,Zn)})}),Cn}(Rr),qr}function ur(Ct,or,hr){var Rr=Ct.shared.context,zr=Ct.scope();Object.keys(hr).forEach(function(Or){or.save(Rr,"."+Or);var Ar=hr[Or].append(Ct,or);Array.isArray(Ar)?zr(Rr,".",Or,"=[",Ar.join(),"];"):zr(Rr,".",Or,"=",Ar,";")}),or(zr)}function Kt(Ct,or,hr,Rr){var zr,Or=(vr=Ct.shared).gl,Ar=vr.framebuffer;rn&&(zr=or.def(vr.extensions,".webgl_draw_buffers"));var vr=(xr=Ct.constants).drawBuffer,xr=xr.backBuffer;Ct=hr?hr.append(Ct,or):or.def(Ar,".next"),Rr||or("if(",Ct,"!==",Ar,".cur){"),or("if(",Ct,"){",Or,".bindFramebuffer(",36160,",",Ct,".framebuffer);"),rn&&or(zr,".drawBuffersWEBGL(",vr,"[",Ct,".colorAttachments.length]);"),or("}else{",Or,".bindFramebuffer(",36160,",null);"),rn&&or(zr,".drawBuffersWEBGL(",xr,");"),or("}",Ar,".cur=",Ct,";"),Rr||or("}")}function Qt(Ct,or,hr){var Rr=Ct.shared,zr=Rr.gl,Or=Ct.current,Ar=Ct.next,vr=Rr.current,xr=Rr.next,wr=Ct.cond(vr,".dirty");Gn.forEach(function(Er){var qr,Hr;if(!((Er=We(Er))in hr.state))if(Er in Ar){qr=Ar[Er],Hr=Or[Er];var $r=t(Qr[Er].length,function(tn){return wr.def(qr,"[",tn,"]")});wr(Ct.cond($r.map(function(tn,vn){return tn+"!=="+Hr+"["+vn+"]"}).join("||")).then(zr,".",Ln[Er],"(",$r,");",$r.map(function(tn,vn){return Hr+"["+vn+"]="+tn}).join(";"),";"))}else qr=wr.def(xr,".",Er),$r=Ct.cond(qr,"!==",vr,".",Er),wr($r),Er in wn?$r(Ct.cond(qr).then(zr,".enable(",wn[Er],");").else(zr,".disable(",wn[Er],");"),vr,".",Er,"=",qr,";"):$r(zr,".",Ln[Er],"(",qr,");",vr,".",Er,"=",qr,";")}),Object.keys(hr.state).length===0&&wr(vr,".dirty=false;"),or(wr)}function er(Ct,or,hr,Rr){var zr,Or=Ct.shared,Ar=Ct.current,vr=Or.current,xr=Or.gl;W(Object.keys(hr)).forEach(function(wr){var Er=hr[wr];if(!Rr||Rr(Er)){var qr=Er.append(Ct,or);if(wn[wr]){var Hr=wn[wr];re(Er)?(zr=Ct.link(qr,{stable:!0}),or(Ct.cond(zr).then(xr,".enable(",Hr,");").else(xr,".disable(",Hr,");")),or(vr,".",wr,"=",zr,";")):(or(Ct.cond(qr).then(xr,".enable(",Hr,");").else(xr,".disable(",Hr,");")),or(vr,".",wr,"=",qr,";"))}else if(c(qr)){var $r=Ar[wr];or(xr,".",Ln[wr],"(",qr,");",qr.map(function(tn,vn){return $r+"["+vn+"]="+tn}).join(";"),";")}else re(Er)?(zr=Ct.link(qr,{stable:!0}),or(xr,".",Ln[wr],"(",zr,");",vr,".",wr,"=",zr,";")):or(xr,".",Ln[wr],"(",qr,");",vr,".",wr,"=",qr,";")}})}function cr(Ct,or){Br&&(Ct.instancing=or.def(Ct.shared.extensions,".angle_instanced_arrays"))}function gr(Ct,or,hr,Rr,zr){function Or(){return typeof performance>"u"?"Date.now()":"performance.now()"}function Ar(vn){vn(wr=or.def(),"=",Or(),";"),typeof zr=="string"?vn(Hr,".count+=",zr,";"):vn(Hr,".count++;"),wt&&(Rr?vn(Er=or.def(),"=",tn,".getNumPendingQueries();"):vn(tn,".beginQuery(",Hr,");"))}function vr(vn){vn(Hr,".cpuTime+=",Or(),"-",wr,";"),wt&&(Rr?vn(tn,".pushScopeStats(",Er,",",tn,".getNumPendingQueries(),",Hr,");"):vn(tn,".endQuery();"))}function xr(vn){var _n=or.def($r,".profile");or($r,".profile=",vn,";"),or.exit($r,".profile=",_n,";")}var wr,Er,qr=Ct.shared,Hr=Ct.stats,$r=qr.current,tn=qr.timer;if(hr=hr.profile){if(re(hr))return void(hr.enable?(Ar(or),vr(or.exit),xr("true")):xr("false"));xr(hr=hr.append(Ct,or))}else hr=or.def($r,".profile");Ar(qr=Ct.block()),or("if(",hr,"){",qr,"}"),vr(Ct=Ct.block()),or.exit("if(",hr,"){",Ct,"}")}function Mr(Ct,or,hr,Rr,zr){function Or(vr,xr,wr){function Er(){or("if(!",tn,".buffer){",Hr,".enableVertexAttribArray(",$r,");}");var Cn,On=wr.type;Cn=wr.size?or.def(wr.size,"||",xr):xr,or("if(",tn,".type!==",On,"||",tn,".size!==",Cn,"||",Tn.map(function(Zn){return tn+"."+Zn+"!=="+wr[Zn]}).join("||"),"){",Hr,".bindBuffer(",34962,",",vn,".buffer);",Hr,".vertexAttribPointer(",[$r,Cn,On,wr.normalized,wr.stride,wr.offset],");",tn,".type=",On,";",tn,".size=",Cn,";",Tn.map(function(Zn){return tn+"."+Zn+"="+wr[Zn]+";"}).join(""),"}"),Br&&(On=wr.divisor,or("if(",tn,".divisor!==",On,"){",Ct.instancing,".vertexAttribDivisorANGLE(",[$r,On],");",tn,".divisor=",On,";}"))}function qr(){or("if(",tn,".buffer){",Hr,".disableVertexAttribArray(",$r,");",tn,".buffer=null;","}if(",Vt.map(function(Cn,On){return tn+"."+Cn+"!=="+_n[On]}).join("||"),"){",Hr,".vertexAttrib4f(",$r,",",_n,");",Vt.map(function(Cn,On){return tn+"."+Cn+"="+_n[On]+";"}).join(""),"}")}var Hr=Ar.gl,$r=or.def(vr,".location"),tn=or.def(Ar.attributes,"[",$r,"]");vr=wr.state;var vn=wr.buffer,_n=[wr.x,wr.y,wr.z,wr.w],Tn=["buffer","normalized","offset","stride"];vr===1?Er():vr===2?qr():(or("if(",vr,"===",1,"){"),Er(),or("}else{"),qr(),or("}"))}var Ar=Ct.shared;Rr.forEach(function(vr){var xr,wr=vr.name,Er=hr.attributes[wr];if(Er){if(!zr(Er))return;xr=Er.append(Ct,or)}else{if(!zr(He))return;var qr=Ct.scopeAttrib(wr);xr={},Object.keys(new bn).forEach(function(Hr){xr[Hr]=or.def(qr,".",Hr)})}Or(Ct.link(vr),function(Hr){switch(Hr){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(vr.info.type),xr)})}function Ir(Ct,or,hr,Rr,zr,Or){for(var Ar,vr=Ct.shared,xr=vr.gl,wr=0;wr<Rr.length;++wr){var Er,qr=(tn=Rr[wr]).name,Hr=tn.info.type,$r=hr.uniforms[qr],tn=Ct.link(tn)+".location";if($r){if(!zr($r))continue;if(re($r)){if(qr=$r.value,Hr===35678||Hr===35680)or(xr,".uniform1i(",tn,",",(Hr=Ct.link(qr._texture||qr.color[0]._texture))+".bind());"),or.exit(Hr,".unbind();");else if(Hr===35674||Hr===35675||Hr===35676)$r=2,Hr===35675?$r=3:Hr===35676&&($r=4),or(xr,".uniformMatrix",$r,"fv(",tn,",false,",qr=Ct.global.def("new Float32Array(["+Array.prototype.slice.call(qr)+"])"),");");else{switch(Hr){case 5126:Ar="1f";break;case 35664:Ar="2f";break;case 35665:Ar="3f";break;case 35666:Ar="4f";break;case 35670:case 5124:Ar="1i";break;case 35671:case 35667:Ar="2i";break;case 35672:case 35668:Ar="3i";break;case 35673:Ar="4i";break;case 35669:Ar="4i"}or(xr,".uniform",Ar,"(",tn,",",c(qr)?Array.prototype.slice.call(qr):qr,");")}continue}Er=$r.append(Ct,or)}else{if(!zr(He))continue;Er=or.def(vr.uniforms,"[",be.id(qr),"]")}switch(Hr===35678?or("if(",Er,"&&",Er,'._reglType==="framebuffer"){',Er,"=",Er,".color[0];","}"):Hr===35680&&or("if(",Er,"&&",Er,'._reglType==="framebufferCube"){',Er,"=",Er,".color[0];","}"),qr=1,Hr){case 35678:case 35680:Hr=or.def(Er,"._texture"),or(xr,".uniform1i(",tn,",",Hr,".bind());"),or.exit(Hr,".unbind();");continue;case 5124:case 35670:Ar="1i";break;case 35667:case 35671:Ar="2i",qr=2;break;case 35668:case 35672:Ar="3i",qr=3;break;case 35669:case 35673:Ar="4i",qr=4;break;case 5126:Ar="1f";break;case 35664:Ar="2f",qr=2;break;case 35665:Ar="3f",qr=3;break;case 35666:Ar="4f",qr=4;break;case 35674:Ar="Matrix2fv";break;case 35675:Ar="Matrix3fv";break;case 35676:Ar="Matrix4fv"}if(Ar.charAt(0)==="M"){or(xr,".uniform",Ar,"(",tn,","),tn=Math.pow(Hr-35674+2,2);var vn=Ct.global.def("new Float32Array(",tn,")");Array.isArray(Er)?or("false,(",t(tn,function(Tn){return vn+"["+Tn+"]="+Er[Tn]}),",",vn,")"):or("false,(Array.isArray(",Er,")||",Er," instanceof Float32Array)?",Er,":(",t(tn,function(Tn){return vn+"["+Tn+"]="+Er+"["+Tn+"]"}),",",vn,")"),or(");")}else{if(1<qr){Hr=[];var _n=[];for($r=0;$r<qr;++$r)Array.isArray(Er)?_n.push(Er[$r]):_n.push(or.def(Er+"["+$r+"]")),Or&&Hr.push(or.def());Or&&or("if(!",Ct.batchId,"||",Hr.map(function(Tn,Cn){return Tn+"!=="+_n[Cn]}).join("||"),"){",Hr.map(function(Tn,Cn){return Tn+"="+_n[Cn]+";"}).join("")),or(xr,".uniform",Ar,"(",tn,",",_n.join(","),");")}else Or&&(Hr=or.def(),or("if(!",Ct.batchId,"||",Hr,"!==",Er,"){",Hr,"=",Er,";")),or(xr,".uniform",Ar,"(",tn,",",Er,");");Or&&or("}")}}}function Fr(Ct,or,hr,Rr){function zr(On){var Zn=Hr[On];return Zn?Zn.contextDep&&Rr.contextDynamic||Zn.propDep?Zn.append(Ct,hr):Zn.append(Ct,or):or.def(qr,".",On)}function Or(){function On(){hr(xr,".drawElementsInstancedANGLE(",[tn,_n,Tn,vn+"<<(("+Tn+"-5121)>>1)",vr],");")}function Zn(){hr(xr,".drawArraysInstancedANGLE(",[tn,vn,_n,vr],");")}$r&&$r!=="null"?Cn?On():(hr("if(",$r,"){"),On(),hr("}else{"),Zn(),hr("}")):Zn()}function Ar(){function On(){hr(Er+".drawElements("+[tn,_n,Tn,vn+"<<(("+Tn+"-5121)>>1)"]+");")}function Zn(){hr(Er+".drawArrays("+[tn,vn,_n]+");")}$r&&$r!=="null"?Cn?On():(hr("if(",$r,"){"),On(),hr("}else{"),Zn(),hr("}")):Zn()}var vr,xr,wr=Ct.shared,Er=wr.gl,qr=wr.draw,Hr=Rr.draw,$r=function(){var On=Hr.elements,Zn=or;return On?((On.contextDep&&Rr.contextDynamic||On.propDep)&&(Zn=hr),On=On.append(Ct,Zn),Hr.elementsActive&&Zn("if("+On+")"+Er+".bindBuffer(34963,"+On+".buffer.buffer);")):(On=Zn.def(),Zn(On,"=",qr,".","elements",";","if(",On,"){",Er,".bindBuffer(",34963,",",On,".buffer.buffer);}","else if(",wr.vao,".currentVAO){",On,"=",Ct.shared.elements+".getElements("+wr.vao,".currentVAO.elements);",gn?"":"if("+On+")"+Er+".bindBuffer(34963,"+On+".buffer.buffer);","}")),On}(),tn=zr("primitive"),vn=zr("offset"),_n=function(){var On=Hr.count,Zn=or;return On?((On.contextDep&&Rr.contextDynamic||On.propDep)&&(Zn=hr),On=On.append(Ct,Zn)):On=Zn.def(qr,".","count"),On}();if(typeof _n=="number"){if(_n===0)return}else hr("if(",_n,"){"),hr.exit("}");Br&&(vr=zr("instances"),xr=Ct.instancing);var Tn=$r+".type",Cn=Hr.elements&&re(Hr.elements)&&!Hr.vaoActive;Br&&(typeof vr!="number"||0<=vr)?typeof vr=="string"?(hr("if(",vr,">0){"),Or(),hr("}else if(",vr,"<0){"),Ar(),hr("}")):Or():Ar()}function Yr(Ct,or,hr,Rr,zr){return zr=(or=Mt()).proc("body",zr),Br&&(or.instancing=zr.def(or.shared.extensions,".angle_instanced_arrays")),Ct(or,zr,hr,Rr),or.compile().body}function fn(Ct,or,hr,Rr){cr(Ct,or),hr.useVAO?hr.drawVAO?or(Ct.shared.vao,".setVAO(",hr.drawVAO.append(Ct,or),");"):or(Ct.shared.vao,".setVAO(",Ct.shared.vao,".targetVAO);"):(or(Ct.shared.vao,".setVAO(null);"),Mr(Ct,or,hr,Rr.attributes,function(){return!0})),Ir(Ct,or,hr,Rr.uniforms,function(){return!0},!1),Fr(Ct,or,or,hr)}function en(Ct,or,hr,Rr){function zr(){return!0}Ct.batchId="a1",cr(Ct,or),Mr(Ct,or,hr,Rr.attributes,zr),Ir(Ct,or,hr,Rr.uniforms,zr,!1),Fr(Ct,or,or,hr)}function Rn(Ct,or,hr,Rr){function zr(qr){return qr.contextDep&&Ar||qr.propDep}function Or(qr){return!zr(qr)}cr(Ct,or);var Ar=hr.contextDep,vr=or.def(),xr=or.def();Ct.shared.props=xr,Ct.batchId=vr;var wr=Ct.scope(),Er=Ct.scope();or(wr.entry,"for(",vr,"=0;",vr,"<","a1",";++",vr,"){",xr,"=","a0","[",vr,"];",Er,"}",wr.exit),hr.needsContext&&ur(Ct,Er,hr.context),hr.needsFramebuffer&&Kt(Ct,Er,hr.framebuffer),er(Ct,Er,hr.state,zr),hr.profile&&zr(hr.profile)&&gr(Ct,Er,hr,!1,!0),Rr?(hr.useVAO?hr.drawVAO?zr(hr.drawVAO)?Er(Ct.shared.vao,".setVAO(",hr.drawVAO.append(Ct,Er),");"):wr(Ct.shared.vao,".setVAO(",hr.drawVAO.append(Ct,wr),");"):wr(Ct.shared.vao,".setVAO(",Ct.shared.vao,".targetVAO);"):(wr(Ct.shared.vao,".setVAO(null);"),Mr(Ct,wr,hr,Rr.attributes,Or),Mr(Ct,Er,hr,Rr.attributes,zr)),Ir(Ct,wr,hr,Rr.uniforms,Or,!1),Ir(Ct,Er,hr,Rr.uniforms,zr,!0),Fr(Ct,wr,Er,hr)):(or=Ct.global.def("{}"),Rr=hr.shader.progVar.append(Ct,Er),xr=Er.def(Rr,".id"),wr=Er.def(or,"[",xr,"]"),Er(Ct.shared.gl,".useProgram(",Rr,".program);","if(!",wr,"){",wr,"=",or,"[",xr,"]=",Ct.link(function(qr){return Yr(en,Ct,hr,qr,2)}),"(",Rr,");}",wr,".call(this,a0[",vr,"],",vr,");"))}function nn(Ct,or){function hr(vr){var xr=or.shader[vr];xr&&(xr=xr.append(Ct,Rr),isNaN(xr)?Rr.set(zr.shader,"."+vr,xr):Rr.set(zr.shader,"."+vr,Ct.link(xr,{stable:!0})))}var Rr=Ct.proc("scope",3);Ct.batchId="a2";var zr=Ct.shared,Or=zr.current;if(ur(Ct,Rr,or.context),or.framebuffer&&or.framebuffer.append(Ct,Rr),W(Object.keys(or.state)).forEach(function(vr){var xr=or.state[vr],wr=xr.append(Ct,Rr);c(wr)?wr.forEach(function(Er,qr){isNaN(Er)?Rr.set(Ct.next[vr],"["+qr+"]",Er):Rr.set(Ct.next[vr],"["+qr+"]",Ct.link(Er,{stable:!0}))}):re(xr)?Rr.set(zr.next,"."+vr,Ct.link(wr,{stable:!0})):Rr.set(zr.next,"."+vr,wr)}),gr(Ct,Rr,or,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(vr){var xr=or.draw[vr];xr&&(xr=xr.append(Ct,Rr),isNaN(xr)?Rr.set(zr.draw,"."+vr,xr):Rr.set(zr.draw,"."+vr,Ct.link(xr),{stable:!0}))}),Object.keys(or.uniforms).forEach(function(vr){var xr=or.uniforms[vr].append(Ct,Rr);Array.isArray(xr)&&(xr="["+xr.map(function(wr){return isNaN(wr)?wr:Ct.link(wr,{stable:!0})})+"]"),Rr.set(zr.uniforms,"["+Ct.link(be.id(vr),{stable:!0})+"]",xr)}),Object.keys(or.attributes).forEach(function(vr){var xr=or.attributes[vr].append(Ct,Rr),wr=Ct.scopeAttrib(vr);Object.keys(new bn).forEach(function(Er){Rr.set(wr,"."+Er,xr[Er])})}),or.scopeVAO){var Ar=or.scopeVAO.append(Ct,Rr);isNaN(Ar)?Rr.set(zr.vao,".targetVAO",Ar):Rr.set(zr.vao,".targetVAO",Ct.link(Ar,{stable:!0}))}hr("vert"),hr("frag"),0<Object.keys(or.state).length&&(Rr(Or,".dirty=true;"),Rr.exit(Or,".dirty=true;")),Rr("a1(",Ct.shared.context,",a0,",Ct.batchId,");")}function yn(Ct,or,hr){var Rr=or.static[hr];if(Rr&&function(Er){if(typeof Er=="object"&&!c(Er)){for(var qr=Object.keys(Er),Hr=0;Hr<qr.length;++Hr)if(K.isDynamic(Er[qr[Hr]]))return!0;return!1}}(Rr)){var zr=Ct.global,Or=Object.keys(Rr),Ar=!1,vr=!1,xr=!1,wr=Ct.global.def("{}");Or.forEach(function(Er){var qr=Rr[Er];if(K.isDynamic(qr))typeof qr=="function"&&(qr=Rr[Er]=K.unbox(qr)),Er=B(qr,null),Ar=Ar||Er.thisDep,xr=xr||Er.propDep,vr=vr||Er.contextDep;else{switch(zr(wr,".",Er,"="),typeof qr){case"number":zr(qr);break;case"string":zr('"',qr,'"');break;case"object":Array.isArray(qr)&&zr("[",qr.join(),"]");break;default:zr(Ct.link(qr))}zr(";")}}),or.dynamic[hr]=new K.DynamicVariable(4,{thisDep:Ar,contextDep:vr,propDep:xr,ref:wr,append:function(Er,qr){Or.forEach(function(Hr){var $r=Rr[Hr];K.isDynamic($r)&&($r=Er.invoke(qr,$r),qr(wr,".",Hr,"=",$r,";"))})}}),delete or.static[hr]}}var bn=Pt.Record,ta={add:32774,subtract:32778,"reverse subtract":32779};Re.ext_blend_minmax&&(ta.min=32775,ta.max=32776);var Br=Re.angle_instanced_arrays,rn=Re.webgl_draw_buffers,gn=Re.oes_vertex_array_object,Qr={dirty:!0,profile:Se.profile},un={},Gn=[],wn={},Ln={};nt("dither",3024),nt("blend.enable",3042),ft("blend.color","blendColor",[0,0,0,0]),ft("blend.equation","blendEquationSeparate",[32774,32774]),ft("blend.func","blendFuncSeparate",[1,0,1,0]),nt("depth.enable",2929,!0),ft("depth.func","depthFunc",513),ft("depth.range","depthRange",[0,1]),ft("depth.mask","depthMask",!0),ft("colorMask","colorMask",[!0,!0,!0,!0]),nt("cull.enable",2884),ft("cull.face","cullFace",1029),ft("frontFace","frontFace",2305),ft("lineWidth","lineWidth",1),nt("polygonOffset.enable",32823),ft("polygonOffset.offset","polygonOffset",[0,0]),nt("sample.alpha",32926),nt("sample.enable",32928),ft("sample.coverage","sampleCoverage",[1,!1]),nt("stencil.enable",2960),ft("stencil.mask","stencilMask",-1),ft("stencil.func","stencilFunc",[519,0,-1]),ft("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),ft("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),nt("scissor.enable",3089),ft("scissor.box","scissor",[0,0,he.drawingBufferWidth,he.drawingBufferHeight]),ft("viewport","viewport",[0,0,he.drawingBufferWidth,he.drawingBufferHeight]);var oa={gl:he,context:Bt,strings:be,next:un,current:Qr,draw:ut,elements:qe,buffer:Xe,shader:rt,attributes:Pt.state,vao:Pt,uniforms:Tt,framebuffer:it,extensions:Re,timer:wt,isBufferArgs:J},tr={primTypes:Te,compareFuncs:nr,blendFuncs:Gt,blendEquations:ta,stencilOps:It,glTypes:pe,orientationType:Be};rn&&(tr.backBuffer=[1029],tr.drawBuffer=t(Ue.maxDrawbuffers,function(Ct){return Ct===0?[0]:t(Ct,function(or){return 36064+or})}));var mr=0;return{next:un,current:Qr,procs:function(){var Ct=Mt(),or=Ct.proc("poll"),hr=Ct.proc("refresh"),Rr=Ct.block();or(Rr),hr(Rr);var zr,Or=(xr=Ct.shared).gl,Ar=xr.next,vr=xr.current;Rr(vr,".dirty=false;"),Kt(Ct,or),Kt(Ct,hr,null,!0),Br&&(zr=Ct.link(Br)),Re.oes_vertex_array_object&&hr(Ct.link(Re.oes_vertex_array_object),".bindVertexArrayOES(null);");var xr=hr.def(xr.attributes),wr=hr.def(0),Er=Ct.cond(wr,".buffer");Er.then(Or,".enableVertexAttribArray(i);",Or,".bindBuffer(",34962,",",wr,".buffer.buffer);",Or,".vertexAttribPointer(i,",wr,".size,",wr,".type,",wr,".normalized,",wr,".stride,",wr,".offset);").else(Or,".disableVertexAttribArray(i);",Or,".vertexAttrib4f(i,",wr,".x,",wr,".y,",wr,".z,",wr,".w);",wr,".buffer=null;");var qr=Ct.link(Ue.maxAttributes,{stable:!0});return hr("for(var i=0;i<",qr,";++i){",wr,"=",xr,"[i];",Er,"}"),Br&&hr("for(var i=0;i<",qr,";++i){",zr,".vertexAttribDivisorANGLE(i,",xr,"[i].divisor);","}"),hr(Ct.shared.vao,".currentVAO=null;",Ct.shared.vao,".setVAO(",Ct.shared.vao,".targetVAO);"),Object.keys(wn).forEach(function(Hr){var $r=wn[Hr],tn=Rr.def(Ar,".",Hr),vn=Ct.block();vn("if(",tn,"){",Or,".enable(",$r,")}else{",Or,".disable(",$r,")}",vr,".",Hr,"=",tn,";"),hr(vn),or("if(",tn,"!==",vr,".",Hr,"){",vn,"}")}),Object.keys(Ln).forEach(function(Hr){var $r,tn,vn=Ln[Hr],_n=Qr[Hr],Tn=Ct.block();Tn(Or,".",vn,"("),c(_n)?(vn=_n.length,$r=Ct.global.def(Ar,".",Hr),tn=Ct.global.def(vr,".",Hr),Tn(t(vn,function(Cn){return $r+"["+Cn+"]"}),");",t(vn,function(Cn){return tn+"["+Cn+"]="+$r+"["+Cn+"];"}).join("")),or("if(",t(vn,function(Cn){return $r+"["+Cn+"]!=="+tn+"["+Cn+"]"}).join("||"),"){",Tn,"}")):($r=Rr.def(Ar,".",Hr),tn=Rr.def(vr,".",Hr),Tn($r,");",vr,".",Hr,"=",$r,";"),or("if(",$r,"!==",tn,"){",Tn,"}")),hr(Tn)}),Ct.compile()}(),compile:function(Ct,or,hr,Rr,zr){var Or=Mt();Or.stats=Or.link(zr),Object.keys(or.static).forEach(function(vr){yn(Or,or,vr)}),Xt.forEach(function(vr){yn(Or,Ct,vr)});var Ar=Tr(Ct,or,hr,Rr);return Ar.shader.program&&(Ar.shader.program.attributes.sort(function(vr,xr){return vr.name<xr.name?-1:1}),Ar.shader.program.uniforms.sort(function(vr,xr){return vr.name<xr.name?-1:1})),function(vr,xr){var wr=vr.proc("draw",1);cr(vr,wr),ur(vr,wr,xr.context),Kt(vr,wr,xr.framebuffer),Qt(vr,wr,xr),er(vr,wr,xr.state),gr(vr,wr,xr,!1,!0);var Er=xr.shader.progVar.append(vr,wr);if(wr(vr.shared.gl,".useProgram(",Er,".program);"),xr.shader.program)fn(vr,wr,xr,xr.shader.program);else{wr(vr.shared.vao,".setVAO(null);");var qr=vr.global.def("{}"),Hr=wr.def(Er,".id"),$r=wr.def(qr,"[",Hr,"]");wr(vr.cond($r).then($r,".call(this,a0);").else($r,"=",qr,"[",Hr,"]=",vr.link(function(tn){return Yr(fn,vr,xr,tn,1)}),"(",Er,");",$r,".call(this,a0);"))}0<Object.keys(xr.state).length&&wr(vr.shared.current,".dirty=true;"),vr.shared.vao&&wr(vr.shared.vao,".setVAO(null);")}(Or,Ar),nn(Or,Ar),function(vr,xr){function wr(_n){return _n.contextDep&&qr||_n.propDep}var Er=vr.proc("batch",2);vr.batchId="0",cr(vr,Er);var qr=!1,Hr=!0;Object.keys(xr.context).forEach(function(_n){qr=qr||xr.context[_n].propDep}),qr||(ur(vr,Er,xr.context),Hr=!1);var $r=!1;if((tn=xr.framebuffer)?(tn.propDep?qr=$r=!0:tn.contextDep&&qr&&($r=!0),$r||Kt(vr,Er,tn)):Kt(vr,Er,null),xr.state.viewport&&xr.state.viewport.propDep&&(qr=!0),Qt(vr,Er,xr),er(vr,Er,xr.state,function(_n){return!wr(_n)}),xr.profile&&wr(xr.profile)||gr(vr,Er,xr,!1,"a1"),xr.contextDep=qr,xr.needsContext=Hr,xr.needsFramebuffer=$r,(Hr=xr.shader.progVar).contextDep&&qr||Hr.propDep)Rn(vr,Er,xr,null);else if(Hr=Hr.append(vr,Er),Er(vr.shared.gl,".useProgram(",Hr,".program);"),xr.shader.program)Rn(vr,Er,xr,xr.shader.program);else{Er(vr.shared.vao,".setVAO(null);");var tn=vr.global.def("{}"),vn=($r=Er.def(Hr,".id"),Er.def(tn,"[",$r,"]"));Er(vr.cond(vn).then(vn,".call(this,a0,a1);").else(vn,"=",tn,"[",$r,"]=",vr.link(function(_n){return Yr(Rn,vr,xr,_n,2)}),"(",Hr,");",vn,".call(this,a0,a1);"))}0<Object.keys(xr.state).length&&Er(vr.shared.current,".dirty=true;"),vr.shared.vao&&Er(vr.shared.vao,".setVAO(null);")}(Or,Ar),N(Or.compile(),{destroy:function(){Ar.shader.program.destroy()}})}}}function ee(he,be){for(var Re=0;Re<he.length;++Re)if(he[Re]===be)return Re;return-1}var N=function(he,be){for(var Re=Object.keys(be),Ue=0;Ue<Re.length;++Ue)he[Re[Ue]]=be[Re[Ue]];return he},$=0,K={DynamicVariable:m,define:function(he,be){return new m(he,v(be+""))},isDynamic:function(he){return typeof he=="function"&&!he._reglType||he instanceof m},unbox:function he(be,Re){return typeof be=="function"?new m(0,be):typeof be=="number"||typeof be=="boolean"?new m(5,be):Array.isArray(be)?new m(6,be.map(function(Ue,Xe){return he(Ue)})):be instanceof m?be:void 0},accessor:v},te={next:typeof requestAnimationFrame=="function"?function(he){return requestAnimationFrame(he)}:function(he){return setTimeout(he,16)},cancel:typeof cancelAnimationFrame=="function"?function(he){return cancelAnimationFrame(he)}:clearTimeout},ie=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},le=l();le.zero=l();var se=function(he,be){var Re=1;be.ext_texture_filter_anisotropic&&(Re=he.getParameter(34047));var Ue=1,Xe=1;be.webgl_draw_buffers&&(Ue=he.getParameter(34852),Xe=he.getParameter(36063));var qe=!!be.oes_texture_float;if(qe){qe=he.createTexture(),he.bindTexture(3553,qe),he.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var st=he.createFramebuffer();if(he.bindFramebuffer(36160,st),he.framebufferTexture2D(36160,36064,3553,qe,0),he.bindTexture(3553,null),he.checkFramebufferStatus(36160)!==36053)qe=!1;else{he.viewport(0,0,1,1),he.clearColor(1,0,0,1),he.clear(16384);var it=le.allocType(5126,4);he.readPixels(0,0,1,1,6408,5126,it),he.getError()?qe=!1:(he.deleteFramebuffer(st),he.deleteTexture(qe),qe=it[0]===1),le.freeType(it)}}return it=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(it=he.createTexture(),st=le.allocType(5121,36),he.activeTexture(33984),he.bindTexture(34067,it),he.texImage2D(34069,0,6408,3,3,0,6408,5121,st),le.freeType(st),he.bindTexture(34067,null),he.deleteTexture(it),it=!he.getError()),{colorBits:[he.getParameter(3410),he.getParameter(3411),he.getParameter(3412),he.getParameter(3413)],depthBits:he.getParameter(3414),stencilBits:he.getParameter(3415),subpixelBits:he.getParameter(3408),extensions:Object.keys(be).filter(function(Tt){return!!be[Tt]}),maxAnisotropic:Re,maxDrawbuffers:Ue,maxColorAttachments:Xe,pointSizeDims:he.getParameter(33901),lineWidthDims:he.getParameter(33902),maxViewportDims:he.getParameter(3386),maxCombinedTextureUnits:he.getParameter(35661),maxCubeMapSize:he.getParameter(34076),maxRenderbufferSize:he.getParameter(34024),maxTextureUnits:he.getParameter(34930),maxTextureSize:he.getParameter(3379),maxAttributes:he.getParameter(34921),maxVertexUniforms:he.getParameter(36347),maxVertexTextureUnits:he.getParameter(35660),maxVaryingVectors:he.getParameter(36348),maxFragmentUniforms:he.getParameter(36349),glsl:he.getParameter(35724),renderer:he.getParameter(7937),vendor:he.getParameter(7936),version:he.getParameter(7938),readFloat:qe,npotTextureCube:it}},ve=function(he){return he instanceof Uint8Array||he instanceof Uint16Array||he instanceof Uint32Array||he instanceof Int8Array||he instanceof Int16Array||he instanceof Int32Array||he instanceof Float32Array||he instanceof Float64Array||he instanceof Uint8ClampedArray},fe=function(he){return Object.keys(he).map(function(be){return he[be]})},ye={shape:function(he){for(var be=[];he.length;he=he[0])be.push(he.length);return be},flatten:function(he,be,Re,Ue){var Xe=1;if(be.length)for(var qe=0;qe<be.length;++qe)Xe*=be[qe];else Xe=0;switch(Re=Ue||le.allocType(Re,Xe),be.length){case 0:break;case 1:for(Ue=be[0],be=0;be<Ue;++be)Re[be]=he[be];break;case 2:for(Ue=be[0],be=be[1],qe=Xe=0;qe<Ue;++qe)for(var st=he[qe],it=0;it<be;++it)Re[Xe++]=st[it];break;case 3:d(he,be[0],be[1],be[2],Re,0);break;default:(function Tt(Pt,rt,ut,Bt,wt){for(var Lt=1,Se=ut+1;Se<rt.length;++Se)Lt*=rt[Se];var We=rt[ut];if(rt.length-ut==4){var nt=rt[ut+1],ft=rt[ut+2];for(rt=rt[ut+3],Se=0;Se<We;++Se)d(Pt[Se],nt,ft,rt,Bt,wt),wt+=Lt}else for(Se=0;Se<We;++Se)Tt(Pt[Se],rt,ut+1,Bt,wt),wt+=Lt})(he,be,0,Re,0)}return Re}},Ae={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},pe={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},ge={dynamic:35048,stream:35040,static:35044},we=ye.flatten,oe=ye.shape,de=[];de[5120]=1,de[5122]=2,de[5124]=4,de[5121]=1,de[5123]=2,de[5125]=4,de[5126]=4;var Te={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ee=new Float32Array(1),Me=new Uint32Array(Ee.buffer),De=[9984,9986,9985,9987],Ie=[0,6409,6410,6407,6408],Oe={};Oe[6409]=Oe[6406]=Oe[6402]=1,Oe[34041]=Oe[6410]=2,Oe[6407]=Oe[35904]=3,Oe[6408]=Oe[35906]=4;var Ze=i("HTMLCanvasElement"),Fe=i("OffscreenCanvas"),Pe=i("CanvasRenderingContext2D"),ze=i("ImageBitmap"),Ge=i("HTMLImageElement"),$e=i("HTMLVideoElement"),ot=Object.keys(Ae).concat([Ze,Fe,Pe,ze,Ge,$e]),vt=[];vt[5121]=1,vt[5126]=4,vt[36193]=2,vt[5123]=2,vt[5125]=4;var bt=[];bt[32854]=2,bt[32855]=2,bt[36194]=2,bt[34041]=4,bt[33776]=.5,bt[33777]=.5,bt[33778]=1,bt[33779]=1,bt[35986]=.5,bt[35987]=1,bt[34798]=1,bt[35840]=.5,bt[35841]=.25,bt[35842]=.5,bt[35843]=.25,bt[36196]=.5;var yt=[];yt[32854]=2,yt[32855]=2,yt[36194]=2,yt[33189]=2,yt[36168]=1,yt[34041]=4,yt[35907]=4,yt[34836]=16,yt[34842]=8,yt[34843]=6;var tt=function(he,be,Re,Ue,Xe){function qe(ut){this.id=Pt++,this.refCount=1,this.renderbuffer=ut,this.format=32854,this.height=this.width=0,Xe.profile&&(this.stats={size:0})}function st(ut){var Bt=ut.renderbuffer;he.bindRenderbuffer(36161,null),he.deleteRenderbuffer(Bt),ut.renderbuffer=null,ut.refCount=0,delete rt[ut.id],Ue.renderbufferCount--}var it={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};be.ext_srgb&&(it.srgba=35907),be.ext_color_buffer_half_float&&(it.rgba16f=34842,it.rgb16f=34843),be.webgl_color_buffer_float&&(it.rgba32f=34836);var Tt=[];Object.keys(it).forEach(function(ut){Tt[it[ut]]=ut});var Pt=0,rt={};return qe.prototype.decRef=function(){0>=--this.refCount&&st(this)},Xe.profile&&(Ue.getTotalRenderbufferSize=function(){var ut=0;return Object.keys(rt).forEach(function(Bt){ut+=rt[Bt].stats.size}),ut}),{create:function(ut,Bt){function wt(Se,We){var nt=0,ft=0,Mt=32854;if(typeof Se=="object"&&Se?("shape"in Se?(nt=0|(ft=Se.shape)[0],ft=0|ft[1]):("radius"in Se&&(nt=ft=0|Se.radius),"width"in Se&&(nt=0|Se.width),"height"in Se&&(ft=0|Se.height)),"format"in Se&&(Mt=it[Se.format])):typeof Se=="number"?(nt=0|Se,ft=typeof We=="number"?0|We:nt):Se||(nt=ft=1),nt!==Lt.width||ft!==Lt.height||Mt!==Lt.format)return wt.width=Lt.width=nt,wt.height=Lt.height=ft,Lt.format=Mt,he.bindRenderbuffer(36161,Lt.renderbuffer),he.renderbufferStorage(36161,Mt,nt,ft),Xe.profile&&(Lt.stats.size=yt[Lt.format]*Lt.width*Lt.height),wt.format=Tt[Lt.format],wt}var Lt=new qe(he.createRenderbuffer());return rt[Lt.id]=Lt,Ue.renderbufferCount++,wt(ut,Bt),wt.resize=function(Se,We){var nt=0|Se,ft=0|We||nt;return nt===Lt.width&&ft===Lt.height||(wt.width=Lt.width=nt,wt.height=Lt.height=ft,he.bindRenderbuffer(36161,Lt.renderbuffer),he.renderbufferStorage(36161,Lt.format,nt,ft),Xe.profile&&(Lt.stats.size=yt[Lt.format]*Lt.width*Lt.height)),wt},wt._reglType="renderbuffer",wt._renderbuffer=Lt,Xe.profile&&(wt.stats=Lt.stats),wt.destroy=function(){Lt.decRef()},wt},clear:function(){fe(rt).forEach(st)},restore:function(){fe(rt).forEach(function(ut){ut.renderbuffer=he.createRenderbuffer(),he.bindRenderbuffer(36161,ut.renderbuffer),he.renderbufferStorage(36161,ut.format,ut.width,ut.height)}),he.bindRenderbuffer(36161,null)}}},Ke=[];Ke[6408]=4,Ke[6407]=3;var mt=[];mt[5121]=1,mt[5126]=4,mt[36193]=2;var Ft=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Vt=["x","y","z","w"],Xt="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Gt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},nr={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},It={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Be={cw:2304,ccw:2305},He=new Z(!1,!1,!1,function(){});return function(he){function be(){if(en.length===0)Nt&&Nt.update(),bn=null;else{bn=te.next(be),rt();for(var Br=en.length-1;0<=Br;--Br){var rn=en[Br];rn&&rn(Tr,null,0)}wt.flush(),Nt&&Nt.update()}}function Re(){!bn&&0<en.length&&(bn=te.next(be))}function Ue(){bn&&(te.cancel(be),bn=null)}function Xe(Br){Br.preventDefault(),Ue(),Rn.forEach(function(rn){rn()})}function qe(Br){wt.getError(),Se.restore(),cr.restore(),Kt.restore(),gr.restore(),Mr.restore(),Ir.restore(),er.restore(),Nt&&Nt.restore(),Fr.procs.refresh(),Re(),nn.forEach(function(rn){rn()})}function st(Br){function rn(Ct,or){var hr={},Rr={};return Object.keys(Ct).forEach(function(zr){var Or=Ct[zr];if(K.isDynamic(Or))Rr[zr]=K.unbox(Or,zr);else{if(or&&Array.isArray(Or)){for(var Ar=0;Ar<Or.length;++Ar)if(K.isDynamic(Or[Ar]))return void(Rr[zr]=K.unbox(Or,zr))}hr[zr]=Or}}),{dynamic:Rr,static:hr}}var gn=rn(Br.context||{},!0),Qr=rn(Br.uniforms||{},!0),un=rn(Br.attributes||{},!1);Br=rn(function(Ct){function or(Rr){if(Rr in hr){var zr=hr[Rr];delete hr[Rr],Object.keys(zr).forEach(function(Or){hr[Rr+"."+Or]=zr[Or]})}}var hr=N({},Ct);return delete hr.uniforms,delete hr.attributes,delete hr.context,delete hr.vao,"stencil"in hr&&hr.stencil.op&&(hr.stencil.opBack=hr.stencil.opFront=hr.stencil.op,delete hr.stencil.op),or("blend"),or("depth"),or("cull"),or("stencil"),or("polygonOffset"),or("scissor"),or("sample"),"vao"in Ct&&(hr.vao=Ct.vao),hr}(Br),!1);var Gn={gpuTime:0,cpuTime:0,count:0},wn=Fr.compile(Br,un,Qr,gn,Gn),Ln=wn.draw,oa=wn.batch,tr=wn.scope,mr=[];return N(function(Ct,or){var hr;if(typeof Ct=="function")return tr.call(this,null,Ct,0);if(typeof or=="function")if(typeof Ct=="number")for(hr=0;hr<Ct;++hr)tr.call(this,null,or,hr);else{if(!Array.isArray(Ct))return tr.call(this,Ct,or,0);for(hr=0;hr<Ct.length;++hr)tr.call(this,Ct[hr],or,hr)}else if(typeof Ct=="number"){if(0<Ct)return oa.call(this,function(Rr){for(;mr.length<Rr;)mr.push(null);return mr}(0|Ct),0|Ct)}else{if(!Array.isArray(Ct))return Ln.call(this,Ct);if(Ct.length)return oa.call(this,Ct,Ct.length)}},{stats:Gn,destroy:function(){wn.destroy()}})}function it(Br,rn){var gn=0;Fr.procs.poll();var Qr=rn.color;Qr&&(wt.clearColor(+Qr[0]||0,+Qr[1]||0,+Qr[2]||0,+Qr[3]||0),gn|=16384),"depth"in rn&&(wt.clearDepth(+rn.depth),gn|=256),"stencil"in rn&&(wt.clearStencil(0|rn.stencil),gn|=1024),wt.clear(gn)}function Tt(Br){return en.push(Br),Re(),{cancel:function(){var rn=ee(en,Br);en[rn]=function gn(){var Qr=ee(en,gn);en[Qr]=en[en.length-1],--en.length,0>=en.length&&Ue()}}}}function Pt(){var Br=Yr.viewport,rn=Yr.scissor_box;Br[0]=Br[1]=rn[0]=rn[1]=0,Tr.viewportWidth=Tr.framebufferWidth=Tr.drawingBufferWidth=Br[2]=rn[2]=wt.drawingBufferWidth,Tr.viewportHeight=Tr.framebufferHeight=Tr.drawingBufferHeight=Br[3]=rn[3]=wt.drawingBufferHeight}function rt(){Tr.tick+=1,Tr.time=Bt(),Pt(),Fr.procs.poll()}function ut(){gr.refresh(),Pt(),Fr.procs.refresh(),Nt&&Nt.update()}function Bt(){return(ie()-Zt)/1e3}if(!(he=e(he)))return null;var wt=he.gl,Lt=wt.getContextAttributes();wt.isContextLost();var Se=function(Br,rn){function gn(wn){var Ln;wn=wn.toLowerCase();try{Ln=Qr[wn]=Br.getExtension(wn)}catch{}return!!Ln}for(var Qr={},un=0;un<rn.extensions.length;++un){var Gn=rn.extensions[un];if(!gn(Gn))return rn.onDestroy(),rn.onDone('"'+Gn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return rn.optionalExtensions.forEach(gn),{extensions:Qr,restore:function(){Object.keys(Qr).forEach(function(wn){if(Qr[wn]&&!gn(wn))throw Error("(regl): error restoring extension "+wn)})}}}(wt,he);if(!Se)return null;var We=function(){var Br={"":0},rn=[""];return{id:function(gn){var Qr=Br[gn];return Qr||(Qr=Br[gn]=rn.length,rn.push(gn),Qr)},str:function(gn){return rn[gn]}}}(),nt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},ft=he.cachedCode||{},Mt=Se.extensions,Nt=function(Br,rn){function gn(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function Qr(mr,Ct,or){var hr=wn.pop()||new gn;hr.startQueryIndex=mr,hr.endQueryIndex=Ct,hr.sum=0,hr.stats=or,Ln.push(hr)}if(!rn.ext_disjoint_timer_query)return null;var un=[],Gn=[],wn=[],Ln=[],oa=[],tr=[];return{beginQuery:function(mr){var Ct=un.pop()||rn.ext_disjoint_timer_query.createQueryEXT();rn.ext_disjoint_timer_query.beginQueryEXT(35007,Ct),Gn.push(Ct),Qr(Gn.length-1,Gn.length,mr)},endQuery:function(){rn.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:Qr,update:function(){var mr,Ct;if((mr=Gn.length)!==0){tr.length=Math.max(tr.length,mr+1),oa.length=Math.max(oa.length,mr+1),oa[0]=0;var or=tr[0]=0;for(Ct=mr=0;Ct<Gn.length;++Ct){var hr=Gn[Ct];rn.ext_disjoint_timer_query.getQueryObjectEXT(hr,34919)?(or+=rn.ext_disjoint_timer_query.getQueryObjectEXT(hr,34918),un.push(hr)):Gn[mr++]=hr,oa[Ct+1]=or,tr[Ct+1]=mr}for(Gn.length=mr,Ct=mr=0;Ct<Ln.length;++Ct){var Rr=(or=Ln[Ct]).startQueryIndex;hr=or.endQueryIndex,or.sum+=oa[hr]-oa[Rr],Rr=tr[Rr],(hr=tr[hr])===Rr?(or.stats.gpuTime+=or.sum/1e6,wn.push(or)):(or.startQueryIndex=Rr,or.endQueryIndex=hr,Ln[mr++]=or)}Ln.length=mr}},getNumPendingQueries:function(){return Gn.length},clear:function(){un.push.apply(un,Gn);for(var mr=0;mr<un.length;mr++)rn.ext_disjoint_timer_query.deleteQueryEXT(un[mr]);Gn.length=0,un.length=0},restore:function(){Gn.length=0,un.length=0}}}(0,Mt),Zt=ie(),Ut=wt.drawingBufferWidth,fr=wt.drawingBufferHeight,Tr={tick:0,time:0,viewportWidth:Ut,viewportHeight:fr,framebufferWidth:Ut,framebufferHeight:fr,drawingBufferWidth:Ut,drawingBufferHeight:fr,pixelRatio:he.pixelRatio},ur=(Ut={elements:null,primitive:4,count:-1,offset:0,instances:-1},se(wt,Mt)),Kt=s(wt,nt,he,function(Br){return er.destroyBuffer(Br)}),Qt=a(wt,Mt,Kt,nt),er=P(wt,Mt,ur,nt,Kt,Qt,Ut),cr=S(wt,We,nt,he),gr=L(wt,Mt,ur,function(){Fr.procs.poll()},Tr,nt,he),Mr=tt(wt,Mt,0,nt,he),Ir=A(wt,Mt,ur,gr,Mr,nt),Fr=j(wt,We,Mt,ur,Kt,Qt,0,Ir,{},er,cr,Ut,Tr,Nt,ft,he),Yr=(We=E(wt,Ir,Fr.procs.poll,Tr),Fr.next),fn=wt.canvas,en=[],Rn=[],nn=[],yn=[he.onDestroy],bn=null;fn&&(fn.addEventListener("webglcontextlost",Xe,!1),fn.addEventListener("webglcontextrestored",qe,!1));var ta=Ir.setFBO=st({framebuffer:K.define.call(null,1,"framebuffer")});return ut(),Lt=N(st,{clear:function(Br){if("framebuffer"in Br)if(Br.framebuffer&&Br.framebuffer_reglType==="framebufferCube")for(var rn=0;6>rn;++rn)ta(N({framebuffer:Br.framebuffer.faces[rn]},Br),it);else ta(Br,it);else it(0,Br)},prop:K.define.bind(null,1),context:K.define.bind(null,2),this:K.define.bind(null,3),draw:st({}),buffer:function(Br){return Kt.create(Br,34962,!1,!1)},elements:function(Br){return Qt.create(Br,!1)},texture:gr.create2D,cube:gr.createCube,renderbuffer:Mr.create,framebuffer:Ir.create,framebufferCube:Ir.createCube,vao:er.createVAO,attributes:Lt,frame:Tt,on:function(Br,rn){var gn;switch(Br){case"frame":return Tt(rn);case"lost":gn=Rn;break;case"restore":gn=nn;break;case"destroy":gn=yn}return gn.push(rn),{cancel:function(){for(var Qr=0;Qr<gn.length;++Qr)if(gn[Qr]===rn){gn[Qr]=gn[gn.length-1],gn.pop();break}}}},limits:ur,hasExtension:function(Br){return 0<=ur.extensions.indexOf(Br.toLowerCase())},read:We,destroy:function(){en.length=0,Ue(),fn&&(fn.removeEventListener("webglcontextlost",Xe),fn.removeEventListener("webglcontextrestored",qe)),cr.clear(),Ir.clear(),Mr.clear(),er.clear(),gr.clear(),Qt.clear(),Kt.clear(),Nt&&Nt.clear(),yn.forEach(function(Br){Br()})},_gl:wt,_refresh:ut,poll:function(){rt(),Nt&&Nt.update()},now:Bt,stats:nt,getCachedCode:function(){return ft},preloadCachedCode:function(Br){Object.entries(Br).forEach(function(rn){ft[rn[0]]=rn[1]})}}),he.onDone(null,Lt),Lt}})},{}],285:[function(g,Q,X){var m=g("buffer"),v=m.Buffer;function k(e,t){for(var r in e)t[r]=e[r]}function x(e,t,r){return v(e,t,r)}v.from&&v.alloc&&v.allocUnsafe&&v.allocUnsafeSlow?Q.exports=m:(k(m,X),X.Buffer=x),x.prototype=Object.create(v.prototype),k(v,x),x.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return v(e,t,r)},x.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var l=v(e);return t!==void 0?typeof r=="string"?l.fill(t,r):l.fill(t):l.fill(0),l},x.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return v(e)},x.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return m.SlowBuffer(e)}},{buffer:85}],286:[function(g,Q,X){Q.exports=v;var m=g("events").EventEmitter;function v(){m.call(this)}g("inherits")(v,m),v.Readable=g("readable-stream/lib/_stream_readable.js"),v.Writable=g("readable-stream/lib/_stream_writable.js"),v.Duplex=g("readable-stream/lib/_stream_duplex.js"),v.Transform=g("readable-stream/lib/_stream_transform.js"),v.PassThrough=g("readable-stream/lib/_stream_passthrough.js"),v.finished=g("readable-stream/lib/internal/streams/end-of-stream.js"),v.pipeline=g("readable-stream/lib/internal/streams/pipeline.js"),v.Stream=v,v.prototype.pipe=function(k,x){var e=this;function t(h){k.writable&&k.write(h)===!1&&e.pause&&e.pause()}function r(){e.readable&&e.resume&&e.resume()}e.on("data",t),k.on("drain",r),k._isStdio||x&&x.end===!1||(e.on("end",n),e.on("close",d));var l=!1;function n(){l||(l=!0,k.end())}function d(){l||(l=!0,typeof k.destroy=="function"&&k.destroy())}function u(h){if(o(),m.listenerCount(this,"error")===0)throw h}function o(){e.removeListener("data",t),k.removeListener("drain",r),e.removeListener("end",n),e.removeListener("close",d),e.removeListener("error",u),k.removeListener("error",u),e.removeListener("end",o),e.removeListener("close",o),k.removeListener("close",o)}return e.on("error",u),k.on("error",u),e.on("end",o),e.on("close",o),k.on("close",o),k.emit("pipe",e),k}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":288,"readable-stream/lib/_stream_passthrough.js":289,"readable-stream/lib/_stream_readable.js":290,"readable-stream/lib/_stream_transform.js":291,"readable-stream/lib/_stream_writable.js":292,"readable-stream/lib/internal/streams/end-of-stream.js":296,"readable-stream/lib/internal/streams/pipeline.js":298}],287:[function(g,Q,X){var m={};function v(x,e,t){t||(t=Error);var r=function(l){var n,d;function u(o,h,s){return l.call(this,function(a,p,c){return typeof e=="string"?e:e(a,p,c)}(o,h,s))||this}return d=l,(n=u).prototype=Object.create(d.prototype),n.prototype.constructor=n,n.__proto__=d,u}(t);r.prototype.name=t.name,r.prototype.code=x,m[x]=r}function k(x,e){if(Array.isArray(x)){var t=x.length;return x=x.map(function(r){return String(r)}),t>2?"one of ".concat(e," ").concat(x.slice(0,t-1).join(", "),", or ")+x[t-1]:t===2?"one of ".concat(e," ").concat(x[0]," or ").concat(x[1]):"of ".concat(e," ").concat(x[0])}return"of ".concat(e," ").concat(String(x))}v("ERR_INVALID_OPT_VALUE",function(x,e){return'The value "'+e+'" is invalid for option "'+x+'"'},TypeError),v("ERR_INVALID_ARG_TYPE",function(x,e,t){var r,l,n;if(typeof e=="string"&&(l="not ",e.substr(0,l.length)===l)?(r="must not be",e=e.replace(/^not /,"")):r="must be",function(u,o,h){return(h===void 0||h>u.length)&&(h=u.length),u.substring(h-o.length,h)===o}(x," argument"))n="The ".concat(x," ").concat(r," ").concat(k(e,"type"));else{var d=function(u,o,h){return typeof h!="number"&&(h=0),!(h+o.length>u.length)&&u.indexOf(o,h)!==-1}(x,".")?"property":"argument";n='The "'.concat(x,'" ').concat(d," ").concat(r," ").concat(k(e,"type"))}return n+=". Received type ".concat(typeof t)},TypeError),v("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),v("ERR_METHOD_NOT_IMPLEMENTED",function(x){return"The "+x+" method is not implemented"}),v("ERR_STREAM_PREMATURE_CLOSE","Premature close"),v("ERR_STREAM_DESTROYED",function(x){return"Cannot call "+x+" after a stream was destroyed"}),v("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),v("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),v("ERR_STREAM_WRITE_AFTER_END","write after end"),v("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),v("ERR_UNKNOWN_ENCODING",function(x){return"Unknown encoding: "+x},TypeError),v("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Q.exports.codes=m},{}],288:[function(g,Q,X){(function(m){(function(){var v=Object.keys||function(u){var o=[];for(var h in u)o.push(h);return o};Q.exports=l;var k=g("./_stream_readable"),x=g("./_stream_writable");g("inherits")(l,k);for(var e=v(x.prototype),t=0;t<e.length;t++){var r=e[t];l.prototype[r]||(l.prototype[r]=x.prototype[r])}function l(u){if(!(this instanceof l))return new l(u);k.call(this,u),x.call(this,u),this.allowHalfOpen=!0,u&&(u.readable===!1&&(this.readable=!1),u.writable===!1&&(this.writable=!1),u.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",n)))}function n(){this._writableState.ended||m.nextTick(d,this)}function d(u){u.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(u){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=u,this._writableState.destroyed=u)}})}).call(this)}).call(this,g("_process"))},{"./_stream_readable":290,"./_stream_writable":292,_process:278,inherits:231}],289:[function(g,Q,X){Q.exports=v;var m=g("./_stream_transform");function v(k){if(!(this instanceof v))return new v(k);m.call(this,k)}g("inherits")(v,m),v.prototype._transform=function(k,x,e){e(null,k)}},{"./_stream_transform":291,inherits:231}],290:[function(g,Q,X){(function(m,v){(function(){var k;Q.exports=T,T.ReadableState=_,g("events").EventEmitter;var x=function(V,B){return V.listeners(B).length},e=g("./internal/streams/stream"),t=g("buffer").Buffer,r=v.Uint8Array||function(){},l,n=g("util");l=n&&n.debuglog?n.debuglog("stream"):function(){};var d,u,o,h=g("./internal/streams/buffer_list"),s=g("./internal/streams/destroy"),a=g("./internal/streams/state").getHighWaterMark,p=g("../errors").codes,c=p.ERR_INVALID_ARG_TYPE,i=p.ERR_STREAM_PUSH_AFTER_EOF,y=p.ERR_METHOD_NOT_IMPLEMENTED,f=p.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;g("inherits")(T,e);var w=s.errorOrDestroy,b=["error","close","destroy","pause","resume"];function _(V,B,j){k=k||g("./_stream_duplex"),V=V||{},typeof j!="boolean"&&(j=B instanceof k),this.objectMode=!!V.objectMode,j&&(this.objectMode=this.objectMode||!!V.readableObjectMode),this.highWaterMark=a(this,V,"readableHighWaterMark",j),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=V.emitClose!==!1,this.autoDestroy=!!V.autoDestroy,this.destroyed=!1,this.defaultEncoding=V.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,V.encoding&&(d||(d=g("string_decoder/").StringDecoder),this.decoder=new d(V.encoding),this.encoding=V.encoding)}function T(V){if(k=k||g("./_stream_duplex"),!(this instanceof T))return new T(V);var B=this instanceof k;this._readableState=new _(V,this,B),this.readable=!0,V&&(typeof V.read=="function"&&(this._read=V.read),typeof V.destroy=="function"&&(this._destroy=V.destroy)),e.call(this)}function L(V,B,j,ee,N){l("readableAddChunk",B);var $,K=V._readableState;if(B===null)K.reading=!1,function(te,ie){if(l("onEofChunk"),!ie.ended){if(ie.decoder){var le=ie.decoder.end();le&&le.length&&(ie.buffer.push(le),ie.length+=ie.objectMode?1:le.length)}ie.ended=!0,ie.sync?P(te):(ie.needReadable=!1,ie.emittedReadable||(ie.emittedReadable=!0,S(te)))}}(V,K);else if(N||($=function(te,ie){var le;se=ie,t.isBuffer(se)||se instanceof r||typeof ie=="string"||ie===void 0||te.objectMode||(le=new c("chunk",["string","Buffer","Uint8Array"],ie));var se;return le}(K,B)),$)w(V,$);else if(K.objectMode||B&&B.length>0)if(typeof B=="string"||K.objectMode||Object.getPrototypeOf(B)===t.prototype||(B=function(te){return t.from(te)}(B)),ee)K.endEmitted?w(V,new f):A(V,K,B,!0);else if(K.ended)w(V,new i);else{if(K.destroyed)return!1;K.reading=!1,K.decoder&&!j?(B=K.decoder.write(B),K.objectMode||B.length!==0?A(V,K,B,!1):E(V,K)):A(V,K,B,!1)}else ee||(K.reading=!1,E(V,K));return!K.ended&&(K.length<K.highWaterMark||K.length===0)}function A(V,B,j,ee){B.flowing&&B.length===0&&!B.sync?(B.awaitDrain=0,V.emit("data",j)):(B.length+=B.objectMode?1:j.length,ee?B.buffer.unshift(j):B.buffer.push(j),B.needReadable&&P(V)),E(V,B)}Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(V){this._readableState&&(this._readableState.destroyed=V)}}),T.prototype.destroy=s.destroy,T.prototype._undestroy=s.undestroy,T.prototype._destroy=function(V,B){B(V)},T.prototype.push=function(V,B){var j,ee=this._readableState;return ee.objectMode?j=!0:typeof V=="string"&&((B=B||ee.defaultEncoding)!==ee.encoding&&(V=t.from(V,B),B=""),j=!0),L(this,V,B,!1,j)},T.prototype.unshift=function(V){return L(this,V,null,!0,!1)},T.prototype.isPaused=function(){return this._readableState.flowing===!1},T.prototype.setEncoding=function(V){d||(d=g("string_decoder/").StringDecoder);var B=new d(V);this._readableState.decoder=B,this._readableState.encoding=this._readableState.decoder.encoding;for(var j=this._readableState.buffer.head,ee="";j!==null;)ee+=B.write(j.data),j=j.next;return this._readableState.buffer.clear(),ee!==""&&this._readableState.buffer.push(ee),this._readableState.length=ee.length,this};function I(V,B){return V<=0||B.length===0&&B.ended?0:B.objectMode?1:V!=V?B.flowing&&B.length?B.buffer.head.data.length:B.length:(V>B.highWaterMark&&(B.highWaterMark=function(j){return j>=1073741824?j=1073741824:(j--,j|=j>>>1,j|=j>>>2,j|=j>>>4,j|=j>>>8,j|=j>>>16,j++),j}(V)),V<=B.length?V:B.ended?B.length:(B.needReadable=!0,0))}function P(V){var B=V._readableState;l("emitReadable",B.needReadable,B.emittedReadable),B.needReadable=!1,B.emittedReadable||(l("emitReadable",B.flowing),B.emittedReadable=!0,m.nextTick(S,V))}function S(V){var B=V._readableState;l("emitReadable_",B.destroyed,B.length,B.ended),B.destroyed||!B.length&&!B.ended||(V.emit("readable"),B.emittedReadable=!1),B.needReadable=!B.flowing&&!B.ended&&B.length<=B.highWaterMark,Y(V)}function E(V,B){B.readingMore||(B.readingMore=!0,m.nextTick(z,V,B))}function z(V,B){for(;!B.reading&&!B.ended&&(B.length<B.highWaterMark||B.flowing&&B.length===0);){var j=B.length;if(l("maybeReadMore read 0"),V.read(0),j===B.length)break}B.readingMore=!1}function D(V){var B=V._readableState;B.readableListening=V.listenerCount("readable")>0,B.resumeScheduled&&!B.paused?B.flowing=!0:V.listenerCount("data")>0&&V.resume()}function U(V){l("readable nexttick read 0"),V.read(0)}function H(V,B){l("resume",B.reading),B.reading||V.read(0),B.resumeScheduled=!1,V.emit("resume"),Y(V),B.flowing&&!B.reading&&V.read(0)}function Y(V){var B=V._readableState;for(l("flow",B.flowing);B.flowing&&V.read()!==null;);}function J(V,B){return B.length===0?null:(B.objectMode?j=B.buffer.shift():!V||V>=B.length?(j=B.decoder?B.buffer.join(""):B.buffer.length===1?B.buffer.first():B.buffer.concat(B.length),B.buffer.clear()):j=B.buffer.consume(V,B.decoder),j);var j}function W(V){var B=V._readableState;l("endReadable",B.endEmitted),B.endEmitted||(B.ended=!0,m.nextTick(Z,B,V))}function Z(V,B){if(l("endReadableNT",V.endEmitted,V.length),!V.endEmitted&&V.length===0&&(V.endEmitted=!0,B.readable=!1,B.emit("end"),V.autoDestroy)){var j=B._writableState;(!j||j.autoDestroy&&j.finished)&&B.destroy()}}function re(V,B){for(var j=0,ee=V.length;j<ee;j++)if(V[j]===B)return j;return-1}T.prototype.read=function(V){l("read",V),V=parseInt(V,10);var B=this._readableState,j=V;if(V!==0&&(B.emittedReadable=!1),V===0&&B.needReadable&&((B.highWaterMark!==0?B.length>=B.highWaterMark:B.length>0)||B.ended))return l("read: emitReadable",B.length,B.ended),B.length===0&&B.ended?W(this):P(this),null;if((V=I(V,B))===0&&B.ended)return B.length===0&&W(this),null;var ee,N=B.needReadable;return l("need readable",N),(B.length===0||B.length-V<B.highWaterMark)&&l("length less than watermark",N=!0),B.ended||B.reading?l("reading or ended",N=!1):N&&(l("do read"),B.reading=!0,B.sync=!0,B.length===0&&(B.needReadable=!0),this._read(B.highWaterMark),B.sync=!1,B.reading||(V=I(j,B))),(ee=V>0?J(V,B):null)===null?(B.needReadable=B.length<=B.highWaterMark,V=0):(B.length-=V,B.awaitDrain=0),B.length===0&&(B.ended||(B.needReadable=!0),j!==V&&B.ended&&W(this)),ee!==null&&this.emit("data",ee),ee},T.prototype._read=function(V){w(this,new y("_read()"))},T.prototype.pipe=function(V,B){var j=this,ee=this._readableState;switch(ee.pipesCount){case 0:ee.pipes=V;break;case 1:ee.pipes=[ee.pipes,V];break;default:ee.pipes.push(V)}ee.pipesCount+=1,l("pipe count=%d opts=%j",ee.pipesCount,B);var N=(!B||B.end!==!1)&&V!==m.stdout&&V!==m.stderr?K:ye;function $(Ae,pe){l("onunpipe"),Ae===j&&pe&&pe.hasUnpiped===!1&&(pe.hasUnpiped=!0,l("cleanup"),V.removeListener("close",ve),V.removeListener("finish",fe),V.removeListener("drain",te),V.removeListener("error",se),V.removeListener("unpipe",$),j.removeListener("end",K),j.removeListener("end",ye),j.removeListener("data",le),ie=!0,!ee.awaitDrain||V._writableState&&!V._writableState.needDrain||te())}function K(){l("onend"),V.end()}ee.endEmitted?m.nextTick(N):j.once("end",N),V.on("unpipe",$);var te=function(Ae){return function(){var pe=Ae._readableState;l("pipeOnDrain",pe.awaitDrain),pe.awaitDrain&&pe.awaitDrain--,pe.awaitDrain===0&&x(Ae,"data")&&(pe.flowing=!0,Y(Ae))}}(j);V.on("drain",te);var ie=!1;function le(Ae){l("ondata");var pe=V.write(Ae);l("dest.write",pe),pe===!1&&((ee.pipesCount===1&&ee.pipes===V||ee.pipesCount>1&&re(ee.pipes,V)!==-1)&&!ie&&(l("false write response, pause",ee.awaitDrain),ee.awaitDrain++),j.pause())}function se(Ae){l("onerror",Ae),ye(),V.removeListener("error",se),x(V,"error")===0&&w(V,Ae)}function ve(){V.removeListener("finish",fe),ye()}function fe(){l("onfinish"),V.removeListener("close",ve),ye()}function ye(){l("unpipe"),j.unpipe(V)}return j.on("data",le),function(Ae,pe,ge){if(typeof Ae.prependListener=="function")return Ae.prependListener(pe,ge);Ae._events&&Ae._events[pe]?Array.isArray(Ae._events[pe])?Ae._events[pe].unshift(ge):Ae._events[pe]=[ge,Ae._events[pe]]:Ae.on(pe,ge)}(V,"error",se),V.once("close",ve),V.once("finish",fe),V.emit("pipe",j),ee.flowing||(l("pipe resume"),j.resume()),V},T.prototype.unpipe=function(V){var B=this._readableState,j={hasUnpiped:!1};if(B.pipesCount===0)return this;if(B.pipesCount===1)return V&&V!==B.pipes||(V||(V=B.pipes),B.pipes=null,B.pipesCount=0,B.flowing=!1,V&&V.emit("unpipe",this,j)),this;if(!V){var ee=B.pipes,N=B.pipesCount;B.pipes=null,B.pipesCount=0,B.flowing=!1;for(var $=0;$<N;$++)ee[$].emit("unpipe",this,{hasUnpiped:!1});return this}var K=re(B.pipes,V);return K===-1||(B.pipes.splice(K,1),B.pipesCount-=1,B.pipesCount===1&&(B.pipes=B.pipes[0]),V.emit("unpipe",this,j)),this},T.prototype.on=function(V,B){var j=e.prototype.on.call(this,V,B),ee=this._readableState;return V==="data"?(ee.readableListening=this.listenerCount("readable")>0,ee.flowing!==!1&&this.resume()):V==="readable"&&(ee.endEmitted||ee.readableListening||(ee.readableListening=ee.needReadable=!0,ee.flowing=!1,ee.emittedReadable=!1,l("on readable",ee.length,ee.reading),ee.length?P(this):ee.reading||m.nextTick(U,this))),j},T.prototype.addListener=T.prototype.on,T.prototype.removeListener=function(V,B){var j=e.prototype.removeListener.call(this,V,B);return V==="readable"&&m.nextTick(D,this),j},T.prototype.removeAllListeners=function(V){var B=e.prototype.removeAllListeners.apply(this,arguments);return V!=="readable"&&V!==void 0||m.nextTick(D,this),B},T.prototype.resume=function(){var V=this._readableState;return V.flowing||(l("resume"),V.flowing=!V.readableListening,function(B,j){j.resumeScheduled||(j.resumeScheduled=!0,m.nextTick(H,B,j))}(this,V)),V.paused=!1,this},T.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},T.prototype.wrap=function(V){var B=this,j=this._readableState,ee=!1;for(var N in V.on("end",function(){if(l("wrapped end"),j.decoder&&!j.ended){var K=j.decoder.end();K&&K.length&&B.push(K)}B.push(null)}),V.on("data",function(K){l("wrapped data"),j.decoder&&(K=j.decoder.write(K)),j.objectMode&&K==null||(j.objectMode||K&&K.length)&&(B.push(K)||(ee=!0,V.pause()))}),V)this[N]===void 0&&typeof V[N]=="function"&&(this[N]=function(K){return function(){return V[K].apply(V,arguments)}}(N));for(var $=0;$<b.length;$++)V.on(b[$],this.emit.bind(this,b[$]));return this._read=function(K){l("wrapped _read",K),ee&&(ee=!1,V.resume())},this},typeof Symbol=="function"&&(T.prototype[Symbol.asyncIterator]=function(){return u===void 0&&(u=g("./internal/streams/async_iterator")),u(this)}),Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(T.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(T.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(V){this._readableState&&(this._readableState.flowing=V)}}),T._fromList=J,Object.defineProperty(T.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(T.from=function(V,B){return o===void 0&&(o=g("./internal/streams/from")),o(T,V,B)})}).call(this)}).call(this,g("_process"),typeof qi<"u"?qi:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":287,"./_stream_duplex":288,"./internal/streams/async_iterator":293,"./internal/streams/buffer_list":294,"./internal/streams/destroy":295,"./internal/streams/from":297,"./internal/streams/state":299,"./internal/streams/stream":300,_process:278,buffer:85,events:84,inherits:231,"string_decoder/":301,util:83}],291:[function(g,Q,X){Q.exports=l;var m=g("../errors").codes,v=m.ERR_METHOD_NOT_IMPLEMENTED,k=m.ERR_MULTIPLE_CALLBACK,x=m.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=m.ERR_TRANSFORM_WITH_LENGTH_0,t=g("./_stream_duplex");function r(u,o){var h=this._transformState;h.transforming=!1;var s=h.writecb;if(s===null)return this.emit("error",new k);h.writechunk=null,h.writecb=null,o!=null&&this.push(o),s(u);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function l(u){if(!(this instanceof l))return new l(u);t.call(this,u),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",n)}function n(){var u=this;typeof this._flush!="function"||this._readableState.destroyed?d(this,null,null):this._flush(function(o,h){d(u,o,h)})}function d(u,o,h){if(o)return u.emit("error",o);if(h!=null&&u.push(h),u._writableState.length)throw new e;if(u._transformState.transforming)throw new x;return u.push(null)}g("inherits")(l,t),l.prototype.push=function(u,o){return this._transformState.needTransform=!1,t.prototype.push.call(this,u,o)},l.prototype._transform=function(u,o,h){h(new v("_transform()"))},l.prototype._write=function(u,o,h){var s=this._transformState;if(s.writecb=h,s.writechunk=u,s.writeencoding=o,!s.transforming){var a=this._readableState;(s.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},l.prototype._read=function(u){var o=this._transformState;o.writechunk===null||o.transforming?o.needTransform=!0:(o.transforming=!0,this._transform(o.writechunk,o.writeencoding,o.afterTransform))},l.prototype._destroy=function(u,o){t.prototype._destroy.call(this,u,function(h){o(h)})}},{"../errors":287,"./_stream_duplex":288,inherits:231}],292:[function(g,Q,X){(function(m,v){(function(){function k(z){var D=this;this.next=null,this.entry=null,this.finish=function(){(function(U,H,Y){var J=U.entry;for(U.entry=null;J;){var W=J.callback;H.pendingcb--,W(Y),J=J.next}H.corkedRequestsFree.next=U})(D,z)}}var x;Q.exports=T,T.WritableState=_;var e={deprecate:g("util-deprecate")},t=g("./internal/streams/stream"),r=g("buffer").Buffer,l=v.Uint8Array||function(){},n,d=g("./internal/streams/destroy"),u=g("./internal/streams/state").getHighWaterMark,o=g("../errors").codes,h=o.ERR_INVALID_ARG_TYPE,s=o.ERR_METHOD_NOT_IMPLEMENTED,a=o.ERR_MULTIPLE_CALLBACK,p=o.ERR_STREAM_CANNOT_PIPE,c=o.ERR_STREAM_DESTROYED,i=o.ERR_STREAM_NULL_VALUES,y=o.ERR_STREAM_WRITE_AFTER_END,f=o.ERR_UNKNOWN_ENCODING,w=d.errorOrDestroy;function b(){}function _(z,D,U){x=x||g("./_stream_duplex"),z=z||{},typeof U!="boolean"&&(U=D instanceof x),this.objectMode=!!z.objectMode,U&&(this.objectMode=this.objectMode||!!z.writableObjectMode),this.highWaterMark=u(this,z,"writableHighWaterMark",U),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var H=z.decodeStrings===!1;this.decodeStrings=!H,this.defaultEncoding=z.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Y){(function(J,W){var Z=J._writableState,re=Z.sync,V=Z.writecb;if(typeof V!="function")throw new a;if(function(j){j.writing=!1,j.writecb=null,j.length-=j.writelen,j.writelen=0}(Z),W)(function(j,ee,N,$,K){--ee.pendingcb,N?(m.nextTick(K,$),m.nextTick(E,j,ee),j._writableState.errorEmitted=!0,w(j,$)):(K($),j._writableState.errorEmitted=!0,w(j,$),E(j,ee))})(J,Z,re,W,V);else{var B=P(Z)||J.destroyed;B||Z.corked||Z.bufferProcessing||!Z.bufferedRequest||I(J,Z),re?m.nextTick(A,J,Z,B,V):A(J,Z,B,V)}})(D,Y)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=z.emitClose!==!1,this.autoDestroy=!!z.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new k(this)}function T(z){var D=this instanceof(x=x||g("./_stream_duplex"));if(!D&&!n.call(T,this))return new T(z);this._writableState=new _(z,this,D),this.writable=!0,z&&(typeof z.write=="function"&&(this._write=z.write),typeof z.writev=="function"&&(this._writev=z.writev),typeof z.destroy=="function"&&(this._destroy=z.destroy),typeof z.final=="function"&&(this._final=z.final)),t.call(this)}function L(z,D,U,H,Y,J,W){D.writelen=H,D.writecb=W,D.writing=!0,D.sync=!0,D.destroyed?D.onwrite(new c("write")):U?z._writev(Y,D.onwrite):z._write(Y,J,D.onwrite),D.sync=!1}function A(z,D,U,H){U||function(Y,J){J.length===0&&J.needDrain&&(J.needDrain=!1,Y.emit("drain"))}(z,D),D.pendingcb--,H(),E(z,D)}function I(z,D){D.bufferProcessing=!0;var U=D.bufferedRequest;if(z._writev&&U&&U.next){var H=D.bufferedRequestCount,Y=new Array(H),J=D.corkedRequestsFree;J.entry=U;for(var W=0,Z=!0;U;)Y[W]=U,U.isBuf||(Z=!1),U=U.next,W+=1;Y.allBuffers=Z,L(z,D,!0,D.length,Y,"",J.finish),D.pendingcb++,D.lastBufferedRequest=null,J.next?(D.corkedRequestsFree=J.next,J.next=null):D.corkedRequestsFree=new k(D),D.bufferedRequestCount=0}else{for(;U;){var re=U.chunk,V=U.encoding,B=U.callback;if(L(z,D,!1,D.objectMode?1:re.length,re,V,B),U=U.next,D.bufferedRequestCount--,D.writing)break}U===null&&(D.lastBufferedRequest=null)}D.bufferedRequest=U,D.bufferProcessing=!1}function P(z){return z.ending&&z.length===0&&z.bufferedRequest===null&&!z.finished&&!z.writing}function S(z,D){z._final(function(U){D.pendingcb--,U&&w(z,U),D.prefinished=!0,z.emit("prefinish"),E(z,D)})}function E(z,D){var U=P(D);if(U&&(function(Y,J){J.prefinished||J.finalCalled||(typeof Y._final!="function"||J.destroyed?(J.prefinished=!0,Y.emit("prefinish")):(J.pendingcb++,J.finalCalled=!0,m.nextTick(S,Y,J)))}(z,D),D.pendingcb===0&&(D.finished=!0,z.emit("finish"),D.autoDestroy))){var H=z._readableState;(!H||H.autoDestroy&&H.endEmitted)&&z.destroy()}return U}g("inherits")(T,t),_.prototype.getBuffer=function(){for(var z=this.bufferedRequest,D=[];z;)D.push(z),z=z.next;return D},function(){try{Object.defineProperty(_.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(n=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function(z){return!!n.call(this,z)||this===T&&z&&z._writableState instanceof _}})):n=function(z){return z instanceof this},T.prototype.pipe=function(){w(this,new p)},T.prototype.write=function(z,D,U){var H,Y=this._writableState,J=!1,W=!Y.objectMode&&(H=z,r.isBuffer(H)||H instanceof l);return W&&!r.isBuffer(z)&&(z=function(Z){return r.from(Z)}(z)),typeof D=="function"&&(U=D,D=null),W?D="buffer":D||(D=Y.defaultEncoding),typeof U!="function"&&(U=b),Y.ending?function(Z,re){var V=new y;w(Z,V),m.nextTick(re,V)}(this,U):(W||function(Z,re,V,B){var j;return V===null?j=new i:typeof V=="string"||re.objectMode||(j=new h("chunk",["string","Buffer"],V)),!j||(w(Z,j),m.nextTick(B,j),!1)}(this,Y,z,U))&&(Y.pendingcb++,J=function(Z,re,V,B,j,ee){if(!V){var N=function(ie,le,se){return ie.objectMode||ie.decodeStrings===!1||typeof le!="string"||(le=r.from(le,se)),le}(re,B,j);B!==N&&(V=!0,j="buffer",B=N)}var $=re.objectMode?1:B.length;re.length+=$;var K=re.length<re.highWaterMark;if(K||(re.needDrain=!0),re.writing||re.corked){var te=re.lastBufferedRequest;re.lastBufferedRequest={chunk:B,encoding:j,isBuf:V,callback:ee,next:null},te?te.next=re.lastBufferedRequest:re.bufferedRequest=re.lastBufferedRequest,re.bufferedRequestCount+=1}else L(Z,re,!1,$,B,j,ee);return K}(this,Y,W,z,D,U)),J},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var z=this._writableState;z.corked&&(z.corked--,z.writing||z.corked||z.bufferProcessing||!z.bufferedRequest||I(this,z))},T.prototype.setDefaultEncoding=function(z){if(typeof z=="string"&&(z=z.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((z+"").toLowerCase())>-1))throw new f(z);return this._writableState.defaultEncoding=z,this},Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),T.prototype._write=function(z,D,U){U(new s("_write()"))},T.prototype._writev=null,T.prototype.end=function(z,D,U){var H=this._writableState;return typeof z=="function"?(U=z,z=null,D=null):typeof D=="function"&&(U=D,D=null),z!=null&&this.write(z,D),H.corked&&(H.corked=1,this.uncork()),H.ending||function(Y,J,W){J.ending=!0,E(Y,J),W&&(J.finished?m.nextTick(W):Y.once("finish",W)),J.ended=!0,Y.writable=!1}(this,H,U),this},Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(z){this._writableState&&(this._writableState.destroyed=z)}}),T.prototype.destroy=d.destroy,T.prototype._undestroy=d.undestroy,T.prototype._destroy=function(z,D){D(z)}}).call(this)}).call(this,g("_process"),typeof qi<"u"?qi:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":287,"./_stream_duplex":288,"./internal/streams/destroy":295,"./internal/streams/state":299,"./internal/streams/stream":300,_process:278,buffer:85,inherits:231,"util-deprecate":331}],293:[function(g,Q,X){(function(m){(function(){var v;function k(c,i,y){return i in c?Object.defineProperty(c,i,{value:y,enumerable:!0,configurable:!0,writable:!0}):c[i]=y,c}var x=g("./end-of-stream"),e=Symbol("lastResolve"),t=Symbol("lastReject"),r=Symbol("error"),l=Symbol("ended"),n=Symbol("lastPromise"),d=Symbol("handlePromise"),u=Symbol("stream");function o(c,i){return{value:c,done:i}}function h(c){var i=c[e];if(i!==null){var y=c[u].read();y!==null&&(c[n]=null,c[e]=null,c[t]=null,i(o(y,!1)))}}function s(c){m.nextTick(h,c)}var a=Object.getPrototypeOf(function(){}),p=Object.setPrototypeOf((k(v={get stream(){return this[u]},next:function(){var c=this,i=this[r];if(i!==null)return Promise.reject(i);if(this[l])return Promise.resolve(o(void 0,!0));if(this[u].destroyed)return new Promise(function(b,_){m.nextTick(function(){c[r]?_(c[r]):b(o(void 0,!0))})});var y,f=this[n];if(f)y=new Promise(function(b,_){return function(T,L){b.then(function(){_[l]?T(o(void 0,!0)):_[d](T,L)},L)}}(f,this));else{var w=this[u].read();if(w!==null)return Promise.resolve(o(w,!1));y=new Promise(this[d])}return this[n]=y,y}},Symbol.asyncIterator,function(){return this}),k(v,"return",function(){var c=this;return new Promise(function(i,y){c[u].destroy(null,function(f){f?y(f):i(o(void 0,!0))})})}),v),a);Q.exports=function(c){var i,y=Object.create(p,(k(i={},u,{value:c,writable:!0}),k(i,e,{value:null,writable:!0}),k(i,t,{value:null,writable:!0}),k(i,r,{value:null,writable:!0}),k(i,l,{value:c._readableState.endEmitted,writable:!0}),k(i,d,{value:function(f,w){var b=y[u].read();b?(y[n]=null,y[e]=null,y[t]=null,f(o(b,!1))):(y[e]=f,y[t]=w)},writable:!0}),i));return y[n]=null,x(c,function(f){if(f&&f.code!=="ERR_STREAM_PREMATURE_CLOSE"){var w=y[t];return w!==null&&(y[n]=null,y[e]=null,y[t]=null,w(f)),void(y[r]=f)}var b=y[e];b!==null&&(y[n]=null,y[e]=null,y[t]=null,b(o(void 0,!0))),y[l]=!0}),c.on("readable",s.bind(null,y)),y}}).call(this)}).call(this,g("_process"))},{"./end-of-stream":296,_process:278}],294:[function(g,Q,X){function m(r,l){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(r);l&&(d=d.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),n.push.apply(n,d)}return n}function v(r,l,n){return l in r?Object.defineProperty(r,l,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[l]=n,r}function k(r,l){for(var n=0;n<l.length;n++){var d=l[n];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(r,d.key,d)}}var x=g("buffer").Buffer,e=g("util").inspect,t=e&&e.custom||"inspect";Q.exports=function(){function r(){(function(d,u){if(!(d instanceof u))throw new TypeError("Cannot call a class as a function")})(this,r),this.head=null,this.tail=null,this.length=0}var l,n;return l=r,(n=[{key:"push",value:function(d){var u={data:d,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length}},{key:"unshift",value:function(d){var u={data:d,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length}},{key:"shift",value:function(){if(this.length!==0){var d=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,d}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(d){if(this.length===0)return"";for(var u=this.head,o=""+u.data;u=u.next;)o+=d+u.data;return o}},{key:"concat",value:function(d){if(this.length===0)return x.alloc(0);for(var u,o,h,s=x.allocUnsafe(d>>>0),a=this.head,p=0;a;)u=a.data,o=s,h=p,x.prototype.copy.call(u,o,h),p+=a.data.length,a=a.next;return s}},{key:"consume",value:function(d,u){var o;return d<this.head.data.length?(o=this.head.data.slice(0,d),this.head.data=this.head.data.slice(d)):o=d===this.head.data.length?this.shift():u?this._getString(d):this._getBuffer(d),o}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(d){var u=this.head,o=1,h=u.data;for(d-=h.length;u=u.next;){var s=u.data,a=d>s.length?s.length:d;if(a===s.length?h+=s:h+=s.slice(0,d),(d-=a)==0){a===s.length?(++o,u.next?this.head=u.next:this.head=this.tail=null):(this.head=u,u.data=s.slice(a));break}++o}return this.length-=o,h}},{key:"_getBuffer",value:function(d){var u=x.allocUnsafe(d),o=this.head,h=1;for(o.data.copy(u),d-=o.data.length;o=o.next;){var s=o.data,a=d>s.length?s.length:d;if(s.copy(u,u.length-d,0,a),(d-=a)==0){a===s.length?(++h,o.next?this.head=o.next:this.head=this.tail=null):(this.head=o,o.data=s.slice(a));break}++h}return this.length-=h,u}},{key:t,value:function(d,u){return e(this,function(o){for(var h=1;h<arguments.length;h++){var s=arguments[h]!=null?arguments[h]:{};h%2?m(Object(s),!0).forEach(function(a){v(o,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(s)):m(Object(s)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(s,a))})}return o}({},u,{depth:0,customInspect:!1}))}}])&&k(l.prototype,n),r}()},{buffer:85,util:83}],295:[function(g,Q,X){(function(m){(function(){function v(e,t){x(e,t),k(e)}function k(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function x(e,t){e.emit("error",t)}Q.exports={destroy:function(e,t){var r=this,l=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;return l||n?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,m.nextTick(x,this,e)):m.nextTick(x,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(d){!t&&d?r._writableState?r._writableState.errorEmitted?m.nextTick(k,r):(r._writableState.errorEmitted=!0,m.nextTick(v,r,d)):m.nextTick(v,r,d):t?(m.nextTick(k,r),t(d)):m.nextTick(k,r)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,l=e._writableState;r&&r.autoDestroy||l&&l.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,g("_process"))},{_process:278}],296:[function(g,Q,X){var m=g("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function v(){}Q.exports=function k(x,e,t){if(typeof e=="function")return k(x,null,e);e||(e={}),t=function(c){var i=!1;return function(){if(!i){i=!0;for(var y=arguments.length,f=new Array(y),w=0;w<y;w++)f[w]=arguments[w];c.apply(this,f)}}}(t||v);var r=e.readable||e.readable!==!1&&x.readable,l=e.writable||e.writable!==!1&&x.writable,n=function(){x.writable||u()},d=x._writableState&&x._writableState.finished,u=function(){l=!1,d=!0,r||t.call(x)},o=x._readableState&&x._readableState.endEmitted,h=function(){r=!1,o=!0,l||t.call(x)},s=function(c){t.call(x,c)},a=function(){var c;return r&&!o?(x._readableState&&x._readableState.ended||(c=new m),t.call(x,c)):l&&!d?(x._writableState&&x._writableState.ended||(c=new m),t.call(x,c)):void 0},p=function(){x.req.on("finish",u)};return function(c){return c.setHeader&&typeof c.abort=="function"}(x)?(x.on("complete",u),x.on("abort",a),x.req?p():x.on("request",p)):l&&!x._writableState&&(x.on("end",n),x.on("close",n)),x.on("end",h),x.on("finish",u),e.error!==!1&&x.on("error",s),x.on("close",a),function(){x.removeListener("complete",u),x.removeListener("abort",a),x.removeListener("request",p),x.req&&x.req.removeListener("finish",u),x.removeListener("end",n),x.removeListener("close",n),x.removeListener("finish",u),x.removeListener("end",h),x.removeListener("error",s),x.removeListener("close",a)}}},{"../../../errors":287}],297:[function(g,Q,X){Q.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],298:[function(g,Q,X){var m,v=g("../../../errors").codes,k=v.ERR_MISSING_ARGS,x=v.ERR_STREAM_DESTROYED;function e(d){if(d)throw d}function t(d,u,o,h){h=function(p){var c=!1;return function(){c||(c=!0,p.apply(void 0,arguments))}}(h);var s=!1;d.on("close",function(){s=!0}),m===void 0&&(m=g("./end-of-stream")),m(d,{readable:u,writable:o},function(p){if(p)return h(p);s=!0,h()});var a=!1;return function(p){if(!s&&!a)return a=!0,function(c){return c.setHeader&&typeof c.abort=="function"}(d)?d.abort():typeof d.destroy=="function"?d.destroy():void h(p||new x("pipe"))}}function r(d){d()}function l(d,u){return d.pipe(u)}function n(d){return d.length?typeof d[d.length-1]!="function"?e:d.pop():e}Q.exports=function(){for(var d=arguments.length,u=new Array(d),o=0;o<d;o++)u[o]=arguments[o];var h,s=n(u);if(Array.isArray(u[0])&&(u=u[0]),u.length<2)throw new k("streams");var a=u.map(function(p,c){var i=c<u.length-1;return t(p,i,c>0,function(y){h||(h=y),y&&a.forEach(r),i||(a.forEach(r),s(h))})});return u.reduce(l)}},{"../../../errors":287,"./end-of-stream":296}],299:[function(g,Q,X){var m=g("../../../errors").codes.ERR_INVALID_OPT_VALUE;Q.exports={getHighWaterMark:function(v,k,x,e){var t=function(r,l,n){return r.highWaterMark!=null?r.highWaterMark:l?r[n]:null}(k,e,x);if(t!=null){if(!isFinite(t)||Math.floor(t)!==t||t<0)throw new m(e?x:"highWaterMark",t);return Math.floor(t)}return v.objectMode?16:16384}}},{"../../../errors":287}],300:[function(g,Q,X){Q.exports=g("events").EventEmitter},{events:84}],301:[function(g,Q,X){var m=g("safe-buffer").Buffer,v=m.isEncoding||function(o){switch((o=""+o)&&o.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function k(o){var h;switch(this.encoding=function(s){var a=function(p){if(!p)return"utf8";for(var c;;)switch(p){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return p;default:if(c)return;p=(""+p).toLowerCase(),c=!0}}(s);if(typeof a!="string"&&(m.isEncoding===v||!v(s)))throw new Error("Unknown encoding: "+s);return a||s}(o),this.encoding){case"utf16le":this.text=t,this.end=r,h=4;break;case"utf8":this.fillLast=e,h=4;break;case"base64":this.text=l,this.end=n,h=3;break;default:return this.write=d,void(this.end=u)}this.lastNeed=0,this.lastTotal=0,this.lastChar=m.allocUnsafe(h)}function x(o){return o<=127?0:o>>5==6?2:o>>4==14?3:o>>3==30?4:o>>6==2?-1:-2}function e(o){var h=this.lastTotal-this.lastNeed,s=function(a,p,c){if((192&p[0])!=128)return a.lastNeed=0,"\uFFFD";if(a.lastNeed>1&&p.length>1){if((192&p[1])!=128)return a.lastNeed=1,"\uFFFD";if(a.lastNeed>2&&p.length>2&&(192&p[2])!=128)return a.lastNeed=2,"\uFFFD"}}(this,o);return s!==void 0?s:this.lastNeed<=o.length?(o.copy(this.lastChar,h,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(o.copy(this.lastChar,h,0,o.length),void(this.lastNeed-=o.length))}function t(o,h){if((o.length-h)%2==0){var s=o.toString("utf16le",h);if(s){var a=s.charCodeAt(s.length-1);if(a>=55296&&a<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=o[o.length-2],this.lastChar[1]=o[o.length-1],s.slice(0,-1)}return s}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=o[o.length-1],o.toString("utf16le",h,o.length-1)}function r(o){var h=o&&o.length?this.write(o):"";if(this.lastNeed){var s=this.lastTotal-this.lastNeed;return h+this.lastChar.toString("utf16le",0,s)}return h}function l(o,h){var s=(o.length-h)%3;return s===0?o.toString("base64",h):(this.lastNeed=3-s,this.lastTotal=3,s===1?this.lastChar[0]=o[o.length-1]:(this.lastChar[0]=o[o.length-2],this.lastChar[1]=o[o.length-1]),o.toString("base64",h,o.length-s))}function n(o){var h=o&&o.length?this.write(o):"";return this.lastNeed?h+this.lastChar.toString("base64",0,3-this.lastNeed):h}function d(o){return o.toString(this.encoding)}function u(o){return o&&o.length?this.write(o):""}X.StringDecoder=k,k.prototype.write=function(o){if(o.length===0)return"";var h,s;if(this.lastNeed){if((h=this.fillLast(o))===void 0)return"";s=this.lastNeed,this.lastNeed=0}else s=0;return s<o.length?h?h+this.text(o,s):this.text(o,s):h||""},k.prototype.end=function(o){var h=o&&o.length?this.write(o):"";return this.lastNeed?h+"\uFFFD":h},k.prototype.text=function(o,h){var s=function(p,c,i){var y=c.length-1;if(y<i)return 0;var f=x(c[y]);return f>=0?(f>0&&(p.lastNeed=f-1),f):--y<i||f===-2?0:(f=x(c[y]))>=0?(f>0&&(p.lastNeed=f-2),f):--y<i||f===-2?0:(f=x(c[y]))>=0?(f>0&&(f===2?f=0:p.lastNeed=f-3),f):0}(this,o,h);if(!this.lastNeed)return o.toString("utf8",h);this.lastTotal=s;var a=o.length-(s-this.lastNeed);return o.copy(this.lastChar,0,a),o.toString("utf8",h,a)},k.prototype.fillLast=function(o){if(this.lastNeed<=o.length)return o.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);o.copy(this.lastChar,this.lastTotal-this.lastNeed,0,o.length),this.lastNeed-=o.length}},{"safe-buffer":285}],302:[function(g,Q,X){(function(m,v){(function(){var k=g("assert"),x=g("debug")("stream-parser");Q.exports=function(s){var a=s&&typeof s._transform=="function",p=s&&typeof s._write=="function";if(!a&&!p)throw new Error("must pass a Writable or Transform stream in");x("extending Parser into stream"),s._bytes=t,s._skipBytes=r,a&&(s._passthrough=l),a?s._transform=d:s._write=n};function e(s){x("initializing parser stream"),s._parserBytesLeft=0,s._parserBuffers=[],s._parserBuffered=0,s._parserState=-1,s._parserCallback=null,typeof s.push=="function"&&(s._parserOutput=s.push.bind(s)),s._parserInit=!0}function t(s,a){k(!this._parserCallback,'there is already a "callback" set!'),k(isFinite(s)&&s>0,'can only buffer a finite number of bytes > 0, got "'+s+'"'),this._parserInit||e(this),x("buffering %o bytes",s),this._parserBytesLeft=s,this._parserCallback=a,this._parserState=0}function r(s,a){k(!this._parserCallback,'there is already a "callback" set!'),k(s>0,'can only skip > 0 bytes, got "'+s+'"'),this._parserInit||e(this),x("skipping %o bytes",s),this._parserBytesLeft=s,this._parserCallback=a,this._parserState=1}function l(s,a){k(!this._parserCallback,'There is already a "callback" set!'),k(s>0,'can only pass through > 0 bytes, got "'+s+'"'),this._parserInit||e(this),x("passing through %o bytes",s),this._parserBytesLeft=s,this._parserCallback=a,this._parserState=2}function n(s,a,p){this._parserInit||e(this),x("write(%o bytes)",s.length),typeof a=="function"&&(p=a),o(this,s,null,p)}function d(s,a,p){this._parserInit||e(this),x("transform(%o bytes)",s.length),typeof a!="function"&&(a=this._parserOutput),o(this,s,a,p)}function u(s,a,p,c){if(s._parserBytesLeft-=a.length,x("%o bytes left for stream piece",s._parserBytesLeft),s._parserState===0?(s._parserBuffers.push(a),s._parserBuffered+=a.length):s._parserState===2&&p(a),s._parserBytesLeft!==0)return c;var i=s._parserCallback;if(i&&s._parserState===0&&s._parserBuffers.length>1&&(a=v.concat(s._parserBuffers,s._parserBuffered)),s._parserState!==0&&(a=null),s._parserCallback=null,s._parserBuffered=0,s._parserState=-1,s._parserBuffers.splice(0),i){var y=[];a&&y.push(a),p&&y.push(p);var f=i.length>y.length;f&&y.push(h(c));var w=i.apply(s,y);if(!f||c===w)return c}}var o=h(function s(a,p,c,i){return a._parserBytesLeft<=0?i(new Error("got data but not currently parsing anything")):p.length<=a._parserBytesLeft?function(){return u(a,p,c,i)}:function(){var y=p.slice(0,a._parserBytesLeft);return u(a,y,c,function(f){return f?i(f):p.length>y.length?function(){return s(a,p.slice(y.length),c,i)}:void 0})}});function h(s){return function(){for(var a=s.apply(this,arguments);typeof a=="function";)a=a();return a}}}).call(this)}).call(this,g("_process"),g("buffer").Buffer)},{_process:278,assert:75,buffer:85,debug:303}],303:[function(g,Q,X){(function(m){(function(){function v(){var k;try{k=X.storage.debug}catch{}return!k&&m!==void 0&&"env"in m&&(k=m.env.DEBUG),k}(X=Q.exports=g("./debug")).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},X.formatArgs=function(k){var x=this.useColors;if(k[0]=(x?"%c":"")+this.namespace+(x?" %c":" ")+k[0]+(x?"%c ":" ")+"+"+X.humanize(this.diff),!!x){var e="color: "+this.color;k.splice(1,0,e,"color: inherit");var t=0,r=0;k[0].replace(/%[a-zA-Z%]/g,function(l){l!=="%%"&&(t++,l==="%c"&&(r=t))}),k.splice(r,0,e)}},X.save=function(k){try{k==null?X.storage.removeItem("debug"):X.storage.debug=k}catch{}},X.load=v,X.useColors=function(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},X.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),X.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],X.formatters.j=function(k){try{return JSON.stringify(k)}catch(x){return"[UnexpectedJSONParseError]: "+x.message}},X.enable(v())}).call(this)}).call(this,g("_process"))},{"./debug":304,_process:278}],304:[function(g,Q,X){var m;function v(k){function x(){if(x.enabled){var e=x,t=+new Date,r=t-(m||t);e.diff=r,e.prev=m,e.curr=t,m=t;for(var l=new Array(arguments.length),n=0;n<l.length;n++)l[n]=arguments[n];l[0]=X.coerce(l[0]),typeof l[0]!="string"&&l.unshift("%O");var d=0;l[0]=l[0].replace(/%([a-zA-Z%])/g,function(o,h){if(o==="%%")return o;d++;var s=X.formatters[h];if(typeof s=="function"){var a=l[d];o=s.call(e,a),l.splice(d,1),d--}return o}),X.formatArgs.call(e,l);var u=x.log||X.log||console.log.bind(console);u.apply(e,l)}}return x.namespace=k,x.enabled=X.enabled(k),x.useColors=X.useColors(),x.color=function(e){var t,r=0;for(t in e)r=(r<<5)-r+e.charCodeAt(t),r|=0;return X.colors[Math.abs(r)%X.colors.length]}(k),typeof X.init=="function"&&X.init(x),x}(X=Q.exports=v.debug=v.default=v).coerce=function(k){return k instanceof Error?k.stack||k.message:k},X.disable=function(){X.enable("")},X.enable=function(k){X.save(k),X.names=[],X.skips=[];for(var x=(typeof k=="string"?k:"").split(/[\s,]+/),e=x.length,t=0;t<e;t++)x[t]&&((k=x[t].replace(/\*/g,".*?"))[0]==="-"?X.skips.push(new RegExp("^"+k.substr(1)+"$")):X.names.push(new RegExp("^"+k+"$")))},X.enabled=function(k){var x,e;for(x=0,e=X.skips.length;x<e;x++)if(X.skips[x].test(k))return!1;for(x=0,e=X.names.length;x<e;x++)if(X.names[x].test(k))return!0;return!1},X.humanize=g("ms"),X.names=[],X.skips=[],X.formatters={}},{ms:305}],305:[function(g,Q,X){var m=1e3,v=6e4,k=60*v,x=24*k;function e(t,r,l){if(!(t<r))return t<1.5*r?Math.floor(t/r)+" "+l:Math.ceil(t/r)+" "+l+"s"}Q.exports=function(t,r){r=r||{};var l,n=typeof t;if(n==="string"&&t.length>0)return function(d){if(!((d=String(d)).length>100)){var u=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(d);if(!!u){var o=parseFloat(u[1]);switch((u[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"days":case"day":case"d":return o*x;case"hours":case"hour":case"hrs":case"hr":case"h":return o*k;case"minutes":case"minute":case"mins":case"min":case"m":return o*v;case"seconds":case"second":case"secs":case"sec":case"s":return o*m;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(t);if(n==="number"&&isNaN(t)===!1)return r.long?e(l=t,x,"day")||e(l,k,"hour")||e(l,v,"minute")||e(l,m,"second")||l+" ms":function(d){return d>=x?Math.round(d/x)+"d":d>=k?Math.round(d/k)+"h":d>=v?Math.round(d/v)+"m":d>=m?Math.round(d/m)+"s":d+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},{}],306:[function(g,Q,X){var m=g("parenthesis");Q.exports=function(v,k,x){if(v==null)throw Error("First argument should be a string");if(k==null)throw Error("Separator should be a string or a RegExp");x?(typeof x=="string"||Array.isArray(x))&&(x={ignore:x}):x={},x.escape==null&&(x.escape=!0),x.ignore==null?x.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof x.ignore=="string"&&(x.ignore=[x.ignore]),x.ignore=x.ignore.map(function(u){return u.length===1&&(u+=u),u}));var e=m.parse(v,{flat:!0,brackets:x.ignore}),t=e[0].split(k);if(x.escape){for(var r=[],l=0;l<t.length;l++){var n=t[l],d=t[l+1];n[n.length-1]==="\\"&&n[n.length-2]!=="\\"?(r.push(n+k+d),l++):r.push(n)}t=r}for(l=0;l<t.length;l++)e[0]=t[l],t[l]=m.stringify(e,{flat:!0});return t}},{parenthesis:248}],307:[function(g,Q,X){Q.exports=function(m){for(var v=m.length,k=new Array(v),x=new Array(v),e=new Array(v),t=new Array(v),r=new Array(v),l=new Array(v),n=0;n<v;++n)k[n]=-1,x[n]=0,e[n]=!1,t[n]=0,r[n]=-1,l[n]=[];var d,u=0,o=[],h=[];function s(c){var i=[c],y=[c];for(k[c]=x[c]=u,e[c]=!0,u+=1;y.length>0;){c=y[y.length-1];var f=m[c];if(t[c]<f.length){for(var w=t[c];w<f.length;++w){var b=f[w];if(k[b]<0){k[b]=x[b]=u,e[b]=!0,u+=1,i.push(b),y.push(b);break}e[b]&&(x[c]=0|Math.min(x[c],x[b])),r[b]>=0&&l[c].push(r[b])}t[c]=w}else{if(x[c]===k[c]){var _=[],T=[],L=0;for(w=i.length-1;w>=0;--w){var A=i[w];if(e[A]=!1,_.push(A),T.push(l[A]),L+=l[A].length,r[A]=o.length,A===c){i.length=w;break}}o.push(_);var I=new Array(L);for(w=0;w<T.length;w++)for(var P=0;P<T[w].length;P++)I[--L]=T[w][P];h.push(I)}y.pop()}}}for(n=0;n<v;++n)k[n]<0&&s(n);for(n=0;n<h.length;n++){var a=h[n];if(a.length!==0){a.sort(function(c,i){return c-i}),d=[a[0]];for(var p=1;p<a.length;p++)a[p]!==a[p-1]&&d.push(a[p]);h[n]=d}}return{components:o,adjacencyList:h}}},{}],308:[function(g,Q,X){Object.defineProperty(X,"__esModule",{value:!0});var m=function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(l,n){var d=[],u=!0,o=!1,h=void 0;try{for(var s,a=l[Symbol.iterator]();!(u=(s=a.next()).done)&&(d.push(s.value),!n||d.length!==n);u=!0);}catch(p){o=!0,h=p}finally{try{!u&&a.return&&a.return()}finally{if(o)throw h}}return d}(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")},v=2*Math.PI,k=function(t,r,l,n,d,u,o){var h=t.x,s=t.y;return{x:n*(h*=r)-d*(s*=l)+u,y:d*h+n*s+o}},x=function(t,r){var l=r===1.5707963267948966?.551915024494:r===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(r/4),n=Math.cos(t),d=Math.sin(t),u=Math.cos(t+r),o=Math.sin(t+r);return[{x:n-d*l,y:d+n*l},{x:u+o*l,y:o-u*l},{x:u,y:o}]},e=function(t,r,l,n){var d=t*l+r*n;return d>1&&(d=1),d<-1&&(d=-1),(t*n-r*l<0?-1:1)*Math.acos(d)};X.default=function(t){var r=t.px,l=t.py,n=t.cx,d=t.cy,u=t.rx,o=t.ry,h=t.xAxisRotation,s=h===void 0?0:h,a=t.largeArcFlag,p=a===void 0?0:a,c=t.sweepFlag,i=c===void 0?0:c,y=[];if(u===0||o===0)return[];var f=Math.sin(s*v/360),w=Math.cos(s*v/360),b=w*(r-n)/2+f*(l-d)/2,_=-f*(r-n)/2+w*(l-d)/2;if(b===0&&_===0)return[];u=Math.abs(u),o=Math.abs(o);var T=Math.pow(b,2)/Math.pow(u,2)+Math.pow(_,2)/Math.pow(o,2);T>1&&(u*=Math.sqrt(T),o*=Math.sqrt(T));var L=function(H,Y,J,W,Z,re,V,B,j,ee,N,$){var K=Math.pow(Z,2),te=Math.pow(re,2),ie=Math.pow(N,2),le=Math.pow($,2),se=K*te-K*le-te*ie;se<0&&(se=0),se/=K*le+te*ie;var ve=(se=Math.sqrt(se)*(V===B?-1:1))*Z/re*$,fe=se*-re/Z*N,ye=ee*ve-j*fe+(H+J)/2,Ae=j*ve+ee*fe+(Y+W)/2,pe=(N-ve)/Z,ge=($-fe)/re,we=(-N-ve)/Z,oe=(-$-fe)/re,de=e(1,0,pe,ge),Te=e(pe,ge,we,oe);return B===0&&Te>0&&(Te-=v),B===1&&Te<0&&(Te+=v),[ye,Ae,de,Te]}(r,l,n,d,u,o,p,i,f,w,b,_),A=m(L,4),I=A[0],P=A[1],S=A[2],E=A[3],z=Math.abs(E)/(v/4);Math.abs(1-z)<1e-7&&(z=1);var D=Math.max(Math.ceil(z),1);E/=D;for(var U=0;U<D;U++)y.push(x(S,E)),S+=E;return y.map(function(H){var Y=k(H[0],u,o,w,f,I,P),J=Y.x,W=Y.y,Z=k(H[1],u,o,w,f,I,P),re=Z.x,V=Z.y,B=k(H[2],u,o,w,f,I,P);return{x1:J,y1:W,x2:re,y2:V,x:B.x,y:B.y}})},Q.exports=X.default},{}],309:[function(g,Q,X){var m=g("parse-svg-path"),v=g("abs-svg-path"),k=g("normalize-svg-path"),x=g("is-svg-path"),e=g("assert");Q.exports=function(t){if(Array.isArray(t)&&t.length===1&&typeof t[0]=="string"&&(t=t[0]),typeof t=="string"&&(e(x(t),"String is not an SVG path."),t=m(t)),e(Array.isArray(t),"Argument should be a string or an array of path segments."),t=v(t),!(t=k(t)).length)return[0,0,0,0];for(var r=[1/0,1/0,-1/0,-1/0],l=0,n=t.length;l<n;l++)for(var d=t[l].slice(1),u=0;u<d.length;u+=2)d[u+0]<r[0]&&(r[0]=d[u+0]),d[u+1]<r[1]&&(r[1]=d[u+1]),d[u+0]>r[2]&&(r[2]=d[u+0]),d[u+1]>r[3]&&(r[3]=d[u+1]);return r}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":310,"parse-svg-path":250}],310:[function(g,Q,X){Q.exports=function(x){for(var e,t=[],r=0,l=0,n=0,d=0,u=null,o=null,h=0,s=0,a=0,p=x.length;a<p;a++){var c=x[a],i=c[0];switch(i){case"M":n=c[1],d=c[2];break;case"A":var y=m({px:h,py:s,cx:c[6],cy:c[7],rx:c[1],ry:c[2],xAxisRotation:c[3],largeArcFlag:c[4],sweepFlag:c[5]});if(!y.length)continue;for(var f,w=0;w<y.length;w++)f=y[w],c=["C",f.x1,f.y1,f.x2,f.y2,f.x,f.y],w<y.length-1&&t.push(c);break;case"S":var b=h,_=s;e!="C"&&e!="S"||(b+=b-r,_+=_-l),c=["C",b,_,c[1],c[2],c[3],c[4]];break;case"T":e=="Q"||e=="T"?(u=2*h-u,o=2*s-o):(u=h,o=s),c=k(h,s,u,o,c[1],c[2]);break;case"Q":u=c[1],o=c[2],c=k(h,s,c[1],c[2],c[3],c[4]);break;case"L":c=v(h,s,c[1],c[2]);break;case"H":c=v(h,s,c[1],s);break;case"V":c=v(h,s,h,c[1]);break;case"Z":c=v(h,s,n,d)}e=i,h=c[c.length-2],s=c[c.length-1],c.length>4?(r=c[c.length-4],l=c[c.length-3]):(r=h,l=s),t.push(c)}return t};var m=g("svg-arc-to-cubic-bezier");function v(x,e,t,r){return["C",x,e,t,r,t,r]}function k(x,e,t,r,l,n){return["C",x/3+2/3*t,e/3+2/3*r,l/3+2/3*t,n/3+2/3*r,l,n]}},{"svg-arc-to-cubic-bezier":308}],311:[function(g,Q,X){var m,v=g("svg-path-bounds"),k=g("parse-svg-path"),x=g("draw-svg-path"),e=g("is-svg-path"),t=g("bitmap-sdf"),r=document.createElement("canvas"),l=r.getContext("2d");Q.exports=function(n,d){if(!e(n))throw Error("Argument should be valid svg path string");d||(d={});var u,o;d.shape?(u=d.shape[0],o=d.shape[1]):(u=r.width=d.w||d.width||200,o=r.height=d.h||d.height||200);var h=Math.min(u,o),s=d.stroke||0,a=d.viewbox||d.viewBox||v(n),p=[u/(a[2]-a[0]),o/(a[3]-a[1])],c=Math.min(p[0]||0,p[1]||0)/2;if(l.fillStyle="black",l.fillRect(0,0,u,o),l.fillStyle="white",s&&(typeof s!="number"&&(s=1),l.strokeStyle=s>0?"white":"black",l.lineWidth=Math.abs(s)),l.translate(.5*u,.5*o),l.scale(c,c),function(){if(m!=null)return m;var f=document.createElement("canvas").getContext("2d");if(f.canvas.width=f.canvas.height=1,!window.Path2D)return m=!1;var w=new Path2D("M0,0h1v1h-1v-1Z");f.fillStyle="black",f.fill(w);var b=f.getImageData(0,0,1,1);return m=b&&b.data&&b.data[3]===255}()){var i=new Path2D(n);l.fill(i),s&&l.stroke(i)}else{var y=k(n);x(l,y),l.fill(),s&&l.stroke()}return l.setTransform(1,0,0,1,0,0),t(l,{cutoff:d.cutoff!=null?d.cutoff:.5,radius:d.radius!=null?d.radius:.5*h})}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":309}],312:[function(g,Q,X){(function(m,v){(function(){var k=g("process/browser.js").nextTick,x=Function.prototype.apply,e=Array.prototype.slice,t={},r=0;function l(n,d){this._id=n,this._clearFn=d}X.setTimeout=function(){return new l(x.call(setTimeout,window,arguments),clearTimeout)},X.setInterval=function(){return new l(x.call(setInterval,window,arguments),clearInterval)},X.clearTimeout=X.clearInterval=function(n){n.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},X.enroll=function(n,d){clearTimeout(n._idleTimeoutId),n._idleTimeout=d},X.unenroll=function(n){clearTimeout(n._idleTimeoutId),n._idleTimeout=-1},X._unrefActive=X.active=function(n){clearTimeout(n._idleTimeoutId);var d=n._idleTimeout;d>=0&&(n._idleTimeoutId=setTimeout(function(){n._onTimeout&&n._onTimeout()},d))},X.setImmediate=typeof m=="function"?m:function(n){var d=r++,u=!(arguments.length<2)&&e.call(arguments,1);return t[d]=!0,k(function(){t[d]&&(u?n.apply(null,u):n.call(null),X.clearImmediate(d))}),d},X.clearImmediate=typeof v=="function"?v:function(n){delete t[n]}}).call(this)}).call(this,g("timers").setImmediate,g("timers").clearImmediate)},{"process/browser.js":278,timers:312}],313:[function(g,Q,X){(function(m){var v=/^\s+/,k=/\s+$/,x=0,e=m.round,t=m.min,r=m.max,l=m.random;function n(j,ee){if(ee=ee||{},(j=j||"")instanceof n)return j;if(!(this instanceof n))return new n(j,ee);var N=function($){var K={r:0,g:0,b:0},te=1,ie=null,le=null,se=null,ve=!1,fe=!1;typeof $=="string"&&($=function(ge){ge=ge.replace(v,"").replace(k,"").toLowerCase();var we,oe=!1;if(I[ge])ge=I[ge],oe=!0;else if(ge=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(we=V.rgb.exec(ge))?{r:we[1],g:we[2],b:we[3]}:(we=V.rgba.exec(ge))?{r:we[1],g:we[2],b:we[3],a:we[4]}:(we=V.hsl.exec(ge))?{h:we[1],s:we[2],l:we[3]}:(we=V.hsla.exec(ge))?{h:we[1],s:we[2],l:we[3],a:we[4]}:(we=V.hsv.exec(ge))?{h:we[1],s:we[2],v:we[3]}:(we=V.hsva.exec(ge))?{h:we[1],s:we[2],v:we[3],a:we[4]}:(we=V.hex8.exec(ge))?{r:D(we[1]),g:D(we[2]),b:D(we[3]),a:J(we[4]),format:oe?"name":"hex8"}:(we=V.hex6.exec(ge))?{r:D(we[1]),g:D(we[2]),b:D(we[3]),format:oe?"name":"hex"}:(we=V.hex4.exec(ge))?{r:D(we[1]+""+we[1]),g:D(we[2]+""+we[2]),b:D(we[3]+""+we[3]),a:J(we[4]+""+we[4]),format:oe?"name":"hex8"}:(we=V.hex3.exec(ge))?{r:D(we[1]+""+we[1]),g:D(we[2]+""+we[2]),b:D(we[3]+""+we[3]),format:oe?"name":"hex"}:!1}($)),typeof $=="object"&&(B($.r)&&B($.g)&&B($.b)?(ye=$.r,Ae=$.g,pe=$.b,K={r:255*E(ye,255),g:255*E(Ae,255),b:255*E(pe,255)},ve=!0,fe=String($.r).substr(-1)==="%"?"prgb":"rgb"):B($.h)&&B($.s)&&B($.v)?(ie=H($.s),le=H($.v),K=function(ge,we,oe){ge=6*E(ge,360),we=E(we,100),oe=E(oe,100);var de=m.floor(ge),Te=ge-de,Ee=oe*(1-we),Me=oe*(1-Te*we),De=oe*(1-(1-Te)*we),Ie=de%6;return{r:255*[oe,Me,Ee,Ee,De,oe][Ie],g:255*[De,oe,oe,Me,Ee,Ee][Ie],b:255*[Ee,Ee,De,oe,oe,Me][Ie]}}($.h,ie,le),ve=!0,fe="hsv"):B($.h)&&B($.s)&&B($.l)&&(ie=H($.s),se=H($.l),K=function(ge,we,oe){var de,Te,Ee;function Me(Oe,Ze,Fe){return Fe<0&&(Fe+=1),Fe>1&&(Fe-=1),Fe<1/6?Oe+6*(Ze-Oe)*Fe:Fe<.5?Ze:Fe<2/3?Oe+(Ze-Oe)*(2/3-Fe)*6:Oe}if(ge=E(ge,360),we=E(we,100),oe=E(oe,100),we===0)de=Te=Ee=oe;else{var De=oe<.5?oe*(1+we):oe+we-oe*we,Ie=2*oe-De;de=Me(Ie,De,ge+1/3),Te=Me(Ie,De,ge),Ee=Me(Ie,De,ge-1/3)}return{r:255*de,g:255*Te,b:255*Ee}}($.h,ie,se),ve=!0,fe="hsl"),$.hasOwnProperty("a")&&(te=$.a));var ye,Ae,pe;return te=S(te),{ok:ve,format:$.format||fe,r:t(255,r(K.r,0)),g:t(255,r(K.g,0)),b:t(255,r(K.b,0)),a:te}}(j);this._originalInput=j,this._r=N.r,this._g=N.g,this._b=N.b,this._a=N.a,this._roundA=e(100*this._a)/100,this._format=ee.format||N.format,this._gradientType=ee.gradientType,this._r<1&&(this._r=e(this._r)),this._g<1&&(this._g=e(this._g)),this._b<1&&(this._b=e(this._b)),this._ok=N.ok,this._tc_id=x++}function d(j,ee,N){j=E(j,255),ee=E(ee,255),N=E(N,255);var $,K,te=r(j,ee,N),ie=t(j,ee,N),le=(te+ie)/2;if(te==ie)$=K=0;else{var se=te-ie;switch(K=le>.5?se/(2-te-ie):se/(te+ie),te){case j:$=(ee-N)/se+(ee<N?6:0);break;case ee:$=(N-j)/se+2;break;case N:$=(j-ee)/se+4}$/=6}return{h:$,s:K,l:le}}function u(j,ee,N){j=E(j,255),ee=E(ee,255),N=E(N,255);var $,K,te=r(j,ee,N),ie=t(j,ee,N),le=te,se=te-ie;if(K=te===0?0:se/te,te==ie)$=0;else{switch(te){case j:$=(ee-N)/se+(ee<N?6:0);break;case ee:$=(N-j)/se+2;break;case N:$=(j-ee)/se+4}$/=6}return{h:$,s:K,v:le}}function o(j,ee,N,$){var K=[U(e(j).toString(16)),U(e(ee).toString(16)),U(e(N).toString(16))];return $&&K[0].charAt(0)==K[0].charAt(1)&&K[1].charAt(0)==K[1].charAt(1)&&K[2].charAt(0)==K[2].charAt(1)?K[0].charAt(0)+K[1].charAt(0)+K[2].charAt(0):K.join("")}function h(j,ee,N,$){return[U(Y($)),U(e(j).toString(16)),U(e(ee).toString(16)),U(e(N).toString(16))].join("")}function s(j,ee){ee=ee===0?0:ee||10;var N=n(j).toHsl();return N.s-=ee/100,N.s=z(N.s),n(N)}function a(j,ee){ee=ee===0?0:ee||10;var N=n(j).toHsl();return N.s+=ee/100,N.s=z(N.s),n(N)}function p(j){return n(j).desaturate(100)}function c(j,ee){ee=ee===0?0:ee||10;var N=n(j).toHsl();return N.l+=ee/100,N.l=z(N.l),n(N)}function i(j,ee){ee=ee===0?0:ee||10;var N=n(j).toRgb();return N.r=r(0,t(255,N.r-e(-ee/100*255))),N.g=r(0,t(255,N.g-e(-ee/100*255))),N.b=r(0,t(255,N.b-e(-ee/100*255))),n(N)}function y(j,ee){ee=ee===0?0:ee||10;var N=n(j).toHsl();return N.l-=ee/100,N.l=z(N.l),n(N)}function f(j,ee){var N=n(j).toHsl(),$=(N.h+ee)%360;return N.h=$<0?360+$:$,n(N)}function w(j){var ee=n(j).toHsl();return ee.h=(ee.h+180)%360,n(ee)}function b(j){var ee=n(j).toHsl(),N=ee.h;return[n(j),n({h:(N+120)%360,s:ee.s,l:ee.l}),n({h:(N+240)%360,s:ee.s,l:ee.l})]}function _(j){var ee=n(j).toHsl(),N=ee.h;return[n(j),n({h:(N+90)%360,s:ee.s,l:ee.l}),n({h:(N+180)%360,s:ee.s,l:ee.l}),n({h:(N+270)%360,s:ee.s,l:ee.l})]}function T(j){var ee=n(j).toHsl(),N=ee.h;return[n(j),n({h:(N+72)%360,s:ee.s,l:ee.l}),n({h:(N+216)%360,s:ee.s,l:ee.l})]}function L(j,ee,N){ee=ee||6,N=N||30;var $=n(j).toHsl(),K=360/N,te=[n(j)];for($.h=($.h-(K*ee>>1)+720)%360;--ee;)$.h=($.h+K)%360,te.push(n($));return te}function A(j,ee){ee=ee||6;for(var N=n(j).toHsv(),$=N.h,K=N.s,te=N.v,ie=[],le=1/ee;ee--;)ie.push(n({h:$,s:K,v:te})),te=(te+le)%1;return ie}n.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var j=this.toRgb();return(299*j.r+587*j.g+114*j.b)/1e3},getLuminance:function(){var j,ee,N,$=this.toRgb();return j=$.r/255,ee=$.g/255,N=$.b/255,.2126*(j<=.03928?j/12.92:m.pow((j+.055)/1.055,2.4))+.7152*(ee<=.03928?ee/12.92:m.pow((ee+.055)/1.055,2.4))+.0722*(N<=.03928?N/12.92:m.pow((N+.055)/1.055,2.4))},setAlpha:function(j){return this._a=S(j),this._roundA=e(100*this._a)/100,this},toHsv:function(){var j=u(this._r,this._g,this._b);return{h:360*j.h,s:j.s,v:j.v,a:this._a}},toHsvString:function(){var j=u(this._r,this._g,this._b),ee=e(360*j.h),N=e(100*j.s),$=e(100*j.v);return this._a==1?"hsv("+ee+", "+N+"%, "+$+"%)":"hsva("+ee+", "+N+"%, "+$+"%, "+this._roundA+")"},toHsl:function(){var j=d(this._r,this._g,this._b);return{h:360*j.h,s:j.s,l:j.l,a:this._a}},toHslString:function(){var j=d(this._r,this._g,this._b),ee=e(360*j.h),N=e(100*j.s),$=e(100*j.l);return this._a==1?"hsl("+ee+", "+N+"%, "+$+"%)":"hsla("+ee+", "+N+"%, "+$+"%, "+this._roundA+")"},toHex:function(j){return o(this._r,this._g,this._b,j)},toHexString:function(j){return"#"+this.toHex(j)},toHex8:function(j){return function(ee,N,$,K,te){var ie=[U(e(ee).toString(16)),U(e(N).toString(16)),U(e($).toString(16)),U(Y(K))];return te&&ie[0].charAt(0)==ie[0].charAt(1)&&ie[1].charAt(0)==ie[1].charAt(1)&&ie[2].charAt(0)==ie[2].charAt(1)&&ie[3].charAt(0)==ie[3].charAt(1)?ie[0].charAt(0)+ie[1].charAt(0)+ie[2].charAt(0)+ie[3].charAt(0):ie.join("")}(this._r,this._g,this._b,this._a,j)},toHex8String:function(j){return"#"+this.toHex8(j)},toRgb:function(){return{r:e(this._r),g:e(this._g),b:e(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+e(this._r)+", "+e(this._g)+", "+e(this._b)+")":"rgba("+e(this._r)+", "+e(this._g)+", "+e(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:e(100*E(this._r,255))+"%",g:e(100*E(this._g,255))+"%",b:e(100*E(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+e(100*E(this._r,255))+"%, "+e(100*E(this._g,255))+"%, "+e(100*E(this._b,255))+"%)":"rgba("+e(100*E(this._r,255))+"%, "+e(100*E(this._g,255))+"%, "+e(100*E(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(P[o(this._r,this._g,this._b,!0)]||!1)},toFilter:function(j){var ee="#"+h(this._r,this._g,this._b,this._a),N=ee,$=this._gradientType?"GradientType = 1, ":"";if(j){var K=n(j);N="#"+h(K._r,K._g,K._b,K._a)}return"progid:DXImageTransform.Microsoft.gradient("+$+"startColorstr="+ee+",endColorstr="+N+")"},toString:function(j){var ee=!!j;j=j||this._format;var N=!1,$=this._a<1&&this._a>=0;return ee||!$||j!=="hex"&&j!=="hex6"&&j!=="hex3"&&j!=="hex4"&&j!=="hex8"&&j!=="name"?(j==="rgb"&&(N=this.toRgbString()),j==="prgb"&&(N=this.toPercentageRgbString()),j!=="hex"&&j!=="hex6"||(N=this.toHexString()),j==="hex3"&&(N=this.toHexString(!0)),j==="hex4"&&(N=this.toHex8String(!0)),j==="hex8"&&(N=this.toHex8String()),j==="name"&&(N=this.toName()),j==="hsl"&&(N=this.toHslString()),j==="hsv"&&(N=this.toHsvString()),N||this.toHexString()):j==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return n(this.toString())},_applyModification:function(j,ee){var N=j.apply(null,[this].concat([].slice.call(ee)));return this._r=N._r,this._g=N._g,this._b=N._b,this.setAlpha(N._a),this},lighten:function(){return this._applyModification(c,arguments)},brighten:function(){return this._applyModification(i,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(s,arguments)},saturate:function(){return this._applyModification(a,arguments)},greyscale:function(){return this._applyModification(p,arguments)},spin:function(){return this._applyModification(f,arguments)},_applyCombination:function(j,ee){return j.apply(null,[this].concat([].slice.call(ee)))},analogous:function(){return this._applyCombination(L,arguments)},complement:function(){return this._applyCombination(w,arguments)},monochromatic:function(){return this._applyCombination(A,arguments)},splitcomplement:function(){return this._applyCombination(T,arguments)},triad:function(){return this._applyCombination(b,arguments)},tetrad:function(){return this._applyCombination(_,arguments)}},n.fromRatio=function(j,ee){if(typeof j=="object"){var N={};for(var $ in j)j.hasOwnProperty($)&&(N[$]=$==="a"?j[$]:H(j[$]));j=N}return n(j,ee)},n.equals=function(j,ee){return!(!j||!ee)&&n(j).toRgbString()==n(ee).toRgbString()},n.random=function(){return n.fromRatio({r:l(),g:l(),b:l()})},n.mix=function(j,ee,N){N=N===0?0:N||50;var $=n(j).toRgb(),K=n(ee).toRgb(),te=N/100;return n({r:(K.r-$.r)*te+$.r,g:(K.g-$.g)*te+$.g,b:(K.b-$.b)*te+$.b,a:(K.a-$.a)*te+$.a})},n.readability=function(j,ee){var N=n(j),$=n(ee);return(m.max(N.getLuminance(),$.getLuminance())+.05)/(m.min(N.getLuminance(),$.getLuminance())+.05)},n.isReadable=function(j,ee,N){var $,K,te=n.readability(j,ee);switch(K=!1,($=function(ie){var le,se;return le=((ie=ie||{level:"AA",size:"small"}).level||"AA").toUpperCase(),se=(ie.size||"small").toLowerCase(),le!=="AA"&&le!=="AAA"&&(le="AA"),se!=="small"&&se!=="large"&&(se="small"),{level:le,size:se}}(N)).level+$.size){case"AAsmall":case"AAAlarge":K=te>=4.5;break;case"AAlarge":K=te>=3;break;case"AAAsmall":K=te>=7}return K},n.mostReadable=function(j,ee,N){var $,K,te,ie,le=null,se=0;K=(N=N||{}).includeFallbackColors,te=N.level,ie=N.size;for(var ve=0;ve<ee.length;ve++)($=n.readability(j,ee[ve]))>se&&(se=$,le=n(ee[ve]));return n.isReadable(j,le,{level:te,size:ie})||!K?le:(N.includeFallbackColors=!1,n.mostReadable(j,["#fff","#000"],N))};var I=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},P=n.hexNames=function(j){var ee={};for(var N in j)j.hasOwnProperty(N)&&(ee[j[N]]=N);return ee}(I);function S(j){return j=parseFloat(j),(isNaN(j)||j<0||j>1)&&(j=1),j}function E(j,ee){(function($){return typeof $=="string"&&$.indexOf(".")!=-1&&parseFloat($)===1})(j)&&(j="100%");var N=function($){return typeof $=="string"&&$.indexOf("%")!=-1}(j);return j=t(ee,r(0,parseFloat(j))),N&&(j=parseInt(j*ee,10)/100),m.abs(j-ee)<1e-6?1:j%ee/parseFloat(ee)}function z(j){return t(1,r(0,j))}function D(j){return parseInt(j,16)}function U(j){return j.length==1?"0"+j:""+j}function H(j){return j<=1&&(j=100*j+"%"),j}function Y(j){return m.round(255*parseFloat(j)).toString(16)}function J(j){return D(j)/255}var W,Z,re,V=(Z="[\\s|\\(]+("+(W="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+W+")[,|\\s]+("+W+")\\s*\\)?",re="[\\s|\\(]+("+W+")[,|\\s]+("+W+")[,|\\s]+("+W+")[,|\\s]+("+W+")\\s*\\)?",{CSS_UNIT:new RegExp(W),rgb:new RegExp("rgb"+Z),rgba:new RegExp("rgba"+re),hsl:new RegExp("hsl"+Z),hsla:new RegExp("hsla"+re),hsv:new RegExp("hsv"+Z),hsva:new RegExp("hsva"+re),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function B(j){return!!V.CSS_UNIT.exec(j)}Q!==void 0&&Q.exports?Q.exports=n:window.tinycolor=n})(Math)},{}],314:[function(g,Q,X){Q.exports=v,Q.exports.float32=Q.exports.float=v,Q.exports.fract32=Q.exports.fract=function(k,x){if(k.length){if(k instanceof Float32Array)return new Float32Array(k.length);x instanceof Float32Array||(x=v(k));for(var e=0,t=x.length;e<t;e++)x[e]=k[e]-x[e];return x}return v(k-v(k))};var m=new Float32Array(1);function v(k){return k.length?k instanceof Float32Array?k:new Float32Array(k):(m[0]=k,m[0])}},{}],315:[function(g,Q,X){var m=g("parse-unit");Q.exports=k;function v(x,e){var t=m(getComputedStyle(x).getPropertyValue(e));return t[0]*k(t[1],x)}function k(x,e){switch(e=e||document.body,x=(x||"px").trim().toLowerCase(),e!==window&&e!==document||(e=document.body),x){case"%":return e.clientHeight/100;case"ch":case"ex":return function(t,r){var l=document.createElement("div");l.style["font-size"]="128"+t,r.appendChild(l);var n=v(l,"font-size")/128;return r.removeChild(l),n}(x,e);case"em":return v(e,"font-size");case"rem":return v(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}},{"parse-unit":251}],316:[function(g,Q,X){(function(m,v){v(typeof X=="object"&&Q!==void 0?X:(m=m||self).topojson=m.topojson||{})})(this,function(m){function v(h){return h}function k(h){if(h==null)return v;var s,a,p=h.scale[0],c=h.scale[1],i=h.translate[0],y=h.translate[1];return function(f,w){w||(s=a=0);var b=2,_=f.length,T=new Array(_);for(T[0]=(s+=f[0])*p+i,T[1]=(a+=f[1])*c+y;b<_;)T[b]=f[b],++b;return T}}function x(h){var s,a=k(h.transform),p=1/0,c=p,i=-p,y=-p;function f(b){(b=a(b))[0]<p&&(p=b[0]),b[0]>i&&(i=b[0]),b[1]<c&&(c=b[1]),b[1]>y&&(y=b[1])}function w(b){switch(b.type){case"GeometryCollection":b.geometries.forEach(w);break;case"Point":f(b.coordinates);break;case"MultiPoint":b.coordinates.forEach(f)}}for(s in h.arcs.forEach(function(b){for(var _,T=-1,L=b.length;++T<L;)(_=a(b[T],T))[0]<p&&(p=_[0]),_[0]>i&&(i=_[0]),_[1]<c&&(c=_[1]),_[1]>y&&(y=_[1])}),h.objects)w(h.objects[s]);return[p,c,i,y]}function e(h,s){var a=s.id,p=s.bbox,c=s.properties==null?{}:s.properties,i=t(h,s);return a==null&&p==null?{type:"Feature",properties:c,geometry:i}:p==null?{type:"Feature",id:a,properties:c,geometry:i}:{type:"Feature",id:a,bbox:p,properties:c,geometry:i}}function t(h,s){var a=k(h.transform),p=h.arcs;function c(b,_){_.length&&_.pop();for(var T=p[b<0?~b:b],L=0,A=T.length;L<A;++L)_.push(a(T[L],L));b<0&&function(I,P){for(var S,E=I.length,z=E-P;z<--E;)S=I[z],I[z++]=I[E],I[E]=S}(_,A)}function i(b){return a(b)}function y(b){for(var _=[],T=0,L=b.length;T<L;++T)c(b[T],_);return _.length<2&&_.push(_[0]),_}function f(b){for(var _=y(b);_.length<4;)_.push(_[0]);return _}function w(b){return b.map(f)}return function b(_){var T,L=_.type;switch(L){case"GeometryCollection":return{type:L,geometries:_.geometries.map(b)};case"Point":T=i(_.coordinates);break;case"MultiPoint":T=_.coordinates.map(i);break;case"LineString":T=y(_.arcs);break;case"MultiLineString":T=_.arcs.map(y);break;case"Polygon":T=w(_.arcs);break;case"MultiPolygon":T=_.arcs.map(w);break;default:return null}return{type:L,coordinates:T}}(s)}function r(h,s){var a={},p={},c={},i=[],y=-1;function f(w,b){for(var _ in w){var T=w[_];delete b[T.start],delete T.start,delete T.end,T.forEach(function(L){a[L<0?~L:L]=1}),i.push(T)}}return s.forEach(function(w,b){var _,T=h.arcs[w<0?~w:w];T.length<3&&!T[1][0]&&!T[1][1]&&(_=s[++y],s[y]=w,s[b]=_)}),s.forEach(function(w){var b,_,T=function(S){var E,z=h.arcs[S<0?~S:S],D=z[0];return h.transform?(E=[0,0],z.forEach(function(U){E[0]+=U[0],E[1]+=U[1]})):E=z[z.length-1],S<0?[E,D]:[D,E]}(w),L=T[0],A=T[1];if(b=c[L])if(delete c[b.end],b.push(w),b.end=A,_=p[A]){delete p[_.start];var I=_===b?b:b.concat(_);p[I.start=b.start]=c[I.end=_.end]=I}else p[b.start]=c[b.end]=b;else if(b=p[A])if(delete p[b.start],b.unshift(w),b.start=L,_=c[L]){delete c[_.end];var P=_===b?b:_.concat(b);p[P.start=_.start]=c[P.end=b.end]=P}else p[b.start]=c[b.end]=b;else p[(b=[w]).start=L]=c[b.end=A]=b}),f(c,p),f(p,c),s.forEach(function(w){a[w<0?~w:w]||i.push([w])}),i}function l(h,s,a){var p,c,i;if(arguments.length>1)p=n(h,s,a);else for(c=0,p=new Array(i=h.arcs.length);c<i;++c)p[c]=c;return{type:"MultiLineString",arcs:r(h,p)}}function n(h,s,a){var p,c=[],i=[];function y(b){var _=b<0?~b:b;(i[_]||(i[_]=[])).push({i:b,g:p})}function f(b){b.forEach(y)}function w(b){b.forEach(f)}return function b(_){switch(p=_,_.type){case"GeometryCollection":_.geometries.forEach(b);break;case"LineString":f(_.arcs);break;case"MultiLineString":case"Polygon":w(_.arcs);break;case"MultiPolygon":(function(T){T.forEach(w)})(_.arcs)}}(s),i.forEach(a==null?function(b){c.push(b[0].i)}:function(b){a(b[0].g,b[b.length-1].g)&&c.push(b[0].i)}),c}function d(h,s){var a={},p=[],c=[];function i(f){f.forEach(function(w){w.forEach(function(b){(a[b=b<0?~b:b]||(a[b]=[])).push(f)})}),p.push(f)}function y(f){return function(w){for(var b,_=-1,T=w.length,L=w[T-1],A=0;++_<T;)b=L,L=w[_],A+=b[0]*L[1]-b[1]*L[0];return Math.abs(A)}(t(h,{type:"Polygon",arcs:[f]}).coordinates[0])}return s.forEach(function f(w){switch(w.type){case"GeometryCollection":w.geometries.forEach(f);break;case"Polygon":i(w.arcs);break;case"MultiPolygon":w.arcs.forEach(i)}}),p.forEach(function(f){if(!f._){var w=[],b=[f];for(f._=1,c.push(w);f=b.pop();)w.push(f),f.forEach(function(_){_.forEach(function(T){a[T<0?~T:T].forEach(function(L){L._||(L._=1,b.push(L))})})})}}),p.forEach(function(f){delete f._}),{type:"MultiPolygon",arcs:c.map(function(f){var w,b=[];if(f.forEach(function(I){I.forEach(function(P){P.forEach(function(S){a[S<0?~S:S].length<2&&b.push(S)})})}),(w=(b=r(h,b)).length)>1)for(var _,T,L=1,A=y(b[0]);L<w;++L)(_=y(b[L]))>A&&(T=b[0],b[0]=b[L],b[L]=T,A=_);return b}).filter(function(f){return f.length>0})}}function u(h,s){for(var a=0,p=h.length;a<p;){var c=a+p>>>1;h[c]<s?a=c+1:p=c}return a}function o(h){if(h==null)return v;var s,a,p=h.scale[0],c=h.scale[1],i=h.translate[0],y=h.translate[1];return function(f,w){w||(s=a=0);var b=2,_=f.length,T=new Array(_),L=Math.round((f[0]-i)/p),A=Math.round((f[1]-y)/c);for(T[0]=L-s,s=L,T[1]=A-a,a=A;b<_;)T[b]=f[b],++b;return T}}m.bbox=x,m.feature=function(h,s){return typeof s=="string"&&(s=h.objects[s]),s.type==="GeometryCollection"?{type:"FeatureCollection",features:s.geometries.map(function(a){return e(h,a)})}:e(h,s)},m.merge=function(h){return t(h,d.apply(this,arguments))},m.mergeArcs=d,m.mesh=function(h){return t(h,l.apply(this,arguments))},m.meshArcs=l,m.neighbors=function(h){var s={},a=h.map(function(){return[]});function p(I,P){I.forEach(function(S){S<0&&(S=~S);var E=s[S];E?E.push(P):s[S]=[P]})}function c(I,P){I.forEach(function(S){p(S,P)})}var i={LineString:p,MultiLineString:c,Polygon:c,MultiPolygon:function(I,P){I.forEach(function(S){c(S,P)})}};for(var y in h.forEach(function I(P,S){P.type==="GeometryCollection"?P.geometries.forEach(function(E){I(E,S)}):P.type in i&&i[P.type](P.arcs,S)}),s)for(var f=s[y],w=f.length,b=0;b<w;++b)for(var _=b+1;_<w;++_){var T,L=f[b],A=f[_];(T=a[L])[y=u(T,A)]!==A&&T.splice(y,0,A),(T=a[A])[y=u(T,L)]!==L&&T.splice(y,0,L)}return a},m.quantize=function(h,s){if(h.transform)throw new Error("already quantized");if(s&&s.scale)f=h.bbox;else{if(!((a=Math.floor(s))>=2))throw new Error("n must be \u22652");var a,p=(f=h.bbox||x(h))[0],c=f[1],i=f[2],y=f[3];s={scale:[i-p?(i-p)/(a-1):1,y-c?(y-c)/(a-1):1],translate:[p,c]}}var f,w,b=o(s),_=h.objects,T={};function L(I){return b(I)}function A(I){var P;switch(I.type){case"GeometryCollection":P={type:"GeometryCollection",geometries:I.geometries.map(A)};break;case"Point":P={type:"Point",coordinates:L(I.coordinates)};break;case"MultiPoint":P={type:"MultiPoint",coordinates:I.coordinates.map(L)};break;default:return I}return I.id!=null&&(P.id=I.id),I.bbox!=null&&(P.bbox=I.bbox),I.properties!=null&&(P.properties=I.properties),P}for(w in _)T[w]=A(_[w]);return{type:"Topology",bbox:f,transform:s,objects:T,arcs:h.arcs.map(function(I){var P,S=0,E=1,z=I.length,D=new Array(z);for(D[0]=b(I[0],0);++S<z;)((P=b(I[S],S))[0]||P[1])&&(D[E++]=P);return E===1&&(D[E++]=[0,0]),D.length=E,D})}},m.transform=k,m.untransform=o,Object.defineProperty(m,"__esModule",{value:!0})})},{}],317:[function(g,Q,X){var m=g("../prototype/is");Q.exports=function(v){if(typeof v!="function"||!hasOwnProperty.call(v,"length"))return!1;try{if(typeof v.length!="number"||typeof v.call!="function"||typeof v.apply!="function")return!1}catch{return!1}return!m(v)}},{"../prototype/is":324}],318:[function(g,Q,X){var m=g("../value/is"),v=g("../object/is"),k=g("../string/coerce"),x=g("./to-short-string"),e=function(t,r){return t.replace("%v",x(r))};Q.exports=function(t,r,l){if(!v(l))throw new TypeError(e(r,t));if(!m(t)){if("default"in l)return l.default;if(l.isOptional)return null}var n=k(l.errorMessage);throw m(n)||(n=r),new TypeError(e(n,t))}},{"../object/is":321,"../string/coerce":325,"../value/is":327,"./to-short-string":320}],319:[function(g,Q,X){Q.exports=function(m){try{return m.toString()}catch{try{return String(m)}catch{return null}}}},{}],320:[function(g,Q,X){var m=g("./safe-to-string"),v=/[\n\r\u2028\u2029]/g;Q.exports=function(k){var x=m(k);return x===null?"<Non-coercible to string value>":(x.length>100&&(x=x.slice(0,99)+"\u2026"),x=x.replace(v,function(e){switch(e){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},{"./safe-to-string":319}],321:[function(g,Q,X){var m=g("../value/is"),v={object:!0,function:!0,undefined:!0};Q.exports=function(k){return!!m(k)&&hasOwnProperty.call(v,typeof k)}},{"../value/is":327}],322:[function(g,Q,X){var m=g("../lib/resolve-exception"),v=g("./is");Q.exports=function(k){return v(k)?k:m(k,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":318,"./is":323}],323:[function(g,Q,X){var m=g("../function/is"),v=/^\s*class[\s{/}]/,k=Function.prototype.toString;Q.exports=function(x){return!!m(x)&&!v.test(k.call(x))}},{"../function/is":317}],324:[function(g,Q,X){var m=g("../object/is");Q.exports=function(v){if(!m(v))return!1;try{return!!v.constructor&&v.constructor.prototype===v}catch{return!1}}},{"../object/is":321}],325:[function(g,Q,X){var m=g("../value/is"),v=g("../object/is"),k=Object.prototype.toString;Q.exports=function(x){if(!m(x))return null;if(v(x)){var e=x.toString;if(typeof e!="function"||e===k)return null}try{return""+x}catch{return null}}},{"../object/is":321,"../value/is":327}],326:[function(g,Q,X){var m=g("../lib/resolve-exception"),v=g("./is");Q.exports=function(k){return v(k)?k:m(k,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":318,"./is":327}],327:[function(g,Q,X){Q.exports=function(m){return m!=null}},{}],328:[function(g,Q,X){(function(m){(function(){var v=g("bit-twiddle"),k=g("dup"),x=g("buffer").Buffer;m.__TYPEDARRAY_POOL||(m.__TYPEDARRAY_POOL={UINT8:k([32,0]),UINT16:k([32,0]),UINT32:k([32,0]),BIGUINT64:k([32,0]),INT8:k([32,0]),INT16:k([32,0]),INT32:k([32,0]),BIGINT64:k([32,0]),FLOAT:k([32,0]),DOUBLE:k([32,0]),DATA:k([32,0]),UINT8C:k([32,0]),BUFFER:k([32,0])});var e=typeof Uint8ClampedArray<"u",t=typeof BigUint64Array<"u",r=typeof BigInt64Array<"u",l=m.__TYPEDARRAY_POOL;l.UINT8C||(l.UINT8C=k([32,0])),l.BIGUINT64||(l.BIGUINT64=k([32,0])),l.BIGINT64||(l.BIGINT64=k([32,0])),l.BUFFER||(l.BUFFER=k([32,0]));var n=l.DATA,d=l.BUFFER;function u(A){if(A){var I=A.length||A.byteLength,P=v.log2(I);n[P].push(A)}}function o(A){A=v.nextPow2(A);var I=v.log2(A),P=n[I];return P.length>0?P.pop():new ArrayBuffer(A)}function h(A){return new Uint8Array(o(A),0,A)}function s(A){return new Uint16Array(o(2*A),0,A)}function a(A){return new Uint32Array(o(4*A),0,A)}function p(A){return new Int8Array(o(A),0,A)}function c(A){return new Int16Array(o(2*A),0,A)}function i(A){return new Int32Array(o(4*A),0,A)}function y(A){return new Float32Array(o(4*A),0,A)}function f(A){return new Float64Array(o(8*A),0,A)}function w(A){return e?new Uint8ClampedArray(o(A),0,A):h(A)}function b(A){return t?new BigUint64Array(o(8*A),0,A):null}function _(A){return r?new BigInt64Array(o(8*A),0,A):null}function T(A){return new DataView(o(A),0,A)}function L(A){A=v.nextPow2(A);var I=v.log2(A),P=d[I];return P.length>0?P.pop():new x(A)}X.free=function(A){if(x.isBuffer(A))d[v.log2(A.length)].push(A);else{if(Object.prototype.toString.call(A)!=="[object ArrayBuffer]"&&(A=A.buffer),!A)return;var I=A.length||A.byteLength,P=0|v.log2(I);n[P].push(A)}},X.freeUint8=X.freeUint16=X.freeUint32=X.freeBigUint64=X.freeInt8=X.freeInt16=X.freeInt32=X.freeBigInt64=X.freeFloat32=X.freeFloat=X.freeFloat64=X.freeDouble=X.freeUint8Clamped=X.freeDataView=function(A){u(A.buffer)},X.freeArrayBuffer=u,X.freeBuffer=function(A){d[v.log2(A.length)].push(A)},X.malloc=function(A,I){if(I===void 0||I==="arraybuffer")return o(A);switch(I){case"uint8":return h(A);case"uint16":return s(A);case"uint32":return a(A);case"int8":return p(A);case"int16":return c(A);case"int32":return i(A);case"float":case"float32":return y(A);case"double":case"float64":return f(A);case"uint8_clamped":return w(A);case"bigint64":return _(A);case"biguint64":return b(A);case"buffer":return L(A);case"data":case"dataview":return T(A);default:return null}return null},X.mallocArrayBuffer=o,X.mallocUint8=h,X.mallocUint16=s,X.mallocUint32=a,X.mallocInt8=p,X.mallocInt16=c,X.mallocInt32=i,X.mallocFloat32=X.mallocFloat=y,X.mallocFloat64=X.mallocDouble=f,X.mallocUint8Clamped=w,X.mallocBigUint64=b,X.mallocBigInt64=_,X.mallocDataView=T,X.mallocBuffer=L,X.clearCache=function(){for(var A=0;A<32;++A)l.UINT8[A].length=0,l.UINT16[A].length=0,l.UINT32[A].length=0,l.INT8[A].length=0,l.INT16[A].length=0,l.INT32[A].length=0,l.FLOAT[A].length=0,l.DOUBLE[A].length=0,l.BIGUINT64[A].length=0,l.BIGINT64[A].length=0,l.UINT8C[A].length=0,n[A].length=0,d[A].length=0}}).call(this)}).call(this,typeof qi<"u"?qi:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],329:[function(g,Q,X){var m=/[\'\"]/;Q.exports=function(v){return v?(m.test(v.charAt(0))&&(v=v.substr(1)),m.test(v.charAt(v.length-1))&&(v=v.substr(0,v.length-1)),v):""}},{}],330:[function(g,Q,X){Q.exports=function(m,v,k){Array.isArray(k)||(k=[].slice.call(arguments,2));for(var x=0,e=k.length;x<e;x++){var t=k[x];for(var r in t)if((v[r]===void 0||Array.isArray(v[r])||m[r]!==v[r])&&r in v){var l;if(t[r]===!0)l=v[r];else if(t[r]===!1||typeof t[r]=="function"&&(l=t[r](v[r],m,v))===void 0)continue;m[r]=l}}return m}},{}],331:[function(g,Q,X){(function(m){(function(){function v(k){try{if(!m.localStorage)return!1}catch{return!1}var x=m.localStorage[k];return x!=null&&String(x).toLowerCase()==="true"}Q.exports=function(k,x){if(v("noDeprecation"))return k;var e=!1;return function(){if(!e){if(v("throwDeprecation"))throw new Error(x);v("traceDeprecation")?console.trace(x):console.warn(x),e=!0}return k.apply(this,arguments)}}}).call(this)}).call(this,typeof qi<"u"?qi:typeof self<"u"?self:typeof window<"u"?window:{})},{}],332:[function(g,Q,X){var m=g("get-canvas-context");Q.exports=function(v){return m("webgl",v)}},{"get-canvas-context":194}],333:[function(g,Q,X){var m=g("../main"),v=g("object-assign"),k=m.instance();function x(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}x.prototype=new m.baseCalendar,v(x.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(u,o){if(typeof u=="string"){var h=u.match(t);return h?h[0]:""}var s=this._validateYear(u),a=u.month(),p=""+this.toChineseMonth(s,a);return o&&p.length<2&&(p="0"+p),this.isIntercalaryMonth(s,a)&&(p+="i"),p},monthNames:function(u){if(typeof u=="string"){var o=u.match(r);return o?o[0]:""}var h=this._validateYear(u),s=u.month(),a=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][this.toChineseMonth(h,s)-1];return this.isIntercalaryMonth(h,s)&&(a="\u95F0"+a),a},monthNamesShort:function(u){if(typeof u=="string"){var o=u.match(l);return o?o[0]:""}var h=this._validateYear(u),s=u.month(),a=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][this.toChineseMonth(h,s)-1];return this.isIntercalaryMonth(h,s)&&(a="\u95F0"+a),a},parseMonth:function(u,o){u=this._validateYear(u);var h,s=parseInt(o);if(isNaN(s))o[0]==="\u95F0"&&(h=!0,o=o.substring(1)),o[o.length-1]==="\u6708"&&(o=o.substring(0,o.length-1)),s=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(o);else{var a=o[o.length-1];h=a==="i"||a==="I"}return this.toMonthIndex(u,s,h)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(u,o){if(u.year&&(u=u.year()),typeof u!="number"||u<1888||u>2111)throw o.replace(/\{0\}/,this.local.name);return u},toMonthIndex:function(u,o,h){var s=this.intercalaryMonth(u);if(h&&o!==s||o<1||o>12)throw m.local.invalidMonth.replace(/\{0\}/,this.local.name);return s?!h&&o<=s?o-1:o:o-1},toChineseMonth:function(u,o){u.year&&(o=(u=u.year()).month());var h=this.intercalaryMonth(u);if(o<0||o>(h?12:11))throw m.local.invalidMonth.replace(/\{0\}/,this.local.name);return h?o<h?o+1:o:o+1},intercalaryMonth:function(u){return u=this._validateYear(u),n[u-n[0]]>>13},isIntercalaryMonth:function(u,o){u.year&&(o=(u=u.year()).month());var h=this.intercalaryMonth(u);return!!h&&h===o},leapYear:function(u){return this.intercalaryMonth(u)!==0},weekOfYear:function(u,o,h){var s,a=this._validateYear(u,m.local.invalidyear),p=d[a-d[0]],c=p>>9&4095,i=p>>5&15,y=31&p;(s=k.newDate(c,i,y)).add(4-(s.dayOfWeek()||7),"d");var f=this.toJD(u,o,h)-s.toJD();return 1+Math.floor(f/7)},monthsInYear:function(u){return this.leapYear(u)?13:12},daysInMonth:function(u,o){u.year&&(o=u.month(),u=u.year()),u=this._validateYear(u);var h=n[u-n[0]];if(o>(h>>13?12:11))throw m.local.invalidMonth.replace(/\{0\}/,this.local.name);return h&1<<12-o?30:29},weekDay:function(u,o,h){return(this.dayOfWeek(u,o,h)||7)<6},toJD:function(u,o,h){var s=this._validate(u,p,h,m.local.invalidDate);u=this._validateYear(s.year()),o=s.month(),h=s.day();var a=this.isIntercalaryMonth(u,o),p=this.toChineseMonth(u,o),c=function(i,y,f,w,b){var _,T,L;if(typeof i=="object")T=i,_=y||{};else{var A;if(!(typeof i=="number"&&i>=1888&&i<=2111))throw new Error("Lunar year outside range 1888-2111");if(!(typeof y=="number"&&y>=1&&y<=12))throw new Error("Lunar month outside range 1 - 12");if(!(typeof f=="number"&&f>=1&&f<=30))throw new Error("Lunar day outside range 1 - 30");typeof w=="object"?(A=!1,_=w):(A=!!w,_=b||{}),T={year:i,month:y,day:f,isIntercalary:A}}L=T.day-1;var I,P=n[T.year-n[0]],S=P>>13;I=S&&(T.month>S||T.isIntercalary)?T.month:T.month-1;for(var E=0;E<I;E++)L+=P&1<<12-E?30:29;var z=d[T.year-d[0]],D=new Date(z>>9&4095,(z>>5&15)-1,(31&z)+L);return _.year=D.getFullYear(),_.month=1+D.getMonth(),_.day=D.getDate(),_}(u,p,h,a);return k.toJD(c.year,c.month,c.day)},fromJD:function(u){var o=k.fromJD(u),h=function(a,p,c,i){var y,f;if(typeof a=="object")y=a,f=p||{};else{if(!(typeof a=="number"&&a>=1888&&a<=2111))throw new Error("Solar year outside range 1888-2111");if(!(typeof p=="number"&&p>=1&&p<=12))throw new Error("Solar month outside range 1 - 12");if(!(typeof c=="number"&&c>=1&&c<=31))throw new Error("Solar day outside range 1 - 31");y={year:a,month:p,day:c},f=i||{}}var w=d[y.year-d[0]],b=y.year<<9|y.month<<5|y.day;f.year=b>=w?y.year:y.year-1,w=d[f.year-d[0]];var _,T=new Date(w>>9&4095,(w>>5&15)-1,31&w),L=new Date(y.year,y.month-1,y.day);_=Math.round((L-T)/864e5);var A,I=n[f.year-n[0]];for(A=0;A<13;A++){var P=I&1<<12-A?30:29;if(_<P)break;_-=P}var S=I>>13;return!S||A<S?(f.isIntercalary=!1,f.month=1+A):A===S?(f.isIntercalary=!0,f.month=A):(f.isIntercalary=!1,f.month=A),f.day=1+_,f}(o.year(),o.month(),o.day()),s=this.toMonthIndex(h.year,h.month,h.isIntercalary);return this.newDate(h.year,s,h.day)},fromString:function(u){var o=u.match(e),h=this._validateYear(+o[1]),s=+o[2],a=!!o[3],p=this.toMonthIndex(h,s,a),c=+o[4];return this.newDate(h,p,c)},add:function(u,o,h){var s=u.year(),a=u.month(),p=this.isIntercalaryMonth(s,a),c=this.toChineseMonth(s,a),i=Object.getPrototypeOf(x.prototype).add.call(this,u,o,h);if(h==="y"){var y=i.year(),f=i.month(),w=this.isIntercalaryMonth(y,c),b=p&&w?this.toMonthIndex(y,c,!0):this.toMonthIndex(y,c,!1);b!==f&&i.month(b)}return i}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,t=/^\d?\d[iI]?/m,r=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?\u6708/m,l=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?/m;m.calendars.chinese=x;var n=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],d=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":347,"object-assign":247}],334:[function(g,Q,X){var m=g("../main"),v=g("object-assign");function k(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}k.prototype=new m.baseCalendar,v(k.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var e=this._validate(x,this.minMonth,this.minDay,m.local.invalidYear);return(x=e.year()+(e.year()<0?1:0))%4==3||x%4==-1},monthsInYear:function(x){return this._validate(x,this.minMonth,this.minDay,m.local.invalidYear||m.regionalOptions[""].invalidYear),13},weekOfYear:function(x,e,t){var r=this.newDate(x,e,t);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(x,e){var t=this._validate(x,e,this.minDay,m.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(t.month()===13&&this.leapYear(t.year())?1:0)},weekDay:function(x,e,t){return(this.dayOfWeek(x,e,t)||7)<6},toJD:function(x,e,t){var r=this._validate(x,e,t,m.local.invalidDate);return(x=r.year())<0&&x++,r.day()+30*(r.month()-1)+365*(x-1)+Math.floor(x/4)+this.jdEpoch-1},fromJD:function(x){var e=Math.floor(x)+.5-this.jdEpoch,t=Math.floor((e-Math.floor((e+366)/1461))/365)+1;t<=0&&t--,e=Math.floor(x)+.5-this.newDate(t,1,1).toJD();var r=Math.floor(e/30)+1,l=e-30*(r-1)+1;return this.newDate(t,r,l)}}),m.calendars.coptic=k},{"../main":347,"object-assign":247}],335:[function(g,Q,X){var m=g("../main"),v=g("object-assign");function k(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}k.prototype=new m.baseCalendar,v(k.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,m.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,m.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,m.local.invalidYear),400},weekOfYear:function(e,t,r){var l=this.newDate(e,t,r);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/8)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,m.local.invalidMonth);return this.daysPerMonth[r.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,t,r){return(this._validate(e,t,r,m.local.invalidDate).day()+1)%8},weekDay:function(e,t,r){var l=this.dayOfWeek(e,t,r);return l>=2&&l<=6},extraInfo:function(e,t,r){var l=this._validate(e,t,r,m.local.invalidDate);return{century:x[Math.floor((l.year()-1)/100)+1]||""}},toJD:function(e,t,r){var l=this._validate(e,t,r,m.local.invalidDate);return e=l.year()+(l.year()<0?1:0),t=l.month(),(r=l.day())+(t>1?16:0)+(t>2?32*(t-2):0)+400*(e-1)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var t=Math.floor(e/400)+1;e-=400*(t-1),e+=e>15?16:0;var r=Math.floor(e/32)+1,l=e-32*(r-1)+1;return this.newDate(t<=0?t-1:t,r,l)}});var x={20:"Fruitbat",21:"Anchovy"};m.calendars.discworld=k},{"../main":347,"object-assign":247}],336:[function(g,Q,X){var m=g("../main"),v=g("object-assign");function k(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}k.prototype=new m.baseCalendar,v(k.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var e=this._validate(x,this.minMonth,this.minDay,m.local.invalidYear);return(x=e.year()+(e.year()<0?1:0))%4==3||x%4==-1},monthsInYear:function(x){return this._validate(x,this.minMonth,this.minDay,m.local.invalidYear||m.regionalOptions[""].invalidYear),13},weekOfYear:function(x,e,t){var r=this.newDate(x,e,t);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(x,e){var t=this._validate(x,e,this.minDay,m.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(t.month()===13&&this.leapYear(t.year())?1:0)},weekDay:function(x,e,t){return(this.dayOfWeek(x,e,t)||7)<6},toJD:function(x,e,t){var r=this._validate(x,e,t,m.local.invalidDate);return(x=r.year())<0&&x++,r.day()+30*(r.month()-1)+365*(x-1)+Math.floor(x/4)+this.jdEpoch-1},fromJD:function(x){var e=Math.floor(x)+.5-this.jdEpoch,t=Math.floor((e-Math.floor((e+366)/1461))/365)+1;t<=0&&t--,e=Math.floor(x)+.5-this.newDate(t,1,1).toJD();var r=Math.floor(e/30)+1,l=e-30*(r-1)+1;return this.newDate(t,r,l)}}),m.calendars.ethiopian=k},{"../main":347,"object-assign":247}],337:[function(g,Q,X){var m=g("../main"),v=g("object-assign");function k(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function x(e,t){return e-t*Math.floor(e/t)}k.prototype=new m.baseCalendar,v(k.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return this._leapYear(t.year())},_leapYear:function(e){return x(7*(e=e<0?e+1:e)+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,m.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,t,r){var l=this.newDate(e,t,r);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInYear:function(e){return e=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear).year(),this.toJD(e===-1?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,m.local.invalidMonth),t===12&&this.leapYear(e)||t===8&&x(this.daysInYear(e),10)===5?30:t===9&&x(this.daysInYear(e),10)===3?29:this.daysPerMonth[t-1]},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==6},extraInfo:function(e,t,r){var l=this._validate(e,t,r,m.local.invalidDate);return{yearType:(this.leapYear(l)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(l)%10-3]}},toJD:function(e,t,r){var l=this._validate(e,t,r,m.local.invalidDate);e=l.year(),t=l.month(),r=l.day();var n=e<=0?e+1:e,d=this.jdEpoch+this._delay1(n)+this._delay2(n)+r+1;if(t<7){for(var u=7;u<=this.monthsInYear(e);u++)d+=this.daysInMonth(e,u);for(u=1;u<t;u++)d+=this.daysInMonth(e,u)}else for(u=7;u<t;u++)d+=this.daysInMonth(e,u);return d},_delay1:function(e){var t=Math.floor((235*e-234)/19),r=12084+13753*t,l=29*t+Math.floor(r/25920);return x(3*(l+1),7)<3&&l++,l},_delay2:function(e){var t=this._delay1(e-1),r=this._delay1(e);return this._delay1(e+1)-r==356?2:r-t==382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var t=Math.floor(98496*(e-this.jdEpoch)/35975351)-1;e>=this.toJD(t===-1?1:t+1,7,1);)t++;for(var r=e<this.toJD(t,1,1)?7:1;e>this.toJD(t,r,this.daysInMonth(t,r));)r++;var l=e-this.toJD(t,r,1)+1;return this.newDate(t,r,l)}}),m.calendars.hebrew=k},{"../main":347,"object-assign":247}],338:[function(g,Q,X){var m=g("../main"),v=g("object-assign");function k(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}k.prototype=new m.baseCalendar,v(k.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(x){return(11*this._validate(x,this.minMonth,this.minDay,m.local.invalidYear).year()+14)%30<11},weekOfYear:function(x,e,t){var r=this.newDate(x,e,t);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(x){return this.leapYear(x)?355:354},daysInMonth:function(x,e){var t=this._validate(x,e,this.minDay,m.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(t.month()===12&&this.leapYear(t.year())?1:0)},weekDay:function(x,e,t){return this.dayOfWeek(x,e,t)!==5},toJD:function(x,e,t){var r=this._validate(x,e,t,m.local.invalidDate);return x=r.year(),e=r.month(),x=x<=0?x+1:x,(t=r.day())+Math.ceil(29.5*(e-1))+354*(x-1)+Math.floor((3+11*x)/30)+this.jdEpoch-1},fromJD:function(x){x=Math.floor(x)+.5;var e=Math.floor((30*(x-this.jdEpoch)+10646)/10631);e=e<=0?e-1:e;var t=Math.min(12,Math.ceil((x-29-this.toJD(e,1,1))/29.5)+1),r=x-this.toJD(e,t,1)+1;return this.newDate(e,t,r)}}),m.calendars.islamic=k},{"../main":347,"object-assign":247}],339:[function(g,Q,X){var m=g("../main"),v=g("object-assign");function k(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}k.prototype=new m.baseCalendar,v(k.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var e=this._validate(x,this.minMonth,this.minDay,m.local.invalidYear);return(x=e.year()<0?e.year()+1:e.year())%4==0},weekOfYear:function(x,e,t){var r=this.newDate(x,e,t);return r.add(4-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(x,e){var t=this._validate(x,e,this.minDay,m.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(t.month()===2&&this.leapYear(t.year())?1:0)},weekDay:function(x,e,t){return(this.dayOfWeek(x,e,t)||7)<6},toJD:function(x,e,t){var r=this._validate(x,e,t,m.local.invalidDate);return x=r.year(),e=r.month(),t=r.day(),x<0&&x++,e<=2&&(x--,e+=12),Math.floor(365.25*(x+4716))+Math.floor(30.6001*(e+1))+t-1524.5},fromJD:function(x){var e=Math.floor(x+.5)+1524,t=Math.floor((e-122.1)/365.25),r=Math.floor(365.25*t),l=Math.floor((e-r)/30.6001),n=l-Math.floor(l<14?1:13),d=t-Math.floor(n>2?4716:4715),u=e-r-Math.floor(30.6001*l);return d<=0&&d--,this.newDate(d,n,u)}}),m.calendars.julian=k},{"../main":347,"object-assign":247}],340:[function(g,Q,X){var m=g("../main"),v=g("object-assign");function k(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}function x(t,r){return t-r*Math.floor(t/r)}function e(t,r){return x(t-1,r)+1}k.prototype=new m.baseCalendar,v(k.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(t){return this._validate(t,this.minMonth,this.minDay,m.local.invalidYear),!1},formatYear:function(t){t=this._validate(t,this.minMonth,this.minDay,m.local.invalidYear).year();var r=Math.floor(t/400);return t%=400,t+=t<0?400:0,r+"."+Math.floor(t/20)+"."+t%20},forYear:function(t){if((t=t.split(".")).length<3)throw"Invalid Mayan year";for(var r=0,l=0;l<t.length;l++){var n=parseInt(t[l],10);if(Math.abs(n)>19||l>0&&n<0)throw"Invalid Mayan year";r=20*r+n}return r},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,m.local.invalidYear),18},weekOfYear:function(t,r,l){return this._validate(t,r,l,m.local.invalidDate),0},daysInYear:function(t){return this._validate(t,this.minMonth,this.minDay,m.local.invalidYear),360},daysInMonth:function(t,r){return this._validate(t,r,this.minDay,m.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(t,r,l){return this._validate(t,r,l,m.local.invalidDate).day()},weekDay:function(t,r,l){return this._validate(t,r,l,m.local.invalidDate),!0},extraInfo:function(t,r,l){var n=this._validate(t,r,l,m.local.invalidDate).toJD(),d=this._toHaab(n),u=this._toTzolkin(n);return{haabMonthName:this.local.haabMonths[d[0]-1],haabMonth:d[0],haabDay:d[1],tzolkinDayName:this.local.tzolkinMonths[u[0]-1],tzolkinDay:u[0],tzolkinTrecena:u[1]}},_toHaab:function(t){var r=x((t-=this.jdEpoch)+8+340,365);return[Math.floor(r/20)+1,x(r,20)]},_toTzolkin:function(t){return[e((t-=this.jdEpoch)+20,20),e(t+4,13)]},toJD:function(t,r,l){var n=this._validate(t,r,l,m.local.invalidDate);return n.day()+20*n.month()+360*n.year()+this.jdEpoch},fromJD:function(t){t=Math.floor(t)+.5-this.jdEpoch;var r=Math.floor(t/360);t%=360,t+=t<0?360:0;var l=Math.floor(t/20),n=t%20;return this.newDate(r,l,n)}}),m.calendars.mayan=k},{"../main":347,"object-assign":247}],341:[function(g,Q,X){var m=g("../main"),v=g("object-assign");function k(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}k.prototype=new m.baseCalendar;var x=m.instance("gregorian");v(k.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear||m.regionalOptions[""].invalidYear);return x.leapYear(t.year()+(t.year()<1?1:0)+1469)},weekOfYear:function(e,t,r){var l=this.newDate(e,t,r);return l.add(1-(l.dayOfWeek()||7),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,m.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var l=this._validate(e,t,r,m.local.invalidMonth);(e=l.year())<0&&e++;for(var n=l.day(),d=1;d<l.month();d++)n+=this.daysPerMonth[d-1];return n+x.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var t=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(t+1,1,1);)t++;for(var r=e-Math.floor(this.toJD(t,1,1)+.5)+1,l=1;r>this.daysInMonth(t,l);)r-=this.daysInMonth(t,l),l++;return this.newDate(t,l,r)}}),m.calendars.nanakshahi=k},{"../main":347,"object-assign":247}],342:[function(g,Q,X){var m=g("../main"),v=g("object-assign");function k(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}k.prototype=new m.baseCalendar,v(k.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(x){return this.daysInYear(x)!==this.daysPerYear},weekOfYear:function(x,e,t){var r=this.newDate(x,e,t);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(x){if(x=this._validate(x,this.minMonth,this.minDay,m.local.invalidYear).year(),this.NEPALI_CALENDAR_DATA[x]===void 0)return this.daysPerYear;for(var e=0,t=this.minMonth;t<=12;t++)e+=this.NEPALI_CALENDAR_DATA[x][t];return e},daysInMonth:function(x,e){return x.year&&(e=x.month(),x=x.year()),this._validate(x,e,this.minDay,m.local.invalidMonth),this.NEPALI_CALENDAR_DATA[x]===void 0?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[x][e]},weekDay:function(x,e,t){return this.dayOfWeek(x,e,t)!==6},toJD:function(x,e,t){var r=this._validate(x,e,t,m.local.invalidDate);x=r.year(),e=r.month(),t=r.day();var l=m.instance(),n=0,d=e,u=x;this._createMissingCalendarData(x);var o=x-(d>9||d===9&&t>=this.NEPALI_CALENDAR_DATA[u][0]?56:57);for(e!==9&&(n=t,d--);d!==9;)d<=0&&(d=12,u--),n+=this.NEPALI_CALENDAR_DATA[u][d],d--;return e===9?(n+=t-this.NEPALI_CALENDAR_DATA[u][0])<0&&(n+=l.daysInYear(o)):n+=this.NEPALI_CALENDAR_DATA[u][9]-this.NEPALI_CALENDAR_DATA[u][0],l.newDate(o,1,1).add(n,"d").toJD()},fromJD:function(x){var e=m.instance().fromJD(x),t=e.year(),r=e.dayOfYear(),l=t+56;this._createMissingCalendarData(l);for(var n=9,d=this.NEPALI_CALENDAR_DATA[l][0],u=this.NEPALI_CALENDAR_DATA[l][n]-d+1;r>u;)++n>12&&(n=1,l++),u+=this.NEPALI_CALENDAR_DATA[l][n];var o=this.NEPALI_CALENDAR_DATA[l][n]-(u-r);return this.newDate(l,n,o)},_createMissingCalendarData:function(x){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var t=x-1;t<x+2;t++)this.NEPALI_CALENDAR_DATA[t]===void 0&&(this.NEPALI_CALENDAR_DATA[t]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),m.calendars.nepali=k},{"../main":347,"object-assign":247}],343:[function(g,Q,X){var m=g("../main"),v=g("object-assign");function k(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function x(e,t){return e-t*Math.floor(e/t)}k.prototype=new m.baseCalendar,v(k.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return 682*((t.year()-(t.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(e,t,r){var l=this.newDate(e,t,r);return l.add(-(l.dayOfWeek()+1)%7,"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,m.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var l=this._validate(e,t,r,m.local.invalidDate);e=l.year(),t=l.month(),r=l.day();var n=e-(e>=0?474:473),d=474+x(n,2820);return r+(t<=7?31*(t-1):30*(t-1)+6)+Math.floor((682*d-110)/2816)+365*(d-1)+1029983*Math.floor(n/2820)+this.jdEpoch-1},fromJD:function(e){var t=(e=Math.floor(e)+.5)-this.toJD(475,1,1),r=Math.floor(t/1029983),l=x(t,1029983),n=2820;if(l!==1029982){var d=Math.floor(l/366),u=x(l,366);n=Math.floor((2134*d+2816*u+2815)/1028522)+d+1}var o=n+2820*r+474;o=o<=0?o-1:o;var h=e-this.toJD(o,1,1)+1,s=h<=186?Math.ceil(h/31):Math.ceil((h-6)/30),a=e-this.toJD(o,s,1)+1;return this.newDate(o,s,a)}}),m.calendars.persian=k,m.calendars.jalali=k},{"../main":347,"object-assign":247}],344:[function(g,Q,X){var m=g("../main"),v=g("object-assign"),k=m.instance();function x(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}x.prototype=new m.baseCalendar,v(x.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return e=this._t2gYear(t.year()),k.leapYear(e)},weekOfYear:function(e,t,r){var l=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return e=this._t2gYear(l.year()),k.weekOfYear(e,l.month(),l.day())},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,m.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var l=this._validate(e,t,r,m.local.invalidDate);return e=this._t2gYear(l.year()),k.toJD(e,l.month(),l.day())},fromJD:function(e){var t=k.fromJD(e),r=this._g2tYear(t.year());return this.newDate(r,t.month(),t.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),m.calendars.taiwan=x},{"../main":347,"object-assign":247}],345:[function(g,Q,X){var m=g("../main"),v=g("object-assign"),k=m.instance();function x(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}x.prototype=new m.baseCalendar,v(x.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return e=this._t2gYear(t.year()),k.leapYear(e)},weekOfYear:function(e,t,r){var l=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return e=this._t2gYear(l.year()),k.weekOfYear(e,l.month(),l.day())},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,m.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var l=this._validate(e,t,r,m.local.invalidDate);return e=this._t2gYear(l.year()),k.toJD(e,l.month(),l.day())},fromJD:function(e){var t=k.fromJD(e),r=this._g2tYear(t.year());return this.newDate(r,t.month(),t.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),m.calendars.thai=x},{"../main":347,"object-assign":247}],346:[function(g,Q,X){var m=g("../main"),v=g("object-assign");function k(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}k.prototype=new m.baseCalendar,v(k.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return this.daysInYear(t.year())===355},weekOfYear:function(e,t,r){var l=this.newDate(e,t,r);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var t=0,r=1;r<=12;r++)t+=this.daysInMonth(e,r);return t},daysInMonth:function(e,t){for(var r=this._validate(e,t,this.minDay,m.local.invalidMonth).toJD()-24e5+.5,l=0,n=0;n<x.length;n++){if(x[n]>r)return x[l]-x[l-1];l++}return 30},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var l=this._validate(e,t,r,m.local.invalidDate),n=12*(l.year()-1)+l.month()-15292;return l.day()+x[n-1]-1+24e5-.5},fromJD:function(e){for(var t=e-24e5+.5,r=0,l=0;l<x.length&&!(x[l]>t);l++)r++;var n=r+15292,d=Math.floor((n-1)/12),u=d+1,o=n-12*d,h=t-x[r-1]+1;return this.newDate(u,o,h)},isValid:function(e,t,r){var l=m.baseCalendar.prototype.isValid.apply(this,arguments);return l&&(l=(e=e.year!=null?e.year:e)>=1276&&e<=1500),l},_validate:function(e,t,r,l){var n=m.baseCalendar.prototype._validate.apply(this,arguments);if(n.year<1276||n.year>1500)throw l.replace(/\{0\}/,this.local.name);return n}}),m.calendars.ummalqura=k;var x=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":347,"object-assign":247}],347:[function(g,Q,X){var m=g("object-assign");function v(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function k(l,n,d,u){if(this._calendar=l,this._year=n,this._month=d,this._day=u,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(r.local.invalidDate||r.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function x(l,n){return"000000".substring(0,n-(l=""+l).length)+l}function e(){this.shortYearCutoff="+10"}function t(l){this.local=this.regionalOptions[l]||this.regionalOptions[""]}m(v.prototype,{instance:function(l,n){l=(l||"gregorian").toLowerCase(),n=n||"";var d=this._localCals[l+"-"+n];if(!d&&this.calendars[l]&&(d=new this.calendars[l](n),this._localCals[l+"-"+n]=d),!d)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,l);return d},newDate:function(l,n,d,u,o){return(u=(l!=null&&l.year?l.calendar():typeof u=="string"?this.instance(u,o):u)||this.instance()).newDate(l,n,d)},substituteDigits:function(l){return function(n){return(n+"").replace(/[0-9]/g,function(d){return l[d]})}},substituteChineseDigits:function(l,n){return function(d){for(var u="",o=0;d>0;){var h=d%10;u=(h===0?"":l[h]+n[o])+u,o++,d=Math.floor(d/10)}return u.indexOf(l[1]+n[1])===0&&(u=u.substr(1)),u||l[0]}}}),m(k.prototype,{newDate:function(l,n,d){return this._calendar.newDate(l==null?this:l,n,d)},year:function(l){return arguments.length===0?this._year:this.set(l,"y")},month:function(l){return arguments.length===0?this._month:this.set(l,"m")},day:function(l){return arguments.length===0?this._day:this.set(l,"d")},date:function(l,n,d){if(!this._calendar.isValid(l,n,d))throw(r.local.invalidDate||r.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=l,this._month=n,this._day=d,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(l,n){return this._calendar.add(this,l,n)},set:function(l,n){return this._calendar.set(this,l,n)},compareTo:function(l){if(this._calendar.name!==l._calendar.name)throw(r.local.differentCalendars||r.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,l._calendar.local.name);var n=this._year!==l._year?this._year-l._year:this._month!==l._month?this.monthOfYear()-l.monthOfYear():this._day-l._day;return n===0?0:n<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(l){return this._calendar.fromJD(l)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(l){return this._calendar.fromJSDate(l)},toString:function(){return(this.year()<0?"-":"")+x(Math.abs(this.year()),4)+"-"+x(this.month(),2)+"-"+x(this.day(),2)}}),m(e.prototype,{_validateLevel:0,newDate:function(l,n,d){return l==null?this.today():(l.year&&(this._validate(l,n,d,r.local.invalidDate||r.regionalOptions[""].invalidDate),d=l.day(),n=l.month(),l=l.year()),new k(this,l,n,d))},today:function(){return this.fromJSDate(new Date)},epoch:function(l){return this._validate(l,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(l){var n=this._validate(l,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear);return(n.year()<0?"-":"")+x(Math.abs(n.year()),4)},monthsInYear:function(l){return this._validate(l,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear),12},monthOfYear:function(l,n){var d=this._validate(l,n,this.minDay,r.local.invalidMonth||r.regionalOptions[""].invalidMonth);return(d.month()+this.monthsInYear(d)-this.firstMonth)%this.monthsInYear(d)+this.minMonth},fromMonthOfYear:function(l,n){var d=(n+this.firstMonth-2*this.minMonth)%this.monthsInYear(l)+this.minMonth;return this._validate(l,d,this.minDay,r.local.invalidMonth||r.regionalOptions[""].invalidMonth),d},daysInYear:function(l){var n=this._validate(l,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear);return this.leapYear(n)?366:365},dayOfYear:function(l,n,d){var u=this._validate(l,n,d,r.local.invalidDate||r.regionalOptions[""].invalidDate);return u.toJD()-this.newDate(u.year(),this.fromMonthOfYear(u.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(l,n,d){var u=this._validate(l,n,d,r.local.invalidDate||r.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(u))+2)%this.daysInWeek()},extraInfo:function(l,n,d){return this._validate(l,n,d,r.local.invalidDate||r.regionalOptions[""].invalidDate),{}},add:function(l,n,d){return this._validate(l,this.minMonth,this.minDay,r.local.invalidDate||r.regionalOptions[""].invalidDate),this._correctAdd(l,this._add(l,n,d),n,d)},_add:function(l,n,d){if(this._validateLevel++,d==="d"||d==="w"){var u=l.toJD()+n*(d==="w"?this.daysInWeek():1),o=l.calendar().fromJD(u);return this._validateLevel--,[o.year(),o.month(),o.day()]}try{var h=l.year()+(d==="y"?n:0),s=l.monthOfYear()+(d==="m"?n:0);o=l.day(),d==="y"?(l.month()!==this.fromMonthOfYear(h,s)&&(s=this.newDate(h,l.month(),this.minDay).monthOfYear()),s=Math.min(s,this.monthsInYear(h)),o=Math.min(o,this.daysInMonth(h,this.fromMonthOfYear(h,s)))):d==="m"&&(function(p){for(;s<p.minMonth;)h--,s+=p.monthsInYear(h);for(var c=p.monthsInYear(h);s>c-1+p.minMonth;)h++,s-=c,c=p.monthsInYear(h)}(this),o=Math.min(o,this.daysInMonth(h,this.fromMonthOfYear(h,s))));var a=[h,this.fromMonthOfYear(h,s),o];return this._validateLevel--,a}catch(p){throw this._validateLevel--,p}},_correctAdd:function(l,n,d,u){if(!(this.hasYearZero||u!=="y"&&u!=="m"||n[0]!==0&&l.year()>0==n[0]>0)){var o={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[u],h=d<0?-1:1;n=this._add(l,d*o[0]+h*o[1],o[2])}return l.date(n[0],n[1],n[2])},set:function(l,n,d){this._validate(l,this.minMonth,this.minDay,r.local.invalidDate||r.regionalOptions[""].invalidDate);var u=d==="y"?n:l.year(),o=d==="m"?n:l.month(),h=d==="d"?n:l.day();return d!=="y"&&d!=="m"||(h=Math.min(h,this.daysInMonth(u,o))),l.date(u,o,h)},isValid:function(l,n,d){this._validateLevel++;var u=this.hasYearZero||l!==0;if(u){var o=this.newDate(l,n,this.minDay);u=n>=this.minMonth&&n-this.minMonth<this.monthsInYear(o)&&d>=this.minDay&&d-this.minDay<this.daysInMonth(o)}return this._validateLevel--,u},toJSDate:function(l,n,d){var u=this._validate(l,n,d,r.local.invalidDate||r.regionalOptions[""].invalidDate);return r.instance().fromJD(this.toJD(u)).toJSDate()},fromJSDate:function(l){return this.fromJD(r.instance().fromJSDate(l).toJD())},_validate:function(l,n,d,u){if(l.year){if(this._validateLevel===0&&this.name!==l.calendar().name)throw(r.local.differentCalendars||r.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,l.calendar().local.name);return l}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(l,n,d))throw u.replace(/\{0\}/,this.local.name);var o=this.newDate(l,n,d);return this._validateLevel--,o}catch(h){throw this._validateLevel--,h}}}),t.prototype=new e,m(t.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(l){var n=this._validate(l,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear);return(l=n.year()+(n.year()<0?1:0))%4==0&&(l%100!=0||l%400==0)},weekOfYear:function(l,n,d){var u=this.newDate(l,n,d);return u.add(4-(u.dayOfWeek()||7),"d"),Math.floor((u.dayOfYear()-1)/7)+1},daysInMonth:function(l,n){var d=this._validate(l,n,this.minDay,r.local.invalidMonth||r.regionalOptions[""].invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===2&&this.leapYear(d.year())?1:0)},weekDay:function(l,n,d){return(this.dayOfWeek(l,n,d)||7)<6},toJD:function(l,n,d){var u=this._validate(l,n,d,r.local.invalidDate||r.regionalOptions[""].invalidDate);l=u.year(),n=u.month(),d=u.day(),l<0&&l++,n<3&&(n+=12,l--);var o=Math.floor(l/100),h=2-o+Math.floor(o/4);return Math.floor(365.25*(l+4716))+Math.floor(30.6001*(n+1))+d+h-1524.5},fromJD:function(l){var n=Math.floor(l+.5),d=Math.floor((n-186721625e-2)/36524.25),u=(d=n+1+d-Math.floor(d/4))+1524,o=Math.floor((u-122.1)/365.25),h=Math.floor(365.25*o),s=Math.floor((u-h)/30.6001),a=u-h-Math.floor(30.6001*s),p=s-(s>13.5?13:1),c=o-(p>2.5?4716:4715);return c<=0&&c--,this.newDate(c,p,a)},toJSDate:function(l,n,d){var u=this._validate(l,n,d,r.local.invalidDate||r.regionalOptions[""].invalidDate),o=new Date(u.year(),u.month()-1,u.day());return o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0),o.setHours(o.getHours()>12?o.getHours()+2:0),o},fromJSDate:function(l){return this.newDate(l.getFullYear(),l.getMonth()+1,l.getDate())}});var r=Q.exports=new v;r.cdate=k,r.baseCalendar=e,r.calendars.gregorian=t},{"object-assign":247}],348:[function(g,Q,X){var m=g("object-assign"),v=g("./main");m(v.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),v.local=v.regionalOptions[""],m(v.cdate.prototype,{formatDate:function(k,x){return typeof k!="string"&&(x=k,k=""),this._calendar.formatDate(k||"",this,x)}}),m(v.baseCalendar.prototype,{UNIX_EPOCH:v.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:v.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(k,x,e){if(typeof k!="string"&&(e=x,x=k,k=""),!x)return"";if(x.calendar()!==this)throw v.local.invalidFormat||v.regionalOptions[""].invalidFormat;k=k||this.local.dateFormat;for(var t,r,l,n,d=(e=e||{}).dayNamesShort||this.local.dayNamesShort,u=e.dayNames||this.local.dayNames,o=e.monthNumbers||this.local.monthNumbers,h=e.monthNamesShort||this.local.monthNamesShort,s=e.monthNames||this.local.monthNames,a=(e.calculateWeek||this.local.calculateWeek,function(L,A){for(var I=1;T+I<k.length&&k.charAt(T+I)===L;)I++;return T+=I-1,Math.floor(I/(A||1))>1}),p=function(L,A,I,P){var S=""+A;if(a(L,P))for(;S.length<I;)S="0"+S;return S},c=this,i=function(L){return typeof o=="function"?o.call(c,L,a("m")):w(p("m",L.month(),2))},y=function(L,A){return A?typeof s=="function"?s.call(c,L):s[L.month()-c.minMonth]:typeof h=="function"?h.call(c,L):h[L.month()-c.minMonth]},f=this.local.digits,w=function(L){return e.localNumbers&&f?f(L):L},b="",_=!1,T=0;T<k.length;T++)if(_)k.charAt(T)!=="'"||a("'")?b+=k.charAt(T):_=!1;else switch(k.charAt(T)){case"d":b+=w(p("d",x.day(),2));break;case"D":b+=(t="D",r=x.dayOfWeek(),l=d,n=u,a(t)?n[r]:l[r]);break;case"o":b+=p("o",x.dayOfYear(),3);break;case"w":b+=p("w",x.weekOfYear(),2);break;case"m":b+=i(x);break;case"M":b+=y(x,a("M"));break;case"y":b+=a("y",2)?x.year():(x.year()%100<10?"0":"")+x.year()%100;break;case"Y":a("Y",2),b+=x.formatYear();break;case"J":b+=x.toJD();break;case"@":b+=(x.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":b+=(x.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":a("'")?b+="'":_=!0;break;default:b+=k.charAt(T)}return b},parseDate:function(k,x,e){if(x==null)throw v.local.invalidArguments||v.regionalOptions[""].invalidArguments;if((x=typeof x=="object"?x.toString():x+"")==="")return null;k=k||this.local.dateFormat;var t=(e=e||{}).shortYearCutoff||this.shortYearCutoff;t=typeof t!="string"?t:this.today().year()%100+parseInt(t,10);for(var r=e.dayNamesShort||this.local.dayNamesShort,l=e.dayNames||this.local.dayNames,n=e.parseMonth||this.local.parseMonth,d=e.monthNumbers||this.local.monthNumbers,u=e.monthNamesShort||this.local.monthNamesShort,o=e.monthNames||this.local.monthNames,h=-1,s=-1,a=-1,p=-1,c=-1,i=!1,y=!1,f=function(z,D){for(var U=1;P+U<k.length&&k.charAt(P+U)===z;)U++;return P+=U-1,Math.floor(U/(D||1))>1},w=function(z,D){var U=f(z,D),H=[2,3,U?4:2,U?4:2,10,11,20]["oyYJ@!".indexOf(z)+1],Y=new RegExp("^-?\\d{1,"+H+"}"),J=x.substring(I).match(Y);if(!J)throw(v.local.missingNumberAt||v.regionalOptions[""].missingNumberAt).replace(/\{0\}/,I);return I+=J[0].length,parseInt(J[0],10)},b=this,_=function(){if(typeof d=="function"){f("m");var z=d.call(b,x.substring(I));return I+=z.length,z}return w("m")},T=function(z,D,U,H){for(var Y=f(z,H)?U:D,J=0;J<Y.length;J++)if(x.substr(I,Y[J].length).toLowerCase()===Y[J].toLowerCase())return I+=Y[J].length,J+b.minMonth;throw(v.local.unknownNameAt||v.regionalOptions[""].unknownNameAt).replace(/\{0\}/,I)},L=function(){if(typeof o=="function"){var z=f("M")?o.call(b,x.substring(I)):u.call(b,x.substring(I));return I+=z.length,z}return T("M",u,o)},A=function(){if(x.charAt(I)!==k.charAt(P))throw(v.local.unexpectedLiteralAt||v.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,I);I++},I=0,P=0;P<k.length;P++)if(y)k.charAt(P)!=="'"||f("'")?A():y=!1;else switch(k.charAt(P)){case"d":p=w("d");break;case"D":T("D",r,l);break;case"o":c=w("o");break;case"w":w("w");break;case"m":a=_();break;case"M":a=L();break;case"y":var S=P;i=!f("y",2),P=S,s=w("y",2);break;case"Y":s=w("Y",2);break;case"J":h=w("J")+.5,x.charAt(I)==="."&&(I++,w("J"));break;case"@":h=w("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":h=w("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":I=x.length;break;case"'":f("'")?A():y=!0;break;default:A()}if(I<x.length)throw v.local.unexpectedText||v.regionalOptions[""].unexpectedText;if(s===-1?s=this.today().year():s<100&&i&&(s+=t===-1?1900:this.today().year()-this.today().year()%100-(s<=t?0:100)),typeof a=="string"&&(a=n.call(this,s,a)),c>-1){a=1,p=c;for(var E=this.daysInMonth(s,a);p>E;E=this.daysInMonth(s,a))a++,p-=E}return h>-1?this.fromJD(h):this.newDate(s,a,p)},determineDate:function(k,x,e,t,r){e&&typeof e!="object"&&(r=t,t=e,e=null),typeof t!="string"&&(r=t,t="");var l=this;return x=x?x.newDate():null,k=k==null?x:typeof k=="string"?function(n){try{return l.parseDate(t,n,r)}catch{}for(var d=((n=n.toLowerCase()).match(/^c/)&&e?e.newDate():null)||l.today(),u=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,o=u.exec(n);o;)d.add(parseInt(o[1],10),o[2]||"d"),o=u.exec(n);return d}(k):typeof k=="number"?isNaN(k)||k===1/0||k===-1/0?x:l.today().add(k,"d"):l.newDate(k)}})},{"./main":347,"object-assign":247}],349:[function(g,Q,X){Q.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],350:[function(g,Q,X){var m=g("./arrow_paths"),v=g("../../plots/font_attributes"),k=g("../../plots/cartesian/constants"),x=g("../../plot_api/plot_template").templatedArray;g("../../constants/axis_placeable_objects"),Q.exports=x("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:v({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:m.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:m.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",k.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",k.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",k.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",k.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:v({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":484,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573,"../../plots/font_attributes":594,"./arrow_paths":349}],351:[function(g,Q,X){var m=g("../../lib"),v=g("../../plots/cartesian/axes"),k=g("./draw").draw;function x(t){var r=t._fullLayout;m.filterVisible(r.annotations).forEach(function(l){var n=v.getFromId(t,l.xref),d=v.getFromId(t,l.yref),u=v.getRefType(l.xref),o=v.getRefType(l.yref);l._extremes={},u==="range"&&e(l,n),o==="range"&&e(l,d)})}function e(t,r){var l,n=r._id,d=n.charAt(0),u=t[d],o=t["a"+d],h=t[d+"ref"],s=t["a"+d+"ref"],a=t["_"+d+"padplus"],p=t["_"+d+"padminus"],c={x:1,y:-1}[d]*t[d+"shift"],i=3*t.arrowsize*t.arrowwidth||0,y=i+c,f=i-c,w=3*t.startarrowsize*t.arrowwidth||0,b=w+c,_=w-c;if(s===h){var T=v.findExtremes(r,[r.r2c(u)],{ppadplus:y,ppadminus:f}),L=v.findExtremes(r,[r.r2c(o)],{ppadplus:Math.max(a,b),ppadminus:Math.max(p,_)});l={min:[T.min[0],L.min[0]],max:[T.max[0],L.max[0]]}}else b=o?b+o:b,_=o?_-o:_,l=v.findExtremes(r,[r.r2c(u)],{ppadplus:Math.max(a,y,b),ppadminus:Math.max(p,f,_)});t._extremes[n]=l}Q.exports=function(t){var r=t._fullLayout;if(m.filterVisible(r.annotations).length&&t._fullData.length)return m.syncOrAsync([k,x],t)}},{"../../lib":515,"../../plots/cartesian/axes":566,"./draw":356}],352:[function(g,Q,X){var m=g("../../lib"),v=g("../../registry"),k=g("../../plot_api/plot_template").arrayEditor;function x(t,r){var l,n,d,u,o,h,s,a=t._fullLayout.annotations,p=[],c=[],i=[],y=(r||[]).length;for(l=0;l<a.length;l++)if(u=(d=a[l]).clicktoshow){for(n=0;n<y;n++)if(h=(o=r[n]).xaxis,s=o.yaxis,h._id===d.xref&&s._id===d.yref&&h.d2r(o.x)===e(d._xclick,h)&&s.d2r(o.y)===e(d._yclick,s)){(d.visible?u==="onout"?c:i:p).push(l);break}n===y&&d.visible&&u==="onout"&&c.push(l)}return{on:p,off:c,explicitOff:i}}function e(t,r){return r.type==="log"?r.l2r(t):r.d2r(t)}Q.exports={hasClickToShow:function(t,r){var l=x(t,r);return l.on.length>0||l.explicitOff.length>0},onClick:function(t,r){var l,n,d=x(t,r),u=d.on,o=d.off.concat(d.explicitOff),h={},s=t._fullLayout.annotations;if(!(!u.length&&!o.length)){for(l=0;l<u.length;l++)(n=k(t.layout,"annotations",s[u[l]])).modifyItem("visible",!0),m.extendFlat(h,n.getUpdateObj());for(l=0;l<o.length;l++)(n=k(t.layout,"annotations",s[o[l]])).modifyItem("visible",!1),m.extendFlat(h,n.getUpdateObj());return v.call("update",t,{},h)}}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647}],353:[function(g,Q,X){var m=g("../../lib"),v=g("../color");Q.exports=function(k,x,e,t){t("opacity");var r=t("bgcolor"),l=t("bordercolor"),n=v.opacity(l);t("borderpad");var d=t("borderwidth"),u=t("showarrow");if(t("text",u?" ":e._dfltTitle.annotation),t("textangle"),m.coerceFont(t,"font",e.font),t("width"),t("align"),t("height")&&t("valign"),u){var o,h,s=t("arrowside");s.indexOf("end")!==-1&&(o=t("arrowhead"),h=t("arrowsize")),s.indexOf("start")!==-1&&(t("startarrowhead",o),t("startarrowsize",h)),t("arrowcolor",n?x.bordercolor:v.defaultLine),t("arrowwidth",2*(n&&d||1)),t("standoff"),t("startstandoff")}var a=t("hovertext"),p=e.hoverlabel||{};if(a){var c=t("hoverlabel.bgcolor",p.bgcolor||(v.opacity(r)?v.rgb(r):v.defaultLine)),i=t("hoverlabel.bordercolor",p.bordercolor||v.contrast(c));m.coerceFont(t,"hoverlabel.font",{family:p.font.family,size:p.font.size,color:p.font.color||i})}t("captureevents",!!a)}},{"../../lib":515,"../color":367}],354:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../../lib/to_log_range");Q.exports=function(k,x,e,t){x=x||{};var r=e==="log"&&x.type==="linear",l=e==="linear"&&x.type==="log";if(r||l)for(var n,d,u=k._fullLayout.annotations,o=x._id.charAt(0),h=0;h<u.length;h++)n=u[h],d="annotations["+h+"].",n[o+"ref"]===x._id&&s(o),n["a"+o+"ref"]===x._id&&s("a"+o);function s(a){var p=n[a],c=null;c=r?v(p,x.range):Math.pow(10,p),m(c)||(c=null),t(d+a,c)}}},{"../../lib/to_log_range":543,"fast-isnumeric":190}],355:[function(g,Q,X){var m=g("../../lib"),v=g("../../plots/cartesian/axes"),k=g("../../plots/array_container_defaults"),x=g("./common_defaults"),e=g("./attributes");function t(r,l,n){function d(L,A){return m.coerce(r,l,e,L,A)}var u=d("visible"),o=d("clicktoshow");if(u||o){x(r,l,n,d);for(var h=l.showarrow,s=["x","y"],a=[-10,-30],p={_fullLayout:n},c=0;c<2;c++){var i=s[c],y=v.coerceRef(r,l,p,i,"","paper");if(y!=="paper"&&v.getFromId(p,y)._annIndices.push(l._index),v.coercePosition(l,p,d,y,i,.5),h){var f="a"+i,w=v.coerceRef(r,l,p,f,"pixel",["pixel","paper"]);w!=="pixel"&&w!==y&&(w=l[f]="pixel");var b=w==="pixel"?a[c]:.4;v.coercePosition(l,p,d,w,f,b)}d(i+"anchor"),d(i+"shift")}if(m.noneOrAll(r,l,["x","y"]),h&&m.noneOrAll(r,l,["ax","ay"]),o){var _=d("xclick"),T=d("yclick");l._xclick=_===void 0?l.x:v.cleanPosition(_,p,l.xref),l._yclick=T===void 0?l.y:v.cleanPosition(T,p,l.yref)}}}Q.exports=function(r,l){k(r,l,{name:"annotations",handleItemDefaults:t})}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":350,"./common_defaults":353}],356:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../registry"),k=g("../../plots/plots"),x=g("../../lib"),e=x.strTranslate,t=g("../../plots/cartesian/axes"),r=g("../color"),l=g("../drawing"),n=g("../fx"),d=g("../../lib/svg_text_utils"),u=g("../../lib/setcursor"),o=g("../dragelement"),h=g("../../plot_api/plot_template").arrayEditor,s=g("./draw_arrow_head");function a(i,y){var f=i._fullLayout.annotations[y]||{},w=t.getFromId(i,f.xref),b=t.getFromId(i,f.yref);w&&w.setScale(),b&&b.setScale(),c(i,f,y,!1,w,b)}function p(i,y,f,w,b){var _=b[f],T=b[f+"ref"],L=f.indexOf("y")!==-1,A=t.getRefType(T)==="domain",I=L?w.h:w.w;return i?A?_+(L?-y:y)/i._length:i.p2r(i.r2p(_)+y):_+(L?-y:y)/I}function c(i,y,f,w,b,_){var T,L,A=i._fullLayout,I=i._fullLayout._size,P=i._context.edits;w?(T="annotation-"+w,L=w+".annotations"):(T="annotation",L="annotations");var S=h(i.layout,L,y),E=S.modifyBase,z=S.modifyItem,D=S.getUpdateObj;A._infolayer.selectAll("."+T+'[data-index="'+f+'"]').remove();var U="clip"+A._uid+"_ann"+f;if(y._input&&y.visible!==!1){var H={x:{},y:{}},Y=+y.textangle||0,J=A._infolayer.append("g").classed(T,!0).attr("data-index",String(f)).style("opacity",y.opacity),W=J.append("g").classed("annotation-text-g",!0),Z=P[y.showarrow?"annotationTail":"annotationPosition"],re=y.captureevents||P.annotationText||Z,V=W.append("g").style("pointer-events",re?"all":null).call(u,"pointer").on("click",function(){i._dragging=!1,i.emit("plotly_clickannotation",se(m.event))});y.hovertext&&V.on("mouseover",function(){var ye=y.hoverlabel,Ae=ye.font,pe=this.getBoundingClientRect(),ge=i.getBoundingClientRect();n.loneHover({x0:pe.left-ge.left,x1:pe.right-ge.left,y:(pe.top+pe.bottom)/2-ge.top,text:y.hovertext,color:ye.bgcolor,borderColor:ye.bordercolor,fontFamily:Ae.family,fontSize:Ae.size,fontColor:Ae.color},{container:A._hoverlayer.node(),outerContainer:A._paper.node(),gd:i})}).on("mouseout",function(){n.loneUnhover(A._hoverlayer.node())});var B=y.borderwidth,j=y.borderpad,ee=B+j,N=V.append("rect").attr("class","bg").style("stroke-width",B+"px").call(r.stroke,y.bordercolor).call(r.fill,y.bgcolor),$=y.width||y.height,K=A._topclips.selectAll("#"+U).data($?[0]:[]);K.enter().append("clipPath").classed("annclip",!0).attr("id",U).append("rect"),K.exit().remove();var te=y.font,ie=A._meta?x.templateString(y.text,A._meta):y.text,le=V.append("text").classed("annotation-text",!0).text(ie);P.annotationText?le.call(d.makeEditable,{delegate:V,gd:i}).call(ve).on("edit",function(ye){y.text=ye,this.call(ve),z("text",ye),b&&b.autorange&&E(b._name+".autorange",!0),_&&_.autorange&&E(_._name+".autorange",!0),v.call("_guiRelayout",i,D())}):le.call(ve)}else m.selectAll("#"+U).remove();function se(ye){var Ae={index:f,annotation:y._input,fullAnnotation:y,event:ye};return w&&(Ae.subplotId=w),Ae}function ve(ye){return ye.call(l.font,te).attr({"text-anchor":{left:"start",right:"end"}[y.align]||"middle"}),d.convertToTspans(ye,i,fe),ye}function fe(){var ye=le.selectAll("a");ye.size()===1&&ye.text()===le.text()&&V.insert("a",":first-child").attr({"xlink:xlink:href":ye.attr("xlink:href"),"xlink:xlink:show":ye.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(N.node());var Ae=V.select(".annotation-text-math-group"),pe=!Ae.empty(),ge=l.bBox((pe?Ae:le).node()),we=ge.width,oe=ge.height,de=y.width||we,Te=y.height||oe,Ee=Math.round(de+2*ee),Me=Math.round(Te+2*ee);function De(rt,ut){return ut==="auto"&&(ut=rt<1/3?"left":rt>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[ut]}for(var Ie=!1,Oe=["x","y"],Ze=0;Ze<Oe.length;Ze++){var Fe,Pe,ze,Ge,$e,ot=Oe[Ze],vt=y[ot+"ref"]||ot,bt=y["a"+ot+"ref"],yt={x:b,y:_}[ot],tt=(Y+(ot==="x"?0:-90))*Math.PI/180,Ke=Ee*Math.cos(tt),mt=Me*Math.sin(tt),Ft=Math.abs(Ke)+Math.abs(mt),Vt=y[ot+"anchor"],Xt=y[ot+"shift"]*(ot==="x"?1:-1),Gt=H[ot],nr=t.getRefType(vt);if(yt&&nr!=="domain"){var It=yt.r2fraction(y[ot]);(It<0||It>1)&&(bt===vt?((It=yt.r2fraction(y["a"+ot]))<0||It>1)&&(Ie=!0):Ie=!0),Fe=yt._offset+yt.r2p(y[ot]),Ge=.5}else{var Be=nr==="domain";ot==="x"?(ze=y[ot],Fe=Be?yt._offset+yt._length*ze:Fe=I.l+I.w*ze):(ze=1-y[ot],Fe=Be?yt._offset+yt._length*ze:Fe=I.t+I.h*ze),Ge=y.showarrow?.5:ze}if(y.showarrow){Gt.head=Fe;var He=y["a"+ot];if($e=Ke*De(.5,y.xanchor)-mt*De(.5,y.yanchor),bt===vt){var he=t.getRefType(bt);he==="domain"?(ot==="y"&&(He=1-He),Gt.tail=yt._offset+yt._length*He):he==="paper"?ot==="y"?(He=1-He,Gt.tail=I.t+I.h*He):Gt.tail=I.l+I.w*He:Gt.tail=yt._offset+yt.r2p(He),Pe=$e}else Gt.tail=Fe+He,Pe=$e+He;Gt.text=Gt.tail+$e;var be=A[ot==="x"?"width":"height"];if(vt==="paper"&&(Gt.head=x.constrain(Gt.head,1,be-1)),bt==="pixel"){var Re=-Math.max(Gt.tail-3,Gt.text),Ue=Math.min(Gt.tail+3,Gt.text)-be;Re>0?(Gt.tail+=Re,Gt.text+=Re):Ue>0&&(Gt.tail-=Ue,Gt.text-=Ue)}Gt.tail+=Xt,Gt.head+=Xt}else Pe=$e=Ft*De(Ge,Vt),Gt.text=Fe+$e;Gt.text+=Xt,$e+=Xt,Pe+=Xt,y["_"+ot+"padplus"]=Ft/2+Pe,y["_"+ot+"padminus"]=Ft/2-Pe,y["_"+ot+"size"]=Ft,y["_"+ot+"shift"]=$e}if(Ie)V.remove();else{var Xe=0,qe=0;if(y.align!=="left"&&(Xe=(de-we)*(y.align==="center"?.5:1)),y.valign!=="top"&&(qe=(Te-oe)*(y.valign==="middle"?.5:1)),pe)Ae.select("svg").attr({x:ee+Xe-1,y:ee+qe}).call(l.setClipUrl,$?U:null,i);else{var st=ee+qe-ge.top,it=ee+Xe-ge.left;le.call(d.positionText,it,st).call(l.setClipUrl,$?U:null,i)}K.select("rect").call(l.setRect,ee,ee,de,Te),N.call(l.setRect,B/2,B/2,Ee-B,Me-B),V.call(l.setTranslate,Math.round(H.x.text-Ee/2),Math.round(H.y.text-Me/2)),W.attr({transform:"rotate("+Y+","+H.x.text+","+H.y.text+")"});var Tt,Pt=function(rt,ut){J.selectAll(".annotation-arrow-g").remove();var Bt=H.x.head,wt=H.y.head,Lt=H.x.tail+rt,Se=H.y.tail+ut,We=H.x.text+rt,nt=H.y.text+ut,ft=x.rotationXYMatrix(Y,We,nt),Mt=x.apply2DTransform(ft),Nt=x.apply2DTransform2(ft),Zt=+N.attr("width"),Ut=+N.attr("height"),fr=We-.5*Zt,Tr=fr+Zt,ur=nt-.5*Ut,Kt=ur+Ut,Qt=[[fr,ur,fr,Kt],[fr,Kt,Tr,Kt],[Tr,Kt,Tr,ur],[Tr,ur,fr,ur]].map(Nt);if(!Qt.reduce(function(yn,bn){return yn^!!x.segmentsIntersect(Bt,wt,Bt+1e6,wt+1e6,bn[0],bn[1],bn[2],bn[3])},!1)){Qt.forEach(function(yn){var bn=x.segmentsIntersect(Lt,Se,Bt,wt,yn[0],yn[1],yn[2],yn[3]);bn&&(Lt=bn.x,Se=bn.y)});var er=y.arrowwidth,cr=y.arrowcolor,gr=y.arrowside,Mr=J.append("g").style({opacity:r.opacity(cr)}).classed("annotation-arrow-g",!0),Ir=Mr.append("path").attr("d","M"+Lt+","+Se+"L"+Bt+","+wt).style("stroke-width",er+"px").call(r.stroke,r.rgb(cr));if(s(Ir,gr,y),P.annotationPosition&&Ir.node().parentNode&&!w){var Fr=Bt,Yr=wt;if(y.standoff){var fn=Math.sqrt(Math.pow(Bt-Lt,2)+Math.pow(wt-Se,2));Fr+=y.standoff*(Lt-Bt)/fn,Yr+=y.standoff*(Se-wt)/fn}var en,Rn,nn=Mr.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Lt-Fr)+","+(Se-Yr),transform:e(Fr,Yr)}).style("stroke-width",er+6+"px").call(r.stroke,"rgba(0,0,0,0)").call(r.fill,"rgba(0,0,0,0)");o.init({element:nn.node(),gd:i,prepFn:function(){var yn=l.getTranslate(V);en=yn.x,Rn=yn.y,b&&b.autorange&&E(b._name+".autorange",!0),_&&_.autorange&&E(_._name+".autorange",!0)},moveFn:function(yn,bn){var ta=Mt(en,Rn),Br=ta[0]+yn,rn=ta[1]+bn;V.call(l.setTranslate,Br,rn),z("x",p(b,yn,"x",I,y)),z("y",p(_,bn,"y",I,y)),y.axref===y.xref&&z("ax",p(b,yn,"ax",I,y)),y.ayref===y.yref&&z("ay",p(_,bn,"ay",I,y)),Mr.attr("transform",e(yn,bn)),W.attr({transform:"rotate("+Y+","+Br+","+rn+")"})},doneFn:function(){v.call("_guiRelayout",i,D());var yn=document.querySelector(".js-notes-box-panel");yn&&yn.redraw(yn.selectedObj)}})}}};y.showarrow&&Pt(0,0),Z&&o.init({element:V.node(),gd:i,prepFn:function(){Tt=W.attr("transform")},moveFn:function(rt,ut){var Bt="pointer";if(y.showarrow)y.axref===y.xref?z("ax",p(b,rt,"ax",I,y)):z("ax",y.ax+rt),y.ayref===y.yref?z("ay",p(_,ut,"ay",I.w,y)):z("ay",y.ay+ut),Pt(rt,ut);else{if(w)return;var wt,Lt;if(b)wt=p(b,rt,"x",I,y);else{var Se=y._xsize/I.w,We=y.x+(y._xshift-y.xshift)/I.w-Se/2;wt=o.align(We+rt/I.w,Se,0,1,y.xanchor)}if(_)Lt=p(_,ut,"y",I,y);else{var nt=y._ysize/I.h,ft=y.y-(y._yshift+y.yshift)/I.h-nt/2;Lt=o.align(ft-ut/I.h,nt,0,1,y.yanchor)}z("x",wt),z("y",Lt),b&&_||(Bt=o.getCursor(b?.5:wt,_?.5:Lt,y.xanchor,y.yanchor))}W.attr({transform:e(rt,ut)+Tt}),u(V,Bt)},clickFn:function(rt,ut){y.captureevents&&i.emit("plotly_clickannotation",se(ut))},doneFn:function(){u(V),v.call("_guiRelayout",i,D());var rt=document.querySelector(".js-notes-box-panel");rt&&rt.redraw(rt.selectedObj)}})}}}Q.exports={draw:function(i){var y=i._fullLayout;y._infolayer.selectAll(".annotation").remove();for(var f=0;f<y.annotations.length;f++)y.annotations[f].visible&&a(i,f);return k.previousPromises(i)},drawOne:a,drawRaw:c}},{"../../lib":515,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/cartesian/axes":566,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../fx":407,"./draw_arrow_head":357,"@plotly/d3":58}],357:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../color"),k=g("./arrow_paths"),x=g("../../lib"),e=x.strScale,t=x.strRotate,r=x.strTranslate;Q.exports=function(l,n,d){var u,o,h,s,a=l.node(),p=k[d.arrowhead||0],c=k[d.startarrowhead||0],i=(d.arrowwidth||1)*(d.arrowsize||1),y=(d.arrowwidth||1)*(d.startarrowsize||1),f=n.indexOf("start")>=0,w=n.indexOf("end")>=0,b=p.backoff*i+d.standoff,_=c.backoff*y+d.startstandoff;if(a.nodeName==="line"){u={x:+l.attr("x1"),y:+l.attr("y1")},o={x:+l.attr("x2"),y:+l.attr("y2")};var T=u.x-o.x,L=u.y-o.y;if(s=(h=Math.atan2(L,T))+Math.PI,b&&_&&b+_>Math.sqrt(T*T+L*L))return void J();if(b){if(b*b>T*T+L*L)return void J();var A=b*Math.cos(h),I=b*Math.sin(h);o.x+=A,o.y+=I,l.attr({x2:o.x,y2:o.y})}if(_){if(_*_>T*T+L*L)return void J();var P=_*Math.cos(h),S=_*Math.sin(h);u.x-=P,u.y-=S,l.attr({x1:u.x,y1:u.y})}}else if(a.nodeName==="path"){var E=a.getTotalLength(),z="";if(E<b+_)return void J();var D=a.getPointAtLength(0),U=a.getPointAtLength(.1);h=Math.atan2(D.y-U.y,D.x-U.x),u=a.getPointAtLength(Math.min(_,E)),z="0px,"+_+"px,";var H=a.getPointAtLength(E),Y=a.getPointAtLength(E-.1);s=Math.atan2(H.y-Y.y,H.x-Y.x),o=a.getPointAtLength(Math.max(0,E-b)),z+=E-(z?_+b:b)+"px,"+E+"px",l.style("stroke-dasharray",z)}function J(){l.style("stroke-dasharray","0px,100px")}function W(Z,re,V,B){Z.path&&(Z.noRotate&&(V=0),m.select(a.parentNode).append("path").attr({class:l.attr("class"),d:Z.path,transform:r(re.x,re.y)+t(180*V/Math.PI)+e(B)}).style({fill:v.rgb(d.arrowcolor),"stroke-width":0}))}f&&W(c,u,h,y),w&&W(p,o,s,i)}},{"../../lib":515,"../color":367,"./arrow_paths":349,"@plotly/d3":58}],358:[function(g,Q,X){var m=g("./draw"),v=g("./click");Q.exports={moduleType:"component",name:"annotations",layoutAttributes:g("./attributes"),supplyLayoutDefaults:g("./defaults"),includeBasePlot:g("../../plots/cartesian/include_components")("annotations"),calcAutorange:g("./calc_autorange"),draw:m.draw,drawOne:m.drawOne,drawRaw:m.drawRaw,hasClickToShow:v.hasClickToShow,onClick:v.onClick,convertCoords:g("./convert_coords")}},{"../../plots/cartesian/include_components":577,"./attributes":350,"./calc_autorange":351,"./click":352,"./convert_coords":354,"./defaults":355,"./draw":356}],359:[function(g,Q,X){var m=g("../annotations/attributes"),v=g("../../plot_api/edit_types").overrideAll,k=g("../../plot_api/plot_template").templatedArray;Q.exports=v(k("annotation",{visible:m.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:m.xanchor,xshift:m.xshift,yanchor:m.yanchor,yshift:m.yshift,text:m.text,textangle:m.textangle,font:m.font,width:m.width,height:m.height,opacity:m.opacity,align:m.align,valign:m.valign,bgcolor:m.bgcolor,bordercolor:m.bordercolor,borderpad:m.borderpad,borderwidth:m.borderwidth,showarrow:m.showarrow,arrowcolor:m.arrowcolor,arrowhead:m.arrowhead,startarrowhead:m.startarrowhead,arrowside:m.arrowside,arrowsize:m.arrowsize,startarrowsize:m.startarrowsize,arrowwidth:m.arrowwidth,standoff:m.standoff,startstandoff:m.startstandoff,hovertext:m.hovertext,hoverlabel:m.hoverlabel,captureevents:m.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../annotations/attributes":350}],360:[function(g,Q,X){var m=g("../../lib"),v=g("../../plots/cartesian/axes");function k(x,e){var t=e.fullSceneLayout.domain,r=e.fullLayout._size,l={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};x._xa={},m.extendFlat(x._xa,l),v.setConvert(x._xa),x._xa._offset=r.l+t.x[0]*r.w,x._xa.l2p=function(){return .5*(1+x._pdata[0]/x._pdata[3])*r.w*(t.x[1]-t.x[0])},x._ya={},m.extendFlat(x._ya,l),v.setConvert(x._ya),x._ya._offset=r.t+(1-t.y[1])*r.h,x._ya.l2p=function(){return .5*(1-x._pdata[1]/x._pdata[3])*r.h*(t.y[1]-t.y[0])}}Q.exports=function(x){for(var e=x.fullSceneLayout.annotations,t=0;t<e.length;t++)k(e[t],x);x.fullLayout._infolayer.selectAll(".annotation-"+x.id).remove()}},{"../../lib":515,"../../plots/cartesian/axes":566}],361:[function(g,Q,X){var m=g("../../lib"),v=g("../../plots/cartesian/axes"),k=g("../../plots/array_container_defaults"),x=g("../annotations/common_defaults"),e=g("./attributes");function t(r,l,n,d){function u(h,s){return m.coerce(r,l,e,h,s)}function o(h){var s=h+"axis",a={_fullLayout:{}};return a._fullLayout[s]=n[s],v.coercePosition(l,a,u,h,h,.5)}u("visible")&&(x(r,l,d.fullLayout,u),o("x"),o("y"),o("z"),m.noneOrAll(r,l,["x","y","z"]),l.xref="x",l.yref="y",l.zref="z",u("xanchor"),u("yanchor"),u("xshift"),u("yshift"),l.showarrow&&(l.axref="pixel",l.ayref="pixel",u("ax",-10),u("ay",-30),m.noneOrAll(r,l,["ax","ay"])))}Q.exports=function(r,l,n){k(r,l,{name:"annotations",handleItemDefaults:t,fullLayout:n.fullLayout})}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../annotations/common_defaults":353,"./attributes":359}],362:[function(g,Q,X){var m=g("../annotations/draw").drawRaw,v=g("../../plots/gl3d/project"),k=["x","y","z"];Q.exports=function(x){for(var e=x.fullSceneLayout,t=x.dataScale,r=e.annotations,l=0;l<r.length;l++){for(var n=r[l],d=!1,u=0;u<3;u++){var o=k[u],h=n[o],s=e[o+"axis"].r2fraction(h);if(s<0||s>1){d=!0;break}}d?x.fullLayout._infolayer.select(".annotation-"+x.id+'[data-index="'+l+'"]').remove():(n._pdata=v(x.glplot.cameraParams,[e.xaxis.r2l(n.x)*t[0],e.yaxis.r2l(n.y)*t[1],e.zaxis.r2l(n.z)*t[2]]),m(x.graphDiv,n,l,x.id,n._xa,n._ya))}}},{"../../plots/gl3d/project":616,"../annotations/draw":356}],363:[function(g,Q,X){var m=g("../../registry"),v=g("../../lib");Q.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:g("./attributes")}}},layoutAttributes:g("./attributes"),handleDefaults:g("./defaults"),includeBasePlot:function(k,x){var e=m.subplotsRegistry.gl3d;if(!!e)for(var t=e.attrRegex,r=Object.keys(k),l=0;l<r.length;l++){var n=r[l];t.test(n)&&(k[n].annotations||[]).length&&(v.pushUnique(x._basePlotModules,e),v.pushUnique(x._subplots.gl3d,n))}},convert:g("./convert"),draw:g("./draw")}},{"../../lib":515,"../../registry":647,"./attributes":359,"./convert":360,"./defaults":361,"./draw":362}],364:[function(g,Q,X){Q.exports=g("world-calendars/dist/main"),g("world-calendars/dist/plus"),g("world-calendars/dist/calendars/chinese"),g("world-calendars/dist/calendars/coptic"),g("world-calendars/dist/calendars/discworld"),g("world-calendars/dist/calendars/ethiopian"),g("world-calendars/dist/calendars/hebrew"),g("world-calendars/dist/calendars/islamic"),g("world-calendars/dist/calendars/julian"),g("world-calendars/dist/calendars/mayan"),g("world-calendars/dist/calendars/nanakshahi"),g("world-calendars/dist/calendars/nepali"),g("world-calendars/dist/calendars/persian"),g("world-calendars/dist/calendars/taiwan"),g("world-calendars/dist/calendars/thai"),g("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":333,"world-calendars/dist/calendars/coptic":334,"world-calendars/dist/calendars/discworld":335,"world-calendars/dist/calendars/ethiopian":336,"world-calendars/dist/calendars/hebrew":337,"world-calendars/dist/calendars/islamic":338,"world-calendars/dist/calendars/julian":339,"world-calendars/dist/calendars/mayan":340,"world-calendars/dist/calendars/nanakshahi":341,"world-calendars/dist/calendars/nepali":342,"world-calendars/dist/calendars/persian":343,"world-calendars/dist/calendars/taiwan":344,"world-calendars/dist/calendars/thai":345,"world-calendars/dist/calendars/ummalqura":346,"world-calendars/dist/main":347,"world-calendars/dist/plus":348}],365:[function(g,Q,X){var m=g("./calendars"),v=g("../../lib"),k=g("../../constants/numerical"),x=k.EPOCHJD,e=k.ONEDAY,t={valType:"enumerated",values:v.sortObjectKeys(m.calendars),editType:"calc",dflt:"gregorian"},r=function(c,i,y,f){var w={};return w[y]=t,v.coerce(c,i,w,y,f)},l={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},n={};function d(c){var i=n[c];return i||(i=n[c]=m.instance(c))}function u(c){return v.extendFlat({},t,{description:c})}function o(c){return"Sets the calendar system to use with `"+c+"` date data."}var h={xcalendar:u(o("x"))},s=v.extendFlat({},h,{ycalendar:u(o("y"))}),a=v.extendFlat({},s,{zcalendar:u(o("z"))}),p=u(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));Q.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:s,bar:s,box:s,heatmap:s,contour:s,histogram:s,histogram2d:s,histogram2dcontour:s,scatter3d:a,surface:a,mesh3d:a,scattergl:s,ohlc:h,candlestick:h},layout:{calendar:u(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:p},yaxis:{calendar:p},scene:{xaxis:{calendar:p},yaxis:{calendar:p},zaxis:{calendar:p}},polar:{radialaxis:{calendar:p}}},transforms:{filter:{valuecalendar:u(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:u(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:t,handleDefaults:r,handleTraceDefaults:function(c,i,y,f){for(var w=0;w<y.length;w++)r(c,i,y[w]+"calendar",f.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:d,worldCalFmt:function(c,i,y){for(var f,w,b,_,T,L=Math.floor((i+.05)/e)+x,A=d(y).fromJD(L),I=0;(I=c.indexOf("%",I))!==-1;)(f=c.charAt(I+1))==="0"||f==="-"||f==="_"?(b=3,w=c.charAt(I+2),f==="_"&&(f="-")):(w=f,f="0",b=2),(_=l[w])?(T=_==="##"?"##":A.formatDate(_[f]),c=c.substr(0,I)+T+c.substr(I+b),I+=T.length):I+=b;return c}}},{"../../constants/numerical":491,"../../lib":515,"./calendars":364}],366:[function(g,Q,X){X.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],X.defaultLine="#444",X.lightLine="#eee",X.background="#fff",X.borderLine="#BEC8D9",X.lightFraction=1e3/11},{}],367:[function(g,Q,X){var m=g("tinycolor2"),v=g("fast-isnumeric"),k=g("../../lib/array").isTypedArray,x=Q.exports={},e=g("./attributes");x.defaults=e.defaults;var t=x.defaultLine=e.defaultLine;x.lightLine=e.lightLine;var r=x.background=e.background;function l(n){if(v(n)||typeof n!="string")return n;var d=n.trim();if(d.substr(0,3)!=="rgb")return n;var u=d.match(/^rgba?\s*\(([^()]*)\)$/);if(!u)return n;var o=u[1].trim().split(/\s*[\s,]\s*/),h=d.charAt(3)==="a"&&o.length===4;if(!h&&o.length!==3)return n;for(var s=0;s<o.length;s++){if(!o[s].length||(o[s]=Number(o[s]),!(o[s]>=0)))return n;if(s===3)o[s]>1&&(o[s]=1);else if(o[s]>=1)return n}var a=Math.round(255*o[0])+", "+Math.round(255*o[1])+", "+Math.round(255*o[2]);return h?"rgba("+a+", "+o[3]+")":"rgb("+a+")"}x.tinyRGB=function(n){var d=n.toRgb();return"rgb("+Math.round(d.r)+", "+Math.round(d.g)+", "+Math.round(d.b)+")"},x.rgb=function(n){return x.tinyRGB(m(n))},x.opacity=function(n){return n?m(n).getAlpha():0},x.addOpacity=function(n,d){var u=m(n).toRgb();return"rgba("+Math.round(u.r)+", "+Math.round(u.g)+", "+Math.round(u.b)+", "+d+")"},x.combine=function(n,d){var u=m(n).toRgb();if(u.a===1)return m(n).toRgbString();var o=m(d||r).toRgb(),h=o.a===1?o:{r:255*(1-o.a)+o.r*o.a,g:255*(1-o.a)+o.g*o.a,b:255*(1-o.a)+o.b*o.a},s={r:h.r*(1-u.a)+u.r*u.a,g:h.g*(1-u.a)+u.g*u.a,b:h.b*(1-u.a)+u.b*u.a};return m(s).toRgbString()},x.contrast=function(n,d,u){var o=m(n);return o.getAlpha()!==1&&(o=m(x.combine(n,r))),(o.isDark()?d?o.lighten(d):r:u?o.darken(u):t).toString()},x.stroke=function(n,d){var u=m(d);n.style({stroke:x.tinyRGB(u),"stroke-opacity":u.getAlpha()})},x.fill=function(n,d){var u=m(d);n.style({fill:x.tinyRGB(u),"fill-opacity":u.getAlpha()})},x.clean=function(n){if(n&&typeof n=="object"){var d,u,o,h,s=Object.keys(n);for(d=0;d<s.length;d++)if(h=n[o=s[d]],o.substr(o.length-5)==="color")if(Array.isArray(h))for(u=0;u<h.length;u++)h[u]=l(h[u]);else n[o]=l(h);else if(o.substr(o.length-10)==="colorscale"&&Array.isArray(h))for(u=0;u<h.length;u++)Array.isArray(h[u])&&(h[u][1]=l(h[u][1]));else if(Array.isArray(h)){var a=h[0];if(!Array.isArray(a)&&a&&typeof a=="object")for(u=0;u<h.length;u++)x.clean(h[u])}else h&&typeof h=="object"&&!k(h)&&x.clean(h)}}},{"../../lib/array":497,"./attributes":366,"fast-isnumeric":190,tinycolor2:313}],368:[function(g,Q,X){var m=g("../../plots/cartesian/layout_attributes"),v=g("../../plots/font_attributes"),k=g("../../lib/extend").extendFlat,x=g("../../plot_api/edit_types").overrideAll;Q.exports=x({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:m.linecolor,outlinewidth:m.linewidth,bordercolor:m.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:m.tickmode,nticks:m.nticks,tick0:m.tick0,dtick:m.dtick,tickvals:m.tickvals,ticktext:m.ticktext,ticks:k({},m.ticks,{dflt:""}),ticklabeloverflow:k({},m.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:m.ticklen,tickwidth:m.tickwidth,tickcolor:m.tickcolor,ticklabelstep:m.ticklabelstep,showticklabels:m.showticklabels,tickfont:v({}),tickangle:m.tickangle,tickformat:m.tickformat,tickformatstops:m.tickformatstops,tickprefix:m.tickprefix,showtickprefix:m.showtickprefix,ticksuffix:m.ticksuffix,showticksuffix:m.showticksuffix,separatethousands:m.separatethousands,exponentformat:m.exponentformat,minexponent:m.minexponent,showexponent:m.showexponent,title:{text:{valType:"string"},font:v({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:v({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/layout_attributes":579,"../../plots/font_attributes":594}],369:[function(g,Q,X){Q.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],370:[function(g,Q,X){var m=g("../../lib"),v=g("../../plot_api/plot_template"),k=g("../../plots/cartesian/tick_value_defaults"),x=g("../../plots/cartesian/tick_mark_defaults"),e=g("../../plots/cartesian/tick_label_defaults"),t=g("../../plots/cartesian/prefix_suffix_defaults"),r=g("./attributes");Q.exports=function(l,n,d){var u=v.newContainer(n,"colorbar"),o=l.colorbar||{};function h(L,A){return m.coerce(o,u,r,L,A)}var s=d.margin||{t:0,b:0,l:0,r:0},a=d.width-s.l-s.r,p=d.height-s.t-s.b,c=h("orientation")==="v",i=h("thicknessmode");h("thickness",i==="fraction"?30/(c?a:p):30);var y=h("lenmode");h("len",y==="fraction"?1:c?p:a),h("x",c?1.02:.5),h("xanchor",c?"left":"center"),h("xpad"),h("y",c?.5:1.02),h("yanchor",c?"middle":"bottom"),h("ypad"),m.noneOrAll(o,u,["x","y"]),h("outlinecolor"),h("outlinewidth"),h("bordercolor"),h("borderwidth"),h("bgcolor");var f=m.coerce(o,u,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:c?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");h("ticklabeloverflow",f.indexOf("inside")!==-1?"hide past domain":"hide past div"),k(o,u,h,"linear");var w=d.font,b={outerTicks:!1,font:w};f.indexOf("inside")!==-1&&(b.bgColor="black"),t(o,u,h,"linear",b),e(o,u,h,"linear",b),x(o,u,h,"linear",b),h("title.text",d._dfltTitle.colorbar);var _=u.tickfont,T=m.extendFlat({},_,{color:w.color,size:m.bigFont(_.size)});m.coerceFont(h,"title.font",T),h("title.side",c?"top":"right")}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_mark_defaults":588,"../../plots/cartesian/tick_value_defaults":589,"./attributes":368}],371:[function(g,Q,X){var m=g("@plotly/d3"),v=g("tinycolor2"),k=g("../../plots/plots"),x=g("../../registry"),e=g("../../plots/cartesian/axes"),t=g("../dragelement"),r=g("../../lib"),l=r.strTranslate,n=g("../../lib/extend").extendFlat,d=g("../../lib/setcursor"),u=g("../drawing"),o=g("../color"),h=g("../titles"),s=g("../../lib/svg_text_utils"),a=g("../colorscale/helpers").flipScale,p=g("../../plots/cartesian/axis_defaults"),c=g("../../plots/cartesian/position_defaults"),i=g("../../plots/cartesian/layout_attributes"),y=g("../../constants/alignment"),f=y.LINE_SPACING,w=y.FROM_TL,b=y.FROM_BR,_=g("./constants").cn;Q.exports={draw:function(T){var L=T._fullLayout._infolayer.selectAll("g."+_.colorbar).data(function(A){var I,P,S,E,z=A._fullLayout,D=A.calcdata,U=[];function H($){return n($,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function Y(){typeof E.calc=="function"?E.calc(A,S,I):(I._fillgradient=P.reversescale?a(P.colorscale):P.colorscale,I._zrange=[P[E.min],P[E.max]])}for(var J=0;J<D.length;J++){var W=D[J],Z=(S=W[0].trace)._module.colorbar;if(S.visible===!0&&Z)for(var re=Array.isArray(Z),V=re?Z:[Z],B=0;B<V.length;B++){var j=(E=V[B]).container;(P=j?S[j]:S)&&P.showscale&&((I=H(P.colorbar))._id="cb"+S.uid+(re&&j?"-"+j:""),I._traceIndex=S.index,I._propPrefix=(j?j+".":"")+"colorbar.",I._meta=S._meta,Y(),U.push(I))}}for(var ee in z._colorAxes)if((P=z[ee]).showscale){var N=z._colorAxes[ee];(I=H(P.colorbar))._id="cb"+ee,I._propPrefix=ee+".colorbar.",I._meta=z._meta,E={min:"cmin",max:"cmax"},N[0]!=="heatmap"&&(S=N[1],E.calc=S._module.colorbar.calc),Y(),U.push(I)}return U}(T),function(A){return A._id});L.enter().append("g").attr("class",function(A){return A._id}).classed(_.colorbar,!0),L.each(function(A){var I=m.select(this);r.ensureSingle(I,"rect",_.cbbg),r.ensureSingle(I,"g",_.cbfills),r.ensureSingle(I,"g",_.cblines),r.ensureSingle(I,"g",_.cbaxis,function(S){S.classed(_.crisp,!0)}),r.ensureSingle(I,"g",_.cbtitleunshift,function(S){S.append("g").classed(_.cbtitle,!0)}),r.ensureSingle(I,"rect",_.cboutline);var P=function(S,E,z){var D=E.orientation==="v",U=E.len,H=E.lenmode,Y=E.thickness,J=E.thicknessmode,W=E.outlinewidth,Z=E.borderwidth,re=E.bgcolor,V=E.xanchor,B=E.yanchor,j=E.xpad,ee=E.ypad,N=E.x,$=D?E.y:1-E.y,K=z._fullLayout,te=K._size,ie=E._fillcolor,le=E._line,se=E.title,ve=se.side,fe=E._zrange||m.extent((typeof ie=="function"?ie:le.color).domain()),ye=typeof le.color=="function"?le.color:function(){return le.color},Ae=typeof ie=="function"?ie:function(){return ie},pe=E._levels,ge=function(nr,It,Be){var He,he,be=It._levels,Re=[],Ue=[],Xe=be.end+be.size/100,qe=be.size,st=1.001*Be[0]-.001*Be[1],it=1.001*Be[1]-.001*Be[0];for(he=0;he<1e5&&(He=be.start+he*qe,!(qe>0?He>=Xe:He<=Xe));he++)He>st&&He<it&&Re.push(He);if(It._fillgradient)Ue=[0];else if(typeof It._fillcolor=="function"){var Tt=It._filllevels;if(Tt)for(Xe=Tt.end+Tt.size/100,qe=Tt.size,he=0;he<1e5&&(He=Tt.start+he*qe,!(qe>0?He>=Xe:He<=Xe));he++)He>Be[0]&&He<Be[1]&&Ue.push(He);else(Ue=Re.map(function(Pt){return Pt-be.size/2})).push(Ue[Ue.length-1]+be.size)}else It._fillcolor&&typeof It._fillcolor=="string"&&(Ue=[0]);return be.size<0&&(Re.reverse(),Ue.reverse()),{line:Re,fill:Ue}}(0,E,fe),we=ge.fill,oe=ge.line,de=Math.round(Y*(J==="fraction"?D?te.w:te.h:1)),Te=de/(D?te.w:te.h),Ee=Math.round(U*(H==="fraction"?D?te.h:te.w:1)),Me=Ee/(D?te.h:te.w),De=Math.round(D?N*te.w+j:$*te.h+ee),Ie={center:.5,right:1}[V]||0,Oe={top:1,middle:.5}[B]||0,Ze=D?N-Ie*Te:$-Oe*Te,Fe=D?$-Oe*Me:N-Ie*Me,Pe=Math.round(D?te.h*(1-Fe):te.w*Fe);E._lenFrac=Me,E._thickFrac=Te,E._uFrac=Ze,E._vFrac=Fe;var ze=E._axis=function(nr,It,Be){var He=nr._fullLayout,he=It.orientation==="v",be={type:"linear",range:Be,tickmode:It.tickmode,nticks:It.nticks,tick0:It.tick0,dtick:It.dtick,tickvals:It.tickvals,ticktext:It.ticktext,ticks:It.ticks,ticklen:It.ticklen,tickwidth:It.tickwidth,tickcolor:It.tickcolor,showticklabels:It.showticklabels,ticklabelposition:It.ticklabelposition,ticklabeloverflow:It.ticklabeloverflow,ticklabelstep:It.ticklabelstep,tickfont:It.tickfont,tickangle:It.tickangle,tickformat:It.tickformat,exponentformat:It.exponentformat,minexponent:It.minexponent,separatethousands:It.separatethousands,showexponent:It.showexponent,showtickprefix:It.showtickprefix,tickprefix:It.tickprefix,showticksuffix:It.showticksuffix,ticksuffix:It.ticksuffix,title:It.title,showline:!0,anchor:"free",side:he?"right":"bottom",position:1},Re=he?"y":"x",Ue={type:"linear",_id:Re+It._id},Xe={letter:Re,font:He.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:He.calendar};function qe(st,it){return r.coerce(be,Ue,i,st,it)}return p(be,Ue,qe,Xe,He),c(be,Ue,qe,Xe),Ue}(z,E,fe);ze.position=Te+(D?N+j/te.w:$+ee/te.h);var Ge=["top","bottom"].indexOf(ve)!==-1;if(D&&Ge&&(ze.title.side=ve,ze.titlex=N+j/te.w,ze.titley=Fe+(se.side==="top"?Me-ee/te.h:ee/te.h)),D||Ge||(ze.title.side=ve,ze.titley=$+ee/te.h,ze.titlex=Fe+j/te.w),le.color&&E.tickmode==="auto"){ze.tickmode="linear",ze.tick0=pe.start;var $e=pe.size,ot=r.constrain(Ee/50,4,15)+1,vt=(fe[1]-fe[0])/((E.nticks||ot)*$e);if(vt>1){var bt=Math.pow(10,Math.floor(Math.log(vt)/Math.LN10));$e*=bt*r.roundUp(vt/bt,[2,5,10]),(Math.abs(pe.start)/pe.size+1e-6)%1<2e-6&&(ze.tick0=0)}ze.dtick=$e}ze.domain=D?[Fe+ee/te.h,Fe+Me-ee/te.h]:[Fe+j/te.w,Fe+Me-j/te.w],ze.setScale(),S.attr("transform",l(Math.round(te.l),Math.round(te.t)));var yt,tt=S.select("."+_.cbtitleunshift).attr("transform",l(-Math.round(te.l),-Math.round(te.t))),Ke=ze.ticklabelposition,mt=ze.title.font.size,Ft=S.select("."+_.cbaxis),Vt=0,Xt=0;function Gt(nr,It){var Be={propContainer:ze,propName:E._propPrefix+"title",traceIndex:E._traceIndex,_meta:E._meta,placeholder:K._dfltTitle.colorbar,containerGroup:S.select("."+_.cbtitle)},He=nr.charAt(0)==="h"?nr.substr(1):"h"+nr;S.selectAll("."+He+",."+He+"-math-group").remove(),h.draw(z,nr,n(Be,It||{}))}return r.syncOrAsync([k.previousPromises,function(){var nr,It;(D&&Ge||!D&&!Ge)&&(ve==="top"&&(nr=j+te.l+te.w*N,It=ee+te.t+te.h*(1-Fe-Me)+3+.75*mt),ve==="bottom"&&(nr=j+te.l+te.w*N,It=ee+te.t+te.h*(1-Fe)-3-.25*mt),ve==="right"&&(It=ee+te.t+te.h*$+3+.75*mt,nr=j+te.l+te.w*Fe),Gt(ze._id+"title",{attributes:{x:nr,y:It,"text-anchor":D?"start":"middle"}}))},function(){if(!D&&!Ge||D&&Ge){var nr,It=S.select("."+_.cbtitle),Be=It.select("text"),He=[-W/2,W/2],he=It.select(".h"+ze._id+"title-math-group").node(),be=15.6;if(Be.node()&&(be=parseInt(Be.node().style.fontSize,10)*f),he?(nr=u.bBox(he),Xt=nr.width,(Vt=nr.height)>be&&(He[1]-=(Vt-be)/2)):Be.node()&&!Be.classed(_.jsPlaceholder)&&(nr=u.bBox(Be.node()),Xt=nr.width,Vt=nr.height),D){if(Vt){if(Vt+=5,ve==="top")ze.domain[1]-=Vt/te.h,He[1]*=-1;else{ze.domain[0]+=Vt/te.h;var Re=s.lineCount(Be);He[1]+=(1-Re)*be}It.attr("transform",l(He[0],He[1])),ze.setScale()}}else Xt&&(ve==="right"&&(ze.domain[0]+=(Xt+mt/2)/te.w),It.attr("transform",l(He[0],He[1])),ze.setScale())}S.selectAll("."+_.cbfills+",."+_.cblines).attr("transform",D?l(0,Math.round(te.h*(1-ze.domain[1]))):l(Math.round(te.w*ze.domain[0]),0)),Ft.attr("transform",D?l(0,Math.round(-te.t)):l(Math.round(-te.l),0));var Ue=S.select("."+_.cbfills).selectAll("rect."+_.cbfill).attr("style","").data(we);Ue.enter().append("rect").classed(_.cbfill,!0).style("stroke","none"),Ue.exit().remove();var Xe=fe.map(ze.c2p).map(Math.round).sort(function(Pt,rt){return Pt-rt});Ue.each(function(Pt,rt){var ut=[rt===0?fe[0]:(we[rt]+we[rt-1])/2,rt===we.length-1?fe[1]:(we[rt]+we[rt+1])/2].map(ze.c2p).map(Math.round);D&&(ut[1]=r.constrain(ut[1]+(ut[1]>ut[0])?1:-1,Xe[0],Xe[1]));var Bt=m.select(this).attr(D?"x":"y",De).attr(D?"y":"x",m.min(ut)).attr(D?"width":"height",Math.max(de,2)).attr(D?"height":"width",Math.max(m.max(ut)-m.min(ut),2));if(E._fillgradient)u.gradient(Bt,z,E._id,D?"vertical":"horizontalreversed",E._fillgradient,"fill");else{var wt=Ae(Pt).replace("e-","");Bt.attr("fill",v(wt).toHexString())}});var qe=S.select("."+_.cblines).selectAll("path."+_.cbline).data(le.color&&le.width?oe:[]);qe.enter().append("path").classed(_.cbline,!0),qe.exit().remove(),qe.each(function(Pt){var rt=De,ut=Math.round(ze.c2p(Pt))+le.width/2%1;m.select(this).attr("d","M"+(D?rt+","+ut:ut+","+rt)+(D?"h":"v")+de).call(u.lineGroupStyle,le.width,ye(Pt),le.dash)}),Ft.selectAll("g."+ze._id+"tick,path").remove();var st=De+de+(W||0)/2-(E.ticks==="outside"?1:0),it=e.calcTicks(ze),Tt=e.getTickSigns(ze)[2];return e.drawTicks(z,ze,{vals:ze.ticks==="inside"?e.clipEnds(ze,it):it,layer:Ft,path:e.makeTickPath(ze,st,Tt),transFn:e.makeTransTickFn(ze)}),e.drawLabels(z,ze,{vals:it,layer:Ft,transFn:e.makeTransTickLabelFn(ze),labelFns:e.makeLabelFns(ze,st)})},function(){if(D&&!Ge||!D&&Ge){var nr,It,Be=ze.position||0,He=ze._offset+ze._length/2;if(ve==="right")It=He,nr=te.l+te.w*Be+10+mt*(ze.showticklabels?1:.5);else if(nr=He,ve==="bottom"&&(It=te.t+te.h*Be+10+(Ke.indexOf("inside")===-1?ze.tickfont.size:0)+(ze.ticks!=="intside"&&E.ticklen||0)),ve==="top"){var he=se.text.split("<br>").length;It=te.t+te.h*Be+10-de-f*mt*he}Gt((D?"h":"v")+ze._id+"title",{avoid:{selection:m.select(z).selectAll("g."+ze._id+"tick"),side:ve,offsetTop:D?0:te.t,offsetLeft:D?te.l:0,maxShift:D?K.width:K.height},attributes:{x:nr,y:It,"text-anchor":"middle"},transform:{rotate:D?-90:0,offset:0}})}},k.previousPromises,function(){var nr,It=de+W/2;Ke.indexOf("inside")===-1&&(nr=u.bBox(Ft.node()),It+=D?nr.width:nr.height),yt=tt.select("text");var Be=0,He=D&&ve==="top",he=!D&&ve==="right",be=0;if(yt.node()&&!yt.classed(_.jsPlaceholder)){var Re,Ue=tt.select(".h"+ze._id+"title-math-group").node();Ue&&(D&&Ge||!D&&!Ge)?(Be=(nr=u.bBox(Ue)).width,Re=nr.height):(Be=(nr=u.bBox(tt.node())).right-te.l-(D?De:Pe),Re=nr.bottom-te.t-(D?Pe:De),D||ve!=="top"||(It+=nr.height,be=nr.height)),he&&(yt.attr("transform",l(Be/2+mt/2,0)),Be*=2),It=Math.max(It,D?Be:Re)}var Xe=2*(D?j:ee)+It+Z+W/2,qe=0;!D&&se.text&&B==="bottom"&&$<=0&&(Xe+=qe=Xe/2,be+=qe),K._hColorbarMoveTitle=qe,K._hColorbarMoveCBTitle=be;var st=Z+W;S.select("."+_.cbbg).attr("x",(D?De:Pe)-st/2-(D?j:0)).attr("y",(D?Pe:De)-(D?Ee:ee+be-qe)).attr(D?"width":"height",Math.max(Xe-qe,2)).attr(D?"height":"width",Math.max(Ee+st,2)).call(o.fill,re).call(o.stroke,E.bordercolor).style("stroke-width",Z);var it=he?Math.max(Be-10,0):0;if(S.selectAll("."+_.cboutline).attr("x",(D?De:Pe+j)+it).attr("y",(D?Pe+ee-Ee:De)+(He?Vt:0)).attr(D?"width":"height",Math.max(de,2)).attr(D?"height":"width",Math.max(Ee-(D?2*ee+Vt:2*j+it),2)).call(o.stroke,E.outlinecolor).style({fill:"none","stroke-width":W}),S.attr("transform",l(te.l-(D?Ie*Xe:0),te.t-(D?0:(1-Oe)*Xe-be))),!D&&(Z||v(re).getAlpha()&&!v.equals(K.paper_bgcolor,re))){var Tt=Ft.selectAll("text"),Pt=Tt[0].length,rt=S.select("."+_.cbbg).node(),ut=u.bBox(rt),Bt=u.getTranslate(S);Tt.each(function(Mt,Nt){var Zt=Pt-1;if(Nt===0||Nt===Zt){var Ut,fr=u.bBox(this),Tr=u.getTranslate(this);if(Nt===Zt){var ur=fr.right+Tr.x;(Ut=ut.right+Bt.x+Pe-Z-2+N-ur)>0&&(Ut=0)}else if(Nt===0){var Kt=fr.left+Tr.x;(Ut=ut.left+Bt.x+Pe+Z+2-Kt)<0&&(Ut=0)}Ut&&(Pt<3?this.setAttribute("transform","translate("+Ut+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var wt={},Lt=w[V],Se=b[V],We=w[B],nt=b[B],ft=Xe-de;D?(H==="pixels"?(wt.y=$,wt.t=Ee*We,wt.b=Ee*nt):(wt.t=wt.b=0,wt.yt=$+U*We,wt.yb=$-U*nt),J==="pixels"?(wt.x=N,wt.l=Xe*Lt,wt.r=Xe*Se):(wt.l=ft*Lt,wt.r=ft*Se,wt.xl=N-Y*Lt,wt.xr=N+Y*Se)):(H==="pixels"?(wt.x=N,wt.l=Ee*Lt,wt.r=Ee*Se):(wt.l=wt.r=0,wt.xl=N+U*Lt,wt.xr=N-U*Se),J==="pixels"?(wt.y=1-$,wt.t=Xe*We,wt.b=Xe*nt):(wt.t=ft*We,wt.b=ft*nt,wt.yt=$-Y*We,wt.yb=$+Y*nt)),k.autoMargin(z,E._id,wt)}],z)}(I,A,T);P&&P.then&&(T._promises||[]).push(P),T._context.edits.colorbarPosition&&function(S,E,z){var D,U,H,Y=E.orientation==="v",J=z._fullLayout._size;t.init({element:S.node(),gd:z,prepFn:function(){D=S.attr("transform"),d(S)},moveFn:function(W,Z){S.attr("transform",D+l(W,Z)),U=t.align((Y?E._uFrac:E._vFrac)+W/J.w,Y?E._thickFrac:E._lenFrac,0,1,E.xanchor),H=t.align((Y?E._vFrac:1-E._uFrac)-Z/J.h,Y?E._lenFrac:E._thickFrac,0,1,E.yanchor);var re=t.getCursor(U,H,E.xanchor,E.yanchor);d(S,re)},doneFn:function(){if(d(S),U!==void 0&&H!==void 0){var W={};W[E._propPrefix+"x"]=U,W[E._propPrefix+"y"]=H,E._traceIndex!==void 0?x.call("_guiRestyle",z,W,E._traceIndex):x.call("_guiRelayout",z,W)}}})}(I,A,T)}),L.exit().each(function(A){k.autoMargin(T,A._id)}).remove(),L.order()}}},{"../../constants/alignment":483,"../../lib":515,"../../lib/extend":505,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_defaults":568,"../../plots/cartesian/layout_attributes":579,"../../plots/cartesian/position_defaults":582,"../../plots/plots":628,"../../registry":647,"../color":367,"../colorscale/helpers":378,"../dragelement":386,"../drawing":389,"../titles":476,"./constants":369,"@plotly/d3":58,tinycolor2:313}],372:[function(g,Q,X){var m=g("../../lib");Q.exports=function(v){return m.isPlainObject(v.colorbar)}},{"../../lib":515}],373:[function(g,Q,X){Q.exports={moduleType:"component",name:"colorbar",attributes:g("./attributes"),supplyDefaults:g("./defaults"),draw:g("./draw").draw,hasColorbar:g("./has_colorbar")}},{"./attributes":368,"./defaults":370,"./draw":371,"./has_colorbar":372}],374:[function(g,Q,X){var m=g("../colorbar/attributes"),v=g("../../lib/regex").counter,k=g("../../lib/sort_object_keys"),x=g("./scales.js").scales;k(x);function e(t){return"`"+t+"`"}Q.exports=function(t,r){t=t||"";var l,n=(r=r||{}).cLetter||"c",d=("onlyIfNumerical"in r?r.onlyIfNumerical:Boolean(t),"noScale"in r?r.noScale:t==="marker.line"),u="showScaleDflt"in r?r.showScaleDflt:n==="z",o=typeof r.colorscaleDflt=="string"?x[r.colorscaleDflt]:null,h=r.editTypeOverride||"",s=t?t+".":"";"colorAttr"in r?(l=r.colorAttr,r.colorAttr):e(s+(l={z:"z",c:"color"}[n]));var a=n+"auto",p=n+"min",c=n+"max",i=n+"mid",y={};y[p]=y[c]=void 0;var f={};f[a]=!1;var w={};return l==="color"&&(w.color={valType:"color",arrayOk:!0,editType:h||"style"},r.anim&&(w.color.anim=!0)),w[a]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:y},w[p]={valType:"number",dflt:null,editType:h||"plot",impliedEdits:f},w[c]={valType:"number",dflt:null,editType:h||"plot",impliedEdits:f},w[i]={valType:"number",dflt:null,editType:"calc",impliedEdits:y},w.colorscale={valType:"colorscale",editType:"calc",dflt:o,impliedEdits:{autocolorscale:!1}},w.autocolorscale={valType:"boolean",dflt:r.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},w.reversescale={valType:"boolean",dflt:!1,editType:"plot"},d||(w.showscale={valType:"boolean",dflt:u,editType:"calc"},w.colorbar=m),r.noColorAxis||(w.coloraxis={valType:"subplotid",regex:v("coloraxis"),dflt:null,editType:"calc"}),w}},{"../../lib/regex":532,"../../lib/sort_object_keys":538,"../colorbar/attributes":368,"./scales.js":382}],375:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../../lib"),k=g("./helpers").extractOpts;Q.exports=function(x,e,t){var r,l=x._fullLayout,n=t.vals,d=t.containerStr,u=d?v.nestedProperty(e,d).get():e,o=k(u),h=o.auto!==!1,s=o.min,a=o.max,p=o.mid,c=function(){return v.aggNums(Math.min,null,n)},i=function(){return v.aggNums(Math.max,null,n)};s===void 0?s=c():h&&(s=u._colorAx&&m(s)?Math.min(s,c()):c()),a===void 0?a=i():h&&(a=u._colorAx&&m(a)?Math.max(a,i()):i()),h&&p!==void 0&&(a-p>p-s?s=p-(a-p):a-p<p-s&&(a=p+(p-s))),s===a&&(s-=.5,a+=.5),o._sync("min",s),o._sync("max",a),o.autocolorscale&&(r=s*a<0?l.colorscale.diverging:s>=0?l.colorscale.sequential:l.colorscale.sequentialminus,o._sync("colorscale",r))}},{"../../lib":515,"./helpers":378,"fast-isnumeric":190}],376:[function(g,Q,X){var m=g("../../lib"),v=g("./helpers").hasColorscale,k=g("./helpers").extractOpts;Q.exports=function(x,e){function t(h,s){var a=h["_"+s];a!==void 0&&(h[s]=a)}function r(h,s){var a=s.container?m.nestedProperty(h,s.container).get():h;if(a)if(a.coloraxis)a._colorAx=e[a.coloraxis];else{var p=k(a),c=p.auto;(c||p.min===void 0)&&t(a,s.min),(c||p.max===void 0)&&t(a,s.max),p.autocolorscale&&t(a,"colorscale")}}for(var l=0;l<x.length;l++){var n=x[l],d=n._module.colorbar;if(d)if(Array.isArray(d))for(var u=0;u<d.length;u++)r(n,d[u]);else r(n,d);v(n,"marker.line")&&r(n,{container:"marker.line",min:"cmin",max:"cmax"})}for(var o in e._colorAxes)r(e[o],{min:"cmin",max:"cmax"})}},{"../../lib":515,"./helpers":378}],377:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../../lib"),k=g("../colorbar/has_colorbar"),x=g("../colorbar/defaults"),e=g("./scales").isValid,t=g("../../registry").traceIs;function r(l,n){var d=n.slice(0,n.length-1);return n?v.nestedProperty(l,d).get()||{}:l}Q.exports=function l(n,d,u,o,h){var s=h.prefix,a=h.cLetter,p="_module"in d,c=r(n,s),i=r(d,s),y=r(d._template||{},s)||{},f=function(){return delete n.coloraxis,delete d.coloraxis,l(n,d,u,o,h)};if(p){var w=u._colorAxes||{},b=o(s+"coloraxis");if(b){var _=t(d,"contour")&&v.nestedProperty(d,"contours.coloring").get()||"heatmap",T=w[b];return void(T?(T[2].push(f),T[0]!==_&&(T[0]=!1,v.warn(["Ignoring coloraxis:",b,"setting","as it is linked to incompatible colorscales."].join(" ")))):w[b]=[_,d,[f]])}}var L=c[a+"min"],A=c[a+"max"],I=m(L)&&m(A)&&L<A;o(s+a+"auto",!I)?o(s+a+"mid"):(o(s+a+"min"),o(s+a+"max"));var P,S,E=c.colorscale,z=y.colorscale;E!==void 0&&(P=!e(E)),z!==void 0&&(P=!e(z)),o(s+"autocolorscale",P),o(s+"colorscale"),o(s+"reversescale"),s!=="marker.line."&&(s&&p&&(S=k(c)),o(s+"showscale",S)&&(s&&y&&(i._template=y),x(c,i,u)))}},{"../../lib":515,"../../registry":647,"../colorbar/defaults":370,"../colorbar/has_colorbar":372,"./scales":382,"fast-isnumeric":190}],378:[function(g,Q,X){var m=g("@plotly/d3"),v=g("tinycolor2"),k=g("fast-isnumeric"),x=g("../../lib"),e=g("../color"),t=g("./scales").isValid,r=["showscale","autocolorscale","colorscale","reversescale","colorbar"],l=["min","max","mid","auto"];function n(s){var a,p,c,i=s._colorAx,y=i||s,f={};for(p=0;p<r.length;p++)f[c=r[p]]=y[c];if(i)for(a="c",p=0;p<l.length;p++)f[c=l[p]]=y["c"+c];else{var w;for(p=0;p<l.length;p++)((w="c"+(c=l[p]))in y||(w="z"+c)in y)&&(f[c]=y[w]);a=w.charAt(0)}return f._sync=function(b,_){var T=l.indexOf(b)!==-1?a+b:b;y[T]=y["_"+T]=_},f}function d(s){for(var a=n(s),p=a.min,c=a.max,i=a.reversescale?u(a.colorscale):a.colorscale,y=i.length,f=new Array(y),w=new Array(y),b=0;b<y;b++){var _=i[b];f[b]=p+_[0]*(c-p),w[b]=_[1]}return{domain:f,range:w}}function u(s){for(var a=s.length,p=new Array(a),c=a-1,i=0;c>=0;c--,i++){var y=s[c];p[i]=[1-y[0],y[1]]}return p}function o(s,a){a=a||{};for(var p=s.domain,c=s.range,i=c.length,y=new Array(i),f=0;f<i;f++){var w=v(c[f]).toRgb();y[f]=[w.r,w.g,w.b,w.a]}var b,_=m.scale.linear().domain(p).range(y).clamp(!0),T=a.noNumericCheck,L=a.returnArray;return(b=T&&L?_:T?function(A){return h(_(A))}:L?function(A){return k(A)?_(A):v(A).isValid()?A:e.defaultLine}:function(A){return k(A)?h(_(A)):v(A).isValid()?A:e.defaultLine}).domain=_.domain,b.range=function(){return c},b}function h(s){var a={r:s[0],g:s[1],b:s[2],a:s[3]};return v(a).toRgbString()}Q.exports={hasColorscale:function(s,a,p){var c=a?x.nestedProperty(s,a).get()||{}:s,i=c[p||"color"],y=!1;if(x.isArrayOrTypedArray(i)){for(var f=0;f<i.length;f++)if(k(i[f])){y=!0;break}}return x.isPlainObject(c)&&(y||c.showscale===!0||k(c.cmin)&&k(c.cmax)||t(c.colorscale)||x.isPlainObject(c.colorbar))},extractOpts:n,extractScale:d,flipScale:u,makeColorScaleFunc:o,makeColorScaleFuncFromTrace:function(s,a){return o(d(s),a)}}},{"../../lib":515,"../color":367,"./scales":382,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],379:[function(g,Q,X){var m=g("./scales"),v=g("./helpers");Q.exports={moduleType:"component",name:"colorscale",attributes:g("./attributes"),layoutAttributes:g("./layout_attributes"),supplyLayoutDefaults:g("./layout_defaults"),handleDefaults:g("./defaults"),crossTraceDefaults:g("./cross_trace_defaults"),calc:g("./calc"),scales:m.scales,defaultScale:m.defaultScale,getScale:m.get,isValidScale:m.isValid,hasColorscale:v.hasColorscale,extractOpts:v.extractOpts,extractScale:v.extractScale,flipScale:v.flipScale,makeColorScaleFunc:v.makeColorScaleFunc,makeColorScaleFuncFromTrace:v.makeColorScaleFuncFromTrace}},{"./attributes":374,"./calc":375,"./cross_trace_defaults":376,"./defaults":377,"./helpers":378,"./layout_attributes":380,"./layout_defaults":381,"./scales":382}],380:[function(g,Q,X){var m=g("../../lib/extend").extendFlat,v=g("./attributes"),k=g("./scales").scales;Q.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:k.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:k.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:k.RdBu,editType:"calc"}},coloraxis:m({_isSubplotObj:!0,editType:"calc"},v("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":505,"./attributes":374,"./scales":382}],381:[function(g,Q,X){var m=g("../../lib"),v=g("../../plot_api/plot_template"),k=g("./layout_attributes"),x=g("./defaults");Q.exports=function(e,t){function r(a,p){return m.coerce(e,t,k,a,p)}r("colorscale.sequential"),r("colorscale.sequentialminus"),r("colorscale.diverging");var l,n,d=t._colorAxes;function u(a,p){return m.coerce(l,n,k.coloraxis,a,p)}for(var o in d){var h=d[o];if(h[0])l=e[o]||{},(n=v.newContainer(t,o,"coloraxis"))._name=o,x(l,n,t,u,{prefix:"",cLetter:"c"});else{for(var s=0;s<h[2].length;s++)h[2][s]();delete t._colorAxes[o]}}}},{"../../lib":515,"../../plot_api/plot_template":555,"./defaults":377,"./layout_attributes":380}],382:[function(g,Q,X){var m=g("tinycolor2"),v={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},k=v.RdBu;function x(e){var t=0;if(!Array.isArray(e)||e.length<2||!e[0]||!e[e.length-1]||+e[0][0]!=0||+e[e.length-1][0]!=1)return!1;for(var r=0;r<e.length;r++){var l=e[r];if(l.length!==2||+l[0]<t||!m(l[1]).isValid())return!1;t=+l[0]}return!0}Q.exports={scales:v,defaultScale:k,get:function(e,t){if(t||(t=k),!e)return t;function r(){try{e=v[e]||JSON.parse(e)}catch{e=t}}return typeof e=="string"&&(r(),typeof e=="string"&&r()),x(e)?e:t},isValid:function(e){return v[e]!==void 0||x(e)}}},{tinycolor2:313}],383:[function(g,Q,X){Q.exports=function(m,v,k,x,e){var t=(m-k)/(x-k),r=t+v/(x-k),l=(t+r)/2;return e==="left"||e==="bottom"?t:e==="center"||e==="middle"?l:e==="right"||e==="top"?r:t<2/3-l?t:r>4/3-l?r:l}},{}],384:[function(g,Q,X){var m=g("../../lib"),v=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];Q.exports=function(k,x,e,t){return k=e==="left"?0:e==="center"?1:e==="right"?2:m.constrain(Math.floor(3*k),0,2),x=t==="bottom"?0:t==="middle"?1:t==="top"?2:m.constrain(Math.floor(3*x),0,2),v[x][k]}},{"../../lib":515}],385:[function(g,Q,X){X.selectMode=function(m){return m==="lasso"||m==="select"},X.drawMode=function(m){return m==="drawclosedpath"||m==="drawopenpath"||m==="drawline"||m==="drawrect"||m==="drawcircle"},X.openMode=function(m){return m==="drawline"||m==="drawopenpath"},X.rectMode=function(m){return m==="select"||m==="drawline"||m==="drawrect"||m==="drawcircle"},X.freeMode=function(m){return m==="lasso"||m==="drawclosedpath"||m==="drawopenpath"},X.selectingOrDrawing=function(m){return X.freeMode(m)||X.rectMode(m)}},{}],386:[function(g,Q,X){var m=g("mouse-event-offset"),v=g("has-hover"),k=g("has-passive-events"),x=g("../../lib").removeElement,e=g("../../plots/cartesian/constants"),t=Q.exports={};t.align=g("./align"),t.getCursor=g("./cursor");var r=g("./unhover");function l(){var d=document.createElement("div");d.className="dragcover";var u=d.style;return u.position="fixed",u.left=0,u.right=0,u.top=0,u.bottom=0,u.zIndex=999999999,u.background="none",document.body.appendChild(d),d}function n(d){return m(d.changedTouches?d.changedTouches[0]:d,document.body)}t.unhover=r.wrapped,t.unhoverRaw=r.raw,t.init=function(d){var u,o,h,s,a,p,c,i,y=d.gd,f=1,w=y._context.doubleClickDelay,b=d.element;y._mouseDownTime||(y._mouseDownTime=0),b.style.pointerEvents="all",b.onmousedown=T,k?(b._ontouchstart&&b.removeEventListener("touchstart",b._ontouchstart),b._ontouchstart=T,b.addEventListener("touchstart",T,{passive:!1})):b.ontouchstart=T;var _=d.clampFn||function(I,P,S){return Math.abs(I)<S&&(I=0),Math.abs(P)<S&&(P=0),[I,P]};function T(I){y._dragged=!1,y._dragging=!0;var P=n(I);u=P[0],o=P[1],c=I.target,p=I,i=I.buttons===2||I.ctrlKey,I.clientX===void 0&&I.clientY===void 0&&(I.clientX=u,I.clientY=o),(h=new Date().getTime())-y._mouseDownTime<w?f+=1:(f=1,y._mouseDownTime=h),d.prepFn&&d.prepFn(I,u,o),v&&!i?(a=l()).style.cursor=window.getComputedStyle(b).cursor:v||(a=document,s=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(b).cursor),document.addEventListener("mouseup",A),document.addEventListener("touchend",A),d.dragmode!==!1&&(I.preventDefault(),document.addEventListener("mousemove",L),document.addEventListener("touchmove",L,{passive:!1}))}function L(I){I.preventDefault();var P=n(I),S=d.minDrag||e.MINDRAG,E=_(P[0]-u,P[1]-o,S),z=E[0],D=E[1];(z||D)&&(y._dragged=!0,t.unhover(y,I)),y._dragged&&d.moveFn&&!i&&(y._dragdata={element:b,dx:z,dy:D},d.moveFn(z,D))}function A(I){if(delete y._dragdata,d.dragmode!==!1&&(I.preventDefault(),document.removeEventListener("mousemove",L),document.removeEventListener("touchmove",L)),document.removeEventListener("mouseup",A),document.removeEventListener("touchend",A),v?x(a):s&&(a.documentElement.style.cursor=s,s=null),y._dragging){if(y._dragging=!1,new Date().getTime()-y._mouseDownTime>w&&(f=Math.max(f-1,1)),y._dragged)d.doneFn&&d.doneFn();else if(d.clickFn&&d.clickFn(f,p),!i){var P;try{P=new MouseEvent("click",I)}catch{var S=n(I);(P=document.createEvent("MouseEvents")).initMouseEvent("click",I.bubbles,I.cancelable,I.view,I.detail,I.screenX,I.screenY,S[0],S[1],I.ctrlKey,I.altKey,I.shiftKey,I.metaKey,I.button,I.relatedTarget)}c.dispatchEvent(P)}y._dragging=!1,y._dragged=!1}else y._dragged=!1}},t.coverSlip=l},{"../../lib":515,"../../plots/cartesian/constants":573,"./align":383,"./cursor":384,"./unhover":387,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],387:[function(g,Q,X){var m=g("../../lib/events"),v=g("../../lib/throttle"),k=g("../../lib/dom").getGraphDiv,x=g("../fx/constants"),e=Q.exports={};e.wrapped=function(t,r,l){(t=k(t))._fullLayout&&v.clear(t._fullLayout._uid+x.HOVERID),e.raw(t,r,l)},e.raw=function(t,r){var l=t._fullLayout,n=t._hoverdata;r||(r={}),r.target&&!t._dragged&&m.triggerHandler(t,"plotly_beforehover",r)===!1||(l._hoverlayer.selectAll("g").remove(),l._hoverlayer.selectAll("line").remove(),l._hoverlayer.selectAll("circle").remove(),t._hoverdata=void 0,r.target&&n&&t.emit("plotly_unhover",{event:r,points:n}))}},{"../../lib/dom":503,"../../lib/events":504,"../../lib/throttle":542,"../fx/constants":401}],388:[function(g,Q,X){X.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},X.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],389:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../lib"),k=v.numberFormat,x=g("fast-isnumeric"),e=g("tinycolor2"),t=g("../../registry"),r=g("../color"),l=g("../colorscale"),n=v.strTranslate,d=g("../../lib/svg_text_utils"),u=g("../../constants/xmlns_namespaces"),o=g("../../constants/alignment").LINE_SPACING,h=g("../../constants/interactions").DESELECTDIM,s=g("../../traces/scatter/subtypes"),a=g("../../traces/scatter/make_bubble_size_func"),p=g("../../components/fx/helpers").appendArrayPointValue,c=Q.exports={};function i(pe,ge,we){var oe=ge.fillpattern,de=oe&&c.getPatternAttr(oe.shape,0,"");if(de){var Te=c.getPatternAttr(oe.bgcolor,0,null),Ee=c.getPatternAttr(oe.fgcolor,0,null),Me=oe.fgopacity,De=c.getPatternAttr(oe.size,0,8),Ie=c.getPatternAttr(oe.solidity,0,.3),Oe=ge.uid;c.pattern(pe,"point",we,Oe,de,De,Ie,void 0,oe.fillmode,Te,Ee,Me)}else ge.fillcolor&&pe.call(r.fill,ge.fillcolor)}c.font=function(pe,ge,we,oe){v.isPlainObject(ge)&&(oe=ge.color,we=ge.size,ge=ge.family),ge&&pe.style("font-family",ge),we+1&&pe.style("font-size",we+"px"),oe&&pe.call(r.fill,oe)},c.setPosition=function(pe,ge,we){pe.attr("x",ge).attr("y",we)},c.setSize=function(pe,ge,we){pe.attr("width",ge).attr("height",we)},c.setRect=function(pe,ge,we,oe,de){pe.call(c.setPosition,ge,we).call(c.setSize,oe,de)},c.translatePoint=function(pe,ge,we,oe){var de=we.c2p(pe.x),Te=oe.c2p(pe.y);return!!(x(de)&&x(Te)&&ge.node())&&(ge.node().nodeName==="text"?ge.attr("x",de).attr("y",Te):ge.attr("transform",n(de,Te)),!0)},c.translatePoints=function(pe,ge,we){pe.each(function(oe){var de=m.select(this);c.translatePoint(oe,de,ge,we)})},c.hideOutsideRangePoint=function(pe,ge,we,oe,de,Te){ge.attr("display",we.isPtWithinRange(pe,de)&&oe.isPtWithinRange(pe,Te)?null:"none")},c.hideOutsideRangePoints=function(pe,ge){if(ge._hasClipOnAxisFalse){var we=ge.xaxis,oe=ge.yaxis;pe.each(function(de){var Te=de[0].trace,Ee=Te.xcalendar,Me=Te.ycalendar,De=t.traceIs(Te,"bar-like")?".bartext":".point,.textpoint";pe.selectAll(De).each(function(Ie){c.hideOutsideRangePoint(Ie,m.select(this),we,oe,Ee,Me)})})}},c.crispRound=function(pe,ge,we){return ge&&x(ge)?pe._context.staticPlot?ge:ge<1?1:Math.round(ge):we||0},c.singleLineStyle=function(pe,ge,we,oe,de){ge.style("fill","none");var Te=(((pe||[])[0]||{}).trace||{}).line||{},Ee=we||Te.width||0,Me=de||Te.dash||"";r.stroke(ge,oe||Te.color),c.dashLine(ge,Me,Ee)},c.lineGroupStyle=function(pe,ge,we,oe){pe.style("fill","none").each(function(de){var Te=(((de||[])[0]||{}).trace||{}).line||{},Ee=ge||Te.width||0,Me=oe||Te.dash||"";m.select(this).call(r.stroke,we||Te.color).call(c.dashLine,Me,Ee)})},c.dashLine=function(pe,ge,we){we=+we||0,ge=c.dashStyle(ge,we),pe.style({"stroke-dasharray":ge,"stroke-width":we+"px"})},c.dashStyle=function(pe,ge){ge=+ge||1;var we=Math.max(ge,3);return pe==="solid"?pe="":pe==="dot"?pe=we+"px,"+we+"px":pe==="dash"?pe=3*we+"px,"+3*we+"px":pe==="longdash"?pe=5*we+"px,"+5*we+"px":pe==="dashdot"?pe=3*we+"px,"+we+"px,"+we+"px,"+we+"px":pe==="longdashdot"&&(pe=5*we+"px,"+2*we+"px,"+we+"px,"+2*we+"px"),pe},c.singleFillStyle=function(pe,ge){var we=m.select(pe.node());i(pe,((we.data()[0]||[])[0]||{}).trace||{},ge)},c.fillGroupStyle=function(pe,ge){pe.style("stroke-width",0).each(function(we){var oe=m.select(this);we[0].trace&&i(oe,we[0].trace,ge)})};var y=g("./symbol_defs");c.symbolNames=[],c.symbolFuncs=[],c.symbolBackOffs=[],c.symbolNeedLines={},c.symbolNoDot={},c.symbolNoFill={},c.symbolList=[],Object.keys(y).forEach(function(pe){var ge=y[pe],we=ge.n;c.symbolList.push(we,String(we),pe,we+100,String(we+100),pe+"-open"),c.symbolNames[we]=pe,c.symbolFuncs[we]=ge.f,c.symbolBackOffs[we]=ge.backoff||0,ge.needLine&&(c.symbolNeedLines[we]=!0),ge.noDot?c.symbolNoDot[we]=!0:c.symbolList.push(we+200,String(we+200),pe+"-dot",we+300,String(we+300),pe+"-open-dot"),ge.noFill&&(c.symbolNoFill[we]=!0)});var f=c.symbolNames.length;function w(pe,ge,we,oe){var de=pe%100;return c.symbolFuncs[de](ge,we,oe)+(pe>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}c.symbolNumber=function(pe){if(x(pe))pe=+pe;else if(typeof pe=="string"){var ge=0;pe.indexOf("-open")>0&&(ge=100,pe=pe.replace("-open","")),pe.indexOf("-dot")>0&&(ge+=200,pe=pe.replace("-dot","")),(pe=c.symbolNames.indexOf(pe))>=0&&(pe+=ge)}return pe%100>=f||pe>=400?0:Math.floor(Math.max(pe,0))};var b={x1:1,x2:0,y1:0,y2:0},_={x1:0,x2:0,y1:1,y2:0},T=k("~f"),L={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:b},horizontalreversed:{node:"linearGradient",attrs:b,reversed:!0},vertical:{node:"linearGradient",attrs:_},verticalreversed:{node:"linearGradient",attrs:_,reversed:!0}};c.gradient=function(pe,ge,we,oe,de,Te){for(var Ee=de.length,Me=L[oe],De=new Array(Ee),Ie=0;Ie<Ee;Ie++)Me.reversed?De[Ee-1-Ie]=[T(100*(1-de[Ie][0])),de[Ie][1]]:De[Ie]=[T(100*de[Ie][0]),de[Ie][1]];var Oe=ge._fullLayout,Ze="g"+Oe._uid+"-"+we,Fe=Oe._defs.select(".gradients").selectAll("#"+Ze).data([oe+De.join(";")],v.identity);Fe.exit().remove(),Fe.enter().append(Me.node).each(function(){var Pe=m.select(this);Me.attrs&&Pe.attr(Me.attrs),Pe.attr("id",Ze);var ze=Pe.selectAll("stop").data(De);ze.exit().remove(),ze.enter().append("stop"),ze.each(function(Ge){var $e=e(Ge[1]);m.select(this).attr({offset:Ge[0]+"%","stop-color":r.tinyRGB($e),"stop-opacity":$e.getAlpha()})})}),pe.style(Te,V(Ze,ge)).style(Te+"-opacity",null),pe.classed("gradient_filled",!0)},c.pattern=function(pe,ge,we,oe,de,Te,Ee,Me,De,Ie,Oe,Ze){var Fe=ge==="legend";Me&&(De==="overlay"?(Ie=Me,Oe=r.contrast(Ie)):(Ie=void 0,Oe=Me));var Pe,ze,Ge,$e,ot,vt,bt,yt,tt,Ke,mt,Ft=we._fullLayout,Vt="p"+Ft._uid+"-"+oe,Xt={},Gt=e(Oe),nr=r.tinyRGB(Gt),It=Ze*Gt.getAlpha();switch(de){case"/":Pe=Te*Math.sqrt(2),ze=Te*Math.sqrt(2),vt="path",Xt={d:Ge="M-"+Pe/4+","+ze/4+"l"+Pe/2+",-"+ze/2+"M0,"+ze+"L"+Pe+",0M"+Pe/4*3+","+ze/4*5+"l"+Pe/2+",-"+ze/2,opacity:It,stroke:nr,"stroke-width":($e=Ee*Te)+"px"};break;case"\\":Pe=Te*Math.sqrt(2),ze=Te*Math.sqrt(2),vt="path",Xt={d:Ge="M"+Pe/4*3+",-"+ze/4+"l"+Pe/2+","+ze/2+"M0,0L"+Pe+","+ze+"M-"+Pe/4+","+ze/4*3+"l"+Pe/2+","+ze/2,opacity:It,stroke:nr,"stroke-width":($e=Ee*Te)+"px"};break;case"x":Pe=Te*Math.sqrt(2),ze=Te*Math.sqrt(2),Ge="M-"+Pe/4+","+ze/4+"l"+Pe/2+",-"+ze/2+"M0,"+ze+"L"+Pe+",0M"+Pe/4*3+","+ze/4*5+"l"+Pe/2+",-"+ze/2+"M"+Pe/4*3+",-"+ze/4+"l"+Pe/2+","+ze/2+"M0,0L"+Pe+","+ze+"M-"+Pe/4+","+ze/4*3+"l"+Pe/2+","+ze/2,$e=Te-Te*Math.sqrt(1-Ee),vt="path",Xt={d:Ge,opacity:It,stroke:nr,"stroke-width":$e+"px"};break;case"|":vt="path",vt="path",Xt={d:Ge="M"+(Pe=Te)/2+",0L"+Pe/2+","+(ze=Te),opacity:It,stroke:nr,"stroke-width":($e=Ee*Te)+"px"};break;case"-":vt="path",vt="path",Xt={d:Ge="M0,"+(ze=Te)/2+"L"+(Pe=Te)+","+ze/2,opacity:It,stroke:nr,"stroke-width":($e=Ee*Te)+"px"};break;case"+":vt="path",Ge="M"+(Pe=Te)/2+",0L"+Pe/2+","+(ze=Te)+"M0,"+ze/2+"L"+Pe+","+ze/2,$e=Te-Te*Math.sqrt(1-Ee),vt="path",Xt={d:Ge,opacity:It,stroke:nr,"stroke-width":$e+"px"};break;case".":Pe=Te,ze=Te,Ee<Math.PI/4?ot=Math.sqrt(Ee*Te*Te/Math.PI):(bt=Ee,yt=Math.PI/4,tt=1,Ke=Te/2,mt=Te/Math.sqrt(2),ot=Ke+(mt-Ke)*(bt-yt)/(tt-yt)),vt="circle",Xt={cx:Pe/2,cy:ze/2,r:ot,opacity:It,fill:nr}}var Be=[de||"noSh",Ie||"noBg",Oe||"noFg",Te,Ee].join(";"),He=Ft._defs.select(".patterns").selectAll("#"+Vt).data([Be],v.identity);He.exit().remove(),He.enter().append("pattern").each(function(){var he=m.select(this);if(he.attr({id:Vt,width:Pe+"px",height:ze+"px",patternUnits:"userSpaceOnUse",patternTransform:Fe?"scale(0.8)":""}),Ie){var be=e(Ie),Re=r.tinyRGB(be),Ue=be.getAlpha(),Xe=he.selectAll("rect").data([0]);Xe.exit().remove(),Xe.enter().append("rect").attr({width:Pe+"px",height:ze+"px",fill:Re,"fill-opacity":Ue})}var qe=he.selectAll(vt).data([0]);qe.exit().remove(),qe.enter().append(vt).attr(Xt)}),pe.style("fill",V(Vt,we)).style("fill-opacity",null),pe.classed("pattern_filled",!0)},c.initGradients=function(pe){var ge=pe._fullLayout;v.ensureSingle(ge._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),m.select(pe).selectAll(".gradient_filled").classed("gradient_filled",!1)},c.initPatterns=function(pe){var ge=pe._fullLayout;v.ensureSingle(ge._defs,"g","patterns").selectAll("pattern").remove(),m.select(pe).selectAll(".pattern_filled").classed("pattern_filled",!1)},c.getPatternAttr=function(pe,ge,we){return pe&&v.isArrayOrTypedArray(pe)?ge<pe.length?pe[ge]:we:pe},c.pointStyle=function(pe,ge,we){if(pe.size()){var oe=c.makePointStyleFns(ge);pe.each(function(de){c.singlePointStyle(de,m.select(this),ge,oe,we)})}},c.singlePointStyle=function(pe,ge,we,oe,de){var Te=we.marker,Ee=Te.line;if(ge.style("opacity",oe.selectedOpacityFn?oe.selectedOpacityFn(pe):pe.mo===void 0?Te.opacity:pe.mo),oe.ms2mrc){var Me;Me=pe.ms==="various"||Te.size==="various"?3:oe.ms2mrc(pe.ms),pe.mrc=Me,oe.selectedSizeFn&&(Me=pe.mrc=oe.selectedSizeFn(pe));var De=c.symbolNumber(pe.mx||Te.symbol)||0;pe.om=De%200>=100;var Ie=Ae(pe,we),Oe=ee(pe,we);ge.attr("d",w(De,Me,Ie,Oe))}var Ze,Fe,Pe,ze=!1;if(pe.so)Pe=Ee.outlierwidth,Fe=Ee.outliercolor,Ze=Te.outliercolor;else{var Ge=(Ee||{}).width;Pe=(pe.mlw+1||Ge+1||(pe.trace?(pe.trace.marker.line||{}).width:0)+1)-1||0,Fe="mlc"in pe?pe.mlcc=oe.lineScale(pe.mlc):v.isArrayOrTypedArray(Ee.color)?r.defaultLine:Ee.color,v.isArrayOrTypedArray(Te.color)&&(Ze=r.defaultLine,ze=!0),Ze="mc"in pe?pe.mcc=oe.markerScale(pe.mc):Te.color||"rgba(0,0,0,0)",oe.selectedColorFn&&(Ze=oe.selectedColorFn(pe))}if(pe.om)ge.call(r.stroke,Ze).style({"stroke-width":(Pe||1)+"px",fill:"none"});else{ge.style("stroke-width",(pe.isBlank?0:Pe)+"px");var $e=Te.gradient,ot=pe.mgt;ot?ze=!0:ot=$e&&$e.type,v.isArrayOrTypedArray(ot)&&(ot=ot[0],L[ot]||(ot=0));var vt=Te.pattern,bt=vt&&c.getPatternAttr(vt.shape,pe.i,"");if(ot&&ot!=="none"){var yt=pe.mgc;yt?ze=!0:yt=$e.color;var tt=we.uid;ze&&(tt+="-"+pe.i),c.gradient(ge,de,tt,ot,[[0,yt],[1,Ze]],"fill")}else if(bt){var Ke=c.getPatternAttr(vt.bgcolor,pe.i,null),mt=c.getPatternAttr(vt.fgcolor,pe.i,null),Ft=vt.fgopacity,Vt=c.getPatternAttr(vt.size,pe.i,8),Xt=c.getPatternAttr(vt.solidity,pe.i,.3),Gt=pe.mcc||v.isArrayOrTypedArray(vt.shape)||v.isArrayOrTypedArray(vt.bgcolor)||v.isArrayOrTypedArray(vt.size)||v.isArrayOrTypedArray(vt.solidity),nr=we.uid;Gt&&(nr+="-"+pe.i),c.pattern(ge,"point",de,nr,bt,Vt,Xt,pe.mcc,vt.fillmode,Ke,mt,Ft)}else r.fill(ge,Ze);Pe&&r.stroke(ge,Fe)}},c.makePointStyleFns=function(pe){var ge={},we=pe.marker;return ge.markerScale=c.tryColorscale(we,""),ge.lineScale=c.tryColorscale(we,"line"),t.traceIs(pe,"symbols")&&(ge.ms2mrc=s.isBubble(pe)?a(pe):function(){return(we.size||6)/2}),pe.selectedpoints&&v.extendFlat(ge,c.makeSelectedPointStyleFns(pe)),ge},c.makeSelectedPointStyleFns=function(pe){var ge={},we=pe.selected||{},oe=pe.unselected||{},de=pe.marker||{},Te=we.marker||{},Ee=oe.marker||{},Me=de.opacity,De=Te.opacity,Ie=Ee.opacity,Oe=De!==void 0,Ze=Ie!==void 0;(v.isArrayOrTypedArray(Me)||Oe||Ze)&&(ge.selectedOpacityFn=function(yt){var tt=yt.mo===void 0?de.opacity:yt.mo;return yt.selected?Oe?De:tt:Ze?Ie:h*tt});var Fe=de.color,Pe=Te.color,ze=Ee.color;(Pe||ze)&&(ge.selectedColorFn=function(yt){var tt=yt.mcc||Fe;return yt.selected?Pe||tt:ze||tt});var Ge=de.size,$e=Te.size,ot=Ee.size,vt=$e!==void 0,bt=ot!==void 0;return t.traceIs(pe,"symbols")&&(vt||bt)&&(ge.selectedSizeFn=function(yt){var tt=yt.mrc||Ge/2;return yt.selected?vt?$e/2:tt:bt?ot/2:tt}),ge},c.makeSelectedTextStyleFns=function(pe){var ge={},we=pe.selected||{},oe=pe.unselected||{},de=pe.textfont||{},Te=we.textfont||{},Ee=oe.textfont||{},Me=de.color,De=Te.color,Ie=Ee.color;return ge.selectedTextColorFn=function(Oe){var Ze=Oe.tc||Me;return Oe.selected?De||Ze:Ie||(De?Ze:r.addOpacity(Ze,h))},ge},c.selectedPointStyle=function(pe,ge){if(pe.size()&&ge.selectedpoints){var we=c.makeSelectedPointStyleFns(ge),oe=ge.marker||{},de=[];we.selectedOpacityFn&&de.push(function(Te,Ee){Te.style("opacity",we.selectedOpacityFn(Ee))}),we.selectedColorFn&&de.push(function(Te,Ee){r.fill(Te,we.selectedColorFn(Ee))}),we.selectedSizeFn&&de.push(function(Te,Ee){var Me=Ee.mx||oe.symbol||0,De=we.selectedSizeFn(Ee);Te.attr("d",w(c.symbolNumber(Me),De,Ae(Ee,ge),ee(Ee,ge))),Ee.mrc2=De}),de.length&&pe.each(function(Te){for(var Ee=m.select(this),Me=0;Me<de.length;Me++)de[Me](Ee,Te)})}},c.tryColorscale=function(pe,ge){var we=ge?v.nestedProperty(pe,ge).get():pe;if(we){var oe=we.color;if((we.colorscale||we._colorAx)&&v.isArrayOrTypedArray(oe))return l.makeColorScaleFuncFromTrace(we)}return v.identity};var A={start:1,end:-1,middle:0,bottom:1,top:-1};function I(pe,ge,we,oe,de){var Te=m.select(pe.node().parentNode),Ee=ge.indexOf("top")!==-1?"top":ge.indexOf("bottom")!==-1?"bottom":"middle",Me=ge.indexOf("left")!==-1?"end":ge.indexOf("right")!==-1?"start":"middle",De=oe?oe/.8+1:0,Ie=(d.lineCount(pe)-1)*o+1,Oe=A[Me]*De,Ze=.75*we+A[Ee]*De+(A[Ee]-1)*Ie*we/2;pe.attr("text-anchor",Me),de||Te.attr("transform",n(Oe,Ze))}function P(pe,ge){var we=pe.ts||ge.textfont.size;return x(we)&&we>0?we:0}c.textPointStyle=function(pe,ge,we){if(pe.size()){var oe;if(ge.selectedpoints){var de=c.makeSelectedTextStyleFns(ge);oe=de.selectedTextColorFn}var Te=ge.texttemplate,Ee=we._fullLayout;pe.each(function(Me){var De=m.select(this),Ie=Te?v.extractOption(Me,ge,"txt","texttemplate"):v.extractOption(Me,ge,"tx","text");if(Ie||Ie===0){if(Te){var Oe=ge._module.formatLabels,Ze=Oe?Oe(Me,ge,Ee):{},Fe={};p(Fe,ge,Me.i);var Pe=ge._meta||{};Ie=v.texttemplateString(Ie,Ze,Ee._d3locale,Fe,Me,Pe)}var ze=Me.tp||ge.textposition,Ge=P(Me,ge),$e=oe?oe(Me):Me.tc||ge.textfont.color;De.call(c.font,Me.tf||ge.textfont.family,Ge,$e).text(Ie).call(d.convertToTspans,we).call(I,ze,Ge,Me.mrc)}else De.remove()})}},c.selectedTextStyle=function(pe,ge){if(pe.size()&&ge.selectedpoints){var we=c.makeSelectedTextStyleFns(ge);pe.each(function(oe){var de=m.select(this),Te=we.selectedTextColorFn(oe),Ee=oe.tp||ge.textposition,Me=P(oe,ge);r.fill(de,Te);var De=t.traceIs(ge,"bar-like");I(de,Ee,Me,oe.mrc2||oe.mrc,De)})}};var S,E;function z(pe,ge,we){return we&&(pe=W(pe)),ge?U(pe[1]):D(pe[0])}function D(pe){var ge=m.round(pe,2);return S=ge,ge}function U(pe){var ge=m.round(pe,2);return E=ge,ge}function H(pe,ge,we,oe){var de=pe[0]-ge[0],Te=pe[1]-ge[1],Ee=we[0]-ge[0],Me=we[1]-ge[1],De=Math.pow(de*de+Te*Te,.25),Ie=Math.pow(Ee*Ee+Me*Me,.25),Oe=(Ie*Ie*de-De*De*Ee)*oe,Ze=(Ie*Ie*Te-De*De*Me)*oe,Fe=3*Ie*(De+Ie),Pe=3*De*(De+Ie);return[[D(ge[0]+(Fe&&Oe/Fe)),U(ge[1]+(Fe&&Ze/Fe))],[D(ge[0]-(Pe&&Oe/Pe)),U(ge[1]-(Pe&&Ze/Pe))]]}c.smoothopen=function(pe,ge){if(pe.length<3)return"M"+pe.join("L");var we,oe="M"+pe[0],de=[];for(we=1;we<pe.length-1;we++)de.push(H(pe[we-1],pe[we],pe[we+1],ge));for(oe+="Q"+de[0][0]+" "+pe[1],we=2;we<pe.length-1;we++)oe+="C"+de[we-2][1]+" "+de[we-1][0]+" "+pe[we];return oe+="Q"+de[pe.length-3][1]+" "+pe[pe.length-1]},c.smoothclosed=function(pe,ge){if(pe.length<3)return"M"+pe.join("L")+"Z";var we,oe="M"+pe[0],de=pe.length-1,Te=[H(pe[de],pe[0],pe[1],ge)];for(we=1;we<de;we++)Te.push(H(pe[we-1],pe[we],pe[we+1],ge));for(Te.push(H(pe[de-1],pe[de],pe[0],ge)),we=1;we<=de;we++)oe+="C"+Te[we-1][1]+" "+Te[we][0]+" "+pe[we];return oe+="C"+Te[de][1]+" "+Te[0][0]+" "+pe[0]+"Z"};var Y={hv:function(pe,ge,we){return"H"+D(ge[0])+"V"+z(ge,1,we)},vh:function(pe,ge,we){return"V"+U(ge[1])+"H"+z(ge,0,we)},hvh:function(pe,ge,we){return"H"+D((pe[0]+ge[0])/2)+"V"+U(ge[1])+"H"+z(ge,0,we)},vhv:function(pe,ge,we){return"V"+U((pe[1]+ge[1])/2)+"H"+D(ge[0])+"V"+z(ge,1,we)}},J=function(pe,ge,we){return"L"+z(ge,0,we)+","+z(ge,1,we)};function W(pe,ge){var we=pe.backoff,oe=pe.trace,de=pe.d,Te=pe.i;if(we&&oe&&oe.marker&&oe.marker.angle%360==0&&oe.line&&oe.line.shape!=="spline"){var Ee=v.isArrayOrTypedArray(we),Me=pe,De=ge?ge[0]:S||0,Ie=ge?ge[1]:E||0,Oe=Me[0],Ze=Me[1],Fe=Oe-De,Pe=Ze-Ie,ze=Math.atan2(Pe,Fe),Ge=Ee?we[Te]:we;if(Ge==="auto"){var $e=Me.i;oe.type==="scatter"&&$e--;var ot=Me.marker;Ge=ot?c.symbolBackOffs[c.symbolNumber(ot.symbol)]*ot.size:0,Ge+=c.getMarkerStandoff(de[$e],oe)||0}var vt=Oe-Ge*Math.cos(ze),bt=Ze-Ge*Math.sin(ze);(vt<=Oe&&vt>=De||vt>=Oe&&vt<=De)&&(bt<=Ze&&bt>=Ie||bt>=Ze&&bt<=Ie)&&(pe=[vt,bt])}return pe}c.steps=function(pe){var ge=Y[pe]||J;return function(we){for(var oe="M"+D(we[0][0])+","+U(we[0][1]),de=we.length,Te=1;Te<de;Te++)oe+=ge(we[Te-1],we[Te],Te===de-1);return oe}},c.applyBackoff=W,c.makeTester=function(){var pe=v.ensureSingleById(m.select("body"),"svg","js-plotly-tester",function(we){we.attr(u.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),ge=v.ensureSingle(pe,"path","js-reference-point",function(we){we.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});c.tester=pe,c.testref=ge},c.savedBBoxes={};var Z=0;function re(pe){var ge=pe.getAttribute("data-unformatted");if(ge!==null)return ge+pe.getAttribute("data-math")+pe.getAttribute("text-anchor")+pe.getAttribute("style")}function V(pe,ge){if(!pe)return null;var we=ge._context,oe=we._exportedPlot?"":we._baseUrl||"";return oe?"url('"+oe+"#"+pe+"')":"url(#"+pe+")"}c.bBox=function(pe,ge,we){var oe,de,Te;if(we||(we=re(pe)),we){if(oe=c.savedBBoxes[we])return v.extendFlat({},oe)}else if(pe.childNodes.length===1){var Ee=pe.childNodes[0];if(we=re(Ee)){var Me=+Ee.getAttribute("x")||0,De=+Ee.getAttribute("y")||0,Ie=Ee.getAttribute("transform");if(!Ie){var Oe=c.bBox(Ee,!1,we);return Me&&(Oe.left+=Me,Oe.right+=Me),De&&(Oe.top+=De,Oe.bottom+=De),Oe}if(we+="~"+Me+"~"+De+"~"+Ie,oe=c.savedBBoxes[we])return v.extendFlat({},oe)}}ge?de=pe:(Te=c.tester.node(),de=pe.cloneNode(!0),Te.appendChild(de)),m.select(de).attr("transform",null).call(d.positionText,0,0);var Ze=de.getBoundingClientRect(),Fe=c.testref.node().getBoundingClientRect();ge||Te.removeChild(de);var Pe={height:Ze.height,width:Ze.width,left:Ze.left-Fe.left,top:Ze.top-Fe.top,right:Ze.right-Fe.left,bottom:Ze.bottom-Fe.top};return Z>=1e4&&(c.savedBBoxes={},Z=0),we&&(c.savedBBoxes[we]=Pe),Z++,v.extendFlat({},Pe)},c.setClipUrl=function(pe,ge,we){pe.attr("clip-path",V(ge,we))},c.getTranslate=function(pe){var ge=(pe[pe.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(we,oe,de){return[oe,de].join(" ")}).split(" ");return{x:+ge[0]||0,y:+ge[1]||0}},c.setTranslate=function(pe,ge,we){var oe=pe.attr?"attr":"getAttribute",de=pe.attr?"attr":"setAttribute",Te=pe[oe]("transform")||"";return ge=ge||0,we=we||0,Te=Te.replace(/(\btranslate\(.*?\);?)/,"").trim(),Te=(Te+=n(ge,we)).trim(),pe[de]("transform",Te),Te},c.getScale=function(pe){var ge=(pe[pe.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(we,oe,de){return[oe,de].join(" ")}).split(" ");return{x:+ge[0]||1,y:+ge[1]||1}},c.setScale=function(pe,ge,we){var oe=pe.attr?"attr":"getAttribute",de=pe.attr?"attr":"setAttribute",Te=pe[oe]("transform")||"";return ge=ge||1,we=we||1,Te=Te.replace(/(\bscale\(.*?\);?)/,"").trim(),Te=(Te+="scale("+ge+","+we+")").trim(),pe[de]("transform",Te),Te};var B=/\s*sc.*/;c.setPointGroupScale=function(pe,ge,we){if(ge=ge||1,we=we||1,pe){var oe=ge===1&&we===1?"":"scale("+ge+","+we+")";pe.each(function(){var de=(this.getAttribute("transform")||"").replace(B,"");de=(de+=oe).trim(),this.setAttribute("transform",de)})}};var j=/translate\([^)]*\)\s*$/;function ee(pe,ge){var we;return pe&&(we=pe.mf),we===void 0&&(we=ge.marker&&ge.marker.standoff||0),ge._geo||ge._xA?we:-we}c.setTextPointsScale=function(pe,ge,we){pe&&pe.each(function(){var oe,de=m.select(this),Te=de.select("text");if(Te.node()){var Ee=parseFloat(Te.attr("x")||0),Me=parseFloat(Te.attr("y")||0),De=(de.attr("transform")||"").match(j);oe=ge===1&&we===1?[]:[n(Ee,Me),"scale("+ge+","+we+")",n(-Ee,-Me)],De&&oe.push(De),de.attr("transform",oe.join(""))}})},c.getMarkerStandoff=ee;var N,$,K,te,ie,le,se=Math.atan2,ve=Math.cos,fe=Math.sin;function ye(pe,ge){var we=ge[0],oe=ge[1];return[we*ve(pe)-oe*fe(pe),we*fe(pe)+oe*ve(pe)]}function Ae(pe,ge){var we,oe,de=pe.ma;de===void 0&&(de=ge.marker.angle||0);var Te=ge.marker.angleref;if(Te==="previous"||Te==="north"){if(ge._geo){var Ee=ge._geo.project(pe.lonlat);we=Ee[0],oe=Ee[1]}else{var Me=ge._xA,De=ge._yA;if(!Me||!De)return 90;we=Me.c2p(pe.x),oe=De.c2p(pe.y)}if(ge._geo){var Ie,Oe=pe.lonlat[0],Ze=pe.lonlat[1],Fe=ge._geo.project([Oe,Ze+1e-5]),Pe=ge._geo.project([Oe+1e-5,Ze]),ze=se(Pe[1]-oe,Pe[0]-we),Ge=se(Fe[1]-oe,Fe[0]-we);if(Te==="north")Ie=de/180*Math.PI;else if(Te==="previous"){var $e=Oe/180*Math.PI,ot=Ze/180*Math.PI,vt=N/180*Math.PI,bt=$/180*Math.PI,yt=vt-$e,tt=ve(bt)*fe(yt),Ke=fe(bt)*ve(ot)-ve(bt)*fe(ot)*ve(yt);Ie=-se(tt,Ke)-Math.PI,N=Oe,$=Ze}var mt=ye(ze,[ve(Ie),0]),Ft=ye(Ge,[fe(Ie),0]);de=se(mt[1]+Ft[1],mt[0]+Ft[0])/Math.PI*180,Te!=="previous"||le===ge.uid&&pe.i===ie+1||(de=null)}if(Te==="previous"&&!ge._geo)if(le===ge.uid&&pe.i===ie+1&&x(we)&&x(oe)){var Vt=we-K,Xt=oe-te,Gt=ge.line&&ge.line.shape||"",nr=Gt.slice(Gt.length-1);nr==="h"&&(Xt=0),nr==="v"&&(Vt=0),de+=se(Xt,Vt)/Math.PI*180+90}else de=null}return K=we,te=oe,ie=pe.i,le=ge.uid,de}c.getMarkerAngle=Ae},{"../../components/fx/helpers":403,"../../constants/alignment":483,"../../constants/interactions":490,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../registry":647,"../../traces/scatter/make_bubble_size_func":953,"../../traces/scatter/subtypes":961,"../color":367,"../colorscale":379,"./symbol_defs":390,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],390:[function(g,Q,X){var m,v,k,x,e=g("parse-svg-path"),t=g("@plotly/d3").round,r=Math.sqrt(2),l=Math.sqrt(3),n=Math.PI,d=Math.cos,u=Math.sin;function o(s){return s===null}function h(s,a,p){if(!(s&&s%360!=0||a))return p;if(k===s&&x===a&&m===p)return v;function c(E,z){var D=d(E),U=u(E),H=z[0],Y=z[1]+(a||0);return[H*D-Y*U,H*U+Y*D]}k=s,x=a,m=p;for(var i=s/180*n,y=0,f=0,w=e(p),b="",_=0;_<w.length;_++){var T=w[_],L=T[0],A=y,I=f;if(L==="M"||L==="L")y=+T[1],f=+T[2];else if(L==="m"||L==="l")y+=+T[1],f+=+T[2];else if(L==="H")y=+T[1];else if(L==="h")y+=+T[1];else if(L==="V")f=+T[1];else if(L==="v")f+=+T[1];else if(L==="A"){y=+T[1],f=+T[2];var P=c(i,[+T[6],+T[7]]);T[6]=P[0],T[7]=P[1],T[3]=+T[3]+s}L!=="H"&&L!=="V"||(L="L"),L!=="h"&&L!=="v"||(L="l"),L!=="m"&&L!=="l"||(y-=A,f-=I);var S=c(i,[y,f]);L!=="H"&&L!=="V"||(L="L"),L!=="M"&&L!=="L"&&L!=="m"&&L!=="l"||(T[1]=S[0],T[2]=S[1]),T[0]=L,b+=T[0]+T.slice(1).join(",")}return v=b,b}Q.exports={circle:{n:0,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(s,2),i="M"+c+",0A"+c+","+c+" 0 1,1 0,-"+c+"A"+c+","+c+" 0 0,1 "+c+",0Z";return p?h(a,p,i):i}},square:{n:1,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(s,2);return h(a,p,"M"+c+","+c+"H-"+c+"V-"+c+"H"+c+"Z")}},diamond:{n:2,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(1.3*s,2);return h(a,p,"M"+c+",0L0,"+c+"L-"+c+",0L0,-"+c+"Z")}},cross:{n:3,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(.4*s,2),i=t(1.2*s,2);return h(a,p,"M"+i+","+c+"H"+c+"V"+i+"H-"+c+"V"+c+"H-"+i+"V-"+c+"H-"+c+"V-"+i+"H"+c+"V-"+c+"H"+i+"Z")}},x:{n:4,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(.8*s/r,2),i="l"+c+","+c,y="l"+c+",-"+c,f="l-"+c+",-"+c,w="l-"+c+","+c;return h(a,p,"M0,"+c+i+y+f+y+f+w+f+w+i+w+i+"Z")}},"triangle-up":{n:5,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(2*s/l,2);return h(a,p,"M-"+c+","+t(s/2,2)+"H"+c+"L0,-"+t(s,2)+"Z")}},"triangle-down":{n:6,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(2*s/l,2);return h(a,p,"M-"+c+",-"+t(s/2,2)+"H"+c+"L0,"+t(s,2)+"Z")}},"triangle-left":{n:7,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(2*s/l,2);return h(a,p,"M"+t(s/2,2)+",-"+c+"V"+c+"L-"+t(s,2)+",0Z")}},"triangle-right":{n:8,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(2*s/l,2);return h(a,p,"M-"+t(s/2,2)+",-"+c+"V"+c+"L"+t(s,2)+",0Z")}},"triangle-ne":{n:9,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(.6*s,2),i=t(1.2*s,2);return h(a,p,"M-"+i+",-"+c+"H"+c+"V"+i+"Z")}},"triangle-se":{n:10,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(.6*s,2),i=t(1.2*s,2);return h(a,p,"M"+c+",-"+i+"V"+c+"H-"+i+"Z")}},"triangle-sw":{n:11,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(.6*s,2),i=t(1.2*s,2);return h(a,p,"M"+i+","+c+"H-"+c+"V-"+i+"Z")}},"triangle-nw":{n:12,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(.6*s,2),i=t(1.2*s,2);return h(a,p,"M-"+c+","+i+"V-"+c+"H"+i+"Z")}},pentagon:{n:13,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(.951*s,2),i=t(.588*s,2),y=t(-s,2),f=t(-.309*s,2);return h(a,p,"M"+c+","+f+"L"+i+","+t(.809*s,2)+"H-"+i+"L-"+c+","+f+"L0,"+y+"Z")}},hexagon:{n:14,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(s,2),i=t(s/2,2),y=t(s*l/2,2);return h(a,p,"M"+y+",-"+i+"V"+i+"L0,"+c+"L-"+y+","+i+"V-"+i+"L0,-"+c+"Z")}},hexagon2:{n:15,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(s,2),i=t(s/2,2),y=t(s*l/2,2);return h(a,p,"M-"+i+","+y+"H"+i+"L"+c+",0L"+i+",-"+y+"H-"+i+"L-"+c+",0Z")}},octagon:{n:16,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(.924*s,2),i=t(.383*s,2);return h(a,p,"M-"+i+",-"+c+"H"+i+"L"+c+",-"+i+"V"+i+"L"+i+","+c+"H-"+i+"L-"+c+","+i+"V-"+i+"Z")}},star:{n:17,f:function(s,a,p){if(o(a))return"M0,0Z";var c=1.4*s,i=t(.225*c,2),y=t(.951*c,2),f=t(.363*c,2),w=t(.588*c,2),b=t(-c,2),_=t(-.309*c,2),T=t(.118*c,2),L=t(.809*c,2);return h(a,p,"M"+i+","+_+"H"+y+"L"+f+","+T+"L"+w+","+L+"L0,"+t(.382*c,2)+"L-"+w+","+L+"L-"+f+","+T+"L-"+y+","+_+"H-"+i+"L0,"+b+"Z")}},hexagram:{n:18,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(.66*s,2),i=t(.38*s,2),y=t(.76*s,2);return h(a,p,"M-"+y+",0l-"+i+",-"+c+"h"+y+"l"+i+",-"+c+"l"+i+","+c+"h"+y+"l-"+i+","+c+"l"+i+","+c+"h-"+y+"l-"+i+","+c+"l-"+i+",-"+c+"h-"+y+"Z")}},"star-triangle-up":{n:19,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(s*l*.8,2),i=t(.8*s,2),y=t(1.6*s,2),f=t(4*s,2),w="A "+f+","+f+" 0 0 1 ";return h(a,p,"M-"+c+","+i+w+c+","+i+w+"0,-"+y+w+"-"+c+","+i+"Z")}},"star-triangle-down":{n:20,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(s*l*.8,2),i=t(.8*s,2),y=t(1.6*s,2),f=t(4*s,2),w="A "+f+","+f+" 0 0 1 ";return h(a,p,"M"+c+",-"+i+w+"-"+c+",-"+i+w+"0,"+y+w+c+",-"+i+"Z")}},"star-square":{n:21,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(1.1*s,2),i=t(2*s,2),y="A "+i+","+i+" 0 0 1 ";return h(a,p,"M-"+c+",-"+c+y+"-"+c+","+c+y+c+","+c+y+c+",-"+c+y+"-"+c+",-"+c+"Z")}},"star-diamond":{n:22,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(1.4*s,2),i=t(1.9*s,2),y="A "+i+","+i+" 0 0 1 ";return h(a,p,"M-"+c+",0"+y+"0,"+c+y+c+",0"+y+"0,-"+c+y+"-"+c+",0Z")}},"diamond-tall":{n:23,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(.7*s,2),i=t(1.4*s,2);return h(a,p,"M0,"+i+"L"+c+",0L0,-"+i+"L-"+c+",0Z")}},"diamond-wide":{n:24,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(1.4*s,2),i=t(.7*s,2);return h(a,p,"M0,"+i+"L"+c+",0L0,-"+i+"L-"+c+",0Z")}},hourglass:{n:25,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(s,2);return h(a,p,"M"+c+","+c+"H-"+c+"L"+c+",-"+c+"H-"+c+"Z")},noDot:!0},bowtie:{n:26,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(s,2);return h(a,p,"M"+c+","+c+"V-"+c+"L-"+c+","+c+"V-"+c+"Z")},noDot:!0},"circle-cross":{n:27,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(s,2);return h(a,p,"M0,"+c+"V-"+c+"M"+c+",0H-"+c+"M"+c+",0A"+c+","+c+" 0 1,1 0,-"+c+"A"+c+","+c+" 0 0,1 "+c+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(s,2),i=t(s/r,2);return h(a,p,"M"+i+","+i+"L-"+i+",-"+i+"M"+i+",-"+i+"L-"+i+","+i+"M"+c+",0A"+c+","+c+" 0 1,1 0,-"+c+"A"+c+","+c+" 0 0,1 "+c+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(s,2);return h(a,p,"M0,"+c+"V-"+c+"M"+c+",0H-"+c+"M"+c+","+c+"H-"+c+"V-"+c+"H"+c+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(s,2);return h(a,p,"M"+c+","+c+"L-"+c+",-"+c+"M"+c+",-"+c+"L-"+c+","+c+"M"+c+","+c+"H-"+c+"V-"+c+"H"+c+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(1.3*s,2);return h(a,p,"M"+c+",0L0,"+c+"L-"+c+",0L0,-"+c+"ZM0,-"+c+"V"+c+"M-"+c+",0H"+c)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(1.3*s,2),i=t(.65*s,2);return h(a,p,"M"+c+",0L0,"+c+"L-"+c+",0L0,-"+c+"ZM-"+i+",-"+i+"L"+i+","+i+"M-"+i+","+i+"L"+i+",-"+i)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(1.4*s,2);return h(a,p,"M0,"+c+"V-"+c+"M"+c+",0H-"+c)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(s,2);return h(a,p,"M"+c+","+c+"L-"+c+",-"+c+"M"+c+",-"+c+"L-"+c+","+c)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(1.2*s,2),i=t(.85*s,2);return h(a,p,"M0,"+c+"V-"+c+"M"+c+",0H-"+c+"M"+i+","+i+"L-"+i+",-"+i+"M"+i+",-"+i+"L-"+i+","+i)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(s/2,2),i=t(s,2);return h(a,p,"M"+c+","+i+"V-"+i+"M"+(c-i)+",-"+i+"V"+i+"M"+i+","+c+"H-"+i+"M-"+i+","+(c-i)+"H"+i)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(1.2*s,2),i=t(1.6*s,2),y=t(.8*s,2);return h(a,p,"M-"+c+","+y+"L0,0M"+c+","+y+"L0,0M0,-"+i+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(1.2*s,2),i=t(1.6*s,2),y=t(.8*s,2);return h(a,p,"M-"+c+",-"+y+"L0,0M"+c+",-"+y+"L0,0M0,"+i+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(1.2*s,2),i=t(1.6*s,2),y=t(.8*s,2);return h(a,p,"M"+y+","+c+"L0,0M"+y+",-"+c+"L0,0M-"+i+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(1.2*s,2),i=t(1.6*s,2),y=t(.8*s,2);return h(a,p,"M-"+y+","+c+"L0,0M-"+y+",-"+c+"L0,0M"+i+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(1.4*s,2);return h(a,p,"M"+c+",0H-"+c)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(1.4*s,2);return h(a,p,"M0,"+c+"V-"+c)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(s,2);return h(a,p,"M"+c+",-"+c+"L-"+c+","+c)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(s,2);return h(a,p,"M"+c+","+c+"L-"+c+",-"+c)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(s,2);return h(a,p,"M0,0L-"+c+","+t(2*s,2)+"H"+c+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(s,2);return h(a,p,"M0,0L-"+c+",-"+t(2*s,2)+"H"+c+"Z")},noDot:!0},"arrow-left":{n:47,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(2*s,2),i=t(s,2);return h(a,p,"M0,0L"+c+",-"+i+"V"+i+"Z")},noDot:!0},"arrow-right":{n:48,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(2*s,2),i=t(s,2);return h(a,p,"M0,0L-"+c+",-"+i+"V"+i+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(s,2);return h(a,p,"M-"+c+",0H"+c+"M0,0L-"+c+","+t(2*s,2)+"H"+c+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(s,2);return h(a,p,"M-"+c+",0H"+c+"M0,0L-"+c+",-"+t(2*s,2)+"H"+c+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(2*s,2),i=t(s,2);return h(a,p,"M0,-"+i+"V"+i+"M0,0L"+c+",-"+i+"V"+i+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(s,a,p){if(o(a))return"M0,0Z";var c=t(2*s,2),i=t(s,2);return h(a,p,"M0,-"+i+"V"+i+"M0,0L-"+c+",-"+i+"V"+i+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(s,a,p){if(o(a))return"M0,0Z";var c=n/2.5,i=2*s*d(c),y=2*s*u(c);return h(a,p,"M0,0L"+-i+","+y+"L"+i+","+y+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(s,a,p){if(o(a))return"M0,0Z";var c=n/4,i=2*s*d(c),y=2*s*u(c);return h(a,p,"M0,0L"+-i+","+y+"A "+2*s+","+2*s+" 0 0 1 "+i+","+y+"Z")},backoff:.4,noDot:!0}}},{"@plotly/d3":58,"parse-svg-path":250}],391:[function(g,Q,X){Q.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],392:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../../registry"),k=g("../../plots/cartesian/axes"),x=g("../../lib"),e=g("./compute_error");function t(r,l,n,d){var u=l["error_"+d]||{},o=[];if(u.visible&&["linear","log"].indexOf(n.type)!==-1){for(var h=e(u),s=0;s<r.length;s++){var a=r[s],p=a.i;if(p===void 0)p=s;else if(p===null)continue;var c=a[d];if(m(n.c2l(c))){var i=h(c,p);if(m(i[0])&&m(i[1])){var y=a[d+"s"]=c-i[0],f=a[d+"h"]=c+i[1];o.push(y,f)}}}var w=n._id,b=l._extremes[w],_=k.findExtremes(n,o,x.extendFlat({tozero:b.opts.tozero},{padded:!0}));b.min=b.min.concat(_.min),b.max=b.max.concat(_.max)}}Q.exports=function(r){for(var l=r.calcdata,n=0;n<l.length;n++){var d=l[n],u=d[0].trace;if(u.visible===!0&&v.traceIs(u,"errorBarsOK")){var o=k.getFromId(r,u.xaxis),h=k.getFromId(r,u.yaxis);t(d,u,o,"x"),t(d,u,h,"y")}}}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./compute_error":393,"fast-isnumeric":190}],393:[function(g,Q,X){function m(v,k){return v==="percent"?function(x){return Math.abs(x*k/100)}:v==="constant"?function(){return Math.abs(k)}:v==="sqrt"?function(x){return Math.sqrt(Math.abs(x))}:void 0}Q.exports=function(v){var k=v.type,x=v.symmetric;if(k==="data"){var e=v.array||[];if(x)return function(n,d){var u=+e[d];return[u,u]};var t=v.arrayminus||[];return function(n,d){var u=+e[d],o=+t[d];return isNaN(u)&&isNaN(o)?[NaN,NaN]:[o||0,u||0]}}var r=m(k,v.value),l=m(k,v.valueminus);return x||v.valueminus===void 0?function(n){var d=r(n);return[d,d]}:function(n){return[l(n),r(n)]}}},{}],394:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../../registry"),k=g("../../lib"),x=g("../../plot_api/plot_template"),e=g("./attributes");Q.exports=function(t,r,l,n){var d="error_"+n.axis,u=x.newContainer(r,d),o=t[d]||{};function h(c,i){return k.coerce(o,u,e,c,i)}if(h("visible",o.array!==void 0||o.value!==void 0||o.type==="sqrt")!==!1){var s=h("type","array"in o?"data":"percent"),a=!0;s!=="sqrt"&&(a=h("symmetric",!((s==="data"?"arrayminus":"valueminus")in o))),s==="data"?(h("array"),h("traceref"),a||(h("arrayminus"),h("tracerefminus"))):s!=="percent"&&s!=="constant"||(h("value"),a||h("valueminus"));var p="copy_"+n.inherit+"style";n.inherit&&(r["error_"+n.inherit]||{}).visible&&h(p,!(o.color||m(o.thickness)||m(o.width))),n.inherit&&u[p]||(h("color",l),h("thickness"),h("width",v.traceIs(r,"gl3d")?0:4))}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"./attributes":391,"fast-isnumeric":190}],395:[function(g,Q,X){var m=g("../../lib"),v=g("../../plot_api/edit_types").overrideAll,k=g("./attributes"),x={error_x:m.extendFlat({},k),error_y:m.extendFlat({},k)};delete x.error_x.copy_zstyle,delete x.error_y.copy_zstyle,delete x.error_y.copy_ystyle;var e={error_x:m.extendFlat({},k),error_y:m.extendFlat({},k),error_z:m.extendFlat({},k)};delete e.error_x.copy_ystyle,delete e.error_y.copy_ystyle,delete e.error_z.copy_ystyle,delete e.error_z.copy_zstyle,Q.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:x,bar:x,histogram:x,scatter3d:v(e,"calc","nested"),scattergl:v(x,"calc","nested")}},supplyDefaults:g("./defaults"),calc:g("./calc"),makeComputeError:g("./compute_error"),plot:g("./plot"),style:g("./style"),hoverInfo:function(t,r,l){(r.error_y||{}).visible&&(l.yerr=t.yh-t.y,r.error_y.symmetric||(l.yerrneg=t.y-t.ys)),(r.error_x||{}).visible&&(l.xerr=t.xh-t.x,r.error_x.symmetric||(l.xerrneg=t.x-t.xs))}}},{"../../lib":515,"../../plot_api/edit_types":548,"./attributes":391,"./calc":392,"./compute_error":393,"./defaults":394,"./plot":396,"./style":397}],396:[function(g,Q,X){var m=g("@plotly/d3"),v=g("fast-isnumeric"),k=g("../drawing"),x=g("../../traces/scatter/subtypes");Q.exports=function(e,t,r,l){var n=r.xaxis,d=r.yaxis,u=l&&l.duration>0;t.each(function(o){var h,s=o[0].trace,a=s.error_x||{},p=s.error_y||{};s.ids&&(h=function(f){return f.id});var c=x.hasMarkers(s)&&s.marker.maxdisplayed>0;p.visible||a.visible||(o=[]);var i=m.select(this).selectAll("g.errorbar").data(o,h);if(i.exit().remove(),o.length){a.visible||i.selectAll("path.xerror").remove(),p.visible||i.selectAll("path.yerror").remove(),i.style("opacity",1);var y=i.enter().append("g").classed("errorbar",!0);u&&y.style("opacity",0).transition().duration(l.duration).style("opacity",1),k.setClipUrl(i,r.layerClipId,e),i.each(function(f){var w=m.select(this),b=function(P,S,E){var z={x:S.c2p(P.x),y:E.c2p(P.y)};return P.yh!==void 0&&(z.yh=E.c2p(P.yh),z.ys=E.c2p(P.ys),v(z.ys)||(z.noYS=!0,z.ys=E.c2p(P.ys,!0))),P.xh!==void 0&&(z.xh=S.c2p(P.xh),z.xs=S.c2p(P.xs),v(z.xs)||(z.noXS=!0,z.xs=S.c2p(P.xs,!0))),z}(f,n,d);if(!c||f.vis){var _,T=w.select("path.yerror");if(p.visible&&v(b.x)&&v(b.yh)&&v(b.ys)){var L=p.width;_="M"+(b.x-L)+","+b.yh+"h"+2*L+"m-"+L+",0V"+b.ys,b.noYS||(_+="m-"+L+",0h"+2*L),T.size()?u&&(T=T.transition().duration(l.duration).ease(l.easing)):T=w.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0),T.attr("d",_)}else T.remove();var A=w.select("path.xerror");if(a.visible&&v(b.y)&&v(b.xh)&&v(b.xs)){var I=(a.copy_ystyle?p:a).width;_="M"+b.xh+","+(b.y-I)+"v"+2*I+"m0,-"+I+"H"+b.xs,b.noXS||(_+="m0,-"+I+"v"+2*I),A.size()?u&&(A=A.transition().duration(l.duration).ease(l.easing)):A=w.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0),A.attr("d",_)}else A.remove()}})}})}},{"../../traces/scatter/subtypes":961,"../drawing":389,"@plotly/d3":58,"fast-isnumeric":190}],397:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../color");Q.exports=function(k){k.each(function(x){var e=x[0].trace,t=e.error_y||{},r=e.error_x||{},l=m.select(this);l.selectAll("path.yerror").style("stroke-width",t.thickness+"px").call(v.stroke,t.color),r.copy_ystyle&&(r=t),l.selectAll("path.xerror").style("stroke-width",r.thickness+"px").call(v.stroke,r.color)})}},{"../color":367,"@plotly/d3":58}],398:[function(g,Q,X){var m=g("../../plots/font_attributes"),v=g("./layout_attributes").hoverlabel,k=g("../../lib/extend").extendFlat;Q.exports={hoverlabel:{bgcolor:k({},v.bgcolor,{arrayOk:!0}),bordercolor:k({},v.bordercolor,{arrayOk:!0}),font:m({arrayOk:!0,editType:"none"}),align:k({},v.align,{arrayOk:!0}),namelength:k({},v.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":505,"../../plots/font_attributes":594,"./layout_attributes":408}],399:[function(g,Q,X){var m=g("../../lib"),v=g("../../registry");function k(x,e,t,r){r=r||m.identity,Array.isArray(x)&&(e[0][t]=r(x))}Q.exports=function(x){var e=x.calcdata,t=x._fullLayout;function r(o){return function(h){return m.coerceHoverinfo({hoverinfo:h},{_module:o._module},t)}}for(var l=0;l<e.length;l++){var n=e[l],d=n[0].trace;if(!v.traceIs(d,"pie-like")){var u=v.traceIs(d,"2dMap")?k:m.fillArray;u(d.hoverinfo,n,"hi",r(d)),d.hovertemplate&&u(d.hovertemplate,n,"ht"),d.hoverlabel&&(u(d.hoverlabel.bgcolor,n,"hbg"),u(d.hoverlabel.bordercolor,n,"hbc"),u(d.hoverlabel.font.size,n,"hts"),u(d.hoverlabel.font.color,n,"htc"),u(d.hoverlabel.font.family,n,"htf"),u(d.hoverlabel.namelength,n,"hnl"),u(d.hoverlabel.align,n,"hta"))}}}},{"../../lib":515,"../../registry":647}],400:[function(g,Q,X){var m=g("../../registry"),v=g("./hover").hover;Q.exports=function(k,x,e){var t=m.getComponentMethod("annotations","onClick")(k,k._hoverdata);function r(){k.emit("plotly_click",{points:k._hoverdata,event:x})}e!==void 0&&v(k,x,e,!0),k._hoverdata&&x&&x.target&&(t&&t.then?t.then(r):r(),x.stopImmediatePropagation&&x.stopImmediatePropagation())}},{"../../registry":647,"./hover":404}],401:[function(g,Q,X){Q.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],402:[function(g,Q,X){var m=g("../../lib"),v=g("./attributes"),k=g("./hoverlabel_defaults");Q.exports=function(x,e,t,r){var l=m.extendFlat({},r.hoverlabel);e.hovertemplate&&(l.namelength=-1),k(x,e,function(n,d){return m.coerce(x,e,v,n,d)},l)}},{"../../lib":515,"./attributes":398,"./hoverlabel_defaults":405}],403:[function(g,Q,X){var m=g("../../lib");X.getSubplot=function(r){return r.subplot||r.xaxis+r.yaxis||r.geo},X.isTraceInSubplots=function(r,l){if(r.type==="splom"){for(var n=r.xaxes||[],d=r.yaxes||[],u=0;u<n.length;u++)for(var o=0;o<d.length;o++)if(l.indexOf(n[u]+d[o])!==-1)return!0;return!1}return l.indexOf(X.getSubplot(r))!==-1},X.flat=function(r,l){for(var n=new Array(r.length),d=0;d<r.length;d++)n[d]=l;return n},X.p2c=function(r,l){for(var n=new Array(r.length),d=0;d<r.length;d++)n[d]=r[d].p2c(l);return n},X.getDistanceFunction=function(r,l,n,d){return r==="closest"?d||X.quadrature(l,n):r.charAt(0)==="x"?l:n},X.getClosest=function(r,l,n){if(n.index!==!1)n.index>=0&&n.index<r.length?n.distance=0:n.index=!1;else for(var d=0;d<r.length;d++){var u=l(r[d]);u<=n.distance&&(n.index=d,n.distance=u)}return n},X.inbox=function(r,l,n){return r*l<0||r===0?n:1/0},X.quadrature=function(r,l){return function(n){var d=r(n),u=l(n);return Math.sqrt(d*d+u*u)}},X.makeEventData=function(r,l,n){var d="index"in r?r.index:r.pointNumber,u={data:l._input,fullData:l,curveNumber:l.index,pointNumber:d};if(l._indexToPoints){var o=l._indexToPoints[d];o.length===1?u.pointIndex=o[0]:u.pointIndices=o}else u.pointIndex=d;return l._module.eventData?u=l._module.eventData(u,r,l,n,d):("xVal"in r?u.x=r.xVal:"x"in r&&(u.x=r.x),"yVal"in r?u.y=r.yVal:"y"in r&&(u.y=r.y),r.xa&&(u.xaxis=r.xa),r.ya&&(u.yaxis=r.ya),r.zLabelVal!==void 0&&(u.z=r.zLabelVal)),X.appendArrayPointValue(u,l,d),u},X.appendArrayPointValue=function(r,l,n){var d=l._arrayAttrs;if(d)for(var u=0;u<d.length;u++){var o=d[u],h=k(o);if(r[h]===void 0){var s=x(m.nestedProperty(l,o).get(),n);s!==void 0&&(r[h]=s)}}},X.appendArrayMultiPointValues=function(r,l,n){var d=l._arrayAttrs;if(d)for(var u=0;u<d.length;u++){var o=d[u],h=k(o);if(r[h]===void 0){for(var s=m.nestedProperty(l,o).get(),a=new Array(n.length),p=0;p<n.length;p++)a[p]=x(s,n[p]);r[h]=a}}};var v={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function k(r){return v[r]||r}function x(r,l){return Array.isArray(l)?Array.isArray(r)&&Array.isArray(r[l[0]])?r[l[0]][l[1]]:void 0:r[l]}var e={x:!0,y:!0},t={"x unified":!0,"y unified":!0};X.isUnifiedHover=function(r){return typeof r=="string"&&!!t[r]},X.isXYhover=function(r){return typeof r=="string"&&!!e[r]}},{"../../lib":515}],404:[function(g,Q,X){var m=g("@plotly/d3"),v=g("fast-isnumeric"),k=g("tinycolor2"),x=g("../../lib"),e=x.strTranslate,t=x.strRotate,r=g("../../lib/events"),l=g("../../lib/svg_text_utils"),n=g("../../lib/override_cursor"),d=g("../drawing"),u=g("../color"),o=g("../dragelement"),h=g("../../plots/cartesian/axes"),s=g("../../registry"),a=g("./helpers"),p=g("./constants"),c=g("../legend/defaults"),i=g("../legend/draw"),y=p.YANGLE,f=Math.PI*y/180,w=1/Math.sin(f),b=Math.cos(f),_=Math.sin(f),T=p.HOVERARROWSIZE,L=p.HOVERTEXTPAD,A={box:!0,ohlc:!0,violin:!0,candlestick:!0},I={scatter:!0,scattergl:!0,splom:!0};function P(B){return[B.trace.index,B.index,B.x0,B.y0,B.name,B.attr,B.xa?B.xa._id:"",B.ya?B.ya._id:""].join(",")}X.hover=function(B,j,ee,N){B=x.getGraphDiv(B);var $=j.target;x.throttle(B._fullLayout._uid+p.HOVERID,p.HOVERMINTIME,function(){(function(K,te,ie,le,se){ie||(ie="xy");var ve=Array.isArray(ie)?ie:[ie],fe=K._fullLayout,ye=fe._plots||[],Ae=ye[ie],pe=fe._has("cartesian");if(Ae){var ge=Ae.overlays.map(function(Br){return Br.id});ve=ve.concat(ge)}for(var we=ve.length,oe=new Array(we),de=new Array(we),Te=!1,Ee=0;Ee<we;Ee++){var Me=ve[Ee];if(ye[Me])Te=!0,oe[Ee]=ye[Me].xaxis,de[Ee]=ye[Me].yaxis;else{if(!fe[Me]||!fe[Me]._subplot)return void x.warn("Unrecognized subplot: "+Me);var De=fe[Me]._subplot;oe[Ee]=De.xaxis,de[Ee]=De.yaxis}}var Ie=te.hovermode||fe.hovermode;if(Ie&&!Te&&(Ie="closest"),["x","y","closest","x unified","y unified"].indexOf(Ie)===-1||!K.calcdata||K.querySelector(".zoombox")||K._dragging)return o.unhoverRaw(K,te);var Oe=fe.hoverdistance;Oe===-1&&(Oe=1/0);var Ze=fe.spikedistance;Ze===-1&&(Ze=1/0);var Fe,Pe,ze,Ge,$e,ot,vt,bt,yt,tt,Ke,mt,Ft,Vt=[],Xt=[],Gt={hLinePoint:null,vLinePoint:null},nr=!1;if(Array.isArray(te))for(Ie="array",ze=0;ze<te.length;ze++)($e=K.calcdata[te[ze].curveNumber||0])&&(ot=$e[0].trace,$e[0].trace.hoverinfo!=="skip"&&(Xt.push($e),ot.orientation==="h"&&(nr=!0)));else{for(Ge=0;Ge<K.calcdata.length;Ge++)$e=K.calcdata[Ge],(ot=$e[0].trace).hoverinfo!=="skip"&&a.isTraceInSubplots(ot,ve)&&(Xt.push($e),ot.orientation==="h"&&(nr=!0));var It,Be;if(!se)It="xpx"in te?te.xpx:oe[0]._length/2,Be="ypx"in te?te.ypx:de[0]._length/2;else{if(r.triggerHandler(K,"plotly_beforehover",te)===!1)return;var He=se.getBoundingClientRect();It=te.clientX-He.left,Be=te.clientY-He.top,fe._calcInverseTransform(K);var he=x.apply3DTransform(fe._invTransform)(It,Be);if(It=he[0],Be=he[1],It<0||It>oe[0]._length||Be<0||Be>de[0]._length)return o.unhoverRaw(K,te)}if(te.pointerX=It+oe[0]._offset,te.pointerY=Be+de[0]._offset,Fe="xval"in te?a.flat(ve,te.xval):a.p2c(oe,It),Pe="yval"in te?a.flat(ve,te.yval):a.p2c(de,Be),!v(Fe[0])||!v(Pe[0]))return x.warn("Fx.hover failed",te,K),o.unhoverRaw(K,te)}var be=1/0;function Re(Br,rn){for(Ge=0;Ge<Xt.length;Ge++)if(($e=Xt[Ge])&&$e[0]&&$e[0].trace&&(ot=$e[0].trace).visible===!0&&ot._length!==0&&["carpet","contourcarpet"].indexOf(ot._module.name)===-1){if(ot.type==="splom"?vt=ve[bt=0]:(vt=a.getSubplot(ot),bt=ve.indexOf(vt)),yt=Ie,a.isUnifiedHover(yt)&&(yt=yt.charAt(0)),mt={cd:$e,trace:ot,xa:oe[bt],ya:de[bt],maxHoverDistance:Oe,maxSpikeDistance:Ze,index:!1,distance:Math.min(be,Oe),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:u.defaultLine,name:ot.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},fe[vt]&&(mt.subplot=fe[vt]._subplot),fe._splomScenes&&fe._splomScenes[ot.uid]&&(mt.scene=fe._splomScenes[ot.uid]),Ft=Vt.length,yt==="array"){var gn=te[Ge];"pointNumber"in gn?(mt.index=gn.pointNumber,yt="closest"):(yt="","xval"in gn&&(tt=gn.xval,yt="x"),"yval"in gn&&(Ke=gn.yval,yt=yt?"closest":"y"))}else Br!==void 0&&rn!==void 0?(tt=Br,Ke=rn):(tt=Fe[bt],Ke=Pe[bt]);if(Oe!==0)if(ot._module&&ot._module.hoverPoints){var Qr=ot._module.hoverPoints(mt,tt,Ke,yt,{finiteRange:!0,hoverLayer:fe._hoverlayer});if(Qr)for(var un,Gn=0;Gn<Qr.length;Gn++)un=Qr[Gn],v(un.x0)&&v(un.y0)&&Vt.push(U(un,Ie))}else x.log("Unrecognized trace type in hover:",ot);if(Ie==="closest"&&Vt.length>Ft&&(Vt.splice(0,Ft),be=Vt[0].distance),pe&&Ze!==0&&Vt.length===0){mt.distance=Ze,mt.index=!1;var wn=ot._module.hoverPoints(mt,tt,Ke,"closest",{hoverLayer:fe._hoverlayer});if(wn&&(wn=wn.filter(function(or){return or.spikeDistance<=Ze})),wn&&wn.length){var Ln,oa=wn.filter(function(or){return or.xa.showspikes&&or.xa.spikesnap!=="hovered data"});if(oa.length){var tr=oa[0];v(tr.x0)&&v(tr.y0)&&(Ln=Xe(tr),(!Gt.vLinePoint||Gt.vLinePoint.spikeDistance>Ln.spikeDistance)&&(Gt.vLinePoint=Ln))}var mr=wn.filter(function(or){return or.ya.showspikes&&or.ya.spikesnap!=="hovered data"});if(mr.length){var Ct=mr[0];v(Ct.x0)&&v(Ct.y0)&&(Ln=Xe(Ct),(!Gt.hLinePoint||Gt.hLinePoint.spikeDistance>Ln.spikeDistance)&&(Gt.hLinePoint=Ln))}}}}}function Ue(Br,rn,gn){for(var Qr,un=null,Gn=1/0,wn=0;wn<Br.length;wn++)Qr=Br[wn].spikeDistance,gn&&wn===0&&(Qr=-1/0),Qr<=Gn&&Qr<=rn&&(un=Br[wn],Gn=Qr);return un}function Xe(Br){return Br?{xa:Br.xa,ya:Br.ya,x:Br.xSpike!==void 0?Br.xSpike:(Br.x0+Br.x1)/2,y:Br.ySpike!==void 0?Br.ySpike:(Br.y0+Br.y1)/2,distance:Br.distance,spikeDistance:Br.spikeDistance,curveNumber:Br.trace.index,color:Br.color,pointNumber:Br.index}:null}Re();var qe={fullLayout:fe,container:fe._hoverlayer,event:te},st=K._spikepoints,it={vLinePoint:Gt.vLinePoint,hLinePoint:Gt.hLinePoint};K._spikepoints=it;var Tt=function(){Vt.sort(function(Br,rn){return Br.distance-rn.distance}),Vt=function(Br,rn){for(var gn=rn.charAt(0),Qr=[],un=[],Gn=[],wn=0;wn<Br.length;wn++){var Ln=Br[wn];s.traceIs(Ln.trace,"bar-like")||s.traceIs(Ln.trace,"box-violin")?Gn.push(Ln):Ln.trace[gn+"period"]?un.push(Ln):Qr.push(Ln)}return Qr.concat(un).concat(Gn)}(Vt,Ie)};Tt();var Pt=Ie.charAt(0),rt=(Pt==="x"||Pt==="y")&&Vt[0]&&I[Vt[0].trace.type];if(pe&&Ze!==0&&Vt.length!==0){var ut=Ue(Vt.filter(function(Br){return Br.ya.showspikes}),Ze,rt);Gt.hLinePoint=Xe(ut);var Bt=Ue(Vt.filter(function(Br){return Br.xa.showspikes}),Ze,rt);Gt.vLinePoint=Xe(Bt)}if(Vt.length===0){var wt=o.unhoverRaw(K,te);return!pe||Gt.hLinePoint===null&&Gt.vLinePoint===null||Y(st)&&H(K,Gt,qe),wt}if(pe&&Y(st)&&H(K,Gt,qe),a.isXYhover(yt)&&Vt[0].length!==0&&Vt[0].trace.type!=="splom"){var Lt=Vt[0],Se=(Vt=A[Lt.trace.type]?Vt.filter(function(Br){return Br.trace.index===Lt.trace.index}):[Lt]).length,We=W("x",Lt,fe),nt=W("y",Lt,fe);Re(We,nt);var ft,Mt=[],Nt={},Zt=0,Ut=function(Br){var rn=A[Br.trace.type]?P(Br):Br.trace.index;if(Nt[rn]){var gn=Nt[rn]-1,Qr=Mt[gn];gn>0&&Math.abs(Br.distance)<Math.abs(Qr.distance)&&(Mt[gn]=Br)}else Zt++,Nt[rn]=Zt,Mt.push(Br)};for(ft=0;ft<Se;ft++)Ut(Vt[ft]);for(ft=Vt.length-1;ft>Se-1;ft--)Ut(Vt[ft]);Vt=Mt,Tt()}var fr=K._hoverdata,Tr=[],ur=Z(K),Kt=re(K);for(ze=0;ze<Vt.length;ze++){var Qt=Vt[ze],er=a.makeEventData(Qt,Qt.trace,Qt.cd);if(Qt.hovertemplate!==!1){var cr=!1;Qt.cd[Qt.index]&&Qt.cd[Qt.index].ht&&(cr=Qt.cd[Qt.index].ht),Qt.hovertemplate=cr||Qt.trace.hovertemplate||!1}if(Qt.xa&&Qt.ya){var gr=Qt.x0+Qt.xa._offset,Mr=Qt.x1+Qt.xa._offset,Ir=Qt.y0+Qt.ya._offset,Fr=Qt.y1+Qt.ya._offset,Yr=Math.min(gr,Mr),fn=Math.max(gr,Mr),en=Math.min(Ir,Fr),Rn=Math.max(Ir,Fr);er.bbox={x0:Yr+Kt,x1:fn+Kt,y0:en+ur,y1:Rn+ur}}Qt.eventData=[er],Tr.push(er)}K._hoverdata=Tr;var nn=Ie==="y"&&(Xt.length>1||Vt.length>1)||Ie==="closest"&&nr&&Vt.length>1,yn=u.combine(fe.plot_bgcolor||u.background,fe.paper_bgcolor),bn=E(Vt,{gd:K,hovermode:Ie,rotateLabels:nn,bgColor:yn,container:fe._hoverlayer,outerContainer:fe._paper.node(),commonLabelOpts:fe.hoverlabel,hoverdistance:fe.hoverdistance});if(a.isUnifiedHover(Ie)||(function(Br,rn,gn){var Qr,un,Gn,wn,Ln,oa,tr,mr=0,Ct=1,or=Br.size(),hr=new Array(or),Rr=0;function zr(Hr){var $r=Hr[0],tn=Hr[Hr.length-1];if(un=$r.pmin-$r.pos-$r.dp+$r.size,Gn=tn.pos+tn.dp+tn.size-$r.pmax,un>.01){for(Ln=Hr.length-1;Ln>=0;Ln--)Hr[Ln].dp+=un;Qr=!1}if(!(Gn<.01)){if(un<-.01){for(Ln=Hr.length-1;Ln>=0;Ln--)Hr[Ln].dp-=Gn;Qr=!1}if(Qr){var vn=0;for(wn=0;wn<Hr.length;wn++)(oa=Hr[wn]).pos+oa.dp+oa.size>$r.pmax&&vn++;for(wn=Hr.length-1;wn>=0&&!(vn<=0);wn--)(oa=Hr[wn]).pos>$r.pmax-1&&(oa.del=!0,vn--);for(wn=0;wn<Hr.length&&!(vn<=0);wn++)if((oa=Hr[wn]).pos<$r.pmin+1)for(oa.del=!0,vn--,Gn=2*oa.size,Ln=Hr.length-1;Ln>=0;Ln--)Hr[Ln].dp-=Gn;for(wn=Hr.length-1;wn>=0&&!(vn<=0);wn--)(oa=Hr[wn]).pos+oa.dp+oa.size>$r.pmax&&(oa.del=!0,vn--)}}}for(Br.each(function(Hr){var $r=Hr[rn],tn=$r._id.charAt(0)==="x",vn=$r.range;Rr===0&&vn&&vn[0]>vn[1]!==tn&&(Ct=-1),hr[Rr++]=[{datum:Hr,traceIndex:Hr.trace.index,dp:0,pos:Hr.pos,posref:Hr.posref,size:Hr.by*(tn?w:1)/2,pmin:0,pmax:tn?gn.width:gn.height}]}),hr.sort(function(Hr,$r){return Hr[0].posref-$r[0].posref||Ct*($r[0].traceIndex-Hr[0].traceIndex)});!Qr&&mr<=or;){for(mr++,Qr=!0,wn=0;wn<hr.length-1;){var Or=hr[wn],Ar=hr[wn+1],vr=Or[Or.length-1],xr=Ar[0];if((un=vr.pos+vr.dp+vr.size-xr.pos-xr.dp+xr.size)>.01&&vr.pmin===xr.pmin&&vr.pmax===xr.pmax){for(Ln=Ar.length-1;Ln>=0;Ln--)Ar[Ln].dp+=un;for(Or.push.apply(Or,Ar),hr.splice(wn+1,1),tr=0,Ln=Or.length-1;Ln>=0;Ln--)tr+=Or[Ln].dp;for(Gn=tr/Or.length,Ln=Or.length-1;Ln>=0;Ln--)Or[Ln].dp-=Gn;Qr=!1}else wn++}hr.forEach(zr)}for(wn=hr.length-1;wn>=0;wn--){var wr=hr[wn];for(Ln=wr.length-1;Ln>=0;Ln--){var Er=wr[Ln],qr=Er.datum;qr.offset=Er.dp,qr.del=Er.del}}}(bn,nn?"xa":"ya",fe),D(bn,nn,fe._invScaleX,fe._invScaleY)),se&&se.tagName){var ta=s.getComponentMethod("annotations","hasClickToShow")(K,Tr);n(m.select(se),ta?"pointer":"")}!se||le||!function(Br,rn,gn){if(!gn||gn.length!==Br._hoverdata.length)return!0;for(var Qr=gn.length-1;Qr>=0;Qr--){var un=gn[Qr],Gn=Br._hoverdata[Qr];if(un.curveNumber!==Gn.curveNumber||String(un.pointNumber)!==String(Gn.pointNumber)||String(un.pointNumbers)!==String(Gn.pointNumbers))return!0}return!1}(K,0,fr)||(fr&&K.emit("plotly_unhover",{event:te,points:fr}),K.emit("plotly_hover",{event:te,points:K._hoverdata,xaxes:oe,yaxes:de,xvals:Fe,yvals:Pe}))})(B,j,ee,N,$)})},X.loneHover=function(B,j){var ee=!0;Array.isArray(B)||(ee=!1,B=[B]);var N=j.gd,$=Z(N),K=re(N),te=E(B.map(function(se){var ve=se._x0||se.x0||se.x||0,fe=se._x1||se.x1||se.x||0,ye=se._y0||se.y0||se.y||0,Ae=se._y1||se.y1||se.y||0,pe=se.eventData;if(pe){var ge=Math.min(ve,fe),we=Math.max(ve,fe),oe=Math.min(ye,Ae),de=Math.max(ye,Ae),Te=se.trace;if(s.traceIs(Te,"gl3d")){var Ee=N._fullLayout[Te.scene]._scene.container,Me=Ee.offsetLeft,De=Ee.offsetTop;ge+=Me,we+=Me,oe+=De,de+=De}pe.bbox={x0:ge+K,x1:we+K,y0:oe+$,y1:de+$},j.inOut_bbox&&j.inOut_bbox.push(pe.bbox)}else pe=!1;return{color:se.color||u.defaultLine,x0:se.x0||se.x||0,x1:se.x1||se.x||0,y0:se.y0||se.y||0,y1:se.y1||se.y||0,xLabel:se.xLabel,yLabel:se.yLabel,zLabel:se.zLabel,text:se.text,name:se.name,idealAlign:se.idealAlign,borderColor:se.borderColor,fontFamily:se.fontFamily,fontSize:se.fontSize,fontColor:se.fontColor,nameLength:se.nameLength,textAlign:se.textAlign,trace:se.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:se.hovertemplate||!1,hovertemplateLabels:se.hovertemplateLabels||!1,eventData:pe}}),{gd:N,hovermode:"closest",rotateLabels:!1,bgColor:j.bgColor||u.background,container:m.select(j.container),outerContainer:j.outerContainer||j.container}),ie=0,le=0;return te.sort(function(se,ve){return se.y0-ve.y0}).each(function(se,ve){var fe=se.y0-se.by/2;se.offset=fe-5<ie?ie-fe+5:0,ie=fe+se.by+se.offset,ve===j.anchorIndex&&(le=se.offset)}).each(function(se){se.offset-=le}),D(te,!1,N._fullLayout._invScaleX,N._fullLayout._invScaleY),ee?te:te.node()};var S=/<extra>([\s\S]*)<\/extra>/;function E(B,j){var ee=j.gd,N=ee._fullLayout,$=j.hovermode,K=j.rotateLabels,te=j.bgColor,ie=j.container,le=j.outerContainer,se=j.commonLabelOpts||{};if(B.length===0)return[[]];var ve=j.fontFamily||p.HOVERFONT,fe=j.fontSize||p.HOVERFONTSIZE,ye=B[0],Ae=ye.xa,pe=ye.ya,ge=$.charAt(0),we=ye[ge+"Label"],oe=V(ee,le),de=oe.top,Te=oe.width,Ee=oe.height,Me=we!==void 0&&ye.distance<=j.hoverdistance&&($==="x"||$==="y");if(Me){var De,Ie,Oe=!0;for(De=0;De<B.length;De++)if(Oe&&B[De].zLabel===void 0&&(Oe=!1),Ie=B[De].hoverinfo||B[De].trace.hoverinfo){var Ze=Array.isArray(Ie)?Ie:Ie.split("+");if(Ze.indexOf("all")===-1&&Ze.indexOf($)===-1){Me=!1;break}}Oe&&(Me=!1)}var Fe=ie.selectAll("g.axistext").data(Me?[0]:[]);if(Fe.enter().append("g").classed("axistext",!0),Fe.exit().remove(),Fe.each(function(){var rt=m.select(this),ut=x.ensureSingle(rt,"path","",function(Mr){Mr.style({"stroke-width":"1px"})}),Bt=x.ensureSingle(rt,"text","",function(Mr){Mr.attr("data-notex",1)}),wt=se.bgcolor||u.defaultLine,Lt=se.bordercolor||u.contrast(wt),Se=u.contrast(wt),We={family:se.font.family||ve,size:se.font.size||fe,color:se.font.color||Se};ut.style({fill:wt,stroke:Lt}),Bt.text(we).call(d.font,We).call(l.positionText,0,0).call(l.convertToTspans,ee),rt.attr("transform","");var nt,ft,Mt=V(ee,Bt.node());if($==="x"){var Nt=Ae.side==="top"?"-":"";Bt.attr("text-anchor","middle").call(l.positionText,0,Ae.side==="top"?de-Mt.bottom-T-L:de-Mt.top+T+L),nt=Ae._offset+(ye.x0+ye.x1)/2,ft=pe._offset+(Ae.side==="top"?0:pe._length);var Zt=Mt.width/2+L;nt<Zt?(nt=Zt,ut.attr("d","M-"+(Zt-T)+",0L-"+(Zt-2*T)+","+Nt+T+"H"+(L+Mt.width/2)+"v"+Nt+(2*L+Mt.height)+"H-"+Zt+"V"+Nt+T+"Z")):nt>N.width-Zt?(nt=N.width-Zt,ut.attr("d","M"+(Zt-T)+",0L"+Zt+","+Nt+T+"v"+Nt+(2*L+Mt.height)+"H-"+Zt+"V"+Nt+T+"H"+(Zt-2*T)+"Z")):ut.attr("d","M0,0L"+T+","+Nt+T+"H"+(L+Mt.width/2)+"v"+Nt+(2*L+Mt.height)+"H-"+(L+Mt.width/2)+"V"+Nt+T+"H-"+T+"Z")}else{var Ut,fr,Tr;pe.side==="right"?(Ut="start",fr=1,Tr="",nt=Ae._offset+Ae._length):(Ut="end",fr=-1,Tr="-",nt=Ae._offset),ft=pe._offset+(ye.y0+ye.y1)/2,Bt.attr("text-anchor",Ut),ut.attr("d","M0,0L"+Tr+T+","+T+"V"+(L+Mt.height/2)+"h"+Tr+(2*L+Mt.width)+"V-"+(L+Mt.height/2)+"H"+Tr+T+"V-"+T+"Z");var ur,Kt=Mt.height/2,Qt=de-Mt.top-Kt,er="clip"+N._uid+"commonlabel"+pe._id;if(nt<Mt.width+2*L+T){ur="M-"+(T+L)+"-"+Kt+"h-"+(Mt.width-L)+"V"+Kt+"h"+(Mt.width-L)+"Z";var cr=Mt.width-nt+L;l.positionText(Bt,cr,Qt),Ut==="end"&&Bt.selectAll("tspan").each(function(){var Mr=m.select(this),Ir=d.tester.append("text").text(Mr.text()).call(d.font,We),Fr=V(ee,Ir.node());Math.round(Fr.width)<Math.round(Mt.width)&&Mr.attr("x",cr-Fr.width),Ir.remove()})}else l.positionText(Bt,fr*(L+T),Qt),ur=null;var gr=N._topclips.selectAll("#"+er).data(ur?[0]:[]);gr.enter().append("clipPath").attr("id",er).append("path"),gr.exit().remove(),gr.select("path").attr("d",ur),d.setClipUrl(Bt,ur?er:null,ee)}rt.attr("transform",e(nt,ft))}),a.isUnifiedHover($)){ie.selectAll("g.hovertext").remove();var Pe=B.filter(function(rt){return rt.hoverinfo!=="none"});if(Pe.length===0)return;var ze=N.hoverlabel,Ge=ze.font,$e={showlegend:!0,legend:{title:{text:we,font:Ge},font:Ge,bgcolor:ze.bgcolor,bordercolor:ze.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:N.legend?N.legend.traceorder:void 0,orientation:"v"}},ot={font:Ge};c($e,ot,ee._fullData);var vt=ot.legend;vt.entries=[];for(var bt=0;bt<Pe.length;bt++){var yt=Pe[bt];if(yt.hoverinfo!=="none"){var tt=z(yt,!0,$,N,we),Ke=tt[0],mt=tt[1];yt.name=mt,yt.text=mt!==""?mt+" : "+Ke:Ke;var Ft=yt.cd[yt.index];Ft&&(Ft.mc&&(yt.mc=Ft.mc),Ft.mcc&&(yt.mc=Ft.mcc),Ft.mlc&&(yt.mlc=Ft.mlc),Ft.mlcc&&(yt.mlc=Ft.mlcc),Ft.mlw&&(yt.mlw=Ft.mlw),Ft.mrc&&(yt.mrc=Ft.mrc),Ft.dir&&(yt.dir=Ft.dir)),yt._distinct=!0,vt.entries.push([yt])}}vt.entries.sort(function(rt,ut){return rt[0].trace.index-ut[0].trace.index}),vt.layer=ie,vt._inHover=!0,vt._groupTitleFont=ze.grouptitlefont,i(ee,vt);var Vt,Xt,Gt,nr,It=ie.select("g.legend"),Be=V(ee,It.node()),He=Be.width+2*L,he=Be.height+2*L,be=Pe[0],Re=(be.x0+be.x1)/2,Ue=(be.y0+be.y1)/2,Xe=!(s.traceIs(be.trace,"bar-like")||s.traceIs(be.trace,"box-violin"));ge==="y"?Xe?(Xt=Ue-L,Vt=Ue+L):(Xt=Math.min.apply(null,Pe.map(function(rt){return Math.min(rt.y0,rt.y1)})),Vt=Math.max.apply(null,Pe.map(function(rt){return Math.max(rt.y0,rt.y1)}))):Xt=Vt=x.mean(Pe.map(function(rt){return(rt.y0+rt.y1)/2}))-he/2,ge==="x"?Xe?(Gt=Re+L,nr=Re-L):(Gt=Math.max.apply(null,Pe.map(function(rt){return Math.max(rt.x0,rt.x1)})),nr=Math.min.apply(null,Pe.map(function(rt){return Math.min(rt.x0,rt.x1)}))):Gt=nr=x.mean(Pe.map(function(rt){return(rt.x0+rt.x1)/2}))-He/2;var qe,st,it=Ae._offset,Tt=pe._offset;return nr+=it-He,Xt+=Tt-he,qe=(Gt+=it)+He<Te&&Gt>=0?Gt:nr+He<Te&&nr>=0?nr:it+He<Te?it:Gt-Re<Re-nr+He?Te-He:0,qe+=L,st=(Vt+=Tt)+he<Ee&&Vt>=0?Vt:Xt+he<Ee&&Xt>=0?Xt:Tt+he<Ee?Tt:Vt-Ue<Ue-Xt+he?Ee-he:0,st+=L,It.attr("transform",e(qe-1,st-1)),It}var Pt=ie.selectAll("g.hovertext").data(B,function(rt){return P(rt)});return Pt.enter().append("g").classed("hovertext",!0).each(function(){var rt=m.select(this);rt.append("rect").call(u.fill,u.addOpacity(te,.8)),rt.append("text").classed("name",!0),rt.append("path").style("stroke-width","1px"),rt.append("text").classed("nums",!0).call(d.font,ve,fe)}),Pt.exit().remove(),Pt.each(function(rt){var ut=m.select(this).attr("transform",""),Bt=rt.color;Array.isArray(Bt)&&(Bt=Bt[rt.eventData[0].pointNumber]);var wt=rt.bgcolor||Bt,Lt=u.combine(u.opacity(wt)?wt:u.defaultLine,te),Se=u.combine(u.opacity(Bt)?Bt:u.defaultLine,te),We=rt.borderColor||u.contrast(Lt),nt=z(rt,Me,$,N,we,ut),ft=nt[0],Mt=nt[1],Nt=ut.select("text.nums").call(d.font,rt.fontFamily||ve,rt.fontSize||fe,rt.fontColor||We).text(ft).attr("data-notex",1).call(l.positionText,0,0).call(l.convertToTspans,ee),Zt=ut.select("text.name"),Ut=0,fr=0;if(Mt&&Mt!==ft){Zt.call(d.font,rt.fontFamily||ve,rt.fontSize||fe,Se).text(Mt).attr("data-notex",1).call(l.positionText,0,0).call(l.convertToTspans,ee);var Tr=V(ee,Zt.node());Ut=Tr.width+2*L,fr=Tr.height+2*L}else Zt.remove(),ut.select("rect").remove();ut.select("path").style({fill:Lt,stroke:We});var ur=rt.xa._offset+(rt.x0+rt.x1)/2,Kt=rt.ya._offset+(rt.y0+rt.y1)/2,Qt=Math.abs(rt.x1-rt.x0),er=Math.abs(rt.y1-rt.y0),cr=V(ee,Nt.node()),gr=cr.width/N._invScaleX,Mr=cr.height/N._invScaleY;rt.ty0=(de-cr.top)/N._invScaleY,rt.bx=gr+2*L,rt.by=Math.max(Mr+2*L,fr),rt.anchor="start",rt.txwidth=gr,rt.tx2width=Ut,rt.offset=0;var Ir,Fr,Yr=(gr+T+L+Ut)*N._invScaleX;if(K)rt.pos=ur,Ir=Kt+er/2+Yr<=Ee,Fr=Kt-er/2-Yr>=0,rt.idealAlign!=="top"&&Ir||!Fr?Ir?(Kt+=er/2,rt.anchor="start"):rt.anchor="middle":(Kt-=er/2,rt.anchor="end");else if(rt.pos=Kt,Ir=ur+Qt/2+Yr<=Te,Fr=ur-Qt/2-Yr>=0,rt.idealAlign!=="left"&&Ir||!Fr)if(Ir)ur+=Qt/2,rt.anchor="start";else{rt.anchor="middle";var fn=Yr/2,en=ur+fn-Te,Rn=ur-fn;en>0&&(ur-=en),Rn<0&&(ur+=-Rn)}else ur-=Qt/2,rt.anchor="end";Nt.attr("text-anchor",rt.anchor),Ut&&Zt.attr("text-anchor",rt.anchor),ut.attr("transform",e(ur,Kt)+(K?t(y):""))}),Pt}function z(B,j,ee,N,$,K){var te="",ie="";B.nameOverride!==void 0&&(B.name=B.nameOverride),B.name&&(B.trace._meta&&(B.name=x.templateString(B.name,B.trace._meta)),te=J(B.name,B.nameLength));var le=ee.charAt(0),se=le==="x"?"y":"x";B.zLabel!==void 0?(B.xLabel!==void 0&&(ie+="x: "+B.xLabel+"<br>"),B.yLabel!==void 0&&(ie+="y: "+B.yLabel+"<br>"),B.trace.type!=="choropleth"&&B.trace.type!=="choroplethmapbox"&&(ie+=(ie?"z: ":"")+B.zLabel)):j&&B[le+"Label"]===$?ie=B[se+"Label"]||"":B.xLabel===void 0?B.yLabel!==void 0&&B.trace.type!=="scattercarpet"&&(ie=B.yLabel):ie=B.yLabel===void 0?B.xLabel:"("+B.xLabel+", "+B.yLabel+")",!B.text&&B.text!==0||Array.isArray(B.text)||(ie+=(ie?"<br>":"")+B.text),B.extraText!==void 0&&(ie+=(ie?"<br>":"")+B.extraText),K&&ie===""&&!B.hovertemplate&&(te===""&&K.remove(),ie=te);var ve=B.hovertemplate||!1;if(ve){var fe=B.hovertemplateLabels||B;B[le+"Label"]!==$&&(fe[le+"other"]=fe[le+"Val"],fe[le+"otherLabel"]=fe[le+"Label"]),ie=(ie=x.hovertemplateString(ve,fe,N._d3locale,B.eventData[0]||{},B.trace._meta)).replace(S,function(ye,Ae){return te=J(Ae,B.nameLength),""})}return[ie,te]}function D(B,j,ee,N){var $=function(te){return te*ee},K=function(te){return te*N};B.each(function(te){var ie=m.select(this);if(te.del)return ie.remove();var le=ie.select("text.nums"),se=te.anchor,ve=se==="end"?-1:1,fe={start:1,end:-1,middle:0}[se],ye=fe*(T+L),Ae=ye+fe*(te.txwidth+L),pe=0,ge=te.offset,we=se==="middle";we&&(ye-=te.tx2width/2,Ae+=te.txwidth/2+L),j&&(ge*=-_,pe=te.offset*b),ie.select("path").attr("d",we?"M-"+$(te.bx/2+te.tx2width/2)+","+K(ge-te.by/2)+"h"+$(te.bx)+"v"+K(te.by)+"h-"+$(te.bx)+"Z":"M0,0L"+$(ve*T+pe)+","+K(T+ge)+"v"+K(te.by/2-T)+"h"+$(ve*te.bx)+"v-"+K(te.by)+"H"+$(ve*T+pe)+"V"+K(ge-T)+"Z");var oe=pe+ye,de=ge+te.ty0-te.by/2+L,Te=te.textAlign||"auto";Te!=="auto"&&(Te==="left"&&se!=="start"?(le.attr("text-anchor","start"),oe=we?-te.bx/2-te.tx2width/2+L:-te.bx-L):Te==="right"&&se!=="end"&&(le.attr("text-anchor","end"),oe=we?te.bx/2-te.tx2width/2-L:te.bx+L)),le.call(l.positionText,$(oe),K(de)),te.tx2width&&(ie.select("text.name").call(l.positionText,$(Ae+fe*L+pe),K(ge+te.ty0-te.by/2+L)),ie.select("rect").call(d.setRect,$(Ae+(fe-1)*te.tx2width/2+pe),K(ge-te.by/2-1),$(te.tx2width),K(te.by+2)))})}function U(B,j){var ee=B.index,N=B.trace||{},$=B.cd[0],K=B.cd[ee]||{};function te(ye){return ye||v(ye)&&ye===0}var ie=Array.isArray(ee)?function(ye,Ae){var pe=x.castOption($,ee,ye);return te(pe)?pe:x.extractOption({},N,"",Ae)}:function(ye,Ae){return x.extractOption(K,N,ye,Ae)};function le(ye,Ae,pe){var ge=ie(Ae,pe);te(ge)&&(B[ye]=ge)}if(le("hoverinfo","hi","hoverinfo"),le("bgcolor","hbg","hoverlabel.bgcolor"),le("borderColor","hbc","hoverlabel.bordercolor"),le("fontFamily","htf","hoverlabel.font.family"),le("fontSize","hts","hoverlabel.font.size"),le("fontColor","htc","hoverlabel.font.color"),le("nameLength","hnl","hoverlabel.namelength"),le("textAlign","hta","hoverlabel.align"),B.posref=j==="y"||j==="closest"&&N.orientation==="h"?B.xa._offset+(B.x0+B.x1)/2:B.ya._offset+(B.y0+B.y1)/2,B.x0=x.constrain(B.x0,0,B.xa._length),B.x1=x.constrain(B.x1,0,B.xa._length),B.y0=x.constrain(B.y0,0,B.ya._length),B.y1=x.constrain(B.y1,0,B.ya._length),B.xLabelVal!==void 0&&(B.xLabel="xLabel"in B?B.xLabel:h.hoverLabelText(B.xa,B.xLabelVal,N.xhoverformat),B.xVal=B.xa.c2d(B.xLabelVal)),B.yLabelVal!==void 0&&(B.yLabel="yLabel"in B?B.yLabel:h.hoverLabelText(B.ya,B.yLabelVal,N.yhoverformat),B.yVal=B.ya.c2d(B.yLabelVal)),B.zLabelVal!==void 0&&B.zLabel===void 0&&(B.zLabel=String(B.zLabelVal)),!(isNaN(B.xerr)||B.xa.type==="log"&&B.xerr<=0)){var se=h.tickText(B.xa,B.xa.c2l(B.xerr),"hover").text;B.xerrneg!==void 0?B.xLabel+=" +"+se+" / -"+h.tickText(B.xa,B.xa.c2l(B.xerrneg),"hover").text:B.xLabel+=" \xB1 "+se,j==="x"&&(B.distance+=1)}if(!(isNaN(B.yerr)||B.ya.type==="log"&&B.yerr<=0)){var ve=h.tickText(B.ya,B.ya.c2l(B.yerr),"hover").text;B.yerrneg!==void 0?B.yLabel+=" +"+ve+" / -"+h.tickText(B.ya,B.ya.c2l(B.yerrneg),"hover").text:B.yLabel+=" \xB1 "+ve,j==="y"&&(B.distance+=1)}var fe=B.hoverinfo||B.trace.hoverinfo;return fe&&fe!=="all"&&((fe=Array.isArray(fe)?fe:fe.split("+")).indexOf("x")===-1&&(B.xLabel=void 0),fe.indexOf("y")===-1&&(B.yLabel=void 0),fe.indexOf("z")===-1&&(B.zLabel=void 0),fe.indexOf("text")===-1&&(B.text=void 0),fe.indexOf("name")===-1&&(B.name=void 0)),B}function H(B,j,ee){var N,$,K=ee.container,te=ee.fullLayout,ie=te._size,le=ee.event,se=!!j.hLinePoint,ve=!!j.vLinePoint;if(K.selectAll(".spikeline").remove(),ve||se){var fe=u.combine(te.plot_bgcolor,te.paper_bgcolor);if(se){var ye,Ae,pe=j.hLinePoint;N=pe&&pe.xa,($=pe&&pe.ya).spikesnap==="cursor"?(ye=le.pointerX,Ae=le.pointerY):(ye=N._offset+pe.x,Ae=$._offset+pe.y);var ge,we,oe=k.readability(pe.color,fe)<1.5?u.contrast(fe):pe.color,de=$.spikemode,Te=$.spikethickness,Ee=$.spikecolor||oe,Me=h.getPxPosition(B,$);if(de.indexOf("toaxis")!==-1||de.indexOf("across")!==-1){if(de.indexOf("toaxis")!==-1&&(ge=Me,we=ye),de.indexOf("across")!==-1){var De=$._counterDomainMin,Ie=$._counterDomainMax;$.anchor==="free"&&(De=Math.min(De,$.position),Ie=Math.max(Ie,$.position)),ge=ie.l+De*ie.w,we=ie.l+Ie*ie.w}K.insert("line",":first-child").attr({x1:ge,x2:we,y1:Ae,y2:Ae,"stroke-width":Te,stroke:Ee,"stroke-dasharray":d.dashStyle($.spikedash,Te)}).classed("spikeline",!0).classed("crisp",!0),K.insert("line",":first-child").attr({x1:ge,x2:we,y1:Ae,y2:Ae,"stroke-width":Te+2,stroke:fe}).classed("spikeline",!0).classed("crisp",!0)}de.indexOf("marker")!==-1&&K.insert("circle",":first-child").attr({cx:Me+($.side!=="right"?Te:-Te),cy:Ae,r:Te,fill:Ee}).classed("spikeline",!0)}if(ve){var Oe,Ze,Fe=j.vLinePoint;N=Fe&&Fe.xa,$=Fe&&Fe.ya,N.spikesnap==="cursor"?(Oe=le.pointerX,Ze=le.pointerY):(Oe=N._offset+Fe.x,Ze=$._offset+Fe.y);var Pe,ze,Ge=k.readability(Fe.color,fe)<1.5?u.contrast(fe):Fe.color,$e=N.spikemode,ot=N.spikethickness,vt=N.spikecolor||Ge,bt=h.getPxPosition(B,N);if($e.indexOf("toaxis")!==-1||$e.indexOf("across")!==-1){if($e.indexOf("toaxis")!==-1&&(Pe=bt,ze=Ze),$e.indexOf("across")!==-1){var yt=N._counterDomainMin,tt=N._counterDomainMax;N.anchor==="free"&&(yt=Math.min(yt,N.position),tt=Math.max(tt,N.position)),Pe=ie.t+(1-tt)*ie.h,ze=ie.t+(1-yt)*ie.h}K.insert("line",":first-child").attr({x1:Oe,x2:Oe,y1:Pe,y2:ze,"stroke-width":ot,stroke:vt,"stroke-dasharray":d.dashStyle(N.spikedash,ot)}).classed("spikeline",!0).classed("crisp",!0),K.insert("line",":first-child").attr({x1:Oe,x2:Oe,y1:Pe,y2:ze,"stroke-width":ot+2,stroke:fe}).classed("spikeline",!0).classed("crisp",!0)}$e.indexOf("marker")!==-1&&K.insert("circle",":first-child").attr({cx:Oe,cy:bt-(N.side!=="top"?ot:-ot),r:ot,fill:vt}).classed("spikeline",!0)}}}function Y(B,j){return!j||j.vLinePoint!==B._spikepoints.vLinePoint||j.hLinePoint!==B._spikepoints.hLinePoint}function J(B,j){return l.plainText(B||"",{len:j,allowedTags:["br","sub","sup","b","i","em"]})}function W(B,j,ee){var N=j[B+"a"],$=j[B+"Val"],K=j.cd[0];if(N.type==="category")$=N._categoriesMap[$];else if(N.type==="date"){var te=j.trace[B+"periodalignment"];if(te){var ie=j.cd[j.index],le=ie[B+"Start"];le===void 0&&(le=ie[B]);var se=ie[B+"End"];se===void 0&&(se=ie[B]);var ve=se-le;te==="end"?$+=ve:te==="middle"&&($+=ve/2)}$=N.d2c($)}return K&&K.t&&K.t.posLetter===N._id&&(ee.boxmode!=="group"&&ee.violinmode!=="group"||($+=K.t.dPos)),$}function Z(B){return B.offsetTop+B.clientTop}function re(B){return B.offsetLeft+B.clientLeft}function V(B,j){var ee=B._fullLayout,N=j.getBoundingClientRect(),$=N.x,K=N.y,te=$+N.width,ie=K+N.height,le=x.apply3DTransform(ee._invTransform)($,K),se=x.apply3DTransform(ee._invTransform)(te,ie),ve=le[0],fe=le[1],ye=se[0],Ae=se[1];return{x:ve,y:fe,width:ye-ve,height:Ae-fe,top:Math.min(fe,Ae),left:Math.min(ve,ye),right:Math.max(ve,ye),bottom:Math.max(fe,Ae)}}},{"../../lib":515,"../../lib/events":504,"../../lib/override_cursor":526,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../legend/defaults":419,"../legend/draw":420,"./constants":401,"./helpers":403,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],405:[function(g,Q,X){var m=g("../../lib"),v=g("../color"),k=g("./helpers").isUnifiedHover;Q.exports=function(x,e,t,r){r=r||{};var l=e.legend;function n(d){r.font[d]||(r.font[d]=l?e.legend.font[d]:e.font[d])}e&&k(e.hovermode)&&(r.font||(r.font={}),n("size"),n("family"),n("color"),l?(r.bgcolor||(r.bgcolor=v.combine(e.legend.bgcolor,e.paper_bgcolor)),r.bordercolor||(r.bordercolor=e.legend.bordercolor)):r.bgcolor||(r.bgcolor=e.paper_bgcolor)),t("hoverlabel.bgcolor",r.bgcolor),t("hoverlabel.bordercolor",r.bordercolor),t("hoverlabel.namelength",r.namelength),m.coerceFont(t,"hoverlabel.font",r.font),t("hoverlabel.align",r.align)}},{"../../lib":515,"../color":367,"./helpers":403}],406:[function(g,Q,X){var m=g("../../lib"),v=g("./layout_attributes");Q.exports=function(k,x){function e(t,r){return x[t]!==void 0?x[t]:m.coerce(k,x,v,t,r)}return e("clickmode"),e("hovermode")}},{"../../lib":515,"./layout_attributes":408}],407:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../lib"),k=g("../dragelement"),x=g("./helpers"),e=g("./layout_attributes"),t=g("./hover");Q.exports={moduleType:"component",name:"fx",constants:g("./constants"),schema:{layout:e},attributes:g("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:g("./layout_global_defaults"),supplyDefaults:g("./defaults"),supplyLayoutDefaults:g("./layout_defaults"),calc:g("./calc"),getDistanceFunction:x.getDistanceFunction,getClosest:x.getClosest,inbox:x.inbox,quadrature:x.quadrature,appendArrayPointValue:x.appendArrayPointValue,castHoverOption:function(r,l,n){return v.castOption(r,l,"hoverlabel."+n)},castHoverinfo:function(r,l,n){return v.castOption(r,n,"hoverinfo",function(d){return v.coerceHoverinfo({hoverinfo:d},{_module:r._module},l)})},hover:t.hover,unhover:k.unhover,loneHover:t.loneHover,loneUnhover:function(r){var l=v.isD3Selection(r)?r:m.select(r);l.selectAll("g.hovertext").remove(),l.selectAll(".spikeline").remove()},click:g("./click")}},{"../../lib":515,"../dragelement":386,"./attributes":398,"./calc":399,"./click":400,"./constants":401,"./defaults":402,"./helpers":403,"./hover":404,"./layout_attributes":408,"./layout_defaults":409,"./layout_global_defaults":410,"@plotly/d3":58}],408:[function(g,Q,X){var m=g("./constants"),v=g("../../plots/font_attributes"),k=v({editType:"none"});k.family.dflt=m.HOVERFONT,k.size.dflt=m.HOVERFONTSIZE,Q.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:k,grouptitlefont:v({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":594,"./constants":401}],409:[function(g,Q,X){var m=g("../../lib"),v=g("./layout_attributes"),k=g("./hovermode_defaults"),x=g("./hoverlabel_defaults");Q.exports=function(e,t){function r(u,o){return m.coerce(e,t,v,u,o)}k(e,t)&&(r("hoverdistance"),r("spikedistance")),r("dragmode")==="select"&&r("selectdirection");var l=t._has("mapbox"),n=t._has("geo"),d=t._basePlotModules.length;t.dragmode==="zoom"&&((l||n)&&d===1||l&&n&&d===2)&&(t.dragmode="pan"),x(e,t,r),m.coerceFont(r,"hoverlabel.grouptitlefont",t.hoverlabel.font)}},{"../../lib":515,"./hoverlabel_defaults":405,"./hovermode_defaults":406,"./layout_attributes":408}],410:[function(g,Q,X){var m=g("../../lib"),v=g("./hoverlabel_defaults"),k=g("./layout_attributes");Q.exports=function(x,e){v(x,e,function(t,r){return m.coerce(x,e,k,t,r)})}},{"../../lib":515,"./hoverlabel_defaults":405,"./layout_attributes":408}],411:[function(g,Q,X){var m=g("../../lib"),v=g("../../lib/regex").counter,k=g("../../plots/domain").attributes,x=g("../../plots/cartesian/constants").idRegex,e=g("../../plot_api/plot_template"),t={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[v("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[x.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[x.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:k({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function r(d,u,o){var h=u[o+"axes"],s=Object.keys((d._splomAxes||{})[o]||{});return Array.isArray(h)?h:s.length?s:void 0}function l(d,u,o,h,s,a){var p=u(d+"gap",o),c=u("domain."+d);u(d+"side",h);for(var i=new Array(s),y=c[0],f=(c[1]-y)/(s-p),w=f*(1-p),b=0;b<s;b++){var _=y+f*b;i[a?s-1-b:b]=[_,_+w]}return i}function n(d,u,o,h,s){var a,p=new Array(o);function c(i,y){u.indexOf(y)!==-1&&h[y]===void 0?(p[i]=y,h[y]=i):p[i]=""}if(Array.isArray(d))for(a=0;a<o;a++)c(a,d[a]);else for(c(0,s),a=1;a<o;a++)c(a,s+(a+1));return p}Q.exports={moduleType:"component",name:"grid",schema:{layout:{grid:t}},layoutAttributes:t,sizeDefaults:function(d,u){var o=d.grid||{},h=r(u,o,"x"),s=r(u,o,"y");if(d.grid||h||s){var a,p,c=Array.isArray(o.subplots)&&Array.isArray(o.subplots[0]),i=Array.isArray(h),y=Array.isArray(s),f=i&&h!==o.xaxes&&y&&s!==o.yaxes;c?(a=o.subplots.length,p=o.subplots[0].length):(y&&(a=s.length),i&&(p=h.length));var w=e.newContainer(u,"grid"),b=S("rows",a),_=S("columns",p);if(b*_>1){!c&&!i&&!y&&S("pattern")==="independent"&&(c=!0),w._hasSubplotGrid=c;var T,L,A=S("roworder")==="top to bottom",I=c?.2:.1,P=c?.3:.1;f&&u._splomGridDflt&&(T=u._splomGridDflt.xside,L=u._splomGridDflt.yside),w._domains={x:l("x",S,I,T,_),y:l("y",S,P,L,b,A)}}else delete u.grid}function S(E,z){return m.coerce(o,w,t,E,z)}},contentDefaults:function(d,u){var o=u.grid;if(o&&o._domains){var h,s,a,p,c,i,y,f=d.grid||{},w=u._subplots,b=o._hasSubplotGrid,_=o.rows,T=o.columns,L=o.pattern==="independent",A=o._axisMap={};if(b){var I=f.subplots||[];i=o.subplots=new Array(_);var P=1;for(h=0;h<_;h++){var S=i[h]=new Array(T),E=I[h]||[];for(s=0;s<T;s++)if(L?(c=P===1?"xy":"x"+P+"y"+P,P++):c=E[s],S[s]="",w.cartesian.indexOf(c)!==-1){if(y=c.indexOf("y"),a=c.slice(0,y),p=c.slice(y),A[a]!==void 0&&A[a]!==s||A[p]!==void 0&&A[p]!==h)continue;S[s]=c,A[a]=s,A[p]=h}}}else{var z=r(u,f,"x"),D=r(u,f,"y");o.xaxes=n(z,w.xaxis,T,A,"x"),o.yaxes=n(D,w.yaxis,_,A,"y")}var U=o._anchors={},H=o.roworder==="top to bottom";for(var Y in A){var J,W,Z,re=Y.charAt(0),V=o[re+"side"];if(V.length<8)U[Y]="free";else if(re==="x"){if(V.charAt(0)==="t"===H?(J=0,W=1,Z=_):(J=_-1,W=-1,Z=-1),b){var B=A[Y];for(h=J;h!==Z;h+=W)if((c=i[h][B])&&(y=c.indexOf("y"),c.slice(0,y)===Y)){U[Y]=c.slice(y);break}}else for(h=J;h!==Z;h+=W)if(p=o.yaxes[h],w.cartesian.indexOf(Y+p)!==-1){U[Y]=p;break}}else if(V.charAt(0)==="l"?(J=0,W=1,Z=T):(J=T-1,W=-1,Z=-1),b){var j=A[Y];for(h=J;h!==Z;h+=W)if((c=i[j][h])&&(y=c.indexOf("y"),c.slice(y)===Y)){U[Y]=c.slice(0,y);break}}else for(h=J;h!==Z;h+=W)if(a=o.xaxes[h],w.cartesian.indexOf(a+Y)!==-1){U[Y]=a;break}}}}}},{"../../lib":515,"../../lib/regex":532,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573,"../../plots/domain":593}],412:[function(g,Q,X){var m=g("../../plots/cartesian/constants"),v=g("../../plot_api/plot_template").templatedArray;g("../../constants/axis_placeable_objects"),Q.exports=v("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",m.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",m.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":484,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573}],413:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../../lib/to_log_range");Q.exports=function(k,x,e,t){x=x||{};var r=e==="log"&&x.type==="linear",l=e==="linear"&&x.type==="log";if(r||l){for(var n,d,u=k._fullLayout.images,o=x._id.charAt(0),h=0;h<u.length;h++)if(d="images["+h+"].",(n=u[h])[o+"ref"]===x._id){var s=n[o],a=n["size"+o],p=null,c=null;if(r){p=v(s,x.range);var i=a/Math.pow(10,p)/2;c=2*Math.log(i+Math.sqrt(1+i*i))/Math.LN10}else c=(p=Math.pow(10,s))*(Math.pow(10,a/2)-Math.pow(10,-a/2));m(p)?m(c)||(c=null):(p=null,c=null),t(d+o,p),t(d+"size"+o,c)}}}},{"../../lib/to_log_range":543,"fast-isnumeric":190}],414:[function(g,Q,X){var m=g("../../lib"),v=g("../../plots/cartesian/axes"),k=g("../../plots/array_container_defaults"),x=g("./attributes");function e(t,r,l){function n(p,c){return m.coerce(t,r,x,p,c)}var d=n("source");if(!n("visible",!!d))return r;n("layer"),n("xanchor"),n("yanchor"),n("sizex"),n("sizey"),n("sizing"),n("opacity");for(var u={_fullLayout:l},o=["x","y"],h=0;h<2;h++){var s=o[h],a=v.coerceRef(t,r,u,s,"paper",void 0);a!=="paper"&&v.getFromId(u,a)._imgIndices.push(r._index),v.coercePosition(r,u,n,a,s,0)}return r}Q.exports=function(t,r){k(t,r,{name:"images",handleItemDefaults:e})}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":412}],415:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../drawing"),k=g("../../plots/cartesian/axes"),x=g("../../plots/cartesian/axis_ids"),e=g("../../constants/xmlns_namespaces");Q.exports=function(t){var r,l,n=t._fullLayout,d=[],u={},o=[];for(l=0;l<n.images.length;l++){var h=n.images[l];if(h.visible)if(h.layer==="below"&&h.xref!=="paper"&&h.yref!=="paper"){r=x.ref2id(h.xref)+x.ref2id(h.yref);var s=n._plots[r];if(!s){o.push(h);continue}s.mainplot&&(r=s.mainplot.id),u[r]||(u[r]=[]),u[r].push(h)}else h.layer==="above"?d.push(h):o.push(h)}var a={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},p={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function c(T){var L=m.select(this);if(this._imgSrc!==T.source)if(L.attr("xmlns",e.svg),T.source&&T.source.slice(0,5)==="data:")L.attr("xlink:href",T.source),this._imgSrc=T.source;else{var A=new Promise(function(I){var P=new Image;function S(){L.remove(),I()}this.img=P,P.setAttribute("crossOrigin","anonymous"),P.onerror=S,P.onload=function(){var E=document.createElement("canvas");E.width=this.width,E.height=this.height,E.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var z=E.toDataURL("image/png");L.attr("xlink:href",z),I()},L.on("error",S),P.src=T.source,this._imgSrc=T.source}.bind(this));t._promises.push(A)}}function i(T){var L,A,I=m.select(this),P=k.getFromId(t,T.xref),S=k.getFromId(t,T.yref),E=k.getRefType(T.xref)==="domain",z=k.getRefType(T.yref)==="domain",D=n._size;L=P!==void 0?typeof T.xref=="string"&&E?P._length*T.sizex:Math.abs(P.l2p(T.sizex)-P.l2p(0)):T.sizex*D.w,A=S!==void 0?typeof T.yref=="string"&&z?S._length*T.sizey:Math.abs(S.l2p(T.sizey)-S.l2p(0)):T.sizey*D.h;var U,H,Y=L*a[T.xanchor].offset,J=A*p[T.yanchor].offset,W=a[T.xanchor].sizing+p[T.yanchor].sizing;switch(U=P!==void 0?typeof T.xref=="string"&&E?P._length*T.x+P._offset:P.r2p(T.x)+P._offset:T.x*D.w+D.l,U+=Y,H=S!==void 0?typeof T.yref=="string"&&z?S._length*(1-T.y)+S._offset:S.r2p(T.y)+S._offset:D.h-T.y*D.h+D.t,H+=J,T.sizing){case"fill":W+=" slice";break;case"stretch":W="none"}I.attr({x:U,y:H,width:L,height:A,preserveAspectRatio:W,opacity:T.opacity});var Z=(P&&k.getRefType(T.xref)!=="domain"?P._id:"")+(S&&k.getRefType(T.yref)!=="domain"?S._id:"");v.setClipUrl(I,Z?"clip"+n._uid+Z:null,t)}var y=n._imageLowerLayer.selectAll("image").data(o),f=n._imageUpperLayer.selectAll("image").data(d);y.enter().append("image"),f.enter().append("image"),y.exit().remove(),f.exit().remove(),y.each(function(T){c.bind(this)(T),i.bind(this)(T)}),f.each(function(T){c.bind(this)(T),i.bind(this)(T)});var w=Object.keys(n._plots);for(l=0;l<w.length;l++){r=w[l];var b=n._plots[r];if(b.imagelayer){var _=b.imagelayer.selectAll("image").data(u[r]||[]);_.enter().append("image"),_.exit().remove(),_.each(function(T){c.bind(this)(T),i.bind(this)(T)})}}}},{"../../constants/xmlns_namespaces":492,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_ids":570,"../drawing":389,"@plotly/d3":58}],416:[function(g,Q,X){Q.exports={moduleType:"component",name:"images",layoutAttributes:g("./attributes"),supplyLayoutDefaults:g("./defaults"),includeBasePlot:g("../../plots/cartesian/include_components")("images"),draw:g("./draw"),convertCoords:g("./convert_coords")}},{"../../plots/cartesian/include_components":577,"./attributes":412,"./convert_coords":413,"./defaults":414,"./draw":415}],417:[function(g,Q,X){var m=g("../../plots/font_attributes"),v=g("../color/attributes");Q.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:v.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:m({editType:"legend"}),grouptitlefont:m({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:m({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":594,"../color/attributes":366}],418:[function(g,Q,X){Q.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],419:[function(g,Q,X){var m=g("../../registry"),v=g("../../lib"),k=g("../../plot_api/plot_template"),x=g("../../plots/attributes"),e=g("./attributes"),t=g("../../plots/layout_attributes"),r=g("./helpers");Q.exports=function(l,n,d){var u,o=l.legend||{},h=k.newContainer(n,"legend");function s(S,E){return v.coerce(o,h,e,S,E)}for(var a=function(S,E){var z=u._input,D=u;return v.coerce(z,D,x,S,E)},p=n.font||{},c=v.coerceFont(s,"grouptitlefont",v.extendFlat({},p,{size:Math.round(1.1*p.size)})),i=0,y=!1,f="normal",w=0;w<d.length;w++)(u=d[w]).visible&&((u.showlegend||u._dfltShowLegend&&!(u._module&&u._module.attributes&&u._module.attributes.showlegend&&u._module.attributes.showlegend.dflt===!1))&&(i++,u.showlegend&&(y=!0,(m.traceIs(u,"pie-like")||u._input.showlegend===!0)&&i++),v.coerceFont(a,"legendgrouptitle.font",c)),(m.traceIs(u,"bar")&&n.barmode==="stack"||["tonextx","tonexty"].indexOf(u.fill)!==-1)&&(f=r.isGrouped({traceorder:f})?"grouped+reversed":"reversed"),u.legendgroup!==void 0&&u.legendgroup!==""&&(f=r.isReversed({traceorder:f})?"reversed+grouped":"grouped"));var b=v.coerce(l,n,t,"showlegend",y&&i>1);if(b===!1&&(n.legend=void 0),(b!==!1||o.uirevision)&&(s("uirevision",n.uirevision),b!==!1)){s("bgcolor",n.paper_bgcolor),s("bordercolor"),s("borderwidth");var _,T,L,A=v.coerceFont(s,"font",n.font),I=s("orientation")==="h";if(I?(_=0,m.getComponentMethod("rangeslider","isVisible")(l.xaxis)?(T=1.1,L="bottom"):(T=-.1,L="top")):(_=1.02,T=1,L="auto"),s("traceorder",f),r.isGrouped(n.legend)&&s("tracegroupgap"),s("entrywidth"),s("entrywidthmode"),s("itemsizing"),s("itemwidth"),s("itemclick"),s("itemdoubleclick"),s("groupclick"),s("x",_),s("xanchor"),s("y",T),s("yanchor",L),s("valign"),v.noneOrAll(o,h,["x","y"]),s("title.text")){s("title.side",I?"left":"top");var P=v.extendFlat({},A,{size:v.bigFont(A.size)});v.coerceFont(s,"title.font",P)}}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/attributes":562,"../../plots/layout_attributes":619,"../../registry":647,"./attributes":417,"./helpers":423}],420:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../lib"),k=g("../../plots/plots"),x=g("../../registry"),e=g("../../lib/events"),t=g("../dragelement"),r=g("../drawing"),l=g("../color"),n=g("../../lib/svg_text_utils"),d=g("./handle_click"),u=g("./constants"),o=g("../../constants/alignment"),h=o.LINE_SPACING,s=o.FROM_TL,a=o.FROM_BR,p=g("./get_legend_data"),c=g("./style"),i=g("./helpers");function y(I,P,S){var E=I[0],z=E.width,D=P.entrywidthmode,U=E.trace.legendwidth||P.entrywidth;return D==="fraction"?P._maxWidth*U:S+(U||z)}function f(I,P,S,E,z){var D=S.data()[0][0].trace,U={event:z,node:S.node(),curveNumber:D.index,expandedIndex:D._expandedIndex,data:I.data,layout:I.layout,frames:I._transitionData._frames,config:I._context,fullData:I._fullData,fullLayout:I._fullLayout};D._group&&(U.group=D._group),x.traceIs(D,"pie-like")&&(U.label=S.datum()[0].label),e.triggerHandler(I,"plotly_legendclick",U)!==!1&&(E===1?P._clickTimeout=setTimeout(function(){I._fullLayout&&d(S,I,E)},I._context.doubleClickDelay):E===2&&(P._clickTimeout&&clearTimeout(P._clickTimeout),I._legendMouseDownTime=0,e.triggerHandler(I,"plotly_legenddoubleclick",U)!==!1&&d(S,I,E)))}function w(I,P,S){var E,z,D=I.data()[0][0],U=D.trace,H=x.traceIs(U,"pie-like"),Y=!S._inHover&&P._context.edits.legendText&&!H,J=S._maxNameLength;D.groupTitle?(E=D.groupTitle.text,z=D.groupTitle.font):(z=S.font,S.entries?E=D.text:(E=H?D.label:U.name,U._meta&&(E=v.templateString(E,U._meta))));var W=v.ensureSingle(I,"text","legendtext");W.attr("text-anchor","start").call(r.font,z).text(Y?b(E,J):E);var Z=S.itemwidth+2*u.itemGap;n.positionText(W,Z,0),Y?W.call(n.makeEditable,{gd:P,text:E}).call(T,I,P,S).on("edit",function(re){this.text(b(re,J)).call(T,I,P,S);var V=D.trace._fullInput||{},B={};if(x.hasTransform(V,"groupby")){var j=x.getTransformIndices(V,"groupby"),ee=j[j.length-1],N=v.keyedContainer(V,"transforms["+ee+"].styles","target","value.name");N.set(D.trace._group,re),B=N.constructUpdate()}else B.name=re;return x.call("_guiRestyle",P,B,U.index)}):T(W,I,P,S)}function b(I,P){var S=Math.max(4,P);if(I&&I.trim().length>=S/2)return I;for(var E=S-(I=I||"").length;E>0;E--)I+=" ";return I}function _(I,P){var S,E=P._context.doubleClickDelay,z=1,D=v.ensureSingle(I,"rect","legendtoggle",function(U){P._context.staticPlot||U.style("cursor","pointer").attr("pointer-events","all"),U.call(l.fill,"rgba(0,0,0,0)")});P._context.staticPlot||(D.on("mousedown",function(){(S=new Date().getTime())-P._legendMouseDownTime<E?z+=1:(z=1,P._legendMouseDownTime=S)}),D.on("mouseup",function(){if(!P._dragged&&!P._editing){var U=P._fullLayout.legend;new Date().getTime()-P._legendMouseDownTime>E&&(z=Math.max(z-1,1)),f(P,U,I,z,m.event)}}))}function T(I,P,S,E,z){E._inHover&&I.attr("data-notex",!0),n.convertToTspans(I,S,function(){(function(D,U,H,Y){var J=D.data()[0][0];if(!H._inHover&&J&&!J.trace.showlegend)return void D.remove();var W=D.select("g[class*=math-group]"),Z=W.node();H||(H=U._fullLayout.legend);var re,V=H.borderwidth;re=Y===1?H.title.font:J.groupTitle?J.groupTitle.font:H.font;var B,j,ee=re.size*h;if(Z){var N=r.bBox(Z);B=N.height,j=N.width,Y===1?r.setTranslate(W,V,V+.75*B):r.setTranslate(W,0,.25*B)}else{var $=D.select(Y===1?".legendtitletext":".legendtext"),K=n.lineCount($),te=$.node();if(B=ee*K,j=te?r.bBox(te).width:0,Y===1)H.title.side==="left"&&(j+=2*u.itemGap),n.positionText($,V+u.titlePad,V+ee);else{var ie=2*u.itemGap+H.itemwidth;J.groupTitle&&(ie=u.itemGap,j-=H.itemwidth),n.positionText($,ie,-ee*((K-1)/2-.3))}}Y===1?(H._titleWidth=j,H._titleHeight=B):(J.lineHeight=ee,J.height=Math.max(B,16)+3,J.width=j)})(P,S,E,z)})}function L(I){return v.isRightAnchor(I)?"right":v.isCenterAnchor(I)?"center":"left"}function A(I){return v.isBottomAnchor(I)?"bottom":v.isMiddleAnchor(I)?"middle":"top"}Q.exports=function(I,P){return P||(P=I._fullLayout.legend||{}),function(S,E){var z,D,U=S._fullLayout,H="legend"+U._uid,Y=E._inHover;if(Y?(z=E.layer,H+="-hover"):z=U._infolayer,!!z){if(S._legendMouseDownTime||(S._legendMouseDownTime=0),Y){if(!E.entries)return;D=p(E.entries,E)}else{if(!S.calcdata)return;D=U.showlegend&&p(S.calcdata,E)}var J=U.hiddenlabels||[];if(!(Y||U.showlegend&&D.length))return z.selectAll(".legend").remove(),U._topdefs.select("#"+H).remove(),k.autoMargin(S,"legend");var W=v.ensureSingle(z,"g","legend",function(K){Y||K.attr("pointer-events","all")}),Z=v.ensureSingleById(U._topdefs,"clipPath",H,function(K){K.append("rect")}),re=v.ensureSingle(W,"rect","bg",function(K){K.attr("shape-rendering","crispEdges")});re.call(l.stroke,E.bordercolor).call(l.fill,E.bgcolor).style("stroke-width",E.borderwidth+"px");var V=v.ensureSingle(W,"g","scrollbox"),B=E.title;if(E._titleWidth=0,E._titleHeight=0,B.text){var j=v.ensureSingle(V,"text","legendtitletext");j.attr("text-anchor","start").call(r.font,B.font).text(B.text),T(j,V,S,E,1)}else V.selectAll(".legendtitletext").remove();var ee=v.ensureSingle(W,"rect","scrollbar",function(K){K.attr(u.scrollBarEnterAttrs).call(l.fill,u.scrollBarColor)}),N=V.selectAll("g.groups").data(D);N.enter().append("g").attr("class","groups"),N.exit().remove();var $=N.selectAll("g.traces").data(v.identity);$.enter().append("g").attr("class","traces"),$.exit().remove(),$.style("opacity",function(K){var te=K[0].trace;return x.traceIs(te,"pie-like")?J.indexOf(K[0].label)!==-1?.5:1:te.visible==="legendonly"?.5:1}).each(function(){m.select(this).call(w,S,E)}).call(c,S,E).each(function(){Y||m.select(this).call(_,S)}),v.syncOrAsync([k.previousPromises,function(){return function(K,te,ie,le){var se=K._fullLayout;le||(le=se.legend);var ve=se._size,fe=i.isVertical(le),ye=i.isGrouped(le),Ae=le.entrywidthmode==="fraction",pe=le.borderwidth,ge=2*pe,we=u.itemGap,oe=le.itemwidth+2*we,de=2*(pe+we),Te=A(le),Ee=le.y<0||le.y===0&&Te==="top",Me=le.y>1||le.y===1&&Te==="bottom",De=le.tracegroupgap,Ie={};le._maxHeight=Math.max(Ee||Me?se.height/2:ve.h,30);var Oe=0;le._width=0,le._height=0;var Ze=function(He){var he=0,be=0,Re=He.title.side;return Re&&(Re.indexOf("left")!==-1&&(he=He._titleWidth),Re.indexOf("top")!==-1&&(be=He._titleHeight)),[he,be]}(le);if(fe)ie.each(function(He){var he=He[0].height;r.setTranslate(this,pe+Ze[0],pe+Ze[1]+le._height+he/2+we),le._height+=he,le._width=Math.max(le._width,He[0].width)}),Oe=oe+le._width,le._width+=we+oe+ge,le._height+=de,ye&&(te.each(function(He,he){r.setTranslate(this,0,he*le.tracegroupgap)}),le._height+=(le._lgroupsLength-1)*le.tracegroupgap);else{var Fe=L(le),Pe=le.x<0||le.x===0&&Fe==="right",ze=le.x>1||le.x===1&&Fe==="left",Ge=Me||Ee,$e=se.width/2;le._maxWidth=Math.max(Pe?Ge&&Fe==="left"?ve.l+ve.w:$e:ze?Ge&&Fe==="right"?ve.r+ve.w:$e:ve.w,2*oe);var ot=0,vt=0;ie.each(function(He){var he=y(He,le,oe);ot=Math.max(ot,he),vt+=he}),Oe=null;var bt=0;if(ye){var yt=0,tt=0,Ke=0;te.each(function(){var He=0,he=0;m.select(this).selectAll("g.traces").each(function(Re){var Ue=y(Re,le,oe),Xe=Re[0].height;r.setTranslate(this,Ze[0],Ze[1]+pe+we+Xe/2+he),he+=Xe,He=Math.max(He,Ue),Ie[Re[0].trace.legendgroup]=He});var be=He+we;tt>0&&be+pe+tt>le._maxWidth?(bt=Math.max(bt,tt),tt=0,Ke+=yt+De,yt=he):yt=Math.max(yt,he),r.setTranslate(this,tt,Ke),tt+=be}),le._width=Math.max(bt,tt)+pe,le._height=Ke+yt+de}else{var mt=ie.size(),Ft=vt+ge+(mt-1)*we<le._maxWidth,Vt=0,Xt=0,Gt=0,nr=0;ie.each(function(He){var he=He[0].height,be=y(He,le,oe),Re=Ft?be:ot;Ae||(Re+=we),Re+pe+Xt-we>=le._maxWidth&&(bt=Math.max(bt,nr),Xt=0,Gt+=Vt,le._height+=Vt,Vt=0),r.setTranslate(this,Ze[0]+pe+Xt,Ze[1]+pe+Gt+he/2+we),nr=Xt+be+we,Xt+=Re,Vt=Math.max(Vt,he)}),Ft?(le._width=Xt+ge,le._height=Vt+de):(le._width=Math.max(bt,nr)+ge,le._height+=Vt+de)}}le._width=Math.ceil(Math.max(le._width+Ze[0],le._titleWidth+2*(pe+u.titlePad))),le._height=Math.ceil(Math.max(le._height+Ze[1],le._titleHeight+2*(pe+u.itemGap))),le._effHeight=Math.min(le._height,le._maxHeight);var It=K._context.edits,Be=It.legendText||It.legendPosition;ie.each(function(He){var he=m.select(this).select(".legendtoggle"),be=He[0].height,Re=He[0].trace.legendgroup,Ue=y(He,le,oe);ye&&Re!==""&&(Ue=Ie[Re]);var Xe=Be?oe:Oe||Ue;fe||Ae||(Xe+=we/2),r.setRect(he,0,-be/2,Xe,be)})}(S,N,$,E)},function(){var K,te,ie,le,se=U._size,ve=E.borderwidth;if(!Y){if(function(Pe){var ze=Pe._fullLayout.legend,Ge=L(ze),$e=A(ze);return k.autoMargin(Pe,"legend",{x:ze.x,y:ze.y,l:ze._width*s[Ge],r:ze._width*a[Ge],b:ze._effHeight*a[$e],t:ze._effHeight*s[$e]})}(S))return;var fe=se.l+se.w*E.x-s[L(E)]*E._width,ye=se.t+se.h*(1-E.y)-s[A(E)]*E._effHeight;if(U.margin.autoexpand){var Ae=fe,pe=ye;fe=v.constrain(fe,0,U.width-E._width),ye=v.constrain(ye,0,U.height-E._effHeight),fe!==Ae&&v.log("Constrain legend.x to make legend fit inside graph"),ye!==pe&&v.log("Constrain legend.y to make legend fit inside graph")}r.setTranslate(W,fe,ye)}if(ee.on(".drag",null),W.on("wheel",null),Y||E._height<=E._maxHeight||S._context.staticPlot){var ge=E._effHeight;Y&&(ge=E._height),re.attr({width:E._width-ve,height:ge-ve,x:ve/2,y:ve/2}),r.setTranslate(V,0,0),Z.select("rect").attr({width:E._width-2*ve,height:ge-2*ve,x:ve,y:ve}),r.setClipUrl(V,H,S),r.setRect(ee,0,0,0,0),delete E._scrollY}else{var we,oe,de,Te=Math.max(u.scrollBarMinHeight,E._effHeight*E._effHeight/E._height),Ee=E._effHeight-Te-2*u.scrollBarMargin,Me=E._height-E._effHeight,De=Ee/Me,Ie=Math.min(E._scrollY||0,Me);re.attr({width:E._width-2*ve+u.scrollBarWidth+u.scrollBarMargin,height:E._effHeight-ve,x:ve/2,y:ve/2}),Z.select("rect").attr({width:E._width-2*ve+u.scrollBarWidth+u.scrollBarMargin,height:E._effHeight-2*ve,x:ve,y:ve+Ie}),r.setClipUrl(V,H,S),Fe(Ie,Te,De),W.on("wheel",function(){Fe(Ie=v.constrain(E._scrollY+m.event.deltaY/Ee*Me,0,Me),Te,De),Ie!==0&&Ie!==Me&&m.event.preventDefault()});var Oe=m.behavior.drag().on("dragstart",function(){var Pe=m.event.sourceEvent;we=Pe.type==="touchstart"?Pe.changedTouches[0].clientY:Pe.clientY,de=Ie}).on("drag",function(){var Pe=m.event.sourceEvent;Pe.buttons===2||Pe.ctrlKey||(oe=Pe.type==="touchmove"?Pe.changedTouches[0].clientY:Pe.clientY,Fe(Ie=function(ze,Ge,$e){var ot=($e-Ge)/De+ze;return v.constrain(ot,0,Me)}(de,we,oe),Te,De))});ee.call(Oe);var Ze=m.behavior.drag().on("dragstart",function(){var Pe=m.event.sourceEvent;Pe.type==="touchstart"&&(we=Pe.changedTouches[0].clientY,de=Ie)}).on("drag",function(){var Pe=m.event.sourceEvent;Pe.type==="touchmove"&&(oe=Pe.changedTouches[0].clientY,Fe(Ie=function(ze,Ge,$e){var ot=(Ge-$e)/De+ze;return v.constrain(ot,0,Me)}(de,we,oe),Te,De))});V.call(Ze)}function Fe(Pe,ze,Ge){E._scrollY=S._fullLayout.legend._scrollY=Pe,r.setTranslate(V,0,-Pe),r.setRect(ee,E._width,u.scrollBarMargin+Pe*Ge,u.scrollBarWidth,ze),Z.select("rect").attr("y",ve+Pe)}S._context.edits.legendPosition&&(W.classed("cursor-move",!0),t.init({element:W.node(),gd:S,prepFn:function(){var Pe=r.getTranslate(W);ie=Pe.x,le=Pe.y},moveFn:function(Pe,ze){var Ge=ie+Pe,$e=le+ze;r.setTranslate(W,Ge,$e),K=t.align(Ge,0,se.l,se.l+se.w,E.xanchor),te=t.align($e,0,se.t+se.h,se.t,E.yanchor)},doneFn:function(){K!==void 0&&te!==void 0&&x.call("_guiRelayout",S,{"legend.x":K,"legend.y":te})},clickFn:function(Pe,ze){var Ge=z.selectAll("g.traces").filter(function(){var $e=this.getBoundingClientRect();return ze.clientX>=$e.left&&ze.clientX<=$e.right&&ze.clientY>=$e.top&&ze.clientY<=$e.bottom});Ge.size()>0&&f(S,W,Ge,Pe,ze)}}))}],S)}}(I,P)}},{"../../constants/alignment":483,"../../lib":515,"../../lib/events":504,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"./constants":418,"./get_legend_data":421,"./handle_click":422,"./helpers":423,"./style":425,"@plotly/d3":58}],421:[function(g,Q,X){var m=g("../../registry"),v=g("./helpers");Q.exports=function(k,x){var e,t,r=x._inHover,l=v.isGrouped(x),n=v.isReversed(x),d={},u=[],o=!1,h={},s=0,a=0;function p(D,U){if(D!==""&&v.isGrouped(x))u.indexOf(D)===-1?(u.push(D),o=!0,d[D]=[U]):d[D].push(U);else{var H="~~i"+s;u.push(H),d[H]=[U],s++}}for(e=0;e<k.length;e++){var c=k[e],i=c[0],y=i.trace,f=y.legendgroup;if(r||y.visible&&y.showlegend)if(m.traceIs(y,"pie-like"))for(h[f]||(h[f]={}),t=0;t<c.length;t++){var w=c[t].label;h[f][w]||(p(f,{label:w,color:c[t].color,i:c[t].i,trace:y,pts:c[t].pts}),h[f][w]=!0,a=Math.max(a,(w||"").length))}else p(f,i),a=Math.max(a,(y.name||"").length)}if(!u.length)return[];var b=!o||!l,_=[];for(e=0;e<u.length;e++){var T=d[u[e]];b?_.push(T[0]):_.push(T)}for(b&&(_=[_]),e=0;e<_.length;e++){var L=1/0;for(t=0;t<_[e].length;t++){var A=_[e][t].trace.legendrank;L>A&&(L=A)}_[e][0]._groupMinRank=L,_[e][0]._preGroupSort=e}var I=function(D,U){return D.trace.legendrank-U.trace.legendrank||D._preSort-U._preSort};for(_.forEach(function(D,U){D[0]._preGroupSort=U}),_.sort(function(D,U){return D[0]._groupMinRank-U[0]._groupMinRank||D[0]._preGroupSort-U[0]._preGroupSort}),e=0;e<_.length;e++){_[e].forEach(function(D,U){D._preSort=U}),_[e].sort(I);var P=_[e][0].trace,S=null;for(t=0;t<_[e].length;t++){var E=_[e][t].trace.legendgrouptitle;if(E&&E.text){S=E,r&&(E.font=x._groupTitleFont);break}}if(n&&_[e].reverse(),S){var z=!1;for(t=0;t<_[e].length;t++)if(m.traceIs(_[e][t].trace,"pie-like")){z=!0;break}_[e].unshift({i:-1,groupTitle:S,noClick:z,trace:{showlegend:P.showlegend,legendgroup:P.legendgroup,visible:x.groupclick==="toggleitem"||P.visible}})}for(t=0;t<_[e].length;t++)_[e][t]=[_[e][t]]}return x._lgroupsLength=_.length,x._maxNameLength=a,_}},{"../../registry":647,"./helpers":423}],422:[function(g,Q,X){var m=g("../../lib"),v=g("../../registry"),k=!0;Q.exports=function(x,e,t){var r=e._fullLayout;if(!e._dragged&&!e._editing){var l,n=r.legend.itemclick,d=r.legend.itemdoubleclick,u=r.legend.groupclick;if(t===1&&n==="toggle"&&d==="toggleothers"&&k&&e.data&&e._context.showTips&&m.notifier(m._(e,"Double-click on legend to isolate one trace"),"long"),k=!1,t===1?l=n:t===2&&(l=d),l){var o=u==="togglegroup",h=r.hiddenlabels?r.hiddenlabels.slice():[],s=x.data()[0][0];if(!s.groupTitle||!s.noClick){var a,p,c,i,y,f=e._fullData,w=s.trace,b=w.legendgroup,_={},T=[],L=[],A=[];if(v.traceIs(w,"pie-like")){var I=s.label,P=h.indexOf(I);l==="toggle"?P===-1?h.push(I):h.splice(P,1):l==="toggleothers"&&(h=[],e.calcdata[0].forEach(function(j){I!==j.label&&h.push(j.label)}),e._fullLayout.hiddenlabels&&e._fullLayout.hiddenlabels.length===h.length&&P===-1&&(h=[])),v.call("_guiRelayout",e,"hiddenlabels",h)}else{var S,E=b&&b.length,z=[];if(E)for(a=0;a<f.length;a++)(S=f[a]).visible&&S.legendgroup===b&&z.push(a);if(l==="toggle"){var D;switch(w.visible){case!0:D="legendonly";break;case!1:D=!1;break;case"legendonly":D=!0}if(E)if(o)for(a=0;a<f.length;a++)f[a].visible!==!1&&f[a].legendgroup===b&&B(f[a],D);else B(w,D);else B(w,D)}else if(l==="toggleothers"){var U,H,Y,J,W=!0;for(a=0;a<f.length;a++)if(U=f[a]===w,Y=f[a].showlegend!==!0,!(U||Y||(H=E&&f[a].legendgroup===b)||f[a].visible!==!0||v.traceIs(f[a],"notLegendIsolatable"))){W=!1;break}for(a=0;a<f.length;a++)if(f[a].visible!==!1&&!v.traceIs(f[a],"notLegendIsolatable"))switch(w.visible){case"legendonly":B(f[a],!0);break;case!0:J=!!W||"legendonly",U=f[a]===w,Y=f[a].showlegend!==!0&&!f[a].legendgroup,H=U||E&&f[a].legendgroup===b,B(f[a],!(!H&&!Y)||J)}}for(a=0;a<L.length;a++)if(c=L[a]){var Z=c.constructUpdate(),re=Object.keys(Z);for(p=0;p<re.length;p++)i=re[p],(_[i]=_[i]||[])[A[a]]=Z[i]}for(y=Object.keys(_),a=0;a<y.length;a++)for(i=y[a],p=0;p<T.length;p++)_[i].hasOwnProperty(p)||(_[i][p]=void 0);v.call("_guiRestyle",e,_,T)}}}}function V(j,ee,N){var $=T.indexOf(j),K=_[ee];return K||(K=_[ee]=[]),T.indexOf(j)===-1&&(T.push(j),$=T.length-1),K[$]=N,$}function B(j,ee){if(!s.groupTitle||o){var N=j._fullInput;if(v.hasTransform(N,"groupby")){var $=L[N.index];if(!$){var K=v.getTransformIndices(N,"groupby"),te=K[K.length-1];$=m.keyedContainer(N,"transforms["+te+"].styles","target","value.visible"),L[N.index]=$}var ie=$.get(j._group);ie===void 0&&(ie=!0),ie!==!1&&$.set(j._group,ee),A[N.index]=V(N.index,"visible",N.visible!==!1)}else{var le=N.visible!==!1&&ee;V(N.index,"visible",le)}}}}},{"../../lib":515,"../../registry":647}],423:[function(g,Q,X){X.isGrouped=function(m){return(m.traceorder||"").indexOf("grouped")!==-1},X.isVertical=function(m){return m.orientation!=="h"},X.isReversed=function(m){return(m.traceorder||"").indexOf("reversed")!==-1}},{}],424:[function(g,Q,X){Q.exports={moduleType:"component",name:"legend",layoutAttributes:g("./attributes"),supplyLayoutDefaults:g("./defaults"),draw:g("./draw"),style:g("./style")}},{"./attributes":417,"./defaults":419,"./draw":420,"./style":425}],425:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../registry"),k=g("../../lib"),x=k.strTranslate,e=g("../drawing"),t=g("../color"),r=g("../colorscale/helpers").extractOpts,l=g("../../traces/scatter/subtypes"),n=g("../../traces/pie/style_one"),d=g("../../traces/pie/helpers").castOption,u=g("./constants");function o(a,p){return(p?"radial":"horizontal")+(a?"":"reversed")}function h(a){var p=a[0].trace,c=p.contours,i=l.hasLines(p),y=l.hasMarkers(p),f=p.visible&&p.fill&&p.fill!=="none",w=!1,b=!1;if(c){var _=c.coloring;_==="lines"?w=!0:i=_==="none"||_==="heatmap"||c.showlines,c.type==="constraint"?f=c._operation!=="=":_!=="fill"&&_!=="heatmap"||(b=!0)}return{showMarker:y,showLine:i,showFill:f,showGradientLine:w,showGradientFill:b,anyLine:i||w,anyFill:f||b}}function s(a,p,c){return a&&k.isArrayOrTypedArray(a)?p:a>c?c:a}Q.exports=function(a,p,c){var i=p._fullLayout;c||(c=i.legend);var y=c.itemsizing==="constant",f=c.itemwidth,w=(f+2*u.itemGap)/2,b=x(w,0),_=function(A,I,P,S){var E;if(A+1)E=A;else{if(!(I&&I.width>0))return 0;E=I.width}return y?S:Math.min(E,P)};function T(A,I,P){var S=A[0].trace,E=S.marker||{},z=E.line||{},D=P?S.visible&&S.type===P:v.traceIs(S,"bar"),U=m.select(I).select("g.legendpoints").selectAll("path.legend"+P).data(D?[A]:[]);U.enter().append("path").classed("legend"+P,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",b),U.exit().remove(),U.each(function(H){var Y=m.select(this),J=H[0],W=_(J.mlw,E.line,5,2);Y.style("stroke-width",W+"px");var Z=J.mcc;if(!c._inHover&&"mc"in J){var re=r(E),V=re.mid;V===void 0&&(V=(re.max+re.min)/2),Z=e.tryColorscale(E,"")(V)}var B=Z||J.mc||E.color,j=E.pattern,ee=j&&e.getPatternAttr(j.shape,0,"");if(ee){var N=e.getPatternAttr(j.bgcolor,0,null),$=e.getPatternAttr(j.fgcolor,0,null),K=j.fgopacity,te=s(j.size,8,10),ie=s(j.solidity,.5,1),le="legend-"+S.uid;Y.call(e.pattern,"legend",p,le,ee,te,ie,Z,j.fillmode,N,$,K)}else Y.call(t.fill,B);W&&t.stroke(Y,J.mlc||z.color)})}function L(A,I,P){var S=A[0],E=S.trace,z=P?E.visible&&E.type===P:v.traceIs(E,P),D=m.select(I).select("g.legendpoints").selectAll("path.legend"+P).data(z?[A]:[]);if(D.enter().append("path").classed("legend"+P,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",b),D.exit().remove(),D.size()){var U=(E.marker||{}).line,H=_(d(U.width,S.pts),U,5,2),Y=k.minExtend(E,{marker:{line:{width:H}}});Y.marker.line.color=U.color;var J=k.minExtend(S,{trace:Y});n(D,J,Y)}}a.each(function(A){var I=m.select(this),P=k.ensureSingle(I,"g","layers");P.style("opacity",A[0].trace.opacity);var S=c.valign,E=A[0].lineHeight,z=A[0].height;if(S!=="middle"&&E&&z){var D={top:1,bottom:-1}[S]*(.5*(E-z+3));P.attr("transform",x(0,D))}else P.attr("transform",null);P.selectAll("g.legendfill").data([A]).enter().append("g").classed("legendfill",!0),P.selectAll("g.legendlines").data([A]).enter().append("g").classed("legendlines",!0);var U=P.selectAll("g.legendsymbols").data([A]);U.enter().append("g").classed("legendsymbols",!0),U.selectAll("g.legendpoints").data([A]).enter().append("g").classed("legendpoints",!0)}).each(function(A){var I,P=A[0].trace,S=[];if(P.visible)switch(P.type){case"histogram2d":case"heatmap":S=[["M-15,-2V4H15V-2Z"]],I=!0;break;case"choropleth":case"choroplethmapbox":S=[["M-6,-6V6H6V-6Z"]],I=!0;break;case"densitymapbox":S=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],I="radial";break;case"cone":S=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],I=!1;break;case"streamtube":S=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],I=!1;break;case"surface":S=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],I=!0;break;case"mesh3d":S=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],I=!1;break;case"volume":S=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],I=!0;break;case"isosurface":S=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],I=!1}var E=m.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(S);E.enter().append("path").classed("legend3dandfriends",!0).attr("transform",b).style("stroke-miterlimit",1),E.exit().remove(),E.each(function(z,D){var U,H=m.select(this),Y=r(P),J=Y.colorscale,W=Y.reversescale;if(J){if(!I){var Z=J.length;U=D===0?J[W?Z-1:0][1]:D===1?J[W?0:Z-1][1]:J[Math.floor((Z-1)/2)][1]}}else{var re=P.vertexcolor||P.facecolor||P.color;U=k.isArrayOrTypedArray(re)?re[D]||re[0]:re}H.attr("d",z[0]),U?H.call(t.fill,U):H.call(function(V){if(V.size()){var B="legendfill-"+P.uid;e.gradient(V,p,B,o(W,I==="radial"),J,"fill")}})})}).each(function(A){var I=A[0].trace,P=I.type==="waterfall";if(A[0]._distinct&&P){var S=A[0].trace[A[0].dir].marker;return A[0].mc=S.color,A[0].mlw=S.line.width,A[0].mlc=S.line.color,T(A,this,"waterfall")}var E=[];I.visible&&P&&(E=A[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var z=m.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(E);z.enter().append("path").classed("legendwaterfall",!0).attr("transform",b).style("stroke-miterlimit",1),z.exit().remove(),z.each(function(D){var U=m.select(this),H=I[D[0]].marker,Y=_(void 0,H.line,5,2);U.attr("d",D[1]).style("stroke-width",Y+"px").call(t.fill,H.color),Y&&U.call(t.stroke,H.line.color)})}).each(function(A){T(A,this,"funnel")}).each(function(A){T(A,this)}).each(function(A){var I=A[0].trace,P=m.select(this).select("g.legendpoints").selectAll("path.legendbox").data(I.visible&&v.traceIs(I,"box-violin")?[A]:[]);P.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",b),P.exit().remove(),P.each(function(){var S=m.select(this);if(I.boxpoints!=="all"&&I.points!=="all"||t.opacity(I.fillcolor)!==0||t.opacity((I.line||{}).color)!==0){var E=_(void 0,I.line,5,2);S.style("stroke-width",E+"px").call(t.fill,I.fillcolor),E&&t.stroke(S,I.line.color)}else{var z=k.minExtend(I,{marker:{size:y?12:k.constrain(I.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});P.call(e.pointStyle,z,p)}})}).each(function(A){L(A,this,"funnelarea")}).each(function(A){L(A,this,"pie")}).each(function(A){var I,P,S=h(A),E=S.showFill,z=S.showLine,D=S.showGradientLine,U=S.showGradientFill,H=S.anyFill,Y=S.anyLine,J=A[0],W=J.trace,Z=r(W),re=Z.colorscale,V=Z.reversescale,B=l.hasMarkers(W)||!H?"M5,0":Y?"M5,-2":"M5,-3",j=m.select(this),ee=j.select(".legendfill").selectAll("path").data(E||U?[A]:[]);if(ee.enter().append("path").classed("js-fill",!0),ee.exit().remove(),ee.attr("d",B+"h"+f+"v6h-"+f+"z").call(function(K){if(K.size())if(E)e.fillGroupStyle(K,p);else{var te="legendfill-"+W.uid;e.gradient(K,p,te,o(V),re,"fill")}}),z||D){var N=_(void 0,W.line,10,5);P=k.minExtend(W,{line:{width:N}}),I=[k.minExtend(J,{trace:P})]}var $=j.select(".legendlines").selectAll("path").data(z||D?[I]:[]);$.enter().append("path").classed("js-line",!0),$.exit().remove(),$.attr("d",B+(D?"l"+f+",0.0001":"h"+f)).call(z?e.lineGroupStyle:function(K){if(K.size()){var te="legendline-"+W.uid;e.lineGroupStyle(K),e.gradient(K,p,te,o(V),re,"stroke")}})}).each(function(A){var I,P,S=h(A),E=S.anyFill,z=S.anyLine,D=S.showLine,U=S.showMarker,H=A[0],Y=H.trace,J=!U&&!z&&!E&&l.hasText(Y);function W($,K,te,ie){var le=k.nestedProperty(Y,$).get(),se=k.isArrayOrTypedArray(le)&&K?K(le):le;if(y&&se&&ie!==void 0&&(se=ie),te){if(se<te[0])return te[0];if(se>te[1])return te[1]}return se}function Z($){return H._distinct&&H.index&&$[H.index]?$[H.index]:$[0]}if(U||J||D){var re={},V={};if(U){re.mc=W("marker.color",Z),re.mx=W("marker.symbol",Z),re.mo=W("marker.opacity",k.mean,[.2,1]),re.mlc=W("marker.line.color",Z),re.mlw=W("marker.line.width",k.mean,[0,5],2),V.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var B=W("marker.size",k.mean,[2,16],12);re.ms=B,V.marker.size=B}D&&(V.line={width:W("line.width",Z,[0,10],5)}),J&&(re.tx="Aa",re.tp=W("textposition",Z),re.ts=10,re.tc=W("textfont.color",Z),re.tf=W("textfont.family",Z)),I=[k.minExtend(H,re)],(P=k.minExtend(Y,V)).selectedpoints=null,P.texttemplate=null}var j=m.select(this).select("g.legendpoints"),ee=j.selectAll("path.scatterpts").data(U?I:[]);ee.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",b),ee.exit().remove(),ee.call(e.pointStyle,P,p),U&&(I[0].mrc=3);var N=j.selectAll("g.pointtext").data(J?I:[]);N.enter().append("g").classed("pointtext",!0).append("text").attr("transform",b),N.exit().remove(),N.selectAll("text").call(e.textPointStyle,P,p)}).each(function(A){var I=A[0].trace,P=m.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(I.visible&&I.type==="candlestick"?[A,A]:[]);P.enter().append("path").classed("legendcandle",!0).attr("d",function(S,E){return E?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",b).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(S,E){var z=m.select(this),D=I[E?"increasing":"decreasing"],U=_(void 0,D.line,5,2);z.style("stroke-width",U+"px").call(t.fill,D.fillcolor),U&&t.stroke(z,D.line.color)})}).each(function(A){var I=A[0].trace,P=m.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(I.visible&&I.type==="ohlc"?[A,A]:[]);P.enter().append("path").classed("legendohlc",!0).attr("d",function(S,E){return E?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",b).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(S,E){var z=m.select(this),D=I[E?"increasing":"decreasing"],U=_(void 0,D.line,5,2);z.style("fill","none").call(e.dashLine,D.line.dash,U),U&&t.stroke(z,D.line.color)})})}},{"../../lib":515,"../../registry":647,"../../traces/pie/helpers":915,"../../traces/pie/style_one":921,"../../traces/scatter/subtypes":961,"../color":367,"../colorscale/helpers":378,"../drawing":389,"./constants":418,"@plotly/d3":58}],426:[function(g,Q,X){g("./constants"),Q.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":428}],427:[function(g,Q,X){var m=g("../../registry"),v=g("../../plots/plots"),k=g("../../plots/cartesian/axis_ids"),x=g("../../fonts/ploticon"),e=g("../shapes/draw").eraseActiveShape,t=g("../../lib"),r=t._,l=Q.exports={};function n(i,y){var f,w,b=y.currentTarget,_=b.getAttribute("data-attr"),T=b.getAttribute("data-val")||!0,L=i._fullLayout,A={},I=k.list(i,null,!0),P=L._cartesianSpikesEnabled;if(_==="zoom"){var S,E=T==="in"?.5:2,z=(1+E)/2,D=(1-E)/2;for(w=0;w<I.length;w++)if(!(f=I[w]).fixedrange)if(S=f._name,T==="auto")A[S+".autorange"]=!0;else if(T==="reset"){if(f._rangeInitial===void 0)A[S+".autorange"]=!0;else{var U=f._rangeInitial.slice();A[S+".range[0]"]=U[0],A[S+".range[1]"]=U[1]}f._showSpikeInitial!==void 0&&(A[S+".showspikes"]=f._showSpikeInitial,P!=="on"||f._showSpikeInitial||(P="off"))}else{var H=[f.r2l(f.range[0]),f.r2l(f.range[1])],Y=[z*H[0]+D*H[1],z*H[1]+D*H[0]];A[S+".range[0]"]=f.l2r(Y[0]),A[S+".range[1]"]=f.l2r(Y[1])}}else _!=="hovermode"||T!=="x"&&T!=="y"||(T=L._isHoriz?"y":"x",b.setAttribute("data-val",T)),A[_]=T;L._cartesianSpikesEnabled=P,m.call("_guiRelayout",i,A)}function d(i,y){for(var f=y.currentTarget,w=f.getAttribute("data-attr"),b=f.getAttribute("data-val")||!0,_=i._fullLayout._subplots.gl3d||[],T={},L=w.split("."),A=0;A<_.length;A++)T[_[A]+"."+L[1]]=b;var I=b==="pan"?b:"zoom";T.dragmode=I,m.call("_guiRelayout",i,T)}function u(i,y){for(var f=y.currentTarget.getAttribute("data-attr"),w=f==="resetLastSave",b=f==="resetDefault",_=i._fullLayout,T=_._subplots.gl3d||[],L={},A=0;A<T.length;A++){var I,P=T[A],S=P+".camera",E=P+".aspectratio",z=P+".aspectmode",D=_[P]._scene;w?(L[S+".up"]=D.viewInitial.up,L[S+".eye"]=D.viewInitial.eye,L[S+".center"]=D.viewInitial.center,I=!0):b&&(L[S+".up"]=null,L[S+".eye"]=null,L[S+".center"]=null,I=!0),I&&(L[E+".x"]=D.viewInitial.aspectratio.x,L[E+".y"]=D.viewInitial.aspectratio.y,L[E+".z"]=D.viewInitial.aspectratio.z,L[z]=D.viewInitial.aspectmode)}m.call("_guiRelayout",i,L)}function o(i,y){var f=y.currentTarget,w=f._previousVal,b=i._fullLayout,_=b._subplots.gl3d||[],T=["xaxis","yaxis","zaxis"],L={},A={};if(w)A=w,f._previousVal=null;else{for(var I=0;I<_.length;I++){var P=_[I],S=b[P],E=P+".hovermode";L[E]=S.hovermode,A[E]=!1;for(var z=0;z<3;z++){var D=T[z],U=P+"."+D+".showspikes";A[U]=!1,L[U]=S[D].showspikes}}f._previousVal=L}return A}function h(i,y){for(var f=y.currentTarget,w=f.getAttribute("data-attr"),b=f.getAttribute("data-val")||!0,_=i._fullLayout,T=_._subplots.geo||[],L=0;L<T.length;L++){var A=T[L],I=_[A];if(w==="zoom"){var P=I.projection.scale,S=b==="in"?2*P:.5*P;m.call("_guiRelayout",i,A+".projection.scale",S)}}w==="reset"&&c(i,"geo")}function s(i){var y=i._fullLayout;return!y.hovermode&&(y._has("cartesian")?y._isHoriz?"y":"x":"closest")}function a(i){var y=s(i);m.call("_guiRelayout",i,"hovermode",y)}function p(i,y){for(var f=y.currentTarget.getAttribute("data-val"),w=i._fullLayout,b=w._subplots.mapbox||[],_={},T=0;T<b.length;T++){var L=b[T],A=w[L].zoom,I=f==="in"?1.05*A:A/1.05;_[L+".zoom"]=I}m.call("_guiRelayout",i,_)}function c(i,y){for(var f=i._fullLayout,w=f._subplots[y]||[],b={},_=0;_<w.length;_++)for(var T=w[_],L=f[T]._subplot.viewInitial,A=Object.keys(L),I=0;I<A.length;I++){var P=A[I];b[T+"."+P]=L[P]}m.call("_guiRelayout",i,b)}l.toImage={name:"toImage",title:function(i){var y=(i._context.toImageButtonOptions||{}).format||"png";return r(i,y==="png"?"Download plot as a png":"Download plot")},icon:x.camera,click:function(i){var y=i._context.toImageButtonOptions,f={format:y.format||"png"};t.notifier(r(i,"Taking snapshot - this may take a few seconds"),"long"),f.format!=="svg"&&t.isIE()&&(t.notifier(r(i,"IE only supports svg.  Changing format to svg."),"long"),f.format="svg"),["filename","width","height","scale"].forEach(function(w){w in y&&(f[w]=y[w])}),m.call("downloadImage",i,f).then(function(w){t.notifier(r(i,"Snapshot succeeded")+" - "+w,"long")}).catch(function(){t.notifier(r(i,"Sorry, there was a problem downloading your snapshot!"),"long")})}},l.sendDataToCloud={name:"sendDataToCloud",title:function(i){return r(i,"Edit in Chart Studio")},icon:x.disk,click:function(i){v.sendDataToCloud(i)}},l.editInChartStudio={name:"editInChartStudio",title:function(i){return r(i,"Edit in Chart Studio")},icon:x.pencil,click:function(i){v.sendDataToCloud(i)}},l.zoom2d={name:"zoom2d",_cat:"zoom",title:function(i){return r(i,"Zoom")},attr:"dragmode",val:"zoom",icon:x.zoombox,click:n},l.pan2d={name:"pan2d",_cat:"pan",title:function(i){return r(i,"Pan")},attr:"dragmode",val:"pan",icon:x.pan,click:n},l.select2d={name:"select2d",_cat:"select",title:function(i){return r(i,"Box Select")},attr:"dragmode",val:"select",icon:x.selectbox,click:n},l.lasso2d={name:"lasso2d",_cat:"lasso",title:function(i){return r(i,"Lasso Select")},attr:"dragmode",val:"lasso",icon:x.lasso,click:n},l.drawclosedpath={name:"drawclosedpath",title:function(i){return r(i,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:x.drawclosedpath,click:n},l.drawopenpath={name:"drawopenpath",title:function(i){return r(i,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:x.drawopenpath,click:n},l.drawline={name:"drawline",title:function(i){return r(i,"Draw line")},attr:"dragmode",val:"drawline",icon:x.drawline,click:n},l.drawrect={name:"drawrect",title:function(i){return r(i,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:x.drawrect,click:n},l.drawcircle={name:"drawcircle",title:function(i){return r(i,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:x.drawcircle,click:n},l.eraseshape={name:"eraseshape",title:function(i){return r(i,"Erase active shape")},icon:x.eraseshape,click:e},l.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(i){return r(i,"Zoom in")},attr:"zoom",val:"in",icon:x.zoom_plus,click:n},l.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(i){return r(i,"Zoom out")},attr:"zoom",val:"out",icon:x.zoom_minus,click:n},l.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(i){return r(i,"Autoscale")},attr:"zoom",val:"auto",icon:x.autoscale,click:n},l.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(i){return r(i,"Reset axes")},attr:"zoom",val:"reset",icon:x.home,click:n},l.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(i){return r(i,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:x.tooltip_basic,gravity:"ne",click:n},l.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(i){return r(i,"Compare data on hover")},attr:"hovermode",val:function(i){return i._fullLayout._isHoriz?"y":"x"},icon:x.tooltip_compare,gravity:"ne",click:n},l.zoom3d={name:"zoom3d",_cat:"zoom",title:function(i){return r(i,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:x.zoombox,click:d},l.pan3d={name:"pan3d",_cat:"pan",title:function(i){return r(i,"Pan")},attr:"scene.dragmode",val:"pan",icon:x.pan,click:d},l.orbitRotation={name:"orbitRotation",title:function(i){return r(i,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:x["3d_rotate"],click:d},l.tableRotation={name:"tableRotation",title:function(i){return r(i,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:x["z-axis"],click:d},l.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(i){return r(i,"Reset camera to default")},attr:"resetDefault",icon:x.home,click:u},l.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(i){return r(i,"Reset camera to last save")},attr:"resetLastSave",icon:x.movie,click:u},l.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(i){return r(i,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:x.tooltip_basic,gravity:"ne",click:function(i,y){var f=o(i,y);m.call("_guiRelayout",i,f)}},l.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(i){return r(i,"Zoom in")},attr:"zoom",val:"in",icon:x.zoom_plus,click:h},l.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(i){return r(i,"Zoom out")},attr:"zoom",val:"out",icon:x.zoom_minus,click:h},l.resetGeo={name:"resetGeo",_cat:"reset",title:function(i){return r(i,"Reset")},attr:"reset",val:null,icon:x.autoscale,click:h},l.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(i){return r(i,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:x.tooltip_basic,gravity:"ne",click:a},l.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(i){return r(i,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:x.tooltip_basic,gravity:"ne",click:a},l.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(i){return r(i,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:x.tooltip_basic,gravity:"ne",click:a},l.resetViewSankey={name:"resetSankeyGroup",title:function(i){return r(i,"Reset view")},icon:x.home,click:function(i){for(var y={"node.groups":[],"node.x":[],"node.y":[]},f=0;f<i._fullData.length;f++){var w=i._fullData[f]._viewInitial;y["node.groups"].push(w.node.groups.slice()),y["node.x"].push(w.node.x.slice()),y["node.y"].push(w.node.y.slice())}m.call("restyle",i,y)}},l.toggleHover={name:"toggleHover",title:function(i){return r(i,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:x.tooltip_basic,gravity:"ne",click:function(i,y){var f=o(i,y);f.hovermode=s(i),m.call("_guiRelayout",i,f)}},l.resetViews={name:"resetViews",title:function(i){return r(i,"Reset views")},icon:x.home,click:function(i,y){var f=y.currentTarget;f.setAttribute("data-attr","zoom"),f.setAttribute("data-val","reset"),n(i,y),f.setAttribute("data-attr","resetLastSave"),u(i,y),c(i,"geo"),c(i,"mapbox")}},l.toggleSpikelines={name:"toggleSpikelines",title:function(i){return r(i,"Toggle Spike Lines")},icon:x.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(i){var y=i._fullLayout,f=y._cartesianSpikesEnabled;y._cartesianSpikesEnabled=f==="on"?"off":"on",m.call("_guiRelayout",i,function(w){for(var b=w._fullLayout._cartesianSpikesEnabled==="on",_=k.list(w,null,!0),T={},L=0;L<_.length;L++){var A=_[L];T[A._name+".showspikes"]=!!b||A._showSpikeInitial}return T}(i))}},l.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(i){return r(i,"Reset view")},attr:"reset",icon:x.home,click:function(i){c(i,"mapbox")}},l.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(i){return r(i,"Zoom in")},attr:"zoom",val:"in",icon:x.zoom_plus,click:p},l.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(i){return r(i,"Zoom out")},attr:"zoom",val:"out",icon:x.zoom_minus,click:p}},{"../../fonts/ploticon":494,"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../shapes/draw":462}],428:[function(g,Q,X){var m=g("./buttons"),v=Object.keys(m),k=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],x=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(k),e=[];v.forEach(function(t){(function(r){if(x.indexOf(r._cat||r.name)===-1){var l=r.name,n=(r._cat||r.name).toLowerCase();e.indexOf(l)===-1&&e.push(l),e.indexOf(n)===-1&&e.push(n)}})(m[t])}),e.sort(),Q.exports={DRAW_MODES:k,backButtons:x,foreButtons:e}},{"./buttons":427}],429:[function(g,Q,X){var m=g("../../lib"),v=g("../color"),k=g("../../plot_api/plot_template"),x=g("./attributes");Q.exports=function(e,t){var r=e.modebar||{},l=k.newContainer(t,"modebar");function n(u,o){return m.coerce(r,l,x,u,o)}n("orientation"),n("bgcolor",v.addOpacity(t.paper_bgcolor,.5));var d=v.contrast(v.rgb(t.modebar.bgcolor));n("color",v.addOpacity(d,.3)),n("activecolor",v.addOpacity(d,.7)),n("uirevision",t.uirevision),n("add"),n("remove")}},{"../../lib":515,"../../plot_api/plot_template":555,"../color":367,"./attributes":426}],430:[function(g,Q,X){Q.exports={moduleType:"component",name:"modebar",layoutAttributes:g("./attributes"),supplyLayoutDefaults:g("./defaults"),manage:g("./manage")}},{"./attributes":426,"./defaults":429,"./manage":431}],431:[function(g,Q,X){var m=g("../../plots/cartesian/axis_ids"),v=g("../../traces/scatter/subtypes"),k=g("../../registry"),x=g("../fx/helpers").isUnifiedHover,e=g("./modebar"),t=g("./buttons"),r=g("./constants").DRAW_MODES,l=g("../../lib").extendDeep;Q.exports=function(n){var d=n._fullLayout,u=n._context,o=d._modeBar;if(u.displayModeBar||u.watermark){if(!Array.isArray(u.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(u.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var h,s=u.modeBarButtons;h=Array.isArray(s)&&s.length?function(a){for(var p=l([],a),c=0;c<p.length;c++)for(var i=p[c],y=0;y<i.length;y++){var f=i[y];if(typeof f=="string"){if(t[f]===void 0)throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));p[c][y]=t[f]}}return p}(s):!u.displayModeBar&&u.watermark?[]:function(a){var p=a._fullLayout,c=a._fullData,i=a._context;function y(le,se){if(typeof se=="string"){if(se.toLowerCase()===le.toLowerCase())return!0}else{var ve=se.name,fe=se._cat||se.name;if(ve===le||fe===le.toLowerCase())return!0}return!1}var f=p.modebar.add;typeof f=="string"&&(f=[f]);var w=p.modebar.remove;typeof w=="string"&&(w=[w]);var b=i.modeBarButtonsToAdd.concat(f.filter(function(le){for(var se=0;se<i.modeBarButtonsToRemove.length;se++)if(y(le,i.modeBarButtonsToRemove[se]))return!1;return!0})),_=i.modeBarButtonsToRemove.concat(w.filter(function(le){for(var se=0;se<i.modeBarButtonsToAdd.length;se++)if(y(le,i.modeBarButtonsToAdd[se]))return!1;return!0})),T=p._has("cartesian"),L=p._has("gl3d"),A=p._has("geo"),I=p._has("pie"),P=p._has("funnelarea"),S=p._has("gl2d"),E=p._has("ternary"),z=p._has("mapbox"),D=p._has("polar"),U=p._has("smith"),H=p._has("sankey"),Y=function(le){for(var se=m.list({_fullLayout:le},null,!0),ve=0;ve<se.length;ve++)if(!se[ve].fixedrange)return!1;return!0}(p),J=x(p.hovermode),W=[];function Z(le){if(le.length){for(var se=[],ve=0;ve<le.length;ve++){for(var fe=le[ve],ye=t[fe],Ae=ye.name.toLowerCase(),pe=(ye._cat||ye.name).toLowerCase(),ge=!1,we=0;we<_.length;we++){var oe=_[we].toLowerCase();if(oe===Ae||oe===pe){ge=!0;break}}ge||se.push(t[fe])}W.push(se)}}var re=["toImage"];i.showEditInChartStudio?re.push("editInChartStudio"):i.showSendToCloud&&re.push("sendDataToCloud"),Z(re);var V=[],B=[],j=[],ee=[];(T||S||I||P||E)+A+L+z+D+U>1?(B=["toggleHover"],j=["resetViews"]):A?(V=["zoomInGeo","zoomOutGeo"],B=["hoverClosestGeo"],j=["resetGeo"]):L?(B=["hoverClosest3d"],j=["resetCameraDefault3d","resetCameraLastSave3d"]):z?(V=["zoomInMapbox","zoomOutMapbox"],B=["toggleHover"],j=["resetViewMapbox"]):S?B=["hoverClosestGl2d"]:I?B=["hoverClosestPie"]:H?(B=["hoverClosestCartesian","hoverCompareCartesian"],j=["resetViewSankey"]):B=["toggleHover"],T&&(B=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(le){for(var se=0;se<le.length;se++)if(!k.traceIs(le[se],"noHover"))return!1;return!0}(c)||J)&&(B=[]),!T&&!S||Y||(V=["zoomIn2d","zoomOut2d","autoScale2d"],j[0]!=="resetViews"&&(j=["resetScale2d"])),L?ee=["zoom3d","pan3d","orbitRotation","tableRotation"]:(T||S)&&!Y||E?ee=["zoom2d","pan2d"]:z||A?ee=["pan2d"]:D&&(ee=["zoom2d"]),function(le){for(var se=!1,ve=0;ve<le.length&&!se;ve++){var fe=le[ve];fe._module&&fe._module.selectPoints&&(k.traceIs(fe,"scatter-like")?(v.hasMarkers(fe)||v.hasText(fe))&&(se=!0):k.traceIs(fe,"box-violin")&&fe.boxpoints!=="all"&&fe.points!=="all"||(se=!0))}return se}(c)&&ee.push("select2d","lasso2d");var N=[],$=function(le){N.indexOf(le)===-1&&B.indexOf(le)!==-1&&N.push(le)};if(Array.isArray(b)){for(var K=[],te=0;te<b.length;te++){var ie=b[te];typeof ie=="string"?(ie=ie.toLowerCase(),r.indexOf(ie)!==-1?(p._has("mapbox")||p._has("cartesian"))&&ee.push(ie):ie==="togglespikelines"?$("toggleSpikelines"):ie==="togglehover"?$("toggleHover"):ie==="hovercompare"?$("hoverCompareCartesian"):ie==="hoverclosest"?($("hoverClosestCartesian"),$("hoverClosestGeo"),$("hoverClosest3d"),$("hoverClosestGl2d"),$("hoverClosestPie")):ie==="v1hovermode"&&($("toggleHover"),$("hoverClosestCartesian"),$("hoverCompareCartesian"),$("hoverClosestGeo"),$("hoverClosest3d"),$("hoverClosestGl2d"),$("hoverClosestPie"))):K.push(ie)}b=K}return Z(ee),Z(V.concat(j)),Z(N),function(le,se){if(se.length)if(Array.isArray(se[0]))for(var ve=0;ve<se.length;ve++)le.push(se[ve]);else le.push(se);return le}(W,b)}(n),o?o.update(n,h):d._modeBar=e(n,h)}else o&&(o.destroy(),delete d._modeBar)}},{"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../../traces/scatter/subtypes":961,"../fx/helpers":403,"./buttons":427,"./constants":428,"./modebar":432}],432:[function(g,Q,X){var m=g("@plotly/d3"),v=g("fast-isnumeric"),k=g("../../lib"),x=g("../../fonts/ploticon"),e=g("../../version").version,t=new DOMParser;function r(n){this.container=n.container,this.element=document.createElement("div"),this.update(n.graphInfo,n.buttons),this.container.appendChild(this.element)}var l=r.prototype;l.update=function(n,d){this.graphInfo=n;var u=this.graphInfo._context,o=this.graphInfo._fullLayout,h="modebar-"+o._uid;this.element.setAttribute("id",h),this._uid=h,this.element.className="modebar",u.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),o.modebar.orientation==="v"&&(this.element.className+=" vertical",d=d.reverse());var s=o.modebar,a=u.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";k.deleteRelatedStyleRule(h),k.addRelatedStyleRule(h,a+"#"+h+" .modebar-group","background-color: "+s.bgcolor),k.addRelatedStyleRule(h,"#"+h+" .modebar-btn .icon path","fill: "+s.color),k.addRelatedStyleRule(h,"#"+h+" .modebar-btn:hover .icon path","fill: "+s.activecolor),k.addRelatedStyleRule(h,"#"+h+" .modebar-btn.active .icon path","fill: "+s.activecolor);var p=!this.hasButtons(d),c=this.hasLogo!==u.displaylogo,i=this.locale!==u.locale;if(this.locale=u.locale,(p||c||i)&&(this.removeAllButtons(),this.updateButtons(d),u.watermark||u.displaylogo)){var y=this.getLogo();u.watermark&&(y.className=y.className+" watermark"),o.modebar.orientation==="v"?this.element.insertBefore(y,this.element.childNodes[0]):this.element.appendChild(y),this.hasLogo=!0}this.updateActiveButton()},l.updateButtons=function(n){var d=this;this.buttons=n,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(u){var o=d.createGroup();u.forEach(function(h){var s=h.name;if(!s)throw new Error("must provide button 'name' in button config");if(d.buttonsNames.indexOf(s)!==-1)throw new Error("button name '"+s+"' is taken");d.buttonsNames.push(s);var a=d.createButton(h);d.buttonElements.push(a),o.appendChild(a)}),d.element.appendChild(o)})},l.createGroup=function(){var n=document.createElement("div");return n.className="modebar-group",n},l.createButton=function(n){var d=this,u=document.createElement("a");u.setAttribute("rel","tooltip"),u.className="modebar-btn";var o=n.title;o===void 0?o=n.name:typeof o=="function"&&(o=o(this.graphInfo)),(o||o===0)&&u.setAttribute("data-title",o),n.attr!==void 0&&u.setAttribute("data-attr",n.attr);var h=n.val;if(h!==void 0&&(typeof h=="function"&&(h=h(this.graphInfo)),u.setAttribute("data-val",h)),typeof n.click!="function")throw new Error("must provide button 'click' function in button config");u.addEventListener("click",function(a){n.click(d.graphInfo,a),d.updateActiveButton(a.currentTarget)}),u.setAttribute("data-toggle",n.toggle||!1),n.toggle&&m.select(u).classed("active",!0);var s=n.icon;return typeof s=="function"?u.appendChild(s()):u.appendChild(this.createIcon(s||x.question)),u.setAttribute("data-gravity",n.gravity||"n"),u},l.createIcon=function(n){var d,u=v(n.height)?Number(n.height):n.ascent-n.descent,o="http://www.w3.org/2000/svg";if(n.path){(d=document.createElementNS(o,"svg")).setAttribute("viewBox",[0,0,n.width,u].join(" ")),d.setAttribute("class","icon");var h=document.createElementNS(o,"path");h.setAttribute("d",n.path),n.transform?h.setAttribute("transform",n.transform):n.ascent!==void 0&&h.setAttribute("transform","matrix(1 0 0 -1 0 "+n.ascent+")"),d.appendChild(h)}return n.svg&&(d=t.parseFromString(n.svg,"application/xml").childNodes[0]),d.setAttribute("height","1em"),d.setAttribute("width","1em"),d},l.updateActiveButton=function(n){var d=this.graphInfo._fullLayout,u=n!==void 0?n.getAttribute("data-attr"):null;this.buttonElements.forEach(function(o){var h=o.getAttribute("data-val")||!0,s=o.getAttribute("data-attr"),a=o.getAttribute("data-toggle")==="true",p=m.select(o);if(a)s===u&&p.classed("active",!p.classed("active"));else{var c=s===null?s:k.nestedProperty(d,s).get();p.classed("active",c===h)}})},l.hasButtons=function(n){var d=this.buttons;if(!d||n.length!==d.length)return!1;for(var u=0;u<n.length;++u){if(n[u].length!==d[u].length)return!1;for(var o=0;o<n[u].length;o++)if(n[u][o].name!==d[u][o].name)return!1}return!0},l.getLogo=function(){var n=this.createGroup(),d=document.createElement("a");return d.href="https://plotly.com/",d.target="_blank",d.setAttribute("data-title",k._(this.graphInfo,"Produced with Plotly.js")+" (v"+e+")"),d.className="modebar-btn plotlyjsicon modebar-btn--logo",d.appendChild(this.createIcon(x.newplotlylogo)),n.appendChild(d),n},l.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},l.destroy=function(){k.removeElement(this.container.querySelector(".modebar")),k.deleteRelatedStyleRule(this._uid)},Q.exports=function(n,d){var u=n._fullLayout,o=new r({graphInfo:n,container:u._modebardiv.node(),buttons:d});return u._privateplot&&m.select(o.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),o}},{"../../fonts/ploticon":494,"../../lib":515,"../../version":1132,"@plotly/d3":58,"fast-isnumeric":190}],433:[function(g,Q,X){var m=g("../../plots/font_attributes"),v=g("../color/attributes"),k=(0,g("../../plot_api/plot_template").templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});Q.exports={visible:{valType:"boolean",editType:"plot"},buttons:k,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:m({editType:"plot"}),bgcolor:{valType:"color",dflt:v.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:v.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":555,"../../plots/font_attributes":594,"../color/attributes":366}],434:[function(g,Q,X){Q.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],435:[function(g,Q,X){var m=g("../../lib"),v=g("../color"),k=g("../../plot_api/plot_template"),x=g("../../plots/array_container_defaults"),e=g("./attributes"),t=g("./constants");function r(l,n,d,u){var o=u.calendar;function h(a,p){return m.coerce(l,n,e.buttons,a,p)}if(h("visible")){var s=h("step");s!=="all"&&(!o||o==="gregorian"||s!=="month"&&s!=="year"?h("stepmode"):n.stepmode="backward",h("count")),h("label")}}Q.exports=function(l,n,d,u,o){var h=l.rangeselector||{},s=k.newContainer(n,"rangeselector");function a(i,y){return m.coerce(h,s,e,i,y)}if(a("visible",x(h,s,{name:"buttons",handleItemDefaults:r,calendar:o}).length>0)){var p=function(i,y,f){for(var w=f.filter(function(L){return y[L].anchor===i._id}),b=0,_=0;_<w.length;_++){var T=y[w[_]].domain;T&&(b=Math.max(T[1],b))}return[i.domain[0],b+t.yPad]}(n,d,u);a("x",p[0]),a("y",p[1]),m.noneOrAll(l,n,["x","y"]),a("xanchor"),a("yanchor"),m.coerceFont(a,"font",d.font);var c=a("bgcolor");a("activecolor",v.contrast(c,t.lightAmount,t.darkAmount)),a("bordercolor"),a("borderwidth")}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../color":367,"./attributes":433,"./constants":434}],436:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../registry"),k=g("../../plots/plots"),x=g("../color"),e=g("../drawing"),t=g("../../lib"),r=t.strTranslate,l=g("../../lib/svg_text_utils"),n=g("../../plots/cartesian/axis_ids"),d=g("../../constants/alignment"),u=d.LINE_SPACING,o=d.FROM_TL,h=d.FROM_BR,s=g("./constants"),a=g("./get_update_object");function p(y){return y._id}function c(y,f,w){var b=t.ensureSingle(y,"rect","selector-rect",function(_){_.attr("shape-rendering","crispEdges")});b.attr({rx:s.rx,ry:s.ry}),b.call(x.stroke,f.bordercolor).call(x.fill,function(_,T){return T._isActive||T._isHovered?_.activecolor:_.bgcolor}(f,w)).style("stroke-width",f.borderwidth+"px")}function i(y,f,w,b){t.ensureSingle(y,"text","selector-text",function(_){_.attr("text-anchor","middle")}).call(e.font,f.font).text(function(_,T){return _.label?T?t.templateString(_.label,T):_.label:_.step==="all"?"all":_.count+_.step.charAt(0)}(w,b._fullLayout._meta)).call(function(_){l.convertToTspans(_,b)})}Q.exports=function(y){var f=y._fullLayout._infolayer.selectAll(".rangeselector").data(function(w){for(var b=n.list(w,"x",!0),_=[],T=0;T<b.length;T++){var L=b[T];L.rangeselector&&L.rangeselector.visible&&_.push(L)}return _}(y),p);f.enter().append("g").classed("rangeselector",!0),f.exit().remove(),f.style({cursor:"pointer","pointer-events":"all"}),f.each(function(w){var b=m.select(this),_=w,T=_.rangeselector,L=b.selectAll("g.button").data(t.filterVisible(T.buttons));L.enter().append("g").classed("button",!0),L.exit().remove(),L.each(function(A){var I=m.select(this),P=a(_,A);A._isActive=function(S,E,z){if(E.step==="all")return S.autorange===!0;var D=Object.keys(z);return S.range[0]===z[D[0]]&&S.range[1]===z[D[1]]}(_,A,P),I.call(c,T,A),I.call(i,T,A,y),I.on("click",function(){y._dragged||v.call("_guiRelayout",y,P)}),I.on("mouseover",function(){A._isHovered=!0,I.call(c,T,A)}),I.on("mouseout",function(){A._isHovered=!1,I.call(c,T,A)})}),function(A,I,P,S,E){var z=0,D=0,U=P.borderwidth;I.each(function(){var re=m.select(this).select(".selector-text"),V=P.font.size*u,B=Math.max(V*l.lineCount(re),16)+3;D=Math.max(D,B)}),I.each(function(){var re=m.select(this),V=re.select(".selector-rect"),B=re.select(".selector-text"),j=B.node()&&e.bBox(B.node()).width,ee=P.font.size*u,N=l.lineCount(B),$=Math.max(j+10,s.minButtonWidth);re.attr("transform",r(U+z,U)),V.attr({x:0,y:0,width:$,height:D}),l.positionText(B,$/2,D/2-(N-1)*ee/2+3),z+=$+5});var H=A._fullLayout._size,Y=H.l+H.w*P.x,J=H.t+H.h*(1-P.y),W="left";t.isRightAnchor(P)&&(Y-=z,W="right"),t.isCenterAnchor(P)&&(Y-=z/2,W="center");var Z="top";t.isBottomAnchor(P)&&(J-=D,Z="bottom"),t.isMiddleAnchor(P)&&(J-=D/2,Z="middle"),z=Math.ceil(z),D=Math.ceil(D),Y=Math.round(Y),J=Math.round(J),k.autoMargin(A,S+"-range-selector",{x:P.x,y:P.y,l:z*o[W],r:z*h[W],b:D*h[Z],t:D*o[Z]}),E.attr("transform",r(Y,J))}(y,L,T,_._name,b)})}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../color":367,"../drawing":389,"./constants":434,"./get_update_object":437,"@plotly/d3":58}],437:[function(g,Q,X){var m=g("d3-time"),v=g("../../lib").titleCase;Q.exports=function(k,x){var e=k._name,t={};if(x.step==="all")t[e+".autorange"]=!0;else{var r=function(l,n){var d,u=l.range,o=new Date(l.r2l(u[1])),h=n.step,s=m["utc"+v(h)],a=n.count;switch(n.stepmode){case"backward":d=l.l2r(+s.offset(o,-a));break;case"todate":var p=s.offset(o,-a);d=l.l2r(+s.ceil(p))}var c=u[1];return[d,c]}(k,x);t[e+".range[0]"]=r[0],t[e+".range[1]"]=r[1]}return t}},{"../../lib":515,"d3-time":122}],438:[function(g,Q,X){Q.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:g("./attributes")}}},layoutAttributes:g("./attributes"),handleDefaults:g("./defaults"),draw:g("./draw")}},{"./attributes":433,"./defaults":435,"./draw":436}],439:[function(g,Q,X){var m=g("../color/attributes");Q.exports={bgcolor:{valType:"color",dflt:m.background,editType:"plot"},bordercolor:{valType:"color",dflt:m.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":366}],440:[function(g,Q,X){var m=g("../../plots/cartesian/axis_ids").list,v=g("../../plots/cartesian/autorange").getAutoRange,k=g("./constants");Q.exports=function(x){for(var e=m(x,"x",!0),t=0;t<e.length;t++){var r=e[t],l=r[k.name];l&&l.visible&&l.autorange&&(l._input.autorange=!0,l._input.range=l.range=v(x,r))}}},{"../../plots/cartesian/autorange":565,"../../plots/cartesian/axis_ids":570,"./constants":441}],441:[function(g,Q,X){Q.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],442:[function(g,Q,X){var m=g("../../lib"),v=g("../../plot_api/plot_template"),k=g("../../plots/cartesian/axis_ids"),x=g("./attributes"),e=g("./oppaxis_attributes");Q.exports=function(t,r,l){var n=t[l],d=r[l];if(n.rangeslider||r._requestRangeslider[d._id]){m.isPlainObject(n.rangeslider)||(n.rangeslider={});var u,o,h=n.rangeslider,s=v.newContainer(d,"rangeslider");if(b("visible")){b("bgcolor",r.plot_bgcolor),b("bordercolor"),b("borderwidth"),b("thickness"),b("autorange",!d.isValidRange(h.range)),b("range");var a=r._subplots;if(a)for(var p=a.cartesian.filter(function(T){return T.substr(0,T.indexOf("y"))===k.name2id(l)}).map(function(T){return T.substr(T.indexOf("y"),T.length)}),c=m.simpleMap(p,k.id2name),i=0;i<c.length;i++){var y=c[i];u=h[y]||{},o=v.newContainer(s,y,"yaxis");var f,w=r[y];u.range&&w.isValidRange(u.range)&&(f="fixed"),_("rangemode",f)!=="match"&&_("range",w.range.slice())}s._input=h}}function b(T,L){return m.coerce(h,s,x,T,L)}function _(T,L){return m.coerce(u,o,e,T,L)}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_ids":570,"./attributes":439,"./oppaxis_attributes":446}],443:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../registry"),k=g("../../plots/plots"),x=g("../../lib"),e=x.strTranslate,t=g("../drawing"),r=g("../color"),l=g("../titles"),n=g("../../plots/cartesian"),d=g("../../plots/cartesian/axis_ids"),u=g("../dragelement"),o=g("../../lib/setcursor"),h=g("./constants");function s(f,w,b,_){var T=x.ensureSingle(f,"rect",h.bgClassName,function(P){P.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),L=_.borderwidth%2==0?_.borderwidth:_.borderwidth-1,A=-_._offsetShift,I=t.crispRound(w,_.borderwidth);T.attr({width:_._width+L,height:_._height+L,transform:e(A,A),"stroke-width":I}).call(r.stroke,_.bordercolor).call(r.fill,_.bgcolor)}function a(f,w,b,_){var T=w._fullLayout;x.ensureSingleById(T._topdefs,"clipPath",_._clipId,function(L){L.append("rect").attr({x:0,y:0})}).select("rect").attr({width:_._width,height:_._height})}function p(f,w,b,_){var T,L=w.calcdata,A=f.selectAll("g."+h.rangePlotClassName).data(b._subplotsWith,x.identity);A.enter().append("g").attr("class",function(I){return h.rangePlotClassName+" "+I}).call(t.setClipUrl,_._clipId,w),A.order(),A.exit().remove(),A.each(function(I,P){var S=m.select(this),E=P===0,z=d.getFromId(w,I,"y"),D=z._name,U=_[D],H={data:[],layout:{xaxis:{type:b.type,domain:[0,1],range:_.range.slice(),calendar:b.calendar},width:_._width,height:_._height,margin:{t:0,b:0,l:0,r:0}},_context:w._context};b.rangebreaks&&(H.layout.xaxis.rangebreaks=b.rangebreaks),H.layout[D]={type:z.type,domain:[0,1],range:U.rangemode!=="match"?U.range.slice():z.range.slice(),calendar:z.calendar},z.rangebreaks&&(H.layout[D].rangebreaks=z.rangebreaks),k.supplyDefaults(H);var Y=H._fullLayout.xaxis,J=H._fullLayout[D];Y.clearCalc(),Y.setScale(),J.clearCalc(),J.setScale();var W={id:I,plotgroup:S,xaxis:Y,yaxis:J,isRangePlot:!0};E?T=W:(W.mainplot="xy",W.mainplotinfo=T),n.rangePlot(w,W,function(Z,re){for(var V=[],B=0;B<Z.length;B++){var j=Z[B],ee=j[0].trace;ee.xaxis+ee.yaxis===re&&V.push(j)}return V}(L,I))})}function c(f,w,b,_,T){x.ensureSingle(f,"rect",h.maskMinClassName,function(L){L.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",_._height).call(r.fill,h.maskColor),x.ensureSingle(f,"rect",h.maskMaxClassName,function(L){L.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",_._height).call(r.fill,h.maskColor),T.rangemode!=="match"&&(x.ensureSingle(f,"rect",h.maskMinOppAxisClassName,function(L){L.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",_._width).call(r.fill,h.maskOppAxisColor),x.ensureSingle(f,"rect",h.maskMaxOppAxisClassName,function(L){L.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",_._width).style("border-top",h.maskOppBorder).call(r.fill,h.maskOppAxisColor))}function i(f,w,b,_){w._context.staticPlot||x.ensureSingle(f,"rect",h.slideBoxClassName,function(T){T.attr({y:0,cursor:h.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:_._height,fill:h.slideBoxFill})}function y(f,w,b,_){var T=x.ensureSingle(f,"g",h.grabberMinClassName),L=x.ensureSingle(f,"g",h.grabberMaxClassName),A={x:0,width:h.handleWidth,rx:h.handleRadius,fill:r.background,stroke:r.defaultLine,"stroke-width":h.handleStrokeWidth,"shape-rendering":"crispEdges"},I={y:Math.round(_._height/4),height:Math.round(_._height/2)};x.ensureSingle(T,"rect",h.handleMinClassName,function(S){S.attr(A)}).attr(I),x.ensureSingle(L,"rect",h.handleMaxClassName,function(S){S.attr(A)}).attr(I);var P={width:h.grabAreaWidth,x:0,y:0,fill:h.grabAreaFill,cursor:w._context.staticPlot?void 0:h.grabAreaCursor};x.ensureSingle(T,"rect",h.grabAreaMinClassName,function(S){S.attr(P)}).attr("height",_._height),x.ensureSingle(L,"rect",h.grabAreaMaxClassName,function(S){S.attr(P)}).attr("height",_._height)}Q.exports=function(f){for(var w=f._fullLayout,b=w._rangeSliderData,_=0;_<b.length;_++){var T=b[_][h.name];T._clipId=T._id+"-"+w._uid}var L=w._infolayer.selectAll("g."+h.containerClassName).data(b,function(A){return A._name});L.exit().each(function(A){var I=A[h.name];w._topdefs.select("#"+I._clipId).remove()}).remove(),b.length!==0&&(L.enter().append("g").classed(h.containerClassName,!0).attr("pointer-events","all"),L.each(function(A){var I=m.select(this),P=A[h.name],S=w[d.id2name(A.anchor)],E=P[d.id2name(A.anchor)];if(P.range){var z,D=x.simpleMap(P.range,A.r2l),U=x.simpleMap(A.range,A.r2l);z=U[0]<U[1]?[Math.min(D[0],U[0]),Math.max(D[1],U[1])]:[Math.max(D[0],U[0]),Math.min(D[1],U[1])],P.range=P._input.range=x.simpleMap(z,A.l2r)}A.cleanRange("rangeslider.range");var H=w._size,Y=A.domain;P._width=H.w*(Y[1]-Y[0]);var J=Math.round(H.l+H.w*Y[0]),W=Math.round(H.t+H.h*(1-A._counterDomainMin)+(A.side==="bottom"?A._depth:0)+P._offsetShift+h.extraPad);I.attr("transform",e(J,W)),P._rl=x.simpleMap(P.range,A.r2l);var Z=P._rl[0],re=P._rl[1],V=re-Z;if(P.p2d=function(le){return le/P._width*V+Z},P.d2p=function(le){return(le-Z)/V*P._width},A.rangebreaks){var B=A.locateBreaks(Z,re);if(B.length){var j,ee,N=0;for(j=0;j<B.length;j++)N+=(ee=B[j]).max-ee.min;var $=P._width/(re-Z-N),K=[-$*Z];for(j=0;j<B.length;j++)ee=B[j],K.push(K[K.length-1]-$*(ee.max-ee.min));for(P.d2p=function(le){for(var se=K[0],ve=0;ve<B.length;ve++){var fe=B[ve];if(le>=fe.max)se=K[ve+1];else if(le<fe.min)break}return se+$*le},j=0;j<B.length;j++)(ee=B[j]).pmin=P.d2p(ee.min),ee.pmax=P.d2p(ee.max);P.p2d=function(le){for(var se=K[0],ve=0;ve<B.length;ve++){var fe=B[ve];if(le>=fe.pmax)se=K[ve+1];else if(le<fe.pmin)break}return(le-se)/$}}}if(E.rangemode!=="match"){var te=S.r2l(E.range[0]),ie=S.r2l(E.range[1])-te;P.d2pOppAxis=function(le){return(le-te)/ie*P._height}}I.call(s,f,A,P).call(a,f,A,P).call(p,f,A,P).call(c,f,A,P,E).call(i,f,A,P).call(y,f,A,P),function(le,se,ve,fe){if(se._context.staticPlot)return;var ye=le.select("rect."+h.slideBoxClassName).node(),Ae=le.select("rect."+h.grabAreaMinClassName).node(),pe=le.select("rect."+h.grabAreaMaxClassName).node();function ge(){var we=m.event,oe=we.target,de=we.clientX||we.touches[0].clientX,Te=de-le.node().getBoundingClientRect().left,Ee=fe.d2p(ve._rl[0]),Me=fe.d2p(ve._rl[1]),De=u.coverSlip();function Ie(Ze){var Fe,Pe,ze,Ge=+(Ze.clientX||Ze.touches[0].clientX)-de;switch(oe){case ye:ze="ew-resize",Fe=Ee+Ge,Pe=Me+Ge;break;case Ae:ze="col-resize",Fe=Ee+Ge,Pe=Me;break;case pe:ze="col-resize",Fe=Ee,Pe=Me+Ge;break;default:ze="ew-resize",Fe=Te,Pe=Te+Ge}if(Pe<Fe){var $e=Pe;Pe=Fe,Fe=$e}fe._pixelMin=Fe,fe._pixelMax=Pe,o(m.select(De),ze),function(ot,vt,bt,yt){function tt(Ft){return bt.l2r(x.constrain(Ft,yt._rl[0],yt._rl[1]))}var Ke=tt(yt.p2d(yt._pixelMin)),mt=tt(yt.p2d(yt._pixelMax));window.requestAnimationFrame(function(){v.call("_guiRelayout",vt,bt._name+".range",[Ke,mt])})}(0,se,ve,fe)}function Oe(){De.removeEventListener("mousemove",Ie),De.removeEventListener("mouseup",Oe),this.removeEventListener("touchmove",Ie),this.removeEventListener("touchend",Oe),x.removeElement(De)}this.addEventListener("touchmove",Ie),this.addEventListener("touchend",Oe),De.addEventListener("mousemove",Ie),De.addEventListener("mouseup",Oe)}le.on("mousedown",ge),le.on("touchstart",ge)}(I,f,A,P),function(le,se,ve,fe,ye,Ae){var pe=h.handleWidth/2;function ge(Oe){return x.constrain(Oe,0,fe._width)}function we(Oe){return x.constrain(Oe,0,fe._height)}function oe(Oe){return x.constrain(Oe,-pe,fe._width+pe)}var de=ge(fe.d2p(ve._rl[0])),Te=ge(fe.d2p(ve._rl[1]));if(le.select("rect."+h.slideBoxClassName).attr("x",de).attr("width",Te-de),le.select("rect."+h.maskMinClassName).attr("width",de),le.select("rect."+h.maskMaxClassName).attr("x",Te).attr("width",fe._width-Te),Ae.rangemode!=="match"){var Ee=fe._height-we(fe.d2pOppAxis(ye._rl[1])),Me=fe._height-we(fe.d2pOppAxis(ye._rl[0]));le.select("rect."+h.maskMinOppAxisClassName).attr("x",de).attr("height",Ee).attr("width",Te-de),le.select("rect."+h.maskMaxOppAxisClassName).attr("x",de).attr("y",Me).attr("height",fe._height-Me).attr("width",Te-de),le.select("rect."+h.slideBoxClassName).attr("y",Ee).attr("height",Me-Ee)}var De=Math.round(oe(de-pe))-.5,Ie=Math.round(oe(Te-pe))+.5;le.select("g."+h.grabberMinClassName).attr("transform",e(De,.5)),le.select("g."+h.grabberMaxClassName).attr("transform",e(Ie,.5))}(I,0,A,P,S,E),A.side==="bottom"&&l.draw(f,A._id+"title",{propContainer:A,propName:A._name+".title",placeholder:w._dfltTitle.x,attributes:{x:A._offset+A._length/2,y:W+P._height+P._offsetShift+10+1.5*A.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":515,"../../lib/setcursor":536,"../../plots/cartesian":578,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../titles":476,"./constants":441,"@plotly/d3":58}],444:[function(g,Q,X){var m=g("../../plots/cartesian/axis_ids"),v=g("../../lib/svg_text_utils"),k=g("./constants"),x=g("../../constants/alignment").LINE_SPACING,e=k.name;function t(r){var l=r&&r[e];return l&&l.visible}X.isVisible=t,X.makeData=function(r){var l=m.list({_fullLayout:r},"x",!0),n=r.margin,d=[];if(!r._has("gl2d"))for(var u=0;u<l.length;u++){var o=l[u];if(t(o)){d.push(o);var h=o[e];h._id=e+o._id,h._height=(r.height-n.b-n.t)*h.thickness,h._offsetShift=Math.floor(h.borderwidth/2)}}r._rangeSliderData=d},X.autoMarginOpts=function(r,l){var n=r._fullLayout,d=l[e],u=l._id.charAt(0),o=0,h=0;return l.side==="bottom"&&(o=l._depth,l.title.text!==n._dfltTitle[u]&&(h=1.5*l.title.font.size+10+d._offsetShift,h+=(l.title.text.match(v.BR_TAG_ALL)||[]).length*l.title.font.size*x)),{x:0,y:l._counterDomainMin,l:0,r:0,t:0,b:d._height+o+Math.max(n.margin.b,h),pad:k.extraPad+2*d._offsetShift}}},{"../../constants/alignment":483,"../../lib/svg_text_utils":541,"../../plots/cartesian/axis_ids":570,"./constants":441}],445:[function(g,Q,X){var m=g("../../lib"),v=g("./attributes"),k=g("./oppaxis_attributes"),x=g("./helpers");Q.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:m.extendFlat({},v,{yaxis:k})}}},layoutAttributes:g("./attributes"),handleDefaults:g("./defaults"),calcAutorange:g("./calc_autorange"),draw:g("./draw"),isVisible:x.isVisible,makeData:x.makeData,autoMarginOpts:x.autoMarginOpts}},{"../../lib":515,"./attributes":439,"./calc_autorange":440,"./defaults":442,"./draw":443,"./helpers":444,"./oppaxis_attributes":446}],446:[function(g,Q,X){Q.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],447:[function(g,Q,X){var m=g("../annotations/attributes"),v=g("../../traces/scatter/attributes").line,k=g("../drawing/attributes").dash,x=g("../../lib/extend").extendFlat,e=g("../../plot_api/edit_types").overrideAll,t=g("../../plot_api/plot_template").templatedArray;g("../../constants/axis_placeable_objects"),Q.exports=e(t("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:x({},m.xref,{}),yref:x({},m.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:v.color,width:x({},v.width,{min:1,dflt:1}),dash:x({},k,{dflt:"dot"})}}),"arraydraw","from-root")},{"../../constants/axis_placeable_objects":484,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../annotations/attributes":350,"../drawing/attributes":388}],448:[function(g,Q,X){Q.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},{}],449:[function(g,Q,X){var m=g("../../lib"),v=g("../../plots/cartesian/axes"),k=g("../../plots/array_container_defaults"),x=g("./attributes"),e=g("../shapes/helpers");function t(r,l,n){function d(I,P){return m.coerce(r,l,x,I,P)}var u=d("path"),o=d("type",u?"path":"rect")!=="path";o&&delete l.path,d("opacity"),d("line.color"),d("line.width"),d("line.dash");for(var h=["x","y"],s=0;s<2;s++){var a,p,c,i=h[s],y={_fullLayout:n},f=v.coerceRef(r,l,y,i);if((a=v.getFromId(y,f))._selectionIndices.push(l._index),c=e.rangeToShapePosition(a),p=e.shapePositionToRange(a),o){var w=i+"0",b=i+"1",_=r[w],T=r[b];r[w]=p(r[w],!0),r[b]=p(r[b],!0),v.coercePosition(l,y,d,f,w),v.coercePosition(l,y,d,f,b);var L=l[w],A=l[b];L!==void 0&&A!==void 0&&(l[w]=c(L),l[b]=c(A),r[w]=_,r[b]=T)}}o&&m.noneOrAll(r,l,["x0","x1","y0","y1"])}Q.exports=function(r,l){k(r,l,{name:"selections",handleItemDefaults:t});for(var n=l.selections,d=0;d<n.length;d++){var u=n[d];u&&u.path===void 0&&(u.x0!==void 0&&u.x1!==void 0&&u.y0!==void 0&&u.y1!==void 0||(l.selections[d]=null))}}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../shapes/helpers":469,"./attributes":447}],450:[function(g,Q,X){var m=g("../shapes/draw_newshape/helpers").readPaths,v=g("../shapes/display_outlines"),k=g("../shapes/handle_outline").clearOutlineControllers,x=g("../color"),e=g("../drawing"),t=g("../../plot_api/plot_template").arrayEditor,r=g("../shapes/helpers"),l=r.getPathString;function n(s){var a=s._fullLayout;for(var p in k(s),a._selectionLayer.selectAll("path").remove(),a._plots){var c=a._plots[p].selectionLayer;c&&c.selectAll("path").remove()}for(var i=0;i<a.selections.length;i++)u(s,i)}function d(s){return s._context.editSelection}function u(s,a){s._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+a+'"]').remove();var p=r.makeSelectionsOptionsAndPlotinfo(s,a),c=p.options,i=p.plotinfo;c._input&&function(y){var f=l(s,c),w={"data-index":a,"fill-rule":"evenodd",d:f},b=c.opacity,_="rgba(0,0,0,0)",T=c.line.color||x.contrast(s._fullLayout.plot_bgcolor),L=c.line.width,A=c.line.dash;L||(L=5,A="solid");var I=d(s)&&s._fullLayout._activeSelectionIndex===a;I&&(_=s._fullLayout.activeselection.fillcolor,b=s._fullLayout.activeselection.opacity);for(var P=[],S=1;S>=0;S--){var E=y.append("path").attr(w).style("opacity",S?.1:b).call(x.stroke,T).call(x.fill,_).call(e.dashLine,S?"solid":A,S?4+L:L);if(o(E,s,c),I){var z=t(s.layout,"selections",c);E.style({cursor:"move"});var D={element:E.node(),plotinfo:i,gd:s,editHelpers:z,isActiveSelection:!0},U=m(f,s);v(U,E,D)}else E.style("pointer-events",S?"all":"none");P[S]=E}var H=P[0];P[1].node().addEventListener("click",function(){return function(Y,J){if(!!d(Y)){var W=+J.node().getAttribute("data-index");if(W>=0){if(W===Y._fullLayout._activeSelectionIndex)return void h(Y);Y._fullLayout._activeSelectionIndex=W,Y._fullLayout._deactivateSelection=h,n(Y)}}}(s,H)})}(s._fullLayout._selectionLayer)}function o(s,a,p){var c=p.xref+p.yref;e.setClipUrl(s,"clip"+a._fullLayout._uid+c,a)}function h(s){d(s)&&s._fullLayout._activeSelectionIndex>=0&&(k(s),delete s._fullLayout._activeSelectionIndex,n(s))}Q.exports={draw:n,drawOne:u,activateLastSelection:function(s){if(!!d(s)){var a=s._fullLayout.selections.length-1;s._fullLayout._activeSelectionIndex=a,s._fullLayout._deactivateSelection=h,n(s)}}}},{"../../plot_api/plot_template":555,"../color":367,"../drawing":389,"../shapes/display_outlines":461,"../shapes/draw_newshape/helpers":466,"../shapes/handle_outline":468,"../shapes/helpers":469}],451:[function(g,Q,X){var m=g("../../drawing/attributes").dash,v=g("../../../lib/extend").extendFlat;Q.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:v({},m,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":505,"../../drawing/attributes":388}],452:[function(g,Q,X){Q.exports=function(m,v,k){k("newselection.mode"),k("newselection.line.width")&&(k("newselection.line.color"),k("newselection.line.dash")),k("activeselection.fillcolor"),k("activeselection.opacity")}},{}],453:[function(g,Q,X){var m=g("../../dragelement/helpers").selectMode,v=g("../../shapes/handle_outline").clearOutline,k=g("../../shapes/draw_newshape/helpers"),x=k.readPaths,e=k.writePaths,t=k.fixDatesForPaths;Q.exports=function(r,l){if(r.length){var n=r[0][0];if(n){var d=n.getAttribute("d"),u=l.gd,o=u._fullLayout.newselection,h=l.plotinfo,s=h.xaxis,a=h.yaxis,p=l.isActiveSelection,c=l.dragmode,i=(u.layout||{}).selections||[];if(!m(c)&&p!==void 0){var y=u._fullLayout._activeSelectionIndex;if(y<i.length)switch(u._fullLayout.selections[y].type){case"rect":c="select";break;case"path":c="lasso"}}var f,w=x(d,u,h,p),b={xref:s._id,yref:a._id,opacity:o.opacity,line:{color:o.line.color,width:o.line.width,dash:o.line.dash}};w.length===1&&(f=w[0]),f&&f.length===5&&c==="select"?(b.type="rect",b.x0=f[0][1],b.y0=f[0][2],b.x1=f[2][1],b.y1=f[2][2]):(b.type="path",s&&a&&t(w,s,a),b.path=e(w),f=null),v(u);for(var _=l.editHelpers,T=(_||{}).modifyItem,L=[],A=0;A<i.length;A++){var I=u._fullLayout.selections[A];if(I){if(L[A]=I._input,p!==void 0&&A===u._fullLayout._activeSelectionIndex){var P=b;switch(I.type){case"rect":T("x0",P.x0),T("x1",P.x1),T("y0",P.y0),T("y1",P.y1);break;case"path":T("path",P.path)}}}else L[A]=I}return p===void 0?(L.push(b),L):_?_.getUpdateObj():{}}}}},{"../../dragelement/helpers":385,"../../shapes/draw_newshape/helpers":466,"../../shapes/handle_outline":468}],454:[function(g,Q,X){var m=g("../../lib").strTranslate;function v(k,x){switch(k.type){case"log":return k.p2d(x);case"date":return k.p2r(x,0,k.calendar);default:return k.p2r(x)}}Q.exports={p2r:v,r2p:function(k,x){switch(k.type){case"log":return k.d2p(x);case"date":return k.r2p(x,0,k.calendar);default:return k.r2p(x)}},axValue:function(k){var x=k._id.charAt(0)==="y"?1:0;return function(e){return v(k,e[x])}},getTransform:function(k){return m(k.xaxis._offset,k.yaxis._offset)}}},{"../../lib":515}],455:[function(g,Q,X){var m=g("./draw"),v=g("./select");Q.exports={moduleType:"component",name:"selections",layoutAttributes:g("./attributes"),supplyLayoutDefaults:g("./defaults"),supplyDrawNewSelectionDefaults:g("./draw_newselection/defaults"),includeBasePlot:g("../../plots/cartesian/include_components")("selections"),draw:m.draw,drawOne:m.drawOne,reselect:v.reselect,prepSelect:v.prepSelect,clearOutline:v.clearOutline,clearSelectionsCache:v.clearSelectionsCache,selectOnClick:v.selectOnClick}},{"../../plots/cartesian/include_components":577,"./attributes":447,"./defaults":449,"./draw":450,"./draw_newselection/defaults":452,"./select":456}],456:[function(g,Q,X){var m=g("polybooljs"),v=g("point-in-polygon/nested"),k=g("../../registry"),x=g("../drawing").dashStyle,e=g("../color"),t=g("../fx"),r=g("../fx/helpers").makeEventData,l=g("../dragelement/helpers"),n=l.freeMode,d=l.rectMode,u=l.drawMode,o=l.openMode,h=l.selectMode,s=g("../shapes/helpers"),a=g("../shapes/constants"),p=g("../shapes/display_outlines"),c=g("../shapes/handle_outline").clearOutline,i=g("../shapes/draw_newshape/helpers"),y=i.handleEllipse,f=i.readPaths,w=g("../shapes/draw_newshape/newshapes"),b=g("./draw_newselection/newselections"),_=g("./draw").activateLastSelection,T=g("../../lib"),L=T.sorterAsc,A=g("../../lib/polygon"),I=g("../../lib/throttle"),P=g("../../plots/cartesian/axis_ids").getFromId,S=g("../../lib/clear_gl_canvases"),E=g("../../plot_api/subroutines").redrawReglTraces,z=g("./constants"),D=z.MINSELECT,U=A.filter,H=A.tester,Y=g("./helpers"),J=Y.p2r,W=Y.axValue,Z=Y.getTransform;function re(Oe){return Oe.subplot!==void 0}function V(Oe,Ze,Fe,Pe,ze,Ge,$e){var ot,vt,bt,yt,tt,Ke,mt,Ft,Vt,Xt=Ze._hoverdata,Gt=Ze._fullLayout.clickmode.indexOf("event")>-1,nr=[];if(function(be){return be&&Array.isArray(be)&&be[0].hoverOnBox!==!0}(Xt)){N(Oe,Ze,Ge);var It=function(be,Re){var Ue,Xe,qe=be[0],st=-1,it=[];for(Xe=0;Xe<Re.length;Xe++)if(Ue=Re[Xe],qe.fullData._expandedIndex===Ue.cd[0].trace._expandedIndex){if(qe.hoverOnBox===!0)break;qe.pointNumber!==void 0?st=qe.pointNumber:qe.binNumber!==void 0&&(st=qe.binNumber,it=qe.pointNumbers);break}return{pointNumber:st,pointNumbers:it,searchInfo:Ue}}(Xt,ot=te(Ze,Fe,Pe,ze));if(It.pointNumbers.length>0?function(be,Re){var Ue,Xe,qe,st=[];for(qe=0;qe<be.length;qe++)(Ue=be[qe]).cd[0].trace.selectedpoints&&Ue.cd[0].trace.selectedpoints.length>0&&st.push(Ue);if(st.length===1&&st[0]===Re.searchInfo&&(Xe=Re.searchInfo.cd[0].trace).selectedpoints.length===Re.pointNumbers.length){for(qe=0;qe<Re.pointNumbers.length;qe++)if(Xe.selectedpoints.indexOf(Re.pointNumbers[qe])<0)return!1;return!0}return!1}(ot,It):function(be){var Re,Ue,Xe,qe=0;for(Xe=0;Xe<be.length;Xe++)if(Re=be[Xe],(Ue=Re.cd[0].trace).selectedpoints&&(Ue.selectedpoints.length>1||(qe+=Ue.selectedpoints.length)>1))return!1;return qe===1}(ot)&&(Ke=le(It))){for($e&&$e.remove(),Vt=0;Vt<ot.length;Vt++)(vt=ot[Vt])._module.selectPoints(vt,!1);se(Ze,ot),$(Ge),Gt&&Ie(Ze)}else{for(mt=Oe.shiftKey&&(Ke!==void 0?Ke:le(It)),bt=function(be,Re,Ue){return{pointNumber:be,searchInfo:Re,subtract:!!Ue}}(It.pointNumber,It.searchInfo,mt),yt=ee(Ge.selectionDefs.concat([bt])),Vt=0;Vt<ot.length;Vt++)if(tt=fe(ot[Vt]._module.selectPoints(ot[Vt],yt),ot[Vt]),nr.length)for(var Be=0;Be<tt.length;Be++)nr.push(tt[Be]);else nr=tt;if(se(Ze,ot,Ft={points:nr}),bt&&Ge&&Ge.selectionDefs.push(bt),$e){var He=Ge.mergedPolygons,he=o(Ge.dragmode);p(ye(He,he),$e,Ge)}Gt&&De(Ze,Ft)}}}function B(Oe){return"pointNumber"in Oe&&"searchInfo"in Oe}function j(Oe){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(Ze,Fe,Pe,ze){var Ge=Oe.searchInfo.cd[0].trace._expandedIndex;return ze.cd[0].trace._expandedIndex===Ge&&Pe===Oe.pointNumber},isRect:!1,degenerate:!1,subtract:!!Oe.subtract}}function ee(Oe){if(Oe.length){for(var Ze=[],Fe=B(Oe[0])?0:Oe[0][0][0],Pe=Fe,ze=B(Oe[0])?0:Oe[0][0][1],Ge=ze,$e=0;$e<Oe.length;$e++)if(B(Oe[$e]))Ze.push(j(Oe[$e]));else{var ot=H(Oe[$e]);ot.subtract=!!Oe[$e].subtract,Ze.push(ot),Fe=Math.min(Fe,ot.xmin),Pe=Math.max(Pe,ot.xmax),ze=Math.min(ze,ot.ymin),Ge=Math.max(Ge,ot.ymax)}return{xmin:Fe,xmax:Pe,ymin:ze,ymax:Ge,pts:[],contains:function(vt,bt,yt,tt){for(var Ke=!1,mt=0;mt<Ze.length;mt++)Ze[mt].contains(vt,bt,yt,tt)&&(Ke=!Ze[mt].subtract);return Ke},isRect:!1,degenerate:!1}}}function N(Oe,Ze,Fe){var Pe=Ze._fullLayout,ze=Fe.plotinfo,Ge=Fe.dragmode,$e=Pe._lastSelectedSubplot&&Pe._lastSelectedSubplot===ze.id,ot=(Oe.shiftKey||Oe.altKey)&&!(u(Ge)&&o(Ge));$e&&ot&&ze.selection&&ze.selection.selectionDefs&&!Fe.selectionDefs?(Fe.selectionDefs=ze.selection.selectionDefs,Fe.mergedPolygons=ze.selection.mergedPolygons):ot&&ze.selection||$(Fe),$e||(c(Ze),Pe._lastSelectedSubplot=ze.id)}function $(Oe,Ze){var Fe=Oe.dragmode,Pe=Oe.plotinfo,ze=Oe.gd;(function(tt){return tt._fullLayout._activeShapeIndex>=0})(ze)&&ze._fullLayout._deactivateShape(ze),function(tt){return tt._fullLayout._activeSelectionIndex>=0}(ze)&&ze._fullLayout._deactivateSelection(ze);var Ge=ze._fullLayout._zoomlayer,$e=u(Fe),ot=h(Fe);if($e||ot){var vt,bt,yt=Ge.selectAll(".select-outline-"+Pe.id);yt&&ze._fullLayout._outlining&&($e&&(vt=w(yt,Oe)),vt&&k.call("_guiRelayout",ze,{shapes:vt}),ot&&!re(Oe)&&(bt=b(yt,Oe)),bt&&(ze._fullLayout._noEmitSelectedAtStart=!0,k.call("_guiRelayout",ze,{selections:bt}).then(function(){Ze&&_(ze)})),ze._fullLayout._outlining=!1)}Pe.selection={},Pe.selection.selectionDefs=Oe.selectionDefs=[],Pe.selection.mergedPolygons=Oe.mergedPolygons=[]}function K(Oe){return Oe._id}function te(Oe,Ze,Fe,Pe){if(!Oe.calcdata)return[];var ze,Ge,$e,ot=[],vt=Ze.map(K),bt=Fe.map(K);for($e=0;$e<Oe.calcdata.length;$e++)if((Ge=(ze=Oe.calcdata[$e])[0].trace).visible===!0&&Ge._module&&Ge._module.selectPoints)if(!re({subplot:Pe})||Ge.subplot!==Pe&&Ge.geo!==Pe)if(Ge.type==="splom"){if(Ge._xaxes[vt[0]]&&Ge._yaxes[bt[0]]){var yt=ie(Ge._module,ze,Ze[0],Fe[0]);yt.scene=Oe._fullLayout._splomScenes[Ge.uid],ot.push(yt)}}else if(Ge.type==="sankey"){var tt=ie(Ge._module,ze,Ze[0],Fe[0]);ot.push(tt)}else{if(vt.indexOf(Ge.xaxis)===-1||bt.indexOf(Ge.yaxis)===-1)continue;ot.push(ie(Ge._module,ze,P(Oe,Ge.xaxis),P(Oe,Ge.yaxis)))}else ot.push(ie(Ge._module,ze,Ze[0],Fe[0]));return ot}function ie(Oe,Ze,Fe,Pe){return{_module:Oe,cd:Ze,xaxis:Fe,yaxis:Pe}}function le(Oe){var Ze=Oe.searchInfo.cd[0].trace,Fe=Oe.pointNumber,Pe=Oe.pointNumbers,ze=Pe.length>0?Pe[0]:Fe;return!!Ze.selectedpoints&&Ze.selectedpoints.indexOf(ze)>-1}function se(Oe,Ze,Fe){var Pe,ze;for(Pe=0;Pe<Ze.length;Pe++){var Ge=Ze[Pe].cd[0].trace._fullInput,$e=Oe._fullLayout._tracePreGUI[Ge.uid]||{};$e.selectedpoints===void 0&&($e.selectedpoints=Ge._input.selectedpoints||null)}if(Fe){var ot=Fe.points||[];for(Pe=0;Pe<Ze.length;Pe++)(ze=Ze[Pe].cd[0].trace)._input.selectedpoints=ze._fullInput.selectedpoints=[],ze._fullInput!==ze&&(ze.selectedpoints=[]);for(var vt=0;vt<ot.length;vt++){var bt=ot[vt],yt=bt.data,tt=bt.fullData,Ke=bt.pointIndex,mt=bt.pointIndices;mt?([].push.apply(yt.selectedpoints,mt),ze._fullInput!==ze&&[].push.apply(tt.selectedpoints,mt)):(yt.selectedpoints.push(Ke),ze._fullInput!==ze&&tt.selectedpoints.push(Ke))}}else for(Pe=0;Pe<Ze.length;Pe++)delete(ze=Ze[Pe].cd[0].trace).selectedpoints,delete ze._input.selectedpoints,ze._fullInput!==ze&&delete ze._fullInput.selectedpoints;(function(Ft,Vt){for(var Xt=!1,Gt=0;Gt<Vt.length;Gt++){var nr=Vt[Gt],It=nr.cd;k.traceIs(It[0].trace,"regl")&&(Xt=!0);var Be=nr._module,He=Be.styleOnSelect||Be.style;He&&(He(Ft,It,It[0].node3),It[0].nodeRangePlot3&&He(Ft,It,It[0].nodeRangePlot3))}Xt&&(S(Ft),E(Ft))})(Oe,Ze)}function ve(Oe,Ze,Fe){for(var Pe=(Fe?m.difference:m.union)({regions:Oe},{regions:[Ze]}).regions.reverse(),ze=0;ze<Pe.length;ze++){var Ge=Pe[ze];Ge.subtract=de(Ge,Pe.slice(0,ze))}return Pe}function fe(Oe,Ze){if(Array.isArray(Oe))for(var Fe=Ze.cd,Pe=Ze.cd[0].trace,ze=0;ze<Oe.length;ze++)Oe[ze]=r(Oe[ze],Pe,Fe);return Oe}function ye(Oe,Ze){for(var Fe=[],Pe=0;Pe<Oe.length;Pe++){Fe[Pe]=[];for(var ze=0;ze<Oe[Pe].length;ze++){Fe[Pe][ze]=[],Fe[Pe][ze][0]=ze?"L":"M";for(var Ge=0;Ge<Oe[Pe][ze].length;Ge++)Fe[Pe][ze].push(Oe[Pe][ze][Ge])}Ze||Fe[Pe].push(["Z",Fe[Pe][0][1],Fe[Pe][0][2]])}return Fe}function Ae(Oe,Ze){for(var Fe,Pe,ze=[],Ge=[],$e=0;$e<Ze.length;$e++){var ot=Ze[$e];Pe=ot._module.selectPoints(ot,Oe),Ge.push(Pe),Fe=fe(Pe,ot),ze=ze.concat(Fe)}return ze}function pe(Oe,Ze,Fe,Pe,ze){var Ge,$e,ot,vt=!!Pe;ze&&(Ge=ze.plotinfo,$e=ze.xaxes[0]._id,ot=ze.yaxes[0]._id);var bt=[],yt=[],tt=oe(Oe),Ke=Oe._fullLayout;if(Ge){var mt=Ke._zoomlayer,Ft=Ke.dragmode,Vt=u(Ft),Xt=h(Ft);if(Vt||Xt){var Gt=P(Oe,$e,"x"),nr=P(Oe,ot,"y");if(Gt&&nr){var It=mt.selectAll(".select-outline-"+Ge.id);if(It&&Oe._fullLayout._outlining&&It.length){for(var Be=It[0][0].getAttribute("d"),He=f(Be,Oe,Ge),he=[],be=0;be<He.length;be++){for(var Re=He[be],Ue=[],Xe=0;Xe<Re.length;Xe++)Ue.push([Te(Gt,Re[Xe][1]),Te(nr,Re[Xe][2])]);Ue.xref=$e,Ue.yref=ot,Ue.subtract=de(Ue,he),he.push(Ue)}tt=tt.concat(he)}}}}var qe=$e&&ot?[$e+ot]:Ke._subplots.cartesian;(function(Ir){var Fr=Ir.calcdata;if(!!Fr)for(var Yr=0;Yr<Fr.length;Yr++){var fn=Fr[Yr][0].trace,en=Ir._fullLayout._splomScenes;if(en){var Rn=en[fn.uid];Rn&&(Rn.selectBatch=[])}}})(Oe);for(var st={},it=0;it<qe.length;it++){var Tt=qe[it],Pt=Tt.indexOf("y"),rt=Tt.slice(0,Pt),ut=Tt.slice(Pt),Bt=$e&&ot?Fe:void 0;if(Bt=we(tt,rt,ut,Bt)){var wt=Pe;if(!vt){var Lt=P(Oe,rt,"x"),Se=P(Oe,ut,"y");wt=te(Oe,[Lt],[Se],Tt);for(var We=0;We<wt.length;We++){var nt=wt[We],ft=nt.cd[0],Mt=ft.trace;if(nt._module.name==="scattergl"&&!ft.t.xpx){var Nt=Mt.x,Zt=Mt.y,Ut=Mt._length;ft.t.xpx=[],ft.t.ypx=[];for(var fr=0;fr<Ut;fr++)ft.t.xpx[fr]=Lt.c2p(Nt[fr]),ft.t.ypx[fr]=Se.c2p(Zt[fr])}nt._module.name==="splom"&&(st[Mt.uid]||(st[Mt.uid]=!0))}}var Tr=Ae(Bt,wt);bt=bt.concat(Tr),yt=yt.concat(wt)}}var ur={points:bt};se(Oe,yt,ur);var Kt=Ke.clickmode.indexOf("event")>-1&&Ze;if(!Ge&&Ze){var Qt=oe(Oe,!0);if(Qt.length){var er=Qt[0].xref,cr=Qt[0].yref;if(er&&cr){var gr=Ee(Qt);Me([P(Oe,er,"x"),P(Oe,cr,"y")])(ur,gr)}}Oe._fullLayout._noEmitSelectedAtStart?Oe._fullLayout._noEmitSelectedAtStart=!1:Kt&&De(Oe,ur),Ke._reselect=!1}if(!Ge&&Ke._deselect){var Mr=Ke._deselect;(function(Ir,Fr,Yr){for(var fn=0;fn<Yr.length;fn++){var en=Yr[fn];if(en.xaxis&&en.xaxis._id===Ir&&en.yaxis&&en.yaxis._id===Fr)return!0}return!1})($e=Mr.xref,ot=Mr.yref,yt)||ge(Oe,$e,ot,Pe),Kt&&(ur.points.length?De(Oe,ur):Ie(Oe)),Ke._deselect=!1}return{eventData:ur,selectionTesters:Fe}}function ge(Oe,Ze,Fe,Pe){Pe=te(Oe,[P(Oe,Ze,"x")],[P(Oe,Fe,"y")],Ze+Fe);for(var ze=0;ze<Pe.length;ze++){var Ge=Pe[ze];Ge._module.selectPoints(Ge,!1)}se(Oe,Pe)}function we(Oe,Ze,Fe,Pe){for(var ze,Ge=0;Ge<Oe.length;Ge++){var $e=Oe[Ge];Ze===$e.xref&&Fe===$e.yref&&(ze?Pe=ee(ze=ve(ze,$e,!!$e.subtract)):(ze=[$e],Pe=H($e)))}return Pe}function oe(Oe,Ze){for(var Fe=[],Pe=Oe._fullLayout,ze=Pe.selections,Ge=ze.length,$e=0;$e<Ge;$e++)if(!Ze||$e===Pe._activeSelectionIndex){var ot=ze[$e];if(ot){var vt,bt,yt,tt,Ke,mt=ot.xref,Ft=ot.yref,Vt=P(Oe,mt,"x"),Xt=P(Oe,Ft,"y");if(ot.type==="rect"){Ke=[];var Gt=Te(Vt,ot.x0),nr=Te(Vt,ot.x1),It=Te(Xt,ot.y0),Be=Te(Xt,ot.y1);Ke=[[Gt,It],[Gt,Be],[nr,Be],[nr,It]],vt=Math.min(Gt,nr),bt=Math.max(Gt,nr),yt=Math.min(It,Be),tt=Math.max(It,Be),Ke.xmin=vt,Ke.xmax=bt,Ke.ymin=yt,Ke.ymax=tt,Ke.xref=mt,Ke.yref=Ft,Ke.subtract=!1,Ke.isRect=!0,Fe.push(Ke)}else if(ot.type==="path")for(var He=ot.path.split("Z"),he=[],be=0;be<He.length;be++){var Re=He[be];if(Re){Re+="Z";var Ue=s.extractPathCoords(Re,a.paramIsX,"raw"),Xe=s.extractPathCoords(Re,a.paramIsY,"raw");vt=1/0,bt=-1/0,yt=1/0,tt=-1/0,Ke=[];for(var qe=0;qe<Ue.length;qe++){var st=Te(Vt,Ue[qe]),it=Te(Xt,Xe[qe]);Ke.push([st,it]),vt=Math.min(st,vt),bt=Math.max(st,bt),yt=Math.min(it,yt),tt=Math.max(it,tt)}Ke.xmin=vt,Ke.xmax=bt,Ke.ymin=yt,Ke.ymax=tt,Ke.xref=mt,Ke.yref=Ft,Ke.subtract=de(Ke,he),he.push(Ke),Fe.push(Ke)}}}}return Fe}function de(Oe,Ze){for(var Fe=!1,Pe=0;Pe<Ze.length;Pe++)for(var ze=Ze[Pe],Ge=0;Ge<Oe.length;Ge++)if(v(Oe[Ge],ze)){Fe=!Fe;break}return Fe}function Te(Oe,Ze){return Oe.type==="date"&&(Ze=Ze.replace("_"," ")),Oe.type==="log"?Oe.c2p(Ze):Oe.r2p(Ze,null,Oe.calendar)}function Ee(Oe){for(var Ze=Oe.length,Fe=[],Pe=0;Pe<Ze;Pe++){var ze=Oe[Pe];Fe=(Fe=Fe.concat(ze)).concat([ze[0]])}return function(Ge){return Ge.isRect=Ge.length===5&&Ge[0][0]===Ge[4][0]&&Ge[0][1]===Ge[4][1]&&Ge[0][0]===Ge[1][0]&&Ge[2][0]===Ge[3][0]&&Ge[0][1]===Ge[3][1]&&Ge[1][1]===Ge[2][1]||Ge[0][1]===Ge[1][1]&&Ge[2][1]===Ge[3][1]&&Ge[0][0]===Ge[3][0]&&Ge[1][0]===Ge[2][0],Ge.isRect&&(Ge.xmin=Math.min(Ge[0][0],Ge[2][0]),Ge.xmax=Math.max(Ge[0][0],Ge[2][0]),Ge.ymin=Math.min(Ge[0][1],Ge[2][1]),Ge.ymax=Math.max(Ge[0][1],Ge[2][1])),Ge}(Fe)}function Me(Oe){return function(Ze,Fe){for(var Pe,ze,Ge=0;Ge<Oe.length;Ge++){var $e=Oe[Ge],ot=$e._id,vt=ot.charAt(0);if(Fe.isRect){Pe||(Pe={});var bt=Fe[vt+"min"],yt=Fe[vt+"max"];bt!==void 0&&yt!==void 0&&(Pe[ot]=[J($e,bt),J($e,yt)].sort(L))}else ze||(ze={}),ze[ot]=Fe.map(W($e))}Pe&&(Ze.range=Pe),ze&&(Ze.lassoPoints=ze)}}function De(Oe,Ze){Ze&&(Ze.selections=(Oe.layout||{}).selections||[]),Oe.emit("plotly_selected",Ze)}function Ie(Oe){Oe.emit("plotly_deselect",null)}Q.exports={reselect:pe,prepSelect:function(Oe,Ze,Fe,Pe,ze){var Ge=!re(Pe),$e=n(ze),ot=d(ze),vt=o(ze),bt=u(ze),yt=h(ze),tt=ze==="drawcircle",Ke=ze==="drawline"||tt,mt=Pe.gd,Ft=mt._fullLayout,Vt=yt&&Ft.newselection.mode==="immediate"&&Ge,Xt=Ft._zoomlayer,Gt=Pe.element.getBoundingClientRect(),nr=Pe.plotinfo,It=Z(nr),Be=Ze-Gt.left,He=Fe-Gt.top;Ft._calcInverseTransform(mt);var he=T.apply3DTransform(Ft._invTransform)(Be,He);Be=he[0],He=he[1];var be,Re,Ue,Xe,qe,st,it,Tt=Ft._invScaleX,Pt=Ft._invScaleY,rt=Be,ut=He,Bt="M"+Be+","+He,wt=Pe.xaxes[0],Lt=Pe.yaxes[0],Se=wt._length,We=Lt._length,nt=Oe.altKey&&!(u(ze)&&vt);N(Oe,mt,Pe),$e&&(be=U([[Be,He]],z.BENDPX));var ft=Xt.selectAll("path.select-outline-"+nr.id).data([1]),Mt=bt?Ft.newshape:Ft.newselection,Nt=bt&&!vt?Mt.fillcolor:"rgba(0,0,0,0)",Zt=Mt.line.color||(Ge?e.contrast(mt._fullLayout.plot_bgcolor):"#7f7f7f");ft.enter().append("path").attr("class","select-outline select-outline-"+nr.id).style({opacity:bt?Mt.opacity/2:1,"stroke-dasharray":x(Mt.line.dash,Mt.line.width),"stroke-width":Mt.line.width+"px","shape-rendering":"crispEdges"}).call(e.stroke,Zt).call(e.fill,Nt).attr("fill-rule","evenodd").classed("cursor-move",!!bt).attr("transform",It).attr("d",Bt+"Z");var Ut=Xt.append("path").attr("class","zoombox-corners").style({fill:e.background,stroke:e.defaultLine,"stroke-width":1}).attr("transform",It).attr("d","M0,0Z"),fr=Ft._uid+z.SELECTID,Tr=[],ur=te(mt,Pe.xaxes,Pe.yaxes,Pe.subplot);Vt&&!Oe.shiftKey&&(Pe._clearSubplotSelections=function(){if(Ge){var Qt=wt._id,er=Lt._id;ge(mt,Qt,er,ur);for(var cr=(mt.layout||{}).selections||[],gr=[],Mr=!1,Ir=0;Ir<cr.length;Ir++){var Fr=Ft.selections[Ir];Fr.xref!==Qt||Fr.yref!==er?gr.push(cr[Ir]):Mr=!0}Mr&&(mt._fullLayout._noEmitSelectedAtStart=!0,k.call("_guiRelayout",mt,{selections:gr}))}});var Kt=function(Qt){return Qt.plotinfo.fillRangeItems||Me(Qt.xaxes.concat(Qt.yaxes))}(Pe);Pe.moveFn=function(Qt,er){Pe._clearSubplotSelections&&(Pe._clearSubplotSelections(),Pe._clearSubplotSelections=void 0),rt=Math.max(0,Math.min(Se,Tt*Qt+Be)),ut=Math.max(0,Math.min(We,Pt*er+He));var cr=Math.abs(rt-Be),gr=Math.abs(ut-He);if(ot){var Mr,Ir,Fr;if(yt){var Yr=Ft.selectdirection;switch(Mr=Yr==="any"?gr<Math.min(.6*cr,D)?"h":cr<Math.min(.6*gr,D)?"v":"d":Yr){case"h":Ir=tt?We/2:0,Fr=We;break;case"v":Ir=tt?Se/2:0,Fr=Se}}if(bt)switch(Ft.newshape.drawdirection){case"vertical":Mr="h",Ir=tt?We/2:0,Fr=We;break;case"horizontal":Mr="v",Ir=tt?Se/2:0,Fr=Se;break;case"ortho":cr<gr?(Mr="h",Ir=He,Fr=ut):(Mr="v",Ir=Be,Fr=rt);break;default:Mr="d"}Mr==="h"?((Xe=Ke?y(tt,[rt,Ir],[rt,Fr]):[[Be,Ir],[Be,Fr],[rt,Fr],[rt,Ir]]).xmin=Ke?rt:Math.min(Be,rt),Xe.xmax=Ke?rt:Math.max(Be,rt),Xe.ymin=Math.min(Ir,Fr),Xe.ymax=Math.max(Ir,Fr),Ut.attr("d","M"+Xe.xmin+","+(He-D)+"h-4v"+2*D+"h4ZM"+(Xe.xmax-1)+","+(He-D)+"h4v"+2*D+"h-4Z")):Mr==="v"?((Xe=Ke?y(tt,[Ir,ut],[Fr,ut]):[[Ir,He],[Ir,ut],[Fr,ut],[Fr,He]]).xmin=Math.min(Ir,Fr),Xe.xmax=Math.max(Ir,Fr),Xe.ymin=Ke?ut:Math.min(He,ut),Xe.ymax=Ke?ut:Math.max(He,ut),Ut.attr("d","M"+(Be-D)+","+Xe.ymin+"v-4h"+2*D+"v4ZM"+(Be-D)+","+(Xe.ymax-1)+"v4h"+2*D+"v-4Z")):Mr==="d"&&((Xe=Ke?y(tt,[Be,He],[rt,ut]):[[Be,He],[Be,ut],[rt,ut],[rt,He]]).xmin=Math.min(Be,rt),Xe.xmax=Math.max(Be,rt),Xe.ymin=Math.min(He,ut),Xe.ymax=Math.max(He,ut),Ut.attr("d","M0,0Z"))}else $e&&(be.addPt([rt,ut]),Xe=be.filtered);if(Pe.selectionDefs&&Pe.selectionDefs.length?(Ue=ve(Pe.mergedPolygons,Xe,nt),Xe.subtract=nt,Re=ee(Pe.selectionDefs.concat([Xe]))):(Ue=[Xe],Re=H(Xe)),p(ye(Ue,vt),ft,Pe),yt){var fn,en=pe(mt,!1),Rn=en.eventData?en.eventData.points.slice():[];en=pe(mt,!1,Re,ur,Pe),Re=en.selectionTesters,it=en.eventData,fn=be?be.filtered:Ee(Ue),I.throttle(fr,z.SELECTDELAY,function(){for(var nn=(Tr=Ae(Re,ur)).slice(),yn=0;yn<Rn.length;yn++){for(var bn=Rn[yn],ta=!1,Br=0;Br<nn.length;Br++)if(nn[Br].curveNumber===bn.curveNumber&&nn[Br].pointNumber===bn.pointNumber){ta=!0;break}ta||nn.push(bn)}nn.length&&(it||(it={}),it.points=nn),Kt(it,fn),function(rn,gn){rn.emit("plotly_selecting",gn)}(mt,it)})}},Pe.clickFn=function(Qt,er){if(Ut.remove(),mt._fullLayout._activeShapeIndex>=0)mt._fullLayout._deactivateShape(mt);else if(!bt){var cr=Ft.clickmode;I.done(fr).then(function(){if(I.clear(fr),Qt===2){for(ft.remove(),qe=0;qe<ur.length;qe++)(st=ur[qe])._module.selectPoints(st,!1);if(se(mt,ur),$(Pe),Ie(mt),ur.length){var gr=ur[0].xaxis,Mr=ur[0].yaxis;if(gr&&Mr){for(var Ir=[],Fr=mt._fullLayout.selections,Yr=0;Yr<Fr.length;Yr++){var fn=Fr[Yr];fn&&(fn.xref===gr._id&&fn.yref===Mr._id||Ir.push(fn))}Ir.length<Fr.length&&(mt._fullLayout._noEmitSelectedAtStart=!0,k.call("_guiRelayout",mt,{selections:Ir}))}}}else cr.indexOf("select")>-1&&V(er,mt,Pe.xaxes,Pe.yaxes,Pe.subplot,Pe,ft),cr==="event"&&De(mt,void 0);t.click(mt,er)}).catch(T.error)}},Pe.doneFn=function(){Ut.remove(),I.done(fr).then(function(){I.clear(fr),!Vt&&Xe&&Pe.selectionDefs&&(Xe.subtract=nt,Pe.selectionDefs.push(Xe),Pe.mergedPolygons.length=0,[].push.apply(Pe.mergedPolygons,Ue)),(Vt||bt)&&$(Pe,Vt),Pe.doneFnCompleted&&Pe.doneFnCompleted(Tr),yt&&De(mt,it)}).catch(T.error)}},clearOutline:c,clearSelectionsCache:$,selectOnClick:V}},{"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/polygon":527,"../../lib/throttle":542,"../../plot_api/subroutines":556,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../color":367,"../dragelement/helpers":385,"../drawing":389,"../fx":407,"../fx/helpers":403,"../shapes/constants":459,"../shapes/display_outlines":461,"../shapes/draw_newshape/helpers":466,"../shapes/draw_newshape/newshapes":467,"../shapes/handle_outline":468,"../shapes/helpers":469,"./constants":448,"./draw":450,"./draw_newselection/newselections":453,"./helpers":454,"point-in-polygon/nested":254,polybooljs:255}],457:[function(g,Q,X){var m=g("../annotations/attributes"),v=g("../../traces/scatter/attributes").line,k=g("../drawing/attributes").dash,x=g("../../lib/extend").extendFlat,e=g("../../plot_api/plot_template").templatedArray;g("../../constants/axis_placeable_objects"),Q.exports=e("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:x({},m.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:x({},m.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:x({},v.color,{editType:"arraydraw"}),width:x({},v.width,{editType:"calc+arraydraw"}),dash:x({},k,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":484,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../annotations/attributes":350,"../drawing/attributes":388}],458:[function(g,Q,X){var m=g("../../lib"),v=g("../../plots/cartesian/axes"),k=g("./constants"),x=g("./helpers");function e(n){return r(n.line.width,n.xsizemode,n.x0,n.x1,n.path,!1)}function t(n){return r(n.line.width,n.ysizemode,n.y0,n.y1,n.path,!0)}function r(n,d,u,o,h,s){var a=n/2,p=s;if(d==="pixel"){var c=h?x.extractPathCoords(h,s?k.paramIsY:k.paramIsX):[u,o],i=m.aggNums(Math.max,null,c),y=m.aggNums(Math.min,null,c),f=y<0?Math.abs(y)+a:a,w=i>0?i+a:a;return{ppad:a,ppadplus:p?f:w,ppadminus:p?w:f}}return{ppad:a}}function l(n,d,u,o,h){var s=n.type==="category"||n.type==="multicategory"?n.r2c:n.d2c;if(d!==void 0)return[s(d),s(u)];if(o){var a,p,c,i,y=1/0,f=-1/0,w=o.match(k.segmentRE);for(n.type==="date"&&(s=x.decodeDate(s)),a=0;a<w.length;a++)(p=h[w[a].charAt(0)].drawn)!==void 0&&(!(c=w[a].substr(1).match(k.paramRE))||c.length<p||((i=s(c[p]))<y&&(y=i),i>f&&(f=i)));return f>=y?[y,f]:void 0}}Q.exports=function(n){var d=n._fullLayout,u=m.filterVisible(d.shapes);if(u.length&&n._fullData.length)for(var o=0;o<u.length;o++){var h,s,a=u[o];a._extremes={};var p=v.getRefType(a.xref),c=v.getRefType(a.yref);if(a.xref!=="paper"&&p!=="domain"){var i=a.xsizemode==="pixel"?a.xanchor:a.x0,y=a.xsizemode==="pixel"?a.xanchor:a.x1;(s=l(h=v.getFromId(n,a.xref),i,y,a.path,k.paramIsX))&&(a._extremes[h._id]=v.findExtremes(h,s,e(a)))}if(a.yref!=="paper"&&c!=="domain"){var f=a.ysizemode==="pixel"?a.yanchor:a.y0,w=a.ysizemode==="pixel"?a.yanchor:a.y1;(s=l(h=v.getFromId(n,a.yref),f,w,a.path,k.paramIsY))&&(a._extremes[h._id]=v.findExtremes(h,s,t(a)))}}}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":459,"./helpers":469}],459:[function(g,Q,X){Q.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],460:[function(g,Q,X){var m=g("../../lib"),v=g("../../plots/cartesian/axes"),k=g("../../plots/array_container_defaults"),x=g("./attributes"),e=g("./helpers");function t(r,l,n){function d(E,z){return m.coerce(r,l,x,E,z)}if(d("visible")){var u=d("path"),o=d("type",u?"path":"rect")!=="path";o&&delete l.path,d("editable"),d("layer"),d("opacity"),d("fillcolor"),d("fillrule"),d("line.width")&&(d("line.color"),d("line.dash"));for(var h=d("xsizemode"),s=d("ysizemode"),a=["x","y"],p=0;p<2;p++){var c,i,y,f=a[p],w=f+"anchor",b=f==="x"?h:s,_={_fullLayout:n},T=v.coerceRef(r,l,_,f,void 0,"paper");if(v.getRefType(T)==="range"?((c=v.getFromId(_,T))._shapeIndices.push(l._index),y=e.rangeToShapePosition(c),i=e.shapePositionToRange(c)):i=y=m.identity,o){var L=f+"0",A=f+"1",I=r[L],P=r[A];r[L]=i(r[L],!0),r[A]=i(r[A],!0),b==="pixel"?(d(L,0),d(A,10)):(v.coercePosition(l,_,d,T,L,.25),v.coercePosition(l,_,d,T,A,.75)),l[L]=y(l[L]),l[A]=y(l[A]),r[L]=I,r[A]=P}if(b==="pixel"){var S=r[w];r[w]=i(r[w],!0),v.coercePosition(l,_,d,T,w,.25),l[w]=y(l[w]),r[w]=S}}o&&m.noneOrAll(r,l,["x0","x1","y0","y1"])}}Q.exports=function(r,l){k(r,l,{name:"shapes",handleItemDefaults:t})}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":457,"./helpers":469}],461:[function(g,Q,X){var m=g("../../lib").strTranslate,v=g("../dragelement"),k=g("../dragelement/helpers"),x=k.drawMode,e=k.selectMode,t=g("../../registry"),r=g("../color"),l=g("./draw_newshape/constants"),n=l.i000,d=l.i090,u=l.i180,o=l.i270,h=g("./handle_outline").clearOutlineControllers,s=g("./draw_newshape/helpers"),a=s.pointsOnRectangle,p=s.pointsOnEllipse,c=s.writePaths,i=g("./draw_newshape/newshapes"),y=g("../selections/draw_newselection/newselections");function f(w,b){var _,T,L,A=w[b][1],I=w[b][2],P=w.length;return T=w[_=(b+1)%P][1],L=w[_][2],T===A&&L===I&&(T=w[_=(b+2)%P][1],L=w[_][2]),[_,T,L]}Q.exports=function w(b,_,T,L){L||(L=0);var A=T.gd;function I(){w(b,_,T,L++),p(b[0])&&P({redrawing:!0})}function P(K){var te={};T.isActiveShape!==void 0&&(T.isActiveShape=!1,te=i(_,T)),T.isActiveSelection!==void 0&&(T.isActiveSelection=!1,te=y(_,T),A._fullLayout._reselect=!0),Object.keys(te).length&&t.call((K||{}).redrawing?"relayout":"_guiRelayout",A,te)}var S,E,z,D,U,H=A._fullLayout._zoomlayer,Y=T.dragmode,J=x(Y),W=e(Y);(J||W)&&(A._fullLayout._outlining=!0),h(A),_.attr("d",c(b)),L||!T.isActiveShape&&!T.isActiveSelection||(U=function(K,te){for(var ie=0;ie<te.length;ie++){var le=te[ie];K[ie]=[];for(var se=0;se<le.length;se++){K[ie][se]=[];for(var ve=0;ve<le[se].length;ve++)K[ie][se][ve]=le[se][ve]}}return K}([],b),function(K){S=[];for(var te=0;te<b.length;te++){var ie=b[te],le=a(ie),se=!le&&p(ie);S[te]=[];for(var ve=ie.length,fe=0;fe<ve;fe++)if(ie[fe][0]!=="Z"&&(!se||fe===n||fe===d||fe===u||fe===o)){var ye,Ae=le&&T.isActiveSelection;Ae&&(ye=f(ie,fe));var pe=ie[fe][1],ge=ie[fe][2],we=K.append(Ae?"rect":"circle").attr("data-i",te).attr("data-j",fe).style({fill:r.background,stroke:r.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(Ae){var oe=ye[1]-pe,de=ye[2]-ge,Te=de?5:Math.max(Math.min(25,Math.abs(oe)-5),5),Ee=oe?5:Math.max(Math.min(25,Math.abs(de)-5),5);we.classed(de?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Te).attr("height",Ee).attr("x",pe-Te/2).attr("y",ge-Ee/2).attr("transform",m(oe/2,de/2))}else we.classed("cursor-grab",!0).attr("r",5).attr("cx",pe).attr("cy",ge);S[te][fe]={element:we.node(),gd:A,prepFn:Z,doneFn:V,clickFn:B},v.init(S[te][fe])}}}(H.append("g").attr("class","outline-controllers")),function(){E=[],b.length&&(E[0]={element:_[0][0],gd:A,prepFn:ee,doneFn:N,clickFn:$},v.init(E[0]))}());function Z(K){z=+K.srcElement.getAttribute("data-i"),D=+K.srcElement.getAttribute("data-j"),S[z][D].moveFn=re}function re(K,te){if(b.length){var ie=U[z][D][1],le=U[z][D][2],se=b[z],ve=se.length;if(a(se)){var fe=K,ye=te;T.isActiveSelection&&(f(se,D)[1]===se[D][1]?ye=0:fe=0);for(var Ae=0;Ae<ve;Ae++)if(Ae!==D){var pe=se[Ae];pe[1]===se[D][1]&&(pe[1]=ie+fe),pe[2]===se[D][2]&&(pe[2]=le+ye)}if(se[D][1]=ie+fe,se[D][2]=le+ye,!a(se))for(var ge=0;ge<ve;ge++)for(var we=0;we<se[ge].length;we++)se[ge][we]=U[z][ge][we]}else se[D][1]=ie+K,se[D][2]=le+te;I()}}function V(){P()}function B(K,te){if(K===2){z=+te.srcElement.getAttribute("data-i"),D=+te.srcElement.getAttribute("data-j");var ie=b[z];a(ie)||p(ie)||function(){if(b.length&&b[z]&&b[z].length){for(var le=[],se=0;se<b[z].length;se++)se!==D&&le.push(b[z][se]);le.length>1&&(le.length!==2||le[1][0]!=="Z")&&(D===0&&(le[0][0]="M"),b[z]=le,I(),P())}}()}}function j(K,te){(function(ie,le){if(b.length)for(var se=0;se<b.length;se++)for(var ve=0;ve<b[se].length;ve++)for(var fe=0;fe+2<b[se][ve].length;fe+=2)b[se][ve][fe+1]=U[se][ve][fe+1]+ie,b[se][ve][fe+2]=U[se][ve][fe+2]+le})(K,te),I()}function ee(K){(z=+K.srcElement.getAttribute("data-i"))||(z=0),E[z].moveFn=j}function N(){P()}function $(K){K===2&&function(te){if(!!e(te._fullLayout.dragmode)){h(te);var ie=te._fullLayout._activeSelectionIndex,le=(te.layout||{}).selections||[];if(ie<le.length){for(var se=[],ve=0;ve<le.length;ve++)ve!==ie&&se.push(le[ve]);delete te._fullLayout._activeSelectionIndex;var fe=te._fullLayout.selections[ie];te._fullLayout._deselect={xref:fe.xref,yref:fe.yref},t.call("_guiRelayout",te,{selections:se})}}}(A)}}},{"../../lib":515,"../../registry":647,"../color":367,"../dragelement":386,"../dragelement/helpers":385,"../selections/draw_newselection/newselections":453,"./draw_newshape/constants":464,"./draw_newshape/helpers":466,"./draw_newshape/newshapes":467,"./handle_outline":468}],462:[function(g,Q,X){var m=g("../../registry"),v=g("../../lib"),k=g("../../plots/cartesian/axes"),x=g("./draw_newshape/helpers").readPaths,e=g("./display_outlines"),t=g("./handle_outline").clearOutlineControllers,r=g("../color"),l=g("../drawing"),n=g("../../plot_api/plot_template").arrayEditor,d=g("../dragelement"),u=g("../../lib/setcursor"),o=g("./constants"),h=g("./helpers"),s=h.getPathString;function a(b){var _=b._fullLayout;for(var T in _._shapeUpperLayer.selectAll("path").remove(),_._shapeLowerLayer.selectAll("path").remove(),_._plots){var L=_._plots[T].shapelayer;L&&L.selectAll("path").remove()}for(var A=0;A<_.shapes.length;A++)_.shapes[A].visible&&i(b,A)}function p(b){return!!b._fullLayout._outlining}function c(b){return!b._context.edits.shapePosition}function i(b,_){b._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+_+'"]').remove();var T=h.makeShapesOptionsAndPlotinfo(b,_),L=T.options,A=T.plotinfo;L._input&&L.visible!==!1&&(L.layer!=="below"?I(b._fullLayout._shapeUpperLayer):L.xref==="paper"||L.yref==="paper"?I(b._fullLayout._shapeLowerLayer):A._hadPlotinfo?I((A.mainplotinfo||A).shapelayer):I(b._fullLayout._shapeLowerLayer));function I(P){var S=s(b,L),E={"data-index":_,"fill-rule":L.fillrule,d:S},z=L.opacity,D=L.fillcolor,U=L.line.width?L.line.color:"rgba(0,0,0,0)",H=L.line.width,Y=L.line.dash;H||L.editable!==!0||(H=5,Y="solid");var J=S[S.length-1]!=="Z",W=c(b)&&L.editable&&b._fullLayout._activeShapeIndex===_;W&&(D=J?"rgba(0,0,0,0)":b._fullLayout.activeshape.fillcolor,z=b._fullLayout.activeshape.opacity);var Z,re=P.append("path").attr(E).style("opacity",z).call(r.stroke,U).call(r.fill,D).call(l.dashLine,Y,H);if(y(re,b,L),(W||b._context.edits.shapePosition)&&(Z=n(b.layout,"shapes",L)),W){re.style({cursor:"move"});var V={element:re.node(),plotinfo:A,gd:b,editHelpers:Z,isActiveShape:!0},B=x(S,b);e(B,re,V)}else b._context.edits.shapePosition?function(j,ee,N,$,K,te){var ie,le,se,ve,fe,ye,Ae,pe,ge,we,oe,de,Te,Ee,Me,De,Ie=N.xsizemode==="pixel",Oe=N.ysizemode==="pixel",Ze=N.type==="line",Fe=N.type==="path",Pe=te.modifyItem,ze=k.getFromId(j,N.xref),Ge=k.getRefType(N.xref),$e=k.getFromId(j,N.yref),ot=k.getRefType(N.yref),vt=h.getDataToPixel(j,ze,!1,Ge),bt=h.getDataToPixel(j,$e,!0,ot),yt=h.getPixelToData(j,ze,!1,Ge),tt=h.getPixelToData(j,$e,!0,ot),Ke=Ze?function(){var It=Math.max(N.line.width,10),Be=K.append("g").attr("data-index",$);Be.append("path").attr("d",ee.attr("d")).style({cursor:"move","stroke-width":It,"stroke-opacity":"0"});var He={"fill-opacity":"0"},he=Math.max(It/2,10);return Be.append("circle").attr({"data-line-point":"start-point",cx:Ie?vt(N.xanchor)+N.x0:vt(N.x0),cy:Oe?bt(N.yanchor)-N.y0:bt(N.y0),r:he}).style(He).classed("cursor-grab",!0),Be.append("circle").attr({"data-line-point":"end-point",cx:Ie?vt(N.xanchor)+N.x1:vt(N.x1),cy:Oe?bt(N.yanchor)-N.y1:bt(N.y1),r:he}).style(He).classed("cursor-grab",!0),Be}():ee,mt={element:Ke.node(),gd:j,prepFn:function(It){p(j)||(Ie&&(fe=vt(N.xanchor)),Oe&&(ye=bt(N.yanchor)),N.type==="path"?Me=N.path:(ie=Ie?N.x0:vt(N.x0),le=Oe?N.y0:bt(N.y0),se=Ie?N.x1:vt(N.x1),ve=Oe?N.y1:bt(N.y1)),ie<se?(ge=ie,Te="x0",we=se,Ee="x1"):(ge=se,Te="x1",we=ie,Ee="x0"),!Oe&&le<ve||Oe&&le>ve?(Ae=le,oe="y0",pe=ve,de="y1"):(Ae=ve,oe="y1",pe=le,de="y0"),Ft(It),Gt(K,N),function(Be,He,he){var be=He.xref,Re=He.yref,Ue=k.getFromId(he,be),Xe=k.getFromId(he,Re),qe="";be==="paper"||Ue.autorange||(qe+=be),Re==="paper"||Xe.autorange||(qe+=Re),l.setClipUrl(Be,qe?"clip"+he._fullLayout._uid+qe:null,he)}(ee,N,j),mt.moveFn=De==="move"?Vt:Xt,mt.altKey=It.altKey)},doneFn:function(){p(j)||(u(ee),nr(K),y(ee,j,N),m.call("_guiRelayout",j,te.getUpdateObj()))},clickFn:function(){p(j)||nr(K)}};function Ft(It){if(p(j))De=null;else if(Ze)De=It.target.tagName==="path"?"move":It.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Be=mt.element.getBoundingClientRect(),He=Be.right-Be.left,he=Be.bottom-Be.top,be=It.clientX-Be.left,Re=It.clientY-Be.top,Ue=!Fe&&He>10&&he>10&&!It.shiftKey?d.getCursor(be/He,1-Re/he):"move";u(ee,Ue),De=Ue.split("-")[0]}}function Vt(It,Be){if(N.type==="path"){var He=function(Re){return Re},he=He,be=He;Ie?Pe("xanchor",N.xanchor=yt(fe+It)):(he=function(Re){return yt(vt(Re)+It)},ze&&ze.type==="date"&&(he=h.encodeDate(he))),Oe?Pe("yanchor",N.yanchor=tt(ye+Be)):(be=function(Re){return tt(bt(Re)+Be)},$e&&$e.type==="date"&&(be=h.encodeDate(be))),Pe("path",N.path=f(Me,he,be))}else Ie?Pe("xanchor",N.xanchor=yt(fe+It)):(Pe("x0",N.x0=yt(ie+It)),Pe("x1",N.x1=yt(se+It))),Oe?Pe("yanchor",N.yanchor=tt(ye+Be)):(Pe("y0",N.y0=tt(le+Be)),Pe("y1",N.y1=tt(ve+Be)));ee.attr("d",s(j,N)),Gt(K,N)}function Xt(It,Be){if(Fe){var He=function(Se){return Se},he=He,be=He;Ie?Pe("xanchor",N.xanchor=yt(fe+It)):(he=function(Se){return yt(vt(Se)+It)},ze&&ze.type==="date"&&(he=h.encodeDate(he))),Oe?Pe("yanchor",N.yanchor=tt(ye+Be)):(be=function(Se){return tt(bt(Se)+Be)},$e&&$e.type==="date"&&(be=h.encodeDate(be))),Pe("path",N.path=f(Me,he,be))}else if(Ze){if(De==="resize-over-start-point"){var Re=ie+It,Ue=Oe?le-Be:le+Be;Pe("x0",N.x0=Ie?Re:yt(Re)),Pe("y0",N.y0=Oe?Ue:tt(Ue))}else if(De==="resize-over-end-point"){var Xe=se+It,qe=Oe?ve-Be:ve+Be;Pe("x1",N.x1=Ie?Xe:yt(Xe)),Pe("y1",N.y1=Oe?qe:tt(qe))}}else{var st=function(Se){return De.indexOf(Se)!==-1},it=st("n"),Tt=st("s"),Pt=st("w"),rt=st("e"),ut=it?Ae+Be:Ae,Bt=Tt?pe+Be:pe,wt=Pt?ge+It:ge,Lt=rt?we+It:we;Oe&&(it&&(ut=Ae-Be),Tt&&(Bt=pe-Be)),(!Oe&&Bt-ut>10||Oe&&ut-Bt>10)&&(Pe(oe,N[oe]=Oe?ut:tt(ut)),Pe(de,N[de]=Oe?Bt:tt(Bt))),Lt-wt>10&&(Pe(Te,N[Te]=Ie?wt:yt(wt)),Pe(Ee,N[Ee]=Ie?Lt:yt(Lt)))}ee.attr("d",s(j,N)),Gt(K,N)}function Gt(It,Be){(Ie||Oe)&&function(){var He=Be.type!=="path",he=It.selectAll(".visual-cue").data([0]);he.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var be=vt(Ie?Be.xanchor:v.midRange(He?[Be.x0,Be.x1]:h.extractPathCoords(Be.path,o.paramIsX))),Re=bt(Oe?Be.yanchor:v.midRange(He?[Be.y0,Be.y1]:h.extractPathCoords(Be.path,o.paramIsY)));if(be=h.roundPositionForSharpStrokeRendering(be,1),Re=h.roundPositionForSharpStrokeRendering(Re,1),Ie&&Oe){var Ue="M"+(be-1-1)+","+(Re-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";he.attr("d",Ue)}else if(Ie){var Xe="M"+(be-1-1)+","+(Re-9-1)+"v18 h2 v-18 Z";he.attr("d",Xe)}else{var qe="M"+(be-9-1)+","+(Re-1-1)+"h18 v2 h-18 Z";he.attr("d",qe)}}()}function nr(It){It.selectAll(".visual-cue").remove()}d.init(mt),Ke.node().onmousemove=Ft}(b,re,L,_,P,Z):L.editable===!0&&re.style("pointer-events",J||r.opacity(D)*z<=.5?"stroke":"all");re.node().addEventListener("click",function(){return function(j,ee){if(!!c(j)){var N=+ee.node().getAttribute("data-index");if(N>=0){if(N===j._fullLayout._activeShapeIndex)return void w(j);j._fullLayout._activeShapeIndex=N,j._fullLayout._deactivateShape=w,a(j)}}}(b,re)})}}function y(b,_,T){var L=(T.xref+T.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");l.setClipUrl(b,L?"clip"+_._fullLayout._uid+L:null,_)}function f(b,_,T){return b.replace(o.segmentRE,function(L){var A=0,I=L.charAt(0),P=o.paramIsX[I],S=o.paramIsY[I],E=o.numParams[I];return I+L.substr(1).replace(o.paramRE,function(z){return A>=E||(P[A]?z=_(z):S[A]&&(z=T(z)),A++),z})})}function w(b){c(b)&&b._fullLayout._activeShapeIndex>=0&&(t(b),delete b._fullLayout._activeShapeIndex,a(b))}Q.exports={draw:a,drawOne:i,eraseActiveShape:function(b){if(!!c(b)){t(b);var _=b._fullLayout._activeShapeIndex,T=(b.layout||{}).shapes||[];if(_<T.length){for(var L=[],A=0;A<T.length;A++)A!==_&&L.push(T[A]);delete b._fullLayout._activeShapeIndex,m.call("_guiRelayout",b,{shapes:L})}}}}},{"../../lib":515,"../../lib/setcursor":536,"../../plot_api/plot_template":555,"../../plots/cartesian/axes":566,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"./constants":459,"./display_outlines":461,"./draw_newshape/helpers":466,"./handle_outline":468,"./helpers":469}],463:[function(g,Q,X){var m=g("../../drawing/attributes").dash,v=g("../../../lib/extend").extendFlat;Q.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:v({},m,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":505,"../../drawing/attributes":388}],464:[function(g,Q,X){Q.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],465:[function(g,Q,X){var m=g("../../color");Q.exports=function(v,k,x){if(x("newshape.drawdirection"),x("newshape.layer"),x("newshape.fillcolor"),x("newshape.fillrule"),x("newshape.opacity"),x("newshape.line.width")){var e=(v||{}).plot_bgcolor||"#FFF";x("newshape.line.color",m.contrast(e)),x("newshape.line.dash")}x("activeshape.fillcolor"),x("activeshape.opacity")}},{"../../color":367}],466:[function(g,Q,X){var m=g("parse-svg-path"),v=g("./constants"),k=v.CIRCLE_SIDES,x=v.SQRT2,e=g("../../selections/helpers"),t=e.p2r,r=e.r2p,l=[0,3,4,5,6,1,2],n=[0,3,4,1,2];function d(o,h){return Math.abs(o-h)<=1e-6}function u(o,h){var s=h[1]-o[1],a=h[2]-o[2];return Math.sqrt(s*s+a*a)}X.writePaths=function(o){var h=o.length;if(!h)return"M0,0Z";for(var s="",a=0;a<h;a++)for(var p=o[a].length,c=0;c<p;c++){var i=o[a][c][0];if(i==="Z")s+="Z";else for(var y=o[a][c].length,f=0;f<y;f++){var w=f;i==="Q"||i==="S"?w=n[f]:i==="C"&&(w=l[f]),s+=o[a][c][w],f>0&&f<y-1&&(s+=",")}}return s},X.readPaths=function(o,h,s,a){var p,c,i,y=m(o),f=[],w=-1,b=0,_=0,T=function(){c=b,i=_};T();for(var L=0;L<y.length;L++){var A,I,P,S,E=[],z=y[L][0],D=z;switch(z){case"M":w++,f[w]=[],b=+y[L][1],_=+y[L][2],E.push([D,b,_]),T();break;case"Q":case"S":A=+y[L][1],P=+y[L][2],b=+y[L][3],_=+y[L][4],E.push([D,b,_,A,P]);break;case"C":A=+y[L][1],P=+y[L][2],I=+y[L][3],S=+y[L][4],b=+y[L][5],_=+y[L][6],E.push([D,b,_,A,P,I,S]);break;case"T":case"L":b=+y[L][1],_=+y[L][2],E.push([D,b,_]);break;case"H":D="L",b=+y[L][1],E.push([D,b,_]);break;case"V":D="L",_=+y[L][1],E.push([D,b,_]);break;case"A":D="L";var U=+y[L][1],H=+y[L][2];+y[L][4]||(U=-U,H=-H);var Y=b-U,J=_;for(p=1;p<=k/2;p++){var W=2*Math.PI*p/k;E.push([D,Y+U*Math.cos(W),J+H*Math.sin(W)])}break;case"Z":b===c&&_===i||(b=c,_=i,E.push([D,b,_]))}for(var Z=(s||{}).domain,re=h._fullLayout._size,V=s&&s.xsizemode==="pixel",B=s&&s.ysizemode==="pixel",j=a===!1,ee=0;ee<E.length;ee++){for(p=0;p+2<7;p+=2){var N=E[ee][p+1],$=E[ee][p+2];N!==void 0&&$!==void 0&&(b=N,_=$,s&&(s.xaxis&&s.xaxis.p2r?(j&&(N-=s.xaxis._offset),N=V?r(s.xaxis,s.xanchor)+N:t(s.xaxis,N)):(j&&(N-=re.l),Z?N=Z.x[0]+N/re.w:N/=re.w),s.yaxis&&s.yaxis.p2r?(j&&($-=s.yaxis._offset),$=B?r(s.yaxis,s.yanchor)-$:t(s.yaxis,$)):(j&&($-=re.t),$=Z?Z.y[1]-$/re.h:1-$/re.h)),E[ee][p+1]=N,E[ee][p+2]=$)}f[w].push(E[ee].slice())}}return f},X.pointsOnRectangle=function(o){if(o.length!==5)return!1;for(var h=1;h<3;h++)if(!d(o[0][h]-o[1][h],o[3][h]-o[2][h])||!d(o[0][h]-o[3][h],o[1][h]-o[2][h]))return!1;return!(!d(o[0][1],o[1][1])&&!d(o[0][1],o[3][1]))&&!!(u(o[0],o[1])*u(o[0],o[3]))},X.pointsOnEllipse=function(o){var h=o.length;if(h!==k+1)return!1;h=k;for(var s=0;s<h;s++){var a=(2*h-s)%h,p=(h/2+a)%h,c=(h/2+s)%h;if(!d(u(o[s],o[c]),u(o[a],o[p])))return!1}return!0},X.handleEllipse=function(o,h,s){if(!o)return[h,s];var a=X.ellipseOver({x0:h[0],y0:h[1],x1:s[0],y1:s[1]}),p=(a.x1+a.x0)/2,c=(a.y1+a.y0)/2,i=(a.x1-a.x0)/2,y=(a.y1-a.y0)/2;i||(i=y/=x),y||(y=i/=x);for(var f=[],w=0;w<k;w++){var b=2*w*Math.PI/k;f.push([p+i*Math.cos(b),c+y*Math.sin(b)])}return f},X.ellipseOver=function(o){var h=o.x0,s=o.y0,a=o.x1,p=o.y1,c=a-h,i=p-s,y=((h-=c)+a)/2,f=((s-=i)+p)/2;return{x0:y-(c*=x),y0:f-(i*=x),x1:y+c,y1:f+i}},X.fixDatesForPaths=function(o,h,s){var a=h.type==="date",p=s.type==="date";if(!a&&!p)return o;for(var c=0;c<o.length;c++)for(var i=0;i<o[c].length;i++)for(var y=0;y+2<o[c][i].length;y+=2)a&&(o[c][i][y+1]=o[c][i][y+1].replace(" ","_")),p&&(o[c][i][y+2]=o[c][i][y+2].replace(" ","_"));return o}},{"../../selections/helpers":454,"./constants":464,"parse-svg-path":250}],467:[function(g,Q,X){var m=g("../../dragelement/helpers"),v=m.drawMode,k=m.openMode,x=g("./constants"),e=x.i000,t=x.i090,r=x.i180,l=x.i270,n=x.cos45,d=x.sin45,u=g("../../selections/helpers"),o=u.p2r,h=u.r2p,s=g(".././handle_outline").clearOutline,a=g("./helpers"),p=a.readPaths,c=a.writePaths,i=a.ellipseOver,y=a.fixDatesForPaths;Q.exports=function(f,w){if(f.length){var b=f[0][0];if(b){var _=b.getAttribute("d"),T=w.gd,L=T._fullLayout.newshape,A=w.plotinfo,I=A.xaxis,P=A.yaxis,S=!!A.domain||!A.xaxis,E=!!A.domain||!A.yaxis,z=w.isActiveShape,D=w.dragmode,U=(T.layout||{}).shapes||[];if(!v(D)&&z!==void 0){var H=T._fullLayout._activeShapeIndex;if(H<U.length)switch(T._fullLayout.shapes[H].type){case"rect":D="drawrect";break;case"circle":D="drawcircle";break;case"line":D="drawline";break;case"path":var Y=U[H].path||"";D=Y[Y.length-1]==="Z"?"drawclosedpath":"drawopenpath"}}var J,W=k(D),Z=p(_,T,A,z),re={editable:!0,xref:S?"paper":I._id,yref:E?"paper":P._id,layer:L.layer,opacity:L.opacity,line:{color:L.line.color,width:L.line.width,dash:L.line.dash}};if(W||(re.fillcolor=L.fillcolor,re.fillrule=L.fillrule),Z.length===1&&(J=Z[0]),J&&J.length===5&&D==="drawrect")re.type="rect",re.x0=J[0][1],re.y0=J[0][2],re.x1=J[2][1],re.y1=J[2][2];else if(J&&D==="drawline")re.type="line",re.x0=J[0][1],re.y0=J[0][2],re.x1=J[1][1],re.y1=J[1][2];else if(J&&D==="drawcircle"){re.type="circle";var V=J[e][1],B=J[t][1],j=J[r][1],ee=J[l][1],N=J[e][2],$=J[t][2],K=J[r][2],te=J[l][2],ie=A.xaxis&&(A.xaxis.type==="date"||A.xaxis.type==="log"),le=A.yaxis&&(A.yaxis.type==="date"||A.yaxis.type==="log");ie&&(V=h(A.xaxis,V),B=h(A.xaxis,B),j=h(A.xaxis,j),ee=h(A.xaxis,ee)),le&&(N=h(A.yaxis,N),$=h(A.yaxis,$),K=h(A.yaxis,K),te=h(A.yaxis,te));var se=(B+ee)/2,ve=(N+K)/2,fe=i({x0:se,y0:ve,x1:se+(ee-B+j-V)/2*n,y1:ve+(te-$+K-N)/2*d});ie&&(fe.x0=o(A.xaxis,fe.x0),fe.x1=o(A.xaxis,fe.x1)),le&&(fe.y0=o(A.yaxis,fe.y0),fe.y1=o(A.yaxis,fe.y1)),re.x0=fe.x0,re.y0=fe.y0,re.x1=fe.x1,re.y1=fe.y1}else re.type="path",I&&P&&y(Z,I,P),re.path=c(Z),J=null;s(T);for(var ye=w.editHelpers,Ae=(ye||{}).modifyItem,pe=[],ge=0;ge<U.length;ge++){var we=T._fullLayout.shapes[ge];if(pe[ge]=we._input,z!==void 0&&ge===T._fullLayout._activeShapeIndex){var oe=re;switch(we.type){case"line":case"rect":case"circle":Ae("x0",oe.x0),Ae("x1",oe.x1),Ae("y0",oe.y0),Ae("y1",oe.y1);break;case"path":Ae("path",oe.path)}}}return z===void 0?(pe.push(re),pe):ye?ye.getUpdateObj():{}}}}},{"../../dragelement/helpers":385,"../../selections/helpers":454,".././handle_outline":468,"./constants":464,"./helpers":466}],468:[function(g,Q,X){Q.exports={clearOutlineControllers:function(m){var v=m._fullLayout._zoomlayer;v&&v.selectAll(".outline-controllers").remove()},clearOutline:function(m){var v=m._fullLayout._zoomlayer;v&&v.selectAll(".select-outline").remove(),m._fullLayout._outlining=!1}}},{}],469:[function(g,Q,X){var m=g("./constants"),v=g("../../lib"),k=g("../../plots/cartesian/axes");X.rangeToShapePosition=function(x){return x.type==="log"?x.r2d:function(e){return e}},X.shapePositionToRange=function(x){return x.type==="log"?x.d2r:function(e){return e}},X.decodeDate=function(x){return function(e){return e.replace&&(e=e.replace("_"," ")),x(e)}},X.encodeDate=function(x){return function(e){return x(e).replace(" ","_")}},X.extractPathCoords=function(x,e,t){var r=[];return x.match(m.segmentRE).forEach(function(l){var n=e[l.charAt(0)].drawn;if(n!==void 0){var d=l.substr(1).match(m.paramRE);if(d&&!(d.length<n)){var u=d[n],o=t?u:v.cleanNumber(u);r.push(o)}}}),r},X.getDataToPixel=function(x,e,t,r){var l,n=x._fullLayout._size;if(e)if(r==="domain")l=function(u){return e._length*(t?1-u:u)+e._offset};else{var d=X.shapePositionToRange(e);l=function(u){return e._offset+e.r2p(d(u,!0))},e.type==="date"&&(l=X.decodeDate(l))}else l=t?function(u){return n.t+n.h*(1-u)}:function(u){return n.l+n.w*u};return l},X.getPixelToData=function(x,e,t,r){var l,n=x._fullLayout._size;if(e)if(r==="domain")l=function(u){var o=(u-e._offset)/e._length;return t?1-o:o};else{var d=X.rangeToShapePosition(e);l=function(u){return d(e.p2r(u-e._offset))}}else l=t?function(u){return 1-(u-n.t)/n.h}:function(u){return(u-n.l)/n.w};return l},X.roundPositionForSharpStrokeRendering=function(x,e){var t=Math.round(e%2)===1,r=Math.round(x);return t?r+.5:r},X.makeShapesOptionsAndPlotinfo=function(x,e){var t=x._fullLayout.shapes[e]||{},r=x._fullLayout._plots[t.xref+t.yref];return r?r._hadPlotinfo=!0:(r={},t.xref&&t.xref!=="paper"&&(r.xaxis=x._fullLayout[t.xref+"axis"]),t.yref&&t.yref!=="paper"&&(r.yaxis=x._fullLayout[t.yref+"axis"])),r.xsizemode=t.xsizemode,r.ysizemode=t.ysizemode,r.xanchor=t.xanchor,r.yanchor=t.yanchor,{options:t,plotinfo:r}},X.makeSelectionsOptionsAndPlotinfo=function(x,e){var t=x._fullLayout.selections[e]||{},r=x._fullLayout._plots[t.xref+t.yref];return r?r._hadPlotinfo=!0:(r={},t.xref&&(r.xaxis=x._fullLayout[t.xref+"axis"]),t.yref&&(r.yaxis=x._fullLayout[t.yref+"axis"])),{options:t,plotinfo:r}},X.getPathString=function(x,e){var t,r,l,n,d,u,o,h,s=e.type,a=k.getRefType(e.xref),p=k.getRefType(e.yref),c=k.getFromId(x,e.xref),i=k.getFromId(x,e.yref),y=x._fullLayout._size;if(c?a==="domain"?r=function(P){return c._offset+c._length*P}:(t=X.shapePositionToRange(c),r=function(P){return c._offset+c.r2p(t(P,!0))}):r=function(P){return y.l+y.w*P},i?p==="domain"?n=function(P){return i._offset+i._length*(1-P)}:(l=X.shapePositionToRange(i),n=function(P){return i._offset+i.r2p(l(P,!0))}):n=function(P){return y.t+y.h*(1-P)},s==="path")return c&&c.type==="date"&&(r=X.decodeDate(r)),i&&i.type==="date"&&(n=X.decodeDate(n)),function(P,S,E){var z=P.path,D=P.xsizemode,U=P.ysizemode,H=P.xanchor,Y=P.yanchor;return z.replace(m.segmentRE,function(J){var W=0,Z=J.charAt(0),re=m.paramIsX[Z],V=m.paramIsY[Z],B=m.numParams[Z],j=J.substr(1).replace(m.paramRE,function(ee){return re[W]?ee=D==="pixel"?S(H)+Number(ee):S(ee):V[W]&&(ee=U==="pixel"?E(Y)-Number(ee):E(ee)),++W>B&&(ee="X"),ee});return W>B&&(j=j.replace(/[\s,]*X.*/,""),v.log("Ignoring extra params in segment "+J)),Z+j})}(e,r,n);if(e.xsizemode==="pixel"){var f=r(e.xanchor);d=f+e.x0,u=f+e.x1}else d=r(e.x0),u=r(e.x1);if(e.ysizemode==="pixel"){var w=n(e.yanchor);o=w-e.y0,h=w-e.y1}else o=n(e.y0),h=n(e.y1);if(s==="line")return"M"+d+","+o+"L"+u+","+h;if(s==="rect")return"M"+d+","+o+"H"+u+"V"+h+"H"+d+"Z";var b=(d+u)/2,_=(o+h)/2,T=Math.abs(b-d),L=Math.abs(_-o),A="A"+T+","+L,I=b+T+","+_;return"M"+I+A+" 0 1,1 "+(b+","+(_-L))+A+" 0 0,1 "+I+"Z"}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":459}],470:[function(g,Q,X){var m=g("./draw");Q.exports={moduleType:"component",name:"shapes",layoutAttributes:g("./attributes"),supplyLayoutDefaults:g("./defaults"),supplyDrawNewShapeDefaults:g("./draw_newshape/defaults"),includeBasePlot:g("../../plots/cartesian/include_components")("shapes"),calcAutorange:g("./calc_autorange"),draw:m.draw,drawOne:m.drawOne}},{"../../plots/cartesian/include_components":577,"./attributes":457,"./calc_autorange":458,"./defaults":460,"./draw":462,"./draw_newshape/defaults":465}],471:[function(g,Q,X){var m=g("../../plots/font_attributes"),v=g("../../plots/pad_attributes"),k=g("../../lib/extend").extendDeepAll,x=g("../../plot_api/edit_types").overrideAll,e=g("../../plots/animation_attributes"),t=g("../../plot_api/plot_template").templatedArray,r=g("./constants"),l=t("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});Q.exports=x(t("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:l,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:k(v({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:m({})},font:m({}),activebgcolor:{valType:"color",dflt:r.gripBgActiveColor},bgcolor:{valType:"color",dflt:r.railBgColor},bordercolor:{valType:"color",dflt:r.railBorderColor},borderwidth:{valType:"number",min:0,dflt:r.railBorderWidth},ticklen:{valType:"number",min:0,dflt:r.tickLength},tickcolor:{valType:"color",dflt:r.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:r.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/animation_attributes":560,"../../plots/font_attributes":594,"../../plots/pad_attributes":627,"./constants":472}],472:[function(g,Q,X){Q.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],473:[function(g,Q,X){var m=g("../../lib"),v=g("../../plots/array_container_defaults"),k=g("./attributes"),x=g("./constants").name,e=k.steps;function t(l,n,d){function u(p,c){return m.coerce(l,n,k,p,c)}for(var o=v(l,n,{name:"steps",handleItemDefaults:r}),h=0,s=0;s<o.length;s++)o[s].visible&&h++;if(h<2?n.visible=!1:u("visible")){n._stepCount=h;var a=n._visibleSteps=m.filterVisible(o);(o[u("active")]||{}).visible||(n.active=a[0]._index),u("x"),u("y"),m.noneOrAll(l,n,["x","y"]),u("xanchor"),u("yanchor"),u("len"),u("lenmode"),u("pad.t"),u("pad.r"),u("pad.b"),u("pad.l"),m.coerceFont(u,"font",d.font),u("currentvalue.visible")&&(u("currentvalue.xanchor"),u("currentvalue.prefix"),u("currentvalue.suffix"),u("currentvalue.offset"),m.coerceFont(u,"currentvalue.font",n.font)),u("transition.duration"),u("transition.easing"),u("bgcolor"),u("activebgcolor"),u("bordercolor"),u("borderwidth"),u("ticklen"),u("tickwidth"),u("tickcolor"),u("minorticklen")}}function r(l,n){function d(o,h){return m.coerce(l,n,e,o,h)}if(l.method==="skip"||Array.isArray(l.args)?d("visible"):n.visible=!1){d("method"),d("args");var u=d("label","step-"+n._index);d("value",u),d("execute")}}Q.exports=function(l,n){v(l,n,{name:x,handleItemDefaults:t})}},{"../../lib":515,"../../plots/array_container_defaults":561,"./attributes":471,"./constants":472}],474:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../plots/plots"),k=g("../color"),x=g("../drawing"),e=g("../../lib"),t=e.strTranslate,r=g("../../lib/svg_text_utils"),l=g("../../plot_api/plot_template").arrayEditor,n=g("./constants"),d=g("../../constants/alignment"),u=d.LINE_SPACING,o=d.FROM_TL,h=d.FROM_BR;function s(E){return n.autoMarginIdRoot+E._index}function a(E){return E._index}function p(E,z){var D=x.tester.selectAll("g."+n.labelGroupClass).data(z._visibleSteps);D.enter().append("g").classed(n.labelGroupClass,!0);var U=0,H=0;D.each(function(ee){var N=y(m.select(this),{step:ee},z).node();if(N){var $=x.bBox(N);H=Math.max(H,$.height),U=Math.max(U,$.width)}}),D.remove();var Y=z._dims={};Y.inputAreaWidth=Math.max(n.railWidth,n.gripHeight);var J=E._fullLayout._size;Y.lx=J.l+J.w*z.x,Y.ly=J.t+J.h*(1-z.y),z.lenmode==="fraction"?Y.outerLength=Math.round(J.w*z.len):Y.outerLength=z.len,Y.inputAreaStart=0,Y.inputAreaLength=Math.round(Y.outerLength-z.pad.l-z.pad.r);var W=(Y.inputAreaLength-2*n.stepInset)/(z._stepCount-1),Z=U+n.labelPadding;if(Y.labelStride=Math.max(1,Math.ceil(Z/W)),Y.labelHeight=H,Y.currentValueMaxWidth=0,Y.currentValueHeight=0,Y.currentValueTotalHeight=0,Y.currentValueMaxLines=1,z.currentvalue.visible){var re=x.tester.append("g");D.each(function(ee){var N=c(re,z,ee.label),$=N.node()&&x.bBox(N.node())||{width:0,height:0},K=r.lineCount(N);Y.currentValueMaxWidth=Math.max(Y.currentValueMaxWidth,Math.ceil($.width)),Y.currentValueHeight=Math.max(Y.currentValueHeight,Math.ceil($.height)),Y.currentValueMaxLines=Math.max(Y.currentValueMaxLines,K)}),Y.currentValueTotalHeight=Y.currentValueHeight+z.currentvalue.offset,re.remove()}Y.height=Y.currentValueTotalHeight+n.tickOffset+z.ticklen+n.labelOffset+Y.labelHeight+z.pad.t+z.pad.b;var V="left";e.isRightAnchor(z)&&(Y.lx-=Y.outerLength,V="right"),e.isCenterAnchor(z)&&(Y.lx-=Y.outerLength/2,V="center");var B="top";e.isBottomAnchor(z)&&(Y.ly-=Y.height,B="bottom"),e.isMiddleAnchor(z)&&(Y.ly-=Y.height/2,B="middle"),Y.outerLength=Math.ceil(Y.outerLength),Y.height=Math.ceil(Y.height),Y.lx=Math.round(Y.lx),Y.ly=Math.round(Y.ly);var j={y:z.y,b:Y.height*h[B],t:Y.height*o[B]};z.lenmode==="fraction"?(j.l=0,j.xl=z.x-z.len*o[V],j.r=0,j.xr=z.x+z.len*h[V]):(j.x=z.x,j.l=Y.outerLength*o[V],j.r=Y.outerLength*h[V]),v.autoMargin(E,s(z),j)}function c(E,z,D){if(z.currentvalue.visible){var U,H,Y=z._dims;switch(z.currentvalue.xanchor){case"right":U=Y.inputAreaLength-n.currentValueInset-Y.currentValueMaxWidth,H="left";break;case"center":U=.5*Y.inputAreaLength,H="middle";break;default:U=n.currentValueInset,H="left"}var J=e.ensureSingle(E,"text",n.labelClass,function(j){j.attr({"text-anchor":H,"data-notex":1})}),W=z.currentvalue.prefix?z.currentvalue.prefix:"";if(typeof D=="string")W+=D;else{var Z=z.steps[z.active].label,re=z._gd._fullLayout._meta;re&&(Z=e.templateString(Z,re)),W+=Z}z.currentvalue.suffix&&(W+=z.currentvalue.suffix),J.call(x.font,z.currentvalue.font).text(W).call(r.convertToTspans,z._gd);var V=r.lineCount(J),B=(Y.currentValueMaxLines+1-V)*z.currentvalue.font.size*u;return r.positionText(J,U,B),J}}function i(E,z,D){e.ensureSingle(E,"rect",n.gripRectClass,function(U){U.call(_,z,E,D).style("pointer-events","all")}).attr({width:n.gripWidth,height:n.gripHeight,rx:n.gripRadius,ry:n.gripRadius}).call(k.stroke,D.bordercolor).call(k.fill,D.bgcolor).style("stroke-width",D.borderwidth+"px")}function y(E,z,D){var U=e.ensureSingle(E,"text",n.labelClass,function(J){J.attr({"text-anchor":"middle","data-notex":1})}),H=z.step.label,Y=D._gd._fullLayout._meta;return Y&&(H=e.templateString(H,Y)),U.call(x.font,D.font).text(H).call(r.convertToTspans,D._gd),U}function f(E,z){var D=e.ensureSingle(E,"g",n.labelsClass),U=z._dims,H=D.selectAll("g."+n.labelGroupClass).data(U.labelSteps);H.enter().append("g").classed(n.labelGroupClass,!0),H.exit().remove(),H.each(function(Y){var J=m.select(this);J.call(y,Y,z),x.setTranslate(J,A(z,Y.fraction),n.tickOffset+z.ticklen+z.font.size*u+n.labelOffset+U.currentValueTotalHeight)})}function w(E,z,D,U,H){var Y=Math.round(U*(D._stepCount-1)),J=D._visibleSteps[Y]._index;J!==D.active&&b(E,z,D,J,!0,H)}function b(E,z,D,U,H,Y){var J=D.active;D.active=U,l(E.layout,n.name,D).applyUpdate("active",U);var W=D.steps[D.active];z.call(L,D,Y),z.call(c,D),E.emit("plotly_sliderchange",{slider:D,step:D.steps[D.active],interaction:H,previousActive:J}),W&&W.method&&H&&(z._nextMethod?(z._nextMethod.step=W,z._nextMethod.doCallback=H,z._nextMethod.doTransition=Y):(z._nextMethod={step:W,doCallback:H,doTransition:Y},z._nextMethodRaf=window.requestAnimationFrame(function(){var Z=z._nextMethod.step;Z.method&&(Z.execute&&v.executeAPICommand(E,Z.method,Z.args),z._nextMethod=null,z._nextMethodRaf=null)})))}function _(E,z,D){var U=D.node(),H=m.select(z);function Y(){return D.data()[0]}function J(){var W=Y();z.emit("plotly_sliderstart",{slider:W});var Z=D.select("."+n.gripRectClass);m.event.stopPropagation(),m.event.preventDefault(),Z.call(k.fill,W.activebgcolor);var re=I(W,m.mouse(U)[0]);function V(){var j=Y(),ee=I(j,m.mouse(U)[0]);w(z,D,j,ee,!1)}function B(){var j=Y();j._dragging=!1,Z.call(k.fill,j.bgcolor),H.on("mouseup",null),H.on("mousemove",null),H.on("touchend",null),H.on("touchmove",null),z.emit("plotly_sliderend",{slider:j,step:j.steps[j.active]})}w(z,D,W,re,!0),W._dragging=!0,H.on("mousemove",V),H.on("touchmove",V),H.on("mouseup",B),H.on("touchend",B)}E.on("mousedown",J),E.on("touchstart",J)}function T(E,z){var D=E.selectAll("rect."+n.tickRectClass).data(z._visibleSteps),U=z._dims;D.enter().append("rect").classed(n.tickRectClass,!0),D.exit().remove(),D.attr({width:z.tickwidth+"px","shape-rendering":"crispEdges"}),D.each(function(H,Y){var J=Y%U.labelStride==0,W=m.select(this);W.attr({height:J?z.ticklen:z.minorticklen}).call(k.fill,z.tickcolor),x.setTranslate(W,A(z,Y/(z._stepCount-1))-.5*z.tickwidth,(J?n.tickOffset:n.minorTickOffset)+U.currentValueTotalHeight)})}function L(E,z,D){for(var U=E.select("rect."+n.gripRectClass),H=0,Y=0;Y<z._stepCount;Y++)if(z._visibleSteps[Y]._index===z.active){H=Y;break}var J=A(z,H/(z._stepCount-1));if(!z._invokingCommand){var W=U;D&&z.transition.duration>0&&(W=W.transition().duration(z.transition.duration).ease(z.transition.easing)),W.attr("transform",t(J-.5*n.gripWidth,z._dims.currentValueTotalHeight))}}function A(E,z){var D=E._dims;return D.inputAreaStart+n.stepInset+(D.inputAreaLength-2*n.stepInset)*Math.min(1,Math.max(0,z))}function I(E,z){var D=E._dims;return Math.min(1,Math.max(0,(z-n.stepInset-D.inputAreaStart)/(D.inputAreaLength-2*n.stepInset-2*D.inputAreaStart)))}function P(E,z,D){var U=D._dims,H=e.ensureSingle(E,"rect",n.railTouchRectClass,function(Y){Y.call(_,z,E,D).style("pointer-events","all")});H.attr({width:U.inputAreaLength,height:Math.max(U.inputAreaWidth,n.tickOffset+D.ticklen+U.labelHeight)}).call(k.fill,D.bgcolor).attr("opacity",0),x.setTranslate(H,0,U.currentValueTotalHeight)}function S(E,z){var D=z._dims,U=D.inputAreaLength-2*n.railInset,H=e.ensureSingle(E,"rect",n.railRectClass);H.attr({width:U,height:n.railWidth,rx:n.railRadius,ry:n.railRadius,"shape-rendering":"crispEdges"}).call(k.stroke,z.bordercolor).call(k.fill,z.bgcolor).style("stroke-width",z.borderwidth+"px"),x.setTranslate(H,n.railInset,.5*(D.inputAreaWidth-n.railWidth)+D.currentValueTotalHeight)}Q.exports=function(E){var z=E._fullLayout,D=function(Z,re){for(var V=Z[n.name],B=[],j=0;j<V.length;j++){var ee=V[j];ee.visible&&(ee._gd=re,B.push(ee))}return B}(z,E),U=z._infolayer.selectAll("g."+n.containerClassName).data(D.length>0?[0]:[]);function H(Z){Z._commandObserver&&(Z._commandObserver.remove(),delete Z._commandObserver),v.autoMargin(E,s(Z))}if(U.enter().append("g").classed(n.containerClassName,!0).style("cursor","ew-resize"),U.exit().each(function(){m.select(this).selectAll("g."+n.groupClassName).each(H)}).remove(),D.length!==0){var Y=U.selectAll("g."+n.groupClassName).data(D,a);Y.enter().append("g").classed(n.groupClassName,!0),Y.exit().each(H).remove();for(var J=0;J<D.length;J++){var W=D[J];p(E,W)}Y.each(function(Z){var re=m.select(this);(function(V){var B=V._dims;B.labelSteps=[];for(var j=V._stepCount,ee=0;ee<j;ee+=B.labelStride)B.labelSteps.push({fraction:ee/(j-1),step:V._visibleSteps[ee]})})(Z),v.manageCommandObserver(E,Z,Z._visibleSteps,function(V){var B=re.data()[0];B.active!==V.index&&(B._dragging||b(E,re,B,V.index,!1,!0))}),function(V,B,j){(j.steps[j.active]||{}).visible||(j.active=j._visibleSteps[0]._index),B.call(c,j).call(S,j).call(f,j).call(T,j).call(P,V,j).call(i,V,j);var ee=j._dims;x.setTranslate(B,ee.lx+j.pad.l,ee.ly+j.pad.t),B.call(L,j,!1),B.call(c,j)}(E,m.select(this),Z)})}}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/plots":628,"../color":367,"../drawing":389,"./constants":472,"@plotly/d3":58}],475:[function(g,Q,X){var m=g("./constants");Q.exports={moduleType:"component",name:m.name,layoutAttributes:g("./attributes"),supplyLayoutDefaults:g("./defaults"),draw:g("./draw")}},{"./attributes":471,"./constants":472,"./defaults":473,"./draw":474}],476:[function(g,Q,X){var m=g("@plotly/d3"),v=g("fast-isnumeric"),k=g("../../plots/plots"),x=g("../../registry"),e=g("../../lib"),t=e.strTranslate,r=g("../drawing"),l=g("../color"),n=g("../../lib/svg_text_utils"),d=g("../../constants/interactions"),u=g("../../constants/alignment").OPPOSITE_SIDE,o=/ [XY][0-9]* /;Q.exports={draw:function(h,s,a){var p,c=a.propContainer,i=a.propName,y=a.placeholder,f=a.traceIndex,w=a.avoid||{},b=a.attributes,_=a.transform,T=a.containerGroup,L=h._fullLayout,A=1,I=!1,P=c.title,S=(P&&P.text?P.text:"").trim(),E=P&&P.font?P.font:{},z=E.family,D=E.size,U=E.color;i==="title.text"?p="titleText":i.indexOf("axis")!==-1?p="axisTitleText":i.indexOf(!0)&&(p="colorbarTitleText");var H=h._context.edits[p];S===""?A=0:S.replace(o," % ")===y.replace(o," % ")&&(A=.2,I=!0,H||(S="")),a._meta?S=e.templateString(S,a._meta):L._meta&&(S=e.templateString(S,L._meta));var Y,J=S||H;T||(T=e.ensureSingle(L._infolayer,"g","g-"+s),Y=L._hColorbarMoveTitle);var W=T.selectAll("text").data(J?[0]:[]);if(W.enter().append("text"),W.text(S).attr("class",s),W.exit().remove(),!J)return T;function Z(B){e.syncOrAsync([re,V],B)}function re(B){var j;return!_&&Y&&(_={}),_?(j="",_.rotate&&(j+="rotate("+[_.rotate,b.x,b.y]+")"),(_.offset||Y)&&(j+=t(0,(_.offset||0)-(Y||0)))):j=null,B.attr("transform",j),B.style({"font-family":z,"font-size":m.round(D,2)+"px",fill:l.rgb(U),opacity:A*l.opacity(U),"font-weight":k.fontWeight}).attr(b).call(n.convertToTspans,h),k.previousPromises(h)}function V(B){var j=m.select(B.node().parentNode);if(w&&w.selection&&w.side&&S){j.attr("transform",null);var ee=u[w.side],N=w.side==="left"||w.side==="top"?-1:1,$=v(w.pad)?w.pad:2,K=r.bBox(j.node()),te={left:0,top:0,right:L.width,bottom:L.height},ie=w.maxShift||N*(te[w.side]-K[w.side]),le=0;if(ie<0)le=ie;else{var se=w.offsetLeft||0,ve=w.offsetTop||0;K.left-=se,K.right-=se,K.top-=ve,K.bottom-=ve,w.selection.each(function(){var ye=r.bBox(this);e.bBoxIntersect(K,ye,$)&&(le=Math.max(le,N*(ye[w.side]-K[ee])+$))}),le=Math.min(ie,le)}if(le>0||ie<0){var fe={left:[-le,0],right:[le,0],top:[0,-le],bottom:[0,le]}[w.side];j.attr("transform",t(fe[0],fe[1]))}}}return W.call(Z),H&&(S?W.on(".opacity",null):(A=0,I=!0,W.text(y).on("mouseover.opacity",function(){m.select(this).transition().duration(d.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){m.select(this).transition().duration(d.HIDE_PLACEHOLDER).style("opacity",0)})),W.call(n.makeEditable,{gd:h}).on("edit",function(B){f!==void 0?x.call("_guiRestyle",h,i,B,f):x.call("_guiRelayout",h,i,B)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(Z)}).on("input",function(B){this.text(B||" ").call(n.positionText,b.x,b.y)})),W.classed("js-placeholder",I),T}}},{"../../constants/alignment":483,"../../constants/interactions":490,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"../color":367,"../drawing":389,"@plotly/d3":58,"fast-isnumeric":190}],477:[function(g,Q,X){var m=g("../../plots/font_attributes"),v=g("../color/attributes"),k=g("../../lib/extend").extendFlat,x=g("../../plot_api/edit_types").overrideAll,e=g("../../plots/pad_attributes"),t=g("../../plot_api/plot_template").templatedArray,r=t("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});Q.exports=x(t("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:r,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:k(e({editType:"arraydraw"}),{}),font:m({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:v.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/font_attributes":594,"../../plots/pad_attributes":627,"../color/attributes":366}],478:[function(g,Q,X){Q.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},{}],479:[function(g,Q,X){var m=g("../../lib"),v=g("../../plots/array_container_defaults"),k=g("./attributes"),x=g("./constants").name,e=k.buttons;function t(l,n,d){function u(o,h){return m.coerce(l,n,k,o,h)}u("visible",v(l,n,{name:"buttons",handleItemDefaults:r}).length>0)&&(u("active"),u("direction"),u("type"),u("showactive"),u("x"),u("y"),m.noneOrAll(l,n,["x","y"]),u("xanchor"),u("yanchor"),u("pad.t"),u("pad.r"),u("pad.b"),u("pad.l"),m.coerceFont(u,"font",d.font),u("bgcolor",d.paper_bgcolor),u("bordercolor"),u("borderwidth"))}function r(l,n){function d(u,o){return m.coerce(l,n,e,u,o)}d("visible",l.method==="skip"||Array.isArray(l.args))&&(d("method"),d("args"),d("args2"),d("label"),d("execute"))}Q.exports=function(l,n){v(l,n,{name:x,handleItemDefaults:t})}},{"../../lib":515,"../../plots/array_container_defaults":561,"./attributes":477,"./constants":478}],480:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../plots/plots"),k=g("../color"),x=g("../drawing"),e=g("../../lib"),t=g("../../lib/svg_text_utils"),r=g("../../plot_api/plot_template").arrayEditor,l=g("../../constants/alignment").LINE_SPACING,n=g("./constants"),d=g("./scrollbox");function u(A){return A._index}function o(A,I){return+A.attr(n.menuIndexAttrName)===I._index}function h(A,I,P,S,E,z,D,U){I.active=D,r(A.layout,n.name,I).applyUpdate("active",D),I.type==="buttons"?a(A,S,null,null,I):I.type==="dropdown"&&(E.attr(n.menuIndexAttrName,"-1"),s(A,S,E,z,I),U||a(A,S,E,z,I))}function s(A,I,P,S,E){var z=e.ensureSingle(I,"g",n.headerClassName,function(W){W.style("pointer-events","all")}),D=E._dims,U=E.active,H=E.buttons[U]||n.blankHeaderOpts,Y={y:E.pad.t,yPad:0,x:E.pad.l,xPad:0,index:0},J={width:D.headerWidth,height:D.headerHeight};z.call(p,E,H,A).call(T,E,Y,J),e.ensureSingle(I,"text",n.headerArrowClassName,function(W){W.attr("text-anchor","end").call(x.font,E.font).text(n.arrowSymbol[E.direction])}).attr({x:D.headerWidth-n.arrowOffsetX+E.pad.l,y:D.headerHeight/2+n.textOffsetY+E.pad.t}),z.on("click",function(){P.call(L,String(o(P,E)?-1:E._index)),a(A,I,P,S,E)}),z.on("mouseover",function(){z.call(f)}),z.on("mouseout",function(){z.call(w,E)}),x.setTranslate(I,D.lx,D.ly)}function a(A,I,P,S,E){P||(P=I).attr("pointer-events","all");var z=function(j){return+j.attr(n.menuIndexAttrName)==-1}(P)&&E.type!=="buttons"?[]:E.buttons,D=E.type==="dropdown"?n.dropdownButtonClassName:n.buttonClassName,U=P.selectAll("g."+D).data(e.filterVisible(z)),H=U.enter().append("g").classed(D,!0),Y=U.exit();E.type==="dropdown"?(H.attr("opacity","0").transition().attr("opacity","1"),Y.transition().attr("opacity","0").remove()):Y.remove();var J=0,W=0,Z=E._dims,re=["up","down"].indexOf(E.direction)!==-1;E.type==="dropdown"&&(re?W=Z.headerHeight+n.gapButtonHeader:J=Z.headerWidth+n.gapButtonHeader),E.type==="dropdown"&&E.direction==="up"&&(W=-n.gapButtonHeader+n.gapButton-Z.openHeight),E.type==="dropdown"&&E.direction==="left"&&(J=-n.gapButtonHeader+n.gapButton-Z.openWidth);var V={x:Z.lx+J+E.pad.l,y:Z.ly+W+E.pad.t,yPad:n.gapButton,xPad:n.gapButton,index:0},B={l:V.x+E.borderwidth,t:V.y+E.borderwidth};U.each(function(j,ee){var N=m.select(this);N.call(p,E,j,A).call(T,E,V),N.on("click",function(){m.event.defaultPrevented||(j.execute&&(j.args2&&E.active===ee?(h(A,E,0,I,P,S,-1),v.executeAPICommand(A,j.method,j.args2)):(h(A,E,0,I,P,S,ee),v.executeAPICommand(A,j.method,j.args))),A.emit("plotly_buttonclicked",{menu:E,button:j,active:E.active}))}),N.on("mouseover",function(){N.call(f)}),N.on("mouseout",function(){N.call(w,E),U.call(y,E)})}),U.call(y,E),re?(B.w=Math.max(Z.openWidth,Z.headerWidth),B.h=V.y-B.t):(B.w=V.x-B.l,B.h=Math.max(Z.openHeight,Z.headerHeight)),B.direction=E.direction,S&&(U.size()?function(j,ee,N,$,K,te){var ie,le,se,ve=K.direction,fe=ve==="up"||ve==="down",ye=K._dims,Ae=K.active;if(fe)for(le=0,se=0;se<Ae;se++)le+=ye.heights[se]+n.gapButton;else for(ie=0,se=0;se<Ae;se++)ie+=ye.widths[se]+n.gapButton;$.enable(te,ie,le),$.hbar&&$.hbar.attr("opacity","0").transition().attr("opacity","1"),$.vbar&&$.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,S,E,B):function(j){var ee=!!j.hbar,N=!!j.vbar;ee&&j.hbar.transition().attr("opacity","0").each("end",function(){ee=!1,N||j.disable()}),N&&j.vbar.transition().attr("opacity","0").each("end",function(){N=!1,ee||j.disable()})}(S))}function p(A,I,P,S){A.call(c,I).call(i,I,P,S)}function c(A,I){e.ensureSingle(A,"rect",n.itemRectClassName,function(P){P.attr({rx:n.rx,ry:n.ry,"shape-rendering":"crispEdges"})}).call(k.stroke,I.bordercolor).call(k.fill,I.bgcolor).style("stroke-width",I.borderwidth+"px")}function i(A,I,P,S){var E=e.ensureSingle(A,"text",n.itemTextClassName,function(U){U.attr({"text-anchor":"start","data-notex":1})}),z=P.label,D=S._fullLayout._meta;D&&(z=e.templateString(z,D)),E.call(x.font,I.font).text(z).call(t.convertToTspans,S)}function y(A,I){var P=I.active;A.each(function(S,E){var z=m.select(this);E===P&&I.showactive&&z.select("rect."+n.itemRectClassName).call(k.fill,n.activeColor)})}function f(A){A.select("rect."+n.itemRectClassName).call(k.fill,n.hoverColor)}function w(A,I){A.select("rect."+n.itemRectClassName).call(k.fill,I.bgcolor)}function b(A,I){var P=I._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},S=x.tester.selectAll("g."+n.dropdownButtonClassName).data(e.filterVisible(I.buttons));S.enter().append("g").classed(n.dropdownButtonClassName,!0);var E=["up","down"].indexOf(I.direction)!==-1;S.each(function(J,W){var Z=m.select(this);Z.call(p,I,J,A);var re=Z.select("."+n.itemTextClassName),V=re.node()&&x.bBox(re.node()).width,B=Math.max(V+n.textPadX,n.minWidth),j=I.font.size*l,ee=t.lineCount(re),N=Math.max(j*ee,n.minHeight)+n.textOffsetY;N=Math.ceil(N),B=Math.ceil(B),P.widths[W]=B,P.heights[W]=N,P.height1=Math.max(P.height1,N),P.width1=Math.max(P.width1,B),E?(P.totalWidth=Math.max(P.totalWidth,B),P.openWidth=P.totalWidth,P.totalHeight+=N+n.gapButton,P.openHeight+=N+n.gapButton):(P.totalWidth+=B+n.gapButton,P.openWidth+=B+n.gapButton,P.totalHeight=Math.max(P.totalHeight,N),P.openHeight=P.totalHeight)}),E?P.totalHeight-=n.gapButton:P.totalWidth-=n.gapButton,P.headerWidth=P.width1+n.arrowPadX,P.headerHeight=P.height1,I.type==="dropdown"&&(E?(P.width1+=n.arrowPadX,P.totalHeight=P.height1):P.totalWidth=P.width1,P.totalWidth+=n.arrowPadX),S.remove();var z=P.totalWidth+I.pad.l+I.pad.r,D=P.totalHeight+I.pad.t+I.pad.b,U=A._fullLayout._size;P.lx=U.l+U.w*I.x,P.ly=U.t+U.h*(1-I.y);var H="left";e.isRightAnchor(I)&&(P.lx-=z,H="right"),e.isCenterAnchor(I)&&(P.lx-=z/2,H="center");var Y="top";e.isBottomAnchor(I)&&(P.ly-=D,Y="bottom"),e.isMiddleAnchor(I)&&(P.ly-=D/2,Y="middle"),P.totalWidth=Math.ceil(P.totalWidth),P.totalHeight=Math.ceil(P.totalHeight),P.lx=Math.round(P.lx),P.ly=Math.round(P.ly),v.autoMargin(A,_(I),{x:I.x,y:I.y,l:z*({right:1,center:.5}[H]||0),r:z*({left:1,center:.5}[H]||0),b:D*({top:1,middle:.5}[Y]||0),t:D*({bottom:1,middle:.5}[Y]||0)})}function _(A){return n.autoMarginIdRoot+A._index}function T(A,I,P,S){S=S||{};var E=A.select("."+n.itemRectClassName),z=A.select("."+n.itemTextClassName),D=I.borderwidth,U=P.index,H=I._dims;x.setTranslate(A,D+P.x,D+P.y);var Y=["up","down"].indexOf(I.direction)!==-1,J=S.height||(Y?H.heights[U]:H.height1);E.attr({x:0,y:0,width:S.width||(Y?H.width1:H.widths[U]),height:J});var W=I.font.size*l,Z=(t.lineCount(z)-1)*W/2;t.positionText(z,n.textOffsetX,J/2-Z+n.textOffsetY),Y?P.y+=H.heights[U]+P.yPad:P.x+=H.widths[U]+P.xPad,P.index++}function L(A,I){A.attr(n.menuIndexAttrName,I||"-1").selectAll("g."+n.dropdownButtonClassName).remove()}Q.exports=function(A){var I=A._fullLayout,P=e.filterVisible(I[n.name]);function S(W){v.autoMargin(A,_(W))}var E=I._menulayer.selectAll("g."+n.containerClassName).data(P.length>0?[0]:[]);if(E.enter().append("g").classed(n.containerClassName,!0).style("cursor","pointer"),E.exit().each(function(){m.select(this).selectAll("g."+n.headerGroupClassName).each(S)}).remove(),P.length!==0){var z=E.selectAll("g."+n.headerGroupClassName).data(P,u);z.enter().append("g").classed(n.headerGroupClassName,!0);for(var D=e.ensureSingle(E,"g",n.dropdownButtonGroupClassName,function(W){W.style("pointer-events","all")}),U=0;U<P.length;U++){var H=P[U];b(A,H)}var Y="updatemenus"+I._uid,J=new d(A,D,Y);z.enter().size()&&(D.node().parentNode.appendChild(D.node()),D.call(L)),z.exit().each(function(W){D.call(L),S(W)}).remove(),z.each(function(W){var Z=m.select(this),re=W.type==="dropdown"?D:null;v.manageCommandObserver(A,W,W.buttons,function(V){h(A,W,W.buttons[V.index],Z,re,J,V.index,!0)}),W.type==="dropdown"?(s(A,Z,D,J,W),o(D,W)&&a(A,Z,D,J,W)):a(A,Z,null,null,W)})}}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/plots":628,"../color":367,"../drawing":389,"./constants":478,"./scrollbox":482,"@plotly/d3":58}],481:[function(g,Q,X){arguments[4][475][0].apply(X,arguments)},{"./attributes":477,"./constants":478,"./defaults":479,"./draw":480,dup:475}],482:[function(g,Q,X){Q.exports=e;var m=g("@plotly/d3"),v=g("../color"),k=g("../drawing"),x=g("../../lib");function e(t,r,l){this.gd=t,this.container=r,this.id=l,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}e.barWidth=2,e.barLength=20,e.barRadius=2,e.barPad=1,e.barColor="#808BA4",e.prototype.enable=function(t,r,l){var n=this.gd._fullLayout,d=n.width,u=n.height;this.position=t;var o,h,s,a,p=this.position.l,c=this.position.w,i=this.position.t,y=this.position.h,f=this.position.direction,w=f==="down",b=f==="left",_=f==="up",T=c,L=y;w||b||f==="right"||_||(this.position.direction="down",w=!0),w||_?(h=(o=p)+T,w?(s=i,L=(a=Math.min(s+L,u))-s):L=(a=i+L)-(s=Math.max(a-L,0))):(a=(s=i)+L,b?T=(h=p+T)-(o=Math.max(h-T,0)):(o=p,T=(h=Math.min(o+T,d))-o)),this._box={l:o,t:s,w:T,h:L};var A=c>T,I=e.barLength+2*e.barPad,P=e.barWidth+2*e.barPad,S=p,E=i+y;E+P>u&&(E=u-P);var z=this.container.selectAll("rect.scrollbar-horizontal").data(A?[0]:[]);z.exit().on(".drag",null).remove(),z.enter().append("rect").classed("scrollbar-horizontal",!0).call(v.fill,e.barColor),A?(this.hbar=z.attr({rx:e.barRadius,ry:e.barRadius,x:S,y:E,width:I,height:P}),this._hbarXMin=S+I/2,this._hbarTranslateMax=T-I):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var D=y>L,U=e.barWidth+2*e.barPad,H=e.barLength+2*e.barPad,Y=p+c,J=i;Y+U>d&&(Y=d-U);var W=this.container.selectAll("rect.scrollbar-vertical").data(D?[0]:[]);W.exit().on(".drag",null).remove(),W.enter().append("rect").classed("scrollbar-vertical",!0).call(v.fill,e.barColor),D?(this.vbar=W.attr({rx:e.barRadius,ry:e.barRadius,x:Y,y:J,width:U,height:H}),this._vbarYMin=J+H/2,this._vbarTranslateMax=L-H):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var Z=this.id,re=o-.5,V=D?h+U+.5:h+.5,B=s-.5,j=A?a+P+.5:a+.5,ee=n._topdefs.selectAll("#"+Z).data(A||D?[0]:[]);if(ee.exit().remove(),ee.enter().append("clipPath").attr("id",Z).append("rect"),A||D?(this._clipRect=ee.select("rect").attr({x:Math.floor(re),y:Math.floor(B),width:Math.ceil(V)-Math.floor(re),height:Math.ceil(j)-Math.floor(B)}),this.container.call(k.setClipUrl,Z,this.gd),this.bg.attr({x:p,y:i,width:c,height:y})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(k.setClipUrl,null),delete this._clipRect),A||D){var N=m.behavior.drag().on("dragstart",function(){m.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(N);var $=m.behavior.drag().on("dragstart",function(){m.event.sourceEvent.preventDefault(),m.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));A&&this.hbar.on(".drag",null).call($),D&&this.vbar.on(".drag",null).call($)}this.setTranslate(r,l)},e.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(k.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},e.prototype._onBoxDrag=function(){var t=this.translateX,r=this.translateY;this.hbar&&(t-=m.event.dx),this.vbar&&(r-=m.event.dy),this.setTranslate(t,r)},e.prototype._onBoxWheel=function(){var t=this.translateX,r=this.translateY;this.hbar&&(t+=m.event.deltaY),this.vbar&&(r+=m.event.deltaY),this.setTranslate(t,r)},e.prototype._onBarDrag=function(){var t=this.translateX,r=this.translateY;if(this.hbar){var l=t+this._hbarXMin,n=l+this._hbarTranslateMax;t=(x.constrain(m.event.x,l,n)-l)/(n-l)*(this.position.w-this._box.w)}if(this.vbar){var d=r+this._vbarYMin,u=d+this._vbarTranslateMax;r=(x.constrain(m.event.y,d,u)-d)/(u-d)*(this.position.h-this._box.h)}this.setTranslate(t,r)},e.prototype.setTranslate=function(t,r){var l=this.position.w-this._box.w,n=this.position.h-this._box.h;if(t=x.constrain(t||0,0,l),r=x.constrain(r||0,0,n),this.translateX=t,this.translateY=r,this.container.call(k.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-r),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+r-.5)}),this.hbar){var d=t/l;this.hbar.call(k.setTranslate,t+d*this._hbarTranslateMax,r)}if(this.vbar){var u=r/n;this.vbar.call(k.setTranslate,t,r+u*this._vbarTranslateMax)}}},{"../../lib":515,"../color":367,"../drawing":389,"@plotly/d3":58}],483:[function(g,Q,X){Q.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],484:[function(g,Q,X){Q.exports={axisRefDescription:function(m,v,k){return["If set to a",m,"axis id (e.g. *"+m+"* or","*"+m+"2*), the `"+m+"` position refers to a",m,"coordinate. If set to *paper*, the `"+m+"`","position refers to the distance from the",v,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",v,"("+k+"). If set to a",m,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",v,"of the domain of that axis: e.g.,","*"+m+"2 domain* refers to the domain of the second",m," axis and a",m,"position of 0.5 refers to the","point between the",v,"and the",k,"of the domain of the","second",m,"axis."].join(" ")}}},{}],485:[function(g,Q,X){Q.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}},{}],486:[function(g,Q,X){Q.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],487:[function(g,Q,X){Q.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],488:[function(g,Q,X){Q.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],489:[function(g,Q,X){Q.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}},{}],490:[function(g,Q,X){Q.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],491:[function(g,Q,X){Q.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],492:[function(g,Q,X){X.xmlns="http://www.w3.org/2000/xmlns/",X.svg="http://www.w3.org/2000/svg",X.xlink="http://www.w3.org/1999/xlink",X.svgAttrs={xmlns:X.svg,"xmlns:xlink":X.xlink}},{}],493:[function(g,Q,X){X.version=g("./version").version,g("native-promise-only"),g("../build/plotcss");for(var m=g("./registry"),v=X.register=m.register,k=g("./plot_api"),x=Object.keys(k),e=0;e<x.length;e++){var t=x[e];t.charAt(0)!=="_"&&(X[t]=k[t]),v({moduleType:"apiMethod",name:t,fn:k[t]})}v(g("./traces/scatter")),v([g("./components/legend"),g("./components/fx"),g("./components/annotations"),g("./components/annotations3d"),g("./components/selections"),g("./components/shapes"),g("./components/images"),g("./components/updatemenus"),g("./components/sliders"),g("./components/rangeslider"),g("./components/rangeselector"),g("./components/grid"),g("./components/errorbars"),g("./components/colorscale"),g("./components/colorbar"),g("./components/modebar")]),v([g("./locale-en"),g("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(v(window.PlotlyLocales),delete window.PlotlyLocales),X.Icons=g("./fonts/ploticon");var r=g("./components/fx"),l=g("./plots/plots");X.Plots={resize:l.resize,graphJson:l.graphJson,sendDataToCloud:l.sendDataToCloud},X.Fx={hover:r.hover,unhover:r.unhover,loneHover:r.loneHover,loneUnhover:r.loneUnhover},X.Snapshot=g("./snapshot"),X.PlotSchema=g("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":358,"./components/annotations3d":363,"./components/colorbar":373,"./components/colorscale":379,"./components/errorbars":395,"./components/fx":407,"./components/grid":411,"./components/images":416,"./components/legend":424,"./components/modebar":430,"./components/rangeselector":438,"./components/rangeslider":445,"./components/selections":455,"./components/shapes":470,"./components/sliders":475,"./components/updatemenus":481,"./fonts/ploticon":494,"./locale-en":546,"./locale-en-us":545,"./plot_api":550,"./plot_api/plot_schema":554,"./plots/plots":628,"./registry":647,"./snapshot":652,"./traces/scatter":948,"./version":1132,"native-promise-only":245}],494:[function(g,Q,X){Q.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},{}],495:[function(g,Q,X){X.isLeftAnchor=function(m){return m.xanchor==="left"||m.xanchor==="auto"&&m.x<=1/3},X.isCenterAnchor=function(m){return m.xanchor==="center"||m.xanchor==="auto"&&m.x>1/3&&m.x<2/3},X.isRightAnchor=function(m){return m.xanchor==="right"||m.xanchor==="auto"&&m.x>=2/3},X.isTopAnchor=function(m){return m.yanchor==="top"||m.yanchor==="auto"&&m.y>=2/3},X.isMiddleAnchor=function(m){return m.yanchor==="middle"||m.yanchor==="auto"&&m.y>1/3&&m.y<2/3},X.isBottomAnchor=function(m){return m.yanchor==="bottom"||m.yanchor==="auto"&&m.y<=1/3}},{}],496:[function(g,Q,X){var m=g("./mod"),v=m.mod,k=m.modHalf,x=Math.PI,e=2*x;function t(d){return Math.abs(d[1]-d[0])>e-1e-14}function r(d,u){return k(u-d,e)}function l(d,u){if(t(u))return!0;var o,h;u[0]<u[1]?(o=u[0],h=u[1]):(o=u[1],h=u[0]),(o=v(o,e))>(h=v(h,e))&&(h+=e);var s=v(d,e),a=s+e;return s>=o&&s<=h||a>=o&&a<=h}function n(d,u,o,h,s,a,p){s=s||0,a=a||0;var c,i,y,f,w,b=t([o,h]);function _(I,P){return[I*Math.cos(P)+s,a-I*Math.sin(P)]}b?(c=0,i=x,y=e):o<h?(c=o,y=h):(c=h,y=o),d<u?(f=d,w=u):(f=u,w=d);var T,L=Math.abs(y-c)<=x?0:1;function A(I,P,S){return"A"+[I,I]+" "+[0,L,S]+" "+_(I,P)}return b?T=f===null?"M"+_(w,c)+A(w,i,0)+A(w,y,0)+"Z":"M"+_(f,c)+A(f,i,0)+A(f,y,0)+"ZM"+_(w,c)+A(w,i,1)+A(w,y,1)+"Z":f===null?(T="M"+_(w,c)+A(w,y,0),p&&(T+="L0,0Z")):T="M"+_(f,c)+"L"+_(w,c)+A(w,y,0)+"L"+_(f,y)+A(f,c,1)+"Z",T}Q.exports={deg2rad:function(d){return d/180*x},rad2deg:function(d){return d/x*180},angleDelta:r,angleDist:function(d,u){return Math.abs(r(d,u))},isFullCircle:t,isAngleInsideSector:l,isPtInsideSector:function(d,u,o,h){return!!l(u,h)&&(o[0]<o[1]?(s=o[0],a=o[1]):(s=o[1],a=o[0]),d>=s&&d<=a);var s,a},pathArc:function(d,u,o,h,s){return n(null,d,u,o,h,s,0)},pathSector:function(d,u,o,h,s){return n(null,d,u,o,h,s,1)},pathAnnulus:function(d,u,o,h,s,a){return n(d,u,o,h,s,a,1)}}},{"./mod":522}],497:[function(g,Q,X){var m=Array.isArray,v=ArrayBuffer,k=DataView;function x(r){return v.isView(r)&&!(r instanceof k)}function e(r){return m(r)||x(r)}function t(r,l,n){if(e(r)){if(e(r[0])){for(var d=n,u=0;u<r.length;u++)d=l(d,r[u].length);return d}return r.length}return 0}X.isTypedArray=x,X.isArrayOrTypedArray=e,X.isArray1D=function(r){return!e(r[0])},X.ensureArray=function(r,l){return m(r)||(r=[]),r.length=l,r},X.concat=function(){var r,l,n,d,u,o,h,s,a=[],p=!0,c=0;for(n=0;n<arguments.length;n++)(o=(d=arguments[n]).length)&&(l?a.push(d):(l=d,u=o),m(d)?r=!1:(p=!1,c?r!==d.constructor&&(r=!1):r=d.constructor),c+=o);if(!c)return[];if(!a.length)return l;if(p)return l.concat.apply(l,a);if(r){for((h=new r(c)).set(l),n=0;n<a.length;n++)d=a[n],h.set(d,u),u+=d.length;return h}for(h=new Array(c),s=0;s<l.length;s++)h[s]=l[s];for(n=0;n<a.length;n++){for(d=a[n],s=0;s<d.length;s++)h[u+s]=d[s];u+=s}return h},X.maxRowLength=function(r){return t(r,Math.max,0)},X.minRowLength=function(r){return t(r,Math.min,1/0)}},{}],498:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../constants/numerical").BADNUM,k=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;Q.exports=function(x){return typeof x=="string"&&(x=x.replace(k,"")),m(x)?Number(x):v}},{"../constants/numerical":491,"fast-isnumeric":190}],499:[function(g,Q,X){Q.exports=function(m){var v=m._fullLayout;v._glcanvas&&v._glcanvas.size()&&v._glcanvas.each(function(k){k.regl&&k.regl.clear({color:!0,depth:!0})})}},{}],500:[function(g,Q,X){Q.exports=function(m){m._responsiveChartHandler&&(window.removeEventListener("resize",m._responsiveChartHandler),delete m._responsiveChartHandler)}},{}],501:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("tinycolor2"),k=g("../plots/attributes"),x=g("../components/colorscale/scales"),e=g("../components/color"),t=g("../constants/interactions").DESELECTDIM,r=g("./nested_property"),l=g("./regex").counter,n=g("./mod").modHalf,d=g("./array").isArrayOrTypedArray;function u(o,h){var s=X.valObjectMeta[h.valType];if(h.arrayOk&&d(o))return!0;if(s.validateFunction)return s.validateFunction(o,h);var a={},p=a,c={set:function(i){p=i}};return s.coerceFunction(o,c,a,h),p!==a}X.valObjectMeta={data_array:{coerceFunction:function(o,h,s){d(o)?h.set(o):s!==void 0&&h.set(s)}},enumerated:{coerceFunction:function(o,h,s,a){a.coerceNumber&&(o=+o),a.values.indexOf(o)===-1?h.set(s):h.set(o)},validateFunction:function(o,h){h.coerceNumber&&(o=+o);for(var s=h.values,a=0;a<s.length;a++){var p=String(s[a]);if(p.charAt(0)==="/"&&p.charAt(p.length-1)==="/"){if(new RegExp(p.substr(1,p.length-2)).test(o))return!0}else if(o===s[a])return!0}return!1}},boolean:{coerceFunction:function(o,h,s){o===!0||o===!1?h.set(o):h.set(s)}},number:{coerceFunction:function(o,h,s,a){!m(o)||a.min!==void 0&&o<a.min||a.max!==void 0&&o>a.max?h.set(s):h.set(+o)}},integer:{coerceFunction:function(o,h,s,a){o%1||!m(o)||a.min!==void 0&&o<a.min||a.max!==void 0&&o>a.max?h.set(s):h.set(+o)}},string:{coerceFunction:function(o,h,s,a){if(typeof o!="string"){var p=typeof o=="number";a.strict!==!0&&p?h.set(String(o)):h.set(s)}else a.noBlank&&!o?h.set(s):h.set(o)}},color:{coerceFunction:function(o,h,s){v(o).isValid()?h.set(o):h.set(s)}},colorlist:{coerceFunction:function(o,h,s){Array.isArray(o)&&o.length&&o.every(function(a){return v(a).isValid()})?h.set(o):h.set(s)}},colorscale:{coerceFunction:function(o,h,s){h.set(x.get(o,s))}},angle:{coerceFunction:function(o,h,s){o==="auto"?h.set("auto"):m(o)?h.set(n(+o,360)):h.set(s)}},subplotid:{coerceFunction:function(o,h,s,a){var p=a.regex||l(s);typeof o=="string"&&p.test(o)?h.set(o):h.set(s)},validateFunction:function(o,h){var s=h.dflt;return o===s||typeof o=="string"&&!!l(s).test(o)}},flaglist:{coerceFunction:function(o,h,s,a){if((a.extras||[]).indexOf(o)===-1)if(typeof o=="string"){for(var p=o.split("+"),c=0;c<p.length;){var i=p[c];a.flags.indexOf(i)===-1||p.indexOf(i)<c?p.splice(c,1):c++}p.length?h.set(p.join("+")):h.set(s)}else h.set(s);else h.set(o)}},any:{coerceFunction:function(o,h,s){o===void 0?h.set(s):h.set(o)}},info_array:{coerceFunction:function(o,h,s,a){function p(E,z,D){var U,H={set:function(Y){U=Y}};return D===void 0&&(D=z.dflt),X.valObjectMeta[z.valType].coerceFunction(E,H,D,z),U}var c=a.dimensions===2||a.dimensions==="1-2"&&Array.isArray(o)&&Array.isArray(o[0]);if(Array.isArray(o)){var i,y,f,w,b,_,T=a.items,L=[],A=Array.isArray(T),I=A&&c&&Array.isArray(T[0]),P=c&&A&&!I,S=A&&!P?T.length:o.length;if(s=Array.isArray(s)?s:[],c)for(i=0;i<S;i++)for(L[i]=[],f=Array.isArray(o[i])?o[i]:[],b=P?T.length:A?T[i].length:f.length,y=0;y<b;y++)w=P?T[y]:A?T[i][y]:T,(_=p(f[y],w,(s[i]||[])[y]))!==void 0&&(L[i][y]=_);else for(i=0;i<S;i++)(_=p(o[i],A?T[i]:T,s[i]))!==void 0&&(L[i]=_);h.set(L)}else h.set(s)},validateFunction:function(o,h){if(!Array.isArray(o))return!1;var s=h.items,a=Array.isArray(s),p=h.dimensions===2;if(!h.freeLength&&o.length!==s.length)return!1;for(var c=0;c<o.length;c++)if(p){if(!Array.isArray(o[c])||!h.freeLength&&o[c].length!==s[c].length)return!1;for(var i=0;i<o[c].length;i++)if(!u(o[c][i],a?s[c][i]:s))return!1}else if(!u(o[c],a?s[c]:s))return!1;return!0}}},X.coerce=function(o,h,s,a,p){var c=r(s,a).get(),i=r(o,a),y=r(h,a),f=i.get(),w=h._template;if(f===void 0&&w&&(f=r(w,a).get(),w=0),p===void 0&&(p=c.dflt),c.arrayOk&&d(f))return y.set(f),f;var b=X.valObjectMeta[c.valType].coerceFunction;b(f,y,p,c);var _=y.get();return w&&_===p&&!u(f,c)&&(b(f=r(w,a).get(),y,p,c),_=y.get()),_},X.coerce2=function(o,h,s,a,p){var c=r(o,a),i=X.coerce(o,h,s,a,p),y=c.get();return y!=null&&i},X.coerceFont=function(o,h,s){var a={};return s=s||{},a.family=o(h+".family",s.family),a.size=o(h+".size",s.size),a.color=o(h+".color",s.color),a},X.coercePattern=function(o,h,s,a){if(o(h+".shape")){o(h+".solidity"),o(h+".size");var p=o(h+".fillmode")==="overlay";if(!a){var c=o(h+".bgcolor",p?s:void 0);o(h+".fgcolor",p?e.contrast(c):s)}o(h+".fgopacity",p?.5:1)}},X.coerceHoverinfo=function(o,h,s){var a,p=h._module.attributes,c=p.hoverinfo?p:k,i=c.hoverinfo;if(s._dataLength===1){var y=i.dflt==="all"?i.flags.slice():i.dflt.split("+");y.splice(y.indexOf("name"),1),a=y.join("+")}return X.coerce(o,h,c,"hoverinfo",a)},X.coerceSelectionMarkerOpacity=function(o,h){if(o.marker){var s,a,p=o.marker.opacity;p!==void 0&&(d(p)||o.selected||o.unselected||(s=p,a=t*p),h("selected.marker.opacity",s),h("unselected.marker.opacity",a))}},X.validate=u},{"../components/color":367,"../components/colorscale/scales":382,"../constants/interactions":490,"../plots/attributes":562,"./array":497,"./mod":522,"./nested_property":523,"./regex":532,"fast-isnumeric":190,tinycolor2:313}],502:[function(g,Q,X){var m,v,k=g("d3-time-format").timeFormat,x=g("fast-isnumeric"),e=g("./loggers"),t=g("./mod").mod,r=g("../constants/numerical"),l=r.BADNUM,n=r.ONEDAY,d=r.ONEHOUR,u=r.ONEMIN,o=r.ONESEC,h=r.EPOCHJD,s=g("../registry"),a=g("d3-time-format").utcFormat,p=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,c=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,i=new Date().getFullYear()-70;function y(z){return z&&s.componentsRegistry.calendars&&typeof z=="string"&&z!=="gregorian"}function f(z,D){return String(z+Math.pow(10,D)).substr(1)}X.dateTick0=function(z,D){var U=function(Y,J){return y(Y)?J?s.getComponentMethod("calendars","CANONICAL_SUNDAY")[Y]:s.getComponentMethod("calendars","CANONICAL_TICK")[Y]:J?"2000-01-02":"2000-01-01"}(z,!!D);if(D<2)return U;var H=X.dateTime2ms(U,z);return H+=n*(D-1),X.ms2DateTime(H,0,z)},X.dfltRange=function(z){return y(z)?s.getComponentMethod("calendars","DFLTRANGE")[z]:["2000-01-01","2001-01-01"]},X.isJSDate=function(z){return typeof z=="object"&&z!==null&&typeof z.getTime=="function"},X.dateTime2ms=function(z,D){if(X.isJSDate(z)){var U=z.getTimezoneOffset()*u,H=(z.getUTCMinutes()-z.getMinutes())*u+(z.getUTCSeconds()-z.getSeconds())*o+(z.getUTCMilliseconds()-z.getMilliseconds());if(H){var Y=3*u;U=U-Y/2+t(H-U+Y/2,Y)}return(z=Number(z)-U)>=m&&z<=v?z:l}if(typeof z!="string"&&typeof z!="number")return l;z=String(z);var J=y(D),W=z.charAt(0);!J||W!=="G"&&W!=="g"||(z=z.substr(1),D="");var Z=J&&D.substr(0,7)==="chinese",re=z.match(Z?c:p);if(!re)return l;var V=re[1],B=re[3]||"1",j=Number(re[5]||1),ee=Number(re[7]||0),N=Number(re[9]||0),$=Number(re[11]||0);if(J){if(V.length===2)return l;var K;V=Number(V);try{var te=s.getComponentMethod("calendars","getCal")(D);if(Z){var ie=B.charAt(B.length-1)==="i";B=parseInt(B,10),K=te.newDate(V,te.toMonthIndex(V,B,ie),j)}else K=te.newDate(V,Number(B),j)}catch{return l}return K?(K.toJD()-h)*n+ee*d+N*u+$*o:l}V=V.length===2?(Number(V)+2e3-i)%100+i:Number(V),B-=1;var le=new Date(Date.UTC(2e3,B,j,ee,N));return le.setUTCFullYear(V),le.getUTCMonth()!==B||le.getUTCDate()!==j?l:le.getTime()+$*o},m=X.MIN_MS=X.dateTime2ms("-9999"),v=X.MAX_MS=X.dateTime2ms("9999-12-31 23:59:59.9999"),X.isDateTime=function(z,D){return X.dateTime2ms(z,D)!==l};var w=90*n,b=3*d,_=5*u;function T(z,D,U,H,Y){if((D||U||H||Y)&&(z+=" "+f(D,2)+":"+f(U,2),(H||Y)&&(z+=":"+f(H,2),Y))){for(var J=4;Y%10==0;)J-=1,Y/=10;z+="."+f(Y,J)}return z}X.ms2DateTime=function(z,D,U){if(typeof z!="number"||!(z>=m&&z<=v))return l;D||(D=0);var H,Y,J,W,Z,re,V=Math.floor(10*t(z+.05,1)),B=Math.round(z-V/10);if(y(U)){var j=Math.floor(B/n)+h,ee=Math.floor(t(z,n));try{H=s.getComponentMethod("calendars","getCal")(U).fromJD(j).formatDate("yyyy-mm-dd")}catch{H=a("G%Y-%m-%d")(new Date(B))}if(H.charAt(0)==="-")for(;H.length<11;)H="-0"+H.substr(1);else for(;H.length<10;)H="0"+H;Y=D<w?Math.floor(ee/d):0,J=D<w?Math.floor(ee%d/u):0,W=D<b?Math.floor(ee%u/o):0,Z=D<_?ee%o*10+V:0}else re=new Date(B),H=a("%Y-%m-%d")(re),Y=D<w?re.getUTCHours():0,J=D<w?re.getUTCMinutes():0,W=D<b?re.getUTCSeconds():0,Z=D<_?10*re.getUTCMilliseconds()+V:0;return T(H,Y,J,W,Z)},X.ms2DateTimeLocal=function(z){if(!(z>=m+n&&z<=v-n))return l;var D=Math.floor(10*t(z+.05,1)),U=new Date(Math.round(z-D/10));return T(k("%Y-%m-%d")(U),U.getHours(),U.getMinutes(),U.getSeconds(),10*U.getUTCMilliseconds()+D)},X.cleanDate=function(z,D,U){if(z===l)return D;if(X.isJSDate(z)||typeof z=="number"&&isFinite(z)){if(y(U))return e.error("JS Dates and milliseconds are incompatible with world calendars",z),D;if(!(z=X.ms2DateTimeLocal(+z))&&D!==void 0)return D}else if(!X.isDateTime(z,U))return e.error("unrecognized date",z),D;return z};var L=/%\d?f/g,A=/%h/g,I={1:"1",2:"1",3:"2",4:"2"};function P(z,D,U,H){z=z.replace(L,function(J){var W=Math.min(+J.charAt(1)||6,6);return(D/1e3%1+2).toFixed(W).substr(2).replace(/0+$/,"")||"0"});var Y=new Date(Math.floor(D+.05));if(z=z.replace(A,function(){return I[U("%q")(Y)]}),y(H))try{z=s.getComponentMethod("calendars","worldCalFmt")(z,D,H)}catch{return"Invalid"}return U(z)(Y)}var S=[59,59.9,59.99,59.999,59.9999];X.formatDate=function(z,D,U,H,Y,J){if(Y=y(Y)&&Y,!D)if(U==="y")D=J.year;else if(U==="m")D=J.month;else{if(U!=="d")return function(W,Z){var re=t(W+.05,n),V=f(Math.floor(re/d),2)+":"+f(t(Math.floor(re/u),60),2);if(Z!=="M"){x(Z)||(Z=0);var B=(100+Math.min(t(W/o,60),S[Z])).toFixed(Z).substr(1);Z>0&&(B=B.replace(/0+$/,"").replace(/[\.]$/,"")),V+=":"+B}return V}(z,U)+`
`+P(J.dayMonthYear,z,H,Y);D=J.dayMonth+`
`+J.year}return P(D,z,H,Y)};var E=3*n;X.incrementMonth=function(z,D,U){U=y(U)&&U;var H=t(z,n);if(z=Math.round(z-H),U)try{var Y=Math.round(z/n)+h,J=s.getComponentMethod("calendars","getCal")(U),W=J.fromJD(Y);return D%12?J.add(W,D,"m"):J.add(W,D/12,"y"),(W.toJD()-h)*n+H}catch{e.error("invalid ms "+z+" in calendar "+U)}var Z=new Date(z+E);return Z.setUTCMonth(Z.getUTCMonth()+D)+H-E},X.findExactDates=function(z,D){for(var U,H,Y=0,J=0,W=0,Z=0,re=y(D)&&s.getComponentMethod("calendars","getCal")(D),V=0;V<z.length;V++)if(H=z[V],x(H)){if(!(H%n))if(re)try{(U=re.fromJD(H/n+h)).day()===1?U.month()===1?Y++:J++:W++}catch{}else(U=new Date(H)).getUTCDate()===1?U.getUTCMonth()===0?Y++:J++:W++}else Z++;W+=J+=Y;var B=z.length-Z;return{exactYears:Y/B,exactMonths:J/B,exactDays:W/B}}},{"../constants/numerical":491,"../registry":647,"./loggers":519,"./mod":522,"d3-time-format":120,"fast-isnumeric":190}],503:[function(g,Q,X){var m=g("@plotly/d3"),v=g("./loggers"),k=g("./matrix"),x=g("gl-mat4");function e(d){var u=d&&d.parentNode;u&&u.removeChild(d)}function t(d,u,o){var h="plotly.js-style-"+d,s=document.getElementById(h);s||((s=document.createElement("style")).setAttribute("id",h),s.appendChild(document.createTextNode("")),document.head.appendChild(s));var a=s.sheet;a.insertRule?a.insertRule(u+"{"+o+"}",0):a.addRule?a.addRule(u,o,0):v.warn("addStyleRule failed")}function r(d){var u=window.getComputedStyle(d,null),o=u.getPropertyValue("-webkit-transform")||u.getPropertyValue("-moz-transform")||u.getPropertyValue("-ms-transform")||u.getPropertyValue("-o-transform")||u.getPropertyValue("transform");return o==="none"?null:o.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(h){return+h})}function l(d){for(var u=[];n(d);)u.push(d),d=d.parentNode;return u}function n(d){return d&&(d instanceof Element||d instanceof HTMLElement)}Q.exports={getGraphDiv:function(d){var u;if(typeof d=="string"){if((u=document.getElementById(d))===null)throw new Error("No DOM element with id '"+d+"' exists on the page.");return u}if(d==null)throw new Error("DOM element provided is null or undefined");return d},isPlotDiv:function(d){var u=m.select(d);return u.node()instanceof HTMLElement&&u.size()&&u.classed("js-plotly-plot")},removeElement:e,addStyleRule:function(d,u){t("global",d,u)},addRelatedStyleRule:t,deleteRelatedStyleRule:function(d){var u="plotly.js-style-"+d,o=document.getElementById(u);o&&e(o)},getFullTransformMatrix:function(d){var u=l(d),o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return u.forEach(function(h){var s=r(h);if(s){var a=k.convertCssMatrix(s);o=x.multiply(o,o,a)}}),o},getElementTransformMatrix:r,getElementAndAncestors:l,equalDomRects:function(d,u){return d&&u&&d.x===u.x&&d.y===u.y&&d.top===u.top&&d.left===u.left&&d.right===u.right&&d.bottom===u.bottom}}},{"./loggers":519,"./matrix":521,"@plotly/d3":58,"gl-mat4":210}],504:[function(g,Q,X){var m=g("events").EventEmitter,v={init:function(k){if(k._ev instanceof m)return k;var x=new m,e=new m;return k._ev=x,k._internalEv=e,k.on=x.on.bind(x),k.once=x.once.bind(x),k.removeListener=x.removeListener.bind(x),k.removeAllListeners=x.removeAllListeners.bind(x),k._internalOn=e.on.bind(e),k._internalOnce=e.once.bind(e),k._removeInternalListener=e.removeListener.bind(e),k._removeAllInternalListeners=e.removeAllListeners.bind(e),k.emit=function(t,r){typeof jQuery<"u"&&jQuery(k).trigger(t,r),x.emit(t,r),e.emit(t,r)},k},triggerHandler:function(k,x,e){var t,r;typeof jQuery<"u"&&(t=jQuery(k).triggerHandler(x,e));var l=k._ev;if(!l)return t;var n,d=l._events[x];if(!d)return t;function u(o){return o.listener?(l.removeListener(x,o.listener),o.fired?void 0:(o.fired=!0,o.listener.apply(l,[e]))):o.apply(l,[e])}for(d=Array.isArray(d)?d:[d],n=0;n<d.length-1;n++)u(d[n]);return r=u(d[n]),t!==void 0?t:r},purge:function(k){return delete k._ev,delete k.on,delete k.once,delete k.removeListener,delete k.removeAllListeners,delete k.emit,delete k._ev,delete k._internalEv,delete k._internalOn,delete k._internalOnce,delete k._removeInternalListener,delete k._removeAllInternalListeners,k}};Q.exports=v},{events:84}],505:[function(g,Q,X){var m=g("./is_plain_object.js"),v=Array.isArray;function k(x,e,t,r){var l,n,d,u,o,h,s=x[0],a=x.length;if(a===2&&v(s)&&v(x[1])&&s.length===0){if(function(c,i){var y,f;for(y=0;y<c.length;y++){if((f=c[y])!==null&&typeof f=="object")return!1;f!==void 0&&(i[y]=f)}return!0}(x[1],s))return s;s.splice(0,s.length)}for(var p=1;p<a;p++)for(n in l=x[p])d=s[n],u=l[n],r&&v(u)?s[n]=u:e&&u&&(m(u)||(o=v(u)))?(o?(o=!1,h=d&&v(d)?d:[]):h=d&&m(d)?d:{},s[n]=k([h,u],e,t,r)):(u!==void 0||t)&&(s[n]=u);return s}X.extendFlat=function(){return k(arguments,!1,!1,!1)},X.extendDeep=function(){return k(arguments,!0,!1,!1)},X.extendDeepAll=function(){return k(arguments,!0,!0,!1)},X.extendDeepNoArrays=function(){return k(arguments,!0,!1,!0)}},{"./is_plain_object.js":516}],506:[function(g,Q,X){Q.exports=function(m){for(var v={},k=[],x=0,e=0;e<m.length;e++){var t=m[e];v[t]!==1&&(v[t]=1,k[x++]=t)}return k}},{}],507:[function(g,Q,X){function m(k){return k.visible===!0}function v(k){var x=k[0].trace;return x.visible===!0&&x._length!==0}Q.exports=function(k){for(var x,e=(x=k,Array.isArray(x)&&Array.isArray(x[0])&&x[0][0]&&x[0][0].trace?v:m),t=[],r=0;r<k.length;r++){var l=k[r];e(l)&&t.push(l)}return t}},{}],508:[function(g,Q,X){var m=g("@plotly/d3"),v=g("country-regex"),k=g("@turf/area"),x=g("@turf/centroid"),e=g("@turf/bbox"),t=g("./identity"),r=g("./loggers"),l=g("./is_plain_object"),n=g("./nested_property"),d=g("./polygon"),u=Object.keys(v),o={"ISO-3":t,"USA-states":t,"country names":function(s){for(var a=0;a<u.length;a++){var p=u[a];if(new RegExp(v[p]).test(s.trim().toLowerCase()))return p}return r.log("Unrecognized country name: "+s+"."),!1}};function h(s){var a=s.geojson,p=window.PlotlyGeoAssets||{},c=typeof a=="string"?p[a]:a;return l(c)?c:(r.error("Oops ... something went wrong when fetching "+a),!1)}Q.exports={locationToFeature:function(s,a,p){if(!a||typeof a!="string")return!1;var c,i,y,f=o[s](a);if(f){if(s==="USA-states")for(c=[],y=0;y<p.length;y++)(i=p[y]).properties&&i.properties.gu&&i.properties.gu==="USA"&&c.push(i);else c=p;for(y=0;y<c.length;y++)if((i=c[y]).id===f)return i;r.log(["Location with id",f,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(s){var a,p,c,i,y=s.geometry,f=y.coordinates,w=s.id,b=[];function _(T){for(var L=0;L<T.length-1;L++)if(T[L][0]>0&&T[L+1][0]<0)return L;return null}switch(a=w==="RUS"||w==="FJI"?function(T){var L;if(_(T)===null)L=T;else for(L=new Array(T.length),i=0;i<T.length;i++)L[i]=[T[i][0]<0?T[i][0]+360:T[i][0],T[i][1]];b.push(d.tester(L))}:w==="ATA"?function(T){var L=_(T);if(L===null)return b.push(d.tester(T));var A=new Array(T.length+1),I=0;for(i=0;i<T.length;i++)i>L?A[I++]=[T[i][0]+360,T[i][1]]:i===L?(A[I++]=T[i],A[I++]=[T[i][0],-90]):A[I++]=T[i];var P=d.tester(A);P.pts.pop(),b.push(P)}:function(T){b.push(d.tester(T))},y.type){case"MultiPolygon":for(p=0;p<f.length;p++)for(c=0;c<f[p].length;c++)a(f[p][c]);break;case"Polygon":for(p=0;p<f.length;p++)a(f[p])}return b},getTraceGeojson:h,extractTraceFeature:function(s){var a=s[0].trace,p=h(a);if(!p)return!1;var c,i={},y=[];for(c=0;c<a._length;c++){var f=s[c];(f.loc||f.loc===0)&&(i[f.loc]=f)}function w(T){var L=n(T,a.featureidkey||"id").get(),A=i[L];if(A){var I=T.geometry;if(I.type==="Polygon"||I.type==="MultiPolygon"){var P={type:"Feature",id:L,geometry:I,properties:{}};P.properties.ct=function(S){var E,z=S.geometry;if(z.type==="MultiPolygon")for(var D=z.coordinates,U=0,H=0;H<D.length;H++){var Y={type:"Polygon",coordinates:D[H]},J=k.default(Y);J>U&&(U=J,E=Y)}else E=z;return x.default(E).geometry.coordinates}(P),A.fIn=T,A.fOut=P,y.push(P)}else r.log(["Location",A.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete i[L]}switch(p.type){case"FeatureCollection":var b=p.features;for(c=0;c<b.length;c++)w(b[c]);break;case"Feature":w(p);break;default:return r.warn(["Invalid GeoJSON type",(p.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var _ in i)r.log(["Location *"+_+"*","does not have a matching feature with id-key","*"+a.featureidkey+"*."].join(" "));return y},fetchTraceGeoData:function(s){var a=window.PlotlyGeoAssets||{},p=[];function c(w){return new Promise(function(b,_){m.json(w,function(T,L){if(T){delete a[w];var A=T.status===404?'GeoJSON at URL "'+w+'" does not exist.':"Unexpected error while fetching from "+w;return _(new Error(A))}return a[w]=L,b(L)})})}function i(w){return new Promise(function(b,_){var T=0,L=setInterval(function(){return a[w]&&a[w]!=="pending"?(clearInterval(L),b(a[w])):T>100?(clearInterval(L),_("Unexpected error while fetching from "+w)):void T++},50)})}for(var y=0;y<s.length;y++){var f=s[y][0].trace.geojson;typeof f=="string"&&(a[f]?a[f]==="pending"&&p.push(i(f)):(a[f]="pending",p.push(c(f))))}return p},computeBbox:function(s){return e.default(s)}}},{"./identity":513,"./is_plain_object":516,"./loggers":519,"./nested_property":523,"./polygon":527,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],509:[function(g,Q,X){var m=g("../constants/numerical").BADNUM;X.calcTraceToLineCoords=function(v){for(var k=v[0].trace.connectgaps,x=[],e=[],t=0;t<v.length;t++){var r=v[t].lonlat;r[0]!==m?e.push(r):!k&&e.length>0&&(x.push(e),e=[])}return e.length>0&&x.push(e),x},X.makeLine=function(v){return v.length===1?{type:"LineString",coordinates:v[0]}:{type:"MultiLineString",coordinates:v}},X.makePolygon=function(v){if(v.length===1)return{type:"Polygon",coordinates:v};for(var k=new Array(v.length),x=0;x<v.length;x++)k[x]=[v[x]];return{type:"MultiPolygon",coordinates:k}},X.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":491}],510:[function(g,Q,X){var m,v,k,x=g("./mod").mod;function e(r,l,n,d,u,o,h,s){var a=n-r,p=u-r,c=h-u,i=d-l,y=o-l,f=s-o,w=a*f-c*i;if(w===0)return null;var b=(p*f-c*y)/w,_=(p*i-a*y)/w;return _<0||_>1||b<0||b>1?null:{x:r+a*b,y:l+i*b}}function t(r,l,n,d,u){var o=d*r+u*l;if(o<0)return d*d+u*u;if(o>n){var h=d-r,s=u-l;return h*h+s*s}var a=d*l-u*r;return a*a/n}X.segmentsIntersect=e,X.segmentDistance=function(r,l,n,d,u,o,h,s){if(e(r,l,n,d,u,o,h,s))return 0;var a=n-r,p=d-l,c=h-u,i=s-o,y=a*a+p*p,f=c*c+i*i,w=Math.min(t(a,p,y,u-r,o-l),t(a,p,y,h-r,s-l),t(c,i,f,r-u,l-o),t(c,i,f,n-u,d-o));return Math.sqrt(w)},X.getTextLocation=function(r,l,n,d){if(r===v&&d===k||(m={},v=r,k=d),m[n])return m[n];var u=r.getPointAtLength(x(n-d/2,l)),o=r.getPointAtLength(x(n+d/2,l)),h=Math.atan((o.y-u.y)/(o.x-u.x)),s=r.getPointAtLength(x(n,l)),a={x:(4*s.x+u.x+o.x)/6,y:(4*s.y+u.y+o.y)/6,theta:h};return m[n]=a,a},X.clearLocationCache=function(){v=null},X.getVisibleSegment=function(r,l,n){var d,u,o=l.left,h=l.right,s=l.top,a=l.bottom,p=0,c=r.getTotalLength(),i=c;function y(w){var b=r.getPointAtLength(w);w===0?d=b:w===c&&(u=b);var _=b.x<o?o-b.x:b.x>h?b.x-h:0,T=b.y<s?s-b.y:b.y>a?b.y-a:0;return Math.sqrt(_*_+T*T)}for(var f=y(p);f;){if((p+=f+n)>i)return;f=y(p)}for(f=y(i);f;){if(p>(i-=f+n))return;f=y(i)}return{min:p,max:i,len:i-p,total:c,isClosed:p===0&&i===c&&Math.abs(d.x-u.x)<.1&&Math.abs(d.y-u.y)<.1}},X.findPointOnPath=function(r,l,n,d){for(var u,o,h,s=(d=d||{}).pathLength||r.getTotalLength(),a=d.tolerance||.001,p=d.iterationLimit||30,c=r.getPointAtLength(0)[n]>r.getPointAtLength(s)[n]?-1:1,i=0,y=0,f=s;i<p;){if(u=(y+f)/2,h=(o=r.getPointAtLength(u))[n]-l,Math.abs(h)<a)return o;c*h>0?f=u:y=u,i++}return o}},{"./mod":522}],511:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("tinycolor2"),k=g("color-normalize"),x=g("../components/colorscale"),e=g("../components/color/attributes").defaultLine,t=g("./array").isArrayOrTypedArray,r=k(e);function l(u,o){var h=u;return h[3]*=o,h}function n(u){if(m(u))return r;var o=k(u);return o.length?o:r}function d(u){return m(u)?u:1}Q.exports={formatColor:function(u,o,h){var s,a,p,c,i,y=u.color,f=t(y),w=t(o),b=x.extractOpts(u),_=[];if(s=b.colorscale!==void 0?x.makeColorScaleFuncFromTrace(u):n,a=f?function(L,A){return L[A]===void 0?r:k(s(L[A]))}:n,p=w?function(L,A){return L[A]===void 0?1:d(L[A])}:d,f||w)for(var T=0;T<h;T++)c=a(y,T),i=p(o,T),_[T]=l(c,i);else _=l(k(y),o);return _},parseColorScale:function(u){var o=x.extractOpts(u),h=o.colorscale;return o.reversescale&&(h=x.flipScale(o.colorscale)),h.map(function(s){var a=s[0],p=v(s[1]).toRgb();return{index:a,rgb:[p.r,p.g,p.b,p.a]}})}}},{"../components/color/attributes":366,"../components/colorscale":379,"./array":497,"color-normalize":89,"fast-isnumeric":190,tinycolor2:313}],512:[function(g,Q,X){var m=g("./identity");function v(k){return[k]}Q.exports={keyFun:function(k){return k.key},repeat:v,descend:m,wrap:v,unwrap:function(k){return k[0]}}},{"./identity":513}],513:[function(g,Q,X){Q.exports=function(m){return m}},{}],514:[function(g,Q,X){Q.exports=function(m,v){if(!v)return m;var k=1/Math.abs(v),x=k>1?(k*m+k*v)/k:m+v,e=String(x).length;if(e>16){var t=String(v).length;if(e>=String(m).length+t){var r=parseFloat(x).toPrecision(12);r.indexOf("e+")===-1&&(x=+r)}}return x}},{}],515:[function(g,Q,X){var m=g("@plotly/d3"),v=g("d3-time-format").utcFormat,k=g("d3-format").format,x=g("fast-isnumeric"),e=g("../constants/numerical"),t=e.FP_SAFE,r=-t,l=e.BADNUM,n=Q.exports={};n.adjustFormat=function(V){return!V||/^\d[.]\df/.test(V)||/[.]\d%/.test(V)?V:V==="0.f"?"~f":/^\d%/.test(V)?"~%":/^\ds/.test(V)?"~s":!/^[~,.0$]/.test(V)&&/[&fps]/.test(V)?"~"+V:V};var d={};n.warnBadFormat=function(V){var B=String(V);d[B]||(d[B]=1,n.warn('encountered bad format: "'+B+'"'))},n.noFormat=function(V){return String(V)},n.numberFormat=function(V){var B;try{B=k(n.adjustFormat(V))}catch{return n.warnBadFormat(V),n.noFormat}return B},n.nestedProperty=g("./nested_property"),n.keyedContainer=g("./keyed_container"),n.relativeAttr=g("./relative_attr"),n.isPlainObject=g("./is_plain_object"),n.toLogRange=g("./to_log_range"),n.relinkPrivateKeys=g("./relink_private");var u=g("./array");n.isTypedArray=u.isTypedArray,n.isArrayOrTypedArray=u.isArrayOrTypedArray,n.isArray1D=u.isArray1D,n.ensureArray=u.ensureArray,n.concat=u.concat,n.maxRowLength=u.maxRowLength,n.minRowLength=u.minRowLength;var o=g("./mod");n.mod=o.mod,n.modHalf=o.modHalf;var h=g("./coerce");n.valObjectMeta=h.valObjectMeta,n.coerce=h.coerce,n.coerce2=h.coerce2,n.coerceFont=h.coerceFont,n.coercePattern=h.coercePattern,n.coerceHoverinfo=h.coerceHoverinfo,n.coerceSelectionMarkerOpacity=h.coerceSelectionMarkerOpacity,n.validate=h.validate;var s=g("./dates");n.dateTime2ms=s.dateTime2ms,n.isDateTime=s.isDateTime,n.ms2DateTime=s.ms2DateTime,n.ms2DateTimeLocal=s.ms2DateTimeLocal,n.cleanDate=s.cleanDate,n.isJSDate=s.isJSDate,n.formatDate=s.formatDate,n.incrementMonth=s.incrementMonth,n.dateTick0=s.dateTick0,n.dfltRange=s.dfltRange,n.findExactDates=s.findExactDates,n.MIN_MS=s.MIN_MS,n.MAX_MS=s.MAX_MS;var a=g("./search");n.findBin=a.findBin,n.sorterAsc=a.sorterAsc,n.sorterDes=a.sorterDes,n.distinctVals=a.distinctVals,n.roundUp=a.roundUp,n.sort=a.sort,n.findIndexOfMin=a.findIndexOfMin,n.sortObjectKeys=g("./sort_object_keys");var p=g("./stats");n.aggNums=p.aggNums,n.len=p.len,n.mean=p.mean,n.median=p.median,n.midRange=p.midRange,n.variance=p.variance,n.stdev=p.stdev,n.interp=p.interp;var c=g("./matrix");n.init2dArray=c.init2dArray,n.transposeRagged=c.transposeRagged,n.dot=c.dot,n.translationMatrix=c.translationMatrix,n.rotationMatrix=c.rotationMatrix,n.rotationXYMatrix=c.rotationXYMatrix,n.apply3DTransform=c.apply3DTransform,n.apply2DTransform=c.apply2DTransform,n.apply2DTransform2=c.apply2DTransform2,n.convertCssMatrix=c.convertCssMatrix,n.inverseTransformMatrix=c.inverseTransformMatrix;var i=g("./angles");n.deg2rad=i.deg2rad,n.rad2deg=i.rad2deg,n.angleDelta=i.angleDelta,n.angleDist=i.angleDist,n.isFullCircle=i.isFullCircle,n.isAngleInsideSector=i.isAngleInsideSector,n.isPtInsideSector=i.isPtInsideSector,n.pathArc=i.pathArc,n.pathSector=i.pathSector,n.pathAnnulus=i.pathAnnulus;var y=g("./anchor_utils");n.isLeftAnchor=y.isLeftAnchor,n.isCenterAnchor=y.isCenterAnchor,n.isRightAnchor=y.isRightAnchor,n.isTopAnchor=y.isTopAnchor,n.isMiddleAnchor=y.isMiddleAnchor,n.isBottomAnchor=y.isBottomAnchor;var f=g("./geometry2d");n.segmentsIntersect=f.segmentsIntersect,n.segmentDistance=f.segmentDistance,n.getTextLocation=f.getTextLocation,n.clearLocationCache=f.clearLocationCache,n.getVisibleSegment=f.getVisibleSegment,n.findPointOnPath=f.findPointOnPath;var w=g("./extend");n.extendFlat=w.extendFlat,n.extendDeep=w.extendDeep,n.extendDeepAll=w.extendDeepAll,n.extendDeepNoArrays=w.extendDeepNoArrays;var b=g("./loggers");n.log=b.log,n.warn=b.warn,n.error=b.error;var _=g("./regex");n.counterRegex=_.counter;var T=g("./throttle");n.throttle=T.throttle,n.throttleDone=T.done,n.clearThrottle=T.clear;var L=g("./dom");function A(V){var B={};for(var j in V)for(var ee=V[j],N=0;N<ee.length;N++)B[ee[N]]=+j;return B}n.getGraphDiv=L.getGraphDiv,n.isPlotDiv=L.isPlotDiv,n.removeElement=L.removeElement,n.addStyleRule=L.addStyleRule,n.addRelatedStyleRule=L.addRelatedStyleRule,n.deleteRelatedStyleRule=L.deleteRelatedStyleRule,n.getFullTransformMatrix=L.getFullTransformMatrix,n.getElementTransformMatrix=L.getElementTransformMatrix,n.getElementAndAncestors=L.getElementAndAncestors,n.equalDomRects=L.equalDomRects,n.clearResponsive=g("./clear_responsive"),n.preserveDrawingBuffer=g("./preserve_drawing_buffer"),n.makeTraceGroups=g("./make_trace_groups"),n._=g("./localize"),n.notifier=g("./notifier"),n.filterUnique=g("./filter_unique"),n.filterVisible=g("./filter_visible"),n.pushUnique=g("./push_unique"),n.increment=g("./increment"),n.cleanNumber=g("./clean_number"),n.ensureNumber=function(V){return x(V)?(V=Number(V))>t||V<r?l:V:l},n.isIndex=function(V,B){return!(B!==void 0&&V>=B)&&x(V)&&V>=0&&V%1==0},n.noop=g("./noop"),n.identity=g("./identity"),n.repeat=function(V,B){for(var j=new Array(B),ee=0;ee<B;ee++)j[ee]=V;return j},n.swapAttrs=function(V,B,j,ee){j||(j="x"),ee||(ee="y");for(var N=0;N<B.length;N++){var $=B[N],K=n.nestedProperty(V,$.replace("?",j)),te=n.nestedProperty(V,$.replace("?",ee)),ie=K.get();K.set(te.get()),te.set(ie)}},n.raiseToTop=function(V){V.parentNode.appendChild(V)},n.cancelTransition=function(V){return V.transition().duration(0)},n.constrain=function(V,B,j){return B>j?Math.max(j,Math.min(B,V)):Math.max(B,Math.min(j,V))},n.bBoxIntersect=function(V,B,j){return j=j||0,V.left<=B.right+j&&B.left<=V.right+j&&V.top<=B.bottom+j&&B.top<=V.bottom+j},n.simpleMap=function(V,B,j,ee,N){for(var $=V.length,K=new Array($),te=0;te<$;te++)K[te]=B(V[te],j,ee,N);return K},n.randstr=function V(B,j,ee,N){if(ee||(ee=16),j===void 0&&(j=24),j<=0)return"0";var $,K,te=Math.log(Math.pow(2,j))/Math.log(ee),ie="";for($=2;te===1/0;$*=2)te=Math.log(Math.pow(2,j/$))/Math.log(ee)*$;var le=te-Math.floor(te);for($=0;$<Math.floor(te);$++)ie=Math.floor(Math.random()*ee).toString(ee)+ie;le&&(K=Math.pow(ee,le),ie=Math.floor(Math.random()*K).toString(ee)+ie);var se=parseInt(ie,ee);return B&&B[ie]||se!==1/0&&se>=Math.pow(2,j)?N>10?(n.warn("randstr failed uniqueness"),ie):V(B,j,ee,(N||0)+1):ie},n.OptionControl=function(V,B){V||(V={}),B||(B="opt");var j={optionList:[],_newoption:function(ee){ee[B]=V,j[ee.name]=ee,j.optionList.push(ee)}};return j["_"+B]=V,j},n.smooth=function(V,B){if((B=Math.round(B)||0)<2)return V;var j,ee,N,$,K=V.length,te=2*K,ie=2*B-1,le=new Array(ie),se=new Array(K);for(j=0;j<ie;j++)le[j]=(1-Math.cos(Math.PI*(j+1)/B))/(2*B);for(j=0;j<K;j++){for($=0,ee=0;ee<ie;ee++)(N=j+ee+1-B)<-K?N-=te*Math.round(N/te):N>=te&&(N-=te*Math.floor(N/te)),N<0?N=-1-N:N>=K&&(N=te-1-N),$+=V[N]*le[ee];se[j]=$}return se},n.syncOrAsync=function(V,B,j){var ee;function N(){return n.syncOrAsync(V,B,j)}for(;V.length;)if((ee=(0,V.splice(0,1)[0])(B))&&ee.then)return ee.then(N);return j&&j(B)},n.stripTrailingSlash=function(V){return V.substr(-1)==="/"?V.substr(0,V.length-1):V},n.noneOrAll=function(V,B,j){if(V){var ee,N=!1,$=!0;for(ee=0;ee<j.length;ee++)V[j[ee]]!=null?N=!0:$=!1;if(N&&!$)for(ee=0;ee<j.length;ee++)V[j[ee]]=B[j[ee]]}},n.mergeArray=function(V,B,j,ee){var N=typeof ee=="function";if(n.isArrayOrTypedArray(V))for(var $=Math.min(V.length,B.length),K=0;K<$;K++){var te=V[K];B[K][j]=N?ee(te):te}},n.mergeArrayCastPositive=function(V,B,j){return n.mergeArray(V,B,j,function(ee){var N=+ee;return isFinite(N)&&N>0?N:0})},n.fillArray=function(V,B,j,ee){if(ee=ee||n.identity,n.isArrayOrTypedArray(V))for(var N=0;N<B.length;N++)B[N][j]=ee(V[N])},n.castOption=function(V,B,j,ee){ee=ee||n.identity;var N=n.nestedProperty(V,j).get();return n.isArrayOrTypedArray(N)?Array.isArray(B)&&n.isArrayOrTypedArray(N[B[0]])?ee(N[B[0]][B[1]]):ee(N[B]):N},n.extractOption=function(V,B,j,ee){if(j in V)return V[j];var N=n.nestedProperty(B,ee).get();return Array.isArray(N)?void 0:N},n.tagSelected=function(V,B,j){var ee,N,$=B.selectedpoints,K=B._indexToPoints;K&&(ee=A(K));for(var te=0;te<$.length;te++){var ie=$[te];if(n.isIndex(ie)||n.isArrayOrTypedArray(ie)&&n.isIndex(ie[0])&&n.isIndex(ie[1])){var le=ee?ee[ie]:ie,se=j?j[le]:le;(N=se)!==void 0&&N<V.length&&(V[se].selected=1)}}},n.selIndices2selPoints=function(V){var B=V.selectedpoints,j=V._indexToPoints;if(j){for(var ee=A(j),N=[],$=0;$<B.length;$++){var K=B[$];if(n.isIndex(K)){var te=ee[K];n.isIndex(te)&&N.push(te)}}return N}return B},n.getTargetArray=function(V,B){var j=B.target;if(typeof j=="string"&&j){var ee=n.nestedProperty(V,j).get();return!!Array.isArray(ee)&&ee}return!!Array.isArray(j)&&j},n.minExtend=function(V,B){var j={};typeof B!="object"&&(B={});var ee,N,$,K=Object.keys(V);for(ee=0;ee<K.length;ee++)$=V[N=K[ee]],N.charAt(0)!=="_"&&typeof $!="function"&&(N==="module"?j[N]=$:Array.isArray($)?j[N]=N==="colorscale"?$.slice():$.slice(0,3):n.isTypedArray($)?j[N]=$.subarray(0,3):j[N]=$&&typeof $=="object"?n.minExtend(V[N],B[N]):$);for(K=Object.keys(B),ee=0;ee<K.length;ee++)typeof($=B[N=K[ee]])=="object"&&N in j&&typeof j[N]=="object"||(j[N]=$);return j},n.titleCase=function(V){return V.charAt(0).toUpperCase()+V.substr(1)},n.containsAny=function(V,B){for(var j=0;j<B.length;j++)if(V.indexOf(B[j])!==-1)return!0;return!1},n.isIE=function(){return window.navigator.msSaveBlob!==void 0};var I=/Version\/[\d\.]+.*Safari/;n.isSafari=function(){return I.test(window.navigator.userAgent)};var P=/iPad|iPhone|iPod/;n.isIOS=function(){return P.test(window.navigator.userAgent)};var S=/Firefox\/(\d+)\.\d+/;n.getFirefoxVersion=function(){var V=S.exec(window.navigator.userAgent);if(V&&V.length===2){var B=parseInt(V[1]);if(!isNaN(B))return B}return null},n.isD3Selection=function(V){return V instanceof m.selection},n.ensureSingle=function(V,B,j,ee){var N=V.select(B+(j?"."+j:""));if(N.size())return N;var $=V.append(B);return j&&$.classed(j,!0),ee&&$.call(ee),$},n.ensureSingleById=function(V,B,j,ee){var N=V.select(B+"#"+j);if(N.size())return N;var $=V.append(B).attr("id",j);return ee&&$.call(ee),$},n.objectFromPath=function(V,B){for(var j,ee=V.split("."),N=j={},$=0;$<ee.length;$++){var K=ee[$],te=null,ie=ee[$].match(/(.*)\[([0-9]+)\]/);ie?(K=ie[1],te=ie[2],j=j[K]=[],$===ee.length-1?j[te]=B:j[te]={},j=j[te]):($===ee.length-1?j[K]=B:j[K]={},j=j[K])}return N};var E=/^([^\[\.]+)\.(.+)?/,z=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;n.expandObjectPaths=function(V){var B,j,ee,N,$,K,te;if(typeof V=="object"&&!Array.isArray(V))for(j in V)V.hasOwnProperty(j)&&((B=j.match(E))?(N=V[j],ee=B[1],delete V[j],V[ee]=n.extendDeepNoArrays(V[ee]||{},n.objectFromPath(j,n.expandObjectPaths(N))[ee])):(B=j.match(z))?(N=V[j],ee=B[1],$=parseInt(B[2]),delete V[j],V[ee]=V[ee]||[],B[3]==="."?(te=B[4],K=V[ee][$]=V[ee][$]||{},n.extendDeepNoArrays(K,n.objectFromPath(te,n.expandObjectPaths(N)))):V[ee][$]=n.expandObjectPaths(N)):V[j]=n.expandObjectPaths(V[j]));return V},n.numSeparate=function(V,B,j){if(j||(j=!1),typeof B!="string"||B.length===0)throw new Error("Separator string required for formatting!");typeof V=="number"&&(V=String(V));var ee=/(\d+)(\d{3})/,N=B.charAt(0),$=B.charAt(1),K=V.split("."),te=K[0],ie=K.length>1?N+K[1]:"";if($&&(K.length>1||te.length>4||j))for(;ee.test(te);)te=te.replace(ee,"$1"+$+"$2");return te+ie},n.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var D=/^\w*$/;n.templateString=function(V,B){var j={};return V.replace(n.TEMPLATE_STRING_REGEX,function(ee,N){var $;return D.test(N)?$=B[N]:(j[N]=j[N]||n.nestedProperty(B,N).get,$=j[N]()),n.isValidTextValue($)?$:""})};var U={max:10,count:0,name:"hovertemplate"};n.hovertemplateString=function(){return J.apply(U,arguments)};var H={max:10,count:0,name:"texttemplate"};n.texttemplateString=function(){return J.apply(H,arguments)};var Y=/^[:|\|]/;function J(V,B,j){var ee=this,N=arguments;B||(B={});var $={};return V.replace(n.TEMPLATE_STRING_REGEX,function(K,te,ie){var le,se,ve,fe=te==="_xother"||te==="_yother",ye=te==="_xother_"||te==="_yother_",Ae=te==="xother_"||te==="yother_",pe=te==="xother"||te==="yother"||fe||Ae||ye,ge=te;if((fe||ye)&&(ge=ge.substring(1)),(Ae||ye)&&(ge=ge.substring(0,ge.length-1)),pe){if((le=B[ge])===void 0)return""}else for(ve=3;ve<N.length;ve++)if(se=N[ve]){if(se.hasOwnProperty(ge)){le=se[ge];break}if(D.test(ge)||(le=n.nestedProperty(se,ge).get(),(le=$[ge]||n.nestedProperty(se,ge).get())&&($[ge]=le)),le!==void 0)break}if(le===void 0&&ee)return ee.count<ee.max&&(n.warn("Variable '"+ge+"' in "+ee.name+" could not be found!"),le=K),ee.count===ee.max&&n.warn("Too many "+ee.name+" warnings - additional warnings will be suppressed"),ee.count++,K;if(ie){var we;if(ie[0]===":"&&(le=(we=j?j.numberFormat:n.numberFormat)(ie.replace(Y,""))(le)),ie[0]==="|"){we=j?j.timeFormat:v;var oe=n.dateTime2ms(le);le=n.formatDate(oe,ie.replace(Y,""),!1,we)}}else{var de=ge+"Label";B.hasOwnProperty(de)&&(le=B[de])}return pe&&(le="("+le+")",(fe||ye)&&(le=" "+le),(Ae||ye)&&(le+=" ")),le})}n.subplotSort=function(V,B){for(var j=Math.min(V.length,B.length)+1,ee=0,N=0,$=0;$<j;$++){var K=V.charCodeAt($)||0,te=B.charCodeAt($)||0,ie=K>=48&&K<=57,le=te>=48&&te<=57;if(ie&&(ee=10*ee+K-48),le&&(N=10*N+te-48),!ie||!le){if(ee!==N)return ee-N;if(K!==te)return K-te}}return N-ee};var W=2e9;n.seedPseudoRandom=function(){W=2e9},n.pseudoRandom=function(){var V=W;return W=(69069*W+1)%4294967296,Math.abs(W-V)<429496729?n.pseudoRandom():W/4294967296},n.fillText=function(V,B,j){var ee=Array.isArray(j)?function(K){j.push(K)}:function(K){j.text=K},N=n.extractOption(V,B,"htx","hovertext");if(n.isValidTextValue(N))return ee(N);var $=n.extractOption(V,B,"tx","text");return n.isValidTextValue($)?ee($):void 0},n.isValidTextValue=function(V){return V||V===0},n.formatPercent=function(V,B){B=B||0;for(var j=(Math.round(100*V*Math.pow(10,B))*Math.pow(.1,B)).toFixed(B)+"%",ee=0;ee<B;ee++)j.indexOf(".")!==-1&&(j=(j=j.replace("0%","%")).replace(".%","%"));return j},n.isHidden=function(V){var B=window.getComputedStyle(V).display;return!B||B==="none"},n.strTranslate=function(V,B){return V||B?"translate("+V+","+B+")":""},n.strRotate=function(V){return V?"rotate("+V+")":""},n.strScale=function(V){return V!==1?"scale("+V+")":""},n.getTextTransform=function(V){var B=V.noCenter,j=V.textX,ee=V.textY,N=V.targetX,$=V.targetY,K=V.anchorX||0,te=V.anchorY||0,ie=V.rotate,le=V.scale;return le?le>1&&(le=1):le=0,n.strTranslate(N-le*(j+K),$-le*(ee+te))+n.strScale(le)+(ie?"rotate("+ie+(B?"":" "+j+" "+ee)+")":"")},n.setTransormAndDisplay=function(V,B){V.attr("transform",n.getTextTransform(B)),V.style("display",B.scale?null:"none")},n.ensureUniformFontSize=function(V,B){var j=n.extendFlat({},B);return j.size=Math.max(B.size,V._fullLayout.uniformtext.minsize||0),j},n.join2=function(V,B,j){var ee=V.length;return ee>1?V.slice(0,-1).join(B)+j+V[ee-1]:V.join(B)},n.bigFont=function(V){return Math.round(1.2*V)};var Z=n.getFirefoxVersion(),re=Z!==null&&Z<86;n.getPositionFromD3Event=function(){return re?[m.event.layerX,m.event.layerY]:[m.event.offsetX,m.event.offsetY]}},{"../constants/numerical":491,"./anchor_utils":495,"./angles":496,"./array":497,"./clean_number":498,"./clear_responsive":500,"./coerce":501,"./dates":502,"./dom":503,"./extend":505,"./filter_unique":506,"./filter_visible":507,"./geometry2d":510,"./identity":513,"./increment":514,"./is_plain_object":516,"./keyed_container":517,"./localize":518,"./loggers":519,"./make_trace_groups":520,"./matrix":521,"./mod":522,"./nested_property":523,"./noop":524,"./notifier":525,"./preserve_drawing_buffer":529,"./push_unique":530,"./regex":532,"./relative_attr":533,"./relink_private":534,"./search":535,"./sort_object_keys":538,"./stats":539,"./throttle":542,"./to_log_range":543,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],516:[function(g,Q,X){Q.exports=function(m){return window&&window.process&&window.process.versions?Object.prototype.toString.call(m)==="[object Object]":Object.prototype.toString.call(m)==="[object Object]"&&Object.getPrototypeOf(m).hasOwnProperty("hasOwnProperty")}},{}],517:[function(g,Q,X){var m=g("./nested_property"),v=/^\w*$/;Q.exports=function(k,x,e,t){var r,l,n;e=e||"name",t=t||"value";var d={};x&&x.length?(n=m(k,x),l=n.get()):l=k,x=x||"";var u={};if(l)for(r=0;r<l.length;r++)u[l[r][e]]=r;var o=v.test(t),h={set:function(s,a){var p=a===null?4:0;if(!l){if(!n||p===4)return;l=[],n.set(l)}var c=u[s];if(c===void 0){if(p===4)return;p|=3,c=l.length,u[s]=c}else a!==(o?l[c][t]:m(l[c],t).get())&&(p|=2);var i=l[c]=l[c]||{};return i[e]=s,o?i[t]=a:m(i,t).set(a),a!==null&&(p&=-5),d[c]=d[c]|p,h},get:function(s){if(l){var a=u[s];return a===void 0?void 0:o?l[a][t]:m(l[a],t).get()}},rename:function(s,a){var p=u[s];return p===void 0||(d[p]=1|d[p],u[a]=p,delete u[s],l[p][e]=a),h},remove:function(s){var a=u[s];if(a===void 0)return h;var p=l[a];if(Object.keys(p).length>2)return d[a]=2|d[a],h.set(s,null);if(o){for(r=a;r<l.length;r++)d[r]=3|d[r];for(r=a;r<l.length;r++)u[l[r][e]]--;l.splice(a,1),delete u[s]}else m(p,t).set(null),d[a]=6|d[a];return h},constructUpdate:function(){for(var s,a,p={},c=Object.keys(d),i=0;i<c.length;i++)a=c[i],s=x+"["+a+"]",l[a]?(1&d[a]&&(p[s+"."+e]=l[a][e]),2&d[a]&&(p[s+"."+t]=o?4&d[a]?null:l[a][t]:4&d[a]?null:m(l[a],t).get())):p[s]=null;return p}};return h}},{"./nested_property":523}],518:[function(g,Q,X){var m=g("../registry");Q.exports=function(v,k){for(var x=v._context.locale,e=0;e<2;e++){for(var t=v._context.locales,r=0;r<2;r++){var l=(t[x]||{}).dictionary;if(l){var n=l[k];if(n)return n}t=m.localeRegistry}var d=x.split("-")[0];if(d===x)break;x=d}return k}},{"../registry":647}],519:[function(g,Q,X){var m=g("../plot_api/plot_config").dfltConfig,v=g("./notifier"),k=Q.exports={};k.log=function(){var x;if(m.logging>1){var e=["LOG:"];for(x=0;x<arguments.length;x++)e.push(arguments[x]);console.trace.apply(console,e)}if(m.notifyOnLogging>1){var t=[];for(x=0;x<arguments.length;x++)t.push(arguments[x]);v(t.join("<br>"),"long")}},k.warn=function(){var x;if(m.logging>0){var e=["WARN:"];for(x=0;x<arguments.length;x++)e.push(arguments[x]);console.trace.apply(console,e)}if(m.notifyOnLogging>0){var t=[];for(x=0;x<arguments.length;x++)t.push(arguments[x]);v(t.join("<br>"),"stick")}},k.error=function(){var x;if(m.logging>0){var e=["ERROR:"];for(x=0;x<arguments.length;x++)e.push(arguments[x]);console.error.apply(console,e)}if(m.notifyOnLogging>0){var t=[];for(x=0;x<arguments.length;x++)t.push(arguments[x]);v(t.join("<br>"),"stick")}}},{"../plot_api/plot_config":553,"./notifier":525}],520:[function(g,Q,X){var m=g("@plotly/d3");Q.exports=function(v,k,x){var e=v.selectAll("g."+x.replace(/\s/g,".")).data(k,function(r){return r[0].trace.uid});e.exit().remove(),e.enter().append("g").attr("class",x),e.order();var t=v.classed("rangeplot")?"nodeRangePlot3":"node3";return e.each(function(r){r[0][t]=m.select(this)}),e}},{"@plotly/d3":58}],521:[function(g,Q,X){var m=g("gl-mat4");X.init2dArray=function(v,k){for(var x=new Array(v),e=0;e<v;e++)x[e]=new Array(k);return x},X.transposeRagged=function(v){var k,x,e=0,t=v.length;for(k=0;k<t;k++)e=Math.max(e,v[k].length);var r=new Array(e);for(k=0;k<e;k++)for(r[k]=new Array(t),x=0;x<t;x++)r[k][x]=v[x][k];return r},X.dot=function(v,k){if(!v.length||!k.length||v.length!==k.length)return null;var x,e,t=v.length;if(v[0].length)for(x=new Array(t),e=0;e<t;e++)x[e]=X.dot(v[e],k);else if(k[0].length){var r=X.transposeRagged(k);for(x=new Array(r.length),e=0;e<r.length;e++)x[e]=X.dot(v,r[e])}else for(x=0,e=0;e<t;e++)x+=v[e]*k[e];return x},X.translationMatrix=function(v,k){return[[1,0,v],[0,1,k],[0,0,1]]},X.rotationMatrix=function(v){var k=v*Math.PI/180;return[[Math.cos(k),-Math.sin(k),0],[Math.sin(k),Math.cos(k),0],[0,0,1]]},X.rotationXYMatrix=function(v,k,x){return X.dot(X.dot(X.translationMatrix(k,x),X.rotationMatrix(v)),X.translationMatrix(-k,-x))},X.apply3DTransform=function(v){return function(){var k=arguments,x=arguments.length===1?k[0]:[k[0],k[1],k[2]||0];return X.dot(v,[x[0],x[1],x[2],1]).slice(0,3)}},X.apply2DTransform=function(v){return function(){var k=arguments;k.length===3&&(k=k[0]);var x=arguments.length===1?k[0]:[k[0],k[1]];return X.dot(v,[x[0],x[1],1]).slice(0,2)}},X.apply2DTransform2=function(v){var k=X.apply2DTransform(v);return function(x){return k(x.slice(0,2)).concat(k(x.slice(2,4)))}},X.convertCssMatrix=function(v){if(v){var k=v.length;if(k===16)return v;if(k===6)return[v[0],v[1],0,0,v[2],v[3],0,0,0,0,1,0,v[4],v[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},X.inverseTransformMatrix=function(v){var k=[];return m.invert(k,v),[[k[0],k[1],k[2],k[3]],[k[4],k[5],k[6],k[7]],[k[8],k[9],k[10],k[11]],[k[12],k[13],k[14],k[15]]]}},{"gl-mat4":210}],522:[function(g,Q,X){Q.exports={mod:function(m,v){var k=m%v;return k<0?k+v:k},modHalf:function(m,v){return Math.abs(m)>v/2?m-Math.round(m/v)*v:m}}},{}],523:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("./array").isArrayOrTypedArray;function k(d,u){return function(){var o,h,s,a,p,c=d;for(a=0;a<u.length-1;a++){if((o=u[a])===-1){for(h=!0,s=[],p=0;p<c.length;p++)s[p]=k(c[p],u.slice(a+1))(),s[p]!==s[0]&&(h=!1);return h?s[0]:s}if(typeof o=="number"&&!v(c)||typeof(c=c[o])!="object"||c===null)return}if(typeof c=="object"&&c!==null&&(s=c[u[a]])!==null)return s}}Q.exports=function(d,u){if(m(u))u=String(u);else if(typeof u!="string"||u.substr(u.length-4)==="[-1]")throw"bad property string";for(var o,h,s,a=0,p=u.split(".");a<p.length;){if(o=String(p[a]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(o[1])p[a]=o[1];else{if(a!==0)throw"bad property string";p.splice(0,1)}for(h=o[2].substr(1,o[2].length-2).split("]["),s=0;s<h.length;s++)a++,p.splice(a,0,Number(h[s]))}a++}return typeof d!="object"?function(c,i,y){return{set:function(){throw"bad container"},get:function(){},astr:i,parts:y,obj:c}}(d,u,p):{set:t(d,p,u),get:k(d,p),astr:u,parts:p,obj:d}};var x=/(^|\.)args\[/;function e(d,u){return d===void 0||d===null&&!u.match(x)}function t(d,u,o){return function(h){var s,a,p=d,c="",i=e(h,o);for(a=0;a<u.length-1;a++){if(typeof(s=u[a])=="number"&&!v(p))throw"array index but container is not an array";if(s===-1){if(i=!l(p,u.slice(a+1),h,o))break;return}if(!n(p,s,u[a+1],i))break;if(typeof(p=p[s])!="object"||p===null)throw"container is not an object";c=r(c,s)}if(i){if(a===u.length-1&&(delete p[u[a]],Array.isArray(p)&&+u[a]==p.length-1))for(;p.length&&p[p.length-1]===void 0;)p.pop()}else p[u[a]]=h}}function r(d,u){var o=u;return m(u)?o="["+u+"]":d&&(o="."+u),d+o}function l(d,u,o,h){var s,a=v(o),p=!0,c=o,i=h.replace("-1",0),y=!a&&e(o,i),f=u[0];for(s=0;s<d.length;s++)i=h.replace("-1",s),a&&(y=e(c=o[s%o.length],i)),y&&(p=!1),n(d,s,f,y)&&t(d[s],u,h.replace("-1",s))(c);return p}function n(d,u,o,h){if(d[u]===void 0){if(h)return!1;d[u]=typeof o=="number"?[]:{}}return!0}},{"./array":497,"fast-isnumeric":190}],524:[function(g,Q,X){Q.exports=function(){}},{}],525:[function(g,Q,X){var m=g("@plotly/d3"),v=g("fast-isnumeric"),k=[];Q.exports=function(x,e){if(k.indexOf(x)===-1){k.push(x);var t=1e3;v(e)?t=e:e==="long"&&(t=3e3);var r=m.select("body").selectAll(".plotly-notifier").data([0]);r.enter().append("div").classed("plotly-notifier",!0),r.selectAll(".notifier-note").data(k).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(n){var d=m.select(this);d.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){d.transition().call(l)});for(var u=d.append("p"),o=n.split(/<br\s*\/?>/g),h=0;h<o.length;h++)h&&u.append("br"),u.append("span").text(o[h]);e==="stick"?d.transition().duration(350).style("opacity",1):d.transition().duration(700).style("opacity",1).transition().delay(t).call(l)})}function l(n){n.duration(700).style("opacity",0).each("end",function(d){var u=k.indexOf(d);u!==-1&&k.splice(u,1),m.select(this).remove()})}}},{"@plotly/d3":58,"fast-isnumeric":190}],526:[function(g,Q,X){var m=g("./setcursor"),v="data-savedcursor";Q.exports=function(k,x){var e=k.attr(v);if(x){if(!e){for(var t=(k.attr("class")||"").split(" "),r=0;r<t.length;r++){var l=t[r];l.indexOf("cursor-")===0&&k.attr(v,l.substr(7)).classed(l,!1)}k.attr(v)||k.attr(v,"!!")}m(k,x)}else e&&(k.attr(v,null),e==="!!"?m(k):m(k,e))}},{"./setcursor":536}],527:[function(g,Q,X){var m=g("./matrix").dot,v=g("../constants/numerical").BADNUM,k=Q.exports={};k.tester=function(x){var e,t=x.slice(),r=t[0][0],l=r,n=t[0][1],d=n;for(t[t.length-1][0]===t[0][0]&&t[t.length-1][1]===t[0][1]||t.push(t[0]),e=1;e<t.length;e++)r=Math.min(r,t[e][0]),l=Math.max(l,t[e][0]),n=Math.min(n,t[e][1]),d=Math.max(d,t[e][1]);var u,o=!1;t.length===5&&(t[0][0]===t[1][0]?t[2][0]===t[3][0]&&t[0][1]===t[3][1]&&t[1][1]===t[2][1]&&(o=!0,u=function(a){return a[0]===t[0][0]}):t[0][1]===t[1][1]&&t[2][1]===t[3][1]&&t[0][0]===t[3][0]&&t[1][0]===t[2][0]&&(o=!0,u=function(a){return a[1]===t[0][1]}));var h=!0,s=t[0];for(e=1;e<t.length;e++)if(s[0]!==t[e][0]||s[1]!==t[e][1]){h=!1;break}return{xmin:r,xmax:l,ymin:n,ymax:d,pts:t,contains:o?function(a,p){var c=a[0],i=a[1];return!(c===v||c<r||c>l||i===v||i<n||i>d)&&(!p||!u(a))}:function(a,p){var c=a[0],i=a[1];if(c===v||c<r||c>l||i===v||i<n||i>d)return!1;var y,f,w,b,_,T=t.length,L=t[0][0],A=t[0][1],I=0;for(y=1;y<T;y++)if(f=L,w=A,L=t[y][0],A=t[y][1],!(c<(b=Math.min(f,L))||c>Math.max(f,L)||i>Math.max(w,A)))if(i<Math.min(w,A))c!==b&&I++;else{if(i===(_=L===f?i:w+(c-f)*(A-w)/(L-f)))return y!==1||!p;i<=_&&c!==b&&I++}return I%2==1},isRect:o,degenerate:h}},k.isSegmentBent=function(x,e,t,r){var l,n,d,u=x[e],o=[x[t][0]-u[0],x[t][1]-u[1]],h=m(o,o),s=Math.sqrt(h),a=[-o[1]/s,o[0]/s];for(l=e+1;l<t;l++)if(n=[x[l][0]-u[0],x[l][1]-u[1]],(d=m(n,o))<0||d>h||Math.abs(m(n,a))>r)return!0;return!1},k.filter=function(x,e){var t=[x[0]],r=0,l=0;function n(d){x.push(d);var u=t.length,o=r;t.splice(l+1);for(var h=o+1;h<x.length;h++)(h===x.length-1||k.isSegmentBent(x,o,h+1,e))&&(t.push(x[h]),t.length<u-2&&(r=h,l=t.length-1),o=h)}return x.length>1&&n(x.pop()),{addPt:n,raw:x,filtered:t}}},{"../constants/numerical":491,"./matrix":521}],528:[function(g,Q,X){(function(m){(function(){var v=g("./show_no_webgl_msg"),k=g("regl");Q.exports=function(x,e,t){var r=x._fullLayout,l=!0;return r._glcanvas.each(function(n){if(n.regl)n.regl.preloadCachedCode(t);else if(!n.pick||r._has("parcoords")){try{n.regl=k({canvas:this,attributes:{antialias:!n.pick,preserveDrawingBuffer:!0},pixelRatio:x._context.plotGlPixelRatio||m.devicePixelRatio,extensions:e||[],cachedCode:t||{}})}catch{l=!1}n.regl||(l=!1),l&&this.addEventListener("webglcontextlost",function(d){x&&x.emit&&x.emit("plotly_webglcontextlost",{event:d,layer:n.key})},!1)}}),l||v({container:r._glcontainer.node()}),l}}).call(this)}).call(this,typeof qi<"u"?qi:typeof self<"u"?self:typeof window<"u"?window:{})},{"./show_no_webgl_msg":537,regl:284}],529:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("is-mobile");Q.exports=function(k){var x;if(typeof(x=k&&k.hasOwnProperty("userAgent")?k.userAgent:function(){var u;return typeof navigator<"u"&&(u=navigator.userAgent),u&&u.headers&&typeof u.headers["user-agent"]=="string"&&(u=u.headers["user-agent"]),u}())!="string")return!0;var e=v({ua:{headers:{"user-agent":x}},tablet:!0,featureDetect:!1});if(!e){for(var t=x.split(" "),r=1;r<t.length;r++)if(t[r].indexOf("Safari")!==-1)for(var l=r-1;l>-1;l--){var n=t[l];if(n.substr(0,8)==="Version/"){var d=n.substr(8).split(".")[0];if(m(d)&&(d=+d),d>=13)return!0}}}return e}},{"fast-isnumeric":190,"is-mobile":234}],530:[function(g,Q,X){Q.exports=function(m,v){if(v instanceof RegExp){for(var k=v.toString(),x=0;x<m.length;x++)if(m[x]instanceof RegExp&&m[x].toString()===k)return m;m.push(v)}else!v&&v!==0||m.indexOf(v)!==-1||m.push(v);return m}},{}],531:[function(g,Q,X){var m=g("../lib"),v=g("../plot_api/plot_config").dfltConfig,k={add:function(x,e,t,r,l){var n,d;x.undoQueue=x.undoQueue||{index:0,queue:[],sequence:!1},d=x.undoQueue.index,x.autoplay?x.undoQueue.inSequence||(x.autoplay=!1):(!x.undoQueue.sequence||x.undoQueue.beginSequence?(n={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},x.undoQueue.queue.splice(d,x.undoQueue.queue.length-d,n),x.undoQueue.index+=1):n=x.undoQueue.queue[d-1],x.undoQueue.beginSequence=!1,n&&(n.undo.calls.unshift(e),n.undo.args.unshift(t),n.redo.calls.push(r),n.redo.args.push(l)),x.undoQueue.queue.length>v.queueLength&&(x.undoQueue.queue.shift(),x.undoQueue.index--))},startSequence:function(x){x.undoQueue=x.undoQueue||{index:0,queue:[],sequence:!1},x.undoQueue.sequence=!0,x.undoQueue.beginSequence=!0},stopSequence:function(x){x.undoQueue=x.undoQueue||{index:0,queue:[],sequence:!1},x.undoQueue.sequence=!1,x.undoQueue.beginSequence=!1},undo:function(x){var e,t;if(!(x.undoQueue===void 0||isNaN(x.undoQueue.index)||x.undoQueue.index<=0)){for(x.undoQueue.index--,e=x.undoQueue.queue[x.undoQueue.index],x.undoQueue.inSequence=!0,t=0;t<e.undo.calls.length;t++)k.plotDo(x,e.undo.calls[t],e.undo.args[t]);x.undoQueue.inSequence=!1,x.autoplay=!1}},redo:function(x){var e,t;if(!(x.undoQueue===void 0||isNaN(x.undoQueue.index)||x.undoQueue.index>=x.undoQueue.queue.length)){for(e=x.undoQueue.queue[x.undoQueue.index],x.undoQueue.inSequence=!0,t=0;t<e.redo.calls.length;t++)k.plotDo(x,e.redo.calls[t],e.redo.args[t]);x.undoQueue.inSequence=!1,x.autoplay=!1,x.undoQueue.index++}}};k.plotDo=function(x,e,t){x.autoplay=!0,t=function(r,l){for(var n,d=[],u=0;u<l.length;u++)n=l[u],d[u]=n===r?n:typeof n=="object"?Array.isArray(n)?m.extendDeep([],n):m.extendDeepAll({},n):n;return d}(x,t),e.apply(null,t)},Q.exports=k},{"../lib":515,"../plot_api/plot_config":553}],532:[function(g,Q,X){X.counter=function(m,v,k,x){var e=(v||"")+(k?"":"$"),t=x===!1?"":"^";return m==="xy"?new RegExp(t+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+e):new RegExp(t+m+"([2-9]|[1-9][0-9]+)?"+e)}},{}],533:[function(g,Q,X){var m=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,v=/^[^\.\[\]]+$/;Q.exports=function(k,x){for(;x;){var e=k.match(m);if(e)k=e[1];else{if(!k.match(v))throw new Error("bad relativeAttr call:"+[k,x]);k=""}if(x.charAt(0)!=="^")break;x=x.slice(1)}return k&&x.charAt(0)!=="["?k+"."+x:k+x}},{}],534:[function(g,Q,X){var m=g("./array").isArrayOrTypedArray,v=g("./is_plain_object");Q.exports=function k(x,e){for(var t in e){var r=e[t],l=x[t];if(l!==r)if(t.charAt(0)==="_"||typeof r=="function"){if(t in x)continue;x[t]=r}else if(m(r)&&m(l)&&v(r[0])){if(t==="customdata"||t==="ids")continue;for(var n=Math.min(r.length,l.length),d=0;d<n;d++)l[d]!==r[d]&&v(r[d])&&v(l[d])&&k(l[d],r[d])}else v(r)&&v(l)&&(k(l,r),Object.keys(l).length||delete x[t])}}},{"./array":497,"./is_plain_object":516}],535:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("./loggers"),k=g("./identity"),x=g("../constants/numerical").BADNUM;function e(n,d){return n<d}function t(n,d){return n<=d}function r(n,d){return n>d}function l(n,d){return n>=d}X.findBin=function(n,d,u){if(m(d.start))return u?Math.ceil((n-d.start)/d.size-1e-9)-1:Math.floor((n-d.start)/d.size+1e-9);var o,h,s=0,a=d.length,p=0,c=a>1?(d[a-1]-d[0])/(a-1):1;for(h=c>=0?u?e:t:u?l:r,n+=1e-9*c*(u?-1:1)*(c>=0?1:-1);s<a&&p++<100;)h(d[o=Math.floor((s+a)/2)],n)?s=o+1:a=o;return p>90&&v.log("Long binary search..."),s-1},X.sorterAsc=function(n,d){return n-d},X.sorterDes=function(n,d){return d-n},X.distinctVals=function(n){var d,u=n.slice();for(u.sort(X.sorterAsc),d=u.length-1;d>-1&&u[d]===x;d--);for(var o,h=u[d]-u[0]||1,s=h/(d||1)/1e4,a=[],p=0;p<=d;p++){var c=u[p],i=c-o;o===void 0?(a.push(c),o=c):i>s&&(h=Math.min(h,i),a.push(c),o=c)}return{vals:a,minDiff:h}},X.roundUp=function(n,d,u){for(var o,h=0,s=d.length-1,a=0,p=u?0:1,c=u?1:0,i=u?Math.ceil:Math.floor;h<s&&a++<100;)d[o=i((h+s)/2)]<=n?h=o+p:s=o-c;return d[h]},X.sort=function(n,d){for(var u=0,o=0,h=1;h<n.length;h++){var s=d(n[h],n[h-1]);if(s<0?u=1:s>0&&(o=1),u&&o)return n.sort(d)}return o?n:n.reverse()},X.findIndexOfMin=function(n,d){d=d||k;for(var u,o=1/0,h=0;h<n.length;h++){var s=d(n[h]);s<o&&(o=s,u=h)}return u}},{"../constants/numerical":491,"./identity":513,"./loggers":519,"fast-isnumeric":190}],536:[function(g,Q,X){Q.exports=function(m,v){(m.attr("class")||"").split(" ").forEach(function(k){k.indexOf("cursor-")===0&&m.classed(k,!1)}),v&&m.classed("cursor-"+v,!0)}},{}],537:[function(g,Q,X){var m=g("../components/color"),v=function(){};Q.exports=function(k){for(var x in k)typeof k[x]=="function"&&(k[x]=v);k.destroy=function(){k.container.parentNode.removeChild(k.container)};var e=document.createElement("div");e.className="no-webgl",e.style.cursor="pointer",e.style.fontSize="24px",e.style.color=m.defaults[0],e.style.position="absolute",e.style.left=e.style.top="0px",e.style.width=e.style.height="100%",e.style["background-color"]=m.lightLine,e.style["z-index"]=30;var t=document.createElement("p");return t.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",t.style.position="relative",t.style.top="50%",t.style.left="50%",t.style.height="30%",t.style.width="50%",t.style.margin="-15% 0 0 -25%",e.appendChild(t),k.container.appendChild(e),k.container.style.background="#FFFFFF",k.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":367}],538:[function(g,Q,X){Q.exports=function(m){return Object.keys(m).sort()}},{}],539:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("./array").isArrayOrTypedArray;X.aggNums=function(k,x,e,t){var r,l;if((!t||t>e.length)&&(t=e.length),m(x)||(x=!1),v(e[0])){for(l=new Array(t),r=0;r<t;r++)l[r]=X.aggNums(k,x,e[r]);e=l}for(r=0;r<t;r++)m(x)?m(e[r])&&(x=k(+x,+e[r])):x=e[r];return x},X.len=function(k){return X.aggNums(function(x){return x+1},0,k)},X.mean=function(k,x){return x||(x=X.len(k)),X.aggNums(function(e,t){return e+t},0,k)/x},X.midRange=function(k){if(k!==void 0&&k.length!==0)return(X.aggNums(Math.max,null,k)+X.aggNums(Math.min,null,k))/2},X.variance=function(k,x,e){return x||(x=X.len(k)),m(e)||(e=X.mean(k,x)),X.aggNums(function(t,r){return t+Math.pow(r-e,2)},0,k)/x},X.stdev=function(k,x,e){return Math.sqrt(X.variance(k,x,e))},X.median=function(k){var x=k.slice().sort();return X.interp(x,.5)},X.interp=function(k,x){if(!m(x))throw"n should be a finite number";if((x=x*k.length-.5)<0)return k[0];if(x>k.length-1)return k[k.length-1];var e=x%1;return e*k[Math.ceil(x)]+(1-e)*k[Math.floor(x)]}},{"./array":497,"fast-isnumeric":190}],540:[function(g,Q,X){var m=g("color-normalize");Q.exports=function(v){return v?m(v):[0,0,0,1]}},{"color-normalize":89}],541:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../lib"),k=v.strTranslate,x=g("../constants/xmlns_namespaces"),e=g("../constants/alignment").LINE_SPACING,t=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;X.convertToTspans=function(S,E,z){var D=S.text(),U=!S.attr("data-notex")&&E&&E._context.typesetMath&&typeof MathJax<"u"&&D.match(t),H=m.select(S.node().parentNode);if(!H.empty()){var Y=S.attr("class")?S.attr("class").split(" ")[0]:"text";return Y+="-math",H.selectAll("svg."+Y).remove(),H.selectAll("g."+Y+"-group").remove(),S.style("display",null).attr({"data-unformatted":D,"data-math":"N"}),U?(E&&E._promises||[]).push(new Promise(function(W){S.style("display","none");var Z=parseInt(S.node().style.fontSize,10),re={fontSize:Z};(function(V,B,j){var ee,N,$,K,te=parseInt((MathJax.version||"").split(".")[0]);if(te!==2&&te!==3)return void v.warn("No MathJax version:",MathJax.version);var ie=function(){var se="math-output-"+v.randstr({},64),ve=(K=m.select("body").append("div").attr({id:se}).style({visibility:"hidden",position:"absolute","font-size":B.fontSize+"px"}).text(V.replace(r,"\\lt ").replace(l,"\\gt "))).node();return te===2?MathJax.Hub.Typeset(ve):MathJax.typeset([ve])},le=function(){var se=K.select(te===2?".MathJax_SVG":".MathJax"),ve=!se.empty()&&K.select("svg").node();if(ve){var fe,ye=ve.getBoundingClientRect();fe=te===2?m.select("body").select("#MathJax_SVG_glyphs"):se.select("defs"),j(se,fe,ye)}else v.log("There was an error in the tex syntax.",V),j();K.remove()};te===2?MathJax.Hub.Queue(function(){return N=v.extendDeepAll({},MathJax.Hub.config),$=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:n},displayAlign:"left"})},function(){if((ee=MathJax.Hub.config.menuSettings.renderer)!=="SVG")return MathJax.Hub.setRenderer("SVG")},ie,le,function(){if(ee!=="SVG")return MathJax.Hub.setRenderer(ee)},function(){return $!==void 0&&(MathJax.Hub.processSectionDelay=$),MathJax.Hub.Config(N)}):te===3&&(N=v.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=n,(ee=MathJax.config.startup.output)!=="svg"&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){ie(),le(),ee!=="svg"&&(MathJax.config.startup.output=ee),MathJax.config=N}))})(U[2],re,function(V,B,j){H.selectAll("svg."+Y).remove(),H.selectAll("g."+Y+"-group").remove();var ee=V&&V.select("svg");if(!ee||!ee.node())return J(),void W();var N=H.append("g").classed(Y+"-group",!0).attr({"pointer-events":"none","data-unformatted":D,"data-math":"Y"});N.node().appendChild(ee.node()),B&&B.node()&&ee.node().insertBefore(B.node().cloneNode(!0),ee.node().firstChild);var $=j.width,K=j.height;ee.attr({class:Y,height:K,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var te=S.node().style.fill||"black",ie=ee.select("g");ie.attr({fill:te,stroke:te});var le=ie.node().getBoundingClientRect(),se=le.width,ve=le.height;(se>$||ve>K)&&(ee.style("overflow","hidden"),se=(le=ee.node().getBoundingClientRect()).width,ve=le.height);var fe=+S.attr("x"),ye=+S.attr("y"),Ae=-(Z||S.node().getBoundingClientRect().height)/4;if(Y[0]==="y")N.attr({transform:"rotate("+[-90,fe,ye]+")"+k(-se/2,Ae-ve/2)});else if(Y[0]==="l")ye=Ae-ve/2;else if(Y[0]==="a"&&Y.indexOf("atitle")!==0)fe=0,ye=Ae;else{var pe=S.attr("text-anchor");fe-=se*(pe==="middle"?.5:pe==="end"?1:0),ye=ye+Ae-ve/2}ee.attr({x:fe,y:ye}),z&&z.call(S,N),W(N)})})):J(),S}function J(){H.empty()||(Y=S.attr("class")+"-math",H.select("svg."+Y).remove()),S.text("").style("white-space","pre"),function(W,Z){Z=Z.replace(s," ");var re,V=!1,B=[],j=-1;function ee(){j++;var oe=document.createElementNS(x.svg,"tspan");m.select(oe).attr({class:"line",dy:j*e+"em"}),W.appendChild(oe),re=oe;var de=B;if(B=[{node:oe}],de.length>1)for(var Te=1;Te<de.length;Te++)N(de[Te])}function N(oe){var de,Te=oe.type,Ee={};if(Te==="a"){de="a";var Me=oe.target,De=oe.href,Ie=oe.popup;De&&(Ee={"xlink:xlink:show":Me==="_blank"||Me.charAt(0)!=="_"?"new":"replace",target:Me,"xlink:xlink:href":De},Ie&&(Ee.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Ie+'");return false;'))}else de="tspan";oe.style&&(Ee.style=oe.style);var Oe=document.createElementNS(x.svg,de);if(Te==="sup"||Te==="sub"){$(re,"\u200B"),re.appendChild(Oe);var Ze=document.createElementNS(x.svg,"tspan");$(Ze,"\u200B"),m.select(Ze).attr("dy",o[Te]),Ee.dy=u[Te],re.appendChild(Oe),re.appendChild(Ze)}else re.appendChild(Oe);m.select(Oe).attr(Ee),re=oe.node=Oe,B.push(oe)}function $(oe,de){oe.appendChild(document.createTextNode(de))}function K(oe){if(B.length!==1){var de=B.pop();oe!==de.type&&v.log("Start tag <"+de.type+"> doesnt match end tag <"+oe+">. Pretending it did match.",Z),re=B[B.length-1].node}else v.log("Ignoring unexpected end tag </"+oe+">.",Z)}c.test(Z)?ee():(re=W,B=[{node:W}]);for(var te=Z.split(a),ie=0;ie<te.length;ie++){var le=te[ie],se=le.match(p),ve=se&&se[2].toLowerCase(),fe=d[ve];if(ve==="br")ee();else if(fe===void 0)$(re,A(le));else if(se[1])K(ve);else{var ye=se[4],Ae={type:ve},pe=b(ye,i);if(pe?(pe=pe.replace(_,"$1 fill:"),fe&&(pe+=";"+fe)):fe&&(pe=fe),pe&&(Ae.style=pe),ve==="a"){V=!0;var ge=b(ye,y);if(ge){var we=I(ge);we&&(Ae.href=we,Ae.target=b(ye,f)||"_blank",Ae.popup=b(ye,w))}}N(Ae)}}return V}(S.node(),D)&&S.style("pointer-events","all"),X.positionText(S),z&&z.call(S)}};var r=/(<|&lt;|&#60;)/g,l=/(>|&gt;|&#62;)/g,n=[["$","$"],["\\(","\\)"]],d={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},u={sub:"0.3em",sup:"-0.6em"},o={sub:"-0.21em",sup:"0.42em"},h=["http:","https:","mailto:","",void 0,":"],s=X.NEWLINES=/(\r\n?|\n)/g,a=/(<[^<>]*>)/,p=/<(\/?)([^ >]*)(\s+(.*))?>/i,c=/<br(\s+.*)?>/i;X.BR_TAG_ALL=/<br(\s+.*)?>/gi;var i=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,y=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,f=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,w=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function b(S,E){if(!S)return null;var z=S.match(E),D=z&&(z[3]||z[4]);return D&&A(D)}var _=/(^|;)\s*color:/;X.plainText=function(S,E){for(var z=(E=E||{}).len!==void 0&&E.len!==-1?E.len:1/0,D=E.allowedTags!==void 0?E.allowedTags:["br"],U=3,H=S.split(a),Y=[],J="",W=0,Z=0;Z<H.length;Z++){var re=H[Z],V=re.match(p),B=V&&V[2].toLowerCase();if(B)D.indexOf(B)!==-1&&(Y.push(re),J=B);else{var j=re.length;if(W+j<z)Y.push(re),W+=j;else if(W<z){var ee=z-W;J&&(J!=="br"||ee<=U||j<=U)&&Y.pop(),z>U?Y.push(re.substr(0,ee-U)+"..."):Y.push(re.substr(0,ee));break}J=""}}return Y.join("")};var T={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},L=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function A(S){return S.replace(L,function(E,z){return(z.charAt(0)==="#"?function(D){if(!(D>1114111)){var U=String.fromCodePoint;if(U)return U(D);var H=String.fromCharCode;return D<=65535?H(D):H(55232+(D>>10),D%1024+56320)}}(z.charAt(1)==="x"?parseInt(z.substr(2),16):parseInt(z.substr(1),10)):T[z])||E})}function I(S){var E=encodeURI(decodeURI(S)),z=document.createElement("a"),D=document.createElement("a");z.href=S,D.href=E;var U=z.protocol,H=D.protocol;return h.indexOf(U)!==-1&&h.indexOf(H)!==-1?E:""}function P(S,E,z){var D,U,H,Y=z.horizontalAlign,J=z.verticalAlign||"top",W=S.node().getBoundingClientRect(),Z=E.node().getBoundingClientRect();return U=J==="bottom"?function(){return W.bottom-D.height}:J==="middle"?function(){return W.top+(W.height-D.height)/2}:function(){return W.top},H=Y==="right"?function(){return W.right-D.width}:Y==="center"?function(){return W.left+(W.width-D.width)/2}:function(){return W.left},function(){D=this.node().getBoundingClientRect();var re=H()-Z.left,V=U()-Z.top,B=z.gd||{};if(z.gd){B._fullLayout._calcInverseTransform(B);var j=v.apply3DTransform(B._fullLayout._invTransform)(re,V);re=j[0],V=j[1]}return this.style({top:V+"px",left:re+"px","z-index":1e3}),this}}X.convertEntities=A,X.sanitizeHTML=function(S){S=S.replace(s," ");for(var E=document.createElement("p"),z=E,D=[],U=S.split(a),H=0;H<U.length;H++){var Y=U[H],J=Y.match(p),W=J&&J[2].toLowerCase();if(W in d)if(J[1])D.length&&(z=D.pop());else{var Z=J[4],re=b(Z,i),V=re?{style:re}:{};if(W==="a"){var B=b(Z,y);if(B){var j=I(B);if(j){V.href=j;var ee=b(Z,f);ee&&(V.target=ee)}}}var N=document.createElement(W);z.appendChild(N),m.select(N).attr(V),z=N,D.push(N)}else z.appendChild(document.createTextNode(A(Y)))}return E.innerHTML},X.lineCount=function(S){return S.selectAll("tspan.line").size()||1},X.positionText=function(S,E,z){return S.each(function(){var D=m.select(this);function U(J,W){return W===void 0?(W=D.attr(J))===null&&(D.attr(J,0),W=0):D.attr(J,W),W}var H=U("x",E),Y=U("y",z);this.nodeName==="text"&&D.selectAll("tspan.line").attr({x:H,y:Y})})},X.makeTextShadow=function(S){var E="1px ",z="1px ",D="1px ";return E+z+D+S+", -"+E+"-"+z+D+S+", "+E+"-"+z+D+S+", -"+E+z+D+S},X.makeEditable=function(S,E){var z=E.gd,D=E.delegate,U=m.dispatch("edit","input","cancel"),H=D||S;if(S.style({"pointer-events":D?"none":"all"}),S.size()!==1)throw new Error("boo");function Y(){(function(){var re=m.select(z).select(".svg-container"),V=re.append("div"),B=S.node().style,j=parseFloat(B.fontSize||12),ee=E.text;ee===void 0&&(ee=S.attr("data-unformatted")),V.classed("plugin-editable editable",!0).style({position:"absolute","font-family":B.fontFamily||"Arial","font-size":j,color:E.fill||B.fill||"black",opacity:1,"background-color":E.background||"transparent",outline:"#ffffff33 1px solid",margin:[-j/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(ee).call(P(S,re,E)).on("blur",function(){z._editing=!1,S.text(this.textContent).style({opacity:1});var N,$=m.select(this).attr("class");(N=$?"."+$.split(" ")[0]+"-math-group":"[class*=-math-group]")&&m.select(S.node().parentNode).select(N).style({opacity:0});var K=this.textContent;m.select(this).transition().duration(0).remove(),m.select(document).on("mouseup",null),U.edit.call(S,K)}).on("focus",function(){var N=this;z._editing=!0,m.select(document).on("mouseup",function(){if(m.event.target===N)return!1;document.activeElement===V.node()&&V.node().blur()})}).on("keyup",function(){m.event.which===27?(z._editing=!1,S.style({opacity:1}),m.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),U.cancel.call(S,this.textContent)):(U.input.call(S,this.textContent),m.select(this).call(P(S,re,E)))}).on("keydown",function(){m.event.which===13&&this.blur()}).call(J)})(),S.style({opacity:0});var W,Z=H.attr("class");(W=Z?"."+Z.split(" ")[0]+"-math-group":"[class*=-math-group]")&&m.select(S.node().parentNode).select(W).style({opacity:0})}function J(W){var Z=W.node(),re=document.createRange();re.selectNodeContents(Z);var V=window.getSelection();V.removeAllRanges(),V.addRange(re),Z.focus()}return E.immediate?Y():H.on("click",Y),m.rebind(S,U,"on")}},{"../constants/alignment":483,"../constants/xmlns_namespaces":492,"../lib":515,"@plotly/d3":58}],542:[function(g,Q,X){var m={};function v(k){k&&k.timer!==null&&(clearTimeout(k.timer),k.timer=null)}X.throttle=function(k,x,e){var t=m[k],r=Date.now();if(!t){for(var l in m)m[l].ts<r-6e4&&delete m[l];t=m[k]={ts:0,timer:null}}function n(){e(),t.ts=Date.now(),t.onDone&&(t.onDone(),t.onDone=null)}v(t),r>t.ts+x?n():t.timer=setTimeout(function(){n(),t.timer=null},x)},X.done=function(k){var x=m[k];return x&&x.timer?new Promise(function(e){var t=x.onDone;x.onDone=function(){t&&t(),e(),x.onDone=null}}):Promise.resolve()},X.clear=function(k){if(k)v(m[k]),delete m[k];else for(var x in m)X.clear(x)}},{}],543:[function(g,Q,X){var m=g("fast-isnumeric");Q.exports=function(v,k){if(v>0)return Math.log(v)/Math.LN10;var x=Math.log(Math.min(k[0],k[1]))/Math.LN10;return m(x)||(x=Math.log(Math.max(k[0],k[1]))/Math.LN10-6),x}},{"fast-isnumeric":190}],544:[function(g,Q,X){var m=Q.exports={},v=g("../plots/geo/constants").locationmodeToLayer,k=g("topojson-client").feature;m.getTopojsonName=function(x){return[x.scope.replace(/ /g,"-"),"_",x.resolution.toString(),"m"].join("")},m.getTopojsonPath=function(x,e){return x+e+".json"},m.getTopojsonFeatures=function(x,e){var t=v[x.locationmode],r=e.objects[t];return k(e,r).features}},{"../plots/geo/constants":596,"topojson-client":316}],545:[function(g,Q,X){Q.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],546:[function(g,Q,X){Q.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],547:[function(g,Q,X){var m=g("../registry");Q.exports=function(v){for(var k,x,e=m.layoutArrayContainers,t=m.layoutArrayRegexes,r=v.split("[")[0],l=0;l<t.length;l++)if((x=v.match(t[l]))&&x.index===0){k=x[0];break}if(k||(k=e[e.indexOf(r)]),!k)return!1;var n=v.substr(k.length);return n?!!(x=n.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:k,index:Number(x[1]),property:x[3]||""}:{array:k,index:"",property:""}}},{"../registry":647}],548:[function(g,Q,X){var m=g("../lib"),v=m.extendFlat,k=m.isPlainObject,x={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},e={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},t=x.flags.slice().concat(["fullReplot"]),r=e.flags.slice().concat("layoutReplot");function l(u){for(var o={},h=0;h<u.length;h++)o[u[h]]=!1;return o}function n(u,o,h){var s=v({},u);for(var a in s){var p=s[a];k(p)&&(s[a]=d(p,o,h,a))}return h==="from-root"&&(s.editType=o),s}function d(u,o,h,s){if(u.valType){var a=v({},u);if(a.editType=o,Array.isArray(u.items)){a.items=new Array(u.items.length);for(var p=0;p<u.items.length;p++)a.items[p]=d(u.items[p],o)}return a}return n(u,o,s.charAt(0)==="_"?"nested":"from-root")}Q.exports={traces:x,layout:e,traceFlags:function(){return l(t)},layoutFlags:function(){return l(r)},update:function(u,o){var h=o.editType;if(h&&h!=="none")for(var s=h.split("+"),a=0;a<s.length;a++)u[s[a]]=!0},overrideAll:n}},{"../lib":515}],549:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("gl-mat4/fromQuat"),k=g("../registry"),x=g("../lib"),e=g("../plots/plots"),t=g("../plots/cartesian/axis_ids"),r=g("../components/color"),l=t.cleanId,n=t.getFromTrace,d=k.traceIs;function u(f,w){var b=f[w],_=w.charAt(0);b&&b!=="paper"&&(f[w]=l(b,_,!0))}function o(f){function w(b,_){var T=f[b],L=f.title&&f.title[_];T&&!L&&(f.title||(f.title={}),f.title[_]=f[b],delete f[b])}f&&(typeof f.title!="string"&&typeof f.title!="number"||(f.title={text:f.title}),w("titlefont","font"),w("titleposition","position"),w("titleside","side"),w("titleoffset","offset"))}function h(f){if(!x.isPlainObject(f))return!1;var w=f.name;return delete f.name,delete f.showlegend,(typeof w=="string"||typeof w=="number")&&String(w)}function s(f,w,b,_){if(b&&!_)return f;if(_&&!b||!f.trim())return w;if(!w.trim())return f;var T,L=Math.min(f.length,w.length);for(T=0;T<L&&f.charAt(T)===w.charAt(T);T++);return f.substr(0,T).trim()}function a(f){var w="middle",b="center";return typeof f=="string"&&(f.indexOf("top")!==-1?w="top":f.indexOf("bottom")!==-1&&(w="bottom"),f.indexOf("left")!==-1?b="left":f.indexOf("right")!==-1&&(b="right")),w+" "+b}function p(f,w){return w in f&&typeof f[w]=="object"&&Object.keys(f[w]).length===0}X.clearPromiseQueue=function(f){Array.isArray(f._promises)&&f._promises.length>0&&x.log("Clearing previous rejected promises from queue."),f._promises=[]},X.cleanLayout=function(f){var w,b;f||(f={}),f.xaxis1&&(f.xaxis||(f.xaxis=f.xaxis1),delete f.xaxis1),f.yaxis1&&(f.yaxis||(f.yaxis=f.yaxis1),delete f.yaxis1),f.scene1&&(f.scene||(f.scene=f.scene1),delete f.scene1);var _=(e.subplotsRegistry.cartesian||{}).attrRegex,T=(e.subplotsRegistry.polar||{}).attrRegex,L=(e.subplotsRegistry.ternary||{}).attrRegex,A=(e.subplotsRegistry.gl3d||{}).attrRegex,I=Object.keys(f);for(w=0;w<I.length;w++){var P=I[w];if(_&&_.test(P)){var S=f[P];S.anchor&&S.anchor!=="free"&&(S.anchor=l(S.anchor)),S.overlaying&&(S.overlaying=l(S.overlaying)),S.type||(S.isdate?S.type="date":S.islog?S.type="log":S.isdate===!1&&S.islog===!1&&(S.type="linear")),S.autorange!=="withzero"&&S.autorange!=="tozero"||(S.autorange=!0,S.rangemode="tozero"),delete S.islog,delete S.isdate,delete S.categories,p(S,"domain")&&delete S.domain,S.autotick!==void 0&&(S.tickmode===void 0&&(S.tickmode=S.autotick?"auto":"linear"),delete S.autotick),o(S)}else if(T&&T.test(P))o(f[P].radialaxis);else if(L&&L.test(P)){var E=f[P];o(E.aaxis),o(E.baxis),o(E.caxis)}else if(A&&A.test(P)){var z=f[P],D=z.cameraposition;if(Array.isArray(D)&&D[0].length===4){var U=D[0],H=D[1],Y=D[2],J=v([],U),W=[];for(b=0;b<3;++b)W[b]=H[b]+Y*J[2+4*b];z.camera={eye:{x:W[0],y:W[1],z:W[2]},center:{x:H[0],y:H[1],z:H[2]},up:{x:0,y:0,z:1}},delete z.cameraposition}o(z.xaxis),o(z.yaxis),o(z.zaxis)}}var Z=Array.isArray(f.annotations)?f.annotations.length:0;for(w=0;w<Z;w++){var re=f.annotations[w];x.isPlainObject(re)&&(re.ref&&(re.ref==="paper"?(re.xref="paper",re.yref="paper"):re.ref==="data"&&(re.xref="x",re.yref="y"),delete re.ref),u(re,"xref"),u(re,"yref"))}var V=Array.isArray(f.shapes)?f.shapes.length:0;for(w=0;w<V;w++){var B=f.shapes[w];x.isPlainObject(B)&&(u(B,"xref"),u(B,"yref"))}var j=Array.isArray(f.images)?f.images.length:0;for(w=0;w<j;w++){var ee=f.images[w];x.isPlainObject(ee)&&(u(ee,"xref"),u(ee,"yref"))}var N=f.legend;return N&&(N.x>3?(N.x=1.02,N.xanchor="left"):N.x<-2&&(N.x=-.02,N.xanchor="right"),N.y>3?(N.y=1.02,N.yanchor="bottom"):N.y<-2&&(N.y=-.02,N.yanchor="top")),o(f),f.dragmode==="rotate"&&(f.dragmode="orbit"),r.clean(f),f.template&&f.template.layout&&X.cleanLayout(f.template.layout),f},X.cleanData=function(f){for(var w=0;w<f.length;w++){var b,_=f[w];if(_.type==="histogramy"&&"xbins"in _&&!("ybins"in _)&&(_.ybins=_.xbins,delete _.xbins),_.error_y&&"opacity"in _.error_y){var T=r.defaults,L=_.error_y.color||(d(_,"bar")?r.defaultLine:T[w%T.length]);_.error_y.color=r.addOpacity(r.rgb(L),r.opacity(L)*_.error_y.opacity),delete _.error_y.opacity}if("bardir"in _&&(_.bardir!=="h"||!d(_,"bar")&&_.type.substr(0,9)!=="histogram"||(_.orientation="h",X.swapXYData(_)),delete _.bardir),_.type==="histogramy"&&X.swapXYData(_),_.type!=="histogramx"&&_.type!=="histogramy"||(_.type="histogram"),"scl"in _&&!("colorscale"in _)&&(_.colorscale=_.scl,delete _.scl),"reversescl"in _&&!("reversescale"in _)&&(_.reversescale=_.reversescl,delete _.reversescl),_.xaxis&&(_.xaxis=l(_.xaxis,"x")),_.yaxis&&(_.yaxis=l(_.yaxis,"y")),d(_,"gl3d")&&_.scene&&(_.scene=e.subplotsRegistry.gl3d.cleanId(_.scene)),!d(_,"pie-like")&&!d(_,"bar-like"))if(Array.isArray(_.textposition))for(b=0;b<_.textposition.length;b++)_.textposition[b]=a(_.textposition[b]);else _.textposition&&(_.textposition=a(_.textposition));var A=k.getModule(_);if(A&&A.colorbar){var I=A.colorbar.container,P=I?_[I]:_;P&&P.colorscale&&(P.colorscale==="YIGnBu"&&(P.colorscale="YlGnBu"),P.colorscale==="YIOrRd"&&(P.colorscale="YlOrRd"))}if(_.type==="surface"&&x.isPlainObject(_.contours)){var S=["x","y","z"];for(b=0;b<S.length;b++){var E=_.contours[S[b]];x.isPlainObject(E)&&(E.highlightColor&&(E.highlightcolor=E.highlightColor,delete E.highlightColor),E.highlightWidth&&(E.highlightwidth=E.highlightWidth,delete E.highlightWidth))}}if(_.type==="candlestick"||_.type==="ohlc"){var z=(_.increasing||{}).showlegend!==!1,D=(_.decreasing||{}).showlegend!==!1,U=h(_.increasing),H=h(_.decreasing);if(U!==!1&&H!==!1){var Y=s(U,H,z,D);Y&&(_.name=Y)}else!U&&!H||_.name||(_.name=U||H)}if(Array.isArray(_.transforms)){var J=_.transforms;for(b=0;b<J.length;b++){var W=J[b];if(x.isPlainObject(W))switch(W.type){case"filter":W.filtersrc&&(W.target=W.filtersrc,delete W.filtersrc),W.calendar&&(W.valuecalendar||(W.valuecalendar=W.calendar),delete W.calendar);break;case"groupby":if(W.styles=W.styles||W.style,W.styles&&!Array.isArray(W.styles)){var Z=W.styles,re=Object.keys(Z);W.styles=[];for(var V=0;V<re.length;V++)W.styles.push({target:re[V],value:Z[re[V]]})}}}}p(_,"line")&&delete _.line,"marker"in _&&(p(_.marker,"line")&&delete _.marker.line,p(_,"marker")&&delete _.marker),r.clean(_),_.autobinx&&(delete _.autobinx,delete _.xbins),_.autobiny&&(delete _.autobiny,delete _.ybins),o(_),_.colorbar&&o(_.colorbar),_.marker&&_.marker.colorbar&&o(_.marker.colorbar),_.line&&_.line.colorbar&&o(_.line.colorbar),_.aaxis&&o(_.aaxis),_.baxis&&o(_.baxis)}},X.swapXYData=function(f){var w;if(x.swapAttrs(f,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(f.z)&&Array.isArray(f.z[0])&&(f.transpose?delete f.transpose:f.transpose=!0),f.error_x&&f.error_y){var b=f.error_y,_="copy_ystyle"in b?b.copy_ystyle:!(b.color||b.thickness||b.width);x.swapAttrs(f,["error_?.copy_ystyle"]),_&&x.swapAttrs(f,["error_?.color","error_?.thickness","error_?.width"])}if(typeof f.hoverinfo=="string"){var T=f.hoverinfo.split("+");for(w=0;w<T.length;w++)T[w]==="x"?T[w]="y":T[w]==="y"&&(T[w]="x");f.hoverinfo=T.join("+")}},X.coerceTraceIndices=function(f,w){if(m(w))return[w];if(!Array.isArray(w)||!w.length)return f.data.map(function(T,L){return L});if(Array.isArray(w)){for(var b=[],_=0;_<w.length;_++)x.isIndex(w[_],f.data.length)?b.push(w[_]):x.warn("trace index (",w[_],") is not a number or is out of bounds");return b}return w},X.manageArrayContainers=function(f,w,b){var _=f.obj,T=f.parts,L=T.length,A=T[L-1],I=m(A);if(I&&w===null){var P=T.slice(0,L-1).join(".");x.nestedProperty(_,P).get().splice(A,1)}else I&&f.get()===void 0&&f.get()===void 0&&(b[f.astr]=null),f.set(w)};var c=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function i(f){var w=f.search(c);if(w>0)return f.substr(0,w)}X.hasParent=function(f,w){for(var b=i(w);b;){if(b in f)return!0;b=i(b)}return!1};var y=["x","y","z"];X.clearAxisTypes=function(f,w,b){for(var _=0;_<w.length;_++)for(var T=f._fullData[_],L=0;L<3;L++){var A=n(f,T,y[L]);if(A&&A.type!=="log"){var I=A._name,P=A._id.substr(1);if(P.substr(0,5)==="scene"){if(b[P]!==void 0)continue;I=P+"."+I}var S=I+".type";b[I]===void 0&&b[S]===void 0&&x.nestedProperty(f.layout,S).set(null)}}}},{"../components/color":367,"../lib":515,"../plots/cartesian/axis_ids":570,"../plots/plots":628,"../registry":647,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],550:[function(g,Q,X){var m=g("./plot_api");X._doPlot=m._doPlot,X.newPlot=m.newPlot,X.restyle=m.restyle,X.relayout=m.relayout,X.redraw=m.redraw,X.update=m.update,X._guiRestyle=m._guiRestyle,X._guiRelayout=m._guiRelayout,X._guiUpdate=m._guiUpdate,X._storeDirectGUIEdit=m._storeDirectGUIEdit,X.react=m.react,X.extendTraces=m.extendTraces,X.prependTraces=m.prependTraces,X.addTraces=m.addTraces,X.deleteTraces=m.deleteTraces,X.moveTraces=m.moveTraces,X.purge=m.purge,X.addFrames=m.addFrames,X.deleteFrames=m.deleteFrames,X.animate=m.animate,X.setPlotConfig=m.setPlotConfig,X.toImage=g("./to_image"),X.validate=g("./validate"),X.downloadImage=g("../snapshot/download");var v=g("./template_api");X.makeTemplate=v.makeTemplate,X.validateTemplate=v.validateTemplate},{"../snapshot/download":649,"./plot_api":552,"./template_api":557,"./to_image":558,"./validate":559}],551:[function(g,Q,X){var m=g("../lib/is_plain_object"),v=g("../lib/noop"),k=g("../lib/loggers"),x=g("../lib/search").sorterAsc,e=g("../registry");X.containerArrayMatch=g("./container_array_match");var t=X.isAddVal=function(l){return l==="add"||m(l)},r=X.isRemoveVal=function(l){return l===null||l==="remove"};X.applyContainerArrayChanges=function(l,n,d,u,o){var h=n.astr,s=e.getComponentMethod(h,"supplyLayoutDefaults"),a=e.getComponentMethod(h,"draw"),p=e.getComponentMethod(h,"drawOne"),c=u.replot||u.recalc||s===v||a===v,i=l.layout,y=l._fullLayout;if(d[""]){Object.keys(d).length>1&&k.warn("Full array edits are incompatible with other edits",h);var f=d[""][""];if(r(f))n.set(null);else{if(!Array.isArray(f))return k.warn("Unrecognized full array edit value",h,f),!0;n.set(f)}return!c&&(s(i,y),a(l),!0)}var w,b,_,T,L,A,I,P,S=Object.keys(d).map(Number).sort(x),E=n.get(),z=E||[],D=o(y,h).get(),U=[],H=-1,Y=z.length;for(w=0;w<S.length;w++)if(T=d[_=S[w]],L=Object.keys(T),A=T[""],I=t(A),_<0||_>z.length-(I?0:1))k.warn("index out of range",h,_);else if(A!==void 0)L.length>1&&k.warn("Insertion & removal are incompatible with edits to the same index.",h,_),r(A)?U.push(_):I?(A==="add"&&(A={}),z.splice(_,0,A),D&&D.splice(_,0,{})):k.warn("Unrecognized full object edit value",h,_,A),H===-1&&(H=_);else for(b=0;b<L.length;b++)P=h+"["+_+"].",o(z[_],L[b],P).set(T[L[b]]);for(w=U.length-1;w>=0;w--)z.splice(U[w],1),D&&D.splice(U[w],1);if(z.length?E||n.set(z):n.set(null),c)return!1;if(s(i,y),p!==v){var J;if(H===-1)J=S;else{for(Y=Math.max(z.length,Y),J=[],w=0;w<S.length&&!((_=S[w])>=H);w++)J.push(_);for(w=H;w<Y;w++)J.push(w)}for(w=0;w<J.length;w++)p(l,J[w])}else a(l);return!0}},{"../lib/is_plain_object":516,"../lib/loggers":519,"../lib/noop":524,"../lib/search":535,"../registry":647,"./container_array_match":547}],552:[function(g,Q,X){var m=g("@plotly/d3"),v=g("fast-isnumeric"),k=g("has-hover"),x=g("../lib"),e=x.nestedProperty,t=g("../lib/events"),r=g("../lib/queue"),l=g("../registry"),n=g("./plot_schema"),d=g("../plots/plots"),u=g("../plots/cartesian/axes"),o=g("../components/drawing"),h=g("../components/color"),s=g("../plots/cartesian/graph_interact").initInteractions,a=g("../constants/xmlns_namespaces"),p=g("../components/selections").clearOutline,c=g("./plot_config").dfltConfig,i=g("./manage_arrays"),y=g("./helpers"),f=g("./subroutines"),w=g("./edit_types"),b=g("../plots/cartesian/constants").AX_NAME_PATTERN,_=0;function T(oe){var de=oe._fullLayout;de._redrawFromAutoMarginCount?de._redrawFromAutoMarginCount--:oe.emit("plotly_afterplot")}function L(oe,de){try{oe._fullLayout._paper.style("background",de)}catch(Te){x.error(Te)}}function A(oe,de){L(oe,h.combine(de,"white"))}function I(oe,de){if(!oe._context){oe._context=x.extendDeep({},c);var Te=m.select("base");oe._context._baseUrl=Te.size()&&Te.attr("href")?window.location.href.split("#")[0]:""}var Ee,Me,De,Ie=oe._context;if(de){for(Me=Object.keys(de),Ee=0;Ee<Me.length;Ee++)(De=Me[Ee])!=="editable"&&De!=="edits"&&De in Ie&&(De==="setBackground"&&de[De]==="opaque"?Ie[De]=A:Ie[De]=de[De]);de.plot3dPixelRatio&&!Ie.plotGlPixelRatio&&(Ie.plotGlPixelRatio=Ie.plot3dPixelRatio);var Oe=de.editable;if(Oe!==void 0)for(Ie.editable=Oe,Me=Object.keys(Ie.edits),Ee=0;Ee<Me.length;Ee++)Ie.edits[Me[Ee]]=Oe;if(de.edits)for(Me=Object.keys(de.edits),Ee=0;Ee<Me.length;Ee++)(De=Me[Ee])in Ie.edits&&(Ie.edits[De]=de.edits[De]);Ie._exportedPlot=de._exportedPlot}Ie.staticPlot&&(Ie.editable=!1,Ie.edits={},Ie.autosizable=!1,Ie.scrollZoom=!1,Ie.doubleClick=!1,Ie.showTips=!1,Ie.showLink=!1,Ie.displayModeBar=!1),Ie.displayModeBar!=="hover"||k||(Ie.displayModeBar=!0),Ie.setBackground!=="transparent"&&typeof Ie.setBackground=="function"||(Ie.setBackground=L),Ie._hasZeroHeight=Ie._hasZeroHeight||oe.clientHeight===0,Ie._hasZeroWidth=Ie._hasZeroWidth||oe.clientWidth===0;var Ze=Ie.scrollZoom,Fe=Ie._scrollZoom={};if(Ze===!0)Fe.cartesian=1,Fe.gl3d=1,Fe.geo=1,Fe.mapbox=1;else if(typeof Ze=="string"){var Pe=Ze.split("+");for(Ee=0;Ee<Pe.length;Ee++)Fe[Pe[Ee]]=1}else Ze!==!1&&(Fe.gl3d=1,Fe.geo=1,Fe.mapbox=1)}function P(oe,de){var Te,Ee,Me=de+1,De=[];for(Te=0;Te<oe.length;Te++)(Ee=oe[Te])<0?De.push(Me+Ee):De.push(Ee);return De}function S(oe,de,Te){var Ee,Me;for(Ee=0;Ee<de.length;Ee++){if((Me=de[Ee])!==parseInt(Me,10))throw new Error("all values in "+Te+" must be integers");if(Me>=oe.data.length||Me<-oe.data.length)throw new Error(Te+" must be valid indices for gd.data.");if(de.indexOf(Me,Ee+1)>-1||Me>=0&&de.indexOf(-oe.data.length+Me)>-1||Me<0&&de.indexOf(oe.data.length+Me)>-1)throw new Error("each index in "+Te+" must be unique.")}}function E(oe,de,Te){if(!Array.isArray(oe.data))throw new Error("gd.data must be an array.");if(de===void 0)throw new Error("currentIndices is a required argument.");if(Array.isArray(de)||(de=[de]),S(oe,de,"currentIndices"),Te===void 0||Array.isArray(Te)||(Te=[Te]),Te!==void 0&&S(oe,Te,"newIndices"),Te!==void 0&&de.length!==Te.length)throw new Error("current and new indices must be of equal length.")}function z(oe,de,Te,Ee,Me){(function(Ge,$e,ot,vt){var bt=x.isPlainObject(vt);if(!Array.isArray(Ge.data))throw new Error("gd.data must be an array");if(!x.isPlainObject($e))throw new Error("update must be a key:value object");if(ot===void 0)throw new Error("indices must be an integer or array of integers");for(var yt in S(Ge,ot,"indices"),$e){if(!Array.isArray($e[yt])||$e[yt].length!==ot.length)throw new Error("attribute "+yt+" must be an array of length equal to indices array length");if(bt&&(!(yt in vt)||!Array.isArray(vt[yt])||vt[yt].length!==$e[yt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}})(oe,de,Te,Ee);for(var De=function(Ge,$e,ot,vt){var bt,yt,tt,Ke,mt,Ft=x.isPlainObject(vt),Vt=[];for(var Xt in Array.isArray(ot)||(ot=[ot]),ot=P(ot,Ge.data.length-1),$e)for(var Gt=0;Gt<ot.length;Gt++){if(bt=Ge.data[ot[Gt]],yt=(tt=e(bt,Xt)).get(),Ke=$e[Xt][Gt],!x.isArrayOrTypedArray(Ke))throw new Error("attribute: "+Xt+" index: "+Gt+" must be an array");if(!x.isArrayOrTypedArray(yt))throw new Error("cannot extend missing or non-array attribute: "+Xt);if(yt.constructor!==Ke.constructor)throw new Error("cannot extend array with an array of a different type: "+Xt);mt=Ft?vt[Xt][Gt]:vt,v(mt)||(mt=-1),Vt.push({prop:tt,target:yt,insert:Ke,maxp:Math.floor(mt)})}return Vt}(oe,de,Te,Ee),Ie={},Oe={},Ze=0;Ze<De.length;Ze++){var Fe=De[Ze].prop,Pe=De[Ze].maxp,ze=Me(De[Ze].target,De[Ze].insert,Pe);Fe.set(ze[0]),Array.isArray(Ie[Fe.astr])||(Ie[Fe.astr]=[]),Ie[Fe.astr].push(ze[1]),Array.isArray(Oe[Fe.astr])||(Oe[Fe.astr]=[]),Oe[Fe.astr].push(De[Ze].target.length)}return{update:Ie,maxPoints:Oe}}function D(oe,de){var Te=new oe.constructor(oe.length+de.length);return Te.set(oe),Te.set(de,oe.length),Te}function U(oe,de,Te,Ee){oe=x.getGraphDiv(oe),y.clearPromiseQueue(oe);var Me={};if(typeof de=="string")Me[de]=Te;else{if(!x.isPlainObject(de))return x.warn("Restyle fail.",de,Te,Ee),Promise.reject();Me=x.extendFlat({},de),Ee===void 0&&(Ee=Te)}Object.keys(Me).length&&(oe.changed=!0);var De=y.coerceTraceIndices(oe,Ee),Ie=W(oe,Me,De),Oe=Ie.flags;Oe.calc&&(oe.calcdata=void 0),Oe.clearAxisTypes&&y.clearAxisTypes(oe,De,{});var Ze=[];Oe.fullReplot?Ze.push(X._doPlot):(Ze.push(d.previousPromises),d.supplyDefaults(oe),Oe.markerSize&&(d.doCalcdata(oe),B(Ze)),Oe.style&&Ze.push(f.doTraceStyle),Oe.colorbars&&Ze.push(f.doColorBars),Ze.push(T)),Ze.push(d.rehover,d.redrag,d.reselect),r.add(oe,U,[oe,Ie.undoit,Ie.traces],U,[oe,Ie.redoit,Ie.traces]);var Fe=x.syncOrAsync(Ze,oe);return Fe&&Fe.then||(Fe=Promise.resolve()),Fe.then(function(){return oe.emit("plotly_restyle",Ie.eventData),oe})}function H(oe){return oe===void 0?null:oe}function Y(oe,de){return de?function(Te,Ee,Me){var De=e(Te,Ee),Ie=De.set;return De.set=function(Oe){J((Me||"")+Ee,De.get(),Oe,oe),Ie(Oe)},De}:e}function J(oe,de,Te,Ee){if(Array.isArray(de)||Array.isArray(Te))for(var Me=Array.isArray(de)?de:[],De=Array.isArray(Te)?Te:[],Ie=Math.max(Me.length,De.length),Oe=0;Oe<Ie;Oe++)J(oe+"["+Oe+"]",Me[Oe],De[Oe],Ee);else if(x.isPlainObject(de)||x.isPlainObject(Te)){var Ze=x.isPlainObject(de)?de:{},Fe=x.isPlainObject(Te)?Te:{},Pe=x.extendFlat({},Ze,Fe);for(var ze in Pe)J(oe+"."+ze,Ze[ze],Fe[ze],Ee)}else Ee[oe]===void 0&&(Ee[oe]=H(de))}function W(oe,de,Te){var Ee,Me=oe._fullLayout,De=oe._fullData,Ie=oe.data,Oe=Me._guiEditing,Ze=Y(Me._preGUI,Oe),Fe=x.extendDeepAll({},de);Z(de);var Pe,ze=w.traceFlags(),Ge={},$e={};function ot(){return Te.map(function(){})}function vt(nt){var ft=u.id2name(nt);Pe.indexOf(ft)===-1&&Pe.push(ft)}function bt(nt){return"LAYOUT"+nt+".autorange"}function yt(nt){return"LAYOUT"+nt+".range"}function tt(nt){for(var ft=nt;ft<De.length;ft++)if(De[ft]._input===Ie[nt])return De[ft]}function Ke(nt,ft,Mt){if(Array.isArray(nt))nt.forEach(function(Ut){Ke(Ut,ft,Mt)});else if(!(nt in de)&&!y.hasParent(de,nt)){var Nt;if(nt.substr(0,6)==="LAYOUT")Nt=Ze(oe.layout,nt.replace("LAYOUT",""));else{var Zt=Te[Mt];Nt=Y(Me._tracePreGUI[tt(Zt)._fullInput.uid],Oe)(Ie[Zt],nt)}nt in $e||($e[nt]=ot()),$e[nt][Mt]===void 0&&($e[nt][Mt]=H(Nt.get())),ft!==void 0&&Nt.set(ft)}}function mt(nt){return function(ft){return De[ft][nt]}}function Ft(nt){return function(ft,Mt){return ft===!1?De[Te[Mt]][nt]:null}}for(var Vt in de){if(y.hasParent(de,Vt))throw new Error("cannot set "+Vt+" and a parent attribute simultaneously");var Xt,Gt,nr,It,Be,He,he=de[Vt];if(Vt!=="autobinx"&&Vt!=="autobiny"||(Vt=Vt.charAt(Vt.length-1)+"bins",he=Array.isArray(he)?he.map(Ft(Vt)):he===!1?Te.map(mt(Vt)):null),Ge[Vt]=he,Vt.substr(0,6)!=="LAYOUT"){for($e[Vt]=ot(),Ee=0;Ee<Te.length;Ee++)if(Xt=Ie[Te[Ee]],Gt=tt(Te[Ee]),It=(nr=Y(Me._tracePreGUI[Gt._fullInput.uid],Oe)(Xt,Vt)).get(),(Be=Array.isArray(he)?he[Ee%he.length]:he)!==void 0){var be=nr.parts[nr.parts.length-1],Re=Vt.substr(0,Vt.length-be.length-1),Ue=Re?Re+".":"",Xe=Re?e(Gt,Re).get():Gt;if((He=n.getTraceValObject(Gt,nr.parts))&&He.impliedEdits&&Be!==null)for(var qe in He.impliedEdits)Ke(x.relativeAttr(Vt,qe),He.impliedEdits[qe],Ee);else if(be!=="thicknessmode"&&be!=="lenmode"||It===Be||Be!=="fraction"&&Be!=="pixels"||!Xe){if(Vt==="type"&&(Be==="pie"!=(It==="pie")||Be==="funnelarea"!=(It==="funnelarea"))){var st="x",it="y";Be!=="bar"&&It!=="bar"||Xt.orientation!=="h"||(st="y",it="x"),x.swapAttrs(Xt,["?","?src"],"labels",st),x.swapAttrs(Xt,["d?","?0"],"label",st),x.swapAttrs(Xt,["?","?src"],"values",it),It==="pie"||It==="funnelarea"?(e(Xt,"marker.color").set(e(Xt,"marker.colors").get()),Me._pielayer.selectAll("g.trace").remove()):l.traceIs(Xt,"cartesian")&&e(Xt,"marker.colors").set(e(Xt,"marker.color").get())}}else{var Tt=Me._size,Pt=Xe.orient,rt=Pt==="top"||Pt==="bottom";if(be==="thicknessmode"){var ut=rt?Tt.h:Tt.w;Ke(Ue+"thickness",Xe.thickness*(Be==="fraction"?1/ut:ut),Ee)}else{var Bt=rt?Tt.w:Tt.h;Ke(Ue+"len",Xe.len*(Be==="fraction"?1/Bt:Bt),Ee)}}if($e[Vt][Ee]=H(It),["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Vt)!==-1){if(Vt==="orientation"){nr.set(Be);var wt=Xt.x&&!Xt.y?"h":"v";if((nr.get()||wt)===Gt.orientation)continue}else Vt==="orientationaxes"&&(Xt.orientation={v:"h",h:"v"}[Gt.orientation]);y.swapXYData(Xt),ze.calc=ze.clearAxisTypes=!0}else d.dataArrayContainers.indexOf(nr.parts[0])!==-1?(y.manageArrayContainers(nr,Be,$e),ze.calc=!0):(He?He.arrayOk&&!l.traceIs(Gt,"regl")&&(x.isArrayOrTypedArray(Be)||x.isArrayOrTypedArray(It))?ze.calc=!0:w.update(ze,He):ze.calc=!0,nr.set(Be))}if(["swapxyaxes","orientationaxes"].indexOf(Vt)!==-1&&u.swap(oe,Te),Vt==="orientationaxes"){var Lt=e(oe.layout,"hovermode"),Se=Lt.get();Se==="x"?Lt.set("y"):Se==="y"?Lt.set("x"):Se==="x unified"?Lt.set("y unified"):Se==="y unified"&&Lt.set("x unified")}if(["orientation","type"].indexOf(Vt)!==-1){for(Pe=[],Ee=0;Ee<Te.length;Ee++){var We=Ie[Te[Ee]];l.traceIs(We,"cartesian")&&(vt(We.xaxis||"x"),vt(We.yaxis||"y"))}Ke(Pe.map(bt),!0,0),Ke(Pe.map(yt),[0,1],0)}}else nr=Ze(oe.layout,Vt.replace("LAYOUT","")),$e[Vt]=[H(nr.get())],nr.set(Array.isArray(he)?he[0]:he),ze.calc=!0}return(ze.calc||ze.plot)&&(ze.fullReplot=!0),{flags:ze,undoit:$e,redoit:Ge,traces:Te,eventData:x.extendDeepNoArrays([],[Fe,Te])}}function Z(oe){var de,Te,Ee,Me=x.counterRegex("axis",".title",!1,!1),De=/colorbar\.title$/,Ie=Object.keys(oe);for(de=0;de<Ie.length;de++)Te=Ie[de],Ee=oe[Te],Te!=="title"&&!Me.test(Te)&&!De.test(Te)||typeof Ee!="string"&&typeof Ee!="number"?Te.indexOf("titlefont")>-1&&Te.indexOf("grouptitlefont")===-1?Oe(Te,Te.replace("titlefont","title.font")):Te.indexOf("titleposition")>-1?Oe(Te,Te.replace("titleposition","title.position")):Te.indexOf("titleside")>-1?Oe(Te,Te.replace("titleside","title.side")):Te.indexOf("titleoffset")>-1&&Oe(Te,Te.replace("titleoffset","title.offset")):Oe(Te,Te.replace("title","title.text"));function Oe(Ze,Fe){oe[Fe]=oe[Ze],delete oe[Ze]}}function re(oe,de,Te){oe=x.getGraphDiv(oe),y.clearPromiseQueue(oe);var Ee={};if(typeof de=="string")Ee[de]=Te;else{if(!x.isPlainObject(de))return x.warn("Relayout fail.",de,Te),Promise.reject();Ee=x.extendFlat({},de)}Object.keys(Ee).length&&(oe.changed=!0);var Me=$(oe,Ee),De=Me.flags;De.calc&&(oe.calcdata=void 0);var Ie=[d.previousPromises];De.layoutReplot?Ie.push(f.layoutReplot):Object.keys(Ee).length&&(V(oe,De,Me)||d.supplyDefaults(oe),De.legend&&Ie.push(f.doLegend),De.layoutstyle&&Ie.push(f.layoutStyles),De.axrange&&B(Ie,Me.rangesAltered),De.ticks&&Ie.push(f.doTicksRelayout),De.modebar&&Ie.push(f.doModeBar),De.camera&&Ie.push(f.doCamera),De.colorbars&&Ie.push(f.doColorBars),Ie.push(T)),Ie.push(d.rehover,d.redrag,d.reselect),r.add(oe,re,[oe,Me.undoit],re,[oe,Me.redoit]);var Oe=x.syncOrAsync(Ie,oe);return Oe&&Oe.then||(Oe=Promise.resolve(oe)),Oe.then(function(){return oe.emit("plotly_relayout",Me.eventData),oe})}function V(oe,de,Te){var Ee=oe._fullLayout;if(!de.axrange)return!1;for(var Me in de)if(Me!=="axrange"&&de[Me])return!1;for(var De in Te.rangesAltered){var Ie=u.id2name(De),Oe=oe.layout[Ie],Ze=Ee[Ie];if(Ze.autorange=Oe.autorange,Oe.range&&(Ze.range=Oe.range.slice()),Ze.cleanRange(),Ze._matchGroup){for(var Fe in Ze._matchGroup)if(Fe!==De){var Pe=Ee[u.id2name(Fe)];Pe.autorange=Ze.autorange,Pe.range=Ze.range.slice(),Pe._input.range=Ze.range.slice()}}}return!0}function B(oe,de){var Te=de?function(Ee){var Me=[];for(var De in de){var Ie=u.getFromId(Ee,De);if(Me.push(De),(Ie.ticklabelposition||"").indexOf("inside")!==-1&&Ie._anchorAxis&&Me.push(Ie._anchorAxis._id),Ie._matchGroup)for(var Oe in Ie._matchGroup)de[Oe]||Me.push(Oe)}return u.draw(Ee,Me,{skipTitle:!0})}:function(Ee){return u.draw(Ee,"redraw")};oe.push(p,f.doAutoRangeAndConstraints,Te,f.drawData,f.finalDraw)}var j=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,ee=/^[xyz]axis[0-9]*\.autorange$/,N=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function $(oe,de){var Te,Ee,Me,De=oe.layout,Ie=oe._fullLayout,Oe=Ie._guiEditing,Ze=Y(Ie._preGUI,Oe),Fe=Object.keys(de),Pe=u.list(oe),ze=x.extendDeepAll({},de),Ge={};for(Z(de),Fe=Object.keys(de),Ee=0;Ee<Fe.length;Ee++)if(Fe[Ee].indexOf("allaxes")===0){for(Me=0;Me<Pe.length;Me++){var $e=Pe[Me]._id.substr(1),ot=$e.indexOf("scene")!==-1?$e+".":"",vt=Fe[Ee].replace("allaxes",ot+Pe[Me]._name);de[vt]||(de[vt]=de[Fe[Ee]])}delete de[Fe[Ee]]}var bt=w.layoutFlags(),yt={},tt={};function Ke(Zt,Ut){if(Array.isArray(Zt))Zt.forEach(function(Tr){Ke(Tr,Ut)});else if(!(Zt in de)&&!y.hasParent(de,Zt)){var fr=Ze(De,Zt);Zt in tt||(tt[Zt]=H(fr.get())),Ut!==void 0&&fr.set(Ut)}}var mt,Ft={};function Vt(Zt){var Ut=u.name2id(Zt.split(".")[0]);return Ft[Ut]=1,Ut}for(var Xt in de){if(y.hasParent(de,Xt))throw new Error("cannot set "+Xt+" and a parent attribute simultaneously");for(var Gt=Ze(De,Xt),nr=de[Xt],It=Gt.parts.length-1;It>0&&typeof Gt.parts[It]!="string";)It--;var Be=Gt.parts[It],He=Gt.parts[It-1]+"."+Be,he=Gt.parts.slice(0,It).join("."),be=e(oe.layout,he).get(),Re=e(Ie,he).get(),Ue=Gt.get();if(nr!==void 0){yt[Xt]=nr,tt[Xt]=Be==="reverse"?nr:H(Ue);var Xe=n.getLayoutValObject(Ie,Gt.parts);if(Xe&&Xe.impliedEdits&&nr!==null)for(var qe in Xe.impliedEdits)Ke(x.relativeAttr(Xt,qe),Xe.impliedEdits[qe]);if(["width","height"].indexOf(Xt)!==-1)if(nr){Ke("autosize",null);var st=Xt==="height"?"width":"height";Ke(st,Ie[st])}else Ie[Xt]=oe._initialAutoSize[Xt];else if(Xt==="autosize")Ke("width",nr?null:Ie.width),Ke("height",nr?null:Ie.height);else if(He.match(j))Vt(He),e(Ie,he+"._inputRange").set(null);else if(He.match(ee)){Vt(He),e(Ie,he+"._inputRange").set(null);var it=e(Ie,he).get();it._inputDomain&&(it._input.domain=it._inputDomain.slice())}else He.match(N)&&e(Ie,he+"._inputDomain").set(null);if(Be==="type"){mt=be;var Tt=Re.type==="linear"&&nr==="log",Pt=Re.type==="log"&&nr==="linear";if(Tt||Pt){if(mt&&mt.range)if(Re.autorange)Tt&&(mt.range=mt.range[1]>mt.range[0]?[1,2]:[2,1]);else{var rt=mt.range[0],ut=mt.range[1];Tt?(rt<=0&&ut<=0&&Ke(he+".autorange",!0),rt<=0?rt=ut/1e6:ut<=0&&(ut=rt/1e6),Ke(he+".range[0]",Math.log(rt)/Math.LN10),Ke(he+".range[1]",Math.log(ut)/Math.LN10)):(Ke(he+".range[0]",Math.pow(10,rt)),Ke(he+".range[1]",Math.pow(10,ut)))}else Ke(he+".autorange",!0);Array.isArray(Ie._subplots.polar)&&Ie._subplots.polar.length&&Ie[Gt.parts[0]]&&Gt.parts[1]==="radialaxis"&&delete Ie[Gt.parts[0]]._subplot.viewInitial["radialaxis.range"],l.getComponentMethod("annotations","convertCoords")(oe,Re,nr,Ke),l.getComponentMethod("images","convertCoords")(oe,Re,nr,Ke)}else Ke(he+".autorange",!0),Ke(he+".range",null);e(Ie,he+"._inputRange").set(null)}else if(Be.match(b)){var Bt=e(Ie,Xt).get(),wt=(nr||{}).type;wt&&wt!=="-"||(wt="linear"),l.getComponentMethod("annotations","convertCoords")(oe,Bt,wt,Ke),l.getComponentMethod("images","convertCoords")(oe,Bt,wt,Ke)}var Lt=i.containerArrayMatch(Xt);if(Lt){Te=Lt.array,Ee=Lt.index;var Se=Lt.property,We=Xe||{editType:"calc"};Ee!==""&&Se===""&&(i.isAddVal(nr)?tt[Xt]=null:i.isRemoveVal(nr)?tt[Xt]=(e(De,Te).get()||[])[Ee]:x.warn("unrecognized full object value",de)),w.update(bt,We),Ge[Te]||(Ge[Te]={});var nt=Ge[Te][Ee];nt||(nt=Ge[Te][Ee]={}),nt[Se]=nr,delete de[Xt]}else Be==="reverse"?(be.range?be.range.reverse():(Ke(he+".autorange",!0),be.range=[1,0]),Re.autorange?bt.calc=!0:bt.plot=!0):(Xt==="dragmode"&&(nr===!1&&Ue!==!1||nr!==!1&&Ue===!1)||Ie._has("scatter-like")&&Ie._has("regl")&&Xt==="dragmode"&&(nr==="lasso"||nr==="select")&&Ue!=="lasso"&&Ue!=="select"||Ie._has("gl2d")?bt.plot=!0:Xe?w.update(bt,Xe):bt.calc=!0,Gt.set(nr))}}for(Te in Ge)i.applyContainerArrayChanges(oe,Ze(De,Te),Ge[Te],bt,Ze)||(bt.plot=!0);for(var ft in Ft){var Mt=(mt=u.getFromId(oe,ft))&&mt._constraintGroup;if(Mt)for(var Nt in bt.calc=!0,Mt)Ft[Nt]||(u.getFromId(oe,Nt)._constraintShrinkable=!0)}return(K(oe)||de.height||de.width)&&(bt.plot=!0),(bt.plot||bt.calc)&&(bt.layoutReplot=!0),{flags:bt,rangesAltered:Ft,undoit:tt,redoit:yt,eventData:ze}}function K(oe){var de=oe._fullLayout,Te=de.width,Ee=de.height;return oe.layout.autosize&&d.plotAutoSize(oe,oe.layout,de),de.width!==Te||de.height!==Ee}function te(oe,de,Te,Ee){oe=x.getGraphDiv(oe),y.clearPromiseQueue(oe),x.isPlainObject(de)||(de={}),x.isPlainObject(Te)||(Te={}),Object.keys(de).length&&(oe.changed=!0),Object.keys(Te).length&&(oe.changed=!0);var Me=y.coerceTraceIndices(oe,Ee),De=W(oe,x.extendFlat({},de),Me),Ie=De.flags,Oe=$(oe,x.extendFlat({},Te)),Ze=Oe.flags;(Ie.calc||Ze.calc)&&(oe.calcdata=void 0),Ie.clearAxisTypes&&y.clearAxisTypes(oe,Me,Te);var Fe=[];Ze.layoutReplot?Fe.push(f.layoutReplot):Ie.fullReplot?Fe.push(X._doPlot):(Fe.push(d.previousPromises),V(oe,Ze,Oe)||d.supplyDefaults(oe),Ie.style&&Fe.push(f.doTraceStyle),(Ie.colorbars||Ze.colorbars)&&Fe.push(f.doColorBars),Ze.legend&&Fe.push(f.doLegend),Ze.layoutstyle&&Fe.push(f.layoutStyles),Ze.axrange&&B(Fe,Oe.rangesAltered),Ze.ticks&&Fe.push(f.doTicksRelayout),Ze.modebar&&Fe.push(f.doModeBar),Ze.camera&&Fe.push(f.doCamera),Fe.push(T)),Fe.push(d.rehover,d.redrag,d.reselect),r.add(oe,te,[oe,De.undoit,Oe.undoit,De.traces],te,[oe,De.redoit,Oe.redoit,De.traces]);var Pe=x.syncOrAsync(Fe,oe);return Pe&&Pe.then||(Pe=Promise.resolve(oe)),Pe.then(function(){return oe.emit("plotly_update",{data:De.eventData,layout:Oe.eventData}),oe})}function ie(oe){return function(de){de._fullLayout._guiEditing=!0;var Te=oe.apply(null,arguments);return de._fullLayout._guiEditing=!1,Te}}var le=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],se=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function ve(oe,de){for(var Te=0;Te<de.length;Te++){var Ee=de[Te],Me=oe.match(Ee.pattern);if(Me){var De=Me[1]||"";return{head:De,tail:oe.substr(De.length+1),attr:Ee.attr}}}}function fe(oe,de){var Te=e(de,oe).get();if(Te!==void 0)return Te;var Ee=oe.split(".");for(Ee.pop();Ee.length>1;)if(Ee.pop(),(Te=e(de,Ee.join(".")+".uirevision").get())!==void 0)return Te;return de.uirevision}function ye(oe,de){for(var Te=0;Te<de.length;Te++)if(de[Te]._fullInput.uid===oe)return Te;return-1}function Ae(oe,de,Te){for(var Ee=0;Ee<de.length;Ee++)if(de[Ee].uid===oe)return Ee;return!de[Te]||de[Te].uid?-1:Te}function pe(oe,de){var Te=x.isPlainObject(oe),Ee=Array.isArray(oe);return Te||Ee?(Te&&x.isPlainObject(de)||Ee&&Array.isArray(de))&&JSON.stringify(oe)===JSON.stringify(de):oe===de}function ge(oe,de,Te,Ee){var Me,De,Ie,Oe=Ee.getValObject,Ze=Ee.flags,Fe=Ee.immutable,Pe=Ee.inArray,ze=Ee.arrayIndex;function Ge(){var be=Me.editType;Pe&&be.indexOf("arraydraw")!==-1?x.pushUnique(Ze.arrays[Pe],ze):(w.update(Ze,Me),be!=="none"&&Ze.nChanges++,Ee.transition&&Me.anim&&Ze.nChangesAnim++,(j.test(Ie)||ee.test(Ie))&&(Ze.rangesAltered[Te[0]]=1),N.test(Ie)&&e(de,"_inputDomain").set(null),De==="datarevision"&&(Ze.newDataRevision=1))}function $e(be){return be.valType==="data_array"||be.arrayOk}for(De in oe){if(Ze.calc&&!Ee.transition)return;var ot=oe[De],vt=de[De],bt=Te.concat(De);if(Ie=bt.join("."),De.charAt(0)!=="_"&&typeof ot!="function"&&ot!==vt){if((De==="tick0"||De==="dtick")&&Te[0]!=="geo"){var yt=de.tickmode;if(yt==="auto"||yt==="array"||!yt)continue}if((De!=="range"||!de.autorange)&&(De!=="zmin"&&De!=="zmax"||de.type!=="contourcarpet")&&(Me=Oe(bt))&&(!Me._compareAsJSON||JSON.stringify(ot)!==JSON.stringify(vt))){var tt,Ke=Me.valType,mt=$e(Me),Ft=Array.isArray(ot),Vt=Array.isArray(vt);if(Ft&&Vt){var Xt="_input_"+De,Gt=oe[Xt],nr=de[Xt];if(Array.isArray(Gt)&&Gt===nr)continue}if(vt===void 0)mt&&Ft?Ze.calc=!0:Ge();else if(Me._isLinkedToArray){var It=[],Be=!1;Pe||(Ze.arrays[De]=It);var He=Math.min(ot.length,vt.length),he=Math.max(ot.length,vt.length);if(He!==he){if(Me.editType!=="arraydraw"){Ge();continue}Be=!0}for(tt=0;tt<He;tt++)ge(ot[tt],vt[tt],bt.concat(tt),x.extendFlat({inArray:De,arrayIndex:tt},Ee));if(Be)for(tt=He;tt<he;tt++)It.push(tt)}else!Ke&&x.isPlainObject(ot)?ge(ot,vt,bt,Ee):mt?Ft&&Vt?(Fe&&(Ze.calc=!0),(Fe||Ee.newDataRevision)&&Ge()):Ft!==Vt?Ze.calc=!0:Ge():Ft&&Vt&&ot.length===vt.length&&String(ot)===String(vt)||Ge()}}}for(De in de)if(!(De in oe)&&De.charAt(0)!=="_"&&typeof de[De]!="function"){if($e(Me=Oe(Te.concat(De)))&&Array.isArray(de[De]))return void(Ze.calc=!0);Ge()}}function we(oe){var de=oe._fullLayout,Te=oe.getBoundingClientRect();if(!x.equalDomRects(Te,de._lastBBox)){var Ee=de._invTransform=x.inverseTransformMatrix(x.getFullTransformMatrix(oe));de._invScaleX=Math.sqrt(Ee[0][0]*Ee[0][0]+Ee[0][1]*Ee[0][1]+Ee[0][2]*Ee[0][2]),de._invScaleY=Math.sqrt(Ee[1][0]*Ee[1][0]+Ee[1][1]*Ee[1][1]+Ee[1][2]*Ee[1][2]),de._lastBBox=Te}}X.animate=function(oe,de,Te){if(oe=x.getGraphDiv(oe),!x.isPlotDiv(oe))throw new Error("This element is not a Plotly plot: "+oe+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Ee=oe._transitionData;Ee._frameQueue||(Ee._frameQueue=[]);var Me=(Te=d.supplyAnimationDefaults(Te)).transition,De=Te.frame;function Ie(Fe){return Array.isArray(Me)?Fe>=Me.length?Me[0]:Me[Fe]:Me}function Oe(Fe){return Array.isArray(De)?Fe>=De.length?De[0]:De[Fe]:De}function Ze(Fe,Pe){var ze=0;return function(){if(Fe&&++ze===Pe)return Fe()}}return Ee._frameWaitingCnt===void 0&&(Ee._frameWaitingCnt=0),new Promise(function(Fe,Pe){function ze(){Ee._currentFrame&&Ee._currentFrame.onComplete&&Ee._currentFrame.onComplete();var Gt=Ee._currentFrame=Ee._frameQueue.shift();if(Gt){var nr=Gt.name?Gt.name.toString():null;oe._fullLayout._currentFrame=nr,Ee._lastFrameAt=Date.now(),Ee._timeToNext=Gt.frameOpts.duration,d.transition(oe,Gt.frame.data,Gt.frame.layout,y.coerceTraceIndices(oe,Gt.frame.traces),Gt.frameOpts,Gt.transitionOpts).then(function(){Gt.onComplete&&Gt.onComplete()}),oe.emit("plotly_animatingframe",{name:nr,frame:Gt.frame,animation:{frame:Gt.frameOpts,transition:Gt.transitionOpts}})}else oe.emit("plotly_animated"),window.cancelAnimationFrame(Ee._animationRaf),Ee._animationRaf=null}function Ge(){oe.emit("plotly_animating"),Ee._lastFrameAt=-1/0,Ee._timeToNext=0,Ee._runningTransitions=0,Ee._currentFrame=null;var Gt=function(){Ee._animationRaf=window.requestAnimationFrame(Gt),Date.now()-Ee._lastFrameAt>Ee._timeToNext&&ze()};Gt()}var $e,ot,vt=0;function bt(Gt){return Array.isArray(Me)?vt>=Me.length?Gt.transitionOpts=Me[vt]:Gt.transitionOpts=Me[0]:Gt.transitionOpts=Me,vt++,Gt}var yt=[],tt=de==null,Ke=Array.isArray(de);if(!tt&&!Ke&&x.isPlainObject(de))yt.push({type:"object",data:bt(x.extendFlat({},de))});else if(tt||["string","number"].indexOf(typeof de)!==-1)for($e=0;$e<Ee._frames.length;$e++)(ot=Ee._frames[$e])&&(tt||String(ot.group)===String(de))&&yt.push({type:"byname",name:String(ot.name),data:bt({name:ot.name})});else if(Ke)for($e=0;$e<de.length;$e++){var mt=de[$e];["number","string"].indexOf(typeof mt)!==-1?(mt=String(mt),yt.push({type:"byname",name:mt,data:bt({name:mt})})):x.isPlainObject(mt)&&yt.push({type:"object",data:bt(x.extendFlat({},mt))})}for($e=0;$e<yt.length;$e++)if((ot=yt[$e]).type==="byname"&&!Ee._frameHash[ot.data.name])return x.warn('animate failure: frame not found: "'+ot.data.name+'"'),void Pe();["next","immediate"].indexOf(Te.mode)!==-1&&function(){if(Ee._frameQueue.length!==0){for(;Ee._frameQueue.length;){var Gt=Ee._frameQueue.pop();Gt.onInterrupt&&Gt.onInterrupt()}oe.emit("plotly_animationinterrupted",[])}}(),Te.direction==="reverse"&&yt.reverse();var Ft=oe._fullLayout._currentFrame;if(Ft&&Te.fromcurrent){var Vt=-1;for($e=0;$e<yt.length;$e++)if((ot=yt[$e]).type==="byname"&&ot.name===Ft){Vt=$e;break}if(Vt>0&&Vt<yt.length-1){var Xt=[];for($e=0;$e<yt.length;$e++)ot=yt[$e],(yt[$e].type!=="byname"||$e>Vt)&&Xt.push(ot);yt=Xt}}yt.length>0?function(Gt){if(Gt.length!==0){for(var nr=0;nr<Gt.length;nr++){var It;It=Gt[nr].type==="byname"?d.computeFrame(oe,Gt[nr].name):Gt[nr].data;var Be=Oe(nr),He=Ie(nr);He.duration=Math.min(He.duration,Be.duration);var he={frame:It,name:Gt[nr].name,frameOpts:Be,transitionOpts:He};nr===Gt.length-1&&(he.onComplete=Ze(Fe,2),he.onInterrupt=Pe),Ee._frameQueue.push(he)}Te.mode==="immediate"&&(Ee._lastFrameAt=-1/0),Ee._animationRaf||Ge()}}(yt):(oe.emit("plotly_animated"),Fe())})},X.addFrames=function(oe,de,Te){if(oe=x.getGraphDiv(oe),de==null)return Promise.resolve();if(!x.isPlotDiv(oe))throw new Error("This element is not a Plotly plot: "+oe+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Ee,Me,De,Ie,Oe=oe._transitionData._frames,Ze=oe._transitionData._frameHash;if(!Array.isArray(de))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+de);var Fe=Oe.length+2*de.length,Pe=[],ze={};for(Ee=de.length-1;Ee>=0;Ee--)if(x.isPlainObject(de[Ee])){var Ge=de[Ee].name,$e=(Ze[Ge]||ze[Ge]||{}).name,ot=de[Ee].name,vt=Ze[$e]||ze[$e];$e&&ot&&typeof ot=="number"&&vt&&_<5&&(_++,x.warn('addFrames: overwriting frame "'+(Ze[$e]||ze[$e]).name+'" with a frame whose name of type "number" also equates to "'+$e+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),_===5&&x.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),ze[Ge]={name:Ge},Pe.push({frame:d.supplyFrameDefaults(de[Ee]),index:Te&&Te[Ee]!==void 0&&Te[Ee]!==null?Te[Ee]:Fe+Ee})}Pe.sort(function(Xt,Gt){return Xt.index>Gt.index?-1:Xt.index<Gt.index?1:0});var bt=[],yt=[],tt=Oe.length;for(Ee=Pe.length-1;Ee>=0;Ee--){if(typeof(Me=Pe[Ee].frame).name=="number"&&x.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Me.name)for(;Ze[Me.name="frame "+oe._transitionData._counter++];);if(Ze[Me.name]){for(De=0;De<Oe.length&&(Oe[De]||{}).name!==Me.name;De++);bt.push({type:"replace",index:De,value:Me}),yt.unshift({type:"replace",index:De,value:Oe[De]})}else Ie=Math.max(0,Math.min(Pe[Ee].index,tt)),bt.push({type:"insert",index:Ie,value:Me}),yt.unshift({type:"delete",index:Ie}),tt++}var Ke=d.modifyFrames,mt=d.modifyFrames,Ft=[oe,yt],Vt=[oe,bt];return r&&r.add(oe,Ke,Ft,mt,Vt),d.modifyFrames(oe,bt)},X.deleteFrames=function(oe,de){if(oe=x.getGraphDiv(oe),!x.isPlotDiv(oe))throw new Error("This element is not a Plotly plot: "+oe);var Te,Ee,Me=oe._transitionData._frames,De=[],Ie=[];if(!de)for(de=[],Te=0;Te<Me.length;Te++)de.push(Te);for((de=de.slice()).sort(),Te=de.length-1;Te>=0;Te--)Ee=de[Te],De.push({type:"delete",index:Ee}),Ie.unshift({type:"insert",index:Ee,value:Me[Ee]});var Oe=d.modifyFrames,Ze=d.modifyFrames,Fe=[oe,Ie],Pe=[oe,De];return r&&r.add(oe,Oe,Fe,Ze,Pe),d.modifyFrames(oe,De)},X.addTraces=function oe(de,Te,Ee){de=x.getGraphDiv(de);var Me,De,Ie=[],Oe=X.deleteTraces,Ze=oe,Fe=[de,Ie],Pe=[de,Te];for(function(ze,Ge,$e){var ot,vt;if(!Array.isArray(ze.data))throw new Error("gd.data must be an array.");if(Ge===void 0)throw new Error("traces must be defined.");for(Array.isArray(Ge)||(Ge=[Ge]),ot=0;ot<Ge.length;ot++)if(typeof(vt=Ge[ot])!="object"||Array.isArray(vt)||vt===null)throw new Error("all values in traces array must be non-array objects");if($e===void 0||Array.isArray($e)||($e=[$e]),$e!==void 0&&$e.length!==Ge.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(de,Te,Ee),Array.isArray(Te)||(Te=[Te]),Te=Te.map(function(ze){return x.extendFlat({},ze)}),y.cleanData(Te),Me=0;Me<Te.length;Me++)de.data.push(Te[Me]);for(Me=0;Me<Te.length;Me++)Ie.push(-Te.length+Me);if(Ee===void 0)return De=X.redraw(de),r.add(de,Oe,Fe,Ze,Pe),De;Array.isArray(Ee)||(Ee=[Ee]);try{E(de,Ie,Ee)}catch(ze){throw de.data.splice(de.data.length-Te.length,Te.length),ze}return r.startSequence(de),r.add(de,Oe,Fe,Ze,Pe),De=X.moveTraces(de,Ie,Ee),r.stopSequence(de),De},X.deleteTraces=function oe(de,Te){de=x.getGraphDiv(de);var Ee,Me,De=[],Ie=X.addTraces,Oe=oe,Ze=[de,De,Te],Fe=[de,Te];if(Te===void 0)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Te)||(Te=[Te]),S(de,Te,"indices"),(Te=P(Te,de.data.length-1)).sort(x.sorterDes),Ee=0;Ee<Te.length;Ee+=1)Me=de.data.splice(Te[Ee],1)[0],De.push(Me);var Pe=X.redraw(de);return r.add(de,Ie,Ze,Oe,Fe),Pe},X.extendTraces=function oe(de,Te,Ee,Me){function De(Fe,Pe,ze){var Ge,$e;if(x.isTypedArray(Fe))if(ze<0){var ot=new Fe.constructor(0),vt=D(Fe,Pe);ze<0?(Ge=vt,$e=ot):(Ge=ot,$e=vt)}else if(Ge=new Fe.constructor(ze),$e=new Fe.constructor(Fe.length+Pe.length-ze),ze===Pe.length)Ge.set(Pe),$e.set(Fe);else if(ze<Pe.length){var bt=Pe.length-ze;Ge.set(Pe.subarray(bt)),$e.set(Fe),$e.set(Pe.subarray(0,bt),Fe.length)}else{var yt=ze-Pe.length,tt=Fe.length-yt;Ge.set(Fe.subarray(tt)),Ge.set(Pe,yt),$e.set(Fe.subarray(0,tt))}else Ge=Fe.concat(Pe),$e=ze>=0&&ze<Ge.length?Ge.splice(0,Ge.length-ze):[];return[Ge,$e]}var Ie=z(de=x.getGraphDiv(de),Te,Ee,Me,De),Oe=X.redraw(de),Ze=[de,Ie.update,Ee,Ie.maxPoints];return r.add(de,X.prependTraces,Ze,oe,arguments),Oe},X.moveTraces=function oe(de,Te,Ee){var Me,De=[],Ie=[],Oe=oe,Ze=oe,Fe=[de=x.getGraphDiv(de),Ee,Te],Pe=[de,Te,Ee];if(E(de,Te,Ee),Te=Array.isArray(Te)?Te:[Te],Ee===void 0)for(Ee=[],Me=0;Me<Te.length;Me++)Ee.push(-Te.length+Me);for(Ee=Array.isArray(Ee)?Ee:[Ee],Te=P(Te,de.data.length-1),Ee=P(Ee,de.data.length-1),Me=0;Me<de.data.length;Me++)Te.indexOf(Me)===-1&&De.push(de.data[Me]);for(Me=0;Me<Te.length;Me++)Ie.push({newIndex:Ee[Me],trace:de.data[Te[Me]]});for(Ie.sort(function(Ge,$e){return Ge.newIndex-$e.newIndex}),Me=0;Me<Ie.length;Me+=1)De.splice(Ie[Me].newIndex,0,Ie[Me].trace);de.data=De;var ze=X.redraw(de);return r.add(de,Oe,Fe,Ze,Pe),ze},X.prependTraces=function oe(de,Te,Ee,Me){function De(Fe,Pe,ze){var Ge,$e;if(x.isTypedArray(Fe))if(ze<=0){var ot=new Fe.constructor(0),vt=D(Pe,Fe);ze<0?(Ge=vt,$e=ot):(Ge=ot,$e=vt)}else if(Ge=new Fe.constructor(ze),$e=new Fe.constructor(Fe.length+Pe.length-ze),ze===Pe.length)Ge.set(Pe),$e.set(Fe);else if(ze<Pe.length){var bt=Pe.length-ze;Ge.set(Pe.subarray(0,bt)),$e.set(Pe.subarray(bt)),$e.set(Fe,bt)}else{var yt=ze-Pe.length;Ge.set(Pe),Ge.set(Fe.subarray(0,yt),Pe.length),$e.set(Fe.subarray(yt))}else Ge=Pe.concat(Fe),$e=ze>=0&&ze<Ge.length?Ge.splice(ze,Ge.length):[];return[Ge,$e]}var Ie=z(de=x.getGraphDiv(de),Te,Ee,Me,De),Oe=X.redraw(de),Ze=[de,Ie.update,Ee,Ie.maxPoints];return r.add(de,X.extendTraces,Ze,oe,arguments),Oe},X.newPlot=function(oe,de,Te,Ee){return oe=x.getGraphDiv(oe),d.cleanPlot([],{},oe._fullData||[],oe._fullLayout||{}),d.purge(oe),X._doPlot(oe,de,Te,Ee)},X._doPlot=function(oe,de,Te,Ee){var Me;if(oe=x.getGraphDiv(oe),t.init(oe),x.isPlainObject(de)){var De=de;de=De.data,Te=De.layout,Ee=De.config,Me=De.frames}if(t.triggerHandler(oe,"plotly_beforeplot",[de,Te,Ee])===!1)return Promise.reject();de||Te||x.isPlotDiv(oe)||x.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",oe),I(oe,Ee),Te||(Te={}),m.select(oe).classed("js-plotly-plot",!0),o.makeTester(),Array.isArray(oe._promises)||(oe._promises=[]);var Ie=(oe.data||[]).length===0&&Array.isArray(de);Array.isArray(de)&&(y.cleanData(de),Ie?oe.data=de:oe.data.push.apply(oe.data,de),oe.empty=!1),oe.layout&&!Ie||(oe.layout=y.cleanLayout(Te)),d.supplyDefaults(oe);var Oe=oe._fullLayout,Ze=Oe._has("cartesian");Oe._replotting=!0,(Ie||Oe._shouldCreateBgLayer)&&(function(yt){var tt=m.select(yt),Ke=yt._fullLayout;if(Ke._calcInverseTransform=we,Ke._calcInverseTransform(yt),Ke._container=tt.selectAll(".plot-container").data([0]),Ke._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),Ke._paperdiv=Ke._container.selectAll(".svg-container").data([0]),Ke._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),Ke._glcontainer=Ke._paperdiv.selectAll(".gl-container").data([{}]),Ke._glcontainer.enter().append("div").classed("gl-container",!0),Ke._paperdiv.selectAll(".main-svg").remove(),Ke._paperdiv.select(".modebar-container").remove(),Ke._paper=Ke._paperdiv.insert("svg",":first-child").classed("main-svg",!0),Ke._toppaper=Ke._paperdiv.append("svg").classed("main-svg",!0),Ke._modebardiv=Ke._paperdiv.append("div"),delete Ke._modeBar,Ke._hoverpaper=Ke._paperdiv.append("svg").classed("main-svg",!0),!Ke._uid){var mt={};m.selectAll("defs").each(function(){this.id&&(mt[this.id.split("-")[1]]=1)}),Ke._uid=x.randstr(mt)}Ke._paperdiv.selectAll(".main-svg").attr(a.svgAttrs),Ke._defs=Ke._paper.append("defs").attr("id","defs-"+Ke._uid),Ke._clips=Ke._defs.append("g").classed("clips",!0),Ke._topdefs=Ke._toppaper.append("defs").attr("id","topdefs-"+Ke._uid),Ke._topclips=Ke._topdefs.append("g").classed("clips",!0),Ke._bgLayer=Ke._paper.append("g").classed("bglayer",!0),Ke._draggers=Ke._paper.append("g").classed("draglayer",!0);var Ft=Ke._paper.append("g").classed("layer-below",!0);Ke._imageLowerLayer=Ft.append("g").classed("imagelayer",!0),Ke._shapeLowerLayer=Ft.append("g").classed("shapelayer",!0),Ke._cartesianlayer=Ke._paper.append("g").classed("cartesianlayer",!0),Ke._polarlayer=Ke._paper.append("g").classed("polarlayer",!0),Ke._smithlayer=Ke._paper.append("g").classed("smithlayer",!0),Ke._ternarylayer=Ke._paper.append("g").classed("ternarylayer",!0),Ke._geolayer=Ke._paper.append("g").classed("geolayer",!0),Ke._funnelarealayer=Ke._paper.append("g").classed("funnelarealayer",!0),Ke._pielayer=Ke._paper.append("g").classed("pielayer",!0),Ke._iciclelayer=Ke._paper.append("g").classed("iciclelayer",!0),Ke._treemaplayer=Ke._paper.append("g").classed("treemaplayer",!0),Ke._sunburstlayer=Ke._paper.append("g").classed("sunburstlayer",!0),Ke._indicatorlayer=Ke._toppaper.append("g").classed("indicatorlayer",!0),Ke._glimages=Ke._paper.append("g").classed("glimages",!0);var Vt=Ke._toppaper.append("g").classed("layer-above",!0);Ke._imageUpperLayer=Vt.append("g").classed("imagelayer",!0),Ke._shapeUpperLayer=Vt.append("g").classed("shapelayer",!0),Ke._selectionLayer=Ke._toppaper.append("g").classed("selectionlayer",!0),Ke._infolayer=Ke._toppaper.append("g").classed("infolayer",!0),Ke._menulayer=Ke._toppaper.append("g").classed("menulayer",!0),Ke._zoomlayer=Ke._toppaper.append("g").classed("zoomlayer",!0),Ke._hoverlayer=Ke._hoverpaper.append("g").classed("hoverlayer",!0),Ke._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),yt.emit("plotly_framework")}(oe),Oe._shouldCreateBgLayer&&delete Oe._shouldCreateBgLayer),o.initGradients(oe),o.initPatterns(oe),Ie&&u.saveShowSpikeInitial(oe);var Fe=!oe.calcdata||oe.calcdata.length!==(oe._fullData||[]).length;Fe&&d.doCalcdata(oe);for(var Pe=0;Pe<oe.calcdata.length;Pe++)oe.calcdata[Pe][0].trace=oe._fullData[Pe];oe._context.responsive?oe._responsiveChartHandler||(oe._responsiveChartHandler=function(){x.isHidden(oe)||d.resize(oe)},window.addEventListener("resize",oe._responsiveChartHandler)):x.clearResponsive(oe);var ze=x.extendFlat({},Oe._size),Ge=0;function $e(){if(d.clearAutoMarginIds(oe),f.drawMarginPushers(oe),u.allowAutoMargin(oe),Oe._has("pie"))for(var yt=oe._fullData,tt=0;tt<yt.length;tt++){var Ke=yt[tt];Ke.type==="pie"&&Ke.automargin&&d.allowAutoMargin(oe,"pie."+Ke.uid+".automargin")}return d.doAutoMargin(oe),d.previousPromises(oe)}function ot(){oe._transitioning||(f.doAutoRangeAndConstraints(oe),Ie&&u.saveRangeInitial(oe),l.getComponentMethod("rangeslider","calcAutorange")(oe))}var vt=[d.previousPromises,function(){if(Me)return X.addFrames(oe,Me)},function yt(){for(var tt=Oe._basePlotModules,Ke=0;Ke<tt.length;Ke++)tt[Ke].drawFramework&&tt[Ke].drawFramework(oe);!Oe._glcanvas&&Oe._has("gl")&&(Oe._glcanvas=Oe._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Xt){return Xt.key}),Oe._glcanvas.enter().append("canvas").attr("class",function(Xt){return"gl-canvas gl-canvas-"+Xt.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var mt=oe._context.plotGlPixelRatio;if(Oe._glcanvas){Oe._glcanvas.attr("width",Oe.width*mt).attr("height",Oe.height*mt).style("width",Oe.width+"px").style("height",Oe.height+"px");var Ft=Oe._glcanvas.data()[0].regl;if(Ft&&(Math.floor(Oe.width*mt)!==Ft._gl.drawingBufferWidth||Math.floor(Oe.height*mt)!==Ft._gl.drawingBufferHeight)){var Vt="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!Ge)return x.log(Vt+" Clearing graph and plotting again."),d.cleanPlot([],{},oe._fullData,Oe),d.supplyDefaults(oe),Oe=oe._fullLayout,d.doCalcdata(oe),Ge++,yt();x.error(Vt)}}return Oe.modebar.orientation==="h"?Oe._modebardiv.style("height",null).style("width","100%"):Oe._modebardiv.style("width",null).style("height",Oe.height+"px"),d.previousPromises(oe)},$e,function(){if(d.didMarginChange(ze,Oe._size))return x.syncOrAsync([$e,f.layoutStyles],oe)}];Ze&&vt.push(function(){if(Fe)return x.syncOrAsync([l.getComponentMethod("shapes","calcAutorange"),l.getComponentMethod("annotations","calcAutorange"),ot],oe);ot()}),vt.push(f.layoutStyles),Ze&&vt.push(function(){return u.draw(oe,Ie?"":"redraw")},function(yt){yt._fullLayout._insideTickLabelsAutorange&&re(yt,yt._fullLayout._insideTickLabelsAutorange).then(function(){yt._fullLayout._insideTickLabelsAutorange=void 0})}),vt.push(f.drawData,f.finalDraw,s,d.addLinks,d.rehover,d.redrag,d.reselect,d.doAutoMargin,function(yt){yt._fullLayout._insideTickLabelsAutorange&&Ie&&u.saveRangeInitial(yt,!0)},d.previousPromises);var bt=x.syncOrAsync(vt,oe);return bt&&bt.then||(bt=Promise.resolve()),bt.then(function(){return T(oe),oe})},X.purge=function(oe){var de=(oe=x.getGraphDiv(oe))._fullLayout||{},Te=oe._fullData||[];return d.cleanPlot([],{},Te,de),d.purge(oe),t.purge(oe),de._container&&de._container.remove(),delete oe._context,oe},X.react=function(oe,de,Te,Ee){var Me,De;oe=x.getGraphDiv(oe),y.clearPromiseQueue(oe);var Ie=oe._fullData,Oe=oe._fullLayout;if(x.isPlotDiv(oe)&&Ie&&Oe){if(x.isPlainObject(de)){var Ze=de;de=Ze.data,Te=Ze.layout,Ee=Ze.config,Me=Ze.frames}var Fe=!1;if(Ee){var Pe=x.extendDeep({},oe._context);oe._context=void 0,I(oe,Ee),Fe=function he(be,Re){var Ue;for(Ue in be)if(Ue.charAt(0)!=="_"){var Xe=be[Ue],qe=Re[Ue];if(Xe!==qe)if(x.isPlainObject(Xe)&&x.isPlainObject(qe)){if(he(Xe,qe))return!0}else{if(!Array.isArray(Xe)||!Array.isArray(qe)||Xe.length!==qe.length)return!0;for(var st=0;st<Xe.length;st++)if(Xe[st]!==qe[st]&&(!x.isPlainObject(Xe[st])||!x.isPlainObject(qe[st])||he(Xe[st],qe[st])))return!0}}}(Pe,oe._context)}oe.data=de||[],y.cleanData(oe.data),oe.layout=Te||{},y.cleanLayout(oe.layout),function(he,be,Re,Ue){var Xe,qe,st,it,Tt,Pt,rt,ut,Bt,wt,Lt=Ue._preGUI,Se=[],We={},nt={};for(Xe in Lt){if(Tt=ve(Xe,le)){if(Bt=Tt.head,wt=Tt.tail,qe=Tt.attr||Bt+".uirevision",(it=(st=e(Ue,qe).get())&&fe(qe,be))&&it===st){if((Pt=Lt[Xe])===null&&(Pt=void 0),pe(ut=(rt=e(be,Xe)).get(),Pt)){ut===void 0&&wt==="autorange"&&Se.push(Bt),rt.set(H(e(Ue,Xe).get()));continue}if(wt==="autorange"||wt.substr(0,6)==="range["){var ft=Lt[Bt+".range[0]"],Mt=Lt[Bt+".range[1]"],Nt=Lt[Bt+".autorange"];if(Nt||Nt===null&&ft===null&&Mt===null){if(!(Bt in We)){var Zt=e(be,Bt).get();We[Bt]=Zt&&(Zt.autorange||Zt.autorange!==!1&&(!Zt.range||Zt.range.length!==2))}if(We[Bt]){rt.set(H(e(Ue,Xe).get()));continue}}}}}else x.warn("unrecognized GUI edit: "+Xe);delete Lt[Xe],Tt&&Tt.tail.substr(0,6)==="range["&&(nt[Tt.head]=1)}for(var Ut=0;Ut<Se.length;Ut++){var fr=Se[Ut];if(nt[fr]){var Tr=e(be,fr).get();Tr&&delete Tr.autorange}}var ur=Ue._tracePreGUI;for(var Kt in ur){var Qt,er=ur[Kt],cr=null;for(Xe in er){if(!cr){var gr=ye(Kt,Re);if(gr<0){delete ur[Kt];break}var Mr=Ae(Kt,he,(Qt=Re[gr]._fullInput).index);if(Mr<0){delete ur[Kt];break}cr=he[Mr]}if(Tt=ve(Xe,se)){if(Tt.attr?it=(st=e(Ue,Tt.attr).get())&&fe(Tt.attr,be):(st=Qt.uirevision,(it=cr.uirevision)===void 0&&(it=be.uirevision)),it&&it===st&&((Pt=er[Xe])===null&&(Pt=void 0),pe(ut=(rt=e(cr,Xe)).get(),Pt))){rt.set(H(e(Qt,Xe).get()));continue}}else x.warn("unrecognized GUI edit: "+Xe+" in trace uid "+Kt);delete er[Xe]}}}(oe.data,oe.layout,Ie,Oe),d.supplyDefaults(oe,{skipUpdateCalc:!0});var ze=oe._fullData,Ge=oe._fullLayout,$e=Ge.datarevision===void 0,ot=Ge.transition,vt=function(he,be,Re,Ue,Xe){var qe=w.layoutFlags();function st(it){return n.getLayoutValObject(Re,it)}return qe.arrays={},qe.rangesAltered={},qe.nChanges=0,qe.nChangesAnim=0,ge(be,Re,[],{getValObject:st,flags:qe,immutable:Ue,transition:Xe,gd:he}),(qe.plot||qe.calc)&&(qe.layoutReplot=!0),Xe&&qe.nChanges&&qe.nChangesAnim&&(qe.anim=qe.nChanges===qe.nChangesAnim?"all":"some"),qe}(oe,Oe,Ge,$e,ot),bt=vt.newDataRevision,yt=function(he,be,Re,Ue,Xe,qe){var st=be.length===Re.length;if(!Xe&&!st)return{fullReplot:!0,calc:!0};var it,Tt,Pt=w.traceFlags();Pt.arrays={},Pt.nChanges=0,Pt.nChangesAnim=0;var rt={getValObject:function(Bt){var wt=n.getTraceValObject(Tt,Bt);return!Tt._module.animatable&&wt.anim&&(wt.anim=!1),wt},flags:Pt,immutable:Ue,transition:Xe,newDataRevision:qe,gd:he},ut={};for(it=0;it<be.length;it++)if(Re[it]){if(Tt=Re[it]._fullInput,d.hasMakesDataTransform(Tt)&&(Tt=Re[it]),ut[Tt.uid])continue;ut[Tt.uid]=1,ge(be[it]._fullInput,Tt,[],rt)}return(Pt.calc||Pt.plot)&&(Pt.fullReplot=!0),Xe&&Pt.nChanges&&Pt.nChangesAnim&&(Pt.anim=Pt.nChanges===Pt.nChangesAnim&&st?"all":"some"),Pt}(oe,Ie,ze,$e,ot,bt);if(K(oe)&&(vt.layoutReplot=!0),yt.calc||vt.calc){oe.calcdata=void 0;for(var tt=Object.getOwnPropertyNames(Ge),Ke=0;Ke<tt.length;Ke++){var mt=tt[Ke],Ft=mt.substring(0,5);if(Ft==="xaxis"||Ft==="yaxis"){var Vt=Ge[mt]._emptyCategories;Vt&&Vt()}}}else d.supplyDefaultsUpdateCalc(oe.calcdata,ze);var Xt=[];if(Me&&(oe._transitionData={},d.createTransitionData(oe),Xt.push(function(){return X.addFrames(oe,Me)})),Ge.transition&&!Fe&&(yt.anim||vt.anim))vt.ticks&&Xt.push(f.doTicksRelayout),d.doCalcdata(oe),f.doAutoRangeAndConstraints(oe),Xt.push(function(){return d.transitionFromReact(oe,yt,vt,Oe)});else if(yt.fullReplot||vt.layoutReplot||Fe)oe._fullLayout._skipDefaults=!0,Xt.push(X._doPlot);else{for(var Gt in vt.arrays){var nr=vt.arrays[Gt];if(nr.length){var It=l.getComponentMethod(Gt,"drawOne");if(It!==x.noop)for(var Be=0;Be<nr.length;Be++)It(oe,nr[Be]);else{var He=l.getComponentMethod(Gt,"draw");if(He===x.noop)throw new Error("cannot draw components: "+Gt);He(oe)}}}Xt.push(d.previousPromises),yt.style&&Xt.push(f.doTraceStyle),(yt.colorbars||vt.colorbars)&&Xt.push(f.doColorBars),vt.legend&&Xt.push(f.doLegend),vt.layoutstyle&&Xt.push(f.layoutStyles),vt.axrange&&B(Xt),vt.ticks&&Xt.push(f.doTicksRelayout),vt.modebar&&Xt.push(f.doModeBar),vt.camera&&Xt.push(f.doCamera),Xt.push(T)}Xt.push(d.rehover,d.redrag,d.reselect),(De=x.syncOrAsync(Xt,oe))&&De.then||(De=Promise.resolve(oe))}else De=X.newPlot(oe,de,Te,Ee);return De.then(function(){return oe.emit("plotly_react",{data:de,layout:Te}),oe})},X.redraw=function(oe){if(oe=x.getGraphDiv(oe),!x.isPlotDiv(oe))throw new Error("This element is not a Plotly plot: "+oe);return y.cleanData(oe.data),y.cleanLayout(oe.layout),oe.calcdata=void 0,X._doPlot(oe).then(function(){return oe.emit("plotly_redraw"),oe})},X.relayout=re,X.restyle=U,X.setPlotConfig=function(oe){return x.extendFlat(c,oe)},X.update=te,X._guiRelayout=ie(re),X._guiRestyle=ie(U),X._guiUpdate=ie(te),X._storeDirectGUIEdit=function(oe,de,Te){for(var Ee in Te)J(Ee,e(oe,Ee).get(),Te[Ee],de)}},{"../components/color":367,"../components/drawing":389,"../components/selections":455,"../constants/xmlns_namespaces":492,"../lib":515,"../lib/events":504,"../lib/queue":531,"../plots/cartesian/axes":566,"../plots/cartesian/constants":573,"../plots/cartesian/graph_interact":576,"../plots/plots":628,"../registry":647,"./edit_types":548,"./helpers":549,"./manage_arrays":551,"./plot_config":553,"./plot_schema":554,"./subroutines":556,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],553:[function(g,Q,X){var m={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},v={};(function k(x,e){for(var t in x){var r=x[t];r.valType?e[t]=r.dflt:(e[t]||(e[t]={}),k(r,e[t]))}})(m,v),Q.exports={configAttributes:m,dfltConfig:v}},{}],554:[function(g,Q,X){var m=g("../registry"),v=g("../lib"),k=g("../plots/attributes"),x=g("../plots/layout_attributes"),e=g("../plots/frame_attributes"),t=g("../plots/animation_attributes"),r=g("./plot_config").configAttributes,l=g("./edit_types"),n=v.extendDeepAll,d=v.isPlainObject,u=v.isArrayOrTypedArray,o=v.nestedProperty,h=v.valObjectMeta,s=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];function a(b,_,T){if(!b)return!1;if(b._isLinkedToArray){if(p(_[T]))T++;else if(T<_.length)return!1}for(;T<_.length;T++){var L=b[_[T]];if(!d(L)||(b=L,T===_.length-1))break;if(b._isLinkedToArray){if(!p(_[++T]))return!1}else if(b.valType==="info_array"){var A=_[++T];if(!p(A))return!1;var I=b.items;if(Array.isArray(I)){if(A>=I.length)return!1;if(b.dimensions===2){if(T++,_.length===T)return b;var P=_[T];if(!p(P))return!1;b=I[A][P]}else b=I[A]}else b=I}}return b}function p(b){return b===Math.round(b)&&b>=0}function c(){var b,_,T={};for(b in n(T,x),m.subplotsRegistry)if((_=m.subplotsRegistry[b]).layoutAttributes)if(Array.isArray(_.attr))for(var L=0;L<_.attr.length;L++)f(T,_,_.attr[L]);else f(T,_,_.attr==="subplot"?_.name:_.attr);for(b in m.componentsRegistry){var A=(_=m.componentsRegistry[b]).schema;if(A&&(A.subplots||A.layout)){var I=A.subplots;if(I&&I.xaxis&&!I.yaxis)for(var P in I.xaxis)delete T.yaxis[P]}else _.name==="colorscale"?n(T,_.layoutAttributes):_.layoutAttributes&&w(T,_.layoutAttributes,_.name)}return{layoutAttributes:y(T)}}function i(){var b={frames:n({},e)};return y(b),b.frames}function y(b){return function(_){X.crawl(_,function(T,L,A){X.isValObject(T)?T.arrayOk!==!0&&T.valType!=="data_array"||(A[L+"src"]={valType:"string",editType:"none"}):d(T)&&(T.role="object")})}(b),function(_){X.crawl(_,function(T,L,A){if(T){var I=T._isLinkedToArray;I&&(delete T._isLinkedToArray,A[L]={items:{}},A[L].items[I]=T,A[L].role="object")}})}(b),function(_){(function T(L){for(var A in L)if(d(L[A]))T(L[A]);else if(Array.isArray(L[A]))for(var I=0;I<L[A].length;I++)T(L[A][I]);else L[A]instanceof RegExp&&(L[A]=L[A].toString())})(_)}(b),b}function f(b,_,T){var L=o(b,T),A=n({},_.layoutAttributes);A._isSubplotObj=!0,L.set(A)}function w(b,_,T){var L=o(b,T);L.set(n(L.get()||{},_))}X.IS_SUBPLOT_OBJ="_isSubplotObj",X.IS_LINKED_TO_ARRAY="_isLinkedToArray",X.DEPRECATED="_deprecated",X.UNDERSCORE_ATTRS=s,X.get=function(){var b={};m.allTypes.forEach(function(T){b[T]=function(L){var A,I;A=m.modules[L]._module,I=A.basePlotModule;var P={type:null},S=n({},k),E=n({},A.attributes);X.crawl(E,function(U,H,Y,J,W){o(S,W).set(void 0),U===void 0&&o(E,W).set(void 0)}),n(P,S),m.traceIs(L,"noOpacity")&&delete P.opacity,m.traceIs(L,"showLegend")||(delete P.showlegend,delete P.legendgroup),m.traceIs(L,"noHover")&&(delete P.hoverinfo,delete P.hoverlabel),A.selectPoints||delete P.selectedpoints,n(P,E),I.attributes&&n(P,I.attributes),P.type=L;var z={meta:A.meta||{},categories:A.categories||{},animatable:Boolean(A.animatable),type:L,attributes:y(P)};if(A.layoutAttributes){var D={};n(D,A.layoutAttributes),z.layoutAttributes=y(D)}return A.animatable||X.crawl(z,function(U){X.isValObject(U)&&"anim"in U&&delete U.anim}),z}(T)});var _={};return Object.keys(m.transformsRegistry).forEach(function(T){_[T]=function(L){var A=m.transformsRegistry[L],I=n({},A.attributes);return Object.keys(m.componentsRegistry).forEach(function(P){var S=m.componentsRegistry[P];S.schema&&S.schema.transforms&&S.schema.transforms[L]&&Object.keys(S.schema.transforms[L]).forEach(function(E){w(I,S.schema.transforms[L][E],E)})}),{attributes:y(I)}}(T)}),{defs:{valObjects:h,metaKeys:s.concat(["description","role","editType","impliedEdits"]),editType:{traces:l.traces,layout:l.layout},impliedEdits:{}},traces:b,layout:c(),transforms:_,frames:i(),animation:y(t),config:y(r)}},X.crawl=function(b,_,T,L){var A=T||0;L=L||"",Object.keys(b).forEach(function(I){var P=b[I];if(s.indexOf(I)===-1){var S=(L?L+".":"")+I;_(P,I,b,A,S),X.isValObject(P)||d(P)&&I!=="impliedEdits"&&X.crawl(P,_,A+1,S)}})},X.isValObject=function(b){return b&&b.valType!==void 0},X.findArrayAttributes=function(b){var _,T,L=[],A=[],I=[];function P(U,H,Y,J){A=A.slice(0,J).concat([H]),I=I.slice(0,J).concat([U&&U._isLinkedToArray]),U&&(U.valType==="data_array"||U.arrayOk===!0)&&!(A[J-1]==="colorbar"&&(H==="ticktext"||H==="tickvals"))&&function W(Z,re,V){var B=Z[A[re]],j=V+A[re];if(re===A.length-1)u(B)&&L.push(T+j);else if(I[re]){if(Array.isArray(B))for(var ee=0;ee<B.length;ee++)d(B[ee])&&W(B[ee],re+1,j+"["+ee+"].")}else d(B)&&W(B,re+1,j+".")}(_,0,"")}_=b,T="",X.crawl(k,P),b._module&&b._module.attributes&&X.crawl(b._module.attributes,P);var S=b.transforms;if(S)for(var E=0;E<S.length;E++){var z=S[E],D=z._module;D&&(T="transforms["+E+"].",_=z,X.crawl(D.attributes,P))}return L},X.getTraceValObject=function(b,_){var T,L,A=_[0],I=1;if(A==="transforms"){if(_.length===1)return k.transforms;var P=b.transforms;if(!Array.isArray(P)||!P.length)return!1;var S=_[1];if(!p(S)||S>=P.length)return!1;L=(T=(m.transformsRegistry[P[S].type]||{}).attributes)&&T[_[2]],I=3}else{var E=b._module;if(E||(E=(m.modules[b.type||k.type.dflt]||{})._module),!E)return!1;if(!(L=(T=E.attributes)&&T[A])){var z=E.basePlotModule;z&&z.attributes&&(L=z.attributes[A])}L||(L=k[A])}return a(L,_,I)},X.getLayoutValObject=function(b,_){return a(function(T,L){var A,I,P,S,E=T._basePlotModules;if(E){var z;for(A=0;A<E.length;A++){if((P=E[A]).attrRegex&&P.attrRegex.test(L)){if(P.layoutAttrOverrides)return P.layoutAttrOverrides;!z&&P.layoutAttributes&&(z=P.layoutAttributes)}var D=P.baseLayoutAttrOverrides;if(D&&L in D)return D[L]}if(z)return z}var U=T._modules;if(U){for(A=0;A<U.length;A++)if((S=U[A].layoutAttributes)&&L in S)return S[L]}for(I in m.componentsRegistry){if((P=m.componentsRegistry[I]).name==="colorscale"&&L.indexOf("coloraxis")===0)return P.layoutAttributes[L];if(!P.schema&&L===P.name)return P.layoutAttributes}return L in x&&x[L]}(b,_[0]),_,1)}},{"../lib":515,"../plots/animation_attributes":560,"../plots/attributes":562,"../plots/frame_attributes":595,"../plots/layout_attributes":619,"../registry":647,"./edit_types":548,"./plot_config":553}],555:[function(g,Q,X){var m=g("../lib"),v=g("../plots/attributes"),k={name:{valType:"string",editType:"none"}};function x(t){return t&&typeof t=="string"}function e(t){var r=t.length-1;return t.charAt(r)!=="s"&&m.warn("bad argument to arrayDefaultKey: "+t),t.substr(0,t.length-1)+"defaults"}k.templateitemname={valType:"string",editType:"calc"},X.templatedArray=function(t,r){return r._isLinkedToArray=t,r.name=k.name,r.templateitemname=k.templateitemname,r},X.traceTemplater=function(t){var r,l,n={};for(r in t)l=t[r],Array.isArray(l)&&l.length&&(n[r]=0);return{newTrace:function(d){var u={type:r=m.coerce(d,{},v,"type"),_template:null};if(r in n){l=t[r];var o=n[r]%l.length;n[r]++,u._template=l[o]}return u}}},X.newContainer=function(t,r,l){var n=t._template,d=n&&(n[r]||l&&n[l]);return m.isPlainObject(d)||(d=null),t[r]={_template:d}},X.arrayTemplater=function(t,r,l){var n=t._template,d=n&&n[e(r)],u=n&&n[r];Array.isArray(u)&&u.length||(u=[]);var o={};return{newItem:function(h){var s={name:h.name,_input:h},a=s.templateitemname=h.templateitemname;if(!x(a))return s._template=d,s;for(var p=0;p<u.length;p++){var c=u[p];if(c.name===a)return o[a]=1,s._template=c,s}return s[l]=h[l]||!1,s._template=!1,s},defaultItems:function(){for(var h=[],s=0;s<u.length;s++){var a=u[s],p=a.name;if(x(p)&&!o[p]){var c={_template:a,name:p,_input:{_templateitemname:p}};c.templateitemname=a.templateitemname,h.push(c),o[p]=1}}return h}}},X.arrayDefaultKey=e,X.arrayEditor=function(t,r,l){var n=(m.nestedProperty(t,r).get()||[]).length,d=l._index,u=d>=n&&(l._input||{})._templateitemname;u&&(d=n);var o,h=r+"["+d+"]";function s(){o={},u&&(o[h]={},o[h].templateitemname=u)}function a(c,i){u?m.nestedProperty(o[h],c).set(i):o[h+"."+c]=i}function p(){var c=o;return s(),c}return s(),{modifyBase:function(c,i){o[c]=i},modifyItem:a,getUpdateObj:p,applyUpdate:function(c,i){c&&a(c,i);var y=p();for(var f in y)m.nestedProperty(t,f).set(y[f])}}}},{"../lib":515,"../plots/attributes":562}],556:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../registry"),k=g("../plots/plots"),x=g("../lib"),e=g("../lib/clear_gl_canvases"),t=g("../components/color"),r=g("../components/drawing"),l=g("../components/titles"),n=g("../components/modebar"),d=g("../plots/cartesian/axes"),u=g("../constants/alignment"),o=g("../plots/cartesian/constraints"),h=o.enforce,s=o.clean,a=g("../plots/cartesian/autorange").doAutoRange;function p(_,T,L){for(var A=0;A<L.length;A++){var I=L[A][0],P=L[A][1];if(!(I[0]>=_[1]||I[1]<=_[0])&&P[0]<T[1]&&P[1]>T[0])return!0}return!1}function c(_){var T,L,A,I,P,S,E=_._fullLayout,z=E._size,D=z.p,U=d.list(_,"",!0);if(E._paperdiv.style({width:_._context.responsive&&E.autosize&&!_._context._hasZeroWidth&&!_.layout.width?"100%":E.width+"px",height:_._context.responsive&&E.autosize&&!_._context._hasZeroHeight&&!_.layout.height?"100%":E.height+"px"}).selectAll(".main-svg").call(r.setSize,E.width,E.height),_._context.setBackground(_,E.paper_bgcolor),X.drawMainTitle(_),n.manage(_),!E._has("cartesian"))return k.previousPromises(_);function H(Ge,$e,ot){var vt=Ge._lw/2;return Ge._id.charAt(0)==="x"?$e?ot==="top"?$e._offset-D-vt:$e._offset+$e._length+D+vt:z.t+z.h*(1-(Ge.position||0))+vt%1:$e?ot==="right"?$e._offset+$e._length+D+vt:$e._offset-D-vt:z.l+z.w*(Ge.position||0)+vt%1}for(T=0;T<U.length;T++){var Y=(I=U[T])._anchorAxis;I._linepositions={},I._lw=r.crispRound(_,I.linewidth,1),I._mainLinePosition=H(I,Y,I.side),I._mainMirrorPosition=I.mirror&&Y?H(I,Y,u.OPPOSITE_SIDE[I.side]):null}var J=[],W=[],Z=[],re=t.opacity(E.paper_bgcolor)===1&&t.opacity(E.plot_bgcolor)===1&&E.paper_bgcolor===E.plot_bgcolor;for(L in E._plots)if((A=E._plots[L]).mainplot)A.bg&&A.bg.remove(),A.bg=void 0;else{var V=A.xaxis.domain,B=A.yaxis.domain,j=A.plotgroup;if(p(V,B,Z)){var ee=j.node(),N=A.bg=x.ensureSingle(j,"rect","bg");ee.insertBefore(N.node(),ee.childNodes[0]),W.push(L)}else j.select("rect.bg").remove(),Z.push([V,B]),re||(J.push(L),W.push(L))}var $,K,te,ie,le,se,ve,fe,ye,Ae,pe,ge,we,oe=E._bgLayer.selectAll(".bg").data(J);for(oe.enter().append("rect").classed("bg",!0),oe.exit().remove(),oe.each(function(Ge){E._plots[Ge].bg=m.select(this)}),T=0;T<W.length;T++)A=E._plots[W[T]],P=A.xaxis,S=A.yaxis,A.bg&&P._offset!==void 0&&S._offset!==void 0&&A.bg.call(r.setRect,P._offset-D,S._offset-D,P._length+2*D,S._length+2*D).call(t.fill,E.plot_bgcolor).style("stroke-width",0);if(!E._hasOnlyLargeSploms)for(L in E._plots){A=E._plots[L],P=A.xaxis,S=A.yaxis;var de,Te,Ee=A.clipId="clip"+E._uid+L+"plot",Me=x.ensureSingleById(E._clips,"clipPath",Ee,function(Ge){Ge.classed("plotclip",!0).append("rect")});A.clipRect=Me.select("rect").attr({width:P._length,height:S._length}),r.setTranslate(A.plot,P._offset,S._offset),A._hasClipOnAxisFalse?(de=null,Te=Ee):(de=Ee,Te=null),r.setClipUrl(A.plot,de,_),A.layerClipId=Te}function De(Ge){return"M"+$+","+Ge+"H"+K}function Ie(Ge){return"M"+P._offset+","+Ge+"h"+P._length}function Oe(Ge){return"M"+Ge+","+fe+"V"+ve}function Ze(Ge){return"M"+Ge+","+S._offset+"v"+S._length}function Fe(Ge,$e,ot){if(!Ge.showline||L!==Ge._mainSubplot)return"";if(!Ge._anchorAxis)return ot(Ge._mainLinePosition);var vt=$e(Ge._mainLinePosition);return Ge.mirror&&(vt+=$e(Ge._mainMirrorPosition)),vt}for(L in E._plots){A=E._plots[L],P=A.xaxis,S=A.yaxis;var Pe="M0,0";i(P,L)&&(le=f(P,"left",S,U),$=P._offset-(le?D+le:0),se=f(P,"right",S,U),K=P._offset+P._length+(se?D+se:0),te=H(P,S,"bottom"),ie=H(P,S,"top"),!(we=!P._anchorAxis||L!==P._mainSubplot)||P.mirror!=="allticks"&&P.mirror!=="all"||(P._linepositions[L]=[te,ie]),Pe=Fe(P,De,Ie),we&&P.showline&&(P.mirror==="all"||P.mirror==="allticks")&&(Pe+=De(te)+De(ie)),A.xlines.style("stroke-width",P._lw+"px").call(t.stroke,P.showline?P.linecolor:"rgba(0,0,0,0)")),A.xlines.attr("d",Pe);var ze="M0,0";i(S,L)&&(pe=f(S,"bottom",P,U),ve=S._offset+S._length+(pe?D:0),ge=f(S,"top",P,U),fe=S._offset-(ge?D:0),ye=H(S,P,"left"),Ae=H(S,P,"right"),!(we=!S._anchorAxis||L!==S._mainSubplot)||S.mirror!=="allticks"&&S.mirror!=="all"||(S._linepositions[L]=[ye,Ae]),ze=Fe(S,Oe,Ze),we&&S.showline&&(S.mirror==="all"||S.mirror==="allticks")&&(ze+=Oe(ye)+Oe(Ae)),A.ylines.style("stroke-width",S._lw+"px").call(t.stroke,S.showline?S.linecolor:"rgba(0,0,0,0)")),A.ylines.attr("d",ze)}return d.makeClipPaths(_),k.previousPromises(_)}function i(_,T){return(_.ticks||_.showline)&&(T===_._mainSubplot||_.mirror==="all"||_.mirror==="allticks")}function y(_,T,L){if(!L.showline||!L._lw)return!1;if(L.mirror==="all"||L.mirror==="allticks")return!0;var A=L._anchorAxis;if(!A)return!1;var I=u.FROM_BL[T];return L.side===T?A.domain[I]===_.domain[I]:L.mirror&&A.domain[1-I]===_.domain[1-I]}function f(_,T,L,A){if(y(_,T,L))return L._lw;for(var I=0;I<A.length;I++){var P=A[I];if(P._mainAxis===L._mainAxis&&y(_,T,P))return P._lw}return 0}function w(_,T){var L=_.title,A=_._size,I=0;switch(T==="start"?I=L.pad.l:T==="end"&&(I=-L.pad.r),L.xref){case"paper":return A.l+A.w*L.x+I;case"container":default:return _.width*L.x+I}}function b(_,T){var L=_.title,A=_._size,I=0;if(T!=="0em"&&T?T===u.CAP_SHIFT+"em"&&(I=L.pad.t):I=-L.pad.b,L.y==="auto")return A.t/2;switch(L.yref){case"paper":return A.t+A.h-A.h*L.y+I;case"container":default:return _.height-_.height*L.y+I}}X.layoutStyles=function(_){return x.syncOrAsync([k.doAutoMargin,c],_)},X.drawMainTitle=function(_){var T=_._fullLayout,L=function(I){var P=I.title,S="middle";return x.isRightAnchor(P)?S="end":x.isLeftAnchor(P)&&(S="start"),S}(T),A=function(I){var P=I.title,S="0em";return x.isTopAnchor(P)?S=u.CAP_SHIFT+"em":x.isMiddleAnchor(P)&&(S=u.MID_SHIFT+"em"),S}(T);l.draw(_,"gtitle",{propContainer:T,propName:"title.text",placeholder:T._dfltTitle.plot,attributes:{x:w(T,L),y:b(T,A),"text-anchor":L,dy:A}})},X.doTraceStyle=function(_){var T,L=_.calcdata,A=[];for(T=0;T<L.length;T++){var I=L[T],P=I[0]||{},S=P.trace||{},E=S._module||{},z=E.arraysToCalcdata;z&&z(I,S);var D=E.editStyle;D&&A.push({fn:D,cd0:P})}if(A.length){for(T=0;T<A.length;T++){var U=A[T];U.fn(_,U.cd0)}e(_),X.redrawReglTraces(_)}return k.style(_),v.getComponentMethod("legend","draw")(_),k.previousPromises(_)},X.doColorBars=function(_){return v.getComponentMethod("colorbar","draw")(_),k.previousPromises(_)},X.layoutReplot=function(_){var T=_.layout;return _.layout=void 0,v.call("_doPlot",_,"",T)},X.doLegend=function(_){return v.getComponentMethod("legend","draw")(_),k.previousPromises(_)},X.doTicksRelayout=function(_){return d.draw(_,"redraw"),_._fullLayout._hasOnlyLargeSploms&&(v.subplotsRegistry.splom.updateGrid(_),e(_),X.redrawReglTraces(_)),X.drawMainTitle(_),k.previousPromises(_)},X.doModeBar=function(_){var T=_._fullLayout;n.manage(_);for(var L=0;L<T._basePlotModules.length;L++){var A=T._basePlotModules[L].updateFx;A&&A(_)}return k.previousPromises(_)},X.doCamera=function(_){for(var T=_._fullLayout,L=T._subplots.gl3d,A=0;A<L.length;A++){var I=T[L[A]];I._scene.setViewport(I)}},X.drawData=function(_){var T=_._fullLayout;e(_);for(var L=T._basePlotModules,A=0;A<L.length;A++)L[A].plot(_);return X.redrawReglTraces(_),k.style(_),v.getComponentMethod("selections","draw")(_),v.getComponentMethod("shapes","draw")(_),v.getComponentMethod("annotations","draw")(_),v.getComponentMethod("images","draw")(_),T._replotting=!1,k.previousPromises(_)},X.redrawReglTraces=function(_){var T=_._fullLayout;if(T._has("regl")){var L,A,I=_._fullData,P=[],S=[];for(T._hasOnlyLargeSploms&&T._splomGrid.draw(),L=0;L<I.length;L++){var E=I[L];E.visible===!0&&E._length!==0&&(E.type==="splom"?T._splomScenes[E.uid].draw():E.type==="scattergl"?x.pushUnique(P,E.xaxis+E.yaxis):E.type==="scatterpolargl"&&x.pushUnique(S,E.subplot))}for(L=0;L<P.length;L++)(A=T._plots[P[L]])._scene&&A._scene.draw();for(L=0;L<S.length;L++)(A=T[S[L]]._subplot)._scene&&A._scene.draw()}},X.doAutoRangeAndConstraints=function(_){for(var T,L=d.list(_,"",!0),A={},I=0;I<L.length;I++)if(!A[(T=L[I])._id]){A[T._id]=1,s(_,T),a(_,T);var P=T._matchGroup;if(P)for(var S in P){var E=d.getFromId(_,S);a(_,E,T.range),A[S]=1}}h(_)},X.finalDraw=function(_){v.getComponentMethod("rangeslider","draw")(_),v.getComponentMethod("rangeselector","draw")(_)},X.drawMarginPushers=function(_){v.getComponentMethod("legend","draw")(_),v.getComponentMethod("rangeselector","draw")(_),v.getComponentMethod("sliders","draw")(_),v.getComponentMethod("updatemenus","draw")(_),v.getComponentMethod("colorbar","draw")(_)}},{"../components/color":367,"../components/drawing":389,"../components/modebar":430,"../components/titles":476,"../constants/alignment":483,"../lib":515,"../lib/clear_gl_canvases":499,"../plots/cartesian/autorange":565,"../plots/cartesian/axes":566,"../plots/cartesian/constraints":574,"../plots/plots":628,"../registry":647,"@plotly/d3":58}],557:[function(g,Q,X){var m=g("../lib"),v=m.isPlainObject,k=g("./plot_schema"),x=g("../plots/plots"),e=g("../plots/attributes"),t=g("./plot_template"),r=g("./plot_config").dfltConfig;function l(p,c){p=m.extendDeep({},p);var i,y,f=Object.keys(p).sort();function w(A,I,P){if(v(I)&&v(A))l(A,I);else if(Array.isArray(I)&&Array.isArray(A)){var S=t.arrayTemplater({_template:p},P);for(y=0;y<I.length;y++){var E=I[y],z=S.newItem(E)._template;z&&l(z,E)}var D=S.defaultItems();for(y=0;y<D.length;y++)I.push(D[y]._template);for(y=0;y<I.length;y++)delete I[y].templateitemname}}for(i=0;i<f.length;i++){var b=f[i],_=p[b];if(b in c?w(_,c[b],b):c[b]=_,n(b)===b)for(var T in c){var L=n(T);T===L||L!==b||T in p||w(_,c[T],b)}}}function n(p){return p.replace(/[0-9]+$/,"")}function d(p,c,i,y,f){var w=f&&i(f);for(var b in p){var _=p[b],T=h(p,b,y),L=h(p,b,f),A=i(L);if(!A){var I=n(b);I!==b&&(A=i(L=h(p,I,f)))}if((!w||w!==A)&&!(!A||A._noTemplating||A.valType==="data_array"||A.arrayOk&&Array.isArray(_)))if(!A.valType&&v(_))d(_,c,i,T,L);else if(A._isLinkedToArray&&Array.isArray(_))for(var P=!1,S=0,E={},z=0;z<_.length;z++){var D=_[z];if(v(D)){var U=D.name;if(U)E[U]||(d(D,c,i,h(_,S,T),h(_,S,L)),S++,E[U]=1);else if(!P){var H=h(p,t.arrayDefaultKey(b),y),Y=h(_,S,T);d(D,c,i,Y,h(_,S,L));var J=m.nestedProperty(c,Y);m.nestedProperty(c,H).set(J.get()),J.set(null),P=!0}}}else m.nestedProperty(c,T).set(_)}}function u(p,c){return k.getLayoutValObject(p,m.nestedProperty({},c).parts)}function o(p,c){return k.getTraceValObject(p,m.nestedProperty({},c).parts)}function h(p,c,i){return i?Array.isArray(p)?i+"["+c+"]":i+"."+c:c}function s(p){for(var c=0;c<p.length;c++)if(v(p[c]))return!0}function a(p){var c;switch(p.code){case"data":c="The template has no key data.";break;case"layout":c="The template has no key layout.";break;case"missing":c=p.path?"There are no templates for item "+p.path+" with name "+p.templateitemname:"There are no templates for trace "+p.index+", of type "+p.traceType+".";break;case"unused":c=p.path?"The template item at "+p.path+" was not used in constructing the plot.":p.dataCount?"Some of the templates of type "+p.traceType+" were not used. The template has "+p.templateCount+" traces, the data only has "+p.dataCount+" of this type.":"The template has "+p.templateCount+" traces of type "+p.traceType+" but there are none in the data.";break;case"reused":c="Some of the templates of type "+p.traceType+" were used more than once. The template has "+p.templateCount+" traces, the data has "+p.dataCount+" of this type."}return p.msg=c,p}X.makeTemplate=function(p){p=m.isPlainObject(p)?p:m.getGraphDiv(p),p=m.extendDeep({_context:r},{data:p.data,layout:p.layout}),x.supplyDefaults(p);var c=p.data||[],i=p.layout||{};i._basePlotModules=p._fullLayout._basePlotModules,i._modules=p._fullLayout._modules;var y={data:{},layout:{}};c.forEach(function(S){var E={};d(S,E,o.bind(null,S));var z=m.coerce(S,{},e,"type"),D=y.data[z];D||(D=y.data[z]=[]),D.push(E)}),d(i,y.layout,u.bind(null,i)),delete y.layout.template;var f=i.template;if(v(f)){var w,b,_,T,L,A,I=f.layout;v(I)&&l(I,y.layout);var P=f.data;if(v(P)){for(b in y.data)if(_=P[b],Array.isArray(_)){for(A=(L=y.data[b]).length,T=_.length,w=0;w<A;w++)l(_[w%T],L[w]);for(w=A;w<T;w++)L.push(m.extendDeep({},_[w]))}for(b in P)b in y.data||(y.data[b]=m.extendDeep([],P[b]))}}return y},X.validateTemplate=function(p,c){var i=m.extendDeep({},{_context:r,data:p.data,layout:p.layout}),y=i.layout||{};v(c)||(c=y.template||{});var f=c.layout,w=c.data,b=[];i.layout=y,i.layout.template=c,x.supplyDefaults(i);var _=i._fullLayout,T=i._fullData,L={};if(v(f)?(function D(U,H){for(var Y in U)if(Y.charAt(0)!=="_"&&v(U[Y])){var J,W=n(Y),Z=[];for(J=0;J<H.length;J++)Z.push(h(U,Y,H[J])),W!==Y&&Z.push(h(U,W,H[J]));for(J=0;J<Z.length;J++)L[Z[J]]=1;D(U[Y],Z)}}(_,["layout"]),function D(U,H){for(var Y in U)if(Y.indexOf("defaults")===-1&&v(U[Y])){var J=h(U,Y,H);L[J]?D(U[Y],J):b.push({code:"unused",path:J})}}(f,"layout")):b.push({code:"layout"}),v(w)){for(var A,I={},P=0;P<T.length;P++){var S=T[P];I[A=S.type]=(I[A]||0)+1,S._fullInput._template||b.push({code:"missing",index:S._fullInput.index,traceType:A})}for(A in w){var E=w[A].length,z=I[A]||0;E>z?b.push({code:"unused",traceType:A,templateCount:E,dataCount:z}):z>E&&b.push({code:"reused",traceType:A,templateCount:E,dataCount:z})}}else b.push({code:"data"});if(function D(U,H){for(var Y in U)if(Y.charAt(0)!=="_"){var J=U[Y],W=h(U,Y,H);v(J)?(Array.isArray(U)&&J._template===!1&&J.templateitemname&&b.push({code:"missing",path:W,templateitemname:J.templateitemname}),D(J,W)):Array.isArray(J)&&s(J)&&D(J,W)}}({data:T,layout:_},""),b.length)return b.map(a)}},{"../lib":515,"../plots/attributes":562,"../plots/plots":628,"./plot_config":553,"./plot_schema":554,"./plot_template":555}],558:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("./plot_api"),k=g("../plots/plots"),x=g("../lib"),e=g("../snapshot/helpers"),t=g("../snapshot/tosvg"),r=g("../snapshot/svgtoimg"),l=g("../version").version,n={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};Q.exports=function(d,u){var o,h,s,a;function p(z){return!(z in u)||x.validate(u[z],n[z])}if(u=u||{},x.isPlainObject(d)?(o=d.data||[],h=d.layout||{},s=d.config||{},a={}):(d=x.getGraphDiv(d),o=x.extendDeep([],d.data),h=x.extendDeep({},d.layout),s=d._context,a=d._fullLayout||{}),!p("width")&&u.width!==null||!p("height")&&u.height!==null)throw new Error("Height and width should be pixel values.");if(!p("format"))throw new Error("Export format is not "+x.join2(n.format.values,", "," or ")+".");var c={};function i(z,D){return x.coerce(u,c,n,z,D)}var y=i("format"),f=i("width"),w=i("height"),b=i("scale"),_=i("setBackground"),T=i("imageDataOnly"),L=document.createElement("div");L.style.position="absolute",L.style.left="-5000px",document.body.appendChild(L);var A=x.extendFlat({},h);f?A.width=f:u.width===null&&m(a.width)&&(A.width=a.width),w?A.height=w:u.height===null&&m(a.height)&&(A.height=a.height);var I=x.extendFlat({},s,{_exportedPlot:!0,staticPlot:!0,setBackground:_}),P=e.getRedrawFunc(L);function S(){return new Promise(function(z){setTimeout(z,e.getDelay(L._fullLayout))})}function E(){return new Promise(function(z,D){var U=t(L,y,b),H=L._fullLayout.width,Y=L._fullLayout.height;function J(){v.purge(L),document.body.removeChild(L)}if(y==="full-json"){var W=k.graphJson(L,!1,"keepdata","object",!0,!0);return W.version=l,W=JSON.stringify(W),J(),z(T?W:e.encodeJSON(W))}if(J(),y==="svg")return z(T?U:e.encodeSVG(U));var Z=document.createElement("canvas");Z.id=x.randstr(),r({format:y,width:H,height:Y,scale:b,canvas:Z,svg:U,promise:!0}).then(z).catch(D)})}return new Promise(function(z,D){v.newPlot(L,o,A,I).then(P).then(S).then(E).then(function(U){z(function(H){return T?H.replace(e.IMAGE_URL_PREFIX,""):H}(U))}).catch(function(U){D(U)})})}},{"../lib":515,"../plots/plots":628,"../snapshot/helpers":651,"../snapshot/svgtoimg":653,"../snapshot/tosvg":655,"../version":1132,"./plot_api":552,"fast-isnumeric":190}],559:[function(g,Q,X){var m=g("../lib"),v=g("../plots/plots"),k=g("./plot_schema"),x=g("./plot_config").dfltConfig,e=m.isPlainObject,t=Array.isArray,r=m.isArrayOrTypedArray;function l(c,i,y,f,w,b){b=b||[];for(var _=Object.keys(c),T=0;T<_.length;T++){var L=_[T];if(L!=="transforms"){var A=b.slice();A.push(L);var I=c[L],P=i[L],S=s(y,L),E=(S||{}).valType,z=E==="info_array",D=E==="colorscale",U=(S||{}).items;if(h(y,L))if(e(I)&&e(P)&&E!=="any")l(I,P,S,f,w,A);else if(z&&t(I)){I.length>P.length&&f.push(o("unused",w,A.concat(P.length)));var H,Y,J,W,Z,re=P.length,V=Array.isArray(U);if(V&&(re=Math.min(re,U.length)),S.dimensions===2)for(Y=0;Y<re;Y++)if(t(I[Y])){I[Y].length>P[Y].length&&f.push(o("unused",w,A.concat(Y,P[Y].length)));var B=P[Y].length;for(H=0;H<(V?Math.min(B,U[Y].length):B);H++)J=V?U[Y][H]:U,W=I[Y][H],Z=P[Y][H],m.validate(W,J)?Z!==W&&Z!==+W&&f.push(o("dynamic",w,A.concat(Y,H),W,Z)):f.push(o("value",w,A.concat(Y,H),W))}else f.push(o("array",w,A.concat(Y),I[Y]));else for(Y=0;Y<re;Y++)J=V?U[Y]:U,W=I[Y],Z=P[Y],m.validate(W,J)?Z!==W&&Z!==+W&&f.push(o("dynamic",w,A.concat(Y),W,Z)):f.push(o("value",w,A.concat(Y),W))}else if(S.items&&!z&&t(I)){var j,ee,N=U[Object.keys(U)[0]],$=[];for(j=0;j<P.length;j++){var K=P[j]._index||j;if((ee=A.slice()).push(K),e(I[K])&&e(P[j])){$.push(K);var te=I[K],ie=P[j];e(te)&&te.visible!==!1&&ie.visible===!1?f.push(o("invisible",w,ee)):l(te,ie,N,f,w,ee)}}for(j=0;j<I.length;j++)(ee=A.slice()).push(j),e(I[j])?$.indexOf(j)===-1&&f.push(o("unused",w,ee)):f.push(o("object",w,ee,I[j]))}else!e(I)&&e(P)?f.push(o("object",w,A,I)):r(I)||!r(P)||z||D?L in i?m.validate(I,S)?S.valType==="enumerated"&&(S.coerceNumber&&I!==+P||I!==P)&&f.push(o("dynamic",w,A,I,P)):f.push(o("value",w,A,I)):f.push(o("unused",w,A,I)):f.push(o("array",w,A,I));else f.push(o("schema",w,A))}}return f}function n(c,i){for(var y=c.layout.layoutAttributes,f=0;f<i.length;f++){var w=i[f],b=c.traces[w.type],_=b.layoutAttributes;_&&(w.subplot?m.extendFlat(y[b.attributes.subplot.dflt],_):m.extendFlat(y,_))}return y}Q.exports=function(c,i){c===void 0&&(c=[]),i===void 0&&(i={});var y,f,w=k.get(),b=[],_={_context:m.extendFlat({},x)};t(c)?(_.data=m.extendDeep([],c),y=c):(_.data=[],y=[],b.push(o("array","data"))),e(i)?(_.layout=m.extendDeep({},i),f=i):(_.layout={},f={},arguments.length>1&&b.push(o("object","layout"))),v.supplyDefaults(_);for(var T=_._fullData,L=y.length,A=0;A<L;A++){var I=y[A],P=["data",A];if(e(I)){var S=T[A],E=S.type,z=w.traces[E].attributes;z.type={valType:"enumerated",values:[E]},S.visible===!1&&I.visible!==!1&&b.push(o("invisible",P)),l(I,S,z,b,P);var D=I.transforms,U=S.transforms;if(D){t(D)||b.push(o("array",P,["transforms"])),P.push("transforms");for(var H=0;H<D.length;H++){var Y=["transforms",H],J=D[H].type;if(e(D[H])){var W=w.transforms[J]?w.transforms[J].attributes:{};W.type={valType:"enumerated",values:Object.keys(w.transforms)},l(D[H],U[H],W,b,P,Y)}else b.push(o("object",P,Y))}}}else b.push(o("object",P))}var Z=_._fullLayout,re=n(w,T);return l(f,Z,re,b,"layout"),b.length===0?void 0:b};var d={object:function(c,i){return(c==="layout"&&i===""?"The layout argument":c[0]==="data"&&i===""?"Trace "+c[1]+" in the data argument":u(c)+"key "+i)+" must be linked to an object container"},array:function(c,i){return(c==="data"?"The data argument":u(c)+"key "+i)+" must be linked to an array container"},schema:function(c,i){return u(c)+"key "+i+" is not part of the schema"},unused:function(c,i,y){var f=e(y)?"container":"key";return u(c)+f+" "+i+" did not get coerced"},dynamic:function(c,i,y,f){return[u(c)+"key",i,"(set to '"+y+"')","got reset to","'"+f+"'","during defaults."].join(" ")},invisible:function(c,i){return(i?u(c)+"item "+i:"Trace "+c[1])+" got defaulted to be not visible"},value:function(c,i,y){return[u(c)+"key "+i,"is set to an invalid value ("+y+")"].join(" ")}};function u(c){return t(c)?"In data trace "+c[1]+", ":"In "+c+", "}function o(c,i,y,f,w){var b,_;y=y||"",t(i)?(b=i[0],_=i[1]):(b=i,_=null);var T=function(A){if(!t(A))return String(A);for(var I="",P=0;P<A.length;P++){var S=A[P];typeof S=="number"?I=I.substr(0,I.length-1)+"["+S+"]":I+=S,P<A.length-1&&(I+=".")}return I}(y),L=d[c](i,T,f,w);return m.log(L),{code:c,container:b,trace:_,path:y,astr:T,msg:L}}function h(c,i){var y=p(i),f=y.keyMinusId,w=y.id;return!!(f in c&&c[f]._isSubplotObj&&w)||i in c}function s(c,i){return i in c?c[i]:c[p(i).keyMinusId]}var a=m.counterRegex("([a-z]+)");function p(c){var i=c.match(a);return{keyMinusId:i&&i[1],id:i&&i[2]}}},{"../lib":515,"../plots/plots":628,"./plot_config":553,"./plot_schema":554}],560:[function(g,Q,X){Q.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],561:[function(g,Q,X){var m=g("../lib"),v=g("../plot_api/plot_template");Q.exports=function(k,x,e){var t,r,l=e.name,n=e.inclusionAttr||"visible",d=x[l],u=m.isArrayOrTypedArray(k[l])?k[l]:[],o=x[l]=[],h=v.arrayTemplater(x,l,n);for(t=0;t<u.length;t++){var s=u[t];m.isPlainObject(s)?r=h.newItem(s):(r=h.newItem({}))[n]=!1,r._index=t,r[n]!==!1&&e.handleItemDefaults(s,r,x,e),o.push(r)}var a=h.defaultItems();for(t=0;t<a.length;t++)(r=a[t])._index=o.length,e.handleItemDefaults({},r,x,e,{}),o.push(r);if(m.isArrayOrTypedArray(d)){var p=Math.min(d.length,o.length);for(t=0;t<p;t++)m.relinkPrivateKeys(o[t],d[t])}return o}},{"../lib":515,"../plot_api/plot_template":555}],562:[function(g,Q,X){var m=g("./font_attributes"),v=g("../components/fx/attributes");Q.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:m({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:v.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":398,"./font_attributes":594}],563:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../../lib"),k=v.dateTime2ms,x=v.incrementMonth,e=g("../../constants/numerical").ONEAVGMONTH;Q.exports=function(t,r,l,n){if(r.type!=="date")return{vals:n};var d=t[l+"periodalignment"];if(!d)return{vals:n};var u,o=t[l+"period"];if(m(o)){if((o=+o)<=0)return{vals:n}}else if(typeof o=="string"&&o.charAt(0)==="M"){var h=+o.substring(1);if(!(h>0&&Math.round(h)===h))return{vals:n};u=h}for(var s=r.calendar,a=d==="start",p=d==="end",c=t[l+"period0"],i=k(c,s)||0,y=[],f=[],w=[],b=n.length,_=0;_<b;_++){var T,L,A,I=n[_];if(u){for(T=Math.round((I-i)/(u*e)),A=x(i,u*T,s);A>I;)A=x(A,-u,s);for(;A<=I;)A=x(A,u,s);L=x(A,-u,s)}else{for(A=i+(T=Math.round((I-i)/o))*o;A>I;)A-=o;for(;A<=I;)A+=o;L=A-o}y[_]=a?L:p?A:(L+A)/2,f[_]=L,w[_]=A}return{vals:y,starts:f,ends:w}}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],564:[function(g,Q,X){Q.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],565:[function(g,Q,X){var m=g("@plotly/d3"),v=g("fast-isnumeric"),k=g("../../lib"),x=g("../../constants/numerical").FP_SAFE,e=g("../../registry"),t=g("../../components/drawing"),r=g("./axis_ids"),l=r.getFromId,n=r.isLinked;function d(f,w){var b,_,T=[],L=f._fullLayout,A=o(L,w,0),I=o(L,w,1),P=h(f,w),S=P.min,E=P.max;if(S.length===0||E.length===0)return k.simpleMap(w.range,w.r2l);var z=S[0].val,D=E[0].val;for(b=1;b<S.length&&z===D;b++)z=Math.min(z,S[b].val);for(b=1;b<E.length&&z===D;b++)D=Math.max(D,E[b].val);var U=!1;if(w.range){var H=k.simpleMap(w.range,w.r2l);U=H[1]<H[0]}w.autorange==="reversed"&&(U=!0,w.autorange=!0);var Y,J,W,Z,re,V,B=w.rangemode,j=B==="tozero",ee=B==="nonnegative",N=w._length,$=N/10,K=0;for(b=0;b<S.length;b++)for(Y=S[b],_=0;_<E.length;_++)(V=(J=E[_]).val-Y.val-u(w,Y.val,J.val))>0&&((re=N-A(Y)-I(J))>$?V/re>K&&(W=Y,Z=J,K=V/re):V/N>K&&(W={val:Y.val,nopad:1},Z={val:J.val,nopad:1},K=V/N));if(z===D){var te=z-1,ie=z+1;if(j)if(z===0)T=[0,1];else{var le=(z>0?E:S).reduce(function(ve,fe){return Math.max(ve,I(fe))},0),se=z/(1-Math.min(.5,le/N));T=z>0?[0,se]:[se,0]}else T=ee?[Math.max(0,te),Math.max(1,ie)]:[te,ie]}else j?(W.val>=0&&(W={val:0,nopad:1}),Z.val<=0&&(Z={val:0,nopad:1})):ee&&(W.val-K*A(W)<0&&(W={val:0,nopad:1}),Z.val<=0&&(Z={val:1,nopad:1})),K=(Z.val-W.val-u(w,Y.val,J.val))/(N-A(W)-I(Z)),T=[W.val-K*A(W),Z.val+K*I(Z)];return U&&T.reverse(),k.simpleMap(T,w.l2r||Number)}function u(f,w,b){var _=0;if(f.rangebreaks)for(var T=f.locateBreaks(w,b),L=0;L<T.length;L++){var A=T[L];_+=A.max-A.min}return _}function o(f,w,b){var _=.05*w._length,T=w._anchorAxis||{};if((w.ticklabelposition||"").indexOf("inside")!==-1||(T.ticklabelposition||"").indexOf("inside")!==-1){var L=w.autorange==="reversed";if(!L){var A=k.simpleMap(w.range,w.r2l);L=A[1]<A[0]}L&&(b=!b)}var I=0;return n(f,w._id)||(I=function(P,S,E){var z=0,D=S._id.charAt(0)==="x";for(var U in P._plots){var H=P._plots[U];if(S._id===H.xaxis._id||S._id===H.yaxis._id){var Y=(D?H.yaxis:H.xaxis)||{};if((Y.ticklabelposition||"").indexOf("inside")!==-1&&(!E&&(Y.side==="left"||Y.side==="bottom")||E&&(Y.side==="top"||Y.side==="right"))){if(Y._vals){var J=k.deg2rad(Y._tickAngles[Y._id+"tick"]||0),W=Math.abs(Math.cos(J)),Z=Math.abs(Math.sin(J));if(!Y._vals[0].bb){var re=Y._id+"tick";Y._selections[re].each(function(N){var $=m.select(this);$.select(".text-math-group").empty()&&(N.bb=t.bBox($.node()))})}for(var V=0;V<Y._vals.length;V++){var B=Y._vals[V].bb;if(B){var j=6+B.width,ee=6+B.height;z=Math.max(z,D?Math.max(j*W,ee*Z):Math.max(ee*W,j*Z))}}}Y.ticks==="inside"&&Y.ticklabelposition==="inside"&&(z+=Y.ticklen||0)}}}return z}(f,w,b)),_=Math.max(I,_),w.constrain==="domain"&&w._inputDomain&&(_*=(w._inputDomain[1]-w._inputDomain[0])/(w.domain[1]-w.domain[0])),function(P){return P.nopad?0:P.pad+(P.extrapad?_:I)}}Q.exports={getAutoRange:d,makePadFn:o,doAutoRange:function(f,w,b){if(w.setScale(),w.autorange){w.range=b?b.slice():d(f,w),w._r=w.range.slice(),w._rl=k.simpleMap(w._r,w.r2l);var _=w._input,T={};T[w._attr+".range"]=w.range,T[w._attr+".autorange"]=w.autorange,e.call("_storeDirectGUIEdit",f.layout,f._fullLayout._preGUI,T),_.range=w.range.slice(),_.autorange=w.autorange}var L=w._anchorAxis;if(L&&L.rangeslider){var A=L.rangeslider[w._name];A&&A.rangemode==="auto"&&(A.range=d(f,w)),L._input.rangeslider[w._name]=k.extendFlat({},A)}},findExtremes:function(f,w,b){b||(b={}),f._m||f.setScale();var _,T,L,A,I,P,S,E,z,D=[],U=[],H=w.length,Y=b.padded||!1,J=b.tozero&&(f.type==="linear"||f.type==="-"),W=f.type==="log",Z=!1,re=b.vpadLinearized||!1;function V(ie){if(Array.isArray(ie))return Z=!0,function(se){return Math.max(Number(ie[se]||0),0)};var le=Math.max(Number(ie||0),0);return function(){return le}}var B=V((f._m>0?b.ppadplus:b.ppadminus)||b.ppad||0),j=V((f._m>0?b.ppadminus:b.ppadplus)||b.ppad||0),ee=V(b.vpadplus||b.vpad),N=V(b.vpadminus||b.vpad);if(!Z){if(E=1/0,z=-1/0,W)for(_=0;_<H;_++)(T=w[_])<E&&T>0&&(E=T),T>z&&T<x&&(z=T);else for(_=0;_<H;_++)(T=w[_])<E&&T>-x&&(E=T),T>z&&T<x&&(z=T);w=[E,z],H=2}var $={tozero:J,extrapad:Y};function K(ie){L=w[ie],v(L)&&(P=B(ie),S=j(ie),re?(A=f.c2l(L)-N(ie),I=f.c2l(L)+ee(ie)):(E=L-N(ie),z=L+ee(ie),W&&E<z/10&&(E=z/10),A=f.c2l(E),I=f.c2l(z)),J&&(A=Math.min(0,A),I=Math.max(0,I)),c(A)&&s(D,A,S,$),c(I)&&a(U,I,P,$))}var te=Math.min(6,H);for(_=0;_<te;_++)K(_);for(_=H-1;_>=te;_--)K(_);return{min:D,max:U,opts:b}},concatExtremes:h};function h(f,w,b){var _,T,L,A=w._id,I=f._fullData,P=f._fullLayout,S=[],E=[];function z(J,W){for(_=0;_<W.length;_++){var Z=J[W[_]],re=(Z._extremes||{})[A];if(Z.visible===!0&&re){for(T=0;T<re.min.length;T++)L=re.min[T],s(S,L.val,L.pad,{extrapad:L.extrapad});for(T=0;T<re.max.length;T++)L=re.max[T],a(E,L.val,L.pad,{extrapad:L.extrapad})}}}if(z(I,w._traceIndices),z(P.annotations||[],w._annIndices||[]),z(P.shapes||[],w._shapeIndices||[]),w._matchGroup&&!b){for(var D in w._matchGroup)if(D!==w._id){var U=l(f,D),H=h(f,U,!0),Y=w._length/U._length;for(T=0;T<H.min.length;T++)L=H.min[T],s(S,L.val,L.pad*Y,{extrapad:L.extrapad});for(T=0;T<H.max.length;T++)L=H.max[T],a(E,L.val,L.pad*Y,{extrapad:L.extrapad})}}return{min:S,max:E}}function s(f,w,b,_){p(f,w,b,_,i)}function a(f,w,b,_){p(f,w,b,_,y)}function p(f,w,b,_,T){for(var L=_.tozero,A=_.extrapad,I=!0,P=0;P<f.length&&I;P++){var S=f[P];if(T(S.val,w)&&S.pad>=b&&(S.extrapad||!A)){I=!1;break}T(w,S.val)&&S.pad<=b&&(A||!S.extrapad)&&(f.splice(P,1),P--)}if(I){var E=L&&w===0;f.push({val:w,pad:E?0:b,extrapad:!E&&A})}}function c(f){return v(f)&&Math.abs(f)<x}function i(f,w){return f<=w}function y(f,w){return f>=w}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../../registry":647,"./axis_ids":570,"@plotly/d3":58,"fast-isnumeric":190}],566:[function(g,Q,X){var m=g("@plotly/d3"),v=g("fast-isnumeric"),k=g("../../plots/plots"),x=g("../../registry"),e=g("../../lib"),t=e.strTranslate,r=g("../../lib/svg_text_utils"),l=g("../../components/titles"),n=g("../../components/color"),d=g("../../components/drawing"),u=g("./layout_attributes"),o=g("./clean_ticks"),h=g("../../constants/numerical"),s=h.ONEMAXYEAR,a=h.ONEAVGYEAR,p=h.ONEMINYEAR,c=h.ONEMAXQUARTER,i=h.ONEAVGQUARTER,y=h.ONEMINQUARTER,f=h.ONEMAXMONTH,w=h.ONEAVGMONTH,b=h.ONEMINMONTH,_=h.ONEWEEK,T=h.ONEDAY,L=T/2,A=h.ONEHOUR,I=h.ONEMIN,P=h.ONESEC,S=h.MINUS_SIGN,E=h.BADNUM,z={K:"zeroline"},D={K:"gridline",L:"path"},U={K:"minor-gridline",L:"path"},H={K:"tick",L:"path"},Y={K:"tick",L:"text"},J={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},W=g("../../constants/alignment"),Z=W.MID_SHIFT,re=W.CAP_SHIFT,V=W.LINE_SPACING,B=W.OPPOSITE_SIDE,j=Q.exports={};j.setConvert=g("./set_convert");var ee=g("./axis_autotype"),N=g("./axis_ids"),$=N.idSort,K=N.isLinked;j.id2name=N.id2name,j.name2id=N.name2id,j.cleanId=N.cleanId,j.list=N.list,j.listIds=N.listIds,j.getFromId=N.getFromId,j.getFromTrace=N.getFromTrace;var te=g("./autorange");j.getAutoRange=te.getAutoRange,j.findExtremes=te.findExtremes;function ie(he){var be=1e-4*(he[1]-he[0]);return[he[0]-be,he[1]+be]}j.coerceRef=function(he,be,Re,Ue,Xe,qe){var st=Ue.charAt(Ue.length-1),it=Re._fullLayout._subplots[st+"axis"],Tt=Ue+"ref",Pt={};return Xe||(Xe=it[0]||(typeof qe=="string"?qe:qe[0])),qe||(qe=Xe),it=it.concat(it.map(function(rt){return rt+" domain"})),Pt[Tt]={valType:"enumerated",values:it.concat(qe?typeof qe=="string"?[qe]:qe:[]),dflt:Xe},e.coerce(he,be,Pt,Tt)},j.getRefType=function(he){return he===void 0?he:he==="paper"?"paper":he==="pixel"?"pixel":/( domain)$/.test(he)?"domain":"range"},j.coercePosition=function(he,be,Re,Ue,Xe,qe){var st,it;if(j.getRefType(Ue)!=="range")st=e.ensureNumber,it=Re(Xe,qe);else{var Tt=j.getFromId(be,Ue);it=Re(Xe,qe=Tt.fraction2r(qe)),st=Tt.cleanPos}he[Xe]=st(it)},j.cleanPosition=function(he,be,Re){return(Re==="paper"||Re==="pixel"?e.ensureNumber:j.getFromId(be,Re).cleanPos)(he)},j.redrawComponents=function(he,be){be=be||j.listIds(he);var Re=he._fullLayout;function Ue(Xe,qe,st,it){for(var Tt=x.getComponentMethod(Xe,qe),Pt={},rt=0;rt<be.length;rt++)for(var ut=Re[j.id2name(be[rt])][st],Bt=0;Bt<ut.length;Bt++){var wt=ut[Bt];if(!Pt[wt]&&(Tt(he,wt),Pt[wt]=1,it))return}}Ue("annotations","drawOne","_annIndices"),Ue("shapes","drawOne","_shapeIndices"),Ue("images","draw","_imgIndices",!0),Ue("selections","drawOne","_selectionIndices")};var le=j.getDataConversions=function(he,be,Re,Ue){var Xe,qe=Re==="x"||Re==="y"||Re==="z"?Re:Ue;if(Array.isArray(qe)){if(Xe={type:ee(Ue,void 0,{autotypenumbers:he._fullLayout.autotypenumbers}),_categories:[]},j.setConvert(Xe),Xe.type==="category")for(var st=0;st<Ue.length;st++)Xe.d2c(Ue[st])}else Xe=j.getFromTrace(he,be,qe);return Xe?{d2c:Xe.d2c,c2d:Xe.c2d}:qe==="ids"?{d2c:ve,c2d:ve}:{d2c:se,c2d:se}};function se(he){return+he}function ve(he){return String(he)}function fe(he,be){return Math.abs((he/be+.5)%1-.5)<.001}function ye(he,be){return Math.abs(he/be-1)<.001}function Ae(he){return+he.substring(1)}function pe(he){var be=ie(e.simpleMap(he.range,he.r2l)),Re=Math.min(be[0],be[1]),Ue=Math.max(be[0],be[1]),Xe=he.type==="category"?he.d2l_noadd:he.d2l;he.type==="log"&&String(he.dtick).charAt(0)!=="L"&&(he.dtick="L"+Math.pow(10,Math.floor(Math.min(he.range[0],he.range[1]))-1));for(var qe=[],st=0;st<=1;st++)if(!st||he.minor){var it=st?he.minor.tickvals:he.tickvals,Tt=st?[]:he.ticktext;if(it){Array.isArray(Tt)||(Tt=[]);for(var Pt=0;Pt<it.length;Pt++){var rt=Xe(it[Pt]);if(rt>Re&&rt<Ue){var ut=Tt[Pt]===void 0?j.tickText(he,rt):Oe(he,rt,String(Tt[Pt]));st&&(ut.minor=!0,ut.text=""),qe.push(ut)}}}}return he.rangebreaks&&(qe=qe.filter(function(Bt){return he.maskBreaks(Bt.x)!==E})),qe}j.getDataToCoordFunc=function(he,be,Re,Ue){return le(he,be,Re,Ue).d2c},j.counterLetter=function(he){var be=he.charAt(0);return be==="x"?"y":be==="y"?"x":void 0},j.minDtick=function(he,be,Re,Ue){["log","category","multicategory"].indexOf(he.type)===-1&&Ue?he._minDtick===void 0?(he._minDtick=be,he._forceTick0=Re):he._minDtick&&((he._minDtick/be+1e-6)%1<2e-6&&((Re-he._forceTick0)/be%1+1.000001)%1<2e-6?(he._minDtick=be,he._forceTick0=Re):((be/he._minDtick+1e-6)%1>2e-6||((Re-he._forceTick0)/he._minDtick%1+1.000001)%1>2e-6)&&(he._minDtick=0)):he._minDtick=0},j.saveRangeInitial=function(he,be){for(var Re=j.list(he,"",!0),Ue=!1,Xe=0;Xe<Re.length;Xe++){var qe=Re[Xe],st=qe._rangeInitial===void 0,it=st||!(qe.range[0]===qe._rangeInitial[0]&&qe.range[1]===qe._rangeInitial[1]);(st&&qe.autorange===!1||be&&it)&&(qe._rangeInitial=qe.range.slice(),Ue=!0)}return Ue},j.saveShowSpikeInitial=function(he,be){for(var Re=j.list(he,"",!0),Ue=!1,Xe="on",qe=0;qe<Re.length;qe++){var st=Re[qe],it=st._showSpikeInitial===void 0,Tt=it||st.showspikes!==st._showspikes;(it||be&&Tt)&&(st._showSpikeInitial=st.showspikes,Ue=!0),Xe!=="on"||st.showspikes||(Xe="off")}return he._fullLayout._cartesianSpikesEnabled=Xe,Ue},j.autoBin=function(he,be,Re,Ue,Xe,qe){var st,it=e.aggNums(Math.min,null,he),Tt=e.aggNums(Math.max,null,he);if(be.type==="category"||be.type==="multicategory")return{start:it-.5,end:Tt+.5,size:Math.max(1,Math.round(qe)||1),_dataSpan:Tt-it};if(Xe||(Xe=be.calendar),st=be.type==="log"?{type:"linear",range:[it,Tt]}:{type:be.type,range:e.simpleMap([it,Tt],be.c2r,0,Xe),calendar:Xe},j.setConvert(st),qe=qe&&o.dtick(qe,st.type))st.dtick=qe,st.tick0=o.tick0(void 0,st.type,Xe);else{var Pt;if(Re)Pt=(Tt-it)/Re;else{var rt=e.distinctVals(he),ut=Math.pow(10,Math.floor(Math.log(rt.minDiff)/Math.LN10)),Bt=ut*e.roundUp(rt.minDiff/ut,[.9,1.9,4.9,9.9],!0);Pt=Math.max(Bt,2*e.stdev(he)/Math.pow(he.length,Ue?.25:.4)),v(Pt)||(Pt=1)}j.autoTicks(st,Pt)}var wt,Lt=st.dtick,Se=j.tickIncrement(j.tickFirst(st),Lt,"reverse",Xe);if(typeof Lt=="number")wt=(Se=function(We,nt,ft,Mt,Nt){var Zt=0,Ut=0,fr=0,Tr=0;function ur(cr){return(1+100*(cr-We)/ft.dtick)%100<2}for(var Kt=0;Kt<nt.length;Kt++)nt[Kt]%1==0?fr++:v(nt[Kt])||Tr++,ur(nt[Kt])&&Zt++,ur(nt[Kt]+ft.dtick/2)&&Ut++;var Qt=nt.length-Tr;if(fr===Qt&&ft.type!=="date")ft.dtick<1?We=Mt-.5*ft.dtick:(We-=.5)+ft.dtick<Mt&&(We+=ft.dtick);else if(Ut<.1*Qt&&(Zt>.3*Qt||ur(Mt)||ur(Nt))){var er=ft.dtick/2;We+=We+er<Mt?er:-er}return We}(Se,he,st,it,Tt))+(1+Math.floor((Tt-Se)/Lt))*Lt;else for(st.dtick.charAt(0)==="M"&&(Se=function(We,nt,ft,Mt,Nt){var Zt=e.findExactDates(nt,Nt);if(Zt.exactDays>.8){var Ut=Number(ft.substr(1));Zt.exactYears>.8&&Ut%12==0?We=j.tickIncrement(We,"M6","reverse")+1.5*T:Zt.exactMonths>.8?We=j.tickIncrement(We,"M1","reverse")+15.5*T:We-=L;var fr=j.tickIncrement(We,ft);if(fr<=Mt)return fr}return We}(Se,he,Lt,it,Xe)),wt=Se,0;wt<=Tt;)wt=j.tickIncrement(wt,Lt,!1,Xe);return{start:be.c2r(Se,0,Xe),end:be.c2r(wt,0,Xe),size:Lt,_dataSpan:Tt-it}},j.prepMinorTicks=function(he,be,Re){if(!be.minor.dtick){delete he.dtick;var Ue,Xe=be.dtick&&v(be._tmin);if(Xe){var qe=j.tickIncrement(be._tmin,be.dtick,!0);Ue=[be._tmin,.99*qe+.01*be._tmin]}else{var st=e.simpleMap(be.range,be.r2l);Ue=[st[0],.8*st[0]+.2*st[1]]}if(he.range=e.simpleMap(Ue,be.l2r),he._isMinor=!0,j.prepTicks(he,Re),Xe){var it=v(be.dtick),Tt=v(he.dtick),Pt=it?be.dtick:+be.dtick.substring(1),rt=Tt?he.dtick:+he.dtick.substring(1);it&&Tt?fe(Pt,rt)?Pt===2*_&&rt===2*T&&(he.dtick=_):Pt===2*_&&rt===3*T?he.dtick=_:Pt!==_||(be._input.minor||{}).nticks?ye(Pt/rt,2.5)?he.dtick=Pt/2:he.dtick=Pt:he.dtick=T:String(be.dtick).charAt(0)==="M"?Tt?he.dtick="M1":fe(Pt,rt)?Pt>=12&&rt===2&&(he.dtick="M3"):he.dtick=be.dtick:String(he.dtick).charAt(0)==="L"?String(be.dtick).charAt(0)==="L"?fe(Pt,rt)||(he.dtick=ye(Pt/rt,2.5)?be.dtick/2:be.dtick):he.dtick="D1":he.dtick==="D2"&&+be.dtick>1&&(he.dtick=1)}he.range=be.range}be.minor._tick0Init===void 0&&(he.tick0=be.tick0)},j.prepTicks=function(he,be){var Re=e.simpleMap(he.range,he.r2l,void 0,void 0,be);if(he.tickmode==="auto"||!he.dtick){var Ue,Xe=he.nticks;Xe||(he.type==="category"||he.type==="multicategory"?(Ue=he.tickfont?e.bigFont(he.tickfont.size||12):15,Xe=he._length/Ue):(Ue=he._id.charAt(0)==="y"?40:80,Xe=e.constrain(he._length/Ue,4,9)+1),he._name==="radialaxis"&&(Xe*=2)),he.minor&&he.minor.tickmode!=="array"||he.tickmode==="array"&&(Xe*=100),he._roughDTick=Math.abs(Re[1]-Re[0])/Xe,j.autoTicks(he,he._roughDTick),he._minDtick>0&&he.dtick<2*he._minDtick&&(he.dtick=he._minDtick,he.tick0=he.l2r(he._forceTick0))}he.ticklabelmode==="period"&&function(qe){var st;function it(){return!(v(qe.dtick)||qe.dtick.charAt(0)!=="M")}var Tt=it(),Pt=j.getTickFormat(qe);if(Pt){var rt=qe._dtickInit!==qe.dtick;/%[fLQsSMX]/.test(Pt)||(/%[HI]/.test(Pt)?(st=A,rt&&!Tt&&qe.dtick<A&&(qe.dtick=A)):/%p/.test(Pt)?(st=L,rt&&!Tt&&qe.dtick<L&&(qe.dtick=L)):/%[Aadejuwx]/.test(Pt)?(st=T,rt&&!Tt&&qe.dtick<T&&(qe.dtick=T)):/%[UVW]/.test(Pt)?(st=_,rt&&!Tt&&qe.dtick<_&&(qe.dtick=_)):/%[Bbm]/.test(Pt)?(st=w,rt&&(Tt?Ae(qe.dtick)<1:qe.dtick<b)&&(qe.dtick="M1")):/%[q]/.test(Pt)?(st=i,rt&&(Tt?Ae(qe.dtick)<3:qe.dtick<y)&&(qe.dtick="M3")):/%[Yy]/.test(Pt)&&(st=a,rt&&(Tt?Ae(qe.dtick)<12:qe.dtick<p)&&(qe.dtick="M12")))}(Tt=it())&&qe.tick0===qe._dowTick0&&(qe.tick0=qe._rawTick0),qe._definedDelta=st}(he),he.tick0||(he.tick0=he.type==="date"?"2000-01-01":0),he.type==="date"&&he.dtick<.1&&(he.dtick=.1),Ie(he)},j.calcTicks=function(he,be){for(var Re,Ue,Xe=he.type,qe=he.calendar,st=he.ticklabelstep,it=he.ticklabelmode==="period",Tt=e.simpleMap(he.range,he.r2l,void 0,void 0,be),Pt=Tt[1]<Tt[0],rt=Math.min(Tt[0],Tt[1]),ut=Math.max(Tt[0],Tt[1]),Bt=Math.max(1e3,he._length||0),wt=[],Lt=[],Se=[],We=[],nt=he.minor&&(he.minor.ticks||he.minor.showgrid),ft=1;ft>=(nt?0:1);ft--){var Mt=!ft;ft?(he._dtickInit=he.dtick,he._tick0Init=he.tick0):(he.minor._dtickInit=he.minor.dtick,he.minor._tick0Init=he.minor.tick0);var Nt=ft?he:e.extendFlat({},he,he.minor);if(Mt?j.prepMinorTicks(Nt,he,be):j.prepTicks(Nt,be),Nt.tickmode!=="array"){var Zt=ie(Tt),Ut=Zt[0],fr=Zt[1],Tr=v(Nt.dtick),ur=Xe==="log"&&!(Tr||Nt.dtick.charAt(0)==="L"),Kt=j.tickFirst(Nt,be);if(ft){if(he._tmin=Kt,Kt<Ut!==Pt)break;Xe!=="category"&&Xe!=="multicategory"||(fr=Pt?Math.max(-.5,fr):Math.min(he._categories.length-.5,fr))}var Qt,er,cr=null,gr=Kt;ft&&(Tr?er=he.dtick:Xe==="date"?typeof he.dtick=="string"&&he.dtick.charAt(0)==="M"&&(er=w*he.dtick.substring(1)):er=he._roughDTick,Qt=Math.round((he.r2l(gr)-he.r2l(he.tick0))/er)-1);var Mr=Nt.dtick;for(Nt.rangebreaks&&Nt._tick0Init!==Nt.tick0&&(gr=It(gr,he),Pt||(gr=j.tickIncrement(gr,Mr,!Pt,qe))),ft&&it&&(gr=j.tickIncrement(gr,Mr,!Pt,qe),Qt--);Pt?gr>=fr:gr<=fr;gr=j.tickIncrement(gr,Mr,Pt,qe)){if(ft&&Qt++,Nt.rangebreaks&&!Pt){if(gr<Ut)continue;if(Nt.maskBreaks(gr)===E&&It(gr,Nt)>=ut)break}if(Se.length>Bt||gr===cr)break;cr=gr;var Ir={value:gr};ft?(ur&&gr!==(0|gr)&&(Ir.simpleLabel=!0),st>1&&Qt%st&&(Ir.skipLabel=!0),Se.push(Ir)):(Ir.minor=!0,We.push(Ir))}}else ft?(Se=[],wt=pe(he)):(We=[],Lt=pe(he))}if(nt&&!(he.minor.ticks==="inside"&&he.ticks==="outside"||he.minor.ticks==="outside"&&he.ticks==="inside")){for(var Fr=Se.map(function(Ln){return Ln.value}),Yr=[],fn=0;fn<We.length;fn++){var en=We[fn],Rn=en.value;if(Fr.indexOf(Rn)===-1){for(var nn=!1,yn=0;!nn&&yn<Se.length;yn++)1e7+Se[yn].value===1e7+Rn&&(nn=!0);nn||Yr.push(en)}}We=Yr}if(it&&function(Ln,oa,tr){for(var mr=0;mr<Ln.length;mr++){var Ct=Ln[mr].value,or=mr,hr=mr+1;mr<Ln.length-1?(or=mr,hr=mr+1):mr>0?(or=mr-1,hr=mr):(or=mr,hr=mr);var Rr,zr=Ln[or].value,Or=Ln[hr].value,Ar=Math.abs(Or-zr),vr=tr||Ar,xr=0;vr>=p?xr=Ar>=p&&Ar<=s?Ar:a:tr===i&&vr>=y?xr=Ar>=y&&Ar<=c?Ar:i:vr>=b?xr=Ar>=b&&Ar<=f?Ar:w:tr===_&&vr>=_?xr=_:vr>=T?xr=T:tr===L&&vr>=L?xr=L:tr===A&&vr>=A&&(xr=A),xr>=Ar&&(xr=Ar,Rr=!0);var wr=Ct+xr;if(oa.rangebreaks&&xr>0){for(var Er=0,qr=0;qr<84;qr++){var Hr=(qr+.5)/84;oa.maskBreaks(Ct*(1-Hr)+Hr*wr)!==E&&Er++}(xr*=Er/84)||(Ln[mr].drop=!0),Rr&&Ar>_&&(xr=Ar)}(xr>0||mr===0)&&(Ln[mr].periodX=Ct+xr/2)}}(Se,he,he._definedDelta),he.rangebreaks){var bn=he._id.charAt(0)==="y",ta=1;he.tickmode==="auto"&&(ta=he.tickfont?he.tickfont.size:12);var Br=NaN;for(Re=Se.length-1;Re>-1;Re--)if(Se[Re].drop)Se.splice(Re,1);else{Se[Re].value=It(Se[Re].value,he);var rn=he.c2p(Se[Re].value);(bn?Br>rn-ta:Br<rn+ta)?Se.splice(Pt?Re+1:Re,1):Br=rn}}nr(he)&&Math.abs(Tt[1]-Tt[0])===360&&Se.pop(),he._tmax=(Se[Se.length-1]||{}).value,he._prevDateHead="",he._inCalcTicks=!0;var gn,Qr,un=function(Ln){Ln.text="",he._prevDateHead=Ue};for(Se=Se.concat(We),Re=0;Re<Se.length;Re++){var Gn=Se[Re].minor,wn=Se[Re].value;Gn?Lt.push({x:wn,minor:!0}):(Ue=he._prevDateHead,gn=j.tickText(he,wn,!1,Se[Re].simpleLabel),(Qr=Se[Re].periodX)!==void 0&&(gn.periodX=Qr,(Qr>ut||Qr<rt)&&(Qr>ut&&(gn.periodX=ut),Qr<rt&&(gn.periodX=rt),un(gn))),Se[Re].skipLabel&&un(gn),wt.push(gn))}return wt=wt.concat(Lt),he._inCalcTicks=!1,it&&wt.length&&(wt[0].noTick=!0),wt};var ge=[2,5,10],we=[1,2,3,6,12],oe=[1,2,5,10,15,30],de=[1,2,3,7,14],Te=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Ee=[-.301,0,.301,.699,1],Me=[15,30,45,90,180];function De(he,be,Re){return be*e.roundUp(he/be,Re)}function Ie(he){var be=he.dtick;if(he._tickexponent=0,v(be)||typeof be=="string"||(be=1),he.type!=="category"&&he.type!=="multicategory"||(he._tickround=null),he.type==="date"){var Re=he.r2l(he.tick0),Ue=he.l2r(Re).replace(/(^-|i)/g,""),Xe=Ue.length;if(String(be).charAt(0)==="M")Xe>10||Ue.substr(5)!=="01-01"?he._tickround="d":he._tickround=+be.substr(1)%12==0?"y":"m";else if(be>=T&&Xe<=10||be>=15*T)he._tickround="d";else if(be>=I&&Xe<=16||be>=A)he._tickround="M";else if(be>=P&&Xe<=19||be>=I)he._tickround="S";else{var qe=he.l2r(Re+be).replace(/^-/,"").length;he._tickround=Math.max(Xe,qe)-20,he._tickround<0&&(he._tickround=4)}}else if(v(be)||be.charAt(0)==="L"){var st=he.range.map(he.r2d||Number);v(be)||(be=Number(be.substr(1))),he._tickround=2-Math.floor(Math.log(be)/Math.LN10+.01);var it=Math.max(Math.abs(st[0]),Math.abs(st[1])),Tt=Math.floor(Math.log(it)/Math.LN10+.01),Pt=he.minexponent===void 0?3:he.minexponent;Math.abs(Tt)>Pt&&(Fe(he.exponentformat)&&!Pe(Tt)?he._tickexponent=3*Math.round((Tt-1)/3):he._tickexponent=Tt)}else he._tickround=null}function Oe(he,be,Re){var Ue=he.tickfont||{};return{x:be,dx:0,dy:0,text:Re||"",fontSize:Ue.size,font:Ue.family,fontColor:Ue.color}}j.autoTicks=function(he,be,Re){var Ue;function Xe(ut){return Math.pow(ut,Math.floor(Math.log(be)/Math.LN10))}if(he.type==="date"){he.tick0=e.dateTick0(he.calendar,0);var qe=2*be;if(qe>a)be/=a,Ue=Xe(10),he.dtick="M"+12*De(be,Ue,ge);else if(qe>w)be/=w,he.dtick="M"+De(be,1,we);else if(qe>T){if(he.dtick=De(be,T,he._hasDayOfWeekBreaks?[1,2,7,14]:de),!Re){var st=j.getTickFormat(he),it=he.ticklabelmode==="period";it&&(he._rawTick0=he.tick0),/%[uVW]/.test(st)?he.tick0=e.dateTick0(he.calendar,2):he.tick0=e.dateTick0(he.calendar,1),it&&(he._dowTick0=he.tick0)}}else qe>A?he.dtick=De(be,A,we):qe>I?he.dtick=De(be,I,oe):qe>P?he.dtick=De(be,P,oe):(Ue=Xe(10),he.dtick=De(be,Ue,ge))}else if(he.type==="log"){he.tick0=0;var Tt=e.simpleMap(he.range,he.r2l);if(he._isMinor&&(be*=1.5),be>.7)he.dtick=Math.ceil(be);else if(Math.abs(Tt[1]-Tt[0])<1){var Pt=1.5*Math.abs((Tt[1]-Tt[0])/be);be=Math.abs(Math.pow(10,Tt[1])-Math.pow(10,Tt[0]))/Pt,Ue=Xe(10),he.dtick="L"+De(be,Ue,ge)}else he.dtick=be>.3?"D2":"D1"}else he.type==="category"||he.type==="multicategory"?(he.tick0=0,he.dtick=Math.ceil(Math.max(be,1))):nr(he)?(he.tick0=0,Ue=1,he.dtick=De(be,Ue,Me)):(he.tick0=0,Ue=Xe(10),he.dtick=De(be,Ue,ge));if(he.dtick===0&&(he.dtick=1),!v(he.dtick)&&typeof he.dtick!="string"){var rt=he.dtick;throw he.dtick=1,"ax.dtick error: "+String(rt)}},j.tickIncrement=function(he,be,Re,Ue){var Xe=Re?-1:1;if(v(be))return e.increment(he,Xe*be);var qe=be.charAt(0),st=Xe*Number(be.substr(1));if(qe==="M")return e.incrementMonth(he,st,Ue);if(qe==="L")return Math.log(Math.pow(10,he)+st)/Math.LN10;if(qe==="D"){var it=be==="D2"?Ee:Te,Tt=he+.01*Xe,Pt=e.roundUp(e.mod(Tt,1),it,Re);return Math.floor(Tt)+Math.log(m.round(Math.pow(10,Pt),1))/Math.LN10}throw"unrecognized dtick "+String(be)},j.tickFirst=function(he,be){var Re=he.r2l||Number,Ue=e.simpleMap(he.range,Re,void 0,void 0,be),Xe=Ue[1]<Ue[0],qe=Xe?Math.floor:Math.ceil,st=ie(Ue)[0],it=he.dtick,Tt=Re(he.tick0);if(v(it)){var Pt=qe((st-Tt)/it)*it+Tt;return he.type!=="category"&&he.type!=="multicategory"||(Pt=e.constrain(Pt,0,he._categories.length-1)),Pt}var rt=it.charAt(0),ut=Number(it.substr(1));if(rt==="M"){for(var Bt,wt,Lt,Se=0,We=Tt;Se<10;){if(((Bt=j.tickIncrement(We,it,Xe,he.calendar))-st)*(We-st)<=0)return Xe?Math.min(We,Bt):Math.max(We,Bt);wt=(st-(We+Bt)/2)/(Bt-We),Lt=rt+(Math.abs(Math.round(wt))||1)*ut,We=j.tickIncrement(We,Lt,wt<0?!Xe:Xe,he.calendar),Se++}return e.error("tickFirst did not converge",he),We}if(rt==="L")return Math.log(qe((Math.pow(10,st)-Tt)/ut)*ut+Tt)/Math.LN10;if(rt==="D"){var nt=it==="D2"?Ee:Te,ft=e.roundUp(e.mod(st,1),nt,Xe);return Math.floor(st)+Math.log(m.round(Math.pow(10,ft),1))/Math.LN10}throw"unrecognized dtick "+String(it)},j.tickText=function(he,be,Re,Ue){var Xe,qe=Oe(he,be),st=he.tickmode==="array",it=Re||st,Tt=he.type,Pt=Tt==="category"?he.d2l_noadd:he.d2l;if(st&&Array.isArray(he.ticktext)){var rt=e.simpleMap(he.range,he.r2l),ut=(Math.abs(rt[1]-rt[0])-(he._lBreaks||0))/1e4;for(Xe=0;Xe<he.ticktext.length&&!(Math.abs(be-Pt(he.tickvals[Xe]))<ut);Xe++);if(Xe<he.ticktext.length)return qe.text=String(he.ticktext[Xe]),qe}function Bt(Se){if(Se===void 0)return!0;if(Re)return Se==="none";var We={first:he._tmin,last:he._tmax}[Se];return Se!=="all"&&be!==We}var wt=Re?"never":he.exponentformat!=="none"&&Bt(he.showexponent)?"hide":"";if(Tt==="date"?function(Se,We,nt,ft){var Mt=Se._tickround,Nt=nt&&Se.hoverformat||j.getTickFormat(Se);ft&&(Mt=v(Mt)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Mt]);var Zt,Ut=e.formatDate(We.x,Nt,Mt,Se._dateFormat,Se.calendar,Se._extraFormat),fr=Ut.indexOf(`
`);if(fr!==-1&&(Zt=Ut.substr(fr+1),Ut=Ut.substr(0,fr)),ft&&(Ut==="00:00:00"||Ut==="00:00"?(Ut=Zt,Zt=""):Ut.length===8&&(Ut=Ut.replace(/:00$/,""))),Zt)if(nt)Mt==="d"?Ut+=", "+Zt:Ut=Zt+(Ut?", "+Ut:"");else if(Se._inCalcTicks&&Se._prevDateHead===Zt){var Tr=Be(Se),ur=Se._trueSide||Se.side;(!Tr&&ur==="top"||Tr&&ur==="bottom")&&(Ut+="<br> ")}else Se._prevDateHead=Zt,Ut+="<br>"+Zt;We.text=Ut}(he,qe,Re,it):Tt==="log"?function(Se,We,nt,ft,Mt){var Nt=Se.dtick,Zt=We.x,Ut=Se.tickformat,fr=typeof Nt=="string"&&Nt.charAt(0);if(Mt==="never"&&(Mt=""),ft&&fr!=="L"&&(Nt="L3",fr="L"),Ut||fr==="L")We.text=ze(Math.pow(10,Zt),Se,Mt,ft);else if(v(Nt)||fr==="D"&&e.mod(Zt+.01,1)<.1){var Tr=Math.round(Zt),ur=Math.abs(Tr),Kt=Se.exponentformat;Kt==="power"||Fe(Kt)&&Pe(Tr)?(We.text=Tr===0?1:Tr===1?"10":"10<sup>"+(Tr>1?"":S)+ur+"</sup>",We.fontSize*=1.25):(Kt==="e"||Kt==="E")&&ur>2?We.text="1"+Kt+(Tr>0?"+":S)+ur:(We.text=ze(Math.pow(10,Zt),Se,"","fakehover"),Nt==="D1"&&Se._id.charAt(0)==="y"&&(We.dy-=We.fontSize/6))}else{if(fr!=="D")throw"unrecognized dtick "+String(Nt);We.text=String(Math.round(Math.pow(10,e.mod(Zt,1)))),We.fontSize*=.75}if(Se.dtick==="D1"){var Qt=String(We.text).charAt(0);Qt!=="0"&&Qt!=="1"||(Se._id.charAt(0)==="y"?We.dx-=We.fontSize/4:(We.dy+=We.fontSize/2,We.dx+=(Se.range[1]>Se.range[0]?1:-1)*We.fontSize*(Zt<0?.5:.25)))}}(he,qe,0,it,wt):Tt==="category"?function(Se,We){var nt=Se._categories[Math.round(We.x)];nt===void 0&&(nt=""),We.text=String(nt)}(he,qe):Tt==="multicategory"?function(Se,We,nt){var ft=Math.round(We.x),Mt=Se._categories[ft]||[],Nt=Mt[1]===void 0?"":String(Mt[1]),Zt=Mt[0]===void 0?"":String(Mt[0]);nt?We.text=Zt+" - "+Nt:(We.text=Nt,We.text2=Zt)}(he,qe,Re):nr(he)?function(Se,We,nt,ft,Mt){if(Se.thetaunit!=="radians"||nt)We.text=ze(We.x,Se,Mt,ft);else{var Nt=We.x/180;if(Nt===0)We.text="0";else{var Zt=function(fr){function Tr(er,cr){return Math.abs(er-cr)<=1e-6}var ur=function(er){for(var cr=1;!Tr(Math.round(er*cr)/cr,er);)cr*=10;return cr}(fr),Kt=fr*ur,Qt=Math.abs(function er(cr,gr){return Tr(gr,0)?cr:er(gr,cr%gr)}(Kt,ur));return[Math.round(Kt/Qt),Math.round(ur/Qt)]}(Nt);if(Zt[1]>=100)We.text=ze(e.deg2rad(We.x),Se,Mt,ft);else{var Ut=We.x<0;Zt[1]===1?Zt[0]===1?We.text="\u03C0":We.text=Zt[0]+"\u03C0":We.text=["<sup>",Zt[0],"</sup>","\u2044","<sub>",Zt[1],"</sub>","\u03C0"].join(""),Ut&&(We.text=S+We.text)}}}}(he,qe,Re,it,wt):function(Se,We,nt,ft,Mt){Mt==="never"?Mt="":Se.showexponent==="all"&&Math.abs(We.x/Se.dtick)<1e-6&&(Mt="hide"),We.text=ze(We.x,Se,Mt,ft)}(he,qe,0,it,wt),Ue||(he.tickprefix&&!Bt(he.showtickprefix)&&(qe.text=he.tickprefix+qe.text),he.ticksuffix&&!Bt(he.showticksuffix)&&(qe.text+=he.ticksuffix)),he.tickson==="boundaries"||he.showdividers){var Lt=function(Se){var We=he.l2p(Se);return We>=0&&We<=he._length?Se:null};qe.xbnd=[Lt(qe.x-.5),Lt(qe.x+he.dtick-.5)]}return qe},j.hoverLabelText=function(he,be,Re){Re&&(he=e.extendFlat({},he,{hoverformat:Re}));var Ue=Array.isArray(be)?be[0]:be,Xe=Array.isArray(be)?be[1]:void 0;if(Xe!==void 0&&Xe!==Ue)return j.hoverLabelText(he,Ue,Re)+" - "+j.hoverLabelText(he,Xe,Re);var qe=he.type==="log"&&Ue<=0,st=j.tickText(he,he.c2l(qe?-Ue:Ue),"hover").text;return qe?Ue===0?"0":S+st:st};var Ze=["f","p","n","\u03BC","m","","k","M","G","T"];function Fe(he){return he==="SI"||he==="B"}function Pe(he){return he>14||he<-15}function ze(he,be,Re,Ue){var Xe=he<0,qe=be._tickround,st=Re||be.exponentformat||"B",it=be._tickexponent,Tt=j.getTickFormat(be),Pt=be.separatethousands;if(Ue){var rt={exponentformat:st,minexponent:be.minexponent,dtick:be.showexponent==="none"?be.dtick:v(he)&&Math.abs(he)||1,range:be.showexponent==="none"?be.range.map(be.r2d):[0,he||1]};Ie(rt),qe=(Number(rt._tickround)||0)+4,it=rt._tickexponent,be.hoverformat&&(Tt=be.hoverformat)}if(Tt)return be._numFormat(Tt)(he).replace(/-/g,S);var ut,Bt=Math.pow(10,-qe)/2;if(st==="none"&&(it=0),(he=Math.abs(he))<Bt)he="0",Xe=!1;else{if(he+=Bt,it&&(he*=Math.pow(10,-it),qe+=it),qe===0)he=String(Math.floor(he));else if(qe<0){he=(he=String(Math.round(he))).substr(0,he.length+qe);for(var wt=qe;wt<0;wt++)he+="0"}else{var Lt=(he=String(he)).indexOf(".")+1;Lt&&(he=he.substr(0,Lt+qe).replace(/\.?0+$/,""))}he=e.numSeparate(he,be._separators,Pt)}return it&&st!=="hide"&&(Fe(st)&&Pe(it)&&(st="power"),ut=it<0?S+-it:st!=="power"?"+"+it:String(it),st==="e"||st==="E"?he+=st+ut:st==="power"?he+="\xD710<sup>"+ut+"</sup>":st==="B"&&it===9?he+="B":Fe(st)&&(he+=Ze[it/3+5])),Xe?S+he:he}function Ge(he,be){if(he){var Re=Object.keys(J).reduce(function(Ue,Xe){return be.indexOf(Xe)!==-1&&J[Xe].forEach(function(qe){Ue[qe]=1}),Ue},{});Object.keys(he).forEach(function(Ue){Re[Ue]||(Ue.length===1?he[Ue]=0:delete he[Ue])})}}function $e(he,be){for(var Re=[],Ue={},Xe=0;Xe<be.length;Xe++){var qe=be[Xe];Ue[qe.text2]?Ue[qe.text2].push(qe.x):Ue[qe.text2]=[qe.x]}for(var st in Ue)Re.push(Oe(he,e.interp(Ue[st],.5),st));return Re}function ot(he){return he.periodX!==void 0?he.periodX:he.x}function vt(he){return[he.text,he.x,he.axInfo,he.font,he.fontSize,he.fontColor].join("_")}function bt(he){var be=he.title.font.size,Re=(he.title.text.match(r.BR_TAG_ALL)||[]).length;return he.title.hasOwnProperty("standoff")?Re?be*(re+Re*V):be*re:Re?be*(Re+1)*V:be}function yt(he,be){var Re=he.l2p(be);return Re>1&&Re<he._length-1}function tt(he){var be=m.select(he),Re=be.select(".text-math-group");return Re.empty()?be.select("text"):Re}function Ke(he){return he._id+".automargin"}function mt(he){return Ke(he)+".mirror"}function Ft(he){return he._id+".rangeslider"}function Vt(he,be){for(var Re=0;Re<be.length;Re++)he.indexOf(be[Re])===-1&&he.push(be[Re])}function Xt(he,be,Re){var Ue,Xe,qe=[],st=[],it=he.layout;for(Ue=0;Ue<be.length;Ue++)qe.push(j.getFromId(he,be[Ue]));for(Ue=0;Ue<Re.length;Ue++)st.push(j.getFromId(he,Re[Ue]));var Tt=Object.keys(u),Pt=["anchor","domain","overlaying","position","side","tickangle","editType"],rt=["linear","log"];for(Ue=0;Ue<Tt.length;Ue++){var ut=Tt[Ue],Bt=qe[0][ut],wt=st[0][ut],Lt=!0,Se=!1,We=!1;if(ut.charAt(0)!=="_"&&typeof Bt!="function"&&Pt.indexOf(ut)===-1){for(Xe=1;Xe<qe.length&&Lt;Xe++){var nt=qe[Xe][ut];ut==="type"&&rt.indexOf(Bt)!==-1&&rt.indexOf(nt)!==-1&&Bt!==nt?Se=!0:nt!==Bt&&(Lt=!1)}for(Xe=1;Xe<st.length&&Lt;Xe++){var ft=st[Xe][ut];ut==="type"&&rt.indexOf(wt)!==-1&&rt.indexOf(ft)!==-1&&wt!==ft?We=!0:st[Xe][ut]!==wt&&(Lt=!1)}Lt&&(Se&&(it[qe[0]._name].type="linear"),We&&(it[st[0]._name].type="linear"),Gt(it,ut,qe,st,he._fullLayout._dfltTitle))}}for(Ue=0;Ue<he._fullLayout.annotations.length;Ue++){var Mt=he._fullLayout.annotations[Ue];be.indexOf(Mt.xref)!==-1&&Re.indexOf(Mt.yref)!==-1&&e.swapAttrs(it.annotations[Ue],["?"])}}function Gt(he,be,Re,Ue,Xe){var qe,st=e.nestedProperty,it=st(he[Re[0]._name],be).get(),Tt=st(he[Ue[0]._name],be).get();for(be==="title"&&(it&&it.text===Xe.x&&(it.text=Xe.y),Tt&&Tt.text===Xe.y&&(Tt.text=Xe.x)),qe=0;qe<Re.length;qe++)st(he,Re[qe]._name+"."+be).set(Tt);for(qe=0;qe<Ue.length;qe++)st(he,Ue[qe]._name+"."+be).set(it)}function nr(he){return he._id==="angularaxis"}function It(he,be){for(var Re=be._rangebreaks.length,Ue=0;Ue<Re;Ue++){var Xe=be._rangebreaks[Ue];if(he>=Xe.min&&he<Xe.max)return Xe.max}return he}function Be(he){return(he.ticklabelposition||"").indexOf("inside")!==-1}function He(he,be){Be(he._anchorAxis||{})&&he._hideCounterAxisInsideTickLabels&&he._hideCounterAxisInsideTickLabels(be)}j.getTickFormat=function(he){var be,Re,Ue,Xe,qe,st,it,Tt;function Pt(Bt){return typeof Bt!="string"?Bt:Number(Bt.replace("M",""))*w}function rt(Bt,wt){var Lt=["L","D"];if(typeof Bt==typeof wt){if(typeof Bt=="number")return Bt-wt;var Se=Lt.indexOf(Bt.charAt(0)),We=Lt.indexOf(wt.charAt(0));return Se===We?Number(Bt.replace(/(L|D)/g,""))-Number(wt.replace(/(L|D)/g,"")):Se-We}return typeof Bt=="number"?1:-1}function ut(Bt,wt){var Lt=wt[0]===null,Se=wt[1]===null,We=rt(Bt,wt[0])>=0,nt=rt(Bt,wt[1])<=0;return(Lt||We)&&(Se||nt)}if(he.tickformatstops&&he.tickformatstops.length>0)switch(he.type){case"date":case"linear":for(be=0;be<he.tickformatstops.length;be++)if((Ue=he.tickformatstops[be]).enabled&&(Xe=he.dtick,qe=Ue.dtickrange,st=void 0,it=void 0,Tt=void 0,st=Pt||function(Bt){return Bt},it=qe[0],Tt=qe[1],(!it&&typeof it!="number"||st(it)<=st(Xe))&&(!Tt&&typeof Tt!="number"||st(Tt)>=st(Xe)))){Re=Ue;break}break;case"log":for(be=0;be<he.tickformatstops.length;be++)if((Ue=he.tickformatstops[be]).enabled&&ut(he.dtick,Ue.dtickrange)){Re=Ue;break}}return Re?Re.value:he.tickformat},j.getSubplots=function(he,be){var Re=he._fullLayout._subplots,Ue=Re.cartesian.concat(Re.gl2d||[]),Xe=be?j.findSubplotsWithAxis(Ue,be):Ue;return Xe.sort(function(qe,st){var it=qe.substr(1).split("y"),Tt=st.substr(1).split("y");return it[0]===Tt[0]?+it[1]-+Tt[1]:+it[0]-+Tt[0]}),Xe},j.findSubplotsWithAxis=function(he,be){for(var Re=new RegExp(be._id.charAt(0)==="x"?"^"+be._id+"y":be._id+"$"),Ue=[],Xe=0;Xe<he.length;Xe++){var qe=he[Xe];Re.test(qe)&&Ue.push(qe)}return Ue},j.makeClipPaths=function(he){var be=he._fullLayout;if(!be._hasOnlyLargeSploms){var Re,Ue,Xe={_offset:0,_length:be.width,_id:""},qe={_offset:0,_length:be.height,_id:""},st=j.list(he,"x",!0),it=j.list(he,"y",!0),Tt=[];for(Re=0;Re<st.length;Re++)for(Tt.push({x:st[Re],y:qe}),Ue=0;Ue<it.length;Ue++)Re===0&&Tt.push({x:Xe,y:it[Ue]}),Tt.push({x:st[Re],y:it[Ue]});var Pt=be._clips.selectAll(".axesclip").data(Tt,function(rt){return rt.x._id+rt.y._id});Pt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(rt){return"clip"+be._uid+rt.x._id+rt.y._id}).append("rect"),Pt.exit().remove(),Pt.each(function(rt){m.select(this).select("rect").attr({x:rt.x._offset||0,y:rt.y._offset||0,width:rt.x._length||1,height:rt.y._length||1})})}},j.draw=function(he,be,Re){var Ue=he._fullLayout;be==="redraw"&&Ue._paper.selectAll("g.subplot").each(function(qe){var st=qe[0],it=Ue._plots[st];if(it){var Tt=it.xaxis,Pt=it.yaxis;it.xaxislayer.selectAll("."+Tt._id+"tick").remove(),it.yaxislayer.selectAll("."+Pt._id+"tick").remove(),it.xaxislayer.selectAll("."+Tt._id+"tick2").remove(),it.yaxislayer.selectAll("."+Pt._id+"tick2").remove(),it.xaxislayer.selectAll("."+Tt._id+"divider").remove(),it.yaxislayer.selectAll("."+Pt._id+"divider").remove(),it.minorGridlayer&&it.minorGridlayer.selectAll("path").remove(),it.gridlayer&&it.gridlayer.selectAll("path").remove(),it.zerolinelayer&&it.zerolinelayer.selectAll("path").remove(),Ue._infolayer.select(".g-"+Tt._id+"title").remove(),Ue._infolayer.select(".g-"+Pt._id+"title").remove()}});var Xe=be&&be!=="redraw"?be:j.listIds(he);return e.syncOrAsync(Xe.map(function(qe){return function(){if(qe){var st=j.getFromId(he,qe),it=j.drawOne(he,st,Re);return st._r=st.range.slice(),st._rl=e.simpleMap(st._r,st.r2l),it}}}))},j.drawOne=function(he,be,Re){var Ue,Xe,qe;Re=Re||{},be.setScale();var st=he._fullLayout,it=be._id,Tt=it.charAt(0),Pt=j.counterLetter(it),rt=st._plots[be._mainSubplot];if(rt){var ut=rt[Tt+"axislayer"],Bt=be._mainLinePosition,wt=be._mainMirrorPosition,Lt=be._vals=j.calcTicks(be),Se=[be.mirror,Bt,wt].join("_");for(Ue=0;Ue<Lt.length;Ue++)Lt[Ue].axInfo=Se;be._selections={},be._tickAngles&&(be._prevTickAngles=be._tickAngles),be._tickAngles={},be._depth=null;var We={};if(be.visible){var nt,ft,Mt=j.makeTransTickFn(be),Nt=j.makeTransTickLabelFn(be),Zt=be.ticks==="inside",Ut=be.ticks==="outside";if(be.tickson==="boundaries"){var fr=function(tr,mr){var Ct,or=[],hr=function(Rr,zr){var Or=Rr.xbnd[zr];Or!==null&&or.push(e.extendFlat({},Rr,{x:Or}))};if(mr.length){for(Ct=0;Ct<mr.length;Ct++)hr(mr[Ct],0);hr(mr[Ct-1],1)}return or}(0,Lt);ft=j.clipEnds(be,fr),nt=Zt?ft:fr}else ft=j.clipEnds(be,Lt),nt=Zt&&be.ticklabelmode!=="period"?ft:Lt;var Tr,ur=be._gridVals=ft,Kt=function(tr,mr){var Ct,or,hr=[],Rr=mr.length&&mr[mr.length-1].x<mr[0].x,zr=function(Ar,vr){var xr=Ar.xbnd[vr];xr!==null&&hr.push(e.extendFlat({},Ar,{x:xr}))};if(tr.showdividers&&mr.length){for(Ct=0;Ct<mr.length;Ct++){var Or=mr[Ct];Or.text2!==or&&zr(Or,Rr?1:0),or=Or.text2}zr(mr[Ct-1],Rr?0:1)}return hr}(be,Lt);if(!st._hasOnlyLargeSploms){var Qt=be._subplotsWith,er={};for(Ue=0;Ue<Qt.length;Ue++){Xe=Qt[Ue];var cr=(qe=st._plots[Xe])[Pt+"axis"],gr=cr._mainAxis._id;if(!er[gr]){er[gr]=1;var Mr=Tt==="x"?"M0,"+cr._offset+"v"+cr._length:"M"+cr._offset+",0h"+cr._length;j.drawGrid(he,be,{vals:ur,counterAxis:cr,layer:qe.gridlayer.select("."+it),minorLayer:qe.minorGridlayer.select("."+it),path:Mr,transFn:Mt}),j.drawZeroLine(he,be,{counterAxis:cr,layer:qe.zerolinelayer,path:Mr,transFn:Mt})}}}var Ir=j.getTickSigns(be),Fr=j.getTickSigns(be,"minor");if(be.ticks||be.minor&&be.minor.ticks){var Yr,fn,en,Rn,nn=j.makeTickPath(be,Bt,Ir[2]),yn=j.makeTickPath(be,Bt,Fr[2],{minor:!0});if(be._anchorAxis&&be.mirror&&be.mirror!==!0?(Yr=j.makeTickPath(be,wt,Ir[3]),fn=j.makeTickPath(be,wt,Fr[3],{minor:!0}),en=nn+Yr,Rn=yn+fn):(Yr="",fn="",en=nn,Rn=yn),be.showdividers&&Ut&&be.tickson==="boundaries"){var bn={};for(Ue=0;Ue<Kt.length;Ue++)bn[Kt[Ue].x]=1;Tr=function(tr){return bn[tr.x]?Yr:en}}else Tr=function(tr){return tr.minor?Rn:en}}if(j.drawTicks(he,be,{vals:nt,layer:ut,path:Tr,transFn:Mt}),be.mirror==="allticks"){var ta=Object.keys(be._linepositions||{});for(Ue=0;Ue<ta.length;Ue++){Xe=ta[Ue],qe=st._plots[Xe];var Br=be._linepositions[Xe]||[],rn=Br[0],gn=Br[1],Qr=Br[2],un=j.makeTickPath(be,rn,Qr?Ir[0]:Fr[0],{minor:Qr})+j.makeTickPath(be,gn,Qr?Ir[1]:Fr[1],{minor:Qr});j.drawTicks(he,be,{vals:nt,layer:qe[Tt+"axislayer"],path:un,transFn:Mt})}}var Gn=[];if(Gn.push(function(){return j.drawLabels(he,be,{vals:Lt,layer:ut,plotinfo:qe,transFn:Nt,labelFns:j.makeLabelFns(be,Bt)})}),be.type==="multicategory"){var wn={x:2,y:10}[Tt];Gn.push(function(){var tr={x:"height",y:"width"}[Tt],mr=oa()[tr]+wn+(be._tickAngles[it+"tick"]?be.tickfont.size*V:0);return j.drawLabels(he,be,{vals:$e(be,Lt),layer:ut,cls:it+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Mt,labelFns:j.makeLabelFns(be,Bt+mr*Ir[4])})}),Gn.push(function(){return be._depth=Ir[4]*(oa("tick2")[be.side]-Bt),function(tr,mr,Ct){var or=mr._id+"divider",hr=Ct.vals,Rr=Ct.layer.selectAll("path."+or).data(hr,vt);Rr.exit().remove(),Rr.enter().insert("path",":first-child").classed(or,1).classed("crisp",1).call(n.stroke,mr.dividercolor).style("stroke-width",d.crispRound(tr,mr.dividerwidth,1)+"px"),Rr.attr("transform",Ct.transFn).attr("d",Ct.path)}(he,be,{vals:Kt,layer:ut,path:j.makeTickPath(be,Bt,Ir[4],{len:be._depth}),transFn:Mt})})}else be.title.hasOwnProperty("standoff")&&Gn.push(function(){be._depth=Ir[4]*(oa()[be.side]-Bt)});var Ln=x.getComponentMethod("rangeslider","isVisible")(be);return Gn.push(function(){var tr,mr,Ct,or,hr=be.side.charAt(0),Rr=B[be.side].charAt(0),zr=j.getPxPosition(he,be),Or=Ut?be.ticklen:0;if((be.automargin||Ln)&&(be.type==="multicategory"?tr=oa("tick2"):(tr=oa(),Tt==="x"&&hr==="b"&&(be._depth=Math.max(tr.width>0?tr.bottom-zr:0,Or)))),be.automargin){mr={x:0,y:0,r:0,l:0,t:0,b:0};var Ar=[0,1];if(Tt==="x"){if(hr==="b"?mr[hr]=be._depth:(mr[hr]=be._depth=Math.max(tr.width>0?zr-tr.top:0,Or),Ar.reverse()),tr.width>0){var vr=tr.right-(be._offset+be._length);vr>0&&(mr.xr=1,mr.r=vr);var xr=be._offset-tr.left;xr>0&&(mr.xl=0,mr.l=xr)}}else if(hr==="l"?mr[hr]=be._depth=Math.max(tr.height>0?zr-tr.left:0,Or):(mr[hr]=be._depth=Math.max(tr.height>0?tr.right-zr:0,Or),Ar.reverse()),tr.height>0){var wr=tr.bottom-(be._offset+be._length);wr>0&&(mr.yb=0,mr.b=wr);var Er=be._offset-tr.top;Er>0&&(mr.yt=1,mr.t=Er)}mr[Pt]=be.anchor==="free"?be.position:be._anchorAxis.domain[Ar[0]],be.title.text!==st._dfltTitle[Tt]&&(mr[hr]+=bt(be)+(be.title.standoff||0)),be.mirror&&be.anchor!=="free"&&((Ct={x:0,y:0,r:0,l:0,t:0,b:0})[Rr]=be.linewidth,be.mirror&&be.mirror!==!0&&(Ct[Rr]+=Or),be.mirror===!0||be.mirror==="ticks"?Ct[Pt]=be._anchorAxis.domain[Ar[1]]:be.mirror!=="all"&&be.mirror!=="allticks"||(Ct[Pt]=[be._counterDomainMin,be._counterDomainMax][Ar[1]]))}Ln&&(or=x.getComponentMethod("rangeslider","autoMarginOpts")(he,be)),typeof be.automargin=="string"&&(Ge(mr,be.automargin),Ge(Ct,be.automargin)),k.autoMargin(he,Ke(be),mr),k.autoMargin(he,mt(be),Ct),k.autoMargin(he,Ft(be),or)}),Re.skipTitle||Ln&&be.side==="bottom"||Gn.push(function(){return function(tr,mr){var Ct,or=tr._fullLayout,hr=mr._id,Rr=hr.charAt(0),zr=mr.title.font.size;if(mr.title.hasOwnProperty("standoff"))Ct=mr._depth+mr.title.standoff+bt(mr);else{var Or=Be(mr);if(mr.type==="multicategory")Ct=mr._depth;else{var Ar=1.5*zr;Or&&(Ar=.5*zr,mr.ticks==="outside"&&(Ar+=mr.ticklen)),Ct=10+Ar+(mr.linewidth?mr.linewidth-1:0)}Or||(Ct+=Rr==="x"?mr.side==="top"?zr*(mr.showticklabels?1:0):zr*(mr.showticklabels?1.5:.5):mr.side==="right"?zr*(mr.showticklabels?1:.5):zr*(mr.showticklabels?.5:0))}var vr,xr,wr,Er,qr=j.getPxPosition(tr,mr);if(Rr==="x"?(xr=mr._offset+mr._length/2,wr=mr.side==="top"?qr-Ct:qr+Ct):(wr=mr._offset+mr._length/2,xr=mr.side==="right"?qr+Ct:qr-Ct,vr={rotate:"-90",offset:0}),mr.type!=="multicategory"){var Hr=mr._selections[mr._id+"tick"];if(Er={selection:Hr,side:mr.side},Hr&&Hr.node()&&Hr.node().parentNode){var $r=d.getTranslate(Hr.node().parentNode);Er.offsetLeft=$r.x,Er.offsetTop=$r.y}mr.title.hasOwnProperty("standoff")&&(Er.pad=0)}return l.draw(tr,hr+"title",{propContainer:mr,propName:mr._name+".title.text",placeholder:or._dfltTitle[Rr],avoid:Er,transform:vr,attributes:{x:xr,y:wr,"text-anchor":"middle"}})}(he,be)}),e.syncOrAsync(Gn)}}function oa(tr){var mr=it+(tr||"tick");return We[mr]||(We[mr]=function(Ct,or){var hr,Rr,zr,Or;return Ct._selections[or].size()?(hr=1/0,Rr=-1/0,zr=1/0,Or=-1/0,Ct._selections[or].each(function(){var Ar=tt(this),vr=d.bBox(Ar.node().parentNode);hr=Math.min(hr,vr.top),Rr=Math.max(Rr,vr.bottom),zr=Math.min(zr,vr.left),Or=Math.max(Or,vr.right)})):(hr=0,Rr=0,zr=0,Or=0),{top:hr,bottom:Rr,left:zr,right:Or,height:Rr-hr,width:Or-zr}}(be,mr)),We[mr]}},j.getTickSigns=function(he,be){var Re=he._id.charAt(0),Ue={x:"top",y:"right"}[Re],Xe=he.side===Ue?1:-1,qe=[-1,1,Xe,-Xe];return(be?(he.minor||{}).ticks:he.ticks)!=="inside"==(Re==="x")&&(qe=qe.map(function(st){return-st})),he.side&&qe.push({l:-1,t:-1,r:1,b:1}[he.side.charAt(0)]),qe},j.makeTransTickFn=function(he){return he._id.charAt(0)==="x"?function(be){return t(he._offset+he.l2p(be.x),0)}:function(be){return t(0,he._offset+he.l2p(be.x))}},j.makeTransTickLabelFn=function(he){var be=function(Xe){var qe=Xe.ticklabelposition||"",st=function(nt){return qe.indexOf(nt)!==-1},it=st("top"),Tt=st("left"),Pt=st("right"),rt=st("bottom"),ut=st("inside"),Bt=rt||Tt||it||Pt;if(!Bt&&!ut)return[0,0];var wt=Xe.side,Lt=Bt?(Xe.tickwidth||0)/2:0,Se=3,We=Xe.tickfont?Xe.tickfont.size:12;return(rt||it)&&(Lt+=We*re,Se+=(Xe.linewidth||0)/2),(Tt||Pt)&&(Lt+=(Xe.linewidth||0)/2,Se+=3),ut&&wt==="top"&&(Se-=We*(1-re)),(Tt||it)&&(Lt=-Lt),wt!=="bottom"&&wt!=="right"||(Se=-Se),[Bt?Lt:0,ut?Se:0]}(he),Re=be[0],Ue=be[1];return he._id.charAt(0)==="x"?function(Xe){return t(Re+he._offset+he.l2p(ot(Xe)),Ue)}:function(Xe){return t(Ue,Re+he._offset+he.l2p(ot(Xe)))}},j.makeTickPath=function(he,be,Re,Ue){Ue||(Ue={});var Xe=Ue.minor;if(Xe&&!he.minor)return"";var qe=Ue.len!==void 0?Ue.len:Xe?he.minor.ticklen:he.ticklen,st=he._id.charAt(0),it=(he.linewidth||1)/2;return st==="x"?"M0,"+(be+it*Re)+"v"+qe*Re:"M"+(be+it*Re)+",0h"+qe*Re},j.makeLabelFns=function(he,be,Re){var Ue=he.ticklabelposition||"",Xe=function(Qt){return Ue.indexOf(Qt)!==-1},qe=Xe("top"),st=Xe("left"),it=Xe("right"),Tt=Xe("bottom")||st||qe||it,Pt=Xe("inside"),rt=Ue==="inside"&&he.ticks==="inside"||!Pt&&he.ticks==="outside"&&he.tickson!=="boundaries",ut=0,Bt=0,wt=rt?he.ticklen:0;if(Pt?wt*=-1:Tt&&(wt=0),rt&&(ut+=wt,Re)){var Lt=e.deg2rad(Re);ut=wt*Math.cos(Lt)+1,Bt=wt*Math.sin(Lt)}he.showticklabels&&(rt||he.showline)&&(ut+=.2*he.tickfont.size);var Se,We,nt,ft,Mt,Nt={labelStandoff:ut+=(he.linewidth||1)/2*(Pt?-1:1),labelShift:Bt},Zt=0,Ut=he.side,fr=he._id.charAt(0),Tr=he.tickangle;if(fr==="x")ft=(Mt=!Pt&&Ut==="bottom"||Pt&&Ut==="top")?1:-1,Pt&&(ft*=-1),Se=Bt*ft,We=be+ut*ft,nt=Mt?1:-.2,Math.abs(Tr)===90&&(Pt?nt+=Z:nt=Tr===-90&&Ut==="bottom"?re:Tr===90&&Ut==="top"?Z:.5,Zt=Z/2*(Tr/90)),Nt.xFn=function(Qt){return Qt.dx+Se+Zt*Qt.fontSize},Nt.yFn=function(Qt){return Qt.dy+We+Qt.fontSize*nt},Nt.anchorFn=function(Qt,er){if(Tt){if(st)return"end";if(it)return"start"}return v(er)&&er!==0&&er!==180?er*ft<0!==Pt?"end":"start":"middle"},Nt.heightFn=function(Qt,er,cr){return er<-60||er>60?-.5*cr:he.side==="top"!==Pt?-cr:0};else if(fr==="y"){if(ft=(Mt=!Pt&&Ut==="left"||Pt&&Ut==="right")?1:-1,Pt&&(ft*=-1),Se=ut,We=Bt*ft,nt=0,Pt||Math.abs(Tr)!==90||(nt=Tr===-90&&Ut==="left"||Tr===90&&Ut==="right"?re:.5),Pt){var ur=v(Tr)?+Tr:0;if(ur!==0){var Kt=e.deg2rad(ur);Zt=Math.abs(Math.sin(Kt))*re*ft,nt=0}}Nt.xFn=function(Qt){return Qt.dx+be-(Se+Qt.fontSize*nt)*ft+Zt*Qt.fontSize},Nt.yFn=function(Qt){return Qt.dy+We+Qt.fontSize*Z},Nt.anchorFn=function(Qt,er){return v(er)&&Math.abs(er)===90?"middle":Mt?"end":"start"},Nt.heightFn=function(Qt,er,cr){return he.side==="right"&&(er*=-1),er<-30?-cr:er<30?-.5*cr:0}}return Nt},j.drawTicks=function(he,be,Re){Re=Re||{};var Ue=be._id+"tick",Xe=[].concat(be.minor&&be.minor.ticks?Re.vals.filter(function(st){return st.minor&&!st.noTick}):[]).concat(be.ticks?Re.vals.filter(function(st){return!st.minor&&!st.noTick}):[]),qe=Re.layer.selectAll("path."+Ue).data(Xe,vt);qe.exit().remove(),qe.enter().append("path").classed(Ue,1).classed("ticks",1).classed("crisp",Re.crisp!==!1).each(function(st){return n.stroke(m.select(this),st.minor?be.minor.tickcolor:be.tickcolor)}).style("stroke-width",function(st){return d.crispRound(he,st.minor?be.minor.tickwidth:be.tickwidth,1)+"px"}).attr("d",Re.path).style("display",null),He(be,[H]),qe.attr("transform",Re.transFn)},j.drawGrid=function(he,be,Re){Re=Re||{};var Ue=be._id+"grid",Xe=be.minor&&be.minor.showgrid,qe=Xe?Re.vals.filter(function(nt){return nt.minor}):[],st=be.showgrid?Re.vals.filter(function(nt){return!nt.minor}):[],it=Re.counterAxis;if(it&&j.shouldShowZeroLine(he,be,it))for(var Tt=be.tickmode==="array",Pt=0;Pt<st.length;Pt++){var rt=st[Pt].x;if(Tt?!rt:Math.abs(rt)<be.dtick/100){if(st=st.slice(0,Pt).concat(st.slice(Pt+1)),!Tt)break;Pt--}}be._gw=d.crispRound(he,be.gridwidth,1);for(var ut=Xe?d.crispRound(he,be.minor.gridwidth,1):0,Bt=Re.layer,wt=Re.minorLayer,Lt=1;Lt>=0;Lt--){var Se=Lt?Bt:wt;if(Se){var We=Se.selectAll("path."+Ue).data(Lt?st:qe,vt);We.exit().remove(),We.enter().append("path").classed(Ue,1).classed("crisp",Re.crisp!==!1),We.attr("transform",Re.transFn).attr("d",Re.path).each(function(nt){return n.stroke(m.select(this),nt.minor?be.minor.gridcolor:be.gridcolor||"#ddd")}).style("stroke-dasharray",function(nt){return d.dashStyle(nt.minor?be.minor.griddash:be.griddash,nt.minor?be.minor.gridwidth:be.gridwidth)}).style("stroke-width",function(nt){return(nt.minor?ut:be._gw)+"px"}).style("display",null),typeof Re.path=="function"&&We.attr("d",Re.path)}}He(be,[D,U])},j.drawZeroLine=function(he,be,Re){Re=Re||Re;var Ue=be._id+"zl",Xe=j.shouldShowZeroLine(he,be,Re.counterAxis),qe=Re.layer.selectAll("path."+Ue).data(Xe?[{x:0,id:be._id}]:[]);qe.exit().remove(),qe.enter().append("path").classed(Ue,1).classed("zl",1).classed("crisp",Re.crisp!==!1).each(function(){Re.layer.selectAll("path").sort(function(st,it){return $(st.id,it.id)})}),qe.attr("transform",Re.transFn).attr("d",Re.path).call(n.stroke,be.zerolinecolor||n.defaultLine).style("stroke-width",d.crispRound(he,be.zerolinewidth,be._gw||1)+"px").style("display",null),He(be,[z])},j.drawLabels=function(he,be,Re){Re=Re||{};var Ue=he._fullLayout,Xe=be._id,qe=Xe.charAt(0),st=Re.cls||Xe+"tick",it=Re.vals.filter(function(ft){return ft.text}),Tt=Re.labelFns,Pt=Re.secondary?0:be.tickangle,rt=(be._prevTickAngles||{})[st],ut=Re.layer.selectAll("g."+st).data(be.showticklabels?it:[],vt),Bt=[];function wt(ft,Mt){ft.each(function(Nt){var Zt=m.select(this),Ut=Zt.select(".text-math-group"),fr=Tt.anchorFn(Nt,Mt),Tr=Re.transFn.call(Zt.node(),Nt)+(v(Mt)&&+Mt!=0?" rotate("+Mt+","+Tt.xFn(Nt)+","+(Tt.yFn(Nt)-Nt.fontSize/2)+")":""),ur=r.lineCount(Zt),Kt=V*Nt.fontSize,Qt=Tt.heightFn(Nt,v(Mt)?+Mt:0,(ur-1)*Kt);if(Qt&&(Tr+=t(0,Qt)),Ut.empty()){var er=Zt.select("text");er.attr({transform:Tr,"text-anchor":fr}),er.style("opacity",1),be._adjustTickLabelsOverflow&&be._adjustTickLabelsOverflow()}else{var cr=d.bBox(Ut.node()).width*{end:-.5,start:.5}[fr];Ut.attr("transform",Tr+t(cr,0))}})}ut.enter().append("g").classed(st,1).append("text").attr("text-anchor","middle").each(function(ft){var Mt=m.select(this),Nt=he._promises.length;Mt.call(r.positionText,Tt.xFn(ft),Tt.yFn(ft)).call(d.font,ft.font,ft.fontSize,ft.fontColor).text(ft.text).call(r.convertToTspans,he),he._promises[Nt]?Bt.push(he._promises.pop().then(function(){wt(Mt,Pt)})):wt(Mt,Pt)}),He(be,[Y]),ut.exit().remove(),Re.repositionOnUpdate&&ut.each(function(ft){m.select(this).select("text").call(r.positionText,Tt.xFn(ft),Tt.yFn(ft))}),be._adjustTickLabelsOverflow=function(){var ft=be.ticklabeloverflow;if(ft&&ft!=="allow"){var Mt=ft.indexOf("hide")!==-1,Nt=be._id.charAt(0)==="x",Zt=0,Ut=Nt?he._fullLayout.width:he._fullLayout.height;if(ft.indexOf("domain")!==-1){var fr=e.simpleMap(be.range,be.r2l);Zt=be.l2p(fr[0])+be._offset,Ut=be.l2p(fr[1])+be._offset}var Tr=Math.min(Zt,Ut),ur=Math.max(Zt,Ut),Kt=be.side,Qt=1/0,er=-1/0;for(var cr in ut.each(function(Ir){var Fr=m.select(this);if(Fr.select(".text-math-group").empty()){var Yr=d.bBox(Fr.node()),fn=0;Nt?(Yr.right>ur||Yr.left<Tr)&&(fn=1):(Yr.bottom>ur||Yr.top+(be.tickangle?0:Ir.fontSize/4)<Tr)&&(fn=1);var en=Fr.select("text");fn?Mt&&en.style("opacity",0):(en.style("opacity",1),Qt=Kt==="bottom"||Kt==="right"?Math.min(Qt,Nt?Yr.top:Yr.left):-1/0,er=Kt==="top"||Kt==="left"?Math.max(er,Nt?Yr.bottom:Yr.right):1/0)}}),Ue._plots){var gr=Ue._plots[cr];if(be._id===gr.xaxis._id||be._id===gr.yaxis._id){var Mr=Nt?gr.yaxis:gr.xaxis;Mr&&(Mr["_visibleLabelMin_"+be._id]=Qt,Mr["_visibleLabelMax_"+be._id]=er)}}}},be._hideCounterAxisInsideTickLabels=function(ft){var Mt=be._id.charAt(0)==="x",Nt=[];for(var Zt in Ue._plots){var Ut=Ue._plots[Zt];be._id!==Ut.xaxis._id&&be._id!==Ut.yaxis._id||Nt.push(Mt?Ut.yaxis:Ut.xaxis)}Nt.forEach(function(fr,Tr){fr&&Be(fr)&&(ft||[z,U,D,H,Y]).forEach(function(ur){var Kt=ur.K==="tick"&&ur.L==="text"&&be.ticklabelmode==="period",Qt=Ue._plots[be._mainSubplot];(ur.K===z.K?Qt.zerolinelayer.selectAll("."+be._id+"zl"):ur.K===U.K?Qt.minorGridlayer.selectAll("."+be._id):ur.K===D.K?Qt.gridlayer.selectAll("."+be._id):Qt[be._id.charAt(0)+"axislayer"]).each(function(){var er=m.select(this);ur.L&&(er=er.selectAll(ur.L)),er.each(function(cr){var gr=be.l2p(Kt?ot(cr):cr.x)+be._offset,Mr=m.select(this);gr<be["_visibleLabelMax_"+fr._id]&&gr>be["_visibleLabelMin_"+fr._id]?Mr.style("display","none"):ur.K!=="tick"||Tr||Mr.style("display",null)})})})})},wt(ut,rt+1?rt:Pt);var Lt=null;be._selections&&(be._selections[st]=ut);var Se=[function(){return Bt.length&&Promise.all(Bt)}];be.automargin&&Ue._redrawFromAutoMarginCount&&rt===90?(Lt=90,Se.push(function(){wt(ut,rt)})):Se.push(function(){if(wt(ut,Pt),it.length&&qe==="x"&&!v(Pt)&&(be.type!=="log"||String(be.dtick).charAt(0)!=="D")){Lt=0;var ft,Mt=0,Nt=[];if(ut.each(function(Fr){Mt=Math.max(Mt,Fr.fontSize);var Yr=be.l2p(Fr.x),fn=tt(this),en=d.bBox(fn.node());Nt.push({top:0,bottom:10,height:10,left:Yr-en.width/2,right:Yr+en.width/2+2,width:en.width+2})}),be.tickson!=="boundaries"&&!be.showdividers||Re.secondary){var Zt=it.length,Ut=Math.abs((it[Zt-1].x-it[0].x)*be._m)/(Zt-1),fr=be.ticklabelposition||"",Tr=function(Fr){return fr.indexOf(Fr)!==-1},ur=Tr("top"),Kt=Tr("left"),Qt=Tr("right"),er=Tr("bottom")||Kt||ur||Qt?(be.tickwidth||0)+6:0,cr=Ut<2.5*Mt||be.type==="multicategory"||be._name==="realaxis";for(ft=0;ft<Nt.length-1;ft++)if(e.bBoxIntersect(Nt[ft],Nt[ft+1],er)){Lt=cr?90:30;break}}else{var gr=2;for(be.ticks&&(gr+=be.tickwidth/2),ft=0;ft<Nt.length;ft++){var Mr=it[ft].xbnd,Ir=Nt[ft];if(Mr[0]!==null&&Ir.left-be.l2p(Mr[0])<gr||Mr[1]!==null&&be.l2p(Mr[1])-Ir.right<gr){Lt=90;break}}}Lt&&wt(ut,Lt)}}),be._tickAngles&&Se.push(function(){be._tickAngles[st]=Lt===null?v(Pt)?Pt:0:Lt});var We=be._anchorAxis;We&&We.autorange&&Be(be)&&!K(Ue,be._id)&&(Ue._insideTickLabelsAutorange||(Ue._insideTickLabelsAutorange={}),Ue._insideTickLabelsAutorange[We._name+".autorange"]=We.autorange,Se.push(function(){ut.each(function(ft,Mt){var Nt=tt(this);Nt.select(".text-math-group").empty()&&(be._vals[Mt].bb=d.bBox(Nt.node()))})}));var nt=e.syncOrAsync(Se);return nt&&nt.then&&he._promises.push(nt),nt},j.getPxPosition=function(he,be){var Re,Ue=he._fullLayout._size,Xe=be._id.charAt(0),qe=be.side;return be.anchor!=="free"?Re=be._anchorAxis:Xe==="x"?Re={_offset:Ue.t+(1-(be.position||0))*Ue.h,_length:0}:Xe==="y"&&(Re={_offset:Ue.l+(be.position||0)*Ue.w,_length:0}),qe==="top"||qe==="left"?Re._offset:qe==="bottom"||qe==="right"?Re._offset+Re._length:void 0},j.shouldShowZeroLine=function(he,be,Re){var Ue=e.simpleMap(be.range,be.r2l);return Ue[0]*Ue[1]<=0&&be.zeroline&&(be.type==="linear"||be.type==="-")&&!(be.rangebreaks&&be.maskBreaks(0)===E)&&(yt(be,0)||!function(Xe,qe,st,it){var Tt=st._mainAxis;if(!Tt)return;var Pt=Xe._fullLayout,rt=qe._id.charAt(0),ut=j.counterLetter(qe._id),Bt=qe._offset+(Math.abs(it[0])<Math.abs(it[1])==(rt==="x")?0:qe._length);function wt(ft){if(!ft.showline||!ft.linewidth)return!1;var Mt=Math.max((ft.linewidth+qe.zerolinewidth)/2,1);function Nt(fr){return typeof fr=="number"&&Math.abs(fr-Bt)<Mt}if(Nt(ft._mainLinePosition)||Nt(ft._mainMirrorPosition))return!0;var Zt=ft._linepositions||{};for(var Ut in Zt)if(Nt(Zt[Ut][0])||Nt(Zt[Ut][1]))return!0}var Lt=Pt._plots[st._mainSubplot];if(!(Lt.mainplotinfo||Lt).overlays.length)return wt(st);for(var Se=j.list(Xe,ut),We=0;We<Se.length;We++){var nt=Se[We];if(nt._mainAxis===Tt&&wt(nt))return!0}}(he,be,Re,Ue)||function(Xe,qe){for(var st=Xe._fullData,it=qe._mainSubplot,Tt=qe._id.charAt(0),Pt=0;Pt<st.length;Pt++){var rt=st[Pt];if(rt.visible===!0&&rt.xaxis+rt.yaxis===it&&(x.traceIs(rt,"bar-like")&&rt.orientation==={x:"h",y:"v"}[Tt]||rt.fill&&rt.fill.charAt(rt.fill.length-1)===Tt))return!0}return!1}(he,be))},j.clipEnds=function(he,be){return be.filter(function(Re){return yt(he,Re.x)})},j.allowAutoMargin=function(he){for(var be=j.list(he,"",!0),Re=0;Re<be.length;Re++){var Ue=be[Re];Ue.automargin&&(k.allowAutoMargin(he,Ke(Ue)),Ue.mirror&&k.allowAutoMargin(he,mt(Ue))),x.getComponentMethod("rangeslider","isVisible")(Ue)&&k.allowAutoMargin(he,Ft(Ue))}},j.swap=function(he,be){for(var Re=function(Xe,qe){var st,it,Tt=[];for(st=0;st<qe.length;st++){var Pt=[],rt=Xe._fullData[qe[st]].xaxis,ut=Xe._fullData[qe[st]].yaxis;if(rt&&ut){for(it=0;it<Tt.length;it++)Tt[it].x.indexOf(rt)===-1&&Tt[it].y.indexOf(ut)===-1||Pt.push(it);if(Pt.length){var Bt,wt=Tt[Pt[0]];if(Pt.length>1)for(it=1;it<Pt.length;it++)Bt=Tt[Pt[it]],Vt(wt.x,Bt.x),Vt(wt.y,Bt.y);Vt(wt.x,[rt]),Vt(wt.y,[ut])}else Tt.push({x:[rt],y:[ut]})}}return Tt}(he,be),Ue=0;Ue<Re.length;Ue++)Xt(he,Re[Ue].x,Re[Ue].y)}},{"../../components/color":367,"../../components/drawing":389,"../../components/titles":476,"../../constants/alignment":483,"../../constants/numerical":491,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"./autorange":565,"./axis_autotype":567,"./axis_ids":570,"./clean_ticks":572,"./layout_attributes":579,"./set_convert":585,"@plotly/d3":58,"fast-isnumeric":190}],567:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../../lib"),k=g("../../constants/numerical").BADNUM,x=v.isArrayOrTypedArray,e=v.isDateTime,t=v.cleanNumber,r=Math.round;function l(d,u){return u?m(d):typeof d=="number"}function n(d){return Math.max(1,(d-1)/1e3)}Q.exports=function(d,u,o){var h=d,s=o.noMultiCategory;if(x(h)&&!h.length)return"-";if(!s&&function(y){return x(y[0])&&x(y[1])}(h))return"multicategory";if(s&&Array.isArray(h[0])){for(var a=[],p=0;p<h.length;p++)if(x(h[p]))for(var c=0;c<h[p].length;c++)a.push(h[p][c]);h=a}if(function(y,f){for(var w=y.length,b=n(w),_=0,T=0,L={},A=0;A<w;A+=b){var I=r(A),P=y[I],S=String(P);L[S]||(L[S]=1,e(P,f)&&_++,m(P)&&T++)}return _>2*T}(h,u))return"date";var i=o.autotypenumbers!=="strict";return function(y,f){for(var w=y.length,b=n(w),_=0,T=0,L={},A=0;A<w;A+=b){var I=r(A),P=y[I],S=String(P);if(!L[S]){L[S]=1;var E=typeof P;E==="boolean"?T++:(f?t(P)!==k:E==="number")?_++:E==="string"&&T++}}return T>2*_}(h,i)?"category":function(y,f){for(var w=y.length,b=0;b<w;b++)if(l(y[b],f))return!0;return!1}(h,i)?"linear":"-"}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],568:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../../registry"),k=g("../../lib"),x=g("../../plot_api/plot_template"),e=g("../array_container_defaults"),t=g("./layout_attributes"),r=g("./tick_value_defaults"),l=g("./tick_mark_defaults"),n=g("./tick_label_defaults"),d=g("./prefix_suffix_defaults"),u=g("./category_order_defaults"),o=g("./line_grid_defaults"),h=g("./set_convert"),s=g("./constants").WEEKDAY_PATTERN,a=g("./constants").HOUR_PATTERN;function p(y,f,w){function b(E,z){return k.coerce(y,f,t.rangebreaks,E,z)}if(b("enabled")){var _=b("bounds");if(_&&_.length>=2){var T,L,A="";if(_.length===2){for(T=0;T<2;T++)if(L=i(_[T])){A=s;break}}var I=b("pattern",A);if(I===s)for(T=0;T<2;T++)(L=i(_[T]))&&(f.bounds[T]=_[T]=L-1);if(I)for(T=0;T<2;T++)switch(L=_[T],I){case s:if(!m(L)||(L=+L)!==Math.floor(L)||L<0||L>=7)return void(f.enabled=!1);f.bounds[T]=_[T]=L;break;case a:if(!m(L)||(L=+L)<0||L>24)return void(f.enabled=!1);f.bounds[T]=_[T]=L}if(w.autorange===!1){var P=w.range;if(P[0]<P[1]){if(_[0]<P[0]&&_[1]>P[1])return void(f.enabled=!1)}else if(_[0]>P[0]&&_[1]<P[1])return void(f.enabled=!1)}}else{var S=b("values");if(!S||!S.length)return void(f.enabled=!1);b("dvalue")}}}Q.exports=function(y,f,w,b,_){var T,L=b.letter,A=b.font||{},I=b.splomStash||{},P=w("visible",!b.visibleDflt),S=f._template||{},E=f.type||S.type||"-";E==="date"&&(v.getComponentMethod("calendars","handleDefaults")(y,f,"calendar",b.calendar),b.noTicklabelmode||(T=w("ticklabelmode")));var z="";b.noTicklabelposition&&E!=="multicategory"||(z=k.coerce(y,f,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:T==="period"?["outside","inside"]:L==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),b.noTicklabeloverflow||w("ticklabeloverflow",z.indexOf("inside")!==-1?"hide past domain":E==="category"||E==="multicategory"?"allow":"hide past div"),h(f,_);var D=!f.isValidRange(y.range);D&&b.reverseDflt&&(D="reversed"),!w("autorange",D)||E!=="linear"&&E!=="-"||w("rangemode"),w("range"),f.cleanRange(),u(y,f,w,b),E==="category"||b.noHover||w("hoverformat");var U=w("color"),H=U!==t.color.dflt?U:A.color,Y=I.label||_._dfltTitle[L];if(d(y,f,w,E,b),!P)return f;w("title.text",Y),k.coerceFont(w,"title.font",{family:A.family,size:k.bigFont(A.size),color:H}),r(y,f,w,E);var J=b.hasMinor;if(J&&(x.newContainer(f,"minor"),r(y,f,w,E,{isMinor:!0})),n(y,f,w,E,b),l(y,f,w,b),J){var W=b.isMinor;b.isMinor=!0,l(y,f,w,b),b.isMinor=W}o(y,f,w,{dfltColor:U,bgColor:b.bgColor,showGrid:b.showGrid,hasMinor:J,attributes:t}),!J||f.minor.ticks||f.minor.showgrid||delete f.minor,(f.showline||f.ticks)&&w("mirror"),b.automargin&&w("automargin");var Z,re=E==="multicategory";if(b.noTickson||E!=="category"&&!re||!f.ticks&&!f.showgrid||(re&&(Z="boundaries"),w("tickson",Z)==="boundaries"&&delete f.ticklabelposition),re&&w("showdividers")&&(w("dividercolor"),w("dividerwidth")),E==="date")if(e(y,f,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:p}),f.rangebreaks.length){for(var V=0;V<f.rangebreaks.length;V++)if(f.rangebreaks[V].pattern===s){f._hasDayOfWeekBreaks=!0;break}if(h(f,_),_._has("scattergl")||_._has("splom"))for(var B=0;B<b.data.length;B++){var j=b.data[B];j.type!=="scattergl"&&j.type!=="splom"||(j.visible=!1,k.warn(j.type+" traces do not work on axes with rangebreaks. Setting trace "+j.index+" to `visible: false`."))}}else delete f.rangebreaks;return f};var c={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function i(y){if(typeof y=="string")return c[y.substr(0,3).toLowerCase()]}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"../array_container_defaults":561,"./category_order_defaults":571,"./constants":573,"./layout_attributes":579,"./line_grid_defaults":581,"./prefix_suffix_defaults":583,"./set_convert":585,"./tick_label_defaults":587,"./tick_mark_defaults":588,"./tick_value_defaults":589,"fast-isnumeric":190}],569:[function(g,Q,X){var m=g("../../constants/docs"),v=m.FORMAT_LINK,k=m.DATE_FORMAT_LINK;function x(t,r){return["Sets the "+t+" formatting rule"+(r?"for `"+r+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+v+"."].join(" ")}function e(t,r){return x(t,r)+[" And for dates see: "+k+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}Q.exports={axisHoverFormat:function(t,r){return{valType:"string",dflt:"",editType:"none",description:(r?x:e)("hover text",t)+["By default the values are formatted using "+(r?"generic number format":"`"+t+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:x,descriptionWithDates:e}},{"../../constants/docs":486}],570:[function(g,Q,X){var m=g("../../registry"),v=g("./constants");function k(x,e){if(e&&e.length){for(var t=0;t<e.length;t++)if(e[t][x])return!0}return!1}X.id2name=function(x){if(typeof x=="string"&&x.match(v.AX_ID_PATTERN)){var e=x.split(" ")[0].substr(1);return e==="1"&&(e=""),x.charAt(0)+"axis"+e}},X.name2id=function(x){if(x.match(v.AX_NAME_PATTERN)){var e=x.substr(5);return e==="1"&&(e=""),x.charAt(0)+e}},X.cleanId=function(x,e,t){var r=/( domain)$/.test(x);if(typeof x=="string"&&x.match(v.AX_ID_PATTERN)&&(!e||x.charAt(0)===e)&&(!r||t)){var l=x.split(" ")[0].substr(1).replace(/^0+/,"");return l==="1"&&(l=""),x.charAt(0)+l+(r&&t?" domain":"")}},X.list=function(x,e,t){var r=x._fullLayout;if(!r)return[];var l,n=X.listIds(x,e),d=new Array(n.length);for(l=0;l<n.length;l++){var u=n[l];d[l]=r[u.charAt(0)+"axis"+u.substr(1)]}if(!t){var o=r._subplots.gl3d||[];for(l=0;l<o.length;l++){var h=r[o[l]];e?d.push(h[e+"axis"]):d.push(h.xaxis,h.yaxis,h.zaxis)}}return d},X.listIds=function(x,e){var t=x._fullLayout;if(!t)return[];var r=t._subplots;return e?r[e+"axis"]:r.xaxis.concat(r.yaxis)},X.getFromId=function(x,e,t){var r=x._fullLayout;return e=e===void 0||typeof e!="string"?e:e.replace(" domain",""),t==="x"?e=e.replace(/y[0-9]*/,""):t==="y"&&(e=e.replace(/x[0-9]*/,"")),r[X.id2name(e)]},X.getFromTrace=function(x,e,t){var r=x._fullLayout,l=null;if(m.traceIs(e,"gl3d")){var n=e.scene;n.substr(0,5)==="scene"&&(l=r[n][t+"axis"])}else l=X.getFromId(x,e[t+"axis"]||t);return l},X.idSort=function(x,e){var t=x.charAt(0),r=e.charAt(0);return t!==r?t>r?1:-1:+(x.substr(1)||1)-+(e.substr(1)||1)},X.ref2id=function(x){return!!/^[xyz]/.test(x)&&x.split(" ")[0]},X.isLinked=function(x,e){return k(e,x._axisMatchGroups)||k(e,x._axisConstraintGroups)}},{"../../registry":647,"./constants":573}],571:[function(g,Q,X){Q.exports=function(m,v,k,x){if(v.type==="category"){var e,t=m.categoryarray,r=Array.isArray(t)&&t.length>0;r&&(e="array");var l,n=k("categoryorder",e);n==="array"&&(l=k("categoryarray")),r||n!=="array"||(n=v.categoryorder="trace"),n==="trace"?v._initialCategories=[]:n==="array"?v._initialCategories=l.slice():(l=function(d,u){var o,h,s,a=u.dataAttr||d._id.charAt(0),p={};if(u.axData)o=u.axData;else for(o=[],h=0;h<u.data.length;h++){var c=u.data[h];c[a+"axis"]===d._id&&o.push(c)}for(h=0;h<o.length;h++){var i=o[h][a];for(s=0;s<i.length;s++){var y=i[s];y!=null&&(p[y]=1)}}return Object.keys(p)}(v,x).sort(),n==="category ascending"?v._initialCategories=l:n==="category descending"&&(v._initialCategories=l.reverse()))}}},{}],572:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../../lib"),k=g("../../constants/numerical"),x=k.ONEDAY,e=k.ONEWEEK;X.dtick=function(t,r){var l=r==="log",n=r==="date",d=r==="category",u=n?x:1;if(!t)return u;if(m(t))return(t=Number(t))<=0?u:d?Math.max(1,Math.round(t)):n?Math.max(.1,t):t;if(typeof t!="string"||!n&&!l)return u;var o=t.charAt(0),h=t.substr(1);return(h=m(h)?Number(h):0)<=0||!(n&&o==="M"&&h===Math.round(h)||l&&o==="L"||l&&o==="D"&&(h===1||h===2))?u:t},X.tick0=function(t,r,l,n){return r==="date"?v.cleanDate(t,v.dateTick0(l,n%e==0?1:0)):n!=="D1"&&n!=="D2"?m(t)?Number(t):0:void 0}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],573:[function(g,Q,X){var m=g("../../lib/regex").counter;Q.exports={idRegex:{x:m("x","( domain)?"),y:m("y","( domain)?")},attrRegex:m("[xy]axis"),xAxisMatch:m("xaxis"),yAxisMatch:m("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":532}],574:[function(g,Q,X){var m=g("../../lib"),v=g("./autorange"),k=g("./axis_ids").id2name,x=g("./layout_attributes"),e=g("./scale_zoom"),t=g("./set_convert"),r=g("../../constants/numerical").ALMOST_EQUAL,l=g("../../constants/alignment").FROM_BL;function n(p,c,i){var y=i.axIds,f=i.layoutOut,w=i.hasImage,b=f._axisConstraintGroups,_=f._axisMatchGroups,T=c._id,L=T.charAt(0),A=((f._splomAxes||{})[L]||{})[T]||{},I=c._id,P=I.charAt(0)==="x";function S(ee,N){return m.coerce(p,c,x,ee,N)}c._matchGroup=null,c._constraintGroup=null,S("constrain",w?"domain":"range"),m.coerce(p,c,{constraintoward:{valType:"enumerated",values:P?["left","center","right"]:["bottom","middle","top"],dflt:P?"center":"middle"}},"constraintoward");var E,z,D=c.type,U=[];for(E=0;E<y.length;E++)(z=y[E])!==I&&f[k(z)].type===D&&U.push(z);var H=u(b,I);if(H){var Y=[];for(E=0;E<U.length;E++)H[z=U[E]]||Y.push(z);U=Y}var J,W,Z=U.length;Z&&(p.matches||A.matches)&&(J=m.coerce(p,c,{matches:{valType:"enumerated",values:U,dflt:U.indexOf(A.matches)!==-1?A.matches:void 0}},"matches"));var re=w&&!P?c.anchor:void 0;if(Z&&!J&&(p.scaleanchor||re)&&(W=m.coerce(p,c,{scaleanchor:{valType:"enumerated",values:U}},"scaleanchor",re)),J){c._matchGroup=o(_,I,J,1);var V=f[k(J)],B=d(f,c)/d(f,V);P!==(J.charAt(0)==="x")&&(B=(P?"x":"y")+B),o(b,I,J,B)}else p.matches&&y.indexOf(p.matches)!==-1&&m.warn("ignored "+c._name+'.matches: "'+p.matches+'" to avoid an infinite loop');if(W){var j=S("scaleratio");j||(j=c.scaleratio=1),o(b,I,W,j)}else p.scaleanchor&&y.indexOf(p.scaleanchor)!==-1&&m.warn("ignored "+c._name+'.scaleanchor: "'+p.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function d(p,c){var i=c.domain;return i||(i=p[k(c.overlaying)].domain),i[1]-i[0]}function u(p,c){for(var i=0;i<p.length;i++)if(p[i][c])return p[i];return null}function o(p,c,i,y){var f,w,b,_,T,L=u(p,c);L===null?((L={})[c]=1,T=p.length,p.push(L)):T=p.indexOf(L);var A=Object.keys(L);for(f=0;f<p.length;f++)if(b=p[f],f!==T&&b[i]){var I=b[i];for(w=0;w<A.length;w++)b[_=A[w]]=h(I,h(y,L[_]));return void p.splice(T,1)}if(y!==1)for(w=0;w<A.length;w++){var P=A[w];L[P]=h(y,L[P])}L[i]=1}function h(p,c){var i,y,f="",w="";typeof p=="string"&&(i=(f=p.match(/^[xy]*/)[0]).length,p=+p.substr(i)),typeof c=="string"&&(y=(w=c.match(/^[xy]*/)[0]).length,c=+c.substr(y));var b=p*c;return i||y?i&&y&&f.charAt(0)!==w.charAt(0)?i===y?b:(i>y?f.substr(y):w.substr(i))+b:f+w+p*c:b}function s(p,c){for(var i=c._size,y=i.h/i.w,f={},w=Object.keys(p),b=0;b<w.length;b++){var _=w[b],T=p[_];if(typeof T=="string"){var L=T.match(/^[xy]*/)[0],A=L.length;T=+T.substr(A);for(var I=L.charAt(0)==="y"?y:1/y,P=0;P<A;P++)T*=I}f[_]=T}return f}function a(p,c){var i=p._inputDomain,y=l[p.constraintoward],f=i[0]+(i[1]-i[0])*y;p.domain=p._input.domain=[f+(i[0]-f)/c,f+(i[1]-f)/c],p.setScale()}X.handleDefaults=function(p,c,i){var y,f,w,b,_,T,L,A,I=i.axIds,P=i.axHasImage,S=c._axisConstraintGroups=[],E=c._axisMatchGroups=[];for(y=0;y<I.length;y++)n(_=p[b=k(I[y])],T=c[b],{axIds:I,layoutOut:c,hasImage:P[b]});function z(V,B){for(y=0;y<V.length;y++)for(w in f=V[y])c[k(w)][B]=f}for(z(E,"_matchGroup"),y=0;y<S.length;y++)for(w in f=S[y])if((T=c[k(w)]).fixedrange){for(var D in f){var U=k(D);(p[U]||{}).fixedrange===!1&&m.warn("fixedrange was specified as false for axis "+U+" but was overridden because another axis in its constraint group has fixedrange true"),c[U].fixedrange=!0}break}for(y=0;y<S.length;){for(w in f=S[y]){(T=c[k(w)])._matchGroup&&Object.keys(T._matchGroup).length===Object.keys(f).length&&(S.splice(y,1),y--);break}y++}z(S,"_constraintGroup");var H=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],Y=!1,J=!1;function W(){A=T[L],L==="rangebreaks"&&(J=T._hasDayOfWeekBreaks)}for(y=0;y<E.length;y++){f=E[y];for(var Z=0;Z<H.length;Z++){var re;for(w in L=H[Z],A=null,f)if(_=p[b=k(w)],T=c[b],L in T){if(!T.matches&&(re=T,L in _)){W();break}A===null&&L in _&&W()}if(L==="range"&&A&&(Y=!0),L==="autorange"&&A===null&&Y&&(A=!1),A===null&&L in re&&(A=re[L]),A!==null)for(w in f)(T=c[k(w)])[L]=L==="range"?A.slice():A,L==="rangebreaks"&&(T._hasDayOfWeekBreaks=J,t(T,c))}}},X.enforce=function(p){var c,i,y,f,w,b,_,T,L=p._fullLayout,A=L._axisConstraintGroups||[];for(c=0;c<A.length;c++){y=s(A[c],L);var I=Object.keys(y),P=1/0,S=0,E=1/0,z={},D={},U=!1;for(i=0;i<I.length;i++)D[f=I[i]]=w=L[k(f)],w._inputDomain?w.domain=w._inputDomain.slice():w._inputDomain=w.domain.slice(),w._inputRange||(w._inputRange=w.range.slice()),w.setScale(),z[f]=b=Math.abs(w._m)/y[f],P=Math.min(P,b),w.constrain!=="domain"&&w._constraintShrinkable||(E=Math.min(E,b)),delete w._constraintShrinkable,S=Math.max(S,b),w.constrain==="domain"&&(U=!0);if(!(P>r*S)||U){for(i=0;i<I.length;i++)if(b=z[f=I[i]],_=(w=D[f]).constrain,b!==E||_==="domain")if(T=b/E,_==="range")e(w,T);else{var H=w._inputDomain,Y=(w.domain[1]-w.domain[0])/(H[1]-H[0]),J=(w.r2l(w.range[1])-w.r2l(w.range[0]))/(w.r2l(w._inputRange[1])-w.r2l(w._inputRange[0]));if((T/=Y)*J<1){w.domain=w._input.domain=H.slice(),e(w,T);continue}if(J<1&&(w.range=w._input.range=w._inputRange.slice(),T*=J),w.autorange){var W=w.r2l(w.range[0]),Z=w.r2l(w.range[1]),re=(W+Z)/2,V=re,B=re,j=Math.abs(Z-re),ee=re-j*T*1.0001,N=re+j*T*1.0001,$=v.makePadFn(L,w,0),K=v.makePadFn(L,w,1);a(w,T);var te,ie,le=Math.abs(w._m),se=v.concatExtremes(p,w),ve=se.min,fe=se.max;for(ie=0;ie<ve.length;ie++)(te=ve[ie].val-$(ve[ie])/le)>ee&&te<V&&(V=te);for(ie=0;ie<fe.length;ie++)(te=fe[ie].val+K(fe[ie])/le)<N&&te>B&&(B=te);T/=(B-V)/(2*j),V=w.l2r(V),B=w.l2r(B),w.range=w._input.range=W<Z?[V,B]:[B,V]}a(w,T)}}}},X.getAxisGroup=function(p,c){for(var i=p._axisMatchGroups,y=0;y<i.length;y++)if(i[y][c])return"g"+y;return c},X.clean=function(p,c){if(c._inputDomain){for(var i=!1,y=c._id,f=p._fullLayout._axisConstraintGroups,w=0;w<f.length;w++)if(f[w][y]){i=!0;break}i&&c.constrain==="domain"||(c._input.domain=c.domain=c._inputDomain,delete c._inputDomain)}}},{"../../constants/alignment":483,"../../constants/numerical":491,"../../lib":515,"./autorange":565,"./axis_ids":570,"./layout_attributes":579,"./scale_zoom":584,"./set_convert":585}],575:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../lib"),k=v.numberFormat,x=g("tinycolor2"),e=g("has-passive-events"),t=g("../../registry"),r=v.strTranslate,l=g("../../lib/svg_text_utils"),n=g("../../components/color"),d=g("../../components/drawing"),u=g("../../components/fx"),o=g("./axes"),h=g("../../lib/setcursor"),s=g("../../components/dragelement"),a=g("../../components/dragelement/helpers"),p=a.selectingOrDrawing,c=a.freeMode,i=g("../../constants/alignment").FROM_TL,y=g("../../lib/clear_gl_canvases"),f=g("../../plot_api/subroutines").redrawReglTraces,w=g("../plots"),b=g("./axis_ids").getFromId,_=g("../../components/selections").prepSelect,T=g("../../components/selections").clearOutline,L=g("../../components/selections").selectOnClick,A=g("./scale_zoom"),I=g("./constants"),P=I.MINDRAG,S=I.MINZOOM,E=!0;function z(te,ie,le,se){var ve=v.ensureSingle(te.draglayer,ie,le,function(fe){fe.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",te.id)});return ve.call(h,se),ve.node()}function D(te,ie,le,se,ve,fe,ye){var Ae=z(te,"rect",ie,le);return m.select(Ae).call(d.setRect,se,ve,fe,ye),Ae}function U(te,ie){for(var le=0;le<te.length;le++)if(!te[le].fixedrange)return ie;return""}function H(te,ie,le,se,ve){for(var fe=0;fe<te.length;fe++){var ye=te[fe];if(!ye.fixedrange)if(ye.rangebreaks){var Ae=ye._id.charAt(0)==="y",pe=Ae?1-ie:ie,ge=Ae?1-le:le;se[ye._name+".range[0]"]=ye.l2r(ye.p2l(pe*ye._length)),se[ye._name+".range[1]"]=ye.l2r(ye.p2l(ge*ye._length))}else{var we=ye._rl[0],oe=ye._rl[1]-we;se[ye._name+".range[0]"]=ye.l2r(we+oe*ie),se[ye._name+".range[1]"]=ye.l2r(we+oe*le)}}if(ve&&ve.length){var de=(ie+(1-le))/2;H(ve,de,1-de,se,[])}}function Y(te,ie){for(var le=0;le<te.length;le++){var se=te[le];if(!se.fixedrange)if(se.rangebreaks){var ve=se._length,fe=(se.p2l(0+ie)-se.p2l(0)+(se.p2l(ve+ie)-se.p2l(ve)))/2;se.range=[se.l2r(se._rl[0]-fe),se.l2r(se._rl[1]-fe)]}else se.range=[se.l2r(se._rl[0]-ie/se._m),se.l2r(se._rl[1]-ie/se._m)]}}function J(te){return 1-(te>=0?Math.min(te,.9):1/(1/Math.max(te,-.3)+3.222))}function W(te,ie,le,se,ve){return te.append("path").attr("class","zoombox").style({fill:ie>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",r(le,se)).attr("d",ve+"Z")}function Z(te,ie,le){return te.append("path").attr("class","zoombox-corners").style({fill:n.background,stroke:n.defaultLine,"stroke-width":1,opacity:0}).attr("transform",r(ie,le)).attr("d","M0,0Z")}function re(te,ie,le,se,ve,fe){te.attr("d",se+"M"+le.l+","+le.t+"v"+le.h+"h"+le.w+"v-"+le.h+"h-"+le.w+"Z"),V(te,ie,ve,fe)}function V(te,ie,le,se){le||(te.transition().style("fill",se>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ie.transition().style("opacity",1).duration(200))}function B(te){m.select(te).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function j(te){E&&te.data&&te._context.showTips&&(v.notifier(v._(te,"Double-click to zoom back out"),"long"),E=!1)}function ee(te){var ie=Math.floor(Math.min(te.b-te.t,te.r-te.l,S)/2);return"M"+(te.l-3.5)+","+(te.t-.5+ie)+"h3v"+-ie+"h"+ie+"v-3h-"+(ie+3)+"ZM"+(te.r+3.5)+","+(te.t-.5+ie)+"h-3v"+-ie+"h"+-ie+"v-3h"+(ie+3)+"ZM"+(te.r+3.5)+","+(te.b+.5-ie)+"h-3v"+ie+"h"+-ie+"v3h"+(ie+3)+"ZM"+(te.l-3.5)+","+(te.b+.5-ie)+"h3v"+ie+"h"+ie+"v3h-"+(ie+3)+"Z"}function N(te,ie,le,se,ve){for(var fe,ye,Ae,pe,ge=!1,we={},oe={},de=(ve||{}).xaHash,Te=(ve||{}).yaHash,Ee=0;Ee<ie.length;Ee++){var Me=ie[Ee];for(fe in le)if(Me[fe]){for(Ae in Me)ve&&(de[Ae]||Te[Ae])||(Ae.charAt(0)==="x"?le:se)[Ae]||(we[Ae]=fe);for(ye in se)ve&&(de[ye]||Te[ye])||!Me[ye]||(ge=!0)}for(ye in se)if(Me[ye])for(pe in Me)ve&&(de[pe]||Te[pe])||(pe.charAt(0)==="x"?le:se)[pe]||(oe[pe]=ye)}ge&&(v.extendFlat(we,oe),oe={});var De={},Ie=[];for(Ae in we){var Oe=b(te,Ae);Ie.push(Oe),De[Oe._id]=Oe}var Ze={},Fe=[];for(pe in oe){var Pe=b(te,pe);Fe.push(Pe),Ze[Pe._id]=Pe}return{xaHash:De,yaHash:Ze,xaxes:Ie,yaxes:Fe,xLinks:we,yLinks:oe,isSubplotConstrained:ge}}function $(te,ie){if(e){var le=te.onwheel!==void 0?"wheel":"mousewheel";te._onwheel&&te.removeEventListener(le,te._onwheel),te._onwheel=ie,te.addEventListener(le,ie,{passive:!1})}else te.onwheel!==void 0?te.onwheel=ie:te.onmousewheel!==void 0?te.onmousewheel=ie:te.isAddedWheelEvent||(te.isAddedWheelEvent=!0,te.addEventListener("wheel",ie,{passive:!1}))}function K(te){var ie=[];for(var le in te)ie.push(te[le]);return ie}Q.exports={makeDragBox:function(te,ie,le,se,ve,fe,ye,Ae){var pe,ge,we,oe,de,Te,Ee,Me,De,Ie,Oe,Ze,Fe,Pe,ze,Ge,$e,ot,vt,bt,yt,tt,Ke,mt=te._fullLayout._zoomlayer,Ft=ye+Ae==="nsew",Vt=(ye+Ae).length===1;function Xt(){if(pe=ie.xaxis,ge=ie.yaxis,De=pe._length,Ie=ge._length,Ee=pe._offset,Me=ge._offset,(we={})[pe._id]=pe,(oe={})[ge._id]=ge,ye&&Ae)for(var Kt=ie.overlays,Qt=0;Qt<Kt.length;Qt++){var er=Kt[Qt].xaxis;we[er._id]=er;var cr=Kt[Qt].yaxis;oe[cr._id]=cr}de=K(we),Te=K(oe),Fe=U(de,Ae),Pe=U(Te,ye),ze=!Pe&&!Fe,Ze=N(te,te._fullLayout._axisMatchGroups,we,oe);var gr=(Oe=N(te,te._fullLayout._axisConstraintGroups,we,oe,Ze)).isSubplotConstrained||Ze.isSubplotConstrained;Ge=Ae||gr,$e=ye||gr;var Mr=te._fullLayout;ot=Mr._has("scattergl"),vt=Mr._has("splom"),bt=Mr._has("svg")}Xt();var Gt=function(Kt,Qt,er){return Kt?Kt==="nsew"?er?"":Qt==="pan"?"move":"crosshair":Kt.toLowerCase()+"-resize":"pointer"}(Pe+Fe,te._fullLayout.dragmode,Ft),nr=D(ie,ye+Ae+"drag",Gt,le,se,ve,fe);if(ze&&!Ft)return nr.onmousedown=null,nr.style.pointerEvents="none",nr;var It,Be,He,he,be,Re,Ue,Xe,qe,st,it={element:nr,gd:te,plotinfo:ie};function Tt(){it.plotinfo.selection=!1,T(te)}function Pt(Kt,Qt){var er=it.gd;if(er._fullLayout._activeShapeIndex>=0)er._fullLayout._deactivateShape(er);else{var cr=er._fullLayout.clickmode;if(B(er),Kt!==2||Vt||Nt(),Ft)cr.indexOf("select")>-1&&L(Qt,er,de,Te,ie.id,it),cr.indexOf("event")>-1&&u.click(er,Qt,ie.id);else if(Kt===1&&Vt){var gr=ye?ge:pe,Mr=ye==="s"||Ae==="w"?0:1,Ir=gr._name+".range["+Mr+"]",Fr=function(en,Rn){var nn,yn=en.range[Rn],bn=Math.abs(yn-en.range[1-Rn]);return en.type==="date"?yn:en.type==="log"?(nn=Math.ceil(Math.max(0,-Math.log(bn)/Math.LN10))+3,k("."+nn+"g")(Math.pow(10,yn))):(nn=Math.floor(Math.log(Math.abs(yn))/Math.LN10)-Math.floor(Math.log(bn)/Math.LN10)+4,k("."+String(nn)+"g")(yn))}(gr,Mr),Yr="left",fn="middle";if(gr.fixedrange)return;ye?(fn=ye==="n"?"top":"bottom",gr.side==="right"&&(Yr="right")):Ae==="e"&&(Yr="right"),er._context.showAxisRangeEntryBoxes&&m.select(nr).call(l.makeEditable,{gd:er,immediate:!0,background:er._fullLayout.paper_bgcolor,text:String(Fr),fill:gr.tickfont?gr.tickfont.color:"#444",horizontalAlign:Yr,verticalAlign:fn}).on("edit",function(en){var Rn=gr.d2r(en);Rn!==void 0&&t.call("_guiRelayout",er,Ir,Rn)})}}}function rt(Kt,Qt){if(te._transitioningWithDuration)return!1;var er=Math.max(0,Math.min(De,tt*Kt+It)),cr=Math.max(0,Math.min(Ie,Ke*Qt+Be)),gr=Math.abs(er-It),Mr=Math.abs(cr-Be);function Ir(){Ue="",He.r=He.l,He.t=He.b,qe.attr("d","M0,0Z")}if(He.l=Math.min(It,er),He.r=Math.max(It,er),He.t=Math.min(Be,cr),He.b=Math.max(Be,cr),Oe.isSubplotConstrained)gr>S||Mr>S?(Ue="xy",gr/De>Mr/Ie?(Mr=gr*Ie/De,Be>cr?He.t=Be-Mr:He.b=Be+Mr):(gr=Mr*De/Ie,It>er?He.l=It-gr:He.r=It+gr),qe.attr("d",ee(He))):Ir();else if(Ze.isSubplotConstrained)if(gr>S||Mr>S){Ue="xy";var Fr=Math.min(He.l/De,(Ie-He.b)/Ie),Yr=Math.max(He.r/De,(Ie-He.t)/Ie);He.l=Fr*De,He.r=Yr*De,He.b=(1-Fr)*Ie,He.t=(1-Yr)*Ie,qe.attr("d",ee(He))}else Ir();else!Pe||Mr<Math.min(Math.max(.6*gr,P),S)?gr<P||!Fe?Ir():(He.t=0,He.b=Ie,Ue="x",qe.attr("d",function(fn,en){return"M"+(fn.l-.5)+","+(en-S-.5)+"h-3v"+(2*S+1)+"h3ZM"+(fn.r+.5)+","+(en-S-.5)+"h3v"+(2*S+1)+"h-3Z"}(He,Be))):!Fe||gr<Math.min(.6*Mr,S)?(He.l=0,He.r=De,Ue="y",qe.attr("d",function(fn,en){return"M"+(en-S-.5)+","+(fn.t-.5)+"v-3h"+(2*S+1)+"v3ZM"+(en-S-.5)+","+(fn.b+.5)+"v3h"+(2*S+1)+"v-3Z"}(He,It))):(Ue="xy",qe.attr("d",ee(He)));He.w=He.r-He.l,He.h=He.b-He.t,Ue&&(st=!0),te._dragged=st,re(Xe,qe,He,be,Re,he),ut(),te.emit("plotly_relayouting",yt),Re=!0}function ut(){yt={},Ue!=="xy"&&Ue!=="x"||(H(de,He.l/De,He.r/De,yt,Oe.xaxes),ft("x",yt)),Ue!=="xy"&&Ue!=="y"||(H(Te,(Ie-He.b)/Ie,(Ie-He.t)/Ie,yt,Oe.yaxes),ft("y",yt))}function Bt(){ut(),B(te),Zt(),j(te)}it.prepFn=function(Kt,Qt,er){var cr=it.dragmode,gr=te._fullLayout.dragmode;gr!==cr&&(it.dragmode=gr),Xt(),tt=te._fullLayout._invScaleX,Ke=te._fullLayout._invScaleY,ze||(Ft?Kt.shiftKey?gr==="pan"?gr="zoom":p(gr)||(gr="pan"):Kt.ctrlKey&&(gr="pan"):gr="pan"),c(gr)?it.minDrag=1:it.minDrag=void 0,p(gr)?(it.xaxes=de,it.yaxes=Te,_(Kt,Qt,er,it,gr)):(it.clickFn=Pt,p(cr)&&Tt(),ze||(gr==="zoom"?(it.moveFn=rt,it.doneFn=Bt,it.minDrag=1,function(Mr,Ir,Fr){var Yr=nr.getBoundingClientRect();It=Ir-Yr.left,Be=Fr-Yr.top,te._fullLayout._calcInverseTransform(te);var fn=v.apply3DTransform(te._fullLayout._invTransform)(It,Be);It=fn[0],Be=fn[1],He={l:It,r:It,w:0,t:Be,b:Be,h:0},he=te._hmpixcount?te._hmlumcount/te._hmpixcount:x(te._fullLayout.plot_bgcolor).getLuminance(),Re=!1,Ue="xy",st=!1,Xe=W(mt,he,Ee,Me,be="M0,0H"+De+"V"+Ie+"H0V0"),qe=Z(mt,Ee,Me)}(0,Qt,er)):gr==="pan"&&(it.moveFn=nt,it.doneFn=Zt))),te._fullLayout._redrag=function(){var Mr=te._dragdata;if(Mr&&Mr.element===nr){var Ir=te._fullLayout.dragmode;p(Ir)||(Xt(),Ut([0,0,De,Ie]),it.moveFn(Mr.dx,Mr.dy))}}},s.init(it);var wt=[0,0,De,Ie],Lt=null,Se=I.REDRAWDELAY,We=ie.mainplot?te._fullLayout._plots[ie.mainplot]:ie;function nt(Kt,Qt){if(Kt*=tt,Qt*=Ke,!te._transitioningWithDuration){if(te._fullLayout._replotting=!0,Fe==="ew"||Pe==="ns"){var er=Fe?-Kt:0,cr=Pe?-Qt:0;if(Ze.isSubplotConstrained){if(Fe&&Pe){var gr=(Kt/De-Qt/Ie)/2;er=-(Kt=gr*De),cr=-(Qt=-gr*Ie)}Pe?er=-cr*De/Ie:cr=-er*Ie/De}return Fe&&(Y(de,Kt),ft("x")),Pe&&(Y(Te,Qt),ft("y")),Ut([er,cr,De,Ie]),Mt(),void te.emit("plotly_relayouting",yt)}var Mr,Ir,Fr=Fe==="w"==(Pe==="n")?1:-1;if(Fe&&Pe&&(Oe.isSubplotConstrained||Ze.isSubplotConstrained)){var Yr=(Kt/De+Fr*Qt/Ie)/2;Kt=Yr*De,Qt=Fr*Yr*Ie}if(Fe==="w"?Kt=nn(de,0,Kt):Fe==="e"?Kt=nn(de,1,-Kt):Fe||(Kt=0),Pe==="n"?Qt=nn(Te,1,Qt):Pe==="s"?Qt=nn(Te,0,-Qt):Pe||(Qt=0),Mr=Fe==="w"?Kt:0,Ir=Pe==="n"?Qt:0,Oe.isSubplotConstrained&&!Ze.isSubplotConstrained||Ze.isSubplotConstrained&&Fe&&Pe&&Fr>0){var fn;if(Ze.isSubplotConstrained||!Fe&&Pe.length===1){for(fn=0;fn<de.length;fn++)de[fn].range=de[fn]._r.slice(),A(de[fn],1-Qt/Ie);Mr=(Kt=Qt*De/Ie)/2}if(Ze.isSubplotConstrained||!Pe&&Fe.length===1){for(fn=0;fn<Te.length;fn++)Te[fn].range=Te[fn]._r.slice(),A(Te[fn],1-Kt/De);Ir=(Qt=Kt*Ie/De)/2}}Ze.isSubplotConstrained&&Pe||ft("x"),Ze.isSubplotConstrained&&Fe||ft("y");var en=De-Kt,Rn=Ie-Qt;!Ze.isSubplotConstrained||Fe&&Pe||(Fe?(Ir=Mr?0:Kt*Ie/De,Rn=en*Ie/De):(Mr=Ir?0:Qt*De/Ie,en=Rn*De/Ie)),Ut([Mr,Ir,en,Rn]),Mt(),te.emit("plotly_relayouting",yt)}function nn(yn,bn,ta){for(var Br,rn,gn=1-bn,Qr=0;Qr<yn.length;Qr++){var un=yn[Qr];if(!un.fixedrange){Br=un,rn=un._rl[gn]+(un._rl[bn]-un._rl[gn])/J(ta/un._length);var Gn=un.l2r(rn);Gn!==!1&&Gn!==void 0&&(un.range[bn]=Gn)}}return Br._length*(Br._rl[bn]-rn)/(Br._rl[bn]-Br._rl[gn])}}function ft(Kt,Qt){for(var er=Ze.isSubplotConstrained?{x:Te,y:de}[Kt]:Ze[Kt+"axes"],cr=Ze.isSubplotConstrained?{x:de,y:Te}[Kt]:[],gr=0;gr<er.length;gr++){var Mr=er[gr],Ir=Mr._id,Fr=Ze.xLinks[Ir]||Ze.yLinks[Ir],Yr=cr[0]||we[Fr]||oe[Fr];Yr&&(Qt?(Qt[Mr._name+".range[0]"]=Qt[Yr._name+".range[0]"],Qt[Mr._name+".range[1]"]=Qt[Yr._name+".range[1]"]):Mr.range=Yr.range.slice())}}function Mt(){var Kt,Qt=[];function er(Mr){for(Kt=0;Kt<Mr.length;Kt++)Mr[Kt].fixedrange||Qt.push(Mr[Kt]._id)}for(Ge&&(er(de),er(Oe.xaxes),er(Ze.xaxes)),$e&&(er(Te),er(Oe.yaxes),er(Ze.yaxes)),yt={},Kt=0;Kt<Qt.length;Kt++){var cr=Qt[Kt],gr=b(te,cr);o.drawOne(te,gr,{skipTitle:!0}),yt[gr._name+".range[0]"]=gr.range[0],yt[gr._name+".range[1]"]=gr.range[1]}o.redrawComponents(te,Qt)}function Nt(){if(!te._transitioningWithDuration){var Kt=te._context.doubleClick,Qt=[];Fe&&(Qt=Qt.concat(de)),Pe&&(Qt=Qt.concat(Te)),Ze.xaxes&&(Qt=Qt.concat(Ze.xaxes)),Ze.yaxes&&(Qt=Qt.concat(Ze.yaxes));var er,cr,gr,Mr={};if(Kt==="reset+autosize"){for(Kt="autosize",cr=0;cr<Qt.length;cr++)if((er=Qt[cr])._rangeInitial&&(er.range[0]!==er._rangeInitial[0]||er.range[1]!==er._rangeInitial[1])||!er._rangeInitial&&!er.autorange){Kt="reset";break}}if(Kt==="autosize")for(cr=0;cr<Qt.length;cr++)(er=Qt[cr]).fixedrange||(Mr[er._name+".autorange"]=!0);else if(Kt==="reset")for((Fe||Oe.isSubplotConstrained)&&(Qt=Qt.concat(Oe.xaxes)),Pe&&!Oe.isSubplotConstrained&&(Qt=Qt.concat(Oe.yaxes)),Oe.isSubplotConstrained&&(Fe?Pe||(Qt=Qt.concat(Te)):Qt=Qt.concat(de)),cr=0;cr<Qt.length;cr++)(er=Qt[cr]).fixedrange||(er._rangeInitial?(gr=er._rangeInitial,Mr[er._name+".range[0]"]=gr[0],Mr[er._name+".range[1]"]=gr[1]):Mr[er._name+".autorange"]=!0);te.emit("plotly_doubleclick",null),t.call("_guiRelayout",te,Mr)}}function Zt(){Ut([0,0,De,Ie]),v.syncOrAsync([w.previousPromises,function(){te._fullLayout._replotting=!1,t.call("_guiRelayout",te,yt)}],te)}function Ut(Kt){var Qt,er,cr,gr,Mr=te._fullLayout,Ir=Mr._plots,Fr=Mr._subplots.cartesian;if(vt&&t.subplotsRegistry.splom.drag(te),ot){for(Qt=0;Qt<Fr.length;Qt++)if(cr=(er=Ir[Fr[Qt]]).xaxis,gr=er.yaxis,er._scene){var Yr=v.simpleMap(cr.range,cr.r2l),fn=v.simpleMap(gr.range,gr.r2l);er._scene.update({range:[Yr[0],fn[0],Yr[1],fn[1]]})}}if((vt||ot)&&(y(te),f(te)),bt){var en=Kt[2]/pe._length,Rn=Kt[3]/ge._length;for(Qt=0;Qt<Fr.length;Qt++){cr=(er=Ir[Fr[Qt]]).xaxis,gr=er.yaxis;var nn,yn,bn,ta,Br=(Ge||Ze.isSubplotConstrained)&&!cr.fixedrange&&we[cr._id],rn=($e||Ze.isSubplotConstrained)&&!gr.fixedrange&&oe[gr._id];if(Br?(nn=en,bn=Ae||Ze.isSubplotConstrained?Kt[0]:ur(cr,nn)):Ze.xaHash[cr._id]?(nn=en,bn=Kt[0]*cr._length/pe._length):Ze.yaHash[cr._id]?(nn=Rn,bn=Pe==="ns"?-Kt[1]*cr._length/ge._length:ur(cr,nn,{n:"top",s:"bottom"}[Pe])):bn=Tr(cr,nn=fr(cr,en,Rn)),rn?(yn=Rn,ta=ye||Ze.isSubplotConstrained?Kt[1]:ur(gr,yn)):Ze.yaHash[gr._id]?(yn=Rn,ta=Kt[1]*gr._length/ge._length):Ze.xaHash[gr._id]?(yn=en,ta=Fe==="ew"?-Kt[0]*gr._length/pe._length:ur(gr,yn,{e:"right",w:"left"}[Fe])):ta=Tr(gr,yn=fr(gr,en,Rn)),nn||yn){nn||(nn=1),yn||(yn=1);var gn=cr._offset-bn/nn,Qr=gr._offset-ta/yn;er.clipRect.call(d.setTranslate,bn,ta).call(d.setScale,nn,yn),er.plot.call(d.setTranslate,gn,Qr).call(d.setScale,1/nn,1/yn),nn===er.xScaleFactor&&yn===er.yScaleFactor||(d.setPointGroupScale(er.zoomScalePts,nn,yn),d.setTextPointsScale(er.zoomScaleTxt,nn,yn)),d.hideOutsideRangePoints(er.clipOnAxisFalseTraces,er),er.xScaleFactor=nn,er.yScaleFactor=yn}}}}function fr(Kt,Qt,er){return Kt.fixedrange?0:Ge&&Oe.xaHash[Kt._id]?Qt:$e&&(Oe.isSubplotConstrained?Oe.xaHash:Oe.yaHash)[Kt._id]?er:0}function Tr(Kt,Qt){return Qt?(Kt.range=Kt._r.slice(),A(Kt,Qt),ur(Kt,Qt)):0}function ur(Kt,Qt,er){return Kt._length*(1-Qt)*i[er||Kt.constraintoward||"middle"]}return ye.length*Ae.length!=1&&$(nr,function(Kt){if(te._context._scrollZoom.cartesian||te._fullLayout._enablescrollzoom){if(Tt(),te._transitioningWithDuration)return Kt.preventDefault(),void Kt.stopPropagation();Xt(),clearTimeout(Lt);var Qt=-Kt.deltaY;if(isFinite(Qt)||(Qt=Kt.wheelDelta/10),isFinite(Qt)){var er,cr=Math.exp(-Math.min(Math.max(Qt,-20),20)/200),gr=We.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Mr=(Kt.clientX-gr.left)/gr.width,Ir=(gr.bottom-Kt.clientY)/gr.height;if(Ge){for(Ae||(Mr=.5),er=0;er<de.length;er++)Fr(de[er],Mr,cr);ft("x"),wt[2]*=cr,wt[0]+=wt[2]*Mr*(1/cr-1)}if($e){for(ye||(Ir=.5),er=0;er<Te.length;er++)Fr(Te[er],Ir,cr);ft("y"),wt[3]*=cr,wt[1]+=wt[3]*(1-Ir)*(1/cr-1)}Ut(wt),Mt(),te.emit("plotly_relayouting",yt),Lt=setTimeout(function(){te._fullLayout&&(wt=[0,0,De,Ie],Zt())},Se),Kt.preventDefault()}else v.log("Did not find wheel motion attributes: ",Kt)}function Fr(Yr,fn,en){if(!Yr.fixedrange){var Rn=v.simpleMap(Yr.range,Yr.r2l),nn=Rn[0]+(Rn[1]-Rn[0])*fn;Yr.range=Rn.map(function(yn){return Yr.l2r(nn+(yn-nn)*en)})}}}),nr},makeDragger:z,makeRectDragger:D,makeZoombox:W,makeCorners:Z,updateZoombox:re,xyCorners:ee,transitionZoombox:V,removeZoombox:B,showDoubleClickNotifier:j,attachWheelEventHandler:$}},{"../../components/color":367,"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../constants/alignment":483,"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plot_api/subroutines":556,"../../registry":647,"../plots":628,"./axes":566,"./axis_ids":570,"./constants":573,"./scale_zoom":584,"@plotly/d3":58,"has-passive-events":229,tinycolor2:313}],576:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../components/fx"),k=g("../../components/dragelement"),x=g("../../lib/setcursor"),e=g("./dragbox").makeDragBox,t=g("./constants").DRAGGERSIZE;X.initInteractions=function(r){var l=r._fullLayout;if(r._context.staticPlot)m.select(r).selectAll(".drag").remove();else if(l._has("cartesian")||l._has("splom")){Object.keys(l._plots||{}).sort(function(d,u){if((l._plots[d].mainplot&&!0)===(l._plots[u].mainplot&&!0)){var o=d.split("y"),h=u.split("y");return o[0]===h[0]?Number(o[1]||1)-Number(h[1]||1):Number(o[0]||1)-Number(h[0]||1)}return l._plots[d].mainplot?1:-1}).forEach(function(d){var u=l._plots[d],o=u.xaxis,h=u.yaxis;if(!u.mainplot){var s=e(r,u,o._offset,h._offset,o._length,h._length,"ns","ew");s.onmousemove=function(c){r._fullLayout._rehover=function(){r._fullLayout._hoversubplot===d&&r._fullLayout._plots[d]&&v.hover(r,c,d)},v.hover(r,c,d),r._fullLayout._lasthover=s,r._fullLayout._hoversubplot=d},s.onmouseout=function(c){r._dragging||(r._fullLayout._hoversubplot=null,k.unhover(r,c))},r._context.showAxisDragHandles&&(e(r,u,o._offset-t,h._offset-t,t,t,"n","w"),e(r,u,o._offset+o._length,h._offset-t,t,t,"n","e"),e(r,u,o._offset-t,h._offset+h._length,t,t,"s","w"),e(r,u,o._offset+o._length,h._offset+h._length,t,t,"s","e"))}if(r._context.showAxisDragHandles){if(d===o._mainSubplot){var a=o._mainLinePosition;o.side==="top"&&(a-=t),e(r,u,o._offset+.1*o._length,a,.8*o._length,t,"","ew"),e(r,u,o._offset,a,.1*o._length,t,"","w"),e(r,u,o._offset+.9*o._length,a,.1*o._length,t,"","e")}if(d===h._mainSubplot){var p=h._mainLinePosition;h.side!=="right"&&(p-=t),e(r,u,p,h._offset+.1*h._length,t,.8*h._length,"ns",""),e(r,u,p,h._offset+.9*h._length,t,.1*h._length,"s",""),e(r,u,p,h._offset,t,.1*h._length,"n","")}}});var n=l._hoverlayer.node();n.onmousemove=function(d){d.target=r._fullLayout._lasthover,v.hover(r,d,l._hoversubplot)},n.onclick=function(d){d.target=r._fullLayout._lasthover,v.click(r,d)},n.onmousedown=function(d){r._fullLayout._lasthover.onmousedown(d)},X.updateFx(r)}},X.updateFx=function(r){var l=r._fullLayout,n=l.dragmode==="pan"?"move":"crosshair";x(l._draggers,n)}},{"../../components/dragelement":386,"../../components/fx":407,"../../lib/setcursor":536,"./constants":573,"./dragbox":575,"@plotly/d3":58}],577:[function(g,Q,X){var m=g("../../registry"),v=g("../../lib"),k=g("./axis_ids");Q.exports=function(x){return function(e,t){var r=e[x];if(Array.isArray(r))for(var l=m.subplotsRegistry.cartesian,n=l.idRegex,d=t._subplots,u=d.xaxis,o=d.yaxis,h=d.cartesian,s=t._has("cartesian")||t._has("gl2d"),a=0;a<r.length;a++){var p=r[a];if(v.isPlainObject(p)){var c=k.cleanId(p.xref,"x",!1),i=k.cleanId(p.yref,"y",!1),y=n.x.test(c),f=n.y.test(i);if(y||f){s||v.pushUnique(t._basePlotModules,l);var w=!1;y&&u.indexOf(c)===-1&&(u.push(c),w=!0),f&&o.indexOf(i)===-1&&(o.push(i),w=!0),w&&y&&f&&h.push(c+i)}}}}}},{"../../lib":515,"../../registry":647,"./axis_ids":570}],578:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../registry"),k=g("../../lib"),x=g("../plots"),e=g("../../components/drawing"),t=g("../get_data").getModuleCalcData,r=g("./axis_ids"),l=g("./constants"),n=g("../../constants/xmlns_namespaces"),d=k.ensureSingle;function u(p,c,i){return k.ensureSingle(p,c,i,function(y){y.datum(i)})}function o(p,c,i,y,f){for(var w,b,_,T=l.traceLayerClasses,L=p._fullLayout,A=L._modules,I=[],P=[],S=0;S<A.length;S++){var E=(w=A[S]).name,z=v.modules[E].categories;if(z.svg){var D=w.layerName||E+"layer",U=w.plot;_=(b=t(i,U))[0],i=b[1],_.length&&I.push({i:T.indexOf(D),className:D,plotMethod:U,cdModule:_}),z.zoomScale&&P.push("."+D)}}I.sort(function(J,W){return J.i-W.i});var H=c.plot.selectAll("g.mlayer").data(I,function(J){return J.className});if(H.enter().append("g").attr("class",function(J){return J.className}).classed("mlayer",!0).classed("rangeplot",c.isRangePlot),H.exit().remove(),H.order(),H.each(function(J){var W=m.select(this),Z=J.className;J.plotMethod(p,c,J.cdModule,W,y,f),l.clipOnAxisFalseQuery.indexOf("."+Z)===-1&&e.setClipUrl(W,c.layerClipId,p)}),L._has("scattergl")&&(w=v.getModule("scattergl"),_=t(i,w)[0],w.plot(p,c,_)),!p._context.staticPlot&&(c._hasClipOnAxisFalse&&(c.clipOnAxisFalseTraces=c.plot.selectAll(l.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),P.length)){var Y=c.plot.selectAll(P.join(",")).selectAll(".trace");c.zoomScalePts=Y.selectAll("path.point"),c.zoomScaleTxt=Y.selectAll(".textpoint")}}function h(p,c){var i=c.plotgroup,y=c.id,f=l.layerValue2layerClass[c.xaxis.layer],w=l.layerValue2layerClass[c.yaxis.layer],b=p._fullLayout._hasOnlyLargeSploms;if(c.mainplot){var _=c.mainplotinfo,T=_.plotgroup,L=y+"-x",A=y+"-y";c.minorGridlayer=_.minorGridlayer,c.gridlayer=_.gridlayer,c.zerolinelayer=_.zerolinelayer,d(_.overlinesBelow,"path",L),d(_.overlinesBelow,"path",A),d(_.overaxesBelow,"g",L),d(_.overaxesBelow,"g",A),c.plot=d(_.overplot,"g",y),d(_.overlinesAbove,"path",L),d(_.overlinesAbove,"path",A),d(_.overaxesAbove,"g",L),d(_.overaxesAbove,"g",A),c.xlines=T.select(".overlines-"+f).select("."+L),c.ylines=T.select(".overlines-"+w).select("."+A),c.xaxislayer=T.select(".overaxes-"+f).select("."+L),c.yaxislayer=T.select(".overaxes-"+w).select("."+A)}else if(b)c.xlines=d(i,"path","xlines-above"),c.ylines=d(i,"path","ylines-above"),c.xaxislayer=d(i,"g","xaxislayer-above"),c.yaxislayer=d(i,"g","yaxislayer-above");else{var I=d(i,"g","layer-subplot");c.shapelayer=d(I,"g","shapelayer"),c.imagelayer=d(I,"g","imagelayer"),c.minorGridlayer=d(i,"g","minor-gridlayer"),c.gridlayer=d(i,"g","gridlayer"),c.zerolinelayer=d(i,"g","zerolinelayer"),d(i,"path","xlines-below"),d(i,"path","ylines-below"),c.overlinesBelow=d(i,"g","overlines-below"),d(i,"g","xaxislayer-below"),d(i,"g","yaxislayer-below"),c.overaxesBelow=d(i,"g","overaxes-below"),c.plot=d(i,"g","plot"),c.overplot=d(i,"g","overplot"),c.xlines=d(i,"path","xlines-above"),c.ylines=d(i,"path","ylines-above"),c.overlinesAbove=d(i,"g","overlines-above"),d(i,"g","xaxislayer-above"),d(i,"g","yaxislayer-above"),c.overaxesAbove=d(i,"g","overaxes-above"),c.xlines=i.select(".xlines-"+f),c.ylines=i.select(".ylines-"+w),c.xaxislayer=i.select(".xaxislayer-"+f),c.yaxislayer=i.select(".yaxislayer-"+w)}b||(u(c.minorGridlayer,"g",c.xaxis._id),u(c.minorGridlayer,"g",c.yaxis._id),c.minorGridlayer.selectAll("g").map(function(P){return P[0]}).sort(r.idSort),u(c.gridlayer,"g",c.xaxis._id),u(c.gridlayer,"g",c.yaxis._id),c.gridlayer.selectAll("g").map(function(P){return P[0]}).sort(r.idSort)),c.xlines.style("fill","none").classed("crisp",!0),c.ylines.style("fill","none").classed("crisp",!0)}function s(p,c){if(p){var i={};for(var y in p.each(function(_){var T=_[0];m.select(this).remove(),a(T,c),i[T]=!0}),c._plots)for(var f=c._plots[y].overlays||[],w=0;w<f.length;w++){var b=f[w];i[b.id]&&b.plot.selectAll(".trace").remove()}}}function a(p,c){c._draggers.selectAll("g."+p).remove(),c._defs.select("#clip"+c._uid+p+"plot").remove()}X.name="cartesian",X.attr=["xaxis","yaxis"],X.idRoot=["x","y"],X.idRegex=l.idRegex,X.attrRegex=l.attrRegex,X.attributes=g("./attributes"),X.layoutAttributes=g("./layout_attributes"),X.supplyLayoutDefaults=g("./layout_defaults"),X.transitionAxes=g("./transition_axes"),X.finalizeSubplots=function(p,c){var i,y,f,w=c._subplots,b=w.xaxis,_=w.yaxis,T=w.cartesian,L=T.concat(w.gl2d||[]),A={},I={};for(i=0;i<L.length;i++){var P=L[i].split("y");A[P[0]]=1,I["y"+P[1]]=1}for(i=0;i<b.length;i++)A[y=b[i]]||(f=(p[r.id2name(y)]||{}).anchor,l.idRegex.y.test(f)||(f="y"),T.push(y+f),L.push(y+f),I[f]||(I[f]=1,k.pushUnique(_,f)));for(i=0;i<_.length;i++)I[f=_[i]]||(y=(p[r.id2name(f)]||{}).anchor,l.idRegex.x.test(y)||(y="x"),T.push(y+f),L.push(y+f),A[y]||(A[y]=1,k.pushUnique(b,y)));if(!L.length){for(var S in y="",f="",p)l.attrRegex.test(S)&&(S.charAt(0)==="x"?(!y||+S.substr(5)<+y.substr(5))&&(y=S):(!f||+S.substr(5)<+f.substr(5))&&(f=S));y=y?r.name2id(y):"x",f=f?r.name2id(f):"y",b.push(y),_.push(f),T.push(y+f)}},X.plot=function(p,c,i,y){var f,w=p._fullLayout,b=w._subplots.cartesian,_=p.calcdata;if(!Array.isArray(c))for(c=[],f=0;f<_.length;f++)c.push(f);for(f=0;f<b.length;f++){for(var T,L=b[f],A=w._plots[L],I=[],P=0;P<_.length;P++){var S=_[P],E=S[0].trace;E.xaxis+E.yaxis===L&&((c.indexOf(E.index)!==-1||E.carpet)&&(T&&T[0].trace.xaxis+T[0].trace.yaxis===L&&["tonextx","tonexty","tonext"].indexOf(E.fill)!==-1&&I.indexOf(T)===-1&&I.push(T),I.push(S)),T=S)}o(p,A,I,i,y)}},X.clean=function(p,c,i,y){var f,w,b,_=y._plots||{},T=c._plots||{},L=y._subplots||{};if(y._hasOnlyLargeSploms&&!c._hasOnlyLargeSploms)for(b in _)(f=_[b]).plotgroup&&f.plotgroup.remove();var A=y._has&&y._has("gl"),I=c._has&&c._has("gl");if(A&&!I)for(b in _)(f=_[b])._scene&&f._scene.destroy();if(L.xaxis&&L.yaxis){var P=r.listIds({_fullLayout:y});for(w=0;w<P.length;w++){var S=P[w];c[r.id2name(S)]||y._infolayer.selectAll(".g-"+S+"title").remove()}}var E=y._has&&y._has("cartesian"),z=c._has&&c._has("cartesian");if(E&&!z)s(y._cartesianlayer.selectAll(".subplot"),y),y._defs.selectAll(".axesclip").remove(),delete y._axisConstraintGroups,delete y._axisMatchGroups;else if(L.cartesian)for(w=0;w<L.cartesian.length;w++){var D=L.cartesian[w];if(!T[D]){var U="."+D+",."+D+"-x,."+D+"-y";y._cartesianlayer.selectAll(U).remove(),a(D,y)}}},X.drawFramework=function(p){var c=p._fullLayout,i=function(f){var w,b,_,T,L,A,I=f._fullLayout,P=I._subplots.cartesian,S=P.length,E=[],z=[];for(w=0;w<S;w++){_=P[w],T=I._plots[_],L=T.xaxis,A=T.yaxis;var D=L._mainAxis,U=A._mainAxis,H=D._id+U._id,Y=I._plots[H];T.overlays=[],H!==_&&Y?(T.mainplot=H,T.mainplotinfo=Y,z.push(_)):(T.mainplot=void 0,T.mainplotinfo=void 0,E.push(_))}for(w=0;w<z.length;w++)_=z[w],(T=I._plots[_]).mainplotinfo.overlays.push(T);var J=E.concat(z),W=new Array(S);for(w=0;w<S;w++){_=J[w],T=I._plots[_],L=T.xaxis,A=T.yaxis;var Z=[_,L.layer,A.layer,L.overlaying||"",A.overlaying||""];for(b=0;b<T.overlays.length;b++)Z.push(T.overlays[b].id);W[w]=Z}return W}(p),y=c._cartesianlayer.selectAll(".subplot").data(i,String);y.enter().append("g").attr("class",function(f){return"subplot "+f[0]}),y.order(),y.exit().call(s,c),y.each(function(f){var w=f[0],b=c._plots[w];b.plotgroup=m.select(this),h(p,b),b.draglayer=d(c._draggers,"g",w)})},X.rangePlot=function(p,c,i){h(p,c),o(p,c,i),x.style(p)},X.toSVG=function(p){var c=p._fullLayout._glimages,i=m.select(p).selectAll(".svg-container");i.filter(function(y,f){return f===i.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var y=this.toDataURL("image/png");c.append("svg:image").attr({xmlns:n.svg,"xlink:href":y,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})})},X.updateFx=g("./graph_interact").updateFx},{"../../components/drawing":389,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../registry":647,"../get_data":602,"../plots":628,"./attributes":564,"./axis_ids":570,"./constants":573,"./graph_interact":576,"./layout_attributes":579,"./layout_defaults":580,"./transition_axes":590,"@plotly/d3":58}],579:[function(g,Q,X){var m=g("../font_attributes"),v=g("../../components/color/attributes"),k=g("../../components/drawing/attributes").dash,x=g("../../lib/extend").extendFlat,e=g("../../plot_api/plot_template").templatedArray,t=g("../../plots/cartesian/axis_format_attributes").descriptionWithDates,r=g("../../constants/numerical").ONEDAY,l=g("./constants"),n=l.HOUR_PATTERN,d=l.WEEKDAY_PATTERN,u={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}};function o(T){return{valType:"integer",min:0,dflt:T?5:0,editType:"ticks"}}var h={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},s={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},a={valType:"data_array",editType:"ticks"},p={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function c(T){var L={valType:"number",min:0,editType:"ticks"};return T||(L.dflt=5),L}function i(T){var L={valType:"number",min:0,editType:"ticks"};return T||(L.dflt=1),L}var y={valType:"color",dflt:v.defaultLine,editType:"ticks"},f={valType:"color",dflt:v.lightLine,editType:"ticks"};function w(T){var L={valType:"number",min:0,editType:"ticks"};return T||(L.dflt=1),L}var b=x({},k,{editType:"ticks"}),_={valType:"boolean",editType:"ticks"};Q.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:v.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:m({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"calc"},rangebreaks:e("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[d,n,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:r},editType:"calc"}),tickmode:u,nticks:o(),tick0:h,dtick:s,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:a,ticktext:{valType:"data_array",editType:"ticks"},ticks:p,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:c(),tickwidth:i(),tickcolor:y,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:x({},k,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:m({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:t("tick label")},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:t("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:v.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:_,gridcolor:f,gridwidth:w(),griddash:b,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:v.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:v.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},minor:{tickmode:u,nticks:o("minor"),tick0:h,dtick:s,tickvals:a,ticks:p,ticklen:c("minor"),tickwidth:i("minor"),tickcolor:y,gridcolor:f,gridwidth:w("minor"),griddash:b,showgrid:_,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:m({editType:"ticks"})}}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../constants/numerical":491,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../font_attributes":594,"./constants":573}],580:[function(g,Q,X){var m=g("../../lib"),v=g("../../components/color"),k=g("../../components/fx/helpers").isUnifiedHover,x=g("../../components/fx/hovermode_defaults"),e=g("../../plot_api/plot_template"),t=g("../layout_attributes"),r=g("./layout_attributes"),l=g("./type_defaults"),n=g("./axis_defaults"),d=g("./constraints"),u=g("./position_defaults"),o=g("./axis_ids"),h=o.id2name,s=o.name2id,a=g("./constants").AX_ID_PATTERN,p=g("../../registry"),c=p.traceIs,i=p.getComponentMethod;function y(f,w,b){Array.isArray(f[w])?f[w].push(b):f[w]=[b]}Q.exports=function(f,w,b){var _,T,L=w.autotypenumbers,A={},I={},P={},S={},E={},z={},D={},U={},H={},Y={};for(_=0;_<b.length;_++){var J=b[_];if(c(J,"cartesian")||c(J,"gl2d")){var W,Z;if(J.xaxis)W=h(J.xaxis),y(A,W,J);else if(J.xaxes)for(T=0;T<J.xaxes.length;T++)y(A,h(J.xaxes[T]),J);if(J.yaxis)Z=h(J.yaxis),y(A,Z,J);else if(J.yaxes)for(T=0;T<J.yaxes.length;T++)y(A,h(J.yaxes[T]),J);J.type==="funnel"?J.orientation==="h"?(W&&(I[W]=!0),Z&&(D[Z]=!0)):Z&&(P[Z]=!0):J.type==="image"?(Z&&(U[Z]=!0),W&&(U[W]=!0)):(Z&&(E[Z]=!0,z[Z]=!0),c(J,"carpet")&&(J.type!=="carpet"||J._cheater)||W&&(S[W]=!0)),J.type==="carpet"&&J._cheater&&W&&(I[W]=!0),c(J,"2dMap")&&(H[W]=!0,H[Z]=!0),c(J,"oriented")&&(Y[J.orientation==="h"?Z:W]=!0)}}var re=w._subplots,V=re.xaxis,B=re.yaxis,j=m.simpleMap(V,h),ee=m.simpleMap(B,h),N=j.concat(ee),$=v.background;V.length&&B.length&&($=m.coerce(f,w,t,"plot_bgcolor"));var K,te,ie,le,se,ve=v.combine($,w.paper_bgcolor);function fe(){var Ke=A[K]||[];se._traceIndices=Ke.map(function(mt){return mt._expandedIndex}),se._annIndices=[],se._shapeIndices=[],se._selectionIndices=[],se._imgIndices=[],se._subplotsWith=[],se._counterAxes=[],se._name=se._attr=K,se._id=te}function ye(Ke,mt){return m.coerce(le,se,r,Ke,mt)}function Ae(Ke,mt){return m.coerce2(le,se,r,Ke,mt)}function pe(Ke){return Ke==="x"?B:V}function ge(Ke,mt){for(var Ft=Ke==="x"?j:ee,Vt=[],Xt=0;Xt<Ft.length;Xt++){var Gt=Ft[Xt];Gt===mt||(f[Gt]||{}).overlaying||Vt.push(s(Gt))}return Vt}var we={x:pe("x"),y:pe("y")},oe=we.x.concat(we.y),de={},Te=[];function Ee(){var Ke=le.matches;a.test(Ke)&&oe.indexOf(Ke)===-1&&(de[Ke]=le.type,Te=Object.keys(de))}var Me=x(f,w),De=k(Me);for(_=0;_<N.length;_++){K=N[_],te=s(K),ie=K.charAt(0),m.isPlainObject(f[K])||(f[K]={}),le=f[K],se=e.newContainer(w,K,ie+"axis"),fe();var Ie=ie==="x"&&!S[K]&&I[K]||ie==="y"&&!E[K]&&P[K],Oe=ie==="y"&&(!z[K]&&D[K]||U[K]),Ze={hasMinor:!0,letter:ie,font:w.font,outerTicks:H[K],showGrid:!Y[K],data:A[K]||[],bgColor:ve,calendar:w.calendar,automargin:!0,visibleDflt:Ie,reverseDflt:Oe,autotypenumbersDflt:L,splomStash:((w._splomAxes||{})[ie]||{})[te]};ye("uirevision",w.uirevision),l(le,se,ye,Ze),n(le,se,ye,Ze,w);var Fe=De&&ie===Me.charAt(0),Pe=Ae("spikecolor",De?se.color:void 0),ze=Ae("spikethickness",De?1.5:void 0),Ge=Ae("spikedash",De?"dot":void 0),$e=Ae("spikemode",De?"across":void 0),ot=Ae("spikesnap");ye("showspikes",!!(Fe||Pe||ze||Ge||$e||ot))||(delete se.spikecolor,delete se.spikethickness,delete se.spikedash,delete se.spikemode,delete se.spikesnap),u(le,se,ye,{letter:ie,counterAxes:we[ie],overlayableAxes:ge(ie,K),grid:w.grid}),ye("title.standoff"),Ee(),se._input=le}for(_=0;_<Te.length;){te=Te[_++],ie=(K=h(te)).charAt(0),m.isPlainObject(f[K])||(f[K]={}),le=f[K],se=e.newContainer(w,K,ie+"axis"),fe();var vt={letter:ie,font:w.font,outerTicks:H[K],showGrid:!Y[K],data:[],bgColor:ve,calendar:w.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:L,splomStash:((w._splomAxes||{})[ie]||{})[te]};ye("uirevision",w.uirevision),se.type=de[te]||"linear",n(le,se,ye,vt,w),u(le,se,ye,{letter:ie,counterAxes:we[ie],overlayableAxes:ge(ie,K),grid:w.grid}),ye("fixedrange"),Ee(),se._input=le}var bt=i("rangeslider","handleDefaults"),yt=i("rangeselector","handleDefaults");for(_=0;_<j.length;_++)K=j[_],le=f[K],se=w[K],bt(f,w,K),se.type==="date"&&yt(le,se,w,ee,se.calendar),ye("fixedrange");for(_=0;_<ee.length;_++){K=ee[_],le=f[K],se=w[K];var tt=w[h(se.anchor)];ye("fixedrange",i("rangeslider","isVisible")(tt))}d.handleDefaults(f,w,{axIds:oe.concat(Te).sort(o.idSort),axHasImage:U})}},{"../../components/color":367,"../../components/fx/helpers":403,"../../components/fx/hovermode_defaults":406,"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"../layout_attributes":619,"./axis_defaults":568,"./axis_ids":570,"./constants":573,"./constraints":574,"./layout_attributes":579,"./position_defaults":582,"./type_defaults":591}],581:[function(g,Q,X){var m=g("tinycolor2").mix,v=g("../../components/color/attributes"),k=g("../../lib");Q.exports=function(x,e,t,r){var l=(r=r||{}).dfltColor;function n(f,w){return k.coerce2(x,e,r.attributes,f,w)}var d=n("linecolor",l),u=n("linewidth");t("showline",r.showLine||!!d||!!u)||(delete e.linecolor,delete e.linewidth);var o=n("gridcolor",m(l,r.bgColor,r.blend||v.lightFraction).toRgbString()),h=n("gridwidth"),s=n("griddash");if(t("showgrid",r.showGrid||!!o||!!h||!!s)||(delete e.gridcolor,delete e.gridwidth,delete e.griddash),r.hasMinor){var a=n("minor.gridcolor",m(e.gridcolor,r.bgColor,67).toRgbString()),p=n("minor.gridwidth",e.gridwidth||1),c=n("minor.griddash",e.griddash||"solid");t("minor.showgrid",!!a||!!p||!!c)||(delete e.minor.gridcolor,delete e.minor.gridwidth,delete e.minor.griddash)}if(!r.noZeroLine){var i=n("zerolinecolor",l),y=n("zerolinewidth");t("zeroline",r.showGrid||!!i||!!y)||(delete e.zerolinecolor,delete e.zerolinewidth)}}},{"../../components/color/attributes":366,"../../lib":515,tinycolor2:313}],582:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../../lib");Q.exports=function(k,x,e,t){var r,l,n,d,u=t.counterAxes||[],o=t.overlayableAxes||[],h=t.letter,s=t.grid;s&&(l=s._domains[h][s._axisMap[x._id]],r=s._anchors[x._id],l&&(n=s[h+"side"].split(" ")[0],d=s.domain[h][n==="right"||n==="top"?1:0])),l=l||[0,1],r=r||(m(k.position)?"free":u[0]||"free"),n=n||(h==="x"?"bottom":"left"),d=d||0,v.coerce(k,x,{anchor:{valType:"enumerated",values:["free"].concat(u),dflt:r}},"anchor")==="free"&&e("position",d),v.coerce(k,x,{side:{valType:"enumerated",values:h==="x"?["bottom","top"]:["left","right"],dflt:n}},"side");var a=!1;if(o.length&&(a=v.coerce(k,x,{overlaying:{valType:"enumerated",values:[!1].concat(o),dflt:!1}},"overlaying")),!a){var p=e("domain",l);p[0]>p[1]-1/4096&&(x.domain=l),v.noneOrAll(k.domain,x.domain,l)}return e("layer"),x}},{"../../lib":515,"fast-isnumeric":190}],583:[function(g,Q,X){var m=g("./show_dflt");Q.exports=function(v,k,x,e,t){t||(t={});var r=t.tickSuffixDflt,l=m(v);x("tickprefix")&&x("showtickprefix",l),x("ticksuffix",r)&&x("showticksuffix",l)}},{"./show_dflt":586}],584:[function(g,Q,X){var m=g("../../constants/alignment").FROM_BL;Q.exports=function(v,k,x){x===void 0&&(x=m[v.constraintoward||"center"]);var e=[v.r2l(v.range[0]),v.r2l(v.range[1])],t=e[0]+(e[1]-e[0])*x;v.range=v._input.range=[v.l2r(t+(e[0]-t)*k),v.l2r(t+(e[1]-t)*k)],v.setScale()}},{"../../constants/alignment":483}],585:[function(g,Q,X){var m=g("@plotly/d3"),v=g("d3-time-format").utcFormat,k=g("../../lib"),x=k.numberFormat,e=g("fast-isnumeric"),t=k.cleanNumber,r=k.ms2DateTime,l=k.dateTime2ms,n=k.ensureNumber,d=k.isArrayOrTypedArray,u=g("../../constants/numerical"),o=u.FP_SAFE,h=u.BADNUM,s=u.LOG_CLIP,a=u.ONEWEEK,p=u.ONEDAY,c=u.ONEHOUR,i=u.ONEMIN,y=u.ONESEC,f=g("./axis_ids"),w=g("./constants"),b=w.HOUR_PATTERN,_=w.WEEKDAY_PATTERN;function T(A){return Math.pow(10,A)}function L(A){return A!=null}Q.exports=function(A,I){I=I||{};var P=A._id||"x",S=P.charAt(0);function E(N,$){if(N>0)return Math.log(N)/Math.LN10;if(N<=0&&$&&A.range&&A.range.length===2){var K=A.range[0],te=A.range[1];return .5*(K+te-2*s*Math.abs(K-te))}return h}function z(N,$,K,te){if((te||{}).msUTC&&e(N))return+N;var ie=l(N,K||A.calendar);if(ie===h){if(!e(N))return h;N=+N;var le=Math.floor(10*k.mod(N+.05,1)),se=Math.round(N-le/10);ie=l(new Date(se))+le/10}return ie}function D(N,$,K){return r(N,$,K||A.calendar)}function U(N){return A._categories[Math.round(N)]}function H(N){if(L(N)){if(A._categoriesMap===void 0&&(A._categoriesMap={}),A._categoriesMap[N]!==void 0)return A._categoriesMap[N];A._categories.push(typeof N=="number"?String(N):N);var $=A._categories.length-1;return A._categoriesMap[N]=$,$}return h}function Y(N){if(A._categoriesMap)return A._categoriesMap[N]}function J(N){var $=Y(N);return $!==void 0?$:e(N)?+N:void 0}function W(N){return e(N)?+N:Y(N)}function Z(N,$,K){return m.round(K+$*N,2)}function re(N,$,K){return(N-K)/$}var V=function(N){return e(N)?Z(N,A._m,A._b):h},B=function(N){return re(N,A._m,A._b)};if(A.rangebreaks){var j=S==="y";V=function(N){if(!e(N))return h;var $=A._rangebreaks.length;if(!$)return Z(N,A._m,A._b);var K=j;A.range[0]>A.range[1]&&(K=!K);for(var te=K?-1:1,ie=te*N,le=0,se=0;se<$;se++){var ve=te*A._rangebreaks[se].min,fe=te*A._rangebreaks[se].max;if(ie<ve)break;if(!(ie>fe)){le=ie<(ve+fe)/2?se:se+1;break}le=se+1}var ye=A._B[le]||0;return isFinite(ye)?Z(N,A._m2,ye):0},B=function(N){var $=A._rangebreaks.length;if(!$)return re(N,A._m,A._b);for(var K=0,te=0;te<$&&!(N<A._rangebreaks[te].pmin);te++)N>A._rangebreaks[te].pmax&&(K=te+1);return re(N,A._m2,A._B[K])}}A.c2l=A.type==="log"?E:n,A.l2c=A.type==="log"?T:n,A.l2p=V,A.p2l=B,A.c2p=A.type==="log"?function(N,$){return V(E(N,$))}:V,A.p2c=A.type==="log"?function(N){return T(B(N))}:B,["linear","-"].indexOf(A.type)!==-1?(A.d2r=A.r2d=A.d2c=A.r2c=A.d2l=A.r2l=t,A.c2d=A.c2r=A.l2d=A.l2r=n,A.d2p=A.r2p=function(N){return A.l2p(t(N))},A.p2d=A.p2r=B,A.cleanPos=n):A.type==="log"?(A.d2r=A.d2l=function(N,$){return E(t(N),$)},A.r2d=A.r2c=function(N){return T(t(N))},A.d2c=A.r2l=t,A.c2d=A.l2r=n,A.c2r=E,A.l2d=T,A.d2p=function(N,$){return A.l2p(A.d2r(N,$))},A.p2d=function(N){return T(B(N))},A.r2p=function(N){return A.l2p(t(N))},A.p2r=B,A.cleanPos=n):A.type==="date"?(A.d2r=A.r2d=k.identity,A.d2c=A.r2c=A.d2l=A.r2l=z,A.c2d=A.c2r=A.l2d=A.l2r=D,A.d2p=A.r2p=function(N,$,K){return A.l2p(z(N,0,K))},A.p2d=A.p2r=function(N,$,K){return D(B(N),$,K)},A.cleanPos=function(N){return k.cleanDate(N,h,A.calendar)}):A.type==="category"?(A.d2c=A.d2l=H,A.r2d=A.c2d=A.l2d=U,A.d2r=A.d2l_noadd=J,A.r2c=function(N){var $=W(N);return $!==void 0?$:A.fraction2r(.5)},A.l2r=A.c2r=n,A.r2l=W,A.d2p=function(N){return A.l2p(A.r2c(N))},A.p2d=function(N){return U(B(N))},A.r2p=A.d2p,A.p2r=B,A.cleanPos=function(N){return typeof N=="string"&&N!==""?N:n(N)}):A.type==="multicategory"&&(A.r2d=A.c2d=A.l2d=U,A.d2r=A.d2l_noadd=J,A.r2c=function(N){var $=J(N);return $!==void 0?$:A.fraction2r(.5)},A.r2c_just_indices=Y,A.l2r=A.c2r=n,A.r2l=J,A.d2p=function(N){return A.l2p(A.r2c(N))},A.p2d=function(N){return U(B(N))},A.r2p=A.d2p,A.p2r=B,A.cleanPos=function(N){return Array.isArray(N)||typeof N=="string"&&N!==""?N:n(N)},A.setupMultiCategory=function(N){var $,K,te=A._traceIndices,ie=A._matchGroup;if(ie&&A._categories.length===0){for(var le in ie)if(le!==P){var se=I[f.id2name(le)];te=te.concat(se._traceIndices)}}var ve=[[0,{}],[0,{}]],fe=[];for($=0;$<te.length;$++){var ye=N[te[$]];if(S in ye){var Ae=ye[S],pe=ye._length||k.minRowLength(Ae);if(d(Ae[0])&&d(Ae[1]))for(K=0;K<pe;K++){var ge=Ae[0][K],we=Ae[1][K];L(ge)&&L(we)&&(fe.push([ge,we]),ge in ve[0][1]||(ve[0][1][ge]=ve[0][0]++),we in ve[1][1]||(ve[1][1][we]=ve[1][0]++))}}}for(fe.sort(function(oe,de){var Te=ve[0][1],Ee=Te[oe[0]]-Te[de[0]];if(Ee)return Ee;var Me=ve[1][1];return Me[oe[1]]-Me[de[1]]}),$=0;$<fe.length;$++)H(fe[$])}),A.fraction2r=function(N){var $=A.r2l(A.range[0]),K=A.r2l(A.range[1]);return A.l2r($+N*(K-$))},A.r2fraction=function(N){var $=A.r2l(A.range[0]),K=A.r2l(A.range[1]);return(A.r2l(N)-$)/(K-$)},A.cleanRange=function(N,$){$||($={}),N||(N="range");var K,te,ie=k.nestedProperty(A,N).get();if(te=(te=A.type==="date"?k.dfltRange(A.calendar):S==="y"?w.DFLTRANGEY:A._name==="realaxis"?[0,1]:$.dfltRange||w.DFLTRANGEX).slice(),A.rangemode!=="tozero"&&A.rangemode!=="nonnegative"||(te[0]=0),ie&&ie.length===2)for(A.type!=="date"||A.autorange||(ie[0]=k.cleanDate(ie[0],h,A.calendar),ie[1]=k.cleanDate(ie[1],h,A.calendar)),K=0;K<2;K++)if(A.type==="date"){if(!k.isDateTime(ie[K],A.calendar)){A[N]=te;break}if(A.r2l(ie[0])===A.r2l(ie[1])){var le=k.constrain(A.r2l(ie[0]),k.MIN_MS+1e3,k.MAX_MS-1e3);ie[0]=A.l2r(le-1e3),ie[1]=A.l2r(le+1e3);break}}else{if(!e(ie[K])){if(!e(ie[1-K])){A[N]=te;break}ie[K]=ie[1-K]*(K?10:.1)}if(ie[K]<-o?ie[K]=-o:ie[K]>o&&(ie[K]=o),ie[0]===ie[1]){var se=Math.max(1,Math.abs(1e-6*ie[0]));ie[0]-=se,ie[1]+=se}}else k.nestedProperty(A,N).set(te)},A.setScale=function(N){var $=I._size;if(A.overlaying){var K=f.getFromId({_fullLayout:I},A.overlaying);A.domain=K.domain}var te=N&&A._r?"_r":"range",ie=A.calendar;A.cleanRange(te);var le,se,ve=A.r2l(A[te][0],ie),fe=A.r2l(A[te][1],ie),ye=S==="y";if(ye?(A._offset=$.t+(1-A.domain[1])*$.h,A._length=$.h*(A.domain[1]-A.domain[0]),A._m=A._length/(ve-fe),A._b=-A._m*fe):(A._offset=$.l+A.domain[0]*$.w,A._length=$.w*(A.domain[1]-A.domain[0]),A._m=A._length/(fe-ve),A._b=-A._m*ve),A._rangebreaks=[],A._lBreaks=0,A._m2=0,A._B=[],A.rangebreaks&&(A._rangebreaks=A.locateBreaks(Math.min(ve,fe),Math.max(ve,fe)),A._rangebreaks.length)){for(le=0;le<A._rangebreaks.length;le++)se=A._rangebreaks[le],A._lBreaks+=Math.abs(se.max-se.min);var Ae=ye;ve>fe&&(Ae=!Ae),Ae&&A._rangebreaks.reverse();var pe=Ae?-1:1;for(A._m2=pe*A._length/(Math.abs(fe-ve)-A._lBreaks),A._B.push(-A._m2*(ye?fe:ve)),le=0;le<A._rangebreaks.length;le++)se=A._rangebreaks[le],A._B.push(A._B[A._B.length-1]-pe*A._m2*(se.max-se.min));for(le=0;le<A._rangebreaks.length;le++)(se=A._rangebreaks[le]).pmin=V(se.min),se.pmax=V(se.max)}if(!isFinite(A._m)||!isFinite(A._b)||A._length<0)throw I._replotting=!1,new Error("Something went wrong with axis scaling")},A.maskBreaks=function(N){var $,K,te,ie,le,se=A.rangebreaks||[];se._cachedPatterns||(se._cachedPatterns=se.map(function(ge){return ge.enabled&&ge.bounds?k.simpleMap(ge.bounds,ge.pattern?t:A.d2c):null})),se._cachedValues||(se._cachedValues=se.map(function(ge){return ge.enabled&&ge.values?k.simpleMap(ge.values,A.d2c).sort(k.sorterAsc):null}));for(var ve=0;ve<se.length;ve++){var fe=se[ve];if(fe.enabled){if(fe.bounds){var ye=fe.pattern;switch(K=($=se._cachedPatterns[ve])[0],te=$[1],ye){case _:ie=(le=new Date(N)).getUTCDay(),K>te&&(te+=7,ie<K&&(ie+=7));break;case b:ie=(le=new Date(N)).getUTCHours()+(le.getUTCMinutes()/60+le.getUTCSeconds()/3600+le.getUTCMilliseconds()/36e5),K>te&&(te+=24,ie<K&&(ie+=24));break;case"":ie=N}if(ie>=K&&ie<te)return h}else for(var Ae=se._cachedValues[ve],pe=0;pe<Ae.length;pe++)if(te=(K=Ae[pe])+fe.dvalue,N>=K&&N<te)return h}}return N},A.locateBreaks=function(N,$){var K,te,ie,le,se=[];if(!A.rangebreaks)return se;var ve=A.rangebreaks.slice().sort(function(Me,De){return Me.pattern===_&&De.pattern===b?-1:De.pattern===_&&Me.pattern===b?1:0}),fe=function(Me,De){if((Me=k.constrain(Me,N,$))!==(De=k.constrain(De,N,$))){for(var Ie=!0,Oe=0;Oe<se.length;Oe++){var Ze=se[Oe];Me<Ze.max&&De>=Ze.min&&(Me<Ze.min&&(Ze.min=Me),De>Ze.max&&(Ze.max=De),Ie=!1)}Ie&&se.push({min:Me,max:De})}};for(K=0;K<ve.length;K++){var ye=ve[K];if(ye.enabled)if(ye.bounds){var Ae=N,pe=$;ye.pattern&&(Ae=Math.floor(Ae)),ie=(te=k.simpleMap(ye.bounds,ye.pattern?t:A.r2l))[0],le=te[1];var ge,we,oe=new Date(Ae);switch(ye.pattern){case _:we=a,ge=(le-ie+(le<ie?7:0))*p,Ae+=ie*p-(oe.getUTCDay()*p+oe.getUTCHours()*c+oe.getUTCMinutes()*i+oe.getUTCSeconds()*y+oe.getUTCMilliseconds());break;case b:we=p,ge=(le-ie+(le<ie?24:0))*c,Ae+=ie*c-(oe.getUTCHours()*c+oe.getUTCMinutes()*i+oe.getUTCSeconds()*y+oe.getUTCMilliseconds());break;default:Ae=Math.min(te[0],te[1]),ge=we=(pe=Math.max(te[0],te[1]))-Ae}for(var de=Ae;de<pe;de+=we)fe(de,de+ge)}else for(var Te=k.simpleMap(ye.values,A.d2c),Ee=0;Ee<Te.length;Ee++)fe(ie=Te[Ee],le=ie+ye.dvalue)}return se.sort(function(Me,De){return Me.min-De.min}),se},A.makeCalcdata=function(N,$,K){var te,ie,le,se,ve=A.type,fe=ve==="date"&&N[$+"calendar"];if($ in N){if(te=N[$],se=N._length||k.minRowLength(te),k.isTypedArray(te)&&(ve==="linear"||ve==="log")){if(se===te.length)return te;if(te.subarray)return te.subarray(0,se)}if(ve==="multicategory")return function(pe,ge){for(var we=new Array(ge),oe=0;oe<ge;oe++){var de=(pe[0]||[])[oe],Te=(pe[1]||[])[oe];we[oe]=Y([de,Te])}return we}(te,se);for(ie=new Array(se),le=0;le<se;le++)ie[le]=A.d2c(te[le],0,fe,K)}else{var ye=$+"0"in N?A.d2c(N[$+"0"],0,fe):0,Ae=N["d"+$]?Number(N["d"+$]):1;for(te=N[{x:"y",y:"x"}[$]],se=N._length||te.length,ie=new Array(se),le=0;le<se;le++)ie[le]=ye+le*Ae}if(A.rangebreaks)for(le=0;le<se;le++)ie[le]=A.maskBreaks(ie[le]);return ie},A.isValidRange=function(N){return Array.isArray(N)&&N.length===2&&e(A.r2l(N[0]))&&e(A.r2l(N[1]))},A.isPtWithinRange=function(N,$){var K=A.c2l(N[S],null,$),te=A.r2l(A.range[0]),ie=A.r2l(A.range[1]);return te<ie?te<=K&&K<=ie:ie<=K&&K<=te},A._emptyCategories=function(){A._categories=[],A._categoriesMap={}},A.clearCalc=function(){var N=A._matchGroup;if(N){var $=null,K=null;for(var te in N){var ie=I[f.id2name(te)];if(ie._categories){$=ie._categories,K=ie._categoriesMap;break}}$&&K?(A._categories=$,A._categoriesMap=K):A._emptyCategories()}else A._emptyCategories();if(A._initialCategories)for(var le=0;le<A._initialCategories.length;le++)H(A._initialCategories[le])},A.sortByInitialCategories=function(){var N=[];if(A._emptyCategories(),A._initialCategories)for(var $=0;$<A._initialCategories.length;$++)H(A._initialCategories[$]);N=N.concat(A._traceIndices);var K=A._matchGroup;for(var te in K)if(P!==te){var ie=I[f.id2name(te)];ie._categories=A._categories,ie._categoriesMap=A._categoriesMap,N=N.concat(ie._traceIndices)}return N};var ee=I._d3locale;A.type==="date"&&(A._dateFormat=ee?ee.timeFormat:v,A._extraFormat=I._extraFormat),A._separators=I.separators,A._numFormat=ee?ee.numberFormat:x,delete A._minDtick,delete A._forceTick0}},{"../../constants/numerical":491,"../../lib":515,"./axis_ids":570,"./constants":573,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],586:[function(g,Q,X){Q.exports=function(m){var v=["showexponent","showtickprefix","showticksuffix"].filter(function(k){return m[k]!==void 0});if(v.every(function(k){return m[k]===m[v[0]]})||v.length===1)return m[v[0]]}},{}],587:[function(g,Q,X){var m=g("../../lib"),v=g("../../components/color").contrast,k=g("./layout_attributes"),x=g("./show_dflt"),e=g("../array_container_defaults");function t(r,l){function n(d,u){return m.coerce(r,l,k.tickformatstops,d,u)}n("enabled")&&(n("dtickrange"),n("value"))}Q.exports=function(r,l,n,d,u){u||(u={});var o=x(r);if(n("showticklabels")){var h=u.font||{},s=l.color,a=(l.ticklabelposition||"").indexOf("inside")!==-1?v(u.bgColor):s&&s!==k.color.dflt?s:h.color;if(m.coerceFont(n,"tickfont",{family:h.family,size:h.size,color:a}),u.noTicklabelstep||d==="multicategory"||d==="log"||n("ticklabelstep"),u.noAng||n("tickangle"),d!=="category"){var p=n("tickformat");e(r,l,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:t}),l.tickformatstops.length||delete l.tickformatstops,u.noExp||p||d==="date"||(n("showexponent",o),n("exponentformat"),n("minexponent"),n("separatethousands"))}}}},{"../../components/color":367,"../../lib":515,"../array_container_defaults":561,"./layout_attributes":579,"./show_dflt":586}],588:[function(g,Q,X){var m=g("../../lib"),v=g("./layout_attributes");Q.exports=function(k,x,e,t){var r=t.isMinor,l=r?k.minor||{}:k,n=r?x.minor:x,d=r?v.minor:v,u=r?"minor.":"",o=m.coerce2(l,n,d,"ticklen",r?.6*(x.ticklen||5):void 0),h=m.coerce2(l,n,d,"tickwidth",r?x.tickwidth||1:void 0),s=m.coerce2(l,n,d,"tickcolor",(r?x.tickcolor:void 0)||n.color);e(u+"ticks",!r&&t.outerTicks||o||h||s?"outside":"")||(delete n.ticklen,delete n.tickwidth,delete n.tickcolor)}},{"../../lib":515,"./layout_attributes":579}],589:[function(g,Q,X){var m=g("./clean_ticks"),v=g("../../lib").isArrayOrTypedArray;Q.exports=function(k,x,e,t,r){r||(r={});var l=r.isMinor,n=l?k.minor||{}:k,d=l?x.minor:x,u=l?"minor.":"";function o(i){var y=n[i];return y!==void 0?y:(d._template||{})[i]}var h=o("tick0"),s=o("dtick"),a=o("tickvals"),p=e(u+"tickmode",v(a)?"array":s?"linear":"auto");if(p==="auto")e(u+"nticks");else if(p==="linear"){var c=d.dtick=m.dtick(s,t);d.tick0=m.tick0(h,t,x.calendar,c)}else t!=="multicategory"&&(e(u+"tickvals")===void 0?d.tickmode="auto":l||e("ticktext"))}},{"../../lib":515,"./clean_ticks":572}],590:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../registry"),k=g("../../lib"),x=g("../../components/drawing"),e=g("./axes");Q.exports=function(t,r,l,n){var d=t._fullLayout;if(r.length!==0){var u,o,h,s;n&&(u=n());var a=m.ease(l.easing);return t._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(s),s=null,function(){for(var i={},y=0;y<r.length;y++){var f=r[y],w=f.plotinfo.xaxis,b=f.plotinfo.yaxis;f.xr0&&(i[w._name+".range"]=f.xr0.slice()),f.yr0&&(i[b._name+".range"]=f.yr0.slice())}return v.call("relayout",t,i).then(function(){for(var _=0;_<r.length;_++)p(r[_].plotinfo)})}()}),o=Date.now(),s=window.requestAnimationFrame(function i(){h=Date.now();for(var y=Math.min(1,(h-o)/l.duration),f=a(y),w=0;w<r.length;w++)c(r[w],f);h-o>l.duration?(function(){for(var b={},_=0;_<r.length;_++){var T=r[_],L=T.plotinfo.xaxis,A=T.plotinfo.yaxis;T.xr1&&(b[L._name+".range"]=T.xr1.slice()),T.yr1&&(b[A._name+".range"]=T.yr1.slice())}u&&u(),v.call("relayout",t,b).then(function(){for(var I=0;I<r.length;I++)p(r[I].plotinfo)})}(),s=window.cancelAnimationFrame(i)):s=window.requestAnimationFrame(i)}),Promise.resolve()}function p(i){var y=i.xaxis,f=i.yaxis;d._defs.select("#"+i.clipId+"> rect").call(x.setTranslate,0,0).call(x.setScale,1,1),i.plot.call(x.setTranslate,y._offset,f._offset).call(x.setScale,1,1);var w=i.plot.selectAll(".scatterlayer .trace");w.selectAll(".point").call(x.setPointGroupScale,1,1),w.selectAll(".textpoint").call(x.setTextPointsScale,1,1),w.call(x.hideOutsideRangePoints,i)}function c(i,y){var f=i.plotinfo,w=f.xaxis,b=f.yaxis,_=w._length,T=b._length,L=!!i.xr1,A=!!i.yr1,I=[];if(L){var P=k.simpleMap(i.xr0,w.r2l),S=k.simpleMap(i.xr1,w.r2l),E=P[1]-P[0],z=S[1]-S[0];I[0]=(P[0]*(1-y)+y*S[0]-P[0])/(P[1]-P[0])*_,I[2]=_*(1-y+y*z/E),w.range[0]=w.l2r(P[0]*(1-y)+y*S[0]),w.range[1]=w.l2r(P[1]*(1-y)+y*S[1])}else I[0]=0,I[2]=_;if(A){var D=k.simpleMap(i.yr0,b.r2l),U=k.simpleMap(i.yr1,b.r2l),H=D[1]-D[0],Y=U[1]-U[0];I[1]=(D[1]*(1-y)+y*U[1]-D[1])/(D[0]-D[1])*T,I[3]=T*(1-y+y*Y/H),b.range[0]=w.l2r(D[0]*(1-y)+y*U[0]),b.range[1]=b.l2r(D[1]*(1-y)+y*U[1])}else I[1]=0,I[3]=T;e.drawOne(t,w,{skipTitle:!0}),e.drawOne(t,b,{skipTitle:!0}),e.redrawComponents(t,[w._id,b._id]);var J=L?_/I[2]:1,W=A?T/I[3]:1,Z=L?I[0]:0,re=A?I[1]:0,V=L?I[0]/I[2]*_:0,B=A?I[1]/I[3]*T:0,j=w._offset-V,ee=b._offset-B;f.clipRect.call(x.setTranslate,Z,re).call(x.setScale,1/J,1/W),f.plot.call(x.setTranslate,j,ee).call(x.setScale,J,W),x.setPointGroupScale(f.zoomScalePts,1/J,1/W),x.setTextPointsScale(f.zoomScaleTxt,1/J,1/W)}e.redrawComponents(t)}},{"../../components/drawing":389,"../../lib":515,"../../registry":647,"./axes":566,"@plotly/d3":58}],591:[function(g,Q,X){var m=g("../../registry").traceIs,v=g("./axis_autotype");function k(e){return{v:"x",h:"y"}[e.orientation||"v"]}function x(e,t){var r=k(e),l=m(e,"box-violin"),n=m(e._fullInput||{},"candlestick");return l&&!n&&t===r&&e[r]===void 0&&e[r+"0"]===void 0}Q.exports=function(e,t,r,l){r("autotypenumbers",l.autotypenumbersDflt),r("type",(l.splomStash||{}).type)==="-"&&(function(n,d){if(n.type==="-"){var u,o=n._id,h=o.charAt(0);o.indexOf("scene")!==-1&&(o=h);var s=function(b,_,T){for(var L=0;L<b.length;L++){var A=b[L];if(A.type==="splom"&&A._length>0&&(A["_"+T+"axes"]||{})[_]||(A[T+"axis"]||T)===_&&(x(A,T)||(A[T]||[]).length||A[T+"0"]))return A}}(d,o,h);if(!!s){if(s.type==="histogram"&&h==={v:"y",h:"x"}[s.orientation||"v"])return void(n.type="linear");var a=h+"calendar",p=s[a],c={noMultiCategory:!m(s,"cartesian")||m(s,"noMultiCategory")};if(s.type==="box"&&s._hasPreCompStats&&h==={h:"x",v:"y"}[s.orientation||"v"]&&(c.noMultiCategory=!0),c.autotypenumbers=n.autotypenumbers,x(s,h)){var i=k(s),y=[];for(u=0;u<d.length;u++){var f=d[u];m(f,"box-violin")&&(f[h+"axis"]||h)===o&&(f[i]!==void 0?y.push(f[i][0]):f.name!==void 0?y.push(f.name):y.push("text"),f[a]!==p&&(p=void 0))}n.type=v(y,p,c)}else if(s.type==="splom"){var w=s.dimensions[s._axesDim[o]];w.visible&&(n.type=v(w.values,p,c))}else n.type=v(s[h]||[s[h+"0"]],p,c)}}}(t,l.data),t.type==="-"?t.type="linear":e.type=t.type)}},{"../../registry":647,"./axis_autotype":567}],592:[function(g,Q,X){var m=g("../registry"),v=g("../lib");function k(r,l,n){var d,u,o,h=!1;if(l.type==="data")d=r._fullData[l.traces!==null?l.traces[0]:0];else{if(l.type!=="layout")return!1;d=r._fullLayout}return u=v.nestedProperty(d,l.prop).get(),(o=n[l.type]=n[l.type]||{}).hasOwnProperty(l.prop)&&o[l.prop]!==u&&(h=!0),o[l.prop]=u,{changed:h,value:u}}function x(r,l){var n=[],d=l[0],u={};if(typeof d=="string")u[d]=l[1];else{if(!v.isPlainObject(d))return n;u=d}return t(u,function(o,h,s){n.push({type:"layout",prop:o,value:s})},"",0),n}function e(r,l){var n,d,u,o,h=[];if(d=l[0],u=l[1],n=l[2],o={},typeof d=="string")o[d]=u;else{if(!v.isPlainObject(d))return h;o=d,n===void 0&&(n=u)}return n===void 0&&(n=null),t(o,function(s,a,p){var c,i;if(Array.isArray(p)){i=p.slice();var y=Math.min(i.length,r.data.length);n&&(y=Math.min(y,n.length)),c=[];for(var f=0;f<y;f++)c[f]=n?n[f]:f}else i=p,c=n?n.slice():null;if(c===null)Array.isArray(i)&&(i=i[0]);else if(Array.isArray(c)){if(!Array.isArray(i)){var w=i;i=[];for(var b=0;b<c.length;b++)i[b]=w}i.length=Math.min(c.length,i.length)}h.push({type:"data",prop:s,traces:c,value:i})},"",0),h}function t(r,l,n,d){Object.keys(r).forEach(function(u){var o=r[u];if(u[0]!=="_"){var h=n+(d>0?".":"")+u;v.isPlainObject(o)?t(o,l,h,d+1):l(h,u,o)}})}X.manageCommandObserver=function(r,l,n,d){var u={},o=!0;l&&l._commandObserver&&(u=l._commandObserver),u.cache||(u.cache={}),u.lookupTable={};var h=X.hasSimpleAPICommandBindings(r,n,u.lookupTable);if(l&&l._commandObserver){if(h)return u;if(l._commandObserver.remove)return l._commandObserver.remove(),l._commandObserver=null,u}if(h){k(r,h,u.cache),u.check=function(){if(o){var p=k(r,h,u.cache);return p.changed&&d&&u.lookupTable[p.value]!==void 0&&(u.disable(),Promise.resolve(d({value:p.value,type:h.type,prop:h.prop,traces:h.traces,index:u.lookupTable[p.value]})).then(u.enable,u.enable)),p.changed}};for(var s=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],a=0;a<s.length;a++)r._internalOn(s[a],u.check);u.remove=function(){for(var p=0;p<s.length;p++)r._removeInternalListener(s[p],u.check)}}else v.log("Unable to automatically bind plot updates to API command"),u.lookupTable={},u.remove=function(){};return u.disable=function(){o=!1},u.enable=function(){o=!0},l&&(l._commandObserver=u),u},X.hasSimpleAPICommandBindings=function(r,l,n){var d,u,o=l.length;for(d=0;d<o;d++){var h,s=l[d],a=s.method,p=s.args;if(Array.isArray(p)||(p=[]),!a)return!1;var c=X.computeAPICommandBindings(r,a,p);if(c.length!==1)return!1;if(u){if((h=c[0]).type!==u.type||h.prop!==u.prop)return!1;if(Array.isArray(u.traces)){if(!Array.isArray(h.traces))return!1;h.traces.sort();for(var i=0;i<u.traces.length;i++)if(u.traces[i]!==h.traces[i])return!1}else if(h.prop!==u.prop)return!1}else u=c[0],Array.isArray(u.traces)&&u.traces.sort();var y=(h=c[0]).value;if(Array.isArray(y)){if(y.length!==1)return!1;y=y[0]}n&&(n[y]=d)}return u},X.executeAPICommand=function(r,l,n){if(l==="skip")return Promise.resolve();var d=m.apiMethodRegistry[l],u=[r];Array.isArray(n)||(n=[]);for(var o=0;o<n.length;o++)u.push(n[o]);return d.apply(null,u).catch(function(h){return v.warn("API call to Plotly."+l+" rejected.",h),Promise.reject(h)})},X.computeAPICommandBindings=function(r,l,n){var d;switch(Array.isArray(n)||(n=[]),l){case"restyle":d=e(r,n);break;case"relayout":d=x(r,n);break;case"update":d=e(r,[n[0],n[2]]).concat(x(r,[n[1]]));break;case"animate":d=function(u,o){return Array.isArray(o[0])&&o[0].length===1&&["string","number"].indexOf(typeof o[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:o[0][0].toString()}]:[]}(0,n);break;default:d=[]}return d}},{"../lib":515,"../registry":647}],593:[function(g,Q,X){var m=g("../lib/extend").extendFlat;X.attributes=function(v,k){k=k||{};var x={valType:"info_array",editType:(v=v||{}).editType,items:[{valType:"number",min:0,max:1,editType:v.editType},{valType:"number",min:0,max:1,editType:v.editType}],dflt:[0,1]},e=(v.name&&v.name,v.trace,k.description&&k.description,{x:m({},x,{}),y:m({},x,{}),editType:v.editType});return v.noGridCell||(e.row={valType:"integer",min:0,dflt:0,editType:v.editType},e.column={valType:"integer",min:0,dflt:0,editType:v.editType}),e},X.defaults=function(v,k,x,e){var t=e&&e.x||[0,1],r=e&&e.y||[0,1],l=k.grid;if(l){var n=x("domain.column");n!==void 0&&(n<l.columns?t=l._domains.x[n]:delete v.domain.column);var d=x("domain.row");d!==void 0&&(d<l.rows?r=l._domains.y[d]:delete v.domain.row)}var u=x("domain.x",t),o=x("domain.y",r);u[0]<u[1]||(v.domain.x=t.slice()),o[0]<o[1]||(v.domain.y=r.slice())}},{"../lib/extend":505}],594:[function(g,Q,X){Q.exports=function(m){var v=m.editType,k=m.colorEditType;k===void 0&&(k=v);var x={family:{valType:"string",noBlank:!0,strict:!0,editType:v},size:{valType:"number",min:1,editType:v},color:{valType:"color",editType:k},editType:v};return m.autoSize&&(x.size.dflt="auto"),m.autoColor&&(x.color.dflt="auto"),m.arrayOk&&(x.family.arrayOk=!0,x.size.arrayOk=!0,x.color.arrayOk=!0),x}},{}],595:[function(g,Q,X){Q.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],596:[function(g,Q,X){X.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},X.axesNames=["lonaxis","lataxis"],X.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},X.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},X.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},X.clipPad=.001,X.precision=.1,X.landColor="#F0DC82",X.waterColor="#3399FF",X.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},X.sphereSVG={type:"Sphere"},X.fillLayers={ocean:1,land:1,lakes:1},X.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},X.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],X.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],X.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],597:[function(g,Q,X){var m=g("@plotly/d3"),v=g("d3-geo"),k=v.geoPath,x=v.geoDistance,e=g("d3-geo-projection"),t=g("../../registry"),r=g("../../lib"),l=r.strTranslate,n=g("../../components/color"),d=g("../../components/drawing"),u=g("../../components/fx"),o=g("../plots"),h=g("../cartesian/axes"),s=g("../cartesian/autorange").getAutoRange,a=g("../../components/dragelement"),p=g("../../components/selections").prepSelect,c=g("../../components/selections").clearOutline,i=g("../../components/selections").selectOnClick,y=g("./zoom"),f=g("./constants"),w=g("../../lib/geo_location_utils"),b=g("../../lib/topojson_utils"),_=g("topojson-client").feature;function T(I){this.id=I.id,this.graphDiv=I.graphDiv,this.container=I.container,this.topojsonURL=I.topojsonURL,this.isStatic=I.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var L=T.prototype;function A(I,P){var S=f.clipPad,E=I[0]+S,z=I[1]-S,D=P[0]+S,U=P[1]-S;E>0&&z<0&&(z+=360);var H=(z-E)/4;return{type:"Polygon",coordinates:[[[E,D],[E,U],[E+H,U],[E+2*H,U],[E+3*H,U],[z,U],[z,D],[z-H,D],[z-2*H,D],[z-3*H,D],[E,D]]]}}Q.exports=function(I){return new T(I)},L.plot=function(I,P,S,E){var z=this;if(E)return z.update(I,P,!0);z._geoCalcData=I,z._fullLayout=P;var D=P[this.id],U=[],H=!1;for(var Y in f.layerNameToAdjective)if(Y!=="frame"&&D["show"+Y]){H=!0;break}for(var J=!1,W=0;W<I.length;W++){var Z=I[0][0].trace;Z._geo=z,Z.locationmode&&(H=!0);var re=Z.marker;if(re){var V=re.angle,B=re.angleref;(V||B==="north"||B==="previous")&&(J=!0)}}if(this._hasMarkerAngles=J,H){var j=b.getTopojsonName(D);z.topojson!==null&&j===z.topojsonName||(z.topojsonName=j,PlotlyGeoAssets.topojson[z.topojsonName]===void 0&&U.push(z.fetchTopojson()))}U=U.concat(w.fetchTraceGeoData(I)),S.push(new Promise(function(ee,N){Promise.all(U).then(function(){z.topojson=PlotlyGeoAssets.topojson[z.topojsonName],z.update(I,P),ee()}).catch(N)}))},L.fetchTopojson=function(){var I=this,P=b.getTopojsonPath(I.topojsonURL,I.topojsonName);return new Promise(function(S,E){m.json(P,function(z,D){if(z)return z.status===404?E(new Error(["plotly.js could not find topojson file at",P+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):E(new Error(["unexpected error while fetching topojson file at",P].join(" ")));PlotlyGeoAssets.topojson[I.topojsonName]=D,S()})})},L.update=function(I,P,S){var E=P[this.id];this.hasChoropleth=!1;for(var z=0;z<I.length;z++){var D=I[z],U=D[0].trace;U.type==="choropleth"&&(this.hasChoropleth=!0),U.visible===!0&&U._length>0&&U._module.calcGeoJSON(D,P)}if(!S){if(this.updateProjection(I,P))return;this.viewInitial&&this.scope===E.scope||this.saveViewInitial(E)}this.scope=E.scope,this.updateBaseLayers(P,E),this.updateDims(P,E),this.updateFx(P,E),o.generalUpdatePerTraceModule(this.graphDiv,this,I,E);var H=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=H.selectAll(".point"),this.dataPoints.text=H.selectAll("text"),this.dataPaths.line=H.selectAll(".js-line");var Y=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=Y.selectAll("path"),this._render()},L.updateProjection=function(I,P){var S=this.graphDiv,E=P[this.id],z=P._size,D=E.domain,U=E.projection,H=E.lonaxis,Y=E.lataxis,J=H._ax,W=Y._ax,Z=this.projection=function(oe){var de=oe.projection,Te=de.type,Ee=f.projNames[Te];Ee="geo"+r.titleCase(Ee);for(var Me=(v[Ee]||e[Ee])(),De=oe._isSatellite?180*Math.acos(1/de.distance)/Math.PI:oe._isClipped?f.lonaxisSpan[Te]/2:null,Ie=["center","rotate","parallels","clipExtent"],Oe=function(Pe){return Pe?Me:[]},Ze=0;Ze<Ie.length;Ze++){var Fe=Ie[Ze];typeof Me[Fe]!="function"&&(Me[Fe]=Oe)}return Me.isLonLatOverEdges=function(Pe){if(Me(Pe)===null)return!0;if(De){var ze=Me.rotate();return x(Pe,[-ze[0],-ze[1]])>De*Math.PI/180}return!1},Me.getPath=function(){return k().projection(Me)},Me.getBounds=function(Pe){return Me.getPath().bounds(Pe)},Me.precision(f.precision),oe._isSatellite&&Me.tilt(de.tilt).distance(de.distance),De&&Me.clipAngle(De-f.clipPad),Me}(E),re=[[z.l+z.w*D.x[0],z.t+z.h*(1-D.y[1])],[z.l+z.w*D.x[1],z.t+z.h*(1-D.y[0])]],V=E.center||{},B=U.rotation||{},j=H.range||[],ee=Y.range||[];if(E.fitbounds){J._length=re[1][0]-re[0][0],W._length=re[1][1]-re[0][1],J.range=s(S,J),W.range=s(S,W);var N=(J.range[0]+J.range[1])/2,$=(W.range[0]+W.range[1])/2;if(E._isScoped)V={lon:N,lat:$};else if(E._isClipped){V={lon:N,lat:$},B={lon:N,lat:$,roll:B.roll};var K=U.type,te=f.lonaxisSpan[K]/2||180,ie=f.lataxisSpan[K]/2||90;j=[N-te,N+te],ee=[$-ie,$+ie]}else V={lon:N,lat:$},B={lon:N,lat:B.lat,roll:B.roll}}Z.center([V.lon-B.lon,V.lat-B.lat]).rotate([-B.lon,-B.lat,B.roll]).parallels(U.parallels);var le=A(j,ee);Z.fitExtent(re,le);var se=this.bounds=Z.getBounds(le),ve=this.fitScale=Z.scale(),fe=Z.translate();if(E.fitbounds){var ye=Z.getBounds(A(J.range,W.range)),Ae=Math.min((se[1][0]-se[0][0])/(ye[1][0]-ye[0][0]),(se[1][1]-se[0][1])/(ye[1][1]-ye[0][1]));isFinite(Ae)?Z.scale(Ae*ve):r.warn("Something went wrong during"+this.id+"fitbounds computations.")}else Z.scale(U.scale*ve);var pe=this.midPt=[(se[0][0]+se[1][0])/2,(se[0][1]+se[1][1])/2];if(Z.translate([fe[0]+(pe[0]-fe[0]),fe[1]+(pe[1]-fe[1])]).clipExtent(se),E._isAlbersUsa){var ge=Z([V.lon,V.lat]),we=Z.translate();Z.translate([we[0]-(ge[0]-we[0]),we[1]-(ge[1]-we[1])])}},L.updateBaseLayers=function(I,P){var S=this,E=S.topojson,z=S.layers,D=S.basePaths;function U(Z){return Z==="lonaxis"||Z==="lataxis"}function H(Z){return Boolean(f.lineLayers[Z])}function Y(Z){return Boolean(f.fillLayers[Z])}var J=(this.hasChoropleth?f.layersForChoropleth:f.layers).filter(function(Z){return H(Z)||Y(Z)?P["show"+Z]:!U(Z)||P[Z].showgrid}),W=S.framework.selectAll(".layer").data(J,String);W.exit().each(function(Z){delete z[Z],delete D[Z],m.select(this).remove()}),W.enter().append("g").attr("class",function(Z){return"layer "+Z}).each(function(Z){var re=z[Z]=m.select(this);Z==="bg"?S.bgRect=re.append("rect").style("pointer-events","all"):U(Z)?D[Z]=re.append("path").style("fill","none"):Z==="backplot"?re.append("g").classed("choroplethlayer",!0):Z==="frontplot"?re.append("g").classed("scatterlayer",!0):H(Z)?D[Z]=re.append("path").style("fill","none").style("stroke-miterlimit",2):Y(Z)&&(D[Z]=re.append("path").style("stroke","none"))}),W.order(),W.each(function(Z){var re=D[Z],V=f.layerNameToAdjective[Z];Z==="frame"?re.datum(f.sphereSVG):H(Z)||Y(Z)?re.datum(_(E,E.objects[Z])):U(Z)&&re.datum(function(B,j,ee){var N,$,K,te=j[B],ie=f.scopeDefaults[j.scope];B==="lonaxis"?(N=ie.lonaxisRange,$=ie.lataxisRange,K=function(we,oe){return[we,oe]}):B==="lataxis"&&(N=ie.lataxisRange,$=ie.lonaxisRange,K=function(we,oe){return[oe,we]});var le={type:"linear",range:[N[0],N[1]-1e-6],tick0:te.tick0,dtick:te.dtick};h.setConvert(le,ee);var se=h.calcTicks(le);j.isScoped||B!=="lonaxis"||se.pop();for(var ve=se.length,fe=new Array(ve),ye=0;ye<ve;ye++)for(var Ae=se[ye].x,pe=fe[ye]=[],ge=$[0];ge<$[1]+2.5;ge+=2.5)pe.push(K(Ae,ge));return{type:"MultiLineString",coordinates:fe}}(Z,P,I)).call(n.stroke,P[Z].gridcolor).call(d.dashLine,P[Z].griddash,P[Z].gridwidth),H(Z)?re.call(n.stroke,P[V+"color"]).call(d.dashLine,"",P[V+"width"]):Y(Z)&&re.call(n.fill,P[V+"color"])})},L.updateDims=function(I,P){var S=this.bounds,E=(P.framewidth||0)/2,z=S[0][0]-E,D=S[0][1]-E,U=S[1][0]-z+E,H=S[1][1]-D+E;d.setRect(this.clipRect,z,D,U,H),this.bgRect.call(d.setRect,z,D,U,H).call(n.fill,P.bgcolor),this.xaxis._offset=z,this.xaxis._length=U,this.yaxis._offset=D,this.yaxis._length=H},L.updateFx=function(I,P){var S=this,E=S.graphDiv,z=S.bgRect,D=I.dragmode,U=I.clickmode;if(!S.isStatic){var H={element:S.bgRect.node(),gd:E,plotinfo:{id:S.id,xaxis:S.xaxis,yaxis:S.yaxis,fillRangeItems:function(J,W){W.isRect?(J.range={})[S.id]=[Y([W.xmin,W.ymin]),Y([W.xmax,W.ymax])]:(J.lassoPoints={})[S.id]=W.map(Y)}},xaxes:[S.xaxis],yaxes:[S.yaxis],subplot:S.id,clickFn:function(J){J===2&&c(E)}};D==="pan"?(z.node().onmousedown=null,z.call(y(S,P)),z.on("dblclick.zoom",function(){var J=S.viewInitial,W={};for(var Z in J)W[S.id+"."+Z]=J[Z];t.call("_guiRelayout",E,W),E.emit("plotly_doubleclick",null)}),E._context._scrollZoom.geo||z.on("wheel.zoom",null)):D!=="select"&&D!=="lasso"||(z.on(".zoom",null),H.prepFn=function(J,W,Z){p(J,W,Z,H,D)},a.init(H)),z.on("mousemove",function(){var J=S.projection.invert(r.getPositionFromD3Event());if(!J)return a.unhover(E,m.event);S.xaxis.p2c=function(){return J[0]},S.yaxis.p2c=function(){return J[1]},u.hover(E,m.event,S.id)}),z.on("mouseout",function(){E._dragging||a.unhover(E,m.event)}),z.on("click",function(){D!=="select"&&D!=="lasso"&&(U.indexOf("select")>-1&&i(m.event,E,[S.xaxis],[S.yaxis],S.id,H),U.indexOf("event")>-1&&u.click(E,m.event))})}function Y(J){return S.projection.invert([J[0]+S.xaxis._offset,J[1]+S.yaxis._offset])}},L.makeFramework=function(){var I=this,P=I.graphDiv,S=P._fullLayout,E="clip"+S._uid+I.id;I.clipDef=S._clips.append("clipPath").attr("id",E),I.clipRect=I.clipDef.append("rect"),I.framework=m.select(I.container).append("g").attr("class","geo "+I.id).call(d.setClipUrl,E,P),I.project=function(z){var D=I.projection(z);return D?[D[0]-I.xaxis._offset,D[1]-I.yaxis._offset]:[null,null]},I.xaxis={_id:"x",c2p:function(z){return I.project(z)[0]}},I.yaxis={_id:"y",c2p:function(z){return I.project(z)[1]}},I.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},h.setConvert(I.mockAxis,S)},L.saveViewInitial=function(I){var P,S=I.center||{},E=I.projection,z=E.rotation||{};this.viewInitial={fitbounds:I.fitbounds,"projection.scale":E.scale},P=I._isScoped?{"center.lon":S.lon,"center.lat":S.lat}:I._isClipped?{"projection.rotation.lon":z.lon,"projection.rotation.lat":z.lat}:{"center.lon":S.lon,"center.lat":S.lat,"projection.rotation.lon":z.lon},r.extendFlat(this.viewInitial,P)},L.render=function(I){this._hasMarkerAngles&&I?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},L._render=function(){var I,P=this.projection,S=P.getPath();function E(D){var U=P(D.lonlat);return U?l(U[0],U[1]):null}function z(D){return P.isLonLatOverEdges(D.lonlat)?"none":null}for(I in this.basePaths)this.basePaths[I].attr("d",S);for(I in this.dataPaths)this.dataPaths[I].attr("d",function(D){return S(D.geojson)});for(I in this.dataPoints)this.dataPoints[I].attr("display",z).attr("transform",E)}},{"../../components/color":367,"../../components/dragelement":386,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/topojson_utils":544,"../../registry":647,"../cartesian/autorange":565,"../cartesian/axes":566,"../plots":628,"./constants":596,"./zoom":601,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":316}],598:[function(g,Q,X){var m=g("../../plots/get_data").getSubplotCalcData,v=g("../../lib").counterRegex,k=g("./geo"),x="geo",e=v(x),t={};t.geo={valType:"subplotid",dflt:x,editType:"calc"},Q.exports={attr:x,name:x,idRoot:x,idRegex:e,attrRegex:e,attributes:t,layoutAttributes:g("./layout_attributes"),supplyLayoutDefaults:g("./layout_defaults"),plot:function(r){for(var l=r._fullLayout,n=r.calcdata,d=l._subplots.geo,u=0;u<d.length;u++){var o=d[u],h=m(n,x,o),s=l[o]._subplot;s||(s=k({id:o,graphDiv:r,container:l._geolayer.node(),topojsonURL:r._context.topojsonURL,staticPlot:r._context.staticPlot}),l[o]._subplot=s),s.plot(h,l,r._promises)}},updateFx:function(r){for(var l=r._fullLayout,n=l._subplots.geo,d=0;d<n.length;d++){var u=l[n[d]];u._subplot.updateFx(l,u)}},clean:function(r,l,n,d){for(var u=d._subplots.geo||[],o=0;o<u.length;o++){var h=u[o],s=d[h]._subplot;!l[h]&&s&&(s.framework.remove(),s.clipDef.remove())}}}},{"../../lib":515,"../../plots/get_data":602,"./geo":597,"./layout_attributes":599,"./layout_defaults":600}],599:[function(g,Q,X){var m=g("../../components/color/attributes"),v=g("../domain").attributes,k=g("../../components/drawing/attributes").dash,x=g("./constants"),e=g("../../plot_api/edit_types").overrideAll,t=g("../../lib/sort_object_keys"),r={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:m.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:k};(Q.exports=e({domain:v({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:t(x.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:t(x.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:m.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:x.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:x.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:x.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:x.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:m.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:m.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:m.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:m.background},lonaxis:r,lataxis:r},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../domain":593,"./constants":596}],600:[function(g,Q,X){var m=g("../../lib"),v=g("../subplot_defaults"),k=g("../get_data").getSubplotData,x=g("./constants"),e=g("./layout_attributes"),t=x.axesNames;function r(l,n,d,u){var o=k(u.fullData,"geo",u.id).map(function(B){return B._expandedIndex}),h=d("resolution"),s=d("scope"),a=x.scopeDefaults[s],p=d("projection.type",a.projType),c=n._isAlbersUsa=p==="albers usa";c&&(s=n.scope="usa");var i=n._isScoped=s!=="world",y=n._isSatellite=p==="satellite",f=n._isConic=p.indexOf("conic")!==-1||p==="albers",w=n._isClipped=!!x.lonaxisSpan[p];if(l.visible===!1){var b=m.extendDeep({},n._template);b.showcoastlines=!1,b.showcountries=!1,b.showframe=!1,b.showlakes=!1,b.showland=!1,b.showocean=!1,b.showrivers=!1,b.showsubunits=!1,b.lonaxis&&(b.lonaxis.showgrid=!1),b.lataxis&&(b.lataxis.showgrid=!1),n._template=b}for(var _=d("visible"),T=0;T<t.length;T++){var L,A=t[T],I=[30,10][T];if(i)L=a[A+"Range"];else{var P=x[A+"Span"],S=(P[p]||P["*"])/2,E=d("projection.rotation."+A.substr(0,3),a.projRotate[T]);L=[E-S,E+S]}var z=d(A+".range",L);d(A+".tick0"),d(A+".dtick",I),d(A+".showgrid",!!_&&void 0)&&(d(A+".gridcolor"),d(A+".gridwidth"),d(A+".griddash")),n[A]._ax={type:"linear",_id:A.slice(0,3),_traceIndices:o,setScale:m.identity,c2l:m.identity,r2l:m.identity,autorange:!0,range:z.slice(),_m:1,_input:{}}}var D=n.lonaxis.range,U=n.lataxis.range,H=D[0],Y=D[1];H>0&&Y<0&&(Y+=360);var J,W,Z,re=(H+Y)/2;if(!c){var V=i?a.projRotate:[re,0,0];J=d("projection.rotation.lon",V[0]),d("projection.rotation.lat",V[1]),d("projection.rotation.roll",V[2]),d("showcoastlines",!i&&_)&&(d("coastlinecolor"),d("coastlinewidth")),d("showocean",!!_&&void 0)&&d("oceancolor")}c?(W=-96.6,Z=38.7):(W=i?re:J,Z=(U[0]+U[1])/2),d("center.lon",W),d("center.lat",Z),y&&(d("projection.tilt"),d("projection.distance")),f&&d("projection.parallels",a.projParallels||[0,60]),d("projection.scale"),d("showland",!!_&&void 0)&&d("landcolor"),d("showlakes",!!_&&void 0)&&d("lakecolor"),d("showrivers",!!_&&void 0)&&(d("rivercolor"),d("riverwidth")),d("showcountries",i&&s!=="usa"&&_)&&(d("countrycolor"),d("countrywidth")),(s==="usa"||s==="north america"&&h===50)&&(d("showsubunits",_),d("subunitcolor"),d("subunitwidth")),i||d("showframe",_)&&(d("framecolor"),d("framewidth")),d("bgcolor"),d("fitbounds")&&(delete n.projection.scale,i?(delete n.center.lon,delete n.center.lat):w?(delete n.center.lon,delete n.center.lat,delete n.projection.rotation.lon,delete n.projection.rotation.lat,delete n.lonaxis.range,delete n.lataxis.range):(delete n.center.lon,delete n.center.lat,delete n.projection.rotation.lon))}Q.exports=function(l,n,d){v(l,n,d,{type:"geo",attributes:e,handleDefaults:r,fullData:d,partition:"y"})}},{"../../lib":515,"../get_data":602,"../subplot_defaults":641,"./constants":596,"./layout_attributes":599}],601:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../lib"),k=g("../../registry"),x=Math.PI/180,e=180/Math.PI,t={cursor:"pointer"},r={cursor:"auto"};function l(_,T){return m.behavior.zoom().translate(T.translate()).scale(T.scale())}function n(_,T,L){var A=_.id,I=_.graphDiv,P=I.layout,S=P[A],E=I._fullLayout,z=E[A],D={},U={};function H(Y,J){D[A+"."+Y]=v.nestedProperty(S,Y).get(),k.call("_storeDirectGUIEdit",P,E._preGUI,D);var W=v.nestedProperty(z,Y);W.get()!==J&&(W.set(J),v.nestedProperty(S,Y).set(J),U[A+"."+Y]=J)}L(H),H("projection.scale",T.scale()/_.fitScale),H("fitbounds",!1),I.emit("plotly_relayout",U)}function d(_,T){var L=l(0,T);function A(I){var P=T.invert(_.midPt);I("center.lon",P[0]),I("center.lat",P[1])}return L.on("zoomstart",function(){m.select(this).style(t)}).on("zoom",function(){T.scale(m.event.scale).translate(m.event.translate),_.render(!0);var I=T.invert(_.midPt);_.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":T.scale()/_.fitScale,"geo.center.lon":I[0],"geo.center.lat":I[1]})}).on("zoomend",function(){m.select(this).style(r),n(_,T,A)}),L}function u(_,T){var L,A,I,P,S,E,z,D,U,H=l(0,T);function Y(W){return T.invert(W)}function J(W){var Z=T.rotate(),re=T.invert(_.midPt);W("projection.rotation.lon",-Z[0]),W("center.lon",re[0]),W("center.lat",re[1])}return H.on("zoomstart",function(){m.select(this).style(t),L=m.mouse(this),A=T.rotate(),I=T.translate(),P=A,S=Y(L)}).on("zoom",function(){if(E=m.mouse(this),function(re){var V=Y(re);if(!V)return!0;var B=T(V);return Math.abs(B[0]-re[0])>2||Math.abs(B[1]-re[1])>2}(L))return H.scale(T.scale()),void H.translate(T.translate());T.scale(m.event.scale),T.translate([I[0],m.event.translate[1]]),S?Y(E)&&(D=Y(E),z=[P[0]+(D[0]-S[0]),A[1],A[2]],T.rotate(z),P=z):S=Y(L=E),U=!0,_.render(!0);var W=T.rotate(),Z=T.invert(_.midPt);_.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":T.scale()/_.fitScale,"geo.center.lon":Z[0],"geo.center.lat":Z[1],"geo.projection.rotation.lon":-W[0]})}).on("zoomend",function(){m.select(this).style(r),U&&n(_,T,J)}),H}function o(_,T){var L;T.rotate(),T.scale();var A=l(0,T),I=function(H){for(var Y=0,J=arguments.length,W=[];++Y<J;)W.push(arguments[Y]);var Z=m.dispatch.apply(null,W);return Z.of=function(re,V){return function(B){var j;try{j=B.sourceEvent=m.event,B.target=H,m.event=B,Z[B.type].apply(re,V)}finally{m.event=j}}},Z}(A,"zoomstart","zoom","zoomend"),P=0,S=A.on;function E(H){P++||H({type:"zoomstart"})}function z(H){H({type:"zoom"})}function D(H){--P||H({type:"zoomend"})}function U(H){var Y=T.rotate();H("projection.rotation.lon",-Y[0]),H("projection.rotation.lat",-Y[1])}return A.on("zoomstart",function(){m.select(this).style(t);var H=m.mouse(this),Y=T.rotate(),J=Y,W=T.translate(),Z=s(Y);L=h(T,H),S.call(A,"zoom",function(){var re=m.mouse(this);if(T.scale(m.event.scale),L){if(h(T,re)){T.rotate(Y).translate(W);var V=h(T,re),B=p(L,V),j=w(a(Z,B)),ee=c(j,L,J);isFinite(ee[0])&&isFinite(ee[1])&&isFinite(ee[2])||(ee=J),T.rotate(ee),J=ee}}else L=h(T,H=re);z(I.of(this,arguments))}),E(I.of(this,arguments))}).on("zoomend",function(){m.select(this).style(r),S.call(A,"zoom",null),D(I.of(this,arguments)),n(_,T,U)}).on("zoom.redraw",function(){_.render(!0);var H=T.rotate();_.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":T.scale()/_.fitScale,"geo.projection.rotation.lon":-H[0],"geo.projection.rotation.lat":-H[1]})}),m.rebind(A,I,"on")}function h(_,T){var L=_.invert(T);return L&&isFinite(L[0])&&isFinite(L[1])&&function(A){var I=A[0]*x,P=A[1]*x,S=Math.cos(P);return[S*Math.cos(I),S*Math.sin(I),Math.sin(P)]}(L)}function s(_){var T=.5*_[0]*x,L=.5*_[1]*x,A=.5*_[2]*x,I=Math.sin(T),P=Math.cos(T),S=Math.sin(L),E=Math.cos(L),z=Math.sin(A),D=Math.cos(A);return[P*E*D+I*S*z,I*E*D-P*S*z,P*S*D+I*E*z,P*E*z-I*S*D]}function a(_,T){var L=_[0],A=_[1],I=_[2],P=_[3],S=T[0],E=T[1],z=T[2],D=T[3];return[L*S-A*E-I*z-P*D,L*E+A*S+I*D-P*z,L*z-A*D+I*S+P*E,L*D+A*z-I*E+P*S]}function p(_,T){if(_&&T){var L=function(S,E){return[S[1]*E[2]-S[2]*E[1],S[2]*E[0]-S[0]*E[2],S[0]*E[1]-S[1]*E[0]]}(_,T),A=Math.sqrt(b(L,L)),I=.5*Math.acos(Math.max(-1,Math.min(1,b(_,T)))),P=Math.sin(I)/A;return A&&[Math.cos(I),L[2]*P,-L[1]*P,L[0]*P]}}function c(_,T,L){var A=f(T,2,_[0]);A=f(A,1,_[1]),A=f(A,0,_[2]-L[2]);var I,P,S=T[0],E=T[1],z=T[2],D=A[0],U=A[1],H=A[2],Y=Math.atan2(E,S)*e,J=Math.sqrt(S*S+E*E);Math.abs(U)>J?(P=(U>0?90:-90)-Y,I=0):(P=Math.asin(U/J)*e-Y,I=Math.sqrt(J*J-U*U));var W=180-P-2*Y,Z=(Math.atan2(H,D)-Math.atan2(z,I))*e,re=(Math.atan2(H,D)-Math.atan2(z,-I))*e;return i(L[0],L[1],P,Z)<=i(L[0],L[1],W,re)?[P,Z,L[2]]:[W,re,L[2]]}function i(_,T,L,A){var I=y(L-_),P=y(A-T);return Math.sqrt(I*I+P*P)}function y(_){return(_%360+540)%360-180}function f(_,T,L){var A=L*x,I=_.slice(),P=T===0?1:0,S=T===2?1:2,E=Math.cos(A),z=Math.sin(A);return I[P]=_[P]*E-_[S]*z,I[S]=_[S]*E+_[P]*z,I}function w(_){return[Math.atan2(2*(_[0]*_[1]+_[2]*_[3]),1-2*(_[1]*_[1]+_[2]*_[2]))*e,Math.asin(Math.max(-1,Math.min(1,2*(_[0]*_[2]-_[3]*_[1]))))*e,Math.atan2(2*(_[0]*_[3]+_[1]*_[2]),1-2*(_[2]*_[2]+_[3]*_[3]))*e]}function b(_,T){for(var L=0,A=0,I=_.length;A<I;++A)L+=_[A]*T[A];return L}Q.exports=function(_,T){var L=_.projection;return(T._isScoped?d:T._isClipped?o:u)(_,L)}},{"../../lib":515,"../../registry":647,"@plotly/d3":58}],602:[function(g,Q,X){var m=g("../registry"),v=g("./cartesian/constants").SUBPLOT_PATTERN;X.getSubplotCalcData=function(k,x,e){var t=m.subplotsRegistry[x];if(!t)return[];for(var r=t.attr,l=[],n=0;n<k.length;n++){var d=k[n];d[0].trace[r]===e&&l.push(d)}return l},X.getModuleCalcData=function(k,x){var e,t=[],r=[];if(!(e=typeof x=="string"?m.getModule(x).plot:typeof x=="function"?x:x.plot))return[t,k];for(var l=0;l<k.length;l++){var n=k[l],d=n[0].trace;d.visible===!0&&d._length!==0&&(d._module.plot===e?t.push(n):r.push(n))}return[t,r]},X.getSubplotData=function(k,x,e){if(!m.subplotsRegistry[x])return[];var t,r,l,n=m.subplotsRegistry[x].attr,d=[];if(x==="gl2d"){var u=e.match(v);r="x"+u[1],l="y"+u[2]}for(var o=0;o<k.length;o++)t=k[o],x==="gl2d"&&m.traceIs(t,"gl2d")?t[n[0]]===r&&t[n[1]]===l&&d.push(t):t[n]===e&&d.push(t);return d}},{"../registry":647,"./cartesian/constants":573}],603:[function(g,Q,X){var m=g("mouse-change"),v=g("mouse-wheel"),k=g("mouse-event-offset"),x=g("../cartesian/constants"),e=g("has-passive-events");function t(r,l){this.element=r,this.plot=l,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}Q.exports=function(r){var l=r.mouseContainer,n=r.glplot,d=new t(l,n);function u(){r.xaxis.autorange=!1,r.yaxis.autorange=!1}function o(h,s,a){var p,c,i=r.calcDataBox(),y=n.viewBox,f=d.lastPos[0],w=d.lastPos[1],b=x.MINDRAG*n.pixelRatio,_=x.MINZOOM*n.pixelRatio;function T(E,z,D){var U=Math.min(z,D),H=Math.max(z,D);U!==H?(i[E]=U,i[E+2]=H,d.dataBox=i,r.setRanges(i)):(r.selectBox.selectBox=[0,0,1,1],r.glplot.setDirty())}switch(s*=n.pixelRatio,a*=n.pixelRatio,a=y[3]-y[1]-a,r.fullLayout.dragmode){case"zoom":if(h){var L=s/(y[2]-y[0])*(i[2]-i[0])+i[0],A=a/(y[3]-y[1])*(i[3]-i[1])+i[1];d.boxInited||(d.boxStart[0]=L,d.boxStart[1]=A,d.dragStart[0]=s,d.dragStart[1]=a),d.boxEnd[0]=L,d.boxEnd[1]=A,d.boxInited=!0,d.boxEnabled||d.boxStart[0]===d.boxEnd[0]&&d.boxStart[1]===d.boxEnd[1]||(d.boxEnabled=!0);var I=Math.abs(d.dragStart[0]-s)<_,P=Math.abs(d.dragStart[1]-a)<_;if(!function(){for(var E=r.graphDiv._fullLayout._axisConstraintGroups,z=r.xaxis._id,D=r.yaxis._id,U=0;U<E.length;U++)if(E[U][z]!==-1){if(E[U][D]!==-1)return!0;break}return!1}()||I&&P)I&&(d.boxEnd[0]=d.boxStart[0]),P&&(d.boxEnd[1]=d.boxStart[1]);else{p=d.boxEnd[0]-d.boxStart[0],c=d.boxEnd[1]-d.boxStart[1];var S=(i[3]-i[1])/(i[2]-i[0]);Math.abs(p*S)>Math.abs(c)?(d.boxEnd[1]=d.boxStart[1]+Math.abs(p)*S*(c>=0?1:-1),d.boxEnd[1]<i[1]?(d.boxEnd[1]=i[1],d.boxEnd[0]=d.boxStart[0]+(i[1]-d.boxStart[1])/Math.abs(S)):d.boxEnd[1]>i[3]&&(d.boxEnd[1]=i[3],d.boxEnd[0]=d.boxStart[0]+(i[3]-d.boxStart[1])/Math.abs(S))):(d.boxEnd[0]=d.boxStart[0]+Math.abs(c)/S*(p>=0?1:-1),d.boxEnd[0]<i[0]?(d.boxEnd[0]=i[0],d.boxEnd[1]=d.boxStart[1]+(i[0]-d.boxStart[0])*Math.abs(S)):d.boxEnd[0]>i[2]&&(d.boxEnd[0]=i[2],d.boxEnd[1]=d.boxStart[1]+(i[2]-d.boxStart[0])*Math.abs(S)))}}else d.boxEnabled?(p=d.boxStart[0]!==d.boxEnd[0],c=d.boxStart[1]!==d.boxEnd[1],p||c?(p&&(T(0,d.boxStart[0],d.boxEnd[0]),r.xaxis.autorange=!1),c&&(T(1,d.boxStart[1],d.boxEnd[1]),r.yaxis.autorange=!1),r.relayoutCallback()):r.glplot.setDirty(),d.boxEnabled=!1,d.boxInited=!1):d.boxInited&&(d.boxInited=!1);break;case"pan":d.boxEnabled=!1,d.boxInited=!1,h?(d.panning||(d.dragStart[0]=s,d.dragStart[1]=a),Math.abs(d.dragStart[0]-s)<b&&(s=d.dragStart[0]),Math.abs(d.dragStart[1]-a)<b&&(a=d.dragStart[1]),p=(f-s)*(i[2]-i[0])/(n.viewBox[2]-n.viewBox[0]),c=(w-a)*(i[3]-i[1])/(n.viewBox[3]-n.viewBox[1]),i[0]+=p,i[2]+=p,i[1]+=c,i[3]+=c,r.setRanges(i),d.panning=!0,d.lastInputTime=Date.now(),u(),r.cameraChanged(),r.handleAnnotations()):d.panning&&(d.panning=!1,r.relayoutCallback())}d.lastPos[0]=s,d.lastPos[1]=a}return d.mouseListener=m(l,o),l.addEventListener("touchstart",function(h){var s=k(h.changedTouches[0],l);o(0,s[0],s[1]),o(1,s[0],s[1]),h.preventDefault()},!!e&&{passive:!1}),l.addEventListener("touchmove",function(h){h.preventDefault();var s=k(h.changedTouches[0],l);o(1,s[0],s[1]),h.preventDefault()},!!e&&{passive:!1}),l.addEventListener("touchend",function(h){o(0,d.lastPos[0],d.lastPos[1]),h.preventDefault()},!!e&&{passive:!1}),d.wheelListener=v(l,function(h,s){if(!r.scrollZoom)return!1;var a=r.calcDataBox(),p=n.viewBox,c=d.lastPos[0],i=d.lastPos[1],y=Math.exp(5*s/(p[3]-p[1])),f=c/(p[2]-p[0])*(a[2]-a[0])+a[0],w=i/(p[3]-p[1])*(a[3]-a[1])+a[1];return a[0]=(a[0]-f)*y+f,a[2]=(a[2]-f)*y+f,a[1]=(a[1]-w)*y+w,a[3]=(a[3]-w)*y+w,r.setRanges(a),d.lastInputTime=Date.now(),u(),r.cameraChanged(),r.handleAnnotations(),r.relayoutCallback(),!0},!0),d}},{"../cartesian/constants":573,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],604:[function(g,Q,X){var m=g("../cartesian/axes"),v=g("../../lib/str2rgbarray");function k(t){this.scene=t,this.gl=t.gl,this.pixelRatio=t.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var x=k.prototype,e=["xaxis","yaxis"];x.merge=function(t){var r,l,n,d,u,o,h,s,a,p,c;for(this.titleEnable=!1,this.backgroundColor=v(t.plot_bgcolor),p=0;p<2;++p){var i=(r=e[p]).charAt(0);for(n=(l=t[this.scene[r]._name]).title.text===this.scene.fullLayout._dfltTitle[i]?"":l.title.text,c=0;c<=2;c+=2)this.labelEnable[p+c]=!1,this.labels[p+c]=n,this.labelColor[p+c]=v(l.title.font.color),this.labelFont[p+c]=l.title.font.family,this.labelSize[p+c]=l.title.font.size,this.labelPad[p+c]=this.getLabelPad(r,l),this.tickEnable[p+c]=!1,this.tickColor[p+c]=v((l.tickfont||{}).color),this.tickAngle[p+c]=l.tickangle==="auto"?0:Math.PI*-l.tickangle/180,this.tickPad[p+c]=this.getTickPad(l),this.tickMarkLength[p+c]=0,this.tickMarkWidth[p+c]=l.tickwidth||0,this.tickMarkColor[p+c]=v(l.tickcolor),this.borderLineEnable[p+c]=!1,this.borderLineColor[p+c]=v(l.linecolor),this.borderLineWidth[p+c]=l.linewidth||0;h=this.hasSharedAxis(l),u=this.hasAxisInDfltPos(r,l)&&!h,o=this.hasAxisInAltrPos(r,l)&&!h,d=l.mirror||!1,s=h?String(d).indexOf("all")!==-1:!!d,a=h?d==="allticks":String(d).indexOf("ticks")!==-1,u?this.labelEnable[p]=!0:o&&(this.labelEnable[p+2]=!0),u?this.tickEnable[p]=l.showticklabels:o&&(this.tickEnable[p+2]=l.showticklabels),(u||s)&&(this.borderLineEnable[p]=l.showline),(o||s)&&(this.borderLineEnable[p+2]=l.showline),(u||a)&&(this.tickMarkLength[p]=this.getTickMarkLength(l)),(o||a)&&(this.tickMarkLength[p+2]=this.getTickMarkLength(l)),this.gridLineEnable[p]=l.showgrid,this.gridLineColor[p]=v(l.gridcolor),this.gridLineWidth[p]=l.gridwidth,this.zeroLineEnable[p]=l.zeroline,this.zeroLineColor[p]=v(l.zerolinecolor),this.zeroLineWidth[p]=l.zerolinewidth}},x.hasSharedAxis=function(t){var r=this.scene,l=r.fullLayout._subplots.gl2d;return m.findSubplotsWithAxis(l,t).indexOf(r.id)!==0},x.hasAxisInDfltPos=function(t,r){var l=r.side;return t==="xaxis"?l==="bottom":t==="yaxis"?l==="left":void 0},x.hasAxisInAltrPos=function(t,r){var l=r.side;return t==="xaxis"?l==="top":t==="yaxis"?l==="right":void 0},x.getLabelPad=function(t,r){var l=r.title.font.size,n=r.showticklabels;return t==="xaxis"?r.side==="top"?l*(1.5+(n?1:0))-10:l*(1.5+(n?.5:0))-10:t==="yaxis"?r.side==="right"?10+l*(1.5+(n?1:.5)):10+l*(1.5+(n?.5:0)):void 0},x.getTickPad=function(t){return t.ticks==="outside"?10+t.ticklen:15},x.getTickMarkLength=function(t){if(!t.ticks)return 0;var r=t.ticklen;return t.ticks==="inside"?-r:r},Q.exports=function(t){return new k(t)}},{"../../lib/str2rgbarray":540,"../cartesian/axes":566}],605:[function(g,Q,X){var m=g("../../plot_api/edit_types").overrideAll,v=g("./scene2d"),k=g("../layout_attributes"),x=g("../../constants/xmlns_namespaces"),e=g("../cartesian/constants"),t=g("../cartesian"),r=g("../../components/fx/layout_attributes"),l=g("../get_data").getSubplotData;X.name="gl2d",X.attr=["xaxis","yaxis"],X.idRoot=["x","y"],X.idRegex=e.idRegex,X.attrRegex=e.attrRegex,X.attributes=g("../cartesian/attributes"),X.supplyLayoutDefaults=function(n,d,u){d._has("cartesian")||t.supplyLayoutDefaults(n,d,u)},X.layoutAttrOverrides=m(t.layoutAttributes,"plot","from-root"),X.baseLayoutAttrOverrides=m({plot_bgcolor:k.plot_bgcolor,hoverlabel:r.hoverlabel},"plot","nested"),X.plot=function(n){for(var d=n._fullLayout,u=n._fullData,o=d._subplots.gl2d,h=0;h<o.length;h++){var s=o[h],a=d._plots[s],p=l(u,"gl2d",s),c=a._scene2d;c===void 0&&(c=new v({id:s,graphDiv:n,container:n.querySelector(".gl-container"),staticPlot:n._context.staticPlot,plotGlPixelRatio:n._context.plotGlPixelRatio},d),a._scene2d=c),c.plot(p,n.calcdata,d,n.layout)}},X.clean=function(n,d,u,o){for(var h=o._subplots.gl2d||[],s=0;s<h.length;s++){var a=h[s],p=o._plots[a];if(p._scene2d){var c=l(n,"gl2d",a);c.length===0&&(p._scene2d.destroy(),delete o._plots[a])}}t.clean.apply(this,arguments)},X.drawFramework=function(n){n._context.staticPlot||t.drawFramework(n)},X.toSVG=function(n){for(var d=n._fullLayout,u=d._subplots.gl2d,o=0;o<u.length;o++){var h=d._plots[u[o]]._scene2d,s=h.toImage("png");d._glimages.append("svg:image").attr({xmlns:x.svg,"xlink:href":s,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),h.destroy()}},X.updateFx=function(n){for(var d=n._fullLayout,u=d._subplots.gl2d,o=0;o<u.length;o++)d._plots[u[o]]._scene2d.updateFx(d.dragmode)}},{"../../components/fx/layout_attributes":408,"../../constants/xmlns_namespaces":492,"../../plot_api/edit_types":548,"../cartesian":578,"../cartesian/attributes":564,"../cartesian/constants":573,"../get_data":602,"../layout_attributes":619,"./scene2d":606}],606:[function(g,Q,X){var m,v,k=g("../../registry"),x=g("../../plots/cartesian/axes"),e=g("../../components/fx"),t=g("../../../stackgl_modules").gl_plot2d,r=g("../../../stackgl_modules").gl_spikes2d,l=g("../../../stackgl_modules").gl_select_box,n=g("webgl-context"),d=g("./convert"),u=g("./camera"),o=g("../../lib/show_no_webgl_msg"),h=g("../cartesian/constraints"),s=h.enforce,a=h.clean,p=g("../cartesian/autorange").doAutoRange,c=g("../../components/dragelement/helpers"),i=c.drawMode,y=c.selectMode,f=["xaxis","yaxis"],w=g("../cartesian/constants").SUBPLOT_PATTERN;function b(T,L){this.container=T.container,this.graphDiv=T.graphDiv,this.pixelRatio=T.plotGlPixelRatio||window.devicePixelRatio,this.id=T.id,this.staticPlot=!!T.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(L),this.makeFramework(),this.stopped||(this.glplotOptions=d(this),this.glplotOptions.merge(L),this.glplot=t(this.glplotOptions),this.camera=u(this),this.traces={},this.spikes=r(this.glplot),this.selectBox=l(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}Q.exports=b;var _=b.prototype;_.makeFramework=function(){if(this.staticPlot){if(!(v||(m=document.createElement("canvas"),v=n({canvas:m,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=m,this.gl=v}else{var T=this.container.querySelector(".gl-canvas-focus"),L=n({canvas:T,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!L)return o(this),void(this.stopped=!0);this.canvas=T,this.gl=L}var A=this.canvas;A.style.width="100%",A.style.height="100%",A.style.position="absolute",A.style.top="0px",A.style.left="0px",A.style["pointer-events"]="none",this.updateSize(A);var I=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");I.style.position="absolute",I.style.top=I.style.left="0px",I.style.width=I.style.height="100%",I.style["z-index"]=20,I.style["pointer-events"]="none";var P=this.mouseContainer=document.createElement("div");P.style.position="absolute",P.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var S=this.container;S.appendChild(I),S.appendChild(P);var E=this;P.addEventListener("mouseout",function(){E.isMouseOver=!1,E.unhover()}),P.addEventListener("mouseover",function(){E.isMouseOver=!0})},_.toImage=function(T){T||(T="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(m),this.updateSize(this.canvas);var L=this.glplot.gl,A=L.drawingBufferWidth,I=L.drawingBufferHeight;L.clearColor(1,1,1,0),L.clear(L.COLOR_BUFFER_BIT|L.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),L.bindFramebuffer(L.FRAMEBUFFER,null);var P=new Uint8Array(A*I*4);L.readPixels(0,0,A,I,L.RGBA,L.UNSIGNED_BYTE,P);for(var S=0,E=I-1;S<E;++S,--E)for(var z=0;z<A;++z)for(var D=0;D<4;++D){var U=P[4*(A*S+z)+D];P[4*(A*S+z)+D]=P[4*(A*E+z)+D],P[4*(A*E+z)+D]=U}var H=document.createElement("canvas");H.width=A,H.height=I;var Y,J=H.getContext("2d",{willReadFrequently:!0}),W=J.createImageData(A,I);switch(W.data.set(P),J.putImageData(W,0,0),T){case"jpeg":Y=H.toDataURL("image/jpeg");break;case"webp":Y=H.toDataURL("image/webp");break;default:Y=H.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(m),Y},_.updateSize=function(T){T||(T=this.canvas);var L=this.pixelRatio,A=this.fullLayout,I=A.width,P=A.height,S=0|Math.ceil(L*I),E=0|Math.ceil(L*P);return T.width===S&&T.height===E||(T.width=S,T.height=E),T},_.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var T=[x.calcTicks(this.xaxis),x.calcTicks(this.yaxis)],L=0;L<2;++L)for(var A=0;A<T[L].length;++A)T[L][A].text=T[L][A].text+"";return T},_.updateRefs=function(T){this.fullLayout=T;var L=this.id.match(w),A="xaxis"+L[1],I="yaxis"+L[2];this.xaxis=this.fullLayout[A],this.yaxis=this.fullLayout[I]},_.relayoutCallback=function(){var T=this.graphDiv,L=this.xaxis,A=this.yaxis,I=T.layout,P={},S=P[L._name+".range"]=L.range.slice(),E=P[A._name+".range"]=A.range.slice();P[L._name+".autorange"]=L.autorange,P[A._name+".autorange"]=A.autorange,k.call("_storeDirectGUIEdit",T.layout,T._fullLayout._preGUI,P);var z=I[L._name];z.range=S,z.autorange=L.autorange;var D=I[A._name];D.range=E,D.autorange=A.autorange,P.lastInputTime=this.camera.lastInputTime,T.emit("plotly_relayout",P)},_.cameraChanged=function(){var T=this.camera;this.glplot.setDataBox(this.calcDataBox());var L=this.computeTickMarks();(function(A,I){for(var P=0;P<2;++P){var S=A[P],E=I[P];if(S.length!==E.length)return!0;for(var z=0;z<S.length;++z)if(S[z].x!==E[z].x)return!0}return!1})(L,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=L,this.glplotOptions.dataBox=T.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},_.handleAnnotations=function(){for(var T=this.graphDiv,L=this.fullLayout.annotations,A=0;A<L.length;A++){var I=L[A];I.xref===this.xaxis._id&&I.yref===this.yaxis._id&&k.getComponentMethod("annotations","drawOne")(T,A)}},_.destroy=function(){if(this.glplot){var T=this.traces;T&&Object.keys(T).map(function(L){T[L].dispose(),delete T[L]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},_.plot=function(T,L,A){var I=this.glplot;this.updateRefs(A),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(T,L),this.updateFx(A.dragmode);var P=A.width,S=A.height;this.updateSize(this.canvas);var E=this.glplotOptions;E.merge(A),E.screenBox=[0,0,P,S];var z={_fullLayout:{_axisConstraintGroups:A._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:A._size}};a(z,this.xaxis),a(z,this.yaxis);var D,U,H=A._size,Y=this.xaxis.domain,J=this.yaxis.domain;for(E.viewBox=[H.l+Y[0]*H.w,H.b+J[0]*H.h,P-H.r-(1-Y[1])*H.w,S-H.t-(1-J[1])*H.h],this.mouseContainer.style.width=H.w*(Y[1]-Y[0])+"px",this.mouseContainer.style.height=H.h*(J[1]-J[0])+"px",this.mouseContainer.height=H.h*(J[1]-J[0]),this.mouseContainer.style.left=H.l+Y[0]*H.w+"px",this.mouseContainer.style.top=H.t+(1-J[1])*H.h+"px",U=0;U<2;++U)(D=this[f[U]])._length=E.viewBox[U+2]-E.viewBox[U],p(this.graphDiv,D),D.setScale();s(z),E.ticks=this.computeTickMarks(),E.dataBox=this.calcDataBox(),E.merge(A),I.update(E),this.glplot.draw()},_.calcDataBox=function(){var T=this.xaxis,L=this.yaxis,A=T.range,I=L.range,P=T.r2l,S=L.r2l;return[P(A[0]),S(I[0]),P(A[1]),S(I[1])]},_.setRanges=function(T){var L=this.xaxis,A=this.yaxis,I=L.l2r,P=A.l2r;L.range=[I(T[0]),I(T[2])],A.range=[P(T[1]),P(T[3])]},_.updateTraces=function(T,L){var A,I,P,S=Object.keys(this.traces);this.fullData=T;e:for(A=0;A<S.length;A++){var E=S[A],z=this.traces[E];for(I=0;I<T.length;I++)if((P=T[I]).uid===E&&P.type===z.type)continue e;z.dispose(),delete this.traces[E]}for(A=0;A<T.length;A++){P=T[A];var D=L[A],U=this.traces[P.uid];U?U.update(P,D):(U=P._module.plot(this,P,D),this.traces[P.uid]=U)}this.glplot.objects.sort(function(H,Y){return H._trace.index-Y._trace.index})},_.updateFx=function(T){y(T)||i(T)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor=T==="pan"?"move":T==="zoom"?"crosshair":null},_.emitPointAction=function(T,L){for(var A,I=T.trace.uid,P=T.pointIndex,S=0;S<this.fullData.length;S++)this.fullData[S].uid===I&&(A=this.fullData[S]);var E={x:T.traceCoord[0],y:T.traceCoord[1],curveNumber:A.index,pointNumber:P,data:A._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};e.appendArrayPointValue(E,A,P),this.graphDiv.emit(L,{points:[E]})},_.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var T=this.glplot,L=this.camera,A=L.mouseListener,I=this.lastButtonState===1&&A.buttons===0,P=this.fullLayout;this.lastButtonState=A.buttons,this.cameraChanged();var S,E=A.x*T.pixelRatio,z=this.canvas.height-T.pixelRatio*A.y;if(L.boxEnabled&&P.dragmode==="zoom"){this.selectBox.enabled=!0;for(var D=this.selectBox.selectBox=[Math.min(L.boxStart[0],L.boxEnd[0]),Math.min(L.boxStart[1],L.boxEnd[1]),Math.max(L.boxStart[0],L.boxEnd[0]),Math.max(L.boxStart[1],L.boxEnd[1])],U=0;U<2;U++)L.boxStart[U]===L.boxEnd[U]&&(D[U]=T.dataBox[U],D[U+2]=T.dataBox[U+2]);T.setDirty()}else if(!L.panning&&this.isMouseOver){this.selectBox.enabled=!1;var H=P._size,Y=this.xaxis.domain,J=this.yaxis.domain,W=(S=T.pick(E/T.pixelRatio+H.l+Y[0]*H.w,z/T.pixelRatio-(H.t+(1-J[1])*H.h)))&&S.object._trace.handlePick(S);if(W&&I&&this.emitPointAction(W,"plotly_click"),S&&S.object._trace.hoverinfo!=="skip"&&P.hovermode&&W&&(!this.lastPickResult||this.lastPickResult.traceUid!==W.trace.uid||this.lastPickResult.dataCoord[0]!==W.dataCoord[0]||this.lastPickResult.dataCoord[1]!==W.dataCoord[1])){var Z=W;this.lastPickResult={traceUid:W.trace?W.trace.uid:null,dataCoord:W.dataCoord.slice()},this.spikes.update({center:S.dataCoord}),Z.screenCoord=[((T.viewBox[2]-T.viewBox[0])*(S.dataCoord[0]-T.dataBox[0])/(T.dataBox[2]-T.dataBox[0])+T.viewBox[0])/T.pixelRatio,(this.canvas.height-(T.viewBox[3]-T.viewBox[1])*(S.dataCoord[1]-T.dataBox[1])/(T.dataBox[3]-T.dataBox[1])-T.viewBox[1])/T.pixelRatio],this.emitPointAction(W,"plotly_hover");var re=this.fullData[Z.trace.index]||{},V=Z.pointIndex,B=e.castHoverinfo(re,P,V);if(B&&B!=="all"){var j=B.split("+");j.indexOf("x")===-1&&(Z.traceCoord[0]=void 0),j.indexOf("y")===-1&&(Z.traceCoord[1]=void 0),j.indexOf("z")===-1&&(Z.traceCoord[2]=void 0),j.indexOf("text")===-1&&(Z.textLabel=void 0),j.indexOf("name")===-1&&(Z.name=void 0)}e.loneHover({x:Z.screenCoord[0],y:Z.screenCoord[1],xLabel:this.hoverFormatter("xaxis",Z.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",Z.traceCoord[1]),zLabel:Z.traceCoord[2],text:Z.textLabel,name:Z.name,color:e.castHoverOption(re,V,"bgcolor")||Z.color,borderColor:e.castHoverOption(re,V,"bordercolor"),fontFamily:e.castHoverOption(re,V,"font.family"),fontSize:e.castHoverOption(re,V,"font.size"),fontColor:e.castHoverOption(re,V,"font.color"),nameLength:e.castHoverOption(re,V,"namelength"),textAlign:e.castHoverOption(re,V,"align")},{container:this.svgContainer,gd:this.graphDiv})}}S||this.unhover(),T.draw()}},_.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),e.loneUnhover(this.svgContainer))},_.hoverFormatter=function(T,L){if(L!==void 0){var A=this[T];return x.tickText(A,A.c2l(L),"hover").text}}},{"../../../stackgl_modules":1133,"../../components/dragelement/helpers":385,"../../components/fx":407,"../../lib/show_no_webgl_msg":537,"../../plots/cartesian/axes":566,"../../registry":647,"../cartesian/autorange":565,"../cartesian/constants":573,"../cartesian/constraints":574,"./camera":603,"./convert":604,"webgl-context":332}],607:[function(g,Q,X){var m=g("../../plot_api/edit_types").overrideAll,v=g("../../components/fx/layout_attributes"),k=g("./scene"),x=g("../get_data").getSubplotData,e=g("../../lib"),t=g("../../constants/xmlns_namespaces");X.name="gl3d",X.attr="scene",X.idRoot="scene",X.idRegex=X.attrRegex=e.counterRegex("scene"),X.attributes=g("./layout/attributes"),X.layoutAttributes=g("./layout/layout_attributes"),X.baseLayoutAttrOverrides=m({hoverlabel:v.hoverlabel},"plot","nested"),X.supplyLayoutDefaults=g("./layout/defaults"),X.plot=function(r){for(var l=r._fullLayout,n=r._fullData,d=l._subplots.gl3d,u=0;u<d.length;u++){var o=d[u],h=x(n,"gl3d",o),s=l[o],a=s.camera,p=s._scene;p||(p=new k({id:o,graphDiv:r,container:r.querySelector(".gl-container"),staticPlot:r._context.staticPlot,plotGlPixelRatio:r._context.plotGlPixelRatio,camera:a},l),s._scene=p),p.viewInitial||(p.viewInitial={up:{x:a.up.x,y:a.up.y,z:a.up.z},eye:{x:a.eye.x,y:a.eye.y,z:a.eye.z},center:{x:a.center.x,y:a.center.y,z:a.center.z}}),p.plot(h,l,r.layout)}},X.clean=function(r,l,n,d){for(var u=d._subplots.gl3d||[],o=0;o<u.length;o++){var h=u[o];!l[h]&&d[h]._scene&&(d[h]._scene.destroy(),d._infolayer&&d._infolayer.selectAll(".annotation-"+h).remove())}},X.toSVG=function(r){for(var l=r._fullLayout,n=l._subplots.gl3d,d=l._size,u=0;u<n.length;u++){var o=l[n[u]],h=o.domain,s=o._scene,a=s.toImage("png");l._glimages.append("svg:image").attr({xmlns:t.svg,"xlink:href":a,x:d.l+d.w*h.x[0],y:d.t+d.h*(1-h.y[1]),width:d.w*(h.x[1]-h.x[0]),height:d.h*(h.y[1]-h.y[0]),preserveAspectRatio:"none"}),s.destroy()}},X.cleanId=function(r){if(r.match(/^scene[0-9]*$/)){var l=r.substr(5);return l==="1"&&(l=""),"scene"+l}},X.updateFx=function(r){for(var l=r._fullLayout,n=l._subplots.gl3d,d=0;d<n.length;d++)l[n[d]]._scene.updateFx(l.dragmode,l.hovermode)}},{"../../components/fx/layout_attributes":408,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../plot_api/edit_types":548,"../get_data":602,"./layout/attributes":608,"./layout/defaults":612,"./layout/layout_attributes":613,"./scene":617}],608:[function(g,Q,X){Q.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],609:[function(g,Q,X){var m=g("../../../components/color"),v=g("../../cartesian/layout_attributes"),k=g("../../../lib/extend").extendFlat,x=g("../../../plot_api/edit_types").overrideAll;Q.exports=x({visible:v.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:m.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:v.color,categoryorder:v.categoryorder,categoryarray:v.categoryarray,title:{text:v.title.text,font:v.title.font},type:k({},v.type,{values:["-","linear","log","date","category"]}),autotypenumbers:v.autotypenumbers,autorange:v.autorange,rangemode:v.rangemode,range:k({},v.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:v.tickmode,nticks:v.nticks,tick0:v.tick0,dtick:v.dtick,tickvals:v.tickvals,ticktext:v.ticktext,ticks:v.ticks,mirror:v.mirror,ticklen:v.ticklen,tickwidth:v.tickwidth,tickcolor:v.tickcolor,showticklabels:v.showticklabels,tickfont:v.tickfont,tickangle:v.tickangle,tickprefix:v.tickprefix,showtickprefix:v.showtickprefix,ticksuffix:v.ticksuffix,showticksuffix:v.showticksuffix,showexponent:v.showexponent,exponentformat:v.exponentformat,minexponent:v.minexponent,separatethousands:v.separatethousands,tickformat:v.tickformat,tickformatstops:v.tickformatstops,hoverformat:v.hoverformat,showline:v.showline,linecolor:v.linecolor,linewidth:v.linewidth,showgrid:v.showgrid,gridcolor:k({},v.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:v.gridwidth,zeroline:v.zeroline,zerolinecolor:v.zerolinecolor,zerolinewidth:v.zerolinewidth,_deprecated:{title:v._deprecated.title,titlefont:v._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":367,"../../../lib/extend":505,"../../../plot_api/edit_types":548,"../../cartesian/layout_attributes":579}],610:[function(g,Q,X){var m=g("tinycolor2").mix,v=g("../../../lib"),k=g("../../../plot_api/plot_template"),x=g("./axis_attributes"),e=g("../../cartesian/type_defaults"),t=g("../../cartesian/axis_defaults"),r=["xaxis","yaxis","zaxis"];Q.exports=function(l,n,d){var u,o;function h(p,c){return v.coerce(u,o,x,p,c)}for(var s=0;s<r.length;s++){var a=r[s];u=l[a]||{},(o=k.newContainer(n,a))._id=a[0]+d.scene,o._name=a,e(u,o,h,d),t(u,o,h,{font:d.font,letter:a[0],data:d.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:d.bgColor,calendar:d.calendar},d.fullLayout),h("gridcolor",m(o.color,d.bgColor,13600/187).toRgbString()),h("title.text",a[0]),o.setScale=v.noop,h("showspikes")&&(h("spikesides"),h("spikethickness"),h("spikecolor",o.color)),h("showaxeslabels"),h("showbackground")&&h("backgroundcolor")}}},{"../../../lib":515,"../../../plot_api/plot_template":555,"../../cartesian/axis_defaults":568,"../../cartesian/type_defaults":591,"./axis_attributes":609,tinycolor2:313}],611:[function(g,Q,X){var m=g("../../../lib/str2rgbarray"),v=g("../../../lib"),k=["xaxis","yaxis","zaxis"];function x(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}x.prototype.merge=function(e,t){for(var r=0;r<3;++r){var l=t[k[r]];l.visible?(this.labels[r]=e._meta?v.templateString(l.title.text,e._meta):l.title.text,"font"in l.title&&(l.title.font.color&&(this.labelColor[r]=m(l.title.font.color)),l.title.font.family&&(this.labelFont[r]=l.title.font.family),l.title.font.size&&(this.labelSize[r]=l.title.font.size)),"showline"in l&&(this.lineEnable[r]=l.showline),"linecolor"in l&&(this.lineColor[r]=m(l.linecolor)),"linewidth"in l&&(this.lineWidth[r]=l.linewidth),"showgrid"in l&&(this.gridEnable[r]=l.showgrid),"gridcolor"in l&&(this.gridColor[r]=m(l.gridcolor)),"gridwidth"in l&&(this.gridWidth[r]=l.gridwidth),l.type==="log"?this.zeroEnable[r]=!1:"zeroline"in l&&(this.zeroEnable[r]=l.zeroline),"zerolinecolor"in l&&(this.zeroLineColor[r]=m(l.zerolinecolor)),"zerolinewidth"in l&&(this.zeroLineWidth[r]=l.zerolinewidth),"ticks"in l&&l.ticks?this.lineTickEnable[r]=!0:this.lineTickEnable[r]=!1,"ticklen"in l&&(this.lineTickLength[r]=this._defaultLineTickLength[r]=l.ticklen),"tickcolor"in l&&(this.lineTickColor[r]=m(l.tickcolor)),"tickwidth"in l&&(this.lineTickWidth[r]=l.tickwidth),"tickangle"in l&&(this.tickAngle[r]=l.tickangle==="auto"?-3600:Math.PI*-l.tickangle/180),"showticklabels"in l&&(this.tickEnable[r]=l.showticklabels),"tickfont"in l&&(l.tickfont.color&&(this.tickColor[r]=m(l.tickfont.color)),l.tickfont.family&&(this.tickFont[r]=l.tickfont.family),l.tickfont.size&&(this.tickSize[r]=l.tickfont.size)),"mirror"in l?["ticks","all","allticks"].indexOf(l.mirror)!==-1?(this.lineTickMirror[r]=!0,this.lineMirror[r]=!0):l.mirror===!0?(this.lineTickMirror[r]=!1,this.lineMirror[r]=!0):(this.lineTickMirror[r]=!1,this.lineMirror[r]=!1):this.lineMirror[r]=!1,"showbackground"in l&&l.showbackground!==!1?(this.backgroundEnable[r]=!0,this.backgroundColor[r]=m(l.backgroundcolor)):this.backgroundEnable[r]=!1):(this.tickEnable[r]=!1,this.labelEnable[r]=!1,this.lineEnable[r]=!1,this.lineTickEnable[r]=!1,this.gridEnable[r]=!1,this.zeroEnable[r]=!1,this.backgroundEnable[r]=!1)}},Q.exports=function(e,t){var r=new x;return r.merge(e,t),r}},{"../../../lib":515,"../../../lib/str2rgbarray":540}],612:[function(g,Q,X){var m=g("../../../lib"),v=g("../../../components/color"),k=g("../../../registry"),x=g("../../subplot_defaults"),e=g("./axis_defaults"),t=g("./layout_attributes"),r=g("../../get_data").getSubplotData;function l(n,d,u,o){for(var h=u("bgcolor"),s=v.combine(h,o.paper_bgcolor),a=["up","center","eye"],p=0;p<a.length;p++)u("camera."+a[p]+".x"),u("camera."+a[p]+".y"),u("camera."+a[p]+".z");u("camera.projection.type");var c=!!u("aspectratio.x")&&!!u("aspectratio.y")&&!!u("aspectratio.z"),i=u("aspectmode",c?"manual":"auto");c||(n.aspectratio=d.aspectratio={x:1,y:1,z:1},i==="manual"&&(d.aspectmode="auto"),n.aspectmode=d.aspectmode);var y=r(o.fullData,"gl3d",o.id);e(n,d,{font:o.font,scene:o.id,data:y,bgColor:s,calendar:o.calendar,autotypenumbersDflt:o.autotypenumbersDflt,fullLayout:o.fullLayout}),k.getComponentMethod("annotations3d","handleDefaults")(n,d,o);var f=o.getDfltFromLayout("dragmode");if(f!==!1&&!f)if(f="orbit",n.camera&&n.camera.up){var w=n.camera.up.x,b=n.camera.up.y,_=n.camera.up.z;_!==0&&(w&&b&&_?_/Math.sqrt(w*w+b*b+_*_)>.999&&(f="turntable"):f="turntable")}else f="turntable";u("dragmode",f),u("hovermode",o.getDfltFromLayout("hovermode"))}Q.exports=function(n,d,u){var o=d._basePlotModules.length>1;x(n,d,u,{type:"gl3d",attributes:t,handleDefaults:l,fullLayout:d,font:d.font,fullData:u,getDfltFromLayout:function(h){if(!o)return m.validate(n[h],t[h])?n[h]:void 0},autotypenumbersDflt:d.autotypenumbers,paper_bgcolor:d.paper_bgcolor,calendar:d.calendar})}},{"../../../components/color":367,"../../../lib":515,"../../../registry":647,"../../get_data":602,"../../subplot_defaults":641,"./axis_defaults":610,"./layout_attributes":613}],613:[function(g,Q,X){var m=g("./axis_attributes"),v=g("../../domain").attributes,k=g("../../../lib/extend").extendFlat,x=g("../../../lib").counterRegex;function e(t,r,l){return{x:{valType:"number",dflt:t,editType:"camera"},y:{valType:"number",dflt:r,editType:"camera"},z:{valType:"number",dflt:l,editType:"camera"},editType:"camera"}}Q.exports={_arrayAttrRegexps:[x("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:k(e(0,0,1),{}),center:k(e(0,0,0),{}),eye:k(e(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:v({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:m,yaxis:m,zaxis:m,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":515,"../../../lib/extend":505,"../../domain":593,"./axis_attributes":609}],614:[function(g,Q,X){var m=g("../../../lib/str2rgbarray"),v=["xaxis","yaxis","zaxis"];function k(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}k.prototype.merge=function(x){for(var e=0;e<3;++e){var t=x[v[e]];t.visible?(this.enabled[e]=t.showspikes,this.colors[e]=m(t.spikecolor),this.drawSides[e]=t.spikesides,this.lineWidth[e]=t.spikethickness):(this.enabled[e]=!1,this.drawSides[e]=!1)}},Q.exports=function(x){var e=new k;return e.merge(x),e}},{"../../../lib/str2rgbarray":540}],615:[function(g,Q,X){Q.exports=function(e){for(var t=e.axesOptions,r=e.glplot.axesPixels,l=e.fullSceneLayout,n=[[],[],[]],d=0;d<3;++d){var u=l[k[d]];if(u._length=(r[d].hi-r[d].lo)*r[d].pixelsPerDataUnit/e.dataScale[d],Math.abs(u._length)===1/0||isNaN(u._length))n[d]=[];else{u._input_range=u.range.slice(),u.range[0]=r[d].lo/e.dataScale[d],u.range[1]=r[d].hi/e.dataScale[d],u._m=1/(e.dataScale[d]*r[d].pixelsPerDataUnit),u.range[0]===u.range[1]&&(u.range[0]-=1,u.range[1]+=1);var o=u.tickmode;if(u.tickmode==="auto"){u.tickmode="linear";var h=u.nticks||v.constrain(u._length/40,4,9);m.autoTicks(u,Math.abs(u.range[1]-u.range[0])/h)}for(var s=m.calcTicks(u,{msUTC:!0}),a=0;a<s.length;++a)s[a].x=s[a].x*e.dataScale[d],u.type==="date"&&(s[a].text=s[a].text.replace(/\<br\>/g," "));n[d]=s,u.tickmode=o}}for(t.ticks=n,d=0;d<3;++d)for(x[d]=.5*(e.glplot.bounds[0][d]+e.glplot.bounds[1][d]),a=0;a<2;++a)t.bounds[a][d]=e.glplot.bounds[a][d];e.contourLevels=function(p){for(var c=new Array(3),i=0;i<3;++i){for(var y=p[i],f=new Array(y.length),w=0;w<y.length;++w)f[w]=y[w].x;c[i]=f}return c}(n)};var m=g("../../cartesian/axes"),v=g("../../../lib"),k=["xaxis","yaxis","zaxis"],x=[0,0,0]},{"../../../lib":515,"../../cartesian/axes":566}],616:[function(g,Q,X){function m(v,k){var x,e,t=[0,0,0,0];for(x=0;x<4;++x)for(e=0;e<4;++e)t[e]+=v[4*x+e]*k[x];return t}Q.exports=function(v,k){return m(v.projection,m(v.view,m(v.model,[k[0],k[1],k[2],1])))}},{}],617:[function(g,Q,X){var m,v,k=g("../../../stackgl_modules").gl_plot3d,x=k.createCamera,e=k.createScene,t=g("webgl-context"),r=g("has-passive-events"),l=g("../../registry"),n=g("../../lib"),d=n.preserveDrawingBuffer(),u=g("../../plots/cartesian/axes"),o=g("../../components/fx"),h=g("../../lib/str2rgbarray"),s=g("../../lib/show_no_webgl_msg"),a=g("./project"),p=g("./layout/convert"),c=g("./layout/spikes"),i=g("./layout/tick_marks");function y(T,L){var A=document.createElement("div"),I=T.container;this.graphDiv=T.graphDiv;var P=document.createElementNS("http://www.w3.org/2000/svg","svg");P.style.position="absolute",P.style.top=P.style.left="0px",P.style.width=P.style.height="100%",P.style["z-index"]=20,P.style["pointer-events"]="none",A.appendChild(P),this.svgContainer=P,A.id=T.id,A.style.position="absolute",A.style.top=A.style.left="0px",A.style.width=A.style.height="100%",I.appendChild(A),this.fullLayout=L,this.id=T.id||"scene",this.fullSceneLayout=L[this.id],this.plotArgs=[[],{},{}],this.axesOptions=p(L,L[this.id]),this.spikeOptions=c(L[this.id]),this.container=A,this.staticMode=!!T.staticPlot,this.pixelRatio=this.pixelRatio||T.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=l.getComponentMethod("annotations3d","convert"),this.drawAnnotations=l.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var f=y.prototype;f.prepareOptions=function(){var T={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:d,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!(v||(m=document.createElement("canvas"),v=t({canvas:m,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");T.gl=v,T.canvas=m}return T};var w=!0;f.tryCreatePlot=function(){var T=this.prepareOptions(),L=!0;try{this.glplot=e(T)}catch{if(this.staticMode||!w||d)L=!1;else{n.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{d=T.glOptions.preserveDrawingBuffer=!0,this.glplot=e(T)}catch{d=T.glOptions.preserveDrawingBuffer=!1,L=!1}}}return w=!1,L},f.initializeGLCamera=function(){var T=this.fullSceneLayout.camera,L=T.projection.type==="orthographic";this.camera=x(this.container,{center:[T.center.x,T.center.y,T.center.z],eye:[T.eye.x,T.eye.y,T.eye.z],up:[T.up.x,T.up.y,T.up.z],_ortho:L,zoomMin:.01,zoomMax:100,mode:"orbit"})},f.initializeGLPlot=function(){var T=this;if(T.initializeGLCamera(),!T.tryCreatePlot())return s(T);T.traces={},T.make4thDimension();var L=T.graphDiv,A=L.layout,I=function(){var S={};return T.isCameraChanged(A)&&(S[T.id+".camera"]=T.getCamera()),T.isAspectChanged(A)&&(S[T.id+".aspectratio"]=T.glplot.getAspectratio(),A[T.id].aspectmode!=="manual"&&(T.fullSceneLayout.aspectmode=A[T.id].aspectmode=S[T.id+".aspectmode"]="manual")),S},P=function(S){if(S.fullSceneLayout.dragmode!==!1){var E=I();S.saveLayout(A),S.graphDiv.emit("plotly_relayout",E)}};return T.glplot.canvas&&(T.glplot.canvas.addEventListener("mouseup",function(){P(T)}),T.glplot.canvas.addEventListener("wheel",function(S){if(L._context._scrollZoom.gl3d){if(T.camera._ortho){var E=S.deltaX>S.deltaY?1.1:.9090909090909091,z=T.glplot.getAspectratio();T.glplot.setAspectratio({x:E*z.x,y:E*z.y,z:E*z.z})}P(T)}},!!r&&{passive:!1}),T.glplot.canvas.addEventListener("mousemove",function(){if(T.fullSceneLayout.dragmode!==!1&&T.camera.mouseListener.buttons!==0){var S=I();T.graphDiv.emit("plotly_relayouting",S)}}),T.staticMode||T.glplot.canvas.addEventListener("webglcontextlost",function(S){L&&L.emit&&L.emit("plotly_webglcontextlost",{event:S,layer:T.id})},!1)),T.glplot.oncontextloss=function(){T.recoverContext()},T.glplot.onrender=function(){T.render()},!0},f.render=function(){var T,L=this,A=L.graphDiv,I=L.svgContainer,P=L.container.getBoundingClientRect();A._fullLayout._calcInverseTransform(A);var S=A._fullLayout._invScaleX,E=A._fullLayout._invScaleY,z=P.width*S,D=P.height*E;I.setAttributeNS(null,"viewBox","0 0 "+z+" "+D),I.setAttributeNS(null,"width",z),I.setAttributeNS(null,"height",D),i(L),L.glplot.axes.update(L.axesOptions);for(var U=Object.keys(L.traces),H=null,Y=L.glplot.selection,J=0;J<U.length;++J)(T=L.traces[U[J]]).data.hoverinfo!=="skip"&&T.handlePick(Y)&&(H=T),T.setContourLevels&&T.setContourLevels();function W(se,ve,fe){var ye=L.fullSceneLayout[se+"axis"];return ye.type!=="log"&&(ve=ye.d2l(ve)),u.hoverLabelText(ye,ve,fe)}if(H!==null){var Z=a(L.glplot.cameraParams,Y.dataCoordinate);T=H.data;var re,V=A._fullData[T.index],B=Y.index,j={xLabel:W("x",Y.traceCoordinate[0],T.xhoverformat),yLabel:W("y",Y.traceCoordinate[1],T.yhoverformat),zLabel:W("z",Y.traceCoordinate[2],T.zhoverformat)},ee=o.castHoverinfo(V,L.fullLayout,B),N=(ee||"").split("+"),$=ee&&ee==="all";V.hovertemplate||$||(N.indexOf("x")===-1&&(j.xLabel=void 0),N.indexOf("y")===-1&&(j.yLabel=void 0),N.indexOf("z")===-1&&(j.zLabel=void 0),N.indexOf("text")===-1&&(Y.textLabel=void 0),N.indexOf("name")===-1&&(H.name=void 0));var K=[];T.type==="cone"||T.type==="streamtube"?(j.uLabel=W("x",Y.traceCoordinate[3],T.uhoverformat),($||N.indexOf("u")!==-1)&&K.push("u: "+j.uLabel),j.vLabel=W("y",Y.traceCoordinate[4],T.vhoverformat),($||N.indexOf("v")!==-1)&&K.push("v: "+j.vLabel),j.wLabel=W("z",Y.traceCoordinate[5],T.whoverformat),($||N.indexOf("w")!==-1)&&K.push("w: "+j.wLabel),j.normLabel=Y.traceCoordinate[6].toPrecision(3),($||N.indexOf("norm")!==-1)&&K.push("norm: "+j.normLabel),T.type==="streamtube"&&(j.divergenceLabel=Y.traceCoordinate[7].toPrecision(3),($||N.indexOf("divergence")!==-1)&&K.push("divergence: "+j.divergenceLabel)),Y.textLabel&&K.push(Y.textLabel),re=K.join("<br>")):T.type==="isosurface"||T.type==="volume"?(j.valueLabel=u.hoverLabelText(L._mockAxis,L._mockAxis.d2l(Y.traceCoordinate[3]),T.valuehoverformat),K.push("value: "+j.valueLabel),Y.textLabel&&K.push(Y.textLabel),re=K.join("<br>")):re=Y.textLabel;var te={x:Y.traceCoordinate[0],y:Y.traceCoordinate[1],z:Y.traceCoordinate[2],data:V._input,fullData:V,curveNumber:V.index,pointNumber:B};o.appendArrayPointValue(te,V,B),T._module.eventData&&(te=V._module.eventData(te,Y,V,{},B));var ie={points:[te]};if(L.fullSceneLayout.hovermode){var le=[];o.loneHover({trace:V,x:(.5+.5*Z[0]/Z[3])*z,y:(.5-.5*Z[1]/Z[3])*D,xLabel:j.xLabel,yLabel:j.yLabel,zLabel:j.zLabel,text:re,name:H.name,color:o.castHoverOption(V,B,"bgcolor")||H.color,borderColor:o.castHoverOption(V,B,"bordercolor"),fontFamily:o.castHoverOption(V,B,"font.family"),fontSize:o.castHoverOption(V,B,"font.size"),fontColor:o.castHoverOption(V,B,"font.color"),nameLength:o.castHoverOption(V,B,"namelength"),textAlign:o.castHoverOption(V,B,"align"),hovertemplate:n.castOption(V,B,"hovertemplate"),hovertemplateLabels:n.extendFlat({},te,j),eventData:[te]},{container:I,gd:A,inOut_bbox:le}),te.bbox=le[0]}Y.buttons&&Y.distance<5?A.emit("plotly_click",ie):A.emit("plotly_hover",ie),this.oldEventData=ie}else o.loneUnhover(I),this.oldEventData&&A.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;L.drawAnnotations(L)},f.recoverContext=function(){var T=this;T.glplot.dispose();var L=function(){T.glplot.gl.isContextLost()?requestAnimationFrame(L):T.initializeGLPlot()?T.plot.apply(T,T.plotArgs):n.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(L)};var b=["xaxis","yaxis","zaxis"];function _(T,L,A){for(var I=T.fullSceneLayout,P=0;P<3;P++){var S=b[P],E=S.charAt(0),z=I[S],D=L[E],U=L[E+"calendar"],H=L["_"+E+"length"];if(n.isArrayOrTypedArray(D))for(var Y,J=0;J<(H||D.length);J++)if(n.isArrayOrTypedArray(D[J]))for(var W=0;W<D[J].length;++W)Y=z.d2l(D[J][W],0,U),!isNaN(Y)&&isFinite(Y)&&(A[0][P]=Math.min(A[0][P],Y),A[1][P]=Math.max(A[1][P],Y));else Y=z.d2l(D[J],0,U),!isNaN(Y)&&isFinite(Y)&&(A[0][P]=Math.min(A[0][P],Y),A[1][P]=Math.max(A[1][P],Y));else A[0][P]=Math.min(A[0][P],0),A[1][P]=Math.max(A[1][P],H-1)}}f.plot=function(T,L,A){if(this.plotArgs=[T,L,A],!this.glplot.contextLost){var I,P,S,E,z,D,U=L[this.id],H=A[this.id];this.fullLayout=L,this.fullSceneLayout=U,this.axesOptions.merge(L,U),this.spikeOptions.merge(U),this.setViewport(U),this.updateFx(U.dragmode,U.hovermode),this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d,this.glplot.setClearColor(h(U.bgcolor)),this.setConvert(z),T?Array.isArray(T)||(T=[T]):T=[];var Y=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(S=0;S<T.length;++S)(I=T[S]).visible===!0&&I._length!==0&&_(this,I,Y);(function(Te,Ee){for(var Me=Te.fullSceneLayout,De=Me.annotations||[],Ie=0;Ie<3;Ie++)for(var Oe=b[Ie],Ze=Oe.charAt(0),Fe=Me[Oe],Pe=0;Pe<De.length;Pe++){var ze=De[Pe];if(ze.visible){var Ge=Fe.r2l(ze[Ze]);!isNaN(Ge)&&isFinite(Ge)&&(Ee[0][Ie]=Math.min(Ee[0][Ie],Ge),Ee[1][Ie]=Math.max(Ee[1][Ie],Ge))}}})(this,Y);var J=[1,1,1];for(E=0;E<3;++E)Y[1][E]===Y[0][E]?J[E]=1:J[E]=1/(Y[1][E]-Y[0][E]);for(this.dataScale=J,this.convertAnnotations(this),S=0;S<T.length;++S)(I=T[S]).visible===!0&&I._length!==0&&((P=this.traces[I.uid])?P.data.type===I.type?P.update(I):(P.dispose(),P=I._module.plot(this,I),this.traces[I.uid]=P):(P=I._module.plot(this,I),this.traces[I.uid]=P),P.name=I.name);var W=Object.keys(this.traces);e:for(S=0;S<W.length;++S){for(E=0;E<T.length;++E)if(T[E].uid===W[S]&&T[E].visible===!0&&T[E]._length!==0)continue e;(P=this.traces[W[S]]).dispose(),delete this.traces[W[S]]}this.glplot.objects.sort(function(Te,Ee){return Te._trace.data.index-Ee._trace.data.index});var Z,re=[[0,0,0],[0,0,0]],V=[],B={};for(S=0;S<3;++S){if((D=(z=U[b[S]]).type)in B?(B[D].acc*=J[S],B[D].count+=1):B[D]={acc:J[S],count:1},z.autorange){re[0][S]=1/0,re[1][S]=-1/0;var j=this.glplot.objects,ee=this.fullSceneLayout.annotations||[],N=z._name.charAt(0);for(E=0;E<j.length;E++){var $=j[E],K=$.bounds,te=$._trace.data._pad||0;$.constructor.name==="ErrorBars"&&z._lowerLogErrorBound?re[0][S]=Math.min(re[0][S],z._lowerLogErrorBound):re[0][S]=Math.min(re[0][S],K[0][S]/J[S]-te),re[1][S]=Math.max(re[1][S],K[1][S]/J[S]+te)}for(E=0;E<ee.length;E++){var ie=ee[E];if(ie.visible){var le=z.r2l(ie[N]);re[0][S]=Math.min(re[0][S],le),re[1][S]=Math.max(re[1][S],le)}}if("rangemode"in z&&z.rangemode==="tozero"&&(re[0][S]=Math.min(re[0][S],0),re[1][S]=Math.max(re[1][S],0)),re[0][S]>re[1][S])re[0][S]=-1,re[1][S]=1;else{var se=re[1][S]-re[0][S];re[0][S]-=se/32,re[1][S]+=se/32}if(z.autorange==="reversed"){var ve=re[0][S];re[0][S]=re[1][S],re[1][S]=ve}}else{var fe=z.range;re[0][S]=z.r2l(fe[0]),re[1][S]=z.r2l(fe[1])}re[0][S]===re[1][S]&&(re[0][S]-=1,re[1][S]+=1),V[S]=re[1][S]-re[0][S],this.glplot.setBounds(S,{min:re[0][S]*J[S],max:re[1][S]*J[S]})}var ye=U.aspectmode;if(ye==="cube")Z=[1,1,1];else if(ye==="manual"){var Ae=U.aspectratio;Z=[Ae.x,Ae.y,Ae.z]}else{if(ye!=="auto"&&ye!=="data")throw new Error("scene.js aspectRatio was not one of the enumerated types");var pe=[1,1,1];for(S=0;S<3;++S){var ge=B[D=(z=U[b[S]]).type];pe[S]=Math.pow(ge.acc,1/ge.count)/J[S]}Z=ye==="data"||Math.max.apply(null,pe)/Math.min.apply(null,pe)<=4?pe:[1,1,1]}U.aspectratio.x=H.aspectratio.x=Z[0],U.aspectratio.y=H.aspectratio.y=Z[1],U.aspectratio.z=H.aspectratio.z=Z[2],this.glplot.setAspectratio(U.aspectratio),this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:U.aspectratio.x,y:U.aspectratio.y,z:U.aspectratio.z}),this.viewInitial.aspectmode||(this.viewInitial.aspectmode=U.aspectmode);var we=U.domain||null,oe=L._size||null;if(we&&oe){var de=this.container.style;de.position="absolute",de.left=oe.l+we.x[0]*oe.w+"px",de.top=oe.t+(1-we.y[1])*oe.h+"px",de.width=oe.w*(we.x[1]-we.x[0])+"px",de.height=oe.h*(we.y[1]-we.y[0])+"px"}this.glplot.redraw()}},f.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},f.getCamera=function(){var T;return this.camera.view.recalcMatrix(this.camera.view.lastT()),{up:{x:(T=this.camera).up[0],y:T.up[1],z:T.up[2]},center:{x:T.center[0],y:T.center[1],z:T.center[2]},eye:{x:T.eye[0],y:T.eye[1],z:T.eye[2]},projection:{type:T._ortho===!0?"orthographic":"perspective"}}},f.setViewport=function(T){var L,A=T.camera;this.camera.lookAt.apply(this,[[(L=A).eye.x,L.eye.y,L.eye.z],[L.center.x,L.center.y,L.center.z],[L.up.x,L.up.y,L.up.z]]),this.glplot.setAspectratio(T.aspectratio),A.projection.type==="orthographic"!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())},f.isCameraChanged=function(T){var L=this.getCamera(),A=n.nestedProperty(T,this.id+".camera").get();function I(z,D,U,H){var Y=["up","center","eye"],J=["x","y","z"];return D[Y[U]]&&z[Y[U]][J[H]]===D[Y[U]][J[H]]}var P=!1;if(A===void 0)P=!0;else{for(var S=0;S<3;S++)for(var E=0;E<3;E++)if(!I(L,A,S,E)){P=!0;break}(!A.projection||L.projection&&L.projection.type!==A.projection.type)&&(P=!0)}return P},f.isAspectChanged=function(T){var L=this.glplot.getAspectratio(),A=n.nestedProperty(T,this.id+".aspectratio").get();return A===void 0||A.x!==L.x||A.y!==L.y||A.z!==L.z},f.saveLayout=function(T){var L,A,I,P,S,E,z=this.fullLayout,D=this.isCameraChanged(T),U=this.isAspectChanged(T),H=D||U;if(H){var Y={};D&&(L=this.getCamera(),I=(A=n.nestedProperty(T,this.id+".camera")).get(),Y[this.id+".camera"]=I),U&&(P=this.glplot.getAspectratio(),E=(S=n.nestedProperty(T,this.id+".aspectratio")).get(),Y[this.id+".aspectratio"]=E),l.call("_storeDirectGUIEdit",T,z._preGUI,Y),D&&(A.set(L),n.nestedProperty(z,this.id+".camera").set(L)),U&&(S.set(P),n.nestedProperty(z,this.id+".aspectratio").set(P),this.glplot.redraw())}return H},f.updateFx=function(T,L){var A=this.camera;if(A)if(T==="orbit")A.mode="orbit",A.keyBindingMode="rotate";else if(T==="turntable"){A.up=[0,0,1],A.mode="turntable",A.keyBindingMode="rotate";var I=this.graphDiv,P=I._fullLayout,S=this.fullSceneLayout.camera,E=S.up.x,z=S.up.y,D=S.up.z;if(D/Math.sqrt(E*E+z*z+D*D)<.999){var U=this.id+".camera.up",H={x:0,y:0,z:1},Y={};Y[U]=H;var J=I.layout;l.call("_storeDirectGUIEdit",J,P._preGUI,Y),S.up=H,n.nestedProperty(J,U).set(H)}}else A.keyBindingMode=T;this.fullSceneLayout.hovermode=L},f.toImage=function(T){T||(T="png"),this.staticMode&&this.container.appendChild(m),this.glplot.redraw();var L=this.glplot.gl,A=L.drawingBufferWidth,I=L.drawingBufferHeight;L.bindFramebuffer(L.FRAMEBUFFER,null);var P=new Uint8Array(A*I*4);L.readPixels(0,0,A,I,L.RGBA,L.UNSIGNED_BYTE,P),function(U,H,Y){for(var J=0,W=Y-1;J<W;++J,--W)for(var Z=0;Z<H;++Z)for(var re=0;re<4;++re){var V=4*(H*J+Z)+re,B=4*(H*W+Z)+re,j=U[V];U[V]=U[B],U[B]=j}}(P,A,I),function(U,H,Y){for(var J=0;J<Y;++J)for(var W=0;W<H;++W){var Z=4*(H*J+W),re=U[Z+3];if(re>0)for(var V=255/re,B=0;B<3;++B)U[Z+B]=Math.min(V*U[Z+B],255)}}(P,A,I);var S=document.createElement("canvas");S.width=A,S.height=I;var E,z=S.getContext("2d",{willReadFrequently:!0}),D=z.createImageData(A,I);switch(D.data.set(P),z.putImageData(D,0,0),T){case"jpeg":E=S.toDataURL("image/jpeg");break;case"webp":E=S.toDataURL("image/webp");break;default:E=S.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(m),E},f.setConvert=function(){for(var T=0;T<3;T++){var L=this.fullSceneLayout[b[T]];u.setConvert(L,this.fullLayout),L.setScale=n.noop}},f.make4thDimension=function(){var T=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},u.setConvert(this._mockAxis,T)},Q.exports=y},{"../../../stackgl_modules":1133,"../../components/fx":407,"../../lib":515,"../../lib/show_no_webgl_msg":537,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566,"../../registry":647,"./layout/convert":611,"./layout/spikes":614,"./layout/tick_marks":615,"./project":616,"has-passive-events":229,"webgl-context":332}],618:[function(g,Q,X){Q.exports=function(m,v,k,x){x=x||m.length;for(var e=new Array(x),t=0;t<x;t++)e[t]=[m[t],v[t],k[t]];return e}},{}],619:[function(g,Q,X){var m=g("./font_attributes"),v=g("./animation_attributes"),k=g("../components/color/attributes"),x=g("../components/shapes/draw_newshape/attributes"),e=g("../components/selections/draw_newselection/attributes"),t=g("./pad_attributes"),r=g("../lib/extend").extendFlat,l=m({editType:"calc"});l.family.dflt='"Open Sans", verdana, arial, sans-serif',l.size.dflt=12,l.color.dflt=k.defaultLine,Q.exports={font:l,title:{text:{valType:"string",editType:"layoutstyle"},font:m({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:r(t({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:k.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:k.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:k.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:x.newshape,activeshape:x.activeshape,newselection:e.newselection,activeselection:e.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:r({},v.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:m({editType:"layoutstyle"})}}},{"../components/color/attributes":366,"../components/selections/draw_newselection/attributes":451,"../components/shapes/draw_newshape/attributes":463,"../lib/extend":505,"./animation_attributes":560,"./font_attributes":594,"./pad_attributes":627}],620:[function(g,Q,X){var m=g("../../lib/sort_object_keys"),v='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',k=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',v].join(" "),x=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),e={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:v,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:k,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:k,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:x,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:x,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},t=m(e);Q.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:e,styleValuesNonMapbox:t,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@1.10.1."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",t.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},{"../../lib/sort_object_keys":538}],621:[function(g,Q,X){var m=g("../../lib");Q.exports=function(v,k){var x=v.split(" "),e=x[0],t=x[1],r=m.isArrayOrTypedArray(k)?m.mean(k):k,l=.5+r/100,n=1.5+r/100,d=["",""],u=[0,0];switch(e){case"top":d[0]="top",u[1]=-n;break;case"bottom":d[0]="bottom",u[1]=n}switch(t){case"left":d[1]="right",u[0]=-l;break;case"right":d[1]="left",u[0]=l}return{anchor:d[0]&&d[1]?d.join("-"):d[0]?d[0]:d[1]?d[1]:"center",offset:u}}},{"../../lib":515}],622:[function(g,Q,X){var m=g("mapbox-gl/dist/mapbox-gl-unminified"),v=g("../../lib"),k=v.strTranslate,x=v.strScale,e=g("../../plots/get_data").getSubplotCalcData,t=g("../../constants/xmlns_namespaces"),r=g("@plotly/d3"),l=g("../../components/drawing"),n=g("../../lib/svg_text_utils"),d=g("./mapbox"),u=X.constants=g("./constants");function o(h){return typeof h=="string"&&(u.styleValuesMapbox.indexOf(h)!==-1||h.indexOf("mapbox://")===0)}X.name="mapbox",X.attr="subplot",X.idRoot="mapbox",X.idRegex=X.attrRegex=v.counterRegex("mapbox"),X.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},X.layoutAttributes=g("./layout_attributes"),X.supplyLayoutDefaults=g("./layout_defaults"),X.plot=function(h){var s=h._fullLayout,a=h.calcdata,p=s._subplots.mapbox;if(m.version!==u.requiredVersion)throw new Error(u.wrongVersionErrorMsg);var c=function(_,T){var L=_._fullLayout;if(_._context.mapboxAccessToken==="")return"";for(var A=[],I=[],P=!1,S=!1,E=0;E<T.length;E++){var z=L[T[E]],D=z.accesstoken;o(z.style)&&(D?v.pushUnique(A,D):(o(z._input.style)&&(v.error("Uses Mapbox map style, but did not set an access token."),P=!0),S=!0)),D&&v.pushUnique(I,D)}if(S){var U=P?u.noAccessTokenErrorMsg:u.missingStyleErrorMsg;throw v.error(U),new Error(U)}return A.length?(A.length>1&&v.warn(u.multipleTokensErrorMsg),A[0]):(I.length&&v.log(["Listed mapbox access token(s)",I.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(h,p);m.accessToken=c;for(var i=0;i<p.length;i++){var y=p[i],f=e(a,"mapbox",y),w=s[y],b=w._subplot;b||(b=new d(h,y),s[y]._subplot=b),b.viewInitial||(b.viewInitial={center:v.extendFlat({},w.center),zoom:w.zoom,bearing:w.bearing,pitch:w.pitch}),b.plot(f,s,h._promises)}},X.clean=function(h,s,a,p){for(var c=p._subplots.mapbox||[],i=0;i<c.length;i++){var y=c[i];!s[y]&&p[y]._subplot&&p[y]._subplot.destroy()}},X.toSVG=function(h){for(var s=h._fullLayout,a=s._subplots.mapbox,p=s._size,c=0;c<a.length;c++){var i=s[a[c]],y=i.domain,f=i._subplot.toImage("png");s._glimages.append("svg:image").attr({xmlns:t.svg,"xlink:href":f,x:p.l+p.w*y.x[0],y:p.t+p.h*(1-y.y[1]),width:p.w*(y.x[1]-y.x[0]),height:p.h*(y.y[1]-y.y[0]),preserveAspectRatio:"none"});var w=r.select(i._subplot.div);if(w.select(".mapboxgl-ctrl-logo").node().offsetParent!==null){var b=s._glimages.append("g");b.attr("transform",k(p.l+p.w*y.x[0]+10,p.t+p.h*(1-y.y[0])-31)),b.append("path").attr("d",u.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),b.append("path").attr("d",u.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),b.append("path").attr("d",u.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),b.append("polygon").attr("points",u.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var _=w.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),T=s._glimages.append("g"),L=T.append("text");L.text(_).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":_});var A=l.bBox(L.node()),I=p.w*(y.x[1]-y.x[0]);if(A.width>I/2){var P=_.split("|").join("<br>");L.text(P).attr("data-unformatted",P).call(n.convertToTspans,h),A=l.bBox(L.node())}L.attr("transform",k(-3,8-A.height)),T.insert("rect",".static-attribution").attr({x:-A.width-6,y:-A.height-3,width:A.width+6,height:A.height+3,fill:"rgba(255, 255, 255, 0.75)"});var S=1;A.width+6>I&&(S=I/(A.width+6));var E=[p.l+p.w*y.x[1],p.t+p.h*(1-y.y[0])];T.attr("transform",k(E[0],E[1])+x(S))}},X.updateFx=function(h){for(var s=h._fullLayout,a=s._subplots.mapbox,p=0;p<a.length;p++)s[a[p]]._subplot.updateFx(s)}},{"../../components/drawing":389,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/get_data":602,"./constants":620,"./layout_attributes":624,"./layout_defaults":625,"./mapbox":626,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],623:[function(g,Q,X){var m=g("../../lib"),v=g("../../lib/svg_text_utils").sanitizeHTML,k=g("./convert_text_opts"),x=g("./constants");function e(n,d){this.subplot=n,this.uid=n.uid+"-"+d,this.index=d,this.idSource="source-"+this.uid,this.idLayer=x.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var t=e.prototype;function r(n){if(!n.visible)return!1;var d=n.source;if(Array.isArray(d)&&d.length>0){for(var u=0;u<d.length;u++)if(typeof d[u]!="string"||d[u].length===0)return!1;return!0}return m.isPlainObject(d)||typeof d=="string"&&d.length>0}function l(n){var d={},u={};switch(n.type){case"circle":m.extendFlat(u,{"circle-radius":n.circle.radius,"circle-color":n.color,"circle-opacity":n.opacity});break;case"line":m.extendFlat(u,{"line-width":n.line.width,"line-color":n.color,"line-opacity":n.opacity,"line-dasharray":n.line.dash});break;case"fill":m.extendFlat(u,{"fill-color":n.color,"fill-outline-color":n.fill.outlinecolor,"fill-opacity":n.opacity});break;case"symbol":var o=n.symbol,h=k(o.textposition,o.iconsize);m.extendFlat(d,{"icon-image":o.icon+"-15","icon-size":o.iconsize/10,"text-field":o.text,"text-size":o.textfont.size,"text-anchor":h.anchor,"text-offset":h.offset,"symbol-placement":o.placement}),m.extendFlat(u,{"icon-color":n.color,"text-color":o.textfont.color,"text-opacity":n.opacity});break;case"raster":m.extendFlat(u,{"raster-fade-duration":0,"raster-opacity":n.opacity})}return{layout:d,paint:u}}t.update=function(n){this.visible?this.needsNewImage(n)?this.updateImage(n):this.needsNewSource(n)?(this.removeLayer(),this.updateSource(n),this.updateLayer(n)):this.needsNewLayer(n)?this.updateLayer(n):this.updateStyle(n):(this.updateSource(n),this.updateLayer(n)),this.visible=r(n)},t.needsNewImage=function(n){return this.subplot.map.getSource(this.idSource)&&this.sourceType==="image"&&n.sourcetype==="image"&&(this.source!==n.source||JSON.stringify(this.coordinates)!==JSON.stringify(n.coordinates))},t.needsNewSource=function(n){return this.sourceType!==n.sourcetype||JSON.stringify(this.source)!==JSON.stringify(n.source)||this.layerType!==n.type},t.needsNewLayer=function(n){return this.layerType!==n.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},t.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},t.updateImage=function(n){this.subplot.map.getSource(this.idSource).updateImage({url:n.source,coordinates:n.coordinates});var d=this.findFollowingMapboxLayerId(this.lookupBelow());d!==null&&this.subplot.map.moveLayer(this.idLayer,d)},t.updateSource=function(n){var d=this.subplot.map;if(d.getSource(this.idSource)&&d.removeSource(this.idSource),this.sourceType=n.sourcetype,this.source=n.source,r(n)){var u=function(o){var h,s=o.sourcetype,a=o.source,p={type:s};return s==="geojson"?h="data":s==="vector"?h=typeof a=="string"?"url":"tiles":s==="raster"?(h="tiles",p.tileSize=256):s==="image"&&(h="url",p.coordinates=o.coordinates),p[h]=a,o.sourceattribution&&(p.attribution=v(o.sourceattribution)),p}(n);d.addSource(this.idSource,u)}},t.findFollowingMapboxLayerId=function(n){if(n==="traces")for(var d=this.subplot.getMapLayers(),u=0;u<d.length;u++){var o=d[u].id;if(typeof o=="string"&&o.indexOf(x.traceLayerPrefix)===0){n=o;break}}return n},t.updateLayer=function(n){var d=this.subplot,u=l(n),o=this.lookupBelow(),h=this.findFollowingMapboxLayerId(o);this.removeLayer(),r(n)&&d.addLayer({id:this.idLayer,source:this.idSource,"source-layer":n.sourcelayer||"",type:n.type,minzoom:n.minzoom,maxzoom:n.maxzoom,layout:u.layout,paint:u.paint},h),this.layerType=n.type,this.below=o},t.updateStyle=function(n){if(r(n)){var d=l(n);this.subplot.setOptions(this.idLayer,"setLayoutProperty",d.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",d.paint)}},t.removeLayer=function(){var n=this.subplot.map;n.getLayer(this.idLayer)&&n.removeLayer(this.idLayer)},t.dispose=function(){var n=this.subplot.map;n.getLayer(this.idLayer)&&n.removeLayer(this.idLayer),n.getSource(this.idSource)&&n.removeSource(this.idSource)},Q.exports=function(n,d,u){var o=new e(n,d);return o.update(u),o}},{"../../lib":515,"../../lib/svg_text_utils":541,"./constants":620,"./convert_text_opts":621}],624:[function(g,Q,X){var m=g("../../lib"),v=g("../../components/color").defaultLine,k=g("../domain").attributes,x=g("../font_attributes"),e=g("../../traces/scatter/attributes").textposition,t=g("../../plot_api/edit_types").overrideAll,r=g("../../plot_api/plot_template").templatedArray,l=g("./constants"),n=x({});n.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(Q.exports=t({_arrayAttrRegexps:[m.counterRegex("mapbox",".layers",!0)],domain:k({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:l.styleValuesMapbox.concat(l.styleValuesNonMapbox),dflt:l.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:r("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:v},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:v}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:n,textposition:m.extendFlat({},e,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color":367,"../../lib":515,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../domain":593,"../font_attributes":594,"./constants":620}],625:[function(g,Q,X){var m=g("../../lib"),v=g("../subplot_defaults"),k=g("../array_container_defaults"),x=g("./layout_attributes");function e(r,l,n,d){n("accesstoken",d.accessToken),n("style"),n("center.lon"),n("center.lat"),n("zoom"),n("bearing"),n("pitch"),k(r,l,{name:"layers",handleItemDefaults:t}),l._input=r}function t(r,l){function n(s,a){return m.coerce(r,l,x.layers,s,a)}if(n("visible")){var d,u=n("sourcetype"),o=u==="raster"||u==="image";n("source"),n("sourceattribution"),u==="vector"&&n("sourcelayer"),u==="image"&&n("coordinates"),o&&(d="raster");var h=n("type",d);o&&h!=="raster"&&(h=l.type="raster",m.log("Source types *raster* and *image* must drawn *raster* layer type.")),n("below"),n("color"),n("opacity"),n("minzoom"),n("maxzoom"),h==="circle"&&n("circle.radius"),h==="line"&&(n("line.width"),n("line.dash")),h==="fill"&&n("fill.outlinecolor"),h==="symbol"&&(n("symbol.icon"),n("symbol.iconsize"),n("symbol.text"),m.coerceFont(n,"symbol.textfont"),n("symbol.textposition"),n("symbol.placement"))}}Q.exports=function(r,l,n){v(r,l,n,{type:"mapbox",attributes:x,handleDefaults:e,partition:"y",accessToken:l._mapboxAccessToken})}},{"../../lib":515,"../array_container_defaults":561,"../subplot_defaults":641,"./layout_attributes":624}],626:[function(g,Q,X){var m=g("mapbox-gl/dist/mapbox-gl-unminified"),v=g("../../lib"),k=g("../../lib/geo_location_utils"),x=g("../../registry"),e=g("../cartesian/axes"),t=g("../../components/dragelement"),r=g("../../components/fx"),l=g("../../components/dragelement/helpers"),n=l.drawMode,d=l.selectMode,u=g("../../components/selections").prepSelect,o=g("../../components/selections").clearOutline,h=g("../../components/selections").clearSelectionsCache,s=g("../../components/selections").selectOnClick,a=g("./constants"),p=g("./layers");function c(_,T){this.id=T,this.gd=_;var L=_._fullLayout,A=_._context;this.container=L._glcontainer.node(),this.isStatic=A.staticPlot,this.uid=L._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(L),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var i=c.prototype;i.plot=function(_,T,L){var A,I=this,P=T[I.id];I.map&&P.accesstoken!==I.accessToken&&(I.map.remove(),I.map=null,I.styleObj=null,I.traceHash={},I.layerList=[]),A=I.map?new Promise(function(S,E){I.updateMap(_,T,S,E)}):new Promise(function(S,E){I.createMap(_,T,S,E)}),L.push(A)},i.createMap=function(_,T,L,A){var I=this,P=T[I.id],S=I.styleObj=f(P.style);I.accessToken=P.accesstoken;var E=I.map=new m.Map({container:I.div,style:S.style,center:b(P.center),zoom:P.zoom,bearing:P.bearing,pitch:P.pitch,interactive:!I.isStatic,preserveDrawingBuffer:I.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new m.AttributionControl({compact:!0}));E._canvas.style.left="0px",E._canvas.style.top="0px",I.rejectOnError(A),I.isStatic||I.initFx(_,T);var z=[];z.push(new Promise(function(D){E.once("load",D)})),z=z.concat(k.fetchTraceGeoData(_)),Promise.all(z).then(function(){I.fillBelowLookup(_,T),I.updateData(_),I.updateLayout(T),I.resolveOnRender(L)}).catch(A)},i.updateMap=function(_,T,L,A){var I=this,P=I.map,S=T[this.id];I.rejectOnError(A);var E=[],z=f(S.style);JSON.stringify(I.styleObj)!==JSON.stringify(z)&&(I.styleObj=z,P.setStyle(z.style),I.traceHash={},E.push(new Promise(function(D){P.once("styledata",D)}))),E=E.concat(k.fetchTraceGeoData(_)),Promise.all(E).then(function(){I.fillBelowLookup(_,T),I.updateData(_),I.updateLayout(T),I.resolveOnRender(L)}).catch(A)},i.fillBelowLookup=function(_,T){var L,A,I=T[this.id].layers,P=this.belowLookup={},S=!1;for(L=0;L<_.length;L++){var E=_[L][0].trace,z=E._module;typeof E.below=="string"?A=E.below:z.getBelow&&(A=z.getBelow(E,this)),A===""&&(S=!0),P["trace-"+E.uid]=A||""}for(L=0;L<I.length;L++){var D=I[L];A=typeof D.below=="string"?D.below:S?"traces":"",P["layout-"+L]=A}var U,H,Y={};for(U in P)Y[A=P[U]]?Y[A].push(U):Y[A]=[U];for(A in Y){var J=Y[A];if(J.length>1)for(L=0;L<J.length;L++)(U=J[L]).indexOf("trace-")===0?(H=U.split("trace-")[1],this.traceHash[H]&&(this.traceHash[H].below=null)):U.indexOf("layout-")===0&&(H=U.split("layout-")[1],this.layerList[H]&&(this.layerList[H].below=null))}};var y={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function f(_){var T={};return v.isPlainObject(_)?(T.id=_.id,T.style=_):typeof _=="string"?(T.id=_,a.styleValuesMapbox.indexOf(_)!==-1?T.style=w(_):a.stylesNonMapbox[_]?T.style=a.stylesNonMapbox[_]:T.style=_):(T.id=a.styleValueDflt,T.style=w(a.styleValueDflt)),T.transition={duration:0,delay:0},T}function w(_){return a.styleUrlPrefix+_+"-"+a.styleUrlSuffix}function b(_){return[_.lon,_.lat]}i.updateData=function(_){var T,L,A,I,P=this.traceHash,S=_.slice().sort(function(H,Y){return y[H[0].trace.type]-y[Y[0].trace.type]});for(A=0;A<S.length;A++){var E=S[A],z=!1;(T=P[(L=E[0].trace).uid])&&(T.type===L.type?(T.update(E),z=!0):T.dispose()),!z&&L._module&&(P[L.uid]=L._module.plot(this,E))}var D=Object.keys(P);e:for(A=0;A<D.length;A++){var U=D[A];for(I=0;I<_.length;I++)if(U===(L=_[I][0].trace).uid)continue e;(T=P[U]).dispose(),delete P[U]}},i.updateLayout=function(_){var T=this.map,L=_[this.id];this.dragging||this.wheeling||(T.setCenter(b(L.center)),T.setZoom(L.zoom),T.setBearing(L.bearing),T.setPitch(L.pitch)),this.updateLayers(_),this.updateFramework(_),this.updateFx(_),this.map.resize(),this.gd._context._scrollZoom.mapbox?T.scrollZoom.enable():T.scrollZoom.disable()},i.resolveOnRender=function(_){var T=this.map;T.on("render",function L(){T.loaded()&&(T.off("render",L),setTimeout(_,10))})},i.rejectOnError=function(_){var T=this.map;function L(){_(new Error(a.mapOnErrorMsg))}T.once("error",L),T.once("style.error",L),T.once("source.error",L),T.once("tile.error",L),T.once("layer.error",L)},i.createFramework=function(_){var T=this,L=T.div=document.createElement("div");L.id=T.uid,L.style.position="absolute",T.container.appendChild(L),T.xaxis={_id:"x",c2p:function(A){return T.project(A).x}},T.yaxis={_id:"y",c2p:function(A){return T.project(A).y}},T.updateFramework(_),T.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(T.mockAxis,_)},i.initFx=function(_,T){var L=this,A=L.gd,I=L.map;function P(){r.loneUnhover(T._hoverlayer)}function S(){var E=L.getView();A.emit("plotly_relayouting",L.getViewEditsWithDerived(E))}I.on("moveend",function(E){if(L.map){var z=A._fullLayout;if(E.originalEvent||L.wheeling){var D=z[L.id];x.call("_storeDirectGUIEdit",A.layout,z._preGUI,L.getViewEdits(D));var U=L.getView();D._input.center=D.center=U.center,D._input.zoom=D.zoom=U.zoom,D._input.bearing=D.bearing=U.bearing,D._input.pitch=D.pitch=U.pitch,A.emit("plotly_relayout",L.getViewEditsWithDerived(U))}E.originalEvent&&E.originalEvent.type==="mouseup"?L.dragging=!1:L.wheeling&&(L.wheeling=!1),z._rehover&&z._rehover()}}),I.on("wheel",function(){L.wheeling=!0}),I.on("mousemove",function(E){var z=L.div.getBoundingClientRect(),D=[E.originalEvent.offsetX,E.originalEvent.offsetY];E.target.getBoundingClientRect=function(){return z},L.xaxis.p2c=function(){return I.unproject(D).lng},L.yaxis.p2c=function(){return I.unproject(D).lat},A._fullLayout._rehover=function(){A._fullLayout._hoversubplot===L.id&&A._fullLayout[L.id]&&r.hover(A,E,L.id)},r.hover(A,E,L.id),A._fullLayout._hoversubplot=L.id}),I.on("dragstart",function(){L.dragging=!0,P()}),I.on("zoomstart",P),I.on("mouseout",function(){A._fullLayout._hoversubplot=null}),I.on("drag",S),I.on("zoom",S),I.on("dblclick",function(){var E=A._fullLayout[L.id];x.call("_storeDirectGUIEdit",A.layout,A._fullLayout._preGUI,L.getViewEdits(E));var z=L.viewInitial;I.setCenter(b(z.center)),I.setZoom(z.zoom),I.setBearing(z.bearing),I.setPitch(z.pitch);var D=L.getView();E._input.center=E.center=D.center,E._input.zoom=E.zoom=D.zoom,E._input.bearing=E.bearing=D.bearing,E._input.pitch=E.pitch=D.pitch,A.emit("plotly_doubleclick",null),A.emit("plotly_relayout",L.getViewEditsWithDerived(D))}),L.clearOutline=function(){h(L.dragOptions),o(L.dragOptions.gd)},L.onClickInPanFn=function(E){return function(z){var D=A._fullLayout.clickmode;D.indexOf("select")>-1&&s(z.originalEvent,A,[L.xaxis],[L.yaxis],L.id,E),D.indexOf("event")>-1&&r.click(A,z.originalEvent)}}},i.updateFx=function(_){var T=this,L=T.map,A=T.gd;if(!T.isStatic){var I,P=_.dragmode;I=function(z,D){D.isRect?(z.range={})[T.id]=[E([D.xmin,D.ymin]),E([D.xmax,D.ymax])]:(z.lassoPoints={})[T.id]=D.map(E)};var S=T.dragOptions;T.dragOptions=v.extendDeep(S||{},{dragmode:_.dragmode,element:T.div,gd:A,plotinfo:{id:T.id,domain:_[T.id].domain,xaxis:T.xaxis,yaxis:T.yaxis,fillRangeItems:I},xaxes:[T.xaxis],yaxes:[T.yaxis],subplot:T.id}),L.off("click",T.onClickInPanHandler),d(P)||n(P)?(L.dragPan.disable(),L.on("zoomstart",T.clearSelect),T.dragOptions.prepFn=function(z,D,U){u(z,D,U,T.dragOptions,P)},t.init(T.dragOptions)):(L.dragPan.enable(),L.off("zoomstart",T.clearSelect),T.div.onmousedown=null,T.div.ontouchstart=null,T.div.removeEventListener("touchstart",T.div._ontouchstart),T.onClickInPanHandler=T.onClickInPanFn(T.dragOptions),L.on("click",T.onClickInPanHandler))}function E(z){var D=T.map.unproject(z);return[D.lng,D.lat]}},i.updateFramework=function(_){var T=_[this.id].domain,L=_._size,A=this.div.style;A.width=L.w*(T.x[1]-T.x[0])+"px",A.height=L.h*(T.y[1]-T.y[0])+"px",A.left=L.l+T.x[0]*L.w+"px",A.top=L.t+(1-T.y[1])*L.h+"px",this.xaxis._offset=L.l+T.x[0]*L.w,this.xaxis._length=L.w*(T.x[1]-T.x[0]),this.yaxis._offset=L.t+(1-T.y[1])*L.h,this.yaxis._length=L.h*(T.y[1]-T.y[0])},i.updateLayers=function(_){var T,L=_[this.id].layers,A=this.layerList;if(L.length!==A.length){for(T=0;T<A.length;T++)A[T].dispose();for(A=this.layerList=[],T=0;T<L.length;T++)A.push(p(this,T,L[T]))}else for(T=0;T<L.length;T++)A[T].update(L[T])},i.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},i.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},i.setOptions=function(_,T,L){for(var A in L)this.map[T](_,A,L[A])},i.getMapLayers=function(){return this.map.getStyle().layers},i.addLayer=function(_,T){var L=this.map;if(typeof T=="string"){if(T==="")return void L.addLayer(_,T);for(var A=this.getMapLayers(),I=0;I<A.length;I++)if(T===A[I].id)return void L.addLayer(_,T);v.warn(["Trying to add layer with *below* value",T,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}L.addLayer(_)},i.project=function(_){return this.map.project(new m.LngLat(_[0],_[1]))},i.getView=function(){var _=this.map,T=_.getCenter(),L={lon:T.lng,lat:T.lat},A=_.getCanvas(),I=parseInt(A.style.width),P=parseInt(A.style.height);return{center:L,zoom:_.getZoom(),bearing:_.getBearing(),pitch:_.getPitch(),_derived:{coordinates:[_.unproject([0,0]).toArray(),_.unproject([I,0]).toArray(),_.unproject([I,P]).toArray(),_.unproject([0,P]).toArray()]}}},i.getViewEdits=function(_){for(var T=this.id,L=["center","zoom","bearing","pitch"],A={},I=0;I<L.length;I++){var P=L[I];A[T+"."+P]=_[P]}return A},i.getViewEditsWithDerived=function(_){var T=this.id,L=this.getViewEdits(_);return L[T+"._derived"]=_._derived,L},Q.exports=c},{"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/fx":407,"../../components/selections":455,"../../lib":515,"../../lib/geo_location_utils":508,"../../registry":647,"../cartesian/axes":566,"./constants":620,"./layers":623,"mapbox-gl/dist/mapbox-gl-unminified":239}],627:[function(g,Q,X){Q.exports=function(m){var v=m.editType;return{t:{valType:"number",dflt:0,editType:v},r:{valType:"number",dflt:0,editType:v},b:{valType:"number",dflt:0,editType:v},l:{valType:"number",dflt:0,editType:v},editType:v}}},{}],628:[function(g,Q,X){var m=g("@plotly/d3"),v=g("d3-time-format").timeFormatLocale,k=g("d3-format").formatLocale,x=g("fast-isnumeric"),e=g("../registry"),t=g("../plot_api/plot_schema"),r=g("../plot_api/plot_template"),l=g("../lib"),n=g("../components/color"),d=g("../constants/numerical").BADNUM,u=g("./cartesian/axis_ids"),o=g("../components/shapes/handle_outline").clearOutline,h=g("./animation_attributes"),s=g("./frame_attributes"),a=g("../plots/get_data").getModuleCalcData,p=l.relinkPrivateKeys,c=l._,i=Q.exports={};l.extendFlat(i,e),i.attributes=g("./attributes"),i.attributes.type.values=i.allTypes,i.fontAttrs=g("./font_attributes"),i.layoutAttributes=g("./layout_attributes"),i.fontWeight="normal";var y=i.transformsRegistry,f=g("./command");i.executeAPICommand=f.executeAPICommand,i.computeAPICommandBindings=f.computeAPICommandBindings,i.manageCommandObserver=f.manageCommandObserver,i.hasSimpleAPICommandBindings=f.hasSimpleAPICommandBindings,i.redrawText=function(H){return H=l.getGraphDiv(H),new Promise(function(Y){setTimeout(function(){H._fullLayout&&(e.getComponentMethod("annotations","draw")(H),e.getComponentMethod("legend","draw")(H),e.getComponentMethod("colorbar","draw")(H),Y(i.previousPromises(H)))},300)})},i.resize=function(H){var Y;H=l.getGraphDiv(H);var J=new Promise(function(W,Z){H&&!l.isHidden(H)||Z(new Error("Resize must be passed a displayed plot div element.")),H._redrawTimer&&clearTimeout(H._redrawTimer),H._resolveResize&&(Y=H._resolveResize),H._resolveResize=W,H._redrawTimer=setTimeout(function(){if(!H.layout||H.layout.width&&H.layout.height||l.isHidden(H))W(H);else{delete H.layout.width,delete H.layout.height;var re=H.changed;H.autoplay=!0,e.call("relayout",H,{autosize:!0}).then(function(){H.changed=re,H._resolveResize===W&&(delete H._resolveResize,W(H))})}},100)});return Y&&Y(J),J},i.previousPromises=function(H){if((H._promises||[]).length)return Promise.all(H._promises).then(function(){H._promises=[]})},i.addLinks=function(H){if(H._context.showLink||H._context.showSources){var Y=H._fullLayout,J=l.ensureSingle(Y._paper,"text","js-plot-link-container",function(j){j.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:n.defaultLine,"pointer-events":"all"}).each(function(){var ee=m.select(this);ee.append("tspan").classed("js-link-to-tool",!0),ee.append("tspan").classed("js-link-spacer",!0),ee.append("tspan").classed("js-sourcelinks",!0)})}),W=J.node(),Z={y:Y._paper.attr("height")-9};document.body.contains(W)&&W.getComputedTextLength()>=Y.width-20?(Z["text-anchor"]="start",Z.x=5):(Z["text-anchor"]="end",Z.x=Y._paper.attr("width")-7),J.attr(Z);var re=J.select(".js-link-to-tool"),V=J.select(".js-link-spacer"),B=J.select(".js-sourcelinks");H._context.showSources&&H._context.showSources(H),H._context.showLink&&function(j,ee){ee.text("");var N=ee.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(j._context.linkText+" "+String.fromCharCode(187));if(j._context.sendData)N.on("click",function(){i.sendDataToCloud(j)});else{var $=window.location.pathname.split("/"),K=window.location.search;N.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+$[2].split(".")[0]+"/"+$[1]+K})}}(H,re),V.text(re.text()&&B.text()?" - ":"")}},i.sendDataToCloud=function(H){var Y=(window.PLOTLYENV||{}).BASE_URL||H._context.plotlyServerURL;if(Y){H.emit("plotly_beforeexport");var J=m.select(H).append("div").attr("id","hiddenform").style("display","none"),W=J.append("form").attr({action:Y+"/external",method:"post",target:"_blank"});return W.append("input").attr({type:"text",name:"data"}).node().value=i.graphJson(H,!1,"keepdata"),W.node().submit(),J.remove(),H.emit("plotly_afterexport"),!1}};var w=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],b=["year","month","dayMonth","dayMonthYear"];function _(H,Y){var J=H._context.locale;J||(J="en-US");var W=!1,Z={};function re($){for(var K=!0,te=0;te<Y.length;te++){var ie=Y[te];Z[ie]||($[ie]?Z[ie]=$[ie]:K=!1)}K&&(W=!0)}for(var V=0;V<2;V++){for(var B=H._context.locales,j=0;j<2;j++){var ee=(B[J]||{}).format;if(ee&&(re(ee),W))break;B=e.localeRegistry}var N=J.split("-")[0];if(W||N===J)break;J=N}return W||re(e.localeRegistry.en.format),Z}function T(H,Y){var J={_fullLayout:Y},W=H._id.charAt(0)==="x",Z=H._mainAxis._anchorAxis,re="",V="",B="";if(Z&&(B=Z._mainAxis._id,re=W?H._id+B:B+H._id),!re||!Y._plots[re]){re="";for(var j=H._counterAxes,ee=0;ee<j.length;ee++){var N=j[ee],$=W?H._id+N:N+H._id;V||(V=$);var K=u.getFromId(J,N);if(B&&K.overlaying===B){re=$;break}}}return re||V}function L(H){var Y=H.transforms;if(Array.isArray(Y)&&Y.length)for(var J=0;J<Y.length;J++){var W=Y[J],Z=W._module||y[W.type];if(Z&&Z.makesData)return!0}return!1}function A(H,Y,J,W){for(var Z=H.transforms,re=[H],V=0;V<Z.length;V++){var B=Z[V],j=y[B.type];j&&j.transform&&(re=j.transform(re,{transform:B,fullTrace:H,fullData:Y,layout:J,fullLayout:W,transformIndex:V}))}return re}function I(H){return typeof H=="string"&&H.substr(H.length-2)==="px"&&parseFloat(H)}function P(H){var Y=H.margin;if(!H._size){var J=H._size={l:Math.round(Y.l),r:Math.round(Y.r),t:Math.round(Y.t),b:Math.round(Y.b),p:Math.round(Y.pad)};J.w=Math.round(H.width)-J.l-J.r,J.h=Math.round(H.height)-J.t-J.b}H._pushmargin||(H._pushmargin={}),H._pushmarginIds||(H._pushmarginIds={})}i.supplyDefaults=function(H,Y){var J=Y&&Y.skipUpdateCalc,W=H._fullLayout||{};if(W._skipDefaults)delete W._skipDefaults;else{var Z,re=H._fullLayout={},V=H.layout||{},B=H._fullData||[],j=H._fullData=[],ee=H.data||[],N=H.calcdata||[],$=H._context||{};H._transitionData||i.createTransitionData(H),re._dfltTitle={plot:c(H,"Click to enter Plot title"),x:c(H,"Click to enter X axis title"),y:c(H,"Click to enter Y axis title"),colorbar:c(H,"Click to enter Colorscale title"),annotation:c(H,"new text")},re._traceWord=c(H,"trace");var K=_(H,w);if(re._mapboxAccessToken=$.mapboxAccessToken,W._initialAutoSizeIsDone){var te=W.width,ie=W.height;i.supplyLayoutGlobalDefaults(V,re,K),V.width||(re.width=te),V.height||(re.height=ie),i.sanitizeMargins(re)}else{i.supplyLayoutGlobalDefaults(V,re,K);var le=!V.width||!V.height,se=re.autosize,ve=$.autosizable;le&&(se||ve)?i.plotAutoSize(H,V,re):le&&i.sanitizeMargins(re),!se&&le&&(V.width=re.width,V.height=re.height)}re._d3locale=function(Pe,ze){return Pe.decimal=ze.charAt(0),Pe.thousands=ze.charAt(1),{numberFormat:function(Ge){try{Ge=k(Pe).format(l.adjustFormat(Ge))}catch{return l.warnBadFormat(Ge),l.noFormat}return Ge},timeFormat:v(Pe).utcFormat}}(K,re.separators),re._extraFormat=_(H,b),re._initialAutoSizeIsDone=!0,re._dataLength=ee.length,re._modules=[],re._visibleModules=[],re._basePlotModules=[];var fe=re._subplots=function(){var Pe,ze,Ge=e.collectableSubplotTypes,$e={};if(!Ge){Ge=[];var ot=e.subplotsRegistry;for(var vt in ot){var bt=ot[vt].attr;if(bt&&(Ge.push(vt),Array.isArray(bt)))for(ze=0;ze<bt.length;ze++)l.pushUnique(Ge,bt[ze])}}for(Pe=0;Pe<Ge.length;Pe++)$e[Ge[Pe]]=[];return $e}(),ye=re._splomAxes={x:{},y:{}},Ae=re._splomSubplots={};re._splomGridDflt={},re._scatterStackOpts={},re._firstScatter={},re._alignmentOpts={},re._colorAxes={},re._requestRangeslider={},re._traceUids=function(Pe,ze){var Ge,$e,ot=ze.length,vt=[];for(Ge=0;Ge<Pe.length;Ge++){var bt=Pe[Ge]._fullInput;bt!==$e&&vt.push(bt),$e=bt}var yt=vt.length,tt=new Array(ot),Ke={};function mt(Xt,Gt){tt[Gt]=Xt,Ke[Xt]=1}function Ft(Xt,Gt){if(Xt&&typeof Xt=="string"&&!Ke[Xt])return mt(Xt,Gt),!0}for(Ge=0;Ge<ot;Ge++){var Vt=ze[Ge].uid;typeof Vt=="number"&&(Vt=String(Vt)),Ft(Vt,Ge)||Ge<yt&&Ft(vt[Ge].uid,Ge)||mt(l.randstr(Ke),Ge)}return tt}(B,ee),re._globalTransforms=(H._context||{}).globalTransforms,i.supplyDataDefaults(ee,j,V,re);var pe=Object.keys(ye.x),ge=Object.keys(ye.y);if(pe.length>1&&ge.length>1){for(e.getComponentMethod("grid","sizeDefaults")(V,re),Z=0;Z<pe.length;Z++)l.pushUnique(fe.xaxis,pe[Z]);for(Z=0;Z<ge.length;Z++)l.pushUnique(fe.yaxis,ge[Z]);for(var we in Ae)l.pushUnique(fe.cartesian,we)}if(re._has=i._hasPlotType.bind(re),B.length===j.length)for(Z=0;Z<j.length;Z++)p(j[Z],B[Z]);i.supplyLayoutModuleDefaults(V,re,j,H._transitionData);var oe=re._visibleModules,de=[];for(Z=0;Z<oe.length;Z++){var Te=oe[Z].crossTraceDefaults;Te&&l.pushUnique(de,Te)}for(Z=0;Z<de.length;Z++)de[Z](j,re);re._hasOnlyLargeSploms=re._basePlotModules.length===1&&re._basePlotModules[0].name==="splom"&&pe.length>15&&ge.length>15&&re.shapes.length===0&&re.images.length===0,i.linkSubplots(j,re,B,W),i.cleanPlot(j,re,B,W);var Ee=!(!W._has||!W._has("gl2d")),Me=!(!re._has||!re._has("gl2d")),De=!(!W._has||!W._has("cartesian"))||Ee,Ie=!(!re._has||!re._has("cartesian"))||Me;De&&!Ie?W._bgLayer.remove():Ie&&!De&&(re._shouldCreateBgLayer=!0),W._zoomlayer&&!H._dragging&&o({_fullLayout:W}),function(Pe,ze){var Ge,$e=[];ze.meta&&(Ge=ze._meta={meta:ze.meta,layout:{meta:ze.meta}});for(var ot=0;ot<Pe.length;ot++){var vt=Pe[ot];vt.meta?$e[vt.index]=vt._meta={meta:vt.meta}:ze.meta&&(vt._meta={meta:ze.meta}),ze.meta&&(vt._meta.layout={meta:ze.meta})}$e.length&&(Ge||(Ge=ze._meta={}),Ge.data=$e)}(j,re),p(re,W),e.getComponentMethod("colorscale","crossTraceDefaults")(j,re),re._preGUI||(re._preGUI={}),re._tracePreGUI||(re._tracePreGUI={});var Oe,Ze=re._tracePreGUI,Fe={};for(Oe in Ze)Fe[Oe]="old";for(Z=0;Z<j.length;Z++)Fe[Oe=j[Z]._fullInput.uid]||(Ze[Oe]={}),Fe[Oe]="new";for(Oe in Fe)Fe[Oe]==="old"&&delete Ze[Oe];P(re),e.getComponentMethod("rangeslider","makeData")(re),J||N.length!==j.length||i.supplyDefaultsUpdateCalc(N,j)}},i.supplyDefaultsUpdateCalc=function(H,Y){for(var J=0;J<Y.length;J++){var W=Y[J],Z=(H[J]||[])[0];if(Z&&Z.trace){var re=Z.trace;if(re._hasCalcTransform){var V,B,j,ee=re._arrayAttrs;for(V=0;V<ee.length;V++)B=ee[V],j=l.nestedProperty(re,B).get().slice(),l.nestedProperty(W,B).set(j)}Z.trace=W}}},i.createTransitionData=function(H){H._transitionData||(H._transitionData={}),H._transitionData._frames||(H._transitionData._frames=[]),H._transitionData._frameHash||(H._transitionData._frameHash={}),H._transitionData._counter||(H._transitionData._counter=0),H._transitionData._interruptCallbacks||(H._transitionData._interruptCallbacks=[])},i._hasPlotType=function(H){var Y,J=this._basePlotModules||[];for(Y=0;Y<J.length;Y++)if(J[Y].name===H)return!0;var W=this._modules||[];for(Y=0;Y<W.length;Y++){var Z=W[Y].name;if(Z===H)return!0;var re=e.modules[Z];if(re&&re.categories[H])return!0}return!1},i.cleanPlot=function(H,Y,J,W){var Z,re,V=W._basePlotModules||[];for(Z=0;Z<V.length;Z++){var B=V[Z];B.clean&&B.clean(H,Y,J,W)}var j=W._has&&W._has("gl"),ee=Y._has&&Y._has("gl");j&&!ee&&W._glcontainer!==void 0&&(W._glcontainer.selectAll(".gl-canvas").remove(),W._glcontainer.selectAll(".no-webgl").remove(),W._glcanvas=null);var N=!!W._infolayer;e:for(Z=0;Z<J.length;Z++){var $=J[Z].uid;for(re=0;re<H.length;re++)if($===H[re].uid)continue e;N&&W._infolayer.select(".cb"+$).remove()}},i.linkSubplots=function(H,Y,J,W){var Z,re,V=W._plots||{},B=Y._plots={},j=Y._subplots,ee={_fullData:H,_fullLayout:Y},N=j.cartesian.concat(j.gl2d||[]);for(Z=0;Z<N.length;Z++){var $,K=N[Z],te=V[K],ie=u.getFromId(ee,K,"x"),le=u.getFromId(ee,K,"y");for(te?$=B[K]=te:($=B[K]={}).id=K,ie._counterAxes.push(le._id),le._counterAxes.push(ie._id),ie._subplotsWith.push(K),le._subplotsWith.push(K),$.xaxis=ie,$.yaxis=le,$._hasClipOnAxisFalse=!1,re=0;re<H.length;re++){var se=H[re];if(se.xaxis===$.xaxis._id&&se.yaxis===$.yaxis._id&&se.cliponaxis===!1){$._hasClipOnAxisFalse=!0;break}}}var ve,fe=u.list(ee,null,!0);for(Z=0;Z<fe.length;Z++){var ye=null;(ve=fe[Z]).overlaying&&(ye=u.getFromId(ee,ve.overlaying))&&ye.overlaying&&(ve.overlaying=!1,ye=null),ve._mainAxis=ye||ve,ye&&(ve.domain=ye.domain.slice()),ve._anchorAxis=ve.anchor==="free"?null:u.getFromId(ee,ve.anchor)}for(Z=0;Z<fe.length;Z++)if((ve=fe[Z])._counterAxes.sort(u.idSort),ve._subplotsWith.sort(l.subplotSort),ve._mainSubplot=T(ve,Y),ve._counterAxes.length&&(ve.spikemode&&ve.spikemode.indexOf("across")!==-1||ve.automargin&&ve.mirror&&ve.anchor!=="free"||e.getComponentMethod("rangeslider","isVisible")(ve))){var Ae=1,pe=0;for(re=0;re<ve._counterAxes.length;re++){var ge=u.getFromId(ee,ve._counterAxes[re]);Ae=Math.min(Ae,ge.domain[0]),pe=Math.max(pe,ge.domain[1])}Ae<pe&&(ve._counterDomainMin=Ae,ve._counterDomainMax=pe)}},i.clearExpandedTraceDefaultColors=function(H){var Y,J,W;for(J=[],(Y=H._module._colorAttrs)||(H._module._colorAttrs=Y=[],t.crawl(H._module.attributes,function(Z,re,V,B){J[B]=re,J.length=B+1,Z.valType==="color"&&Z.dflt===void 0&&Y.push(J.join("."))})),W=0;W<Y.length;W++)l.nestedProperty(H,"_input."+Y[W]).get()||l.nestedProperty(H,Y[W]).set(null)},i.supplyDataDefaults=function(H,Y,J,W){var Z,re,V,B=W._modules,j=W._visibleModules,ee=W._basePlotModules,N=0,$=0;function K(we){Y.push(we);var oe=we._module;oe&&(l.pushUnique(B,oe),we.visible===!0&&l.pushUnique(j,oe),l.pushUnique(ee,we._module.basePlotModule),N++,we._input.visible!==!1&&$++)}W._transformModules=[];var te={},ie=[],le=(J.template||{}).data||{},se=r.traceTemplater(le);for(Z=0;Z<H.length;Z++){if(V=H[Z],(re=se.newTrace(V)).uid=W._traceUids[Z],i.supplyTraceDefaults(V,re,$,W,Z),re.index=Z,re._input=V,re._expandedIndex=N,re.transforms&&re.transforms.length)for(var ve=V.visible!==!1&&re.visible===!1,fe=A(re,Y,J,W),ye=0;ye<fe.length;ye++){var Ae=fe[ye],pe={_template:re._template,type:re.type,uid:re.uid+ye};ve&&Ae.visible===!1&&delete Ae.visible,i.supplyTraceDefaults(Ae,pe,N,W,Z),p(pe,Ae),pe.index=Z,pe._input=V,pe._fullInput=re,pe._expandedIndex=N,pe._expandedInput=Ae,K(pe)}else re._fullInput=re,re._expandedInput=re,K(re);e.traceIs(re,"carpetAxis")&&(te[re.carpet]=re),e.traceIs(re,"carpetDependent")&&ie.push(Z)}for(Z=0;Z<ie.length;Z++)if((re=Y[ie[Z]]).visible){var ge=te[re.carpet];re._carpet=ge,ge&&ge.visible?(re.xaxis=ge.xaxis,re.yaxis=ge.yaxis):re.visible=!1}},i.supplyAnimationDefaults=function(H){var Y;H=H||{};var J={};function W(Z,re){return l.coerce(H||{},J,h,Z,re)}if(W("mode"),W("direction"),W("fromcurrent"),Array.isArray(H.frame))for(J.frame=[],Y=0;Y<H.frame.length;Y++)J.frame[Y]=i.supplyAnimationFrameDefaults(H.frame[Y]||{});else J.frame=i.supplyAnimationFrameDefaults(H.frame||{});if(Array.isArray(H.transition))for(J.transition=[],Y=0;Y<H.transition.length;Y++)J.transition[Y]=i.supplyAnimationTransitionDefaults(H.transition[Y]||{});else J.transition=i.supplyAnimationTransitionDefaults(H.transition||{});return J},i.supplyAnimationFrameDefaults=function(H){var Y={};function J(W,Z){return l.coerce(H||{},Y,h.frame,W,Z)}return J("duration"),J("redraw"),Y},i.supplyAnimationTransitionDefaults=function(H){var Y={};function J(W,Z){return l.coerce(H||{},Y,h.transition,W,Z)}return J("duration"),J("easing"),Y},i.supplyFrameDefaults=function(H){var Y={};function J(W,Z){return l.coerce(H,Y,s,W,Z)}return J("group"),J("name"),J("traces"),J("baseframe"),J("data"),J("layout"),Y},i.supplyTraceDefaults=function(H,Y,J,W,Z){var re,V=W.colorway||n.defaults,B=V[J%V.length];function j(fe,ye){return l.coerce(H,Y,i.attributes,fe,ye)}var ee=j("visible");j("type"),j("name",W._traceWord+" "+Z),j("uirevision",W.uirevision);var N=i.getModule(Y);if(Y._module=N,N){var $=N.basePlotModule,K=$.attr,te=$.attributes;if(K&&te){var ie=W._subplots,le="";if(ee||$.name!=="gl2d"){if(Array.isArray(K))for(re=0;re<K.length;re++){var se=K[re],ve=l.coerce(H,Y,te,se);ie[se]&&l.pushUnique(ie[se],ve),le+=ve}else le=l.coerce(H,Y,te,K);ie[$.name]&&l.pushUnique(ie[$.name],le)}}}return ee&&(j("customdata"),j("ids"),j("meta"),e.traceIs(Y,"showLegend")?(l.coerce(H,Y,N.attributes.showlegend?N.attributes:i.attributes,"showlegend"),j("legendwidth"),j("legendgroup"),j("legendgrouptitle.text"),j("legendrank"),Y._dfltShowLegend=!0):Y._dfltShowLegend=!1,N&&N.supplyDefaults(H,Y,B,W),e.traceIs(Y,"noOpacity")||j("opacity"),e.traceIs(Y,"notLegendIsolatable")&&(Y.visible=!!Y.visible),e.traceIs(Y,"noHover")||(Y.hovertemplate||l.coerceHoverinfo(H,Y,W),Y.type!=="parcats"&&e.getComponentMethod("fx","supplyDefaults")(H,Y,B,W)),N&&N.selectPoints&&j("selectedpoints"),i.supplyTransformDefaults(H,Y,W)),Y},i.hasMakesDataTransform=L,i.supplyTransformDefaults=function(H,Y,J){if(Y._length||L(H)){var W=J._globalTransforms||[],Z=J._transformModules||[];if(Array.isArray(H.transforms)||W.length!==0)for(var re=H.transforms||[],V=W.concat(re),B=Y.transforms=[],j=0;j<V.length;j++){var ee,N=V[j],$=N.type,K=y[$],te=!(N._module&&N._module===K),ie=K&&typeof K.transform=="function";K||l.warn("Unrecognized transform type "+$+"."),K&&K.supplyDefaults&&(te||ie)?((ee=K.supplyDefaults(N,Y,J,H)).type=$,ee._module=K,l.pushUnique(Z,K)):ee=l.extendFlat({},N),B.push(ee)}}},i.supplyLayoutGlobalDefaults=function(H,Y,J){function W(j,ee){return l.coerce(H,Y,i.layoutAttributes,j,ee)}var Z=H.template;l.isPlainObject(Z)&&(Y.template=Z,Y._template=Z.layout,Y._dataTemplate=Z.data),W("autotypenumbers");var re=l.coerceFont(W,"font"),V=re.size;l.coerceFont(W,"title.font",l.extendFlat({},re,{size:Math.round(1.4*V)})),W("title.text",Y._dfltTitle.plot),W("title.xref"),W("title.yref"),W("title.x"),W("title.y"),W("title.xanchor"),W("title.yanchor"),W("title.pad.t"),W("title.pad.r"),W("title.pad.b"),W("title.pad.l"),W("uniformtext.mode")&&W("uniformtext.minsize"),W("autosize",!(H.width&&H.height)),W("width"),W("height"),W("minreducedwidth"),W("minreducedheight"),W("margin.l"),W("margin.r"),W("margin.t"),W("margin.b"),W("margin.pad"),W("margin.autoexpand"),H.width&&H.height&&i.sanitizeMargins(Y),e.getComponentMethod("grid","sizeDefaults")(H,Y),W("paper_bgcolor"),W("separators",J.decimal+J.thousands),W("hidesources"),W("colorway"),W("datarevision");var B=W("uirevision");W("editrevision",B),W("selectionrevision",B),e.getComponentMethod("modebar","supplyLayoutDefaults")(H,Y),e.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(H,Y,W),e.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(H,Y,W),W("meta"),l.isPlainObject(H.transition)&&(W("transition.duration"),W("transition.easing"),W("transition.ordering")),e.getComponentMethod("calendars","handleDefaults")(H,Y,"calendar"),e.getComponentMethod("fx","supplyLayoutGlobalDefaults")(H,Y,W)},i.plotAutoSize=function(H,Y,J){var W,Z,re=H._context||{},V=re.frameMargins,B=l.isPlotDiv(H);if(B&&H.emit("plotly_autosize"),re.fillFrame)W=window.innerWidth,Z=window.innerHeight,document.body.style.overflow="hidden";else{var j=B?window.getComputedStyle(H):{};if(W=I(j.width)||I(j.maxWidth)||J.width,Z=I(j.height)||I(j.maxHeight)||J.height,x(V)&&V>0){var ee=1-2*V;W=Math.round(ee*W),Z=Math.round(ee*Z)}}var N=i.layoutAttributes.width.min,$=i.layoutAttributes.height.min;W<N&&(W=N),Z<$&&(Z=$);var K=!Y.width&&Math.abs(J.width-W)>1,te=!Y.height&&Math.abs(J.height-Z)>1;(te||K)&&(K&&(J.width=W),te&&(J.height=Z)),H._initialAutoSize||(H._initialAutoSize={width:W,height:Z}),i.sanitizeMargins(J)},i.supplyLayoutModuleDefaults=function(H,Y,J,W){var Z,re,V,B=e.componentsRegistry,j=Y._basePlotModules,ee=e.subplotsRegistry.cartesian;for(Z in B)(V=B[Z]).includeBasePlot&&V.includeBasePlot(H,Y);for(var N in j.length||j.push(ee),Y._has("cartesian")&&(e.getComponentMethod("grid","contentDefaults")(H,Y),ee.finalizeSubplots(H,Y)),Y._subplots)Y._subplots[N].sort(l.subplotSort);for(re=0;re<j.length;re++)(V=j[re]).supplyLayoutDefaults&&V.supplyLayoutDefaults(H,Y,J);var $=Y._modules;for(re=0;re<$.length;re++)(V=$[re]).supplyLayoutDefaults&&V.supplyLayoutDefaults(H,Y,J);var K=Y._transformModules;for(re=0;re<K.length;re++)(V=K[re]).supplyLayoutDefaults&&V.supplyLayoutDefaults(H,Y,J,W);for(Z in B)(V=B[Z]).supplyLayoutDefaults&&V.supplyLayoutDefaults(H,Y,J)},i.purge=function(H){var Y=H._fullLayout||{};Y._glcontainer!==void 0&&(Y._glcontainer.selectAll(".gl-canvas").remove(),Y._glcontainer.remove(),Y._glcanvas=null),Y._modeBar&&Y._modeBar.destroy(),H._transitionData&&(H._transitionData._interruptCallbacks&&(H._transitionData._interruptCallbacks.length=0),H._transitionData._animationRaf&&window.cancelAnimationFrame(H._transitionData._animationRaf)),l.clearThrottle(),l.clearResponsive(H),delete H.data,delete H.layout,delete H._fullData,delete H._fullLayout,delete H.calcdata,delete H.empty,delete H.fid,delete H.undoqueue,delete H.undonum,delete H.autoplay,delete H.changed,delete H._promises,delete H._redrawTimer,delete H._hmlumcount,delete H._hmpixcount,delete H._transitionData,delete H._transitioning,delete H._initialAutoSize,delete H._transitioningWithDuration,delete H._dragging,delete H._dragged,delete H._dragdata,delete H._hoverdata,delete H._snapshotInProgress,delete H._editing,delete H._mouseDownTime,delete H._legendMouseDownTime,H.removeAllListeners&&H.removeAllListeners()},i.style=function(H){var Y,J=H._fullLayout._visibleModules,W=[];for(Y=0;Y<J.length;Y++){var Z=J[Y];Z.style&&l.pushUnique(W,Z.style)}for(Y=0;Y<W.length;Y++)W[Y](H)},i.sanitizeMargins=function(H){if(H&&H.margin){var Y,J=H.width,W=H.height,Z=H.margin,re=J-(Z.l+Z.r),V=W-(Z.t+Z.b);re<0&&(Y=(J-1)/(Z.l+Z.r),Z.l=Math.floor(Y*Z.l),Z.r=Math.floor(Y*Z.r)),V<0&&(Y=(W-1)/(Z.t+Z.b),Z.t=Math.floor(Y*Z.t),Z.b=Math.floor(Y*Z.b))}},i.clearAutoMarginIds=function(H){H._fullLayout._pushmarginIds={}},i.allowAutoMargin=function(H,Y){H._fullLayout._pushmarginIds[Y]=1},i.autoMargin=function(H,Y,J){var W=H._fullLayout,Z=W.width,re=W.height,V=W.margin,B=W.minreducedwidth,j=W.minreducedheight,ee=l.constrain(Z-V.l-V.r,2,B),N=l.constrain(re-V.t-V.b,2,j),$=Math.max(0,Z-ee),K=Math.max(0,re-N),te=W._pushmargin,ie=W._pushmarginIds;if(V.autoexpand!==!1){if(J){var le=J.pad;if(le===void 0&&(le=Math.min(12,V.l,V.r,V.t,V.b)),$){var se=(J.l+J.r)/$;se>1&&(J.l/=se,J.r/=se)}if(K){var ve=(J.t+J.b)/K;ve>1&&(J.t/=ve,J.b/=ve)}var fe=J.xl!==void 0?J.xl:J.x,ye=J.xr!==void 0?J.xr:J.x,Ae=J.yt!==void 0?J.yt:J.y,pe=J.yb!==void 0?J.yb:J.y;te[Y]={l:{val:fe,size:J.l+le},r:{val:ye,size:J.r+le},b:{val:pe,size:J.b+le},t:{val:Ae,size:J.t+le}},ie[Y]=1}else delete te[Y],delete ie[Y];if(!W._replotting)return i.doAutoMargin(H)}},i.doAutoMargin=function(H){var Y=H._fullLayout,J=Y.width,W=Y.height;Y._size||(Y._size={}),P(Y);var Z=Y._size,re=Y.margin,V=l.extendFlat({},Z),B=re.l,j=re.r,ee=re.t,N=re.b,$=Y._pushmargin,K=Y._pushmarginIds,te=Y.minreducedwidth,ie=Y.minreducedheight;if(Y.margin.autoexpand!==!1){for(var le in $)K[le]||delete $[le];for(var se in $.base={l:{val:0,size:B},r:{val:1,size:j},t:{val:1,size:ee},b:{val:0,size:N}},$){var ve=$[se].l||{},fe=$[se].b||{},ye=ve.val,Ae=ve.size,pe=fe.val,ge=fe.size;for(var we in $){if(x(Ae)&&$[we].r){var oe=$[we].r.val,de=$[we].r.size;if(oe>ye){var Te=(Ae*oe+(de-J)*ye)/(oe-ye),Ee=(de*(1-ye)+(Ae-J)*(1-oe))/(oe-ye);Te+Ee>B+j&&(B=Te,j=Ee)}}if(x(ge)&&$[we].t){var Me=$[we].t.val,De=$[we].t.size;if(Me>pe){var Ie=(ge*Me+(De-W)*pe)/(Me-pe),Oe=(De*(1-pe)+(ge-W)*(1-Me))/(Me-pe);Ie+Oe>N+ee&&(N=Ie,ee=Oe)}}}}}var Ze=l.constrain(J-re.l-re.r,2,te),Fe=l.constrain(W-re.t-re.b,2,ie),Pe=Math.max(0,J-Ze),ze=Math.max(0,W-Fe);if(Pe){var Ge=(B+j)/Pe;Ge>1&&(B/=Ge,j/=Ge)}if(ze){var $e=(N+ee)/ze;$e>1&&(N/=$e,ee/=$e)}if(Z.l=Math.round(B),Z.r=Math.round(j),Z.t=Math.round(ee),Z.b=Math.round(N),Z.p=Math.round(re.pad),Z.w=Math.round(J)-Z.l-Z.r,Z.h=Math.round(W)-Z.t-Z.b,!Y._replotting&&i.didMarginChange(V,Z)){"_redrawFromAutoMarginCount"in Y?Y._redrawFromAutoMarginCount++:Y._redrawFromAutoMarginCount=1;var ot=3*(1+Object.keys(K).length);if(Y._redrawFromAutoMarginCount<ot)return e.call("_doPlot",H);Y._size=V,l.warn("Too many auto-margin redraws.")}(function(vt){var bt=u.list(vt,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(yt){for(var tt=0;tt<bt.length;tt++){var Ke=bt[tt][yt];Ke&&Ke()}})})(H)};var S=["l","r","t","b","p","w","h"];function E(H,Y,J){var W=!1,Z=[i.previousPromises,function(){if(H._transitionData)return H._transitioning=!1,function(V){var B=Promise.resolve();if(!V)return B;for(;V.length;)B=B.then(V.shift());return B}(H._transitionData._interruptCallbacks)},J.prepareFn,i.rehover,i.reselect,function(){return H.emit("plotly_transitioning",[]),new Promise(function(V){H._transitioning=!0,Y.duration>0&&(H._transitioningWithDuration=!0),H._transitionData._interruptCallbacks.push(function(){W=!0}),J.redraw&&H._transitionData._interruptCallbacks.push(function(){return e.call("redraw",H)}),H._transitionData._interruptCallbacks.push(function(){H.emit("plotly_transitioninterrupted",[])});var B=0,j=0;function ee(){return B++,function(){j++,W||j!==B||function(N){!H._transitionData||(function($){if($)for(;$.length;)$.shift()}(H._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(J.redraw)return e.call("redraw",H)}).then(function(){H._transitioning=!1,H._transitioningWithDuration=!1,H.emit("plotly_transitioned",[])}).then(N))}(V)}}J.runFn(ee),setTimeout(ee())})}],re=l.syncOrAsync(Z,H);return re&&re.then||(re=Promise.resolve()),re.then(function(){return H})}i.didMarginChange=function(H,Y){for(var J=0;J<S.length;J++){var W=S[J],Z=H[W],re=Y[W];if(!x(Z)||Math.abs(re-Z)>1)return!0}return!1},i.graphJson=function(H,Y,J,W,Z,re){(Z&&Y&&!H._fullData||Z&&!Y&&!H._fullLayout)&&i.supplyDefaults(H);var V=Z?H._fullData:H.data,B=Z?H._fullLayout:H.layout,j=(H._transitionData||{})._frames;function ee(K,te){if(typeof K=="function")return te?"_function_":null;if(l.isPlainObject(K)){var ie,le={};return Object.keys(K).sort().forEach(function(se){if(["_","["].indexOf(se.charAt(0))===-1)if(typeof K[se]!="function"){if(J==="keepdata"){if(se.substr(se.length-3)==="src")return}else if(J==="keepstream"){if(typeof(ie=K[se+"src"])=="string"&&ie.indexOf(":")>0&&!l.isPlainObject(K.stream))return}else if(J!=="keepall"&&typeof(ie=K[se+"src"])=="string"&&ie.indexOf(":")>0)return;le[se]=ee(K[se],te)}else te&&(le[se]="_function")}),le}return Array.isArray(K)?K.map(function(se){return ee(se,te)}):l.isTypedArray(K)?l.simpleMap(K,l.identity):l.isJSDate(K)?l.ms2DateTimeLocal(+K):K}var N={data:(V||[]).map(function(K){var te=ee(K);return Y&&delete te.fit,te})};if(!Y&&(N.layout=ee(B),Z)){var $=B._size;N.layout.computed={margin:{b:$.b,l:$.l,r:$.r,t:$.t}}}return j&&(N.frames=ee(j)),re&&(N.config=ee(H._context,!0)),W==="object"?N:JSON.stringify(N)},i.modifyFrames=function(H,Y){var J,W,Z,re=H._transitionData._frames,V=H._transitionData._frameHash;for(J=0;J<Y.length;J++)switch((W=Y[J]).type){case"replace":Z=W.value;var B=(re[W.index]||{}).name,j=Z.name;re[W.index]=V[j]=Z,j!==B&&(delete V[B],V[j]=Z);break;case"insert":V[(Z=W.value).name]=Z,re.splice(W.index,0,Z);break;case"delete":delete V[(Z=re[W.index]).name],re.splice(W.index,1)}return Promise.resolve()},i.computeFrame=function(H,Y){var J,W,Z,re,V=H._transitionData._frameHash;if(!Y)throw new Error("computeFrame must be given a string frame name");var B=V[Y.toString()];if(!B)return!1;for(var j=[B],ee=[B.name];B.baseframe&&(B=V[B.baseframe.toString()])&&ee.indexOf(B.name)===-1;)j.push(B),ee.push(B.name);for(var N={};B=j.pop();)if(B.layout&&(N.layout=i.extendLayout(N.layout,B.layout)),B.data){if(N.data||(N.data=[]),!(W=B.traces))for(W=[],J=0;J<B.data.length;J++)W[J]=J;for(N.traces||(N.traces=[]),J=0;J<B.data.length;J++)(Z=W[J])!=null&&((re=N.traces.indexOf(Z))===-1&&(re=N.data.length,N.traces[re]=Z),N.data[re]=i.extendTrace(N.data[re],B.data[J]))}return N},i.recomputeFrameHash=function(H){for(var Y=H._transitionData._frameHash={},J=H._transitionData._frames,W=0;W<J.length;W++){var Z=J[W];Z&&Z.name&&(Y[Z.name]=Z)}},i.extendObjectWithContainers=function(H,Y,J){var W,Z,re,V,B,j,ee,N=l.extendDeepNoArrays({},Y||{}),$=l.expandObjectPaths(N),K={};if(J&&J.length)for(re=0;re<J.length;re++)(Z=(W=l.nestedProperty($,J[re])).get())===void 0?l.nestedProperty(K,J[re]).set(null):(W.set(null),l.nestedProperty(K,J[re]).set(Z));if(H=l.extendDeepNoArrays(H||{},$),J&&J.length){for(re=0;re<J.length;re++)if(j=l.nestedProperty(K,J[re]).get()){for(ee=(B=l.nestedProperty(H,J[re])).get(),Array.isArray(ee)||(ee=[],B.set(ee)),V=0;V<j.length;V++){var te=j[V];ee[V]=te===null?null:i.extendObjectWithContainers(ee[V],te)}B.set(ee)}}return H},i.dataArrayContainers=["transforms","dimensions"],i.layoutArrayContainers=e.layoutArrayContainers,i.extendTrace=function(H,Y){return i.extendObjectWithContainers(H,Y,i.dataArrayContainers)},i.extendLayout=function(H,Y){return i.extendObjectWithContainers(H,Y,i.layoutArrayContainers)},i.transition=function(H,Y,J,W,Z,re){var V={redraw:Z.redraw},B={},j=[];return V.prepareFn=function(){for(var ee=Array.isArray(Y)?Y.length:0,N=W.slice(0,ee),$=0;$<N.length;$++){var K=N[$],te=H._fullData[K]._module;if(te){if(te.animatable){var ie=te.basePlotModule.name;B[ie]||(B[ie]=[]),B[ie].push(K)}H.data[N[$]]=i.extendTrace(H.data[N[$]],Y[$])}}var le=l.expandObjectPaths(l.extendDeepNoArrays({},J)),se=/^[xy]axis[0-9]*$/;for(var ve in le)se.test(ve)&&delete le[ve].range;i.extendLayout(H.layout,le),delete H.calcdata,i.supplyDefaults(H),i.doCalcdata(H);var fe=l.expandObjectPaths(J);if(fe){var ye=H._fullLayout._plots;for(var Ae in ye){var pe=ye[Ae],ge=pe.xaxis,we=pe.yaxis,oe=ge.range.slice(),de=we.range.slice(),Te=null,Ee=null,Me=null,De=null;Array.isArray(fe[ge._name+".range"])?Te=fe[ge._name+".range"].slice():Array.isArray((fe[ge._name]||{}).range)&&(Te=fe[ge._name].range.slice()),Array.isArray(fe[we._name+".range"])?Ee=fe[we._name+".range"].slice():Array.isArray((fe[we._name]||{}).range)&&(Ee=fe[we._name].range.slice()),oe&&Te&&(ge.r2l(oe[0])!==ge.r2l(Te[0])||ge.r2l(oe[1])!==ge.r2l(Te[1]))&&(Me={xr0:oe,xr1:Te}),de&&Ee&&(we.r2l(de[0])!==we.r2l(Ee[0])||we.r2l(de[1])!==we.r2l(Ee[1]))&&(De={yr0:de,yr1:Ee}),(Me||De)&&j.push(l.extendFlat({plotinfo:pe},Me,De))}}return Promise.resolve()},V.runFn=function(ee){var N,$,K=H._fullLayout._basePlotModules,te=j.length;if(J)for($=0;$<K.length;$++)K[$].transitionAxes&&K[$].transitionAxes(H,j,re,ee);for(var ie in te?((N=l.extendFlat({},re)).duration=0,delete B.cartesian):N=re,B){var le=B[ie];H._fullData[le[0]]._module.basePlotModule.plot(H,le,N,ee)}},E(H,re,V)},i.transitionFromReact=function(H,Y,J,W){var Z=H._fullLayout,re=Z.transition,V={},B=[];return V.prepareFn=function(){var j=Z._plots;for(var ee in V.redraw=!1,Y.anim==="some"&&(V.redraw=!0),J.anim==="some"&&(V.redraw=!0),j){var N=j[ee],$=N.xaxis,K=N.yaxis,te=W[$._name].range.slice(),ie=W[K._name].range.slice(),le=$.range.slice(),se=K.range.slice();$.setScale(),K.setScale();var ve=null,fe=null;$.r2l(te[0])===$.r2l(le[0])&&$.r2l(te[1])===$.r2l(le[1])||(ve={xr0:te,xr1:le}),K.r2l(ie[0])===K.r2l(se[0])&&K.r2l(ie[1])===K.r2l(se[1])||(fe={yr0:ie,yr1:se}),(ve||fe)&&B.push(l.extendFlat({plotinfo:N},ve,fe))}return Promise.resolve()},V.runFn=function(j){for(var ee,N,$,K=H._fullData,te=H._fullLayout._basePlotModules,ie=[],le=0;le<K.length;le++)ie.push(le);function se(){if(H._fullLayout)for(var fe=0;fe<te.length;fe++)te[fe].transitionAxes&&te[fe].transitionAxes(H,B,ee,j)}function ve(){if(H._fullLayout)for(var fe=0;fe<te.length;fe++)te[fe].plot(H,$,N,j)}B.length&&Y.anim?re.ordering==="traces first"?(ee=l.extendFlat({},re,{duration:0}),$=ie,N=re,setTimeout(se,re.duration),ve()):(ee=re,$=null,N=l.extendFlat({},re,{duration:0}),setTimeout(ve,ee.duration),se()):B.length?(ee=re,se()):Y.anim&&($=ie,N=re,ve())},E(H,re,V)},i.doCalcdata=function(H,Y){var J,W,Z,re,V=u.list(H),B=H._fullData,j=H._fullLayout,ee=new Array(B.length),N=(H.calcdata||[]).slice();for(H.calcdata=ee,j._numBoxes=0,j._numViolins=0,j._violinScaleGroupStats={},H._hmpixcount=0,H._hmlumcount=0,j._piecolormap={},j._sunburstcolormap={},j._treemapcolormap={},j._iciclecolormap={},j._funnelareacolormap={},Z=0;Z<B.length;Z++)Array.isArray(Y)&&Y.indexOf(Z)===-1&&(ee[Z]=N[Z]);for(Z=0;Z<B.length;Z++)(J=B[Z])._arrayAttrs=t.findArrayAttributes(J),J._extremes={};var $=j._subplots.polar||[];for(Z=0;Z<$.length;Z++)V.push(j[$[Z]].radialaxis,j[$[Z]].angularaxis);for(var K in j._colorAxes){var te=j[K];te.cauto!==!1&&(delete te.cmin,delete te.cmax)}var ie=!1;function le(fe){if(J=B[fe],W=J._module,J.visible===!0&&J.transforms){if(W&&W.calc){var ye=W.calc(H,J);ye[0]&&ye[0].t&&ye[0].t._scene&&delete ye[0].t._scene.dirty}for(re=0;re<J.transforms.length;re++){var Ae=J.transforms[re];(W=y[Ae.type])&&W.calcTransform&&(J._hasCalcTransform=!0,ie=!0,W.calcTransform(H,J,Ae))}}}function se(fe,ye){if(J=B[fe],!!(W=J._module).isContainer===ye){var Ae=[];if(J.visible===!0&&J._length!==0){delete J._indexToPoints;var pe=J.transforms||[];for(re=pe.length-1;re>=0;re--)if(pe[re].enabled){J._indexToPoints=pe[re]._indexToPoints;break}W&&W.calc&&(Ae=W.calc(H,J))}Array.isArray(Ae)&&Ae[0]||(Ae=[{x:d,y:d}]),Ae[0].t||(Ae[0].t={}),Ae[0].trace=J,ee[fe]=Ae}}for(D(V,B,j),Z=0;Z<B.length;Z++)se(Z,!0);for(Z=0;Z<B.length;Z++)le(Z);for(ie&&D(V,B,j),Z=0;Z<B.length;Z++)se(Z,!0);for(Z=0;Z<B.length;Z++)se(Z,!1);U(H);var ve=function(fe,ye){var Ae,pe,ge,we,oe,de=[];function Te(It,Be,He){var he=Be._id.charAt(0);if(It==="histogram2dcontour"){var be=Be._counterAxes[0],Re=u.getFromId(ye,be),Ue=he==="x"||be==="x"&&Re.type==="category",Xe=he==="y"||be==="y"&&Re.type==="category";return function(qe,st){return qe===0||st===0||Ue&&qe===He[st].length-1||Xe&&st===He.length-1?-1:(he==="y"?st:qe)-1}}return function(qe,st){return he==="y"?st:qe}}var Ee={min:function(It){return l.aggNums(Math.min,null,It)},max:function(It){return l.aggNums(Math.max,null,It)},sum:function(It){return l.aggNums(function(Be,He){return Be+He},null,It)},total:function(It){return l.aggNums(function(Be,He){return Be+He},null,It)},mean:function(It){return l.mean(It)},median:function(It){return l.median(It)}};for(Ae=0;Ae<fe.length;Ae++){var Me=fe[Ae];if(Me.type==="category"){var De=Me.categoryorder.match(z);if(De){var Ie=De[1],Oe=De[2],Ze=Me._id.charAt(0),Fe=Ze==="x",Pe=[];for(pe=0;pe<Me._categories.length;pe++)Pe.push([Me._categories[pe],[]]);for(pe=0;pe<Me._traceIndices.length;pe++){var ze=Me._traceIndices[pe],Ge=ye._fullData[ze];if(Ge.visible===!0){var $e=Ge.type;e.traceIs(Ge,"histogram")&&(delete Ge._xautoBinFinished,delete Ge._yautoBinFinished);var ot=$e==="splom",vt=$e==="scattergl",bt=ye.calcdata[ze];for(ge=0;ge<bt.length;ge++){var yt,tt,Ke=bt[ge];if(ot){var mt=Ge._axesDim[Me._id];if(!Fe){var Ft=Ge._diag[mt][0];Ft&&(Me=ye._fullLayout[u.id2name(Ft)])}var Vt=Ke.trace.dimensions[mt].values;for(we=0;we<Vt.length;we++)for(yt=Me._categoriesMap[Vt[we]],oe=0;oe<Ke.trace.dimensions.length;oe++)if(oe!==mt){var Xt=Ke.trace.dimensions[oe];Pe[yt][1].push(Xt.values[we])}}else if(vt){for(we=0;we<Ke.t.x.length;we++)Fe?(yt=Ke.t.x[we],tt=Ke.t.y[we]):(yt=Ke.t.y[we],tt=Ke.t.x[we]),Pe[yt][1].push(tt);Ke.t&&Ke.t._scene&&delete Ke.t._scene.dirty}else if(Ke.hasOwnProperty("z")){tt=Ke.z;var Gt=Te(Ge.type,Me,tt);for(we=0;we<tt.length;we++)for(oe=0;oe<tt[we].length;oe++)(yt=Gt(oe,we))+1&&Pe[yt][1].push(tt[we][oe])}else for((yt=Ke.p)===void 0&&(yt=Ke[Ze]),(tt=Ke.s)===void 0&&(tt=Ke.v),tt===void 0&&(tt=Fe?Ke.y:Ke.x),Array.isArray(tt)||(tt=tt===void 0?[]:[tt]),we=0;we<tt.length;we++)Pe[yt][1].push(tt[we])}}}Me._categoriesValue=Pe;var nr=[];for(pe=0;pe<Pe.length;pe++)nr.push([Pe[pe][0],Ee[Ie](Pe[pe][1])]);nr.sort(function(It,Be){return It[1]-Be[1]}),Me._categoriesAggregatedValue=nr,Me._initialCategories=nr.map(function(It){return It[0]}),Oe==="descending"&&Me._initialCategories.reverse(),de=de.concat(Me.sortByInitialCategories())}}}return de}(V,H);if(ve.length){for(j._numBoxes=0,j._numViolins=0,Z=0;Z<ve.length;Z++)se(ve[Z],!0);for(Z=0;Z<ve.length;Z++)se(ve[Z],!1);U(H)}e.getComponentMethod("fx","calc")(H),e.getComponentMethod("errorbars","calc")(H)};var z=/(total|sum|min|max|mean|median) (ascending|descending)/;function D(H,Y,J){var W={};function Z(j){j.clearCalc(),j.type==="multicategory"&&j.setupMultiCategory(Y),W[j._id]=1}l.simpleMap(H,Z);for(var re=J._axisMatchGroups||[],V=0;V<re.length;V++)for(var B in re[V])W[B]||Z(J[u.id2name(B)])}function U(H){var Y,J,W,Z=H._fullLayout,re=Z._visibleModules,V={};for(J=0;J<re.length;J++){var B=re[J],j=B.crossTraceCalc;if(j){var ee=B.basePlotModule.name;V[ee]?l.pushUnique(V[ee],j):V[ee]=[j]}}for(W in V){var N=V[W],$=Z._subplots[W];if(Array.isArray($))for(Y=0;Y<$.length;Y++){var K=$[Y],te=W==="cartesian"?Z._plots[K]:Z[K];for(J=0;J<N.length;J++)N[J](H,te,K)}else for(J=0;J<N.length;J++)N[J](H)}}i.rehover=function(H){H._fullLayout._rehover&&H._fullLayout._rehover()},i.redrag=function(H){H._fullLayout._redrag&&H._fullLayout._redrag()},i.reselect=function(H){var Y=H._fullLayout,J=(H.layout||{}).selections,W=Y._previousSelections;Y._previousSelections=J;var Z=Y._reselect||JSON.stringify(J)!==JSON.stringify(W);e.getComponentMethod("selections","reselect")(H,Z)},i.generalUpdatePerTraceModule=function(H,Y,J,W){var Z,re=Y.traceHash,V={};for(Z=0;Z<J.length;Z++){var B=J[Z],j=B[0].trace;j.visible&&(V[j.type]=V[j.type]||[],V[j.type].push(B))}for(var ee in re)if(!V[ee]){var N=re[ee][0];N[0].trace.visible=!1,V[ee]=[N]}for(var $ in V){var K=V[$];K[0][0].trace._module.plot(H,Y,l.filterVisible(K),W)}Y.traceHash=V},i.plotBasePlot=function(H,Y,J,W,Z){var re=e.getModule(H),V=a(Y.calcdata,re)[0];re.plot(Y,V,W,Z)},i.cleanBasePlot=function(H,Y,J,W,Z){var re=Z._has&&Z._has(H),V=J._has&&J._has(H);re&&!V&&Z["_"+H+"layer"].selectAll("g.trace").remove()}},{"../components/color":367,"../components/shapes/handle_outline":468,"../constants/numerical":491,"../lib":515,"../plot_api/plot_schema":554,"../plot_api/plot_template":555,"../plots/get_data":602,"../registry":647,"./animation_attributes":560,"./attributes":562,"./cartesian/axis_ids":570,"./command":592,"./font_attributes":594,"./frame_attributes":595,"./layout_attributes":619,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],629:[function(g,Q,X){Q.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],630:[function(g,Q,X){var m=g("../../lib"),v=g("../../lib/polygon").tester,k=m.findIndexOfMin,x=m.isAngleInsideSector,e=m.angleDelta,t=m.angleDist;function r(u,o,h,s){var a,p,c=s[0],i=s[1],y=n(Math.sin(o)-Math.sin(u)),f=n(Math.cos(o)-Math.cos(u)),w=Math.tan(h),b=n(1/w),_=y/f,T=i-_*c;return b?y&&f?p=w*(a=T/(w-_)):f?(a=i*b,p=i):(a=c,p=c*w):y&&f?(a=0,p=T):f?(a=0,p=i):a=p=NaN,[a,p]}function l(u,o,h,s){return m.isFullCircle([o,h])?function(a,p){var c,i=p.length,y=new Array(i+1);for(c=0;c<i;c++){var f=p[c];y[c]=[a*Math.cos(f),a*Math.sin(f)]}return y[c]=y[0].slice(),y}(u,s):function(a,p,c,i){var y,f,w=i.length,b=[];function _(D){return[a*Math.cos(D),a*Math.sin(D)]}function T(D,U,H){return r(D,U,H,_(D))}function L(D){return m.mod(D,w)}function A(D){return x(D,[p,c])}var I=k(i,function(D){return A(D)?t(D,p):1/0}),P=T(i[I],i[L(I-1)],p);for(b.push(P),y=I,f=0;f<w;y++,f++){var S=i[L(y)];if(!A(S))break;b.push(_(S))}var E=k(i,function(D){return A(D)?t(D,c):1/0}),z=T(i[E],i[L(E+1)],c);return b.push(z),b.push([0,0]),b.push(b[0].slice()),b}(u,o,h,s)}function n(u){return Math.abs(u)>1e-10?u:0}function d(u,o,h){o=o||0,h=h||0;for(var s=u.length,a=new Array(s),p=0;p<s;p++){var c=u[p];a[p]=[o+c[0],h-c[1]]}return a}Q.exports={isPtInsidePolygon:function(u,o,h,s,a){if(!x(o,s))return!1;var p,c;h[0]<h[1]?(p=h[0],c=h[1]):(p=h[1],c=h[0]);var i=v(l(p,s[0],s[1],a)),y=v(l(c,s[0],s[1],a)),f=[u*Math.cos(o),u*Math.sin(o)];return y.contains(f)&&!i.contains(f)},findPolygonOffset:function(u,o,h,s){for(var a=1/0,p=1/0,c=l(u,o,h,s),i=0;i<c.length;i++){var y=c[i];a=Math.min(a,y[0]),p=Math.min(p,-y[1])}return[a,p]},findEnclosingVertexAngles:function(u,o){var h=k(o,function(a){var p=e(a,u);return p>0?p:1/0}),s=m.mod(h+1,o.length);return[o[h],o[s]]},findIntersectionXY:r,findXYatLength:function(u,o,h,s){var a=-o*h,p=o*o+1,c=2*(o*a-h),i=a*a+h*h-u*u,y=Math.sqrt(c*c-4*p*i),f=(-c+y)/(2*p),w=(-c-y)/(2*p);return[[f,o*f+a+s],[w,o*w+a+s]]},clampTiny:n,pathPolygon:function(u,o,h,s,a,p){return"M"+d(l(u,o,h,s),a,p).join("L")},pathPolygonAnnulus:function(u,o,h,s,a,p,c){var i,y;u<o?(i=u,y=o):(i=o,y=u);var f=d(l(i,h,s,a),p,c);return"M"+d(l(y,h,s,a),p,c).reverse().join("L")+"M"+f.join("L")}}},{"../../lib":515,"../../lib/polygon":527}],631:[function(g,Q,X){var m=g("../get_data").getSubplotCalcData,v=g("../../lib").counterRegex,k=g("./polar"),x=g("./constants"),e=x.attr,t=x.name,r=v(t),l={};l[e]={valType:"subplotid",dflt:t,editType:"calc"},Q.exports={attr:e,name:t,idRoot:t,idRegex:r,attrRegex:r,attributes:l,layoutAttributes:g("./layout_attributes"),supplyLayoutDefaults:g("./layout_defaults"),plot:function(n){for(var d=n._fullLayout,u=n.calcdata,o=d._subplots[t],h=0;h<o.length;h++){var s=o[h],a=m(u,t,s),p=d[s]._subplot;p||(p=k(n,s),d[s]._subplot=p),p.plot(a,d,n._promises)}},clean:function(n,d,u,o){for(var h=o._subplots[t]||[],s=o._has&&o._has("gl"),a=d._has&&d._has("gl"),p=s&&!a,c=0;c<h.length;c++){var i=h[c],y=o[i]._subplot;if(!d[i]&&y)for(var f in y.framework.remove(),y.layers["radial-axis-title"].remove(),y.clipPaths)y.clipPaths[f].remove();p&&y._scene&&(y._scene.destroy(),y._scene=null)}},toSVG:g("../cartesian").toSVG}},{"../../lib":515,"../cartesian":578,"../get_data":602,"./constants":629,"./layout_attributes":632,"./layout_defaults":633,"./polar":634}],632:[function(g,Q,X){var m=g("../../components/color/attributes"),v=g("../cartesian/layout_attributes"),k=g("../domain").attributes,x=g("../../lib").extendFlat,e=g("../../plot_api/edit_types").overrideAll,t=e({color:v.color,showline:x({},v.showline,{dflt:!0}),linecolor:v.linecolor,linewidth:v.linewidth,showgrid:x({},v.showgrid,{dflt:!0}),gridcolor:v.gridcolor,gridwidth:v.gridwidth,griddash:v.griddash},"plot","from-root"),r=e({tickmode:v.tickmode,nticks:v.nticks,tick0:v.tick0,dtick:v.dtick,tickvals:v.tickvals,ticktext:v.ticktext,ticks:v.ticks,ticklen:v.ticklen,tickwidth:v.tickwidth,tickcolor:v.tickcolor,ticklabelstep:v.ticklabelstep,showticklabels:v.showticklabels,showtickprefix:v.showtickprefix,tickprefix:v.tickprefix,showticksuffix:v.showticksuffix,ticksuffix:v.ticksuffix,showexponent:v.showexponent,exponentformat:v.exponentformat,minexponent:v.minexponent,separatethousands:v.separatethousands,tickfont:v.tickfont,tickangle:v.tickangle,tickformat:v.tickformat,tickformatstops:v.tickformatstops,layer:v.layer},"plot","from-root"),l={visible:x({},v.visible,{dflt:!0}),type:x({},v.type,{values:["-","linear","log","date","category"]}),autotypenumbers:v.autotypenumbers,autorange:x({},v.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:x({},v.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:v.categoryorder,categoryarray:v.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:x({},v.title.text,{editType:"plot",dflt:""}),font:x({},v.title.font,{editType:"plot"}),editType:"plot"},hoverformat:v.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:v._deprecated.title,titlefont:v._deprecated.titlefont}};x(l,t,r);var n={visible:x({},v.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:v.autotypenumbers,categoryorder:v.categoryorder,categoryarray:v.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:v.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};x(n,t,r),Q.exports={domain:k({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:m.background},radialaxis:l,angularaxis:n,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":366,"../../lib":515,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],633:[function(g,Q,X){var m=g("../../lib"),v=g("../../components/color"),k=g("../../plot_api/plot_template"),x=g("../subplot_defaults"),e=g("../get_data").getSubplotData,t=g("../cartesian/tick_value_defaults"),r=g("../cartesian/tick_mark_defaults"),l=g("../cartesian/tick_label_defaults"),n=g("../cartesian/prefix_suffix_defaults"),d=g("../cartesian/category_order_defaults"),u=g("../cartesian/line_grid_defaults"),o=g("../cartesian/axis_autotype"),h=g("./layout_attributes"),s=g("./set_convert"),a=g("./constants"),p=a.axisNames;function c(y,f,w,b){var _=w("bgcolor");b.bgColor=v.combine(_,b.paper_bgcolor);var T=w("sector");w("hole");var L,A=e(b.fullData,a.name,b.id),I=b.layoutOut;function P(ee,N){return w(L+"."+ee,N)}for(var S=0;S<p.length;S++){L=p[S],m.isPlainObject(y[L])||(y[L]={});var E=y[L],z=k.newContainer(f,L);z._id=z._name=L,z._attr=b.id+"."+L,z._traceIndices=A.map(function(ee){return ee._expandedIndex});var D=a.axisName2dataArray[L],U=i(E,z,P,A,D,b);d(E,z,P,{axData:A,dataAttr:D});var H=P("visible");switch(s(z,f,I),P("uirevision",f.uirevision),z._m=1,L){case"radialaxis":var Y=P("autorange",!z.isValidRange(E.range));E.autorange=Y,!Y||U!=="linear"&&U!=="-"||P("rangemode"),Y==="reversed"&&(z._m=-1),P("range"),z.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(U==="date"){m.log("Polar plots do not support date angular axes yet.");for(var J=0;J<A.length;J++)A[J].visible=!1;U=E.type=z.type="linear"}P(U==="linear"?"thetaunit":"period");var W=P("direction");P("rotation",{counterclockwise:0,clockwise:90}[W])}if(n(E,z,P,z.type,{tickSuffixDflt:z.thetaunit==="degrees"?"\xB0":void 0}),H){var Z,re,V,B,j=b.font||{};re=(Z=P("color"))===E.color?Z:j.color,V=j.size,B=j.family,t(E,z,P,z.type),l(E,z,P,z.type,{font:{color:re,size:V,family:B}}),r(E,z,P,{outerTicks:!0}),u(E,z,P,{dfltColor:Z,bgColor:b.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:h[L]}),P("layer"),L==="radialaxis"&&(P("side"),P("angle",T[0]),P("title.text"),m.coerceFont(P,"title.font",{color:re,size:m.bigFont(V),family:B}))}U!=="category"&&P("hoverformat"),z._input=E}f.angularaxis.type==="category"&&w("gridshape")}function i(y,f,w,b,_,T){var L=w("autotypenumbers",T.autotypenumbersDflt);if(w("type")==="-"){for(var A,I=0;I<b.length;I++)if(b[I].visible){A=b[I];break}A&&A[_]&&(f.type=o(A[_],"gregorian",{noMultiCategory:!0,autotypenumbers:L})),f.type==="-"?f.type="linear":y.type=f.type}return f.type}Q.exports=function(y,f,w){x(y,f,w,{type:a.name,attributes:h,handleDefaults:c,font:f.font,autotypenumbersDflt:f.autotypenumbers,paper_bgcolor:f.paper_bgcolor,fullData:w,layoutOut:f})}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/axis_autotype":567,"../cartesian/category_order_defaults":571,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/tick_label_defaults":587,"../cartesian/tick_mark_defaults":588,"../cartesian/tick_value_defaults":589,"../get_data":602,"../subplot_defaults":641,"./constants":629,"./layout_attributes":632,"./set_convert":635}],634:[function(g,Q,X){var m=g("@plotly/d3"),v=g("tinycolor2"),k=g("../../registry"),x=g("../../lib"),e=x.strRotate,t=x.strTranslate,r=g("../../components/color"),l=g("../../components/drawing"),n=g("../plots"),d=g("../../plots/cartesian/axes"),u=g("../cartesian/set_convert"),o=g("./set_convert"),h=g("../cartesian/autorange").doAutoRange,s=g("../cartesian/dragbox"),a=g("../../components/dragelement"),p=g("../../components/fx"),c=g("../../components/titles"),i=g("../../components/selections").prepSelect,y=g("../../components/selections").selectOnClick,f=g("../../components/selections").clearOutline,w=g("../../lib/setcursor"),b=g("../../lib/clear_gl_canvases"),_=g("../../plot_api/subroutines").redrawReglTraces,T=g("../../constants/alignment").MID_SHIFT,L=g("./constants"),A=g("./helpers"),I=g("../smith/helpers"),P=I.smith,S=I.reactanceArc,E=I.resistanceArc,z=I.smithTransform,D=x._,U=x.mod,H=x.deg2rad,Y=x.rad2deg;function J(B,j,ee){this.isSmith=ee||!1,this.id=j,this.gd=B,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var N=B._fullLayout,$="clip"+N._uid+j;this.clipIds.forTraces=$+"-for-traces",this.clipPaths.forTraces=N._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=N["_"+(ee?"smith":"polar")+"layer"].append("g").attr("class",j),this.getHole=function(K){return this.isSmith?0:K.hole},this.getSector=function(K){return this.isSmith?[0,360]:K.sector},this.getRadial=function(K){return this.isSmith?K.realaxis:K.radialaxis},this.getAngular=function(K){return this.isSmith?K.imaginaryaxis:K.angularaxis},ee||(this.radialTickLayout=null,this.angularTickLayout=null)}var W=J.prototype;function Z(B){var j=B.ticks+String(B.ticklen)+String(B.showticklabels);return"side"in B&&(j+=B.side),j}function re(B,j){return j[x.findIndexOfMin(j,function(ee){return x.angleDist(B,ee)})]}function V(B,j,ee){return j?(B.attr("display",null),B.attr(ee)):B&&B.attr("display","none"),B}Q.exports=function(B,j,ee){return new J(B,j,ee)},W.plot=function(B,j){for(var ee=j[this.id],N=!1,$=0;$<B.length;$++)if(B[$][0].trace.cliponaxis===!1){N=!0;break}this._hasClipOnAxisFalse=N,this.updateLayers(j,ee),this.updateLayout(j,ee),n.generalUpdatePerTraceModule(this.gd,this,B,ee),this.updateFx(j,ee),this.isSmith&&(delete ee.realaxis.range,delete ee.imaginaryaxis.range)},W.updateLayers=function(B,j){var ee=this.isSmith,N=this.layers,$=this.getRadial(j),K=this.getAngular(j),te=L.layerNames,ie=te.indexOf("frontplot"),le=te.slice(0,ie),se=K.layer==="below traces",ve=$.layer==="below traces";se&&le.push("angular-line"),ve&&le.push("radial-line"),se&&le.push("angular-axis"),ve&&le.push("radial-axis"),le.push("frontplot"),se||le.push("angular-line"),ve||le.push("radial-line"),se||le.push("angular-axis"),ve||le.push("radial-axis");var fe=(ee?"smith":"polar")+"sublayer",ye=this.framework.selectAll("."+fe).data(le,String);ye.enter().append("g").attr("class",function(Ae){return fe+" "+Ae}).each(function(Ae){var pe=N[Ae]=m.select(this);switch(Ae){case"frontplot":ee||pe.append("g").classed("barlayer",!0),pe.append("g").classed("scatterlayer",!0);break;case"backplot":pe.append("g").classed("maplayer",!0);break;case"plotbg":N.bg=pe.append("path");break;case"radial-grid":case"angular-grid":pe.style("fill","none");break;case"radial-line":pe.append("line").style("fill","none");break;case"angular-line":pe.append("path").style("fill","none")}}),ye.order()},W.updateLayout=function(B,j){var ee=this.layers,N=B._size,$=this.getRadial(j),K=this.getAngular(j),te=j.domain.x,ie=j.domain.y;this.xOffset=N.l+N.w*te[0],this.yOffset=N.t+N.h*(1-ie[1]);var le=this.xLength=N.w*(te[1]-te[0]),se=this.yLength=N.h*(ie[1]-ie[0]),ve=this.getSector(j);this.sectorInRad=ve.map(H);var fe,ye,Ae,pe,ge,we=this.sectorBBox=function(vt){var bt,yt,tt,Ke,mt=vt[0],Ft=vt[1]-mt,Vt=U(mt,360),Xt=Vt+Ft,Gt=Math.cos(H(Vt)),nr=Math.sin(H(Vt)),It=Math.cos(H(Xt)),Be=Math.sin(H(Xt));return Ke=Vt<=90&&Xt>=90||Vt>90&&Xt>=450?1:nr<=0&&Be<=0?0:Math.max(nr,Be),bt=Vt<=180&&Xt>=180||Vt>180&&Xt>=540?-1:Gt>=0&&It>=0?0:Math.min(Gt,It),yt=Vt<=270&&Xt>=270||Vt>270&&Xt>=630?-1:nr>=0&&Be>=0?0:Math.min(nr,Be),tt=Xt>=360?1:Gt<=0&&It<=0?0:Math.max(Gt,It),[bt,yt,tt,Ke]}(ve),oe=we[2]-we[0],de=we[3]-we[1],Te=se/le,Ee=Math.abs(de/oe);Te>Ee?(fe=le,ge=(se-(ye=le*Ee))/N.h/2,Ae=[te[0],te[1]],pe=[ie[0]+ge,ie[1]-ge]):(ye=se,ge=(le-(fe=se/Ee))/N.w/2,Ae=[te[0]+ge,te[1]-ge],pe=[ie[0],ie[1]]),this.xLength2=fe,this.yLength2=ye,this.xDomain2=Ae,this.yDomain2=pe;var Me,De=this.xOffset2=N.l+N.w*Ae[0],Ie=this.yOffset2=N.t+N.h*(1-pe[1]),Oe=this.radius=fe/oe,Ze=this.innerRadius=this.getHole(j)*Oe,Fe=this.cx=De-Oe*we[0],Pe=this.cy=Ie+Oe*we[3],ze=this.cxx=Fe-De,Ge=this.cyy=Pe-Ie,$e=$.side;$e==="counterclockwise"?(Me=$e,$e="top"):$e==="clockwise"&&(Me=$e,$e="bottom"),this.radialAxis=this.mockAxis(B,j,$,{_id:"x",side:$e,_trueSide:Me,domain:[Ze/N.w,Oe/N.w]}),this.angularAxis=this.mockAxis(B,j,K,{side:"right",domain:[0,Math.PI],autorange:!1}),this.doAutoRange(B,j),this.updateAngularAxis(B,j),this.updateRadialAxis(B,j),this.updateRadialAxisTitle(B,j),this.xaxis=this.mockCartesianAxis(B,j,{_id:"x",domain:Ae}),this.yaxis=this.mockCartesianAxis(B,j,{_id:"y",domain:pe});var ot=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",ot).attr("transform",t(ze,Ge)),ee.frontplot.attr("transform",t(De,Ie)).call(l.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd),ee.bg.attr("d",ot).attr("transform",t(Fe,Pe)).call(r.fill,j.bgcolor)},W.mockAxis=function(B,j,ee,N){var $=x.extendFlat({},ee,N);return o($,j,B),$},W.mockCartesianAxis=function(B,j,ee){var N=this,$=N.isSmith,K=ee._id,te=x.extendFlat({type:"linear"},ee);u(te,B);var ie={x:[0,2],y:[1,3]};return te.setRange=function(){var le=N.sectorBBox,se=ie[K],ve=N.radialAxis._rl,fe=(ve[1]-ve[0])/(1-N.getHole(j));te.range=[le[se[0]]*fe,le[se[1]]*fe]},te.isPtWithinRange=K!=="x"||$?function(){return!0}:function(le){return N.isPtInside(le)},te.setRange(),te.setScale(),te},W.doAutoRange=function(B,j){var ee=this.gd,N=this.radialAxis,$=this.getRadial(j);h(ee,N);var K=N.range;$.range=K.slice(),$._input.range=K.slice(),N._rl=[N.r2l(K[0],null,"gregorian"),N.r2l(K[1],null,"gregorian")]},W.updateRadialAxis=function(B,j){var ee=this,N=ee.gd,$=ee.layers,K=ee.radius,te=ee.innerRadius,ie=ee.cx,le=ee.cy,se=ee.getRadial(j),ve=U(ee.getSector(j)[0],360),fe=ee.radialAxis,ye=te<K,Ae=ee.isSmith;Ae||(ee.fillViewInitialKey("radialaxis.angle",se.angle),ee.fillViewInitialKey("radialaxis.range",fe.range.slice()),fe.setGeometry()),fe.tickangle==="auto"&&ve>90&&ve<=270&&(fe.tickangle=180);var pe=Ae?function(Oe){var Ze=z(ee,P([Oe.x,0]));return t(Ze[0]-ie,Ze[1]-le)}:function(Oe){return t(fe.l2p(Oe.x)+te,0)},ge=Ae?function(Oe){return E(ee,Oe.x,-1/0,1/0)}:function(Oe){return ee.pathArc(fe.r2p(Oe.x)+te)},we=Z(se);if(ee.radialTickLayout!==we&&($["radial-axis"].selectAll(".xtick").remove(),ee.radialTickLayout=we),ye){fe.setScale();var oe=0,de=Ae?(fe.tickvals||[]).filter(function(Oe){return Oe>=0}).map(function(Oe){return d.tickText(fe,Oe,!0,!1)}):d.calcTicks(fe),Te=Ae?de:d.clipEnds(fe,de),Ee=d.getTickSigns(fe)[2];Ae&&((fe.ticks==="top"&&fe.side==="bottom"||fe.ticks==="bottom"&&fe.side==="top")&&(Ee=-Ee),fe.ticks==="top"&&fe.side==="top"&&(oe=-fe.ticklen),fe.ticks==="bottom"&&fe.side==="bottom"&&(oe=fe.ticklen)),d.drawTicks(N,fe,{vals:de,layer:$["radial-axis"],path:d.makeTickPath(fe,0,Ee),transFn:pe,crisp:!1}),d.drawGrid(N,fe,{vals:Te,layer:$["radial-grid"],path:ge,transFn:x.noop,crisp:!1}),d.drawLabels(N,fe,{vals:de,layer:$["radial-axis"],transFn:pe,labelFns:d.makeLabelFns(fe,oe)})}var Me=ee.radialAxisAngle=ee.vangles?Y(re(H(se.angle),ee.vangles)):se.angle,De=t(ie,le),Ie=De+e(-Me);V($["radial-axis"],ye&&(se.showticklabels||se.ticks),{transform:Ie}),V($["radial-grid"],ye&&se.showgrid,{transform:Ae?"":De}),V($["radial-line"].select("line"),ye&&se.showline,{x1:Ae?-K:te,y1:0,x2:K,y2:0,transform:Ie}).attr("stroke-width",se.linewidth).call(r.stroke,se.linecolor)},W.updateRadialAxisTitle=function(B,j,ee){if(!this.isSmith){var N=this.gd,$=this.radius,K=this.cx,te=this.cy,ie=this.getRadial(j),le=this.id+"title",se=0;if(ie.title){var ve=l.bBox(this.layers["radial-axis"].node()).height,fe=ie.title.font.size,ye=ie.side;se=ye==="top"?fe:ye==="counterclockwise"?-(ve+.4*fe):ve+.8*fe}var Ae=ee!==void 0?ee:this.radialAxisAngle,pe=H(Ae),ge=Math.cos(pe),we=Math.sin(pe),oe=K+$/2*ge+se*we,de=te-$/2*we+se*ge;this.layers["radial-axis-title"]=c.draw(N,le,{propContainer:ie,propName:this.id+".radialaxis.title",placeholder:D(N,"Click to enter radial axis title"),attributes:{x:oe,y:de,"text-anchor":"middle"},transform:{rotate:-Ae}})}},W.updateAngularAxis=function(B,j){var ee=this,N=ee.gd,$=ee.layers,K=ee.radius,te=ee.innerRadius,ie=ee.cx,le=ee.cy,se=ee.getAngular(j),ve=ee.angularAxis,fe=ee.isSmith;fe||(ee.fillViewInitialKey("angularaxis.rotation",se.rotation),ve.setGeometry(),ve.setScale());var ye=fe?function(Oe){var Ze=z(ee,P([0,Oe.x]));return Math.atan2(Ze[0]-ie,Ze[1]-le)-Math.PI/2}:function(Oe){return ve.t2g(Oe.x)};ve.type==="linear"&&ve.thetaunit==="radians"&&(ve.tick0=Y(ve.tick0),ve.dtick=Y(ve.dtick));var Ae=function(Oe){return t(ie+K*Math.cos(Oe),le-K*Math.sin(Oe))},pe=fe?function(Oe){var Ze=z(ee,P([0,Oe.x]));return t(Ze[0],Ze[1])}:function(Oe){return Ae(ye(Oe))},ge=fe?function(Oe){var Ze=z(ee,P([0,Oe.x])),Fe=Math.atan2(Ze[0]-ie,Ze[1]-le)-Math.PI/2;return t(Ze[0],Ze[1])+e(-Y(Fe))}:function(Oe){var Ze=ye(Oe);return Ae(Ze)+e(-Y(Ze))},we=fe?function(Oe){return S(ee,Oe.x,0,1/0)}:function(Oe){var Ze=ye(Oe),Fe=Math.cos(Ze),Pe=Math.sin(Ze);return"M"+[ie+te*Fe,le-te*Pe]+"L"+[ie+K*Fe,le-K*Pe]},oe=d.makeLabelFns(ve,0).labelStandoff,de={xFn:function(Oe){var Ze=ye(Oe);return Math.cos(Ze)*oe},yFn:function(Oe){var Ze=ye(Oe),Fe=Math.sin(Ze)>0?.2:1;return-Math.sin(Ze)*(oe+Oe.fontSize*Fe)+Math.abs(Math.cos(Ze))*(Oe.fontSize*T)},anchorFn:function(Oe){var Ze=ye(Oe),Fe=Math.cos(Ze);return Math.abs(Fe)<.1?"middle":Fe>0?"start":"end"},heightFn:function(Oe,Ze,Fe){var Pe=ye(Oe);return-.5*(1+Math.sin(Pe))*Fe}},Te=Z(se);ee.angularTickLayout!==Te&&($["angular-axis"].selectAll("."+ve._id+"tick").remove(),ee.angularTickLayout=Te);var Ee,Me=fe?[1/0].concat(ve.tickvals||[]).map(function(Oe){return d.tickText(ve,Oe,!0,!1)}):d.calcTicks(ve);if(fe&&(Me[0].text="\u221E",Me[0].fontSize*=1.75),j.gridshape==="linear"?(Ee=Me.map(ye),x.angleDelta(Ee[0],Ee[1])<0&&(Ee=Ee.slice().reverse())):Ee=null,ee.vangles=Ee,ve.type==="category"&&(Me=Me.filter(function(Oe){return x.isAngleInsideSector(ye(Oe),ee.sectorInRad)})),ve.visible){var De=ve.ticks==="inside"?-1:1,Ie=(ve.linewidth||1)/2;d.drawTicks(N,ve,{vals:Me,layer:$["angular-axis"],path:"M"+De*Ie+",0h"+De*ve.ticklen,transFn:ge,crisp:!1}),d.drawGrid(N,ve,{vals:Me,layer:$["angular-grid"],path:we,transFn:x.noop,crisp:!1}),d.drawLabels(N,ve,{vals:Me,layer:$["angular-axis"],repositionOnUpdate:!0,transFn:pe,labelFns:de})}V($["angular-line"].select("path"),se.showline,{d:ee.pathSubplot(),transform:t(ie,le)}).attr("stroke-width",se.linewidth).call(r.stroke,se.linecolor)},W.updateFx=function(B,j){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(B),this.updateRadialDrag(B,j,0),this.updateRadialDrag(B,j,1)),this.updateHoverAndMainDrag(B))},W.updateHoverAndMainDrag=function(B){var j,ee,N=this,$=N.isSmith,K=N.gd,te=N.layers,ie=B._zoomlayer,le=L.MINZOOM,se=L.OFFEDGE,ve=N.radius,fe=N.innerRadius,ye=N.cx,Ae=N.cy,pe=N.cxx,ge=N.cyy,we=N.sectorInRad,oe=N.vangles,de=N.radialAxis,Te=A.clampTiny,Ee=A.findXYatLength,Me=A.findEnclosingVertexAngles,De=L.cornerHalfWidth,Ie=L.cornerLen/2,Oe=s.makeDragger(te,"path","maindrag",B.dragmode===!1?"none":"crosshair");m.select(Oe).attr("d",N.pathSubplot()).attr("transform",t(ye,Ae)),Oe.onmousemove=function(Ue){p.hover(K,Ue,N.id),K._fullLayout._lasthover=Oe,K._fullLayout._hoversubplot=N.id},Oe.onmouseout=function(Ue){K._dragging||a.unhover(K,Ue)};var Ze,Fe,Pe,ze,Ge,$e,ot,vt,bt,yt={element:Oe,gd:K,subplot:N.id,plotinfo:{id:N.id,xaxis:N.xaxis,yaxis:N.yaxis},xaxes:[N.xaxis],yaxes:[N.yaxis]};function tt(Ue,Xe){return Math.sqrt(Ue*Ue+Xe*Xe)}function Ke(Ue,Xe){return tt(Ue-pe,Xe-ge)}function mt(Ue,Xe){return Math.atan2(ge-Xe,Ue-pe)}function Ft(Ue,Xe){return[Ue*Math.cos(Xe),Ue*Math.sin(-Xe)]}function Vt(Ue,Xe){if(Ue===0)return N.pathSector(2*De);var qe=Ie/Ue,st=Xe-qe,it=Xe+qe,Tt=Math.max(0,Math.min(Ue,ve)),Pt=Tt-De,rt=Tt+De;return"M"+Ft(Pt,st)+"A"+[Pt,Pt]+" 0,0,0 "+Ft(Pt,it)+"L"+Ft(rt,it)+"A"+[rt,rt]+" 0,0,1 "+Ft(rt,st)+"Z"}function Xt(Ue,Xe,qe){if(Ue===0)return N.pathSector(2*De);var st,it,Tt=Ft(Ue,Xe),Pt=Ft(Ue,qe),rt=Te((Tt[0]+Pt[0])/2),ut=Te((Tt[1]+Pt[1])/2);if(rt&&ut){var Bt=ut/rt,wt=-1/Bt,Lt=Ee(De,Bt,rt,ut);st=Ee(Ie,wt,Lt[0][0],Lt[0][1]),it=Ee(Ie,wt,Lt[1][0],Lt[1][1])}else{var Se,We;ut?(Se=Ie,We=De):(Se=De,We=Ie),st=[[rt-Se,ut-We],[rt+Se,ut-We]],it=[[rt-Se,ut+We],[rt+Se,ut+We]]}return"M"+st.join("L")+"L"+it.reverse().join("L")+"Z"}function Gt(Ue,Xe){return Xe=Math.max(Math.min(Xe,ve),fe),Ue<se?Ue=0:ve-Ue<se?Ue=ve:Xe<se?Xe=0:ve-Xe<se&&(Xe=ve),Math.abs(Xe-Ue)>le?(Ue<Xe?(Pe=Ue,ze=Xe):(Pe=Xe,ze=Ue),!0):(Pe=null,ze=null,!1)}function nr(Ue,Xe){Ue=Ue||Ge,Xe=Xe||"M0,0Z",vt.attr("d",Ue),bt.attr("d",Xe),s.transitionZoombox(vt,bt,$e,ot),$e=!0;var qe={};be(qe),K.emit("plotly_relayouting",qe)}function It(Ue,Xe){var qe,st,it=Ze+(Ue*=j),Tt=Fe+(Xe*=ee),Pt=Ke(Ze,Fe),rt=Math.min(Ke(it,Tt),ve),ut=mt(Ze,Fe);Gt(Pt,rt)&&(qe=Ge+N.pathSector(ze),Pe&&(qe+=N.pathSector(Pe)),st=Vt(Pe,ut)+Vt(ze,ut)),nr(qe,st)}function Be(Ue,Xe,qe,st){var it=A.findIntersectionXY(qe,st,qe,[Ue-pe,ge-Xe]);return tt(it[0],it[1])}function He(Ue,Xe){var qe,st,it=Ze+Ue,Tt=Fe+Xe,Pt=mt(Ze,Fe),rt=mt(it,Tt),ut=Me(Pt,oe),Bt=Me(rt,oe);Gt(Be(Ze,Fe,ut[0],ut[1]),Math.min(Be(it,Tt,Bt[0],Bt[1]),ve))&&(qe=Ge+N.pathSector(ze),Pe&&(qe+=N.pathSector(Pe)),st=[Xt(Pe,ut[0],ut[1]),Xt(ze,ut[0],ut[1])].join(" ")),nr(qe,st)}function he(){if(s.removeZoombox(K),Pe!==null&&ze!==null){var Ue={};be(Ue),s.showDoubleClickNotifier(K),k.call("_guiRelayout",K,Ue)}}function be(Ue){var Xe=de._rl,qe=(Xe[1]-Xe[0])/(1-fe/ve)/ve,st=[Xe[0]+(Pe-fe)*qe,Xe[0]+(ze-fe)*qe];Ue[N.id+".radialaxis.range"]=st}function Re(Ue,Xe){var qe=K._fullLayout.clickmode;if(s.removeZoombox(K),Ue===2){var st={};for(var it in N.viewInitial)st[N.id+"."+it]=N.viewInitial[it];K.emit("plotly_doubleclick",null),k.call("_guiRelayout",K,st)}qe.indexOf("select")>-1&&Ue===1&&y(Xe,K,[N.xaxis],[N.yaxis],N.id,yt),qe.indexOf("event")>-1&&p.click(K,Xe,N.id)}yt.prepFn=function(Ue,Xe,qe){var st=K._fullLayout.dragmode,it=Oe.getBoundingClientRect();K._fullLayout._calcInverseTransform(K);var Tt=K._fullLayout._invTransform;j=K._fullLayout._invScaleX,ee=K._fullLayout._invScaleY;var Pt=x.apply3DTransform(Tt)(Xe-it.left,qe-it.top);if(Ze=Pt[0],Fe=Pt[1],oe){var rt=A.findPolygonOffset(ve,we[0],we[1],oe);Ze+=pe+rt[0],Fe+=ge+rt[1]}switch(st){case"zoom":yt.clickFn=Re,$||(yt.moveFn=oe?He:It,yt.doneFn=he,function(){Pe=null,ze=null,Ge=N.pathSubplot(),$e=!1;var ut=K._fullLayout[N.id];ot=v(ut.bgcolor).getLuminance(),(vt=s.makeZoombox(ie,ot,ye,Ae,Ge)).attr("fill-rule","evenodd"),bt=s.makeCorners(ie,ye,Ae),f(K)}());break;case"select":case"lasso":i(Ue,Xe,qe,yt,st)}},a.init(yt)},W.updateRadialDrag=function(B,j,ee){var N=this,$=N.gd,K=N.layers,te=N.radius,ie=N.innerRadius,le=N.cx,se=N.cy,ve=N.radialAxis,fe=L.radialDragBoxSize,ye=fe/2;if(ve.visible){var Ae,pe,ge,we=H(N.radialAxisAngle),oe=ve._rl,de=oe[0],Te=oe[1],Ee=oe[ee],Me=.75*(oe[1]-oe[0])/(1-N.getHole(j))/te;ee?(Ae=le+(te+ye)*Math.cos(we),pe=se-(te+ye)*Math.sin(we),ge="radialdrag"):(Ae=le+(ie-ye)*Math.cos(we),pe=se-(ie-ye)*Math.sin(we),ge="radialdrag-inner");var De,Ie,Oe,Ze=s.makeRectDragger(K,ge,"crosshair",-ye,-ye,fe,fe),Fe={element:Ze,gd:$};B.dragmode===!1&&(Fe.dragmode=!1),V(m.select(Ze),ve.visible&&ie<te,{transform:t(Ae,pe)}),Fe.prepFn=function(){De=null,Ie=null,Oe=null,Fe.moveFn=Pe,Fe.doneFn=ze,f($)},Fe.clampFn=function(ot,vt){return Math.sqrt(ot*ot+vt*vt)<L.MINDRAG&&(ot=0,vt=0),[ot,vt]},a.init(Fe)}function Pe(ot,vt){if(De)De(ot,vt);else{var bt=[ot,-vt],yt=[Math.cos(we),Math.sin(we)],tt=Math.abs(x.dot(bt,yt)/Math.sqrt(x.dot(bt,bt)));isNaN(tt)||(De=tt<.5?Ge:$e)}var Ke={};(function(mt){Ie!==null?mt[N.id+".radialaxis.angle"]=Ie:Oe!==null&&(mt[N.id+".radialaxis.range["+ee+"]"]=Oe)})(Ke),$.emit("plotly_relayouting",Ke)}function ze(){Ie!==null?k.call("_guiRelayout",$,N.id+".radialaxis.angle",Ie):Oe!==null&&k.call("_guiRelayout",$,N.id+".radialaxis.range["+ee+"]",Oe)}function Ge(ot,vt){if(ee!==0){var bt=Ae+ot,yt=pe+vt;Ie=Math.atan2(se-yt,bt-le),N.vangles&&(Ie=re(Ie,N.vangles)),Ie=Y(Ie);var tt=t(le,se)+e(-Ie);K["radial-axis"].attr("transform",tt),K["radial-line"].select("line").attr("transform",tt);var Ke=N.gd._fullLayout,mt=Ke[N.id];N.updateRadialAxisTitle(Ke,mt,Ie)}}function $e(ot,vt){var bt=x.dot([ot,-vt],[Math.cos(we),Math.sin(we)]);if(Oe=Ee-Me*bt,Me>0==(ee?Oe>de:Oe<Te)){var yt=$._fullLayout,tt=yt[N.id];ve.range[ee]=Oe,ve._rl[ee]=Oe,N.updateRadialAxis(yt,tt),N.xaxis.setRange(),N.xaxis.setScale(),N.yaxis.setRange(),N.yaxis.setScale();var Ke=!1;for(var mt in N.traceHash){var Ft=N.traceHash[mt],Vt=x.filterVisible(Ft);Ft[0][0].trace._module.plot($,N,Vt,tt),k.traceIs(mt,"gl")&&Vt.length&&(Ke=!0)}Ke&&(b($),_($))}else Oe=null}},W.updateAngularDrag=function(B){var j=this,ee=j.gd,N=j.layers,$=j.radius,K=j.angularAxis,te=j.cx,ie=j.cy,le=j.cxx,se=j.cyy,ve=L.angularDragBoxSize,fe=s.makeDragger(N,"path","angulardrag",B.dragmode===!1?"none":"move"),ye={element:fe,gd:ee};function Ae(Fe,Pe){return Math.atan2(se+ve-Pe,Fe-le-ve)}B.dragmode===!1?ye.dragmode=!1:m.select(fe).attr("d",j.pathAnnulus($,$+ve)).attr("transform",t(te,ie)).call(w,"move");var pe,ge,we,oe,de,Te,Ee=N.frontplot.select(".scatterlayer").selectAll(".trace"),Me=Ee.selectAll(".point"),De=Ee.selectAll(".textpoint");function Ie(Fe,Pe){var ze=j.gd._fullLayout,Ge=ze[j.id],$e=Ae(pe+Fe*B._invScaleX,ge+Pe*B._invScaleY),ot=Y($e-Te);if(oe=we+ot,N.frontplot.attr("transform",t(j.xOffset2,j.yOffset2)+e([-ot,le,se])),j.vangles){de=j.radialAxisAngle+ot;var vt=t(te,ie)+e(-ot),bt=t(te,ie)+e(-de);N.bg.attr("transform",vt),N["radial-grid"].attr("transform",vt),N["radial-axis"].attr("transform",bt),N["radial-line"].select("line").attr("transform",bt),j.updateRadialAxisTitle(ze,Ge,de)}else j.clipPaths.forTraces.select("path").attr("transform",t(le,se)+e(ot));Me.each(function(){var Vt=m.select(this),Xt=l.getTranslate(Vt);Vt.attr("transform",t(Xt.x,Xt.y)+e([ot]))}),De.each(function(){var Vt=m.select(this),Xt=Vt.select("text"),Gt=l.getTranslate(Vt);Vt.attr("transform",e([ot,Xt.attr("x"),Xt.attr("y")])+t(Gt.x,Gt.y))}),K.rotation=x.modHalf(oe,360),j.updateAngularAxis(ze,Ge),j._hasClipOnAxisFalse&&!x.isFullCircle(j.sectorInRad)&&Ee.call(l.hideOutsideRangePoints,j);var yt=!1;for(var tt in j.traceHash)if(k.traceIs(tt,"gl")){var Ke=j.traceHash[tt],mt=x.filterVisible(Ke);Ke[0][0].trace._module.plot(ee,j,mt,Ge),mt.length&&(yt=!0)}yt&&(b(ee),_(ee));var Ft={};Oe(Ft),ee.emit("plotly_relayouting",Ft)}function Oe(Fe){Fe[j.id+".angularaxis.rotation"]=oe,j.vangles&&(Fe[j.id+".radialaxis.angle"]=de)}function Ze(){De.select("text").attr("transform",null);var Fe={};Oe(Fe),k.call("_guiRelayout",ee,Fe)}ye.prepFn=function(Fe,Pe,ze){var Ge=B[j.id];we=Ge.angularaxis.rotation;var $e=fe.getBoundingClientRect();pe=Pe-$e.left,ge=ze-$e.top,ee._fullLayout._calcInverseTransform(ee);var ot=x.apply3DTransform(B._invTransform)(pe,ge);pe=ot[0],ge=ot[1],Te=Ae(pe,ge),ye.moveFn=Ie,ye.doneFn=Ze,f(ee)},j.vangles&&!x.isFullCircle(j.sectorInRad)&&(ye.prepFn=x.noop,w(m.select(fe),null)),a.init(ye)},W.isPtInside=function(B){if(this.isSmith)return!0;var j=this.sectorInRad,ee=this.vangles,N=this.angularAxis.c2g(B.theta),$=this.radialAxis,K=$.c2l(B.r),te=$._rl;return(ee?A.isPtInsidePolygon:x.isPtInsideSector)(K,N,te,j,ee)},W.pathArc=function(B){var j=this.sectorInRad,ee=this.vangles;return(ee?A.pathPolygon:x.pathArc)(B,j[0],j[1],ee)},W.pathSector=function(B){var j=this.sectorInRad,ee=this.vangles;return(ee?A.pathPolygon:x.pathSector)(B,j[0],j[1],ee)},W.pathAnnulus=function(B,j){var ee=this.sectorInRad,N=this.vangles;return(N?A.pathPolygonAnnulus:x.pathAnnulus)(B,j,ee[0],ee[1],N)},W.pathSubplot=function(){var B=this.innerRadius,j=this.radius;return B?this.pathAnnulus(B,j):this.pathSector(j)},W.fillViewInitialKey=function(B,j){B in this.viewInitial||(this.viewInitial[B]=j)}},{"../../components/color":367,"../../components/dragelement":386,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../components/titles":476,"../../constants/alignment":483,"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/setcursor":536,"../../plot_api/subroutines":556,"../../plots/cartesian/axes":566,"../../registry":647,"../cartesian/autorange":565,"../cartesian/dragbox":575,"../cartesian/set_convert":585,"../plots":628,"../smith/helpers":637,"./constants":629,"./helpers":630,"./set_convert":635,"@plotly/d3":58,tinycolor2:313}],635:[function(g,Q,X){var m=g("../../lib"),v=g("../cartesian/set_convert"),k=m.deg2rad,x=m.rad2deg;Q.exports=function(e,t,r){switch(v(e,r),e._id){case"x":case"radialaxis":(function(l,n){var d=n._subplot;l.setGeometry=function(){var u=l._rl[0],o=l._rl[1],h=d.innerRadius,s=(d.radius-h)/(o-u),a=h/s,p=u>o?function(c){return c<=0}:function(c){return c>=0};l.c2g=function(c){var i=l.c2l(c)-u;return(p(i)?i:0)+a},l.g2c=function(c){return l.l2c(c+u-a)},l.g2p=function(c){return c*s},l.c2p=function(c){return l.g2p(l.c2g(c))}}})(e,t);break;case"angularaxis":(function(l,n){var d=l.type;if(d==="linear"){var u=l.d2c,o=l.c2d;l.d2c=function(h,s){return function(a,p){return p==="degrees"?k(a):a}(u(h),s)},l.c2d=function(h,s){return o(function(a,p){return p==="degrees"?x(a):a}(h,s))}}l.makeCalcdata=function(h,s){var a,p,c=h[s],i=h._length,y=function(T){return l.d2c(T,h.thetaunit)};if(c){if(m.isTypedArray(c)&&d==="linear"){if(i===c.length)return c;if(c.subarray)return c.subarray(0,i)}for(a=new Array(i),p=0;p<i;p++)a[p]=y(c[p])}else{var f=s+"0",w="d"+s,b=f in h?y(h[f]):0,_=h[w]?y(h[w]):(l.period||2*Math.PI)/i;for(a=new Array(i),p=0;p<i;p++)a[p]=b+p*_}return a},l.setGeometry=function(){var h,s,a,p,c=n.sector,i=c.map(k),y={clockwise:-1,counterclockwise:1}[l.direction],f=k(l.rotation),w=function(L){return y*L+f},b=function(L){return(L-f)/y};switch(d){case"linear":s=h=m.identity,p=k,a=x,l.range=m.isFullCircle(i)?[c[0],c[0]+360]:i.map(b).map(x);break;case"category":var _=l._categories.length,T=l.period?Math.max(l.period,_):_;T===0&&(T=1),s=p=function(L){return 2*L*Math.PI/T},h=a=function(L){return L*T/Math.PI/2},l.range=[0,T]}l.c2g=function(L){return w(s(L))},l.g2c=function(L){return h(b(L))},l.t2g=function(L){return w(p(L))},l.g2t=function(L){return a(b(L))}}})(e,t)}}},{"../../lib":515,"../cartesian/set_convert":585}],636:[function(g,Q,X){Q.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],637:[function(g,Q,X){function m(e){return e<0?-1:e>0?1:0}function v(e){var t=e[0],r=e[1];if(!isFinite(t)||!isFinite(r))return[1,0];var l=(t+1)*(t+1)+r*r;return[(t*t+r*r-1)/l,2*r/l]}function k(e,t){var r=t[0],l=t[1];return[r*e.radius+e.cx,-l*e.radius+e.cy]}function x(e,t){return t*e.radius}Q.exports={smith:v,reactanceArc:function(e,t,r,l){var n=k(e,v([r,t])),d=n[0],u=n[1],o=k(e,v([l,t])),h=o[0],s=o[1];if(t===0)return["M"+d+","+u,"L"+h+","+s].join(" ");var a=x(e,1/Math.abs(t));return["M"+d+","+u,"A"+a+","+a+" 0 0,"+(t<0?1:0)+" "+h+","+s].join(" ")},resistanceArc:function(e,t,r,l){var n=x(e,1/(t+1)),d=k(e,v([t,r])),u=d[0],o=d[1],h=k(e,v([t,l])),s=h[0],a=h[1];if(m(r)!==m(l)){var p=k(e,v([t,0]));return["M"+u+","+o,"A"+n+","+n+" 0 0,"+(0<r?0:1)+" "+p[0]+","+p[1],"A"+n+","+n+" 0 0,"+(l<0?0:1)+s+","+a].join(" ")}return["M"+u+","+o,"A"+n+","+n+" 0 0,"+(l<r?0:1)+" "+s+","+a].join(" ")},smithTransform:k}},{}],638:[function(g,Q,X){var m=g("../get_data").getSubplotCalcData,v=g("../../lib").counterRegex,k=g("../polar/polar"),x=g("./constants"),e=x.attr,t=x.name,r=v(t),l={};l[e]={valType:"subplotid",dflt:t,editType:"calc"},Q.exports={attr:e,name:t,idRoot:t,idRegex:r,attrRegex:r,attributes:l,layoutAttributes:g("./layout_attributes"),supplyLayoutDefaults:g("./layout_defaults"),plot:function(n){for(var d=n._fullLayout,u=n.calcdata,o=d._subplots[t],h=0;h<o.length;h++){var s=o[h],a=m(u,t,s),p=d[s]._subplot;p||(p=k(n,s,!0),d[s]._subplot=p),p.plot(a,d,n._promises)}},clean:function(n,d,u,o){for(var h=o._subplots[t]||[],s=0;s<h.length;s++){var a=h[s],p=o[a]._subplot;if(!d[a]&&p)for(var c in p.framework.remove(),p.clipPaths)p.clipPaths[c].remove()}},toSVG:g("../cartesian").toSVG}},{"../../lib":515,"../cartesian":578,"../get_data":602,"../polar/polar":634,"./constants":636,"./layout_attributes":639,"./layout_defaults":640}],639:[function(g,Q,X){var m=g("../../components/color/attributes"),v=g("../cartesian/layout_attributes"),k=g("../domain").attributes,x=g("../../lib").extendFlat,e=g("../../plot_api/edit_types").overrideAll,t=e({color:v.color,showline:x({},v.showline,{dflt:!0}),linecolor:v.linecolor,linewidth:v.linewidth,showgrid:x({},v.showgrid,{dflt:!0}),gridcolor:v.gridcolor,gridwidth:v.gridwidth,griddash:v.griddash},"plot","from-root"),r=e({ticklen:v.ticklen,tickwidth:x({},v.tickwidth,{dflt:2}),tickcolor:v.tickcolor,showticklabels:v.showticklabels,showtickprefix:v.showtickprefix,tickprefix:v.tickprefix,showticksuffix:v.showticksuffix,ticksuffix:v.ticksuffix,tickfont:v.tickfont,tickformat:v.tickformat,hoverformat:v.hoverformat,layer:v.layer},"plot","from-root"),l=x({visible:x({},v.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:x({},v.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},t,r),n=x({visible:x({},v.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:v.ticks,editType:"calc"},t,r);Q.exports={domain:k({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:m.background},realaxis:l,imaginaryaxis:n,editType:"calc"}},{"../../components/color/attributes":366,"../../lib":515,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],640:[function(g,Q,X){var m,v,k,x=g("../../lib"),e=g("../../components/color"),t=g("../../plot_api/plot_template"),r=g("../subplot_defaults"),l=g("../get_data").getSubplotData,n=g("../cartesian/prefix_suffix_defaults"),d=g("../cartesian/tick_label_defaults"),u=g("../cartesian/line_grid_defaults"),o=g("../cartesian/set_convert"),h=g("./layout_attributes"),s=g("./constants"),a=s.axisNames,p=(m=function(i){return i.slice().reverse().map(function(y){return-y}).concat([0]).concat(i)},v=String,k={},function(i){var y=v?v(i):i;if(y in k)return k[y];var f=m(i);return k[y]=f,f});function c(i,y,f,w){var b=f("bgcolor");w.bgColor=e.combine(b,w.paper_bgcolor);var _,T=l(w.fullData,s.name,w.id),L=w.layoutOut;function A(W,Z){return f(_+"."+W,Z)}for(var I=0;I<a.length;I++){_=a[I],x.isPlainObject(i[_])||(i[_]={});var P=i[_],S=t.newContainer(y,_);S._id=S._name=_,S._attr=w.id+"."+_,S._traceIndices=T.map(function(W){return W._expandedIndex});var E=A("visible");if(S.type="linear",o(S,L),n(P,S,A,S.type),E){var z,D,U,H,Y=_==="realaxis";Y&&A("side"),Y?A("tickvals"):A("tickvals",p(y.realaxis.tickvals||h.realaxis.tickvals.dflt));var J=w.font||{};E&&(D=(z=A("color"))===P.color?z:J.color,U=J.size,H=J.family),d(P,S,A,S.type,{noTicklabelstep:!0,noAng:!Y,noExp:!0,font:{color:D,size:U,family:H}}),x.coerce2(i,y,h,_+".ticklen"),x.coerce2(i,y,h,_+".tickwidth"),x.coerce2(i,y,h,_+".tickcolor",y.color),A("ticks")||(delete y[_].ticklen,delete y[_].tickwidth,delete y[_].tickcolor),u(P,S,A,{dfltColor:z,bgColor:w.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:h[_]}),A("layer")}A("hoverformat"),delete S.type,S._input=P}}Q.exports=function(i,y,f){r(i,y,f,{noUirevision:!0,type:s.name,attributes:h,handleDefaults:c,font:y.font,paper_bgcolor:y.paper_bgcolor,fullData:f,layoutOut:y})}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/set_convert":585,"../cartesian/tick_label_defaults":587,"../get_data":602,"../subplot_defaults":641,"./constants":636,"./layout_attributes":639}],641:[function(g,Q,X){var m=g("../lib"),v=g("../plot_api/plot_template"),k=g("./domain").defaults;Q.exports=function(x,e,t,r){var l,n,d=r.type,u=r.attributes,o=r.handleDefaults,h=r.partition||"x",s=e._subplots[d],a=s.length,p=a&&s[0].replace(/\d+$/,"");function c(w,b){return m.coerce(l,n,u,w,b)}for(var i=0;i<a;i++){var y=s[i];l=x[y]?x[y]:x[y]={},n=v.newContainer(e,y,p),r.noUirevision||c("uirevision",e.uirevision);var f={};f[h]=[i/a,(i+1)/a],k(n,e,c,f),r.id=y,o(l,n,c,r)}}},{"../lib":515,"../plot_api/plot_template":555,"./domain":593}],642:[function(g,Q,X){var m=g("../constants/docs");m.FORMAT_LINK,m.DATE_FORMAT_LINK;function v(k){var x=k.description?" "+k.description:"",e=k.keys||[];if(e.length>0){for(var t=[],r=0;r<e.length;r++)t[r]="`"+e[r]+"`";x+="Finally, the template string has access to ",x=e.length===1?"variable "+t[0]:"variables "+t.slice(0,-1).join(", ")+" and "+t.slice(-1)+"."}return x}X.hovertemplateAttrs=function(k,x){k=k||{},v(x=x||{});var e={valType:"string",dflt:"",editType:k.editType||"none"};return k.arrayOk!==!1&&(e.arrayOk=!0),e},X.texttemplateAttrs=function(k,x){k=k||{},v(x=x||{});var e={valType:"string",dflt:"",editType:k.editType||"calc"};return k.arrayOk!==!1&&(e.arrayOk=!0),e}},{"../constants/docs":486}],643:[function(g,Q,X){var m=g("./ternary"),v=g("../../plots/get_data").getSubplotCalcData,k=g("../../lib").counterRegex;X.name="ternary";var x=X.attr="subplot";X.idRoot="ternary",X.idRegex=X.attrRegex=k("ternary"),(X.attributes={})[x]={valType:"subplotid",dflt:"ternary",editType:"calc"},X.layoutAttributes=g("./layout_attributes"),X.supplyLayoutDefaults=g("./layout_defaults"),X.plot=function(e){for(var t=e._fullLayout,r=e.calcdata,l=t._subplots.ternary,n=0;n<l.length;n++){var d=l[n],u=v(r,"ternary",d),o=t[d]._subplot;o||(o=new m({id:d,graphDiv:e,container:t._ternarylayer.node()},t),t[d]._subplot=o),o.plot(u,t,e._promises)}},X.clean=function(e,t,r,l){for(var n=l._subplots.ternary||[],d=0;d<n.length;d++){var u=n[d],o=l[u]._subplot;!t[u]&&o&&(o.plotContainer.remove(),o.clipDef.remove(),o.clipDefRelative.remove(),o.layers["a-title"].remove(),o.layers["b-title"].remove(),o.layers["c-title"].remove())}}},{"../../lib":515,"../../plots/get_data":602,"./layout_attributes":644,"./layout_defaults":645,"./ternary":646}],644:[function(g,Q,X){var m=g("../../components/color/attributes"),v=g("../domain").attributes,k=g("../cartesian/layout_attributes"),x=g("../../plot_api/edit_types").overrideAll,e=g("../../lib/extend").extendFlat,t={title:{text:k.title.text,font:k.title.font},color:k.color,tickmode:k.tickmode,nticks:e({},k.nticks,{dflt:6,min:1}),tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,ticklabelstep:k.ticklabelstep,showticklabels:k.showticklabels,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickfont:k.tickfont,tickangle:k.tickangle,tickformat:k.tickformat,tickformatstops:k.tickformatstops,hoverformat:k.hoverformat,showline:e({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:e({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash,layer:k.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}},r=Q.exports=x({domain:v({name:"ternary"}),bgcolor:{valType:"color",dflt:m.background},sum:{valType:"number",dflt:1,min:0},aaxis:t,baxis:t,caxis:t},"plot","from-root");r.uirevision={valType:"any",editType:"none"},r.aaxis.uirevision=r.baxis.uirevision=r.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],645:[function(g,Q,X){var m=g("../../components/color"),v=g("../../plot_api/plot_template"),k=g("../../lib"),x=g("../subplot_defaults"),e=g("../cartesian/tick_label_defaults"),t=g("../cartesian/prefix_suffix_defaults"),r=g("../cartesian/tick_mark_defaults"),l=g("../cartesian/tick_value_defaults"),n=g("../cartesian/line_grid_defaults"),d=g("./layout_attributes"),u=["aaxis","baxis","caxis"];function o(s,a,p,c){var i,y,f,w=p("bgcolor"),b=p("sum");c.bgColor=m.combine(w,c.paper_bgcolor);for(var _=0;_<u.length;_++)y=s[i=u[_]]||{},(f=v.newContainer(a,i))._name=i,h(y,f,c,a);var T=a.aaxis,L=a.baxis,A=a.caxis;T.min+L.min+A.min>=b&&(T.min=0,L.min=0,A.min=0,s.aaxis&&delete s.aaxis.min,s.baxis&&delete s.baxis.min,s.caxis&&delete s.caxis.min)}function h(s,a,p,c){var i=d[a._name];function y(L,A){return k.coerce(s,a,i,L,A)}y("uirevision",c.uirevision),a.type="linear";var f=y("color"),w=f!==i.color.dflt?f:p.font.color,b=a._name.charAt(0).toUpperCase(),_="Component "+b,T=y("title.text",_);a._hovertitle=T===_?T:b,k.coerceFont(y,"title.font",{family:p.font.family,size:k.bigFont(p.font.size),color:w}),y("min"),l(s,a,y,"linear"),t(s,a,y,"linear"),e(s,a,y,"linear"),r(s,a,y,{outerTicks:!0}),y("showticklabels")&&(k.coerceFont(y,"tickfont",{family:p.font.family,size:p.font.size,color:w}),y("tickangle"),y("tickformat")),n(s,a,y,{dfltColor:f,bgColor:p.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:i}),y("hoverformat"),y("layer")}Q.exports=function(s,a,p){x(s,a,p,{type:"ternary",attributes:d,handleDefaults:o,font:a.font,paper_bgcolor:a.paper_bgcolor})}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/tick_label_defaults":587,"../cartesian/tick_mark_defaults":588,"../cartesian/tick_value_defaults":589,"../subplot_defaults":641,"./layout_attributes":644}],646:[function(g,Q,X){var m=g("@plotly/d3"),v=g("tinycolor2"),k=g("../../registry"),x=g("../../lib"),e=x.strTranslate,t=x._,r=g("../../components/color"),l=g("../../components/drawing"),n=g("../cartesian/set_convert"),d=g("../../lib/extend").extendFlat,u=g("../plots"),o=g("../cartesian/axes"),h=g("../../components/dragelement"),s=g("../../components/fx"),a=g("../../components/dragelement/helpers"),p=a.freeMode,c=a.rectMode,i=g("../../components/titles"),y=g("../../components/selections").prepSelect,f=g("../../components/selections").selectOnClick,w=g("../../components/selections").clearOutline,b=g("../../components/selections").clearSelectionsCache,_=g("../cartesian/constants");function T(U,H){this.id=U.id,this.graphDiv=U.graphDiv,this.init(H),this.makeFramework(H),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}Q.exports=T;var L=T.prototype;L.init=function(U){this.container=U._ternarylayer,this.defs=U._defs,this.layoutId=U._uid,this.traceHash={},this.layers={}},L.plot=function(U,H){var Y=H[this.id],J=H._size;this._hasClipOnAxisFalse=!1;for(var W=0;W<U.length;W++)if(U[W][0].trace.cliponaxis===!1){this._hasClipOnAxisFalse=!0;break}this.updateLayers(Y),this.adjustLayout(Y,J),u.generalUpdatePerTraceModule(this.graphDiv,this,U,Y),this.layers.plotbg.select("path").call(r.fill,Y.bgcolor)},L.makeFramework=function(U){var H=this.graphDiv,Y=U[this.id],J=this.clipId="clip"+this.layoutId+this.id,W=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=x.ensureSingleById(U._clips,"clipPath",J,function(Z){Z.append("path").attr("d","M0,0Z")}),this.clipDefRelative=x.ensureSingleById(U._clips,"clipPath",W,function(Z){Z.append("path").attr("d","M0,0Z")}),this.plotContainer=x.ensureSingle(this.container,"g",this.id),this.updateLayers(Y),l.setClipUrl(this.layers.backplot,J,H),l.setClipUrl(this.layers.grids,J,H)},L.updateLayers=function(U){var H=this.layers,Y=["draglayer","plotbg","backplot","grids"];U.aaxis.layer==="below traces"&&Y.push("aaxis","aline"),U.baxis.layer==="below traces"&&Y.push("baxis","bline"),U.caxis.layer==="below traces"&&Y.push("caxis","cline"),Y.push("frontplot"),U.aaxis.layer==="above traces"&&Y.push("aaxis","aline"),U.baxis.layer==="above traces"&&Y.push("baxis","bline"),U.caxis.layer==="above traces"&&Y.push("caxis","cline");var J=this.plotContainer.selectAll("g.toplevel").data(Y,String),W=["agrid","bgrid","cgrid"];J.enter().append("g").attr("class",function(Z){return"toplevel "+Z}).each(function(Z){var re=m.select(this);H[Z]=re,Z==="frontplot"?re.append("g").classed("scatterlayer",!0):Z==="backplot"?re.append("g").classed("maplayer",!0):Z==="plotbg"?re.append("path").attr("d","M0,0Z"):Z==="aline"||Z==="bline"||Z==="cline"?re.append("path"):Z==="grids"&&W.forEach(function(V){H[V]=re.append("g").classed("grid "+V,!0)})}),J.order()};var A=Math.sqrt(4/3);L.adjustLayout=function(U,H){var Y,J,W,Z,re,V,B=this,j=U.domain,ee=(j.x[0]+j.x[1])/2,N=(j.y[0]+j.y[1])/2,$=j.x[1]-j.x[0],K=j.y[1]-j.y[0],te=$*H.w,ie=K*H.h,le=U.sum,se=U.aaxis.min,ve=U.baxis.min,fe=U.caxis.min;te>A*ie?W=(Z=ie)*A:Z=(W=te)/A,re=$*W/te,V=K*Z/ie,Y=H.l+H.w*ee-W/2,J=H.t+H.h*(1-N)-Z/2,B.x0=Y,B.y0=J,B.w=W,B.h=Z,B.sum=le,B.xaxis={type:"linear",range:[se+2*fe-le,le-se-2*ve],domain:[ee-re/2,ee+re/2],_id:"x"},n(B.xaxis,B.graphDiv._fullLayout),B.xaxis.setScale(),B.xaxis.isPtWithinRange=function(De){return De.a>=B.aaxis.range[0]&&De.a<=B.aaxis.range[1]&&De.b>=B.baxis.range[1]&&De.b<=B.baxis.range[0]&&De.c>=B.caxis.range[1]&&De.c<=B.caxis.range[0]},B.yaxis={type:"linear",range:[se,le-ve-fe],domain:[N-V/2,N+V/2],_id:"y"},n(B.yaxis,B.graphDiv._fullLayout),B.yaxis.setScale(),B.yaxis.isPtWithinRange=function(){return!0};var ye=B.yaxis.domain[0],Ae=B.aaxis=d({},U.aaxis,{range:[se,le-ve-fe],side:"left",tickangle:(+U.aaxis.tickangle||0)-30,domain:[ye,ye+V*A],anchor:"free",position:0,_id:"y",_length:W});n(Ae,B.graphDiv._fullLayout),Ae.setScale();var pe=B.baxis=d({},U.baxis,{range:[le-se-fe,ve],side:"bottom",domain:B.xaxis.domain,anchor:"free",position:0,_id:"x",_length:W});n(pe,B.graphDiv._fullLayout),pe.setScale();var ge=B.caxis=d({},U.caxis,{range:[le-se-ve,fe],side:"right",tickangle:(+U.caxis.tickangle||0)+30,domain:[ye,ye+V*A],anchor:"free",position:0,_id:"y",_length:W});n(ge,B.graphDiv._fullLayout),ge.setScale();var we="M"+Y+","+(J+Z)+"h"+W+"l-"+W/2+",-"+Z+"Z";B.clipDef.select("path").attr("d",we),B.layers.plotbg.select("path").attr("d",we);var oe="M0,"+Z+"h"+W+"l-"+W/2+",-"+Z+"Z";B.clipDefRelative.select("path").attr("d",oe);var de=e(Y,J);B.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",de),B.clipDefRelative.select("path").attr("transform",null);var Te=e(Y-pe._offset,J+Z);B.layers.baxis.attr("transform",Te),B.layers.bgrid.attr("transform",Te);var Ee=e(Y+W/2,J)+"rotate(30)"+e(0,-Ae._offset);B.layers.aaxis.attr("transform",Ee),B.layers.agrid.attr("transform",Ee);var Me=e(Y+W/2,J)+"rotate(-30)"+e(0,-ge._offset);B.layers.caxis.attr("transform",Me),B.layers.cgrid.attr("transform",Me),B.drawAxes(!0),B.layers.aline.select("path").attr("d",Ae.showline?"M"+Y+","+(J+Z)+"l"+W/2+",-"+Z:"M0,0").call(r.stroke,Ae.linecolor||"#000").style("stroke-width",(Ae.linewidth||0)+"px"),B.layers.bline.select("path").attr("d",pe.showline?"M"+Y+","+(J+Z)+"h"+W:"M0,0").call(r.stroke,pe.linecolor||"#000").style("stroke-width",(pe.linewidth||0)+"px"),B.layers.cline.select("path").attr("d",ge.showline?"M"+(Y+W/2)+","+J+"l"+W/2+","+Z:"M0,0").call(r.stroke,ge.linecolor||"#000").style("stroke-width",(ge.linewidth||0)+"px"),B.graphDiv._context.staticPlot||B.initInteractions(),l.setClipUrl(B.layers.frontplot,B._hasClipOnAxisFalse?null:B.clipId,B.graphDiv)},L.drawAxes=function(U){var H=this.graphDiv,Y=this.id.substr(7)+"title",J=this.layers,W=this.aaxis,Z=this.baxis,re=this.caxis;if(this.drawAx(W),this.drawAx(Z),this.drawAx(re),U){var V=Math.max(W.showticklabels?W.tickfont.size/2:0,(re.showticklabels?.75*re.tickfont.size:0)+(re.ticks==="outside"?.87*re.ticklen:0)),B=(Z.showticklabels?Z.tickfont.size:0)+(Z.ticks==="outside"?Z.ticklen:0)+3;J["a-title"]=i.draw(H,"a"+Y,{propContainer:W,propName:this.id+".aaxis.title",placeholder:t(H,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-W.title.font.size/3-V,"text-anchor":"middle"}}),J["b-title"]=i.draw(H,"b"+Y,{propContainer:Z,propName:this.id+".baxis.title",placeholder:t(H,"Click to enter Component B title"),attributes:{x:this.x0-B,y:this.y0+this.h+.83*Z.title.font.size+B,"text-anchor":"middle"}}),J["c-title"]=i.draw(H,"c"+Y,{propContainer:re,propName:this.id+".caxis.title",placeholder:t(H,"Click to enter Component C title"),attributes:{x:this.x0+this.w+B,y:this.y0+this.h+.83*re.title.font.size+B,"text-anchor":"middle"}})}},L.drawAx=function(U){var H,Y=this.graphDiv,J=U._name,W=J.charAt(0),Z=U._id,re=this.layers[J],V=W+"tickLayout",B=(H=U).ticks+String(H.ticklen)+String(H.showticklabels);this[V]!==B&&(re.selectAll("."+Z+"tick").remove(),this[V]=B),U.setScale();var j=o.calcTicks(U),ee=o.clipEnds(U,j),N=o.makeTransTickFn(U),$=o.getTickSigns(U)[2],K=x.deg2rad(30),te=$*(U.linewidth||1)/2,ie=$*U.ticklen,le=this.w,se=this.h,ve=W==="b"?"M0,"+te+"l"+Math.sin(K)*ie+","+Math.cos(K)*ie:"M"+te+",0l"+Math.cos(K)*ie+","+-Math.sin(K)*ie,fe={a:"M0,0l"+se+",-"+le/2,b:"M0,0l-"+le/2+",-"+se,c:"M0,0l-"+se+","+le/2}[W];o.drawTicks(Y,U,{vals:U.ticks==="inside"?ee:j,layer:re,path:ve,transFn:N,crisp:!1}),o.drawGrid(Y,U,{vals:ee,layer:this.layers[W+"grid"],path:fe,transFn:N,crisp:!1}),o.drawLabels(Y,U,{vals:j,layer:re,transFn:N,labelFns:o.makeLabelFns(U,0,30)})};var I=_.MINZOOM/2+.87,P="m-0.87,.5h"+I+"v3h-"+(I+5.2)+"l"+(I/2+2.6)+",-"+(.87*I+4.5)+"l2.6,1.5l-"+I/2+","+.87*I+"Z",S="m0.87,.5h-"+I+"v3h"+(I+5.2)+"l-"+(I/2+2.6)+",-"+(.87*I+4.5)+"l-2.6,1.5l"+I/2+","+.87*I+"Z",E="m0,1l"+I/2+","+.87*I+"l2.6,-1.5l-"+(I/2+2.6)+",-"+(.87*I+4.5)+"l-"+(I/2+2.6)+","+(.87*I+4.5)+"l2.6,1.5l"+I/2+",-"+.87*I+"Z",z=!0;function D(U){m.select(U).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}L.clearOutline=function(){b(this.dragOptions),w(this.dragOptions.gd)},L.initInteractions=function(){var U,H,Y,J,W,Z,re,V,B,j,ee,N,$=this,K=$.layers.plotbg.select("path").node(),te=$.graphDiv,ie=te._fullLayout._zoomlayer;function le(oe){var de={};return de[$.id+".aaxis.min"]=oe.a,de[$.id+".baxis.min"]=oe.b,de[$.id+".caxis.min"]=oe.c,de}function se(oe,de){var Te=te._fullLayout.clickmode;D(te),oe===2&&(te.emit("plotly_doubleclick",null),k.call("_guiRelayout",te,le({a:0,b:0,c:0}))),Te.indexOf("select")>-1&&oe===1&&f(de,te,[$.xaxis],[$.yaxis],$.id,$.dragOptions),Te.indexOf("event")>-1&&s.click(te,de,$.id)}function ve(oe,de){return 1-de/$.h}function fe(oe,de){return 1-(oe+($.h-de)/Math.sqrt(3))/$.w}function ye(oe,de){return(oe-($.h-de)/Math.sqrt(3))/$.w}function Ae(oe,de){var Te=Y+oe*U,Ee=J+de*H,Me=Math.max(0,Math.min(1,ve(0,J),ve(0,Ee))),De=Math.max(0,Math.min(1,fe(Y,J),fe(Te,Ee))),Ie=Math.max(0,Math.min(1,ye(Y,J),ye(Te,Ee))),Oe=(Me/2+Ie)*$.w,Ze=(1-Me/2-De)*$.w,Fe=(Oe+Ze)/2,Pe=Ze-Oe,ze=(1-Me)*$.h,Ge=ze-Pe/A;Pe<_.MINZOOM?(re=W,ee.attr("d",B),N.attr("d","M0,0Z")):(re={a:W.a+Me*Z,b:W.b+De*Z,c:W.c+Ie*Z},ee.attr("d",B+"M"+Oe+","+ze+"H"+Ze+"L"+Fe+","+Ge+"L"+Oe+","+ze+"Z"),N.attr("d","M"+Y+","+J+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+Oe+","+ze+P+"M"+Ze+","+ze+S+"M"+Fe+","+Ge+E)),j||(ee.transition().style("fill",V>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),N.transition().style("opacity",1).duration(200),j=!0),te.emit("plotly_relayouting",le(re))}function pe(){D(te),re!==W&&(k.call("_guiRelayout",te,le(re)),z&&te.data&&te._context.showTips&&(x.notifier(t(te,"Double-click to zoom back out"),"long"),z=!1))}function ge(oe,de){var Te=oe/$.xaxis._m,Ee=de/$.yaxis._m,Me=[(re={a:W.a-Ee,b:W.b+(Te+Ee)/2,c:W.c-(Te-Ee)/2}).a,re.b,re.c].sort(x.sorterAsc),De=Me.indexOf(re.a),Ie=Me.indexOf(re.b),Oe=Me.indexOf(re.c);Me[0]<0&&(Me[1]+Me[0]/2<0?(Me[2]+=Me[0]+Me[1],Me[0]=Me[1]=0):(Me[2]+=Me[0]/2,Me[1]+=Me[0]/2,Me[0]=0),re={a:Me[De],b:Me[Ie],c:Me[Oe]},de=(W.a-re.a)*$.yaxis._m,oe=(W.c-re.c-W.b+re.b)*$.xaxis._m);var Ze=e($.x0+oe,$.y0+de);$.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Ze);var Fe=e(-oe,-de);$.clipDefRelative.select("path").attr("transform",Fe),$.aaxis.range=[re.a,$.sum-re.b-re.c],$.baxis.range=[$.sum-re.a-re.c,re.b],$.caxis.range=[$.sum-re.a-re.b,re.c],$.drawAxes(!1),$._hasClipOnAxisFalse&&$.plotContainer.select(".scatterlayer").selectAll(".trace").call(l.hideOutsideRangePoints,$),te.emit("plotly_relayouting",le(re))}function we(){k.call("_guiRelayout",te,le(re))}this.dragOptions={element:K,gd:te,plotinfo:{id:$.id,domain:te._fullLayout[$.id].domain,xaxis:$.xaxis,yaxis:$.yaxis},subplot:$.id,prepFn:function(oe,de,Te){$.dragOptions.xaxes=[$.xaxis],$.dragOptions.yaxes=[$.yaxis],U=te._fullLayout._invScaleX,H=te._fullLayout._invScaleY;var Ee=$.dragOptions.dragmode=te._fullLayout.dragmode;p(Ee)?$.dragOptions.minDrag=1:$.dragOptions.minDrag=void 0,Ee==="zoom"?($.dragOptions.moveFn=Ae,$.dragOptions.clickFn=se,$.dragOptions.doneFn=pe,function(Me,De,Ie){var Oe=K.getBoundingClientRect();Y=De-Oe.left,J=Ie-Oe.top,te._fullLayout._calcInverseTransform(te);var Ze=te._fullLayout._invTransform,Fe=x.apply3DTransform(Ze)(Y,J);Y=Fe[0],J=Fe[1],W={a:$.aaxis.range[0],b:$.baxis.range[1],c:$.caxis.range[1]},re=W,Z=$.aaxis.range[1]-W.a,V=v($.graphDiv._fullLayout[$.id].bgcolor).getLuminance(),B="M0,"+$.h+"L"+$.w/2+", 0L"+$.w+","+$.h+"Z",j=!1,ee=ie.append("path").attr("class","zoombox").attr("transform",e($.x0,$.y0)).style({fill:V>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",B),N=ie.append("path").attr("class","zoombox-corners").attr("transform",e($.x0,$.y0)).style({fill:r.background,stroke:r.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),$.clearOutline(te)}(0,de,Te)):Ee==="pan"?($.dragOptions.moveFn=ge,$.dragOptions.clickFn=se,$.dragOptions.doneFn=we,W={a:$.aaxis.range[0],b:$.baxis.range[1],c:$.caxis.range[1]},re=W,$.clearOutline(te)):(c(Ee)||p(Ee))&&y(oe,de,Te,$.dragOptions,Ee)}},K.onmousemove=function(oe){s.hover(te,oe,$.id),te._fullLayout._lasthover=K,te._fullLayout._hoversubplot=$.id},K.onmouseout=function(oe){te._dragging||h.unhover(te,oe)},h.init(this.dragOptions)}},{"../../components/color":367,"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../components/titles":476,"../../lib":515,"../../lib/extend":505,"../../registry":647,"../cartesian/axes":566,"../cartesian/constants":573,"../cartesian/set_convert":585,"../plots":628,"@plotly/d3":58,tinycolor2:313}],647:[function(g,Q,X){var m=g("./lib/loggers"),v=g("./lib/noop"),k=g("./lib/push_unique"),x=g("./lib/is_plain_object"),e=g("./lib/dom").addStyleRule,t=g("./lib/extend"),r=g("./plots/attributes"),l=g("./plots/layout_attributes"),n=t.extendFlat,d=t.extendDeepAll;function u(f){var w=f.name,b=f.categories,_=f.meta;if(X.modules[w])m.log("Type "+w+" already registered");else{X.subplotsRegistry[f.basePlotModule.name]||function(z){var D=z.name;if(X.subplotsRegistry[D])return void m.log("Plot type "+D+" already registered.");for(var U in a(z),X.subplotsRegistry[D]=z,X.componentsRegistry)i(U,z.name)}(f.basePlotModule);for(var T={},L=0;L<b.length;L++)T[b[L]]=!0,X.allCategories[b[L]]=!0;for(var A in X.modules[w]={_module:f,categories:T},_&&Object.keys(_).length&&(X.modules[w].meta=_),X.allTypes.push(w),X.componentsRegistry)p(A,w);f.layoutAttributes&&n(X.traceLayoutAttributes,f.layoutAttributes);var I=f.basePlotModule,P=I.name;if(P==="mapbox"){var S=I.constants.styleRules;for(var E in S)e(".js-plotly-plot .plotly .mapboxgl-"+E,S[E])}P!=="geo"&&P!=="mapbox"||window.PlotlyGeoAssets!==void 0||(window.PlotlyGeoAssets={topojson:{}})}}function o(f){if(typeof f.name!="string")throw new Error("Component module *name* must be a string.");var w=f.name;for(var b in X.componentsRegistry[w]=f,f.layoutAttributes&&(f.layoutAttributes._isLinkedToArray&&k(X.layoutArrayContainers,w),a(f)),X.modules)p(w,b);for(var _ in X.subplotsRegistry)i(w,_);for(var T in X.transformsRegistry)c(w,T);f.schema&&f.schema.layout&&d(l,f.schema.layout)}function h(f){if(typeof f.name!="string")throw new Error("Transform module *name* must be a string.");var w="Transform module "+f.name,b=typeof f.transform=="function",_=typeof f.calcTransform=="function";if(!b&&!_)throw new Error(w+" is missing a *transform* or *calcTransform* method.");for(var T in b&&_&&m.log([w+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),x(f.attributes)||m.log(w+" registered without an *attributes* object."),typeof f.supplyDefaults!="function"&&m.log(w+" registered without a *supplyDefaults* method."),X.transformsRegistry[f.name]=f,X.componentsRegistry)c(T,f.name)}function s(f){var w=f.name,b=w.split("-")[0],_=f.dictionary,T=f.format,L=_&&Object.keys(_).length,A=T&&Object.keys(T).length,I=X.localeRegistry,P=I[w];if(P||(I[w]=P={}),b!==w){var S=I[b];S||(I[b]=S={}),L&&S.dictionary===P.dictionary&&(S.dictionary=_),A&&S.format===P.format&&(S.format=T)}L&&(P.dictionary=_),A&&(P.format=T)}function a(f){if(f.layoutAttributes){var w=f.layoutAttributes._arrayAttrRegexps;if(w)for(var b=0;b<w.length;b++)k(X.layoutArrayRegexes,w[b])}}function p(f,w){var b=X.componentsRegistry[f].schema;if(b&&b.traces){var _=b.traces[w];_&&d(X.modules[w]._module.attributes,_)}}function c(f,w){var b=X.componentsRegistry[f].schema;if(b&&b.transforms){var _=b.transforms[w];_&&d(X.transformsRegistry[w].attributes,_)}}function i(f,w){var b=X.componentsRegistry[f].schema;if(b&&b.subplots){var _=X.subplotsRegistry[w],T=_.layoutAttributes,L=_.attr==="subplot"?_.name:_.attr;Array.isArray(L)&&(L=L[0]);var A=b.subplots[L];T&&A&&d(T,A)}}function y(f){return typeof f=="object"&&(f=f.type),f}X.modules={},X.allCategories={},X.allTypes=[],X.subplotsRegistry={},X.transformsRegistry={},X.componentsRegistry={},X.layoutArrayContainers=[],X.layoutArrayRegexes=[],X.traceLayoutAttributes={},X.localeRegistry={},X.apiMethodRegistry={},X.collectableSubplotTypes=null,X.register=function(f){if(X.collectableSubplotTypes=null,!f)throw new Error("No argument passed to Plotly.register.");f&&!Array.isArray(f)&&(f=[f]);for(var w=0;w<f.length;w++){var b=f[w];if(!b)throw new Error("Invalid module was attempted to be registered!");switch(b.moduleType){case"trace":u(b);break;case"transform":h(b);break;case"component":o(b);break;case"locale":s(b);break;case"apiMethod":var _=b.name;X.apiMethodRegistry[_]=b.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},X.getModule=function(f){var w=X.modules[y(f)];return!!w&&w._module},X.traceIs=function(f,w){if((f=y(f))==="various")return!1;var b=X.modules[f];return b||(f&&m.log("Unrecognized trace type "+f+"."),b=X.modules[r.type.dflt]),!!b.categories[w]},X.getTransformIndices=function(f,w){for(var b=[],_=f.transforms||[],T=0;T<_.length;T++)_[T].type===w&&b.push(T);return b},X.hasTransform=function(f,w){for(var b=f.transforms||[],_=0;_<b.length;_++)if(b[_].type===w)return!0;return!1},X.getComponentMethod=function(f,w){var b=X.componentsRegistry[f];return b&&b[w]||v},X.call=function(){var f=arguments[0],w=[].slice.call(arguments,1);return X.apiMethodRegistry[f].apply(null,w)}},{"./lib/dom":503,"./lib/extend":505,"./lib/is_plain_object":516,"./lib/loggers":519,"./lib/noop":524,"./lib/push_unique":530,"./plots/attributes":562,"./plots/layout_attributes":619}],648:[function(g,Q,X){var m=g("../registry"),v=g("../lib"),k=v.extendFlat,x=v.extendDeep;function e(t){var r;switch(t){case"themes__thumb":r={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":r={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:r={}}return r}Q.exports=function(t,r){var l,n,d=t.data,u=t.layout,o=x([],d),h=x({},u,e(r.tileClass)),s=t._context||{};if(r.width&&(h.width=r.width),r.height&&(h.height=r.height),r.tileClass==="thumbnail"||r.tileClass==="themes__thumb"){h.annotations=[];var a=Object.keys(h);for(l=0;l<a.length;l++)n=a[l],["xaxis","yaxis","zaxis"].indexOf(n.slice(0,5))>-1&&(h[a[l]].title={text:""});for(l=0;l<o.length;l++){var p=o[l];p.showscale=!1,p.marker&&(p.marker.showscale=!1),m.traceIs(p,"pie-like")&&(p.textposition="none")}}if(Array.isArray(r.annotations))for(l=0;l<r.annotations.length;l++)h.annotations.push(r.annotations[l]);var c=Object.keys(h).filter(function(b){return b.match(/^scene\d*$/)});if(c.length){var i={};for(r.tileClass==="thumbnail"&&(i={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),l=0;l<c.length;l++){var y=h[c[l]];y.xaxis||(y.xaxis={}),y.yaxis||(y.yaxis={}),y.zaxis||(y.zaxis={}),k(y.xaxis,i),k(y.yaxis,i),k(y.zaxis,i),y._scene=null}}var f=document.createElement("div");r.tileClass&&(f.className=r.tileClass);var w={gd:f,td:f,layout:h,data:o,config:{staticPlot:r.staticPlot===void 0||r.staticPlot,plotGlPixelRatio:r.plotGlPixelRatio===void 0?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||!1,showLink:r.showLink||!1,showTips:r.showTips||!1,mapboxAccessToken:s.mapboxAccessToken}};return r.setBackground!=="transparent"&&(w.config.setBackground=r.setBackground||"opaque"),w.gd.defaultLayout=e(r.tileClass),w}},{"../lib":515,"../registry":647}],649:[function(g,Q,X){var m=g("../lib"),v=g("../plot_api/to_image"),k=g("./filesaver"),x=g("./helpers");Q.exports=function(e,t){var r;return m.isPlainObject(e)||(r=m.getGraphDiv(e)),(t=t||{}).format=t.format||"png",t.width=t.width||null,t.height=t.height||null,t.imageDataOnly=!0,new Promise(function(l,n){r&&r._snapshotInProgress&&n(new Error("Snapshotting already in progress.")),m.isIE()&&t.format!=="svg"&&n(new Error(x.MSG_IE_BAD_FORMAT)),r&&(r._snapshotInProgress=!0);var d=v(e,t),u=t.filename||e.fn||"newplot";u+="."+t.format.replace("-","."),d.then(function(o){return r&&(r._snapshotInProgress=!1),k(o,u,t.format)}).then(function(o){l(o)}).catch(function(o){r&&(r._snapshotInProgress=!1),n(o)})})}},{"../lib":515,"../plot_api/to_image":558,"./filesaver":650,"./helpers":651}],650:[function(g,Q,X){var m=g("../lib"),v=g("./helpers");Q.exports=function(k,x,e){var t=document.createElement("a"),r="download"in t;return new Promise(function(l,n){var d,u;if(m.isIE())return d=v.createBlob(k,"svg"),window.navigator.msSaveBlob(d,x),d=null,l(x);if(r)return d=v.createBlob(k,e),u=v.createObjectURL(d),t.href=u,t.download=x,document.body.appendChild(t),t.click(),document.body.removeChild(t),v.revokeObjectURL(u),d=null,l(x);if(m.isSafari()){var o=e==="svg"?",":";base64,";return v.octetStream(o+encodeURIComponent(k)),l(x)}n(new Error("download error"))})}},{"../lib":515,"./helpers":651}],651:[function(g,Q,X){var m=g("../registry");X.getDelay=function(k){return k._has&&(k._has("gl3d")||k._has("gl2d")||k._has("mapbox"))?500:0},X.getRedrawFunc=function(k){return function(){m.getComponentMethod("colorbar","draw")(k)}},X.encodeSVG=function(k){return"data:image/svg+xml,"+encodeURIComponent(k)},X.encodeJSON=function(k){return"data:application/json,"+encodeURIComponent(k)};var v=window.URL||window.webkitURL;X.createObjectURL=function(k){return v.createObjectURL(k)},X.revokeObjectURL=function(k){return v.revokeObjectURL(k)},X.createBlob=function(k,x){if(x==="svg")return new window.Blob([k],{type:"image/svg+xml;charset=utf-8"});if(x==="full-json")return new window.Blob([k],{type:"application/json;charset=utf-8"});var e=function(t){for(var r=t.length,l=new ArrayBuffer(r),n=new Uint8Array(l),d=0;d<r;d++)n[d]=t.charCodeAt(d);return l}(window.atob(k));return new window.Blob([e],{type:"image/"+x})},X.octetStream=function(k){document.location.href="data:application/octet-stream"+k},X.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,X.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":647}],652:[function(g,Q,X){var m=g("./helpers"),v={getDelay:m.getDelay,getRedrawFunc:m.getRedrawFunc,clone:g("./cloneplot"),toSVG:g("./tosvg"),svgToImg:g("./svgtoimg"),toImage:g("./toimage"),downloadImage:g("./download")};Q.exports=v},{"./cloneplot":648,"./download":649,"./helpers":651,"./svgtoimg":653,"./toimage":654,"./tosvg":655}],653:[function(g,Q,X){var m=g("../lib"),v=g("events").EventEmitter,k=g("./helpers");Q.exports=function(x){var e=x.emitter||new v,t=new Promise(function(r,l){var n=window.Image,d=x.svg,u=x.format||"png";if(m.isIE()&&u!=="svg"){var o=new Error(k.MSG_IE_BAD_FORMAT);return l(o),x.promise?t:e.emit("error",o)}var h,s,a=x.canvas,p=x.scale||1,c=x.width||300,i=x.height||150,y=p*c,f=p*i,w=a.getContext("2d",{willReadFrequently:!0}),b=new n;u==="svg"||m.isSafari()?s=k.encodeSVG(d):(h=k.createBlob(d,"svg"),s=k.createObjectURL(h)),a.width=y,a.height=f,b.onload=function(){var _;switch(h=null,k.revokeObjectURL(s),u!=="svg"&&w.drawImage(b,0,0,y,f),u){case"jpeg":_=a.toDataURL("image/jpeg");break;case"png":_=a.toDataURL("image/png");break;case"webp":_=a.toDataURL("image/webp");break;case"svg":_=s;break;default:var T="Image format is not jpeg, png, svg or webp.";if(l(new Error(T)),!x.promise)return e.emit("error",T)}r(_),x.promise||e.emit("success",_)},b.onerror=function(_){if(h=null,k.revokeObjectURL(s),l(_),!x.promise)return e.emit("error",_)},b.src=s});return x.promise?t:e}},{"../lib":515,"./helpers":651,events:84}],654:[function(g,Q,X){var m=g("events").EventEmitter,v=g("../registry"),k=g("../lib"),x=g("./helpers"),e=g("./cloneplot"),t=g("./tosvg"),r=g("./svgtoimg");Q.exports=function(l,n){var d=new m,u=e(l,{format:"png"}),o=u.gd;o.style.position="absolute",o.style.left="-5000px",document.body.appendChild(o);var h=x.getRedrawFunc(o);return v.call("_doPlot",o,u.data,u.layout,u.config).then(h).then(function(){var s=x.getDelay(o._fullLayout);setTimeout(function(){var a=t(o),p=document.createElement("canvas");p.id=k.randstr(),(d=r({format:n.format,width:o._fullLayout.width,height:o._fullLayout.height,canvas:p,emitter:d,svg:a})).clean=function(){o&&document.body.removeChild(o)}},s)}).catch(function(s){d.emit("error",s)}),d}},{"../lib":515,"../registry":647,"./cloneplot":648,"./helpers":651,"./svgtoimg":653,"./tosvg":655,events:84}],655:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../lib"),k=g("../components/drawing"),x=g("../components/color"),e=g("../constants/xmlns_namespaces"),t=/"/g,r=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");Q.exports=function(l,n,d){var u,o=l._fullLayout,h=o._paper,s=o._toppaper,a=o.width,p=o.height;h.insert("rect",":first-child").call(k.setRect,0,0,a,p).call(x.fill,o.paper_bgcolor);var c=o._basePlotModules||[];for(u=0;u<c.length;u++){var i=c[u];i.toSVG&&i.toSVG(l)}if(s){var y=s.node().childNodes,f=Array.prototype.slice.call(y);for(u=0;u<f.length;u++){var w=f[u];w.childNodes.length&&h.node().appendChild(w)}}o._draggers&&o._draggers.remove(),h.node().style.background="",h.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var _=m.select(this);if(this.style.visibility!=="hidden"&&this.style.display!=="none"){_.style({visibility:null,display:null});var T=this.style.fontFamily;T&&T.indexOf('"')!==-1&&_.style("font-family",T.replace(t,"TOBESTRIPPED"))}else _.remove()}),h.selectAll(".gradient_filled,.pattern_filled").each(function(){var _=m.select(this),T=this.style.fill;T&&T.indexOf("url(")!==-1&&_.style("fill",T.replace(t,"TOBESTRIPPED"));var L=this.style.stroke;L&&L.indexOf("url(")!==-1&&_.style("stroke",L.replace(t,"TOBESTRIPPED"))}),n!=="pdf"&&n!=="eps"||h.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),h.node().setAttributeNS(e.xmlns,"xmlns",e.svg),h.node().setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),n==="svg"&&d&&(h.attr("width",d*a),h.attr("height",d*p),h.attr("viewBox","0 0 "+a+" "+p));var b=new window.XMLSerializer().serializeToString(h.node());return b=function(_){var T=m.select("body").append("div").style({display:"none"}).html(""),L=_.replace(/(&[^;]*;)/gi,function(A){return A==="&lt;"?"&#60;":A==="&rt;"?"&#62;":A.indexOf("<")!==-1||A.indexOf(">")!==-1?"":T.html(A).text()});return T.remove(),L}(b),b=(b=b.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(r,"'"),v.isIE()&&(b=(b=(b=b.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),b}},{"../components/color":367,"../components/drawing":389,"../constants/xmlns_namespaces":492,"../lib":515,"@plotly/d3":58}],656:[function(g,Q,X){var m=g("../../lib");Q.exports=function(v,k){for(var x=0;x<v.length;x++)v[x].i=x;m.mergeArray(k.text,v,"tx"),m.mergeArray(k.hovertext,v,"htx");var e=k.marker;if(e){m.mergeArray(e.opacity,v,"mo",!0),m.mergeArray(e.color,v,"mc");var t=e.line;t&&(m.mergeArray(t.color,v,"mlc"),m.mergeArrayCastPositive(t.width,v,"mlw"))}}},{"../../lib":515}],657:[function(g,Q,X){var m=g("../scatter/attributes"),v=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,k=g("../../plots/template_attributes").hovertemplateAttrs,x=g("../../plots/template_attributes").texttemplateAttrs,e=g("../../components/colorscale/attributes"),t=g("../../plots/font_attributes"),r=g("./constants"),l=g("../../components/drawing/attributes").pattern,n=g("../../lib/extend").extendFlat,d=t({editType:"calc",arrayOk:!0,colorEditType:"style"}),u=n({},m.marker.line.width,{dflt:0}),o=n({width:u,editType:"calc"},e("marker.line")),h=n({line:o,editType:"calc"},e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:l});Q.exports={x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:v("x"),yhoverformat:v("y"),text:m.text,texttemplate:x({editType:"plot"},{keys:r.eventDataKeys}),hovertext:m.hovertext,hovertemplate:k({},{keys:r.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:n({},d,{}),insidetextfont:n({},d,{}),outsidetextfont:n({},d,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:n({},m.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:h,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:m.selected.marker.opacity,color:m.selected.marker.color,editType:"style"},textfont:m.selected.textfont,editType:"style"},unselected:{marker:{opacity:m.unselected.marker.opacity,color:m.unselected.marker.color,editType:"style"},textfont:m.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../scatter/attributes":936,"./constants":659}],658:[function(g,Q,X){var m=g("../../plots/cartesian/axes"),v=g("../../plots/cartesian/align_period"),k=g("../../components/colorscale/helpers").hasColorscale,x=g("../../components/colorscale/calc"),e=g("./arrays_to_calcdata"),t=g("../scatter/calc_selection");Q.exports=function(r,l){var n,d,u,o,h,s,a=m.getFromId(r,l.xaxis||"x"),p=m.getFromId(r,l.yaxis||"y"),c={msUTC:!(!l.base&&l.base!==0)};l.orientation==="h"?(n=a.makeCalcdata(l,"x",c),u=p.makeCalcdata(l,"y"),o=v(l,p,"y",u),h=!!l.yperiodalignment,s="y"):(n=p.makeCalcdata(l,"y",c),u=a.makeCalcdata(l,"x"),o=v(l,a,"x",u),h=!!l.xperiodalignment,s="x"),d=o.vals;for(var i=Math.min(d.length,n.length),y=new Array(i),f=0;f<i;f++)y[f]={p:d[f],s:n[f]},h&&(y[f].orig_p=u[f],y[f][s+"End"]=o.ends[f],y[f][s+"Start"]=o.starts[f]),l.ids&&(y[f].id=String(l.ids[f]));return k(l,"marker")&&x(r,l,{vals:l.marker.color,containerStr:"marker",cLetter:"c"}),k(l,"marker.line")&&x(r,l,{vals:l.marker.line.color,containerStr:"marker.line",cLetter:"c"}),e(y,l),t(y,l),y}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938,"./arrays_to_calcdata":656}],659:[function(g,Q,X){Q.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],660:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../../lib").isArrayOrTypedArray,k=g("../../constants/numerical").BADNUM,x=g("../../registry"),e=g("../../plots/cartesian/axes"),t=g("../../plots/cartesian/constraints").getAxisGroup,r=g("./sieve.js");function l(i,y,f,w,b){if(w.length){var _,T,L,A;switch(function(I,P){var S,E;for(S=0;S<P.length;S++){var z,D=P[S],U=D[0].trace,H=U.type==="funnel"?U._base:U.base,Y=U.orientation==="h"?U.xcalendar:U.ycalendar,J=I.type==="category"||I.type==="multicategory"?function(){return null}:I.d2c;if(v(H)){for(E=0;E<Math.min(H.length,D.length);E++)z=J(H[E],0,Y),m(z)?(D[E].b=+z,D[E].hasB=1):D[E].b=0;for(;E<D.length;E++)D[E].b=0}else{z=J(H,0,Y);var W=m(z);for(z=W?z:0,E=0;E<D.length;E++)D[E].b=z,W&&(D[E].hasB=1)}}}(f,w),b.mode){case"overlay":n(y,f,w,b);break;case"group":for(_=[],T=[],L=0;L<w.length;L++)(A=w[L])[0].trace.offset===void 0?T.push(A):_.push(A);T.length&&function(I,P,S,E,z){var D=new r(E,{posAxis:P,sepNegVal:!1,overlapNoMerge:!z.norm});(function(U,H,Y,J){for(var W=U._fullLayout,Z=Y.positions,re=Y.distinctPositions,V=Y.minDiff,B=Y.traces,j=B.length,ee=Z.length!==re.length,N=V*(1-J.gap),$=t(W,H._id)+B[0][0].trace.orientation,K=W._alignmentOpts[$]||{},te=0;te<j;te++){var ie,le,se=B[te],ve=se[0].trace,fe=K[ve.alignmentgroup]||{},ye=Object.keys(fe.offsetGroups||{}).length,Ae=(ie=ye?N/ye:ee?N/j:N)*(1-(J.groupgap||0));le=ye?((2*ve._offsetIndex+1-ye)*ie-Ae)/2:ee?((2*te+1-j)*ie-Ae)/2:-Ae/2;var pe=se[0].t;pe.barwidth=Ae,pe.poffset=le,pe.bargroupwidth=N,pe.bardelta=V}Y.binWidth=B[0][0].t.barwidth/100,u(Y),o(H,Y),h(H,Y,ee)})(I,P,D,z),function(U,H){for(var Y=U.traces,J=0;J<Y.length;J++){var W=Y[J];if(W[0].trace.base===void 0)for(var Z=new r([W],{posAxis:H,sepNegVal:!0,overlapNoMerge:!0}),re=0;re<W.length;re++){var V=W[re];if(V.p!==k){var B=Z.put(V.p,V.b+V.s);B&&(V.b=B)}}}}(D,P),z.norm?(a(D),p(S,D,z)):s(S,D)}(i,y,f,T,b),_.length&&n(y,f,_,b);break;case"stack":case"relative":for(_=[],T=[],L=0;L<w.length;L++)(A=w[L])[0].trace.base===void 0?T.push(A):_.push(A);T.length&&function(I,P,S,E,z){var D=new r(E,{posAxis:P,sepNegVal:z.mode==="relative",overlapNoMerge:!(z.norm||z.mode==="stack"||z.mode==="relative")});d(P,D,z),function(W,Z,re){var V,B,j,ee,N,$,K=c(W),te=Z.traces;for(ee=0;ee<te.length;ee++)if(V=te[ee],(B=V[0].trace).type==="funnel")for(N=0;N<V.length;N++)($=V[N]).s!==k&&Z.put($.p,-.5*$.s);for(ee=0;ee<te.length;ee++){V=te[ee],B=V[0].trace,j=B.type==="funnel";var ie=[];for(N=0;N<V.length;N++)if(($=V[N]).s!==k){var le;le=j?$.s:$.s+$.b;var se=Z.put($.p,le),ve=se+le;$.b=se,$[K]=ve,re.norm||(ie.push(ve),$.hasB&&ie.push(se))}re.norm||(B._extremes[W._id]=e.findExtremes(W,ie,{tozero:!0,padded:!0}))}}(S,D,z);for(var U=0;U<E.length;U++)for(var H=E[U],Y=0;Y<H.length;Y++){var J=H[Y];J.s!==k&&J.b+J.s===D.get(J.p,J.s)&&(J._outmost=!0)}z.norm&&p(S,D,z)}(0,y,f,T,b),_.length&&n(y,f,_,b)}(function(I,P){var S,E,z,D=c(P),U={},H=1/0,Y=-1/0;for(S=0;S<I.length;S++)for(z=I[S],E=0;E<z.length;E++){var J=z[E].p;m(J)&&(H=Math.min(H,J),Y=Math.max(Y,J))}var W=1e4/(Y-H),Z=U.round=function($){return String(Math.round(W*($-H)))};for(S=0;S<I.length;S++){(z=I[S])[0].t.extents=U;var re=z[0].t.poffset,V=Array.isArray(re);for(E=0;E<z.length;E++){var B=z[E],j=B[D]-B.w/2;if(m(j)){var ee=B[D]+B.w/2,N=Z(B.p);U[N]?U[N]=[Math.min(j,U[N][0]),Math.max(ee,U[N][1])]:U[N]=[j,ee]}B.p0=B.p+(V?re[E]:re),B.p1=B.p0+B.w,B.s0=B.b,B.s1=B.s0+B.s}}})(w,y)}}function n(i,y,f,w){for(var b=0;b<f.length;b++){var _=f[b],T=new r([_],{posAxis:i,sepNegVal:!1,overlapNoMerge:!w.norm});d(i,T,w),w.norm?(a(T),p(y,T,w)):s(y,T)}}function d(i,y,f){for(var w=y.minDiff,b=y.traces,_=w*(1-f.gap),T=_*(1-(f.groupgap||0)),L=-T/2,A=0;A<b.length;A++){var I=b[A][0].t;I.barwidth=T,I.poffset=L,I.bargroupwidth=_,I.bardelta=w}y.binWidth=b[0][0].t.barwidth/100,u(y),o(i,y),h(i,y)}function u(i){var y,f,w=i.traces;for(y=0;y<w.length;y++){var b,_=w[y],T=_[0],L=T.trace,A=T.t,I=L._offset||L.offset,P=A.poffset;if(v(I)){for(b=Array.prototype.slice.call(I,0,_.length),f=0;f<b.length;f++)m(b[f])||(b[f]=P);for(f=b.length;f<_.length;f++)b.push(P);A.poffset=b}else I!==void 0&&(A.poffset=I);var S=L._width||L.width,E=A.barwidth;if(v(S)){var z=Array.prototype.slice.call(S,0,_.length);for(f=0;f<z.length;f++)m(z[f])||(z[f]=E);for(f=z.length;f<_.length;f++)z.push(E);if(A.barwidth=z,I===void 0){for(b=[],f=0;f<_.length;f++)b.push(P+(E-z[f])/2);A.poffset=b}}else S!==void 0&&(A.barwidth=S,I===void 0&&(A.poffset=P+(E-S)/2))}}function o(i,y){for(var f=y.traces,w=c(i),b=0;b<f.length;b++)for(var _=f[b],T=_[0].t,L=T.poffset,A=Array.isArray(L),I=T.barwidth,P=Array.isArray(I),S=0;S<_.length;S++){var E=_[S],z=E.w=P?I[S]:I;E[w]=E.p+(A?L[S]:L)+z/2}}function h(i,y,f){var w=y.traces,b=y.minDiff/2;e.minDtick(i,y.minDiff,y.distinctPositions[0],f);for(var _=0;_<w.length;_++){var T,L,A,I,P=w[_],S=P[0],E=S.trace,z=[];for(I=0;I<P.length;I++)L=(T=P[I]).p-b,A=T.p+b,z.push(L,A);if(E.width||E.offset){var D=S.t,U=D.poffset,H=D.barwidth,Y=Array.isArray(U),J=Array.isArray(H);for(I=0;I<P.length;I++){T=P[I];var W=Y?U[I]:U,Z=J?H[I]:H;A=(L=T.p+W)+Z,z.push(L,A)}}E._extremes[i._id]=e.findExtremes(i,z,{padded:!1})}}function s(i,y){for(var f=y.traces,w=c(i),b=0;b<f.length;b++){for(var _=f[b],T=_[0].trace,L=[],A=!1,I=0;I<_.length;I++){var P=_[I],S=P.b,E=S+P.s;P[w]=E,L.push(E),P.hasB&&L.push(S),P.hasB&&P.b||(A=!0)}T._extremes[i._id]=e.findExtremes(i,L,{tozero:A,padded:!0})}}function a(i){for(var y=i.traces,f=0;f<y.length;f++)for(var w=y[f],b=0;b<w.length;b++){var _=w[b];_.s!==k&&i.put(_.p,_.b+_.s)}}function p(i,y,f){var w=y.traces,b=c(i),_=f.norm==="fraction"?1:100,T=_/1e9,L=i.l2c(i.c2l(0)),A=f.mode==="stack"?_:L;function I(re){return m(i.c2l(re))&&(re<L-T||re>A+T||!m(L))}for(var P=0;P<w.length;P++){for(var S=w[P],E=S[0].trace,z=[],D=!1,U=!1,H=0;H<S.length;H++){var Y=S[H];if(Y.s!==k){var J=Math.abs(_/y.get(Y.p,Y.s));Y.b*=J,Y.s*=J;var W=Y.b,Z=W+Y.s;Y[b]=Z,z.push(Z),U=U||I(Z),Y.hasB&&(z.push(W),U=U||I(W)),Y.hasB&&Y.b||(D=!0)}}E._extremes[i._id]=e.findExtremes(i,z,{tozero:D,padded:U})}}function c(i){return i._id.charAt(0)}Q.exports={crossTraceCalc:function(i,y){for(var f=y.xaxis,w=y.yaxis,b=i._fullLayout,_=i._fullData,T=i.calcdata,L=[],A=[],I=0;I<_.length;I++){var P=_[I];if(P.visible===!0&&x.traceIs(P,"bar")&&P.xaxis===f._id&&P.yaxis===w._id&&(P.orientation==="h"?L.push(T[I]):A.push(T[I]),P._computePh))for(var S=i.calcdata[I],E=0;E<S.length;E++)typeof S[E].ph0=="function"&&(S[E].ph0=S[E].ph0()),typeof S[E].ph1=="function"&&(S[E].ph1=S[E].ph1())}var z={xCat:f.type==="category"||f.type==="multicategory",yCat:w.type==="category"||w.type==="multicategory",mode:b.barmode,norm:b.barnorm,gap:b.bargap,groupgap:b.bargroupgap};l(i,f,w,A,z),l(i,w,f,L,z)},setGroupPositions:l}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../../plots/cartesian/constraints":574,"../../registry":647,"./sieve.js":670,"fast-isnumeric":190}],661:[function(g,Q,X){var m=g("../../lib"),v=g("../../components/color"),k=g("../../registry"),x=g("../scatter/xy_defaults"),e=g("../scatter/period_defaults"),t=g("./style_defaults"),r=g("../../plots/cartesian/constraints").getAxisGroup,l=g("./attributes"),n=m.coerceFont;function d(o,h,s,a){var p=h.orientation,c=h[{v:"x",h:"y"}[p]+"axis"],i=r(s,c)+p,y=s._alignmentOpts||{},f=a("alignmentgroup"),w=y[i];w||(w=y[i]={});var b=w[f];b?b.traces.push(h):b=w[f]={traces:[h],alignmentIndex:Object.keys(w).length,offsetGroups:{}};var _=a("offsetgroup"),T=b.offsetGroups,L=T[_];_&&(L||(L=T[_]={offsetIndex:Object.keys(T).length}),h._offsetIndex=L.offsetIndex)}function u(o,h,s,a,p,c){var i=(c=c||{}).moduleHasSelected!==!1,y=c.moduleHasUnselected!==!1,f=c.moduleHasConstrain!==!1,w=c.moduleHasCliponaxis!==!1,b=c.moduleHasTextangle!==!1,_=c.moduleHasInsideanchor!==!1,T=!!c.hasPathbar,L=Array.isArray(p)||p==="auto",A=L||p==="inside",I=L||p==="outside";if(A||I){var P=n(a,"textfont",s.font),S=m.extendFlat({},P),E=!(o.textfont&&o.textfont.color);if(E&&delete S.color,n(a,"insidetextfont",S),T){var z=m.extendFlat({},P);E&&delete z.color,n(a,"pathbar.textfont",z)}I&&n(a,"outsidetextfont",P),i&&a("selected.textfont.color"),y&&a("unselected.textfont.color"),f&&a("constraintext"),w&&a("cliponaxis"),b&&a("textangle"),a("texttemplate")}A&&_&&a("insidetextanchor")}Q.exports={supplyDefaults:function(o,h,s,a){function p(f,w){return m.coerce(o,h,l,f,w)}if(x(o,h,a,p)){e(o,h,a,p),p("xhoverformat"),p("yhoverformat"),p("orientation",h.x&&!h.y?"h":"v"),p("base"),p("offset"),p("width"),p("text"),p("hovertext"),p("hovertemplate");var c=p("textposition");u(o,h,a,p,c,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),t(o,h,p,s,a);var i=(h.marker.line||{}).color,y=k.getComponentMethod("errorbars","supplyDefaults");y(o,h,i||v.defaultLine,{axis:"y"}),y(o,h,i||v.defaultLine,{axis:"x",inherit:"y"}),m.coerceSelectionMarkerOpacity(h,p)}else h.visible=!1},crossTraceDefaults:function(o,h){var s;function a(c){return m.coerce(s._input,s,l,c)}if(h.barmode==="group")for(var p=0;p<o.length;p++)(s=o[p]).type==="bar"&&(s._input,d(0,s,h,a))},handleGroupingDefaults:d,handleText:u}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/constraints":574,"../../registry":647,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":657,"./style_defaults":672}],662:[function(g,Q,X){Q.exports=function(m,v,k){return m.x="xVal"in v?v.xVal:v.x,m.y="yVal"in v?v.yVal:v.y,v.xa&&(m.xaxis=v.xa),v.ya&&(m.yaxis=v.ya),k.orientation==="h"?(m.label=m.y,m.value=m.x):(m.label=m.x,m.value=m.y),m}},{}],663:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("tinycolor2"),k=g("../../lib").isArrayOrTypedArray;X.coerceString=function(x,e,t){if(typeof e=="string"){if(e||!x.noBlank)return e}else if((typeof e=="number"||e===!0)&&!x.strict)return String(e);return t!==void 0?t:x.dflt},X.coerceNumber=function(x,e,t){if(m(e)){e=+e;var r=x.min,l=x.max;if(!(r!==void 0&&e<r||l!==void 0&&e>l))return e}return t!==void 0?t:x.dflt},X.coerceColor=function(x,e,t){return v(e).isValid()?e:t!==void 0?t:x.dflt},X.coerceEnumerated=function(x,e,t){return x.coerceNumber&&(e=+e),x.values.indexOf(e)!==-1?e:t!==void 0?t:x.dflt},X.getValue=function(x,e){var t;return Array.isArray(x)?e<x.length&&(t=x[e]):t=x,t},X.getLineWidth=function(x,e){return 0<e.mlw?e.mlw:k(x.marker.line.width)?0:x.marker.line.width}},{"../../lib":515,"fast-isnumeric":190,tinycolor2:313}],664:[function(g,Q,X){var m=g("../../components/fx"),v=g("../../registry"),k=g("../../components/color"),x=g("../../lib").fillText,e=g("./helpers").getLineWidth,t=g("../../plots/cartesian/axes").hoverLabelText,r=g("../../constants/numerical").BADNUM;function l(d,u,o,h,s){var a,p,c,i,y,f,w,b=d.cd,_=b[0].trace,T=b[0].t,L=h==="closest",A=_.type==="waterfall",I=d.maxHoverDistance,P=d.maxSpikeDistance;_.orientation==="h"?(a=o,p=u,c="y",i="x",y=V,f=Z):(a=u,p=o,c="x",i="y",f=V,y=Z);var S=_[c+"period"],E=L||S;function z(ie){return U(ie,-1)}function D(ie){return U(ie,1)}function U(ie,le){var se=ie.w;return ie[c]+le*se/2}function H(ie){return ie[c+"End"]-ie[c+"Start"]}var Y=L?z:S?function(ie){return ie.p-H(ie)/2}:function(ie){return Math.min(z(ie),ie.p-T.bardelta/2)},J=L?D:S?function(ie){return ie.p+H(ie)/2}:function(ie){return Math.max(D(ie),ie.p+T.bardelta/2)};function W(ie,le,se){return s.finiteRange&&(se=0),m.inbox(ie-a,le-a,se+Math.min(1,Math.abs(le-ie)/w)-1)}function Z(ie){return W(Y(ie),J(ie),I)}function re(ie){var le=ie[i];if(A){var se=Math.abs(ie.rawS)||0;p>0?le+=se:p<0&&(le-=se)}return le}function V(ie){var le=p,se=ie.b,ve=re(ie);return m.inbox(se-le,ve-le,I+(ve-le)/(ve-se)-1)}var B=d[c+"a"],j=d[i+"a"];w=Math.abs(B.r2c(B.range[1])-B.r2c(B.range[0]));var ee=m.getDistanceFunction(h,y,f,function(ie){return(y(ie)+f(ie))/2});if(m.getClosest(b,ee,d),d.index!==!1&&b[d.index].p!==r){E||(Y=function(ie){return Math.min(z(ie),ie.p-T.bargroupwidth/2)},J=function(ie){return Math.max(D(ie),ie.p+T.bargroupwidth/2)});var N=b[d.index],$=_.base?N.b+N.s:N.s;d[i+"0"]=d[i+"1"]=j.c2p(N[i],!0),d[i+"LabelVal"]=$;var K=T.extents[T.extents.round(N.p)];d[c+"0"]=B.c2p(L?Y(N):K[0],!0),d[c+"1"]=B.c2p(L?J(N):K[1],!0);var te=N.orig_p!==void 0;return d[c+"LabelVal"]=te?N.orig_p:N.p,d.labelLabel=t(B,d[c+"LabelVal"],_[c+"hoverformat"]),d.valueLabel=t(j,d[i+"LabelVal"],_[i+"hoverformat"]),d.baseLabel=t(j,N.b,_[i+"hoverformat"]),d.spikeDistance=(function(ie){var le=p,se=ie.b,ve=re(ie);return m.inbox(se-le,ve-le,P+(ve-le)/(ve-se)-1)}(N)+function(ie){return W(z(ie),D(ie),P)}(N))/2,d[c+"Spike"]=B.c2p(N.p,!0),x(N,_,d),d.hovertemplate=_.hovertemplate,d}}function n(d,u){var o=u.mcc||d.marker.color,h=u.mlcc||d.marker.line.color,s=e(d,u);return k.opacity(o)?o:k.opacity(h)&&s?h:void 0}Q.exports={hoverPoints:function(d,u,o,h,s){var a=l(d,u,o,h,s);if(a){var p=a.cd,c=p[0].trace,i=p[a.index];return a.color=n(c,i),v.getComponentMethod("errorbars","hoverInfo")(i,c,a),[a]}},hoverOnBars:l,getTraceColor:n}},{"../../components/color":367,"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./helpers":663}],665:[function(g,Q,X){Q.exports={attributes:g("./attributes"),layoutAttributes:g("./layout_attributes"),supplyDefaults:g("./defaults").supplyDefaults,crossTraceDefaults:g("./defaults").crossTraceDefaults,supplyLayoutDefaults:g("./layout_defaults"),calc:g("./calc"),crossTraceCalc:g("./cross_trace_calc").crossTraceCalc,colorbar:g("../scatter/marker_colorbar"),arraysToCalcdata:g("./arrays_to_calcdata"),plot:g("./plot").plot,style:g("./style").style,styleOnSelect:g("./style").styleOnSelect,hoverPoints:g("./hover").hoverPoints,eventData:g("./event_data"),selectPoints:g("./select"),moduleType:"trace",name:"bar",basePlotModule:g("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":578,"../scatter/marker_colorbar":954,"./arrays_to_calcdata":656,"./attributes":657,"./calc":658,"./cross_trace_calc":660,"./defaults":661,"./event_data":662,"./hover":664,"./layout_attributes":666,"./layout_defaults":667,"./plot":668,"./select":669,"./style":671}],666:[function(g,Q,X){Q.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],667:[function(g,Q,X){var m=g("../../registry"),v=g("../../plots/cartesian/axes"),k=g("../../lib"),x=g("./layout_attributes");Q.exports=function(e,t,r){function l(c,i){return k.coerce(e,t,x,c,i)}for(var n=!1,d=!1,u=!1,o={},h=l("barmode"),s=0;s<r.length;s++){var a=r[s];if(m.traceIs(a,"bar")&&a.visible){if(n=!0,h==="group"){var p=a.xaxis+a.yaxis;o[p]&&(u=!0),o[p]=!0}a.visible&&a.type==="histogram"&&v.getFromId({_fullLayout:t},a[a.orientation==="v"?"xaxis":"yaxis"]).type!=="category"&&(d=!0)}}n?(h!=="overlay"&&l("barnorm"),l("bargap",d&&!u?0:.2),l("bargroupgap")):delete t.barmode}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./layout_attributes":666}],668:[function(g,Q,X){var m=g("@plotly/d3"),v=g("fast-isnumeric"),k=g("../../lib"),x=g("../../lib/svg_text_utils"),e=g("../../components/color"),t=g("../../components/drawing"),r=g("../../registry"),l=g("../../plots/cartesian/axes").tickText,n=g("./uniform_text"),d=n.recordMinTextSize,u=n.clearMinTextSize,o=g("./style"),h=g("./helpers"),s=g("./constants"),a=g("./attributes"),p=a.text,c=a.textposition,i=g("../../components/fx/helpers").appendArrayPointValue,y=s.TEXTPAD;function f(P){return P.id}function w(P){if(P.ids)return f}function b(P,S){return P<S?1:-1}function _(P,S,E,z){var D;return!S.uniformtext.mode&&T(E)?(z&&(D=z()),P.transition().duration(E.duration).ease(E.easing).each("end",function(){D&&D()}).each("interrupt",function(){D&&D()})):P}function T(P){return P&&P.duration>0}function L(P){return P==="auto"?0:P}function A(P,S){var E=Math.PI/180*S,z=Math.abs(Math.sin(E)),D=Math.abs(Math.cos(E));return{x:P.width*D+P.height*z,y:P.width*z+P.height*D}}function I(P,S,E,z,D,U){var H=!!U.isHorizontal,Y=!!U.constrained,J=U.angle||0,W=U.anchor||"end",Z=W==="end",re=W==="start",V=((U.leftToRight||0)+1)/2,B=1-V,j=D.width,ee=D.height,N=Math.abs(S-P),$=Math.abs(z-E),K=N>2*y&&$>2*y?y:0;N-=2*K,$-=2*K;var te=L(J);J!=="auto"||j<=N&&ee<=$||!(j>N||ee>$)||(j>$||ee>N)&&j<ee==N<$||(te+=90);var ie=A(D,te),le=1;Y&&(le=Math.min(1,N/ie.x,$/ie.y));var se=D.left*B+D.right*V,ve=(D.top+D.bottom)/2,fe=(P+y)*B+(S-y)*V,ye=(E+z)/2,Ae=0,pe=0;if(re||Z){var ge=(H?ie.x:ie.y)/2,we=H?b(P,S):b(E,z);H?re?(fe=P+we*K,Ae=-we*ge):(fe=S-we*K,Ae=we*ge):re?(ye=E+we*K,pe=-we*ge):(ye=z-we*K,pe=we*ge)}return{textX:se,textY:ve,targetX:fe,targetY:ye,anchorX:Ae,anchorY:pe,scale:le,rotate:te}}Q.exports={plot:function(P,S,E,z,D,U){var H=S.xaxis,Y=S.yaxis,J=P._fullLayout;D||(D={mode:J.barmode,norm:J.barmode,gap:J.bargap,groupgap:J.bargroupgap},u("bar",J));var W=k.makeTraceGroups(z,E,"trace bars").each(function(Z){var re=m.select(this),V=Z[0].trace,B=V.type==="waterfall",j=V.type==="funnel",ee=V.type==="bar"||j,N=0;B&&V.connector.visible&&V.connector.mode==="between"&&(N=V.connector.line.width/2);var $=V.orientation==="h",K=T(D),te=k.ensureSingle(re,"g","points"),ie=w(V),le=te.selectAll("g.point").data(k.identity,ie);le.enter().append("g").classed("point",!0),le.exit().remove(),le.each(function(ve,fe){var ye,Ae,pe=m.select(this),ge=function(Fe,Pe,ze,Ge){var $e=[],ot=[],vt=Ge?Pe:ze,bt=Ge?ze:Pe;return $e[0]=vt.c2p(Fe.s0,!0),ot[0]=bt.c2p(Fe.p0,!0),$e[1]=vt.c2p(Fe.s1,!0),ot[1]=bt.c2p(Fe.p1,!0),Ge?[$e,ot]:[ot,$e]}(ve,H,Y,$),we=ge[0][0],oe=ge[0][1],de=ge[1][0],Te=ge[1][1],Ee=($?oe-we:Te-de)==0;if(Ee&&ee&&h.getLineWidth(V,ve)&&(Ee=!1),Ee||(Ee=!(v(we)&&v(oe)&&v(de)&&v(Te))),ve.isBlank=Ee,Ee&&($?oe=we:Te=de),N&&!Ee&&($?(we-=b(we,oe)*N,oe+=b(we,oe)*N):(de-=b(de,Te)*N,Te+=b(de,Te)*N)),V.type==="waterfall"){if(!Ee){var Me=V[ve.dir].marker;ye=Me.line.width,Ae=Me.color}}else ye=h.getLineWidth(V,ve),Ae=ve.mc||V.marker.color;function De(Fe){var Pe=m.round(ye/2%1,2);return D.gap===0&&D.groupgap===0?m.round(Math.round(Fe)-Pe,2):Fe}if(!P._context.staticPlot){var Ie=e.opacity(Ae)<1||ye>.01?De:function(Fe,Pe,ze){return ze&&Fe===Pe?Fe:Math.abs(Fe-Pe)>=2?De(Fe):Fe>Pe?Math.ceil(Fe):Math.floor(Fe)};we=Ie(we,oe,$),oe=Ie(oe,we,$),de=Ie(de,Te,!$),Te=Ie(Te,de,!$)}var Oe=_(k.ensureSingle(pe,"path"),J,D,U);if(Oe.style("vector-effect","non-scaling-stroke").attr("d",isNaN((oe-we)*(Te-de))||Ee&&P._context.staticPlot?"M0,0Z":"M"+we+","+de+"V"+Te+"H"+oe+"V"+de+"Z").call(t.setClipUrl,S.layerClipId,P),!J.uniformtext.mode&&K){var Ze=t.makePointStyleFns(V);t.singlePointStyle(ve,Oe,V,Ze,P)}(function(Fe,Pe,ze,Ge,$e,ot,vt,bt,yt,tt,Ke){var mt,Ft=Pe.xaxis,Vt=Pe.yaxis,Xt=Fe._fullLayout;function Gt(Ut,fr,Tr){return k.ensureSingle(Ut,"text").text(fr).attr({class:"bartext bartext-"+mt,"text-anchor":"middle","data-notex":1}).call(t.font,Tr).call(x.convertToTspans,Fe)}var nr=Ge[0].trace,It=nr.orientation==="h",Be=function(Ut,fr,Tr,ur,Kt){var Qt,er=fr[0].trace;return Qt=er.texttemplate?function(cr,gr,Mr,Ir,Fr){var Yr=gr[0].trace,fn=k.castOption(Yr,Mr,"texttemplate");if(!fn)return"";var en,Rn,nn,yn,bn=Yr.type==="histogram",ta=Yr.type==="waterfall",Br=Yr.type==="funnel",rn=Yr.orientation==="h";rn?(en="y",Rn=Fr,nn="x",yn=Ir):(en="x",Rn=Ir,nn="y",yn=Fr);function gn(tr){return l(yn,yn.c2l(tr),!0).text}var Qr=gr[Mr],un={};un.label=Qr.p,un.labelLabel=un[en+"Label"]=(Gn=Qr.p,l(Rn,Rn.c2l(Gn),!0).text);var Gn,wn=k.castOption(Yr,Qr.i,"text");(wn===0||wn)&&(un.text=wn),un.value=Qr.s,un.valueLabel=un[nn+"Label"]=gn(Qr.s);var Ln={};i(Ln,Yr,Qr.i),(bn||Ln.x===void 0)&&(Ln.x=rn?un.value:un.label),(bn||Ln.y===void 0)&&(Ln.y=rn?un.label:un.value),(bn||Ln.xLabel===void 0)&&(Ln.xLabel=rn?un.valueLabel:un.labelLabel),(bn||Ln.yLabel===void 0)&&(Ln.yLabel=rn?un.labelLabel:un.valueLabel),ta&&(un.delta=+Qr.rawS||Qr.s,un.deltaLabel=gn(un.delta),un.final=Qr.v,un.finalLabel=gn(un.final),un.initial=un.final-un.delta,un.initialLabel=gn(un.initial)),Br&&(un.value=Qr.s,un.valueLabel=gn(un.value),un.percentInitial=Qr.begR,un.percentInitialLabel=k.formatPercent(Qr.begR),un.percentPrevious=Qr.difR,un.percentPreviousLabel=k.formatPercent(Qr.difR),un.percentTotal=Qr.sumR,un.percenTotalLabel=k.formatPercent(Qr.sumR));var oa=k.castOption(Yr,Qr.i,"customdata");return oa&&(un.customdata=oa),k.texttemplateString(fn,un,cr._d3locale,Ln,un,Yr._meta||{})}(Ut,fr,Tr,ur,Kt):er.textinfo?function(cr,gr,Mr,Ir){var Fr=cr[0].trace,Yr=Fr.orientation==="h",fn=Fr.type==="waterfall",en=Fr.type==="funnel";function Rn(oa){return l(Yr?Mr:Ir,+oa,!0).text}var nn,yn=Fr.textinfo,bn=cr[gr],ta=yn.split("+"),Br=[],rn=function(oa){return ta.indexOf(oa)!==-1};rn("label")&&Br.push((gn=cr[gr].p,l(Yr?Ir:Mr,gn,!0).text));var gn;if(rn("text")&&((nn=k.castOption(Fr,bn.i,"text"))===0||nn)&&Br.push(nn),fn){var Qr=+bn.rawS||bn.s,un=bn.v,Gn=un-Qr;rn("initial")&&Br.push(Rn(Gn)),rn("delta")&&Br.push(Rn(Qr)),rn("final")&&Br.push(Rn(un))}if(en){rn("value")&&Br.push(Rn(bn.s));var wn=0;rn("percent initial")&&wn++,rn("percent previous")&&wn++,rn("percent total")&&wn++;var Ln=wn>1;rn("percent initial")&&(nn=k.formatPercent(bn.begR),Ln&&(nn+=" of initial"),Br.push(nn)),rn("percent previous")&&(nn=k.formatPercent(bn.difR),Ln&&(nn+=" of previous"),Br.push(nn)),rn("percent total")&&(nn=k.formatPercent(bn.sumR),Ln&&(nn+=" of total"),Br.push(nn))}return Br.join("<br>")}(fr,Tr,ur,Kt):h.getValue(er.text,Tr),h.coerceString(p,Qt)}(Xt,Ge,$e,Ft,Vt);mt=function(Ut,fr){var Tr=h.getValue(Ut.textposition,fr);return h.coerceEnumerated(c,Tr)}(nr,$e);var He=tt.mode==="stack"||tt.mode==="relative",he=Ge[$e],be=!He||he._outmost;if(!Be||mt==="none"||(he.isBlank||ot===vt||bt===yt)&&(mt==="auto"||mt==="inside"))return void ze.select("text").remove();var Re=Xt.font,Ue=o.getBarColor(Ge[$e],nr),Xe=o.getInsideTextFont(nr,$e,Re,Ue),qe=o.getOutsideTextFont(nr,$e,Re),st=ze.datum();It?Ft.type==="log"&&st.s0<=0&&(ot=Ft.range[0]<Ft.range[1]?0:Ft._length):Vt.type==="log"&&st.s0<=0&&(bt=Vt.range[0]<Vt.range[1]?Vt._length:0);var it,Tt,Pt,rt,ut,Bt=Math.abs(vt-ot)-2*y,wt=Math.abs(yt-bt)-2*y;if(mt==="outside"&&(be||he.hasB||(mt="inside")),mt==="auto")if(be){mt="inside",ut=k.ensureUniformFontSize(Fe,Xe),it=Gt(ze,Be,ut),Tt=t.bBox(it.node()),Pt=Tt.width,rt=Tt.height;var Lt=Pt<=Bt&&rt<=wt,Se=Pt<=wt&&rt<=Bt,We=It?Bt>=Pt*(wt/rt):wt>=rt*(Bt/Pt);Pt>0&&rt>0&&(Lt||Se||We)?mt="inside":(mt="outside",it.remove(),it=null)}else mt="inside";if(!it){ut=k.ensureUniformFontSize(Fe,mt==="outside"?qe:Xe);var nt=(it=Gt(ze,Be,ut)).attr("transform");if(it.attr("transform",""),Tt=t.bBox(it.node()),Pt=Tt.width,rt=Tt.height,it.attr("transform",nt),Pt<=0||rt<=0)return void it.remove()}var ft,Mt,Nt=nr.textangle;mt==="outside"?(Mt=nr.constraintext==="both"||nr.constraintext==="outside",ft=function(Ut,fr,Tr,ur,Kt,Qt){var er,cr=!!Qt.isHorizontal,gr=!!Qt.constrained,Mr=Qt.angle||0,Ir=Kt.width,Fr=Kt.height,Yr=Math.abs(fr-Ut),fn=Math.abs(ur-Tr);er=cr?fn>2*y?y:0:Yr>2*y?y:0;var en=1;gr&&(en=cr?Math.min(1,fn/Fr):Math.min(1,Yr/Ir));var Rn=L(Mr),nn=A(Kt,Rn),yn=(cr?nn.x:nn.y)/2,bn=(Kt.left+Kt.right)/2,ta=(Kt.top+Kt.bottom)/2,Br=(Ut+fr)/2,rn=(Tr+ur)/2,gn=0,Qr=0,un=cr?b(fr,Ut):b(Tr,ur);return cr?(Br=fr-un*er,gn=un*yn):(rn=ur+un*er,Qr=-un*yn),{textX:bn,textY:ta,targetX:Br,targetY:rn,anchorX:gn,anchorY:Qr,scale:en,rotate:Rn}}(ot,vt,bt,yt,Tt,{isHorizontal:It,constrained:Mt,angle:Nt})):(Mt=nr.constraintext==="both"||nr.constraintext==="inside",ft=I(ot,vt,bt,yt,Tt,{isHorizontal:It,constrained:Mt,angle:Nt,anchor:nr.insidetextanchor})),ft.fontSize=ut.size,d(nr.type==="histogram"?"bar":nr.type,ft,Xt),he.transform=ft;var Zt=_(it,Xt,tt,Ke);k.setTransormAndDisplay(Zt,ft)})(P,S,pe,Z,fe,we,oe,de,Te,D,U),S.layerClipId&&t.hideOutsideRangePoint(ve,pe.select("text"),H,Y,V.xcalendar,V.ycalendar)});var se=V.cliponaxis===!1;t.setClipUrl(re,se?null:S.layerClipId,P)});r.getComponentMethod("errorbars","plot")(P,W,S,D)},toMoveInsideBar:I}},{"../../components/color":367,"../../components/drawing":389,"../../components/fx/helpers":403,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"./attributes":657,"./constants":659,"./helpers":663,"./style":671,"./uniform_text":673,"@plotly/d3":58,"fast-isnumeric":190}],669:[function(g,Q,X){function m(v,k,x,e,t){var r=k.c2p(e?v.s0:v.p0,!0),l=k.c2p(e?v.s1:v.p1,!0),n=x.c2p(e?v.p0:v.s0,!0),d=x.c2p(e?v.p1:v.s1,!0);return t?[(r+l)/2,(n+d)/2]:e?[l,(n+d)/2]:[(r+l)/2,d]}Q.exports=function(v,k){var x,e=v.cd,t=v.xaxis,r=v.yaxis,l=e[0].trace,n=l.type==="funnel",d=l.orientation==="h",u=[];if(k===!1)for(x=0;x<e.length;x++)e[x].selected=0;else for(x=0;x<e.length;x++){var o=e[x],h="ct"in o?o.ct:m(o,t,r,d,n);k.contains(h,!1,x,v)?(u.push({pointNumber:x,x:t.c2d(o.x),y:r.c2d(o.y)}),o.selected=1):o.selected=0}return u}},{}],670:[function(g,Q,X){Q.exports=k;var m=g("../../lib").distinctVals,v=g("../../constants/numerical").BADNUM;function k(x,e){this.traces=x,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var t=1/0,r=[],l=0;l<x.length;l++){for(var n=x[l],d=0;d<n.length;d++){var u=n[d];u.p!==v&&r.push(u.p)}n[0]&&n[0].width1&&(t=Math.min(n[0].width1,t))}this.positions=r;var o=m(r);this.distinctPositions=o.vals,o.vals.length===1&&t!==1/0?this.minDiff=t:this.minDiff=Math.min(o.minDiff,t);var h=(e.posAxis||{}).type;h!=="category"&&h!=="multicategory"||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}k.prototype.put=function(x,e){var t=this.getLabel(x,e),r=this.bins[t]||0;return this.bins[t]=r+e,r},k.prototype.get=function(x,e){var t=this.getLabel(x,e);return this.bins[t]||0},k.prototype.getLabel=function(x,e){return(e<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?x:Math.round(x/this.binWidth))}},{"../../constants/numerical":491,"../../lib":515}],671:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../components/color"),k=g("../../components/drawing"),x=g("../../lib"),e=g("../../registry"),t=g("./uniform_text").resizeText,r=g("./attributes"),l=r.textfont,n=r.insidetextfont,d=r.outsidetextfont,u=g("./helpers");function o(f,w,b){k.pointStyle(f.selectAll("path"),w,b),h(f,w,b)}function h(f,w,b){f.selectAll("text").each(function(_){var T=m.select(this),L=x.ensureUniformFontSize(b,s(T,_,w,b));k.font(T,L)})}function s(f,w,b,_){var T=_._fullLayout.font,L=b.textfont;if(f.classed("bartext-inside")){var A=y(w,b);L=p(b,w.i,T,A)}else f.classed("bartext-outside")&&(L=c(b,w.i,T));return L}function a(f,w,b){return i(l,f.textfont,w,b)}function p(f,w,b,_){var T=a(f,w,b);return(f._input.textfont===void 0||f._input.textfont.color===void 0||Array.isArray(f.textfont.color)&&f.textfont.color[w]===void 0)&&(T={color:v.contrast(_),family:T.family,size:T.size}),i(n,f.insidetextfont,w,T)}function c(f,w,b){var _=a(f,w,b);return i(d,f.outsidetextfont,w,_)}function i(f,w,b,_){w=w||{};var T=u.getValue(w.family,b),L=u.getValue(w.size,b),A=u.getValue(w.color,b);return{family:u.coerceString(f.family,T,_.family),size:u.coerceNumber(f.size,L,_.size),color:u.coerceColor(f.color,A,_.color)}}function y(f,w){return w.type==="waterfall"?w[f.dir].marker.color:f.mcc||f.mc||w.marker.color}Q.exports={style:function(f){var w=m.select(f).selectAll("g.barlayer").selectAll("g.trace");t(f,w,"bar");var b=w.size(),_=f._fullLayout;w.style("opacity",function(T){return T[0].trace.opacity}).each(function(T){(_.barmode==="stack"&&b>1||_.bargap===0&&_.bargroupgap===0&&!T[0].trace.marker.line.width)&&m.select(this).attr("shape-rendering","crispEdges")}),w.selectAll("g.points").each(function(T){o(m.select(this),T[0].trace,f)}),e.getComponentMethod("errorbars","style")(w)},styleTextPoints:h,styleOnSelect:function(f,w,b){var _=w[0].trace;_.selectedpoints?function(T,L,A){k.selectedPointStyle(T.selectAll("path"),L),function(I,P,S){I.each(function(E){var z,D=m.select(this);if(E.selected){z=x.ensureUniformFontSize(S,s(D,E,P,S));var U=P.selected.textfont&&P.selected.textfont.color;U&&(z.color=U),k.font(D,z)}else k.selectedTextStyle(D,P)})}(T.selectAll("text"),L,A)}(b,_,f):(o(b,_,f),e.getComponentMethod("errorbars","style")(b))},getInsideTextFont:p,getOutsideTextFont:c,getBarColor:y,resizeText:t}},{"../../components/color":367,"../../components/drawing":389,"../../lib":515,"../../registry":647,"./attributes":657,"./helpers":663,"./uniform_text":673,"@plotly/d3":58}],672:[function(g,Q,X){var m=g("../../components/color"),v=g("../../components/colorscale/helpers").hasColorscale,k=g("../../components/colorscale/defaults"),x=g("../../lib").coercePattern;Q.exports=function(e,t,r,l,n){var d=r("marker.color",l),u=v(e,"marker");u&&k(e,t,n,r,{prefix:"marker.",cLetter:"c"}),r("marker.line.color",m.defaultLine),v(e,"marker.line")&&k(e,t,n,r,{prefix:"marker.line.",cLetter:"c"}),r("marker.line.width"),r("marker.opacity"),x(r,"marker.pattern",d,u),r("selected.marker.color"),r("unselected.marker.color")}},{"../../components/color":367,"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515}],673:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../lib");function k(x){return"_"+x+"Text_minsize"}Q.exports={recordMinTextSize:function(x,e,t){if(t.uniformtext.mode){var r=k(x),l=t.uniformtext.minsize,n=e.scale*e.fontSize;e.hide=n<l,t[r]=t[r]||1/0,e.hide||(t[r]=Math.min(t[r],Math.max(n,l)))}},clearMinTextSize:function(x,e){e[k(x)]=void 0},resizeText:function(x,e,t){var r=x._fullLayout,l=r["_"+t+"Text_minsize"];if(l){var n,d=r.uniformtext.mode==="hide";switch(t){case"funnelarea":case"pie":case"sunburst":n="g.slice";break;case"treemap":case"icicle":n="g.slice, g.pathbar";break;default:n="g.points > g.point"}e.selectAll(n).each(function(u){var o=u.transform;if(o){o.scale=d&&o.hide?0:l/o.fontSize;var h=m.select(this).select("text");v.setTransormAndDisplay(h,o)}})}}}},{"../../lib":515,"@plotly/d3":58}],674:[function(g,Q,X){var m=g("../../plots/template_attributes").hovertemplateAttrs,v=g("../../lib/extend").extendFlat,k=g("../scatterpolar/attributes"),x=g("../bar/attributes");Q.exports={r:k.r,theta:k.theta,r0:k.r0,dr:k.dr,theta0:k.theta0,dtheta:k.dtheta,thetaunit:k.thetaunit,base:v({},x.base,{}),offset:v({},x.offset,{}),width:v({},x.width,{}),text:v({},x.text,{}),hovertext:v({},x.hovertext,{}),marker:x.marker,hoverinfo:k.hoverinfo,hovertemplate:m(),selected:x.selected,unselected:x.unselected}},{"../../lib/extend":505,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatterpolar/attributes":1011}],675:[function(g,Q,X){var m=g("../../components/colorscale/helpers").hasColorscale,v=g("../../components/colorscale/calc"),k=g("../bar/arrays_to_calcdata"),x=g("../bar/cross_trace_calc").setGroupPositions,e=g("../scatter/calc_selection"),t=g("../../registry").traceIs,r=g("../../lib").extendFlat;Q.exports={calc:function(l,n){for(var d=l._fullLayout,u=n.subplot,o=d[u].radialaxis,h=d[u].angularaxis,s=o.makeCalcdata(n,"r"),a=h.makeCalcdata(n,"theta"),p=n._length,c=new Array(p),i=s,y=a,f=0;f<p;f++)c[f]={p:y[f],s:i[f]};function w(b){var _=n[b];_!==void 0&&(n["_"+b]=Array.isArray(_)?h.makeCalcdata(n,b):h.d2c(_,n.thetaunit))}return h.type==="linear"&&(w("width"),w("offset")),m(n,"marker")&&v(l,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"}),m(n,"marker.line")&&v(l,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"}),k(c,n),e(c,n),c},crossTraceCalc:function(l,n,d){for(var u=l.calcdata,o=[],h=0;h<u.length;h++){var s=u[h],a=s[0].trace;a.visible===!0&&t(a,"bar")&&a.subplot===d&&o.push(s)}var p=r({},n.radialaxis,{_id:"x"}),c=n.angularaxis;x(l,c,p,o,{mode:n.barmode,norm:n.barnorm,gap:n.bargap,groupgap:n.bargroupgap})}}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../lib":515,"../../registry":647,"../bar/arrays_to_calcdata":656,"../bar/cross_trace_calc":660,"../scatter/calc_selection":938}],676:[function(g,Q,X){var m=g("../../lib"),v=g("../scatterpolar/defaults").handleRThetaDefaults,k=g("../bar/style_defaults"),x=g("./attributes");Q.exports=function(e,t,r,l){function n(d,u){return m.coerce(e,t,x,d,u)}v(e,t,l,n)?(n("thetaunit"),n("base"),n("offset"),n("width"),n("text"),n("hovertext"),n("hovertemplate"),k(e,t,n,r,l),m.coerceSelectionMarkerOpacity(t,n)):t.visible=!1}},{"../../lib":515,"../bar/style_defaults":672,"../scatterpolar/defaults":1013,"./attributes":674}],677:[function(g,Q,X){var m=g("../../components/fx"),v=g("../../lib"),k=g("../bar/hover").getTraceColor,x=v.fillText,e=g("../scatterpolar/hover").makeHoverPointText,t=g("../../plots/polar/helpers").isPtInsidePolygon;Q.exports=function(r,l,n){var d=r.cd,u=d[0].trace,o=r.subplot,h=o.radialAxis,s=o.angularAxis,a=o.vangles,p=a?t:v.isPtInsideSector,c=r.maxHoverDistance,i=s._period||2*Math.PI,y=Math.abs(h.g2p(Math.sqrt(l*l+n*n))),f=Math.atan2(n,l);if(h.range[0]>h.range[1]&&(f+=Math.PI),m.getClosest(d,function(_){return p(y,f,[_.rp0,_.rp1],[_.thetag0,_.thetag1],a)?c+Math.min(1,Math.abs(_.thetag1-_.thetag0)/i)-1+(_.rp1-y)/(_.rp1-_.rp0)-1:1/0},r),r.index!==!1){var w=d[r.index];r.x0=r.x1=w.ct[0],r.y0=r.y1=w.ct[1];var b=v.extendFlat({},w,{r:w.s,theta:w.p});return x(w,u,r),e(b,u,o,r),r.hovertemplate=u.hovertemplate,r.color=k(u,w),r.xLabelVal=r.yLabelVal=void 0,w.s<0&&(r.idealAlign="left"),[r]}}},{"../../components/fx":407,"../../lib":515,"../../plots/polar/helpers":630,"../bar/hover":664,"../scatterpolar/hover":1015}],678:[function(g,Q,X){Q.exports={moduleType:"trace",name:"barpolar",basePlotModule:g("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:g("./attributes"),layoutAttributes:g("./layout_attributes"),supplyDefaults:g("./defaults"),supplyLayoutDefaults:g("./layout_defaults"),calc:g("./calc").calc,crossTraceCalc:g("./calc").crossTraceCalc,plot:g("./plot"),colorbar:g("../scatter/marker_colorbar"),formatLabels:g("../scatterpolar/format_labels"),style:g("../bar/style").style,styleOnSelect:g("../bar/style").styleOnSelect,hoverPoints:g("./hover"),selectPoints:g("../bar/select"),meta:{}}},{"../../plots/polar":631,"../bar/select":669,"../bar/style":671,"../scatter/marker_colorbar":954,"../scatterpolar/format_labels":1014,"./attributes":674,"./calc":675,"./defaults":676,"./hover":677,"./layout_attributes":679,"./layout_defaults":680,"./plot":681}],679:[function(g,Q,X){Q.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],680:[function(g,Q,X){var m=g("../../lib"),v=g("./layout_attributes");Q.exports=function(k,x,e){var t,r={};function l(u,o){return m.coerce(k[t]||{},x[t],v,u,o)}for(var n=0;n<e.length;n++){var d=e[n];d.type==="barpolar"&&d.visible===!0&&(r[t=d.subplot]||(l("barmode"),l("bargap"),r[t]=1))}}},{"../../lib":515,"./layout_attributes":679}],681:[function(g,Q,X){var m=g("@plotly/d3"),v=g("fast-isnumeric"),k=g("../../lib"),x=g("../../components/drawing"),e=g("../../plots/polar/helpers");Q.exports=function(t,r,l){var n=r.xaxis,d=r.yaxis,u=r.radialAxis,o=r.angularAxis,h=function(a){var p=a.cxx,c=a.cyy;return a.vangles?function(i,y,f,w){var b,_;k.angleDelta(f,w)>0?(b=f,_=w):(b=w,_=f);var T=[e.findEnclosingVertexAngles(b,a.vangles)[0],(b+_)/2,e.findEnclosingVertexAngles(_,a.vangles)[1]];return e.pathPolygonAnnulus(i,y,b,_,T,p,c)}:function(i,y,f,w){return k.pathAnnulus(i,y,f,w,p,c)}}(r),s=r.layers.frontplot.select("g.barlayer");k.makeTraceGroups(s,l,"trace bars").each(function(){var a=m.select(this),p=k.ensureSingle(a,"g","points").selectAll("g.point").data(k.identity);p.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),p.exit().remove(),p.each(function(c){var i,y=m.select(this),f=c.rp0=u.c2p(c.s0),w=c.rp1=u.c2p(c.s1),b=c.thetag0=o.c2g(c.p0),_=c.thetag1=o.c2g(c.p1);if(v(f)&&v(w)&&v(b)&&v(_)&&f!==w&&b!==_){var T=u.c2g(c.s1),L=(b+_)/2;c.ct=[n.c2p(T*Math.cos(L)),d.c2p(T*Math.sin(L))],i=h(f,w,b,_)}else i="M0,0Z";k.ensureSingle(y,"path").attr("d",i)}),x.setClipUrl(a,r._hasClipOnAxisFalse?r.clipIds.forTraces:null,t)})}},{"../../components/drawing":389,"../../lib":515,"../../plots/polar/helpers":630,"@plotly/d3":58,"fast-isnumeric":190}],682:[function(g,Q,X){var m=g("../scatter/attributes"),v=g("../bar/attributes"),k=g("../../components/color/attributes"),x=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=g("../../plots/template_attributes").hovertemplateAttrs,t=g("../../lib/extend").extendFlat,r=m.marker,l=r.line;Q.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:t({},r.symbol,{arrayOk:!1,editType:"plot"}),opacity:t({},r.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:t({},r.angle,{arrayOk:!1,editType:"calc"}),size:t({},r.size,{arrayOk:!1,editType:"calc"}),color:t({},r.color,{arrayOk:!1,editType:"style"}),line:{color:t({},l.color,{arrayOk:!1,dflt:k.defaultLine,editType:"style"}),width:t({},l.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:m.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:v.offsetgroup,alignmentgroup:v.alignmentgroup,selected:{marker:m.selected.marker,editType:"style"},unselected:{marker:m.unselected.marker,editType:"style"},text:t({},m.text,{}),hovertext:t({},m.hovertext,{}),hovertemplate:e({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936}],683:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../../plots/cartesian/axes"),k=g("../../plots/cartesian/align_period"),x=g("../../lib"),e=g("../../constants/numerical").BADNUM,t=x._;Q.exports=function(p,c){var i,y,f,w,b,_,T,L=p._fullLayout,A=v.getFromId(p,c.xaxis||"x"),I=v.getFromId(p,c.yaxis||"y"),P=[],S=c.type==="violin"?"_numViolins":"_numBoxes";c.orientation==="h"?(f=A,w="x",b=I,_="y",T=!!c.yperiodalignment):(f=I,w="y",b=A,_="x",T=!!c.xperiodalignment);var E,z,D,U,H,Y,J=function(ze,Ge,$e,ot){var vt,bt=Ge+"0"in ze,yt="d"+Ge in ze;if(Ge in ze||bt&&yt){var tt=$e.makeCalcdata(ze,Ge);return[k(ze,$e,Ge,tt).vals,tt]}vt=bt?ze[Ge+"0"]:"name"in ze&&($e.type==="category"||m(ze.name)&&["linear","log"].indexOf($e.type)!==-1||x.isDateTime(ze.name)&&$e.type==="date")?ze.name:ot;for(var Ke=$e.type==="multicategory"?$e.r2c_just_indices(vt):$e.d2c(vt,0,ze[Ge+"calendar"]),mt=ze._length,Ft=new Array(mt),Vt=0;Vt<mt;Vt++)Ft[Vt]=Ke;return[Ft]}(c,_,b,L[S]),W=J[0],Z=J[1],re=x.distinctVals(W,b),V=re.vals,B=re.minDiff/2,j=(c.boxpoints||c.points)==="all"?x.identity:function(ze){return ze.v<E.lf||ze.v>E.uf};if(c._hasPreCompStats){var ee=c[w],N=function(ze){return f.d2c((c[ze]||[])[i])},$=1/0,K=-1/0;for(i=0;i<c._length;i++){var te=W[i];if(m(te)){if((E={}).pos=E[_]=te,T&&Z&&(E.orig_p=Z[i]),E.q1=N("q1"),E.med=N("median"),E.q3=N("q3"),z=[],ee&&x.isArrayOrTypedArray(ee[i]))for(y=0;y<ee[i].length;y++)(Y=f.d2c(ee[i][y]))!==e&&(l(H={v:Y,i:[i,y]},c,[i,y]),z.push(H));if(E.pts=z.sort(n),U=(D=E[w]=z.map(d)).length,E.med!==e&&E.q1!==e&&E.q3!==e&&E.med>=E.q1&&E.q3>=E.med){var ie=N("lowerfence");E.lf=ie!==e&&ie<=E.q1?ie:u(E,D,U);var le=N("upperfence");E.uf=le!==e&&le>=E.q3?le:o(E,D,U);var se=N("mean");E.mean=se!==e?se:U?x.mean(D,U):(E.q1+E.q3)/2;var ve=N("sd");E.sd=se!==e&&ve>=0?ve:U?x.stdev(D,U,E.mean):E.q3-E.q1,E.lo=h(E),E.uo=s(E);var fe=N("notchspan");fe=fe!==e&&fe>0?fe:a(E,U),E.ln=E.med-fe,E.un=E.med+fe;var ye=E.lf,Ae=E.uf;c.boxpoints&&D.length&&(ye=Math.min(ye,D[0]),Ae=Math.max(Ae,D[U-1])),c.notched&&(ye=Math.min(ye,E.ln),Ae=Math.max(Ae,E.un)),E.min=ye,E.max=Ae}else{var pe;x.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+E.q1,"median = "+E.med,"q3 = "+E.q3].join(`
`)),pe=E.med!==e?E.med:E.q1!==e?E.q3!==e?(E.q1+E.q3)/2:E.q1:E.q3!==e?E.q3:0,E.med=pe,E.q1=E.q3=pe,E.lf=E.uf=pe,E.mean=E.sd=pe,E.ln=E.un=pe,E.min=E.max=pe}$=Math.min($,E.min),K=Math.max(K,E.max),E.pts2=z.filter(j),P.push(E)}}c._extremes[f._id]=v.findExtremes(f,[$,K],{padded:!0})}else{var ge=f.makeCalcdata(c,w),we=function(ze,Ge){for(var $e=ze.length,ot=new Array($e+1),vt=0;vt<$e;vt++)ot[vt]=ze[vt]-Ge;return ot[$e]=ze[$e-1]+Ge,ot}(V,B),oe=V.length,de=function(ze){for(var Ge=new Array(ze),$e=0;$e<ze;$e++)Ge[$e]=[];return Ge}(oe);for(i=0;i<c._length;i++)if(Y=ge[i],m(Y)){var Te=x.findBin(W[i],we);Te>=0&&Te<oe&&(l(H={v:Y,i},c,i),de[Te].push(H))}var Ee=1/0,Me=-1/0,De=c.quartilemethod,Ie=De==="exclusive",Oe=De==="inclusive";for(i=0;i<oe;i++)if(de[i].length>0){var Ze,Fe;(E={}).pos=E[_]=V[i],z=E.pts=de[i].sort(n),U=(D=E[w]=z.map(d)).length,E.min=D[0],E.max=D[U-1],E.mean=x.mean(D,U),E.sd=x.stdev(D,U,E.mean),E.med=x.interp(D,.5),U%2&&(Ie||Oe)?(Ie?(Ze=D.slice(0,U/2),Fe=D.slice(U/2+1)):Oe&&(Ze=D.slice(0,U/2+1),Fe=D.slice(U/2)),E.q1=x.interp(Ze,.5),E.q3=x.interp(Fe,.5)):(E.q1=x.interp(D,.25),E.q3=x.interp(D,.75)),E.lf=u(E,D,U),E.uf=o(E,D,U),E.lo=h(E),E.uo=s(E);var Pe=a(E,U);E.ln=E.med-Pe,E.un=E.med+Pe,Ee=Math.min(Ee,E.ln),Me=Math.max(Me,E.un),E.pts2=z.filter(j),P.push(E)}c._extremes[f._id]=v.findExtremes(f,c.notched?ge.concat([Ee,Me]):ge,{padded:!0})}return function(ze,Ge){if(x.isArrayOrTypedArray(Ge.selectedpoints))for(var $e=0;$e<ze.length;$e++){for(var ot=ze[$e].pts||[],vt={},bt=0;bt<ot.length;bt++)vt[ot[bt].i]=bt;x.tagSelected(ot,Ge,vt)}}(P,c),P.length>0?(P[0].t={num:L[S],dPos:B,posLetter:_,valLetter:w,labels:{med:t(p,"median:"),min:t(p,"min:"),q1:t(p,"q1:"),q3:t(p,"q3:"),max:t(p,"max:"),mean:c.boxmean==="sd"?t(p,"mean \xB1 \u03C3:"):t(p,"mean:"),lf:t(p,"lower fence:"),uf:t(p,"upper fence:")}},L[S]++,P):[{t:{empty:!0}}]};var r={text:"tx",hovertext:"htx"};function l(p,c,i){for(var y in r)x.isArrayOrTypedArray(c[y])&&(Array.isArray(i)?x.isArrayOrTypedArray(c[y][i[0]])&&(p[r[y]]=c[y][i[0]][i[1]]):p[r[y]]=c[y][i])}function n(p,c){return p.v-c.v}function d(p){return p.v}function u(p,c,i){return i===0?p.q1:Math.min(p.q1,c[Math.min(x.findBin(2.5*p.q1-1.5*p.q3,c,!0)+1,i-1)])}function o(p,c,i){return i===0?p.q3:Math.max(p.q3,c[Math.max(x.findBin(2.5*p.q3-1.5*p.q1,c),0)])}function h(p){return 4*p.q1-3*p.q3}function s(p){return 4*p.q3-3*p.q1}function a(p,c){return c===0?0:1.57*(p.q3-p.q1)/Math.sqrt(c)}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"fast-isnumeric":190}],684:[function(g,Q,X){var m=g("../../plots/cartesian/axes"),v=g("../../lib"),k=g("../../plots/cartesian/constraints").getAxisGroup,x=["v","h"];function e(t,r,l,n){var d,u,o,h=r.calcdata,s=r._fullLayout,a=n._id,p=a.charAt(0),c=[],i=0;for(d=0;d<l.length;d++)for(o=h[l[d]],u=0;u<o.length;u++)c.push(n.c2l(o[u].pos,!0)),i+=(o[u].pts2||[]).length;if(c.length){var y=v.distinctVals(c);n.type!=="category"&&n.type!=="multicategory"||(y.minDiff=1);var f=y.minDiff/2;m.minDtick(n,y.minDiff,y.vals[0],!0);var w=s[t==="violin"?"_numViolins":"_numBoxes"],b=s[t+"mode"]==="group"&&w>1,_=1-s[t+"gap"],T=1-s[t+"groupgap"];for(d=0;d<l.length;d++){var L,A,I,P,S,E,z=(o=h[l[d]])[0].trace,D=o[0].t,U=z.width,H=z.side;if(U)L=A=P=U/2,I=0;else if(L=f,b){var Y=k(s,n._id)+z.orientation,J=(s._alignmentOpts[Y]||{})[z.alignmentgroup]||{},W=Object.keys(J.offsetGroups||{}).length,Z=W||w;A=L*_*T/Z,I=2*L*(((W?z._offsetIndex:D.num)+.5)/Z-.5)*_,P=L*_/Z}else A=L*_*T,I=0,P=L;D.dPos=L,D.bPos=I,D.bdPos=A,D.wHover=P;var re,V,B,j,ee,N,$=I+A,K=Boolean(U);if(H==="positive"?(S=L*(U?1:.5),re=$,E=re=I):H==="negative"?(S=re=I,E=L*(U?1:.5),V=$):(S=E=L,re=V=$),(z.boxpoints||z.points)&&i>0){var te=z.pointpos,ie=z.jitter,le=z.marker.size/2,se=0;te+ie>=0&&((se=$*(te+ie))>S?(K=!0,ee=le,B=se):se>re&&(ee=le,B=S)),se<=S&&(B=S);var ve=0;te-ie<=0&&((ve=-$*(te-ie))>E?(K=!0,N=le,j=ve):ve>V&&(N=le,j=E)),ve<=E&&(j=E)}else B=S,j=E;var fe=new Array(o.length);for(u=0;u<o.length;u++)fe[u]=o[u].pos;z._extremes[a]=m.findExtremes(n,fe,{padded:K,vpadminus:j,vpadplus:B,vpadLinearized:!0,ppadminus:{x:N,y:ee}[p],ppadplus:{x:ee,y:N}[p]})}}}Q.exports={crossTraceCalc:function(t,r){for(var l=t.calcdata,n=r.xaxis,d=r.yaxis,u=0;u<x.length;u++){for(var o=x[u],h=o==="h"?d:n,s=[],a=0;a<l.length;a++){var p=l[a],c=p[0].t,i=p[0].trace;i.visible!==!0||i.type!=="box"&&i.type!=="candlestick"||c.empty||(i.orientation||"v")!==o||i.xaxis!==n._id||i.yaxis!==d._id||s.push(a)}e("box",t,s,h)}},setPositionOffset:e}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../plots/cartesian/constraints":574}],685:[function(g,Q,X){var m=g("../../lib"),v=g("../../registry"),k=g("../../components/color"),x=g("../scatter/period_defaults"),e=g("../bar/defaults").handleGroupingDefaults,t=g("../../plots/cartesian/axis_autotype"),r=g("./attributes");function l(d,u,o,h){function s(H){var Y=0;return H&&H.length&&(Y+=1,m.isArrayOrTypedArray(H[0])&&H[0].length&&(Y+=1)),Y}function a(H){return m.validate(d[H],r[H])}var p,c=o("y"),i=o("x");if(u.type==="box"){var y=o("q1"),f=o("median"),w=o("q3");u._hasPreCompStats=y&&y.length&&f&&f.length&&w&&w.length,p=Math.min(m.minRowLength(y),m.minRowLength(f),m.minRowLength(w))}var b,_,T=s(c),L=s(i),A=T&&m.minRowLength(c),I=L&&m.minRowLength(i),P=h.calendar,S={autotypenumbers:h.autotypenumbers};if(u._hasPreCompStats)switch(String(L)+String(T)){case"00":var E=a("x0")||a("dx");b=(a("y0")||a("dy"))&&!E?"h":"v",_=p;break;case"10":b="v",_=Math.min(p,I);break;case"20":b="h",_=Math.min(p,i.length);break;case"01":b="h",_=Math.min(p,A);break;case"02":b="v",_=Math.min(p,c.length);break;case"12":b="v",_=Math.min(p,I,c.length);break;case"21":b="h",_=Math.min(p,i.length,A);break;case"11":_=0;break;case"22":var z,D=!1;for(z=0;z<i.length;z++)if(t(i[z],P,S)==="category"){D=!0;break}if(D)b="v",_=Math.min(p,I,c.length);else{for(z=0;z<c.length;z++)if(t(c[z],P,S)==="category"){D=!0;break}D?(b="h",_=Math.min(p,i.length,A)):(b="v",_=Math.min(p,I,c.length))}}else T>0?(b="v",_=L>0?Math.min(I,A):Math.min(A)):L>0?(b="h",_=Math.min(I)):_=0;if(_){u._length=_;var U=o("orientation",b);u._hasPreCompStats?U==="v"&&L===0?(o("x0",0),o("dx",1)):U==="h"&&T===0&&(o("y0",0),o("dy",1)):U==="v"&&L===0?o("x0"):U==="h"&&T===0&&o("y0"),v.getComponentMethod("calendars","handleTraceDefaults")(d,u,["x","y"],h)}else u.visible=!1}function n(d,u,o,h){var s=h.prefix,a=m.coerce2(d,u,r,"marker.outliercolor"),p=o("marker.line.outliercolor"),c="outliers";u._hasPreCompStats?c="all":(a||p)&&(c="suspectedoutliers");var i=o(s+"points",c);i?(o("jitter",i==="all"?.3:0),o("pointpos",i==="all"?-1.5:0),o("marker.symbol"),o("marker.opacity"),o("marker.size"),o("marker.angle"),o("marker.color",u.line.color),o("marker.line.color"),o("marker.line.width"),i==="suspectedoutliers"&&(o("marker.line.outliercolor",u.marker.color),o("marker.line.outlierwidth")),o("selected.marker.color"),o("unselected.marker.color"),o("selected.marker.size"),o("unselected.marker.size"),o("text"),o("hovertext")):delete u.marker;var y=o("hoveron");y!=="all"&&y.indexOf("points")===-1||o("hovertemplate"),m.coerceSelectionMarkerOpacity(u,o)}Q.exports={supplyDefaults:function(d,u,o,h){function s(w,b){return m.coerce(d,u,r,w,b)}if(l(d,u,s,h),u.visible!==!1){x(d,u,h,s),s("xhoverformat"),s("yhoverformat");var a=u._hasPreCompStats;a&&(s("lowerfence"),s("upperfence")),s("line.color",(d.marker||{}).color||o),s("line.width"),s("fillcolor",k.addOpacity(u.line.color,.5));var p=!1;if(a){var c=s("mean"),i=s("sd");c&&c.length&&(p=!0,i&&i.length&&(p="sd"))}s("boxmean",p),s("whiskerwidth"),s("width"),s("quartilemethod");var y=!1;if(a){var f=s("notchspan");f&&f.length&&(y=!0)}else m.validate(d.notchwidth,r.notchwidth)&&(y=!0);s("notched",y)&&s("notchwidth"),n(d,u,s,{prefix:"box"})}},crossTraceDefaults:function(d,u){var o,h;function s(c){return m.coerce(h._input,h,r,c)}for(var a=0;a<d.length;a++){var p=(h=d[a]).type;p!=="box"&&p!=="violin"||(o=h._input,u[p+"mode"]==="group"&&e(o,h,u,s))}},handleSampleDefaults:l,handlePointsDefaults:n}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axis_autotype":567,"../../registry":647,"../bar/defaults":661,"../scatter/period_defaults":956,"./attributes":682}],686:[function(g,Q,X){Q.exports=function(m,v){return v.hoverOnBox&&(m.hoverOnBox=v.hoverOnBox),"xVal"in v&&(m.x=v.xVal),"yVal"in v&&(m.y=v.yVal),v.xa&&(m.xaxis=v.xa),v.ya&&(m.yaxis=v.ya),m}},{}],687:[function(g,Q,X){var m=g("../../plots/cartesian/axes"),v=g("../../lib"),k=g("../../components/fx"),x=g("../../components/color"),e=v.fillText;function t(l,n,d,u){var o,h,s,a,p,c,i,y,f,w,b,_,T,L,A=l.cd,I=l.xa,P=l.ya,S=A[0].trace,E=A[0].t,z=S.type==="violin",D=E.bdPos,U=E.wHover,H=function(pe){return s.c2l(pe.pos)+E.bPos-s.c2l(c)};z&&S.side!=="both"?(S.side==="positive"&&(f=function(pe){var ge=H(pe);return k.inbox(ge,ge+U,w)},_=D,T=0),S.side==="negative"&&(f=function(pe){var ge=H(pe);return k.inbox(ge-U,ge,w)},_=0,T=D)):(f=function(pe){var ge=H(pe);return k.inbox(ge-U,ge+U,w)},_=T=D),L=z?function(pe){return k.inbox(pe.span[0]-p,pe.span[1]-p,w)}:function(pe){return k.inbox(pe.min-p,pe.max-p,w)},S.orientation==="h"?(p=n,c=d,i=L,y=f,o="y",s=P,h="x",a=I):(p=d,c=n,i=f,y=L,o="x",s=I,h="y",a=P);var Y=Math.min(1,D/Math.abs(s.r2c(s.range[1])-s.r2c(s.range[0])));function J(pe){return(i(pe)+y(pe))/2}w=l.maxHoverDistance-Y,b=l.maxSpikeDistance-Y;var W=k.getDistanceFunction(u,i,y,J);if(k.getClosest(A,W,l),l.index===!1)return[];var Z=A[l.index],re=S.line.color,V=(S.marker||{}).color;x.opacity(re)&&S.line.width?l.color=re:x.opacity(V)&&S.boxpoints?l.color=V:l.color=S.fillcolor,l[o+"0"]=s.c2p(Z.pos+E.bPos-T,!0),l[o+"1"]=s.c2p(Z.pos+E.bPos+_,!0),l[o+"LabelVal"]=Z.orig_p!==void 0?Z.orig_p:Z.pos;var B=o+"Spike";l.spikeDistance=J(Z)*b/w,l[B]=s.c2p(Z.pos,!0);var j=S.boxmean||(S.meanline||{}).visible,ee=S.boxpoints||S.points,N=ee&&j?["max","uf","q3","med","mean","q1","lf","min"]:ee&&!j?["max","uf","q3","med","q1","lf","min"]:!ee&&j?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],$=a.range[1]<a.range[0];S.orientation===($?"v":"h")&&N.reverse();for(var K=l.spikeDistance,te=l[B],ie=[],le=0;le<N.length;le++){var se=N[le];if(se in Z){var ve=Z[se],fe=a.c2p(ve,!0),ye=v.extendFlat({},l);ye.attr=se,ye[h+"0"]=ye[h+"1"]=fe,ye[h+"LabelVal"]=ve,ye[h+"Label"]=(E.labels?E.labels[se]+" ":"")+m.hoverLabelText(a,ve,S[h+"hoverformat"]),ye.hoverOnBox=!0,se==="mean"&&"sd"in Z&&S.boxmean==="sd"&&(ye[h+"err"]=Z.sd),ye.hovertemplate=!1,ie.push(ye)}}l.name="",l.spikeDistance=void 0,l[B]=void 0;for(var Ae=0;Ae<ie.length;Ae++)ie[Ae].attr!=="med"?(ie[Ae].name="",ie[Ae].spikeDistance=void 0,ie[Ae][B]=void 0):(ie[Ae].spikeDistance=K,ie[Ae][B]=te);return ie}function r(l,n,d){for(var u,o,h,s=l.cd,a=l.xa,p=l.ya,c=s[0].trace,i=a.c2p(n),y=p.c2p(d),f=k.quadrature(function(z){var D=Math.max(3,z.mrc||0);return Math.max(Math.abs(a.c2p(z.x)-i)-D,1-3/D)},function(z){var D=Math.max(3,z.mrc||0);return Math.max(Math.abs(p.c2p(z.y)-y)-D,1-3/D)}),w=!1,b=0;b<s.length;b++){o=s[b];for(var _=0;_<(o.pts||[]).length;_++){var T=f(h=o.pts[_]);T<=l.distance&&(l.distance=T,w=[b,_])}}if(!w)return!1;h=(o=s[w[0]]).pts[w[1]];var L=a.c2p(h.x,!0),A=p.c2p(h.y,!0),I=h.mrc||1;u=v.extendFlat({},l,{index:h.i,color:(c.marker||{}).color,name:c.name,x0:L-I,x1:L+I,y0:A-I,y1:A+I,spikeDistance:l.distance,hovertemplate:c.hovertemplate});var P,S=o.orig_p,E=S!==void 0?S:o.pos;return c.orientation==="h"?(P=p,u.xLabelVal=h.x,u.yLabelVal=E):(P=a,u.xLabelVal=E,u.yLabelVal=h.y),u[P._id.charAt(0)+"Spike"]=P.c2p(o.pos,!0),e(h,c,u),u}Q.exports={hoverPoints:function(l,n,d,u){var o,h=l.cd[0].trace.hoveron,s=[];return h.indexOf("boxes")!==-1&&(s=s.concat(t(l,n,d,u))),h.indexOf("points")!==-1&&(o=r(l,n,d)),u==="closest"?o?[o]:s:(o&&s.push(o),s)},hoverOnBoxes:t,hoverOnPoints:r}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"../../plots/cartesian/axes":566}],688:[function(g,Q,X){Q.exports={attributes:g("./attributes"),layoutAttributes:g("./layout_attributes"),supplyDefaults:g("./defaults").supplyDefaults,crossTraceDefaults:g("./defaults").crossTraceDefaults,supplyLayoutDefaults:g("./layout_defaults").supplyLayoutDefaults,calc:g("./calc"),crossTraceCalc:g("./cross_trace_calc").crossTraceCalc,plot:g("./plot").plot,style:g("./style").style,styleOnSelect:g("./style").styleOnSelect,hoverPoints:g("./hover").hoverPoints,eventData:g("./event_data"),selectPoints:g("./select"),moduleType:"trace",name:"box",basePlotModule:g("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"./attributes":682,"./calc":683,"./cross_trace_calc":684,"./defaults":685,"./event_data":686,"./hover":687,"./layout_attributes":689,"./layout_defaults":690,"./plot":691,"./select":692,"./style":693}],689:[function(g,Q,X){Q.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],690:[function(g,Q,X){var m=g("../../registry"),v=g("../../lib"),k=g("./layout_attributes");function x(e,t,r,l,n){for(var d=n+"Layout",u=!1,o=0;o<r.length;o++){var h=r[o];if(m.traceIs(h,d)){u=!0;break}}u&&(l(n+"mode"),l(n+"gap"),l(n+"groupgap"))}Q.exports={supplyLayoutDefaults:function(e,t,r){x(0,0,r,function(l,n){return v.coerce(e,t,k,l,n)},"box")},_supply:x}},{"../../lib":515,"../../registry":647,"./layout_attributes":689}],691:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../lib"),k=g("../../components/drawing");function x(r,l,n,d){var u,o,h=n.orientation==="h",s=l.val,a=l.pos,p=!!a.rangebreaks,c=d.bPos,i=d.wdPos||0,y=d.bPosPxOffset||0,f=n.whiskerwidth||0,w=n.notched||!1,b=w?1-2*n.notchwidth:1;Array.isArray(d.bdPos)?(u=d.bdPos[0],o=d.bdPos[1]):(u=d.bdPos,o=d.bdPos);var _=r.selectAll("path.box").data(n.type!=="violin"||n.box.visible?v.identity:[]);_.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),_.exit().remove(),_.each(function(T){if(T.empty)return"M0,0Z";var L=a.c2l(T.pos+c,!0),A=a.l2p(L-u)+y,I=a.l2p(L+o)+y,P=p?(A+I)/2:a.l2p(L)+y,S=n.whiskerwidth,E=p?A*S+(1-S)*P:a.l2p(L-i)+y,z=p?I*S+(1-S)*P:a.l2p(L+i)+y,D=a.l2p(L-u*b)+y,U=a.l2p(L+o*b)+y,H=s.c2p(T.q1,!0),Y=s.c2p(T.q3,!0),J=v.constrain(s.c2p(T.med,!0),Math.min(H,Y)+1,Math.max(H,Y)-1),W=T.lf===void 0||n.boxpoints===!1,Z=s.c2p(W?T.min:T.lf,!0),re=s.c2p(W?T.max:T.uf,!0),V=s.c2p(T.ln,!0),B=s.c2p(T.un,!0);h?m.select(this).attr("d","M"+J+","+D+"V"+U+"M"+H+","+A+"V"+I+(w?"H"+V+"L"+J+","+U+"L"+B+","+I:"")+"H"+Y+"V"+A+(w?"H"+B+"L"+J+","+D+"L"+V+","+A:"")+"ZM"+H+","+P+"H"+Z+"M"+Y+","+P+"H"+re+(f===0?"":"M"+Z+","+E+"V"+z+"M"+re+","+E+"V"+z)):m.select(this).attr("d","M"+D+","+J+"H"+U+"M"+A+","+H+"H"+I+(w?"V"+V+"L"+U+","+J+"L"+I+","+B:"")+"V"+Y+"H"+A+(w?"V"+B+"L"+D+","+J+"L"+A+","+V:"")+"ZM"+P+","+H+"V"+Z+"M"+P+","+Y+"V"+re+(f===0?"":"M"+E+","+Z+"H"+z+"M"+E+","+re+"H"+z))})}function e(r,l,n,d){var u=l.x,o=l.y,h=d.bdPos,s=d.bPos,a=n.boxpoints||n.points;v.seedPseudoRandom();var p=r.selectAll("g.points").data(a?function(i){return i.forEach(function(y){y.t=d,y.trace=n}),i}:[]);p.enter().append("g").attr("class","points"),p.exit().remove();var c=p.selectAll("path").data(function(i){var y,f,w=i.pts2,b=Math.max((i.max-i.min)/10,i.q3-i.q1),_=1e-9*b,T=.01*b,L=[],A=0;if(n.jitter){if(b===0)for(A=1,L=new Array(w.length),y=0;y<w.length;y++)L[y]=1;else for(y=0;y<w.length;y++){var I=Math.max(0,y-5),P=w[I].v,S=Math.min(w.length-1,y+5),E=w[S].v;a!=="all"&&(w[y].v<i.lf?E=Math.min(E,i.lf):P=Math.max(P,i.uf));var z=Math.sqrt(T*(S-I)/(E-P+_))||0;z=v.constrain(Math.abs(z),0,1),L.push(z),A=Math.max(z,A)}f=2*n.jitter/(A||1)}for(y=0;y<w.length;y++){var D=w[y],U=D.v,H=n.jitter?f*L[y]*(v.pseudoRandom()-.5):0,Y=i.pos+s+h*(n.pointpos+H);n.orientation==="h"?(D.y=Y,D.x=U):(D.x=Y,D.y=U),a==="suspectedoutliers"&&U<i.uo&&U>i.lo&&(D.so=!0)}return w});c.enter().append("path").classed("point",!0),c.exit().remove(),c.call(k.translatePoints,u,o)}function t(r,l,n,d){var u,o,h=l.val,s=l.pos,a=!!s.rangebreaks,p=d.bPos,c=d.bPosPxOffset||0,i=n.boxmean||(n.meanline||{}).visible;Array.isArray(d.bdPos)?(u=d.bdPos[0],o=d.bdPos[1]):(u=d.bdPos,o=d.bdPos);var y=r.selectAll("path.mean").data(n.type==="box"&&n.boxmean||n.type==="violin"&&n.box.visible&&n.meanline.visible?v.identity:[]);y.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),y.exit().remove(),y.each(function(f){var w=s.c2l(f.pos+p,!0),b=s.l2p(w-u)+c,_=s.l2p(w+o)+c,T=a?(b+_)/2:s.l2p(w)+c,L=h.c2p(f.mean,!0),A=h.c2p(f.mean-f.sd,!0),I=h.c2p(f.mean+f.sd,!0);n.orientation==="h"?m.select(this).attr("d","M"+L+","+b+"V"+_+(i==="sd"?"m0,0L"+A+","+T+"L"+L+","+b+"L"+I+","+T+"Z":"")):m.select(this).attr("d","M"+b+","+L+"H"+_+(i==="sd"?"m0,0L"+T+","+A+"L"+b+","+L+"L"+T+","+I+"Z":""))})}Q.exports={plot:function(r,l,n,d){var u=l.xaxis,o=l.yaxis;v.makeTraceGroups(d,n,"trace boxes").each(function(h){var s,a,p=m.select(this),c=h[0],i=c.t,y=c.trace;i.wdPos=i.bdPos*y.whiskerwidth,y.visible!==!0||i.empty?p.remove():(y.orientation==="h"?(s=o,a=u):(s=u,a=o),x(p,{pos:s,val:a},y,i),e(p,{x:u,y:o},y,i),t(p,{pos:s,val:a},y,i))})},plotBoxAndWhiskers:x,plotPoints:e,plotBoxMean:t}},{"../../components/drawing":389,"../../lib":515,"@plotly/d3":58}],692:[function(g,Q,X){Q.exports=function(m,v){var k,x,e=m.cd,t=m.xaxis,r=m.yaxis,l=[];if(v===!1)for(k=0;k<e.length;k++)for(x=0;x<(e[k].pts||[]).length;x++)e[k].pts[x].selected=0;else for(k=0;k<e.length;k++)for(x=0;x<(e[k].pts||[]).length;x++){var n=e[k].pts[x],d=t.c2p(n.x),u=r.c2p(n.y);v.contains([d,u],null,n.i,m)?(l.push({pointNumber:n.i,x:t.c2d(n.x),y:r.c2d(n.y)}),n.selected=1):n.selected=0}return l}},{}],693:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../components/color"),k=g("../../components/drawing");Q.exports={style:function(x,e,t){var r=t||m.select(x).selectAll("g.trace.boxes");r.style("opacity",function(l){return l[0].trace.opacity}),r.each(function(l){var n=m.select(this),d=l[0].trace,u=d.line.width;function o(a,p,c,i){a.style("stroke-width",p+"px").call(v.stroke,c).call(v.fill,i)}var h=n.selectAll("path.box");if(d.type==="candlestick")h.each(function(a){if(!a.empty){var p=m.select(this),c=d[a.dir];o(p,c.line.width,c.line.color,c.fillcolor),p.style("opacity",d.selectedpoints&&!a.selected?.3:1)}});else{o(h,u,d.line.color,d.fillcolor),n.selectAll("path.mean").style({"stroke-width":u,"stroke-dasharray":2*u+"px,"+u+"px"}).call(v.stroke,d.line.color);var s=n.selectAll("path.point");k.pointStyle(s,d,x)}})},styleOnSelect:function(x,e,t){var r=e[0].trace,l=t.selectAll("path.point");r.selectedpoints?k.selectedPointStyle(l,r):k.pointStyle(l,r,x)}}},{"../../components/color":367,"../../components/drawing":389,"@plotly/d3":58}],694:[function(g,Q,X){var m=g("../../lib").extendFlat,v=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,k=g("../ohlc/attributes"),x=g("../box/attributes");function e(t){return{line:{color:m({},x.line.color,{dflt:t}),width:x.line.width,editType:"style"},fillcolor:x.fillcolor,editType:"style"}}Q.exports={xperiod:k.xperiod,xperiod0:k.xperiod0,xperiodalignment:k.xperiodalignment,xhoverformat:v("x"),yhoverformat:v("y"),x:k.x,open:k.open,high:k.high,low:k.low,close:k.close,line:{width:m({},x.line.width,{}),editType:"style"},increasing:e(k.increasing.line.color.dflt),decreasing:e(k.decreasing.line.color.dflt),text:k.text,hovertext:k.hovertext,whiskerwidth:m({},x.whiskerwidth,{dflt:0}),hoverlabel:k.hoverlabel}},{"../../lib":515,"../../plots/cartesian/axis_format_attributes":569,"../box/attributes":682,"../ohlc/attributes":881}],695:[function(g,Q,X){var m=g("../../lib"),v=g("../../plots/cartesian/axes"),k=g("../../plots/cartesian/align_period"),x=g("../ohlc/calc").calcCommon;function e(t,r,l,n){return{min:l,q1:Math.min(t,n),med:n,q3:Math.max(t,n),max:r}}Q.exports=function(t,r){var l=t._fullLayout,n=v.getFromId(t,r.xaxis),d=v.getFromId(t,r.yaxis),u=n.makeCalcdata(r,"x"),o=k(r,n,"x",u).vals,h=x(t,r,u,o,d,e);return h.length?(m.extendFlat(h[0].t,{num:l._numBoxes,dPos:m.distinctVals(o).minDiff/2,posLetter:"x",valLetter:"y"}),l._numBoxes++,h):[{t:{empty:!0}}]}},{"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../ohlc/calc":882}],696:[function(g,Q,X){var m=g("../../lib"),v=g("../../components/color"),k=g("../ohlc/ohlc_defaults"),x=g("../scatter/period_defaults"),e=g("./attributes");function t(r,l,n,d){var u=n(d+".line.color");n(d+".line.width",l.line.width),n(d+".fillcolor",v.addOpacity(u,.5))}Q.exports=function(r,l,n,d){function u(o,h){return m.coerce(r,l,e,o,h)}k(r,l,u,d)?(x(r,l,d,u,{x:!0}),u("xhoverformat"),u("yhoverformat"),u("line.width"),t(r,l,u,"increasing"),t(r,l,u,"decreasing"),u("text"),u("hovertext"),u("whiskerwidth"),d._requestRangeslider[l.xaxis]=!0):l.visible=!1}},{"../../components/color":367,"../../lib":515,"../ohlc/ohlc_defaults":886,"../scatter/period_defaults":956,"./attributes":694}],697:[function(g,Q,X){Q.exports={moduleType:"trace",name:"candlestick",basePlotModule:g("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:g("./attributes"),layoutAttributes:g("../box/layout_attributes"),supplyLayoutDefaults:g("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:g("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:g("./defaults"),calc:g("./calc"),plot:g("../box/plot").plot,layerName:"boxlayer",style:g("../box/style").style,hoverPoints:g("../ohlc/hover").hoverPoints,selectPoints:g("../ohlc/select")}},{"../../plots/cartesian":578,"../box/cross_trace_calc":684,"../box/layout_attributes":689,"../box/layout_defaults":690,"../box/plot":691,"../box/style":693,"../ohlc/hover":884,"../ohlc/select":888,"./attributes":694,"./calc":695,"./defaults":696}],698:[function(g,Q,X){var m=g("./axis_defaults"),v=g("../../plot_api/plot_template");Q.exports=function(k,x,e,t,r){t("a")||(t("da"),t("a0")),t("b")||(t("db"),t("b0")),function(l,n,d,u){["aaxis","baxis"].forEach(function(o){var h=o.charAt(0),s=l[o]||{},a=v.newContainer(n,o),p={noTicklabelstep:!0,tickfont:"x",id:h+"axis",letter:h,font:n.font,name:o,data:l[h],calendar:n.calendar,dfltColor:u,bgColor:d.paper_bgcolor,autotypenumbersDflt:d.autotypenumbers,fullLayout:d};m(s,a,p),a._categories=a._categories||[],l[o]||s.type==="-"||(l[o]={type:s.type})})}(k,x,e,r)}},{"../../plot_api/plot_template":555,"./axis_defaults":703}],699:[function(g,Q,X){var m=g("../../lib").isArrayOrTypedArray;Q.exports=function(v){return function k(x,e){if(!m(x)||e>=10)return null;for(var t=1/0,r=-1/0,l=x.length,n=0;n<l;n++){var d=x[n];if(m(d)){var u=k(d,e+1);u&&(t=Math.min(u[0],t),r=Math.max(u[1],r))}else t=Math.min(d,t),r=Math.max(d,r)}return[t,r]}(v,0)}},{"../../lib":515}],700:[function(g,Q,X){var m=g("../../plots/font_attributes"),v=g("./axis_attributes"),k=g("../../components/color/attributes"),x=m({editType:"calc"});x.family.dflt='"Open Sans", verdana, arial, sans-serif',x.size.dflt=12,x.color.dflt=k.defaultLine,Q.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:v,baxis:v,font:x,color:{valType:"color",dflt:k.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":366,"../../plots/font_attributes":594,"./axis_attributes":702}],701:[function(g,Q,X){var m=g("../../lib").isArrayOrTypedArray;Q.exports=function(v,k,x,e){var t,r,l,n,d,u,o,h,s,a,p,c,i,y=m(x)?"a":"b",f=(y==="a"?v.aaxis:v.baxis).smoothing,w=y==="a"?v.a2i:v.b2j,b=y==="a"?x:e,_=y==="a"?e:x,T=y==="a"?k.a.length:k.b.length,L=y==="a"?k.b.length:k.a.length,A=Math.floor(y==="a"?v.b2j(_):v.a2i(_)),I=y==="a"?function(re){return v.evalxy([],re,A)}:function(re){return v.evalxy([],A,re)};f&&(l=Math.max(0,Math.min(L-2,A)),n=A-l,r=y==="a"?function(re,V){return v.dxydi([],re,l,V,n)}:function(re,V){return v.dxydj([],l,re,n,V)});var P=w(b[0]),S=w(b[1]),E=P<S?1:-1,z=1e-8*(S-P),D=E>0?Math.floor:Math.ceil,U=E>0?Math.ceil:Math.floor,H=E>0?Math.min:Math.max,Y=E>0?Math.max:Math.min,J=D(P+z),W=U(S-z),Z=[[o=I(P)]];for(t=J;t*E<W*E;t+=E)d=[],p=Y(P,t),i=(c=H(S,t+E))-p,u=Math.max(0,Math.min(T-2,Math.floor(.5*(p+c)))),h=I(c),f&&(s=r(u,p-u),a=r(u,c-u),d.push([o[0]+s[0]/3*i,o[1]+s[1]/3*i]),d.push([h[0]-a[0]/3*i,h[1]-a[1]/3*i])),d.push(h),Z.push(d),o=h;return Z}},{"../../lib":515}],702:[function(g,Q,X){var m=g("../../plots/font_attributes"),v=g("../../components/color/attributes"),k=g("../../plots/cartesian/layout_attributes"),x=g("../../plots/cartesian/axis_format_attributes").descriptionWithDates,e=g("../../plot_api/edit_types").overrideAll,t=g("../../components/drawing/attributes").dash,r=g("../../lib/extend").extendFlat;Q.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:m({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:k.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:m({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:x("tick label")},tickformatstops:e(k.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:v.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:r({},t,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:r({},t,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:v.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:m({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/layout_attributes":579,"../../plots/font_attributes":594}],703:[function(g,Q,X){var m=g("./attributes"),v=g("../../components/color").addOpacity,k=g("../../registry"),x=g("../../lib"),e=g("../../plots/cartesian/tick_value_defaults"),t=g("../../plots/cartesian/tick_label_defaults"),r=g("../../plots/cartesian/prefix_suffix_defaults"),l=g("../../plots/cartesian/category_order_defaults"),n=g("../../plots/cartesian/set_convert"),d=g("../../plots/cartesian/axis_autotype");Q.exports=function(u,o,h){var s=h.letter,a=h.font||{},p=m[s+"axis"];function c(E,z){return x.coerce(u,o,p,E,z)}function i(E,z){return x.coerce2(u,o,p,E,z)}h.name&&(o._name=h.name,o._id=h.name),c("autotypenumbers",h.autotypenumbersDflt);var y=c("type");y==="-"&&(h.data&&function(E,z){if(E.type==="-"){var D=E._id.charAt(0),U=E[D+"calendar"];E.type=d(z,U,{autotypenumbers:E.autotypenumbers})}}(o,h.data),o.type==="-"?o.type="linear":y=u.type=o.type),c("smoothing"),c("cheatertype"),c("showticklabels"),c("labelprefix",s+" = "),c("labelsuffix"),c("showtickprefix"),c("showticksuffix"),c("separatethousands"),c("tickformat"),c("exponentformat"),c("minexponent"),c("showexponent"),c("categoryorder"),c("tickmode"),c("tickvals"),c("ticktext"),c("tick0"),c("dtick"),o.tickmode==="array"&&(c("arraytick0"),c("arraydtick")),c("labelpadding"),o._hovertitle=s,y==="date"&&k.getComponentMethod("calendars","handleDefaults")(u,o,"calendar",h.calendar),n(o,h.fullLayout),o.c2p=x.identity;var f=c("color",h.dfltColor),w=f===u.color?f:a.color;c("title.text")&&(x.coerceFont(c,"title.font",{family:a.family,size:x.bigFont(a.size),color:w}),c("title.offset")),c("tickangle"),c("autorange",!o.isValidRange(u.range))&&c("rangemode"),c("range"),o.cleanRange(),c("fixedrange"),e(u,o,c,y),r(u,o,c,y,h),t(u,o,c,y,h),l(u,o,c,{data:h.data,dataAttr:s});var b=i("gridcolor",v(f,.3)),_=i("gridwidth"),T=i("griddash"),L=c("showgrid");L||(delete o.gridcolor,delete o.gridwidth,delete o.griddash);var A=i("startlinecolor",f),I=i("startlinewidth",_);c("startline",o.showgrid||!!A||!!I)||(delete o.startlinecolor,delete o.startlinewidth);var P=i("endlinecolor",f),S=i("endlinewidth",_);return c("endline",o.showgrid||!!P||!!S)||(delete o.endlinecolor,delete o.endlinewidth),L?(c("minorgridcount"),c("minorgridwidth",_),c("minorgriddash",T),c("minorgridcolor",v(b,.06)),o.minorgridcount||(delete o.minorgridwidth,delete o.minorgriddash,delete o.minorgridcolor)):(delete o.gridcolor,delete o.gridwidth,delete o.griddash),o.showticklabels==="none"&&(delete o.tickfont,delete o.tickangle,delete o.showexponent,delete o.exponentformat,delete o.minexponent,delete o.tickformat,delete o.showticksuffix,delete o.showtickprefix),o.showticksuffix||delete o.ticksuffix,o.showtickprefix||delete o.tickprefix,c("tickmode"),o}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axis_autotype":567,"../../plots/cartesian/category_order_defaults":571,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/set_convert":585,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_value_defaults":589,"../../registry":647,"./attributes":700}],704:[function(g,Q,X){var m=g("../../plots/cartesian/axes"),v=g("../../lib").isArray1D,k=g("./cheater_basis"),x=g("./array_minmax"),e=g("./calc_gridlines"),t=g("./calc_labels"),r=g("./calc_clippath"),l=g("../heatmap/clean_2d_array"),n=g("./smooth_fill_2d_array"),d=g("../heatmap/convert_column_xyz"),u=g("./set_convert");Q.exports=function(o,h){var s=m.getFromId(o,h.xaxis),a=m.getFromId(o,h.yaxis),p=h.aaxis,c=h.baxis,i=h.x,y=h.y,f=[];i&&v(i)&&f.push("x"),y&&v(y)&&f.push("y"),f.length&&d(h,p,c,"a","b",f);var w=h._a=h._a||h.a,b=h._b=h._b||h.b;i=h._x||h.x,y=h._y||h.y;var _={};if(h._cheater){var T=p.cheatertype==="index"?w.length:w,L=c.cheatertype==="index"?b.length:b;i=k(T,L,h.cheaterslope)}h._x=i=l(i),h._y=y=l(y),n(i,w,b),n(y,w,b),u(h),h.setScale();var A=x(i),I=x(y),P=.5*(A[1]-A[0]),S=.5*(A[1]+A[0]),E=.5*(I[1]-I[0]),z=.5*(I[1]+I[0]);return A=[S-1.3*P,S+1.3*P],I=[z-1.3*E,z+1.3*E],h._extremes[s._id]=m.findExtremes(s,A,{padded:!0}),h._extremes[a._id]=m.findExtremes(a,I,{padded:!0}),e(h,"a","b"),e(h,"b","a"),t(h,p),t(h,c),_.clipsegments=r(h._xctrl,h._yctrl,p,c),_.x=i,_.y=y,_.a=w,_.b=b,[_]}},{"../../lib":515,"../../plots/cartesian/axes":566,"../heatmap/clean_2d_array":803,"../heatmap/convert_column_xyz":805,"./array_minmax":699,"./calc_clippath":705,"./calc_gridlines":706,"./calc_labels":707,"./cheater_basis":709,"./set_convert":722,"./smooth_fill_2d_array":723}],705:[function(g,Q,X){Q.exports=function(m,v,k,x){var e,t,r,l=[],n=!!k.smoothing,d=!!x.smoothing,u=m[0].length-1,o=m.length-1;for(e=0,t=[],r=[];e<=u;e++)t[e]=m[0][e],r[e]=v[0][e];for(l.push({x:t,y:r,bicubic:n}),e=0,t=[],r=[];e<=o;e++)t[e]=m[e][u],r[e]=v[e][u];for(l.push({x:t,y:r,bicubic:d}),e=u,t=[],r=[];e>=0;e--)t[u-e]=m[o][e],r[u-e]=v[o][e];for(l.push({x:t,y:r,bicubic:n}),e=o,t=[],r=[];e>=0;e--)t[o-e]=m[e][0],r[o-e]=v[e][0];return l.push({x:t,y:r,bicubic:d}),l}},{}],706:[function(g,Q,X){var m=g("../../plots/cartesian/axes"),v=g("../../lib/extend").extendFlat;Q.exports=function(k,x,e){var t,r,l,n,d,u,o,h,s,a,p,c,i,y,f=k["_"+x],w=k[x+"axis"],b=w._gridlines=[],_=w._minorgridlines=[],T=w._boundarylines=[],L=k["_"+e],A=k[e+"axis"];w.tickmode==="array"&&(w.tickvals=f.slice());var I=k._xctrl,P=k._yctrl,S=I[0].length,E=I.length,z=k._a.length,D=k._b.length;m.prepTicks(w),w.tickmode==="array"&&delete w.tickvals;var U=w.smoothing?3:1;function H(J){var W,Z,re,V,B,j,ee,N,$,K,te,ie,le=[],se=[],ve={};if(x==="b")for(Z=k.b2j(J),re=Math.floor(Math.max(0,Math.min(D-2,Z))),V=Z-re,ve.length=D,ve.crossLength=z,ve.xy=function(fe){return k.evalxy([],fe,Z)},ve.dxy=function(fe,ye){return k.dxydi([],fe,re,ye,V)},W=0;W<z;W++)j=Math.min(z-2,W),ee=W-j,N=k.evalxy([],W,Z),A.smoothing&&W>0&&($=k.dxydi([],W-1,re,0,V),le.push(B[0]+$[0]/3),se.push(B[1]+$[1]/3),K=k.dxydi([],W-1,re,1,V),le.push(N[0]-K[0]/3),se.push(N[1]-K[1]/3)),le.push(N[0]),se.push(N[1]),B=N;else for(W=k.a2i(J),j=Math.floor(Math.max(0,Math.min(z-2,W))),ee=W-j,ve.length=z,ve.crossLength=D,ve.xy=function(fe){return k.evalxy([],W,fe)},ve.dxy=function(fe,ye){return k.dxydj([],j,fe,ee,ye)},Z=0;Z<D;Z++)re=Math.min(D-2,Z),V=Z-re,N=k.evalxy([],W,Z),A.smoothing&&Z>0&&(te=k.dxydj([],j,Z-1,ee,0),le.push(B[0]+te[0]/3),se.push(B[1]+te[1]/3),ie=k.dxydj([],j,Z-1,ee,1),le.push(N[0]-ie[0]/3),se.push(N[1]-ie[1]/3)),le.push(N[0]),se.push(N[1]),B=N;return ve.axisLetter=x,ve.axis=w,ve.crossAxis=A,ve.value=J,ve.constvar=e,ve.index=h,ve.x=le,ve.y=se,ve.smoothing=A.smoothing,ve}function Y(J){var W,Z,re,V,B,j=[],ee=[],N={};if(N.length=f.length,N.crossLength=L.length,x==="b")for(re=Math.max(0,Math.min(D-2,J)),B=Math.min(1,Math.max(0,J-re)),N.xy=function($){return k.evalxy([],$,J)},N.dxy=function($,K){return k.dxydi([],$,re,K,B)},W=0;W<S;W++)j[W]=I[J*U][W],ee[W]=P[J*U][W];else for(Z=Math.max(0,Math.min(z-2,J)),V=Math.min(1,Math.max(0,J-Z)),N.xy=function($){return k.evalxy([],J,$)},N.dxy=function($,K){return k.dxydj([],Z,$,V,K)},W=0;W<E;W++)j[W]=I[W][J*U],ee[W]=P[W][J*U];return N.axisLetter=x,N.axis=w,N.crossAxis=A,N.value=f[J],N.constvar=e,N.index=J,N.x=j,N.y=ee,N.smoothing=A.smoothing,N}if(w.tickmode==="array"){for(n=5e-15,u=(d=[Math.floor((f.length-1-w.arraytick0)/w.arraydtick*(1+n)),Math.ceil(-w.arraytick0/w.arraydtick/(1+n))].sort(function(J,W){return J-W}))[0]-1,o=d[1]+1,h=u;h<o;h++)(r=w.arraytick0+w.arraydtick*h)<0||r>f.length-1||b.push(v(Y(r),{color:w.gridcolor,width:w.gridwidth,dash:w.griddash}));for(h=u;h<o;h++)if(l=w.arraytick0+w.arraydtick*h,p=Math.min(l+w.arraydtick,f.length-1),!(l<0||l>f.length-1||p<0||p>f.length-1))for(c=f[l],i=f[p],t=0;t<w.minorgridcount;t++)(y=p-l)<=0||(a=c+(i-c)*(t+1)/(w.minorgridcount+1)*(w.arraydtick/y))<f[0]||a>f[f.length-1]||_.push(v(H(a),{color:w.minorgridcolor,width:w.minorgridwidth,dash:w.minorgriddash}));w.startline&&T.push(v(Y(0),{color:w.startlinecolor,width:w.startlinewidth})),w.endline&&T.push(v(Y(f.length-1),{color:w.endlinecolor,width:w.endlinewidth}))}else{for(n=5e-15,u=(d=[Math.floor((f[f.length-1]-w.tick0)/w.dtick*(1+n)),Math.ceil((f[0]-w.tick0)/w.dtick/(1+n))].sort(function(J,W){return J-W}))[0],o=d[1],h=u;h<=o;h++)s=w.tick0+w.dtick*h,b.push(v(H(s),{color:w.gridcolor,width:w.gridwidth,dash:w.griddash}));for(h=u-1;h<o+1;h++)for(s=w.tick0+w.dtick*h,t=0;t<w.minorgridcount;t++)(a=s+w.dtick*(t+1)/(w.minorgridcount+1))<f[0]||a>f[f.length-1]||_.push(v(H(a),{color:w.minorgridcolor,width:w.minorgridwidth,dash:w.minorgriddash}));w.startline&&T.push(v(H(f[0]),{color:w.startlinecolor,width:w.startlinewidth})),w.endline&&T.push(v(H(f[f.length-1]),{color:w.endlinecolor,width:w.endlinewidth}))}}},{"../../lib/extend":505,"../../plots/cartesian/axes":566}],707:[function(g,Q,X){var m=g("../../plots/cartesian/axes"),v=g("../../lib/extend").extendFlat;Q.exports=function(k,x){var e,t,r,l=x._labels=[],n=x._gridlines;for(e=0;e<n.length;e++)r=n[e],["start","both"].indexOf(x.showticklabels)!==-1&&(t=m.tickText(x,r.value),v(t,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:r.xy(0),dxy:r.dxy(0,0),axis:r.axis,length:r.crossAxis.length,font:r.axis.tickfont,isFirst:e===0,isLast:e===n.length-1}),l.push(t)),["end","both"].indexOf(x.showticklabels)!==-1&&(t=m.tickText(x,r.value),v(t,{endAnchor:!1,xy:r.xy(r.crossLength-1),dxy:r.dxy(r.crossLength-2,1),axis:r.axis,length:r.crossAxis.length,font:r.axis.tickfont,isFirst:e===0,isLast:e===n.length-1}),l.push(t))}},{"../../lib/extend":505,"../../plots/cartesian/axes":566}],708:[function(g,Q,X){Q.exports=function(m,v,k,x){var e=m[0]-v[0],t=m[1]-v[1],r=k[0]-v[0],l=k[1]-v[1],n=Math.pow(e*e+t*t,.25),d=Math.pow(r*r+l*l,.25),u=(d*d*e-n*n*r)*x,o=(d*d*t-n*n*l)*x,h=d*(n+d)*3,s=n*(n+d)*3;return[[v[0]+(h&&u/h),v[1]+(h&&o/h)],[v[0]-(s&&u/s),v[1]-(s&&o/s)]]}},{}],709:[function(g,Q,X){var m=g("../../lib").isArrayOrTypedArray;Q.exports=function(v,k,x){var e,t,r,l,n,d,u=[],o=m(v)?v.length:v,h=m(k)?k.length:k,s=m(v)?v:null,a=m(k)?k:null;s&&(r=(s.length-1)/(s[s.length-1]-s[0])/(o-1)),a&&(l=(a.length-1)/(a[a.length-1]-a[0])/(h-1));var p=1/0,c=-1/0;for(t=0;t<h;t++)for(u[t]=[],n=a?(a[t]-a[0])*l:t/(h-1),e=0;e<o;e++)d=(s?(s[e]-s[0])*r:e/(o-1))-n*x,p=Math.min(d,p),c=Math.max(d,c),u[t][e]=d;var i=1/(c-p),y=-p*i;for(t=0;t<h;t++)for(e=0;e<o;e++)u[t][e]=i*u[t][e]+y;return u}},{"../../lib":515}],710:[function(g,Q,X){var m=g("./catmull_rom"),v=g("../../lib").ensureArray;function k(x,e,t){var r=-.5*t[0]+1.5*e[0],l=-.5*t[1]+1.5*e[1];return[(2*r+x[0])/3,(2*l+x[1])/3]}Q.exports=function(x,e,t,r,l,n){var d,u,o,h,s,a,p,c,i,y,f=t[0].length,w=t.length,b=l?3*f-2:f,_=n?3*w-2:w;for(x=v(x,_),e=v(e,_),o=0;o<_;o++)x[o]=v(x[o],b),e[o]=v(e[o],b);for(u=0,h=0;u<w;u++,h+=n?3:1)for(s=x[h],a=e[h],p=t[u],c=r[u],d=0,o=0;d<f;d++,o+=l?3:1)s[o]=p[d],a[o]=c[d];if(l)for(u=0,h=0;u<w;u++,h+=n?3:1){for(d=1,o=3;d<f-1;d++,o+=3)i=m([t[u][d-1],r[u][d-1]],[t[u][d],r[u][d]],[t[u][d+1],r[u][d+1]],l),x[h][o-1]=i[0][0],e[h][o-1]=i[0][1],x[h][o+1]=i[1][0],e[h][o+1]=i[1][1];y=k([x[h][0],e[h][0]],[x[h][2],e[h][2]],[x[h][3],e[h][3]]),x[h][1]=y[0],e[h][1]=y[1],y=k([x[h][b-1],e[h][b-1]],[x[h][b-3],e[h][b-3]],[x[h][b-4],e[h][b-4]]),x[h][b-2]=y[0],e[h][b-2]=y[1]}if(n)for(o=0;o<b;o++){for(h=3;h<_-3;h+=3)i=m([x[h-3][o],e[h-3][o]],[x[h][o],e[h][o]],[x[h+3][o],e[h+3][o]],n),x[h-1][o]=i[0][0],e[h-1][o]=i[0][1],x[h+1][o]=i[1][0],e[h+1][o]=i[1][1];y=k([x[0][o],e[0][o]],[x[2][o],e[2][o]],[x[3][o],e[3][o]]),x[1][o]=y[0],e[1][o]=y[1],y=k([x[_-1][o],e[_-1][o]],[x[_-3][o],e[_-3][o]],[x[_-4][o],e[_-4][o]]),x[_-2][o]=y[0],e[_-2][o]=y[1]}if(l&&n)for(h=1;h<_;h+=(h+1)%3==0?2:1){for(o=3;o<b-3;o+=3)i=m([x[h][o-3],e[h][o-3]],[x[h][o],e[h][o]],[x[h][o+3],e[h][o+3]],l),x[h][o-1]=.5*(x[h][o-1]+i[0][0]),e[h][o-1]=.5*(e[h][o-1]+i[0][1]),x[h][o+1]=.5*(x[h][o+1]+i[1][0]),e[h][o+1]=.5*(e[h][o+1]+i[1][1]);y=k([x[h][0],e[h][0]],[x[h][2],e[h][2]],[x[h][3],e[h][3]]),x[h][1]=.5*(x[h][1]+y[0]),e[h][1]=.5*(e[h][1]+y[1]),y=k([x[h][b-1],e[h][b-1]],[x[h][b-3],e[h][b-3]],[x[h][b-4],e[h][b-4]]),x[h][b-2]=.5*(x[h][b-2]+y[0]),e[h][b-2]=.5*(e[h][b-2]+y[1])}return[x,e]}},{"../../lib":515,"./catmull_rom":708}],711:[function(g,Q,X){Q.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],712:[function(g,Q,X){Q.exports=function(m,v,k){return v&&k?function(x,e,t,r,l){var n,d,u,o,h,s;x||(x=[]),e*=3,t*=3;var a=r*r,p=1-r,c=p*p,i=p*r*2,y=-3*c,f=3*(c-i),w=3*(i-a),b=3*a,_=l*l,T=_*l,L=1-l,A=L*L,I=A*L;for(s=0;s<m.length;s++)n=y*(h=m[s])[t][e]+f*h[t][e+1]+w*h[t][e+2]+b*h[t][e+3],d=y*h[t+1][e]+f*h[t+1][e+1]+w*h[t+1][e+2]+b*h[t+1][e+3],u=y*h[t+2][e]+f*h[t+2][e+1]+w*h[t+2][e+2]+b*h[t+2][e+3],o=y*h[t+3][e]+f*h[t+3][e+1]+w*h[t+3][e+2]+b*h[t+3][e+3],x[s]=I*n+3*(A*l*d+L*_*u)+T*o;return x}:v?function(x,e,t,r,l){var n,d,u,o;x||(x=[]),e*=3;var h=r*r,s=1-r,a=s*s,p=s*r*2,c=-3*a,i=3*(a-p),y=3*(p-h),f=3*h,w=1-l;for(u=0;u<m.length;u++)n=c*(o=m[u])[t][e]+i*o[t][e+1]+y*o[t][e+2]+f*o[t][e+3],d=c*o[t+1][e]+i*o[t+1][e+1]+y*o[t+1][e+2]+f*o[t+1][e+3],x[u]=w*n+l*d;return x}:k?function(x,e,t,r,l){var n,d,u,o,h,s;x||(x=[]),t*=3;var a=l*l,p=a*l,c=1-l,i=c*c,y=i*c;for(h=0;h<m.length;h++)n=(s=m[h])[t][e+1]-s[t][e],d=s[t+1][e+1]-s[t+1][e],u=s[t+2][e+1]-s[t+2][e],o=s[t+3][e+1]-s[t+3][e],x[h]=y*n+3*(i*l*d+c*a*u)+p*o;return x}:function(x,e,t,r,l){var n,d,u,o;x||(x=[]);var h=1-l;for(u=0;u<m.length;u++)n=(o=m[u])[t][e+1]-o[t][e],d=o[t+1][e+1]-o[t+1][e],x[u]=h*n+l*d;return x}}},{}],713:[function(g,Q,X){Q.exports=function(m,v,k){return v&&k?function(x,e,t,r,l){var n,d,u,o,h,s;x||(x=[]),e*=3,t*=3;var a=r*r,p=a*r,c=1-r,i=c*c,y=i*c,f=l*l,w=1-l,b=w*w,_=w*l*2,T=-3*b,L=3*(b-_),A=3*(_-f),I=3*f;for(s=0;s<m.length;s++)n=T*(h=m[s])[t][e]+L*h[t+1][e]+A*h[t+2][e]+I*h[t+3][e],d=T*h[t][e+1]+L*h[t+1][e+1]+A*h[t+2][e+1]+I*h[t+3][e+1],u=T*h[t][e+2]+L*h[t+1][e+2]+A*h[t+2][e+2]+I*h[t+3][e+2],o=T*h[t][e+3]+L*h[t+1][e+3]+A*h[t+2][e+3]+I*h[t+3][e+3],x[s]=y*n+3*(i*r*d+c*a*u)+p*o;return x}:v?function(x,e,t,r,l){var n,d,u,o,h,s;x||(x=[]),e*=3;var a=l*l,p=a*l,c=1-l,i=c*c,y=i*c;for(h=0;h<m.length;h++)n=(s=m[h])[t+1][e]-s[t][e],d=s[t+1][e+1]-s[t][e+1],u=s[t+1][e+2]-s[t][e+2],o=s[t+1][e+3]-s[t][e+3],x[h]=y*n+3*(i*l*d+c*a*u)+p*o;return x}:k?function(x,e,t,r,l){var n,d,u,o;x||(x=[]),t*=3;var h=1-r,s=l*l,a=1-l,p=a*a,c=a*l*2,i=-3*p,y=3*(p-c),f=3*(c-s),w=3*s;for(u=0;u<m.length;u++)n=i*(o=m[u])[t][e]+y*o[t+1][e]+f*o[t+2][e]+w*o[t+3][e],d=i*o[t][e+1]+y*o[t+1][e+1]+f*o[t+2][e+1]+w*o[t+3][e+1],x[u]=h*n+r*d;return x}:function(x,e,t,r,l){var n,d,u,o;x||(x=[]);var h=1-r;for(u=0;u<m.length;u++)n=(o=m[u])[t+1][e]-o[t][e],d=o[t+1][e+1]-o[t][e+1],x[u]=h*n+r*d;return x}}},{}],714:[function(g,Q,X){Q.exports=function(m,v,k,x,e){var t=v-2,r=k-2;return x&&e?function(l,n,d){var u,o,h,s,a,p;l||(l=[]);var c=Math.max(0,Math.min(Math.floor(n),t)),i=Math.max(0,Math.min(Math.floor(d),r)),y=Math.max(0,Math.min(1,n-c)),f=Math.max(0,Math.min(1,d-i));c*=3,i*=3;var w=y*y,b=w*y,_=1-y,T=_*_,L=T*_,A=f*f,I=A*f,P=1-f,S=P*P,E=S*P;for(p=0;p<m.length;p++)u=L*(a=m[p])[i][c]+3*(T*y*a[i][c+1]+_*w*a[i][c+2])+b*a[i][c+3],o=L*a[i+1][c]+3*(T*y*a[i+1][c+1]+_*w*a[i+1][c+2])+b*a[i+1][c+3],h=L*a[i+2][c]+3*(T*y*a[i+2][c+1]+_*w*a[i+2][c+2])+b*a[i+2][c+3],s=L*a[i+3][c]+3*(T*y*a[i+3][c+1]+_*w*a[i+3][c+2])+b*a[i+3][c+3],l[p]=E*u+3*(S*f*o+P*A*h)+I*s;return l}:x?function(l,n,d){l||(l=[]);var u,o,h,s,a,p,c=Math.max(0,Math.min(Math.floor(n),t)),i=Math.max(0,Math.min(Math.floor(d),r)),y=Math.max(0,Math.min(1,n-c)),f=Math.max(0,Math.min(1,d-i));c*=3;var w=y*y,b=w*y,_=1-y,T=_*_,L=T*_,A=1-f;for(a=0;a<m.length;a++)u=A*(p=m[a])[i][c]+f*p[i+1][c],o=A*p[i][c+1]+f*p[i+1][c+1],h=A*p[i][c+2]+f*p[i+1][c+1],s=A*p[i][c+3]+f*p[i+1][c+1],l[a]=L*u+3*(T*y*o+_*w*h)+b*s;return l}:e?function(l,n,d){l||(l=[]);var u,o,h,s,a,p,c=Math.max(0,Math.min(Math.floor(n),t)),i=Math.max(0,Math.min(Math.floor(d),r)),y=Math.max(0,Math.min(1,n-c)),f=Math.max(0,Math.min(1,d-i));i*=3;var w=f*f,b=w*f,_=1-f,T=_*_,L=T*_,A=1-y;for(a=0;a<m.length;a++)u=A*(p=m[a])[i][c]+y*p[i][c+1],o=A*p[i+1][c]+y*p[i+1][c+1],h=A*p[i+2][c]+y*p[i+2][c+1],s=A*p[i+3][c]+y*p[i+3][c+1],l[a]=L*u+3*(T*f*o+_*w*h)+b*s;return l}:function(l,n,d){l||(l=[]);var u,o,h,s,a=Math.max(0,Math.min(Math.floor(n),t)),p=Math.max(0,Math.min(Math.floor(d),r)),c=Math.max(0,Math.min(1,n-a)),i=Math.max(0,Math.min(1,d-p)),y=1-i,f=1-c;for(h=0;h<m.length;h++)u=f*(s=m[h])[p][a]+c*s[p][a+1],o=f*s[p+1][a]+c*s[p+1][a+1],l[h]=y*u+i*o;return l}}},{}],715:[function(g,Q,X){var m=g("../../lib"),v=g("./xy_defaults"),k=g("./ab_defaults"),x=g("./attributes"),e=g("../../components/color/attributes");Q.exports=function(t,r,l,n){function d(o,h){return m.coerce(t,r,x,o,h)}r._clipPathId="clip"+r.uid+"carpet";var u=d("color",e.defaultLine);m.coerceFont(d,"font"),d("carpet"),k(t,r,n,d,u),r.a&&r.b?(r.a.length<3&&(r.aaxis.smoothing=0),r.b.length<3&&(r.baxis.smoothing=0),v(t,r,d)||(r.visible=!1),r._cheater&&d("cheaterslope")):r.visible=!1}},{"../../components/color/attributes":366,"../../lib":515,"./ab_defaults":698,"./attributes":700,"./xy_defaults":724}],716:[function(g,Q,X){Q.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),plot:g("./plot"),calc:g("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:g("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":578,"./attributes":700,"./calc":704,"./defaults":715,"./plot":721}],717:[function(g,Q,X){Q.exports=function(m,v){for(var k,x=m._fullData.length,e=0;e<x;e++){var t=m._fullData[e];if(t.index!==v.index&&t.type==="carpet"&&(k||(k=t),t.carpet===v.carpet))return t}return k}},{}],718:[function(g,Q,X){Q.exports=function(m,v,k){if(m.length===0)return"";var x,e=[],t=k?3:1;for(x=0;x<m.length;x+=t)e.push(m[x]+","+v[x]),k&&x<m.length-t&&(e.push("C"),e.push([m[x+1]+","+v[x+1],m[x+2]+","+v[x+2]+" "].join(" ")));return e.join(k?"":"L")}},{}],719:[function(g,Q,X){var m=g("../../lib").isArrayOrTypedArray;Q.exports=function(v,k,x){var e;for(m(v)?v.length>k.length&&(v=v.slice(0,k.length)):v=[],e=0;e<k.length;e++)v[e]=x(k[e]);return v}},{"../../lib":515}],720:[function(g,Q,X){Q.exports=function(m,v,k,x,e,t){var r=e[0]*m.dpdx(v),l=e[1]*m.dpdy(k),n=1,d=1;if(t){var u=Math.sqrt(e[0]*e[0]+e[1]*e[1]),o=Math.sqrt(t[0]*t[0]+t[1]*t[1]),h=(e[0]*t[0]+e[1]*t[1])/u/o;d=Math.max(0,h)}var s=180*Math.atan2(l,r)/Math.PI;return s<-90?(s+=180,n=-n):s>90&&(s-=180,n=-n),{angle:s,flip:n,p:m.c2p(x,v,k),offsetMultplier:d}}},{}],721:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../components/drawing"),k=g("./map_1d_array"),x=g("./makepath"),e=g("./orient_text"),t=g("../../lib/svg_text_utils"),r=g("../../lib"),l=r.strRotate,n=r.strTranslate,d=g("../../constants/alignment");function u(p,c,i,y,f,w){var b="const-"+f+"-lines",_=i.selectAll("."+b).data(w);_.enter().append("path").classed(b,!0).style("vector-effect","non-scaling-stroke"),_.each(function(T){var L=T,A=L.x,I=L.y,P=k([],A,p.c2p),S=k([],I,c.c2p),E="M"+x(P,S,L.smoothing);m.select(this).attr("d",E).style("stroke-width",L.width).style("stroke",L.color).style("stroke-dasharray",v.dashStyle(L.dash,L.width)).style("fill","none")}),_.exit().remove()}function o(p,c,i,y,f,w,b,_){var T=w.selectAll("text."+_).data(b);T.enter().append("text").classed(_,!0);var L=0,A={};return T.each(function(I,P){var S;if(I.axis.tickangle==="auto")S=e(y,c,i,I.xy,I.dxy);else{var E=(I.axis.tickangle+180)*Math.PI/180;S=e(y,c,i,I.xy,[Math.cos(E),Math.sin(E)])}P||(A={angle:S.angle,flip:S.flip});var z=(I.endAnchor?-1:1)*S.flip,D=m.select(this).attr({"text-anchor":z>0?"start":"end","data-notex":1}).call(v.font,I.font).text(I.text).call(t.convertToTspans,p),U=v.bBox(this);D.attr("transform",n(S.p[0],S.p[1])+l(S.angle)+n(I.axis.labelpadding*z,.3*U.height)),L=Math.max(L,U.width+I.axis.labelpadding)}),T.exit().remove(),A.maxExtent=L,A}Q.exports=function(p,c,i,y){var f=c.xaxis,w=c.yaxis,b=p._fullLayout._clips;r.makeTraceGroups(y,i,"trace").each(function(_){var T=m.select(this),L=_[0],A=L.trace,I=A.aaxis,P=A.baxis,S=r.ensureSingle(T,"g","minorlayer"),E=r.ensureSingle(T,"g","majorlayer"),z=r.ensureSingle(T,"g","boundarylayer"),D=r.ensureSingle(T,"g","labellayer");T.style("opacity",A.opacity),u(f,w,E,I,"a",I._gridlines),u(f,w,E,P,"b",P._gridlines),u(f,w,S,I,"a",I._minorgridlines),u(f,w,S,P,"b",P._minorgridlines),u(f,w,z,I,"a-boundary",I._boundarylines),u(f,w,z,P,"b-boundary",P._boundarylines);var U=o(p,f,w,A,L,D,I._labels,"a-label"),H=o(p,f,w,A,L,D,P._labels,"b-label");(function(Y,J,W,Z,re,V,B,j){var ee,N,$,K,te=r.aggNums(Math.min,null,W.a),ie=r.aggNums(Math.max,null,W.a),le=r.aggNums(Math.min,null,W.b),se=r.aggNums(Math.max,null,W.b);ee=.5*(te+ie),N=le,$=W.ab2xy(ee,N,!0),K=W.dxyda_rough(ee,N),B.angle===void 0&&r.extendFlat(B,e(W,re,V,$,W.dxydb_rough(ee,N))),a(Y,J,W,Z,$,K,W.aaxis,re,V,B,"a-title"),ee=te,N=.5*(le+se),$=W.ab2xy(ee,N,!0),K=W.dxydb_rough(ee,N),j.angle===void 0&&r.extendFlat(j,e(W,re,V,$,W.dxyda_rough(ee,N))),a(Y,J,W,Z,$,K,W.baxis,re,V,j,"b-title")})(p,D,A,L,f,w,U,H),function(Y,J,W,Z,re){var V,B,j,ee,N=W.select("#"+Y._clipPathId);N.size()||(N=W.append("clipPath").classed("carpetclip",!0));var $=r.ensureSingle(N,"path","carpetboundary"),K=J.clipsegments,te=[];for(ee=0;ee<K.length;ee++)V=K[ee],B=k([],V.x,Z.c2p),j=k([],V.y,re.c2p),te.push(x(B,j,V.bicubic));var ie="M"+te.join("L")+"Z";N.attr("id",Y._clipPathId),$.attr("d",ie)}(A,L,b,f,w)})};var h=d.LINE_SPACING,s=(1-d.MID_SHIFT)/h+1;function a(p,c,i,y,f,w,b,_,T,L,A){var I=[];b.title.text&&I.push(b.title.text);var P=c.selectAll("text."+A).data(I),S=L.maxExtent;P.enter().append("text").classed(A,!0),P.each(function(){var E=e(i,_,T,f,w);["start","both"].indexOf(b.showticklabels)===-1&&(S=0);var z=b.title.font.size;S+=z+b.title.offset;var D=(L.angle+(L.flip<0?180:0)-E.angle+450)%360,U=D>90&&D<270,H=m.select(this);H.text(b.title.text).call(t.convertToTspans,p),U&&(S=(-t.lineCount(H)+s)*h*z-S),H.attr("transform",n(E.p[0],E.p[1])+l(E.angle)+n(0,S)).attr("text-anchor","middle").call(v.font,b.title.font)}),P.exit().remove()}},{"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"./makepath":718,"./map_1d_array":719,"./orient_text":720,"@plotly/d3":58}],722:[function(g,Q,X){var m=g("./constants"),v=g("../../lib/search").findBin,k=g("./compute_control_points"),x=g("./create_spline_evaluator"),e=g("./create_i_derivative_evaluator"),t=g("./create_j_derivative_evaluator");Q.exports=function(r){var l=r._a,n=r._b,d=l.length,u=n.length,o=r.aaxis,h=r.baxis,s=l[0],a=l[d-1],p=n[0],c=n[u-1],i=l[l.length-1]-l[0],y=n[n.length-1]-n[0],f=i*m.RELATIVE_CULL_TOLERANCE,w=y*m.RELATIVE_CULL_TOLERANCE;s-=f,a+=f,p-=w,c+=w,r.isVisible=function(b,_){return b>s&&b<a&&_>p&&_<c},r.isOccluded=function(b,_){return b<s||b>a||_<p||_>c},r.setScale=function(){var b=r._x,_=r._y,T=k(r._xctrl,r._yctrl,b,_,o.smoothing,h.smoothing);r._xctrl=T[0],r._yctrl=T[1],r.evalxy=x([r._xctrl,r._yctrl],d,u,o.smoothing,h.smoothing),r.dxydi=e([r._xctrl,r._yctrl],o.smoothing,h.smoothing),r.dxydj=t([r._xctrl,r._yctrl],o.smoothing,h.smoothing)},r.i2a=function(b){var _=Math.max(0,Math.floor(b[0]),d-2),T=b[0]-_;return(1-T)*l[_]+T*l[_+1]},r.j2b=function(b){var _=Math.max(0,Math.floor(b[1]),d-2),T=b[1]-_;return(1-T)*n[_]+T*n[_+1]},r.ij2ab=function(b){return[r.i2a(b[0]),r.j2b(b[1])]},r.a2i=function(b){var _=Math.max(0,Math.min(v(b,l),d-2)),T=l[_],L=l[_+1];return Math.max(0,Math.min(d-1,_+(b-T)/(L-T)))},r.b2j=function(b){var _=Math.max(0,Math.min(v(b,n),u-2)),T=n[_],L=n[_+1];return Math.max(0,Math.min(u-1,_+(b-T)/(L-T)))},r.ab2ij=function(b){return[r.a2i(b[0]),r.b2j(b[1])]},r.i2c=function(b,_){return r.evalxy([],b,_)},r.ab2xy=function(b,_,T){if(!T&&(b<l[0]||b>l[d-1]|_<n[0]||_>n[u-1]))return[!1,!1];var L=r.a2i(b),A=r.b2j(_),I=r.evalxy([],L,A);if(T){var P,S,E,z,D=0,U=0,H=[];b<l[0]?(P=0,S=0,D=(b-l[0])/(l[1]-l[0])):b>l[d-1]?(P=d-2,S=1,D=(b-l[d-1])/(l[d-1]-l[d-2])):S=L-(P=Math.max(0,Math.min(d-2,Math.floor(L)))),_<n[0]?(E=0,z=0,U=(_-n[0])/(n[1]-n[0])):_>n[u-1]?(E=u-2,z=1,U=(_-n[u-1])/(n[u-1]-n[u-2])):z=A-(E=Math.max(0,Math.min(u-2,Math.floor(A)))),D&&(r.dxydi(H,P,E,S,z),I[0]+=H[0]*D,I[1]+=H[1]*D),U&&(r.dxydj(H,P,E,S,z),I[0]+=H[0]*U,I[1]+=H[1]*U)}return I},r.c2p=function(b,_,T){return[_.c2p(b[0]),T.c2p(b[1])]},r.p2x=function(b,_,T){return[_.p2c(b[0]),T.p2c(b[1])]},r.dadi=function(b){var _=Math.max(0,Math.min(l.length-2,b));return l[_+1]-l[_]},r.dbdj=function(b){var _=Math.max(0,Math.min(n.length-2,b));return n[_+1]-n[_]},r.dxyda=function(b,_,T,L){var A=r.dxydi(null,b,_,T,L),I=r.dadi(b,T);return[A[0]/I,A[1]/I]},r.dxydb=function(b,_,T,L){var A=r.dxydj(null,b,_,T,L),I=r.dbdj(_,L);return[A[0]/I,A[1]/I]},r.dxyda_rough=function(b,_,T){var L=i*(T||.1),A=r.ab2xy(b+L,_,!0),I=r.ab2xy(b-L,_,!0);return[.5*(A[0]-I[0])/L,.5*(A[1]-I[1])/L]},r.dxydb_rough=function(b,_,T){var L=y*(T||.1),A=r.ab2xy(b,_+L,!0),I=r.ab2xy(b,_-L,!0);return[.5*(A[0]-I[0])/L,.5*(A[1]-I[1])/L]},r.dpdx=function(b){return b._m},r.dpdy=function(b){return b._m}}},{"../../lib/search":535,"./compute_control_points":710,"./constants":711,"./create_i_derivative_evaluator":712,"./create_j_derivative_evaluator":713,"./create_spline_evaluator":714}],723:[function(g,Q,X){var m=g("../../lib");Q.exports=function(v,k,x){var e,t,r,l=[],n=[],d=v[0].length,u=v.length;function o(J,W){var Z,re=0,V=0;return J>0&&(Z=v[W][J-1])!==void 0&&(V++,re+=Z),J<d-1&&(Z=v[W][J+1])!==void 0&&(V++,re+=Z),W>0&&(Z=v[W-1][J])!==void 0&&(V++,re+=Z),W<u-1&&(Z=v[W+1][J])!==void 0&&(V++,re+=Z),re/Math.max(1,V)}var h,s,a,p,c,i,y,f,w,b,_,T=0;for(e=0;e<d;e++)for(t=0;t<u;t++)v[t][e]===void 0&&(l.push(e),n.push(t),v[t][e]=o(e,t)),T=Math.max(T,Math.abs(v[t][e]));if(!l.length)return v;var L=0,A=0,I=l.length;do{for(L=0,r=0;r<I;r++){e=l[r],t=n[r];var P,S,E,z,D,U,H=0,Y=0;e===0?(E=k[D=Math.min(d-1,2)],z=k[1],P=v[t][D],Y+=(S=v[t][1])+(S-P)*(k[0]-z)/(z-E),H++):e===d-1&&(E=k[D=Math.max(0,d-3)],z=k[d-2],P=v[t][D],Y+=(S=v[t][d-2])+(S-P)*(k[d-1]-z)/(z-E),H++),(e===0||e===d-1)&&t>0&&t<u-1&&(h=x[t+1]-x[t],Y+=((s=x[t]-x[t-1])*v[t+1][e]+h*v[t-1][e])/(s+h),H++),t===0?(E=x[U=Math.min(u-1,2)],z=x[1],P=v[U][e],Y+=(S=v[1][e])+(S-P)*(x[0]-z)/(z-E),H++):t===u-1&&(E=x[U=Math.max(0,u-3)],z=x[u-2],P=v[U][e],Y+=(S=v[u-2][e])+(S-P)*(x[u-1]-z)/(z-E),H++),(t===0||t===u-1)&&e>0&&e<d-1&&(h=k[e+1]-k[e],Y+=((s=k[e]-k[e-1])*v[t][e+1]+h*v[t][e-1])/(s+h),H++),H?Y/=H:(a=k[e+1]-k[e],p=k[e]-k[e-1],f=(c=x[t+1]-x[t])*(i=x[t]-x[t-1])*(c+i),Y=((y=a*p*(a+p))*(i*v[t+1][e]+c*v[t-1][e])+f*(p*v[t][e+1]+a*v[t][e-1]))/(f*(p+a)+y*(i+c))),L+=(b=(w=Y-v[t][e])/T)*b,_=H?0:.85,v[t][e]+=w*(1+_)}L=Math.sqrt(L)}while(A++<100&&L>1e-5);return m.log("Smoother converged to",L,"after",A,"iterations"),v}},{"../../lib":515}],724:[function(g,Q,X){var m=g("../../lib").isArray1D;Q.exports=function(v,k,x){var e=x("x"),t=e&&e.length,r=x("y"),l=r&&r.length;if(!t&&!l)return!1;if(k._cheater=!e,t&&!m(e)||l&&!m(r))k._length=null;else{var n=t?e.length:1/0;l&&(n=Math.min(n,r.length)),k.a&&k.a.length&&(n=Math.min(n,k.a.length)),k.b&&k.b.length&&(n=Math.min(n,k.b.length)),k._length=n}return!0}},{"../../lib":515}],725:[function(g,Q,X){var m=g("../../plots/template_attributes").hovertemplateAttrs,v=g("../scattergeo/attributes"),k=g("../../components/colorscale/attributes"),x=g("../../plots/attributes"),e=g("../../components/color/attributes").defaultLine,t=g("../../lib/extend").extendFlat,r=v.marker.line;Q.exports=t({locations:{valType:"data_array",editType:"calc"},locationmode:v.locationmode,z:{valType:"data_array",editType:"calc"},geojson:t({},v.geojson,{}),featureidkey:v.featureidkey,text:t({},v.text,{}),hovertext:t({},v.hovertext,{}),marker:{line:{color:t({},r.color,{dflt:e}),width:t({},r.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:v.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:v.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:t({},x.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:m(),showlegend:t({},x.showlegend,{dflt:!1})},k("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":366,"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scattergeo/attributes":978}],726:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../../constants/numerical").BADNUM,k=g("../../components/colorscale/calc"),x=g("../scatter/arrays_to_calcdata"),e=g("../scatter/calc_selection");function t(r){return r&&typeof r=="string"}Q.exports=function(r,l){var n,d=l._length,u=new Array(d);n=l.geojson?function(p){return t(p)||m(p)}:t;for(var o=0;o<d;o++){var h=u[o]={},s=l.locations[o],a=l.z[o];n(s)&&m(a)?(h.loc=s,h.z=a):(h.loc=null,h.z=v),h.index=o}return x(u,l),k(r,l,{vals:l.z,containerStr:"",cLetter:"z"}),e(u,l),u}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../scatter/arrays_to_calcdata":935,"../scatter/calc_selection":938,"fast-isnumeric":190}],727:[function(g,Q,X){var m=g("../../lib"),v=g("../../components/colorscale/defaults"),k=g("./attributes");Q.exports=function(x,e,t,r){function l(h,s){return m.coerce(x,e,k,h,s)}var n=l("locations"),d=l("z");if(n&&n.length&&m.isArrayOrTypedArray(d)&&d.length){e._length=Math.min(n.length,d.length);var u,o=l("geojson");(typeof o=="string"&&o!==""||m.isPlainObject(o))&&(u="geojson-id"),l("locationmode",u)==="geojson-id"&&l("featureidkey"),l("text"),l("hovertext"),l("hovertemplate"),l("marker.line.width")&&l("marker.line.color"),l("marker.opacity"),v(x,e,r,l,{prefix:"",cLetter:"z"}),m.coerceSelectionMarkerOpacity(e,l)}else e.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":725}],728:[function(g,Q,X){Q.exports=function(m,v,k,x,e){m.location=v.location,m.z=v.z;var t=x[e];return t.fIn&&t.fIn.properties&&(m.properties=t.fIn.properties),m.ct=t.ct,m}},{}],729:[function(g,Q,X){var m=g("../../plots/cartesian/axes"),v=g("./attributes"),k=g("../../lib").fillText;Q.exports=function(x,e,t){var r,l,n,d,u=x.cd,o=u[0].trace,h=x.subplot,s=[e,t],a=[e+360,t];for(l=0;l<u.length;l++)if(d=!1,(r=u[l])._polygons){for(n=0;n<r._polygons.length;n++)r._polygons[n].contains(s)&&(d=!d),r._polygons[n].contains(a)&&(d=!d);if(d)break}if(d&&r)return x.x0=x.x1=x.xa.c2p(r.ct),x.y0=x.y1=x.ya.c2p(r.ct),x.index=r.index,x.location=r.loc,x.z=r.z,x.zLabel=m.tickText(h.mockAxis,h.mockAxis.c2l(r.z),"hover").text,x.hovertemplate=r.hovertemplate,function(p,c,i){if(!c.hovertemplate){var y=i.hi||c.hoverinfo,f=String(i.loc),w=y==="all"?v.hoverinfo.flags:y.split("+"),b=w.indexOf("name")!==-1,_=w.indexOf("location")!==-1,T=w.indexOf("z")!==-1,L=w.indexOf("text")!==-1,A=[];!b&&_?p.nameOverride=f:(b&&(p.nameOverride=c.name),_&&A.push(f)),T&&A.push(p.zLabel),L&&k(i,c,A),p.extraText=A.join("<br>")}}(x,o,r),[x]}},{"../../lib":515,"../../plots/cartesian/axes":566,"./attributes":725}],730:[function(g,Q,X){Q.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),colorbar:g("../heatmap/colorbar"),calc:g("./calc"),calcGeoJSON:g("./plot").calcGeoJSON,plot:g("./plot").plot,style:g("./style").style,styleOnSelect:g("./style").styleOnSelect,hoverPoints:g("./hover"),eventData:g("./event_data"),selectPoints:g("./select"),moduleType:"trace",name:"choropleth",basePlotModule:g("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":598,"../heatmap/colorbar":804,"./attributes":725,"./calc":726,"./defaults":727,"./event_data":728,"./hover":729,"./plot":731,"./select":732,"./style":733}],731:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../lib"),k=g("../../lib/geo_location_utils"),x=g("../../lib/topojson_utils").getTopojsonFeatures,e=g("../../plots/cartesian/autorange").findExtremes,t=g("./style").style;Q.exports={calcGeoJSON:function(r,l){for(var n=r[0].trace,d=l[n.geo],u=d._subplot,o=n.locationmode,h=n._length,s=o==="geojson-id"?k.extractTraceFeature(r):x(n,u.topojson),a=[],p=[],c=0;c<h;c++){var i=r[c],y=o==="geojson-id"?i.fOut:k.locationToFeature(o,i.loc,s);if(y){i.geojson=y,i.ct=y.properties.ct,i._polygons=k.feature2polygons(y);var f=k.computeBbox(y);a.push(f[0],f[2]),p.push(f[1],f[3])}else i.geojson=null}if(d.fitbounds==="geojson"&&o==="geojson-id"){var w=k.computeBbox(k.getTraceGeojson(n));a=[w[0],w[2]],p=[w[1],w[3]]}var b={padded:!0};n._extremes.lon=e(d.lonaxis._ax,a,b),n._extremes.lat=e(d.lataxis._ax,p,b)},plot:function(r,l,n){var d=l.layers.backplot.select(".choroplethlayer");v.makeTraceGroups(d,n,"trace choropleth").each(function(u){var o=m.select(this).selectAll("path.choroplethlocation").data(v.identity);o.enter().append("path").classed("choroplethlocation",!0),o.exit().remove(),t(r,u)})}}},{"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/topojson_utils":544,"../../plots/cartesian/autorange":565,"./style":733,"@plotly/d3":58}],732:[function(g,Q,X){Q.exports=function(m,v){var k,x,e,t,r,l=m.cd,n=m.xaxis,d=m.yaxis,u=[];if(v===!1)for(k=0;k<l.length;k++)l[k].selected=0;else for(k=0;k<l.length;k++)(e=(x=l[k]).ct)&&(t=n.c2p(e),r=d.c2p(e),v.contains([t,r],null,k,m)?(u.push({pointNumber:k,lon:e[0],lat:e[1]}),x.selected=1):x.selected=0);return u}},{}],733:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../components/color"),k=g("../../components/drawing"),x=g("../../components/colorscale");function e(t,r){var l=r[0].trace,n=r[0].node3.selectAll(".choroplethlocation"),d=l.marker||{},u=d.line||{},o=x.makeColorScaleFuncFromTrace(l);n.each(function(h){m.select(this).attr("fill",o(h.z)).call(v.stroke,h.mlc||u.color).call(k.dashLine,"",h.mlw||u.width||0).style("opacity",d.opacity)}),k.selectedPointStyle(n,l)}Q.exports={style:function(t,r){r&&e(t,r)},styleOnSelect:function(t,r){var l=r[0].node3,n=r[0].trace;n.selectedpoints?k.selectedPointStyle(l.selectAll(".choroplethlocation"),n):e(0,r)}}},{"../../components/color":367,"../../components/colorscale":379,"../../components/drawing":389,"@plotly/d3":58}],734:[function(g,Q,X){var m=g("../choropleth/attributes"),v=g("../../components/colorscale/attributes"),k=g("../../plots/template_attributes").hovertemplateAttrs,x=g("../../plots/attributes"),e=g("../../lib/extend").extendFlat;Q.exports=e({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:e({},m.featureidkey,{}),below:{valType:"string",editType:"plot"},text:m.text,hovertext:m.hovertext,marker:{line:{color:e({},m.marker.line.color,{editType:"plot"}),width:e({},m.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:e({},m.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:e({},m.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:e({},m.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:m.hoverinfo,hovertemplate:k({},{keys:["properties"]}),showlegend:e({},x.showlegend,{dflt:!1})},v("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../choropleth/attributes":725}],735:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../../lib"),k=g("../../components/colorscale"),x=g("../../components/drawing"),e=g("../../lib/geojson_utils").makeBlank,t=g("../../lib/geo_location_utils");function r(l){var n,d=l[0].trace,u=d._opts;if(d.selectedpoints){for(var o=x.makeSelectedPointStyleFns(d),h=0;h<l.length;h++){var s=l[h];s.fOut&&(s.fOut.properties.mo2=o.selectedOpacityFn(s))}n={type:"identity",property:"mo2"}}else n=v.isArrayOrTypedArray(d.marker.opacity)?{type:"identity",property:"mo"}:d.marker.opacity;return v.extendFlat(u.fill.paint,{"fill-opacity":n}),v.extendFlat(u.line.paint,{"line-opacity":n}),u}Q.exports={convert:function(l){var n=l[0].trace,d=n.visible===!0&&n._length!==0,u={layout:{visibility:"none"},paint:{}},o={layout:{visibility:"none"},paint:{}},h=n._opts={fill:u,line:o,geojson:e()};if(!d)return h;var s=t.extractTraceFeature(l);if(!s)return h;var a,p,c,i=k.makeColorScaleFuncFromTrace(n),y=n.marker,f=y.line||{};v.isArrayOrTypedArray(y.opacity)&&(a=function(A){var I=A.mo;return m(I)?+v.constrain(I,0,1):0}),v.isArrayOrTypedArray(f.color)&&(p=function(A){return A.mlc}),v.isArrayOrTypedArray(f.width)&&(c=function(A){return A.mlw});for(var w=0;w<l.length;w++){var b=l[w],_=b.fOut;if(_){var T=_.properties;T.fc=i(b.z),a&&(T.mo=a(b)),p&&(T.mlc=p(b)),c&&(T.mlw=c(b)),b.ct=T.ct,b._polygons=t.feature2polygons(_)}}var L=a?{type:"identity",property:"mo"}:y.opacity;return v.extendFlat(u.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":L}),v.extendFlat(o.paint,{"line-color":p?{type:"identity",property:"mlc"}:f.color,"line-width":c?{type:"identity",property:"mlw"}:f.width,"line-opacity":L}),u.layout.visibility="visible",o.layout.visibility="visible",h.geojson={type:"FeatureCollection",features:s},r(l),h},convertOnSelect:r}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/geojson_utils":509,"fast-isnumeric":190}],736:[function(g,Q,X){var m=g("../../lib"),v=g("../../components/colorscale/defaults"),k=g("./attributes");Q.exports=function(x,e,t,r){function l(o,h){return m.coerce(x,e,k,o,h)}var n=l("locations"),d=l("z"),u=l("geojson");m.isArrayOrTypedArray(n)&&n.length&&m.isArrayOrTypedArray(d)&&d.length&&(typeof u=="string"&&u!==""||m.isPlainObject(u))?(l("featureidkey"),e._length=Math.min(n.length,d.length),l("below"),l("text"),l("hovertext"),l("hovertemplate"),l("marker.line.width")&&l("marker.line.color"),l("marker.opacity"),v(x,e,r,l,{prefix:"",cLetter:"z"}),m.coerceSelectionMarkerOpacity(e,l)):e.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":734}],737:[function(g,Q,X){Q.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),colorbar:g("../heatmap/colorbar"),calc:g("../choropleth/calc"),plot:g("./plot"),hoverPoints:g("../choropleth/hover"),eventData:g("../choropleth/event_data"),selectPoints:g("../choropleth/select"),styleOnSelect:function(m,v){v&&v[0].trace._glTrace.updateOnSelect(v)},getBelow:function(m,v){for(var k=v.getMapLayers(),x=k.length-2;x>=0;x--){var e=k[x].id;if(typeof e=="string"&&e.indexOf("water")===0){for(var t=x+1;t<k.length;t++)if(typeof(e=k[t].id)=="string"&&e.indexOf("plotly-")===-1)return e}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:g("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":622,"../choropleth/calc":726,"../choropleth/event_data":728,"../choropleth/hover":729,"../choropleth/select":732,"../heatmap/colorbar":804,"./attributes":734,"./defaults":736,"./plot":738}],738:[function(g,Q,X){var m=g("./convert").convert,v=g("./convert").convertOnSelect,k=g("../../plots/mapbox/constants").traceLayerPrefix;function x(t,r){this.type="choroplethmapbox",this.subplot=t,this.uid=r,this.sourceId="source-"+r,this.layerList=[["fill",k+r+"-fill"],["line",k+r+"-line"]],this.below=null}var e=x.prototype;e.update=function(t){this._update(m(t))},e.updateOnSelect=function(t){this._update(v(t))},e._update=function(t){var r=this.subplot,l=this.layerList,n=r.belowLookup["trace-"+this.uid];r.map.getSource(this.sourceId).setData(t.geojson),n!==this.below&&(this._removeLayers(),this._addLayers(t,n),this.below=n);for(var d=0;d<l.length;d++){var u=l[d],o=u[0],h=u[1],s=t[o];r.setOptions(h,"setLayoutProperty",s.layout),s.layout.visibility==="visible"&&r.setOptions(h,"setPaintProperty",s.paint)}},e._addLayers=function(t,r){for(var l=this.subplot,n=this.layerList,d=this.sourceId,u=0;u<n.length;u++){var o=n[u],h=o[0],s=t[h];l.addLayer({type:h,id:o[1],source:d,layout:s.layout,paint:s.paint},r)}},e._removeLayers=function(){for(var t=this.subplot.map,r=this.layerList,l=r.length-1;l>=0;l--)t.removeLayer(r[l][1])},e.dispose=function(){var t=this.subplot.map;this._removeLayers(),t.removeSource(this.sourceId)},Q.exports=function(t,r){var l=r[0].trace,n=new x(t,l.uid),d=n.sourceId,u=m(r),o=n.below=t.belowLookup["trace-"+l.uid];return t.map.addSource(d,{type:"geojson",data:u.geojson}),n._addLayers(u,o),r[0].trace._glTrace=n,n}},{"../../plots/mapbox/constants":620,"./convert":735}],739:[function(g,Q,X){var m=g("../../components/colorscale/attributes"),v=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,k=g("../../plots/template_attributes").hovertemplateAttrs,x=g("../mesh3d/attributes"),e=g("../../plots/attributes"),t=g("../../lib/extend").extendFlat,r={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:k({editType:"calc"},{keys:["norm"]}),uhoverformat:v("u",1),vhoverformat:v("v",1),whoverformat:v("w",1),xhoverformat:v("x"),yhoverformat:v("y"),zhoverformat:v("z"),showlegend:t({},e.showlegend,{dflt:!1})};t(r,m("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(l){r[l]=x[l]}),r.hoverinfo=t({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),r.transforms=void 0,Q.exports=r},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],740:[function(g,Q,X){var m=g("../../components/colorscale/calc");Q.exports=function(v,k){for(var x=k.u,e=k.v,t=k.w,r=Math.min(k.x.length,k.y.length,k.z.length,x.length,e.length,t.length),l=-1/0,n=1/0,d=0;d<r;d++){var u=x[d],o=e[d],h=t[d],s=Math.sqrt(u*u+o*o+h*h);l=Math.max(l,s),n=Math.min(n,s)}k._len=r,k._normMax=l,m(v,k,{vals:[n,l],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],741:[function(g,Q,X){var m=g("../../../stackgl_modules").gl_cone3d,v=g("../../../stackgl_modules").gl_cone3d.createConeMesh,k=g("../../lib").simpleMap,x=g("../../lib/gl_format_color").parseColorScale,e=g("../../components/colorscale").extractOpts,t=g("../../plots/gl3d/zip3");function r(h,s){this.scene=h,this.uid=s,this.mesh=null,this.data=null}var l=r.prototype;l.handlePick=function(h){if(h.object===this.mesh){var s=h.index=h.data.index,a=this.data.x[s],p=this.data.y[s],c=this.data.z[s],i=this.data.u[s],y=this.data.v[s],f=this.data.w[s];h.traceCoordinate=[a,p,c,i,y,f,Math.sqrt(i*i+y*y+f*f)];var w=this.data.hovertext||this.data.text;return Array.isArray(w)&&w[s]!==void 0?h.textLabel=w[s]:w&&(h.textLabel=w),!0}};var n={xaxis:0,yaxis:1,zaxis:2},d={tip:1,tail:0,cm:.25,center:.5},u={tip:1,tail:1,cm:.75,center:.5};function o(h,s){var a=h.fullSceneLayout,p=h.dataScale,c={};function i(b,_){var T=a[_],L=p[n[_]];return k(b,function(A){return T.d2l(A)*L})}c.vectors=t(i(s.u,"xaxis"),i(s.v,"yaxis"),i(s.w,"zaxis"),s._len),c.positions=t(i(s.x,"xaxis"),i(s.y,"yaxis"),i(s.z,"zaxis"),s._len);var y=e(s);c.colormap=x(s),c.vertexIntensityBounds=[y.min/s._normMax,y.max/s._normMax],c.coneOffset=d[s.anchor],s.sizemode==="scaled"?c.coneSize=s.sizeref||.5:c.coneSize=s.sizeref&&s._normMax?s.sizeref/s._normMax:.5;var f=m(c),w=s.lightposition;return f.lightPosition=[w.x,w.y,w.z],f.ambient=s.lighting.ambient,f.diffuse=s.lighting.diffuse,f.specular=s.lighting.specular,f.roughness=s.lighting.roughness,f.fresnel=s.lighting.fresnel,f.opacity=s.opacity,s._pad=u[s.anchor]*f.vectorScale*f.coneScale*s._normMax,f}l.update=function(h){this.data=h;var s=o(this.scene,h);this.mesh.update(s)},l.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},Q.exports=function(h,s){var a=h.glplot.gl,p=o(h,s),c=v(a,p),i=new r(h,s.uid);return i.mesh=c,i.data=s,c._trace=i,h.glplot.add(c),i}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/gl3d/zip3":618}],742:[function(g,Q,X){var m=g("../../lib"),v=g("../../components/colorscale/defaults"),k=g("./attributes");Q.exports=function(x,e,t,r){function l(a,p){return m.coerce(x,e,k,a,p)}var n=l("u"),d=l("v"),u=l("w"),o=l("x"),h=l("y"),s=l("z");n&&n.length&&d&&d.length&&u&&u.length&&o&&o.length&&h&&h.length&&s&&s.length?(l("sizeref"),l("sizemode"),l("anchor"),l("lighting.ambient"),l("lighting.diffuse"),l("lighting.specular"),l("lighting.roughness"),l("lighting.fresnel"),l("lightposition.x"),l("lightposition.y"),l("lightposition.z"),v(x,e,r,l,{prefix:"",cLetter:"c"}),l("text"),l("hovertext"),l("hovertemplate"),l("uhoverformat"),l("vhoverformat"),l("whoverformat"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":739}],743:[function(g,Q,X){Q.exports={moduleType:"trace",name:"cone",basePlotModule:g("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:g("./attributes"),supplyDefaults:g("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:g("./calc"),plot:g("./convert"),eventData:function(m,v){return m.norm=v.traceCoordinate[6],m},meta:{}}},{"../../plots/gl3d":607,"./attributes":739,"./calc":740,"./convert":741,"./defaults":742}],744:[function(g,Q,X){var m=g("../heatmap/attributes"),v=g("../scatter/attributes"),k=g("../../plots/cartesian/axis_format_attributes"),x=k.axisHoverFormat,e=k.descriptionOnlyNumbers,t=g("../../components/colorscale/attributes"),r=g("../../components/drawing/attributes").dash,l=g("../../plots/font_attributes"),n=g("../../lib/extend").extendFlat,d=g("../../constants/filter_ops"),u=d.COMPARISON_OPS2,o=d.INTERVAL_OPS,h=v.line;Q.exports=n({z:m.z,x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:v.xperiod0,yperiod0:v.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,text:m.text,hovertext:m.hovertext,transpose:m.transpose,xtype:m.xtype,ytype:m.ytype,xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z",1),hovertemplate:m.hovertemplate,texttemplate:n({},m.texttemplate,{}),textfont:n({},m.textfont,{}),hoverongaps:m.hoverongaps,connectgaps:n({},m.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:l({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:e("contour label")},operation:{valType:"enumerated",values:[].concat(u).concat(o),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:n({},h.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:r,smoothing:n({},h.smoothing,{}),editType:"plot"}},t("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../constants/filter_ops":487,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../heatmap/attributes":801,"../scatter/attributes":936}],745:[function(g,Q,X){var m=g("../../components/colorscale"),v=g("../heatmap/calc"),k=g("./set_contours"),x=g("./end_plus");Q.exports=function(e,t){var r=v(e,t),l=r[0].z;k(t,l);var n,d=t.contours,u=m.extractOpts(t);if(d.coloring==="heatmap"&&u.auto&&t.autocontour===!1){var o=d.start,h=x(d),s=d.size||1,a=Math.floor((h-o)/s)+1;isFinite(s)||(s=1,a=1);var p=o-s/2;n=[p,p+a*s]}else n=l;return m.calc(e,t,{vals:n,cLetter:"z"}),r}},{"../../components/colorscale":379,"../heatmap/calc":802,"./end_plus":755,"./set_contours":763}],746:[function(g,Q,X){Q.exports=function(m,v){var k,x=m[0],e=x.z;switch(v.type){case"levels":var t=Math.min(e[0][0],e[0][1]);for(k=0;k<m.length;k++){var r=m[k];r.prefixBoundary=!r.edgepaths.length&&(t>r.level||r.starts.length&&t===r.level)}break;case"constraint":if(x.prefixBoundary=!1,x.edgepaths.length)return;var l=x.x.length,n=x.y.length,d=-1/0,u=1/0;for(k=0;k<n;k++)u=Math.min(u,e[k][0]),u=Math.min(u,e[k][l-1]),d=Math.max(d,e[k][0]),d=Math.max(d,e[k][l-1]);for(k=1;k<l-1;k++)u=Math.min(u,e[0][k]),u=Math.min(u,e[n-1][k]),d=Math.max(d,e[0][k]),d=Math.max(d,e[n-1][k]);var o,h,s=v.value;switch(v._operation){case">":s>d&&(x.prefixBoundary=!0);break;case"<":(s<u||x.starts.length&&s===u)&&(x.prefixBoundary=!0);break;case"[]":o=Math.min(s[0],s[1]),((h=Math.max(s[0],s[1]))<u||o>d||x.starts.length&&h===u)&&(x.prefixBoundary=!0);break;case"][":o=Math.min(s[0],s[1]),h=Math.max(s[0],s[1]),o<u&&h>d&&(x.prefixBoundary=!0)}}}},{}],747:[function(g,Q,X){var m=g("../../components/colorscale"),v=g("./make_color_map"),k=g("./end_plus");Q.exports={min:"zmin",max:"zmax",calc:function(x,e,t){var r=e.contours,l=e.line,n=r.size||1,d=r.coloring,u=v(e,{isColorbar:!0});if(d==="heatmap"){var o=m.extractOpts(e);t._fillgradient=o.reversescale?m.flipScale(o.colorscale):o.colorscale,t._zrange=[o.min,o.max]}else d==="fill"&&(t._fillcolor=u);t._line={color:d==="lines"?u:l.color,width:r.showlines!==!1?l.width:0,dash:l.dash},t._levels={start:r.start,end:k(r),size:n}}}},{"../../components/colorscale":379,"./end_plus":755,"./make_color_map":760}],748:[function(g,Q,X){Q.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],749:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("./label_defaults"),k=g("../../components/color"),x=k.addOpacity,e=k.opacity,t=g("../../constants/filter_ops"),r=t.CONSTRAINT_REDUCTION,l=t.COMPARISON_OPS2;Q.exports=function(n,d,u,o,h,s){var a,p,c,i=d.contours,y=u("contours.operation");i._operation=r[y],function(f,w){var b;l.indexOf(w.operation)===-1?(f("contours.value",[0,1]),Array.isArray(w.value)?w.value.length>2?w.value=w.value.slice(2):w.length===0?w.value=[0,1]:w.length<2?(b=parseFloat(w.value[0]),w.value=[b,b+1]):w.value=[parseFloat(w.value[0]),parseFloat(w.value[1])]:m(w.value)&&(b=parseFloat(w.value),w.value=[b,b+1])):(f("contours.value",0),m(w.value)||(Array.isArray(w.value)?w.value=parseFloat(w.value[0]):w.value=0))}(u,i),y==="="?a=i.showlines=!0:(a=u("contours.showlines"),c=u("fillcolor",x((n.line||{}).color||h,.5))),a&&(p=u("line.color",c&&e(c)?x(d.fillcolor,1):h),u("line.width",2),u("line.dash")),u("line.smoothing"),v(u,o,p,s)}},{"../../components/color":367,"../../constants/filter_ops":487,"./label_defaults":759,"fast-isnumeric":190}],750:[function(g,Q,X){var m=g("../../constants/filter_ops"),v=g("fast-isnumeric");function k(t,r){var l,n=Array.isArray(r);function d(u){return v(u)?+u:null}return m.COMPARISON_OPS2.indexOf(t)!==-1?l=d(n?r[0]:r):m.INTERVAL_OPS.indexOf(t)!==-1?l=n?[d(r[0]),d(r[1])]:[d(r),d(r)]:m.SET_OPS.indexOf(t)!==-1&&(l=n?r.map(d):[d(r)]),l}function x(t){return function(r){r=k(t,r);var l=Math.min(r[0],r[1]),n=Math.max(r[0],r[1]);return{start:l,end:n,size:n-l}}}function e(t){return function(r){return{start:r=k(t,r),end:1/0,size:1/0}}}Q.exports={"[]":x("[]"),"][":x("]["),">":e(">"),"<":e("<"),"=":e("=")}},{"../../constants/filter_ops":487,"fast-isnumeric":190}],751:[function(g,Q,X){Q.exports=function(m,v,k,x){var e=x("contours.start"),t=x("contours.end"),r=e===!1||t===!1,l=k("contours.size");!(r?v.autocontour=!0:k("autocontour",!1))&&l||k("ncontours")}},{}],752:[function(g,Q,X){var m=g("../../lib");function v(k){return m.extendFlat({},k,{edgepaths:m.extendDeep([],k.edgepaths),paths:m.extendDeep([],k.paths),starts:m.extendDeep([],k.starts)})}Q.exports=function(k,x){var e,t,r,l=function(u){return u.reverse()},n=function(u){return u};switch(x){case"=":case"<":return k;case">":for(k.length!==1&&m.warn("Contour data invalid for the specified inequality operation."),t=k[0],e=0;e<t.edgepaths.length;e++)t.edgepaths[e]=l(t.edgepaths[e]);for(e=0;e<t.paths.length;e++)t.paths[e]=l(t.paths[e]);for(e=0;e<t.starts.length;e++)t.starts[e]=l(t.starts[e]);return k;case"][":var d=l;l=n,n=d;case"[]":for(k.length!==2&&m.warn("Contour data invalid for the specified inequality range operation."),t=v(k[0]),r=v(k[1]),e=0;e<t.edgepaths.length;e++)t.edgepaths[e]=l(t.edgepaths[e]);for(e=0;e<t.paths.length;e++)t.paths[e]=l(t.paths[e]);for(e=0;e<t.starts.length;e++)t.starts[e]=l(t.starts[e]);for(;r.edgepaths.length;)t.edgepaths.push(n(r.edgepaths.shift()));for(;r.paths.length;)t.paths.push(n(r.paths.shift()));for(;r.starts.length;)t.starts.push(n(r.starts.shift()));return[t]}}},{"../../lib":515}],753:[function(g,Q,X){var m=g("../../lib"),v=g("../heatmap/xyz_defaults"),k=g("../scatter/period_defaults"),x=g("./constraint_defaults"),e=g("./contours_defaults"),t=g("./style_defaults"),r=g("../heatmap/label_defaults"),l=g("./attributes");Q.exports=function(n,d,u,o){function h(a,p){return m.coerce(n,d,l,a,p)}if(v(n,d,h,o)){k(n,d,o,h),h("xhoverformat"),h("yhoverformat"),h("text"),h("hovertext"),h("hoverongaps"),h("hovertemplate");var s=h("contours.type")==="constraint";h("connectgaps",m.isArray1D(d.z)),s?x(n,d,h,o,u):(e(n,d,h,function(a){return m.coerce2(n,d,l,a)}),t(n,d,h,o)),d.contours&&d.contours.coloring==="heatmap"&&r(h,o)}else d.visible=!1}},{"../../lib":515,"../heatmap/label_defaults":811,"../heatmap/xyz_defaults":816,"../scatter/period_defaults":956,"./attributes":744,"./constraint_defaults":749,"./contours_defaults":751,"./style_defaults":765}],754:[function(g,Q,X){var m=g("../../lib"),v=g("./constraint_mapping"),k=g("./end_plus");Q.exports=function(x,e,t){for(var r=x.type==="constraint"?v[x._operation](x.value):x,l=r.size,n=[],d=k(r),u=t.trace._carpetTrace,o=u?{xaxis:u.aaxis,yaxis:u.baxis,x:t.a,y:t.b}:{xaxis:e.xaxis,yaxis:e.yaxis,x:t.x,y:t.y},h=r.start;h<d;h+=l)if(n.push(m.extendFlat({level:h,crossings:{},starts:[],edgepaths:[],paths:[],z:t.z,smoothing:t.trace.line.smoothing},o)),n.length>1e3){m.warn("Too many contours, clipping at 1000",x);break}return n}},{"../../lib":515,"./constraint_mapping":750,"./end_plus":755}],755:[function(g,Q,X){Q.exports=function(m){return m.end+m.size/1e6}},{}],756:[function(g,Q,X){var m=g("../../lib"),v=g("./constants");function k(t,r,l,n){return Math.abs(t[0]-r[0])<l&&Math.abs(t[1]-r[1])<n}function x(t,r,l,n,d){var u,o=r.join(","),h=t.crossings[o],s=function($,K,te){var ie=0,le=0;return $>20&&K?$===208||$===1114?ie=te[0]===0?1:-1:le=te[1]===0?1:-1:v.BOTTOMSTART.indexOf($)!==-1?le=1:v.LEFTSTART.indexOf($)!==-1?ie=1:v.TOPSTART.indexOf($)!==-1?le=-1:ie=-1,[ie,le]}(h,l,r),a=[e(t,r,[-s[0],-s[1]])],p=t.z.length,c=t.z[0].length,i=r.slice(),y=s.slice();for(u=0;u<1e4;u++){if(h>20?(h=v.CHOOSESADDLE[h][(s[0]||s[1])<0?0:1],t.crossings[o]=v.SADDLEREMAINDER[h]):delete t.crossings[o],!(s=v.NEWDELTA[h])){m.log("Found bad marching index:",h,r,t.level);break}a.push(e(t,r,s)),r[0]+=s[0],r[1]+=s[1],o=r.join(","),k(a[a.length-1],a[a.length-2],n,d)&&a.pop();var f=s[0]&&(r[0]<0||r[0]>c-2)||s[1]&&(r[1]<0||r[1]>p-2);if(r[0]===i[0]&&r[1]===i[1]&&s[0]===y[0]&&s[1]===y[1]||l&&f)break;h=t.crossings[o]}u===1e4&&m.log("Infinite loop in contour?");var w,b,_,T,L,A,I,P,S,E,z,D,U,H,Y,J=k(a[0],a[a.length-1],n,d),W=0,Z=.2*t.smoothing,re=[],V=0;for(u=1;u<a.length;u++)D=a[u],U=a[u-1],H=void 0,Y=void 0,H=D[2]-U[2],Y=D[3]-U[3],W+=I=Math.sqrt(H*H+Y*Y),re.push(I);var B=W/re.length*Z;function j($){return a[$%a.length]}for(u=a.length-2;u>=V;u--)if((w=re[u])<B){for(_=0,b=u-1;b>=V&&w+re[b]<B;b--)w+=re[b];if(J&&u===a.length-2)for(_=0;_<b&&w+re[_]<B;_++)w+=re[_];L=u-b+_+1,A=Math.floor((u+b+_+2)/2),T=J||u!==a.length-2?J||b!==-1?L%2?j(A):[(j(A)[0]+j(A+1)[0])/2,(j(A)[1]+j(A+1)[1])/2]:a[0]:a[a.length-1],a.splice(b+1,u-b+1,T),u=b+1,_&&(V=_),J&&(u===a.length-2?a[_]=a[a.length-1]:u===0&&(a[a.length-1]=a[0]))}for(a.splice(0,V),u=0;u<a.length;u++)a[u].length=2;if(!(a.length<2))if(J)a.pop(),t.paths.push(a);else{l||m.log("Unclosed interior contour?",t.level,i.join(","),a.join("L"));var ee=!1;for(P=0;P<t.edgepaths.length;P++)if(E=t.edgepaths[P],!ee&&k(E[0],a[a.length-1],n,d)){a.pop(),ee=!0;var N=!1;for(S=0;S<t.edgepaths.length;S++)if(k((z=t.edgepaths[S])[z.length-1],a[0],n,d)){N=!0,a.shift(),t.edgepaths.splice(P,1),S===P?t.paths.push(a.concat(z)):(S>P&&S--,t.edgepaths[S]=z.concat(a,E));break}N||(t.edgepaths[P]=a.concat(E))}for(P=0;P<t.edgepaths.length&&!ee;P++)k((E=t.edgepaths[P])[E.length-1],a[0],n,d)&&(a.shift(),t.edgepaths[P]=E.concat(a),ee=!0);ee||t.edgepaths.push(a)}}function e(t,r,l){var n=r[0]+Math.max(l[0],0),d=r[1]+Math.max(l[1],0),u=t.z[d][n],o=t.xaxis,h=t.yaxis;if(l[1]){var s=(t.level-u)/(t.z[d][n+1]-u),a=(s!==1?(1-s)*o.c2l(t.x[n]):0)+(s!==0?s*o.c2l(t.x[n+1]):0);return[o.c2p(o.l2c(a),!0),h.c2p(t.y[d],!0),n+s,d]}var p=(t.level-u)/(t.z[d+1][n]-u),c=(p!==1?(1-p)*h.c2l(t.y[d]):0)+(p!==0?p*h.c2l(t.y[d+1]):0);return[o.c2p(t.x[n],!0),h.c2p(h.l2c(c),!0),n,d+p]}Q.exports=function(t,r,l){var n,d,u,o;for(r=r||.01,l=l||.01,d=0;d<t.length;d++){for(u=t[d],o=0;o<u.starts.length;o++)x(u,u.starts[o],"edge",r,l);for(n=0;Object.keys(u.crossings).length&&n<1e4;)n++,x(u,Object.keys(u.crossings)[0].split(",").map(Number),void 0,r,l);n===1e4&&m.log("Infinite loop in contour?")}}},{"../../lib":515,"./constants":748}],757:[function(g,Q,X){var m=g("../../components/color"),v=g("../heatmap/hover");Q.exports=function(k,x,e,t,r){r||(r={}),r.isContour=!0;var l=v(k,x,e,t,r);return l&&l.forEach(function(n){var d=n.trace;d.contours.type==="constraint"&&(d.fillcolor&&m.opacity(d.fillcolor)?n.color=m.addOpacity(d.fillcolor,1):d.contours.showlines&&m.opacity(d.line.color)&&(n.color=m.addOpacity(d.line.color,1)))}),l}},{"../../components/color":367,"../heatmap/hover":808}],758:[function(g,Q,X){Q.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),calc:g("./calc"),plot:g("./plot").plot,style:g("./style"),colorbar:g("./colorbar"),hoverPoints:g("./hover"),moduleType:"trace",name:"contour",basePlotModule:g("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":578,"./attributes":744,"./calc":745,"./colorbar":747,"./defaults":753,"./hover":757,"./plot":762,"./style":764}],759:[function(g,Q,X){var m=g("../../lib");Q.exports=function(v,k,x,e){if(e||(e={}),v("contours.showlabels")){var t=k.font;m.coerceFont(v,"contours.labelfont",{family:t.family,size:t.size,color:x}),v("contours.labelformat")}e.hasHover!==!1&&v("zhoverformat")}},{"../../lib":515}],760:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../components/colorscale"),k=g("./end_plus");Q.exports=function(x){var e=x.contours,t=e.start,r=k(e),l=e.size||1,n=Math.floor((r-t)/l)+1,d=e.coloring==="lines"?0:1,u=v.extractOpts(x);isFinite(l)||(l=1,n=1);var o,h,s=u.reversescale?v.flipScale(u.colorscale):u.colorscale,a=s.length,p=new Array(a),c=new Array(a);if(e.coloring==="heatmap"){var i=u.min,y=u.max;for(h=0;h<a;h++)o=s[h],p[h]=o[0]*(y-i)+i,c[h]=o[1];var f=m.extent([i,y,e.start,e.start+l*(n-1)]),w=f[i<y?0:1],b=f[i<y?1:0];w!==i&&(p.splice(0,0,w),c.splice(0,0,c[0])),b!==y&&(p.push(b),c.push(c[c.length-1]))}else for(h=0;h<a;h++)o=s[h],p[h]=(o[0]*(n+d-1)-d/2)*l+t,c[h]=o[1];return v.makeColorScaleFunc({domain:p,range:c},{noNumericCheck:!0})}},{"../../components/colorscale":379,"./end_plus":755,"@plotly/d3":58}],761:[function(g,Q,X){var m=g("./constants");function v(k,x){var e=(x[0][0]>k?0:1)+(x[0][1]>k?0:2)+(x[1][1]>k?0:4)+(x[1][0]>k?0:8);return e===5||e===10?k>(x[0][0]+x[0][1]+x[1][0]+x[1][1])/4?e===5?713:1114:e===5?104:208:e===15?0:e}Q.exports=function(k){var x,e,t,r,l,n,d,u,o,h=k[0].z,s=h.length,a=h[0].length,p=s===2||a===2;for(e=0;e<s-1;e++)for(r=[],e===0&&(r=r.concat(m.BOTTOMSTART)),e===s-2&&(r=r.concat(m.TOPSTART)),x=0;x<a-1;x++)for(t=r.slice(),x===0&&(t=t.concat(m.LEFTSTART)),x===a-2&&(t=t.concat(m.RIGHTSTART)),l=x+","+e,n=[[h[e][x],h[e][x+1]],[h[e+1][x],h[e+1][x+1]]],o=0;o<k.length;o++)(d=v((u=k[o]).level,n))&&(u.crossings[l]=d,t.indexOf(d)!==-1&&(u.starts.push([x,e]),p&&t.indexOf(d,t.indexOf(d)+1)!==-1&&u.starts.push([x,e])))}},{"./constants":748}],762:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../lib"),k=g("../../components/drawing"),x=g("../../components/colorscale"),e=g("../../lib/svg_text_utils"),t=g("../../plots/cartesian/axes"),r=g("../../plots/cartesian/set_convert"),l=g("../heatmap/plot"),n=g("./make_crossings"),d=g("./find_all_paths"),u=g("./empty_pathinfo"),o=g("./convert_to_constraints"),h=g("./close_boundaries"),s=g("./constants"),a=s.LABELOPTIMIZER;function p(y,f){var w,b,_,T,L,A,I,P="",S=0,E=y.edgepaths.map(function(J,W){return W}),z=!0;function D(J){return Math.abs(J[1]-f[2][1])<.01}function U(J){return Math.abs(J[0]-f[0][0])<.01}function H(J){return Math.abs(J[0]-f[2][0])<.01}for(;E.length;){for(A=k.smoothopen(y.edgepaths[S],y.smoothing),P+=z?A:A.replace(/^M/,"L"),E.splice(E.indexOf(S),1),w=y.edgepaths[S][y.edgepaths[S].length-1],T=-1,_=0;_<4;_++){if(!w){v.log("Missing end?",S,y);break}for(I=w,Math.abs(I[1]-f[0][1])<.01&&!H(w)?b=f[1]:U(w)?b=f[0]:D(w)?b=f[3]:H(w)&&(b=f[2]),L=0;L<y.edgepaths.length;L++){var Y=y.edgepaths[L][0];Math.abs(w[0]-b[0])<.01?Math.abs(w[0]-Y[0])<.01&&(Y[1]-w[1])*(b[1]-Y[1])>=0&&(b=Y,T=L):Math.abs(w[1]-b[1])<.01?Math.abs(w[1]-Y[1])<.01&&(Y[0]-w[0])*(b[0]-Y[0])>=0&&(b=Y,T=L):v.log("endpt to newendpt is not vert. or horz.",w,b,Y)}if(w=b,T>=0)break;P+="L"+b}if(T===y.edgepaths.length){v.log("unclosed perimeter path");break}S=T,(z=E.indexOf(S)===-1)&&(S=E[0],P+="Z")}for(S=0;S<y.paths.length;S++)P+=k.smoothclosed(y.paths[S],y.smoothing);return P}function c(y,f,w,b){var _=f.width/2,T=f.height/2,L=y.x,A=y.y,I=y.theta,P=Math.cos(I)*_,S=Math.sin(I)*_,E=(L>b.center?b.right-L:L-b.left)/(P+Math.abs(Math.sin(I)*T)),z=(A>b.middle?b.bottom-A:A-b.top)/(Math.abs(S)+Math.cos(I)*T);if(E<1||z<1)return 1/0;var D=a.EDGECOST*(1/(E-1)+1/(z-1));D+=a.ANGLECOST*I*I;for(var U=L-P,H=A-S,Y=L+P,J=A+S,W=0;W<w.length;W++){var Z=w[W],re=Math.cos(Z.theta)*Z.width/2,V=Math.sin(Z.theta)*Z.width/2,B=2*v.segmentDistance(U,H,Y,J,Z.x-re,Z.y-V,Z.x+re,Z.y+V)/(f.height+Z.height),j=Z.level===f.level,ee=j?a.SAMELEVELDISTANCE:1;if(B<=ee)return 1/0;D+=a.NEIGHBORCOST*(j?a.SAMELEVELFACTOR:1)/(B-ee)}return D}function i(y){var f,w,b=y.trace._emptypoints,_=[],T=y.z.length,L=y.z[0].length,A=[];for(f=0;f<L;f++)A.push(1);for(f=0;f<T;f++)_.push(A.slice());for(f=0;f<b.length;f++)_[(w=b[f])[0]][w[1]]=0;return y.zmask=_,_}X.plot=function(y,f,w,b){var _=f.xaxis,T=f.yaxis;v.makeTraceGroups(b,w,"contour").each(function(L){var A=m.select(this),I=L[0],P=I.trace,S=I.x,E=I.y,z=P.contours,D=u(z,f,I),U=v.ensureSingle(A,"g","heatmapcoloring"),H=[];z.coloring==="heatmap"&&(H=[L]),l(y,f,H,U),n(D),d(D);var Y=_.c2p(S[0],!0),J=_.c2p(S[S.length-1],!0),W=T.c2p(E[0],!0),Z=T.c2p(E[E.length-1],!0),re=[[Y,Z],[J,Z],[J,W],[Y,W]],V=D;z.type==="constraint"&&(V=o(D,z._operation)),function(B,j,ee){var N=v.ensureSingle(B,"g","contourbg").selectAll("path").data(ee.coloring==="fill"?[0]:[]);N.enter().append("path"),N.exit().remove(),N.attr("d","M"+j.join("L")+"Z").style("stroke","none")}(A,re,z),function(B,j,ee,N){var $=N.coloring==="fill"||N.type==="constraint"&&N._operation!=="=",K="M"+ee.join("L")+"Z";$&&h(j,N);var te=v.ensureSingle(B,"g","contourfill").selectAll("path").data($?j:[]);te.enter().append("path"),te.exit().remove(),te.each(function(ie){var le=(ie.prefixBoundary?K:"")+p(ie,ee);le?m.select(this).attr("d",le).style("stroke","none"):m.select(this).remove()})}(A,V,re,z),function(B,j,ee,N,$){var K=v.ensureSingle(B,"g","contourlines"),te=$.showlines!==!1,ie=$.showlabels,le=te&&ie,se=X.createLines(K,te||ie,j),ve=X.createLineClip(K,le,ee,N.trace.uid),fe=B.selectAll("g.contourlabels").data(ie?[0]:[]);if(fe.exit().remove(),fe.enter().append("g").classed("contourlabels",!0),ie){var ye=[],Ae=[];v.clearLocationCache();var pe=X.labelFormatter(ee,N),ge=k.tester.append("text").attr("data-notex",1).call(k.font,$.labelfont),we=j[0].xaxis,oe=j[0].yaxis,de=we._length,Te=oe._length,Ee=we.range,Me=oe.range,De=v.aggNums(Math.min,null,N.x),Ie=v.aggNums(Math.max,null,N.x),Oe=v.aggNums(Math.min,null,N.y),Ze=v.aggNums(Math.max,null,N.y),Fe=Math.max(we.c2p(De,!0),0),Pe=Math.min(we.c2p(Ie,!0),de),ze=Math.max(oe.c2p(Ze,!0),0),Ge=Math.min(oe.c2p(Oe,!0),Te),$e={};Ee[0]<Ee[1]?($e.left=Fe,$e.right=Pe):($e.left=Pe,$e.right=Fe),Me[0]<Me[1]?($e.top=ze,$e.bottom=Ge):($e.top=Ge,$e.bottom=ze),$e.middle=($e.top+$e.bottom)/2,$e.center=($e.left+$e.right)/2,ye.push([[$e.left,$e.top],[$e.right,$e.top],[$e.right,$e.bottom],[$e.left,$e.bottom]]);var ot=Math.sqrt(de*de+Te*Te),vt=s.LABELDISTANCE*ot/Math.max(1,j.length/s.LABELINCREASE);se.each(function(bt){var yt=X.calcTextOpts(bt.level,pe,ge,ee);m.select(this).selectAll("path").each(function(){var tt=v.getVisibleSegment(this,$e,yt.height/2);if(tt&&!(tt.len<(yt.width+yt.height)*s.LABELMIN))for(var Ke=Math.min(Math.ceil(tt.len/vt),s.LABELMAX),mt=0;mt<Ke;mt++){var Ft=X.findBestTextLocation(this,tt,yt,Ae,$e);if(!Ft)break;X.addLabelData(Ft,yt,Ae,ye)}})}),ge.remove(),X.drawLabels(fe,Ae,ee,ve,le?ye:null)}ie&&!te&&se.remove()}(A,D,y,I,z),function(B,j,ee,N,$){var K=N.trace,te=ee._fullLayout._clips,ie="clip"+K.uid,le=te.selectAll("#"+ie).data(K.connectgaps?[]:[0]);if(le.enter().append("clipPath").classed("contourclip",!0).attr("id",ie),le.exit().remove(),K.connectgaps===!1){var se={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:j.xaxis,yaxis:j.yaxis,x:N.x,y:N.y,z:i(N),smoothing:0};n([se]),d([se]),h([se],{type:"levels"}),v.ensureSingle(le,"path","").attr("d",(se.prefixBoundary?"M"+$.join("L")+"Z":"")+p(se,$))}else ie=null;k.setClipUrl(B,ie,ee)}(A,f,y,I,re)})},X.createLines=function(y,f,w){var b=w[0].smoothing,_=y.selectAll("g.contourlevel").data(f?w:[]);if(_.exit().remove(),_.enter().append("g").classed("contourlevel",!0),f){var T=_.selectAll("path.openline").data(function(A){return A.pedgepaths||A.edgepaths});T.exit().remove(),T.enter().append("path").classed("openline",!0),T.attr("d",function(A){return k.smoothopen(A,b)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var L=_.selectAll("path.closedline").data(function(A){return A.ppaths||A.paths});L.exit().remove(),L.enter().append("path").classed("closedline",!0),L.attr("d",function(A){return k.smoothclosed(A,b)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return _},X.createLineClip=function(y,f,w,b){var _=f?"clipline"+b:null,T=w._fullLayout._clips.selectAll("#"+_).data(f?[0]:[]);return T.exit().remove(),T.enter().append("clipPath").classed("contourlineclip",!0).attr("id",_),k.setClipUrl(y,_,w),T},X.labelFormatter=function(y,f){var w=y._fullLayout,b=f.trace,_=b.contours,T={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(_.labelformat)T.tickformat=_.labelformat,r(T,w);else{var L=x.extractOpts(b);if(L&&L.colorbar&&L.colorbar._axis)T=L.colorbar._axis;else{if(_.type==="constraint"){var A=_.value;Array.isArray(A)?T.range=[A[0],A[A.length-1]]:T.range=[A,A]}else T.range=[_.start,_.end],T.nticks=(_.end-_.start)/_.size;T.range[0]===T.range[1]&&(T.range[1]+=T.range[0]||1),T.nticks||(T.nticks=1e3),r(T,w),t.prepTicks(T),T._tmin=null,T._tmax=null}}return function(I){return t.tickText(T,I).text}},X.calcTextOpts=function(y,f,w,b){var _=f(y);w.text(_).call(e.convertToTspans,b);var T=w.node(),L=k.bBox(T,!0);return{text:_,width:L.width,height:L.height,fontSize:+T.style["font-size"].replace("px",""),level:y,dy:(L.top+L.bottom)/2}},X.findBestTextLocation=function(y,f,w,b,_){var T,L,A,I,P,S=w.width;f.isClosed?(L=f.len/a.INITIALSEARCHPOINTS,T=f.min+L/2,A=f.max):(L=(f.len-S)/(a.INITIALSEARCHPOINTS+1),T=f.min+L+S/2,A=f.max-(L+S)/2);for(var E=1/0,z=0;z<a.ITERATIONS;z++){for(var D=T;D<A;D+=L){var U=v.getTextLocation(y,f.total,D,S),H=c(U,w,b,_);H<E&&(E=H,P=U,I=D)}if(E>2*a.MAXCOST)break;z&&(L/=2),A=(T=I-L/2)+1.5*L}if(E<=a.MAXCOST)return P},X.addLabelData=function(y,f,w,b){var _=f.fontSize,T=f.width+_/3,L=Math.max(0,f.height-_/3),A=y.x,I=y.y,P=y.theta,S=Math.sin(P),E=Math.cos(P),z=function(U,H){return[A+U*E-H*S,I+U*S+H*E]},D=[z(-T/2,-L/2),z(-T/2,L/2),z(T/2,L/2),z(T/2,-L/2)];w.push({text:f.text,x:A,y:I,dy:f.dy,theta:P,level:f.level,width:T,height:L}),b.push(D)},X.drawLabels=function(y,f,w,b,_){var T=y.selectAll("text").data(f,function(I){return I.text+","+I.x+","+I.y+","+I.theta});if(T.exit().remove(),T.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(I){var P=I.x+Math.sin(I.theta)*I.dy,S=I.y-Math.cos(I.theta)*I.dy;m.select(this).text(I.text).attr({x:P,y:S,transform:"rotate("+180*I.theta/Math.PI+" "+P+" "+S+")"}).call(e.convertToTspans,w)}),_){for(var L="",A=0;A<_.length;A++)L+="M"+_[A].join("L")+"Z";v.ensureSingle(b,"path","").attr("d",L)}}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/set_convert":585,"../heatmap/plot":813,"./close_boundaries":746,"./constants":748,"./convert_to_constraints":752,"./empty_pathinfo":754,"./find_all_paths":756,"./make_crossings":761,"@plotly/d3":58}],763:[function(g,Q,X){var m=g("../../plots/cartesian/axes"),v=g("../../lib");function k(x,e,t){var r={type:"linear",range:[x,e]};return m.autoTicks(r,(e-x)/(t||15)),r}Q.exports=function(x,e){var t=x.contours;if(x.autocontour){var r=x.zmin,l=x.zmax;(x.zauto||r===void 0)&&(r=v.aggNums(Math.min,null,e)),(x.zauto||l===void 0)&&(l=v.aggNums(Math.max,null,e));var n=k(r,l,x.ncontours);t.size=n.dtick,t.start=m.tickFirst(n),n.range.reverse(),t.end=m.tickFirst(n),t.start===r&&(t.start+=t.size),t.end===l&&(t.end-=t.size),t.start>t.end&&(t.start=t.end=(t.start+t.end)/2),x._input.contours||(x._input.contours={}),v.extendFlat(x._input.contours,{start:t.start,end:t.end,size:t.size}),x._input.autocontour=!0}else if(t.type!=="constraint"){var d,u=t.start,o=t.end,h=x._input.contours;u>o&&(t.start=h.start=o,o=t.end=h.end=u,u=t.start),!(t.size>0)&&(d=u===o?1:k(u,o,x.ncontours).dtick,h.size=t.size=d)}}},{"../../lib":515,"../../plots/cartesian/axes":566}],764:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../components/drawing"),k=g("../heatmap/style"),x=g("./make_color_map");Q.exports=function(e){var t=m.select(e).selectAll("g.contour");t.style("opacity",function(r){return r[0].trace.opacity}),t.each(function(r){var l=m.select(this),n=r[0].trace,d=n.contours,u=n.line,o=d.size||1,h=d.start,s=d.type==="constraint",a=!s&&d.coloring==="lines",p=!s&&d.coloring==="fill",c=a||p?x(n):null;l.selectAll("g.contourlevel").each(function(f){m.select(this).selectAll("path").call(v.lineGroupStyle,u.width,a?c(f.level):u.color,u.dash)});var i=d.labelfont;if(l.selectAll("g.contourlabels text").each(function(f){v.font(m.select(this),{family:i.family,size:i.size,color:i.color||(a?c(f.level):u.color)})}),s)l.selectAll("g.contourfill path").style("fill",n.fillcolor);else if(p){var y;l.selectAll("g.contourfill path").style("fill",function(f){return y===void 0&&(y=f.level),c(f.level+.5*o)}),y===void 0&&(y=h),l.selectAll("g.contourbg path").style("fill",c(y-.5*o))}}),k(e)}},{"../../components/drawing":389,"../heatmap/style":814,"./make_color_map":760,"@plotly/d3":58}],765:[function(g,Q,X){var m=g("../../components/colorscale/defaults"),v=g("./label_defaults");Q.exports=function(k,x,e,t,r){var l,n=e("contours.coloring"),d="";n==="fill"&&(l=e("contours.showlines")),l!==!1&&(n!=="lines"&&(d=e("line.color","#000")),e("line.width",.5),e("line.dash")),n!=="none"&&(k.showlegend!==!0&&(x.showlegend=!1),x._dfltShowLegend=!1,m(k,x,t,e,{prefix:"",cLetter:"z"})),e("line.smoothing"),v(e,t,d,r)}},{"../../components/colorscale/defaults":377,"./label_defaults":759}],766:[function(g,Q,X){var m=g("../heatmap/attributes"),v=g("../contour/attributes"),k=g("../../components/colorscale/attributes"),x=g("../../lib/extend").extendFlat,e=v.contours;Q.exports=x({carpet:{valType:"string",editType:"calc"},z:m.z,a:m.x,a0:m.x0,da:m.dx,b:m.y,b0:m.y0,db:m.dy,text:m.text,hovertext:m.hovertext,transpose:m.transpose,atype:m.xtype,btype:m.ytype,fillcolor:v.fillcolor,autocontour:v.autocontour,ncontours:v.ncontours,contours:{type:e.type,start:e.start,end:e.end,size:e.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:e.showlines,showlabels:e.showlabels,labelfont:e.labelfont,labelformat:e.labelformat,operation:e.operation,value:e.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:v.line.color,width:v.line.width,dash:v.line.dash,smoothing:v.line.smoothing,editType:"plot"},transforms:void 0},k("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../contour/attributes":744,"../heatmap/attributes":801}],767:[function(g,Q,X){var m=g("../../components/colorscale/calc"),v=g("../../lib"),k=g("../heatmap/convert_column_xyz"),x=g("../heatmap/clean_2d_array"),e=g("../heatmap/interp2d"),t=g("../heatmap/find_empties"),r=g("../heatmap/make_bound_array"),l=g("./defaults"),n=g("../carpet/lookup_carpetid"),d=g("../contour/set_contours");Q.exports=function(u,o){var h=o._carpetTrace=n(u,o);if(h&&h.visible&&h.visible!=="legendonly"){if(!o.a||!o.b){var s=u.data[h.index],a=u.data[o.index];a.a||(a.a=s.a),a.b||(a.b=s.b),l(a,o,o._defaultColor,u._fullLayout)}var p=function(c,i){var y,f,w,b,_,T,L,A=i._carpetTrace,I=A.aaxis,P=A.baxis;I._minDtick=0,P._minDtick=0,v.isArray1D(i.z)&&k(i,I,P,"a","b",["z"]),y=i._a=i._a||i.a,b=i._b=i._b||i.b,y=y?I.makeCalcdata(i,"_a"):[],b=b?P.makeCalcdata(i,"_b"):[],f=i.a0||0,w=i.da||1,_=i.b0||0,T=i.db||1,L=i._z=x(i._z||i.z,i.transpose),i._emptypoints=t(L),e(L,i._emptypoints);var S=v.maxRowLength(L),E=i.xtype==="scaled"?"":y,z=r(i,E,f,w,S,I),D=i.ytype==="scaled"?"":b,U=r(i,D,_,T,L.length,P),H={a:z,b:U,z:L};return i.contours.type==="levels"&&i.contours.coloring!=="none"&&m(c,i,{vals:L,containerStr:"",cLetter:"z"}),[H]}(u,o);return d(o,o._z),p}}},{"../../components/colorscale/calc":375,"../../lib":515,"../carpet/lookup_carpetid":717,"../contour/set_contours":763,"../heatmap/clean_2d_array":803,"../heatmap/convert_column_xyz":805,"../heatmap/find_empties":807,"../heatmap/interp2d":810,"../heatmap/make_bound_array":812,"./defaults":768}],768:[function(g,Q,X){var m=g("../../lib"),v=g("../heatmap/xyz_defaults"),k=g("./attributes"),x=g("../contour/constraint_defaults"),e=g("../contour/contours_defaults"),t=g("../contour/style_defaults");Q.exports=function(r,l,n,d){function u(o,h){return m.coerce(r,l,k,o,h)}if(u("carpet"),r.a&&r.b){if(!v(r,l,u,d,"a","b"))return void(l.visible=!1);u("text"),u("contours.type")==="constraint"?x(r,l,u,d,n,{hasHover:!1}):(e(r,l,u,function(o){return m.coerce2(r,l,k,o)}),t(r,l,u,d,{hasHover:!1}))}else l._defaultColor=n,l._length=null}},{"../../lib":515,"../contour/constraint_defaults":749,"../contour/contours_defaults":751,"../contour/style_defaults":765,"../heatmap/xyz_defaults":816,"./attributes":766}],769:[function(g,Q,X){Q.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),colorbar:g("../contour/colorbar"),calc:g("./calc"),plot:g("./plot"),style:g("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:g("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":578,"../contour/colorbar":747,"../contour/style":764,"./attributes":766,"./calc":767,"./defaults":768,"./plot":770}],770:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../carpet/map_1d_array"),k=g("../carpet/makepath"),x=g("../../components/drawing"),e=g("../../lib"),t=g("../contour/make_crossings"),r=g("../contour/find_all_paths"),l=g("../contour/plot"),n=g("../contour/constants"),d=g("../contour/convert_to_constraints"),u=g("../contour/empty_pathinfo"),o=g("../contour/close_boundaries"),h=g("../carpet/lookup_carpetid"),s=g("../carpet/axis_aligned_line");function a(i,y,f){var w=i.getPointAtLength(y),b=i.getPointAtLength(f),_=b.x-w.x,T=b.y-w.y,L=Math.sqrt(_*_+T*T);return[_/L,T/L]}function p(i){var y=Math.sqrt(i[0]*i[0]+i[1]*i[1]);return[i[0]/y,i[1]/y]}function c(i,y){var f=Math.abs(i[0]*y[0]+i[1]*y[1]);return Math.sqrt(1-f*f)/f}Q.exports=function(i,y,f,w){var b=y.xaxis,_=y.yaxis;e.makeTraceGroups(w,f,"contour").each(function(T){var L=m.select(this),A=T[0],I=A.trace,P=I._carpetTrace=h(i,I),S=i.calcdata[P.index][0];if(P.visible&&P.visible!=="legendonly"){var E=A.a,z=A.b,D=I.contours,U=u(D,y,A),H=D.type==="constraint",Y=D._operation,J=H?Y==="="?"lines":"fill":D.coloring,W=[[E[0],z[z.length-1]],[E[E.length-1],z[z.length-1]],[E[E.length-1],z[0]],[E[0],z[0]]];t(U);var Z=1e-8*(E[E.length-1]-E[0]),re=1e-8*(z[z.length-1]-z[0]);r(U,Z,re);var V,B,j,ee,N=U;D.type==="constraint"&&(N=d(U,Y)),function(ie,le){var se,ve,fe,ye,Ae,pe,ge,we,oe;for(se=0;se<ie.length;se++){for(ye=ie[se],Ae=ye.pedgepaths=[],pe=ye.ppaths=[],ve=0;ve<ye.edgepaths.length;ve++){for(oe=ye.edgepaths[ve],ge=[],fe=0;fe<oe.length;fe++)ge[fe]=le(oe[fe]);Ae.push(ge)}for(ve=0;ve<ye.paths.length;ve++){for(oe=ye.paths[ve],we=[],fe=0;fe<oe.length;fe++)we[fe]=le(oe[fe]);pe.push(we)}}}(U,te);var $=[];for(ee=S.clipsegments.length-1;ee>=0;ee--)V=S.clipsegments[ee],B=v([],V.x,b.c2p),j=v([],V.y,_.c2p),B.reverse(),j.reverse(),$.push(k(B,j,V.bicubic));var K="M"+$.join("L")+"Z";(function(ie,le,se,ve,fe,ye){var Ae,pe,ge,we,oe=e.ensureSingle(ie,"g","contourbg").selectAll("path").data(ye!=="fill"||fe?[]:[0]);oe.enter().append("path"),oe.exit().remove();var de=[];for(we=0;we<le.length;we++)Ae=le[we],pe=v([],Ae.x,se.c2p),ge=v([],Ae.y,ve.c2p),de.push(k(pe,ge,Ae.bicubic));oe.attr("d","M"+de.join("L")+"Z").style("stroke","none")})(L,S.clipsegments,b,_,H,J),function(ie,le,se,ve,fe,ye,Ae,pe,ge,we,oe){var de=we==="fill";de&&o(fe,ie.contours);var Te=e.ensureSingle(le,"g","contourfill").selectAll("path").data(de?fe:[]);Te.enter().append("path"),Te.exit().remove(),Te.each(function(Ee){var Me=(Ee.prefixBoundary?oe:"")+function(De,Ie,Oe,Ze,Fe,Pe,ze,Ge){var $e,ot,vt,bt,yt,tt,Ke,mt="",Ft=Ie.edgepaths.map(function(Ue,Xe){return Xe}),Vt=!0,Xt=1e-4*Math.abs(Oe[0][0]-Oe[2][0]),Gt=1e-4*Math.abs(Oe[0][1]-Oe[2][1]);function nr(Ue){return Math.abs(Ue[1]-Oe[0][1])<Gt}function It(Ue){return Math.abs(Ue[1]-Oe[2][1])<Gt}function Be(Ue){return Math.abs(Ue[0]-Oe[0][0])<Xt}function He(Ue){return Math.abs(Ue[0]-Oe[2][0])<Xt}function he(Ue,Xe){var qe,st,it,Tt,Pt="";for(nr(Ue)&&!He(Ue)||It(Ue)&&!Be(Ue)?(Tt=Fe.aaxis,it=s(Fe,Pe,[Ue[0],Xe[0]],.5*(Ue[1]+Xe[1]))):(Tt=Fe.baxis,it=s(Fe,Pe,.5*(Ue[0]+Xe[0]),[Ue[1],Xe[1]])),qe=1;qe<it.length;qe++)for(Pt+=Tt.smoothing?"C":"L",st=0;st<it[qe].length;st++){var rt=it[qe][st];Pt+=[ze.c2p(rt[0]),Ge.c2p(rt[1])]+" "}return Pt}for($e=0,ot=null;Ft.length;){var be=Ie.edgepaths[$e][0];for(ot&&(mt+=he(ot,be)),Ke=x.smoothopen(Ie.edgepaths[$e].map(Ze),Ie.smoothing),mt+=Vt?Ke:Ke.replace(/^M/,"L"),Ft.splice(Ft.indexOf($e),1),ot=Ie.edgepaths[$e][Ie.edgepaths[$e].length-1],yt=-1,bt=0;bt<4;bt++){if(!ot){e.log("Missing end?",$e,Ie);break}for(nr(ot)&&!He(ot)?vt=Oe[1]:Be(ot)?vt=Oe[0]:It(ot)?vt=Oe[3]:He(ot)&&(vt=Oe[2]),tt=0;tt<Ie.edgepaths.length;tt++){var Re=Ie.edgepaths[tt][0];Math.abs(ot[0]-vt[0])<Xt?Math.abs(ot[0]-Re[0])<Xt&&(Re[1]-ot[1])*(vt[1]-Re[1])>=0&&(vt=Re,yt=tt):Math.abs(ot[1]-vt[1])<Gt?Math.abs(ot[1]-Re[1])<Gt&&(Re[0]-ot[0])*(vt[0]-Re[0])>=0&&(vt=Re,yt=tt):e.log("endpt to newendpt is not vert. or horz.",ot,vt,Re)}if(yt>=0)break;mt+=he(ot,vt),ot=vt}if(yt===Ie.edgepaths.length){e.log("unclosed perimeter path");break}$e=yt,(Vt=Ft.indexOf($e)===-1)&&($e=Ft[0],mt+=he(ot,vt)+"Z",ot=null)}for($e=0;$e<Ie.paths.length;$e++)mt+=x.smoothclosed(Ie.paths[$e].map(Ze),Ie.smoothing);return mt}(0,Ee,ye,Ae,pe,ge,se,ve);Me?m.select(this).attr("d",Me).style("stroke","none"):m.select(this).remove()})}(I,L,b,_,N,W,te,P,S,J,K),function(ie,le,se,ve,fe,ye,Ae){var pe=e.ensureSingle(ie,"g","contourlines"),ge=fe.showlines!==!1,we=fe.showlabels,oe=ge&&we,de=l.createLines(pe,ge||we,le),Te=l.createLineClip(pe,oe,se,ve.trace.uid),Ee=ie.selectAll("g.contourlabels").data(we?[0]:[]);if(Ee.exit().remove(),Ee.enter().append("g").classed("contourlabels",!0),we){var Me=ye.xaxis,De=ye.yaxis,Ie=Me._length,Oe=De._length,Ze=[[[0,0],[Ie,0],[Ie,Oe],[0,Oe]]],Fe=[];e.clearLocationCache();var Pe=l.labelFormatter(se,ve),ze=x.tester.append("text").attr("data-notex",1).call(x.font,fe.labelfont),Ge={left:0,right:Ie,center:Ie/2,top:0,bottom:Oe,middle:Oe/2},$e=Math.sqrt(Ie*Ie+Oe*Oe),ot=n.LABELDISTANCE*$e/Math.max(1,le.length/n.LABELINCREASE);de.each(function(vt){var bt=l.calcTextOpts(vt.level,Pe,ze,se);m.select(this).selectAll("path").each(function(yt){var tt=e.getVisibleSegment(this,Ge,bt.height/2);if(tt&&(function(Vt,Xt,Gt,nr,It,Be){for(var He,he=0;he<Gt.pedgepaths.length;he++)Xt===Gt.pedgepaths[he]&&(He=Gt.edgepaths[he]);if(!He)return;var be=It.a[0],Re=It.a[It.a.length-1],Ue=It.b[0],Xe=It.b[It.b.length-1];function qe(rt,ut){var Bt,wt=0;return(Math.abs(rt[0]-be)<.1||Math.abs(rt[0]-Re)<.1)&&(Bt=p(It.dxydb_rough(rt[0],rt[1],.1)),wt=Math.max(wt,Be*c(ut,Bt)/2)),(Math.abs(rt[1]-Ue)<.1||Math.abs(rt[1]-Xe)<.1)&&(Bt=p(It.dxyda_rough(rt[0],rt[1],.1)),wt=Math.max(wt,Be*c(ut,Bt)/2)),wt}var st=a(Vt,0,1),it=a(Vt,nr.total,nr.total-1),Tt=qe(He[0],st),Pt=nr.total-qe(He[He.length-1],it);nr.min<Tt&&(nr.min=Tt),nr.max>Pt&&(nr.max=Pt),nr.len=nr.max-nr.min}(this,yt,vt,tt,Ae,bt.height),!(tt.len<(bt.width+bt.height)*n.LABELMIN)))for(var Ke=Math.min(Math.ceil(tt.len/ot),n.LABELMAX),mt=0;mt<Ke;mt++){var Ft=l.findBestTextLocation(this,tt,bt,Fe,Ge);if(!Ft)break;l.addLabelData(Ft,bt,Fe,Ze)}})}),ze.remove(),l.drawLabels(Ee,Fe,se,Te,oe?Ze:null)}we&&!ge&&de.remove()}(L,U,i,A,D,y,P),x.setClipUrl(L,P._clipPathId,i)}function te(ie){var le=P.ab2xy(ie[0],ie[1],!0);return[b.c2p(le[0]),_.c2p(le[1])]}})}},{"../../components/drawing":389,"../../lib":515,"../carpet/axis_aligned_line":701,"../carpet/lookup_carpetid":717,"../carpet/makepath":718,"../carpet/map_1d_array":719,"../contour/close_boundaries":746,"../contour/constants":748,"../contour/convert_to_constraints":752,"../contour/empty_pathinfo":754,"../contour/find_all_paths":756,"../contour/make_crossings":761,"../contour/plot":762,"@plotly/d3":58}],771:[function(g,Q,X){var m=g("../../components/colorscale/attributes"),v=g("../../plots/template_attributes").hovertemplateAttrs,k=g("../../plots/attributes"),x=g("../scattermapbox/attributes"),e=g("../../lib/extend").extendFlat;Q.exports=e({lon:x.lon,lat:x.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:x.text,hovertext:x.hovertext,hoverinfo:e({},k.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:v(),showlegend:e({},k.showlegend,{dflt:!1})},m("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scattermapbox/attributes":1002}],772:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../../lib").isArrayOrTypedArray,k=g("../../constants/numerical").BADNUM,x=g("../../components/colorscale/calc"),e=g("../../lib")._;Q.exports=function(t,r){for(var l=r._length,n=new Array(l),d=r.z,u=v(d)&&d.length,o=0;o<l;o++){var h=n[o]={},s=r.lon[o],a=r.lat[o];if(h.lonlat=m(s)&&m(a)?[+s,+a]:[k,k],u){var p=d[o];h.z=m(p)?p:k}}return x(t,r,{vals:u?d:[0,1],containerStr:"",cLetter:"z"}),l&&(n[0].t={labels:{lat:e(t,"lat:")+" ",lon:e(t,"lon:")+" "}}),n}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],773:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../../lib"),k=g("../../components/color"),x=g("../../components/colorscale"),e=g("../../constants/numerical").BADNUM,t=g("../../lib/geojson_utils").makeBlank;Q.exports=function(r){var l=r[0].trace,n=l.visible===!0&&l._length!==0,d=l._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:t()};if(!n)return d;var u,o=[],h=l.z,s=l.radius,a=v.isArrayOrTypedArray(h)&&h.length,p=v.isArrayOrTypedArray(s);for(u=0;u<r.length;u++){var c=r[u],i=c.lonlat;if(i[0]!==e){var y={};if(a){var f=c.z;y.z=f!==e?f:0}p&&(y.r=m(s[u])&&s[u]>0?+s[u]:0),o.push({type:"Feature",geometry:{type:"Point",coordinates:i},properties:y})}}var w=x.extractOpts(l),b=w.reversescale?x.flipScale(w.colorscale):w.colorscale,_=b[0][1],T=["interpolate",["linear"],["heatmap-density"],0,k.opacity(_)<1?_:k.addOpacity(_,0)];for(u=1;u<b.length;u++)T.push(b[u][0],b[u][1]);var L=["interpolate",["linear"],["get","z"],w.min,0,w.max,1];return v.extendFlat(d.heatmap.paint,{"heatmap-weight":a?L:1/(w.max-w.min),"heatmap-color":T,"heatmap-radius":p?{type:"identity",property:"r"}:l.radius,"heatmap-opacity":l.opacity}),d.geojson={type:"FeatureCollection",features:o},d.heatmap.layout.visibility="visible",d}},{"../../components/color":367,"../../components/colorscale":379,"../../constants/numerical":491,"../../lib":515,"../../lib/geojson_utils":509,"fast-isnumeric":190}],774:[function(g,Q,X){var m=g("../../lib"),v=g("../../components/colorscale/defaults"),k=g("./attributes");Q.exports=function(x,e,t,r){function l(o,h){return m.coerce(x,e,k,o,h)}var n=l("lon")||[],d=l("lat")||[],u=Math.min(n.length,d.length);u?(e._length=u,l("z"),l("radius"),l("below"),l("text"),l("hovertext"),l("hovertemplate"),v(x,e,r,l,{prefix:"",cLetter:"z"})):e.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":771}],775:[function(g,Q,X){Q.exports=function(m,v){return m.lon=v.lon,m.lat=v.lat,m.z=v.z,m}},{}],776:[function(g,Q,X){var m=g("../../plots/cartesian/axes"),v=g("../scattermapbox/hover").hoverPoints,k=g("../scattermapbox/hover").getExtraText;Q.exports=function(x,e,t){var r=v(x,e,t);if(r){var l=r[0],n=l.cd,d=n[0].trace,u=n[l.index];if(delete l.color,"z"in u){var o=l.subplot.mockAxis;l.z=u.z,l.zLabel=m.tickText(o,o.c2l(u.z),"hover").text}return l.extraText=k(d,u,n[0].t.labels),[l]}}},{"../../plots/cartesian/axes":566,"../scattermapbox/hover":1007}],777:[function(g,Q,X){Q.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),colorbar:g("../heatmap/colorbar"),formatLabels:g("../scattermapbox/format_labels"),calc:g("./calc"),plot:g("./plot"),hoverPoints:g("./hover"),eventData:g("./event_data"),getBelow:function(m,v){for(var k=v.getMapLayers(),x=0;x<k.length;x++){var e=k[x],t=e.id;if(e.type==="symbol"&&typeof t=="string"&&t.indexOf("plotly-")===-1)return t}},moduleType:"trace",name:"densitymapbox",basePlotModule:g("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":622,"../heatmap/colorbar":804,"../scattermapbox/format_labels":1006,"./attributes":771,"./calc":772,"./defaults":774,"./event_data":775,"./hover":776,"./plot":778}],778:[function(g,Q,X){var m=g("./convert"),v=g("../../plots/mapbox/constants").traceLayerPrefix;function k(e,t){this.type="densitymapbox",this.subplot=e,this.uid=t,this.sourceId="source-"+t,this.layerList=[["heatmap",v+t+"-heatmap"]],this.below=null}var x=k.prototype;x.update=function(e){var t=this.subplot,r=this.layerList,l=m(e),n=t.belowLookup["trace-"+this.uid];t.map.getSource(this.sourceId).setData(l.geojson),n!==this.below&&(this._removeLayers(),this._addLayers(l,n),this.below=n);for(var d=0;d<r.length;d++){var u=r[d],o=u[0],h=u[1],s=l[o];t.setOptions(h,"setLayoutProperty",s.layout),s.layout.visibility==="visible"&&t.setOptions(h,"setPaintProperty",s.paint)}},x._addLayers=function(e,t){for(var r=this.subplot,l=this.layerList,n=this.sourceId,d=0;d<l.length;d++){var u=l[d],o=u[0],h=e[o];r.addLayer({type:o,id:u[1],source:n,layout:h.layout,paint:h.paint},t)}},x._removeLayers=function(){for(var e=this.subplot.map,t=this.layerList,r=t.length-1;r>=0;r--)e.removeLayer(t[r][1])},x.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},Q.exports=function(e,t){var r=t[0].trace,l=new k(e,r.uid),n=l.sourceId,d=m(t),u=l.below=e.belowLookup["trace-"+r.uid];return e.map.addSource(n,{type:"geojson",data:d.geojson}),l._addLayers(d,u),l}},{"../../plots/mapbox/constants":620,"./convert":773}],779:[function(g,Q,X){var m=g("../../lib");Q.exports=function(v,k){for(var x=0;x<v.length;x++)v[x].i=x;m.mergeArray(k.text,v,"tx"),m.mergeArray(k.hovertext,v,"htx");var e=k.marker;if(e){m.mergeArray(e.opacity,v,"mo"),m.mergeArray(e.color,v,"mc");var t=e.line;t&&(m.mergeArray(t.color,v,"mlc"),m.mergeArrayCastPositive(t.width,v,"mlw"))}}},{"../../lib":515}],780:[function(g,Q,X){var m,v=g("../bar/attributes"),k=g("../scatter/attributes").line,x=g("../../plots/attributes"),e=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=g("../../plots/template_attributes").hovertemplateAttrs,r=g("../../plots/template_attributes").texttemplateAttrs,l=g("./constants"),n=g("../../lib/extend").extendFlat,d=g("../../components/color");Q.exports={x:v.x,x0:v.x0,dx:v.dx,y:v.y,y0:v.y0,dy:v.dy,xperiod:v.xperiod,yperiod:v.yperiod,xperiod0:v.xperiod0,yperiod0:v.yperiod0,xperiodalignment:v.xperiodalignment,yperiodalignment:v.yperiodalignment,xhoverformat:e("x"),yhoverformat:e("y"),hovertext:v.hovertext,hovertemplate:t({},{keys:l.eventDataKeys}),hoverinfo:n({},x.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:r({editType:"plot"},{keys:l.eventDataKeys.concat(["label","value"])}),text:v.text,textposition:v.textposition,insidetextanchor:n({},v.insidetextanchor,{dflt:"middle"}),textangle:n({},v.textangle,{dflt:0}),textfont:v.textfont,insidetextfont:v.insidetextfont,outsidetextfont:v.outsidetextfont,constraintext:v.constraintext,cliponaxis:v.cliponaxis,orientation:n({},v.orientation,{}),offset:n({},v.offset,{arrayOk:!1}),width:n({},v.width,{arrayOk:!1}),marker:(m=n({},v.marker),delete m.pattern,m),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:n({},k.color,{dflt:d.defaultLine}),width:n({},k.width,{dflt:0,editType:"plot"}),dash:k.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:v.offsetgroup,alignmentgroup:v.alignmentgroup}},{"../../components/color":367,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936,"./constants":782}],781:[function(g,Q,X){var m=g("../../plots/cartesian/axes"),v=g("../../plots/cartesian/align_period"),k=g("./arrays_to_calcdata"),x=g("../scatter/calc_selection"),e=g("../../constants/numerical").BADNUM;function t(r){return r===e?0:r}Q.exports=function(r,l){var n,d,u,o,h,s,a,p,c=m.getFromId(r,l.xaxis||"x"),i=m.getFromId(r,l.yaxis||"y");l.orientation==="h"?(n=c.makeCalcdata(l,"x"),u=i.makeCalcdata(l,"y"),o=v(l,i,"y",u),h=!!l.yperiodalignment,s="y"):(n=i.makeCalcdata(l,"y"),u=c.makeCalcdata(l,"x"),o=v(l,c,"x",u),h=!!l.xperiodalignment,s="x"),d=o.vals;var y,f=Math.min(d.length,n.length),w=new Array(f);for(l._base=[],a=0;a<f;a++){n[a]<0&&(n[a]=e);var b=!1;n[a]!==e&&a+1<f&&n[a+1]!==e&&(b=!0),p=w[a]={p:d[a],s:n[a],cNext:b},l._base[a]=-.5*p.s,h&&(w[a].orig_p=u[a],w[a][s+"End"]=o.ends[a],w[a][s+"Start"]=o.starts[a]),l.ids&&(p.id=String(l.ids[a])),a===0&&(w[0].vTotal=0),w[0].vTotal+=t(p.s),p.begR=t(p.s)/t(w[0].s)}for(a=0;a<f;a++)(p=w[a]).s!==e&&(p.sumR=p.s/w[0].vTotal,p.difR=y!==void 0?p.s/y:1,y=p.s);return k(w,l),x(w,l),w}},{"../../constants/numerical":491,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938,"./arrays_to_calcdata":779}],782:[function(g,Q,X){Q.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],783:[function(g,Q,X){var m=g("../bar/cross_trace_calc").setGroupPositions;Q.exports=function(v,k){var x,e,t=v._fullLayout,r=v._fullData,l=v.calcdata,n=k.xaxis,d=k.yaxis,u=[],o=[],h=[];for(e=0;e<r.length;e++){var s=r[e],a=s.orientation==="h";s.visible===!0&&s.xaxis===n._id&&s.yaxis===d._id&&s.type==="funnel"&&(x=l[e],a?h.push(x):o.push(x),u.push(x))}var p={mode:t.funnelmode,norm:t.funnelnorm,gap:t.funnelgap,groupgap:t.funnelgroupgap};for(m(v,n,d,o,p),m(v,d,n,h,p),e=0;e<u.length;e++){x=u[e];for(var c=0;c<x.length;c++)c+1<x.length&&(x[c].nextP0=x[c+1].p0,x[c].nextS0=x[c+1].s0,x[c].nextP1=x[c+1].p1,x[c].nextS1=x[c+1].s1)}}},{"../bar/cross_trace_calc":660}],784:[function(g,Q,X){var m=g("../../lib"),v=g("../bar/defaults").handleGroupingDefaults,k=g("../bar/defaults").handleText,x=g("../scatter/xy_defaults"),e=g("../scatter/period_defaults"),t=g("./attributes"),r=g("../../components/color");Q.exports={supplyDefaults:function(l,n,d,u){function o(p,c){return m.coerce(l,n,t,p,c)}if(x(l,n,u,o)){e(l,n,u,o),o("xhoverformat"),o("yhoverformat"),o("orientation",n.y&&!n.x?"v":"h"),o("offset"),o("width");var h=o("text");o("hovertext"),o("hovertemplate");var s=o("textposition");k(l,n,u,o,s,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),n.textposition==="none"||n.texttemplate||o("textinfo",Array.isArray(h)?"text+value":"value");var a=o("marker.color",d);o("marker.line.color",r.defaultLine),o("marker.line.width"),o("connector.visible")&&(o("connector.fillcolor",function(p){var c=m.isArrayOrTypedArray(p)?"#000":p;return r.addOpacity(c,.5*r.opacity(c))}(a)),o("connector.line.width")&&(o("connector.line.color"),o("connector.line.dash")))}else n.visible=!1},crossTraceDefaults:function(l,n){var d,u;function o(s){return m.coerce(u._input,u,t,s)}if(n.funnelmode==="group")for(var h=0;h<l.length;h++)d=(u=l[h])._input,v(d,u,n,o)}}},{"../../components/color":367,"../../lib":515,"../bar/defaults":661,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":780}],785:[function(g,Q,X){Q.exports=function(m,v){return m.x="xVal"in v?v.xVal:v.x,m.y="yVal"in v?v.yVal:v.y,"percentInitial"in v&&(m.percentInitial=v.percentInitial),"percentPrevious"in v&&(m.percentPrevious=v.percentPrevious),"percentTotal"in v&&(m.percentTotal=v.percentTotal),v.xa&&(m.xaxis=v.xa),v.ya&&(m.yaxis=v.ya),m}},{}],786:[function(g,Q,X){var m=g("../../components/color").opacity,v=g("../bar/hover").hoverOnBars,k=g("../../lib").formatPercent;Q.exports=function(x,e,t,r,l){var n=v(x,e,t,r,l);if(n){var d=n.cd,u=d[0].trace,o=u.orientation==="h",h=d[n.index];n[(o?"x":"y")+"LabelVal"]=h.s,n.percentInitial=h.begR,n.percentInitialLabel=k(h.begR,1),n.percentPrevious=h.difR,n.percentPreviousLabel=k(h.difR,1),n.percentTotal=h.sumR,n.percentTotalLabel=k(h.sumR,1);var s=h.hi||u.hoverinfo,a=[];if(s&&s!=="none"&&s!=="skip"){var p=s==="all",c=s.split("+"),i=function(y){return p||c.indexOf(y)!==-1};i("percent initial")&&a.push(n.percentInitialLabel+" of initial"),i("percent previous")&&a.push(n.percentPreviousLabel+" of previous"),i("percent total")&&a.push(n.percentTotalLabel+" of total")}return n.extraText=a.join("<br>"),n.color=function(y,f){var w=y.marker,b=f.mc||w.color,_=f.mlc||w.line.color,T=f.mlw||w.line.width;if(m(b))return b;if(m(_)&&T)return _}(u,h),[n]}}},{"../../components/color":367,"../../lib":515,"../bar/hover":664}],787:[function(g,Q,X){Q.exports={attributes:g("./attributes"),layoutAttributes:g("./layout_attributes"),supplyDefaults:g("./defaults").supplyDefaults,crossTraceDefaults:g("./defaults").crossTraceDefaults,supplyLayoutDefaults:g("./layout_defaults"),calc:g("./calc"),crossTraceCalc:g("./cross_trace_calc"),plot:g("./plot"),style:g("./style").style,hoverPoints:g("./hover"),eventData:g("./event_data"),selectPoints:g("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:g("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../bar/select":669,"./attributes":780,"./calc":781,"./cross_trace_calc":783,"./defaults":784,"./event_data":785,"./hover":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(g,Q,X){Q.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],789:[function(g,Q,X){var m=g("../../lib"),v=g("./layout_attributes");Q.exports=function(k,x,e){var t=!1;function r(d,u){return m.coerce(k,x,v,d,u)}for(var l=0;l<e.length;l++){var n=e[l];if(n.visible&&n.type==="funnel"){t=!0;break}}t&&(r("funnelmode"),r("funnelgap",.2),r("funnelgroupgap"))}},{"../../lib":515,"./layout_attributes":788}],790:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../lib"),k=g("../../components/drawing"),x=g("../../constants/numerical").BADNUM,e=g("../bar/plot"),t=g("../bar/uniform_text").clearMinTextSize;function r(l,n,d,u){var o=[],h=[],s=u?n:d,a=u?d:n;return o[0]=s.c2p(l.s0,!0),h[0]=a.c2p(l.p0,!0),o[1]=s.c2p(l.s1,!0),h[1]=a.c2p(l.p1,!0),o[2]=s.c2p(l.nextS0,!0),h[2]=a.c2p(l.nextP0,!0),o[3]=s.c2p(l.nextS1,!0),h[3]=a.c2p(l.nextP1,!0),u?[o,h]:[h,o]}Q.exports=function(l,n,d,u){var o=l._fullLayout;t("funnel",o),function(h,s,a,p){var c=s.xaxis,i=s.yaxis;v.makeTraceGroups(p,a,"trace bars").each(function(y){var f=m.select(this),w=y[0].trace,b=v.ensureSingle(f,"g","regions");if(w.connector&&w.connector.visible){var _=w.orientation==="h",T=b.selectAll("g.region").data(v.identity);T.enter().append("g").classed("region",!0),T.exit().remove();var L=T.size();T.each(function(A,I){if(I===L-1||A.cNext){var P=r(A,c,i,_),S=P[0],E=P[1],z="";S[0]!==x&&E[0]!==x&&S[1]!==x&&E[1]!==x&&S[2]!==x&&E[2]!==x&&S[3]!==x&&E[3]!==x&&(z+=_?"M"+S[0]+","+E[1]+"L"+S[2]+","+E[2]+"H"+S[3]+"L"+S[1]+","+E[1]+"Z":"M"+S[1]+","+E[1]+"L"+S[2]+","+E[3]+"V"+E[2]+"L"+S[1]+","+E[0]+"Z"),z===""&&(z="M0,0Z"),v.ensureSingle(m.select(this),"path").attr("d",z).call(k.setClipUrl,s.layerClipId,h)}})}else b.remove()})}(l,n,d,u),function(h,s,a,p){var c=s.xaxis,i=s.yaxis;v.makeTraceGroups(p,a,"trace bars").each(function(y){var f=m.select(this),w=y[0].trace,b=v.ensureSingle(f,"g","lines");if(w.connector&&w.connector.visible&&w.connector.line.width){var _=w.orientation==="h",T=b.selectAll("g.line").data(v.identity);T.enter().append("g").classed("line",!0),T.exit().remove();var L=T.size();T.each(function(A,I){if(I===L-1||A.cNext){var P=r(A,c,i,_),S=P[0],E=P[1],z="";S[3]!==void 0&&E[3]!==void 0&&(_?(z+="M"+S[0]+","+E[1]+"L"+S[2]+","+E[2],z+="M"+S[1]+","+E[1]+"L"+S[3]+","+E[2]):(z+="M"+S[1]+","+E[1]+"L"+S[2]+","+E[3],z+="M"+S[1]+","+E[0]+"L"+S[2]+","+E[2])),z===""&&(z="M0,0Z"),v.ensureSingle(m.select(this),"path").attr("d",z).call(k.setClipUrl,s.layerClipId,h)}})}else b.remove()})}(l,n,d,u),e.plot(l,n,d,u,{mode:o.funnelmode,norm:o.funnelmode,gap:o.funnelgap,groupgap:o.funnelgroupgap})}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../bar/plot":668,"../bar/uniform_text":673,"@plotly/d3":58}],791:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../components/drawing"),k=g("../../components/color"),x=g("../../constants/interactions").DESELECTDIM,e=g("../bar/style"),t=g("../bar/uniform_text").resizeText,r=e.styleTextPoints;Q.exports={style:function(l,n,d){var u=d||m.select(l).selectAll("g.funnellayer").selectAll("g.trace");t(l,u,"funnel"),u.style("opacity",function(o){return o[0].trace.opacity}),u.each(function(o){var h=m.select(this),s=o[0].trace;h.selectAll(".point > path").each(function(a){if(!a.isBlank){var p=s.marker;m.select(this).call(k.fill,a.mc||p.color).call(k.stroke,a.mlc||p.line.color).call(v.dashLine,p.line.dash,a.mlw||p.line.width).style("opacity",s.selectedpoints&&!a.selected?x:1)}}),r(h,s,l),h.selectAll(".regions").each(function(){m.select(this).selectAll("path").style("stroke-width",0).call(k.fill,s.connector.fillcolor)}),h.selectAll(".lines").each(function(){var a=s.connector.line;v.lineGroupStyle(m.select(this).selectAll("path"),a.width,a.color,a.dash)})})}}},{"../../components/color":367,"../../components/drawing":389,"../../constants/interactions":490,"../bar/style":671,"../bar/uniform_text":673,"@plotly/d3":58}],792:[function(g,Q,X){var m=g("../pie/attributes"),v=g("../../plots/attributes"),k=g("../../plots/domain").attributes,x=g("../../plots/template_attributes").hovertemplateAttrs,e=g("../../plots/template_attributes").texttemplateAttrs,t=g("../../lib/extend").extendFlat;Q.exports={labels:m.labels,label0:m.label0,dlabel:m.dlabel,values:m.values,marker:{colors:m.marker.colors,line:{color:t({},m.marker.line.color,{dflt:null}),width:t({},m.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:m.text,hovertext:m.hovertext,scalegroup:t({},m.scalegroup,{}),textinfo:t({},m.textinfo,{flags:["label","text","value","percent"]}),texttemplate:e({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:t({},v.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:x({},{keys:["label","color","value","text","percent"]}),textposition:t({},m.textposition,{values:["inside","none"],dflt:"inside"}),textfont:m.textfont,insidetextfont:m.insidetextfont,title:{text:m.title.text,font:m.title.font,position:t({},m.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:k({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910}],793:[function(g,Q,X){var m=g("../../plots/plots");X.name="funnelarea",X.plot=function(v,k,x,e){m.plotBasePlot(X.name,v,k,x,e)},X.clean=function(v,k,x,e){m.cleanBasePlot(X.name,v,k,x,e)}},{"../../plots/plots":628}],794:[function(g,Q,X){var m=g("../pie/calc");Q.exports={calc:function(v,k){return m.calc(v,k)},crossTraceCalc:function(v){m.crossTraceCalc(v,{type:"funnelarea"})}}},{"../pie/calc":912}],795:[function(g,Q,X){var m=g("../../lib"),v=g("./attributes"),k=g("../../plots/domain").defaults,x=g("../bar/defaults").handleText,e=g("../pie/defaults").handleLabelsAndValues;Q.exports=function(t,r,l,n){function d(y,f){return m.coerce(t,r,v,y,f)}var u=d("labels"),o=d("values"),h=e(u,o),s=h.len;if(r._hasLabels=h.hasLabels,r._hasValues=h.hasValues,!r._hasLabels&&r._hasValues&&(d("label0"),d("dlabel")),s){r._length=s,d("marker.line.width")&&d("marker.line.color",n.paper_bgcolor),d("marker.colors"),d("scalegroup");var a,p=d("text"),c=d("texttemplate");if(c||(a=d("textinfo",Array.isArray(p)?"text+percent":"percent")),d("hovertext"),d("hovertemplate"),c||a&&a!=="none"){var i=d("textposition");x(t,r,n,d,i,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}k(r,n,d),d("title.text")&&(d("title.position"),m.coerceFont(d,"title.font",n.font)),d("aspectratio"),d("baseratio")}else r.visible=!1}},{"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"../pie/defaults":913,"./attributes":792}],796:[function(g,Q,X){Q.exports={moduleType:"trace",name:"funnelarea",basePlotModule:g("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:g("./attributes"),layoutAttributes:g("./layout_attributes"),supplyDefaults:g("./defaults"),supplyLayoutDefaults:g("./layout_defaults"),calc:g("./calc").calc,crossTraceCalc:g("./calc").crossTraceCalc,plot:g("./plot"),style:g("./style"),styleOne:g("../pie/style_one"),meta:{}}},{"../pie/style_one":921,"./attributes":792,"./base_plot":793,"./calc":794,"./defaults":795,"./layout_attributes":797,"./layout_defaults":798,"./plot":799,"./style":800}],797:[function(g,Q,X){var m=g("../pie/layout_attributes").hiddenlabels;Q.exports={hiddenlabels:m,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":917}],798:[function(g,Q,X){var m=g("../../lib"),v=g("./layout_attributes");Q.exports=function(k,x){function e(t,r){return m.coerce(k,x,v,t,r)}e("hiddenlabels"),e("funnelareacolorway",x.colorway),e("extendfunnelareacolors")}},{"../../lib":515,"./layout_attributes":797}],799:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../components/drawing"),k=g("../../lib"),x=k.strScale,e=k.strTranslate,t=g("../../lib/svg_text_utils"),r=g("../bar/plot").toMoveInsideBar,l=g("../bar/uniform_text"),n=l.recordMinTextSize,d=l.clearMinTextSize,u=g("../pie/helpers"),o=g("../pie/plot"),h=o.attachFxHandlers,s=o.determineInsideTextFont,a=o.layoutAreas,p=o.prerenderTitles,c=o.positionTitleOutside,i=o.formatSliceLabel;function y(f,w){return"l"+(w[0]-f[0])+","+(w[1]-f[1])}Q.exports=function(f,w){var b=f._context.staticPlot,_=f._fullLayout;d("funnelarea",_),p(w,f),a(w,_._size),k.makeTraceGroups(_._funnelarealayer,w,"trace").each(function(T){var L=m.select(this),A=T[0],I=A.trace;(function(P){if(!P.length)return;var S=P[0],E=S.trace,z=E.aspectratio,D=E.baseratio;D>.999&&(D=.999);var U,H=Math.pow(D,2),Y=S.vTotal,J=Y,W=Y*H/(1-H)/Y;function Z(){var we,oe={x:we=Math.sqrt(W),y:-we};return[oe.x,oe.y]}var re,V,B=[];for(B.push(Z()),re=P.length-1;re>-1;re--)if(!(V=P[re]).hidden){var j=V.v/J;W+=j,B.push(Z())}var ee=1/0,N=-1/0;for(re=0;re<B.length;re++)U=B[re],ee=Math.min(ee,U[1]),N=Math.max(N,U[1]);for(re=0;re<B.length;re++)B[re][1]-=(N+ee)/2;var $=B[B.length-1][0],K=S.r,te=(N-ee)/2,ie=K/$,le=K/te*z;for(S.r=le*te,re=0;re<B.length;re++)B[re][0]*=ie,B[re][1]*=le;var se=[-(U=B[0])[0],U[1]],ve=[U[0],U[1]],fe=0;for(re=P.length-1;re>-1;re--)if(!(V=P[re]).hidden){var ye=B[fe+=1][0],Ae=B[fe][1];V.TL=[-ye,Ae],V.TR=[ye,Ae],V.BL=se,V.BR=ve,V.pxmid=(pe=V.TR,ge=V.BR,[.5*(pe[0]+ge[0]),.5*(pe[1]+ge[1])]),se=V.TL,ve=V.TR}var pe,ge})(T),L.each(function(){var P=m.select(this).selectAll("g.slice").data(T);P.enter().append("g").classed("slice",!0),P.exit().remove(),P.each(function(E,z){if(E.hidden)m.select(this).selectAll("path,g").remove();else{E.pointNumber=E.i,E.curveNumber=I.index;var D=A.cx,U=A.cy,H=m.select(this),Y=H.selectAll("path.surface").data([E]);Y.enter().append("path").classed("surface",!0).style({"pointer-events":b?"none":"all"}),H.call(h,f,T);var J="M"+(D+E.TR[0])+","+(U+E.TR[1])+y(E.TR,E.BR)+y(E.BR,E.BL)+y(E.BL,E.TL)+"Z";Y.attr("d",J),i(f,E,A);var W=u.castOption(I.textposition,E.pts),Z=H.selectAll("g.slicetext").data(E.text&&W!=="none"?[0]:[]);Z.enter().append("g").classed("slicetext",!0),Z.exit().remove(),Z.each(function(){var re=k.ensureSingle(m.select(this),"text","",function(te){te.attr("data-notex",1)}),V=k.ensureUniformFontSize(f,s(I,E,_.font));re.text(E.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(v.font,V).call(t.convertToTspans,f);var B,j,ee,N=v.bBox(re.node()),$=Math.min(E.BL[1],E.BR[1])+U,K=Math.max(E.TL[1],E.TR[1])+U;j=Math.max(E.TL[0],E.BL[0])+D,ee=Math.min(E.TR[0],E.BR[0])+D,(B=r(j,ee,$,K,N,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=V.size,n(I.type,B,_),T[z].transform=B,k.setTransormAndDisplay(re,B)})}});var S=m.select(this).selectAll("g.titletext").data(I.title.text?[0]:[]);S.enter().append("g").classed("titletext",!0),S.exit().remove(),S.each(function(){var E=k.ensureSingle(m.select(this),"text","",function(U){U.attr("data-notex",1)}),z=I.title.text;I._meta&&(z=k.templateString(z,I._meta)),E.text(z).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(v.font,I.title.font).call(t.convertToTspans,f);var D=c(A,_._size);E.attr("transform",e(D.x,D.y)+x(Math.min(1,D.scale))+e(D.tx,D.ty))})})})}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../bar/plot":668,"../bar/uniform_text":673,"../pie/helpers":915,"../pie/plot":919,"@plotly/d3":58}],800:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../pie/style_one"),k=g("../bar/uniform_text").resizeText;Q.exports=function(x){var e=x._fullLayout._funnelarealayer.selectAll(".trace");k(x,e,"funnelarea"),e.each(function(t){var r=t[0].trace,l=m.select(this);l.style({opacity:r.opacity}),l.selectAll("path.surface").each(function(n){m.select(this).call(v,n,r)})})}},{"../bar/uniform_text":673,"../pie/style_one":921,"@plotly/d3":58}],801:[function(g,Q,X){var m=g("../scatter/attributes"),v=g("../../plots/attributes"),k=g("../../plots/font_attributes"),x=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=g("../../plots/template_attributes").hovertemplateAttrs,t=g("../../plots/template_attributes").texttemplateAttrs,r=g("../../components/colorscale/attributes"),l=g("../../lib/extend").extendFlat;Q.exports=l({z:{valType:"data_array",editType:"calc"},x:l({},m.x,{impliedEdits:{xtype:"array"}}),x0:l({},m.x0,{impliedEdits:{xtype:"scaled"}}),dx:l({},m.dx,{impliedEdits:{xtype:"scaled"}}),y:l({},m.y,{impliedEdits:{ytype:"array"}}),y0:l({},m.y0,{impliedEdits:{ytype:"scaled"}}),dy:l({},m.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:l({},m.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:l({},m.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:l({},m.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:l({},m.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:l({},m.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:l({},m.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z",1),hovertemplate:e(),texttemplate:t({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:k({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:l({},v.showlegend,{dflt:!1})},{transforms:void 0},r("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../scatter/attributes":936}],802:[function(g,Q,X){var m=g("../../registry"),v=g("../../lib"),k=g("../../plots/cartesian/axes"),x=g("../../plots/cartesian/align_period"),e=g("../histogram2d/calc"),t=g("../../components/colorscale/calc"),r=g("./convert_column_xyz"),l=g("./clean_2d_array"),n=g("./interp2d"),d=g("./find_empties"),u=g("./make_bound_array"),o=g("../../constants/numerical").BADNUM;function h(s){for(var a=[],p=s.length,c=0;c<p;c++){var i=s[c];i!==o&&a.push(i)}return a}Q.exports=function(s,a){var p,c,i,y,f,w,b,_,T,L,A,I=k.getFromId(s,a.xaxis||"x"),P=k.getFromId(s,a.yaxis||"y"),S=m.traceIs(a,"contour"),E=m.traceIs(a,"histogram"),z=m.traceIs(a,"gl2d"),D=S?"best":a.zsmooth;if(I._minDtick=0,P._minDtick=0,E)y=(A=e(s,a)).orig_x,p=A.x,c=A.x0,i=A.dx,_=A.orig_y,f=A.y,w=A.y0,b=A.dy,T=A.z;else{var U=a.z;v.isArray1D(U)?(r(a,I,P,"x","y",["z"]),p=a._x,f=a._y,U=a._z):(y=a.x?I.makeCalcdata(a,"x"):[],_=a.y?P.makeCalcdata(a,"y"):[],p=x(a,I,"x",y).vals,f=x(a,P,"y",_).vals,a._x=p,a._y=f),c=a.x0,i=a.dx,w=a.y0,b=a.dy,T=l(U,a,I,P)}function H(K){D=a._input.zsmooth=a.zsmooth=!1,v.warn('cannot use zsmooth: "fast": '+K)}if((I.rangebreaks||P.rangebreaks)&&(T=function(K,te,ie){for(var le=[],se=-1,ve=0;ve<ie.length;ve++)if(te[ve]!==o){se++,le[se]=[];for(var fe=0;fe<ie[ve].length;fe++)K[fe]!==o&&le[se].push(ie[ve][fe])}return le}(p,f,T),E||(p=h(p),f=h(f),a._x=p,a._y=f)),E||!S&&!a.connectgaps||(a._emptypoints=d(T),n(T,a._emptypoints)),D==="fast"){if(I.type==="log"||P.type==="log")H("log axis found");else if(!E){if(p.length){var Y=(p[p.length-1]-p[0])/(p.length-1),J=Math.abs(Y/100);for(L=0;L<p.length-1;L++)if(Math.abs(p[L+1]-p[L]-Y)>J){H("x scale is not linear");break}}if(f.length&&D==="fast"){var W=(f[f.length-1]-f[0])/(f.length-1),Z=Math.abs(W/100);for(L=0;L<f.length-1;L++)if(Math.abs(f[L+1]-f[L]-W)>Z){H("y scale is not linear");break}}}}var re=v.maxRowLength(T),V=a.xtype==="scaled"?"":p,B=u(a,V,c,i,re,I),j=a.ytype==="scaled"?"":f,ee=u(a,j,w,b,T.length,P);z||(a._extremes[I._id]=k.findExtremes(I,B),a._extremes[P._id]=k.findExtremes(P,ee));var N={x:B,y:ee,z:T,text:a._text||a.text,hovertext:a._hovertext||a.hovertext};if(a.xperiodalignment&&y&&(N.orig_x=y),a.yperiodalignment&&_&&(N.orig_y=_),V&&V.length===B.length-1&&(N.xCenter=V),j&&j.length===ee.length-1&&(N.yCenter=j),E&&(N.xRanges=A.xRanges,N.yRanges=A.yRanges,N.pts=A.pts),S||t(s,a,{vals:T,cLetter:"z"}),S&&a.contours&&a.contours.coloring==="heatmap"){var $={type:a.type==="contour"?"heatmap":"histogram2d",xcalendar:a.xcalendar,ycalendar:a.ycalendar};N.xfill=u($,V,c,i,re,I),N.yfill=u($,j,w,b,T.length,P)}return[N]}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../../registry":647,"../histogram2d/calc":835,"./clean_2d_array":803,"./convert_column_xyz":805,"./find_empties":807,"./interp2d":810,"./make_bound_array":812}],803:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../../lib"),k=g("../../constants/numerical").BADNUM;Q.exports=function(x,e,t,r){var l,n,d,u,o,h;function s(f){if(m(f))return+f}if(e&&e.transpose){for(l=0,o=0;o<x.length;o++)l=Math.max(l,x[o].length);if(l===0)return!1;d=function(f){return f.length},u=function(f,w,b){return(f[b]||[])[w]}}else l=x.length,d=function(f,w){return f[w].length},u=function(f,w,b){return(f[w]||[])[b]};var a=function(f,w,b){return w===k||b===k?k:u(f,w,b)};function p(f){if(e&&e.type!=="carpet"&&e.type!=="contourcarpet"&&f&&f.type==="category"&&e["_"+f._id.charAt(0)].length){var w=f._id.charAt(0),b={},_=e["_"+w+"CategoryMap"]||e[w];for(o=0;o<_.length;o++)b[_[o]]=o;return function(T){var L=b[f._categories[T]];return L+1?L:k}}return v.identity}var c=p(t),i=p(r);r&&r.type==="category"&&(l=r._categories.length);var y=new Array(l);for(o=0;o<l;o++)for(n=t&&t.type==="category"?t._categories.length:d(x,o),y[o]=new Array(n),h=0;h<n;h++)y[o][h]=s(a(x,i(o),c(h)));return y}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],804:[function(g,Q,X){Q.exports={min:"zmin",max:"zmax"}},{}],805:[function(g,Q,X){var m=g("../../lib"),v=g("../../constants/numerical").BADNUM,k=g("../../plots/cartesian/align_period");Q.exports=function(x,e,t,r,l,n){var d=x._length,u=e.makeCalcdata(x,r),o=t.makeCalcdata(x,l);u=k(x,e,r,u).vals,o=k(x,t,l,o).vals;var h,s,a,p,c=x.text,i=c!==void 0&&m.isArray1D(c),y=x.hovertext,f=y!==void 0&&m.isArray1D(y),w=m.distinctVals(u),b=w.vals,_=m.distinctVals(o),T=_.vals,L=[],A=T.length,I=b.length;for(h=0;h<n.length;h++)L[h]=m.init2dArray(A,I);i&&(a=m.init2dArray(A,I)),f&&(p=m.init2dArray(A,I));var P=m.init2dArray(A,I);for(h=0;h<d;h++)if(u[h]!==v&&o[h]!==v){var S=m.findBin(u[h]+w.minDiff/2,b),E=m.findBin(o[h]+_.minDiff/2,T);for(s=0;s<n.length;s++){var z=x[n[s]];L[s][E][S]=z[h],P[E][S]=h}i&&(a[E][S]=c[h]),f&&(p[E][S]=y[h])}for(x["_"+r]=b,x["_"+l]=T,s=0;s<n.length;s++)x["_"+n[s]]=L[s];i&&(x._text=a),f&&(x._hovertext=p),e&&e.type==="category"&&(x["_"+r+"CategoryMap"]=b.map(function(D){return e._categories[D]})),t&&t.type==="category"&&(x["_"+l+"CategoryMap"]=T.map(function(D){return t._categories[D]})),x._after2before=P}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563}],806:[function(g,Q,X){var m=g("../../lib"),v=g("./xyz_defaults"),k=g("./label_defaults"),x=g("../scatter/period_defaults"),e=g("./style_defaults"),t=g("../../components/colorscale/defaults"),r=g("./attributes");Q.exports=function(l,n,d,u){function o(h,s){return m.coerce(l,n,r,h,s)}v(l,n,o,u)?(x(l,n,u,o),o("xhoverformat"),o("yhoverformat"),o("text"),o("hovertext"),o("hovertemplate"),k(o,u),e(l,n,o,u),o("hoverongaps"),o("connectgaps",m.isArray1D(n.z)&&n.zsmooth!==!1),t(l,n,u,o,{prefix:"",cLetter:"z"})):n.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"../scatter/period_defaults":956,"./attributes":801,"./label_defaults":811,"./style_defaults":815,"./xyz_defaults":816}],807:[function(g,Q,X){var m=g("../../lib").maxRowLength;Q.exports=function(v){var k,x,e,t,r,l,n,d,u=[],o={},h=[],s=v[0],a=[],p=[0,0,0],c=m(v);for(x=0;x<v.length;x++)for(k=a,a=s,s=v[x+1]||[],e=0;e<c;e++)a[e]===void 0&&((l=(a[e-1]!==void 0?1:0)+(a[e+1]!==void 0?1:0)+(k[e]!==void 0?1:0)+(s[e]!==void 0?1:0))?(x===0&&l++,e===0&&l++,x===v.length-1&&l++,e===a.length-1&&l++,l<4&&(o[[x,e]]=[x,e,l]),u.push([x,e,l])):h.push([x,e]));for(;h.length;){for(n={},d=!1,r=h.length-1;r>=0;r--)(l=((o[[(x=(t=h[r])[0])-1,e=t[1]]]||p)[2]+(o[[x+1,e]]||p)[2]+(o[[x,e-1]]||p)[2]+(o[[x,e+1]]||p)[2])/20)&&(n[t]=[x,e,l],h.splice(r,1),d=!0);if(!d)throw"findEmpties iterated with no new neighbors";for(t in n)o[t]=n[t],u.push(n[t])}return u.sort(function(i,y){return y[2]-i[2]})}},{"../../lib":515}],808:[function(g,Q,X){var m=g("../../components/fx"),v=g("../../lib"),k=g("../../plots/cartesian/axes"),x=g("../../components/colorscale").extractOpts;Q.exports=function(e,t,r,l,n){n||(n={});var d,u,o,h,s=n.isContour,a=e.cd[0],p=a.trace,c=e.xa,i=e.ya,y=a.x,f=a.y,w=a.z,b=a.xCenter,_=a.yCenter,T=a.zmask,L=p.zhoverformat,A=y,I=f;if(e.index!==!1){try{o=Math.round(e.index[1]),h=Math.round(e.index[0])}catch{return void v.error("Error hovering on heatmap, pointNumber must be [row,col], found:",e.index)}if(o<0||o>=w[0].length||h<0||h>w.length)return}else{if(m.inbox(t-y[0],t-y[y.length-1],0)>0||m.inbox(r-f[0],r-f[f.length-1],0)>0)return;if(s){var P;for(A=[2*y[0]-y[1]],P=1;P<y.length;P++)A.push((y[P]+y[P-1])/2);for(A.push([2*y[y.length-1]-y[y.length-2]]),I=[2*f[0]-f[1]],P=1;P<f.length;P++)I.push((f[P]+f[P-1])/2);I.push([2*f[f.length-1]-f[f.length-2]])}o=Math.max(0,Math.min(A.length-2,v.findBin(t,A))),h=Math.max(0,Math.min(I.length-2,v.findBin(r,I)))}var S,E,z=c.c2p(y[o]),D=c.c2p(y[o+1]),U=i.c2p(f[h]),H=i.c2p(f[h+1]);s?(S=a.orig_x||y,E=a.orig_y||f,D=z,d=S[o],H=U,u=E[h]):(S=a.orig_x||b||y,E=a.orig_y||_||f,d=b?S[o]:(S[o]+S[o+1])/2,u=_?E[h]:(E[h]+E[h+1])/2,c&&c.type==="category"&&(d=y[o]),i&&i.type==="category"&&(u=f[h]),p.zsmooth&&(z=D=c.c2p(d),U=H=i.c2p(u)));var Y=w[h][o];if(T&&!T[h][o]&&(Y=void 0),Y!==void 0||p.hoverongaps){var J;Array.isArray(a.hovertext)&&Array.isArray(a.hovertext[h])?J=a.hovertext[h][o]:Array.isArray(a.text)&&Array.isArray(a.text[h])&&(J=a.text[h][o]);var W=x(p),Z={type:"linear",range:[W.min,W.max],hoverformat:L,_separators:c._separators,_numFormat:c._numFormat},re=k.tickText(Z,Y,"hover").text;return[v.extendFlat(e,{index:p._after2before?p._after2before[h][o]:[h,o],distance:e.maxHoverDistance,spikeDistance:e.maxSpikeDistance,x0:z,x1:D,y0:U,y1:H,xLabelVal:d,yLabelVal:u,zLabelVal:Y,zLabel:re,text:J})]}}},{"../../components/colorscale":379,"../../components/fx":407,"../../lib":515,"../../plots/cartesian/axes":566}],809:[function(g,Q,X){Q.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),calc:g("./calc"),plot:g("./plot"),colorbar:g("./colorbar"),style:g("./style"),hoverPoints:g("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:g("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":578,"./attributes":801,"./calc":802,"./colorbar":804,"./defaults":806,"./hover":808,"./plot":813,"./style":814}],810:[function(g,Q,X){var m=g("../../lib"),v=[[-1,0],[1,0],[0,-1],[0,1]];function k(e){return .5-.25*Math.min(1,.5*e)}function x(e,t,r){var l,n,d,u,o,h,s,a,p,c,i,y,f,w=0;for(u=0;u<t.length;u++){for(n=(l=t[u])[0],d=l[1],i=e[n][d],c=0,p=0,o=0;o<4;o++)(s=e[n+(h=v[o])[0]])&&(a=s[d+h[1]])!==void 0&&(c===0?y=f=a:(y=Math.min(y,a),f=Math.max(f,a)),p++,c+=a);if(p===0)throw"iterateInterp2d order is wrong: no defined neighbors";e[n][d]=c/p,i===void 0?p<4&&(w=1):(e[n][d]=(1+r)*e[n][d]-r*i,f>y&&(w=Math.max(w,Math.abs(e[n][d]-i)/(f-y))))}return w}Q.exports=function(e,t){var r,l=1;for(x(e,t),r=0;r<t.length&&!(t[r][2]<4);r++);for(t=t.slice(r),r=0;r<100&&l>.01;r++)l=x(e,t,k(l));return l>.01&&m.log("interp2d didn't converge quickly",l),e}},{"../../lib":515}],811:[function(g,Q,X){var m=g("../../lib");Q.exports=function(v,k){v("texttemplate");var x=m.extendFlat({},k.font,{color:"auto",size:"auto"});m.coerceFont(v,"textfont",x)}},{"../../lib":515}],812:[function(g,Q,X){var m=g("../../registry"),v=g("../../lib").isArrayOrTypedArray;Q.exports=function(k,x,e,t,r,l){var n,d,u,o=[],h=m.traceIs(k,"contour"),s=m.traceIs(k,"histogram"),a=m.traceIs(k,"gl2d");if(v(x)&&x.length>1&&!s&&l.type!=="category"){var p=x.length;if(!(p<=r))return h?x.slice(0,r):x.slice(0,r+1);if(h||a)o=x.slice(0,r);else if(r===1)o=[x[0]-.5,x[0]+.5];else{for(o=[1.5*x[0]-.5*x[1]],u=1;u<p;u++)o.push(.5*(x[u-1]+x[u]));o.push(1.5*x[p-1]-.5*x[p-2])}if(p<r){var c=o[o.length-1],i=c-o[o.length-2];for(u=p;u<r;u++)c+=i,o.push(c)}}else{var y=k[l._id.charAt(0)+"calendar"];for(s?n=l.r2c(e,0,y):v(x)&&x.length===1?n=x[0]:e===void 0?n=0:n=(l.type==="log"?l.d2c:l.r2c)(e,0,y),d=t||1,u=h||a?0:-.5;u<r;u++)o.push(n+d*u)}return o}},{"../../lib":515,"../../registry":647}],813:[function(g,Q,X){var m=g("@plotly/d3"),v=g("tinycolor2"),k=g("../../registry"),x=g("../../components/drawing"),e=g("../../plots/cartesian/axes"),t=g("../../lib"),r=g("../../lib/svg_text_utils"),l=g("../scatter/format_labels"),n=g("../../components/color"),d=g("../../components/colorscale").extractOpts,u=g("../../components/colorscale").makeColorScaleFuncFromTrace,o=g("../../constants/xmlns_namespaces"),h=g("../../constants/alignment").LINE_SPACING;function s(y){return y.selectAll("g.heatmap-label")}function a(y){s(y).remove()}function p(y,f){var w=f.length-2,b=t.constrain(t.findBin(y,f),0,w),_=f[b],T=f[b+1],L=t.constrain(b+(y-_)/(T-_)-.5,0,w),A=Math.round(L),I=Math.abs(L-A);return L&&L!==w&&I?{bin0:A,frac:I,bin1:Math.round(A+I/(L-A))}:{bin0:A,bin1:A,frac:0}}function c(y,f){var w=f.length-1,b=t.constrain(t.findBin(y,f),0,w),_=f[b],T=(y-_)/(f[b+1]-_)||0;return T<=0?{bin0:b,bin1:b,frac:0}:T<.5?{bin0:b,bin1:b+1,frac:T}:{bin0:b+1,bin1:b,frac:1-T}}function i(y,f,w){y[f]=w[0],y[f+1]=w[1],y[f+2]=w[2],y[f+3]=Math.round(255*w[3])}Q.exports=function(y,f,w,b){var _=f.xaxis,T=f.yaxis;t.makeTraceGroups(b,w,"hm").each(function(L){var A,I,P,S,E,z,D,U,H=m.select(this),Y=L[0],J=Y.trace,W=J.xgap||0,Z=J.ygap||0,re=Y.z,V=Y.x,B=Y.y,j=Y.xCenter,ee=Y.yCenter,N=k.traceIs(J,"contour"),$=N?"best":J.zsmooth,K=re.length,te=t.maxRowLength(re),ie=!1,le=!1;for(z=0;A===void 0&&z<V.length-1;)A=_.c2p(V[z]),z++;for(z=V.length-1;I===void 0&&z>0;)I=_.c2p(V[z]),z--;for(I<A&&(P=I,I=A,A=P,ie=!0),z=0;S===void 0&&z<B.length-1;)S=T.c2p(B[z]),z++;for(z=B.length-1;E===void 0&&z>0;)E=T.c2p(B[z]),z--;if(E<S&&(P=S,S=E,E=P,le=!0),N&&(j=V,ee=B,V=Y.xfill,B=Y.yfill),$!=="fast"){var se=$==="best"?0:.5;A=Math.max(-se*_._length,A),I=Math.min((1+se)*_._length,I),S=Math.max(-se*T._length,S),E=Math.min((1+se)*T._length,E)}var ve,fe,ye=Math.round(I-A),Ae=Math.round(E-S);if(ye<=0||Ae<=0)return H.selectAll("image").data([]).exit().remove(),void a(H);$==="fast"?(ve=te,fe=K):(ve=ye,fe=Ae);var pe=document.createElement("canvas");pe.width=ve,pe.height=fe;var ge,we,oe=pe.getContext("2d"),de=u(J,{noNumericCheck:!0,returnArray:!0});$==="fast"?(ge=ie?function(nn){return te-1-nn}:t.identity,we=le?function(nn){return K-1-nn}:t.identity):(ge=function(nn){return t.constrain(Math.round(_.c2p(V[nn])-A),0,ye)},we=function(nn){return t.constrain(Math.round(T.c2p(B[nn])-S),0,Ae)});var Te,Ee,Me,De,Ie=we(0),Oe=[Ie,Ie],Ze=ie?0:1,Fe=le?0:1,Pe=0,ze=0,Ge=0,$e=0;function ot(nn,yn){if(nn!==void 0){var bn=de(nn);return bn[0]=Math.round(bn[0]),bn[1]=Math.round(bn[1]),bn[2]=Math.round(bn[2]),Pe+=yn,ze+=bn[0]*yn,Ge+=bn[1]*yn,$e+=bn[2]*yn,bn}return[0,0,0,0]}function vt(nn,yn,bn,ta){var Br=nn[bn.bin0];if(Br===void 0)return ot(void 0,1);var rn,gn=nn[bn.bin1],Qr=yn[bn.bin0],un=yn[bn.bin1],Gn=gn-Br||0,wn=Qr-Br||0;return rn=gn===void 0?un===void 0?0:Qr===void 0?2*(un-Br):2*(2*un-Qr-Br)/3:un===void 0?Qr===void 0?0:2*(2*Br-gn-Qr)/3:Qr===void 0?2*(2*un-gn-Br)/3:un+Br-gn-Qr,ot(Br+bn.frac*Gn+ta.frac*(wn+bn.frac*rn))}if($){var bt,yt=0;try{bt=new Uint8Array(ye*Ae*4)}catch{bt=new Array(ye*Ae*4)}if($==="best"){var tt,Ke,mt,Ft=j||V,Vt=ee||B,Xt=new Array(Ft.length),Gt=new Array(Vt.length),nr=new Array(ye),It=j?c:p,Be=ee?c:p;for(z=0;z<Ft.length;z++)Xt[z]=Math.round(_.c2p(Ft[z])-A);for(z=0;z<Vt.length;z++)Gt[z]=Math.round(T.c2p(Vt[z])-S);for(z=0;z<ye;z++)nr[z]=It(z,Xt);for(D=0;D<Ae;D++)for(Ke=re[(tt=Be(D,Gt)).bin0],mt=re[tt.bin1],z=0;z<ye;z++,yt+=4)i(bt,yt,De=vt(Ke,mt,nr[z],tt))}else for(D=0;D<K;D++)for(Me=re[D],Oe=we(D),z=0;z<ye;z++)De=ot(Me[z],1),i(bt,yt=4*(Oe*ye+ge(z)),De);var He=oe.createImageData(ye,Ae);try{He.data.set(bt)}catch{var he=He.data,be=he.length;for(D=0;D<be;D++)he[D]=bt[D]}oe.putImageData(He,0,0)}else{var Re=Math.floor(W/2),Ue=Math.floor(Z/2);for(D=0;D<K;D++)if(Me=re[D],Oe.reverse(),Oe[Fe]=we(D+1),Oe[0]!==Oe[1]&&Oe[0]!==void 0&&Oe[1]!==void 0)for(Te=[Ee=ge(0),Ee],z=0;z<te;z++)Te.reverse(),Te[Ze]=ge(z+1),Te[0]!==Te[1]&&Te[0]!==void 0&&Te[1]!==void 0&&(De=ot(Me[z],(Te[1]-Te[0])*(Oe[1]-Oe[0])),oe.fillStyle="rgba("+De.join(",")+")",oe.fillRect(Te[0]+Re,Oe[0]+Ue,Te[1]-Te[0]-W,Oe[1]-Oe[0]-Z))}ze=Math.round(ze/Pe),Ge=Math.round(Ge/Pe),$e=Math.round($e/Pe);var Xe=v("rgb("+ze+","+Ge+","+$e+")");y._hmpixcount=(y._hmpixcount||0)+Pe,y._hmlumcount=(y._hmlumcount||0)+Pe*Xe.getLuminance();var qe=H.selectAll("image").data(L);qe.enter().append("svg:image").attr({xmlns:o.svg,preserveAspectRatio:"none"}),qe.attr({height:Ae,width:ye,x:A,y:S,"xlink:href":pe.toDataURL("image/png")}),a(H);var st=J.texttemplate;if(st){var it=d(J),Tt={type:"linear",range:[it.min,it.max],_separators:_._separators,_numFormat:_._numFormat},Pt=J.type==="histogram2dcontour",rt=J.type==="contour",ut=rt?K-1:K,Bt=rt?1:0,wt=rt?te-1:te,Lt=[];for(z=rt?1:0;z<ut;z++){var Se;if(rt)Se=Y.y[z];else if(Pt){if(z===0||z===K-1)continue;Se=Y.y[z]}else if(Y.yCenter)Se=Y.yCenter[z];else{if(z+1===K&&Y.y[z+1]===void 0)continue;Se=(Y.y[z]+Y.y[z+1])/2}var We=Math.round(T.c2p(Se));if(!(0>We||We>T._length))for(D=Bt;D<wt;D++){var nt;if(rt)nt=Y.x[D];else if(Pt){if(D===0||D===te-1)continue;nt=Y.x[D]}else if(Y.xCenter)nt=Y.xCenter[D];else{if(D+1===te&&Y.x[D+1]===void 0)continue;nt=(Y.x[D]+Y.x[D+1])/2}var ft=Math.round(_.c2p(nt));if(!(0>ft||ft>_._length)){var Mt=l({x:nt,y:Se},J,y._fullLayout);Mt.x=nt,Mt.y=Se;var Nt=Y.z[z][D];Nt===void 0?(Mt.z="",Mt.zLabel=""):(Mt.z=Nt,Mt.zLabel=e.tickText(Tt,Nt,"hover").text);var Zt=Y.text&&Y.text[z]&&Y.text[z][D];Zt!==void 0&&Zt!==!1||(Zt=""),Mt.text=Zt;var Ut=t.texttemplateString(st,Mt,y._fullLayout._d3locale,Mt,J._meta||{});if(Ut){var fr=Ut.split("<br>"),Tr=fr.length,ur=0;for(U=0;U<Tr;U++)ur=Math.max(ur,fr[U].length);Lt.push({l:Tr,c:ur,t:Ut,x:ft,y:We,z:Nt})}}}}var Kt=J.textfont,Qt=Kt.family,er=Kt.size,cr=y._fullLayout.font.size;if(!er||er==="auto"){var gr=1/0,Mr=1/0,Ir=0,Fr=0;for(U=0;U<Lt.length;U++){var Yr=Lt[U];if(Ir=Math.max(Ir,Yr.l),Fr=Math.max(Fr,Yr.c),U<Lt.length-1){var fn=Lt[U+1],en=Math.abs(fn.x-Yr.x),Rn=Math.abs(fn.y-Yr.y);en&&(gr=Math.min(gr,en)),Rn&&(Mr=Math.min(Mr,Rn))}}isFinite(gr)&&isFinite(Mr)?(gr-=W,Mr-=Z,gr/=Fr,Mr/=Ir,gr/=h/2,Mr/=h,er=Math.min(Math.floor(gr),Math.floor(Mr),cr)):er=cr}if(er<=0||!isFinite(er))return;s(H).data(Lt).enter().append("g").classed("heatmap-label",1).append("text").attr("text-anchor","middle").each(function(nn){var yn=m.select(this),bn=Kt.color;bn&&bn!=="auto"||(bn=n.contrast("rgba("+de(nn.z).join()+")")),yn.attr("data-notex",1).call(r.positionText,function(ta){return ta.x}(nn),function(ta){return ta.y-er*(ta.l*h/2-1)}(nn)).call(x.font,Qt,er,bn).text(nn.t).call(r.convertToTspans,y)})}})}},{"../../components/color":367,"../../components/colorscale":379,"../../components/drawing":389,"../../constants/alignment":483,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"../scatter/format_labels":945,"@plotly/d3":58,tinycolor2:313}],814:[function(g,Q,X){var m=g("@plotly/d3");Q.exports=function(v){m.select(v).selectAll(".hm image").style("opacity",function(k){return k.trace.opacity})}},{"@plotly/d3":58}],815:[function(g,Q,X){Q.exports=function(m,v,k){k("zsmooth")===!1&&(k("xgap"),k("ygap")),k("zhoverformat")}},{}],816:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../../lib"),k=g("../../registry");function x(e,t){var r=t(e);return(r?t(e+"type","array"):"scaled")==="scaled"&&(t(e+"0"),t("d"+e)),r}Q.exports=function(e,t,r,l,n,d){var u,o,h=r("z");if(n=n||"x",d=d||"y",h===void 0||!h.length)return 0;if(v.isArray1D(e.z)){u=r(n),o=r(d);var s=v.minRowLength(u),a=v.minRowLength(o);if(s===0||a===0)return 0;t._length=Math.min(s,a,h.length)}else{if(u=x(n,r),o=x(d,r),!function(p){for(var c,i=!0,y=!1,f=!1,w=0;w<p.length;w++){if(c=p[w],!v.isArrayOrTypedArray(c)){i=!1;break}c.length>0&&(y=!0);for(var b=0;b<c.length;b++)if(m(c[b])){f=!0;break}}return i&&y&&f}(h))return 0;r("transpose"),t._length=null}return e.type==="heatmapgl"||k.getComponentMethod("calendars","handleTraceDefaults")(e,t,[n,d],l),!0}},{"../../lib":515,"../../registry":647,"fast-isnumeric":190}],817:[function(g,Q,X){for(var m=g("../heatmap/attributes"),v=g("../../components/colorscale/attributes"),k=g("../../lib/extend").extendFlat,x=g("../../plot_api/edit_types").overrideAll,e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],t={},r=0;r<e.length;r++){var l=e[r];t[l]=m[l]}t.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},k(t,v("",{cLetter:"z",autoColorDflt:!1})),Q.exports=x(t,"calc","nested")},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../heatmap/attributes":801}],818:[function(g,Q,X){var m=g("../../../stackgl_modules").gl_heatmap2d,v=g("../../plots/cartesian/axes"),k=g("../../lib/str2rgbarray");function x(t,r){this.scene=t,this.uid=r,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=m(t.glplot,this.options),this.heatmap._trace=this}var e=x.prototype;e.handlePick=function(t){var r=this.options,l=r.shape,n=t.pointId,d=n%l[0],u=Math.floor(n/l[0]),o=n;return{trace:this,dataCoord:t.dataCoord,traceCoord:[r.x[d],r.y[u],r.z[o]],textLabel:this.textLabels[n],name:this.name,pointIndex:[u,d],hoverinfo:this.hoverinfo}},e.update=function(t,r){var l=r[0];this.index=t.index,this.name=t.name,this.hoverinfo=t.hoverinfo;var n=l.z;this.options.z=[].concat.apply([],n);var d=n[0].length,u=n.length;this.options.shape=[d,u],this.options.x=l.x,this.options.y=l.y,this.options.zsmooth=t.zsmooth;var o=function(c){for(var i=c.colorscale,y=c.zmin,f=c.zmax,w=i.length,b=new Array(w),_=new Array(4*w),T=0;T<w;T++){var L=i[T],A=k(L[1]);b[T]=y+L[0]*(f-y);for(var I=0;I<4;I++)_[4*T+I]=A[I]}return{colorLevels:b,colorValues:_}}(t);this.options.colorLevels=o.colorLevels,this.options.colorValues=o.colorValues,this.textLabels=[].concat.apply([],t.text),this.heatmap.update(this.options);var h,s,a=this.scene.xaxis,p=this.scene.yaxis;t.zsmooth===!1&&(h={ppad:l.x[1]-l.x[0]},s={ppad:l.y[1]-l.y[0]}),t._extremes[a._id]=v.findExtremes(a,l.x,h),t._extremes[p._id]=v.findExtremes(p,l.y,s)},e.dispose=function(){this.heatmap.dispose()},Q.exports=function(t,r,l){var n=new x(t,r.uid);return n.update(r,l),n}},{"../../../stackgl_modules":1133,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566}],819:[function(g,Q,X){var m=g("../../lib"),v=g("../heatmap/xyz_defaults"),k=g("../../components/colorscale/defaults"),x=g("./attributes");Q.exports=function(e,t,r,l){function n(d,u){return m.coerce(e,t,x,d,u)}v(e,t,n,l)?(n("text"),n("zsmooth"),k(e,t,l,n,{prefix:"",cLetter:"z"})):t.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"../heatmap/xyz_defaults":816,"./attributes":817}],820:[function(g,Q,X){Q.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),colorbar:g("../heatmap/colorbar"),calc:g("../heatmap/calc"),plot:g("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:g("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":605,"../heatmap/calc":802,"../heatmap/colorbar":804,"./attributes":817,"./convert":818,"./defaults":819}],821:[function(g,Q,X){var m=g("../bar/attributes"),v=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,k=g("../../plots/template_attributes").hovertemplateAttrs,x=g("../../plots/template_attributes").texttemplateAttrs,e=g("../../plots/font_attributes"),t=g("./bin_attributes"),r=g("./constants"),l=g("../../lib/extend").extendFlat;Q.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:v("x"),yhoverformat:v("y"),text:l({},m.text,{}),hovertext:l({},m.hovertext,{}),orientation:m.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:t("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:t("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:k({},{keys:r.eventDataKeys}),texttemplate:x({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:l({},m.textposition,{arrayOk:!1}),textfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:m.insidetextanchor,textangle:m.textangle,cliponaxis:m.cliponaxis,constraintext:m.constraintext,marker:m.marker,offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup,selected:m.selected,unselected:m.unselected,_deprecated:{bardir:m._deprecated.bardir}}},{"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../bar/attributes":657,"./bin_attributes":823,"./constants":827}],822:[function(g,Q,X){Q.exports=function(m,v){for(var k=m.length,x=0,e=0;e<k;e++)v[e]?(m[e]/=v[e],x+=m[e]):m[e]=null;return x}},{}],823:[function(g,Q,X){Q.exports=function(m,v){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],824:[function(g,Q,X){var m=g("fast-isnumeric");Q.exports={count:function(v,k,x){return x[v]++,1},sum:function(v,k,x,e){var t=e[k];return m(t)?(t=Number(t),x[v]+=t,t):0},avg:function(v,k,x,e,t){var r=e[k];return m(r)&&(r=Number(r),x[v]+=r,t[v]++),0},min:function(v,k,x,e){var t=e[k];if(m(t)){if(t=Number(t),!m(x[v]))return x[v]=t,t;if(x[v]>t){var r=t-x[v];return x[v]=t,r}}return 0},max:function(v,k,x,e){var t=e[k];if(m(t)){if(t=Number(t),!m(x[v]))return x[v]=t,t;if(x[v]<t){var r=t-x[v];return x[v]=t,r}}return 0}}},{"fast-isnumeric":190}],825:[function(g,Q,X){var m=g("../../constants/numerical"),v=m.ONEAVGYEAR,k=m.ONEAVGMONTH,x=m.ONEDAY,e=m.ONEHOUR,t=m.ONEMIN,r=m.ONESEC,l=g("../../plots/cartesian/axes").tickIncrement;function n(h,s,a,p){if(h*s<=0)return 1/0;for(var c=Math.abs(s-h),i=a.type==="date",y=d(c,i),f=0;f<10;f++){var w=d(80*y,i);if(y===w||!u(w,h,s,i,a,p))break;y=w}return y}function d(h,s){return s&&h>r?h>x?h>1.1*v?v:h>1.1*k?k:x:h>e?e:h>t?t:r:Math.pow(10,Math.floor(Math.log(h)/Math.LN10))}function u(h,s,a,p,c,i){if(p&&h>x){var y=o(s,c,i),f=o(a,c,i),w=h===v?0:1;return y[w]!==f[w]}return Math.floor(a/h)-Math.floor(s/h)>.1}function o(h,s,a){var p=s.c2d(h,v,a).split("-");return p[0]===""&&(p.unshift(),p[0]="-"+p[0]),p}Q.exports=function(h,s,a,p,c){var i,y,f=-1.1*s,w=-.1*s,b=h-w,_=a[0],T=a[1],L=Math.min(n(_+w,_+b,p,c),n(T+w,T+b,p,c)),A=Math.min(n(_+f,_+w,p,c),n(T+f,T+w,p,c));if(L>A&&A<Math.abs(T-_)/4e3?(i=L,y=!1):(i=Math.min(L,A),y=!0),p.type==="date"&&i>x){var I=i===v?1:6,P=i===v?"M12":"M1";return function(S,E){var z=p.c2d(S,v,c),D=z.indexOf("-",I);D>0&&(z=z.substr(0,D));var U=p.d2c(z,0,c);if(U<S){var H=l(U,P,!1,c);(U+H)/2<S+h&&(U=H)}return E&&y?l(U,P,!0,c):U}}return function(S,E){var z=i*Math.round(S/i);return z+i/10<S&&z+.9*i<S+h&&(z+=i),E&&y&&(z-=i),z}}},{"../../constants/numerical":491,"../../plots/cartesian/axes":566}],826:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../../lib"),k=g("../../registry"),x=g("../../plots/cartesian/axes"),e=g("../bar/arrays_to_calcdata"),t=g("./bin_functions"),r=g("./norm_functions"),l=g("./average"),n=g("./bin_label_vals");function d(u,o,h,s,a){var p,c,i,y,f,w,b,_=s+"bins",T=u._fullLayout,L=o["_"+s+"bingroup"],A=T._histogramBinOpts[L],I=T.barmode==="overlay",P=function(fe){return h.r2c(fe,0,y)},S=function(fe){return h.c2r(fe,0,y)},E=h.type==="date"?function(fe){return fe||fe===0?v.cleanDate(fe,null,y):null}:function(fe){return m(fe)?Number(fe):null};function z(fe,ye,Ae){ye[fe+"Found"]?(ye[fe]=E(ye[fe]),ye[fe]===null&&(ye[fe]=Ae[fe])):(w[fe]=ye[fe]=Ae[fe],v.nestedProperty(c[0],_+"."+fe).set(Ae[fe]))}if(o["_"+s+"autoBinFinished"])delete o["_"+s+"autoBinFinished"];else{c=A.traces;var D=[],U=!0,H=!1,Y=!1;for(p=0;p<c.length;p++)if((i=c[p]).visible){var J=A.dirs[p];f=i["_"+J+"pos0"]=h.makeCalcdata(i,J),D=v.concat(D,f),delete i["_"+s+"autoBinFinished"],o.visible===!0&&(U?U=!1:(delete i._autoBin,i["_"+s+"autoBinFinished"]=1),k.traceIs(i,"2dMap")&&(H=!0),i.type==="histogram2dcontour"&&(Y=!0))}y=c[0][s+"calendar"];var W=x.autoBin(D,h,A.nbins,H,y,A.sizeFound&&A.size),Z=c[0]._autoBin={};if(w=Z[A.dirs[0]]={},Y&&(A.size||(W.start=S(x.tickIncrement(P(W.start),W.size,!0,y))),A.end===void 0&&(W.end=S(x.tickIncrement(P(W.end),W.size,!1,y)))),I&&!k.traceIs(o,"2dMap")&&W._dataSpan===0&&h.type!=="category"&&h.type!=="multicategory"){if(a)return[W,f,!0];W=function(fe,ye,Ae,pe,ge){var we,oe,de,Te=fe._fullLayout,Ee=function(vt,bt){for(var yt=bt.xaxis,tt=bt.yaxis,Ke=bt.orientation,mt=[],Ft=vt._fullData,Vt=0;Vt<Ft.length;Vt++){var Xt=Ft[Vt];Xt.type==="histogram"&&Xt.visible===!0&&Xt.orientation===Ke&&Xt.xaxis===yt&&Xt.yaxis===tt&&mt.push(Xt)}return mt}(fe,ye),Me=!1,De=1/0,Ie=[ye];for(we=0;we<Ee.length;we++)if((oe=Ee[we])===ye)Me=!0;else if(Me){var Oe=d(fe,oe,Ae,pe,!0),Ze=Oe[0],Fe=Oe[2];oe["_"+pe+"autoBinFinished"]=1,oe["_"+pe+"pos0"]=Oe[1],Fe?Ie.push(oe):De=Math.min(De,Ze.size)}else de=Te._histogramBinOpts[oe["_"+pe+"bingroup"]],De=Math.min(De,de.size||oe[ge].size);var Pe=new Array(Ie.length);for(we=0;we<Ie.length;we++)for(var ze=Ie[we]["_"+pe+"pos0"],Ge=0;Ge<ze.length;Ge++)if(ze[Ge]!==void 0){Pe[we]=ze[Ge];break}for(isFinite(De)||(De=v.distinctVals(Pe).minDiff),we=0;we<Ie.length;we++){var $e=(oe=Ie[we])[pe+"calendar"],ot={start:Ae.c2r(Pe[we]-De/2,0,$e),end:Ae.c2r(Pe[we]+De/2,0,$e),size:De};oe._input[ge]=oe[ge]=ot,(de=Te._histogramBinOpts[oe["_"+pe+"bingroup"]])&&v.extendFlat(de,ot)}return ye[ge]}(u,o,h,s,_)}(b=i.cumulative||{}).enabled&&b.currentbin!=="include"&&(b.direction==="decreasing"?W.start=S(x.tickIncrement(P(W.start),W.size,!0,y)):W.end=S(x.tickIncrement(P(W.end),W.size,!1,y))),A.size=W.size,A.sizeFound||(w.size=W.size,v.nestedProperty(c[0],_+".size").set(W.size)),z("start",A,W),z("end",A,W)}f=o["_"+s+"pos0"],delete o["_"+s+"pos0"];var re=o._input[_]||{},V=v.extendFlat({},A),B=A.start,j=h.r2l(re.start),ee=j!==void 0;if((A.startFound||ee)&&j!==h.r2l(B)){var N=ee?j:v.aggNums(Math.min,null,f),$={type:h.type==="category"||h.type==="multicategory"?"linear":h.type,r2l:h.r2l,dtick:A.size,tick0:B,calendar:y,range:[N,x.tickIncrement(N,A.size,!1,y)].map(h.l2r)},K=x.tickFirst($);K>h.r2l(N)&&(K=x.tickIncrement(K,A.size,!0,y)),V.start=h.l2r(K),ee||v.nestedProperty(o,_+".start").set(V.start)}var te=A.end,ie=h.r2l(re.end),le=ie!==void 0;if((A.endFound||le)&&ie!==h.r2l(te)){var se=le?ie:v.aggNums(Math.max,null,f);V.end=h.l2r(se),le||v.nestedProperty(o,_+".start").set(V.end)}var ve="autobin"+s;return o._input[ve]===!1&&(o._input[_]=v.extendFlat({},o[_]||{}),delete o._input[ve],delete o[ve]),[V,f]}Q.exports={calc:function(u,o){var h,s,a,p,c=[],i=[],y=o.orientation==="h",f=x.getFromId(u,y?o.yaxis:o.xaxis),w=y?"y":"x",b={x:"y",y:"x"}[w],_=o[w+"calendar"],T=o.cumulative,L=d(u,o,f,w),A=L[0],I=L[1],P=typeof A.size=="string",S=[],E=P?S:A,z=[],D=[],U=[],H=0,Y=o.histnorm,J=o.histfunc,W=Y.indexOf("density")!==-1;T.enabled&&W&&(Y=Y.replace(/ ?density$/,""),W=!1);var Z,re=J==="max"||J==="min"?null:0,V=t.count,B=r[Y],j=!1,ee=function(oe){return f.r2c(oe,0,_)};for(v.isArrayOrTypedArray(o[b])&&J!=="count"&&(Z=o[b],j=J==="avg",V=t[J]),h=ee(A.start),a=ee(A.end)+(h-x.tickIncrement(h,A.size,!1,_))/1e6;h<a&&c.length<1e6&&(s=x.tickIncrement(h,A.size,!1,_),c.push((h+s)/2),i.push(re),U.push([]),S.push(h),W&&z.push(1/(s-h)),j&&D.push(0),!(s<=h));)h=s;S.push(h),P||f.type!=="date"||(E={start:ee(E.start),end:ee(E.end),size:E.size}),u._fullLayout._roundFnOpts||(u._fullLayout._roundFnOpts={});var N=o["_"+w+"bingroup"],$={leftGap:1/0,rightGap:1/0};N&&(u._fullLayout._roundFnOpts[N]||(u._fullLayout._roundFnOpts[N]=$),$=u._fullLayout._roundFnOpts[N]);var K,te=i.length,ie=!0,le=$.leftGap,se=$.rightGap,ve={};for(h=0;h<I.length;h++){var fe=I[h];(p=v.findBin(fe,E))>=0&&p<te&&(H+=V(p,h,i,Z,D),ie&&U[p].length&&fe!==I[U[p][0]]&&(ie=!1),U[p].push(h),ve[h]=p,le=Math.min(le,fe-S[p]),se=Math.min(se,S[p+1]-fe))}$.leftGap=le,$.rightGap=se,ie||(K=function(oe,de){return function(){var Te=u._fullLayout._roundFnOpts[N];return n(Te.leftGap,Te.rightGap,S,f,_)(oe,de)}}),j&&(H=l(i,D)),B&&B(i,H,z),T.enabled&&function(oe,de,Te){var Ee,Me,De;function Ie(Ze){De=oe[Ze],oe[Ze]/=2}function Oe(Ze){Me=oe[Ze],oe[Ze]=De+Me/2,De+=Me}if(Te==="half")if(de==="increasing")for(Ie(0),Ee=1;Ee<oe.length;Ee++)Oe(Ee);else for(Ie(oe.length-1),Ee=oe.length-2;Ee>=0;Ee--)Oe(Ee);else if(de==="increasing"){for(Ee=1;Ee<oe.length;Ee++)oe[Ee]+=oe[Ee-1];Te==="exclude"&&(oe.unshift(0),oe.pop())}else{for(Ee=oe.length-2;Ee>=0;Ee--)oe[Ee]+=oe[Ee+1];Te==="exclude"&&(oe.push(0),oe.shift())}}(i,T.direction,T.currentbin);var ye=Math.min(c.length,i.length),Ae=[],pe=0,ge=ye-1;for(h=0;h<ye;h++)if(i[h]){pe=h;break}for(h=ye-1;h>=pe;h--)if(i[h]){ge=h;break}for(h=pe;h<=ge;h++)if(m(c[h])&&m(i[h])){var we={p:c[h],s:i[h],b:0};T.enabled||(we.pts=U[h],ie?we.ph0=we.ph1=U[h].length?I[U[h][0]]:c[h]:(o._computePh=!0,we.ph0=K(S[h]),we.ph1=K(S[h+1],!0))),Ae.push(we)}return Ae.length===1&&(Ae[0].width1=x.tickIncrement(Ae[0].p,A.size,!1,_)-Ae[0].p),e(Ae,o),v.isArrayOrTypedArray(o.selectedpoints)&&v.tagSelected(Ae,o,ve),Ae},calcAllAutoBins:d}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"../bar/arrays_to_calcdata":656,"./average":822,"./bin_functions":824,"./bin_label_vals":825,"./norm_functions":833,"fast-isnumeric":190}],827:[function(g,Q,X){Q.exports={eventDataKeys:["binNumber"]}},{}],828:[function(g,Q,X){var m=g("../../lib"),v=g("../../plots/cartesian/axis_ids"),k=g("../../registry").traceIs,x=g("../bar/defaults").handleGroupingDefaults,e=m.nestedProperty,t=g("../../plots/cartesian/constraints").getAxisGroup,r=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],l=["x","y"];Q.exports=function(n,d){var u,o,h,s,a,p,c,i=d._histogramBinOpts={},y=[],f={},w=[];function b(W,Z){return m.coerce(u._input,u,u._module.attributes,W,Z)}function _(W){return W.orientation==="v"?"x":"y"}function T(W,Z,re){var V=W.uid+"__"+re;Z||(Z=V);var B=function($,K){return v.getFromTrace({_fullLayout:d},$,K).type}(W,re),j=W[re+"calendar"]||"",ee=i[Z],N=!0;ee&&(B===ee.axType&&j===ee.calendar?(N=!1,ee.traces.push(W),ee.dirs.push(re)):(Z=V,B!==ee.axType&&m.warn(["Attempted to group the bins of trace",W.index,"set on a","type:"+B,"axis","with bins on","type:"+ee.axType,"axis."].join(" ")),j!==ee.calendar&&m.warn(["Attempted to group the bins of trace",W.index,"set with a",j,"calendar","with bins",ee.calendar?"on a "+ee.calendar+" calendar":"w/o a set calendar"].join(" ")))),N&&(i[Z]={traces:[W],dirs:[re],axType:B,calendar:W[re+"calendar"]||""}),W["_"+re+"bingroup"]=Z}for(a=0;a<n.length;a++)u=n[a],k(u,"histogram")&&(y.push(u),delete u._xautoBinFinished,delete u._yautoBinFinished,k(u,"2dMap")||x(u._input,u,d,b));var L=d._alignmentOpts||{};for(a=0;a<y.length;a++){if(u=y[a],h="",!k(u,"2dMap")){if(s=_(u),d.barmode==="group"&&u.alignmentgroup){var A=u[s+"axis"],I=t(d,A)+u.orientation;(L[I]||{})[u.alignmentgroup]&&(h=I)}h||d.barmode==="overlay"||(h=t(d,u.xaxis)+t(d,u.yaxis)+_(u))}h?(f[h]||(f[h]=[]),f[h].push(u)):w.push(u)}for(h in f)if((o=f[h]).length!==1){var P=!1;for(o.length&&(u=o[0],P=b("bingroup")),h=P||h,a=0;a<o.length;a++){var S=(u=o[a])._input.bingroup;S&&S!==h&&m.warn(["Trace",u.index,"must match","within bingroup",h+".","Ignoring its bingroup:",S,"setting."].join(" ")),u.bingroup=h,T(u,h,_(u))}}else w.push(o[0]);for(a=0;a<w.length;a++){u=w[a];var E=b("bingroup");if(k(u,"2dMap"))for(c=0;c<2;c++){var z=b((s=l[c])+"bingroup",E?E+"__"+s:null);T(u,z,s)}else T(u,E,_(u))}for(h in i){var D=i[h];for(o=D.traces,p=0;p<r.length;p++){var U,H,Y=r[p],J=Y.name;if(J!=="nbins"||!D.sizeFound){for(a=0;a<o.length;a++){if(u=o[a],s=D.dirs[a],U=Y.aStr[s],e(u._input,U).get()!==void 0){D[J]=b(U),D[J+"Found"]=!0;break}(H=(u._autoBin||{})[s]||{})[J]&&e(u,U).set(H[J])}if(J==="start"||J==="end")for(;a<o.length;a++)(u=o[a])["_"+s+"bingroup"]&&b(U,(H=(u._autoBin||{})[s]||{})[J]);J!=="nbins"||D.sizeFound||D.nbinsFound||(u=o[0],D[J]=b(U))}}}}},{"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../plots/cartesian/constraints":574,"../../registry":647,"../bar/defaults":661}],829:[function(g,Q,X){var m=g("../../registry"),v=g("../../lib"),k=g("../../components/color"),x=g("../bar/defaults").handleText,e=g("../bar/style_defaults"),t=g("./attributes");Q.exports=function(r,l,n,d){function u(w,b){return v.coerce(r,l,t,w,b)}var o=u("x"),h=u("y");u("cumulative.enabled")&&(u("cumulative.direction"),u("cumulative.currentbin")),u("text");var s=u("textposition");x(r,l,d,u,s,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),u("hovertext"),u("hovertemplate"),u("xhoverformat"),u("yhoverformat");var a=u("orientation",h&&!o?"h":"v"),p=a==="v"?"x":"y",c=a==="v"?"y":"x",i=o&&h?Math.min(v.minRowLength(o)&&v.minRowLength(h)):v.minRowLength(l[p]||[]);if(i){l._length=i,m.getComponentMethod("calendars","handleTraceDefaults")(r,l,["x","y"],d),l[c]&&u("histfunc"),u("histnorm"),u("autobin"+p),e(r,l,u,n,d),v.coerceSelectionMarkerOpacity(l,u);var y=(l.marker.line||{}).color,f=m.getComponentMethod("errorbars","supplyDefaults");f(r,l,y||k.defaultLine,{axis:"y"}),f(r,l,y||k.defaultLine,{axis:"x",inherit:"y"})}else l.visible=!1}},{"../../components/color":367,"../../lib":515,"../../registry":647,"../bar/defaults":661,"../bar/style_defaults":672,"./attributes":821}],830:[function(g,Q,X){Q.exports=function(m,v,k,x,e){if(m.x="xVal"in v?v.xVal:v.x,m.y="yVal"in v?v.yVal:v.y,"zLabelVal"in v&&(m.z=v.zLabelVal),v.xa&&(m.xaxis=v.xa),v.ya&&(m.yaxis=v.ya),!(k.cumulative||{}).enabled){var t,r=Array.isArray(e)?x[0].pts[e[0]][e[1]]:x[e].pts;if(m.pointNumbers=r,m.binNumber=m.pointNumber,delete m.pointNumber,delete m.pointIndex,k._indexToPoints){t=[];for(var l=0;l<r.length;l++)t=t.concat(k._indexToPoints[r[l]])}else t=r;m.pointIndices=t}return m}},{}],831:[function(g,Q,X){var m=g("../bar/hover").hoverPoints,v=g("../../plots/cartesian/axes").hoverLabelText;Q.exports=function(k,x,e,t,r){var l=m(k,x,e,t,r);if(l){var n=(k=l[0]).cd[k.index],d=k.cd[0].trace;if(!d.cumulative.enabled){var u=d.orientation==="h"?"y":"x";k[u+"Label"]=v(k[u+"a"],[n.ph0,n.ph1],d[u+"hoverformat"])}return l}}},{"../../plots/cartesian/axes":566,"../bar/hover":664}],832:[function(g,Q,X){Q.exports={attributes:g("./attributes"),layoutAttributes:g("../bar/layout_attributes"),supplyDefaults:g("./defaults"),crossTraceDefaults:g("./cross_trace_defaults"),supplyLayoutDefaults:g("../bar/layout_defaults"),calc:g("./calc").calc,crossTraceCalc:g("../bar/cross_trace_calc").crossTraceCalc,plot:g("../bar/plot").plot,layerName:"barlayer",style:g("../bar/style").style,styleOnSelect:g("../bar/style").styleOnSelect,colorbar:g("../scatter/marker_colorbar"),hoverPoints:g("./hover"),selectPoints:g("../bar/select"),eventData:g("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:g("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../bar/cross_trace_calc":660,"../bar/layout_attributes":666,"../bar/layout_defaults":667,"../bar/plot":668,"../bar/select":669,"../bar/style":671,"../scatter/marker_colorbar":954,"./attributes":821,"./calc":826,"./cross_trace_defaults":828,"./defaults":829,"./event_data":830,"./hover":831}],833:[function(g,Q,X){Q.exports={percent:function(m,v){for(var k=m.length,x=100/v,e=0;e<k;e++)m[e]*=x},probability:function(m,v){for(var k=m.length,x=0;x<k;x++)m[x]/=v},density:function(m,v,k,x){var e=m.length;x=x||1;for(var t=0;t<e;t++)m[t]*=k[t]*x},"probability density":function(m,v,k,x){var e=m.length;x&&(v/=x);for(var t=0;t<e;t++)m[t]*=k[t]/v}}},{}],834:[function(g,Q,X){var m=g("../histogram/attributes"),v=g("../histogram/bin_attributes"),k=g("../heatmap/attributes"),x=g("../../plots/attributes"),e=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=g("../../plots/template_attributes").hovertemplateAttrs,r=g("../../plots/template_attributes").texttemplateAttrs,l=g("../../components/colorscale/attributes"),n=g("../../lib/extend").extendFlat;Q.exports=n({x:m.x,y:m.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:m.histnorm,histfunc:m.histfunc,nbinsx:m.nbinsx,xbins:v("x"),nbinsy:m.nbinsy,ybins:v("y"),autobinx:m.autobinx,autobiny:m.autobiny,bingroup:n({},m.bingroup,{}),xbingroup:n({},m.bingroup,{}),ybingroup:n({},m.bingroup,{}),xgap:k.xgap,ygap:k.ygap,zsmooth:k.zsmooth,xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z",1),hovertemplate:t({},{keys:"z"}),texttemplate:r({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:k.textfont,showlegend:n({},x.showlegend,{dflt:!1})},l("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../heatmap/attributes":801,"../histogram/attributes":821,"../histogram/bin_attributes":823}],835:[function(g,Q,X){var m=g("../../lib"),v=g("../../plots/cartesian/axes"),k=g("../histogram/bin_functions"),x=g("../histogram/norm_functions"),e=g("../histogram/average"),t=g("../histogram/bin_label_vals"),r=g("../histogram/calc").calcAllAutoBins;function l(u,o,h,s){var a,p=new Array(u);if(s)for(a=0;a<u;a++)p[a]=1/(o[a+1]-o[a]);else{var c=1/h;for(a=0;a<u;a++)p[a]=c}return p}function n(u,o){return{start:u(o.start),end:u(o.end),size:o.size}}function d(u,o,h,s,a,p){var c,i=u.length-1,y=new Array(i),f=t(h,s,u,a,p);for(c=0;c<i;c++){var w=(o||[])[c];y[c]=w===void 0?[f(u[c]),f(u[c+1],!0)]:[w,w]}return y}Q.exports=function(u,o){var h,s,a,p,c=v.getFromId(u,o.xaxis),i=v.getFromId(u,o.yaxis),y=o.xcalendar,f=o.ycalendar,w=function(tt){return c.r2c(tt,0,y)},b=function(tt){return i.r2c(tt,0,f)},_=r(u,o,c,"x"),T=_[0],L=_[1],A=r(u,o,i,"y"),I=A[0],P=A[1],S=o._length;L.length>S&&L.splice(S,L.length-S),P.length>S&&P.splice(S,P.length-S);var E=[],z=[],D=[],U=typeof T.size=="string",H=typeof I.size=="string",Y=[],J=[],W=U?Y:T,Z=H?J:I,re=0,V=[],B=[],j=o.histnorm,ee=o.histfunc,N=j.indexOf("density")!==-1,$=ee==="max"||ee==="min"?null:0,K=k.count,te=x[j],ie=!1,le=[],se=[],ve="z"in o?o.z:"marker"in o&&Array.isArray(o.marker.color)?o.marker.color:"";ve&&ee!=="count"&&(ie=ee==="avg",K=k[ee]);var fe=T.size,ye=w(T.start),Ae=w(T.end)+(ye-v.tickIncrement(ye,fe,!1,y))/1e6;for(h=ye;h<Ae;h=v.tickIncrement(h,fe,!1,y))z.push($),Y.push(h),ie&&D.push(0);Y.push(h);var pe,ge=z.length,we=(h-ye)/ge,oe=(pe=ye+we/2,c.c2r(pe,0,y)),de=I.size,Te=b(I.start),Ee=b(I.end)+(Te-v.tickIncrement(Te,de,!1,f))/1e6;for(h=Te;h<Ee;h=v.tickIncrement(h,de,!1,f)){E.push(z.slice()),J.push(h);var Me=new Array(ge);for(s=0;s<ge;s++)Me[s]=[];B.push(Me),ie&&V.push(D.slice())}J.push(h);var De=E.length,Ie=(h-Te)/De,Oe=function(tt){return i.c2r(tt,0,f)}(Te+Ie/2);N&&(le=l(z.length,W,we,U),se=l(E.length,Z,Ie,H)),U||c.type!=="date"||(W=n(w,W)),H||i.type!=="date"||(Z=n(b,Z));var Ze=!0,Fe=!0,Pe=new Array(ge),ze=new Array(De),Ge=1/0,$e=1/0,ot=1/0,vt=1/0;for(h=0;h<S;h++){var bt=L[h],yt=P[h];a=m.findBin(bt,W),p=m.findBin(yt,Z),a>=0&&a<ge&&p>=0&&p<De&&(re+=K(a,h,E[p],ve,V[p]),B[p][a].push(h),Ze&&(Pe[a]===void 0?Pe[a]=bt:Pe[a]!==bt&&(Ze=!1)),Fe&&(ze[p]===void 0?ze[p]=yt:ze[p]!==yt&&(Fe=!1)),Ge=Math.min(Ge,bt-Y[a]),$e=Math.min($e,Y[a+1]-bt),ot=Math.min(ot,yt-J[p]),vt=Math.min(vt,J[p+1]-yt))}if(ie)for(p=0;p<De;p++)re+=e(E[p],V[p]);if(te)for(p=0;p<De;p++)te(E[p],re,le,se[p]);return{x:L,xRanges:d(Y,Ze&&Pe,Ge,$e,c,y),x0:oe,dx:we,y:P,yRanges:d(J,Fe&&ze,ot,vt,i,f),y0:Oe,dy:Ie,z:E,pts:B}}},{"../../lib":515,"../../plots/cartesian/axes":566,"../histogram/average":822,"../histogram/bin_functions":824,"../histogram/bin_label_vals":825,"../histogram/calc":826,"../histogram/norm_functions":833}],836:[function(g,Q,X){var m=g("../../lib"),v=g("./sample_defaults"),k=g("../heatmap/style_defaults"),x=g("../../components/colorscale/defaults"),e=g("../heatmap/label_defaults"),t=g("./attributes");Q.exports=function(r,l,n,d){function u(o,h){return m.coerce(r,l,t,o,h)}v(r,l,u,d),l.visible!==!1&&(k(r,l,u,d),x(r,l,d,u,{prefix:"",cLetter:"z"}),u("hovertemplate"),e(u,d),u("xhoverformat"),u("yhoverformat"))}},{"../../components/colorscale/defaults":377,"../../lib":515,"../heatmap/label_defaults":811,"../heatmap/style_defaults":815,"./attributes":834,"./sample_defaults":839}],837:[function(g,Q,X){var m=g("../heatmap/hover"),v=g("../../plots/cartesian/axes").hoverLabelText;Q.exports=function(k,x,e,t,r){var l=m(k,x,e,t,r);if(l){var n=(k=l[0]).index,d=n[0],u=n[1],o=k.cd[0],h=o.trace,s=o.xRanges[u],a=o.yRanges[d];return k.xLabel=v(k.xa,[s[0],s[1]],h.xhoverformat),k.yLabel=v(k.ya,[a[0],a[1]],h.yhoverformat),l}}},{"../../plots/cartesian/axes":566,"../heatmap/hover":808}],838:[function(g,Q,X){Q.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),crossTraceDefaults:g("../histogram/cross_trace_defaults"),calc:g("../heatmap/calc"),plot:g("../heatmap/plot"),layerName:"heatmaplayer",colorbar:g("../heatmap/colorbar"),style:g("../heatmap/style"),hoverPoints:g("./hover"),eventData:g("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:g("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../heatmap/calc":802,"../heatmap/colorbar":804,"../heatmap/plot":813,"../heatmap/style":814,"../histogram/cross_trace_defaults":828,"../histogram/event_data":830,"./attributes":834,"./defaults":836,"./hover":837}],839:[function(g,Q,X){var m=g("../../registry"),v=g("../../lib");Q.exports=function(k,x,e,t){var r=e("x"),l=e("y"),n=v.minRowLength(r),d=v.minRowLength(l);n&&d?(x._length=Math.min(n,d),m.getComponentMethod("calendars","handleTraceDefaults")(k,x,["x","y"],t),(e("z")||e("marker.color"))&&e("histfunc"),e("histnorm"),e("autobinx"),e("autobiny")):x.visible=!1}},{"../../lib":515,"../../registry":647}],840:[function(g,Q,X){var m=g("../histogram2d/attributes"),v=g("../contour/attributes"),k=g("../../components/colorscale/attributes"),x=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=g("../../lib/extend").extendFlat;Q.exports=e({x:m.x,y:m.y,z:m.z,marker:m.marker,histnorm:m.histnorm,histfunc:m.histfunc,nbinsx:m.nbinsx,xbins:m.xbins,nbinsy:m.nbinsy,ybins:m.ybins,autobinx:m.autobinx,autobiny:m.autobiny,bingroup:m.bingroup,xbingroup:m.xbingroup,ybingroup:m.ybingroup,autocontour:v.autocontour,ncontours:v.ncontours,contours:v.contours,line:{color:v.line.color,width:e({},v.line.width,{dflt:.5}),dash:v.line.dash,smoothing:v.line.smoothing,editType:"plot"},xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z",1),hovertemplate:m.hovertemplate,texttemplate:v.texttemplate,textfont:v.textfont},k("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../contour/attributes":744,"../histogram2d/attributes":834}],841:[function(g,Q,X){var m=g("../../lib"),v=g("../histogram2d/sample_defaults"),k=g("../contour/contours_defaults"),x=g("../contour/style_defaults"),e=g("../heatmap/label_defaults"),t=g("./attributes");Q.exports=function(r,l,n,d){function u(o,h){return m.coerce(r,l,t,o,h)}v(r,l,u,d),l.visible!==!1&&(k(r,l,u,function(o){return m.coerce2(r,l,t,o)}),x(r,l,u,d),u("xhoverformat"),u("yhoverformat"),u("hovertemplate"),l.contours&&l.contours.coloring==="heatmap"&&e(u,d))}},{"../../lib":515,"../contour/contours_defaults":751,"../contour/style_defaults":765,"../heatmap/label_defaults":811,"../histogram2d/sample_defaults":839,"./attributes":840}],842:[function(g,Q,X){Q.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),crossTraceDefaults:g("../histogram/cross_trace_defaults"),calc:g("../contour/calc"),plot:g("../contour/plot").plot,layerName:"contourlayer",style:g("../contour/style"),colorbar:g("../contour/colorbar"),hoverPoints:g("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:g("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../contour/calc":745,"../contour/colorbar":747,"../contour/hover":757,"../contour/plot":762,"../contour/style":764,"../histogram/cross_trace_defaults":828,"./attributes":840,"./defaults":841}],843:[function(g,Q,X){var m=g("../../plots/template_attributes").hovertemplateAttrs,v=g("../../plots/template_attributes").texttemplateAttrs,k=g("../../components/colorscale/attributes"),x=g("../../plots/domain").attributes,e=g("../pie/attributes"),t=g("../sunburst/attributes"),r=g("../treemap/attributes"),l=g("../treemap/constants"),n=g("../../lib/extend").extendFlat;Q.exports={labels:t.labels,parents:t.parents,values:t.values,branchvalues:t.branchvalues,count:t.count,level:t.level,maxdepth:t.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:r.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:n({colors:t.marker.colors,line:t.marker.line,editType:"calc"},k("marker",{colorAttr:"colors",anim:!1})),leaf:t.leaf,pathbar:r.pathbar,text:e.text,textinfo:t.textinfo,texttemplate:v({editType:"plot"},{keys:l.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:t.hoverinfo,hovertemplate:m({},{keys:l.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:r.outsidetextfont,textposition:r.textposition,sort:e.sort,root:t.root,domain:x({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"../sunburst/attributes":1058,"../treemap/attributes":1084,"../treemap/constants":1087}],844:[function(g,Q,X){var m=g("../../plots/plots");X.name="icicle",X.plot=function(v,k,x,e){m.plotBasePlot(X.name,v,k,x,e)},X.clean=function(v,k,x,e){m.cleanBasePlot(X.name,v,k,x,e)}},{"../../plots/plots":628}],845:[function(g,Q,X){var m=g("../sunburst/calc");X.calc=function(v,k){return m.calc(v,k)},X.crossTraceCalc=function(v){return m._runCrossTraceCalc("icicle",v)}},{"../sunburst/calc":1060}],846:[function(g,Q,X){var m=g("../../lib"),v=g("./attributes"),k=g("../../components/color"),x=g("../../plots/domain").defaults,e=g("../bar/defaults").handleText,t=g("../bar/constants").TEXTPAD,r=g("../../components/colorscale"),l=r.hasColorscale,n=r.handleDefaults;Q.exports=function(d,u,o,h){function s(w,b){return m.coerce(d,u,v,w,b)}var a=s("labels"),p=s("parents");if(a&&a.length&&p&&p.length){var c=s("values");c&&c.length?s("branchvalues"):s("count"),s("level"),s("maxdepth"),s("tiling.orientation"),s("tiling.flip"),s("tiling.pad");var i=s("text");s("texttemplate"),u.texttemplate||s("textinfo",Array.isArray(i)?"text+label":"label"),s("hovertext"),s("hovertemplate");var y=s("pathbar.visible");e(d,u,h,s,"auto",{hasPathbar:y,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),s("textposition"),s("marker.line.width")&&s("marker.line.color",h.paper_bgcolor),s("marker.colors");var f=u._hasColorscale=l(d,"marker","colors")||(d.marker||{}).coloraxis;f&&n(d,u,h,s,{prefix:"marker.",cLetter:"c"}),s("leaf.opacity",f?1:.7),u._hovered={marker:{line:{width:2,color:k.contrast(h.paper_bgcolor)}}},y&&(s("pathbar.thickness",u.pathbar.textfont.size+2*t),s("pathbar.side"),s("pathbar.edgeshape")),s("sort"),s("root.color"),x(u,h,s),u._length=null}else u.visible=!1}},{"../../components/color":367,"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/constants":659,"../bar/defaults":661,"./attributes":843}],847:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../lib"),k=g("../../components/drawing"),x=g("../../lib/svg_text_utils"),e=g("./partition"),t=g("./style").styleOne,r=g("../treemap/constants"),l=g("../sunburst/helpers"),n=g("../sunburst/fx"),d=g("../sunburst/plot").formatSliceLabel;Q.exports=function(u,o,h,s,a){var p=a.width,c=a.height,i=a.viewX,y=a.viewY,f=a.pathSlice,w=a.toMoveInsideSlice,b=a.strTransform,_=a.hasTransition,T=a.handleSlicesExit,L=a.makeUpdateSliceInterpolator,A=a.makeUpdateTextInterpolator,I=a.prevEntry,P=u._context.staticPlot,S=u._fullLayout,E=o[0].trace,z=E.textposition.indexOf("left")!==-1,D=E.textposition.indexOf("right")!==-1,U=E.textposition.indexOf("bottom")!==-1,H=e(h,[p,c],{flipX:E.tiling.flip.indexOf("x")>-1,flipY:E.tiling.flip.indexOf("y")>-1,orientation:E.tiling.orientation,pad:{inner:E.tiling.pad},maxDepth:E._maxDepth}).descendants(),Y=1/0,J=-1/0;H.forEach(function(B){var j=B.depth;j>=E._maxDepth?(B.x0=B.x1=(B.x0+B.x1)/2,B.y0=B.y1=(B.y0+B.y1)/2):(Y=Math.min(Y,j),J=Math.max(J,j))}),s=s.data(H,l.getPtId),E._maxVisibleLayers=isFinite(J)?J-Y+1:0,s.enter().append("g").classed("slice",!0),T(s,!1,{},[p,c],f),s.order();var W=null;if(_&&I){var Z=l.getPtId(I);s.each(function(B){W===null&&l.getPtId(B)===Z&&(W={x0:B.x0,x1:B.x1,y0:B.y0,y1:B.y1})})}var re=function(){return W||{x0:0,x1:p,y0:0,y1:c}},V=s;return _&&(V=V.transition().each("end",function(){var B=m.select(this);l.setSliceCursor(B,u,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),V.each(function(B){B._x0=i(B.x0),B._x1=i(B.x1),B._y0=y(B.y0),B._y1=y(B.y1),B._hoverX=i(B.x1-E.tiling.pad),B._hoverY=y(U?B.y1-E.tiling.pad/2:B.y0+E.tiling.pad/2);var j=m.select(this),ee=v.ensureSingle(j,"path","surface",function(te){te.style("pointer-events",P?"none":"all")});_?ee.transition().attrTween("d",function(te){var ie=L(te,!1,re(),[p,c],{orientation:E.tiling.orientation,flipX:E.tiling.flip.indexOf("x")>-1,flipY:E.tiling.flip.indexOf("y")>-1});return function(le){return f(ie(le))}}):ee.attr("d",f),j.call(n,h,u,o,{styleOne:t,eventDataKeys:r.eventDataKeys,transitionTime:r.CLICK_TRANSITION_TIME,transitionEasing:r.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,u,{isTransitioning:u._transitioning}),ee.call(t,B,E,{hovered:!1}),B.x0===B.x1||B.y0===B.y1?B._text="":B._text=d(B,h,E,o,S)||"";var N=v.ensureSingle(j,"g","slicetext"),$=v.ensureSingle(N,"text","",function(te){te.attr("data-notex",1)}),K=v.ensureUniformFontSize(u,l.determineTextFont(E,B,S.font));$.text(B._text||" ").classed("slicetext",!0).attr("text-anchor",D?"end":z?"start":"middle").call(k.font,K).call(x.convertToTspans,u),B.textBB=k.bBox($.node()),B.transform=w(B,{fontSize:K.size}),B.transform.fontSize=K.size,_?$.transition().attrTween("transform",function(te){var ie=A(te,!1,re(),[p,c]);return function(le){return b(ie(le))}}):$.attr("transform",b(B))}),W}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"../sunburst/plot":1068,"../treemap/constants":1087,"./partition":851,"./style":853,"@plotly/d3":58}],848:[function(g,Q,X){Q.exports={moduleType:"trace",name:"icicle",basePlotModule:g("./base_plot"),categories:[],animatable:!0,attributes:g("./attributes"),layoutAttributes:g("./layout_attributes"),supplyDefaults:g("./defaults"),supplyLayoutDefaults:g("./layout_defaults"),calc:g("./calc").calc,crossTraceCalc:g("./calc").crossTraceCalc,plot:g("./plot"),style:g("./style").style,colorbar:g("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":843,"./base_plot":844,"./calc":845,"./defaults":846,"./layout_attributes":849,"./layout_defaults":850,"./plot":852,"./style":853}],849:[function(g,Q,X){Q.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],850:[function(g,Q,X){var m=g("../../lib"),v=g("./layout_attributes");Q.exports=function(k,x){function e(t,r){return m.coerce(k,x,v,t,r)}e("iciclecolorway",x.colorway),e("extendiciclecolors")}},{"../../lib":515,"./layout_attributes":849}],851:[function(g,Q,X){var m=g("d3-hierarchy"),v=g("../treemap/flip_tree");Q.exports=function(k,x,e){var t=e.flipX,r=e.flipY,l=e.orientation==="h",n=e.maxDepth,d=x[0],u=x[1];n&&(d=(k.height+1)*x[0]/Math.min(k.height+1,n),u=(k.height+1)*x[1]/Math.min(k.height+1,n));var o=m.partition().padding(e.pad.inner).size(l?[x[1],d]:[x[0],u])(k);return(l||t||r)&&v(o,x,{swapXY:l,flipX:t,flipY:r}),o}},{"../treemap/flip_tree":1092,"d3-hierarchy":115}],852:[function(g,Q,X){var m=g("../treemap/draw"),v=g("./draw_descendants");Q.exports=function(k,x,e,t){return m(k,x,e,t,{type:"icicle",drawDescendants:v})}},{"../treemap/draw":1089,"./draw_descendants":847}],853:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../components/color"),k=g("../../lib"),x=g("../bar/uniform_text").resizeText;function e(t,r,l){var n=r.data.data,d=!r.children,u=n.i,o=k.castOption(l,u,"marker.line.color")||v.defaultLine,h=k.castOption(l,u,"marker.line.width")||0;t.style("stroke-width",h).call(v.fill,n.color).call(v.stroke,o).style("opacity",d?l.leaf.opacity:null)}Q.exports={style:function(t){var r=t._fullLayout._iciclelayer.selectAll(".trace");x(t,r,"icicle"),r.each(function(l){var n=m.select(this),d=l[0].trace;n.style("opacity",d.opacity),n.selectAll("path.surface").each(function(u){m.select(this).call(e,u,d)})})},styleOne:e}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"@plotly/d3":58}],854:[function(g,Q,X){for(var m=g("../../plots/attributes"),v=g("../../plots/template_attributes").hovertemplateAttrs,k=g("../../lib/extend").extendFlat,x=g("./constants").colormodel,e=["rgb","rgba","rgba256","hsl","hsla"],t=[],r=[],l=0;l<e.length;l++){var n=x[e[l]];t.push("For the `"+e[l]+"` colormodel, it is ["+(n.zminDflt||n.min).join(", ")+"]."),r.push("For the `"+e[l]+"` colormodel, it is ["+(n.zmaxDflt||n.max).join(", ")+"].")}Q.exports=k({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:e,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:k({},m.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:v({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"./constants":856}],855:[function(g,Q,X){var m=g("../../lib"),v=g("./constants"),k=g("fast-isnumeric"),x=g("../../plots/cartesian/axes"),e=g("../../lib").maxRowLength,t=g("./helpers").getImageSize;function r(n,d,u,o){return function(h){return m.constrain((h-n)*d,u,o)}}function l(n,d){return function(u){return m.constrain(u,n,d)}}Q.exports=function(n,d){var u,o;if(d._hasZ)u=d.z.length,o=e(d.z);else if(d._hasSource){var h=t(d.source);u=h.height,o=h.width}var s,a=x.getFromId(n,d.xaxis||"x"),p=x.getFromId(n,d.yaxis||"y"),c=a.d2c(d.x0)-d.dx/2,i=p.d2c(d.y0)-d.dy/2,y=[c,c+o*d.dx],f=[i,i+u*d.dy];if(a&&a.type==="log")for(s=0;s<o;s++)y.push(c+s*d.dx);if(p&&p.type==="log")for(s=0;s<u;s++)f.push(i+s*d.dy);return d._extremes[a._id]=x.findExtremes(a,y),d._extremes[p._id]=x.findExtremes(p,f),d._scaler=function(w){var b=v.colormodel[w.colormodel],_=(b.colormodel||w.colormodel).length;w._sArray=[];for(var T=0;T<_;T++)b.min[T]!==w.zmin[T]||b.max[T]!==w.zmax[T]?w._sArray.push(r(w.zmin[T],(b.max[T]-b.min[T])/(w.zmax[T]-w.zmin[T]),b.min[T],b.max[T])):w._sArray.push(l(b.min[T],b.max[T]));return function(L){for(var A=L.slice(0,_),I=0;I<_;I++){var P=A[I];if(!k(P))return!1;A[I]=w._sArray[I](P)}return A}}(d),[{x0:c,y0:i,z:d.z,w:o,h:u}]}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":856,"./helpers":859,"fast-isnumeric":190}],856:[function(g,Q,X){Q.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(m){return m.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(m){return m.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(m){return m.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(m){var v=m.slice(0,3);return v[1]=v[1]+"%",v[2]=v[2]+"%",v},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(m){var v=m.slice(0,4);return v[1]=v[1]+"%",v[2]=v[2]+"%",v},suffix:["\xB0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],857:[function(g,Q,X){var m=g("../../lib"),v=g("./attributes"),k=g("./constants"),x=g("../../snapshot/helpers").IMAGE_URL_PREFIX;Q.exports=function(e,t){function r(d,u){return m.coerce(e,t,v,d,u)}r("source"),t.source&&!t.source.match(x)&&delete t.source,t._hasSource=!!t.source;var l,n=r("z");t._hasZ=!(n===void 0||!n.length||!n[0]||!n[0].length),t._hasZ||t._hasSource?(r("x0"),r("y0"),r("dx"),r("dy"),t._hasZ?(r("colormodel","rgb"),r("zmin",(l=k.colormodel[t.colormodel]).zminDflt||l.min),r("zmax",l.zmaxDflt||l.max)):t._hasSource&&(t.colormodel="rgba256",l=k.colormodel[t.colormodel],t.zmin=l.zminDflt,t.zmax=l.zmaxDflt),r("zsmooth"),r("text"),r("hovertext"),r("hovertemplate"),t._length=null):t.visible=!1}},{"../../lib":515,"../../snapshot/helpers":651,"./attributes":854,"./constants":856}],858:[function(g,Q,X){Q.exports=function(m,v){return"xVal"in v&&(m.x=v.xVal),"yVal"in v&&(m.y=v.yVal),v.xa&&(m.xaxis=v.xa),v.ya&&(m.yaxis=v.ya),m.color=v.color,m.colormodel=v.trace.colormodel,m.z||(m.z=v.color),m}},{}],859:[function(g,Q,X){var m=g("probe-image-size/sync"),v=g("../../snapshot/helpers").IMAGE_URL_PREFIX,k=g("buffer/").Buffer;X.getImageSize=function(x){var e=x.replace(v,""),t=new k(e,"base64");return m(t)}},{"../../snapshot/helpers":651,"buffer/":85,"probe-image-size/sync":277}],860:[function(g,Q,X){var m=g("../../components/fx"),v=g("../../lib"),k=g("./constants");Q.exports=function(x,e,t){var r=x.cd[0],l=r.trace,n=x.xa,d=x.ya;if(!(m.inbox(e-r.x0,e-(r.x0+r.w*l.dx),0)>0||m.inbox(t-r.y0,t-(r.y0+r.h*l.dy),0)>0)){var u,o=Math.floor((e-r.x0)/l.dx),h=Math.floor(Math.abs(t-r.y0)/l.dy);if(l._hasZ?u=r.z[h][o]:l._hasSource&&(u=l._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(o,h,1,1).data),u){var s,a=r.hi||l.hoverinfo;if(a){var p=a.split("+");p.indexOf("all")!==-1&&(p=["color"]),p.indexOf("color")!==-1&&(s=!0)}var c,i=k.colormodel[l.colormodel],y=i.colormodel||l.colormodel,f=y.length,w=l._scaler(u),b=i.suffix,_=[];(l.hovertemplate||s)&&(_.push("["+[w[0]+b[0],w[1]+b[1],w[2]+b[2]].join(", ")),f===4&&_.push(", "+w[3]+b[3]),_.push("]"),_=_.join(""),x.extraText=y.toUpperCase()+": "+_),Array.isArray(l.hovertext)&&Array.isArray(l.hovertext[h])?c=l.hovertext[h][o]:Array.isArray(l.text)&&Array.isArray(l.text[h])&&(c=l.text[h][o]);var T=d.c2p(r.y0+(h+.5)*l.dy),L=r.x0+(o+.5)*l.dx,A=r.y0+(h+.5)*l.dy,I="["+u.slice(0,l.colormodel.length).join(", ")+"]";return[v.extendFlat(x,{index:[h,o],x0:n.c2p(r.x0+o*l.dx),x1:n.c2p(r.x0+(o+1)*l.dx),y0:T,y1:T,color:w,xVal:L,xLabelVal:L,yVal:A,yLabelVal:A,zLabelVal:I,text:c,hovertemplateLabels:{zLabel:I,colorLabel:_,"color[0]Label":w[0]+b[0],"color[1]Label":w[1]+b[1],"color[2]Label":w[2]+b[2],"color[3]Label":w[3]+b[3]}})]}}}},{"../../components/fx":407,"../../lib":515,"./constants":856}],861:[function(g,Q,X){Q.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),calc:g("./calc"),plot:g("./plot"),style:g("./style"),hoverPoints:g("./hover"),eventData:g("./event_data"),moduleType:"trace",name:"image",basePlotModule:g("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":578,"./attributes":854,"./calc":855,"./defaults":857,"./event_data":858,"./hover":860,"./plot":862,"./style":863}],862:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../lib"),k=v.strTranslate,x=g("../../constants/xmlns_namespaces"),e=g("./constants"),t=v.isIOS()||v.isSafari()||v.isIE();Q.exports=function(r,l,n,d){var u=l.xaxis,o=l.yaxis,h=!(t||r._context._exportedPlot);v.makeTraceGroups(d,n,"im").each(function(s){var a=m.select(this),p=s[0],c=p.trace,i=(c.zsmooth==="fast"||c.zsmooth===!1&&h)&&!c._hasZ&&c._hasSource&&u.type==="linear"&&o.type==="linear";c._realImage=i;var y,f,w,b,_,T,L=p.z,A=p.x0,I=p.y0,P=p.w,S=p.h,E=c.dx,z=c.dy;for(T=0;y===void 0&&T<P;)y=u.c2p(A+T*E),T++;for(T=P;f===void 0&&T>0;)f=u.c2p(A+T*E),T--;for(T=0;b===void 0&&T<S;)b=o.c2p(I+T*z),T++;for(T=S;_===void 0&&T>0;)_=o.c2p(I+T*z),T--;f<y&&(w=f,f=y,y=w),_<b&&(w=b,b=_,_=w),!i&&(y=Math.max(-.5*u._length,y),f=Math.min(1.5*u._length,f),b=Math.max(-.5*o._length,b),_=Math.min(1.5*o._length,_));var D=Math.round(f-y),U=Math.round(_-b);if(D<=0||U<=0)a.selectAll("image").data([]).exit().remove();else{var H=a.selectAll("image").data([s]);H.enter().append("svg:image").attr({xmlns:x.svg,preserveAspectRatio:"none"}),H.exit().remove();var Y=c.zsmooth===!1?e.pixelatedStyle:"";if(i){var J=v.simpleMap(u.range,u.r2l),W=v.simpleMap(o.range,o.r2l),Z=J[1]<J[0],re=W[1]>W[0];if(Z||re){var V=y+D/2,B=b+U/2;Y+="transform:"+k(V+"px",B+"px")+"scale("+(Z?-1:1)+","+(re?-1:1)+")"+k(-V+"px",-B+"px")+";"}}H.attr("style",Y);var j=new Promise(function(N){if(c._hasZ)N();else if(c._hasSource)if(c._canvas&&c._canvas.el.width===P&&c._canvas.el.height===S&&c._canvas.source===c.source)N();else{var $=document.createElement("canvas");$.width=P,$.height=S;var K=$.getContext("2d",{willReadFrequently:!0});c._image=c._image||new Image;var te=c._image;te.onload=function(){K.drawImage(te,0,0),c._canvas={el:$,source:c.source},N()},te.setAttribute("src",c.source)}}).then(function(){var N;if(c._hasZ)N=ee(function(K,te){return L[te][K]}).toDataURL("image/png");else if(c._hasSource)if(i)N=c.source;else{var $=c._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,P,S).data;N=ee(function(K,te){var ie=4*(te*P+K);return[$[ie],$[ie+1],$[ie+2],$[ie+3]]}).toDataURL("image/png")}H.attr({"xlink:href":N,height:U,width:D,x:y,y:b})});r._promises.push(j)}function ee(N){var $=document.createElement("canvas");$.width=D,$.height=U;var K,te=$.getContext("2d",{willReadFrequently:!0}),ie=function(oe){return v.constrain(Math.round(u.c2p(A+oe*E)-y),0,D)},le=function(oe){return v.constrain(Math.round(o.c2p(I+oe*z)-b),0,U)},se=e.colormodel[c.colormodel],ve=se.colormodel||c.colormodel,fe=se.fmt;for(T=0;T<p.w;T++){var ye=ie(T),Ae=ie(T+1);if(Ae!==ye&&!isNaN(Ae)&&!isNaN(ye))for(var pe=0;pe<p.h;pe++){var ge=le(pe),we=le(pe+1);we===ge||isNaN(we)||isNaN(ge)||!N(T,pe)||(K=c._scaler(N(T,pe)),te.fillStyle=K?ve+"("+fe(K).join(",")+")":"rgba(0,0,0,0)",te.fillRect(ye,ge,Ae-ye,we-ge))}}return $}})}},{"../../constants/xmlns_namespaces":492,"../../lib":515,"./constants":856,"@plotly/d3":58}],863:[function(g,Q,X){var m=g("@plotly/d3");Q.exports=function(v){m.select(v).selectAll(".im image").style("opacity",function(k){return k[0].trace.opacity})}},{"@plotly/d3":58}],864:[function(g,Q,X){var m=g("../../lib/extend").extendFlat,v=g("../../lib/extend").extendDeep,k=g("../../plot_api/edit_types").overrideAll,x=g("../../plots/font_attributes"),e=g("../../components/color/attributes"),t=g("../../plots/domain").attributes,r=g("../../plots/cartesian/layout_attributes"),l=g("../../plot_api/plot_template").templatedArray,n=g("../../constants/delta.js"),d=g("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,u=x({editType:"plot",colorEditType:"plot"}),o={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:e.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},h={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},s=l("step",v({},o,{range:h}));Q.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:t({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:m({},u,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:d("value")},font:m({},u,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:d("value")},increasing:{symbol:{valType:"string",dflt:n.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:n.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:n.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:n.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:m({},u,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:v({},o,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:k({range:h,visible:m({},r.visible,{dflt:!0}),tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:m({},r.ticks,{dflt:"outside"}),ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,ticklabelstep:r.ticklabelstep,showticklabels:r.showticklabels,tickfont:x({}),tickangle:r.tickangle,tickformat:r.tickformat,tickformatstops:r.tickformatstops,tickprefix:r.tickprefix,showtickprefix:r.showtickprefix,ticksuffix:r.ticksuffix,showticksuffix:r.showticksuffix,separatethousands:r.separatethousands,exponentformat:r.exponentformat,minexponent:r.minexponent,showexponent:r.showexponent,editType:"plot"},"plot"),steps:s,threshold:{line:{color:m({},o.line.color,{}),width:m({},o.line.width,{dflt:1}),editType:"plot"},thickness:m({},o.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":366,"../../constants/delta.js":485,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/layout_attributes":579,"../../plots/domain":593,"../../plots/font_attributes":594}],865:[function(g,Q,X){var m=g("../../plots/plots");X.name="indicator",X.plot=function(v,k,x,e){m.plotBasePlot(X.name,v,k,x,e)},X.clean=function(v,k,x,e){m.cleanBasePlot(X.name,v,k,x,e)}},{"../../plots/plots":628}],866:[function(g,Q,X){Q.exports={calc:function(m,v){var k=[],x=v.value;typeof v._lastValue!="number"&&(v._lastValue=v.value);var e=v._lastValue,t=e;return v._hasDelta&&typeof v.delta.reference=="number"&&(t=v.delta.reference),k[0]={y:x,lastY:e,delta:x-t,relativeDelta:(x-t)/t},k}}},{}],867:[function(g,Q,X){Q.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],868:[function(g,Q,X){var m=g("../../lib"),v=g("./attributes"),k=g("../../plots/domain").defaults,x=g("../../plot_api/plot_template"),e=g("../../plots/array_container_defaults"),t=g("./constants.js"),r=g("../../plots/cartesian/tick_value_defaults"),l=g("../../plots/cartesian/tick_mark_defaults"),n=g("../../plots/cartesian/tick_label_defaults"),d=g("../../plots/cartesian/prefix_suffix_defaults");function u(o,h){function s(a,p){return m.coerce(o,h,v.gauge.steps,a,p)}s("color"),s("line.color"),s("line.width"),s("range"),s("thickness")}Q.exports={supplyDefaults:function(o,h,s,a){function p(P,S){return m.coerce(o,h,v,P,S)}k(h,a,p),p("mode"),h._hasNumber=h.mode.indexOf("number")!==-1,h._hasDelta=h.mode.indexOf("delta")!==-1,h._hasGauge=h.mode.indexOf("gauge")!==-1;var c=p("value");h._range=[0,typeof c=="number"?1.5*c:1];var i,y,f,w,b,_,T=new Array(2);function L(P,S){return m.coerce(f,w,v.gauge,P,S)}function A(P,S){return m.coerce(b,_,v.gauge.axis,P,S)}if(h._hasNumber&&(p("number.valueformat"),p("number.font.color",a.font.color),p("number.font.family",a.font.family),p("number.font.size"),h.number.font.size===void 0&&(h.number.font.size=t.defaultNumberFontSize,T[0]=!0),p("number.prefix"),p("number.suffix"),i=h.number.font.size),h._hasDelta&&(p("delta.font.color",a.font.color),p("delta.font.family",a.font.family),p("delta.font.size"),h.delta.font.size===void 0&&(h.delta.font.size=(h._hasNumber?.5:1)*(i||t.defaultNumberFontSize),T[1]=!0),p("delta.reference",h.value),p("delta.relative"),p("delta.valueformat",h.delta.relative?"2%":""),p("delta.increasing.symbol"),p("delta.increasing.color"),p("delta.decreasing.symbol"),p("delta.decreasing.color"),p("delta.position"),p("delta.prefix"),p("delta.suffix"),y=h.delta.font.size),h._scaleNumbers=(!h._hasNumber||T[0])&&(!h._hasDelta||T[1])||!1,p("title.font.color",a.font.color),p("title.font.family",a.font.family),p("title.font.size",.25*(i||y||t.defaultNumberFontSize)),p("title.text"),h._hasGauge){(f=o.gauge)||(f={}),w=x.newContainer(h,"gauge"),L("shape"),(h._isBullet=h.gauge.shape==="bullet")||p("title.align","center"),(h._isAngular=h.gauge.shape==="angular")||p("align","center"),L("bgcolor",a.paper_bgcolor),L("borderwidth"),L("bordercolor"),L("bar.color"),L("bar.line.color"),L("bar.line.width"),L("bar.thickness",t.valueThickness*(h.gauge.shape==="bullet"?.5:1)),e(f,w,{name:"steps",handleItemDefaults:u}),L("threshold.value"),L("threshold.thickness"),L("threshold.line.width"),L("threshold.line.color"),b={},f&&(b=f.axis||{}),_=x.newContainer(w,"axis"),A("visible"),h._range=A("range",h._range);var I={outerTicks:!0};r(b,_,A,"linear"),d(b,_,A,"linear",I),n(b,_,A,"linear",I),l(b,_,A,I)}else p("title.align","center"),p("align","center"),h._isAngular=h._isBullet=!1;h._length=null}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_mark_defaults":588,"../../plots/cartesian/tick_value_defaults":589,"../../plots/domain":593,"./attributes":864,"./constants.js":867}],869:[function(g,Q,X){Q.exports={moduleType:"trace",name:"indicator",basePlotModule:g("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:g("./attributes"),supplyDefaults:g("./defaults").supplyDefaults,calc:g("./calc").calc,plot:g("./plot"),meta:{}}},{"./attributes":864,"./base_plot":865,"./calc":866,"./defaults":868,"./plot":870}],870:[function(g,Q,X){var m=g("@plotly/d3"),v=g("d3-interpolate").interpolate,k=g("d3-interpolate").interpolateNumber,x=g("../../lib"),e=x.strScale,t=x.strTranslate,r=x.rad2deg,l=g("../../constants/alignment").MID_SHIFT,n=g("../../components/drawing"),d=g("./constants"),u=g("../../lib/svg_text_utils"),o=g("../../plots/cartesian/axes"),h=g("../../plots/cartesian/axis_defaults"),s=g("../../plots/cartesian/position_defaults"),a=g("../../plots/cartesian/layout_attributes"),p=g("../../components/color"),c={left:"start",center:"middle",right:"end"},i={left:0,center:.5,right:1},y=/[yzafpn\xb5mkMGTPEZY]/;function f(A){return A&&A.duration>0}function w(A){A.each(function(I){p.stroke(m.select(this),I.line.color)}).each(function(I){p.fill(m.select(this),I.color)}).style("stroke-width",function(I){return I.line.width})}function b(A,I,P){var S=A._fullLayout,E=x.extendFlat({type:"linear",ticks:"outside",range:P,showline:!0},I),z={type:"linear",_id:"x"+I._id},D={letter:"x",font:S.font,noHover:!0,noTickson:!0};function U(H,Y){return x.coerce(E,z,a,H,Y)}return h(E,z,U,D,S),s(E,z,U,D),z}function _(A,I,P){return[Math.min(I/A.width,P/A.height),A,I+"x"+P]}function T(A,I,P,S){var E=document.createElementNS("http://www.w3.org/2000/svg","text"),z=m.select(E);return z.text(A).attr("x",0).attr("y",0).attr("text-anchor",P).attr("data-unformatted",A).call(u.convertToTspans,S).call(n.font,I),n.bBox(z.node())}function L(A,I,P,S,E,z){var D="_cache"+I;A[D]&&A[D].key===E||(A[D]={key:E,value:P});var U=x.aggNums(z,null,[A[D].value,S],2);return A[D].value=U,U}Q.exports=function(A,I,P,S){var E,z=A._fullLayout;f(P)&&S&&(E=S()),x.makeTraceGroups(z._indicatorlayer,I,"trace").each(function(D){var U,H,Y,J,W,Z=D[0].trace,re=m.select(this),V=Z._hasGauge,B=Z._isAngular,j=Z._isBullet,ee=Z.domain,N={w:z._size.w*(ee.x[1]-ee.x[0]),h:z._size.h*(ee.y[1]-ee.y[0]),l:z._size.l+z._size.w*ee.x[0],r:z._size.r+z._size.w*(1-ee.x[1]),t:z._size.t+z._size.h*(1-ee.y[1]),b:z._size.b+z._size.h*ee.y[0]},$=N.l+N.w/2,K=N.t+N.h/2,te=Math.min(N.w/2,N.h),ie=d.innerRadius*te,le=Z.align||"center";if(H=K,V){if(B&&(U=$,H=K+te/2,Y=function(we){return function(oe,de){var Te=Math.sqrt(oe.width/2*(oe.width/2)+oe.height*oe.height);return[de/Te,oe,de]}(we,.9*ie)}),j){var se=d.bulletPadding,ve=1-d.bulletNumberDomainSize+se;U=N.l+(ve+(1-ve)*i[le])*N.w,Y=function(we){return _(we,(d.bulletNumberDomainSize-se)*N.w,N.h)}}}else U=N.l+i[le]*N.w,Y=function(we){return _(we,N.w,N.h)};(function(we,oe,de,Te){var Ee,Me,De,Ie=de[0].trace,Oe=Te.numbersX,Ze=Te.numbersY,Fe=Ie.align||"center",Pe=c[Fe],ze=Te.transitionOpts,Ge=Te.onComplete,$e=x.ensureSingle(oe,"g","numbers"),ot=[];Ie._hasNumber&&ot.push("number"),Ie._hasDelta&&(ot.push("delta"),Ie.delta.position==="left"&&ot.reverse());var vt=$e.selectAll("text").data(ot);function bt(Gt,nr,It,Be){if(!Gt.match("s")||It>=0==Be>=0||nr(It).slice(-1).match(y)||nr(Be).slice(-1).match(y))return nr;var He=Gt.slice().replace("s","f").replace(/\d+/,function(be){return parseInt(be)-1}),he=b(we,{tickformat:He});return function(be){return Math.abs(be)<1?o.tickText(he,be).text:nr(be)}}vt.enter().append("text"),vt.attr("text-anchor",function(){return Pe}).attr("class",function(Gt){return Gt}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),vt.exit().remove();var yt,tt=Ie.mode+Ie.align;if(Ie._hasDelta&&(yt=function(){var Gt=b(we,{tickformat:Ie.delta.valueformat},Ie._range);Gt.setScale(),o.prepTicks(Gt);var nr=function(Xe){return o.tickText(Gt,Xe).text},It=Ie.delta.suffix,Be=Ie.delta.prefix,He=function(Xe){return Ie.delta.relative?Xe.relativeDelta:Xe.delta},he=function(Xe,qe){return Xe===0||typeof Xe!="number"||isNaN(Xe)?"-":(Xe>0?Ie.delta.increasing.symbol:Ie.delta.decreasing.symbol)+Be+qe(Xe)+It},be=function(Xe){return Xe.delta>=0?Ie.delta.increasing.color:Ie.delta.decreasing.color};Ie._deltaLastValue===void 0&&(Ie._deltaLastValue=He(de[0]));var Re=$e.select("text.delta");function Ue(){Re.text(he(He(de[0]),nr)).call(p.fill,be(de[0])).call(u.convertToTspans,we)}return Re.call(n.font,Ie.delta.font).call(p.fill,be({delta:Ie._deltaLastValue})),f(ze)?Re.transition().duration(ze.duration).ease(ze.easing).tween("text",function(){var Xe=m.select(this),qe=He(de[0]),st=Ie._deltaLastValue,it=bt(Ie.delta.valueformat,nr,st,qe),Tt=k(st,qe);return Ie._deltaLastValue=qe,function(Pt){Xe.text(he(Tt(Pt),it)),Xe.call(p.fill,be({delta:Tt(Pt)}))}}).each("end",function(){Ue(),Ge&&Ge()}).each("interrupt",function(){Ue(),Ge&&Ge()}):Ue(),Me=T(he(He(de[0]),nr),Ie.delta.font,Pe,we),Re}(),tt+=Ie.delta.position+Ie.delta.font.size+Ie.delta.font.family+Ie.delta.valueformat,tt+=Ie.delta.increasing.symbol+Ie.delta.decreasing.symbol,De=Me),Ie._hasNumber&&(function(){var Gt=b(we,{tickformat:Ie.number.valueformat},Ie._range);Gt.setScale(),o.prepTicks(Gt);var nr=function(be){return o.tickText(Gt,be).text},It=Ie.number.suffix,Be=Ie.number.prefix,He=$e.select("text.number");function he(){var be=typeof de[0].y=="number"?Be+nr(de[0].y)+It:"-";He.text(be).call(n.font,Ie.number.font).call(u.convertToTspans,we)}f(ze)?He.transition().duration(ze.duration).ease(ze.easing).each("end",function(){he(),Ge&&Ge()}).each("interrupt",function(){he(),Ge&&Ge()}).attrTween("text",function(){var be=m.select(this),Re=k(de[0].lastY,de[0].y);Ie._lastValue=de[0].y;var Ue=bt(Ie.number.valueformat,nr,de[0].lastY,de[0].y);return function(Xe){be.text(Be+Ue(Re(Xe))+It)}}):he(),Ee=T(Be+nr(de[0].y)+It,Ie.number.font,Pe,we)}(),tt+=Ie.number.font.size+Ie.number.font.family+Ie.number.valueformat+Ie.number.suffix+Ie.number.prefix,De=Ee),Ie._hasDelta&&Ie._hasNumber){var Ke,mt,Ft=[(Ee.left+Ee.right)/2,(Ee.top+Ee.bottom)/2],Vt=[(Me.left+Me.right)/2,(Me.top+Me.bottom)/2],Xt=.75*Ie.delta.font.size;Ie.delta.position==="left"&&(Ke=L(Ie,"deltaPos",0,-1*(Ee.width*i[Ie.align]+Me.width*(1-i[Ie.align])+Xt),tt,Math.min),mt=Ft[1]-Vt[1],De={width:Ee.width+Me.width+Xt,height:Math.max(Ee.height,Me.height),left:Me.left+Ke,right:Ee.right,top:Math.min(Ee.top,Me.top+mt),bottom:Math.max(Ee.bottom,Me.bottom+mt)}),Ie.delta.position==="right"&&(Ke=L(Ie,"deltaPos",0,Ee.width*(1-i[Ie.align])+Me.width*i[Ie.align]+Xt,tt,Math.max),mt=Ft[1]-Vt[1],De={width:Ee.width+Me.width+Xt,height:Math.max(Ee.height,Me.height),left:Ee.left,right:Me.right+Ke,top:Math.min(Ee.top,Me.top+mt),bottom:Math.max(Ee.bottom,Me.bottom+mt)}),Ie.delta.position==="bottom"&&(Ke=null,mt=Me.height,De={width:Math.max(Ee.width,Me.width),height:Ee.height+Me.height,left:Math.min(Ee.left,Me.left),right:Math.max(Ee.right,Me.right),top:Ee.bottom-Ee.height,bottom:Ee.bottom+Me.height}),Ie.delta.position==="top"&&(Ke=null,mt=Ee.top,De={width:Math.max(Ee.width,Me.width),height:Ee.height+Me.height,left:Math.min(Ee.left,Me.left),right:Math.max(Ee.right,Me.right),top:Ee.bottom-Ee.height-Me.height,bottom:Ee.bottom}),yt.attr({dx:Ke,dy:mt})}(Ie._hasNumber||Ie._hasDelta)&&$e.attr("transform",function(){var Gt=Te.numbersScaler(De);tt+=Gt[2];var nr,It=L(Ie,"numbersScale",1,Gt[0],tt,Math.min);Ie._scaleNumbers||(It=1),nr=Ie._isAngular?Ze-It*De.bottom:Ze-It*(De.top+De.bottom)/2,Ie._numbersTop=It*De.top+nr;var Be=De[Fe];Fe==="center"&&(Be=(De.left+De.right)/2);var He=Oe-It*Be;return He=L(Ie,"numbersTranslate",0,He,tt,Math.max),t(He,nr)+e(It)})})(A,re,D,{numbersX:U,numbersY:H,numbersScaler:Y,transitionOpts:P,onComplete:E}),V&&(J={range:Z.gauge.axis.range,color:Z.gauge.bgcolor,line:{color:Z.gauge.bordercolor,width:0},thickness:1},W={range:Z.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:Z.gauge.bordercolor,width:Z.gauge.borderwidth},thickness:1});var fe=re.selectAll("g.angular").data(B?D:[]);fe.exit().remove();var ye=re.selectAll("g.angularaxis").data(B?D:[]);ye.exit().remove(),B&&function(we,oe,de,Te){var Ee,Me,De,Ie,Oe=de[0].trace,Ze=Te.size,Fe=Te.radius,Pe=Te.innerRadius,ze=Te.gaugeBg,Ge=Te.gaugeOutline,$e=[Ze.l+Ze.w/2,Ze.t+Ze.h/2+Fe/2],ot=Te.gauge,vt=Te.layer,bt=Te.transitionOpts,yt=Te.onComplete,tt=Math.PI/2;function Ke(Pt){var rt=Oe.gauge.axis.range[0],ut=(Pt-rt)/(Oe.gauge.axis.range[1]-rt)*Math.PI-tt;return ut<-tt?-tt:ut>tt?tt:ut}function mt(Pt){return m.svg.arc().innerRadius((Pe+Fe)/2-Pt/2*(Fe-Pe)).outerRadius((Pe+Fe)/2+Pt/2*(Fe-Pe)).startAngle(-tt)}function Ft(Pt){Pt.attr("d",function(rt){return mt(rt.thickness).startAngle(Ke(rt.range[0])).endAngle(Ke(rt.range[1]))()})}ot.enter().append("g").classed("angular",!0),ot.attr("transform",t($e[0],$e[1])),vt.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),vt.selectAll("g.xangularaxistick,path,text").remove(),(Ee=b(we,Oe.gauge.axis)).type="linear",Ee.range=Oe.gauge.axis.range,Ee._id="xangularaxis",Ee.ticklabeloverflow="allow",Ee.setScale();var Vt=function(Pt){return(Ee.range[0]-Pt.x)/(Ee.range[1]-Ee.range[0])*Math.PI+Math.PI},Xt={},Gt=o.makeLabelFns(Ee,0).labelStandoff;Xt.xFn=function(Pt){var rt=Vt(Pt);return Math.cos(rt)*Gt},Xt.yFn=function(Pt){var rt=Vt(Pt),ut=Math.sin(rt)>0?.2:1;return-Math.sin(rt)*(Gt+Pt.fontSize*ut)+Math.abs(Math.cos(rt))*(Pt.fontSize*l)},Xt.anchorFn=function(Pt){var rt=Vt(Pt),ut=Math.cos(rt);return Math.abs(ut)<.1?"middle":ut>0?"start":"end"},Xt.heightFn=function(Pt,rt,ut){var Bt=Vt(Pt);return-.5*(1+Math.sin(Bt))*ut};var nr=function(Pt){return t($e[0]+Fe*Math.cos(Pt),$e[1]-Fe*Math.sin(Pt))};if(De=function(Pt){return nr(Vt(Pt))},Me=o.calcTicks(Ee),Ie=o.getTickSigns(Ee)[2],Ee.visible){Ie=Ee.ticks==="inside"?-1:1;var It=(Ee.linewidth||1)/2;o.drawTicks(we,Ee,{vals:Me,layer:vt,path:"M"+Ie*It+",0h"+Ie*Ee.ticklen,transFn:function(Pt){var rt=Vt(Pt);return nr(rt)+"rotate("+-r(rt)+")"}}),o.drawLabels(we,Ee,{vals:Me,layer:vt,transFn:De,labelFns:Xt})}var Be=[ze].concat(Oe.gauge.steps),He=ot.selectAll("g.bg-arc").data(Be);He.enter().append("g").classed("bg-arc",!0).append("path"),He.select("path").call(Ft).call(w),He.exit().remove();var he=mt(Oe.gauge.bar.thickness),be=ot.selectAll("g.value-arc").data([Oe.gauge.bar]);be.enter().append("g").classed("value-arc",!0).append("path");var Re=be.select("path");f(bt)?(Re.transition().duration(bt.duration).ease(bt.easing).each("end",function(){yt&&yt()}).each("interrupt",function(){yt&&yt()}).attrTween("d",(Ue=he,Xe=Ke(de[0].lastY),qe=Ke(de[0].y),function(){var Pt=v(Xe,qe);return function(rt){return Ue.endAngle(Pt(rt))()}})),Oe._lastValue=de[0].y):Re.attr("d",typeof de[0].y=="number"?he.endAngle(Ke(de[0].y)):"M0,0Z");var Ue,Xe,qe;Re.call(w),be.exit().remove(),Be=[];var st=Oe.gauge.threshold.value;(st||st===0)&&Be.push({range:[st,st],color:Oe.gauge.threshold.color,line:{color:Oe.gauge.threshold.line.color,width:Oe.gauge.threshold.line.width},thickness:Oe.gauge.threshold.thickness});var it=ot.selectAll("g.threshold-arc").data(Be);it.enter().append("g").classed("threshold-arc",!0).append("path"),it.select("path").call(Ft).call(w),it.exit().remove();var Tt=ot.selectAll("g.gauge-outline").data([Ge]);Tt.enter().append("g").classed("gauge-outline",!0).append("path"),Tt.select("path").call(Ft).call(w),Tt.exit().remove()}(A,0,D,{radius:te,innerRadius:ie,gauge:fe,layer:ye,size:N,gaugeBg:J,gaugeOutline:W,transitionOpts:P,onComplete:E});var Ae=re.selectAll("g.bullet").data(j?D:[]);Ae.exit().remove();var pe=re.selectAll("g.bulletaxis").data(j?D:[]);pe.exit().remove(),j&&function(we,oe,de,Te){var Ee,Me,De,Ie,Oe,Ze=de[0].trace,Fe=Te.gauge,Pe=Te.layer,ze=Te.gaugeBg,Ge=Te.gaugeOutline,$e=Te.size,ot=Ze.domain,vt=Te.transitionOpts,bt=Te.onComplete;Fe.enter().append("g").classed("bullet",!0),Fe.attr("transform",t($e.l,$e.t)),Pe.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Pe.selectAll("g.xbulletaxistick,path,text").remove();var yt=$e.h,tt=Ze.gauge.bar.thickness*yt,Ke=ot.x[0],mt=ot.x[0]+(ot.x[1]-ot.x[0])*(Ze._hasNumber||Ze._hasDelta?1-d.bulletNumberDomainSize:1);(Ee=b(we,Ze.gauge.axis))._id="xbulletaxis",Ee.domain=[Ke,mt],Ee.setScale(),Me=o.calcTicks(Ee),De=o.makeTransTickFn(Ee),Ie=o.getTickSigns(Ee)[2],Oe=$e.t+$e.h,Ee.visible&&(o.drawTicks(we,Ee,{vals:Ee.ticks==="inside"?o.clipEnds(Ee,Me):Me,layer:Pe,path:o.makeTickPath(Ee,Oe,Ie),transFn:De}),o.drawLabels(we,Ee,{vals:Me,layer:Pe,transFn:De,labelFns:o.makeLabelFns(Ee,Oe)}));function Ft(He){He.attr("width",function(he){return Math.max(0,Ee.c2p(he.range[1])-Ee.c2p(he.range[0]))}).attr("x",function(he){return Ee.c2p(he.range[0])}).attr("y",function(he){return .5*(1-he.thickness)*yt}).attr("height",function(he){return he.thickness*yt})}var Vt=[ze].concat(Ze.gauge.steps),Xt=Fe.selectAll("g.bg-bullet").data(Vt);Xt.enter().append("g").classed("bg-bullet",!0).append("rect"),Xt.select("rect").call(Ft).call(w),Xt.exit().remove();var Gt=Fe.selectAll("g.value-bullet").data([Ze.gauge.bar]);Gt.enter().append("g").classed("value-bullet",!0).append("rect"),Gt.select("rect").attr("height",tt).attr("y",(yt-tt)/2).call(w),f(vt)?Gt.select("rect").transition().duration(vt.duration).ease(vt.easing).each("end",function(){bt&&bt()}).each("interrupt",function(){bt&&bt()}).attr("width",Math.max(0,Ee.c2p(Math.min(Ze.gauge.axis.range[1],de[0].y)))):Gt.select("rect").attr("width",typeof de[0].y=="number"?Math.max(0,Ee.c2p(Math.min(Ze.gauge.axis.range[1],de[0].y))):0),Gt.exit().remove();var nr=de.filter(function(){return Ze.gauge.threshold.value||Ze.gauge.threshold.value===0}),It=Fe.selectAll("g.threshold-bullet").data(nr);It.enter().append("g").classed("threshold-bullet",!0).append("line"),It.select("line").attr("x1",Ee.c2p(Ze.gauge.threshold.value)).attr("x2",Ee.c2p(Ze.gauge.threshold.value)).attr("y1",(1-Ze.gauge.threshold.thickness)/2*yt).attr("y2",(1-(1-Ze.gauge.threshold.thickness)/2)*yt).call(p.stroke,Ze.gauge.threshold.line.color).style("stroke-width",Ze.gauge.threshold.line.width),It.exit().remove();var Be=Fe.selectAll("g.gauge-outline").data([Ge]);Be.enter().append("g").classed("gauge-outline",!0).append("rect"),Be.select("rect").call(Ft).call(w),Be.exit().remove()}(A,0,D,{gauge:Ae,layer:pe,size:N,gaugeBg:J,gaugeOutline:W,transitionOpts:P,onComplete:E});var ge=re.selectAll("text.title").data(D);ge.exit().remove(),ge.enter().append("text").classed("title",!0),ge.attr("text-anchor",function(){return j?c.right:c[Z.title.align]}).text(Z.title.text).call(n.font,Z.title.font).call(u.convertToTspans,A),ge.attr("transform",function(){var we,oe=N.l+N.w*i[Z.title.align],de=d.titlePadding,Te=n.bBox(ge.node());return V?(B&&(Z.gauge.axis.visible?we=n.bBox(ye.node()).top-de-Te.bottom:we=N.t+N.h/2-te/2-Te.bottom-de),j&&(we=H-(Te.top+Te.bottom)/2,oe=N.l-d.bulletPadding*N.w)):we=Z._numbersTop-de-Te.bottom,t(oe,we)})})}},{"../../components/color":367,"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_defaults":568,"../../plots/cartesian/layout_attributes":579,"../../plots/cartesian/position_defaults":582,"./constants":867,"@plotly/d3":58,"d3-interpolate":116}],871:[function(g,Q,X){var m=g("../../components/colorscale/attributes"),v=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,k=g("../../plots/template_attributes").hovertemplateAttrs,x=g("../mesh3d/attributes"),e=g("../../plots/attributes"),t=g("../../lib/extend").extendFlat,r=g("../../plot_api/edit_types").overrideAll,l=Q.exports=r(t({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:k(),xhoverformat:v("x"),yhoverformat:v("y"),zhoverformat:v("z"),valuehoverformat:v("value",1),showlegend:t({},e.showlegend,{dflt:!1})},m("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:x.opacity,lightposition:x.lightposition,lighting:x.lighting,flatshading:x.flatshading,contour:x.contour,hoverinfo:t({},e.hoverinfo)}),"calc","nested");l.flatshading.dflt=!0,l.lighting.facenormalsepsilon.dflt=0,l.x.editType=l.y.editType=l.z.editType=l.value.editType="calc+clearAxisTypes",l.transforms=void 0},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],872:[function(g,Q,X){var m=g("../../components/colorscale/calc"),v=g("../streamtube/calc").processGrid,k=g("../streamtube/calc").filter;Q.exports=function(x,e){e._len=Math.min(e.x.length,e.y.length,e.z.length,e.value.length),e._x=k(e.x,e._len),e._y=k(e.y,e._len),e._z=k(e.z,e._len),e._value=k(e.value,e._len);var t=v(e);e._gridFill=t.fill,e._Xs=t.Xs,e._Ys=t.Ys,e._Zs=t.Zs,e._len=t.len;for(var r=1/0,l=-1/0,n=0;n<e._len;n++){var d=e._value[n];r=Math.min(r,d),l=Math.max(l,d)}e._minValues=r,e._maxValues=l,e._vMin=e.isomin===void 0||e.isomin===null?r:e.isomin,e._vMax=e.isomax===void 0||e.isomin===null?l:e.isomax,m(x,e,{vals:[e._vMin,e._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375,"../streamtube/calc":1054}],873:[function(g,Q,X){var m=g("../../../stackgl_modules").gl_mesh3d,v=g("../../lib/gl_format_color").parseColorScale,k=g("../../lib/str2rgbarray"),x=g("../../components/colorscale").extractOpts,e=g("../../plots/gl3d/zip3"),t=function(u,o){for(var h=o.length-1;h>0;h--){var s=Math.min(o[h],o[h-1]),a=Math.max(o[h],o[h-1]);if(a>s&&s<u&&u<=a)return{id:h,distRatio:(a-u)/(a-s)}}return{id:0,distRatio:0}};function r(u,o,h){this.scene=u,this.uid=h,this.mesh=o,this.name="",this.data=null,this.showContour=!1}var l=r.prototype;l.handlePick=function(u){if(u.object===this.mesh){var o=u.data.index,h=this.data._meshX[o],s=this.data._meshY[o],a=this.data._meshZ[o],p=this.data._Ys.length,c=this.data._Zs.length,i=t(h,this.data._Xs).id,y=t(s,this.data._Ys).id,f=t(a,this.data._Zs).id,w=u.index=f+c*y+c*p*i;u.traceCoordinate=[this.data._meshX[w],this.data._meshY[w],this.data._meshZ[w],this.data._value[w]];var b=this.data.hovertext||this.data.text;return Array.isArray(b)&&b[w]!==void 0?u.textLabel=b[w]:b&&(u.textLabel=b),!0}},l.update=function(u){var o=this.scene,h=o.fullSceneLayout;function s(c,i,y,f){return i.map(function(w){return c.d2l(w,0,f)*y})}this.data=d(u);var a={positions:e(s(h.xaxis,u._meshX,o.dataScale[0],u.xcalendar),s(h.yaxis,u._meshY,o.dataScale[1],u.ycalendar),s(h.zaxis,u._meshZ,o.dataScale[2],u.zcalendar)),cells:e(u._meshI,u._meshJ,u._meshK),lightPosition:[u.lightposition.x,u.lightposition.y,u.lightposition.z],ambient:u.lighting.ambient,diffuse:u.lighting.diffuse,specular:u.lighting.specular,roughness:u.lighting.roughness,fresnel:u.lighting.fresnel,vertexNormalsEpsilon:u.lighting.vertexnormalsepsilon,faceNormalsEpsilon:u.lighting.facenormalsepsilon,opacity:u.opacity,contourEnable:u.contour.show,contourColor:k(u.contour.color).slice(0,3),contourWidth:u.contour.width,useFacetNormals:u.flatshading},p=x(u);a.vertexIntensity=u._meshIntensity,a.vertexIntensityBounds=[p.min,p.max],a.colormap=v(u),this.mesh.update(a)},l.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var n=["xyz","xzy","yxz","yzx","zxy","zyx"];function d(u){u._meshI=[],u._meshJ=[],u._meshK=[];var o,h,s,a,p,c,i,y=u.surface.show,f=u.spaceframe.show,w=u.surface.fill,b=u.spaceframe.fill,_=!1,T=!1,L=0,A=u._Xs,I=u._Ys,P=u._Zs,S=A.length,E=I.length,z=P.length,D=n.indexOf(u._gridFill.replace(/-/g,"").replace(/\+/g,"")),U=function(Fe,Pe,ze){switch(D){case 5:return ze+z*Pe+z*E*Fe;case 4:return ze+z*Fe+z*S*Pe;case 3:return Pe+E*ze+E*z*Fe;case 2:return Pe+E*Fe+E*S*ze;case 1:return Fe+S*ze+S*z*Pe;default:return Fe+S*Pe+S*E*ze}},H=u._minValues,Y=u._maxValues,J=u._vMin,W=u._vMax;function Z(Fe,Pe,ze){for(var Ge=c.length,$e=h;$e<Ge;$e++)if(Fe===s[$e]&&Pe===a[$e]&&ze===p[$e])return $e;return-1}function re(){h=o}function V(){s=[],a=[],p=[],c=[],o=0,re()}function B(Fe,Pe,ze,Ge){return s.push(Fe),a.push(Pe),p.push(ze),c.push(Ge),++o-1}function j(Fe,Pe,ze){for(var Ge=[],$e=0;$e<Fe.length;$e++)Ge[$e]=Fe[$e]*(1-ze)+ze*Pe[$e];return Ge}function ee(Fe){i=Fe}function N(Fe,Pe){return Fe==="all"||Fe===null||Fe.indexOf(Pe)>-1}function $(Fe,Pe){return Fe===null?Pe:Fe}function K(Fe,Pe,ze){re();var Ge,$e,ot,vt=[Pe],bt=[ze];if(i>=1)vt=[Pe],bt=[ze];else if(i>0){var yt=function(It,Be){var He=It[0],he=It[1],be=It[2],Re=function(rt,ut,Bt){for(var wt=[],Lt=0;Lt<rt.length;Lt++)wt[Lt]=(rt[Lt]+ut[Lt]+Bt[Lt])/3;return wt}(He,he,be),Ue=Math.sqrt(1-i),Xe=j(Re,He,Ue),qe=j(Re,he,Ue),st=j(Re,be,Ue),it=Be[0],Tt=Be[1],Pt=Be[2];return{xyzv:[[He,he,qe],[qe,Xe,He],[he,be,st],[st,qe,he],[be,He,Xe],[Xe,st,be]],abc:[[it,Tt,-1],[-1,-1,it],[Tt,Pt,-1],[-1,-1,Tt],[Pt,it,-1],[-1,-1,Pt]]}}(Pe,ze);vt=yt.xyzv,bt=yt.abc}for(var tt=0;tt<vt.length;tt++){Pe=vt[tt],ze=bt[tt];for(var Ke=[],mt=0;mt<3;mt++){var Ft=Pe[mt][0],Vt=Pe[mt][1],Xt=Pe[mt][2],Gt=Pe[mt][3],nr=ze[mt]>-1?ze[mt]:Z(Ft,Vt,Xt);Ke[mt]=nr>-1?nr:B(Ft,Vt,Xt,$(Fe,Gt))}Ge=Ke[0],$e=Ke[1],ot=Ke[2],u._meshI.push(Ge),u._meshJ.push($e),u._meshK.push(ot),++L}}function te(Fe,Pe,ze,Ge){var $e=Fe[3];$e<ze&&($e=ze),$e>Ge&&($e=Ge);for(var ot=(Fe[3]-$e)/(Fe[3]-Pe[3]+1e-9),vt=[],bt=0;bt<4;bt++)vt[bt]=(1-ot)*Fe[bt]+ot*Pe[bt];return vt}function ie(Fe,Pe,ze){return Fe>=Pe&&Fe<=ze}function le(Fe){var Pe=.001*(W-J);return Fe>=J-Pe&&Fe<=W+Pe}function se(Fe){for(var Pe=[],ze=0;ze<4;ze++){var Ge=Fe[ze];Pe.push([u._x[Ge],u._y[Ge],u._z[Ge],u._value[Ge]])}return Pe}function ve(Fe,Pe,ze,Ge,$e,ot){ot||(ot=1),ze=[-1,-1,-1];var vt=!1,bt=[ie(Pe[0][3],Ge,$e),ie(Pe[1][3],Ge,$e),ie(Pe[2][3],Ge,$e)];if(!bt[0]&&!bt[1]&&!bt[2])return!1;var yt=function(Ke,mt,Ft){return le(mt[0][3])&&le(mt[1][3])&&le(mt[2][3])?(K(Ke,mt,Ft),!0):ot<3&&ve(Ke,mt,Ft,J,W,++ot)};if(bt[0]&&bt[1]&&bt[2])return yt(Fe,Pe,ze)||vt;var tt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(Ke){if(bt[Ke[0]]&&bt[Ke[1]]&&!bt[Ke[2]]){var mt=Pe[Ke[0]],Ft=Pe[Ke[1]],Vt=Pe[Ke[2]],Xt=te(Vt,mt,Ge,$e),Gt=te(Vt,Ft,Ge,$e);vt=yt(Fe,[Gt,Xt,mt],[-1,-1,ze[Ke[0]]])||vt,vt=yt(Fe,[mt,Ft,Gt],[ze[Ke[0]],ze[Ke[1]],-1])||vt,tt=!0}}),tt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(Ke){if(bt[Ke[0]]&&!bt[Ke[1]]&&!bt[Ke[2]]){var mt=Pe[Ke[0]],Ft=Pe[Ke[1]],Vt=Pe[Ke[2]],Xt=te(Ft,mt,Ge,$e),Gt=te(Vt,mt,Ge,$e);vt=yt(Fe,[Gt,Xt,mt],[-1,-1,ze[Ke[0]]])||vt,tt=!0}}),vt}function fe(Fe,Pe,ze,Ge){var $e=!1,ot=se(Pe),vt=[ie(ot[0][3],ze,Ge),ie(ot[1][3],ze,Ge),ie(ot[2][3],ze,Ge),ie(ot[3][3],ze,Ge)];if(!(vt[0]||vt[1]||vt[2]||vt[3]))return $e;if(vt[0]&&vt[1]&&vt[2]&&vt[3])return T&&($e=function(yt,tt,Ke){var mt=function(Ft,Vt,Xt){K(yt,[tt[Ft],tt[Vt],tt[Xt]],[Ke[Ft],Ke[Vt],Ke[Xt]])};mt(0,1,2),mt(3,0,1),mt(2,3,0),mt(1,2,3)}(Fe,ot,Pe)||$e),$e;var bt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(yt){if(vt[yt[0]]&&vt[yt[1]]&&vt[yt[2]]&&!vt[yt[3]]){var tt=ot[yt[0]],Ke=ot[yt[1]],mt=ot[yt[2]],Ft=ot[yt[3]];if(T)$e=K(Fe,[tt,Ke,mt],[Pe[yt[0]],Pe[yt[1]],Pe[yt[2]]])||$e;else{var Vt=te(Ft,tt,ze,Ge),Xt=te(Ft,Ke,ze,Ge),Gt=te(Ft,mt,ze,Ge);$e=K(null,[Vt,Xt,Gt],[-1,-1,-1])||$e}bt=!0}}),bt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(yt){if(vt[yt[0]]&&vt[yt[1]]&&!vt[yt[2]]&&!vt[yt[3]]){var tt=ot[yt[0]],Ke=ot[yt[1]],mt=ot[yt[2]],Ft=ot[yt[3]],Vt=te(mt,tt,ze,Ge),Xt=te(mt,Ke,ze,Ge),Gt=te(Ft,Ke,ze,Ge),nr=te(Ft,tt,ze,Ge);T?($e=K(Fe,[tt,nr,Vt],[Pe[yt[0]],-1,-1])||$e,$e=K(Fe,[Ke,Xt,Gt],[Pe[yt[1]],-1,-1])||$e):$e=function(It,Be,He){var he=function(be,Re,Ue){K(It,[Be[be],Be[Re],Be[Ue]],[He[be],He[Re],He[Ue]])};he(0,1,2),he(2,3,0)}(null,[Vt,Xt,Gt,nr],[-1,-1,-1,-1])||$e,bt=!0}}),bt||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(yt){if(vt[yt[0]]&&!vt[yt[1]]&&!vt[yt[2]]&&!vt[yt[3]]){var tt=ot[yt[0]],Ke=ot[yt[1]],mt=ot[yt[2]],Ft=ot[yt[3]],Vt=te(Ke,tt,ze,Ge),Xt=te(mt,tt,ze,Ge),Gt=te(Ft,tt,ze,Ge);T?($e=K(Fe,[tt,Vt,Xt],[Pe[yt[0]],-1,-1])||$e,$e=K(Fe,[tt,Xt,Gt],[Pe[yt[0]],-1,-1])||$e,$e=K(Fe,[tt,Gt,Vt],[Pe[yt[0]],-1,-1])||$e):$e=K(null,[Vt,Xt,Gt],[-1,-1,-1])||$e,bt=!0}})),$e}function ye(Fe,Pe,ze,Ge,$e,ot,vt,bt,yt,tt,Ke){var mt=!1;return _&&(N(Fe,"A")&&(mt=fe(null,[Pe,ze,Ge,ot],tt,Ke)||mt),N(Fe,"B")&&(mt=fe(null,[ze,Ge,$e,yt],tt,Ke)||mt),N(Fe,"C")&&(mt=fe(null,[ze,ot,vt,yt],tt,Ke)||mt),N(Fe,"D")&&(mt=fe(null,[Ge,ot,bt,yt],tt,Ke)||mt),N(Fe,"E")&&(mt=fe(null,[ze,Ge,ot,yt],tt,Ke)||mt)),T&&(mt=fe(Fe,[ze,Ge,ot,yt],tt,Ke)||mt),mt}function Ae(Fe,Pe,ze,Ge,$e,ot,vt,bt){return[bt[0]===!0||ve(Fe,se([Pe,ze,Ge]),[Pe,ze,Ge],ot,vt),bt[1]===!0||ve(Fe,se([Ge,$e,Pe]),[Ge,$e,Pe],ot,vt)]}function pe(Fe,Pe,ze,Ge,$e,ot,vt,bt,yt){return bt?Ae(Fe,Pe,ze,$e,Ge,ot,vt,yt):Ae(Fe,ze,$e,Ge,Pe,ot,vt,yt)}function ge(Fe,Pe,ze,Ge,$e,ot,vt){var bt,yt,tt,Ke,mt=!1,Ft=function(){mt=ve(Fe,[bt,yt,tt],[-1,-1,-1],$e,ot)||mt,mt=ve(Fe,[tt,Ke,bt],[-1,-1,-1],$e,ot)||mt},Vt=vt[0],Xt=vt[1],Gt=vt[2];return Vt&&(bt=j(se([U(Pe,ze-0,Ge-0)])[0],se([U(Pe-1,ze-0,Ge-0)])[0],Vt),yt=j(se([U(Pe,ze-0,Ge-1)])[0],se([U(Pe-1,ze-0,Ge-1)])[0],Vt),tt=j(se([U(Pe,ze-1,Ge-1)])[0],se([U(Pe-1,ze-1,Ge-1)])[0],Vt),Ke=j(se([U(Pe,ze-1,Ge-0)])[0],se([U(Pe-1,ze-1,Ge-0)])[0],Vt),Ft()),Xt&&(bt=j(se([U(Pe-0,ze,Ge-0)])[0],se([U(Pe-0,ze-1,Ge-0)])[0],Xt),yt=j(se([U(Pe-0,ze,Ge-1)])[0],se([U(Pe-0,ze-1,Ge-1)])[0],Xt),tt=j(se([U(Pe-1,ze,Ge-1)])[0],se([U(Pe-1,ze-1,Ge-1)])[0],Xt),Ke=j(se([U(Pe-1,ze,Ge-0)])[0],se([U(Pe-1,ze-1,Ge-0)])[0],Xt),Ft()),Gt&&(bt=j(se([U(Pe-0,ze-0,Ge)])[0],se([U(Pe-0,ze-0,Ge-1)])[0],Gt),yt=j(se([U(Pe-0,ze-1,Ge)])[0],se([U(Pe-0,ze-1,Ge-1)])[0],Gt),tt=j(se([U(Pe-1,ze-1,Ge)])[0],se([U(Pe-1,ze-1,Ge-1)])[0],Gt),Ke=j(se([U(Pe-1,ze-0,Ge)])[0],se([U(Pe-1,ze-0,Ge-1)])[0],Gt),Ft()),mt}function we(Fe,Pe,ze,Ge,$e,ot,vt,bt,yt,tt,Ke,mt){var Ft=Fe;return mt?(_&&Fe==="even"&&(Ft=null),ye(Ft,Pe,ze,Ge,$e,ot,vt,bt,yt,tt,Ke)):(_&&Fe==="odd"&&(Ft=null),ye(Ft,yt,bt,vt,ot,$e,Ge,ze,Pe,tt,Ke))}function oe(Fe,Pe,ze,Ge,$e){for(var ot=[],vt=0,bt=0;bt<Pe.length;bt++)for(var yt=Pe[bt],tt=1;tt<z;tt++)for(var Ke=1;Ke<E;Ke++)ot.push(pe(Fe,U(yt,Ke-1,tt-1),U(yt,Ke-1,tt),U(yt,Ke,tt-1),U(yt,Ke,tt),ze,Ge,(yt+Ke+tt)%2,$e&&$e[vt]?$e[vt]:[])),vt++;return ot}function de(Fe,Pe,ze,Ge,$e){for(var ot=[],vt=0,bt=0;bt<Pe.length;bt++)for(var yt=Pe[bt],tt=1;tt<S;tt++)for(var Ke=1;Ke<z;Ke++)ot.push(pe(Fe,U(tt-1,yt,Ke-1),U(tt,yt,Ke-1),U(tt-1,yt,Ke),U(tt,yt,Ke),ze,Ge,(tt+yt+Ke)%2,$e&&$e[vt]?$e[vt]:[])),vt++;return ot}function Te(Fe,Pe,ze,Ge,$e){for(var ot=[],vt=0,bt=0;bt<Pe.length;bt++)for(var yt=Pe[bt],tt=1;tt<E;tt++)for(var Ke=1;Ke<S;Ke++)ot.push(pe(Fe,U(Ke-1,tt-1,yt),U(Ke-1,tt,yt),U(Ke,tt-1,yt),U(Ke,tt,yt),ze,Ge,(Ke+tt+yt)%2,$e&&$e[vt]?$e[vt]:[])),vt++;return ot}function Ee(Fe,Pe,ze){for(var Ge=1;Ge<z;Ge++)for(var $e=1;$e<E;$e++)for(var ot=1;ot<S;ot++)we(Fe,U(ot-1,$e-1,Ge-1),U(ot-1,$e-1,Ge),U(ot-1,$e,Ge-1),U(ot-1,$e,Ge),U(ot,$e-1,Ge-1),U(ot,$e-1,Ge),U(ot,$e,Ge-1),U(ot,$e,Ge),Pe,ze,(ot+$e+Ge)%2)}function Me(Fe,Pe,ze){_=!0,Ee(Fe,Pe,ze),_=!1}function De(Fe,Pe,ze,Ge,$e,ot){for(var vt=[],bt=0,yt=0;yt<Pe.length;yt++)for(var tt=Pe[yt],Ke=1;Ke<z;Ke++)for(var mt=1;mt<E;mt++)vt.push(ge(Fe,tt,mt,Ke,ze,Ge,$e[yt],ot&&ot[bt]&&ot[bt])),bt++;return vt}function Ie(Fe,Pe,ze,Ge,$e,ot){for(var vt=[],bt=0,yt=0;yt<Pe.length;yt++)for(var tt=Pe[yt],Ke=1;Ke<S;Ke++)for(var mt=1;mt<z;mt++)vt.push(ge(Fe,Ke,tt,mt,ze,Ge,$e[yt],ot&&ot[bt]&&ot[bt])),bt++;return vt}function Oe(Fe,Pe,ze,Ge,$e,ot){for(var vt=[],bt=0,yt=0;yt<Pe.length;yt++)for(var tt=Pe[yt],Ke=1;Ke<E;Ke++)for(var mt=1;mt<S;mt++)vt.push(ge(Fe,mt,Ke,tt,ze,Ge,$e[yt],ot&&ot[bt]&&ot[bt])),bt++;return vt}function Ze(Fe,Pe){for(var ze=[],Ge=Fe;Ge<Pe;Ge++)ze.push(Ge);return ze}return function(){if(V(),function(){for(var bt=0;bt<S;bt++)for(var yt=0;yt<E;yt++)for(var tt=0;tt<z;tt++){var Ke=U(bt,yt,tt);B(u._x[Ke],u._y[Ke],u._z[Ke],u._value[Ke])}}(),f&&b&&(ee(b),T=!0,Ee(null,J,W),T=!1),y&&w){ee(w);for(var Fe=u.surface.pattern,Pe=u.surface.count,ze=0;ze<Pe;ze++){var Ge=Pe===1?.5:ze/(Pe-1),$e=(1-Ge)*J+Ge*W,ot=Math.abs($e-H)>Math.abs($e-Y)?[H,$e]:[$e,Y];Me(Fe,ot[0],ot[1])}}var vt=[[Math.min(J,Y),Math.max(J,Y)],[Math.min(H,W),Math.max(H,W)]];["x","y","z"].forEach(function(bt){for(var yt=[],tt=0;tt<vt.length;tt++){var Ke=0,mt=vt[tt][0],Ft=vt[tt][1],Vt=u.slices[bt];if(Vt.show&&Vt.fill){ee(Vt.fill);var Xt=[],Gt=[],nr=[];if(Vt.locations.length)for(var It=0;It<Vt.locations.length;It++){var Be=t(Vt.locations[It],bt==="x"?A:bt==="y"?I:P);Be.distRatio===0?Xt.push(Be.id):Be.id>0&&(Gt.push(Be.id),bt==="x"?nr.push([Be.distRatio,0,0]):bt==="y"?nr.push([0,Be.distRatio,0]):nr.push([0,0,Be.distRatio]))}else Xt=Ze(1,bt==="x"?S-1:bt==="y"?E-1:z-1);Gt.length>0&&(yt[Ke]=bt==="x"?De(null,Gt,mt,Ft,nr,yt[Ke]):bt==="y"?Ie(null,Gt,mt,Ft,nr,yt[Ke]):Oe(null,Gt,mt,Ft,nr,yt[Ke]),Ke++),Xt.length>0&&(yt[Ke]=bt==="x"?oe(null,Xt,mt,Ft,yt[Ke]):bt==="y"?de(null,Xt,mt,Ft,yt[Ke]):Te(null,Xt,mt,Ft,yt[Ke]),Ke++)}var He=u.caps[bt];He.show&&He.fill&&(ee(He.fill),yt[Ke]=bt==="x"?oe(null,[0,S-1],mt,Ft,yt[Ke]):bt==="y"?de(null,[0,E-1],mt,Ft,yt[Ke]):Te(null,[0,z-1],mt,Ft,yt[Ke]),Ke++)}}),L===0&&V(),u._meshX=s,u._meshY=a,u._meshZ=p,u._meshIntensity=c,u._Xs=A,u._Ys=I,u._Zs=P}(),u}Q.exports={findNearestOnAxis:t,generateIsoMeshes:d,createIsosurfaceTrace:function(u,o){var h=u.glplot.gl,s=m({gl:h}),a=new r(u,s,o.uid);return s._trace=a,a.update(o),u.glplot.add(s),a}}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618}],874:[function(g,Q,X){var m=g("../../lib"),v=g("../../registry"),k=g("./attributes"),x=g("../../components/colorscale/defaults");function e(t,r,l,n,d){var u=d("isomin"),o=d("isomax");o!=null&&u!=null&&u>o&&(r.isomin=null,r.isomax=null);var h=d("x"),s=d("y"),a=d("z"),p=d("value");h&&h.length&&s&&s.length&&a&&a.length&&p&&p.length?(v.getComponentMethod("calendars","handleTraceDefaults")(t,r,["x","y","z"],n),d("valuehoverformat"),["x","y","z"].forEach(function(c){d(c+"hoverformat");var i="caps."+c;d(i+".show")&&d(i+".fill");var y="slices."+c;d(y+".show")&&(d(y+".fill"),d(y+".locations"))}),d("spaceframe.show")&&d("spaceframe.fill"),d("surface.show")&&(d("surface.count"),d("surface.fill"),d("surface.pattern")),d("contour.show")&&(d("contour.color"),d("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(c){d(c)}),x(t,r,n,d,{prefix:"",cLetter:"c"}),r._length=null):r.visible=!1}Q.exports={supplyDefaults:function(t,r,l,n){e(t,r,l,n,function(d,u){return m.coerce(t,r,k,d,u)})},supplyIsoDefaults:e}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":871}],875:[function(g,Q,X){Q.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults").supplyDefaults,calc:g("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:g("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:g("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":871,"./calc":872,"./convert":873,"./defaults":874}],876:[function(g,Q,X){var m=g("../../components/colorscale/attributes"),v=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,k=g("../../plots/template_attributes").hovertemplateAttrs,x=g("../surface/attributes"),e=g("../../plots/attributes"),t=g("../../lib/extend").extendFlat;Q.exports=t({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:k({editType:"calc"}),xhoverformat:v("x"),yhoverformat:v("y"),zhoverformat:v("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},m("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:x.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:t({},x.contours.x.show,{}),color:x.contours.x.color,width:x.contours.x.width,editType:"calc"},lightposition:{x:t({},x.lightposition.x,{dflt:1e5}),y:t({},x.lightposition.y,{dflt:1e5}),z:t({},x.lightposition.z,{dflt:0}),editType:"calc"},lighting:t({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},x.lighting),hoverinfo:t({},e.hoverinfo,{editType:"calc"}),showlegend:t({},e.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../surface/attributes":1070}],877:[function(g,Q,X){var m=g("../../components/colorscale/calc");Q.exports=function(v,k){k.intensity&&m(v,k,{vals:k.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],878:[function(g,Q,X){var m=g("../../../stackgl_modules").gl_mesh3d,v=g("../../../stackgl_modules").delaunay_triangulate,k=g("../../../stackgl_modules").alpha_shape,x=g("../../../stackgl_modules").convex_hull,e=g("../../lib/gl_format_color").parseColorScale,t=g("../../lib/str2rgbarray"),r=g("../../components/colorscale").extractOpts,l=g("../../plots/gl3d/zip3");function n(a,p,c){this.scene=a,this.uid=c,this.mesh=p,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var d=n.prototype;function u(a){for(var p=[],c=a.length,i=0;i<c;i++)p[i]=t(a[i]);return p}function o(a,p,c,i){for(var y=[],f=p.length,w=0;w<f;w++)y[w]=a.d2l(p[w],0,i)*c;return y}function h(a){for(var p=[],c=a.length,i=0;i<c;i++)p[i]=Math.round(a[i]);return p}function s(a,p){for(var c=a.length,i=0;i<c;i++)if(a[i]<=-.5||a[i]>=p-.5)return!1;return!0}d.handlePick=function(a){if(a.object===this.mesh){var p=a.index=a.data.index;a.data._cellCenter?a.traceCoordinate=a.data.dataCoordinate:a.traceCoordinate=[this.data.x[p],this.data.y[p],this.data.z[p]];var c=this.data.hovertext||this.data.text;return Array.isArray(c)&&c[p]!==void 0?a.textLabel=c[p]:c&&(a.textLabel=c),!0}},d.update=function(a){var p=this.scene,c=p.fullSceneLayout;this.data=a;var i,y=a.x.length,f=l(o(c.xaxis,a.x,p.dataScale[0],a.xcalendar),o(c.yaxis,a.y,p.dataScale[1],a.ycalendar),o(c.zaxis,a.z,p.dataScale[2],a.zcalendar));if(a.i&&a.j&&a.k){if(a.i.length!==a.j.length||a.j.length!==a.k.length||!s(a.i,y)||!s(a.j,y)||!s(a.k,y))return;i=l(h(a.i),h(a.j),h(a.k))}else i=a.alphahull===0?x(f):a.alphahull>0?k(a.alphahull,f):function(T,L){for(var A=["x","y","z"].indexOf(T),I=[],P=L.length,S=0;S<P;S++)I[S]=[L[S][(A+1)%3],L[S][(A+2)%3]];return v(I)}(a.delaunayaxis,f);var w={positions:f,cells:i,lightPosition:[a.lightposition.x,a.lightposition.y,a.lightposition.z],ambient:a.lighting.ambient,diffuse:a.lighting.diffuse,specular:a.lighting.specular,roughness:a.lighting.roughness,fresnel:a.lighting.fresnel,vertexNormalsEpsilon:a.lighting.vertexnormalsepsilon,faceNormalsEpsilon:a.lighting.facenormalsepsilon,opacity:a.opacity,contourEnable:a.contour.show,contourColor:t(a.contour.color).slice(0,3),contourWidth:a.contour.width,useFacetNormals:a.flatshading};if(a.intensity){var b=r(a);this.color="#fff";var _=a.intensitymode;w[_+"Intensity"]=a.intensity,w[_+"IntensityBounds"]=[b.min,b.max],w.colormap=e(a)}else a.vertexcolor?(this.color=a.vertexcolor[0],w.vertexColors=u(a.vertexcolor)):a.facecolor?(this.color=a.facecolor[0],w.cellColors=u(a.facecolor)):(this.color=a.color,w.meshColor=t(a.color));this.mesh.update(w)},d.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},Q.exports=function(a,p){var c=a.glplot.gl,i=m({gl:c}),y=new n(a,i,p.uid);return i._trace=y,y.update(p),a.glplot.add(i),y}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618}],879:[function(g,Q,X){var m=g("../../registry"),v=g("../../lib"),k=g("../../components/colorscale/defaults"),x=g("./attributes");Q.exports=function(e,t,r,l){function n(u,o){return v.coerce(e,t,x,u,o)}function d(u){var o=u.map(function(h){var s=n(h);return s&&v.isArrayOrTypedArray(s)?s:null});return o.every(function(h){return h&&h.length===o[0].length})&&o}d(["x","y","z"])?(d(["i","j","k"]),(!t.i||t.j&&t.k)&&(!t.j||t.k&&t.i)&&(!t.k||t.i&&t.j)?(m.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y","z"],l),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(u){n(u)}),n("contour.show")&&(n("contour.color"),n("contour.width")),"intensity"in e?(n("intensity"),n("intensitymode"),k(e,t,l,n,{prefix:"",cLetter:"c"})):(t.showscale=!1,"facecolor"in e?n("facecolor"):"vertexcolor"in e?n("vertexcolor"):n("color",r)),n("text"),n("hovertext"),n("hovertemplate"),n("xhoverformat"),n("yhoverformat"),n("zhoverformat"),t._length=null):t.visible=!1):t.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":876}],880:[function(g,Q,X){Q.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),calc:g("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:g("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:g("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":876,"./calc":877,"./convert":878,"./defaults":879}],881:[function(g,Q,X){var m=g("../../lib").extendFlat,v=g("../scatter/attributes"),k=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=g("../../components/drawing/attributes").dash,e=g("../../components/fx/attributes"),t=g("../../constants/delta.js"),r=t.INCREASING.COLOR,l=t.DECREASING.COLOR,n=v.line;function d(u){return{line:{color:m({},n.color,{dflt:u}),width:n.width,dash:x,editType:"style"},editType:"style"}}Q.exports={xperiod:v.xperiod,xperiod0:v.xperiod0,xperiodalignment:v.xperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:m({},n.width,{}),dash:m({},x,{}),editType:"style"},increasing:d(r),decreasing:d(l),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:m({},e.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":388,"../../components/fx/attributes":398,"../../constants/delta.js":485,"../../lib":515,"../../plots/cartesian/axis_format_attributes":569,"../scatter/attributes":936}],882:[function(g,Q,X){var m=g("../../lib"),v=m._,k=g("../../plots/cartesian/axes"),x=g("../../plots/cartesian/align_period"),e=g("../../constants/numerical").BADNUM;function t(l,n,d,u){return{o:l,h:n,l:d,c:u}}function r(l,n,d,u,o,h){for(var s=o.makeCalcdata(n,"open"),a=o.makeCalcdata(n,"high"),p=o.makeCalcdata(n,"low"),c=o.makeCalcdata(n,"close"),i=Array.isArray(n.text),y=Array.isArray(n.hovertext),f=!0,w=null,b=!!n.xperiodalignment,_=[],T=0;T<u.length;T++){var L=u[T],A=s[T],I=a[T],P=p[T],S=c[T];if(L!==e&&A!==e&&I!==e&&P!==e&&S!==e){S===A?w!==null&&S!==w&&(f=S>w):f=S>A,w=S;var E=h(A,I,P,S);E.pos=L,E.yc=(A+S)/2,E.i=T,E.dir=f?"increasing":"decreasing",E.x=E.pos,E.y=[P,I],b&&(E.orig_p=d[T]),i&&(E.tx=n.text[T]),y&&(E.htx=n.hovertext[T]),_.push(E)}else _.push({pos:L,empty:!0})}return n._extremes[o._id]=k.findExtremes(o,m.concat(p,a),{padded:!0}),_.length&&(_[0].t={labels:{open:v(l,"open:")+" ",high:v(l,"high:")+" ",low:v(l,"low:")+" ",close:v(l,"close:")+" "}}),_}Q.exports={calc:function(l,n){var d=k.getFromId(l,n.xaxis),u=k.getFromId(l,n.yaxis),o=function(c,i,y){var f=y._minDiff;if(!f){var w,b=c._fullData,_=[];for(f=1/0,w=0;w<b.length;w++){var T=b[w];if(T.type==="ohlc"&&T.visible===!0&&T.xaxis===i._id){_.push(T);var L=i.makeCalcdata(T,"x");T._origX=L;var A=x(y,i,"x",L).vals;T._xcalc=A;var I=m.distinctVals(A).minDiff;I&&isFinite(I)&&(f=Math.min(f,I))}}for(f===1/0&&(f=1),w=0;w<_.length;w++)_[w]._minDiff=f}return f*y.tickwidth}(l,d,n),h=n._minDiff;n._minDiff=null;var s=n._origX;n._origX=null;var a=n._xcalc;n._xcalc=null;var p=r(l,n,s,a,u,t);return n._extremes[d._id]=k.findExtremes(d,a,{vpad:h/2}),p.length?(m.extendFlat(p[0].t,{wHover:h/2,tickLen:o}),p):[{t:{empty:!0}}]},calcCommon:r}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566}],883:[function(g,Q,X){var m=g("../../lib"),v=g("./ohlc_defaults"),k=g("../scatter/period_defaults"),x=g("./attributes");function e(t,r,l,n){l(n+".line.color"),l(n+".line.width",r.line.width),l(n+".line.dash",r.line.dash)}Q.exports=function(t,r,l,n){function d(u,o){return m.coerce(t,r,x,u,o)}v(t,r,d,n)?(k(t,r,n,d,{x:!0}),d("xhoverformat"),d("yhoverformat"),d("line.width"),d("line.dash"),e(t,r,d,"increasing"),e(t,r,d,"decreasing"),d("text"),d("hovertext"),d("tickwidth"),n._requestRangeslider[r.xaxis]=!0):r.visible=!1}},{"../../lib":515,"../scatter/period_defaults":956,"./attributes":881,"./ohlc_defaults":886}],884:[function(g,Q,X){var m=g("../../plots/cartesian/axes"),v=g("../../lib"),k=g("../../components/fx"),x=g("../../components/color"),e=g("../../lib").fillText,t=g("../../constants/delta.js"),r={increasing:t.INCREASING.SYMBOL,decreasing:t.DECREASING.SYMBOL};function l(u,o,h,s){var a,p,c=u.cd,i=u.xa,y=c[0].trace,f=c[0].t,w=y.type,b=w==="ohlc"?"l":"min",_=w==="ohlc"?"h":"max",T=f.bPos||0,L=f.bdPos||f.tickLen,A=f.wHover,I=Math.min(1,L/Math.abs(i.r2c(i.range[1])-i.r2c(i.range[0])));function P(Y){var J=function(W){return W.pos+T-o}(Y);return k.inbox(J-A,J+A,a)}function S(Y){var J=Y[b],W=Y[_];return J===W||k.inbox(J-h,W-h,a)}function E(Y){return(P(Y)+S(Y))/2}a=u.maxHoverDistance-I,p=u.maxSpikeDistance-I;var z=k.getDistanceFunction(s,P,S,E);if(k.getClosest(c,z,u),u.index===!1)return null;var D=c[u.index];if(D.empty)return null;var U=y[D.dir],H=U.line.color;return x.opacity(H)&&U.line.width?u.color=H:u.color=U.fillcolor,u.x0=i.c2p(D.pos+T-L,!0),u.x1=i.c2p(D.pos+T+L,!0),u.xLabelVal=D.orig_p!==void 0?D.orig_p:D.pos,u.spikeDistance=E(D)*p/a,u.xSpike=i.c2p(D.pos,!0),u}function n(u,o,h,s){var a=u.cd,p=u.ya,c=a[0].trace,i=a[0].t,y=[],f=l(u,o,h,s);if(!f)return[];var w=a[f.index].hi||c.hoverinfo,b=w.split("+");if(!(w==="all"||b.indexOf("y")!==-1))return[];for(var _=["high","open","close","low"],T={},L=0;L<_.length;L++){var A,I=_[L],P=c[I][f.index],S=p.c2p(P,!0);P in T?(A=T[P]).yLabel+="<br>"+i.labels[I]+m.hoverLabelText(p,P,c.yhoverformat):((A=v.extendFlat({},f)).y0=A.y1=S,A.yLabelVal=P,A.yLabel=i.labels[I]+m.hoverLabelText(p,P,c.yhoverformat),A.name="",y.push(A),T[P]=A)}return y}function d(u,o,h,s){var a=u.cd,p=u.ya,c=a[0].trace,i=a[0].t,y=l(u,o,h,s);if(!y)return[];var f=a[y.index],w=y.index=f.i,b=f.dir;function _(E){return i.labels[E]+m.hoverLabelText(p,c[E][w],c.yhoverformat)}var T=f.hi||c.hoverinfo,L=T.split("+"),A=T==="all",I=A||L.indexOf("y")!==-1,P=A||L.indexOf("text")!==-1,S=I?[_("open"),_("high"),_("low"),_("close")+"  "+r[b]]:[];return P&&e(f,c,S),y.extraText=S.join("<br>"),y.y0=y.y1=p.c2p(f.yc,!0),[y]}Q.exports={hoverPoints:function(u,o,h,s){return u.cd[0].trace.hoverlabel.split?n(u,o,h,s):d(u,o,h,s)},hoverSplit:n,hoverOnPoints:d}},{"../../components/color":367,"../../components/fx":407,"../../constants/delta.js":485,"../../lib":515,"../../plots/cartesian/axes":566}],885:[function(g,Q,X){Q.exports={moduleType:"trace",name:"ohlc",basePlotModule:g("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:g("./attributes"),supplyDefaults:g("./defaults"),calc:g("./calc").calc,plot:g("./plot"),style:g("./style"),hoverPoints:g("./hover").hoverPoints,selectPoints:g("./select")}},{"../../plots/cartesian":578,"./attributes":881,"./calc":882,"./defaults":883,"./hover":884,"./plot":887,"./select":888,"./style":889}],886:[function(g,Q,X){var m=g("../../registry"),v=g("../../lib");Q.exports=function(k,x,e,t){var r=e("x"),l=e("open"),n=e("high"),d=e("low"),u=e("close");if(e("hoverlabel.split"),m.getComponentMethod("calendars","handleTraceDefaults")(k,x,["x"],t),l&&n&&d&&u){var o=Math.min(l.length,n.length,d.length,u.length);return r&&(o=Math.min(o,v.minRowLength(r))),x._length=o,o}}},{"../../lib":515,"../../registry":647}],887:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../lib");Q.exports=function(k,x,e,t){var r=x.yaxis,l=x.xaxis,n=!!l.rangebreaks;v.makeTraceGroups(t,e,"trace ohlc").each(function(d){var u=m.select(this),o=d[0],h=o.t;if(o.trace.visible!==!0||h.empty)u.remove();else{var s=h.tickLen,a=u.selectAll("path").data(v.identity);a.enter().append("path"),a.exit().remove(),a.attr("d",function(p){if(p.empty)return"M0,0Z";var c=l.c2p(p.pos-s,!0),i=l.c2p(p.pos+s,!0),y=n?(c+i)/2:l.c2p(p.pos,!0);return"M"+c+","+r.c2p(p.o,!0)+"H"+y+"M"+y+","+r.c2p(p.h,!0)+"V"+r.c2p(p.l,!0)+"M"+i+","+r.c2p(p.c,!0)+"H"+y})}})}},{"../../lib":515,"@plotly/d3":58}],888:[function(g,Q,X){Q.exports=function(m,v){var k,x=m.cd,e=m.xaxis,t=m.yaxis,r=[],l=x[0].t.bPos||0;if(v===!1)for(k=0;k<x.length;k++)x[k].selected=0;else for(k=0;k<x.length;k++){var n=x[k];v.contains([e.c2p(n.pos+l),t.c2p(n.yc)],null,n.i,m)?(r.push({pointNumber:n.i,x:e.c2d(n.pos),y:t.c2d(n.yc)}),n.selected=1):n.selected=0}return r}},{}],889:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../components/drawing"),k=g("../../components/color");Q.exports=function(x,e,t){var r=t||m.select(x).selectAll("g.ohlclayer").selectAll("g.trace");r.style("opacity",function(l){return l[0].trace.opacity}),r.each(function(l){var n=l[0].trace;m.select(this).selectAll("path").each(function(d){if(!d.empty){var u=n[d.dir].line;m.select(this).style("fill","none").call(k.stroke,u.color).call(v.dashLine,u.dash,u.width).style("opacity",n.selectedpoints&&!d.selected?.3:1)}})})}},{"../../components/color":367,"../../components/drawing":389,"@plotly/d3":58}],890:[function(g,Q,X){var m=g("../../lib/extend").extendFlat,v=g("../../plots/attributes"),k=g("../../plots/font_attributes"),x=g("../../components/colorscale/attributes"),e=g("../../plots/template_attributes").hovertemplateAttrs,t=g("../../plots/domain").attributes,r=m({editType:"calc"},x("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});Q.exports={domain:t({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:m({},v.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:k({editType:"calc"}),tickfont:k({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:r,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],891:[function(g,Q,X){var m=g("../../plots/get_data").getModuleCalcData,v=g("./plot");X.name="parcats",X.plot=function(k,x,e,t){var r=m(k.calcdata,"parcats");if(r.length){var l=r[0];v(k,l,e,t)}},X.clean=function(k,x,e,t){var r=t._has&&t._has("parcats"),l=x._has&&x._has("parcats");r&&!l&&t._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":602,"./plot":896}],892:[function(g,Q,X){var m=g("../../lib/gup").wrap,v=g("../../components/colorscale/helpers").hasColorscale,k=g("../../components/colorscale/calc"),x=g("../../lib/filter_unique.js"),e=g("../../components/drawing"),t=g("../../lib"),r=g("fast-isnumeric");function l(u,o,h){u.valueInds.push(o),u.count+=h}function n(u,o,h){return{categoryInds:u,color:o,rawColor:h,valueInds:[],count:0}}function d(u,o,h){u.valueInds.push(o),u.count+=h}Q.exports=function(u,o){var h=t.filterVisible(o.dimensions);if(h.length===0)return[];var s,a,p,c=h.map(function(Z){var re;if(Z.categoryorder==="trace")re=null;else if(Z.categoryorder==="array")re=Z.categoryarray;else{re=x(Z.values);for(var V=!0,B=0;B<re.length;B++)if(!r(re[B])){V=!1;break}re.sort(V?t.sorterAsc:void 0),Z.categoryorder==="category descending"&&(re=re.reverse())}return function(j,ee){ee=ee==null?[]:ee.map(function(ve){return ve});var N={},$={},K=[];ee.forEach(function(ve,fe){N[ve]=0,$[ve]=fe});for(var te=0;te<j.length;te++){var ie,le=j[te];N[le]===void 0?(N[le]=1,ie=ee.push(le)-1,$[le]=ie):(N[le]++,ie=$[le]),K.push(ie)}var se=ee.map(function(ve){return N[ve]});return{uniqueValues:ee,uniqueCounts:se,inds:K}}(Z.values,re)});s=t.isArrayOrTypedArray(o.counts)?o.counts:[o.counts],function(Z){var re;if(function(V){for(var B=new Array(V.length),j=0;j<V.length;j++){if(V[j]<0||V[j]>=V.length||B[V[j]]!==void 0)return!1;B[V[j]]=!0}return!0}(Z.map(function(V){return V.displayindex})))for(re=0;re<Z.length;re++)Z[re]._displayindex=Z[re].displayindex;else for(re=0;re<Z.length;re++)Z[re]._displayindex=re}(h),h.forEach(function(Z,re){(function(V,B){V._categoryarray=B.uniqueValues,V.ticktext===null||V.ticktext===void 0?V._ticktext=[]:V._ticktext=V.ticktext.slice();for(var j=V._ticktext.length;j<B.uniqueValues.length;j++)V._ticktext.push(B.uniqueValues[j])})(Z,c[re])});var i,y=o.line;y?(v(o,"line")&&k(u,o,{vals:o.line.color,containerStr:"line",cLetter:"c"}),i=e.tryColorscale(y)):i=t.identity;var f,w,b,_,T,L=h[0].values.length,A={},I=c.map(function(Z){return Z.inds});for(p=0,f=0;f<L;f++){var P=[];for(w=0;w<I.length;w++)P.push(I[w][f]);a=s[f%s.length],p+=a;var S=(b=f,_=void 0,T=void 0,t.isArrayOrTypedArray(y.color)?T=_=y.color[b%y.color.length]:_=y.color,{color:i(_),rawColor:T}),E=P+"-"+S.rawColor;A[E]===void 0&&(A[E]=n(P,S.color,S.rawColor)),d(A[E],f,a)}var z,D=h.map(function(Z,re){return function(V,B,j,ee,N){return{dimensionInd:V,containerInd:B,displayInd:j,dimensionLabel:ee,count:N,categories:[],dragX:null}}(re,Z._index,Z._displayindex,Z.label,p)});for(f=0;f<L;f++)for(a=s[f%s.length],w=0;w<D.length;w++){var U=D[w].containerInd,H=c[w].inds[f],Y=D[w].categories;if(Y[H]===void 0){var J=o.dimensions[U]._categoryarray[H],W=o.dimensions[U]._ticktext[H];Y[H]={dimensionInd:w,categoryInd:z=H,categoryValue:J,displayInd:z,categoryLabel:W,valueInds:[],count:0,dragY:null}}l(Y[H],f,a)}return m(function(Z,re,V){var B=Z.map(function(j){return j.categories.length}).reduce(function(j,ee){return Math.max(j,ee)});return{dimensions:Z,paths:re,trace:void 0,maxCats:B,count:V}}(D,A,p))}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../components/drawing":389,"../../lib":515,"../../lib/filter_unique.js":506,"../../lib/gup":512,"fast-isnumeric":190}],893:[function(g,Q,X){var m=g("../../lib"),v=g("../../components/colorscale/helpers").hasColorscale,k=g("../../components/colorscale/defaults"),x=g("../../plots/domain").defaults,e=g("../../plots/array_container_defaults"),t=g("./attributes"),r=g("../parcoords/merge_length");function l(n,d){function u(i,y){return m.coerce(n,d,t.dimensions,i,y)}var o=u("values"),h=u("visible");if(o&&o.length||(h=d.visible=!1),h){u("label"),u("displayindex",d._index);var s,a=n.categoryarray,p=Array.isArray(a)&&a.length>0;p&&(s="array");var c=u("categoryorder",s);c==="array"?(u("categoryarray"),u("ticktext")):(delete n.categoryarray,delete n.ticktext),p||c!=="array"||(d.categoryorder="trace")}}Q.exports=function(n,d,u,o){function h(i,y){return m.coerce(n,d,t,i,y)}var s=e(n,d,{name:"dimensions",handleItemDefaults:l}),a=function(i,y,f,w,b){b("line.shape"),b("line.hovertemplate");var _=b("line.color",w.colorway[0]);if(v(i,"line")&&m.isArrayOrTypedArray(_)){if(_.length)return b("line.colorscale"),k(i,y,w,b,{prefix:"line.",cLetter:"c"}),_.length;y.line.color=f}return 1/0}(n,d,u,o,h);x(d,o,h),Array.isArray(s)&&s.length||(d.visible=!1),r(d,s,"values",a),h("hoveron"),h("hovertemplate"),h("arrangement"),h("bundlecolors"),h("sortpaths"),h("counts");var p={family:o.font.family,size:Math.round(o.font.size),color:o.font.color};m.coerceFont(h,"labelfont",p);var c={family:o.font.family,size:Math.round(o.font.size/1.2),color:o.font.color};m.coerceFont(h,"tickfont",c)}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/domain":593,"../parcoords/merge_length":907,"./attributes":890}],894:[function(g,Q,X){Q.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),calc:g("./calc"),plot:g("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:g("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":890,"./base_plot":891,"./calc":892,"./defaults":893,"./plot":896}],895:[function(g,Q,X){var m=g("@plotly/d3"),v=g("d3-interpolate").interpolateNumber,k=g("../../plot_api/plot_api"),x=g("../../components/fx"),e=g("../../lib"),t=e.strTranslate,r=g("../../components/drawing"),l=g("tinycolor2"),n=g("../../lib/svg_text_utils");function d(V,B,j,ee){var N=B._context.staticPlot,$=V.map(Y.bind(0,B,j)),K=ee.selectAll("g.parcatslayer").data([null]);K.enter().append("g").attr("class","parcatslayer").style("pointer-events",N?"none":"all");var te=K.selectAll("g.trace.parcats").data($,u),ie=te.enter().append("g").attr("class","trace parcats");te.attr("transform",function(we){return t(we.x,we.y)}),ie.append("g").attr("class","paths");var le=te.select("g.paths").selectAll("path.path").data(function(we){return we.paths},u);le.attr("fill",function(we){return we.model.color});var se=le.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(we){return we.model.color}).attr("fill-opacity",0);y(se),le.attr("d",function(we){return we.svgD}),se.empty()||le.sort(h),le.exit().remove(),le.on("mouseover",s).on("mouseout",a).on("click",i),ie.append("g").attr("class","dimensions");var ve=te.select("g.dimensions").selectAll("g.dimension").data(function(we){return we.dimensions},u);ve.enter().append("g").attr("class","dimension"),ve.attr("transform",function(we){return t(we.x,0)}),ve.exit().remove();var fe=ve.selectAll("g.category").data(function(we){return we.categories},u),ye=fe.enter().append("g").attr("class","category");fe.attr("transform",function(we){return t(0,we.y)}),ye.append("rect").attr("class","catrect").attr("pointer-events","none"),fe.select("rect.catrect").attr("fill","none").attr("width",function(we){return we.width}).attr("height",function(we){return we.height}),w(ye);var Ae=fe.selectAll("rect.bandrect").data(function(we){return we.bands},u);Ae.each(function(){e.raiseToTop(this)}),Ae.attr("fill",function(we){return we.color});var pe=Ae.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(we){return we.color}).attr("fill-opacity",0);Ae.attr("fill",function(we){return we.color}).attr("width",function(we){return we.width}).attr("height",function(we){return we.height}).attr("y",function(we){return we.y}).attr("cursor",function(we){return we.parcatsViewModel.arrangement==="fixed"?"default":we.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),b(pe),Ae.exit().remove(),ye.append("text").attr("class","catlabel").attr("pointer-events","none");var ge=B._fullLayout.paper_bgcolor;fe.select("text.catlabel").attr("text-anchor",function(we){return o(we)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",n.makeTextShadow(ge)).style("fill","rgb(0, 0, 0)").attr("x",function(we){return o(we)?we.width+5:-5}).attr("y",function(we){return we.height/2}).text(function(we){return we.model.categoryLabel}).each(function(we){r.font(m.select(this),we.parcatsViewModel.categorylabelfont),n.convertToTspans(m.select(this),B)}),ye.append("text").attr("class","dimlabel"),fe.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(we){return we.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(we){return we.width/2}).attr("y",-5).text(function(we,oe){return oe===0?we.parcatsViewModel.model.dimensions[we.model.dimensionInd].dimensionLabel:null}).each(function(we){r.font(m.select(this),we.parcatsViewModel.labelfont)}),fe.selectAll("rect.bandrect").on("mouseover",I).on("mouseout",P),fe.exit().remove(),ve.call(m.behavior.drag().origin(function(we){return{x:we.x,y:0}}).on("dragstart",S).on("drag",E).on("dragend",z)),te.each(function(we){we.traceSelection=m.select(this),we.pathSelection=m.select(this).selectAll("g.paths").selectAll("path.path"),we.dimensionSelection=m.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),te.exit().remove()}function u(V){return V.key}function o(V){var B=V.parcatsViewModel.dimensions.length,j=V.parcatsViewModel.dimensions[B-1].model.dimensionInd;return V.model.dimensionInd===j}function h(V,B){return V.model.rawColor>B.model.rawColor?1:V.model.rawColor<B.model.rawColor?-1:0}function s(V){if(!V.parcatsViewModel.dragDimension&&V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){e.raiseToTop(this),f(m.select(this));var B=p(V),j=c(V);if(V.parcatsViewModel.graphDiv.emit("plotly_hover",{points:B,event:m.event,constraints:j}),V.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var ee,N,$,K=m.mouse(this)[0],te=V.parcatsViewModel.graphDiv,ie=V.parcatsViewModel.trace,le=te._fullLayout,se=le._paperdiv.node().getBoundingClientRect(),ve=V.parcatsViewModel.graphDiv.getBoundingClientRect();for($=0;$<V.leftXs.length-1;$++)if(V.leftXs[$]+V.dimWidths[$]-2<=K&&K<=V.leftXs[$+1]+2){var fe=V.parcatsViewModel.dimensions[$],ye=V.parcatsViewModel.dimensions[$+1];ee=(fe.x+fe.width+ye.x)/2,N=(V.topYs[$]+V.topYs[$+1]+V.height)/2;break}var Ae=V.parcatsViewModel.x+ee,pe=V.parcatsViewModel.y+N,ge=l.mostReadable(V.model.color,["black","white"]),we=V.model.count,oe=we/V.parcatsViewModel.model.count,de={countLabel:we,probabilityLabel:oe.toFixed(3)},Te=[];V.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Te.push(["Count:",de.countLabel].join(" ")),V.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Te.push(["P:",de.probabilityLabel].join(" "));var Ee=Te.join("<br>"),Me=m.mouse(te)[0];x.loneHover({trace:ie,x:Ae-se.left+ve.left,y:pe-se.top+ve.top,text:Ee,color:V.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:ge,idealAlign:Me<Ae?"right":"left",hovertemplate:(ie.line||{}).hovertemplate,hovertemplateLabels:de,eventData:[{data:ie._input,fullData:ie,count:we,probability:oe}]},{container:le._hoverlayer.node(),outerContainer:le._paper.node(),gd:te})}}}function a(V){if(!V.parcatsViewModel.dragDimension&&(y(m.select(this)),x.loneUnhover(V.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),V.parcatsViewModel.pathSelection.sort(h),V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var B=p(V),j=c(V);V.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:B,event:m.event,constraints:j})}}function p(V){for(var B=[],j=D(V.parcatsViewModel),ee=0;ee<V.model.valueInds.length;ee++){var N=V.model.valueInds[ee];B.push({curveNumber:j,pointNumber:N})}return B}function c(V){for(var B={},j=V.parcatsViewModel.model.dimensions,ee=0;ee<j.length;ee++){var N=j[ee],$=N.categories[V.model.categoryInds[ee]];B[N.containerInd]=$.categoryValue}return V.model.rawColor!==void 0&&(B.color=V.model.rawColor),B}function i(V){if(V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var B=p(V),j=c(V);V.parcatsViewModel.graphDiv.emit("plotly_click",{points:B,event:m.event,constraints:j})}}function y(V){V.attr("fill",function(B){return B.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function f(V){V.attr("fill-opacity",.8).attr("stroke",function(B){return l.mostReadable(B.model.color,["black","white"])}).attr("stroke-width",.3)}function w(V){V.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function b(V){V.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function _(V){var B=V.parcatsViewModel.pathSelection,j=V.categoryViewModel.model.dimensionInd,ee=V.categoryViewModel.model.categoryInd;return B.filter(function(N){return N.model.categoryInds[j]===ee&&N.model.color===V.color})}function T(V,B,j){var ee=m.select(V).datum(),N=ee.categoryViewModel.model,$=ee.parcatsViewModel.graphDiv,K=m.select(V.parentNode).selectAll("rect.bandrect"),te=[];K.each(function(le){_(le).each(function(se){Array.prototype.push.apply(te,p(se))})});var ie={};ie[N.dimensionInd]=N.categoryValue,$.emit(B,{points:te,event:j,constraints:ie})}function L(V,B,j){var ee=m.select(V).datum(),N=ee.categoryViewModel.model,$=ee.parcatsViewModel.graphDiv,K=_(ee),te=[];K.each(function(le){Array.prototype.push.apply(te,p(le))});var ie={};ie[N.dimensionInd]=N.categoryValue,ee.rawColor!==void 0&&(ie.color=ee.rawColor),$.emit(B,{points:te,event:j,constraints:ie})}function A(V,B,j){V._fullLayout._calcInverseTransform(V);var ee,N,$=V._fullLayout._invScaleX,K=V._fullLayout._invScaleY,te=m.select(j.parentNode).select("rect.catrect"),ie=te.node().getBoundingClientRect(),le=te.datum(),se=le.parcatsViewModel,ve=se.model.dimensions[le.model.dimensionInd],fe=se.trace,ye=ie.top+ie.height/2;se.dimensions.length>1&&ve.displayInd===se.dimensions.length-1?(ee=ie.left,N="left"):(ee=ie.left+ie.width,N="right");var Ae=le.model.count,pe=le.model.categoryLabel,ge=Ae/le.parcatsViewModel.model.count,we={countLabel:Ae,categoryLabel:pe,probabilityLabel:ge.toFixed(3)},oe=[];le.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&oe.push(["Count:",we.countLabel].join(" ")),le.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&oe.push(["P("+we.categoryLabel+"):",we.probabilityLabel].join(" "));var de=oe.join("<br>");return{trace:fe,x:$*(ee-B.left),y:K*(ye-B.top),text:de,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:N,hovertemplate:fe.hovertemplate,hovertemplateLabels:we,eventData:[{data:fe._input,fullData:fe,count:Ae,category:pe,probability:ge}]}}function I(V){if(!V.parcatsViewModel.dragDimension&&V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){if(m.mouse(this)[1]<-1)return;var B,j=V.parcatsViewModel.graphDiv,ee=j._fullLayout,N=ee._paperdiv.node().getBoundingClientRect(),$=V.parcatsViewModel.hoveron;$==="color"?(function(K){var te=m.select(K).datum(),ie=_(te);f(ie),ie.each(function(){e.raiseToTop(this)}),m.select(K.parentNode).selectAll("rect.bandrect").filter(function(le){return le.color===te.color}).each(function(){e.raiseToTop(this),m.select(this).attr("stroke","black").attr("stroke-width",1.5)})}(this),L(this,"plotly_hover",m.event)):(function(K){m.select(K.parentNode).selectAll("rect.bandrect").each(function(te){var ie=_(te);f(ie),ie.each(function(){e.raiseToTop(this)})}),m.select(K.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(this),T(this,"plotly_hover",m.event)),V.parcatsViewModel.hoverinfoItems.indexOf("none")===-1&&($==="category"?B=A(j,N,this):$==="color"?B=function(K,te,ie){K._fullLayout._calcInverseTransform(K);var le,se,ve=K._fullLayout._invScaleX,fe=K._fullLayout._invScaleY,ye=ie.getBoundingClientRect(),Ae=m.select(ie).datum(),pe=Ae.categoryViewModel,ge=pe.parcatsViewModel,we=ge.model.dimensions[pe.model.dimensionInd],oe=ge.trace,de=ye.y+ye.height/2;ge.dimensions.length>1&&we.displayInd===ge.dimensions.length-1?(le=ye.left,se="left"):(le=ye.left+ye.width,se="right");var Te=pe.model.categoryLabel,Ee=Ae.parcatsViewModel.model.count,Me=0;Ae.categoryViewModel.bands.forEach(function(ot){ot.color===Ae.color&&(Me+=ot.count)});var De=pe.model.count,Ie=0;ge.pathSelection.each(function(ot){ot.model.color===Ae.color&&(Ie+=ot.model.count)});var Oe=Me/Ee,Ze=Me/Ie,Fe=Me/De,Pe={countLabel:Ee,categoryLabel:Te,probabilityLabel:Oe.toFixed(3)},ze=[];pe.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&ze.push(["Count:",Pe.countLabel].join(" ")),pe.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(ze.push("P(color \u2229 "+Te+"): "+Pe.probabilityLabel),ze.push("P("+Te+" | color): "+Ze.toFixed(3)),ze.push("P(color | "+Te+"): "+Fe.toFixed(3)));var Ge=ze.join("<br>"),$e=l.mostReadable(Ae.color,["black","white"]);return{trace:oe,x:ve*(le-te.left),y:fe*(de-te.top),text:Ge,color:Ae.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:$e,fontSize:10,idealAlign:se,hovertemplate:oe.hovertemplate,hovertemplateLabels:Pe,eventData:[{data:oe._input,fullData:oe,category:Te,count:Ee,probability:Oe,categorycount:De,colorcount:Ie,bandcolorcount:Me}]}}(j,N,this):$==="dimension"&&(B=function(K,te,ie){var le=[];return m.select(ie.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){le.push(A(K,te,this))}),le}(j,N,this)),B&&x.loneHover(B,{container:ee._hoverlayer.node(),outerContainer:ee._paper.node(),gd:j}))}}function P(V){var B=V.parcatsViewModel;!B.dragDimension&&(y(B.pathSelection),w(B.dimensionSelection.selectAll("g.category")),b(B.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),x.loneUnhover(B.graphDiv._fullLayout._hoverlayer.node()),B.pathSelection.sort(h),B.hoverinfoItems.indexOf("skip")===-1)&&(V.parcatsViewModel.hoveron==="color"?L(this,"plotly_unhover",m.event):T(this,"plotly_unhover",m.event))}function S(V){V.parcatsViewModel.arrangement!=="fixed"&&(V.dragDimensionDisplayInd=V.model.displayInd,V.initialDragDimensionDisplayInds=V.parcatsViewModel.model.dimensions.map(function(B){return B.displayInd}),V.dragHasMoved=!1,V.dragCategoryDisplayInd=null,m.select(this).selectAll("g.category").select("rect.catrect").each(function(B){var j=m.mouse(this)[0],ee=m.mouse(this)[1];-2<=j&&j<=B.width+2&&-2<=ee&&ee<=B.height+2&&(V.dragCategoryDisplayInd=B.model.displayInd,V.initialDragCategoryDisplayInds=V.model.categories.map(function(N){return N.displayInd}),B.model.dragY=B.y,e.raiseToTop(this.parentNode),m.select(this.parentNode).selectAll("rect.bandrect").each(function(N){N.y<ee&&ee<=N.y+N.height&&(V.potentialClickBand=this)}))}),V.parcatsViewModel.dragDimension=V,x.loneUnhover(V.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function E(V){if(V.parcatsViewModel.arrangement!=="fixed"&&(V.dragHasMoved=!0,V.dragDimensionDisplayInd!==null)){var B=V.dragDimensionDisplayInd,j=B-1,ee=B+1,N=V.parcatsViewModel.dimensions[B];if(V.dragCategoryDisplayInd!==null){var $=N.categories[V.dragCategoryDisplayInd];$.model.dragY+=m.event.dy;var K=$.model.dragY,te=$.model.displayInd,ie=N.categories,le=ie[te-1],se=ie[te+1];le!==void 0&&K<le.y+le.height/2&&($.model.displayInd=le.model.displayInd,le.model.displayInd=te),se!==void 0&&K+$.height>se.y+se.height/2&&($.model.displayInd=se.model.displayInd,se.model.displayInd=te),V.dragCategoryDisplayInd=$.model.displayInd}if(V.dragCategoryDisplayInd===null||V.parcatsViewModel.arrangement==="freeform"){N.model.dragX=m.event.x;var ve=V.parcatsViewModel.dimensions[j],fe=V.parcatsViewModel.dimensions[ee];ve!==void 0&&N.model.dragX<ve.x+ve.width&&(N.model.displayInd=ve.model.displayInd,ve.model.displayInd=B),fe!==void 0&&N.model.dragX+N.width>fe.x&&(N.model.displayInd=fe.model.displayInd,fe.model.displayInd=V.dragDimensionDisplayInd),V.dragDimensionDisplayInd=N.model.displayInd}Z(V.parcatsViewModel),W(V.parcatsViewModel),H(V.parcatsViewModel),U(V.parcatsViewModel)}}function z(V){if(V.parcatsViewModel.arrangement!=="fixed"&&V.dragDimensionDisplayInd!==null){m.select(this).selectAll("text").attr("font-weight","normal");var B={},j=D(V.parcatsViewModel),ee=V.parcatsViewModel.model.dimensions.map(function(se){return se.displayInd}),N=V.initialDragDimensionDisplayInds.some(function(se,ve){return se!==ee[ve]});N&&ee.forEach(function(se,ve){var fe=V.parcatsViewModel.model.dimensions[ve].containerInd;B["dimensions["+fe+"].displayindex"]=se});var $=!1;if(V.dragCategoryDisplayInd!==null){var K=V.model.categories.map(function(se){return se.displayInd});if($=V.initialDragCategoryDisplayInds.some(function(se,ve){return se!==K[ve]})){var te=V.model.categories.slice().sort(function(se,ve){return se.displayInd-ve.displayInd}),ie=te.map(function(se){return se.categoryValue}),le=te.map(function(se){return se.categoryLabel});B["dimensions["+V.model.containerInd+"].categoryarray"]=[ie],B["dimensions["+V.model.containerInd+"].ticktext"]=[le],B["dimensions["+V.model.containerInd+"].categoryorder"]="array"}}V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!V.dragHasMoved&&V.potentialClickBand&&(V.parcatsViewModel.hoveron==="color"?L(V.potentialClickBand,"plotly_click",m.event.sourceEvent):T(V.potentialClickBand,"plotly_click",m.event.sourceEvent)),V.model.dragX=null,V.dragCategoryDisplayInd!==null&&(V.parcatsViewModel.dimensions[V.dragDimensionDisplayInd].categories[V.dragCategoryDisplayInd].model.dragY=null,V.dragCategoryDisplayInd=null),V.dragDimensionDisplayInd=null,V.parcatsViewModel.dragDimension=null,V.dragHasMoved=null,V.potentialClickBand=null,Z(V.parcatsViewModel),W(V.parcatsViewModel),m.transition().duration(300).ease("cubic-in-out").each(function(){H(V.parcatsViewModel,!0),U(V.parcatsViewModel,!0)}).each("end",function(){(N||$)&&k.restyle(V.parcatsViewModel.graphDiv,B,[j])})}}function D(V){for(var B,j=V.graphDiv._fullData,ee=0;ee<j.length;ee++)if(V.key===j[ee].uid){B=ee;break}return B}function U(V,B){var j;B===void 0&&(B=!1),V.pathSelection.data(function(ee){return ee.paths},u),(j=V.pathSelection,B?j.transition():j).attr("d",function(ee){return ee.svgD})}function H(V,B){function j(K){return B?K.transition():K}B===void 0&&(B=!1),V.dimensionSelection.data(function(K){return K.dimensions},u);var ee=V.dimensionSelection.selectAll("g.category").data(function(K){return K.categories},u);j(V.dimensionSelection).attr("transform",function(K){return t(K.x,0)}),j(ee).attr("transform",function(K){return t(0,K.y)}),ee.select(".dimlabel").text(function(K,te){return te===0?K.parcatsViewModel.model.dimensions[K.model.dimensionInd].dimensionLabel:null}),ee.select(".catlabel").attr("text-anchor",function(K){return o(K)?"start":"end"}).attr("x",function(K){return o(K)?K.width+5:-5}).each(function(K){var te,ie;o(K)?(te=K.width+5,ie="start"):(te=-5,ie="end"),m.select(this).selectAll("tspan").attr("x",te).attr("text-anchor",ie)});var N=ee.selectAll("rect.bandrect").data(function(K){return K.bands},u),$=N.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(K){return K.color}).attr("fill-opacity",0);N.attr("fill",function(K){return K.color}).attr("width",function(K){return K.width}).attr("height",function(K){return K.height}).attr("y",function(K){return K.y}),b($),N.each(function(){e.raiseToTop(this)}),N.exit().remove()}function Y(V,B,j){var ee,N=j[0],$=B.margin||{l:80,r:80,t:100,b:80},K=N.trace,te=K.domain,ie=B.width,le=B.height,se=Math.floor(ie*(te.x[1]-te.x[0])),ve=Math.floor(le*(te.y[1]-te.y[0])),fe=te.x[0]*ie+$.l,ye=B.height-te.y[1]*B.height+$.t,Ae=K.line.shape;ee=K.hoverinfo==="all"?["count","probability"]:(K.hoverinfo||"").split("+");var pe={trace:K,key:K.uid,model:N,x:fe,y:ye,width:se,height:ve,hoveron:K.hoveron,hoverinfoItems:ee,arrangement:K.arrangement,bundlecolors:K.bundlecolors,sortpaths:K.sortpaths,labelfont:K.labelfont,categorylabelfont:K.tickfont,pathShape:Ae,dragDimension:null,margin:$,paths:[],dimensions:[],graphDiv:V,traceSelection:null,pathSelection:null,dimensionSelection:null};return N.dimensions&&(Z(pe),W(pe)),pe}function J(V,B,j,ee,N){var $,K,te=[],ie=[];for(K=0;K<j.length-1;K++)$=v(j[K]+V[K],V[K+1]),te.push($(N)),ie.push($(1-N));var le="M "+V[0]+","+B[0];for(le+="l"+j[0]+",0 ",K=1;K<j.length;K++)le+="C"+te[K-1]+","+B[K-1]+" "+ie[K-1]+","+B[K]+" "+V[K]+","+B[K],le+="l"+j[K]+",0 ";for(le+="l0,"+ee+" ",le+="l -"+j[j.length-1]+",0 ",K=j.length-2;K>=0;K--)le+="C"+ie[K]+","+(B[K+1]+ee)+" "+te[K]+","+(B[K]+ee)+" "+(V[K]+j[K])+","+(B[K]+ee),le+="l-"+j[K]+",0 ";return le+="Z"}function W(V){var B=V.dimensions,j=V.model,ee=B.map(function(ze){return ze.categories.map(function(Ge){return Ge.y})}),N=V.model.dimensions.map(function(ze){return ze.categories.map(function(Ge){return Ge.displayInd})}),$=V.model.dimensions.map(function(ze){return ze.displayInd}),K=V.dimensions.map(function(ze){return ze.model.dimensionInd}),te=B.map(function(ze){return ze.x}),ie=B.map(function(ze){return ze.width}),le=[];for(var se in j.paths)j.paths.hasOwnProperty(se)&&le.push(j.paths[se]);function ve(ze){var Ge=ze.categoryInds.map(function($e,ot){return N[ot][$e]});return K.map(function($e){return Ge[$e]})}le.sort(function(ze,Ge){var $e=ve(ze),ot=ve(Ge);return V.sortpaths==="backward"&&($e.reverse(),ot.reverse()),$e.push(ze.valueInds[0]),ot.push(Ge.valueInds[0]),V.bundlecolors&&($e.unshift(ze.rawColor),ot.unshift(Ge.rawColor)),$e<ot?-1:$e>ot?1:0});for(var fe=new Array(le.length),ye=B[0].model.count,Ae=B[0].categories.map(function(ze){return ze.height}).reduce(function(ze,Ge){return ze+Ge}),pe=0;pe<le.length;pe++){var ge,we=le[pe];ge=ye>0?Ae*(we.count/ye):0;for(var oe,de=new Array(ee.length),Te=0;Te<we.categoryInds.length;Te++){var Ee=we.categoryInds[Te],Me=N[Te][Ee],De=$[Te];de[De]=ee[De][Me],ee[De][Me]+=ge;var Ie=V.dimensions[De].categories[Me],Oe=Ie.bands.length,Ze=Ie.bands[Oe-1];if(Ze===void 0||we.rawColor!==Ze.rawColor){var Fe=Ze===void 0?0:Ze.y+Ze.height;Ie.bands.push({key:Fe,color:we.color,rawColor:we.rawColor,height:ge,width:Ie.width,count:we.count,y:Fe,categoryViewModel:Ie,parcatsViewModel:V})}else{var Pe=Ie.bands[Oe-1];Pe.height+=ge,Pe.count+=we.count}}oe=V.pathShape==="hspline"?J(te,de,ie,ge,.5):J(te,de,ie,ge,0),fe[pe]={key:we.valueInds[0],model:we,height:ge,leftXs:te,topYs:de,dimWidths:ie,svgD:oe,parcatsViewModel:V}}V.paths=fe}function Z(V){var B=V.model.dimensions.map(function(K){return{displayInd:K.displayInd,dimensionInd:K.dimensionInd}});B.sort(function(K,te){return K.displayInd-te.displayInd});var j=[];for(var ee in B){var N=B[ee].dimensionInd,$=V.model.dimensions[N];j.push(re(V,$))}V.dimensions=j}function re(V,B){var j,ee=V.model.dimensions.length,N=B.displayInd;j=40+(ee>1?(V.width-80-16)/(ee-1):0)*N;var $,K,te,ie,le,se=[],ve=V.model.maxCats,fe=B.categories.length,ye=B.count,Ae=V.height-8*(ve-1),pe=8*(ve-fe)/2,ge=B.categories.map(function(we){return{displayInd:we.displayInd,categoryInd:we.categoryInd}});for(ge.sort(function(we,oe){return we.displayInd-oe.displayInd}),le=0;le<fe;le++)ie=ge[le].categoryInd,K=B.categories[ie],$=ye>0?K.count/ye*Ae:0,te={key:K.valueInds[0],model:K,width:16,height:$,y:K.dragY!==null?K.dragY:pe,bands:[],parcatsViewModel:V},pe=pe+$+8,se.push(te);return{key:B.dimensionInd,x:B.dragX!==null?B.dragX:j,y:0,width:16,model:B,categories:se,parcatsViewModel:V,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}Q.exports=function(V,B,j,ee){d(j,V,ee,B)}},{"../../components/drawing":389,"../../components/fx":407,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_api":552,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:313}],896:[function(g,Q,X){var m=g("./parcats");Q.exports=function(v,k,x,e){var t=v._fullLayout,r=t._paper,l=t._size;m(v,r,k,{width:l.w,height:l.h,margin:{t:l.t,r:l.r,b:l.b,l:l.l}},x,e)}},{"./parcats":895}],897:[function(g,Q,X){var m=g("../../components/colorscale/attributes"),v=g("../../plots/cartesian/layout_attributes"),k=g("../../plots/font_attributes"),x=g("../../plots/domain").attributes,e=g("../../lib/extend").extendFlat,t=g("../../plot_api/plot_template").templatedArray;Q.exports={domain:x({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:k({editType:"plot"}),tickfont:k({editType:"plot"}),rangefont:k({editType:"plot"}),dimensions:t("dimension",{label:{valType:"string",editType:"plot"},tickvals:e({},v.tickvals,{editType:"plot"}),ticktext:e({},v.ticktext,{editType:"plot"}),tickformat:e({},v.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:e({editType:"calc"},m("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/layout_attributes":579,"../../plots/domain":593,"../../plots/font_attributes":594}],898:[function(g,Q,X){var m=g("./constants"),v=g("@plotly/d3"),k=g("../../lib/gup").keyFun,x=g("../../lib/gup").repeat,e=g("../../lib").sorterAsc,t=g("../../lib").strTranslate,r=m.bar.snapRatio;function l(A,I){return A*(1-r)+I*r}var n=m.bar.snapClose;function d(A,I){return A*(1-n)+I*n}function u(A,I,P,S){if(function(re,V){for(var B=0;B<V.length;B++)if(re>=V[B][0]&&re<=V[B][1])return!0;return!1}(P,S))return P;var E=A?-1:1,z=0,D=I.length-1;if(E<0){var U=z;z=D,D=U}for(var H=I[z],Y=H,J=z;E*J<E*D;J+=E){var W=J+E,Z=I[W];if(E*P<E*d(H,Z))return l(H,Y);if(E*P<E*Z||W===D)return l(Z,H);Y=H,H=Z}}function o(A){A.attr("x",-m.bar.captureWidth/2).attr("width",m.bar.captureWidth)}function h(A){A.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function s(A){if(!A.brush.filterSpecified)return"0,"+A.height;for(var I,P,S,E=a(A.brush.filter.getConsolidated(),A.height),z=[0],D=E.length?E[0][0]:null,U=0;U<E.length;U++)P=(I=E[U])[1]-I[0],z.push(D),z.push(P),(S=U+1)<E.length&&(D=E[S][0]-I[1]);return z.push(A.height),z}function a(A,I){return A.map(function(P){return P.map(function(S){return Math.max(0,S*I)}).sort(e)})}function p(){v.select(document.body).style("cursor",null)}function c(A){A.attr("stroke-dasharray",s)}function i(A,I){var P=v.select(A).selectAll(".highlight, .highlight-shadow");c(I?P.transition().duration(m.bar.snapDuration).each("end",I):P)}function y(A,I){var P,S=A.brush,E=NaN,z={};if(S.filterSpecified){var D=A.height,U=S.filter.getConsolidated(),H=a(U,D),Y=NaN,J=NaN,W=NaN;for(P=0;P<=H.length;P++){var Z=H[P];if(Z&&Z[0]<=I&&I<=Z[1]){Y=P;break}if(J=P?P-1:NaN,Z&&Z[0]>I){W=P;break}}if(E=Y,isNaN(E)&&(E=isNaN(J)||isNaN(W)?isNaN(J)?W:J:I-H[J][1]<H[W][0]-I?J:W),!isNaN(E)){var re=H[E],V=function(N,$){var K=m.bar.handleHeight;if(!($>N[1]+K||$<N[0]-K))return $>=.9*N[1]+.1*N[0]?"n":$<=.9*N[0]+.1*N[1]?"s":"ns"}(re,I);V&&(z.interval=U[E],z.intervalPix=re,z.region=V)}}if(A.ordinal&&!z.region){var B=A.unitTickvals,j=A.unitToPaddedPx.invert(I);for(P=0;P<B.length;P++){var ee=[.25*B[Math.max(P-1,0)]+.75*B[P],.25*B[Math.min(P+1,B.length-1)]+.75*B[P]];if(j>=ee[0]&&j<=ee[1]){z.clickableOrdinalRange=ee;break}}}return z}function f(A,I){v.event.sourceEvent.stopPropagation();var P=I.height-v.mouse(A)[1]-2*m.verticalPadding,S=I.brush.svgBrush;S.wasDragged=!0,S._dragging=!0,S.grabbingBar?S.newExtent=[P-S.grabPoint,P+S.barLength-S.grabPoint].map(I.unitToPaddedPx.invert):S.newExtent=[S.startExtent,I.unitToPaddedPx.invert(P)].sort(e),I.brush.filterSpecified=!0,S.extent=S.stayingIntervals.concat([S.newExtent]),S.brushCallback(I),i(A.parentNode)}function w(A,I){var P=y(I,I.height-v.mouse(A)[1]-2*m.verticalPadding),S="crosshair";P.clickableOrdinalRange?S="pointer":P.region&&(S=P.region+"-resize"),v.select(document.body).style("cursor",S)}function b(A){A.on("mousemove",function(I){v.event.preventDefault(),I.parent.inBrushDrag||w(this,I)}).on("mouseleave",function(I){I.parent.inBrushDrag||p()}).call(v.behavior.drag().on("dragstart",function(I){(function(P,S){v.event.sourceEvent.stopPropagation();var E=S.height-v.mouse(P)[1]-2*m.verticalPadding,z=S.unitToPaddedPx.invert(E),D=S.brush,U=y(S,E),H=U.interval,Y=D.svgBrush;if(Y.wasDragged=!1,Y.grabbingBar=U.region==="ns",Y.grabbingBar){var J=H.map(S.unitToPaddedPx);Y.grabPoint=E-J[0]-m.verticalPadding,Y.barLength=J[1]-J[0]}Y.clickableOrdinalRange=U.clickableOrdinalRange,Y.stayingIntervals=S.multiselect&&D.filterSpecified?D.filter.getConsolidated():[],H&&(Y.stayingIntervals=Y.stayingIntervals.filter(function(W){return W[0]!==H[0]&&W[1]!==H[1]})),Y.startExtent=U.region?H[U.region==="s"?1:0]:z,S.parent.inBrushDrag=!0,Y.brushStartCallback()})(this,I)}).on("drag",function(I){f(this,I)}).on("dragend",function(I){(function(P,S){var E=S.brush,z=E.filter,D=E.svgBrush;D._dragging||(w(P,S),f(P,S),S.brush.svgBrush.wasDragged=!1),D._dragging=!1,v.event.sourceEvent.stopPropagation();var U=D.grabbingBar;if(D.grabbingBar=!1,D.grabLocation=void 0,S.parent.inBrushDrag=!1,p(),!D.wasDragged)return D.wasDragged=void 0,D.clickableOrdinalRange?E.filterSpecified&&S.multiselect?D.extent.push(D.clickableOrdinalRange):(D.extent=[D.clickableOrdinalRange],E.filterSpecified=!0):U?(D.extent=D.stayingIntervals,D.extent.length===0&&T(E)):T(E),D.brushCallback(S),i(P.parentNode),void D.brushEndCallback(E.filterSpecified?z.getConsolidated():[]);var H=function(){z.set(z.getConsolidated())};if(S.ordinal){var Y=S.unitTickvals;Y[Y.length-1]<Y[0]&&Y.reverse(),D.newExtent=[u(0,Y,D.newExtent[0],D.stayingIntervals),u(1,Y,D.newExtent[1],D.stayingIntervals)];var J=D.newExtent[1]>D.newExtent[0];D.extent=D.stayingIntervals.concat(J?[D.newExtent]:[]),D.extent.length||T(E),D.brushCallback(S),J?i(P.parentNode,H):(H(),i(P.parentNode))}else H();D.brushEndCallback(E.filterSpecified?z.getConsolidated():[])})(this,I)}))}function _(A,I){return A[0]-I[0]}function T(A){A.filterSpecified=!1,A.svgBrush.extent=[[-1/0,1/0]]}function L(A){for(var I,P=A.slice(),S=[],E=P.shift();E;){for(I=E.slice();(E=P.shift())&&E[0]<=I[1];)I[1]=Math.max(I[1],E[1]);S.push(I)}return S.length===1&&S[0][0]>S[0][1]&&(S=[]),S}Q.exports={makeBrush:function(A,I,P,S,E,z){var D,U=function(){var H,Y,J=[];return{set:function(W){(J=W.map(function(Z){return Z.slice().sort(e)}).sort(_)).length===1&&J[0][0]===-1/0&&J[0][1]===1/0&&(J=[[0,-1]]),H=L(J),Y=J.reduce(function(Z,re){return[Math.min(Z[0],re[0]),Math.max(Z[1],re[1])]},[1/0,-1/0])},get:function(){return J.slice()},getConsolidated:function(){return H},getBounds:function(){return Y}}}();return U.set(P),{filter:U,filterSpecified:I,svgBrush:{extent:[],brushStartCallback:S,brushCallback:(D=E,function(H){var Y=H.brush,J=function(W){return W.svgBrush.extent.map(function(Z){return Z.slice()})}(Y).slice();Y.filter.set(J),D()}),brushEndCallback:z}}},ensureAxisBrush:function(A,I,P){var S=A.selectAll("."+m.cn.axisBrush).data(x,k);S.enter().append("g").classed(m.cn.axisBrush,!0),function(E,z,D){var U=D._context.staticPlot,H=E.selectAll(".background").data(x);H.enter().append("rect").classed("background",!0).call(o).call(h).style("pointer-events",U?"none":"auto").attr("transform",t(0,m.verticalPadding)),H.call(b).attr("height",function(W){return W.height-m.verticalPadding});var Y=E.selectAll(".highlight-shadow").data(x);Y.enter().append("line").classed("highlight-shadow",!0).attr("x",-m.bar.width/2).attr("stroke-width",m.bar.width+m.bar.strokeWidth).attr("stroke",z).attr("opacity",m.bar.strokeOpacity).attr("stroke-linecap","butt"),Y.attr("y1",function(W){return W.height}).call(c);var J=E.selectAll(".highlight").data(x);J.enter().append("line").classed("highlight",!0).attr("x",-m.bar.width/2).attr("stroke-width",m.bar.width-m.bar.strokeWidth).attr("stroke",m.bar.fillColor).attr("opacity",m.bar.fillOpacity).attr("stroke-linecap","butt"),J.attr("y1",function(W){return W.height}).call(c)}(S,I,P)},cleanRanges:function(A,I){if(Array.isArray(A[0])?(A=A.map(function(S){return S.sort(e)}),A=I.multiselect?L(A.sort(_)):[A[0]]):A=[A.sort(e)],I.tickvals){var P=I.tickvals.slice().sort(e);if(!(A=A.map(function(S){var E=[u(0,P,S[0],[]),u(1,P,S[1],[])];if(E[1]>E[0])return E}).filter(function(S){return S})).length)return}return A.length>1?A:A[0]}}},{"../../lib":515,"../../lib/gup":512,"./constants":902,"@plotly/d3":58}],899:[function(g,Q,X){Q.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),calc:g("./calc"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:g("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":897,"./base_plot":900,"./calc":901,"./defaults":903}],900:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../plots/get_data").getModuleCalcData,k=g("./plot"),x=g("../../constants/xmlns_namespaces");X.name="parcoords",X.plot=function(e){var t=v(e.calcdata,"parcoords")[0];t.length&&k(e,t)},X.clean=function(e,t,r,l){var n=l._has&&l._has("parcoords"),d=t._has&&t._has("parcoords");n&&!d&&(l._paperdiv.selectAll(".parcoords").remove(),l._glimages.selectAll("*").remove())},X.toSVG=function(e){var t=e._fullLayout._glimages,r=m.select(e).selectAll(".svg-container");r.filter(function(l,n){return n===r.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var l=this.toDataURL("image/png");t.append("svg:image").attr({xmlns:x.svg,"xlink:href":l,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})}),window.setTimeout(function(){m.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":492,"../../plots/get_data":602,"./plot":909,"@plotly/d3":58}],901:[function(g,Q,X){var m=g("../../lib").isArrayOrTypedArray,v=g("../../components/colorscale"),k=g("../../lib/gup").wrap;Q.exports=function(x,e){var t,r;return v.hasColorscale(e,"line")&&m(e.line.color)?(t=e.line.color,r=v.extractOpts(e.line).colorscale,v.calc(x,e,{vals:t,containerStr:"line",cLetter:"c"})):(t=function(l){for(var n=new Array(l),d=0;d<l;d++)n[d]=.5;return n}(e._length),r=[[0,e.line.color],[1,e.line.color]]),k({lineColor:t,cscale:r})}},{"../../components/colorscale":379,"../../lib":515,"../../lib/gup":512}],902:[function(g,Q,X){Q.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],903:[function(g,Q,X){var m=g("../../lib"),v=g("../../components/colorscale/helpers").hasColorscale,k=g("../../components/colorscale/defaults"),x=g("../../plots/domain").defaults,e=g("../../plots/array_container_defaults"),t=g("../../plots/cartesian/axes"),r=g("./attributes"),l=g("./axisbrush"),n=g("./constants").maxDimensionCount,d=g("./merge_length");function u(o,h,s,a){function p(w,b){return m.coerce(o,h,r.dimensions,w,b)}var c=p("values"),i=p("visible");if(c&&c.length||(i=h.visible=!1),i){p("label"),p("tickvals"),p("ticktext"),p("tickformat");var y=p("range");h._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:y},t.setConvert(h._ax,a.layout),p("multiselect");var f=p("constraintrange");f&&(h.constraintrange=l.cleanRanges(f,h))}}Q.exports=function(o,h,s,a){function p(w,b){return m.coerce(o,h,r,w,b)}var c=o.dimensions;Array.isArray(c)&&c.length>n&&(m.log("parcoords traces support up to "+n+" dimensions at the moment"),c.splice(n));var i=e(o,h,{name:"dimensions",layout:a,handleItemDefaults:u}),y=function(w,b,_,T,L){var A=L("line.color",_);if(v(w,"line")&&m.isArrayOrTypedArray(A)){if(A.length)return L("line.colorscale"),k(w,b,T,L,{prefix:"line.",cLetter:"c"}),A.length;b.line.color=_}return 1/0}(o,h,s,a,p);x(h,a,p),Array.isArray(i)&&i.length||(h.visible=!1),d(h,i,"values",y);var f={family:a.font.family,size:Math.round(a.font.size/1.2),color:a.font.color};m.coerceFont(p,"labelfont",f),m.coerceFont(p,"tickfont",f),m.coerceFont(p,"rangefont",f),p("labelangle"),p("labelside"),p("unselected.line.color"),p("unselected.line.opacity")}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../../plots/domain":593,"./attributes":897,"./axisbrush":898,"./constants":902,"./merge_length":907}],904:[function(g,Q,X){var m=g("../../lib").isTypedArray;X.convertTypedArray=function(v){return m(v)?Array.prototype.slice.call(v):v},X.isOrdinal=function(v){return!!v.tickvals},X.isVisible=function(v){return v.visible||!("visible"in v)}},{"../../lib":515}],905:[function(g,Q,X){var m=g("./base_index");m.plot=g("./plot"),Q.exports=m},{"./base_index":899,"./plot":909}],906:[function(g,Q,X){var m=g("glslify"),v=m([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;
uniform sampler2D maskTexture, palette;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(maskTexture,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),k=m([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),x=g("./constants").maxDimensionCount,e=g("../../lib"),t=new Uint8Array(4),r=new Uint8Array(4),l={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function n(i,y,f,w,b){var _=i._gl;_.enable(_.SCISSOR_TEST),_.scissor(y,f,w,b),i.clear({color:[0,0,0,0],depth:1})}function d(i,y,f,w,b,_){var T=_.key;f.drawCompleted||(function(L){L.read({x:0,y:0,width:1,height:1,data:t})}(i),f.drawCompleted=!0),function L(A){var I=Math.min(w,b-A*w);A===0&&(window.cancelAnimationFrame(f.currentRafs[T]),delete f.currentRafs[T],n(i,_.scissorX,_.scissorY,_.scissorWidth,_.viewBoxSize[1])),f.clearOnly||(_.count=2*I,_.offset=2*A*w,y(_),A*w+I<b&&(f.currentRafs[T]=window.requestAnimationFrame(function(){L(A+1)})),f.drawCompleted=!1)}(0)}function u(i,y){for(var f=new Array(256),w=0;w<256;w++)f[w]=i(w/255).concat(y);return f}function o(i,y){return(i>>>8*y)%256/255}function h(i,y,f){for(var w=new Array(8*y),b=0,_=0;_<y;_++)for(var T=0;T<2;T++)for(var L=0;L<4;L++){var A=4*i+L,I=f[64*_+A];A===63&&T===0&&(I*=-1),w[b++]=I}return w}function s(i){var y="0"+i;return y.substr(y.length-2)}function a(i){return i<x?"p"+s(i+1)+"_"+s(i+4):"colors"}function p(i,y,f,w,b,_,T,L,A,I,P,S,E,z){for(var D=[[],[]],U=0;U<64;U++)D[0][U]=U===b?1:0,D[1][U]=U===_?1:0;T*=z,L*=z,A*=z,I*=z;var H=i.lines.canvasOverdrag*z,Y=i.domain,J=i.canvasWidth*z,W=i.canvasHeight*z,Z=i.pad.l*z,re=i.pad.b*z,V=i.layoutHeight*z,B=i.layoutWidth*z,j=i.deselectedLines.color,ee=i.deselectedLines.opacity;return e.extendFlat({key:P,resolution:[J,W],viewBoxPos:[T+H,L],viewBoxSize:[A,I],i0:b,i1:_,dim0A:D[0].slice(0,16),dim0B:D[0].slice(16,32),dim0C:D[0].slice(32,48),dim0D:D[0].slice(48,64),dim1A:D[1].slice(0,16),dim1B:D[1].slice(16,32),dim1C:D[1].slice(32,48),dim1D:D[1].slice(48,64),drwLayer:S,contextColor:[j[0]/255,j[1]/255,j[2]/255,ee!=="auto"?j[3]*ee:Math.max(1/255,Math.pow(1/i.lines.color.length,1/3))],scissorX:(w===y?0:T+H)+(Z-H)+B*Y.x[0],scissorWidth:(w===f?J-T+H:A+.5)+(w===y?T+H:0),scissorY:L+re+V*Y.y[0],scissorHeight:I,viewportX:Z-H+B*Y.x[0],viewportY:re+V*Y.y[0],viewportWidth:J,viewportHeight:W},E)}function c(i){var y=Math.max(0,Math.floor(2047*i[0]),0),f=Math.min(2047,Math.ceil(2047*i[1]),2047);return[Math.min(y,f),Math.max(y,f)]}Q.exports=function(i,y){var f,w,b,_,T,L=y.context,A=y.pick,I=y.regl,P=I._gl,S=P.getParameter(P.ALIASED_LINE_WIDTH_RANGE),E=Math.max(S[0],Math.min(S[1],y.viewModel.plotGlPixelRatio)),z={currentRafs:{},drawCompleted:!0,clearOnly:!1},D=function(W){for(var Z={},re=0;re<=x;re+=4)Z[a(re)]=W.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return Z}(I),U=I.texture(l),H=[];J(y);var Y=I({profile:!1,blend:{enable:L,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!L,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:I.prop("scissorX"),y:I.prop("scissorY"),width:I.prop("scissorWidth"),height:I.prop("scissorHeight")}},viewport:{x:I.prop("viewportX"),y:I.prop("viewportY"),width:I.prop("viewportWidth"),height:I.prop("viewportHeight")},dither:!1,vert:v,frag:k,primitive:"lines",lineWidth:E,attributes:D,uniforms:{resolution:I.prop("resolution"),viewBoxPos:I.prop("viewBoxPos"),viewBoxSize:I.prop("viewBoxSize"),dim0A:I.prop("dim0A"),dim1A:I.prop("dim1A"),dim0B:I.prop("dim0B"),dim1B:I.prop("dim1B"),dim0C:I.prop("dim0C"),dim1C:I.prop("dim1C"),dim0D:I.prop("dim0D"),dim1D:I.prop("dim1D"),loA:I.prop("loA"),hiA:I.prop("hiA"),loB:I.prop("loB"),hiB:I.prop("hiB"),loC:I.prop("loC"),hiC:I.prop("hiC"),loD:I.prop("loD"),hiD:I.prop("hiD"),palette:U,contextColor:I.prop("contextColor"),maskTexture:I.prop("maskTexture"),drwLayer:I.prop("drwLayer"),maskHeight:I.prop("maskHeight")},offset:I.prop("offset"),count:I.prop("count")});function J(W){f=W.model,w=W.viewModel,b=w.dimensions.slice(),_=b[0]?b[0].values.length:0;var Z=f.lines,re=A?Z.color.map(function(B,j){return j/Z.color.length}):Z.color,V=function(B,j,ee){for(var N,$=new Array(B*(x+4)),K=0,te=0;te<B;te++){for(var ie=0;ie<x;ie++)$[K++]=ie<j.length?j[ie].paddedUnitValues[te]:.5;$[K++]=o(te,2),$[K++]=o(te,1),$[K++]=o(te,0),$[K++]=(N=ee[te],Math.max(1e-6,Math.min(.999999,N)))}return $}(_,b,re);(function(B,j,ee){for(var N=0;N<=x;N+=4)B[a(N)](h(N/4,j,ee))})(D,_,V),L||A||(U=I.texture(e.extendFlat({data:u(f.unitToColor,255)},l)))}return{render:function(W,Z,re){var V,B,j,ee=W.length,N=1/0,$=-1/0;for(V=0;V<ee;V++)W[V].dim0.canvasX<N&&(N=W[V].dim0.canvasX,B=V),W[V].dim1.canvasX>$&&($=W[V].dim1.canvasX,j=V);ee===0&&n(I,0,0,f.canvasWidth,f.canvasHeight);var K=function(ge){var we,oe,de,Te=[[],[]];for(de=0;de<64;de++){var Ee=!ge&&de<b.length?b[de].brush.filter.getBounds():[-1/0,1/0];Te[0][de]=Ee[0],Te[1][de]=Ee[1]}var Me=new Array(16384);for(we=0;we<16384;we++)Me[we]=255;if(!ge)for(we=0;we<b.length;we++){var De=we%8,Ie=(we-De)/8,Oe=Math.pow(2,De),Ze=b[we].brush.filter.get();if(!(Ze.length<2)){var Fe=c(Ze[0])[1];for(oe=1;oe<Ze.length;oe++){var Pe=c(Ze[oe]);for(de=Fe+1;de<Pe[0];de++)Me[8*de+Ie]&=~Oe;Fe=Math.max(Fe,Pe[1])}}}var ze={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Me};return T?T(ze):T=I.texture(ze),{maskTexture:T,maskHeight:2048,loA:Te[0].slice(0,16),loB:Te[0].slice(16,32),loC:Te[0].slice(32,48),loD:Te[0].slice(48,64),hiA:Te[1].slice(0,16),hiB:Te[1].slice(16,32),hiC:Te[1].slice(32,48),hiD:Te[1].slice(48,64)}}(L);for(V=0;V<ee;V++){var te=W[V],ie=te.dim0.crossfilterDimensionIndex,le=te.dim1.crossfilterDimensionIndex,se=te.canvasX,ve=te.canvasY,fe=se+te.panelSizeX,ye=te.plotGlPixelRatio;if(Z||!H[ie]||H[ie][0]!==se||H[ie][1]!==fe){H[ie]=[se,fe];var Ae=p(f,B,j,V,ie,le,se,ve,te.panelSizeX,te.panelSizeY,te.dim0.crossfilterDimensionIndex,L?0:A?2:1,K,ye);z.clearOnly=re;var pe=Z?f.lines.blockLineCount:_;d(I,Y,z,pe,_,Ae)}}},readPixel:function(W,Z){return I.read({x:W,y:Z,width:1,height:1,data:r}),r},readPixels:function(W,Z,re,V){var B=new Uint8Array(4*re*V);return I.read({x:W,y:Z,width:re,height:V,data:B}),B},destroy:function(){for(var W in i.style["pointer-events"]="none",U.destroy(),T&&T.destroy(),D)D[W].destroy()},update:J}}},{"../../lib":515,"./constants":902,glslify:227}],907:[function(g,Q,X){Q.exports=function(m,v,k,x){var e,t;for(x||(x=1/0),e=0;e<v.length;e++)(t=v[e]).visible&&(x=Math.min(x,t[k].length));for(x===1/0&&(x=0),m._length=x,e=0;e<v.length;e++)(t=v[e]).visible&&(t._length=x);return x}},{}],908:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../lib"),k=v.numberFormat,x=g("color-rgba"),e=g("../../plots/cartesian/axes"),t=v.strRotate,r=v.strTranslate,l=g("../../lib/svg_text_utils"),n=g("../../components/drawing"),d=g("../../components/colorscale"),u=g("../../lib/gup"),o=u.keyFun,h=u.repeat,s=u.unwrap,a=g("./helpers"),p=g("./constants"),c=g("./axisbrush"),i=g("./lines");function y(H,Y,J){return v.aggNums(H,null,Y,J)}function f(H,Y){return b(y(Math.min,H,Y),y(Math.max,H,Y))}function w(H){var Y=H.range;return Y?b(Y[0],Y[1]):f(H.values,H._length)}function b(H,Y){return!isNaN(H)&&isFinite(H)||(H=0),!isNaN(Y)&&isFinite(Y)||(Y=0),H===Y&&(H===0?(H-=1,Y+=1):(H*=.9,Y*=1.1)),[H,Y]}function _(H,Y,J,W,Z){var re,V,B=w(J);return W?m.scale.ordinal().domain(W.map((re=k(J.tickformat),V=Z,V?function(j,ee){var N=V[ee];return N==null?re(j):N}:re))).range(W.map(function(j){var ee=(j-B[0])/(B[1]-B[0]);return H-Y+ee*(2*Y-H)})):m.scale.linear().domain(B).range([H-Y,Y])}function T(H){if(H.tickvals){var Y=w(H);return m.scale.ordinal().domain(H.tickvals).range(H.tickvals.map(function(J){return(J-Y[0])/(Y[1]-Y[0])}))}}function L(H){var Y=H.map(function(Z){return Z[0]}),J=H.map(function(Z){var re=x(Z[1]);return m.rgb("rgb("+re[0]+","+re[1]+","+re[2]+")")}),W="rgb".split("").map(function(Z){return m.scale.linear().clamp(!0).domain(Y).range(J.map((re=Z,function(V){return V[re]})));var re});return function(Z){return W.map(function(re){return re(Z)})}}function A(H){return H.dimensions.some(function(Y){return Y.brush.filterSpecified})}function I(H,Y,J){var W=s(Y),Z=W.trace,re=a.convertTypedArray(W.lineColor),V=Z.line,B={color:x(Z.unselected.line.color),opacity:Z.unselected.line.opacity},j=d.extractOpts(V),ee=j.reversescale?d.flipScale(W.cscale):W.cscale,N=Z.domain,$=Z.dimensions,K=H.width,te=Z.labelangle,ie=Z.labelside,le=Z.labelfont,se=Z.tickfont,ve=Z.rangefont,fe=v.extendDeepNoArrays({},V,{color:re.map(m.scale.linear().domain(w({values:re,range:[j.min,j.max],_length:Z._length}))),blockLineCount:p.blockLineCount,canvasOverdrag:p.overdrag*p.canvasPixelRatio}),ye=Math.floor(K*(N.x[1]-N.x[0])),Ae=Math.floor(H.height*(N.y[1]-N.y[0])),pe=H.margin||{l:80,r:80,t:100,b:80},ge=ye,we=Ae;return{key:J,colCount:$.filter(a.isVisible).length,dimensions:$,tickDistance:p.tickDistance,unitToColor:L(ee),lines:fe,deselectedLines:B,labelAngle:te,labelSide:ie,labelFont:le,tickFont:se,rangeFont:ve,layoutWidth:K,layoutHeight:H.height,domain:N,translateX:N.x[0]*K,translateY:H.height-N.y[1]*H.height,pad:pe,canvasWidth:ge*p.canvasPixelRatio+2*fe.canvasOverdrag,canvasHeight:we*p.canvasPixelRatio,width:ge,height:we,canvasPixelRatio:p.canvasPixelRatio}}function P(H,Y,J){var W=J.width,Z=J.height,re=J.dimensions,V=J.canvasPixelRatio,B=function(K){return W*K/Math.max(1,J.colCount-1)},j=p.verticalPadding/Z,ee=function(K,te){return m.scale.linear().range([te,K-te])}(Z,p.verticalPadding),N={key:J.key,xScale:B,model:J,inBrushDrag:!1},$={};return N.dimensions=re.filter(a.isVisible).map(function(K,te){var ie=function(Me,De){return m.scale.linear().domain(w(Me)).range([De,1-De])}(K,j),le=$[K.label];$[K.label]=(le||0)+1;var se=K.label+(le?"__"+le:""),ve=K.constraintrange,fe=ve&&ve.length;fe&&!Array.isArray(ve[0])&&(ve=[ve]);var ye=fe?ve.map(function(Me){return Me.map(ie)}):[[-1/0,1/0]],Ae=K.values;Ae.length>K._length&&(Ae=Ae.slice(0,K._length));var pe,ge=K.tickvals;function we(Me,De){return{val:Me,text:pe[De]}}function oe(Me,De){return Me.val-De.val}if(Array.isArray(ge)&&ge.length){pe=K.ticktext,Array.isArray(pe)&&pe.length?pe.length>ge.length?pe=pe.slice(0,ge.length):ge.length>pe.length&&(ge=ge.slice(0,pe.length)):pe=ge.map(k(K.tickformat));for(var de=1;de<ge.length;de++)if(ge[de]<ge[de-1]){for(var Te=ge.map(we).sort(oe),Ee=0;Ee<ge.length;Ee++)ge[Ee]=Te[Ee].val,pe[Ee]=Te[Ee].text;break}}else ge=void 0;return Ae=a.convertTypedArray(Ae),{key:se,label:K.label,tickFormat:K.tickformat,tickvals:ge,ticktext:pe,ordinal:a.isOrdinal(K),multiselect:K.multiselect,xIndex:te,crossfilterDimensionIndex:te,visibleIndex:K._index,height:Z,values:Ae,paddedUnitValues:Ae.map(ie),unitTickvals:ge&&ge.map(ie),xScale:B,x:B(te),canvasX:B(te)*V,unitToPaddedPx:ee,domainScale:_(Z,p.verticalPadding,K,ge,pe),ordinalScale:T(K),parent:N,model:J,brush:c.makeBrush(H,fe,ye,function(){H.linePickActive(!1)},function(){var Me=N;Me.focusLayer&&Me.focusLayer.render(Me.panels,!0);var De=A(Me);!H.contextShown()&&De?(Me.contextLayer&&Me.contextLayer.render(Me.panels,!0),H.contextShown(!0)):H.contextShown()&&!De&&(Me.contextLayer&&Me.contextLayer.render(Me.panels,!0,!0),H.contextShown(!1))},function(Me){if(N.focusLayer.render(N.panels,!0),N.pickLayer&&N.pickLayer.render(N.panels,!0),H.linePickActive(!0),Y&&Y.filterChanged){var De=ie.invert,Ie=Me.map(function(Oe){return Oe.map(De).sort(v.sorterAsc)}).sort(function(Oe,Ze){return Oe[0]-Ze[0]});Y.filterChanged(N.key,K._index,Ie)}})}}),N}function S(H){H.classed(p.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function E(H,Y){var J=Y==="top"?1:-1,W=H*Math.PI/180;return{dir:J,dx:Math.sin(W),dy:Math.cos(W),degrees:H}}function z(H,Y,J){for(var W=Y.panels||(Y.panels=[]),Z=H.data(),re=0;re<Z.length-1;re++){var V=W[re]||(W[re]={}),B=Z[re],j=Z[re+1];V.dim0=B,V.dim1=j,V.canvasX=B.canvasX,V.panelSizeX=j.canvasX-B.canvasX,V.panelSizeY=Y.model.canvasHeight,V.y=0,V.canvasY=0,V.plotGlPixelRatio=J}}function D(H,Y){return e.tickText(H._ax,Y,!1).text}function U(H,Y){if(H.ordinal)return"";var J=H.domainScale.domain(),W=J[Y?J.length-1:0];return D(H.model.dimensions[H.visibleIndex],W)}Q.exports=function(H,Y,J,W){var Z=H._context.staticPlot,re=H._fullLayout,V=re._toppaper,B=re._glcontainer,j=H._context.plotGlPixelRatio,ee=H._fullLayout.paper_bgcolor;(function(Me){for(var De=0;De<Me.length;De++)for(var Ie=0;Ie<Me[De].length;Ie++)for(var Oe=Me[De][Ie].trace,Ze=Oe.dimensions,Fe=0;Fe<Ze.length;Fe++){var Pe=Ze[Fe].values,ze=Ze[Fe]._ax;ze&&(ze.range?ze.range=b(ze.range[0],ze.range[1]):ze.range=f(Pe,Oe._length),ze.dtick||(ze.dtick=.01*(Math.abs(ze.range[1]-ze.range[0])||1)),ze.tickformat=Ze[Fe].tickformat,e.calcTicks(ze),ze.cleanRange())}})(Y);var N,$,K=(N=!0,$=!1,{linePickActive:function(Me){return arguments.length?N=!!Me:N},contextShown:function(Me){return arguments.length?$=!!Me:$}}),te=Y.filter(function(Me){return s(Me).trace.visible}).map(I.bind(0,J)).map(P.bind(0,K,W));B.each(function(Me,De){return v.extendFlat(Me,te[De])});var ie=B.selectAll(".gl-canvas").each(function(Me){Me.viewModel=te[0],Me.viewModel.plotGlPixelRatio=j,Me.viewModel.paperColor=ee,Me.model=Me.viewModel?Me.viewModel.model:null}),le=null;ie.filter(function(Me){return Me.pick}).style("pointer-events",Z?"none":"auto").on("mousemove",function(Me){if(K.linePickActive()&&Me.lineLayer&&W&&W.hover){var De=m.event,Ie=this.width,Oe=this.height,Ze=m.mouse(this),Fe=Ze[0],Pe=Ze[1];if(Fe<0||Pe<0||Fe>=Ie||Pe>=Oe)return;var ze=Me.lineLayer.readPixel(Fe,Oe-1-Pe),Ge=ze[3]!==0,$e=Ge?ze[2]+256*(ze[1]+256*ze[0]):null,ot={x:Fe,y:Pe,clientX:De.clientX,clientY:De.clientY,dataIndex:Me.model.key,curveNumber:$e};$e!==le&&(Ge?W.hover(ot):W.unhover&&W.unhover(ot),le=$e)}}),ie.style("opacity",function(Me){return Me.pick?0:1}),V.style("background","rgba(255, 255, 255, 0)");var se=V.selectAll("."+p.cn.parcoords).data(te,o);se.exit().remove(),se.enter().append("g").classed(p.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),se.attr("transform",function(Me){return r(Me.model.translateX,Me.model.translateY)});var ve=se.selectAll("."+p.cn.parcoordsControlView).data(h,o);ve.enter().append("g").classed(p.cn.parcoordsControlView,!0),ve.attr("transform",function(Me){return r(Me.model.pad.l,Me.model.pad.t)});var fe=ve.selectAll("."+p.cn.yAxis).data(function(Me){return Me.dimensions},o);fe.enter().append("g").classed(p.cn.yAxis,!0),ve.each(function(Me){z(fe,Me,j)}),ie.each(function(Me){if(Me.viewModel){!Me.lineLayer||W?Me.lineLayer=i(this,Me):Me.lineLayer.update(Me),(Me.key||Me.key===0)&&(Me.viewModel[Me.key]=Me.lineLayer);var De=!Me.context||W;Me.lineLayer.render(Me.viewModel.panels,De)}}),fe.attr("transform",function(Me){return r(Me.xScale(Me.xIndex),0)}),fe.call(m.behavior.drag().origin(function(Me){return Me}).on("drag",function(Me){var De=Me.parent;K.linePickActive(!1),Me.x=Math.max(-p.overdrag,Math.min(Me.model.width+p.overdrag,m.event.x)),Me.canvasX=Me.x*Me.model.canvasPixelRatio,fe.sort(function(Ie,Oe){return Ie.x-Oe.x}).each(function(Ie,Oe){Ie.xIndex=Oe,Ie.x=Me===Ie?Ie.x:Ie.xScale(Ie.xIndex),Ie.canvasX=Ie.x*Ie.model.canvasPixelRatio}),z(fe,De,j),fe.filter(function(Ie){return Math.abs(Me.xIndex-Ie.xIndex)!==0}).attr("transform",function(Ie){return r(Ie.xScale(Ie.xIndex),0)}),m.select(this).attr("transform",r(Me.x,0)),fe.each(function(Ie,Oe,Ze){Ze===Me.parent.key&&(De.dimensions[Oe]=Ie)}),De.contextLayer&&De.contextLayer.render(De.panels,!1,!A(De)),De.focusLayer.render&&De.focusLayer.render(De.panels)}).on("dragend",function(Me){var De=Me.parent;Me.x=Me.xScale(Me.xIndex),Me.canvasX=Me.x*Me.model.canvasPixelRatio,z(fe,De,j),m.select(this).attr("transform",function(Ie){return r(Ie.x,0)}),De.contextLayer&&De.contextLayer.render(De.panels,!1,!A(De)),De.focusLayer&&De.focusLayer.render(De.panels),De.pickLayer&&De.pickLayer.render(De.panels,!0),K.linePickActive(!0),W&&W.axesMoved&&W.axesMoved(De.key,De.dimensions.map(function(Ie){return Ie.crossfilterDimensionIndex}))})),fe.exit().remove();var ye=fe.selectAll("."+p.cn.axisOverlays).data(h,o);ye.enter().append("g").classed(p.cn.axisOverlays,!0),ye.selectAll("."+p.cn.axis).remove();var Ae=ye.selectAll("."+p.cn.axis).data(h,o);Ae.enter().append("g").classed(p.cn.axis,!0),Ae.each(function(Me){var De=Me.model.height/Me.model.tickDistance,Ie=Me.domainScale,Oe=Ie.domain();m.select(this).call(m.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(De,Me.tickFormat).tickValues(Me.ordinal?Oe:null).tickFormat(function(Ze){return a.isOrdinal(Me)?Ze:D(Me.model.dimensions[Me.visibleIndex],Ze)}).scale(Ie)),n.font(Ae.selectAll("text"),Me.model.tickFont)}),Ae.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),Ae.selectAll("text").style("text-shadow",l.makeTextShadow(ee)).style("cursor","default");var pe=ye.selectAll("."+p.cn.axisHeading).data(h,o);pe.enter().append("g").classed(p.cn.axisHeading,!0);var ge=pe.selectAll("."+p.cn.axisTitle).data(h,o);ge.enter().append("text").classed(p.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",Z?"none":"auto"),ge.text(function(Me){return Me.label}).each(function(Me){var De=m.select(this);n.font(De,Me.model.labelFont),l.convertToTspans(De,H)}).attr("transform",function(Me){var De=E(Me.model.labelAngle,Me.model.labelSide),Ie=p.axisTitleOffset;return(De.dir>0?"":r(0,2*Ie+Me.model.height))+t(De.degrees)+r(-Ie*De.dx,-Ie*De.dy)}).attr("text-anchor",function(Me){var De=E(Me.model.labelAngle,Me.model.labelSide);return 2*Math.abs(De.dx)>Math.abs(De.dy)?De.dir*De.dx<0?"start":"end":"middle"});var we=ye.selectAll("."+p.cn.axisExtent).data(h,o);we.enter().append("g").classed(p.cn.axisExtent,!0);var oe=we.selectAll("."+p.cn.axisExtentTop).data(h,o);oe.enter().append("g").classed(p.cn.axisExtentTop,!0),oe.attr("transform",r(0,-p.axisExtentOffset));var de=oe.selectAll("."+p.cn.axisExtentTopText).data(h,o);de.enter().append("text").classed(p.cn.axisExtentTopText,!0).call(S),de.text(function(Me){return U(Me,!0)}).each(function(Me){n.font(m.select(this),Me.model.rangeFont)});var Te=we.selectAll("."+p.cn.axisExtentBottom).data(h,o);Te.enter().append("g").classed(p.cn.axisExtentBottom,!0),Te.attr("transform",function(Me){return r(0,Me.model.height+p.axisExtentOffset)});var Ee=Te.selectAll("."+p.cn.axisExtentBottomText).data(h,o);Ee.enter().append("text").classed(p.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(S),Ee.text(function(Me){return U(Me,!1)}).each(function(Me){n.font(m.select(this),Me.model.rangeFont)}),c.ensureAxisBrush(ye,ee,H)}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"./axisbrush":898,"./constants":902,"./helpers":904,"./lines":906,"@plotly/d3":58,"color-rgba":91}],909:[function(g,Q,X){var m=g("./parcoords"),v=g("../../lib/prepare_regl"),k=g("./helpers").isVisible,x={};function e(t,r,l){var n=r.indexOf(l),d=t.indexOf(n);return d===-1&&(d+=r.length),d}(Q.exports=function(t,r){var l=t._fullLayout;if(v(t,[],x)){var n={},d={},u={},o={},h=l._size;r.forEach(function(s,a){var p=s[0].trace;u[a]=p.index;var c=o[a]=p._fullInput.index;n[a]=t.data[c].dimensions,d[a]=t.data[c].dimensions.slice()}),m(t,r,{width:h.w,height:h.h,margin:{t:h.t,r:h.r,b:h.b,l:h.l}},{filterChanged:function(s,a,p){var c=d[s][a],i=p.map(function(T){return T.slice()}),y="dimensions["+a+"].constraintrange",f=l._tracePreGUI[t._fullData[u[s]]._fullInput.uid];if(f[y]===void 0){var w=c.constraintrange;f[y]=w||null}var b=t._fullData[u[s]].dimensions[a];i.length?(i.length===1&&(i=i[0]),c.constraintrange=i,b.constraintrange=i.slice(),i=[i]):(delete c.constraintrange,delete b.constraintrange,i=null);var _={};_[y]=i,t.emit("plotly_restyle",[_,[o[s]]])},hover:function(s){t.emit("plotly_hover",s)},unhover:function(s){t.emit("plotly_unhover",s)},axesMoved:function(s,a){var p=function(c,i){return function(y,f){return e(c,i,y)-e(c,i,f)}}(a,d[s].filter(k));n[s].sort(p),d[s].filter(function(c){return!k(c)}).sort(function(c){return d[s].indexOf(c)}).forEach(function(c){n[s].splice(n[s].indexOf(c),1),n[s].splice(d[s].indexOf(c),0,c)}),t.emit("plotly_restyle",[{dimensions:[n[s]]},[o[s]]])}})}}).reglPrecompiled=x},{"../../lib/prepare_regl":528,"./helpers":904,"./parcoords":908}],910:[function(g,Q,X){var m=g("../../plots/attributes"),v=g("../../plots/domain").attributes,k=g("../../plots/font_attributes"),x=g("../../components/color/attributes"),e=g("../../plots/template_attributes").hovertemplateAttrs,t=g("../../plots/template_attributes").texttemplateAttrs,r=g("../../lib/extend").extendFlat,l=k({editType:"plot",arrayOk:!0,colorEditType:"plot"});Q.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:x.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:r({},m.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:e({},{keys:["label","color","value","percent","text"]}),texttemplate:t({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:r({},l,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:r({},l,{}),outsidetextfont:r({},l,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:r({},l,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:v({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:r({},l,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],911:[function(g,Q,X){var m=g("../../plots/plots");X.name="pie",X.plot=function(v,k,x,e){m.plotBasePlot(X.name,v,k,x,e)},X.clean=function(v,k,x,e){m.cleanBasePlot(X.name,v,k,x,e)}},{"../../plots/plots":628}],912:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("tinycolor2"),k=g("../../components/color"),x={};function e(r){return function(l,n){return!!l&&!!(l=v(l)).isValid()&&(l=k.addOpacity(l,l.getAlpha()),r[n]||(r[n]=l),l)}}function t(r,l){var n,d=JSON.stringify(r),u=l[d];if(!u){for(u=r.slice(),n=0;n<r.length;n++)u.push(v(r[n]).lighten(20).toHexString());for(n=0;n<r.length;n++)u.push(v(r[n]).darken(20).toHexString());l[d]=u}return u}Q.exports={calc:function(r,l){var n,d,u=[],o=r._fullLayout,h=o.hiddenlabels||[],s=l.labels,a=l.marker.colors||[],p=l.values,c=l._length,i=l._hasValues&&c;if(l.dlabel)for(s=new Array(c),n=0;n<c;n++)s[n]=String(l.label0+n*l.dlabel);var y={},f=e(o["_"+l.type+"colormap"]),w=0,b=!1;for(n=0;n<c;n++){var _,T,L;if(i){if(_=p[n],!m(_))continue;_=+_}else _=1;(T=s[n])!==void 0&&T!==""||(T=n);var A=y[T=String(T)];A===void 0?(y[T]=u.length,(L=h.indexOf(T)!==-1)||(w+=_),u.push({v:_,label:T,color:f(a[n],T),i:n,pts:[n],hidden:L})):(b=!0,(d=u[A]).v+=_,d.pts.push(n),d.hidden||(w+=_),d.color===!1&&a[n]&&(d.color=f(a[n],T)))}return u=u.filter(function(I){return I.v>=0}),(l.type==="funnelarea"?b:l.sort)&&u.sort(function(I,P){return P.v-I.v}),u[0]&&(u[0].vTotal=w),u},crossTraceCalc:function(r,l){var n=(l||{}).type;n||(n="pie");var d=r._fullLayout,u=r.calcdata,o=d[n+"colorway"],h=d["_"+n+"colormap"];d["extend"+n+"colors"]&&(o=t(o,x));for(var s=0,a=0;a<u.length;a++){var p=u[a];if(p[0].trace.type===n)for(var c=0;c<p.length;c++){var i=p[c];i.color===!1&&(h[i.label]?i.color=h[i.label]:(h[i.label]=i.color=o[s%o.length],s++))}}},makePullColorFn:e,generateExtendedColors:t}},{"../../components/color":367,"fast-isnumeric":190,tinycolor2:313}],913:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../../lib"),k=g("./attributes"),x=g("../../plots/domain").defaults,e=g("../bar/defaults").handleText;function t(r,l){var n=Array.isArray(r),d=v.isArrayOrTypedArray(l),u=Math.min(n?r.length:1/0,d?l.length:1/0);if(isFinite(u)||(u=0),u&&d){for(var o,h=0;h<u;h++){var s=l[h];if(m(s)&&s>0){o=!0;break}}o||(u=0)}return{hasLabels:n,hasValues:d,len:u}}Q.exports={handleLabelsAndValues:t,supplyDefaults:function(r,l,n,d){function u(f,w){return v.coerce(r,l,k,f,w)}var o=t(u("labels"),u("values")),h=o.len;if(l._hasLabels=o.hasLabels,l._hasValues=o.hasValues,!l._hasLabels&&l._hasValues&&(u("label0"),u("dlabel")),h){l._length=h,u("marker.line.width")&&u("marker.line.color"),u("marker.colors"),u("scalegroup");var s,a=u("text"),p=u("texttemplate");if(p||(s=u("textinfo",Array.isArray(a)?"text+percent":"percent")),u("hovertext"),u("hovertemplate"),p||s&&s!=="none"){var c=u("textposition");e(r,l,d,u,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(c)||c==="auto"||c==="outside")&&u("automargin"),(c==="inside"||c==="auto"||Array.isArray(c))&&u("insidetextorientation")}x(l,d,u);var i=u("hole");if(u("title.text")){var y=u("title.position",i?"middle center":"top center");i||y!=="middle center"||(l.title.position="top center"),v.coerceFont(u,"title.font",d.font)}u("sort"),u("direction"),u("rotation"),u("pull")}else l.visible=!1}}},{"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"./attributes":910,"fast-isnumeric":190}],914:[function(g,Q,X){var m=g("../../components/fx/helpers").appendArrayMultiPointValues;Q.exports=function(v,k){var x={curveNumber:k.index,pointNumbers:v.pts,data:k._input,fullData:k,label:v.label,color:v.color,value:v.v,percent:v.percent,text:v.text,bbox:v.bbox,v:v.v};return v.pts.length===1&&(x.pointNumber=x.i=v.pts[0]),m(x,k,v.pts),k.type==="funnelarea"&&(delete x.v,delete x.i),x}},{"../../components/fx/helpers":403}],915:[function(g,Q,X){var m=g("../../lib");function v(k){return k.indexOf("e")!==-1?k.replace(/[.]?0+e/,"e"):k.indexOf(".")!==-1?k.replace(/[.]?0+$/,""):k}X.formatPiePercent=function(k,x){var e=v((100*k).toPrecision(3));return m.numSeparate(e,x)+"%"},X.formatPieValue=function(k,x){var e=v(k.toPrecision(10));return m.numSeparate(e,x)},X.getFirstFilled=function(k,x){if(Array.isArray(k))for(var e=0;e<x.length;e++){var t=k[x[e]];if(t||t===0||t==="")return t}},X.castOption=function(k,x){return Array.isArray(k)?X.getFirstFilled(k,x):k||void 0},X.getRotationAngle=function(k){return(k==="auto"?0:k)*Math.PI/180}},{"../../lib":515}],916:[function(g,Q,X){Q.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults").supplyDefaults,supplyLayoutDefaults:g("./layout_defaults"),layoutAttributes:g("./layout_attributes"),calc:g("./calc").calc,crossTraceCalc:g("./calc").crossTraceCalc,plot:g("./plot").plot,style:g("./style"),styleOne:g("./style_one"),moduleType:"trace",name:"pie",basePlotModule:g("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":910,"./base_plot":911,"./calc":912,"./defaults":913,"./layout_attributes":917,"./layout_defaults":918,"./plot":919,"./style":920,"./style_one":921}],917:[function(g,Q,X){Q.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],918:[function(g,Q,X){var m=g("../../lib"),v=g("./layout_attributes");Q.exports=function(k,x){function e(t,r){return m.coerce(k,x,v,t,r)}e("hiddenlabels"),e("piecolorway",x.colorway),e("extendpiecolors")}},{"../../lib":515,"./layout_attributes":917}],919:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../plots/plots"),k=g("../../components/fx"),x=g("../../components/color"),e=g("../../components/drawing"),t=g("../../lib"),r=t.strScale,l=t.strTranslate,n=g("../../lib/svg_text_utils"),d=g("../bar/uniform_text"),u=d.recordMinTextSize,o=d.clearMinTextSize,h=g("../bar/constants").TEXTPAD,s=g("./helpers"),a=g("./event_data"),p=g("../../lib").isValidTextValue;function c(Y,J,W){var Z=W[0],re=Z.cx,V=Z.cy,B=Z.trace,j=B.type==="funnelarea";"_hasHoverLabel"in B||(B._hasHoverLabel=!1),"_hasHoverEvent"in B||(B._hasHoverEvent=!1),Y.on("mouseover",function(ee){var N=J._fullLayout,$=J._fullData[B.index];if(!J._dragging&&N.hovermode!==!1){var K=$.hoverinfo;if(Array.isArray(K)&&(K=k.castHoverinfo({hoverinfo:[s.castOption(K,ee.pts)],_module:B._module},N,0)),K==="all"&&(K="label+text+value+percent+name"),$.hovertemplate||K!=="none"&&K!=="skip"&&K){var te=ee.rInscribed||0,ie=re+ee.pxmid[0]*(1-te),le=V+ee.pxmid[1]*(1-te),se=N.separators,ve=[];if(K&&K.indexOf("label")!==-1&&ve.push(ee.label),ee.text=s.castOption($.hovertext||$.text,ee.pts),K&&K.indexOf("text")!==-1){var fe=ee.text;t.isValidTextValue(fe)&&ve.push(fe)}ee.value=ee.v,ee.valueLabel=s.formatPieValue(ee.v,se),K&&K.indexOf("value")!==-1&&ve.push(ee.valueLabel),ee.percent=ee.v/Z.vTotal,ee.percentLabel=s.formatPiePercent(ee.percent,se),K&&K.indexOf("percent")!==-1&&ve.push(ee.percentLabel);var ye=$.hoverlabel,Ae=ye.font,pe=[];k.loneHover({trace:B,x0:ie-te*Z.r,x1:ie+te*Z.r,y:le,_x0:j?re+ee.TL[0]:ie-te*Z.r,_x1:j?re+ee.TR[0]:ie+te*Z.r,_y0:j?V+ee.TL[1]:le-te*Z.r,_y1:j?V+ee.BL[1]:le+te*Z.r,text:ve.join("<br>"),name:$.hovertemplate||K.indexOf("name")!==-1?$.name:void 0,idealAlign:ee.pxmid[0]<0?"left":"right",color:s.castOption(ye.bgcolor,ee.pts)||ee.color,borderColor:s.castOption(ye.bordercolor,ee.pts),fontFamily:s.castOption(Ae.family,ee.pts),fontSize:s.castOption(Ae.size,ee.pts),fontColor:s.castOption(Ae.color,ee.pts),nameLength:s.castOption(ye.namelength,ee.pts),textAlign:s.castOption(ye.align,ee.pts),hovertemplate:s.castOption($.hovertemplate,ee.pts),hovertemplateLabels:ee,eventData:[a(ee,$)]},{container:N._hoverlayer.node(),outerContainer:N._paper.node(),gd:J,inOut_bbox:pe}),ee.bbox=pe[0],B._hasHoverLabel=!0}B._hasHoverEvent=!0,J.emit("plotly_hover",{points:[a(ee,$)],event:m.event})}}),Y.on("mouseout",function(ee){var N=J._fullLayout,$=J._fullData[B.index],K=m.select(this).datum();B._hasHoverEvent&&(ee.originalEvent=m.event,J.emit("plotly_unhover",{points:[a(K,$)],event:m.event}),B._hasHoverEvent=!1),B._hasHoverLabel&&(k.loneUnhover(N._hoverlayer.node()),B._hasHoverLabel=!1)}),Y.on("click",function(ee){var N=J._fullLayout,$=J._fullData[B.index];J._dragging||N.hovermode===!1||(J._hoverdata=[a(ee,$)],k.click(J,m.event))})}function i(Y,J,W){var Z=s.castOption(Y.insidetextfont.color,J.pts);!Z&&Y._input.textfont&&(Z=s.castOption(Y._input.textfont.color,J.pts));var re=s.castOption(Y.insidetextfont.family,J.pts)||s.castOption(Y.textfont.family,J.pts)||W.family,V=s.castOption(Y.insidetextfont.size,J.pts)||s.castOption(Y.textfont.size,J.pts)||W.size;return{color:Z||x.contrast(J.color),family:re,size:V}}function y(Y,J){for(var W,Z,re=0;re<Y.length;re++)if((Z=(W=Y[re][0]).trace).title.text){var V=Z.title.text;Z._meta&&(V=t.templateString(V,Z._meta));var B=e.tester.append("text").attr("data-notex",1).text(V).call(e.font,Z.title.font).call(n.convertToTspans,J),j=e.bBox(B.node(),!0);W.titleBox={width:j.width,height:j.height},B.remove()}}function f(Y,J,W){var Z=W.r||J.rpx1,re=J.rInscribed;if(J.startangle===J.stopangle)return{rCenter:1-re,scale:0,rotate:0,textPosAngle:0};var V,B=J.ring,j=B===1&&Math.abs(J.startangle-J.stopangle)===2*Math.PI,ee=J.halfangle,N=J.midangle,$=W.trace.insidetextorientation,K=$==="horizontal",te=$==="tangential",ie=$==="radial",le=$==="auto",se=[];if(!le){var ve,fe=function(oe,de){if(function(De,Ie){var Oe=De.startangle,Ze=De.stopangle;return Oe>Ie&&Ie>Ze||Oe<Ie&&Ie<Ze}(J,oe)){var Te=Math.abs(oe-J.startangle),Ee=Math.abs(oe-J.stopangle),Me=Te<Ee?Te:Ee;(V=de==="tan"?b(Y,Z,B,Me,0):w(Y,Z,B,Me,Math.PI/2)).textPosAngle=oe,se.push(V)}};if(K||te){for(ve=4;ve>=-4;ve-=2)fe(Math.PI*ve,"tan");for(ve=4;ve>=-4;ve-=2)fe(Math.PI*(ve+1),"tan")}if(K||ie){for(ve=4;ve>=-4;ve-=2)fe(Math.PI*(ve+1.5),"rad");for(ve=4;ve>=-4;ve-=2)fe(Math.PI*(ve+.5),"rad")}}if(j||le||K){var ye=Math.sqrt(Y.width*Y.width+Y.height*Y.height);if((V={scale:re*Z*2/ye,rCenter:1-re,rotate:0}).textPosAngle=(J.startangle+J.stopangle)/2,V.scale>=1)return V;se.push(V)}(le||ie)&&((V=w(Y,Z,B,ee,N)).textPosAngle=(J.startangle+J.stopangle)/2,se.push(V)),(le||te)&&((V=b(Y,Z,B,ee,N)).textPosAngle=(J.startangle+J.stopangle)/2,se.push(V));for(var Ae=0,pe=0,ge=0;ge<se.length;ge++){var we=se[ge].scale;if(pe<we&&(pe=we,Ae=ge),!le&&pe>=1)break}return se[Ae]}function w(Y,J,W,Z,re){J=Math.max(0,J-2*h);var V=Y.width/Y.height,B=L(V,Z,J,W);return{scale:2*B/Y.height,rCenter:_(V,B/J),rotate:T(re)}}function b(Y,J,W,Z,re){J=Math.max(0,J-2*h);var V=Y.height/Y.width,B=L(V,Z,J,W);return{scale:2*B/Y.width,rCenter:_(V,B/J),rotate:T(re+Math.PI/2)}}function _(Y,J){return Math.cos(J)-Y*J}function T(Y){return(180/Math.PI*Y+720)%180-90}function L(Y,J,W,Z){var re=Y+1/(2*Math.tan(J));return W*Math.min(1/(Math.sqrt(re*re+.5)+re),Z/(Math.sqrt(Y*Y+Z/2)+Y))}function A(Y,J){return Y.v!==J.vTotal||J.trace.hole?Math.min(1/(1+1/Math.sin(Y.halfangle)),Y.ring/2):1}function I(Y,J){var W=J.pxmid[0],Z=J.pxmid[1],re=Y.width/2,V=Y.height/2;return W<0&&(re*=-1),Z<0&&(V*=-1),{scale:1,rCenter:1,rotate:0,x:re+Math.abs(V)*(re>0?1:-1)/2,y:V/(1+W*W/(Z*Z)),outside:!0}}function P(Y,J){var W,Z,re,V=Y.trace,B={x:Y.cx,y:Y.cy},j={tx:0,ty:0};j.ty+=V.title.font.size,re=E(V),V.title.position.indexOf("top")!==-1?(B.y-=(1+re)*Y.r,j.ty-=Y.titleBox.height):V.title.position.indexOf("bottom")!==-1&&(B.y+=(1+re)*Y.r);var ee,N,$=(ee=Y.r,N=Y.trace.aspectratio,ee/(N===void 0?1:N)),K=J.w*(V.domain.x[1]-V.domain.x[0])/2;return V.title.position.indexOf("left")!==-1?(K+=$,B.x-=(1+re)*$,j.tx+=Y.titleBox.width/2):V.title.position.indexOf("center")!==-1?K*=2:V.title.position.indexOf("right")!==-1&&(K+=$,B.x+=(1+re)*$,j.tx-=Y.titleBox.width/2),W=K/Y.titleBox.width,Z=S(Y,J)/Y.titleBox.height,{x:B.x,y:B.y,scale:Math.min(W,Z),tx:j.tx,ty:j.ty}}function S(Y,J){var W=Y.trace,Z=J.h*(W.domain.y[1]-W.domain.y[0]);return Math.min(Y.titleBox.height,Z/2)}function E(Y){var J,W=Y.pull;if(!W)return 0;if(Array.isArray(W))for(W=0,J=0;J<Y.pull.length;J++)Y.pull[J]>W&&(W=Y.pull[J]);return W}function z(Y,J){for(var W=[],Z=0;Z<Y.length;Z++){var re=Y[Z][0],V=re.trace,B=V.domain,j=J.w*(B.x[1]-B.x[0]),ee=J.h*(B.y[1]-B.y[0]);V.title.text&&V.title.position!=="middle center"&&(ee-=S(re,J));var N=j/2,$=ee/2;V.type!=="funnelarea"||V.scalegroup||($/=V.aspectratio),re.r=Math.min(N,$)/(1+E(V)),re.cx=J.l+J.w*(V.domain.x[1]+V.domain.x[0])/2,re.cy=J.t+J.h*(1-V.domain.y[0])-ee/2,V.title.text&&V.title.position.indexOf("bottom")!==-1&&(re.cy-=S(re,J)),V.scalegroup&&W.indexOf(V.scalegroup)===-1&&W.push(V.scalegroup)}(function(K,te){for(var ie,le,se,ve=0;ve<te.length;ve++){var fe=1/0,ye=te[ve];for(le=0;le<K.length;le++)if(ie=K[le][0],(se=ie.trace).scalegroup===ye){var Ae;if(se.type==="pie")Ae=ie.r*ie.r;else if(se.type==="funnelarea"){var pe,ge;se.aspectratio>1?(pe=ie.r,ge=pe/se.aspectratio):(ge=ie.r,pe=ge*se.aspectratio),pe*=(1+se.baseratio)/2,Ae=pe*ge}fe=Math.min(fe,Ae/ie.vTotal)}for(le=0;le<K.length;le++)if(ie=K[le][0],(se=ie.trace).scalegroup===ye){var we=fe*ie.vTotal;se.type==="funnelarea"&&(we/=(1+se.baseratio)/2,we/=se.aspectratio),ie.r=Math.sqrt(we)}}})(Y,W)}function D(Y,J){return[Y*Math.sin(J),-Y*Math.cos(J)]}function U(Y,J,W){var Z=Y._fullLayout,re=W.trace,V=re.texttemplate,B=re.textinfo;if(!V&&B&&B!=="none"){var j,ee=B.split("+"),N=function(Ae){return ee.indexOf(Ae)!==-1},$=N("label"),K=N("text"),te=N("value"),ie=N("percent"),le=Z.separators;if(j=$?[J.label]:[],K){var se=s.getFirstFilled(re.text,J.pts);p(se)&&j.push(se)}te&&j.push(s.formatPieValue(J.v,le)),ie&&j.push(s.formatPiePercent(J.v/W.vTotal,le)),J.text=j.join("<br>")}if(V){var ve=t.castOption(re,J.i,"texttemplate");if(ve){var fe=function(Ae){return{label:Ae.label,value:Ae.v,valueLabel:s.formatPieValue(Ae.v,Z.separators),percent:Ae.v/W.vTotal,percentLabel:s.formatPiePercent(Ae.v/W.vTotal,Z.separators),color:Ae.color,text:Ae.text,customdata:t.castOption(re,Ae.i,"customdata")}}(J),ye=s.getFirstFilled(re.text,J.pts);(p(ye)||ye==="")&&(fe.text=ye),J.text=t.texttemplateString(ve,fe,Y._fullLayout._d3locale,fe,re._meta||{})}else J.text=""}}function H(Y,J){var W=Y.rotate*Math.PI/180,Z=Math.cos(W),re=Math.sin(W),V=(J.left+J.right)/2,B=(J.top+J.bottom)/2;Y.textX=V*Z-B*re,Y.textY=V*re+B*Z,Y.noCenter=!0}Q.exports={plot:function(Y,J){var W=Y._context.staticPlot,Z=Y._fullLayout,re=Z._size;o("pie",Z),y(J,Y),z(J,re);var V=t.makeTraceGroups(Z._pielayer,J,"trace").each(function(B){var j=m.select(this),ee=B[0],N=ee.trace;(function($){var K,te,ie,le=$[0],se=le.r,ve=le.trace,fe=s.getRotationAngle(ve.rotation),ye=2*Math.PI/le.vTotal,Ae="px0",pe="px1";if(ve.direction==="counterclockwise"){for(K=0;K<$.length&&$[K].hidden;K++);if(K===$.length)return;fe+=ye*$[K].v,ye*=-1,Ae="px1",pe="px0"}for(ie=D(se,fe),K=0;K<$.length;K++)(te=$[K]).hidden||(te[Ae]=ie,te.startangle=fe,fe+=ye*te.v/2,te.pxmid=D(se,fe),te.midangle=fe,fe+=ye*te.v/2,ie=D(se,fe),te.stopangle=fe,te[pe]=ie,te.largeArc=te.v>le.vTotal/2?1:0,te.halfangle=Math.PI*Math.min(te.v/le.vTotal,.5),te.ring=1-ve.hole,te.rInscribed=A(te,le))})(B),j.attr("stroke-linejoin","round"),j.each(function(){var $=m.select(this).selectAll("g.slice").data(B);$.enter().append("g").classed("slice",!0),$.exit().remove();var K=[[[],[]],[[],[]]],te=!1;$.each(function(pe,ge){if(pe.hidden)m.select(this).selectAll("path,g").remove();else{pe.pointNumber=pe.i,pe.curveNumber=N.index,K[pe.pxmid[1]<0?0:1][pe.pxmid[0]<0?0:1].push(pe);var we=ee.cx,oe=ee.cy,de=m.select(this),Te=de.selectAll("path.surface").data([pe]);if(Te.enter().append("path").classed("surface",!0).style({"pointer-events":W?"none":"all"}),de.call(c,Y,B),N.pull){var Ee=+s.castOption(N.pull,pe.pts)||0;Ee>0&&(we+=Ee*pe.pxmid[0],oe+=Ee*pe.pxmid[1])}pe.cxFinal=we,pe.cyFinal=oe;var Me=N.hole;if(pe.v===ee.vTotal){var De="M"+(we+pe.px0[0])+","+(oe+pe.px0[1])+Pe(pe.px0,pe.pxmid,!0,1)+Pe(pe.pxmid,pe.px0,!0,1)+"Z";Me?Te.attr("d","M"+(we+Me*pe.px0[0])+","+(oe+Me*pe.px0[1])+Pe(pe.px0,pe.pxmid,!1,Me)+Pe(pe.pxmid,pe.px0,!1,Me)+"Z"+De):Te.attr("d",De)}else{var Ie=Pe(pe.px0,pe.px1,!0,1);if(Me){var Oe=1-Me;Te.attr("d","M"+(we+Me*pe.px1[0])+","+(oe+Me*pe.px1[1])+Pe(pe.px1,pe.px0,!1,Me)+"l"+Oe*pe.px0[0]+","+Oe*pe.px0[1]+Ie+"Z")}else Te.attr("d","M"+we+","+oe+"l"+pe.px0[0]+","+pe.px0[1]+Ie+"Z")}U(Y,pe,ee);var Ze=s.castOption(N.textposition,pe.pts),Fe=de.selectAll("g.slicetext").data(pe.text&&Ze!=="none"?[0]:[]);Fe.enter().append("g").classed("slicetext",!0),Fe.exit().remove(),Fe.each(function(){var ze=t.ensureSingle(m.select(this),"text","",function(Ke){Ke.attr("data-notex",1)}),Ge=t.ensureUniformFontSize(Y,Ze==="outside"?function(Ke,mt,Ft){var Vt=s.castOption(Ke.outsidetextfont.color,mt.pts)||s.castOption(Ke.textfont.color,mt.pts)||Ft.color,Xt=s.castOption(Ke.outsidetextfont.family,mt.pts)||s.castOption(Ke.textfont.family,mt.pts)||Ft.family,Gt=s.castOption(Ke.outsidetextfont.size,mt.pts)||s.castOption(Ke.textfont.size,mt.pts)||Ft.size;return{color:Vt,family:Xt,size:Gt}}(N,pe,Z.font):i(N,pe,Z.font));ze.text(pe.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(e.font,Ge).call(n.convertToTspans,Y);var $e,ot=e.bBox(ze.node());if(Ze==="outside")$e=I(ot,pe);else if($e=f(ot,pe,ee),Ze==="auto"&&$e.scale<1){var vt=t.ensureUniformFontSize(Y,N.outsidetextfont);ze.call(e.font,vt),$e=I(ot=e.bBox(ze.node()),pe)}var bt=$e.textPosAngle,yt=bt===void 0?pe.pxmid:D(ee.r,bt);if($e.targetX=we+yt[0]*$e.rCenter+($e.x||0),$e.targetY=oe+yt[1]*$e.rCenter+($e.y||0),H($e,ot),$e.outside){var tt=$e.targetY;pe.yLabelMin=tt-ot.height/2,pe.yLabelMid=tt,pe.yLabelMax=tt+ot.height/2,pe.labelExtraX=0,pe.labelExtraY=0,te=!0}$e.fontSize=Ge.size,u(N.type,$e,Z),B[ge].transform=$e,t.setTransormAndDisplay(ze,$e)})}function Pe(ze,Ge,$e,ot){var vt=ot*(Ge[0]-ze[0]),bt=ot*(Ge[1]-ze[1]);return"a"+ot*ee.r+","+ot*ee.r+" 0 "+pe.largeArc+($e?" 1 ":" 0 ")+vt+","+bt}});var ie=m.select(this).selectAll("g.titletext").data(N.title.text?[0]:[]);if(ie.enter().append("g").classed("titletext",!0),ie.exit().remove(),ie.each(function(){var pe,ge=t.ensureSingle(m.select(this),"text","",function(oe){oe.attr("data-notex",1)}),we=N.title.text;N._meta&&(we=t.templateString(we,N._meta)),ge.text(we).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(e.font,N.title.font).call(n.convertToTspans,Y),pe=N.title.position==="middle center"?function(oe){var de=Math.sqrt(oe.titleBox.width*oe.titleBox.width+oe.titleBox.height*oe.titleBox.height);return{x:oe.cx,y:oe.cy,scale:oe.trace.hole*oe.r*2/de,tx:0,ty:-oe.titleBox.height/2+oe.trace.title.font.size}}(ee):P(ee,re),ge.attr("transform",l(pe.x,pe.y)+r(Math.min(1,pe.scale))+l(pe.tx,pe.ty))}),te&&function(pe,ge){var we,oe,de,Te,Ee,Me,De,Ie,Oe,Ze,Fe,Pe,ze;function Ge(bt,yt){return bt.pxmid[1]-yt.pxmid[1]}function $e(bt,yt){return yt.pxmid[1]-bt.pxmid[1]}function ot(bt,yt){yt||(yt={});var tt,Ke,mt,Ft,Vt=yt.labelExtraY+(oe?yt.yLabelMax:yt.yLabelMin),Xt=oe?bt.yLabelMin:bt.yLabelMax,Gt=oe?bt.yLabelMax:bt.yLabelMin,nr=bt.cyFinal+Ee(bt.px0[1],bt.px1[1]),It=Vt-Xt;if(It*De>0&&(bt.labelExtraY=It),Array.isArray(ge.pull))for(Ke=0;Ke<Ze.length;Ke++)(mt=Ze[Ke])===bt||(s.castOption(ge.pull,bt.pts)||0)>=(s.castOption(ge.pull,mt.pts)||0)||((bt.pxmid[1]-mt.pxmid[1])*De>0?(It=mt.cyFinal+Ee(mt.px0[1],mt.px1[1])-Xt-bt.labelExtraY)*De>0&&(bt.labelExtraY+=It):(Gt+bt.labelExtraY-nr)*De>0&&(tt=3*Me*Math.abs(Ke-Ze.indexOf(bt)),(Ft=mt.cxFinal+Te(mt.px0[0],mt.px1[0])+tt-(bt.cxFinal+bt.pxmid[0])-bt.labelExtraX)*Me>0&&(bt.labelExtraX+=Ft)))}for(oe=0;oe<2;oe++)for(de=oe?Ge:$e,Ee=oe?Math.max:Math.min,De=oe?1:-1,we=0;we<2;we++){for(Te=we?Math.max:Math.min,Me=we?1:-1,(Ie=pe[oe][we]).sort(de),Oe=pe[1-oe][we],Ze=Oe.concat(Ie),Pe=[],Fe=0;Fe<Ie.length;Fe++)Ie[Fe].yLabelMid!==void 0&&Pe.push(Ie[Fe]);for(ze=!1,Fe=0;oe&&Fe<Oe.length;Fe++)if(Oe[Fe].yLabelMid!==void 0){ze=Oe[Fe];break}for(Fe=0;Fe<Pe.length;Fe++){var vt=Fe&&Pe[Fe-1];ze&&!Fe&&(vt=ze),ot(Pe[Fe],vt)}}}(K,N),function(pe,ge){pe.each(function(we){var oe=m.select(this);if(we.labelExtraX||we.labelExtraY){var de=oe.select("g.slicetext text");we.transform.targetX+=we.labelExtraX,we.transform.targetY+=we.labelExtraY,t.setTransormAndDisplay(de,we.transform);var Te=we.cxFinal+we.pxmid[0],Ee="M"+Te+","+(we.cyFinal+we.pxmid[1]),Me=(we.yLabelMax-we.yLabelMin)*(we.pxmid[0]<0?-1:1)/4;if(we.labelExtraX){var De=we.labelExtraX*we.pxmid[1]/we.pxmid[0],Ie=we.yLabelMid+we.labelExtraY-(we.cyFinal+we.pxmid[1]);Math.abs(De)>Math.abs(Ie)?Ee+="l"+Ie*we.pxmid[0]/we.pxmid[1]+","+Ie+"H"+(Te+we.labelExtraX+Me):Ee+="l"+we.labelExtraX+","+De+"v"+(Ie-De)+"h"+Me}else Ee+="V"+(we.yLabelMid+we.labelExtraY)+"h"+Me;t.ensureSingle(oe,"path","textline").call(x.stroke,ge.outsidetextfont.color).attr({"stroke-width":Math.min(2,ge.outsidetextfont.size/8),d:Ee,fill:"none"})}else oe.select("path.textline").remove()})}($,N),te&&N.automargin){var le=e.bBox(j.node()),se=N.domain,ve=re.w*(se.x[1]-se.x[0]),fe=re.h*(se.y[1]-se.y[0]),ye=(.5*ve-ee.r)/re.w,Ae=(.5*fe-ee.r)/re.h;v.autoMargin(Y,"pie."+N.uid+".automargin",{xl:se.x[0]-ye,xr:se.x[1]+ye,yb:se.y[0]-Ae,yt:se.y[1]+Ae,l:Math.max(ee.cx-ee.r-le.left,0),r:Math.max(le.right-(ee.cx+ee.r),0),b:Math.max(le.bottom-(ee.cy+ee.r),0),t:Math.max(ee.cy-ee.r-le.top,0),pad:5})}})});setTimeout(function(){V.selectAll("tspan").each(function(){var B=m.select(this);B.attr("dy")&&B.attr("dy",B.attr("dy"))})},0)},formatSliceLabel:U,transformInsideText:f,determineInsideTextFont:i,positionTitleOutside:P,prerenderTitles:y,layoutAreas:z,attachFxHandlers:c,computeTransform:H}},{"../../components/color":367,"../../components/drawing":389,"../../components/fx":407,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../bar/constants":659,"../bar/uniform_text":673,"./event_data":914,"./helpers":915,"@plotly/d3":58}],920:[function(g,Q,X){var m=g("@plotly/d3"),v=g("./style_one"),k=g("../bar/uniform_text").resizeText;Q.exports=function(x){var e=x._fullLayout._pielayer.selectAll(".trace");k(x,e,"pie"),e.each(function(t){var r=t[0].trace,l=m.select(this);l.style({opacity:r.opacity}),l.selectAll("path.surface").each(function(n){m.select(this).call(v,n,r)})})}},{"../bar/uniform_text":673,"./style_one":921,"@plotly/d3":58}],921:[function(g,Q,X){var m=g("../../components/color"),v=g("./helpers").castOption;Q.exports=function(k,x,e){var t=e.marker.line,r=v(t.color,x.pts)||m.defaultLine,l=v(t.width,x.pts)||0;k.style("stroke-width",l).call(m.fill,x.color).call(m.stroke,r)}},{"../../components/color":367,"./helpers":915}],922:[function(g,Q,X){var m=g("../scatter/attributes");Q.exports={x:m.x,y:m.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:m.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":936}],923:[function(g,Q,X){var m=g("../../../stackgl_modules").gl_pointcloud2d,v=g("../../lib/str2rgbarray"),k=g("../../plots/cartesian/autorange").findExtremes,x=g("../scatter/get_trace_color");function e(r,l){this.scene=r,this.uid=l,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=m(r.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var t=e.prototype;t.handlePick=function(r){var l=this.idToIndex[r.pointId];return{trace:this,dataCoord:r.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*l],this.pickXYData[2*l+1]]:[this.pickXData[l],this.pickYData[l]],textLabel:Array.isArray(this.textLabels)?this.textLabels[l]:this.textLabels,color:this.color,name:this.name,pointIndex:l,hoverinfo:this.hoverinfo}},t.update=function(r){this.index=r.index,this.textLabels=r.text,this.name=r.name,this.hoverinfo=r.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(r),this.color=x(r,{})},t.updateFast=function(r){var l,n,d,u,o,h,s=this.xData=this.pickXData=r.x,a=this.yData=this.pickYData=r.y,p=this.pickXYData=r.xy,c=r.xbounds&&r.ybounds,i=r.indices,y=this.bounds;if(p){if(d=p,l=p.length>>>1,c)y[0]=r.xbounds[0],y[2]=r.xbounds[1],y[1]=r.ybounds[0],y[3]=r.ybounds[1];else for(h=0;h<l;h++)u=d[2*h],o=d[2*h+1],u<y[0]&&(y[0]=u),u>y[2]&&(y[2]=u),o<y[1]&&(y[1]=o),o>y[3]&&(y[3]=o);if(i)n=i;else for(n=new Int32Array(l),h=0;h<l;h++)n[h]=h}else for(l=s.length,d=new Float32Array(2*l),n=new Int32Array(l),h=0;h<l;h++)u=s[h],o=a[h],n[h]=h,d[2*h]=u,d[2*h+1]=o,u<y[0]&&(y[0]=u),u>y[2]&&(y[2]=u),o<y[1]&&(y[1]=o),o>y[3]&&(y[3]=o);this.idToIndex=n,this.pointcloudOptions.idToIndex=n,this.pointcloudOptions.positions=d;var f=v(r.marker.color),w=v(r.marker.border.color),b=r.opacity*r.marker.opacity;f[3]*=b,this.pointcloudOptions.color=f;var _=r.marker.blend;_===null&&(_=s.length<100||a.length<100),this.pointcloudOptions.blend=_,w[3]*=b,this.pointcloudOptions.borderColor=w;var T=r.marker.sizemin,L=Math.max(r.marker.sizemax,r.marker.sizemin);this.pointcloudOptions.sizeMin=T,this.pointcloudOptions.sizeMax=L,this.pointcloudOptions.areaRatio=r.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var A=this.scene.xaxis,I=this.scene.yaxis,P=L/2||.5;r._extremes[A._id]=k(A,[y[0],y[2]],{ppad:P}),r._extremes[I._id]=k(I,[y[1],y[3]],{ppad:P})},t.dispose=function(){this.pointcloud.dispose()},Q.exports=function(r,l){var n=new e(r,l.uid);return n.update(l),n}},{"../../../stackgl_modules":1133,"../../lib/str2rgbarray":540,"../../plots/cartesian/autorange":565,"../scatter/get_trace_color":946}],924:[function(g,Q,X){var m=g("../../lib"),v=g("./attributes");Q.exports=function(k,x,e){function t(r,l){return m.coerce(k,x,v,r,l)}t("x"),t("y"),t("xbounds"),t("ybounds"),k.xy&&k.xy instanceof Float32Array&&(x.xy=k.xy),k.indices&&k.indices instanceof Int32Array&&(x.indices=k.indices),t("text"),t("marker.color",e),t("marker.opacity"),t("marker.blend"),t("marker.sizemin"),t("marker.sizemax"),t("marker.border.color",e),t("marker.border.arearatio"),x._length=null}},{"../../lib":515,"./attributes":922}],925:[function(g,Q,X){Q.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),calc:g("../scatter3d/calc"),plot:g("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:g("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":605,"../scatter3d/calc":965,"./attributes":922,"./convert":923,"./defaults":924}],926:[function(g,Q,X){var m=g("../../plots/font_attributes"),v=g("../../plots/attributes"),k=g("../../components/color/attributes"),x=g("../../components/fx/attributes"),e=g("../../plots/domain").attributes,t=g("../../plots/template_attributes").hovertemplateAttrs,r=g("../../components/colorscale/attributes"),l=g("../../plot_api/plot_template").templatedArray,n=g("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,d=g("../../lib/extend").extendFlat,u=g("../../plot_api/edit_types").overrideAll;(Q.exports=u({hoverinfo:d({},v.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:x.hoverlabel,domain:e({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:n("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:m({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:k.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:x.hoverlabel,hovertemplate:t({},{keys:["value","label"]})},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:k.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:x.hoverlabel,hovertemplate:t({},{keys:["value","label"]}),colorscales:l("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:d(r().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":366,"../../components/colorscale/attributes":374,"../../components/fx/attributes":398,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],927:[function(g,Q,X){var m=g("../../plot_api/edit_types").overrideAll,v=g("../../plots/get_data").getModuleCalcData,k=g("./plot"),x=g("../../components/fx/layout_attributes"),e=g("../../lib/setcursor"),t=g("../../components/dragelement"),r=g("../../components/selections").prepSelect,l=g("../../lib"),n=g("../../registry");function d(u,o){var h=u._fullData[o],s=u._fullLayout,a=s.dragmode,p=s.dragmode==="pan"?"move":"crosshair",c=h._bgRect;if(c&&a!=="pan"&&a!=="zoom"){e(c,p);var i={_id:"x",c2p:l.identity,_offset:h._sankey.translateX,_length:h._sankey.width},y={_id:"y",c2p:l.identity,_offset:h._sankey.translateY,_length:h._sankey.height},f={gd:u,element:c.node(),plotinfo:{id:o,xaxis:i,yaxis:y,fillRangeItems:l.noop},subplot:o,xaxes:[i],yaxes:[y],doneFnCompleted:function(w){var b,_=u._fullData[o],T=_.node.groups.slice(),L=[];function A(E){for(var z=_._sankey.graph.nodes,D=0;D<z.length;D++)if(z[D].pointNumber===E)return z[D]}for(var I=0;I<w.length;I++){var P=A(w[I].pointNumber);if(P)if(P.group){for(var S=0;S<P.childrenNodes.length;S++)L.push(P.childrenNodes[S].pointNumber);T[P.pointNumber-_.node._count]=!1}else L.push(P.pointNumber)}b=T.filter(Boolean).concat([L]),n.call("_guiRestyle",u,{"node.groups":[b]},o)},prepFn:function(w,b,_){r(w,b,_,f,a)}};t.init(f)}}X.name="sankey",X.baseLayoutAttrOverrides=m({hoverlabel:x.hoverlabel},"plot","nested"),X.plot=function(u){var o=v(u.calcdata,"sankey")[0];k(u,o),X.updateFx(u)},X.clean=function(u,o,h,s){var a=s._has&&s._has("sankey"),p=o._has&&o._has("sankey");a&&!p&&(s._paperdiv.selectAll(".sankey").remove(),s._paperdiv.selectAll(".bgsankey").remove())},X.updateFx=function(u){for(var o=0;o<u._fullData.length;o++)d(u,o)}},{"../../components/dragelement":386,"../../components/fx/layout_attributes":408,"../../components/selections":455,"../../lib":515,"../../lib/setcursor":536,"../../plot_api/edit_types":548,"../../plots/get_data":602,"../../registry":647,"./plot":932}],928:[function(g,Q,X){var m=g("strongly-connected-components"),v=g("../../lib"),k=g("../../lib/gup").wrap,x=v.isArrayOrTypedArray,e=v.isIndex,t=g("../../components/colorscale");function r(l){var n,d=l.node,u=l.link,o=[],h=x(u.color),s=x(u.customdata),a={},p={},c=u.colorscales.length;for(n=0;n<c;n++){var i=u.colorscales[n],y=t.extractScale(i,{cLetter:"c"}),f=t.makeColorScaleFunc(y);p[i.label]=f}var w=0;for(n=0;n<u.value.length;n++)u.source[n]>w&&(w=u.source[n]),u.target[n]>w&&(w=u.target[n]);var b,_=w+1;l.node._count=_;var T=l.node.groups,L={};for(n=0;n<T.length;n++){var A=T[n];for(b=0;b<A.length;b++){var I=A[b],P=_+n;L.hasOwnProperty(I)?v.warn("Node "+I+" is already part of a group."):L[I]=P}}var S={source:[],target:[]};for(n=0;n<u.value.length;n++){var E=u.value[n],z=u.source[n],D=u.target[n];if(E>0&&e(z,_)&&e(D,_)&&(!L.hasOwnProperty(z)||!L.hasOwnProperty(D)||L[z]!==L[D])){L.hasOwnProperty(D)&&(D=L[D]),L.hasOwnProperty(z)&&(z=L[z]),D=+D,a[z=+z]=a[D]=!0;var U="";u.label&&u.label[n]&&(U=u.label[n]);var H=null;U&&p.hasOwnProperty(U)&&(H=p[U]),o.push({pointNumber:n,label:U,color:h?u.color[n]:u.color,customdata:s?u.customdata[n]:u.customdata,concentrationscale:H,source:z,target:D,value:+E}),S.source.push(z),S.target.push(D)}}var Y=_+T.length,J=x(d.color),W=x(d.customdata),Z=[];for(n=0;n<Y;n++)if(a[n]){var re=d.label[n];Z.push({group:n>_-1,childrenNodes:[],pointNumber:n,label:re,color:J?d.color[n]:d.color,customdata:W?d.customdata[n]:d.customdata})}var V=!1;return function(B,j,ee){for(var N=v.init2dArray(B,0),$=0;$<Math.min(j.length,ee.length);$++)if(v.isIndex(j[$],B)&&v.isIndex(ee[$],B)){if(j[$]===ee[$])return!0;N[j[$]].push(ee[$])}return m(N).components.some(function(K){return K.length>1})}(Y,S.source,S.target)&&(V=!0),{circular:V,links:o,nodes:Z,groups:T,groupLookup:L}}Q.exports=function(l,n){var d=r(n);return k({circular:d.circular,_nodes:d.nodes,_links:d.links,_groups:d.groups,_groupLookup:d.groupLookup})}},{"../../components/colorscale":379,"../../lib":515,"../../lib/gup":512,"strongly-connected-components":307}],929:[function(g,Q,X){Q.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],930:[function(g,Q,X){var m=g("../../lib"),v=g("./attributes"),k=g("../../components/color"),x=g("tinycolor2"),e=g("../../plots/domain").defaults,t=g("../../components/fx/hoverlabel_defaults"),r=g("../../plot_api/plot_template"),l=g("../../plots/array_container_defaults");function n(d,u){function o(h,s){return m.coerce(d,u,v.link.colorscales,h,s)}o("label"),o("cmin"),o("cmax"),o("colorscale")}Q.exports=function(d,u,o,h){function s(L,A){return m.coerce(d,u,v,L,A)}var a=m.extendDeep(h.hoverlabel,d.hoverlabel),p=d.node,c=r.newContainer(u,"node");function i(L,A){return m.coerce(p,c,v.node,L,A)}i("label"),i("groups"),i("x"),i("y"),i("pad"),i("thickness"),i("line.color"),i("line.width"),i("hoverinfo",d.hoverinfo),t(p,c,i,a),i("hovertemplate");var y=h.colorway;i("color",c.label.map(function(L,A){return k.addOpacity(function(I){return y[I%y.length]}(A),.8)})),i("customdata");var f=d.link||{},w=r.newContainer(u,"link");function b(L,A){return m.coerce(f,w,v.link,L,A)}b("label"),b("arrowlen"),b("source"),b("target"),b("value"),b("line.color"),b("line.width"),b("hoverinfo",d.hoverinfo),t(f,w,b,a),b("hovertemplate");var _,T=x(h.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";b("color",m.repeat(T,w.value.length)),b("customdata"),l(f,w,{name:"colorscales",handleItemDefaults:n}),e(u,h,s),s("orientation"),s("valueformat"),s("valuesuffix"),c.x.length&&c.y.length&&(_="freeform"),s("arrangement",_),m.coerceFont(s,"textfont",m.extendFlat({},h.font)),u._length=null}},{"../../components/color":367,"../../components/fx/hoverlabel_defaults":405,"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../../plots/domain":593,"./attributes":926,tinycolor2:313}],931:[function(g,Q,X){Q.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),calc:g("./calc"),plot:g("./plot"),moduleType:"trace",name:"sankey",basePlotModule:g("./base_plot"),selectPoints:g("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":926,"./base_plot":927,"./calc":928,"./defaults":930,"./plot":932,"./select.js":934}],932:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../lib"),k=v.numberFormat,x=g("./render"),e=g("../../components/fx"),t=g("../../components/color"),r=g("./constants").cn,l=v._;function n(f){return f!==""}function d(f,w){return f.filter(function(b){return b.key===w.traceId})}function u(f,w){m.select(f).select("path").style("fill-opacity",w),m.select(f).select("rect").style("fill-opacity",w)}function o(f){m.select(f).select("text.name").style("fill","black")}function h(f){return function(w){return f.node.sourceLinks.indexOf(w.link)!==-1||f.node.targetLinks.indexOf(w.link)!==-1}}function s(f){return function(w){return w.node.sourceLinks.indexOf(f.link)!==-1||w.node.targetLinks.indexOf(f.link)!==-1}}function a(f,w,b){w&&b&&d(b,w).selectAll("."+r.sankeyLink).filter(h(w)).call(c.bind(0,w,b,!1))}function p(f,w,b){w&&b&&d(b,w).selectAll("."+r.sankeyLink).filter(h(w)).call(i.bind(0,w,b,!1))}function c(f,w,b,_){var T=_.datum().link.label;_.style("fill-opacity",function(L){if(!L.link.concentrationscale)return .4}),T&&d(w,f).selectAll("."+r.sankeyLink).filter(function(L){return L.link.label===T}).style("fill-opacity",function(L){if(!L.link.concentrationscale)return .4}),b&&d(w,f).selectAll("."+r.sankeyNode).filter(s(f)).call(a)}function i(f,w,b,_){var T=_.datum().link.label;_.style("fill-opacity",function(L){return L.tinyColorAlpha}),T&&d(w,f).selectAll("."+r.sankeyLink).filter(function(L){return L.link.label===T}).style("fill-opacity",function(L){return L.tinyColorAlpha}),b&&d(w,f).selectAll(r.sankeyNode).filter(s(f)).call(p)}function y(f,w){var b=f.hoverlabel||{},_=v.nestedProperty(b,w).get();return!Array.isArray(_)&&_}Q.exports=function(f,w){for(var b=f._fullLayout,_=b._paper,T=b._size,L=0;L<f._fullData.length;L++)if(f._fullData[L].visible&&f._fullData[L].type===r.sankey&&!f._fullData[L]._viewInitial){var A=f._fullData[L].node;f._fullData[L]._viewInitial={node:{groups:A.groups.slice(),x:A.x.slice(),y:A.y.slice()}}}var I=l(f,"source:")+" ",P=l(f,"target:")+" ",S=l(f,"concentration:")+" ",E=l(f,"incoming flow count:")+" ",z=l(f,"outgoing flow count:")+" ";x(f,_,w,{width:T.w,height:T.h,margin:{t:T.t,r:T.r,b:T.b,l:T.l}},{linkEvents:{hover:function(D,U,H){f._fullLayout.hovermode!==!1&&(m.select(D).call(c.bind(0,U,H,!0)),U.link.trace.link.hoverinfo!=="skip"&&(U.link.fullData=U.link.trace,f.emit("plotly_hover",{event:m.event,points:[U.link]})))},follow:function(D,U){if(f._fullLayout.hovermode!==!1){var H=U.link.trace.link;if(H.hoverinfo!=="none"&&H.hoverinfo!=="skip"){for(var Y=[],J=0,W=0;W<U.flow.links.length;W++){var Z=U.flow.links[W];if(f._fullLayout.hovermode!=="closest"||U.link.pointNumber===Z.pointNumber){U.link.pointNumber===Z.pointNumber&&(J=W),Z.fullData=Z.trace,H=U.link.trace.link;var re=B(Z),V={valueLabel:k(U.valueFormat)(Z.value)+U.valueSuffix};Y.push({x:re[0],y:re[1],name:V.valueLabel,text:[Z.label||"",I+Z.source.label,P+Z.target.label,Z.concentrationscale?S+k("%0.2f")(Z.flow.labelConcentration):""].filter(n).join("<br>"),color:y(H,"bgcolor")||t.addOpacity(Z.color,1),borderColor:y(H,"bordercolor"),fontFamily:y(H,"font.family"),fontSize:y(H,"font.size"),fontColor:y(H,"font.color"),nameLength:y(H,"namelength"),textAlign:y(H,"align"),idealAlign:m.event.x<re[0]?"right":"left",hovertemplate:H.hovertemplate,hovertemplateLabels:V,eventData:[Z]})}}e.loneHover(Y,{container:b._hoverlayer.node(),outerContainer:b._paper.node(),gd:f,anchorIndex:J}).each(function(){U.link.concentrationscale||u(this,.65),o(this)})}}function B(j){var ee,N;j.circular?(ee=(j.circularPathData.leftInnerExtent+j.circularPathData.rightInnerExtent)/2,N=j.circularPathData.verticalFullExtent):(ee=(j.source.x1+j.target.x0)/2,N=(j.y0+j.y1)/2);var $=[ee,N];return j.trace.orientation==="v"&&$.reverse(),$[0]+=U.parent.translateX,$[1]+=U.parent.translateY,$}},unhover:function(D,U,H){f._fullLayout.hovermode!==!1&&(m.select(D).call(i.bind(0,U,H,!0)),U.link.trace.link.hoverinfo!=="skip"&&(U.link.fullData=U.link.trace,f.emit("plotly_unhover",{event:m.event,points:[U.link]})),e.loneUnhover(b._hoverlayer.node()))},select:function(D,U){var H=U.link;H.originalEvent=m.event,f._hoverdata=[H],e.click(f,{target:!0})}},nodeEvents:{hover:function(D,U,H){f._fullLayout.hovermode!==!1&&(m.select(D).call(a,U,H),U.node.trace.node.hoverinfo!=="skip"&&(U.node.fullData=U.node.trace,f.emit("plotly_hover",{event:m.event,points:[U.node]})))},follow:function(D,U){if(f._fullLayout.hovermode!==!1){var H=U.node.trace.node;if(H.hoverinfo!=="none"&&H.hoverinfo!=="skip"){var Y=m.select(D).select("."+r.nodeRect),J=f._fullLayout._paperdiv.node().getBoundingClientRect(),W=Y.node().getBoundingClientRect(),Z=W.left-2-J.left,re=W.right+2-J.left,V=W.top+W.height/4-J.top,B={valueLabel:k(U.valueFormat)(U.node.value)+U.valueSuffix};U.node.fullData=U.node.trace,f._fullLayout._calcInverseTransform(f);var j=f._fullLayout._invScaleX,ee=f._fullLayout._invScaleY,N=e.loneHover({x0:j*Z,x1:j*re,y:ee*V,name:k(U.valueFormat)(U.node.value)+U.valueSuffix,text:[U.node.label,E+U.node.targetLinks.length,z+U.node.sourceLinks.length].filter(n).join("<br>"),color:y(H,"bgcolor")||U.tinyColorHue,borderColor:y(H,"bordercolor"),fontFamily:y(H,"font.family"),fontSize:y(H,"font.size"),fontColor:y(H,"font.color"),nameLength:y(H,"namelength"),textAlign:y(H,"align"),idealAlign:"left",hovertemplate:H.hovertemplate,hovertemplateLabels:B,eventData:[U.node]},{container:b._hoverlayer.node(),outerContainer:b._paper.node(),gd:f});u(N,.85),o(N)}}},unhover:function(D,U,H){f._fullLayout.hovermode!==!1&&(m.select(D).call(p,U,H),U.node.trace.node.hoverinfo!=="skip"&&(U.node.fullData=U.node.trace,f.emit("plotly_unhover",{event:m.event,points:[U.node]})),e.loneUnhover(b._hoverlayer.node()))},select:function(D,U,H){var Y=U.node;Y.originalEvent=m.event,f._hoverdata=[Y],m.select(D).call(p,U,H),e.click(f,{target:!0})}}})}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"./constants":929,"./render":933,"@plotly/d3":58}],933:[function(g,Q,X){var m=g("d3-force"),v=g("d3-interpolate").interpolateNumber,k=g("@plotly/d3"),x=g("@plotly/d3-sankey"),e=g("@plotly/d3-sankey-circular"),t=g("./constants"),r=g("tinycolor2"),l=g("../../components/color"),n=g("../../components/drawing"),d=g("../../lib"),u=d.strTranslate,o=d.strRotate,h=g("../../lib/gup"),s=h.keyFun,a=h.repeat,p=h.unwrap,c=g("../../lib/svg_text_utils"),i=g("../../registry"),y=g("../../constants/alignment"),f=y.CAP_SHIFT,w=y.LINE_SPACING;function b(W,Z,re){var V,B=p(Z),j=B.trace,ee=j.domain,N=j.orientation==="h",$=j.node.pad,K=j.node.thickness,te=W.width*(ee.x[1]-ee.x[0]),ie=W.height*(ee.y[1]-ee.y[0]),le=B._nodes,se=B._links,ve=B.circular;(V=ve?e.sankeyCircular().circularLinkGap(0):x.sankey()).iterations(t.sankeyIterations).size(N?[te,ie]:[ie,te]).nodeWidth(K).nodePadding($).nodeId(function(Me){return Me.pointNumber}).nodes(le).links(se);var fe,ye,Ae,pe=V();for(var ge in V.nodePadding()<$&&d.warn("node.pad was reduced to ",V.nodePadding()," to fit within the figure."),B._groupLookup){var we,oe=parseInt(B._groupLookup[ge]);for(fe=0;fe<pe.nodes.length;fe++)if(pe.nodes[fe].pointNumber===oe){we=pe.nodes[fe];break}if(we){var de={pointNumber:parseInt(ge),x0:we.x0,x1:we.x1,y0:we.y0,y1:we.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};pe.nodes.unshift(de),we.childrenNodes.unshift(de)}}if(function(){for(fe=0;fe<pe.nodes.length;fe++){var Me,De,Ie=pe.nodes[fe],Oe={};for(ye=0;ye<Ie.targetLinks.length;ye++)Me=(De=Ie.targetLinks[ye]).source.pointNumber+":"+De.target.pointNumber,Oe.hasOwnProperty(Me)||(Oe[Me]=[]),Oe[Me].push(De);var Ze=Object.keys(Oe);for(ye=0;ye<Ze.length;ye++){var Fe=Oe[Me=Ze[ye]],Pe=0,ze={};for(Ae=0;Ae<Fe.length;Ae++)ze[(De=Fe[Ae]).label]||(ze[De.label]=0),ze[De.label]+=De.value,Pe+=De.value;for(Ae=0;Ae<Fe.length;Ae++)(De=Fe[Ae]).flow={value:Pe,labelConcentration:ze[De.label]/Pe,concentration:De.value/Pe,links:Fe},De.concentrationscale&&(De.color=r(De.concentrationscale(De.flow.labelConcentration)))}var Ge=0;for(ye=0;ye<Ie.sourceLinks.length;ye++)Ge+=Ie.sourceLinks[ye].value;for(ye=0;ye<Ie.sourceLinks.length;ye++)(De=Ie.sourceLinks[ye]).concentrationOut=De.value/Ge;var $e=0;for(ye=0;ye<Ie.targetLinks.length;ye++)$e+=Ie.targetLinks[ye].value;for(ye=0;ye<Ie.targetLinks.length;ye++)(De=Ie.targetLinks[ye]).concenrationIn=De.value/$e}}(),j.node.x.length&&j.node.y.length){for(fe=0;fe<Math.min(j.node.x.length,j.node.y.length,pe.nodes.length);fe++)if(j.node.x[fe]&&j.node.y[fe]){var Te=[j.node.x[fe]*te,j.node.y[fe]*ie];pe.nodes[fe].x0=Te[0]-K/2,pe.nodes[fe].x1=Te[0]+K/2;var Ee=pe.nodes[fe].y1-pe.nodes[fe].y0;pe.nodes[fe].y0=Te[1]-Ee/2,pe.nodes[fe].y1=Te[1]+Ee/2}j.arrangement==="snap"&&function(Me){Me.forEach(function(De){var Ie,Oe,Ze,Fe=0,Pe=De.length;for(De.sort(function(ze,Ge){return ze.y0-Ge.y0}),Ze=0;Ze<Pe;++Ze)(Ie=De[Ze]).y0>=Fe||(Oe=Fe-Ie.y0)>1e-6&&(Ie.y0+=Oe,Ie.y1+=Oe),Fe=Ie.y1+$})}(function(Me){var De,Ie,Oe=Me.map(function(Ge,$e){return{x0:Ge.x0,index:$e}}).sort(function(Ge,$e){return Ge.x0-$e.x0}),Ze=[],Fe=-1,Pe=-1/0;for(fe=0;fe<Oe.length;fe++){var ze=Me[Oe[fe].index];ze.x0>Pe+K&&(Fe+=1,De=ze.x0),Pe=ze.x0,Ze[Fe]||(Ze[Fe]=[]),Ze[Fe].push(ze),Ie=De-ze.x0,ze.x0+=Ie,ze.x1+=Ie}return Ze}(le=pe.nodes)),V.update(pe)}return{circular:ve,key:re,trace:j,guid:d.randstr(),horizontal:N,width:te,height:ie,nodePad:j.node.pad,nodeLineColor:j.node.line.color,nodeLineWidth:j.node.line.width,linkLineColor:j.link.line.color,linkLineWidth:j.link.line.width,linkArrowLength:j.link.arrowlen,valueFormat:j.valueformat,valueSuffix:j.valuesuffix,textFont:j.textfont,translateX:ee.x[0]*W.width+W.margin.l,translateY:W.height-ee.y[1]*W.height+W.margin.t,dragParallel:N?ie:te,dragPerpendicular:N?te:ie,arrangement:j.arrangement,sankey:V,graph:pe,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function _(W,Z,re){var V=r(Z.color),B=Z.source.label+"|"+Z.target.label+"__"+re;return Z.trace=W.trace,Z.curveNumber=W.trace.index,{circular:W.circular,key:B,traceId:W.key,pointNumber:Z.pointNumber,link:Z,tinyColorHue:l.tinyRGB(V),tinyColorAlpha:V.getAlpha(),linkPath:T,linkLineColor:W.linkLineColor,linkLineWidth:W.linkLineWidth,linkArrowLength:W.linkArrowLength,valueFormat:W.valueFormat,valueSuffix:W.valueSuffix,sankey:W.sankey,parent:W,interactionState:W.interactionState,flow:Z.flow}}function T(){return function(W){var Z=W.linkArrowLength;if(W.link.circular)return function(ye,Ae){var pe=ye.width/2,ge=ye.circularPathData;return ye.circularLinkType==="top"?"M "+(ge.targetX-Ae)+" "+(ge.targetY+pe)+" L"+(ge.rightInnerExtent-Ae)+" "+(ge.targetY+pe)+"A"+(ge.rightLargeArcRadius+pe)+" "+(ge.rightSmallArcRadius+pe)+" 0 0 1 "+(ge.rightFullExtent-pe-Ae)+" "+(ge.targetY-ge.rightSmallArcRadius)+"L"+(ge.rightFullExtent-pe-Ae)+" "+ge.verticalRightInnerExtent+"A"+(ge.rightLargeArcRadius+pe)+" "+(ge.rightLargeArcRadius+pe)+" 0 0 1 "+(ge.rightInnerExtent-Ae)+" "+(ge.verticalFullExtent-pe)+"L"+ge.leftInnerExtent+" "+(ge.verticalFullExtent-pe)+"A"+(ge.leftLargeArcRadius+pe)+" "+(ge.leftLargeArcRadius+pe)+" 0 0 1 "+(ge.leftFullExtent+pe)+" "+ge.verticalLeftInnerExtent+"L"+(ge.leftFullExtent+pe)+" "+(ge.sourceY-ge.leftSmallArcRadius)+"A"+(ge.leftLargeArcRadius+pe)+" "+(ge.leftSmallArcRadius+pe)+" 0 0 1 "+ge.leftInnerExtent+" "+(ge.sourceY+pe)+"L"+ge.sourceX+" "+(ge.sourceY+pe)+"L"+ge.sourceX+" "+(ge.sourceY-pe)+"L"+ge.leftInnerExtent+" "+(ge.sourceY-pe)+"A"+(ge.leftLargeArcRadius-pe)+" "+(ge.leftSmallArcRadius-pe)+" 0 0 0 "+(ge.leftFullExtent-pe)+" "+(ge.sourceY-ge.leftSmallArcRadius)+"L"+(ge.leftFullExtent-pe)+" "+ge.verticalLeftInnerExtent+"A"+(ge.leftLargeArcRadius-pe)+" "+(ge.leftLargeArcRadius-pe)+" 0 0 0 "+ge.leftInnerExtent+" "+(ge.verticalFullExtent+pe)+"L"+(ge.rightInnerExtent-Ae)+" "+(ge.verticalFullExtent+pe)+"A"+(ge.rightLargeArcRadius-pe)+" "+(ge.rightLargeArcRadius-pe)+" 0 0 0 "+(ge.rightFullExtent+pe-Ae)+" "+ge.verticalRightInnerExtent+"L"+(ge.rightFullExtent+pe-Ae)+" "+(ge.targetY-ge.rightSmallArcRadius)+"A"+(ge.rightLargeArcRadius-pe)+" "+(ge.rightSmallArcRadius-pe)+" 0 0 0 "+(ge.rightInnerExtent-Ae)+" "+(ge.targetY-pe)+"L"+(ge.targetX-Ae)+" "+(ge.targetY-pe)+(Ae>0?"L"+ge.targetX+" "+ge.targetY:"")+"Z":"M "+(ge.targetX-Ae)+" "+(ge.targetY-pe)+" L"+(ge.rightInnerExtent-Ae)+" "+(ge.targetY-pe)+"A"+(ge.rightLargeArcRadius+pe)+" "+(ge.rightSmallArcRadius+pe)+" 0 0 0 "+(ge.rightFullExtent-pe-Ae)+" "+(ge.targetY+ge.rightSmallArcRadius)+"L"+(ge.rightFullExtent-pe-Ae)+" "+ge.verticalRightInnerExtent+"A"+(ge.rightLargeArcRadius+pe)+" "+(ge.rightLargeArcRadius+pe)+" 0 0 0 "+(ge.rightInnerExtent-Ae)+" "+(ge.verticalFullExtent+pe)+"L"+ge.leftInnerExtent+" "+(ge.verticalFullExtent+pe)+"A"+(ge.leftLargeArcRadius+pe)+" "+(ge.leftLargeArcRadius+pe)+" 0 0 0 "+(ge.leftFullExtent+pe)+" "+ge.verticalLeftInnerExtent+"L"+(ge.leftFullExtent+pe)+" "+(ge.sourceY+ge.leftSmallArcRadius)+"A"+(ge.leftLargeArcRadius+pe)+" "+(ge.leftSmallArcRadius+pe)+" 0 0 0 "+ge.leftInnerExtent+" "+(ge.sourceY-pe)+"L"+ge.sourceX+" "+(ge.sourceY-pe)+"L"+ge.sourceX+" "+(ge.sourceY+pe)+"L"+ge.leftInnerExtent+" "+(ge.sourceY+pe)+"A"+(ge.leftLargeArcRadius-pe)+" "+(ge.leftSmallArcRadius-pe)+" 0 0 1 "+(ge.leftFullExtent-pe)+" "+(ge.sourceY+ge.leftSmallArcRadius)+"L"+(ge.leftFullExtent-pe)+" "+ge.verticalLeftInnerExtent+"A"+(ge.leftLargeArcRadius-pe)+" "+(ge.leftLargeArcRadius-pe)+" 0 0 1 "+ge.leftInnerExtent+" "+(ge.verticalFullExtent-pe)+"L"+(ge.rightInnerExtent-Ae)+" "+(ge.verticalFullExtent-pe)+"A"+(ge.rightLargeArcRadius-pe)+" "+(ge.rightLargeArcRadius-pe)+" 0 0 1 "+(ge.rightFullExtent+pe-Ae)+" "+ge.verticalRightInnerExtent+"L"+(ge.rightFullExtent+pe-Ae)+" "+(ge.targetY+ge.rightSmallArcRadius)+"A"+(ge.rightLargeArcRadius-pe)+" "+(ge.rightSmallArcRadius-pe)+" 0 0 1 "+(ge.rightInnerExtent-Ae)+" "+(ge.targetY+pe)+"L"+(ge.targetX-Ae)+" "+(ge.targetY+pe)+(Ae>0?"L"+ge.targetX+" "+ge.targetY:"")+"Z"}(W.link,Z);var re=Math.abs((W.link.target.x0-W.link.source.x1)/2);Z>re&&(Z=re);var V=W.link.source.x1,B=W.link.target.x0-Z,j=v(V,B),ee=j(.5),N=j(.5),$=W.link.y0-W.link.width/2,K=W.link.y0+W.link.width/2,te=W.link.y1-W.link.width/2,ie=W.link.y1+W.link.width/2,le="M"+V+","+$,se="C"+ee+","+$+" "+N+","+te+" "+B+","+te,ve="C"+N+","+ie+" "+ee+","+K+" "+V+","+K,fe=Z>0?"L"+(B+Z)+","+(te+W.link.width/2):"";return le+se+(fe+="L"+B+","+ie)+ve+"Z"}}function L(W,Z){var re=r(Z.color),V=t.nodePadAcross,B=W.nodePad/2;Z.dx=Z.x1-Z.x0,Z.dy=Z.y1-Z.y0;var j=Z.dx,ee=Math.max(.5,Z.dy),N="node_"+Z.pointNumber;return Z.group&&(N=d.randstr()),Z.trace=W.trace,Z.curveNumber=W.trace.index,{index:Z.pointNumber,key:N,partOfGroup:Z.partOfGroup||!1,group:Z.group,traceId:W.key,trace:W.trace,node:Z,nodePad:W.nodePad,nodeLineColor:W.nodeLineColor,nodeLineWidth:W.nodeLineWidth,textFont:W.textFont,size:W.horizontal?W.height:W.width,visibleWidth:Math.ceil(j),visibleHeight:ee,zoneX:-V,zoneY:-B,zoneWidth:j+2*V,zoneHeight:ee+2*B,labelY:W.horizontal?Z.dy/2+1:Z.dx/2+1,left:Z.originalLayer===1,sizeAcross:W.width,forceLayouts:W.forceLayouts,horizontal:W.horizontal,darkBackground:re.getBrightness()<=128,tinyColorHue:l.tinyRGB(re),tinyColorAlpha:re.getAlpha(),valueFormat:W.valueFormat,valueSuffix:W.valueSuffix,sankey:W.sankey,graph:W.graph,arrangement:W.arrangement,uniqueNodeLabelPathId:[W.guid,W.key,N].join("_"),interactionState:W.interactionState,figure:W}}function A(W){W.attr("transform",function(Z){return u(Z.node.x0.toFixed(3),Z.node.y0.toFixed(3))})}function I(W){W.call(A)}function P(W,Z){W.call(I),Z.attr("d",T())}function S(W){W.attr("width",function(Z){return Z.node.x1-Z.node.x0}).attr("height",function(Z){return Z.visibleHeight})}function E(W){return W.link.width>1||W.linkLineWidth>0}function z(W){return u(W.translateX,W.translateY)+(W.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function D(W,Z,re){W.on(".basic",null).on("mouseover.basic",function(V){V.interactionState.dragInProgress||V.partOfGroup||(re.hover(this,V,Z),V.interactionState.hovered=[this,V])}).on("mousemove.basic",function(V){V.interactionState.dragInProgress||V.partOfGroup||(re.follow(this,V),V.interactionState.hovered=[this,V])}).on("mouseout.basic",function(V){V.interactionState.dragInProgress||V.partOfGroup||(re.unhover(this,V,Z),V.interactionState.hovered=!1)}).on("click.basic",function(V){V.interactionState.hovered&&(re.unhover(this,V,Z),V.interactionState.hovered=!1),V.interactionState.dragInProgress||V.partOfGroup||re.select(this,V,Z)})}function U(W,Z,re,V){var B=k.behavior.drag().origin(function(j){return{x:j.node.x0+j.visibleWidth/2,y:j.node.y0+j.visibleHeight/2}}).on("dragstart",function(j){if(j.arrangement!=="fixed"&&(d.ensureSingle(V._fullLayout._infolayer,"g","dragcover",function(N){V._fullLayout._dragCover=N}),d.raiseToTop(this),j.interactionState.dragInProgress=j.node,Y(j.node),j.interactionState.hovered&&(re.nodeEvents.unhover.apply(0,j.interactionState.hovered),j.interactionState.hovered=!1),j.arrangement==="snap")){var ee=j.traceId+"|"+j.key;j.forceLayouts[ee]?j.forceLayouts[ee].alpha(1):function(N,$,K,te){(function(le){for(var se=0;se<le.length;se++)le[se].y=(le[se].y0+le[se].y1)/2,le[se].x=(le[se].x0+le[se].x1)/2})(K.graph.nodes);var ie=K.graph.nodes.filter(function(le){return le.originalX===K.node.originalX}).filter(function(le){return!le.partOfGroup});K.forceLayouts[$]=m.forceSimulation(ie).alphaDecay(0).force("collide",m.forceCollide().radius(function(le){return le.dy/2+K.nodePad/2}).strength(1).iterations(t.forceIterations)).force("constrain",function(le,se,ve,fe){return function(){for(var ye=0,Ae=0;Ae<ve.length;Ae++){var pe=ve[Ae];pe===fe.interactionState.dragInProgress?(pe.x=pe.lastDraggedX,pe.y=pe.lastDraggedY):(pe.vx=(pe.originalX-pe.x)/t.forceTicksPerFrame,pe.y=Math.min(fe.size-pe.dy/2,Math.max(pe.dy/2,pe.y))),ye=Math.max(ye,Math.abs(pe.vx),Math.abs(pe.vy))}!fe.interactionState.dragInProgress&&ye<.1&&fe.forceLayouts[se].alpha()>0&&fe.forceLayouts[se].alpha(0)}}(0,$,ie,K)).stop()}(0,ee,j),function(N,$,K,te,ie){window.requestAnimationFrame(function le(){var se;for(se=0;se<t.forceTicksPerFrame;se++)K.forceLayouts[te].tick();if(function(fe){for(var ye=0;ye<fe.length;ye++)fe[ye].y0=fe[ye].y-fe[ye].dy/2,fe[ye].y1=fe[ye].y0+fe[ye].dy,fe[ye].x0=fe[ye].x-fe[ye].dx/2,fe[ye].x1=fe[ye].x0+fe[ye].dx}(K.graph.nodes),K.sankey.update(K.graph),P(N.filter(J(K)),$),K.forceLayouts[te].alpha()>0)window.requestAnimationFrame(le);else{var ve=K.node.originalX;K.node.x0=ve-K.visibleWidth/2,K.node.x1=ve+K.visibleWidth/2,H(K,ie)}})}(W,Z,j,ee,V)}}).on("drag",function(j){if(j.arrangement!=="fixed"){var ee=k.event.x,N=k.event.y;j.arrangement==="snap"?(j.node.x0=ee-j.visibleWidth/2,j.node.x1=ee+j.visibleWidth/2,j.node.y0=N-j.visibleHeight/2,j.node.y1=N+j.visibleHeight/2):(j.arrangement==="freeform"&&(j.node.x0=ee-j.visibleWidth/2,j.node.x1=ee+j.visibleWidth/2),N=Math.max(0,Math.min(j.size-j.visibleHeight/2,N)),j.node.y0=N-j.visibleHeight/2,j.node.y1=N+j.visibleHeight/2),Y(j.node),j.arrangement!=="snap"&&(j.sankey.update(j.graph),P(W.filter(J(j)),Z))}}).on("dragend",function(j){if(j.arrangement!=="fixed"){j.interactionState.dragInProgress=!1;for(var ee=0;ee<j.node.childrenNodes.length;ee++)j.node.childrenNodes[ee].x=j.node.x,j.node.childrenNodes[ee].y=j.node.y;j.arrangement!=="snap"&&H(j,V)}});W.on(".drag",null).call(B)}function H(W,Z){for(var re=[],V=[],B=0;B<W.graph.nodes.length;B++){var j=(W.graph.nodes[B].x0+W.graph.nodes[B].x1)/2,ee=(W.graph.nodes[B].y0+W.graph.nodes[B].y1)/2;re.push(j/W.figure.width),V.push(ee/W.figure.height)}i.call("_guiRestyle",Z,{"node.x":[re],"node.y":[V]},W.trace.index).then(function(){Z._fullLayout._dragCover&&Z._fullLayout._dragCover.remove()})}function Y(W){W.lastDraggedX=W.x0+W.dx/2,W.lastDraggedY=W.y0+W.dy/2}function J(W){return function(Z){return Z.node.originalX===W.node.originalX}}Q.exports=function(W,Z,re,V,B){var j=W._context.staticPlot,ee=!1;d.ensureSingle(W._fullLayout._infolayer,"g","first-render",function(){ee=!0});var N=W._fullLayout._dragCover,$=re.filter(function(ye){return p(ye).trace.visible}).map(b.bind(null,V)),K=Z.selectAll("."+t.cn.sankey).data($,s);K.exit().remove(),K.enter().append("g").classed(t.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",j?"none":"auto").attr("transform",z),K.each(function(ye,Ae){W._fullData[Ae]._sankey=ye;var pe="bgsankey-"+ye.trace.uid+"-"+Ae;d.ensureSingle(W._fullLayout._draggers,"rect",pe),W._fullData[Ae]._bgRect=k.select("."+pe),W._fullData[Ae]._bgRect.style("pointer-events",j?"none":"all").attr("width",ye.width).attr("height",ye.height).attr("x",ye.translateX).attr("y",ye.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),K.transition().ease(t.ease).duration(t.duration).attr("transform",z);var te=K.selectAll("."+t.cn.sankeyLinks).data(a,s);te.enter().append("g").classed(t.cn.sankeyLinks,!0).style("fill","none");var ie=te.selectAll("."+t.cn.sankeyLink).data(function(ye){return ye.graph.links.filter(function(Ae){return Ae.value}).map(_.bind(null,ye))},s);ie.enter().append("path").classed(t.cn.sankeyLink,!0).call(D,K,B.linkEvents),ie.style("stroke",function(ye){return E(ye)?l.tinyRGB(r(ye.linkLineColor)):ye.tinyColorHue}).style("stroke-opacity",function(ye){return E(ye)?l.opacity(ye.linkLineColor):ye.tinyColorAlpha}).style("fill",function(ye){return ye.tinyColorHue}).style("fill-opacity",function(ye){return ye.tinyColorAlpha}).style("stroke-width",function(ye){return E(ye)?ye.linkLineWidth:1}).attr("d",T()),ie.style("opacity",function(){return W._context.staticPlot||ee||N?1:0}).transition().ease(t.ease).duration(t.duration).style("opacity",1),ie.exit().transition().ease(t.ease).duration(t.duration).style("opacity",0).remove();var le=K.selectAll("."+t.cn.sankeyNodeSet).data(a,s);le.enter().append("g").classed(t.cn.sankeyNodeSet,!0),le.style("cursor",function(ye){switch(ye.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var se=le.selectAll("."+t.cn.sankeyNode).data(function(ye){var Ae=ye.graph.nodes;return function(pe){var ge,we=[];for(ge=0;ge<pe.length;ge++)pe[ge].originalX=(pe[ge].x0+pe[ge].x1)/2,pe[ge].originalY=(pe[ge].y0+pe[ge].y1)/2,we.indexOf(pe[ge].originalX)===-1&&we.push(pe[ge].originalX);for(we.sort(function(oe,de){return oe-de}),ge=0;ge<pe.length;ge++)pe[ge].originalLayerIndex=we.indexOf(pe[ge].originalX),pe[ge].originalLayer=pe[ge].originalLayerIndex/(we.length-1)}(Ae),Ae.map(L.bind(null,ye))},s);se.enter().append("g").classed(t.cn.sankeyNode,!0).call(A).style("opacity",function(ye){return!W._context.staticPlot&&!ee||ye.partOfGroup?0:1}),se.call(D,K,B.nodeEvents).call(U,ie,B,W),se.transition().ease(t.ease).duration(t.duration).call(A).style("opacity",function(ye){return ye.partOfGroup?0:1}),se.exit().transition().ease(t.ease).duration(t.duration).style("opacity",0).remove();var ve=se.selectAll("."+t.cn.nodeRect).data(a);ve.enter().append("rect").classed(t.cn.nodeRect,!0).call(S),ve.style("stroke-width",function(ye){return ye.nodeLineWidth}).style("stroke",function(ye){return l.tinyRGB(r(ye.nodeLineColor))}).style("stroke-opacity",function(ye){return l.opacity(ye.nodeLineColor)}).style("fill",function(ye){return ye.tinyColorHue}).style("fill-opacity",function(ye){return ye.tinyColorAlpha}),ve.transition().ease(t.ease).duration(t.duration).call(S);var fe=se.selectAll("."+t.cn.nodeLabel).data(a);fe.enter().append("text").classed(t.cn.nodeLabel,!0).style("cursor","default"),fe.attr("data-notex",1).text(function(ye){return ye.node.label}).each(function(ye){var Ae=k.select(this);n.font(Ae,ye.textFont),c.convertToTspans(Ae,W)}).style("text-shadow",c.makeTextShadow(W._fullLayout.paper_bgcolor)).attr("text-anchor",function(ye){return ye.horizontal&&ye.left?"end":"start"}).attr("transform",function(ye){var Ae=k.select(this),pe=c.lineCount(Ae),ge=ye.textFont.size*((pe-1)*w-f),we=ye.nodeLineWidth/2+3,oe=((ye.horizontal?ye.visibleHeight:ye.visibleWidth)-ge)/2;ye.horizontal&&(ye.left?we=-we:we+=ye.visibleWidth);var de=ye.horizontal?"":"scale(-1,1)"+o(90);return u(ye.horizontal?we:oe,ye.horizontal?oe:we)+de}),fe.transition().ease(t.ease).duration(t.duration)}},{"../../components/color":367,"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"../../registry":647,"./constants":929,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:313}],934:[function(g,Q,X){Q.exports=function(m,v){for(var k=[],x=m.cd[0].trace,e=x._sankey.graph.nodes,t=0;t<e.length;t++){var r=e[t];if(!r.partOfGroup){var l=[(r.x0+r.x1)/2,(r.y0+r.y1)/2];x.orientation==="v"&&l.reverse(),v&&v.contains(l,!1,t,m)&&k.push({pointNumber:r.pointNumber})}}return k}},{}],935:[function(g,Q,X){var m=g("../../lib");Q.exports=function(v,k){for(var x=0;x<v.length;x++)v[x].i=x;m.mergeArray(k.text,v,"tx"),m.mergeArray(k.texttemplate,v,"txt"),m.mergeArray(k.hovertext,v,"htx"),m.mergeArray(k.customdata,v,"data"),m.mergeArray(k.textposition,v,"tp"),k.textfont&&(m.mergeArrayCastPositive(k.textfont.size,v,"ts"),m.mergeArray(k.textfont.color,v,"tc"),m.mergeArray(k.textfont.family,v,"tf"));var e=k.marker;if(e){m.mergeArrayCastPositive(e.size,v,"ms"),m.mergeArrayCastPositive(e.opacity,v,"mo"),m.mergeArray(e.symbol,v,"mx"),m.mergeArray(e.angle,v,"ma"),m.mergeArray(e.standoff,v,"mf"),m.mergeArray(e.color,v,"mc");var t=e.line;e.line&&(m.mergeArray(t.color,v,"mlc"),m.mergeArrayCastPositive(t.width,v,"mlw"));var r=e.gradient;r&&r.type!=="none"&&(m.mergeArray(r.type,v,"mgt"),m.mergeArray(r.color,v,"mgc"))}}},{"../../lib":515}],936:[function(g,Q,X){var m=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,v=g("../../plots/template_attributes").texttemplateAttrs,k=g("../../plots/template_attributes").hovertemplateAttrs,x=g("../../components/colorscale/attributes"),e=g("../../plots/font_attributes"),t=g("../../components/drawing/attributes").dash,r=g("../../components/drawing/attributes").pattern,l=g("../../components/drawing"),n=g("./constants"),d=g("../../lib/extend").extendFlat;Q.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:m("x"),yhoverformat:m("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:v({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:k({},{keys:n.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:d({},t,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:r,marker:d({symbol:{valType:"enumerated",values:l.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:d({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},x("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},x("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:e({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":374,"../../components/drawing":389,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"./constants":940}],937:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../../lib"),k=g("../../plots/cartesian/axes"),x=g("../../plots/cartesian/align_period"),e=g("../../constants/numerical").BADNUM,t=g("./subtypes"),r=g("./colorscale_calc"),l=g("./arrays_to_calcdata"),n=g("./calc_selection");function d(a,p,c,i,y,f,w){var b=p._length,_=a._fullLayout,T=c._id,L=i._id,A=_._firstScatter[h(p)]===p.uid,I=(s(p,_,c,i)||{}).orientation,P=p.fill;c._minDtick=0,i._minDtick=0;var S={padded:!0},E={padded:!0};w&&(S.ppad=E.ppad=w);var z=b<2||y[0]!==y[b-1]||f[0]!==f[b-1];z&&(P==="tozerox"||P==="tonextx"&&(A||I==="h"))?S.tozero=!0:(p.error_y||{}).visible||P!=="tonexty"&&P!=="tozeroy"&&(t.hasMarkers(p)||t.hasText(p))||(S.padded=!1,S.ppad=0),z&&(P==="tozeroy"||P==="tonexty"&&(A||I==="v"))?E.tozero=!0:P!=="tonextx"&&P!=="tozerox"||(E.padded=!1),T&&(p._extremes[T]=k.findExtremes(c,y,S)),L&&(p._extremes[L]=k.findExtremes(i,f,E))}function u(a,p){if(t.hasMarkers(a)){var c,i=a.marker,y=1.6*(a.marker.sizeref||1);if(c=a.marker.sizemode==="area"?function(T){return Math.max(Math.sqrt((T||0)/y),3)}:function(T){return Math.max((T||0)/y,3)},v.isArrayOrTypedArray(i.size)){var f={type:"linear"};k.setConvert(f);for(var w=f.makeCalcdata(a.marker,"size"),b=new Array(p),_=0;_<p;_++)b[_]=c(w[_]);return b}return c(i.size)}}function o(a,p){var c=h(p),i=a._firstScatter;i[c]||(i[c]=p.uid)}function h(a){var p=a.stackgroup;return a.xaxis+a.yaxis+a.type+(p?"-"+p:"")}function s(a,p,c,i){var y=a.stackgroup;if(y){var f=p._scatterStackOpts[c._id+i._id][y],w=f.orientation==="v"?i:c;return w.type==="linear"||w.type==="log"?f:void 0}}Q.exports={calc:function(a,p){var c,i,y,f,w,b,_=a._fullLayout,T=p._xA=k.getFromId(a,p.xaxis||"x","x"),L=p._yA=k.getFromId(a,p.yaxis||"y","y"),A=T.makeCalcdata(p,"x"),I=L.makeCalcdata(p,"y"),P=x(p,T,"x",A),S=x(p,L,"y",I),E=P.vals,z=S.vals,D=p._length,U=new Array(D),H=p.ids,Y=s(p,_,T,L),J=!1;o(_,p);var W,Z="x",re="y";Y?(v.pushUnique(Y.traceIndices,p._expandedIndex),(c=Y.orientation==="v")?(re="s",W="x"):(Z="s",W="y"),w=Y.stackgaps==="interpolate"):d(a,p,T,L,E,z,u(p,D));var V=!!p.xperiodalignment,B=!!p.yperiodalignment;for(i=0;i<D;i++){var j=U[i]={},ee=m(E[i]),N=m(z[i]);ee&&N?(j[Z]=E[i],j[re]=z[i],V&&(j.orig_x=A[i],j.xEnd=P.ends[i],j.xStart=P.starts[i]),B&&(j.orig_y=I[i],j.yEnd=S.ends[i],j.yStart=S.starts[i])):Y&&(c?ee:N)?(j[W]=c?E[i]:z[i],j.gap=!0,w?(j.s=e,J=!0):j.s=0):j[Z]=j[re]=e,H&&(j.id=String(H[i]))}if(l(U,p),r(a,p),n(U,p),Y){for(i=0;i<U.length;)U[i][W]===e?U.splice(i,1):i++;if(v.sort(U,function(ie,le){return ie[W]-le[W]||ie.i-le.i}),J){for(i=0;i<U.length-1&&U[i].gap;)i++;for((b=U[i].s)||(b=U[i].s=0),y=0;y<i;y++)U[y].s=b;for(f=U.length-1;f>i&&U[f].gap;)f--;for(b=U[f].s,y=U.length-1;y>f;y--)U[y].s=b;for(;i<f;)if(U[++i].gap){for(y=i+1;U[y].gap;)y++;for(var $=U[i-1][W],K=U[i-1].s,te=(U[y].s-K)/(U[y][W]-$);i<y;)U[i].s=K+(U[i][W]-$)*te,i++}}}return U},calcMarkerSize:u,calcAxisExpansion:d,setFirstScatter:o,getStackOpts:s}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"./arrays_to_calcdata":935,"./calc_selection":938,"./colorscale_calc":939,"./subtypes":961,"fast-isnumeric":190}],938:[function(g,Q,X){var m=g("../../lib");Q.exports=function(v,k){m.isArrayOrTypedArray(k.selectedpoints)&&m.tagSelected(v,k)}},{"../../lib":515}],939:[function(g,Q,X){var m=g("../../components/colorscale/helpers").hasColorscale,v=g("../../components/colorscale/calc"),k=g("./subtypes");Q.exports=function(x,e){k.hasLines(e)&&m(e,"line")&&v(x,e,{vals:e.line.color,containerStr:"line",cLetter:"c"}),k.hasMarkers(e)&&(m(e,"marker")&&v(x,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),m(e,"marker.line")&&v(x,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"./subtypes":961}],940:[function(g,Q,X){Q.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],941:[function(g,Q,X){var m=g("./calc");function v(k,x,e,t,r,l,n){r[t]=!0;var d={i:null,gap:!0,s:0};if(d[n]=e,k.splice(x,0,d),x&&e===k[x-1][n]){var u=k[x-1];d.s=u.s,d.i=u.i,d.gap=u.gap}else l&&(d.s=function(o,h,s,a){var p=o[h-1],c=o[h+1];return c?p?p.s+(c.s-p.s)*(s-p[a])/(c[a]-p[a]):c.s:p.s}(k,x,e,n));x||(k[0].t=k[1].t,k[0].trace=k[1].trace,delete k[1].t,delete k[1].trace)}Q.exports=function(k,x){var e=x.xaxis,t=x.yaxis,r=e._id+t._id,l=k._fullLayout._scatterStackOpts[r];if(l){var n,d,u,o,h,s,a,p,c,i,y,f,w,b,_,T=k.calcdata;for(var L in l){var A=(i=l[L]).traceIndices;if(A.length){for(y=i.stackgaps==="interpolate",f=i.groupnorm,i.orientation==="v"?(w="x",b="y"):(w="y",b="x"),_=new Array(A.length),n=0;n<_.length;n++)_[n]=!1;s=T[A[0]];var I=new Array(s.length);for(n=0;n<s.length;n++)I[n]=s[n][w];for(n=1;n<A.length;n++){for(h=T[A[n]],d=u=0;d<h.length;d++){for(a=h[d][w];a>I[u]&&u<I.length;u++)v(h,d,I[u],n,_,y,w),d++;if(a!==I[u]){for(o=0;o<n;o++)v(T[A[o]],u,a,o,_,y,w);I.splice(u,0,a)}u++}for(;u<I.length;u++)v(h,d,I[u],n,_,y,w),d++}var P=I.length;for(d=0;d<s.length;d++){for(p=s[d][b]=s[d].s,n=1;n<A.length;n++)(h=T[A[n]])[0].trace._rawLength=h[0].trace._length,h[0].trace._length=P,p+=h[d].s,h[d][b]=p;if(f)for(c=(f==="fraction"?p:p/100)||1,n=0;n<A.length;n++){var S=T[A[n]][d];S[b]/=c,S.sNorm=S.s/c}}for(n=0;n<A.length;n++){var E=(h=T[A[n]])[0].trace,z=m.calcMarkerSize(E,E._rawLength),D=Array.isArray(z);if(z&&_[n]||D){var U=z;for(z=new Array(P),d=0;d<P;d++)z[d]=h[d].gap?0:D?U[h[d].i]:U}var H=new Array(P),Y=new Array(P);for(d=0;d<P;d++)H[d]=h[d].x,Y[d]=h[d].y;m.calcAxisExpansion(k,E,e,t,H,Y,z),h[0].t.orientation=i.orientation}}}}}},{"./calc":937}],942:[function(g,Q,X){Q.exports=function(m){for(var v=0;v<m.length;v++){var k=m[v];if(k.type==="scatter"){var x=k.fill;if(x!=="none"&&x!=="toself"&&(k.opacity=void 0,x==="tonexty"||x==="tonextx"))for(var e=v-1;e>=0;e--){var t=m[e];if(t.type==="scatter"&&t.xaxis===k.xaxis&&t.yaxis===k.yaxis){t.opacity=void 0;break}}}}}},{}],943:[function(g,Q,X){var m=g("../../lib"),v=g("../../registry"),k=g("./attributes"),x=g("./constants"),e=g("./subtypes"),t=g("./xy_defaults"),r=g("./period_defaults"),l=g("./stack_defaults"),n=g("./marker_defaults"),d=g("./line_defaults"),u=g("./line_shape_defaults"),o=g("./text_defaults"),h=g("./fillcolor_defaults"),s=g("../../lib").coercePattern;Q.exports=function(a,p,c,i){function y(I,P){return m.coerce(a,p,k,I,P)}var f=t(a,p,i,y);if(f||(p.visible=!1),p.visible){r(a,p,i,y),y("xhoverformat"),y("yhoverformat");var w=l(a,p,i,y),b=!w&&f<x.PTS_LINESONLY?"lines+markers":"lines";y("text"),y("hovertext"),y("mode",b),e.hasLines(p)&&(d(a,p,c,i,y,{backoff:!0}),u(a,p,y),y("connectgaps"),y("line.simplify")),e.hasMarkers(p)&&n(a,p,c,i,y,{gradient:!0}),e.hasText(p)&&(y("texttemplate"),o(a,p,i,y));var _=[];(e.hasMarkers(p)||e.hasText(p))&&(y("cliponaxis"),y("marker.maxdisplayed"),_.push("points")),y("fill",w?w.fillDflt:"none"),p.fill!=="none"&&(h(a,p,c,y),e.hasLines(p)||u(a,p,y),s(y,"fillpattern",p.fillcolor,!1));var T=(p.line||{}).color,L=(p.marker||{}).color;p.fill!=="tonext"&&p.fill!=="toself"||_.push("fills"),y("hoveron",_.join("+")||"points"),p.hoveron!=="fills"&&y("hovertemplate");var A=v.getComponentMethod("errorbars","supplyDefaults");A(a,p,T||L||c,{axis:"y"}),A(a,p,T||L||c,{axis:"x",inherit:"y"}),m.coerceSelectionMarkerOpacity(p,y)}}},{"../../lib":515,"../../registry":647,"./attributes":936,"./constants":940,"./fillcolor_defaults":944,"./line_defaults":949,"./line_shape_defaults":951,"./marker_defaults":955,"./period_defaults":956,"./stack_defaults":959,"./subtypes":961,"./text_defaults":962,"./xy_defaults":963}],944:[function(g,Q,X){var m=g("../../components/color"),v=g("../../lib").isArrayOrTypedArray;Q.exports=function(k,x,e,t){var r=!1;if(x.marker){var l=x.marker.color,n=(x.marker.line||{}).color;l&&!v(l)?r=l:n&&!v(n)&&(r=n)}t("fillcolor",m.addOpacity((x.line||{}).color||r||e,.5))}},{"../../components/color":367,"../../lib":515}],945:[function(g,Q,X){var m=g("../../plots/cartesian/axes");Q.exports=function(v,k,x){var e={},t={_fullLayout:x},r=m.getFromTrace(t,k,"x"),l=m.getFromTrace(t,k,"y");return e.xLabel=m.tickText(r,r.c2l(v.x),!0).text,e.yLabel=m.tickText(l,l.c2l(v.y),!0).text,e}},{"../../plots/cartesian/axes":566}],946:[function(g,Q,X){var m=g("../../components/color"),v=g("./subtypes");Q.exports=function(k,x){var e,t;if(k.mode==="lines")return(e=k.line.color)&&m.opacity(e)?e:k.fillcolor;if(k.mode==="none")return k.fill?k.fillcolor:"";var r=x.mcc||(k.marker||{}).color,l=x.mlcc||((k.marker||{}).line||{}).color;return(t=r&&m.opacity(r)?r:l&&m.opacity(l)&&(x.mlw||((k.marker||{}).line||{}).width)?l:"")?m.opacity(t)<.3?m.addOpacity(t,.3):t:(e=(k.line||{}).color)&&m.opacity(e)&&v.hasLines(k)&&k.line.width?e:k.fillcolor}},{"../../components/color":367,"./subtypes":961}],947:[function(g,Q,X){var m=g("../../lib"),v=g("../../components/fx"),k=g("../../registry"),x=g("./get_trace_color"),e=g("../../components/color"),t=m.fillText;Q.exports=function(r,l,n,d){var u=r.cd,o=u[0].trace,h=r.xa,s=r.ya,a=h.c2p(l),p=s.c2p(n),c=[a,p],i=o.hoveron||"",y=o.mode.indexOf("markers")!==-1?3:.5,f=!!o.xperiodalignment,w=!!o.yperiodalignment;if(i.indexOf("points")!==-1){var b=function(se){var ve=Math.max(y,se.mrc||0),fe=h.c2p(se.x)-a,ye=s.c2p(se.y)-p;return Math.max(Math.sqrt(fe*fe+ye*ye)-ve,1-y/ve)},_=v.getDistanceFunction(d,function(se){if(f){var ve=h.c2p(se.xStart),fe=h.c2p(se.xEnd);return a>=Math.min(ve,fe)&&a<=Math.max(ve,fe)?0:1/0}var ye=Math.max(3,se.mrc||0),Ae=1-1/ye,pe=Math.abs(h.c2p(se.x)-a);return pe<ye?Ae*pe/ye:pe-ye+Ae},function(se){if(w){var ve=s.c2p(se.yStart),fe=s.c2p(se.yEnd);return p>=Math.min(ve,fe)&&p<=Math.max(ve,fe)?0:1/0}var ye=Math.max(3,se.mrc||0),Ae=1-1/ye,pe=Math.abs(s.c2p(se.y)-p);return pe<ye?Ae*pe/ye:pe-ye+Ae},b);if(v.getClosest(u,_,r),r.index!==!1){var T=u[r.index],L=h.c2p(T.x,!0),A=s.c2p(T.y,!0),I=T.mrc||1;r.index=T.i;var P=u[0].t.orientation,S=P&&(T.sNorm||T.s),E=P==="h"?S:T.orig_x!==void 0?T.orig_x:T.x,z=P==="v"?S:T.orig_y!==void 0?T.orig_y:T.y;return m.extendFlat(r,{color:x(o,T),x0:L-I,x1:L+I,xLabelVal:E,y0:A-I,y1:A+I,yLabelVal:z,spikeDistance:b(T),hovertemplate:o.hovertemplate}),t(T,o,r),k.getComponentMethod("errorbars","hoverInfo")(T,o,r),[r]}}if(i.indexOf("fills")!==-1&&o._polygons){var D,U,H,Y,J,W,Z,re,V,B=o._polygons,j=[],ee=!1,N=1/0,$=-1/0,K=1/0,te=-1/0;for(D=0;D<B.length;D++)(H=B[D]).contains(c)&&(ee=!ee,j.push(H),K=Math.min(K,H.ymin),te=Math.max(te,H.ymax));if(ee){var ie=((K=Math.max(K,0))+(te=Math.min(te,s._length)))/2;for(D=0;D<j.length;D++)for(Y=j[D].pts,U=1;U<Y.length;U++)(re=Y[U-1][1])>ie!=(V=Y[U][1])>=ie&&(W=Y[U-1][0],Z=Y[U][0],V-re&&(J=W+(Z-W)*(ie-re)/(V-re),N=Math.min(N,J),$=Math.max($,J)));N=Math.max(N,0),$=Math.min($,h._length);var le=e.defaultLine;return e.opacity(o.fillcolor)?le=o.fillcolor:e.opacity((o.line||{}).color)&&(le=o.line.color),m.extendFlat(r,{distance:r.maxHoverDistance,x0:N,x1:$,y0:ie,y1:ie,color:le,hovertemplate:!1}),delete r.index,o.text&&!Array.isArray(o.text)?r.text=String(o.text):r.text=o.name,[r]}}}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"../../registry":647,"./get_trace_color":946}],948:[function(g,Q,X){var m=g("./subtypes");Q.exports={hasLines:m.hasLines,hasMarkers:m.hasMarkers,hasText:m.hasText,isBubble:m.isBubble,attributes:g("./attributes"),supplyDefaults:g("./defaults"),crossTraceDefaults:g("./cross_trace_defaults"),calc:g("./calc").calc,crossTraceCalc:g("./cross_trace_calc"),arraysToCalcdata:g("./arrays_to_calcdata"),plot:g("./plot"),colorbar:g("./marker_colorbar"),formatLabels:g("./format_labels"),style:g("./style").style,styleOnSelect:g("./style").styleOnSelect,hoverPoints:g("./hover"),selectPoints:g("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:g("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"./arrays_to_calcdata":935,"./attributes":936,"./calc":937,"./cross_trace_calc":941,"./cross_trace_defaults":942,"./defaults":943,"./format_labels":945,"./hover":947,"./marker_colorbar":954,"./plot":957,"./select":958,"./style":960,"./subtypes":961}],949:[function(g,Q,X){var m=g("../../lib").isArrayOrTypedArray,v=g("../../components/colorscale/helpers").hasColorscale,k=g("../../components/colorscale/defaults");Q.exports=function(x,e,t,r,l,n){n||(n={});var d=(x.marker||{}).color;l("line.color",t),v(x,"line")?k(x,e,r,l,{prefix:"line.",cLetter:"c"}):l("line.color",!m(d)&&d||t),l("line.width"),n.noDash||l("line.dash"),n.backoff&&l("line.backoff")}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515}],950:[function(g,Q,X){var m=g("../../components/drawing"),v=g("../../constants/numerical"),k=v.BADNUM,x=v.LOG_CLIP,e=x+.5,t=x-.5,r=g("../../lib"),l=r.segmentsIntersect,n=r.constrain,d=g("./constants");Q.exports=function(u,o){var h,s,a,p,c,i,y,f,w,b,_,T,L,A,I,P,S,E,z=o.trace||{},D=o.xaxis,U=o.yaxis,H=D.type==="log",Y=U.type==="log",J=D._length,W=U._length,Z=o.backoff,re=z.marker,V=o.connectGaps,B=o.baseTolerance,j=o.shape,ee=j==="linear",N=z.fill&&z.fill!=="none",$=[],K=d.minTolerance,te=u.length,ie=new Array(te),le=0;function se(It){var Be=u[It];if(!Be)return!1;var He=o.linearized?D.l2p(Be.x):D.c2p(Be.x),he=o.linearized?U.l2p(Be.y):U.c2p(Be.y);if(He===k){if(H&&(He=D.c2p(Be.x,!0)),He===k)return!1;Y&&he===k&&(He*=Math.abs(D._m*W*(D._m>0?e:t)/(U._m*J*(U._m>0?e:t)))),He*=1e3}if(he===k){if(Y&&(he=U.c2p(Be.y,!0)),he===k)return!1;he*=1e3}return[He,he]}function ve(It,Be,He,he){var be=He-It,Re=he-Be,Ue=.5-It,Xe=.5-Be,qe=be*be+Re*Re,st=be*Ue+Re*Xe;if(st>0&&st<qe){var it=Ue*Re-Xe*be;if(it*it<qe)return!0}}function fe(It,Be){var He=It[0]/J,he=It[1]/W,be=Math.max(0,-He,He-1,-he,he-1);return be&&S!==void 0&&ve(He,he,S,E)&&(be=0),be&&Be&&ve(He,he,Be[0]/J,Be[1]/W)&&(be=0),(1+d.toleranceGrowth*be)*B}function ye(It,Be){var He=It[0]-Be[0],he=It[1]-Be[1];return Math.sqrt(He*He+he*he)}var Ae,pe,ge,we,oe,de,Te,Ee=d.maxScreensAway,Me=-J*Ee,De=J*(1+Ee),Ie=-W*Ee,Oe=W*(1+Ee),Ze=[[Me,Ie,De,Ie],[De,Ie,De,Oe],[De,Oe,Me,Oe],[Me,Oe,Me,Ie]];function Fe(It){if(It[0]<Me||It[0]>De||It[1]<Ie||It[1]>Oe)return[n(It[0],Me,De),n(It[1],Ie,Oe)]}function Pe(It,Be){return It[0]===Be[0]&&(It[0]===Me||It[0]===De)||It[1]===Be[1]&&(It[1]===Ie||It[1]===Oe)||void 0}function ze(It,Be,He){return function(he,be){var Re=Fe(he),Ue=Fe(be),Xe=[];if(Re&&Ue&&Pe(Re,Ue))return Xe;Re&&Xe.push(Re),Ue&&Xe.push(Ue);var qe=2*r.constrain((he[It]+be[It])/2,Be,He)-((Re||he)[It]+(Ue||be)[It]);return qe&&((Re&&Ue?qe>0==Re[It]>Ue[It]?Re:Ue:Re||Ue)[It]+=qe),Xe}}function Ge(It){var Be=It[0],He=It[1],he=Be===ie[le-1][0],be=He===ie[le-1][1];if(!he||!be)if(le>1){var Re=Be===ie[le-2][0],Ue=He===ie[le-2][1];he&&(Be===Me||Be===De)&&Re?Ue?le--:ie[le-1]=It:be&&(He===Ie||He===Oe)&&Ue?Re?le--:ie[le-1]=It:ie[le++]=It}else ie[le++]=It}function $e(It){ie[le-1][0]!==It[0]&&ie[le-1][1]!==It[1]&&Ge([ge,we]),Ge(It),oe=null,ge=we=0}j==="linear"||j==="spline"?Te=function(It,Be){for(var He=[],he=0,be=0;be<4;be++){var Re=Ze[be],Ue=l(It[0],It[1],Be[0],Be[1],Re[0],Re[1],Re[2],Re[3]);Ue&&(!he||Math.abs(Ue.x-He[0][0])>1||Math.abs(Ue.y-He[0][1])>1)&&(Ue=[Ue.x,Ue.y],he&&ye(Ue,It)<ye(He[0],It)?He.unshift(Ue):He.push(Ue),he++)}return He}:j==="hv"||j==="vh"?Te=function(It,Be){var He=[],he=Fe(It),be=Fe(Be);return he&&be&&Pe(he,be)||(he&&He.push(he),be&&He.push(be)),He}:j==="hvh"?Te=ze(0,Me,De):j==="vhv"&&(Te=ze(1,Ie,Oe));var ot=r.isArrayOrTypedArray(re);function vt(It){if(It&&Z&&(It.i=h,It.d=u,It.trace=z,It.marker=ot?re[It.i]:re,It.backoff=Z),S=It[0]/J,E=It[1]/W,Ae=It[0]<Me?Me:It[0]>De?De:0,pe=It[1]<Ie?Ie:It[1]>Oe?Oe:0,Ae||pe){if(le)if(oe){var Be=Te(oe,It);Be.length>1&&($e(Be[0]),ie[le++]=Be[1])}else de=Te(ie[le-1],It)[0],ie[le++]=de;else ie[le++]=[Ae||It[0],pe||It[1]];var He=ie[le-1];Ae&&pe&&(He[0]!==Ae||He[1]!==pe)?(oe&&(ge!==Ae&&we!==pe?Ge(ge&&we?(he=oe,Re=(be=It)[0]-he[0],Ue=(be[1]-he[1])/Re,(he[1]*be[0]-be[1]*he[0])/Re>0?[Ue>0?Me:De,Oe]:[Ue>0?De:Me,Ie]):[ge||Ae,we||pe]):ge&&we&&Ge([ge,we])),Ge([Ae,pe])):ge-Ae&&we-pe&&Ge([Ae||ge,pe||we]),oe=It,ge=Ae,we=pe}else oe&&$e(Te(oe,It)[0]),ie[le++]=It;var he,be,Re,Ue}for(h=0;h<te;h++)if(s=se(h)){for(le=0,oe=null,vt(s),h++;h<te;h++){if(!(p=se(h))){if(V)continue;break}if(ee&&o.simplify){var bt=se(h+1);if(b=ye(p,s),N&&(le===0||le===te-1)||!(b<fe(p,bt)*K)){for(f=[(p[0]-s[0])/b,(p[1]-s[1])/b],c=s,_=b,T=A=I=0,y=!1,a=p,h++;h<u.length;h++){if(i=bt,bt=se(h+1),!i){if(V)continue;break}if(P=(w=[i[0]-s[0],i[1]-s[1]])[0]*f[1]-w[1]*f[0],A=Math.min(A,P),(I=Math.max(I,P))-A>fe(i,bt))break;a=i,(L=w[0]*f[0]+w[1]*f[1])>_?(_=L,p=i,y=!1):L<T&&(T=L,c=i,y=!0)}if(y?(vt(p),a!==c&&vt(c)):(c!==s&&vt(c),a!==p&&vt(p)),vt(a),h>=u.length||!i)break;vt(i),s=i}}else vt(p)}oe&&Ge([ge||oe[0],we||oe[1]]),$.push(ie.slice(0,le))}var yt=j.slice(j.length-1);if(Z&&yt!=="h"&&yt!=="v"){for(var tt=!1,Ke=-1,mt=[],Ft=0;Ft<$.length;Ft++)for(var Vt=0;Vt<$[Ft].length-1;Vt++){var Xt=$[Ft][Vt],Gt=$[Ft][Vt+1],nr=m.applyBackoff(Gt,Xt);nr[0]===Gt[0]&&nr[1]===Gt[1]||(tt=!0),mt[Ke+1]||(mt[++Ke]=[Xt,[nr[0],nr[1]]])}return tt?mt:$}return $}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"./constants":940}],951:[function(g,Q,X){Q.exports=function(m,v,k){k("line.shape")==="spline"&&k("line.smoothing")}},{}],952:[function(g,Q,X){var m={tonextx:1,tonexty:1,tonext:1};Q.exports=function(v,k,x){var e,t,r,l,n,d={},u=!1,o=-1,h=0,s=-1;for(t=0;t<x.length;t++)(r=(e=x[t][0].trace).stackgroup||"")?r in d?n=d[r]:(n=d[r]=h,h++):e.fill in m&&s>=0?n=s:(n=s=h,h++),n<o&&(u=!0),e._groupIndex=o=n;var a=x.slice();u&&a.sort(function(c,i){var y=c[0].trace,f=i[0].trace;return y._groupIndex-f._groupIndex||y.index-f.index});var p={};for(t=0;t<a.length;t++)r=(e=a[t][0].trace).stackgroup||"",e.visible===!0?(e._nexttrace=null,e.fill in m&&(l=p[r],e._prevtrace=l||null,l&&(l._nexttrace=e)),e._ownfill=e.fill&&(e.fill.substr(0,6)==="tozero"||e.fill==="toself"||e.fill.substr(0,2)==="to"&&!e._prevtrace),p[r]=e):e._prevtrace=e._nexttrace=e._ownfill=null;return a}},{}],953:[function(g,Q,X){var m=g("fast-isnumeric");Q.exports=function(v,k){k||(k=2);var x=v.marker,e=x.sizeref||1,t=x.sizemin||0,r=x.sizemode==="area"?function(l){return Math.sqrt(l/e)}:function(l){return l/e};return function(l){var n=r(l/k);return m(n)&&n>0?Math.max(n,t):0}}},{"fast-isnumeric":190}],954:[function(g,Q,X){Q.exports={container:"marker",min:"cmin",max:"cmax"}},{}],955:[function(g,Q,X){var m=g("../../components/color"),v=g("../../components/colorscale/helpers").hasColorscale,k=g("../../components/colorscale/defaults"),x=g("./subtypes");Q.exports=function(e,t,r,l,n,d){var u=x.isBubble(e),o=(e.line||{}).color;d=d||{},o&&(r=o),n("marker.symbol"),n("marker.opacity",u?.7:1),n("marker.size"),d.noAngle||(n("marker.angle"),d.noAngleRef||n("marker.angleref"),d.noStandOff||n("marker.standoff")),n("marker.color",r),v(e,"marker")&&k(e,t,l,n,{prefix:"marker.",cLetter:"c"}),d.noSelect||(n("selected.marker.color"),n("unselected.marker.color"),n("selected.marker.size"),n("unselected.marker.size")),d.noLine||(n("marker.line.color",o&&!Array.isArray(o)&&t.marker.color!==o?o:u?m.background:m.defaultLine),v(e,"marker.line")&&k(e,t,l,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width",u?1:0)),u&&(n("marker.sizeref"),n("marker.sizemin"),n("marker.sizemode")),d.gradient&&n("marker.gradient.type")!=="none"&&n("marker.gradient.color")}},{"../../components/color":367,"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"./subtypes":961}],956:[function(g,Q,X){var m=g("../../lib").dateTick0,v=g("../../constants/numerical").ONEWEEK;function k(x,e){return m(e,x%v==0?1:0)}Q.exports=function(x,e,t,r,l){if(l||(l={x:!0,y:!0}),l.x){var n=r("xperiod");n&&(r("xperiod0",k(n,e.xcalendar)),r("xperiodalignment"))}if(l.y){var d=r("yperiod");d&&(r("yperiod0",k(d,e.ycalendar)),r("yperiodalignment"))}}},{"../../constants/numerical":491,"../../lib":515}],957:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../registry"),k=g("../../lib"),x=k.ensureSingle,e=k.identity,t=g("../../components/drawing"),r=g("./subtypes"),l=g("./line_points"),n=g("./link_traces"),d=g("../../lib/polygon").tester;function u(o,h,s,a,p,c,i){var y;(function(de,Te,Ee,Me,De){var Ie=Ee.xaxis,Oe=Ee.yaxis,Ze=m.extent(k.simpleMap(Ie.range,Ie.r2c)),Fe=m.extent(k.simpleMap(Oe.range,Oe.r2c)),Pe=Me[0].trace;if(!!r.hasMarkers(Pe)){var ze=Pe.marker.maxdisplayed;if(ze!==0){var Ge=Me.filter(function(bt){return bt.x>=Ze[0]&&bt.x<=Ze[1]&&bt.y>=Fe[0]&&bt.y<=Fe[1]}),$e=Math.ceil(Ge.length/ze),ot=0;De.forEach(function(bt,yt){var tt=bt[0].trace;r.hasMarkers(tt)&&tt.marker.maxdisplayed>0&&yt<Te&&ot++});var vt=Math.round(ot*$e/3+Math.floor(ot/3)*$e/7.1);Me.forEach(function(bt){delete bt.vis}),Ge.forEach(function(bt,yt){Math.round((yt+vt)%$e)===0&&(bt.vis=!0)})}}})(0,h,s,a,p);var f=!!i&&i.duration>0;function w(de){return f?de.transition():de}var b=s.xaxis,_=s.yaxis,T=a[0].trace,L=T.line,A=m.select(c),I=x(A,"g","errorbars"),P=x(A,"g","lines"),S=x(A,"g","points"),E=x(A,"g","text");if(v.getComponentMethod("errorbars","plot")(o,I,s,i),T.visible===!0){var z,D;w(A).style("opacity",T.opacity);var U=T.fill.charAt(T.fill.length-1);U!=="x"&&U!=="y"&&(U=""),a[0][s.isRangePlot?"nodeRangePlot3":"node3"]=A;var H,Y,J="",W=[],Z=T._prevtrace;Z&&(J=Z._prevRevpath||"",D=Z._nextFill,W=Z._polygons);var re,V,B,j,ee,N,$,K="",te="",ie=[],le=k.noop;if(z=T._ownFill,r.hasLines(T)||T.fill!=="none"){for(D&&D.datum(a),["hv","vh","hvh","vhv"].indexOf(L.shape)!==-1?(re=t.steps(L.shape),V=t.steps(L.shape.split("").reverse().join(""))):re=V=L.shape==="spline"?function(de){var Te=de[de.length-1];return de.length>1&&de[0][0]===Te[0]&&de[0][1]===Te[1]?t.smoothclosed(de.slice(1),L.smoothing):t.smoothopen(de,L.smoothing)}:function(de){return"M"+de.join("L")},B=function(de){return V(de.reverse())},ie=l(a,{xaxis:b,yaxis:_,trace:T,connectGaps:T.connectgaps,baseTolerance:Math.max(L.width||1,3)/4,shape:L.shape,backoff:L.backoff,simplify:L.simplify,fill:T.fill}),$=T._polygons=new Array(ie.length),y=0;y<ie.length;y++)T._polygons[y]=d(ie[y]);ie.length&&(j=ie[0][0],N=(ee=ie[ie.length-1])[ee.length-1]),le=function(de){return function(Te){if(H=re(Te),Y=B(Te),K?U?(K+="L"+H.substr(1),te=Y+"L"+te.substr(1)):(K+="Z"+H,te=Y+"Z"+te):(K=H,te=Y),r.hasLines(T)&&Te.length>1){var Ee=m.select(this);if(Ee.datum(a),de)w(Ee.style("opacity",0).attr("d",H).call(t.lineGroupStyle)).style("opacity",1);else{var Me=w(Ee);Me.attr("d",H),t.singleLineStyle(a,Me)}}}}}var se=P.selectAll(".js-line").data(ie);w(se.exit()).style("opacity",0).remove(),se.each(le(!1)),se.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(t.lineGroupStyle).each(le(!0)),t.setClipUrl(se,s.layerClipId,o),ie.length?(z?(z.datum(a),j&&N&&(U?(U==="y"?j[1]=N[1]=_.c2p(0,!0):U==="x"&&(j[0]=N[0]=b.c2p(0,!0)),w(z).attr("d","M"+N+"L"+j+"L"+K.substr(1)).call(t.singleFillStyle,o)):w(z).attr("d",K+"Z").call(t.singleFillStyle,o))):D&&(T.fill.substr(0,6)==="tonext"&&K&&J?(T.fill==="tonext"?w(D).attr("d",K+"Z"+J+"Z").call(t.singleFillStyle,o):w(D).attr("d",K+"L"+J.substr(1)+"Z").call(t.singleFillStyle,o),T._polygons=T._polygons.concat(W)):(fe(D),T._polygons=null)),T._prevRevpath=te,T._prevPolygons=$):(z?fe(z):D&&fe(D),T._polygons=T._prevRevpath=T._prevPolygons=null),S.datum(a),E.datum(a),function(de,Te,Ee){var Me,De=Ee[0].trace,Ie=r.hasMarkers(De),Oe=r.hasText(De),Ze=we(De),Fe=oe,Pe=oe;if(Ie||Oe){var ze=e,Ge=De.stackgroup,$e=Ge&&o._fullLayout._scatterStackOpts[b._id+_._id][Ge].stackgaps==="infer zero";De.marker.maxdisplayed||De._needsCull?ze=$e?Ae:ye:Ge&&!$e&&(ze=pe),Ie&&(Fe=ze),Oe&&(Pe=ze)}var ot,vt=(Me=de.selectAll("path.point").data(Fe,Ze)).enter().append("path").classed("point",!0);f&&vt.call(t.pointStyle,De,o).call(t.translatePoints,b,_).style("opacity",0).transition().style("opacity",1),Me.order(),Ie&&(ot=t.makePointStyleFns(De)),Me.each(function(bt){var yt=m.select(this),tt=w(yt);t.translatePoint(bt,tt,b,_)?(t.singlePointStyle(bt,tt,De,ot,o),s.layerClipId&&t.hideOutsideRangePoint(bt,tt,b,_,De.xcalendar,De.ycalendar),De.customdata&&yt.classed("plotly-customdata",bt.data!==null&&bt.data!==void 0)):tt.remove()}),f?Me.exit().transition().style("opacity",0).remove():Me.exit().remove(),(Me=Te.selectAll("g").data(Pe,Ze)).enter().append("g").classed("textpoint",!0).append("text"),Me.order(),Me.each(function(bt){var yt=m.select(this),tt=w(yt.select("text"));t.translatePoint(bt,tt,b,_)?s.layerClipId&&t.hideOutsideRangePoint(bt,yt,b,_,De.xcalendar,De.ycalendar):yt.remove()}),Me.selectAll("text").call(t.textPointStyle,De,o).each(function(bt){var yt=b.c2p(bt.x),tt=_.c2p(bt.y);m.select(this).selectAll("tspan.line").each(function(){w(m.select(this)).attr({x:yt,y:tt})})}),Me.exit().remove()}(S,E,a);var ve=T.cliponaxis===!1?null:s.layerClipId;t.setClipUrl(S,ve,o),t.setClipUrl(E,ve,o)}function fe(de){w(de).attr("d","M0,0Z")}function ye(de){return de.filter(function(Te){return!Te.gap&&Te.vis})}function Ae(de){return de.filter(function(Te){return Te.vis})}function pe(de){return de.filter(function(Te){return!Te.gap})}function ge(de){return de.id}function we(de){if(de.ids)return ge}function oe(){return!1}}Q.exports=function(o,h,s,a,p,c){var i,y,f=!p,w=!!p&&p.duration>0,b=n(o,h,s);(i=a.selectAll("g.trace").data(b,function(_){return _[0].trace.uid})).enter().append("g").attr("class",function(_){return"trace scatter trace"+_[0].trace.uid}).style("stroke-miterlimit",2),i.order(),function(_,T,L){T.each(function(A){var I=x(m.select(this),"g","fills");t.setClipUrl(I,L.layerClipId,_);var P=A[0].trace,S=[];P._ownfill&&S.push("_ownFill"),P._nexttrace&&S.push("_nextFill");var E=I.selectAll("g").data(S,e);E.enter().append("g"),E.exit().each(function(z){P[z]=null}).remove(),E.order().each(function(z){P[z]=x(m.select(this),"path","js-fill")})})}(o,i,h),w?(c&&(y=c()),m.transition().duration(p.duration).ease(p.easing).each("end",function(){y&&y()}).each("interrupt",function(){y&&y()}).each(function(){a.selectAll("g.trace").each(function(_,T){u(o,T,h,_,b,this,p)})})):i.each(function(_,T){u(o,T,h,_,b,this,p)}),f&&i.exit().remove(),a.selectAll("path:not([d])").remove()}},{"../../components/drawing":389,"../../lib":515,"../../lib/polygon":527,"../../registry":647,"./line_points":950,"./link_traces":952,"./subtypes":961,"@plotly/d3":58}],958:[function(g,Q,X){var m=g("./subtypes");Q.exports=function(v,k){var x,e,t,r,l=v.cd,n=v.xaxis,d=v.yaxis,u=[],o=l[0].trace;if(!m.hasMarkers(o)&&!m.hasText(o))return[];if(k===!1)for(x=0;x<l.length;x++)l[x].selected=0;else for(x=0;x<l.length;x++)e=l[x],t=n.c2p(e.x),r=d.c2p(e.y),e.i!==null&&k.contains([t,r],!1,x,v)?(u.push({pointNumber:e.i,x:n.c2d(e.x),y:d.c2d(e.y)}),e.selected=1):e.selected=0;return u}},{"./subtypes":961}],959:[function(g,Q,X){var m=["orientation","groupnorm","stackgaps"];Q.exports=function(v,k,x,e){var t=x._scatterStackOpts,r=e("stackgroup");if(r){var l=k.xaxis+k.yaxis,n=t[l];n||(n=t[l]={});var d=n[r],u=!1;d?d.traces.push(k):(d=n[r]={traceIndices:[],traces:[k]},u=!0);for(var o={orientation:k.x&&!k.y?"h":"v"},h=0;h<m.length;h++){var s=m[h],a=s+"Found";if(!d[a]){var p=v[s]!==void 0,c=s==="orientation";if((p||u)&&(d[s]=e(s,o[s]),c&&(d.fillDflt=d[s]==="h"?"tonextx":"tonexty"),p&&(d[a]=!0,!u&&(delete d.traces[0][s],c))))for(var i=0;i<d.traces.length-1;i++){var y=d.traces[i];y._input.fill!==y.fill&&(y.fill=d.fillDflt)}}}return d}}},{}],960:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../components/drawing"),k=g("../../registry");function x(t,r,l){v.pointStyle(t.selectAll("path.point"),r,l)}function e(t,r,l){v.textPointStyle(t.selectAll("text"),r,l)}Q.exports={style:function(t){var r=m.select(t).selectAll("g.trace.scatter");r.style("opacity",function(l){return l[0].trace.opacity}),r.selectAll("g.points").each(function(l){x(m.select(this),l.trace||l[0].trace,t)}),r.selectAll("g.text").each(function(l){e(m.select(this),l.trace||l[0].trace,t)}),r.selectAll("g.trace path.js-line").call(v.lineGroupStyle),r.selectAll("g.trace path.js-fill").call(v.fillGroupStyle,t),k.getComponentMethod("errorbars","style")(r)},stylePoints:x,styleText:e,styleOnSelect:function(t,r,l){var n=r[0].trace;n.selectedpoints?(v.selectedPointStyle(l.selectAll("path.point"),n),v.selectedTextStyle(l.selectAll("text"),n)):(x(l,n,t),e(l,n,t))}}},{"../../components/drawing":389,"../../registry":647,"@plotly/d3":58}],961:[function(g,Q,X){var m=g("../../lib");Q.exports={hasLines:function(v){return v.visible&&v.mode&&v.mode.indexOf("lines")!==-1},hasMarkers:function(v){return v.visible&&(v.mode&&v.mode.indexOf("markers")!==-1||v.type==="splom")},hasText:function(v){return v.visible&&v.mode&&v.mode.indexOf("text")!==-1},isBubble:function(v){return m.isPlainObject(v.marker)&&m.isArrayOrTypedArray(v.marker.size)}}},{"../../lib":515}],962:[function(g,Q,X){var m=g("../../lib");Q.exports=function(v,k,x,e,t){t=t||{},e("textposition"),m.coerceFont(e,"textfont",x.font),t.noSelect||(e("selected.textfont.color"),e("unselected.textfont.color"))}},{"../../lib":515}],963:[function(g,Q,X){var m=g("../../lib"),v=g("../../registry");Q.exports=function(k,x,e,t){var r,l=t("x"),n=t("y");if(v.getComponentMethod("calendars","handleTraceDefaults")(k,x,["x","y"],e),l){var d=m.minRowLength(l);n?r=Math.min(d,m.minRowLength(n)):(r=d,t("y0"),t("dy"))}else{if(!n)return 0;r=m.minRowLength(n),t("x0"),t("dx")}return x._length=r,r}},{"../../lib":515,"../../registry":647}],964:[function(g,Q,X){var m=g("../scatter/attributes"),v=g("../../components/colorscale/attributes"),k=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=g("../../plots/template_attributes").hovertemplateAttrs,e=g("../../plots/template_attributes").texttemplateAttrs,t=g("../../plots/attributes"),r=g("../../constants/gl3d_dashes"),l=g("../../constants/gl3d_markers"),n=g("../../lib/extend").extendFlat,d=g("../../plot_api/edit_types").overrideAll,u=g("../../lib/sort_object_keys"),o=m.line,h=m.marker,s=h.line,a=n({width:o.width,dash:{valType:"enumerated",values:u(r),dflt:"solid"}},v("line")),p=Q.exports=d({x:m.x,y:m.y,z:{valType:"data_array"},text:n({},m.text,{}),texttemplate:e({},{}),hovertext:n({},m.hovertext,{}),hovertemplate:x(),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),mode:n({},m.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:m.connectgaps,line:a,marker:n({symbol:{valType:"enumerated",values:u(l),dflt:"circle",arrayOk:!0},size:n({},h.size,{dflt:8}),sizeref:h.sizeref,sizemin:h.sizemin,sizemode:h.sizemode,opacity:n({},h.opacity,{arrayOk:!1}),colorbar:h.colorbar,line:n({width:n({},s.width,{arrayOk:!1})},v("marker.line"))},v("marker")),textposition:n({},m.textposition,{dflt:"top center"}),textfont:{color:m.textfont.color,size:m.textfont.size,family:n({},m.textfont.family,{arrayOk:!1})},opacity:t.opacity,hoverinfo:n({},t.hoverinfo)},"calc","nested");p.x.editType=p.y.editType=p.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":374,"../../constants/gl3d_dashes":488,"../../constants/gl3d_markers":489,"../../lib/extend":505,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../scatter/attributes":936}],965:[function(g,Q,X){var m=g("../scatter/arrays_to_calcdata"),v=g("../scatter/colorscale_calc");Q.exports=function(k,x){var e=[{x:!1,y:!1,trace:x,t:{}}];return m(e,x),v(k,x),e}},{"../scatter/arrays_to_calcdata":935,"../scatter/colorscale_calc":939}],966:[function(g,Q,X){var m=g("../../registry");function v(k,x,e,t){if(!x||!x.visible)return null;for(var r=m.getComponentMethod("errorbars","makeComputeError")(x),l=new Array(k.length),n=0;n<k.length;n++){var d=r(+k[n],n);if(t.type==="log"){var u=t.c2l(k[n]),o=k[n]-d[0],h=k[n]+d[1];if(l[n]=[(t.c2l(o,!0)-u)*e,(t.c2l(h,!0)-u)*e],o>0){var s=t.c2l(o);t._lowerLogErrorBound||(t._lowerLogErrorBound=s),t._lowerErrorBound=Math.min(t._lowerLogErrorBound,s)}}else l[n]=[-d[0]*e,d[1]*e]}return l}Q.exports=function(k,x,e){var t=[v(k.x,k.error_x,x[0],e.xaxis),v(k.y,k.error_y,x[1],e.yaxis),v(k.z,k.error_z,x[2],e.zaxis)],r=function(h){for(var s=0;s<h.length;s++)if(h[s])return h[s].length;return 0}(t);if(r===0)return null;for(var l=new Array(r),n=0;n<r;n++){for(var d=[[0,0,0],[0,0,0]],u=0;u<3;u++)if(t[u])for(var o=0;o<2;o++)d[o][u]=t[u][n][o];l[n]=d}return l}},{"../../registry":647}],967:[function(g,Q,X){var m=g("../../../stackgl_modules").gl_line3d,v=g("../../../stackgl_modules").gl_scatter3d,k=g("../../../stackgl_modules").gl_error3d,x=g("../../../stackgl_modules").gl_mesh3d,e=g("../../../stackgl_modules").delaunay_triangulate,t=g("../../lib"),r=g("../../lib/str2rgbarray"),l=g("../../lib/gl_format_color").formatColor,n=g("../scatter/make_bubble_size_func"),d=g("../../constants/gl3d_dashes"),u=g("../../constants/gl3d_markers"),o=g("../../plots/cartesian/axes"),h=g("../../components/fx/helpers").appendArrayPointValue,s=g("./calc_errors");function a(L,A){this.scene=L,this.uid=A,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var p=a.prototype;function c(L){return L==null?0:L.indexOf("left")>-1?-1:L.indexOf("right")>-1?1:0}function i(L){return L==null?0:L.indexOf("top")>-1?-1:L.indexOf("bottom")>-1?1:0}function y(L,A){return A(4*L)}function f(L){return u[L]}function w(L,A,I,P,S){var E=null;if(t.isArrayOrTypedArray(L)){E=[];for(var z=0;z<A;z++)L[z]===void 0?E[z]=P:E[z]=I(L[z],S)}else E=I(L,t.identity);return E}function b(L,A){var I,P,S,E,z,D,U=[],H=L.fullSceneLayout,Y=L.dataScale,J=H.xaxis,W=H.yaxis,Z=H.zaxis,re=A.marker,V=A.line,B=A.x||[],j=A.y||[],ee=A.z||[],N=B.length,$=A.xcalendar,K=A.ycalendar,te=A.zcalendar;for(z=0;z<N;z++)I=J.d2l(B[z],0,$)*Y[0],P=W.d2l(j[z],0,K)*Y[1],S=Z.d2l(ee[z],0,te)*Y[2],U[z]=[I,P,S];if(Array.isArray(A.text))D=A.text;else if(A.text!==void 0)for(D=new Array(N),z=0;z<N;z++)D[z]=A.text;function ie(Me,De){var Ie=H[Me];return o.tickText(Ie,Ie.d2l(De),!0).text}var le=A.texttemplate;if(le){var se=L.fullLayout._d3locale,ve=Array.isArray(le),fe=ve?Math.min(le.length,N):N,ye=ve?function(Me){return le[Me]}:function(){return le};for(D=new Array(fe),z=0;z<fe;z++){var Ae={x:B[z],y:j[z],z:ee[z]},pe={xLabel:ie("xaxis",B[z]),yLabel:ie("yaxis",j[z]),zLabel:ie("zaxis",ee[z])},ge={};h(ge,A,z);var we=A._meta||{};D[z]=t.texttemplateString(ye(z),pe,se,ge,Ae,we)}}if(E={position:U,mode:A.mode,text:D},"line"in A&&(E.lineColor=l(V,1,N),E.lineWidth=V.width,E.lineDashes=V.dash),"marker"in A){var oe=n(A);E.scatterColor=l(re,1,N),E.scatterSize=w(re.size,N,y,20,oe),E.scatterMarker=w(re.symbol,N,f,"\u25CF"),E.scatterLineWidth=re.line.width,E.scatterLineColor=l(re.line,1,N),E.scatterAngle=0}"textposition"in A&&(E.textOffset=function(Me){var De=[0,0];if(Array.isArray(Me))for(var Ie=0;Ie<Me.length;Ie++)De[Ie]=[0,0],Me[Ie]&&(De[Ie][0]=c(Me[Ie]),De[Ie][1]=i(Me[Ie]));else De[0]=c(Me),De[1]=i(Me);return De}(A.textposition),E.textColor=l(A.textfont,1,N),E.textSize=w(A.textfont.size,N,t.identity,12),E.textFont=A.textfont.family,E.textAngle=0);var de=["x","y","z"];for(E.project=[!1,!1,!1],E.projectScale=[1,1,1],E.projectOpacity=[1,1,1],z=0;z<3;++z){var Te=A.projection[de[z]];(E.project[z]=Te.show)&&(E.projectOpacity[z]=Te.opacity,E.projectScale[z]=Te.scale)}E.errorBounds=s(A,Y,H);var Ee=function(Me){for(var De=[0,0,0],Ie=[[0,0,0],[0,0,0],[0,0,0]],Oe=[1,1,1],Ze=0;Ze<3;Ze++){var Fe=Me[Ze];Fe&&Fe.copy_zstyle!==!1&&Me[2].visible!==!1&&(Fe=Me[2]),Fe&&Fe.visible&&(De[Ze]=Fe.width/2,Ie[Ze]=r(Fe.color),Oe[Ze]=Fe.thickness)}return{capSize:De,color:Ie,lineWidth:Oe}}([A.error_x,A.error_y,A.error_z]);return E.errorColor=Ee.color,E.errorLineWidth=Ee.lineWidth,E.errorCapSize=Ee.capSize,E.delaunayAxis=A.surfaceaxis,E.delaunayColor=r(A.surfacecolor),E}function _(L){if(t.isArrayOrTypedArray(L)){var A=L[0];return t.isArrayOrTypedArray(A)&&(L=A),"rgb("+L.slice(0,3).map(function(I){return Math.round(255*I)})+")"}return null}function T(L){return t.isArrayOrTypedArray(L)?L.length===4&&typeof L[0]=="number"?_(L):L.map(_):null}p.handlePick=function(L){if(L.object&&(L.object===this.linePlot||L.object===this.delaunayMesh||L.object===this.textMarkers||L.object===this.scatterPlot)){var A=L.index=L.data.index;return L.object.highlight&&L.object.highlight(null),this.scatterPlot&&(L.object=this.scatterPlot,this.scatterPlot.highlight(L.data)),L.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[A]||this.textLabels[A]===0)&&(L.textLabel=this.textLabels[A]):L.textLabel=this.textLabels),L.traceCoordinate=[this.data.x[A],this.data.y[A],this.data.z[A]],!0}},p.update=function(L){var A,I,P,S,E=this.scene.glplot.gl,z=d.solid;this.data=L;var D=b(this.scene,L);"mode"in D&&(this.mode=D.mode),"lineDashes"in D&&D.lineDashes in d&&(z=d[D.lineDashes]),this.color=T(D.scatterColor)||T(D.lineColor),this.dataPoints=D.position,A={gl:this.scene.glplot.gl,position:D.position,color:D.lineColor,lineWidth:D.lineWidth||1,dashes:z[0],dashScale:z[1],opacity:L.opacity,connectGaps:L.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(A):(this.linePlot=m(A),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var U=L.opacity;if(L.marker&&L.marker.opacity&&(U*=L.marker.opacity),I={gl:this.scene.glplot.gl,position:D.position,color:D.scatterColor,size:D.scatterSize,glyph:D.scatterMarker,opacity:U,orthographic:!0,lineWidth:D.scatterLineWidth,lineColor:D.scatterLineColor,project:D.project,projectScale:D.projectScale,projectOpacity:D.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(I):(this.scatterPlot=v(I),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),S={gl:this.scene.glplot.gl,position:D.position,glyph:D.text,color:D.textColor,size:D.textSize,angle:D.textAngle,alignment:D.textOffset,font:D.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:L.opacity},this.textLabels=L.hovertext||L.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(S):(this.textMarkers=v(S),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),P={gl:this.scene.glplot.gl,position:D.position,color:D.errorColor,error:D.errorBounds,lineWidth:D.errorLineWidth,capSize:D.errorCapSize,opacity:L.opacity},this.errorBars?D.errorBounds?this.errorBars.update(P):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):D.errorBounds&&(this.errorBars=k(P),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),D.delaunayAxis>=0){var H=function(Y,J,W){var Z,re=(W+1)%3,V=(W+2)%3,B=[],j=[];for(Z=0;Z<Y.length;++Z){var ee=Y[Z];!isNaN(ee[re])&&isFinite(ee[re])&&!isNaN(ee[V])&&isFinite(ee[V])&&(B.push([ee[re],ee[V]]),j.push(Z))}var N=e(B);for(Z=0;Z<N.length;++Z)for(var $=N[Z],K=0;K<$.length;++K)$[K]=j[$[K]];return{positions:Y,cells:N,meshColor:J}}(D.position,D.delaunayColor,D.delaunayAxis);H.opacity=L.opacity,this.delaunayMesh?this.delaunayMesh.update(H):(H.gl=E,this.delaunayMesh=x(H),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},p.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},Q.exports=function(L,A){var I=new a(L,A.uid);return I.update(A),I}},{"../../../stackgl_modules":1133,"../../components/fx/helpers":403,"../../constants/gl3d_dashes":488,"../../constants/gl3d_markers":489,"../../lib":515,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566,"../scatter/make_bubble_size_func":953,"./calc_errors":966}],968:[function(g,Q,X){var m=g("../../registry"),v=g("../../lib"),k=g("../scatter/subtypes"),x=g("../scatter/marker_defaults"),e=g("../scatter/line_defaults"),t=g("../scatter/text_defaults"),r=g("./attributes");Q.exports=function(l,n,d,u){function o(y,f){return v.coerce(l,n,r,y,f)}if(function(y,f,w,b){var _=0,T=w("x"),L=w("y"),A=w("z");return m.getComponentMethod("calendars","handleTraceDefaults")(y,f,["x","y","z"],b),T&&L&&A&&(_=Math.min(T.length,L.length,A.length),f._length=f._xlength=f._ylength=f._zlength=_),_}(l,n,o,u)){o("text"),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat"),o("zhoverformat"),o("mode"),k.hasLines(n)&&(o("connectgaps"),e(l,n,d,u,o)),k.hasMarkers(n)&&x(l,n,d,u,o,{noSelect:!0,noAngle:!0}),k.hasText(n)&&(o("texttemplate"),t(l,n,u,o,{noSelect:!0}));var h=(n.line||{}).color,s=(n.marker||{}).color;o("surfaceaxis")>=0&&o("surfacecolor",h||s);for(var a=["x","y","z"],p=0;p<3;++p){var c="projection."+a[p];o(c+".show")&&(o(c+".opacity"),o(c+".scale"))}var i=m.getComponentMethod("errorbars","supplyDefaults");i(l,n,h||s||d,{axis:"z"}),i(l,n,h||s||d,{axis:"y",inherit:"z"}),i(l,n,h||s||d,{axis:"x",inherit:"z"})}else n.visible=!1}},{"../../lib":515,"../../registry":647,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":964}],969:[function(g,Q,X){Q.exports={plot:g("./convert"),attributes:g("./attributes"),markerSymbols:g("../../constants/gl3d_markers"),supplyDefaults:g("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:g("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:g("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":489,"../../plots/gl3d":607,"./attributes":964,"./calc":965,"./convert":967,"./defaults":968}],970:[function(g,Q,X){var m=g("../scatter/attributes"),v=g("../../plots/attributes"),k=g("../../plots/template_attributes").hovertemplateAttrs,x=g("../../plots/template_attributes").texttemplateAttrs,e=g("../../components/colorscale/attributes"),t=g("../../lib/extend").extendFlat,r=m.marker,l=m.line,n=r.line;Q.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:t({},m.mode,{dflt:"markers"}),text:t({},m.text,{}),texttemplate:x({editType:"plot"},{keys:["a","b","text"]}),hovertext:t({},m.hovertext,{}),line:{color:l.color,width:l.width,dash:l.dash,backoff:l.backoff,shape:t({},l.shape,{values:["linear","spline"]}),smoothing:l.smoothing,editType:"calc"},connectgaps:m.connectgaps,fill:t({},m.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:m.fillcolor,marker:t({symbol:r.symbol,opacity:r.opacity,maxdisplayed:r.maxdisplayed,angle:r.angle,angleref:r.angleref,standoff:r.standoff,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,line:t({width:n.width,editType:"calc"},e("marker.line")),gradient:r.gradient,editType:"calc"},e("marker")),textfont:m.textfont,textposition:m.textposition,selected:m.selected,unselected:m.unselected,hoverinfo:t({},v.hoverinfo,{flags:["a","b","text","name"]}),hoveron:m.hoveron,hovertemplate:k()}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],971:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../scatter/colorscale_calc"),k=g("../scatter/arrays_to_calcdata"),x=g("../scatter/calc_selection"),e=g("../scatter/calc").calcMarkerSize,t=g("../carpet/lookup_carpetid");Q.exports=function(r,l){var n=l._carpetTrace=t(r,l);if(n&&n.visible&&n.visible!=="legendonly"){var d;l.xaxis=n.xaxis,l.yaxis=n.yaxis;var u,o,h=l._length,s=new Array(h),a=!1;for(d=0;d<h;d++)if(u=l.a[d],o=l.b[d],m(u)&&m(o)){var p=n.ab2xy(+u,+o,!0),c=n.isVisible(+u,+o);c||(a=!0),s[d]={x:p[0],y:p[1],a:u,b:o,vis:c}}else s[d]={x:!1,y:!1};return l._needsCull=a,s[0].carpet=n,s[0].trace=l,e(l,h),v(r,l),k(s,l),x(s,l),s}}},{"../carpet/lookup_carpetid":717,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],972:[function(g,Q,X){var m=g("../../lib"),v=g("../scatter/constants"),k=g("../scatter/subtypes"),x=g("../scatter/marker_defaults"),e=g("../scatter/line_defaults"),t=g("../scatter/line_shape_defaults"),r=g("../scatter/text_defaults"),l=g("../scatter/fillcolor_defaults"),n=g("./attributes");Q.exports=function(d,u,o,h){function s(y,f){return m.coerce(d,u,n,y,f)}s("carpet"),u.xaxis="x",u.yaxis="y";var a=s("a"),p=s("b"),c=Math.min(a.length,p.length);if(c){u._length=c,s("text"),s("texttemplate"),s("hovertext"),s("mode",c<v.PTS_LINESONLY?"lines+markers":"lines"),k.hasLines(u)&&(e(d,u,o,h,s,{backoff:!0}),t(d,u,s),s("connectgaps")),k.hasMarkers(u)&&x(d,u,o,h,s,{gradient:!0}),k.hasText(u)&&r(d,u,h,s);var i=[];(k.hasMarkers(u)||k.hasText(u))&&(s("marker.maxdisplayed"),i.push("points")),s("fill"),u.fill!=="none"&&(l(d,u,o,s),k.hasLines(u)||t(d,u,s)),u.fill!=="tonext"&&u.fill!=="toself"||i.push("fills"),s("hoveron",i.join("+")||"points")!=="fills"&&s("hovertemplate"),m.coerceSelectionMarkerOpacity(u,s)}else u.visible=!1}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":970}],973:[function(g,Q,X){Q.exports=function(m,v,k,x,e){var t=x[e];return m.a=t.a,m.b=t.b,m.y=t.y,m}},{}],974:[function(g,Q,X){Q.exports=function(m,v){var k={},x=v._carpet,e=x.ab2ij([m.a,m.b]),t=Math.floor(e[0]),r=e[0]-t,l=Math.floor(e[1]),n=e[1]-l,d=x.evalxy([],t,l,r,n);return k.yLabel=d[1].toFixed(3),k}},{}],975:[function(g,Q,X){var m=g("../scatter/hover"),v=g("../../lib").fillText;Q.exports=function(k,x,e,t){var r=m(k,x,e,t);if(r&&r[0].index!==!1){var l=r[0];if(l.index===void 0){var n=1-l.y0/k.ya._length,d=k.xa._length,u=d*n/2,o=d-u;return l.x0=Math.max(Math.min(l.x0,o),u),l.x1=Math.max(Math.min(l.x1,o),u),r}var h=l.cd[l.index];l.a=h.a,l.b=h.b,l.xLabelVal=void 0,l.yLabelVal=void 0;var s=l.trace,a=s._carpet,p=s._module.formatLabels(h,s);l.yLabel=p.yLabel,delete l.text;var c=[];if(!s.hovertemplate){var i=(h.hi||s.hoverinfo).split("+");i.indexOf("all")!==-1&&(i=["a","b","text"]),i.indexOf("a")!==-1&&y(a.aaxis,h.a),i.indexOf("b")!==-1&&y(a.baxis,h.b),c.push("y: "+l.yLabel),i.indexOf("text")!==-1&&v(h,s,c),l.extraText=c.join("<br>")}return r}function y(f,w){var b;b=f.labelprefix&&f.labelprefix.length>0?f.labelprefix.replace(/ = $/,""):f._hovertitle,c.push(b+": "+w.toFixed(3)+f.labelsuffix)}}},{"../../lib":515,"../scatter/hover":947}],976:[function(g,Q,X){Q.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),colorbar:g("../scatter/marker_colorbar"),formatLabels:g("./format_labels"),calc:g("./calc"),plot:g("./plot"),style:g("../scatter/style").style,styleOnSelect:g("../scatter/style").styleOnSelect,hoverPoints:g("./hover"),selectPoints:g("../scatter/select"),eventData:g("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:g("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":970,"./calc":971,"./defaults":972,"./event_data":973,"./format_labels":974,"./hover":975,"./plot":977}],977:[function(g,Q,X){var m=g("../scatter/plot"),v=g("../../plots/cartesian/axes"),k=g("../../components/drawing");Q.exports=function(x,e,t,r){var l,n,d,u=t[0][0].carpet,o=v.getFromId(x,u.xaxis||"x"),h=v.getFromId(x,u.yaxis||"y"),s={xaxis:o,yaxis:h,plot:e.plot};for(l=0;l<t.length;l++)(n=t[l][0].trace)._xA=o,n._yA=h;for(m(x,s,t,r),l=0;l<t.length;l++)n=t[l][0].trace,d=r.selectAll("g.trace"+n.uid+" .js-line"),k.setClipUrl(d,t[l][0].carpet._clipPathId,x)}},{"../../components/drawing":389,"../../plots/cartesian/axes":566,"../scatter/plot":957}],978:[function(g,Q,X){var m=g("../../plots/template_attributes").hovertemplateAttrs,v=g("../../plots/template_attributes").texttemplateAttrs,k=g("../scatter/attributes"),x=g("../../plots/attributes"),e=g("../../components/colorscale/attributes"),t=g("../../components/drawing/attributes").dash,r=g("../../lib/extend").extendFlat,l=g("../../plot_api/edit_types").overrideAll,n=k.marker,d=k.line,u=n.line;Q.exports=l({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:r({},k.mode,{dflt:"markers"}),text:r({},k.text,{}),texttemplate:v({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:r({},k.hovertext,{}),textfont:k.textfont,textposition:k.textposition,line:{color:d.color,width:d.width,dash:t},connectgaps:k.connectgaps,marker:r({symbol:n.symbol,opacity:n.opacity,angle:n.angle,angleref:r({},n.angleref,{values:["previous","up","north"]}),standoff:n.standoff,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,colorbar:n.colorbar,line:r({width:u.width},e("marker.line")),gradient:n.gradient},e("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:k.fillcolor,selected:k.selected,unselected:k.unselected,hoverinfo:r({},x.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:m()},"calc","nested")},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],979:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../../constants/numerical").BADNUM,k=g("../scatter/colorscale_calc"),x=g("../scatter/arrays_to_calcdata"),e=g("../scatter/calc_selection"),t=g("../../lib")._;function r(l){return l&&typeof l=="string"}Q.exports=function(l,n){var d,u=Array.isArray(n.locations),o=u?n.locations.length:n._length,h=new Array(o);d=n.geojson?function(y){return r(y)||m(y)}:r;for(var s=0;s<o;s++){var a=h[s]={};if(u){var p=n.locations[s];a.loc=d(p)?p:null}else{var c=n.lon[s],i=n.lat[s];m(c)&&m(i)?a.lonlat=[+c,+i]:a.lonlat=[v,v]}}return x(h,n),k(l,n),e(h,n),o&&(h[0].t={labels:{lat:t(l,"lat:")+" ",lon:t(l,"lon:")+" "}}),h}},{"../../constants/numerical":491,"../../lib":515,"../scatter/arrays_to_calcdata":935,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],980:[function(g,Q,X){var m=g("../../lib"),v=g("../scatter/subtypes"),k=g("../scatter/marker_defaults"),x=g("../scatter/line_defaults"),e=g("../scatter/text_defaults"),t=g("../scatter/fillcolor_defaults"),r=g("./attributes");Q.exports=function(l,n,d,u){function o(y,f){return m.coerce(l,n,r,y,f)}var h,s=o("locations");if(s&&s.length){var a,p=o("geojson");(typeof p=="string"&&p!==""||m.isPlainObject(p))&&(a="geojson-id"),o("locationmode",a)==="geojson-id"&&o("featureidkey"),h=s.length}else{var c=o("lon")||[],i=o("lat")||[];h=Math.min(c.length,i.length)}h?(n._length=h,o("text"),o("hovertext"),o("hovertemplate"),o("mode"),v.hasLines(n)&&(x(l,n,d,u,o),o("connectgaps")),v.hasMarkers(n)&&k(l,n,d,u,o,{gradient:!0}),v.hasText(n)&&(o("texttemplate"),e(l,n,u,o)),o("fill"),n.fill!=="none"&&t(l,n,d,o),m.coerceSelectionMarkerOpacity(n,o)):n.visible=!1}},{"../../lib":515,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":978}],981:[function(g,Q,X){Q.exports=function(m,v,k,x,e){m.lon=v.lon,m.lat=v.lat,m.location=v.loc?v.loc:null;var t=x[e];return t.fIn&&t.fIn.properties&&(m.properties=t.fIn.properties),m}},{}],982:[function(g,Q,X){var m=g("../../plots/cartesian/axes");Q.exports=function(v,k,x){var e={},t=x[k.geo]._subplot.mockAxis,r=v.lonlat;return e.lonLabel=m.tickText(t,t.c2l(r[0]),!0).text,e.latLabel=m.tickText(t,t.c2l(r[1]),!0).text,e}},{"../../plots/cartesian/axes":566}],983:[function(g,Q,X){var m=g("../../components/fx"),v=g("../../constants/numerical").BADNUM,k=g("../scatter/get_trace_color"),x=g("../../lib").fillText,e=g("./attributes");Q.exports=function(t,r,l){var n=t.cd,d=n[0].trace,u=t.xa,o=t.ya,h=t.subplot,s=h.projection.isLonLatOverEdges,a=h.project;if(m.getClosest(n,function(b){var _=b.lonlat;if(_[0]===v||s(_))return 1/0;var T=a(_),L=a([r,l]),A=Math.abs(T[0]-L[0]),I=Math.abs(T[1]-L[1]),P=Math.max(3,b.mrc||0);return Math.max(Math.sqrt(A*A+I*I)-P,1-3/P)},t),t.index!==!1){var p=n[t.index],c=p.lonlat,i=[u.c2p(c),o.c2p(c)],y=p.mrc||1;t.x0=i[0]-y,t.x1=i[0]+y,t.y0=i[1]-y,t.y1=i[1]+y,t.loc=p.loc,t.lon=c[0],t.lat=c[1];var f={};f[d.geo]={_subplot:h};var w=d._module.formatLabels(p,d,f);return t.lonLabel=w.lonLabel,t.latLabel=w.latLabel,t.color=k(d,p),t.extraText=function(b,_,T,L){if(b.hovertemplate)return;var A=_.hi||b.hoverinfo,I=A==="all"?e.hoverinfo.flags:A.split("+"),P=I.indexOf("location")!==-1&&Array.isArray(b.locations),S=I.indexOf("lon")!==-1,E=I.indexOf("lat")!==-1,z=I.indexOf("text")!==-1,D=[];function U(H){return H+"\xB0"}return P?D.push(_.loc):S&&E?D.push("("+U(T.latLabel)+", "+U(T.lonLabel)+")"):S?D.push(L.lon+U(T.lonLabel)):E&&D.push(L.lat+U(T.latLabel)),z&&x(_,b,D),D.join("<br>")}(d,p,t,n[0].t.labels),t.hovertemplate=d.hovertemplate,[t]}}},{"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../scatter/get_trace_color":946,"./attributes":978}],984:[function(g,Q,X){Q.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),colorbar:g("../scatter/marker_colorbar"),formatLabels:g("./format_labels"),calc:g("./calc"),calcGeoJSON:g("./plot").calcGeoJSON,plot:g("./plot").plot,style:g("./style"),styleOnSelect:g("../scatter/style").styleOnSelect,hoverPoints:g("./hover"),eventData:g("./event_data"),selectPoints:g("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:g("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":598,"../scatter/marker_colorbar":954,"../scatter/style":960,"./attributes":978,"./calc":979,"./defaults":980,"./event_data":981,"./format_labels":982,"./hover":983,"./plot":985,"./select":986,"./style":987}],985:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../lib"),k=g("../../lib/topojson_utils").getTopojsonFeatures,x=g("../../lib/geojson_utils"),e=g("../../lib/geo_location_utils"),t=g("../../plots/cartesian/autorange").findExtremes,r=g("../../constants/numerical").BADNUM,l=g("../scatter/calc").calcMarkerSize,n=g("../scatter/subtypes"),d=g("./style");Q.exports={calcGeoJSON:function(u,o){var h,s,a=u[0].trace,p=o[a.geo],c=p._subplot,i=a._length;if(Array.isArray(a.locations)){var y=a.locationmode,f=y==="geojson-id"?e.extractTraceFeature(u):k(a,c.topojson);for(h=0;h<i;h++){s=u[h];var w=y==="geojson-id"?s.fOut:e.locationToFeature(y,s.loc,f);s.lonlat=w?w.properties.ct:[r,r]}}var b,_,T={padded:!0};if(p.fitbounds==="geojson"&&a.locationmode==="geojson-id"){var L=e.computeBbox(e.getTraceGeojson(a));b=[L[0],L[2]],_=[L[1],L[3]]}else{for(b=new Array(i),_=new Array(i),h=0;h<i;h++)s=u[h],b[h]=s.lonlat[0],_[h]=s.lonlat[1];T.ppad=l(a,i)}a._extremes.lon=t(p.lonaxis._ax,b,T),a._extremes.lat=t(p.lataxis._ax,_,T)},plot:function(u,o,h){var s=o.layers.frontplot.select(".scatterlayer"),a=v.makeTraceGroups(s,h,"trace scattergeo");function p(c,i){c.lonlat[0]===r&&m.select(i).remove()}a.selectAll("*").remove(),a.each(function(c){var i=m.select(this),y=c[0].trace;if(n.hasLines(y)||y.fill!=="none"){var f=x.calcTraceToLineCoords(c),w=y.fill!=="none"?x.makePolygon(f):x.makeLine(f);i.selectAll("path.js-line").data([{geojson:w,trace:y}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}n.hasMarkers(y)&&i.selectAll("path.point").data(v.identity).enter().append("path").classed("point",!0).each(function(b){p(b,this)}),n.hasText(y)&&i.selectAll("g").data(v.identity).enter().append("g").append("text").each(function(b){p(b,this)}),d(u,c)})}}},{"../../constants/numerical":491,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/geojson_utils":509,"../../lib/topojson_utils":544,"../../plots/cartesian/autorange":565,"../scatter/calc":937,"../scatter/subtypes":961,"./style":987,"@plotly/d3":58}],986:[function(g,Q,X){var m=g("../scatter/subtypes"),v=g("../../constants/numerical").BADNUM;Q.exports=function(k,x){var e,t,r,l,n,d=k.cd,u=k.xaxis,o=k.yaxis,h=[],s=d[0].trace;if(!m.hasMarkers(s)&&!m.hasText(s))return[];if(x===!1)for(n=0;n<d.length;n++)d[n].selected=0;else for(n=0;n<d.length;n++)(t=(e=d[n]).lonlat)[0]!==v&&(r=u.c2p(t),l=o.c2p(t),x.contains([r,l],null,n,k)?(h.push({pointNumber:n,lon:t[0],lat:t[1]}),e.selected=1):e.selected=0);return h}},{"../../constants/numerical":491,"../scatter/subtypes":961}],987:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../components/drawing"),k=g("../../components/color"),x=g("../scatter/style"),e=x.stylePoints,t=x.styleText;Q.exports=function(r,l){l&&function(n,d){var u=d[0].trace,o=d[0].node3;o.style("opacity",d[0].trace.opacity),e(o,u,n),t(o,u,n),o.selectAll("path.js-line").style("fill","none").each(function(h){var s=m.select(this),a=h.trace,p=a.line||{};s.call(k.stroke,p.color).call(v.dashLine,p.dash||"",p.width||0),a.fill!=="none"&&s.call(k.fill,a.fillcolor)})}(r,l)}},{"../../components/color":367,"../../components/drawing":389,"../scatter/style":960,"@plotly/d3":58}],988:[function(g,Q,X){var m=g("../../plots/attributes"),v=g("../scatter/attributes"),k=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=g("../../components/colorscale/attributes"),e=g("../../lib/sort_object_keys"),t=g("../../lib/extend").extendFlat,r=g("../../plot_api/edit_types").overrideAll,l=g("./constants").DASHES,n=v.line,d=v.marker,u=d.line,o=Q.exports=r({x:v.x,x0:v.x0,dx:v.dx,y:v.y,y0:v.y0,dy:v.dy,xperiod:v.xperiod,yperiod:v.yperiod,xperiod0:v.xperiod0,yperiod0:v.yperiod0,xperiodalignment:v.xperiodalignment,yperiodalignment:v.yperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),text:v.text,hovertext:v.hovertext,textposition:v.textposition,textfont:v.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:n.color,width:n.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:e(l),dflt:"solid"}},marker:t({},x("marker"),{symbol:d.symbol,angle:d.angle,size:d.size,sizeref:d.sizeref,sizemin:d.sizemin,sizemode:d.sizemode,opacity:d.opacity,colorbar:d.colorbar,line:t({},x("marker.line"),{width:u.width})}),connectgaps:v.connectgaps,fill:t({},v.fill,{dflt:"none"}),fillcolor:v.fillcolor,selected:{marker:v.selected.marker,textfont:v.selected.textfont},unselected:{marker:v.unselected.marker,textfont:v.unselected.textfont},opacity:m.opacity},"calc","nested");o.x.editType=o.y.editType=o.x0.editType=o.y0.editType="calc+clearAxisTypes",o.hovertemplate=v.hovertemplate,o.texttemplate=v.texttemplate},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../scatter/attributes":936,"./constants":991}],989:[function(g,Q,X){var m=g("./hover");Q.exports={moduleType:"trace",name:"scattergl",basePlotModule:g("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:g("./attributes"),supplyDefaults:g("./defaults"),crossTraceDefaults:g("../scatter/cross_trace_defaults"),colorbar:g("../scatter/marker_colorbar"),formatLabels:g("./format_labels"),calc:g("./calc"),hoverPoints:m.hoverPoints,selectPoints:g("./select"),meta:{}}},{"../../plots/cartesian":578,"../scatter/cross_trace_defaults":942,"../scatter/marker_colorbar":954,"./attributes":988,"./calc":990,"./defaults":993,"./format_labels":995,"./hover":997,"./select":1001}],990:[function(g,Q,X){var m=g("@plotly/point-cluster"),v=g("../../lib"),k=g("../../plots/cartesian/axis_ids"),x=g("../../plots/cartesian/autorange").findExtremes,e=g("../../plots/cartesian/align_period"),t=g("../scatter/calc"),r=t.calcMarkerSize,l=t.calcAxisExpansion,n=t.setFirstScatter,d=g("../scatter/colorscale_calc"),u=g("./convert"),o=g("./scene_update"),h=g("../../constants/numerical").BADNUM,s=g("./constants").TOO_MANY_POINTS;function a(p,c,i){var y=p._extremes[c._id],f=x(c,i._bnds,{padded:!0});y.min=y.min.concat(f.min),y.max=y.max.concat(f.max)}Q.exports=function(p,c){var i,y=p._fullLayout,f=c._xA=k.getFromId(p,c.xaxis,"x"),w=c._yA=k.getFromId(p,c.yaxis,"y"),b=y._plots[c.xaxis+c.yaxis],_=c._length,T=_>=s,L=2*_,A={},I=f.makeCalcdata(c,"x"),P=w.makeCalcdata(c,"y"),S=e(c,f,"x",I),E=e(c,w,"y",P),z=S.vals,D=E.vals;c._x=z,c._y=D,c.xperiodalignment&&(c._origX=I,c._xStarts=S.starts,c._xEnds=S.ends),c.yperiodalignment&&(c._origY=P,c._yStarts=E.starts,c._yEnds=E.ends);var U=new Array(L),H=new Array(_);for(i=0;i<_;i++)U[2*i]=z[i]===h?NaN:z[i],U[2*i+1]=D[i]===h?NaN:D[i],H[i]=i;if(f.type==="log")for(i=0;i<L;i+=2)U[i]=f.c2l(U[i]);if(w.type==="log")for(i=1;i<L;i+=2)U[i]=w.c2l(U[i]);T&&f.type!=="log"&&w.type!=="log"?A.tree=m(U):A.ids=H,d(p,c);var Y,J=function(Z,re,V,B,j,ee){var N=u.style(Z,V);if(N.marker&&(N.marker.positions=B),N.line&&B.length>1&&v.extendFlat(N.line,u.linePositions(Z,V,B)),N.errorX||N.errorY){var $=u.errorBarPositions(Z,V,B,j,ee);N.errorX&&v.extendFlat(N.errorX,$.x),N.errorY&&v.extendFlat(N.errorY,$.y)}return N.text&&(v.extendFlat(N.text,{positions:B},u.textPosition(Z,V,N.text,N.marker)),v.extendFlat(N.textSel,{positions:B},u.textPosition(Z,V,N.text,N.markerSel)),v.extendFlat(N.textUnsel,{positions:B},u.textPosition(Z,V,N.text,N.markerUnsel))),N}(p,0,c,U,z,D),W=o(p,b);return n(y,c),T?J.marker&&(Y=J.marker.sizeAvg||Math.max(J.marker.size,3)):Y=r(c,_),l(p,c,f,w,z,D,Y),J.errorX&&a(c,f,J.errorX),J.errorY&&a(c,w,J.errorY),J.fill&&!W.fill2d&&(W.fill2d=!0),J.marker&&!W.scatter2d&&(W.scatter2d=!0),J.line&&!W.line2d&&(W.line2d=!0),!J.errorX&&!J.errorY||W.error2d||(W.error2d=!0),J.text&&!W.glText&&(W.glText=!0),J.marker&&(J.marker.snap=_),W.lineOptions.push(J.line),W.errorXOptions.push(J.errorX),W.errorYOptions.push(J.errorY),W.fillOptions.push(J.fill),W.markerOptions.push(J.marker),W.markerSelectedOptions.push(J.markerSel),W.markerUnselectedOptions.push(J.markerUnsel),W.textOptions.push(J.text),W.textSelectedOptions.push(J.textSel),W.textUnselectedOptions.push(J.textUnsel),W.selectBatch.push([]),W.unselectBatch.push([]),A._scene=W,A.index=W.count,A.x=z,A.y=D,A.positions=U,W.count++,[{x:!1,y:!1,t:A,trace:c}]}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/autorange":565,"../../plots/cartesian/axis_ids":570,"../scatter/calc":937,"../scatter/colorscale_calc":939,"./constants":991,"./convert":992,"./scene_update":1e3,"@plotly/point-cluster":59}],991:[function(g,Q,X){Q.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],992:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("svg-path-sdf"),k=g("color-normalize"),x=g("../../registry"),e=g("../../lib"),t=g("../../components/drawing"),r=g("../../plots/cartesian/axis_ids"),l=g("../../lib/gl_format_color").formatColor,n=g("../scatter/subtypes"),d=g("../scatter/make_bubble_size_func"),u=g("./helpers"),o=g("./constants"),h=g("../../constants/interactions").DESELECTDIM,s={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},a=g("../../components/fx/helpers").appendArrayPointValue;function p(I,P){var S,E=I._fullLayout,z=P._length,D=P.textfont,U=P.textposition,H=Array.isArray(U)?U:[U],Y=D.color,J=D.size,W=D.family,Z={},re=I._context.plotGlPixelRatio,V=P.texttemplate;if(V){Z.text=[];var B=E._d3locale,j=Array.isArray(V),ee=j?Math.min(V.length,z):z,N=j?function(ve){return V[ve]}:function(){return V};for(S=0;S<ee;S++){var $={i:S},K=P._module.formatLabels($,P,E),te={};a(te,P,S);var ie=P._meta||{};Z.text.push(e.texttemplateString(N(S),K,B,te,$,ie))}}else Array.isArray(P.text)&&P.text.length<z?Z.text=P.text.slice():Z.text=P.text;if(Array.isArray(Z.text))for(S=Z.text.length;S<z;S++)Z.text[S]="";for(Z.opacity=P.opacity,Z.font={},Z.align=[],Z.baseline=[],S=0;S<H.length;S++){var le=H[S].split(/\s+/);switch(le[1]){case"left":Z.align.push("right");break;case"right":Z.align.push("left");break;default:Z.align.push(le[1])}switch(le[0]){case"top":Z.baseline.push("bottom");break;case"bottom":Z.baseline.push("top");break;default:Z.baseline.push(le[0])}}if(Array.isArray(Y))for(Z.color=new Array(z),S=0;S<z;S++)Z.color[S]=Y[S];else Z.color=Y;if(e.isArrayOrTypedArray(J)||Array.isArray(W))for(Z.font=new Array(z),S=0;S<z;S++){var se=Z.font[S]={};se.size=(e.isTypedArray(J)?J[S]:Array.isArray(J)?m(J[S])?J[S]:0:J)*re,se.family=Array.isArray(W)?W[S]:W}else Z.font={size:J*re,family:W};return Z}function c(I,P){var S,E,z=P._length,D=P.marker,U={},H=e.isArrayOrTypedArray(D.symbol),Y=e.isArrayOrTypedArray(D.angle),J=e.isArrayOrTypedArray(D.color),W=e.isArrayOrTypedArray(D.line.color),Z=e.isArrayOrTypedArray(D.opacity),re=e.isArrayOrTypedArray(D.size),V=e.isArrayOrTypedArray(D.line.width);if(H||(E=u.isOpenSymbol(D.symbol)),H||J||W||Z||Y){U.symbols=new Array(z),U.angles=new Array(z),U.colors=new Array(z),U.borderColors=new Array(z);var B=D.symbol,j=D.angle,ee=l(D,D.opacity,z),N=l(D.line,D.opacity,z);if(!Array.isArray(N[0])){var $=N;for(N=Array(z),S=0;S<z;S++)N[S]=$}if(!Array.isArray(ee[0])){var K=ee;for(ee=Array(z),S=0;S<z;S++)ee[S]=K}if(!Array.isArray(B)){var te=B;for(B=Array(z),S=0;S<z;S++)B[S]=te}if(!Array.isArray(j)){var ie=j;for(j=Array(z),S=0;S<z;S++)j[S]=ie}for(U.symbols=B,U.angles=j,U.colors=ee,U.borderColors=N,S=0;S<z;S++)H&&(E=u.isOpenSymbol(D.symbol[S])),E&&(N[S]=ee[S].slice(),ee[S]=ee[S].slice(),ee[S][3]=0);for(U.opacity=P.opacity,U.markers=new Array(z),S=0;S<z;S++)U.markers[S]=A({mx:U.symbols[S],ma:U.angles[S]},P)}else E?(U.color=k(D.color,"uint8"),U.color[3]=0,U.borderColor=k(D.color,"uint8")):(U.color=k(D.color,"uint8"),U.borderColor=k(D.line.color,"uint8")),U.opacity=P.opacity*D.opacity,U.marker=A({mx:D.symbol,ma:D.angle},P);var le,se=d(P,1);if(re||V){var ve,fe=U.sizes=new Array(z),ye=U.borderSizes=new Array(z),Ae=0;if(re){for(S=0;S<z;S++)fe[S]=se(D.size[S]),Ae+=fe[S];ve=Ae/z}else for(le=se(D.size),S=0;S<z;S++)fe[S]=le;if(V)for(S=0;S<z;S++)ye[S]=D.line.width[S];else for(le=D.line.width,S=0;S<z;S++)ye[S]=le;U.sizeAvg=ve}else U.size=se(D&&D.size||10),U.borderSizes=se(D.line.width);return U}function i(I,P,S){var E=P.marker,z={};return S&&(S.marker&&S.marker.symbol?z=c(0,e.extendFlat({},E,S.marker)):S.marker&&(S.marker.size&&(z.size=S.marker.size),S.marker.color&&(z.colors=S.marker.color),S.marker.opacity!==void 0&&(z.opacity=S.marker.opacity))),z}function y(I,P,S){var E={};if(!S)return E;if(S.textfont){var z={opacity:1,text:P.text,texttemplate:P.texttemplate,textposition:P.textposition,textfont:e.extendFlat({},P.textfont)};S.textfont&&e.extendFlat(z.textfont,S.textfont),E=p(I,z)}return E}function f(I,P,S){var E={capSize:2*P.width*S,lineWidth:P.thickness*S,color:P.color};return P.copy_ystyle&&(E=I.error_y),E}var w=o.SYMBOL_SDF_SIZE,b=o.SYMBOL_SIZE,_=o.SYMBOL_STROKE,T={},L=t.symbolFuncs[0](.05*b);function A(I,P){var S,E,z=I.mx;if(z==="circle")return null;var D=t.symbolNumber(z),U=t.symbolFuncs[D%100],H=!!t.symbolNoDot[D%100],Y=!!t.symbolNoFill[D%100],J=u.isDotSymbol(z);if(I.ma&&(z+="_"+I.ma),T[z])return T[z];var W=t.getMarkerAngle(I,P);return S=J&&!H?U(1.1*b,W)+L:U(b,W),E=v(S,{w,h:w,viewBox:[-b,-b,b,b],stroke:Y?_:-_}),T[z]=E,E||null}Q.exports={style:function(I,P){var S,E={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},z=I._context.plotGlPixelRatio;if(P.visible!==!0)return E;if(n.hasText(P)&&(E.text=p(I,P),E.textSel=y(I,P,P.selected),E.textUnsel=y(I,P,P.unselected)),n.hasMarkers(P)&&(E.marker=c(I,P),E.markerSel=i(I,P,P.selected),E.markerUnsel=i(I,P,P.unselected),!P.unselected&&e.isArrayOrTypedArray(P.marker.opacity))){var D=P.marker.opacity;for(E.markerUnsel.opacity=new Array(D.length),S=0;S<D.length;S++)E.markerUnsel.opacity[S]=h*D[S]}if(n.hasLines(P)){E.line={overlay:!0,thickness:P.line.width*z,color:P.line.color,opacity:P.opacity};var U=(o.DASHES[P.line.dash]||[1]).slice();for(S=0;S<U.length;++S)U[S]*=P.line.width*z;E.line.dashes=U}return P.error_x&&P.error_x.visible&&(E.errorX=f(P,P.error_x,z)),P.error_y&&P.error_y.visible&&(E.errorY=f(P,P.error_y,z)),P.fill&&P.fill!=="none"&&(E.fill={closed:!0,fill:P.fillcolor,thickness:0}),E},markerStyle:c,markerSelection:i,linePositions:function(I,P,S){var E,z,D=S.length,U=D/2;if(n.hasLines(P)&&U)if(P.line.shape==="hv"){for(E=[],z=0;z<U-1;z++)isNaN(S[2*z])||isNaN(S[2*z+1])?E.push(NaN,NaN,NaN,NaN):(E.push(S[2*z],S[2*z+1]),isNaN(S[2*z+2])||isNaN(S[2*z+3])?E.push(NaN,NaN):E.push(S[2*z+2],S[2*z+1]));E.push(S[D-2],S[D-1])}else if(P.line.shape==="hvh"){for(E=[],z=0;z<U-1;z++)if(isNaN(S[2*z])||isNaN(S[2*z+1])||isNaN(S[2*z+2])||isNaN(S[2*z+3]))isNaN(S[2*z])||isNaN(S[2*z+1])?E.push(NaN,NaN):E.push(S[2*z],S[2*z+1]),E.push(NaN,NaN);else{var H=(S[2*z]+S[2*z+2])/2;E.push(S[2*z],S[2*z+1],H,S[2*z+1],H,S[2*z+3])}E.push(S[D-2],S[D-1])}else if(P.line.shape==="vhv"){for(E=[],z=0;z<U-1;z++)if(isNaN(S[2*z])||isNaN(S[2*z+1])||isNaN(S[2*z+2])||isNaN(S[2*z+3]))isNaN(S[2*z])||isNaN(S[2*z+1])?E.push(NaN,NaN):E.push(S[2*z],S[2*z+1]),E.push(NaN,NaN);else{var Y=(S[2*z+1]+S[2*z+3])/2;E.push(S[2*z],S[2*z+1],S[2*z],Y,S[2*z+2],Y)}E.push(S[D-2],S[D-1])}else if(P.line.shape==="vh"){for(E=[],z=0;z<U-1;z++)isNaN(S[2*z])||isNaN(S[2*z+1])?E.push(NaN,NaN,NaN,NaN):(E.push(S[2*z],S[2*z+1]),isNaN(S[2*z+2])||isNaN(S[2*z+3])?E.push(NaN,NaN):E.push(S[2*z],S[2*z+3]));E.push(S[D-2],S[D-1])}else E=S;var J=!1;for(z=0;z<E.length;z++)if(isNaN(E[z])){J=!0;break}var W=J||E.length>o.TOO_MANY_POINTS||n.hasMarkers(P)?"rect":"round";if(J&&P.connectgaps){var Z=E[0],re=E[1];for(z=0;z<E.length;z+=2)isNaN(E[z])||isNaN(E[z+1])?(E[z]=Z,E[z+1]=re):(Z=E[z],re=E[z+1])}return{join:W,positions:E}},errorBarPositions:function(I,P,S,E,z){var D=x.getComponentMethod("errorbars","makeComputeError"),U=r.getFromId(I,P.xaxis,"x"),H=r.getFromId(I,P.yaxis,"y"),Y=S.length/2,J={};function W(Z,re){var V=re._id.charAt(0),B=P["error_"+V];if(B&&B.visible&&(re.type==="linear"||re.type==="log")){for(var j=D(B),ee={x:0,y:1}[V],N={x:[0,1,2,3],y:[2,3,0,1]}[V],$=new Float64Array(4*Y),K=1/0,te=-1/0,ie=0,le=0;ie<Y;ie++,le+=4){var se=Z[ie];if(m(se)){var ve=S[2*ie+ee],fe=j(se,ie),ye=fe[0],Ae=fe[1];if(m(ye)&&m(Ae)){var pe=se-ye,ge=se+Ae;$[le+N[0]]=ve-re.c2l(pe),$[le+N[1]]=re.c2l(ge)-ve,$[le+N[2]]=0,$[le+N[3]]=0,K=Math.min(K,se-ye),te=Math.max(te,se+Ae)}}}J[V]={positions:S,errors:$,_bnds:[K,te]}}}return W(E,U),W(z,H),J},textPosition:function(I,P,S,E){var z,D=P._length,U={};if(n.hasMarkers(P)){var H=S.font,Y=S.align,J=S.baseline;for(U.offset=new Array(D),z=0;z<D;z++){var W=E.sizes?E.sizes[z]:E.size,Z=Array.isArray(H)?H[z].size:H.size,re=Array.isArray(Y)?Y.length>1?Y[z]:Y[0]:Y,V=Array.isArray(J)?J.length>1?J[z]:J[0]:J,B=s[re],j=s[V],ee=W?W/.8+1:0,N=-j*ee-.5*j;U.offset[z]=[B*ee/Z,N/Z]}}return U}}},{"../../components/drawing":389,"../../components/fx/helpers":403,"../../constants/interactions":490,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../scatter/make_bubble_size_func":953,"../scatter/subtypes":961,"./constants":991,"./helpers":996,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":311}],993:[function(g,Q,X){var m=g("../../lib"),v=g("../../registry"),k=g("./helpers"),x=g("./attributes"),e=g("../scatter/constants"),t=g("../scatter/subtypes"),r=g("../scatter/xy_defaults"),l=g("../scatter/period_defaults"),n=g("../scatter/marker_defaults"),d=g("../scatter/line_defaults"),u=g("../scatter/fillcolor_defaults"),o=g("../scatter/text_defaults");Q.exports=function(h,s,a,p){function c(L,A){return m.coerce(h,s,x,L,A)}var i=!!h.marker&&k.isOpenSymbol(h.marker.symbol),y=t.isBubble(h),f=r(h,s,p,c);if(f){l(h,s,p,c),c("xhoverformat"),c("yhoverformat");var w=f<e.PTS_LINESONLY?"lines+markers":"lines";c("text"),c("hovertext"),c("hovertemplate"),c("mode",w),t.hasLines(s)&&(c("connectgaps"),d(h,s,a,p,c),c("line.shape")),t.hasMarkers(s)&&(n(h,s,a,p,c,{noAngleRef:!0,noStandOff:!0}),c("marker.line.width",i||y?1:0)),t.hasText(s)&&(c("texttemplate"),o(h,s,p,c));var b=(s.line||{}).color,_=(s.marker||{}).color;c("fill"),s.fill!=="none"&&u(h,s,a,c);var T=v.getComponentMethod("errorbars","supplyDefaults");T(h,s,b||_||a,{axis:"y"}),T(h,s,b||_||a,{axis:"x",inherit:"y"}),m.coerceSelectionMarkerOpacity(s,c)}else s.visible=!1}},{"../../lib":515,"../../registry":647,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/period_defaults":956,"../scatter/subtypes":961,"../scatter/text_defaults":962,"../scatter/xy_defaults":963,"./attributes":988,"./helpers":996}],994:[function(g,Q,X){var m=g("../../lib"),v=g("../../components/color"),k=g("../../constants/interactions").DESELECTDIM;Q.exports={styleTextSelection:function(x){var e,t,r=x[0],l=r.trace,n=r.t,d=n._scene,u=n.index,o=d.selectBatch[u],h=d.unselectBatch[u],s=d.textOptions[u],a=d.textSelectedOptions[u]||{},p=d.textUnselectedOptions[u]||{},c=m.extendFlat({},s);if(o.length||h.length){var i=a.color,y=p.color,f=s.color,w=Array.isArray(f);for(c.color=new Array(l._length),e=0;e<o.length;e++)t=o[e],c.color[t]=i||(w?f[t]:f);for(e=0;e<h.length;e++){t=h[e];var b=w?f[t]:f;c.color[t]=y||(i?b:v.addOpacity(b,k))}}d.glText[u].update(c)}}},{"../../components/color":367,"../../constants/interactions":490,"../../lib":515}],995:[function(g,Q,X){var m=g("../scatter/format_labels");Q.exports=function(v,k,x){var e=v.i;return"x"in v||(v.x=k._x[e]),"y"in v||(v.y=k._y[e]),m(v,k,x)}},{"../scatter/format_labels":945}],996:[function(g,Q,X){var m=g("./constants");X.isOpenSymbol=function(v){return typeof v=="string"?m.OPEN_RE.test(v):v%200>100},X.isDotSymbol=function(v){return typeof v=="string"?m.DOT_RE.test(v):v>200}},{"./constants":991}],997:[function(g,Q,X){var m=g("../../registry"),v=g("../../lib"),k=g("../scatter/get_trace_color");function x(e,t,r,l){var n=e.xa,d=e.ya,u=e.distance,o=e.dxy,h=e.index,s={pointNumber:h,x:t[h],y:r[h]};s.tx=Array.isArray(l.text)?l.text[h]:l.text,s.htx=Array.isArray(l.hovertext)?l.hovertext[h]:l.hovertext,s.data=Array.isArray(l.customdata)?l.customdata[h]:l.customdata,s.tp=Array.isArray(l.textposition)?l.textposition[h]:l.textposition;var a=l.textfont;a&&(s.ts=v.isArrayOrTypedArray(a.size)?a.size[h]:a.size,s.tc=Array.isArray(a.color)?a.color[h]:a.color,s.tf=Array.isArray(a.family)?a.family[h]:a.family);var p=l.marker;p&&(s.ms=v.isArrayOrTypedArray(p.size)?p.size[h]:p.size,s.mo=v.isArrayOrTypedArray(p.opacity)?p.opacity[h]:p.opacity,s.mx=v.isArrayOrTypedArray(p.symbol)?p.symbol[h]:p.symbol,s.ma=v.isArrayOrTypedArray(p.angle)?p.angle[h]:p.angle,s.mc=v.isArrayOrTypedArray(p.color)?p.color[h]:p.color);var c=p&&p.line;c&&(s.mlc=Array.isArray(c.color)?c.color[h]:c.color,s.mlw=v.isArrayOrTypedArray(c.width)?c.width[h]:c.width);var i=p&&p.gradient;i&&i.type!=="none"&&(s.mgt=Array.isArray(i.type)?i.type[h]:i.type,s.mgc=Array.isArray(i.color)?i.color[h]:i.color);var y=n.c2p(s.x,!0),f=d.c2p(s.y,!0),w=s.mrc||1,b=l.hoverlabel;b&&(s.hbg=Array.isArray(b.bgcolor)?b.bgcolor[h]:b.bgcolor,s.hbc=Array.isArray(b.bordercolor)?b.bordercolor[h]:b.bordercolor,s.hts=v.isArrayOrTypedArray(b.font.size)?b.font.size[h]:b.font.size,s.htc=Array.isArray(b.font.color)?b.font.color[h]:b.font.color,s.htf=Array.isArray(b.font.family)?b.font.family[h]:b.font.family,s.hnl=v.isArrayOrTypedArray(b.namelength)?b.namelength[h]:b.namelength);var _=l.hoverinfo;_&&(s.hi=Array.isArray(_)?_[h]:_);var T=l.hovertemplate;T&&(s.ht=Array.isArray(T)?T[h]:T);var L={};L[e.index]=s;var A=l._origX,I=l._origY,P=v.extendFlat({},e,{color:k(l,s),x0:y-w,x1:y+w,xLabelVal:A?A[h]:s.x,y0:f-w,y1:f+w,yLabelVal:I?I[h]:s.y,cd:L,distance:u,spikeDistance:o,hovertemplate:s.ht});return s.htx?P.text=s.htx:s.tx?P.text=s.tx:l.text&&(P.text=l.text),v.fillText(s,l,P),m.getComponentMethod("errorbars","hoverInfo")(s,l,P),P}Q.exports={hoverPoints:function(e,t,r,l){var n,d,u,o,h,s,a,p,c,i,y=e.cd,f=y[0].t,w=y[0].trace,b=e.xa,_=e.ya,T=f.x,L=f.y,A=b.c2p(t),I=_.c2p(r),P=e.distance;if(f.tree){var S=b.p2c(A-P),E=b.p2c(A+P),z=_.p2c(I-P),D=_.p2c(I+P);n=l==="x"?f.tree.range(Math.min(S,E),Math.min(_._rl[0],_._rl[1]),Math.max(S,E),Math.max(_._rl[0],_._rl[1])):f.tree.range(Math.min(S,E),Math.min(z,D),Math.max(S,E),Math.max(z,D))}else n=f.ids;var U=P;if(l==="x"){var H=!!w.xperiodalignment,Y=!!w.yperiodalignment;for(s=0;s<n.length;s++){if(o=T[d=n[s]],a=Math.abs(b.c2p(o)-A),H){var J=b.c2p(w._xStarts[d]),W=b.c2p(w._xEnds[d]);a=A>=Math.min(J,W)&&A<=Math.max(J,W)?0:1/0}if(a<U){if(U=a,h=L[d],p=_.c2p(h)-I,Y){var Z=_.c2p(w._yStarts[d]),re=_.c2p(w._yEnds[d]);p=I>=Math.min(Z,re)&&I<=Math.max(Z,re)?0:1/0}i=Math.sqrt(a*a+p*p),u=n[s]}}}else for(s=n.length-1;s>-1;s--)o=T[d=n[s]],h=L[d],a=b.c2p(o)-A,p=_.c2p(h)-I,(c=Math.sqrt(a*a+p*p))<U&&(U=i=c,u=d);return e.index=u,e.distance=U,e.dxy=i,u===void 0?[e]:[x(e,T,L,w)]},calcHover:x}},{"../../lib":515,"../../registry":647,"../scatter/get_trace_color":946}],998:[function(g,Q,X){arguments[4][905][0].apply(X,arguments)},{"./base_index":989,"./plot":999,dup:905}],999:[function(g,Q,X){var m=g("regl-scatter2d"),v=g("regl-line2d"),k=g("regl-error2d"),x=g("gl-text"),e=g("../../lib"),t=g("../../components/dragelement/helpers").selectMode,r=g("../../lib/prepare_regl"),l=g("../scatter/subtypes"),n=g("../scatter/link_traces"),d=g("./edit_style").styleTextSelection,u={};function o(h,s,a,p){var c=h._size,i=h.width*p,y=h.height*p,f=c.l*p,w=c.b*p,b=c.r*p,_=c.t*p,T=c.w*p,L=c.h*p;return[f+s.domain[0]*T,w+a.domain[0]*L,i-b-(1-s.domain[1])*T,y-_-(1-a.domain[1])*L]}(Q.exports=function(h,s,a){if(a.length){var p,c,i=h._fullLayout,y=s._scene,f=s.xaxis,w=s.yaxis;if(y)if(r(h,["ANGLE_instanced_arrays","OES_element_index_uint"],u)){var b=y.count,_=i._glcanvas.data()[0].regl;if(n(h,s,a),y.dirty){if(y.error2d===!0&&(y.error2d=k(_)),y.line2d===!0&&(y.line2d=v(_)),y.scatter2d===!0&&(y.scatter2d=m(_)),y.fill2d===!0&&(y.fill2d=v(_)),y.glText===!0)for(y.glText=new Array(b),p=0;p<b;p++)y.glText[p]=new x(_);if(y.glText){if(b>y.glText.length){var T=b-y.glText.length;for(p=0;p<T;p++)y.glText.push(new x(_))}else if(b<y.glText.length){var L=y.glText.length-b;y.glText.splice(b,L).forEach(function($){$.destroy()})}for(p=0;p<b;p++)y.glText[p].update(y.textOptions[p])}if(y.line2d&&(y.line2d.update(y.lineOptions),y.lineOptions=y.lineOptions.map(function($){if($&&$.positions){for(var K=$.positions,te=0;te<K.length&&(isNaN(K[te])||isNaN(K[te+1]));)te+=2;for(var ie=K.length-2;ie>te&&(isNaN(K[ie])||isNaN(K[ie+1]));)ie-=2;$.positions=K.slice(te,ie+2)}return $}),y.line2d.update(y.lineOptions)),y.error2d){var A=(y.errorXOptions||[]).concat(y.errorYOptions||[]);y.error2d.update(A)}y.scatter2d&&y.scatter2d.update(y.markerOptions),y.fillOrder=e.repeat(null,b),y.fill2d&&(y.fillOptions=y.fillOptions.map(function($,K){var te=a[K];if($&&te&&te[0]&&te[0].trace){var ie,le,se=te[0],ve=se.trace,fe=se.t,ye=y.lineOptions[K],Ae=[];ve._ownfill&&Ae.push(K),ve._nexttrace&&Ae.push(K+1),Ae.length&&(y.fillOrder[K]=Ae);var pe,ge,we=[],oe=ye&&ye.positions||fe.positions;if(ve.fill==="tozeroy"){for(pe=0;pe<oe.length&&isNaN(oe[pe+1]);)pe+=2;for(ge=oe.length-2;ge>pe&&isNaN(oe[ge+1]);)ge-=2;oe[pe+1]!==0&&(we=[oe[pe],0]),we=we.concat(oe.slice(pe,ge+2)),oe[ge+1]!==0&&(we=we.concat([oe[ge],0]))}else if(ve.fill==="tozerox"){for(pe=0;pe<oe.length&&isNaN(oe[pe]);)pe+=2;for(ge=oe.length-2;ge>pe&&isNaN(oe[ge]);)ge-=2;oe[pe]!==0&&(we=[0,oe[pe+1]]),we=we.concat(oe.slice(pe,ge+2)),oe[ge]!==0&&(we=we.concat([0,oe[ge+1]]))}else if(ve.fill==="toself"||ve.fill==="tonext"){for(we=[],ie=0,$.splitNull=!0,le=0;le<oe.length;le+=2)(isNaN(oe[le])||isNaN(oe[le+1]))&&((we=we.concat(oe.slice(ie,le))).push(oe[ie],oe[ie+1]),we.push(null,null),ie=le+2);we=we.concat(oe.slice(ie)),ie&&we.push(oe[ie],oe[ie+1])}else{var de=ve._nexttrace;if(de){var Te=y.lineOptions[K+1];if(Te){var Ee=Te.positions;if(ve.fill==="tonexty"){for(we=oe.slice(),K=Math.floor(Ee.length/2);K--;){var Me=Ee[2*K],De=Ee[2*K+1];isNaN(Me)||isNaN(De)||we.push(Me,De)}$.fill=de.fillcolor}}}}if(ve._prevtrace&&ve._prevtrace.fill==="tonext"){var Ie=y.lineOptions[K-1].positions,Oe=we.length/2,Ze=[ie=Oe];for(le=0;le<Ie.length;le+=2)(isNaN(Ie[le])||isNaN(Ie[le+1]))&&(Ze.push(le/2+Oe+1),ie=le+2);we=we.concat(Ie),$.hole=Ze}return $.fillmode=ve.fill,$.opacity=ve.opacity,$.positions=we,$}}),y.fill2d.update(y.fillOptions))}var I=i.dragmode,P=t(I),S=i.clickmode.indexOf("select")>-1;for(p=0;p<b;p++){var E=a[p][0],z=E.trace,D=E.t,U=D.index,H=z._length,Y=D.x,J=D.y;if(z.selectedpoints||P||S){if(P||(P=!0),z.selectedpoints){var W=y.selectBatch[U]=e.selIndices2selPoints(z),Z={};for(c=0;c<W.length;c++)Z[W[c]]=1;var re=[];for(c=0;c<H;c++)Z[c]||re.push(c);y.unselectBatch[U]=re}var V=D.xpx=new Array(H),B=D.ypx=new Array(H);for(c=0;c<H;c++)V[c]=f.c2p(Y[c]),B[c]=w.c2p(J[c])}else D.xpx=D.ypx=null}if(P){if(y.select2d||(y.select2d=m(i._glcanvas.data()[1].regl)),y.scatter2d){var j=new Array(b);for(p=0;p<b;p++)j[p]=y.selectBatch[p].length||y.unselectBatch[p].length?y.markerUnselectedOptions[p]:{};y.scatter2d.update(j)}y.select2d&&(y.select2d.update(y.markerOptions),y.select2d.update(y.markerSelectedOptions)),y.glText&&a.forEach(function($){var K=(($||[])[0]||{}).trace||{};l.hasText(K)&&d($)})}else y.scatter2d&&y.scatter2d.update(y.markerOptions);var ee={viewport:o(i,f,w,h._context.plotGlPixelRatio),range:[(f._rl||f.range)[0],(w._rl||w.range)[0],(f._rl||f.range)[1],(w._rl||w.range)[1]]},N=e.repeat(ee,y.count);y.fill2d&&y.fill2d.update(N),y.line2d&&y.line2d.update(N),y.error2d&&y.error2d.update(N.concat(N)),y.scatter2d&&y.scatter2d.update(N),y.select2d&&y.select2d.update(N),y.glText&&y.glText.forEach(function($){$.update(ee)})}else y.init()}}).reglPrecompiled=u},{"../../components/dragelement/helpers":385,"../../lib":515,"../../lib/prepare_regl":528,"../scatter/link_traces":952,"../scatter/subtypes":961,"./edit_style":994,"gl-text":225,"regl-error2d":280,"regl-line2d":281,"regl-scatter2d":282}],1e3:[function(g,Q,X){var m=g("../../lib");Q.exports=function(v,k){var x=k._scene,e={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},t={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return k._scene||((x=k._scene={}).init=function(){m.extendFlat(x,t,e)},x.init(),x.update=function(r){var l=m.repeat(r,x.count);if(x.fill2d&&x.fill2d.update(l),x.scatter2d&&x.scatter2d.update(l),x.line2d&&x.line2d.update(l),x.error2d&&x.error2d.update(l.concat(l)),x.select2d&&x.select2d.update(l),x.glText)for(var n=0;n<x.count;n++)x.glText[n].update(r)},x.draw=function(){for(var r=x.count,l=x.fill2d,n=x.error2d,d=x.line2d,u=x.scatter2d,o=x.glText,h=x.select2d,s=x.selectBatch,a=x.unselectBatch,p=0;p<r;p++){if(l&&x.fillOrder[p]&&l.draw(x.fillOrder[p]),d&&x.lineOptions[p]&&d.draw(p),n&&(x.errorXOptions[p]&&n.draw(p),x.errorYOptions[p]&&n.draw(p+r)),u&&x.markerOptions[p])if(a[p].length){var c=m.repeat([],x.count);c[p]=a[p],u.draw(c)}else s[p].length||u.draw(p);o[p]&&x.textOptions[p]&&o[p].render()}h&&h.draw(s),x.dirty=!1},x.destroy=function(){x.fill2d&&x.fill2d.destroy&&x.fill2d.destroy(),x.scatter2d&&x.scatter2d.destroy&&x.scatter2d.destroy(),x.error2d&&x.error2d.destroy&&x.error2d.destroy(),x.line2d&&x.line2d.destroy&&x.line2d.destroy(),x.select2d&&x.select2d.destroy&&x.select2d.destroy(),x.glText&&x.glText.forEach(function(r){r.destroy&&r.destroy()}),x.lineOptions=null,x.fillOptions=null,x.markerOptions=null,x.markerSelectedOptions=null,x.markerUnselectedOptions=null,x.errorXOptions=null,x.errorYOptions=null,x.textOptions=null,x.textSelectedOptions=null,x.textUnselectedOptions=null,x.selectBatch=null,x.unselectBatch=null,k._scene=null}),x.dirty||m.extendFlat(x,e),x}},{"../../lib":515}],1001:[function(g,Q,X){var m=g("../scatter/subtypes"),v=g("./edit_style").styleTextSelection;Q.exports=function(k,x){var e=k.cd,t=k.xaxis,r=k.yaxis,l=[],n=e[0].trace,d=e[0].t,u=n._length,o=d.x,h=d.y,s=d._scene,a=d.index;if(!s)return l;var p=m.hasText(n),c=m.hasMarkers(n),i=!c&&!p;if(n.visible!==!0||i)return l;var y=[],f=[];if(x!==!1&&!x.degenerate)for(var w=0;w<u;w++)x.contains([d.xpx[w],d.ypx[w]],!1,w,k)?(y.push(w),l.push({pointNumber:w,x:t.c2d(o[w]),y:r.c2d(h[w])})):f.push(w);if(c){var b=s.scatter2d;if(y.length||f.length){if(!s.selectBatch[a].length&&!s.unselectBatch[a].length){var _=new Array(s.count);_[a]=s.markerUnselectedOptions[a],b.update.apply(b,_)}}else{var T=new Array(s.count);T[a]=s.markerOptions[a],b.update.apply(b,T)}}return s.selectBatch[a]=y,s.unselectBatch[a]=f,p&&v(e),l}},{"../scatter/subtypes":961,"./edit_style":994}],1002:[function(g,Q,X){var m=g("../../plots/template_attributes").hovertemplateAttrs,v=g("../../plots/template_attributes").texttemplateAttrs,k=g("../scattergeo/attributes"),x=g("../scatter/attributes"),e=g("../../plots/mapbox/layout_attributes"),t=g("../../plots/attributes"),r=g("../../components/colorscale/attributes"),l=g("../../lib/extend").extendFlat,n=g("../../plot_api/edit_types").overrideAll,d=k.line,u=k.marker;Q.exports=n({lon:k.lon,lat:k.lat,mode:l({},x.mode,{dflt:"markers"}),text:l({},x.text,{}),texttemplate:v({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:l({},x.hovertext,{}),line:{color:d.color,width:d.width},connectgaps:x.connectgaps,marker:l({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:u.opacity,size:u.size,sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode},r("marker")),fill:k.fill,fillcolor:x.fillcolor,textfont:e.layers.symbol.textfont,textposition:e.layers.symbol.textposition,below:{valType:"string"},selected:{marker:x.selected.marker},unselected:{marker:x.unselected.marker},hoverinfo:l({},t.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:m()},"calc","nested")},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/mapbox/layout_attributes":624,"../../plots/template_attributes":642,"../scatter/attributes":936,"../scattergeo/attributes":978}],1003:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../../lib"),k=g("../../constants/numerical").BADNUM,x=g("../../lib/geojson_utils"),e=g("../../components/colorscale"),t=g("../../components/drawing"),r=g("../scatter/make_bubble_size_func"),l=g("../scatter/subtypes"),n=g("../../plots/mapbox/convert_text_opts"),d=g("../../components/fx/helpers").appendArrayPointValue,u=g("../../lib/svg_text_utils").NEWLINES,o=g("../../lib/svg_text_utils").BR_TAG_ALL;function h(){return{geojson:x.makeBlank(),layout:{visibility:"none"},paint:{}}}function s(c,i){return v.isArrayOrTypedArray(c)?i?function(y){return m(c[y])?+c[y]:0}:function(y){return c[y]}:c?function(){return c}:a}function a(){return""}function p(c){return c[0]===k}Q.exports=function(c,i){var y,f=i[0].trace,w=f.visible===!0&&f._length!==0,b=f.fill!=="none",_=l.hasLines(f),T=l.hasMarkers(f),L=l.hasText(f),A=T&&f.marker.symbol==="circle",I=T&&f.marker.symbol!=="circle",P=h(),S=h(),E=h(),z=h(),D={fill:P,line:S,circle:E,symbol:z};if(!w)return D;if((b||_)&&(y=x.calcTraceToLineCoords(i)),b&&(P.geojson=x.makePolygon(y),P.layout.visibility="visible",v.extendFlat(P.paint,{"fill-color":f.fillcolor})),_&&(S.geojson=x.makeLine(y),S.layout.visibility="visible",v.extendFlat(S.paint,{"line-width":f.line.width,"line-color":f.line.color,"line-opacity":f.opacity})),A){var U=function(J){var W,Z,re,V,B=J[0].trace,j=B.marker,ee=B.selectedpoints,N=v.isArrayOrTypedArray(j.color),$=v.isArrayOrTypedArray(j.size),K=v.isArrayOrTypedArray(j.opacity);function te(pe){return B.opacity*pe}N&&(Z=e.hasColorscale(B,"marker")?e.makeColorScaleFuncFromTrace(j):v.identity),$&&(re=r(B)),K&&(V=function(pe){return te(m(pe)?+v.constrain(pe,0,1):0)});var ie,le=[];for(W=0;W<J.length;W++){var se=J[W],ve=se.lonlat;if(!p(ve)){var fe={};Z&&(fe.mcc=se.mcc=Z(se.mc)),re&&(fe.mrc=se.mrc=re(se.ms)),V&&(fe.mo=V(se.mo)),ee&&(fe.selected=se.selected||0),le.push({type:"Feature",geometry:{type:"Point",coordinates:ve},properties:fe})}}if(ee)for(ie=t.makeSelectedPointStyleFns(B),W=0;W<le.length;W++){var ye=le[W].properties;ie.selectedOpacityFn&&(ye.mo=te(ie.selectedOpacityFn(ye))),ie.selectedColorFn&&(ye.mcc=ie.selectedColorFn(ye)),ie.selectedSizeFn&&(ye.mrc=ie.selectedSizeFn(ye))}return{geojson:{type:"FeatureCollection",features:le},mcc:N||ie&&ie.selectedColorFn?{type:"identity",property:"mcc"}:j.color,mrc:$||ie&&ie.selectedSizeFn?{type:"identity",property:"mrc"}:(Ae=j.size,Ae/2),mo:K||ie&&ie.selectedOpacityFn?{type:"identity",property:"mo"}:te(j.opacity)};var Ae}(i);E.geojson=U.geojson,E.layout.visibility="visible",v.extendFlat(E.paint,{"circle-color":U.mcc,"circle-radius":U.mrc,"circle-opacity":U.mo})}if((I||L)&&(z.geojson=function(J,W){for(var Z=W._fullLayout,re=J[0].trace,V=re.marker||{},B=V.symbol,j=V.angle,ee=B!=="circle"?s(B):a,N=j!=="auto"?s(j,!0):a,$=l.hasText(re)?s(re.text):a,K=[],te=0;te<J.length;te++){var ie=J[te];if(!p(ie.lonlat)){var le,se=re.texttemplate;if(se){var ve=Array.isArray(se)?se[te]||"":se,fe=re._module.formatLabels(ie,re,Z),ye={};d(ye,re,ie.i);var Ae=re._meta||{};le=v.texttemplateString(ve,fe,Z._d3locale,ye,ie,Ae)}else le=$(te);le&&(le=le.replace(u,"").replace(o,`
`)),K.push({type:"Feature",geometry:{type:"Point",coordinates:ie.lonlat},properties:{symbol:ee(te),angle:N(te),text:le}})}}return{type:"FeatureCollection",features:K}}(i,c),v.extendFlat(z.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),I&&(v.extendFlat(z.layout,{"icon-size":f.marker.size/10}),"angle"in f.marker&&f.marker.angle!=="auto"&&v.extendFlat(z.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),z.layout["icon-allow-overlap"]=f.marker.allowoverlap,v.extendFlat(z.paint,{"icon-opacity":f.opacity*f.marker.opacity,"icon-color":f.marker.color})),L)){var H=(f.marker||{}).size,Y=n(f.textposition,H);v.extendFlat(z.layout,{"text-size":f.textfont.size,"text-anchor":Y.anchor,"text-offset":Y.offset}),v.extendFlat(z.paint,{"text-color":f.textfont.color,"text-opacity":f.opacity})}return D}},{"../../components/colorscale":379,"../../components/drawing":389,"../../components/fx/helpers":403,"../../constants/numerical":491,"../../lib":515,"../../lib/geojson_utils":509,"../../lib/svg_text_utils":541,"../../plots/mapbox/convert_text_opts":621,"../scatter/make_bubble_size_func":953,"../scatter/subtypes":961,"fast-isnumeric":190}],1004:[function(g,Q,X){var m=g("../../lib"),v=g("../scatter/subtypes"),k=g("../scatter/marker_defaults"),x=g("../scatter/line_defaults"),e=g("../scatter/text_defaults"),t=g("../scatter/fillcolor_defaults"),r=g("./attributes");Q.exports=function(l,n,d,u){function o(s,a){return m.coerce(l,n,r,s,a)}if(function(s,a,p){var c=p("lon")||[],i=p("lat")||[],y=Math.min(c.length,i.length);return a._length=y,y}(0,n,o)){if(o("text"),o("texttemplate"),o("hovertext"),o("hovertemplate"),o("mode"),o("below"),v.hasLines(n)&&(x(l,n,d,u,o,{noDash:!0}),o("connectgaps")),v.hasMarkers(n)){k(l,n,d,u,o,{noLine:!0,noAngle:!0}),o("marker.allowoverlap"),o("marker.angle");var h=n.marker;h.symbol!=="circle"&&(m.isArrayOrTypedArray(h.size)&&(h.size=h.size[0]),m.isArrayOrTypedArray(h.color)&&(h.color=h.color[0]))}v.hasText(n)&&e(l,n,u,o,{noSelect:!0}),o("fill"),n.fill!=="none"&&t(l,n,d,o),m.coerceSelectionMarkerOpacity(n,o)}else n.visible=!1}},{"../../lib":515,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1002}],1005:[function(g,Q,X){Q.exports=function(m,v){return m.lon=v.lon,m.lat=v.lat,m}},{}],1006:[function(g,Q,X){var m=g("../../plots/cartesian/axes");Q.exports=function(v,k,x){var e={},t=x[k.subplot]._subplot.mockAxis,r=v.lonlat;return e.lonLabel=m.tickText(t,t.c2l(r[0]),!0).text,e.latLabel=m.tickText(t,t.c2l(r[1]),!0).text,e}},{"../../plots/cartesian/axes":566}],1007:[function(g,Q,X){var m=g("../../components/fx"),v=g("../../lib"),k=g("../scatter/get_trace_color"),x=v.fillText,e=g("../../constants/numerical").BADNUM;function t(r,l,n){if(!r.hovertemplate){var d=(l.hi||r.hoverinfo).split("+"),u=d.indexOf("all")!==-1,o=d.indexOf("lon")!==-1,h=d.indexOf("lat")!==-1,s=l.lonlat,a=[];return u||o&&h?a.push("("+p(s[1])+", "+p(s[0])+")"):o?a.push(n.lon+p(s[0])):h&&a.push(n.lat+p(s[1])),(u||d.indexOf("text")!==-1)&&x(l,r,a),a.join("<br>")}function p(c){return c+"\xB0"}}Q.exports={hoverPoints:function(r,l,n){var d=r.cd,u=d[0].trace,o=r.xa,h=r.ya,s=r.subplot,a=360*(l>=0?Math.floor((l+180)/360):Math.ceil((l-180)/360)),p=l-a;if(m.getClosest(d,function(L){var A=L.lonlat;if(A[0]===e)return 1/0;var I=v.modHalf(A[0],360),P=A[1],S=s.project([I,P]),E=S.x-o.c2p([p,P]),z=S.y-h.c2p([I,n]),D=Math.max(3,L.mrc||0);return Math.max(Math.sqrt(E*E+z*z)-D,1-3/D)},r),r.index!==!1){var c=d[r.index],i=c.lonlat,y=[v.modHalf(i[0],360)+a,i[1]],f=o.c2p(y),w=h.c2p(y),b=c.mrc||1;r.x0=f-b,r.x1=f+b,r.y0=w-b,r.y1=w+b;var _={};_[u.subplot]={_subplot:s};var T=u._module.formatLabels(c,u,_);return r.lonLabel=T.lonLabel,r.latLabel=T.latLabel,r.color=k(u,c),r.extraText=t(u,c,d[0].t.labels),r.hovertemplate=u.hovertemplate,[r]}},getExtraText:t}},{"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../scatter/get_trace_color":946}],1008:[function(g,Q,X){Q.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),colorbar:g("../scatter/marker_colorbar"),formatLabels:g("./format_labels"),calc:g("../scattergeo/calc"),plot:g("./plot"),hoverPoints:g("./hover").hoverPoints,eventData:g("./event_data"),selectPoints:g("./select"),styleOnSelect:function(m,v){v&&v[0].trace._glTrace.update(v)},moduleType:"trace",name:"scattermapbox",basePlotModule:g("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":622,"../scatter/marker_colorbar":954,"../scattergeo/calc":979,"./attributes":1002,"./defaults":1004,"./event_data":1005,"./format_labels":1006,"./hover":1007,"./plot":1009,"./select":1010}],1009:[function(g,Q,X){var m=g("./convert"),v=g("../../plots/mapbox/constants").traceLayerPrefix,k=["fill","line","circle","symbol"];function x(t,r){this.type="scattermapbox",this.subplot=t,this.uid=r,this.sourceIds={fill:"source-"+r+"-fill",line:"source-"+r+"-line",circle:"source-"+r+"-circle",symbol:"source-"+r+"-symbol"},this.layerIds={fill:v+r+"-fill",line:v+r+"-line",circle:v+r+"-circle",symbol:v+r+"-symbol"},this.below=null}var e=x.prototype;e.addSource=function(t,r){this.subplot.map.addSource(this.sourceIds[t],{type:"geojson",data:r.geojson})},e.setSourceData=function(t,r){this.subplot.map.getSource(this.sourceIds[t]).setData(r.geojson)},e.addLayer=function(t,r,l){this.subplot.addLayer({type:t,id:this.layerIds[t],source:this.sourceIds[t],layout:r.layout,paint:r.paint},l)},e.update=function(t){var r,l,n,d=this.subplot,u=d.map,o=m(d.gd,t),h=d.belowLookup["trace-"+this.uid];if(h!==this.below){for(r=k.length-1;r>=0;r--)l=k[r],u.removeLayer(this.layerIds[l]);for(r=0;r<k.length;r++)n=o[l=k[r]],this.addLayer(l,n,h);this.below=h}for(r=0;r<k.length;r++)n=o[l=k[r]],d.setOptions(this.layerIds[l],"setLayoutProperty",n.layout),n.layout.visibility==="visible"&&(this.setSourceData(l,n),d.setOptions(this.layerIds[l],"setPaintProperty",n.paint));t[0].trace._glTrace=this},e.dispose=function(){for(var t=this.subplot.map,r=k.length-1;r>=0;r--){var l=k[r];t.removeLayer(this.layerIds[l]),t.removeSource(this.sourceIds[l])}},Q.exports=function(t,r){for(var l=r[0].trace,n=new x(t,l.uid),d=m(t.gd,r),u=n.below=t.belowLookup["trace-"+l.uid],o=0;o<k.length;o++){var h=k[o],s=d[h];n.addSource(h,s),n.addLayer(h,s,u)}return r[0].trace._glTrace=n,n}},{"../../plots/mapbox/constants":620,"./convert":1003}],1010:[function(g,Q,X){var m=g("../../lib"),v=g("../scatter/subtypes"),k=g("../../constants/numerical").BADNUM;Q.exports=function(x,e){var t,r=x.cd,l=x.xaxis,n=x.yaxis,d=[],u=r[0].trace;if(!v.hasMarkers(u))return[];if(e===!1)for(t=0;t<r.length;t++)r[t].selected=0;else for(t=0;t<r.length;t++){var o=r[t],h=o.lonlat;if(h[0]!==k){var s=[m.modHalf(h[0],360),h[1]],a=[l.c2p(s),n.c2p(s)];e.contains(a,null,t,x)?(d.push({pointNumber:t,lon:h[0],lat:h[1]}),o.selected=1):o.selected=0}}return d}},{"../../constants/numerical":491,"../../lib":515,"../scatter/subtypes":961}],1011:[function(g,Q,X){var m=g("../../plots/template_attributes").hovertemplateAttrs,v=g("../../plots/template_attributes").texttemplateAttrs,k=g("../../lib/extend").extendFlat,x=g("../scatter/attributes"),e=g("../../plots/attributes"),t=x.line;Q.exports={mode:x.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:x.text,texttemplate:v({editType:"plot"},{keys:["r","theta","text"]}),hovertext:x.hovertext,line:{color:t.color,width:t.width,dash:t.dash,backoff:t.backoff,shape:k({},t.shape,{values:["linear","spline"]}),smoothing:t.smoothing,editType:"calc"},connectgaps:x.connectgaps,marker:x.marker,cliponaxis:k({},x.cliponaxis,{dflt:!1}),textposition:x.textposition,textfont:x.textfont,fill:k({},x.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:x.fillcolor,hoverinfo:k({},e.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:x.hoveron,hovertemplate:m(),selected:x.selected,unselected:x.unselected}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1012:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../../constants/numerical").BADNUM,k=g("../../plots/cartesian/axes"),x=g("../scatter/colorscale_calc"),e=g("../scatter/arrays_to_calcdata"),t=g("../scatter/calc_selection"),r=g("../scatter/calc").calcMarkerSize;Q.exports=function(l,n){for(var d=l._fullLayout,u=n.subplot,o=d[u].radialaxis,h=d[u].angularaxis,s=o.makeCalcdata(n,"r"),a=h.makeCalcdata(n,"theta"),p=n._length,c=new Array(p),i=0;i<p;i++){var y=s[i],f=a[i],w=c[i]={};m(y)&&m(f)?(w.r=y,w.theta=f):w.r=v}var b=r(n,p);return n._extremes.x=k.findExtremes(o,s,{ppad:b}),x(l,n),e(c,n),t(c,n),c}},{"../../constants/numerical":491,"../../plots/cartesian/axes":566,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1013:[function(g,Q,X){var m=g("../../lib"),v=g("../scatter/subtypes"),k=g("../scatter/marker_defaults"),x=g("../scatter/line_defaults"),e=g("../scatter/line_shape_defaults"),t=g("../scatter/text_defaults"),r=g("../scatter/fillcolor_defaults"),l=g("../scatter/constants").PTS_LINESONLY,n=g("./attributes");function d(u,o,h,s){var a,p=s("r"),c=s("theta");if(p)c?a=Math.min(p.length,c.length):(a=p.length,s("theta0"),s("dtheta"));else{if(!c)return 0;a=o.theta.length,s("r0"),s("dr")}return o._length=a,a}Q.exports={handleRThetaDefaults:d,supplyDefaults:function(u,o,h,s){function a(i,y){return m.coerce(u,o,n,i,y)}var p=d(u,o,s,a);if(p){a("thetaunit"),a("mode",p<l?"lines+markers":"lines"),a("text"),a("hovertext"),o.hoveron!=="fills"&&a("hovertemplate"),v.hasLines(o)&&(x(u,o,h,s,a,{backoff:!0}),e(u,o,a),a("connectgaps")),v.hasMarkers(o)&&k(u,o,h,s,a,{gradient:!0}),v.hasText(o)&&(a("texttemplate"),t(u,o,s,a));var c=[];(v.hasMarkers(o)||v.hasText(o))&&(a("cliponaxis"),a("marker.maxdisplayed"),c.push("points")),a("fill"),o.fill!=="none"&&(r(u,o,h,a),v.hasLines(o)||e(u,o,a)),o.fill!=="tonext"&&o.fill!=="toself"||c.push("fills"),a("hoveron",c.join("+")||"points"),m.coerceSelectionMarkerOpacity(o,a)}else o.visible=!1}}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1011}],1014:[function(g,Q,X){var m=g("../../lib"),v=g("../../plots/cartesian/axes");Q.exports=function(k,x,e){var t,r,l={},n=e[x.subplot]._subplot;n?(t=n.radialAxis,r=n.angularAxis):(t=(n=e[x.subplot]).radialaxis,r=n.angularaxis);var d=t.c2l(k.r);l.rLabel=v.tickText(t,d,!0).text;var u=r.thetaunit==="degrees"?m.rad2deg(k.theta):k.theta;return l.thetaLabel=v.tickText(r,u,!0).text,l}},{"../../lib":515,"../../plots/cartesian/axes":566}],1015:[function(g,Q,X){var m=g("../scatter/hover");function v(k,x,e,t){var r=e.radialAxis,l=e.angularAxis;r._hovertitle="r",l._hovertitle="\u03B8";var n={};n[x.subplot]={_subplot:e};var d=x._module.formatLabels(k,x,n);t.rLabel=d.rLabel,t.thetaLabel=d.thetaLabel;var u=k.hi||x.hoverinfo,o=[];function h(a,p){o.push(a._hovertitle+": "+p)}if(!x.hovertemplate){var s=u.split("+");s.indexOf("all")!==-1&&(s=["r","theta","text"]),s.indexOf("r")!==-1&&h(r,t.rLabel),s.indexOf("theta")!==-1&&h(l,t.thetaLabel),s.indexOf("text")!==-1&&t.text&&(o.push(t.text),delete t.text),t.extraText=o.join("<br>")}}Q.exports={hoverPoints:function(k,x,e,t){var r=m(k,x,e,t);if(r&&r[0].index!==!1){var l=r[0];if(l.index===void 0)return r;var n=k.subplot,d=l.cd[l.index],u=l.trace;if(n.isPtInside(d))return l.xLabelVal=void 0,l.yLabelVal=void 0,v(d,u,n,l),l.hovertemplate=u.hovertemplate,r}},makeHoverPointText:v}},{"../scatter/hover":947}],1016:[function(g,Q,X){Q.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:g("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:g("./attributes"),supplyDefaults:g("./defaults").supplyDefaults,colorbar:g("../scatter/marker_colorbar"),formatLabels:g("./format_labels"),calc:g("./calc"),plot:g("./plot"),style:g("../scatter/style").style,styleOnSelect:g("../scatter/style").styleOnSelect,hoverPoints:g("./hover").hoverPoints,selectPoints:g("../scatter/select"),meta:{}}},{"../../plots/polar":631,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1011,"./calc":1012,"./defaults":1013,"./format_labels":1014,"./hover":1015,"./plot":1017}],1017:[function(g,Q,X){var m=g("../scatter/plot"),v=g("../../constants/numerical").BADNUM;Q.exports=function(k,x,e){for(var t=x.layers.frontplot.select("g.scatterlayer"),r=x.xaxis,l=x.yaxis,n={xaxis:r,yaxis:l,plot:x.framework,layerClipId:x._hasClipOnAxisFalse?x.clipIds.forTraces:null},d=x.radialAxis,u=x.angularAxis,o=0;o<e.length;o++)for(var h=e[o],s=0;s<h.length;s++){s===0&&(h[0].trace._xA=r,h[0].trace._yA=l);var a=h[s],p=a.r;if(p===v)a.x=a.y=v;else{var c=d.c2g(p),i=u.c2g(a.theta);a.x=c*Math.cos(i),a.y=c*Math.sin(i)}}m(k,n,e,t)}},{"../../constants/numerical":491,"../scatter/plot":957}],1018:[function(g,Q,X){var m=g("../scatterpolar/attributes"),v=g("../scattergl/attributes"),k=g("../../plots/template_attributes").texttemplateAttrs;Q.exports={mode:m.mode,r:m.r,theta:m.theta,r0:m.r0,dr:m.dr,theta0:m.theta0,dtheta:m.dtheta,thetaunit:m.thetaunit,text:m.text,texttemplate:k({editType:"plot"},{keys:["r","theta","text"]}),hovertext:m.hovertext,hovertemplate:m.hovertemplate,line:v.line,connectgaps:v.connectgaps,marker:v.marker,fill:v.fill,fillcolor:v.fillcolor,textposition:v.textposition,textfont:v.textfont,hoverinfo:m.hoverinfo,selected:m.selected,unselected:m.unselected}},{"../../plots/template_attributes":642,"../scattergl/attributes":988,"../scatterpolar/attributes":1011}],1019:[function(g,Q,X){Q.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:g("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:g("./attributes"),supplyDefaults:g("./defaults"),colorbar:g("../scatter/marker_colorbar"),formatLabels:g("./format_labels"),calc:g("./calc"),hoverPoints:g("./hover").hoverPoints,selectPoints:g("../scattergl/select"),meta:{}}},{"../../plots/polar":631,"../scatter/marker_colorbar":954,"../scattergl/select":1001,"./attributes":1018,"./calc":1020,"./defaults":1021,"./format_labels":1022,"./hover":1023}],1020:[function(g,Q,X){var m=g("../scatter/colorscale_calc"),v=g("../scatter/calc").calcMarkerSize,k=g("../scattergl/convert"),x=g("../../plots/cartesian/axes"),e=g("../scattergl/constants").TOO_MANY_POINTS;Q.exports=function(t,r){var l=t._fullLayout,n=r.subplot,d=l[n].radialaxis,u=l[n].angularaxis,o=r._r=d.makeCalcdata(r,"r"),h=r._theta=u.makeCalcdata(r,"theta"),s=r._length,a={};s<o.length&&(o=o.slice(0,s)),s<h.length&&(h=h.slice(0,s)),a.r=o,a.theta=h,m(t,r);var p,c=a.opts=k.style(t,r);return s<e?p=v(r,s):c.marker&&(p=2*(c.marker.sizeAvg||Math.max(c.marker.size,3))),r._extremes.x=x.findExtremes(d,o,{ppad:p}),[{x:!1,y:!1,t:a,trace:r}]}},{"../../plots/cartesian/axes":566,"../scatter/calc":937,"../scatter/colorscale_calc":939,"../scattergl/constants":991,"../scattergl/convert":992}],1021:[function(g,Q,X){var m=g("../../lib"),v=g("../scatter/subtypes"),k=g("../scatterpolar/defaults").handleRThetaDefaults,x=g("../scatter/marker_defaults"),e=g("../scatter/line_defaults"),t=g("../scatter/text_defaults"),r=g("../scatter/fillcolor_defaults"),l=g("../scatter/constants").PTS_LINESONLY,n=g("./attributes");Q.exports=function(d,u,o,h){function s(p,c){return m.coerce(d,u,n,p,c)}var a=k(d,u,h,s);a?(s("thetaunit"),s("mode",a<l?"lines+markers":"lines"),s("text"),s("hovertext"),u.hoveron!=="fills"&&s("hovertemplate"),v.hasLines(u)&&(e(d,u,o,h,s),s("connectgaps")),v.hasMarkers(u)&&x(d,u,o,h,s,{noAngleRef:!0,noStandOff:!0}),v.hasText(u)&&(s("texttemplate"),t(d,u,h,s)),s("fill"),u.fill!=="none"&&r(d,u,o,s),m.coerceSelectionMarkerOpacity(u,s)):u.visible=!1}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"../scatterpolar/defaults":1013,"./attributes":1018}],1022:[function(g,Q,X){var m=g("../scatterpolar/format_labels");Q.exports=function(v,k,x){var e=v.i;return"r"in v||(v.r=k._r[e]),"theta"in v||(v.theta=k._theta[e]),m(v,k,x)}},{"../scatterpolar/format_labels":1014}],1023:[function(g,Q,X){var m=g("../scattergl/hover"),v=g("../scatterpolar/hover").makeHoverPointText;Q.exports={hoverPoints:function(k,x,e,t){var r=k.cd[0].t,l=r.r,n=r.theta,d=m.hoverPoints(k,x,e,t);if(d&&d[0].index!==!1){var u=d[0];if(u.index===void 0)return d;var o=k.subplot,h=u.cd[u.index],s=u.trace;if(h.r=l[u.index],h.theta=n[u.index],o.isPtInside(h))return u.xLabelVal=void 0,u.yLabelVal=void 0,v(h,s,o,u),d}}}},{"../scattergl/hover":997,"../scatterpolar/hover":1015}],1024:[function(g,Q,X){arguments[4][905][0].apply(X,arguments)},{"./base_index":1019,"./plot":1025,dup:905}],1025:[function(g,Q,X){var m=g("@plotly/point-cluster"),v=g("fast-isnumeric"),k=g("../scattergl/plot"),x=g("../scattergl/scene_update"),e=g("../scattergl/convert"),t=g("../../lib"),r=g("../scattergl/constants").TOO_MANY_POINTS;Q.exports=function(l,n,d){if(d.length){var u=n.radialAxis,o=n.angularAxis,h=x(l,n);return d.forEach(function(s){if(s&&s[0]&&s[0].trace){var a,p=s[0],c=p.trace,i=p.t,y=c._length,f=i.r,w=i.theta,b=i.opts,_=f.slice(),T=w.slice();for(a=0;a<f.length;a++)n.isPtInside({r:f[a],theta:w[a]})||(_[a]=NaN,T[a]=NaN);var L=new Array(2*y),A=Array(y),I=Array(y);for(a=0;a<y;a++){var P,S,E=_[a];if(v(E)){var z=u.c2g(E),D=o.c2g(T[a],c.thetaunit);P=z*Math.cos(D),S=z*Math.sin(D)}else P=S=NaN;A[a]=L[2*a]=P,I[a]=L[2*a+1]=S}i.tree=m(L),b.marker&&y>=r&&(b.marker.cluster=i.tree),b.marker&&(b.markerSel.positions=b.markerUnsel.positions=b.marker.positions=L),b.line&&L.length>1&&t.extendFlat(b.line,e.linePositions(l,c,L)),b.text&&(t.extendFlat(b.text,{positions:L},e.textPosition(l,c,b.text,b.marker)),t.extendFlat(b.textSel,{positions:L},e.textPosition(l,c,b.text,b.markerSel)),t.extendFlat(b.textUnsel,{positions:L},e.textPosition(l,c,b.text,b.markerUnsel))),b.fill&&!h.fill2d&&(h.fill2d=!0),b.marker&&!h.scatter2d&&(h.scatter2d=!0),b.line&&!h.line2d&&(h.line2d=!0),b.text&&!h.glText&&(h.glText=!0),h.lineOptions.push(b.line),h.fillOptions.push(b.fill),h.markerOptions.push(b.marker),h.markerSelectedOptions.push(b.markerSel),h.markerUnselectedOptions.push(b.markerUnsel),h.textOptions.push(b.text),h.textSelectedOptions.push(b.textSel),h.textUnselectedOptions.push(b.textUnsel),h.selectBatch.push([]),h.unselectBatch.push([]),i.x=A,i.y=I,i.rawx=A,i.rawy=I,i.r=f,i.theta=w,i.positions=L,i._scene=h,i.index=h.count,h.count++}}),k(l,n,d)}},Q.exports.reglPrecompiled={}},{"../../lib":515,"../scattergl/constants":991,"../scattergl/convert":992,"../scattergl/plot":999,"../scattergl/scene_update":1e3,"@plotly/point-cluster":59,"fast-isnumeric":190}],1026:[function(g,Q,X){var m=g("../../plots/template_attributes").hovertemplateAttrs,v=g("../../plots/template_attributes").texttemplateAttrs,k=g("../../lib/extend").extendFlat,x=g("../scatter/attributes"),e=g("../../plots/attributes"),t=x.line;Q.exports={mode:x.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:x.text,texttemplate:v({editType:"plot"},{keys:["real","imag","text"]}),hovertext:x.hovertext,line:{color:t.color,width:t.width,dash:t.dash,backoff:t.backoff,shape:k({},t.shape,{values:["linear","spline"]}),smoothing:t.smoothing,editType:"calc"},connectgaps:x.connectgaps,marker:x.marker,cliponaxis:k({},x.cliponaxis,{dflt:!1}),textposition:x.textposition,textfont:x.textfont,fill:k({},x.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:x.fillcolor,hoverinfo:k({},e.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:x.hoveron,hovertemplate:m(),selected:x.selected,unselected:x.unselected}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1027:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../../constants/numerical").BADNUM,k=g("../scatter/colorscale_calc"),x=g("../scatter/arrays_to_calcdata"),e=g("../scatter/calc_selection"),t=g("../scatter/calc").calcMarkerSize;Q.exports=function(r,l){for(var n=r._fullLayout,d=l.subplot,u=n[d].realaxis,o=n[d].imaginaryaxis,h=u.makeCalcdata(l,"real"),s=o.makeCalcdata(l,"imag"),a=l._length,p=new Array(a),c=0;c<a;c++){var i=h[c],y=s[c],f=p[c]={};m(i)&&m(y)?(f.real=i,f.imag=y):f.real=v}return t(l,a),k(r,l),x(p,l),e(p,l),p}},{"../../constants/numerical":491,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1028:[function(g,Q,X){var m=g("../../lib"),v=g("../scatter/subtypes"),k=g("../scatter/marker_defaults"),x=g("../scatter/line_defaults"),e=g("../scatter/line_shape_defaults"),t=g("../scatter/text_defaults"),r=g("../scatter/fillcolor_defaults"),l=g("../scatter/constants").PTS_LINESONLY,n=g("./attributes");Q.exports=function(d,u,o,h){function s(c,i){return m.coerce(d,u,n,c,i)}var a=function(c,i,y,f){var w,b=f("real"),_=f("imag");return b&&_&&(w=Math.min(b.length,_.length)),i._length=w,w}(0,u,0,s);if(a){s("mode",a<l?"lines+markers":"lines"),s("text"),s("hovertext"),u.hoveron!=="fills"&&s("hovertemplate"),v.hasLines(u)&&(x(d,u,o,h,s,{backoff:!0}),e(d,u,s),s("connectgaps")),v.hasMarkers(u)&&k(d,u,o,h,s,{gradient:!0}),v.hasText(u)&&(s("texttemplate"),t(d,u,h,s));var p=[];(v.hasMarkers(u)||v.hasText(u))&&(s("cliponaxis"),s("marker.maxdisplayed"),p.push("points")),s("fill"),u.fill!=="none"&&(r(d,u,o,s),v.hasLines(u)||e(d,u,s)),u.fill!=="tonext"&&u.fill!=="toself"||p.push("fills"),s("hoveron",p.join("+")||"points"),m.coerceSelectionMarkerOpacity(u,s)}else u.visible=!1}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1026}],1029:[function(g,Q,X){var m=g("../../plots/cartesian/axes");Q.exports=function(v,k,x){var e={},t=x[k.subplot]._subplot;return e.realLabel=m.tickText(t.radialAxis,v.real,!0).text,e.imagLabel=m.tickText(t.angularAxis,v.imag,!0).text,e}},{"../../plots/cartesian/axes":566}],1030:[function(g,Q,X){var m=g("../scatter/hover");function v(k,x,e,t){var r=e.radialAxis,l=e.angularAxis;r._hovertitle="real",l._hovertitle="imag";var n={};n[x.subplot]={_subplot:e};var d=x._module.formatLabels(k,x,n);t.realLabel=d.realLabel,t.imagLabel=d.imagLabel;var u=k.hi||x.hoverinfo,o=[];function h(a,p){o.push(a._hovertitle+": "+p)}if(!x.hovertemplate){var s=u.split("+");s.indexOf("all")!==-1&&(s=["real","imag","text"]),s.indexOf("real")!==-1&&h(r,t.realLabel),s.indexOf("imag")!==-1&&h(l,t.imagLabel),s.indexOf("text")!==-1&&t.text&&(o.push(t.text),delete t.text),t.extraText=o.join("<br>")}}Q.exports={hoverPoints:function(k,x,e,t){var r=m(k,x,e,t);if(r&&r[0].index!==!1){var l=r[0];if(l.index===void 0)return r;var n=k.subplot,d=l.cd[l.index],u=l.trace;if(n.isPtInside(d))return l.xLabelVal=void 0,l.yLabelVal=void 0,v(d,u,n,l),l.hovertemplate=u.hovertemplate,r}},makeHoverPointText:v}},{"../scatter/hover":947}],1031:[function(g,Q,X){Q.exports={moduleType:"trace",name:"scattersmith",basePlotModule:g("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:g("./attributes"),supplyDefaults:g("./defaults"),colorbar:g("../scatter/marker_colorbar"),formatLabels:g("./format_labels"),calc:g("./calc"),plot:g("./plot"),style:g("../scatter/style").style,styleOnSelect:g("../scatter/style").styleOnSelect,hoverPoints:g("./hover").hoverPoints,selectPoints:g("../scatter/select"),meta:{}}},{"../../plots/smith":638,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1026,"./calc":1027,"./defaults":1028,"./format_labels":1029,"./hover":1030,"./plot":1032}],1032:[function(g,Q,X){var m=g("../scatter/plot"),v=g("../../constants/numerical").BADNUM,k=g("../../plots/smith/helpers").smith;Q.exports=function(x,e,t){for(var r=e.layers.frontplot.select("g.scatterlayer"),l=e.xaxis,n=e.yaxis,d={xaxis:l,yaxis:n,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},u=0;u<t.length;u++)for(var o=t[u],h=0;h<o.length;h++){h===0&&(o[0].trace._xA=l,o[0].trace._yA=n);var s=o[h],a=s.real;if(a===v)s.x=s.y=v;else{var p=k([a,s.imag]);s.x=p[0],s.y=p[1]}}m(x,d,t,r)}},{"../../constants/numerical":491,"../../plots/smith/helpers":637,"../scatter/plot":957}],1033:[function(g,Q,X){var m=g("../../plots/template_attributes").hovertemplateAttrs,v=g("../../plots/template_attributes").texttemplateAttrs,k=g("../scatter/attributes"),x=g("../../plots/attributes"),e=g("../../components/colorscale/attributes"),t=g("../../components/drawing/attributes").dash,r=g("../../lib/extend").extendFlat,l=k.marker,n=k.line,d=l.line;Q.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:r({},k.mode,{dflt:"markers"}),text:r({},k.text,{}),texttemplate:v({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:r({},k.hovertext,{}),line:{color:n.color,width:n.width,dash:t,backoff:n.backoff,shape:r({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:k.connectgaps,cliponaxis:k.cliponaxis,fill:r({},k.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:k.fillcolor,marker:r({symbol:l.symbol,opacity:l.opacity,angle:l.angle,angleref:l.angleref,standoff:l.standoff,maxdisplayed:l.maxdisplayed,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,line:r({width:d.width,editType:"calc"},e("marker.line")),gradient:l.gradient,editType:"calc"},e("marker")),textfont:k.textfont,textposition:k.textposition,selected:k.selected,unselected:k.unselected,hoverinfo:r({},x.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:k.hoveron,hovertemplate:m()}},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1034:[function(g,Q,X){var m=g("fast-isnumeric"),v=g("../scatter/colorscale_calc"),k=g("../scatter/arrays_to_calcdata"),x=g("../scatter/calc_selection"),e=g("../scatter/calc").calcMarkerSize,t=["a","b","c"],r={a:["b","c"],b:["a","c"],c:["a","b"]};Q.exports=function(l,n){var d,u,o,h,s,a,p=l._fullLayout[n.subplot].sum,c=n.sum||p,i={a:n.a,b:n.b,c:n.c};for(d=0;d<t.length;d++)if(!i[o=t[d]]){for(s=i[r[o][0]],a=i[r[o][1]],h=new Array(s.length),u=0;u<s.length;u++)h[u]=c-s[u]-a[u];i[o]=h}var y,f,w,b,_,T,L=n._length,A=new Array(L);for(d=0;d<L;d++)y=i.a[d],f=i.b[d],w=i.c[d],m(y)&&m(f)&&m(w)?((b=p/((y=+y)+(f=+f)+(w=+w)))!==1&&(y*=b,f*=b,w*=b),T=y,_=w-f,A[d]={x:_,y:T,a:y,b:f,c:w}):A[d]={x:!1,y:!1};return e(n,L),v(l,n),k(A,n),x(A,n),A}},{"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1035:[function(g,Q,X){var m=g("../../lib"),v=g("../scatter/constants"),k=g("../scatter/subtypes"),x=g("../scatter/marker_defaults"),e=g("../scatter/line_defaults"),t=g("../scatter/line_shape_defaults"),r=g("../scatter/text_defaults"),l=g("../scatter/fillcolor_defaults"),n=g("./attributes");Q.exports=function(d,u,o,h){function s(f,w){return m.coerce(d,u,n,f,w)}var a,p=s("a"),c=s("b"),i=s("c");if(p?(a=p.length,c?(a=Math.min(a,c.length),i&&(a=Math.min(a,i.length))):a=i?Math.min(a,i.length):0):c&&i&&(a=Math.min(c.length,i.length)),a){u._length=a,s("sum"),s("text"),s("hovertext"),u.hoveron!=="fills"&&s("hovertemplate"),s("mode",a<v.PTS_LINESONLY?"lines+markers":"lines"),k.hasLines(u)&&(e(d,u,o,h,s,{backoff:!0}),t(d,u,s),s("connectgaps")),k.hasMarkers(u)&&x(d,u,o,h,s,{gradient:!0}),k.hasText(u)&&(s("texttemplate"),r(d,u,h,s));var y=[];(k.hasMarkers(u)||k.hasText(u))&&(s("cliponaxis"),s("marker.maxdisplayed"),y.push("points")),s("fill"),u.fill!=="none"&&(l(d,u,o,s),k.hasLines(u)||t(d,u,s)),u.fill!=="tonext"&&u.fill!=="toself"||y.push("fills"),s("hoveron",y.join("+")||"points"),m.coerceSelectionMarkerOpacity(u,s)}else u.visible=!1}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1033}],1036:[function(g,Q,X){Q.exports=function(m,v,k,x,e){if(v.xa&&(m.xaxis=v.xa),v.ya&&(m.yaxis=v.ya),x[e]){var t=x[e];m.a=t.a,m.b=t.b,m.c=t.c}else m.a=v.a,m.b=v.b,m.c=v.c;return m}},{}],1037:[function(g,Q,X){var m=g("../../plots/cartesian/axes");Q.exports=function(v,k,x){var e={},t=x[k.subplot]._subplot;return e.aLabel=m.tickText(t.aaxis,v.a,!0).text,e.bLabel=m.tickText(t.baxis,v.b,!0).text,e.cLabel=m.tickText(t.caxis,v.c,!0).text,e}},{"../../plots/cartesian/axes":566}],1038:[function(g,Q,X){var m=g("../scatter/hover");Q.exports=function(v,k,x,e){var t=m(v,k,x,e);if(t&&t[0].index!==!1){var r=t[0];if(r.index===void 0){var l=1-r.y0/v.ya._length,n=v.xa._length,d=n*l/2,u=n-d;return r.x0=Math.max(Math.min(r.x0,u),d),r.x1=Math.max(Math.min(r.x1,u),d),t}var o=r.cd[r.index],h=r.trace,s=r.subplot;r.a=o.a,r.b=o.b,r.c=o.c,r.xLabelVal=void 0,r.yLabelVal=void 0;var a={};a[h.subplot]={_subplot:s};var p=h._module.formatLabels(o,h,a);r.aLabel=p.aLabel,r.bLabel=p.bLabel,r.cLabel=p.cLabel;var c=o.hi||h.hoverinfo,i=[];if(!h.hovertemplate){var y=c.split("+");y.indexOf("all")!==-1&&(y=["a","b","c"]),y.indexOf("a")!==-1&&f(s.aaxis,r.aLabel),y.indexOf("b")!==-1&&f(s.baxis,r.bLabel),y.indexOf("c")!==-1&&f(s.caxis,r.cLabel)}return r.extraText=i.join("<br>"),r.hovertemplate=h.hovertemplate,t}function f(w,b){i.push(w._hovertitle+": "+b)}}},{"../scatter/hover":947}],1039:[function(g,Q,X){Q.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),colorbar:g("../scatter/marker_colorbar"),formatLabels:g("./format_labels"),calc:g("./calc"),plot:g("./plot"),style:g("../scatter/style").style,styleOnSelect:g("../scatter/style").styleOnSelect,hoverPoints:g("./hover"),selectPoints:g("../scatter/select"),eventData:g("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:g("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":643,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1033,"./calc":1034,"./defaults":1035,"./event_data":1036,"./format_labels":1037,"./hover":1038,"./plot":1040}],1040:[function(g,Q,X){var m=g("../scatter/plot");Q.exports=function(v,k,x){var e=k.plotContainer;e.select(".scatterlayer").selectAll("*").remove();for(var t=k.xaxis,r=k.yaxis,l={xaxis:t,yaxis:r,plot:e,layerClipId:k._hasClipOnAxisFalse?k.clipIdRelative:null},n=k.layers.frontplot.select("g.scatterlayer"),d=0;d<x.length;d++){var u=x[d];u.length&&(u[0].trace._xA=t,u[0].trace._yA=r)}m(v,l,x,n)}},{"../scatter/plot":957}],1041:[function(g,Q,X){var m=g("../scatter/attributes"),v=g("../../components/colorscale/attributes"),k=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=g("../../plots/template_attributes").hovertemplateAttrs,e=g("../scattergl/attributes"),t=g("../../plots/cartesian/constants").idRegex,r=g("../../plot_api/plot_template").templatedArray,l=g("../../lib/extend").extendFlat,n=m.marker,d=n.line,u=l(v("marker.line",{editTypeOverride:"calc"}),{width:l({},d.width,{editType:"calc"}),editType:"calc"}),o=l(v("marker"),{symbol:n.symbol,angle:n.angle,size:l({},n.size,{editType:"markerSize"}),sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,opacity:n.opacity,colorbar:n.colorbar,line:u,editType:"calc"});function h(s){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:t[s],editType:"plot"}}}o.color.editType=o.cmin.editType=o.cmax.editType="style",Q.exports={dimensions:r("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:l({},e.text,{}),hovertext:l({},e.hovertext,{}),hovertemplate:x(),xhoverformat:k("x"),yhoverformat:k("y"),marker:o,xaxes:h("x"),yaxes:h("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/constants":573,"../../plots/template_attributes":642,"../scatter/attributes":936,"../scattergl/attributes":988}],1042:[function(g,Q,X){var m=g("../../registry"),v=g("../../components/grid");Q.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:g("./attributes"),supplyDefaults:g("./defaults"),colorbar:g("../scatter/marker_colorbar"),calc:g("./calc"),plot:g("./plot"),hoverPoints:g("./hover").hoverPoints,selectPoints:g("./select"),editStyle:g("./edit_style"),meta:{}},m.register(v)},{"../../components/grid":411,"../../registry":647,"../scatter/marker_colorbar":954,"./attributes":1041,"./calc":1044,"./defaults":1045,"./edit_style":1046,"./hover":1048,"./plot":1050,"./select":1052}],1043:[function(g,Q,X){var m=g("regl-line2d"),v=g("../../registry"),k=g("../../lib/prepare_regl"),x=g("../../plots/get_data").getModuleCalcData,e=g("../../plots/cartesian"),t=g("../../plots/cartesian/axis_ids").getFromId,r=g("../../plots/cartesian/axes").shouldShowZeroLine,l={};function n(u,o,h){for(var s=h.matrixOptions.data.length,a=o._visibleDims,p=h.viewOpts.ranges=new Array(s),c=0;c<a.length;c++){var i=a[c],y=p[c]=new Array(4),f=t(u,o._diag[i][0]);f&&(y[0]=f.r2l(f.range[0]),y[2]=f.r2l(f.range[1]));var w=t(u,o._diag[i][1]);w&&(y[1]=w.r2l(w.range[0]),y[3]=w.r2l(w.range[1]))}h.selectBatch.length||h.unselectBatch.length?h.matrix.update({ranges:p},{ranges:p}):h.matrix.update({ranges:p})}function d(u){var o=u._fullLayout,h=o._glcanvas.data()[0].regl,s=o._splomGrid;s||(s=o._splomGrid=m(h)),s.update(function(a){var p,c=a._context.plotGlPixelRatio,i=a._fullLayout,y=i._size,f=[0,0,i.width*c,i.height*c],w={};function b(W,Z,re,V,B,j){re*=c,V*=c,B*=c,j*=c;var ee=Z[W+"color"],N=Z[W+"width"],$=String(ee+N);$ in w?w[$].data.push(NaN,NaN,re,V,B,j):w[$]={data:[re,V,B,j],join:"rect",thickness:N*c,color:ee,viewport:f,range:f,overlay:!1}}for(p in i._splomSubplots){var _,T,L=i._plots[p],A=L.xaxis,I=L.yaxis,P=A._gridVals,S=I._gridVals,E=A._offset,z=A._length,D=I._length,U=y.b+I.domain[0]*y.h,H=-I._m,Y=-H*I.r2l(I.range[0],I.calendar);if(A.showgrid)for(p=0;p<P.length;p++)_=E+A.l2p(P[p].x),b("grid",A,_,U,_,U+D);if(I.showgrid)for(p=0;p<S.length;p++)T=U+Y+H*S[p].x,b("grid",I,E,T,E+z,T);r(a,A,I)&&(_=E+A.l2p(0),b("zeroline",A,_,U,_,U+D)),r(a,I,A)&&b("zeroline",I,E,T=U+Y+0,E+z,T)}var J=[];for(p in w)J.push(w[p]);return J}(u))}Q.exports={name:"splom",attr:e.attr,attrRegex:e.attrRegex,layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:function(u){var o=u._fullLayout,h=v.getModule("splom"),s=x(u.calcdata,h)[0];k(u,["ANGLE_instanced_arrays","OES_element_index_uint"],l)&&(o._hasOnlyLargeSploms&&d(u),h.plot(u,{},s))},drag:function(u){var o=u.calcdata,h=u._fullLayout;h._hasOnlyLargeSploms&&d(u);for(var s=0;s<o.length;s++){var a=o[s][0].trace,p=h._splomScenes[a.uid];a.type==="splom"&&p&&p.matrix&&n(u,a,p)}},updateGrid:d,clean:function(u,o,h,s){var a,p={};if(s._splomScenes){for(a=0;a<u.length;a++){var c=u[a];c.type==="splom"&&(p[c.uid]=1)}for(a=0;a<h.length;a++){var i=h[a];if(!p[i.uid]){var y=s._splomScenes[i.uid];y&&y.destroy&&y.destroy(),s._splomScenes[i.uid]=null,delete s._splomScenes[i.uid]}}}Object.keys(s._splomScenes||{}).length===0&&delete s._splomScenes,s._splomGrid&&!o._hasOnlyLargeSploms&&s._hasOnlyLargeSploms&&(s._splomGrid.destroy(),s._splomGrid=null,delete s._splomGrid),e.clean(u,o,h,s)},updateFx:e.updateFx,toSVG:e.toSVG,reglPrecompiled:l}},{"../../lib/prepare_regl":528,"../../plots/cartesian":578,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_ids":570,"../../plots/get_data":602,"../../registry":647,"regl-line2d":281}],1044:[function(g,Q,X){var m=g("../../lib"),v=g("../../plots/cartesian/axis_ids"),k=g("../scatter/calc").calcMarkerSize,x=g("../scatter/calc").calcAxisExpansion,e=g("../scatter/colorscale_calc"),t=g("../scattergl/convert").markerSelection,r=g("../scattergl/convert").markerStyle,l=g("./scene_update"),n=g("../../constants/numerical").BADNUM,d=g("../scattergl/constants").TOO_MANY_POINTS;Q.exports=function(u,o){var h,s,a,p,c,i,y=o.dimensions,f=o._length,w={},b=w.cdata=[],_=w.data=[],T=o._visibleDims=[];function L(I,P){for(var S=I.makeCalcdata({v:P.values,vcalendar:o.calendar},"v"),E=0;E<S.length;E++)S[E]=S[E]===n?NaN:S[E];b.push(S),_.push(I.type==="log"?m.simpleMap(S,I.c2l):S)}for(h=0;h<y.length;h++)if((a=y[h]).visible){if(p=v.getFromId(u,o._diag[h][0]),c=v.getFromId(u,o._diag[h][1]),p&&c&&p.type!==c.type){m.log("Skipping splom dimension "+h+" with conflicting axis types");continue}p?(L(p,a),c&&c.type==="category"&&(c._categories=p._categories.slice())):L(c,a),T.push(h)}for(e(u,o),m.extendFlat(w,r(u,o)),i=b.length*f>d?w.sizeAvg||Math.max(w.size,3):k(o,f),s=0;s<T.length;s++)a=y[h=T[s]],p=v.getFromId(u,o._diag[h][0])||{},c=v.getFromId(u,o._diag[h][1])||{},x(u,o,p,c,b[s],b[s],i);var A=l(u,o);return A.matrix||(A.matrix=!0),A.matrixOptions=w,A.selectedOptions=t(u,o,o.selected),A.unselectedOptions=t(u,o,o.unselected),[{x:!1,y:!1,t:{},trace:o}]}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axis_ids":570,"../scatter/calc":937,"../scatter/colorscale_calc":939,"../scattergl/constants":991,"../scattergl/convert":992,"./scene_update":1051}],1045:[function(g,Q,X){var m=g("../../lib"),v=g("../../plots/array_container_defaults"),k=g("./attributes"),x=g("../scatter/subtypes"),e=g("../scatter/marker_defaults"),t=g("../parcoords/merge_length"),r=g("../scattergl/helpers").isOpenSymbol;function l(n,d){function u(h,s){return m.coerce(n,d,k.dimensions,h,s)}u("label");var o=u("values");o&&o.length?u("visible"):d.visible=!1,u("axis.type"),u("axis.matches")}Q.exports=function(n,d,u,o){function h(f,w){return m.coerce(n,d,k,f,w)}var s=v(n,d,{name:"dimensions",handleItemDefaults:l}),a=h("diagonal.visible"),p=h("showupperhalf"),c=h("showlowerhalf");if(t(d,s,"values")&&(a||p||c)){h("text"),h("hovertext"),h("hovertemplate"),h("xhoverformat"),h("yhoverformat"),e(n,d,u,o,h,{noAngleRef:!0,noStandOff:!0});var i=r(d.marker.symbol),y=x.isBubble(d);h("marker.line.width",i||y?1:0),function(f,w,b,_){var T,L,A=w.dimensions,I=A.length,P=w.showupperhalf,S=w.showlowerhalf,E=w.diagonal.visible,z=new Array(I),D=new Array(I);for(T=0;T<I;T++){var U=T?T+1:"";z[T]="x"+U,D[T]="y"+U}var H=_("xaxes",z),Y=_("yaxes",D),J=w._diag=new Array(I);w._xaxes={},w._yaxes={};var W=[],Z=[];function re(ie,le,se,ve){if(ie){var fe=ie.charAt(0),ye=b._splomAxes[fe];if(w["_"+fe+"axes"][ie]=1,ve.push(ie),!(ie in ye)){var Ae=ye[ie]={};se&&(Ae.label=se.label||"",se.visible&&se.axis&&(se.axis.type&&(Ae.type=se.axis.type),se.axis.matches&&(Ae.matches=le)))}}}var V=!E&&!S,B=!E&&!P;for(w._axesDim={},T=0;T<I;T++){var j=A[T],ee=T===0,N=T===I-1,$=ee&&V||N&&B?void 0:H[T],K=ee&&B||N&&V?void 0:Y[T];re($,K,j,W),re(K,$,j,Z),J[T]=[$,K],w._axesDim[$]=T,w._axesDim[K]=T}for(T=0;T<W.length;T++)for(L=0;L<Z.length;L++){var te=W[T]+Z[L];T>L&&P||T<L&&S?b._splomSubplots[te]=1:T!==L||!E&&S&&P||(b._splomSubplots[te]=1)}(!S||!E&&P&&S)&&(b._splomGridDflt.xside="bottom",b._splomGridDflt.yside="left")}(0,d,o,h),m.coerceSelectionMarkerOpacity(d,h)}else d.visible=!1}},{"../../lib":515,"../../plots/array_container_defaults":561,"../parcoords/merge_length":907,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scattergl/helpers":996,"./attributes":1041}],1046:[function(g,Q,X){var m=g("../../lib"),v=g("../scatter/colorscale_calc"),k=g("../scattergl/convert").markerStyle;Q.exports=function(x,e){var t=e.trace,r=x._fullLayout._splomScenes[t.uid];if(r){v(x,t),m.extendFlat(r.matrixOptions,k(x,t));var l=m.extendFlat({},r.matrixOptions,r.viewOpts);r.matrix.update(l,null)}}},{"../../lib":515,"../scatter/colorscale_calc":939,"../scattergl/convert":992}],1047:[function(g,Q,X){X.getDimIndex=function(m,v){for(var k=v._id,x={x:0,y:1}[k.charAt(0)],e=m._visibleDims,t=0;t<e.length;t++){var r=e[t];if(m._diag[r][x]===k)return t}return!1}},{}],1048:[function(g,Q,X){var m=g("./helpers"),v=g("../scattergl/hover").calcHover;Q.exports={hoverPoints:function(k,x,e){var t=k.cd[0].trace,r=k.scene.matrixOptions.cdata,l=k.xa,n=k.ya,d=l.c2p(x),u=n.c2p(e),o=k.distance,h=m.getDimIndex(t,l),s=m.getDimIndex(t,n);if(h===!1||s===!1)return[k];for(var a,p,c=r[h],i=r[s],y=o,f=0;f<c.length;f++){var w=c[f],b=i[f],_=l.c2p(w)-d,T=n.c2p(b)-u,L=Math.sqrt(_*_+T*T);L<y&&(y=p=L,a=f)}return k.index=a,k.distance=y,k.dxy=p,a===void 0?[k]:[v(k,c,i,t)]}}},{"../scattergl/hover":997,"./helpers":1047}],1049:[function(g,Q,X){var m=g("./base_index");m.basePlotModule=g("./base_plot"),Q.exports=m},{"./base_index":1042,"./base_plot":1043}],1050:[function(g,Q,X){var m=g("regl-splom"),v=g("../../lib"),k=g("../../plots/cartesian/axis_ids"),x=g("../../components/dragelement/helpers").selectMode;function e(t,r){var l,n,d,u,o,h=t._fullLayout,s=h._size,a=r.trace,p=r.t,c=h._splomScenes[a.uid],i=c.matrixOptions,y=i.cdata,f=h._glcanvas.data()[0].regl,w=h.dragmode;if(y.length!==0){i.lower=a.showupperhalf,i.upper=a.showlowerhalf,i.diagonal=a.diagonal.visible;var b=a._visibleDims,_=y.length,T=c.viewOpts={};for(T.ranges=new Array(_),T.domains=new Array(_),o=0;o<b.length;o++){d=b[o];var L=T.ranges[o]=new Array(4),A=T.domains[o]=new Array(4);(l=k.getFromId(t,a._diag[d][0]))&&(L[0]=l._rl[0],L[2]=l._rl[1],A[0]=l.domain[0],A[2]=l.domain[1]),(n=k.getFromId(t,a._diag[d][1]))&&(L[1]=n._rl[0],L[3]=n._rl[1],A[1]=n.domain[0],A[3]=n.domain[1])}var I=t._context.plotGlPixelRatio,P=s.l*I,S=s.b*I,E=s.w*I,z=s.h*I;T.viewport=[P,S,E+P,z+S],c.matrix===!0&&(c.matrix=m(f));var D=h.clickmode.indexOf("select")>-1,U=!0;if(x(w)||!!a.selectedpoints||D){var H=a._length;if(a.selectedpoints){c.selectBatch=a.selectedpoints;var Y=a.selectedpoints,J={};for(d=0;d<Y.length;d++)J[Y[d]]=!0;var W=[];for(d=0;d<H;d++)J[d]||W.push(d);c.unselectBatch=W}var Z=p.xpx=new Array(_),re=p.ypx=new Array(_);for(o=0;o<b.length;o++){if(d=b[o],l=k.getFromId(t,a._diag[d][0]))for(Z[o]=new Array(H),u=0;u<H;u++)Z[o][u]=l.c2p(y[o][u]);if(n=k.getFromId(t,a._diag[d][1]))for(re[o]=new Array(H),u=0;u<H;u++)re[o][u]=n.c2p(y[o][u])}if(c.selectBatch.length||c.unselectBatch.length){var V=v.extendFlat({},i,c.unselectedOptions,T),B=v.extendFlat({},i,c.selectedOptions,T);c.matrix.update(V,B),U=!1}}else p.xpx=p.ypx=null;if(U){var j=v.extendFlat({},i,T);c.matrix.update(j,null)}}}Q.exports=function(t,r,l){if(l.length)for(var n=0;n<l.length;n++)e(t,l[n][0])}},{"../../components/dragelement/helpers":385,"../../lib":515,"../../plots/cartesian/axis_ids":570,"regl-splom":283}],1051:[function(g,Q,X){var m=g("../../lib");Q.exports=function(v,k){var x=v._fullLayout,e=k.uid,t=x._splomScenes;t||(t=x._splomScenes={});var r={dirty:!0,selectBatch:[],unselectBatch:[]},l=t[k.uid];return l||((l=t[e]=m.extendFlat({},r,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){l.matrix&&l.matrix.draw&&(l.selectBatch.length||l.unselectBatch.length?l.matrix.draw(l.unselectBatch,l.selectBatch):l.matrix.draw()),l.dirty=!1},l.destroy=function(){l.matrix&&l.matrix.destroy&&l.matrix.destroy(),l.matrixOptions=null,l.selectBatch=null,l.unselectBatch=null,l=null}),l.dirty||m.extendFlat(l,r),l}},{"../../lib":515}],1052:[function(g,Q,X){var m=g("../../lib"),v=m.pushUnique,k=g("../scatter/subtypes"),x=g("./helpers");Q.exports=function(e,t){var r=e.cd,l=r[0].trace,n=r[0].t,d=e.scene,u=d.matrixOptions.cdata,o=e.xaxis,h=e.yaxis,s=[];if(!d)return s;var a=!k.hasMarkers(l)&&!k.hasText(l);if(l.visible!==!0||a)return s;var p=x.getDimIndex(l,o),c=x.getDimIndex(l,h);if(p===!1||c===!1)return s;var i=n.xpx[p],y=n.ypx[c],f=u[p],w=u[c],b=(e.scene.selectBatch||[]).slice(),_=[];if(t!==!1&&!t.degenerate)for(var T=0;T<f.length;T++)t.contains([i[T],y[T]],null,T,e)?(s.push({pointNumber:T,x:f[T],y:w[T]}),v(b,T)):b.indexOf(T)!==-1?v(b,T):_.push(T);var L=d.matrixOptions;return b.length||_.length?d.selectBatch.length||d.unselectBatch.length||d.matrix.update(d.unselectedOptions,m.extendFlat({},L,d.selectedOptions,d.viewOpts)):d.matrix.update(L,null),d.selectBatch=b,d.unselectBatch=_,s}},{"../../lib":515,"../scatter/subtypes":961,"./helpers":1047}],1053:[function(g,Q,X){var m=g("../../components/colorscale/attributes"),v=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,k=g("../../plots/template_attributes").hovertemplateAttrs,x=g("../mesh3d/attributes"),e=g("../../plots/attributes"),t=g("../../lib/extend").extendFlat,r={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:k({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:v("u",1),vhoverformat:v("v",1),whoverformat:v("w",1),xhoverformat:v("x"),yhoverformat:v("y"),zhoverformat:v("z"),showlegend:t({},e.showlegend,{dflt:!1})};t(r,m("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(l){r[l]=x[l]}),r.hoverinfo=t({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),r.transforms=void 0,Q.exports=r},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],1054:[function(g,Q,X){var m=g("../../lib"),v=g("../../components/colorscale/calc");function k(t){var r,l,n,d,u,o,h,s,a,p,c,i,y=t._x,f=t._y,w=t._z,b=t._len,_=-1/0,T=1/0,L=-1/0,A=1/0,I=-1/0,P=1/0,S="";for(b&&(h=y[0],a=f[0],c=w[0]),b>1&&(s=y[b-1],p=f[b-1],i=w[b-1]),r=0;r<b;r++)_=Math.max(_,y[r]),T=Math.min(T,y[r]),L=Math.max(L,f[r]),A=Math.min(A,f[r]),I=Math.max(I,w[r]),P=Math.min(P,w[r]),d||y[r]===h||(d=!0,S+="x"),u||f[r]===a||(u=!0,S+="y"),o||w[r]===c||(o=!0,S+="z");d||(S+="x"),u||(S+="y"),o||(S+="z");var E=x(t._x),z=x(t._y),D=x(t._z);S=(S=(S=S.replace("x",(h>s?"-":"+")+"x")).replace("y",(a>p?"-":"+")+"y")).replace("z",(c>i?"-":"+")+"z");var U=function(){b=0,E=[],z=[],D=[]};(!b||b<E.length*z.length*D.length)&&U();var H=function(fe){return fe==="x"?y:fe==="y"?f:w},Y=function(fe){return fe==="x"?E:fe==="y"?z:D},J=function(fe){return fe[b-1]<fe[0]?-1:1},W=H(S[1]),Z=H(S[3]),re=H(S[5]),V=Y(S[1]).length,B=Y(S[3]).length,j=Y(S[5]).length,ee=!1,N=function(fe,ye,Ae){return V*(B*fe+ye)+Ae},$=J(H(S[1])),K=J(H(S[3])),te=J(H(S[5]));for(r=0;r<j-1;r++){for(l=0;l<B-1;l++){for(n=0;n<V-1;n++){var ie=N(r,l,n),le=N(r,l,n+1),se=N(r,l+1,n),ve=N(r+1,l,n);if(W[ie]*$<W[le]*$&&Z[ie]*K<Z[se]*K&&re[ie]*te<re[ve]*te||(ee=!0),ee)break}if(ee)break}if(ee)break}return ee&&(m.warn("Encountered arbitrary coordinates! Unable to input data grid."),U()),{xMin:T,yMin:A,zMin:P,xMax:_,yMax:L,zMax:I,Xs:E,Ys:z,Zs:D,len:b,fill:S}}function x(t){return m.distinctVals(t).vals}function e(t,r){if(r===void 0&&(r=t.length),m.isTypedArray(t))return t.subarray(0,r);for(var l=[],n=0;n<r;n++)l[n]=+t[n];return l}Q.exports={calc:function(t,r){r._len=Math.min(r.u.length,r.v.length,r.w.length,r.x.length,r.y.length,r.z.length),r._u=e(r.u,r._len),r._v=e(r.v,r._len),r._w=e(r.w,r._len),r._x=e(r.x,r._len),r._y=e(r.y,r._len),r._z=e(r.z,r._len);var l=k(r);r._gridFill=l.fill,r._Xs=l.Xs,r._Ys=l.Ys,r._Zs=l.Zs,r._len=l.len;var n,d,u,o=0;r.starts&&(n=e(r.starts.x||[]),d=e(r.starts.y||[]),u=e(r.starts.z||[]),o=Math.min(n.length,d.length,u.length)),r._startsX=n||[],r._startsY=d||[],r._startsZ=u||[];var h,s=0,a=1/0;for(h=0;h<r._len;h++){var p=r._u[h],c=r._v[h],i=r._w[h],y=Math.sqrt(p*p+c*c+i*i);s=Math.max(s,y),a=Math.min(a,y)}for(v(t,r,{vals:[a,s],containerStr:"",cLetter:"c"}),h=0;h<o;h++){var f=n[h];l.xMax=Math.max(l.xMax,f),l.xMin=Math.min(l.xMin,f);var w=d[h];l.yMax=Math.max(l.yMax,w),l.yMin=Math.min(l.yMin,w);var b=u[h];l.zMax=Math.max(l.zMax,b),l.zMin=Math.min(l.zMin,b)}r._slen=o,r._normMax=s,r._xbnds=[l.xMin,l.xMax],r._ybnds=[l.yMin,l.yMax],r._zbnds=[l.zMin,l.zMax]},filter:e,processGrid:k}},{"../../components/colorscale/calc":375,"../../lib":515}],1055:[function(g,Q,X){var m=g("../../../stackgl_modules").gl_streamtube3d,v=m.createTubeMesh,k=g("../../lib"),x=g("../../lib/gl_format_color").parseColorScale,e=g("../../components/colorscale").extractOpts,t=g("../../plots/gl3d/zip3"),r={xaxis:0,yaxis:1,zaxis:2};function l(h,s){this.scene=h,this.uid=s,this.mesh=null,this.data=null}var n=l.prototype;function d(h){var s=h.length;return s>2?h.slice(1,s-1):s===2?[(h[0]+h[1])/2]:h}function u(h){var s=h.length;return s===1?[.5,.5]:[h[1]-h[0],h[s-1]-h[s-2]]}function o(h,s){var a=h.fullSceneLayout,p=h.dataScale,c=s._len,i={};function y(V,B){var j=a[B],ee=p[r[B]];return k.simpleMap(V,function(N){return j.d2l(N)*ee})}if(i.vectors=t(y(s._u,"xaxis"),y(s._v,"yaxis"),y(s._w,"zaxis"),c),!c)return{positions:[],cells:[]};var f=y(s._Xs,"xaxis"),w=y(s._Ys,"yaxis"),b=y(s._Zs,"zaxis");if(i.meshgrid=[f,w,b],i.gridFill=s._gridFill,s._slen)i.startingPositions=t(y(s._startsX,"xaxis"),y(s._startsY,"yaxis"),y(s._startsZ,"zaxis"));else{for(var _=w[0],T=d(f),L=d(b),A=new Array(T.length*L.length),I=0,P=0;P<T.length;P++)for(var S=0;S<L.length;S++)A[I++]=[T[P],_,L[S]];i.startingPositions=A}i.colormap=x(s),i.tubeSize=s.sizeref,i.maxLength=s.maxdisplayed;var E=y(s._xbnds,"xaxis"),z=y(s._ybnds,"yaxis"),D=y(s._zbnds,"zaxis"),U=u(f),H=u(w),Y=u(b),J=[[E[0]-U[0],z[0]-H[0],D[0]-Y[0]],[E[1]+U[1],z[1]+H[1],D[1]+Y[1]]],W=m(i,J),Z=e(s);W.vertexIntensityBounds=[Z.min/s._normMax,Z.max/s._normMax];var re=s.lightposition;return W.lightPosition=[re.x,re.y,re.z],W.ambient=s.lighting.ambient,W.diffuse=s.lighting.diffuse,W.specular=s.lighting.specular,W.roughness=s.lighting.roughness,W.fresnel=s.lighting.fresnel,W.opacity=s.opacity,s._pad=W.tubeScale*s.sizeref*2,W}n.handlePick=function(h){var s=this.scene.fullSceneLayout,a=this.scene.dataScale;function p(y,f){var w=s[f],b=a[r[f]];return w.l2c(y)/b}if(h.object===this.mesh){var c=h.data.position,i=h.data.velocity;return h.traceCoordinate=[p(c[0],"xaxis"),p(c[1],"yaxis"),p(c[2],"zaxis"),p(i[0],"xaxis"),p(i[1],"yaxis"),p(i[2],"zaxis"),h.data.intensity*this.data._normMax,h.data.divergence],h.textLabel=this.data.hovertext||this.data.text,!0}},n.update=function(h){this.data=h;var s=o(this.scene,h);this.mesh.update(s)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},Q.exports=function(h,s){var a=h.glplot.gl,p=o(h,s),c=v(a,p),i=new l(h,s.uid);return i.mesh=c,i.data=s,c._trace=i,h.glplot.add(c),i}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/gl3d/zip3":618}],1056:[function(g,Q,X){var m=g("../../lib"),v=g("../../components/colorscale/defaults"),k=g("./attributes");Q.exports=function(x,e,t,r){function l(a,p){return m.coerce(x,e,k,a,p)}var n=l("u"),d=l("v"),u=l("w"),o=l("x"),h=l("y"),s=l("z");n&&n.length&&d&&d.length&&u&&u.length&&o&&o.length&&h&&h.length&&s&&s.length?(l("starts.x"),l("starts.y"),l("starts.z"),l("maxdisplayed"),l("sizeref"),l("lighting.ambient"),l("lighting.diffuse"),l("lighting.specular"),l("lighting.roughness"),l("lighting.fresnel"),l("lightposition.x"),l("lightposition.y"),l("lightposition.z"),v(x,e,r,l,{prefix:"",cLetter:"c"}),l("text"),l("hovertext"),l("hovertemplate"),l("uhoverformat"),l("vhoverformat"),l("whoverformat"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":1053}],1057:[function(g,Q,X){Q.exports={moduleType:"trace",name:"streamtube",basePlotModule:g("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:g("./attributes"),supplyDefaults:g("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:g("./calc").calc,plot:g("./convert"),eventData:function(m,v){return m.tubex=m.x,m.tubey=m.y,m.tubez=m.z,m.tubeu=v.traceCoordinate[3],m.tubev=v.traceCoordinate[4],m.tubew=v.traceCoordinate[5],m.norm=v.traceCoordinate[6],m.divergence=v.traceCoordinate[7],delete m.x,delete m.y,delete m.z,m},meta:{}}},{"../../plots/gl3d":607,"./attributes":1053,"./calc":1054,"./convert":1055,"./defaults":1056}],1058:[function(g,Q,X){var m=g("../../plots/attributes"),v=g("../../plots/template_attributes").hovertemplateAttrs,k=g("../../plots/template_attributes").texttemplateAttrs,x=g("../../components/colorscale/attributes"),e=g("../../plots/domain").attributes,t=g("../pie/attributes"),r=g("./constants"),l=g("../../lib/extend").extendFlat;Q.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:l({colors:{valType:"data_array",editType:"calc"},line:{color:l({},t.marker.line.color,{dflt:null}),width:l({},t.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},x("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:t.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:k({editType:"plot"},{keys:r.eventDataKeys.concat(["label","value"])}),hovertext:t.hovertext,hoverinfo:l({},m.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:v({},{keys:r.eventDataKeys}),textfont:t.textfont,insidetextorientation:t.insidetextorientation,insidetextfont:t.insidetextfont,outsidetextfont:l({},t.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:t.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:e({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"./constants":1061}],1059:[function(g,Q,X){var m=g("../../plots/plots");X.name="sunburst",X.plot=function(v,k,x,e){m.plotBasePlot(X.name,v,k,x,e)},X.clean=function(v,k,x,e){m.cleanBasePlot(X.name,v,k,x,e)}},{"../../plots/plots":628}],1060:[function(g,Q,X){var m=g("d3-hierarchy"),v=g("fast-isnumeric"),k=g("../../lib"),x=g("../../components/colorscale").makeColorScaleFuncFromTrace,e=g("../pie/calc").makePullColorFn,t=g("../pie/calc").generateExtendedColors,r=g("../../components/colorscale").calc,l=g("../../constants/numerical").ALMOST_EQUAL,n={},d={},u={};X.calc=function(o,h){var s,a,p,c,i,y,f=o._fullLayout,w=h.ids,b=k.isArrayOrTypedArray(w),_=h.labels,T=h.parents,L=h.values,A=k.isArrayOrTypedArray(L),I=[],P={},S={},E=function(K){return K||typeof K=="number"},z=function(K){return!A||v(L[K])&&L[K]>=0};b?(s=Math.min(w.length,T.length),a=function(K){return E(w[K])&&z(K)},p=function(K){return String(w[K])}):(s=Math.min(_.length,T.length),a=function(K){return E(_[K])&&z(K)},p=function(K){return String(_[K])}),A&&(s=Math.min(s,L.length));for(var D=0;D<s;D++)if(a(D)){var U=p(D),H=E(T[D])?String(T[D]):"",Y={i:D,id:U,pid:H,label:E(_[D])?String(_[D]):""};A&&(Y.v=+L[D]),I.push(Y),i=U,P[c=H]?P[c].push(i):P[c]=[i],S[i]=1}if(P[""]){if(P[""].length>1){for(var J=k.randstr(),W=0;W<I.length;W++)I[W].pid===""&&(I[W].pid=J);I.unshift({hasMultipleRoots:!0,id:J,pid:"",label:""})}}else{var Z,re=[];for(Z in P)S[Z]||re.push(Z);if(re.length!==1)return k.warn(["Multiple implied roots, cannot build",h.type,"hierarchy of",h.name+".","These roots include:",re.join(", ")].join(" "));Z=re[0],I.unshift({hasImpliedRoot:!0,id:Z,pid:"",label:Z})}try{y=m.stratify().id(function(K){return K.id}).parentId(function(K){return K.pid})(I)}catch(K){return k.warn(["Failed to build",h.type,"hierarchy of",h.name+".","Error:",K.message].join(" "))}var V=m.hierarchy(y),B=!1;if(A)switch(h.branchvalues){case"remainder":V.sum(function(K){return K.data.v});break;case"total":V.each(function(K){var te=K.data.data,ie=te.v;if(K.children){var le=K.children.reduce(function(se,ve){return se+ve.data.data.v},0);if((te.hasImpliedRoot||te.hasMultipleRoots)&&(ie=le),ie<le*l)return B=!0,k.warn(["Total value for node",K.data.data.id,"of",h.name,"is smaller than the sum of its children.",`
parent value =`,ie,`
children sum =`,le].join(" "))}K.value=ie})}else(function K(te,ie,le){var se=0,ve=te.children;if(ve){for(var fe=ve.length,ye=0;ye<fe;ye++)se+=K(ve[ye],ie,le);le.branches&&se++}else le.leaves&&se++;return te.value=te.data.data.value=se,ie._values||(ie._values=[]),ie._values[te.data.data.i]=se,se})(V,h,{branches:h.count.indexOf("branches")!==-1,leaves:h.count.indexOf("leaves")!==-1});if(!B){var j,ee;h.sort&&V.sort(function(K,te){return te.value-K.value});var N=h.marker.colors||[],$=!!N.length;return h._hasColorscale?($||(N=A?h.values:h._values),r(o,h,{vals:N,containerStr:"marker",cLetter:"c"}),ee=x(h.marker)):j=e(f["_"+h.type+"colormap"]),V.each(function(K){var te=K.data.data;te.color=h._hasColorscale?ee(N[te.i]):j(N[te.i],te.id)}),I[0].hierarchy=V,I}},X._runCrossTraceCalc=function(o,h){var s=h._fullLayout,a=h.calcdata,p=s[o+"colorway"],c=s["_"+o+"colormap"];s["extend"+o+"colors"]&&(p=t(p,o==="icicle"?u:o==="treemap"?d:n));var i,y=0;function f(_){var T=_.data.data,L=T.id;T.color===!1&&(c[L]?T.color=c[L]:_.parent?_.parent.parent?T.color=_.parent.data.data.color:(c[L]=T.color=p[y%p.length],y++):T.color=i)}for(var w=0;w<a.length;w++){var b=a[w][0];b.trace.type===o&&b.hierarchy&&(i=b.trace.root.color,b.hierarchy.each(f))}},X.crossTraceCalc=function(o){return X._runCrossTraceCalc("sunburst",o)}},{"../../components/colorscale":379,"../../constants/numerical":491,"../../lib":515,"../pie/calc":912,"d3-hierarchy":115,"fast-isnumeric":190}],1061:[function(g,Q,X){Q.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1062:[function(g,Q,X){var m=g("../../lib"),v=g("./attributes"),k=g("../../plots/domain").defaults,x=g("../bar/defaults").handleText,e=g("../../components/colorscale"),t=e.hasColorscale,r=e.handleDefaults;Q.exports=function(l,n,d,u){function o(i,y){return m.coerce(l,n,v,i,y)}var h=o("labels"),s=o("parents");if(h&&h.length&&s&&s.length){var a=o("values");a&&a.length?o("branchvalues"):o("count"),o("level"),o("maxdepth"),o("marker.line.width")&&o("marker.line.color",u.paper_bgcolor),o("marker.colors");var p=n._hasColorscale=t(l,"marker","colors")||(l.marker||{}).coloraxis;p&&r(l,n,u,o,{prefix:"marker.",cLetter:"c"}),o("leaf.opacity",p?1:.7);var c=o("text");o("texttemplate"),n.texttemplate||o("textinfo",Array.isArray(c)?"text+label":"label"),o("hovertext"),o("hovertemplate"),x(l,n,u,o,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),o("insidetextorientation"),o("sort"),o("rotation"),o("root.color"),k(n,u,o),n._length=null}else n.visible=!1}},{"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"./attributes":1058}],1063:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../registry"),k=g("../../components/fx/helpers").appendArrayPointValue,x=g("../../components/fx"),e=g("../../lib"),t=g("../../lib/events"),r=g("./helpers"),l=g("../pie/helpers").formatPieValue;function n(d,u,o){for(var h=d.data.data,s={curveNumber:u.index,pointNumber:h.i,data:u._input,fullData:u},a=0;a<o.length;a++){var p=o[a];p in d&&(s[p]=d[p])}return"parentString"in d&&!r.isHierarchyRoot(d)&&(s.parent=d.parentString),k(s,u,h.i),s}Q.exports=function(d,u,o,h,s){var a=h[0],p=a.trace,c=a.hierarchy,i=p.type==="sunburst",y=p.type==="treemap"||p.type==="icicle";"_hasHoverLabel"in p||(p._hasHoverLabel=!1),"_hasHoverEvent"in p||(p._hasHoverEvent=!1),d.on("mouseover",function(f){var w=o._fullLayout;if(!o._dragging&&w.hovermode!==!1){var b,_=o._fullData[p.index],T=f.data.data,L=T.i,A=r.isHierarchyRoot(f),I=r.getParent(c,f),P=r.getValue(f),S=function($){return e.castOption(_,L,$)},E=S("hovertemplate"),z=x.castHoverinfo(_,w,L),D=w.separators;if(E||z&&z!=="none"&&z!=="skip"){var U,H;i&&(U=a.cx+f.pxmid[0]*(1-f.rInscribed),H=a.cy+f.pxmid[1]*(1-f.rInscribed)),y&&(U=f._hoverX,H=f._hoverY);var Y,J={},W=[],Z=[],re=function($){return W.indexOf($)!==-1};z&&(W=z==="all"?_._module.attributes.hoverinfo.flags:z.split("+")),J.label=T.label,re("label")&&J.label&&Z.push(J.label),T.hasOwnProperty("v")&&(J.value=T.v,J.valueLabel=l(J.value,D),re("value")&&Z.push(J.valueLabel)),J.currentPath=f.currentPath=r.getPath(f.data),re("current path")&&!A&&Z.push(J.currentPath);var V=[],B=function(){V.indexOf(Y)===-1&&(Z.push(Y),V.push(Y))};J.percentParent=f.percentParent=P/r.getValue(I),J.parent=f.parentString=r.getPtLabel(I),re("percent parent")&&(Y=r.formatPercent(J.percentParent,D)+" of "+J.parent,B()),J.percentEntry=f.percentEntry=P/r.getValue(u),J.entry=f.entry=r.getPtLabel(u),!re("percent entry")||A||f.onPathbar||(Y=r.formatPercent(J.percentEntry,D)+" of "+J.entry,B()),J.percentRoot=f.percentRoot=P/r.getValue(c),J.root=f.root=r.getPtLabel(c),re("percent root")&&!A&&(Y=r.formatPercent(J.percentRoot,D)+" of "+J.root,B()),J.text=S("hovertext")||S("text"),re("text")&&(Y=J.text,e.isValidTextValue(Y)&&Z.push(Y)),b=[n(f,_,s.eventDataKeys)];var j={trace:_,y:H,_x0:f._x0,_x1:f._x1,_y0:f._y0,_y1:f._y1,text:Z.join("<br>"),name:E||re("name")?_.name:void 0,color:S("hoverlabel.bgcolor")||T.color,borderColor:S("hoverlabel.bordercolor"),fontFamily:S("hoverlabel.font.family"),fontSize:S("hoverlabel.font.size"),fontColor:S("hoverlabel.font.color"),nameLength:S("hoverlabel.namelength"),textAlign:S("hoverlabel.align"),hovertemplate:E,hovertemplateLabels:J,eventData:b};i&&(j.x0=U-f.rInscribed*f.rpx1,j.x1=U+f.rInscribed*f.rpx1,j.idealAlign=f.pxmid[0]<0?"left":"right"),y&&(j.x=U,j.idealAlign=U<0?"left":"right");var ee=[];x.loneHover(j,{container:w._hoverlayer.node(),outerContainer:w._paper.node(),gd:o,inOut_bbox:ee}),b[0].bbox=ee[0],p._hasHoverLabel=!0}if(y){var N=d.select("path.surface");s.styleOne(N,f,_,{hovered:!0})}p._hasHoverEvent=!0,o.emit("plotly_hover",{points:b||[n(f,_,s.eventDataKeys)],event:m.event})}}),d.on("mouseout",function(f){var w=o._fullLayout,b=o._fullData[p.index],_=m.select(this).datum();if(p._hasHoverEvent&&(f.originalEvent=m.event,o.emit("plotly_unhover",{points:[n(_,b,s.eventDataKeys)],event:m.event}),p._hasHoverEvent=!1),p._hasHoverLabel&&(x.loneUnhover(w._hoverlayer.node()),p._hasHoverLabel=!1),y){var T=d.select("path.surface");s.styleOne(T,_,b,{hovered:!1})}}),d.on("click",function(f){var w=o._fullLayout,b=o._fullData[p.index],_=i&&(r.isHierarchyRoot(f)||r.isLeaf(f)),T=r.getPtId(f),L=r.isEntry(f)?r.findEntryWithChild(c,T):r.findEntryWithLevel(c,T),A=r.getPtId(L),I={points:[n(f,b,s.eventDataKeys)],event:m.event};_||(I.nextLevel=A);var P=t.triggerHandler(o,"plotly_"+p.type+"click",I);if(P!==!1&&w.hovermode&&(o._hoverdata=[n(f,b,s.eventDataKeys)],x.click(o,m.event)),!_&&P!==!1&&!o._dragging&&!o._transitioning){v.call("_storeDirectGUIEdit",b,w._tracePreGUI[b.uid],{level:b.level});var S={data:[{level:A}],traces:[p.index]},E={frame:{redraw:!1,duration:s.transitionTime},transition:{duration:s.transitionTime,easing:s.transitionEasing},mode:"immediate",fromcurrent:!0};x.loneUnhover(w._hoverlayer.node()),v.call("animate",o,S,E)}})}},{"../../components/fx":407,"../../components/fx/helpers":403,"../../lib":515,"../../lib/events":504,"../../registry":647,"../pie/helpers":915,"./helpers":1064,"@plotly/d3":58}],1064:[function(g,Q,X){var m=g("../../lib"),v=g("../../components/color"),k=g("../../lib/setcursor"),x=g("../pie/helpers");function e(t){return t.data.data.pid}X.findEntryWithLevel=function(t,r){var l;return r&&t.eachAfter(function(n){if(X.getPtId(n)===r)return l=n.copy()}),l||t},X.findEntryWithChild=function(t,r){var l;return t.eachAfter(function(n){for(var d=n.children||[],u=0;u<d.length;u++){var o=d[u];if(X.getPtId(o)===r)return l=n.copy()}}),l||t},X.isEntry=function(t){return!t.parent},X.isLeaf=function(t){return!t.children},X.getPtId=function(t){return t.data.data.id},X.getPtLabel=function(t){return t.data.data.label},X.getValue=function(t){return t.value},X.isHierarchyRoot=function(t){return e(t)===""},X.setSliceCursor=function(t,r,l){var n=l.isTransitioning;if(!n){var d=t.datum();n=l.hideOnRoot&&X.isHierarchyRoot(d)||l.hideOnLeaves&&X.isLeaf(d)}k(t,n?null:"pointer")},X.getInsideTextFontKey=function(t,r,l,n,d){var u=(d||{}).onPathbar?"pathbar.textfont":"insidetextfont",o=l.data.data.i;return m.castOption(r,o,u+"."+t)||m.castOption(r,o,"textfont."+t)||n.size},X.getOutsideTextFontKey=function(t,r,l,n){var d=l.data.data.i;return m.castOption(r,d,"outsidetextfont."+t)||m.castOption(r,d,"textfont."+t)||n.size},X.isOutsideText=function(t,r){return!t._hasColorscale&&X.isHierarchyRoot(r)},X.determineTextFont=function(t,r,l,n){return X.isOutsideText(t,r)?function(d,u,o){return{color:X.getOutsideTextFontKey("color",d,u,o),family:X.getOutsideTextFontKey("family",d,u,o),size:X.getOutsideTextFontKey("size",d,u,o)}}(t,r,l):function(d,u,o,h){var s=(h||{}).onPathbar,a=u.data.data,p=a.i,c=m.castOption(d,p,(s?"pathbar.textfont":"insidetextfont")+".color");return!c&&d._input.textfont&&(c=m.castOption(d._input,p,"textfont.color")),{color:c||v.contrast(a.color),family:X.getInsideTextFontKey("family",d,u,o,h),size:X.getInsideTextFontKey("size",d,u,o,h)}}(t,r,l,n)},X.hasTransition=function(t){return!!(t&&t.duration>0)},X.getMaxDepth=function(t){return t.maxdepth>=0?t.maxdepth:1/0},X.isHeader=function(t,r){return!(X.isLeaf(t)||t.depth===r._maxDepth-1)},X.getParent=function(t,r){return X.findEntryWithLevel(t,e(r))},X.listPath=function(t,r){var l=t.parent;if(!l)return[];var n=r?[l.data[r]]:[l];return X.listPath(l,r).concat(n)},X.getPath=function(t){return X.listPath(t,"label").join("/")+"/"},X.formatValue=x.formatPieValue,X.formatPercent=function(t,r){var l=m.formatPercent(t,0);return l==="0%"&&(l=x.formatPiePercent(t,r)),l}},{"../../components/color":367,"../../lib":515,"../../lib/setcursor":536,"../pie/helpers":915}],1065:[function(g,Q,X){Q.exports={moduleType:"trace",name:"sunburst",basePlotModule:g("./base_plot"),categories:[],animatable:!0,attributes:g("./attributes"),layoutAttributes:g("./layout_attributes"),supplyDefaults:g("./defaults"),supplyLayoutDefaults:g("./layout_defaults"),calc:g("./calc").calc,crossTraceCalc:g("./calc").crossTraceCalc,plot:g("./plot").plot,style:g("./style").style,colorbar:g("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":1058,"./base_plot":1059,"./calc":1060,"./defaults":1062,"./layout_attributes":1066,"./layout_defaults":1067,"./plot":1068,"./style":1069}],1066:[function(g,Q,X){Q.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1067:[function(g,Q,X){var m=g("../../lib"),v=g("./layout_attributes");Q.exports=function(k,x){function e(t,r){return m.coerce(k,x,v,t,r)}e("sunburstcolorway",x.colorway),e("extendsunburstcolors")}},{"../../lib":515,"./layout_attributes":1066}],1068:[function(g,Q,X){var m=g("@plotly/d3"),v=g("d3-hierarchy"),k=g("d3-interpolate").interpolate,x=g("../../components/drawing"),e=g("../../lib"),t=g("../../lib/svg_text_utils"),r=g("../bar/uniform_text"),l=r.recordMinTextSize,n=r.clearMinTextSize,d=g("../pie/plot"),u=g("../pie/helpers").getRotationAngle,o=d.computeTransform,h=d.transformInsideText,s=g("./style").styleOne,a=g("../bar/style").resizeText,p=g("./fx"),c=g("./constants"),i=g("./helpers");function y(w,b,_,T){var L=w._context.staticPlot,A=w._fullLayout,I=!A.uniformtext.mode&&i.hasTransition(T),P=m.select(_).selectAll("g.slice"),S=b[0],E=S.trace,z=S.hierarchy,D=i.findEntryWithLevel(z,E.level),U=i.getMaxDepth(E),H=A._size,Y=E.domain,J=H.w*(Y.x[1]-Y.x[0]),W=H.h*(Y.y[1]-Y.y[0]),Z=.5*Math.min(J,W),re=S.cx=H.l+H.w*(Y.x[1]+Y.x[0])/2,V=S.cy=H.t+H.h*(1-Y.y[0])-W/2;if(!D)return P.remove();var B=null,j={};I&&P.each(function(oe){j[i.getPtId(oe)]={rpx0:oe.rpx0,rpx1:oe.rpx1,x0:oe.x0,x1:oe.x1,transform:oe.transform},!B&&i.isEntry(oe)&&(B=oe)});var ee=function(oe){return v.partition().size([2*Math.PI,oe.height+1])(oe)}(D).descendants(),N=D.height+1,$=0,K=U;S.hasMultipleRoots&&i.isHierarchyRoot(D)&&(ee=ee.slice(1),N-=1,$=1,K+=1),ee=ee.filter(function(oe){return oe.y1<=K});var te=u(E.rotation);te&&ee.forEach(function(oe){oe.x0+=te,oe.x1+=te});var ie=Math.min(N,U),le=function(oe){return(oe-$)/ie*Z},se=function(oe,de){return[oe*Math.cos(de),-oe*Math.sin(de)]},ve=function(oe){return e.pathAnnulus(oe.rpx0,oe.rpx1,oe.x0,oe.x1,re,V)},fe=function(oe){return re+f(oe)[0]*(oe.transform.rCenter||0)+(oe.transform.x||0)},ye=function(oe){return V+f(oe)[1]*(oe.transform.rCenter||0)+(oe.transform.y||0)};(P=P.data(ee,i.getPtId)).enter().append("g").classed("slice",!0),I?P.exit().transition().each(function(){var oe=m.select(this);oe.select("path.surface").transition().attrTween("d",function(de){var Te=function(Ee){var Me,De=i.getPtId(Ee),Ie=j[De],Oe=j[i.getPtId(D)];if(Oe){var Ze=(Ee.x1>Oe.x1?2*Math.PI:0)+te;Me=Ee.rpx1<Oe.rpx1?{x0:Ee.x0,x1:Ee.x1,rpx0:0,rpx1:0}:{x0:Ze,x1:Ze,rpx0:Ee.rpx0,rpx1:Ee.rpx1}}else{var Fe,Pe=i.getPtId(Ee.parent);P.each(function(vt){if(i.getPtId(vt)===Pe)return Fe=vt});var ze,Ge=Fe.children;Ge.forEach(function(vt,bt){if(i.getPtId(vt)===De)return ze=bt});var $e=Ge.length,ot=k(Fe.x0,Fe.x1);Me={rpx0:Z,rpx1:Z,x0:ot(ze/$e),x1:ot((ze+1)/$e)}}return k(Ie,Me)}(de);return function(Ee){return ve(Te(Ee))}}),oe.select("g.slicetext").attr("opacity",0)}).remove():P.exit().remove(),P.order();var Ae=null;if(I&&B){var pe=i.getPtId(B);P.each(function(oe){Ae===null&&i.getPtId(oe)===pe&&(Ae=oe.x1)})}var ge=P;function we(oe){var de=oe.parent,Te=j[i.getPtId(de)],Ee={};if(Te){var Me=de.children,De=Me.indexOf(oe),Ie=Me.length,Oe=k(Te.x0,Te.x1);Ee.x0=Oe(De/Ie),Ee.x1=Oe(De/Ie)}else Ee.x0=Ee.x1=0;return Ee}I&&(ge=ge.transition().each("end",function(){var oe=m.select(this);i.setSliceCursor(oe,w,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),ge.each(function(oe){var de=m.select(this),Te=e.ensureSingle(de,"path","surface",function(Ze){Ze.style("pointer-events",L?"none":"all")});oe.rpx0=le(oe.y0),oe.rpx1=le(oe.y1),oe.xmid=(oe.x0+oe.x1)/2,oe.pxmid=se(oe.rpx1,oe.xmid),oe.midangle=-(oe.xmid-Math.PI/2),oe.startangle=-(oe.x0-Math.PI/2),oe.stopangle=-(oe.x1-Math.PI/2),oe.halfangle=.5*Math.min(e.angleDelta(oe.x0,oe.x1)||Math.PI,Math.PI),oe.ring=1-oe.rpx0/oe.rpx1,oe.rInscribed=function(Ze){return Ze.rpx0===0&&e.isFullCircle([Ze.x0,Ze.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(Ze.halfangle)),Ze.ring/2))}(oe),I?Te.transition().attrTween("d",function(Ze){var Fe=function(Pe){var ze,Ge=j[i.getPtId(Pe)],$e={x0:Pe.x0,x1:Pe.x1,rpx0:Pe.rpx0,rpx1:Pe.rpx1};if(Ge)ze=Ge;else if(B)if(Pe.parent)if(Ae){var ot=(Pe.x1>Ae?2*Math.PI:0)+te;ze={x0:ot,x1:ot}}else ze={rpx0:Z,rpx1:Z},e.extendFlat(ze,we(Pe));else ze={rpx0:0,rpx1:0};else ze={x0:te,x1:te};return k(ze,$e)}(Ze);return function(Pe){return ve(Fe(Pe))}}):Te.attr("d",ve),de.call(p,D,w,b,{eventDataKeys:c.eventDataKeys,transitionTime:c.CLICK_TRANSITION_TIME,transitionEasing:c.CLICK_TRANSITION_EASING}).call(i.setSliceCursor,w,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:w._transitioning}),Te.call(s,oe,E);var Ee=e.ensureSingle(de,"g","slicetext"),Me=e.ensureSingle(Ee,"text","",function(Ze){Ze.attr("data-notex",1)}),De=e.ensureUniformFontSize(w,i.determineTextFont(E,oe,A.font));Me.text(X.formatSliceLabel(oe,D,E,b,A)).classed("slicetext",!0).attr("text-anchor","middle").call(x.font,De).call(t.convertToTspans,w);var Ie=x.bBox(Me.node());oe.transform=h(Ie,oe,S),oe.transform.targetX=fe(oe),oe.transform.targetY=ye(oe);var Oe=function(Ze,Fe){var Pe=Ze.transform;return o(Pe,Fe),Pe.fontSize=De.size,l(E.type,Pe,A),e.getTextTransform(Pe)};I?Me.transition().attrTween("transform",function(Ze){var Fe=function(Pe){var ze,Ge=j[i.getPtId(Pe)],$e=Pe.transform;if(Ge)ze=Ge;else if(ze={rpx1:Pe.rpx1,transform:{textPosAngle:$e.textPosAngle,scale:0,rotate:$e.rotate,rCenter:$e.rCenter,x:$e.x,y:$e.y}},B)if(Pe.parent)if(Ae){var ot=Pe.x1>Ae?2*Math.PI:0;ze.x0=ze.x1=ot}else e.extendFlat(ze,we(Pe));else ze.x0=ze.x1=te;else ze.x0=ze.x1=te;var vt=k(ze.transform.textPosAngle,Pe.transform.textPosAngle),bt=k(ze.rpx1,Pe.rpx1),yt=k(ze.x0,Pe.x0),tt=k(ze.x1,Pe.x1),Ke=k(ze.transform.scale,$e.scale),mt=k(ze.transform.rotate,$e.rotate),Ft=$e.rCenter===0?3:ze.transform.rCenter===0?1/3:1,Vt=k(ze.transform.rCenter,$e.rCenter);return function(Xt){var Gt=bt(Xt),nr=yt(Xt),It=tt(Xt),Be=function(he){return Vt(Math.pow(he,Ft))}(Xt),He={pxmid:se(Gt,(nr+It)/2),rpx1:Gt,transform:{textPosAngle:vt(Xt),rCenter:Be,x:$e.x,y:$e.y}};return l(E.type,$e,A),{transform:{targetX:fe(He),targetY:ye(He),scale:Ke(Xt),rotate:mt(Xt),rCenter:Be}}}}(Ze);return function(Pe){return Oe(Fe(Pe),Ie)}}):Me.attr("transform",Oe(oe,Ie))})}function f(w){return b=w.rpx1,_=w.transform.textPosAngle,[b*Math.sin(_),-b*Math.cos(_)];var b,_}X.plot=function(w,b,_,T){var L,A,I=w._fullLayout,P=I._sunburstlayer,S=!_,E=!I.uniformtext.mode&&i.hasTransition(_);n("sunburst",I),(L=P.selectAll("g.trace.sunburst").data(b,function(z){return z[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),L.order(),E?(T&&(A=T()),m.transition().duration(_.duration).ease(_.easing).each("end",function(){A&&A()}).each("interrupt",function(){A&&A()}).each(function(){P.selectAll("g.trace").each(function(z){y(w,z,this,_)})})):(L.each(function(z){y(w,z,this,_)}),I.uniformtext.mode&&a(w,I._sunburstlayer.selectAll(".trace"),"sunburst")),S&&L.exit().remove()},X.formatSliceLabel=function(w,b,_,T,L){var A=_.texttemplate,I=_.textinfo;if(!(A||I&&I!=="none"))return"";var P=L.separators,S=T[0],E=w.data.data,z=S.hierarchy,D=i.isHierarchyRoot(w),U=i.getParent(z,w),H=i.getValue(w);if(!A){var Y,J=I.split("+"),W=function(K){return J.indexOf(K)!==-1},Z=[];if(W("label")&&E.label&&Z.push(E.label),E.hasOwnProperty("v")&&W("value")&&Z.push(i.formatValue(E.v,P)),!D){W("current path")&&Z.push(i.getPath(w.data));var re=0;W("percent parent")&&re++,W("percent entry")&&re++,W("percent root")&&re++;var V=re>1;if(re){var B,j=function(K){Y=i.formatPercent(B,P),V&&(Y+=" of "+K),Z.push(Y)};W("percent parent")&&!D&&(B=H/i.getValue(U),j("parent")),W("percent entry")&&(B=H/i.getValue(b),j("entry")),W("percent root")&&(B=H/i.getValue(z),j("root"))}}return W("text")&&(Y=e.castOption(_,E.i,"text"),e.isValidTextValue(Y)&&Z.push(Y)),Z.join("<br>")}var ee=e.castOption(_,E.i,"texttemplate");if(!ee)return"";var N={};E.label&&(N.label=E.label),E.hasOwnProperty("v")&&(N.value=E.v,N.valueLabel=i.formatValue(E.v,P)),N.currentPath=i.getPath(w.data),D||(N.percentParent=H/i.getValue(U),N.percentParentLabel=i.formatPercent(N.percentParent,P),N.parent=i.getPtLabel(U)),N.percentEntry=H/i.getValue(b),N.percentEntryLabel=i.formatPercent(N.percentEntry,P),N.entry=i.getPtLabel(b),N.percentRoot=H/i.getValue(z),N.percentRootLabel=i.formatPercent(N.percentRoot,P),N.root=i.getPtLabel(z),E.hasOwnProperty("color")&&(N.color=E.color);var $=e.castOption(_,E.i,"text");return(e.isValidTextValue($)||$==="")&&(N.text=$),N.customdata=e.castOption(_,E.i,"customdata"),e.texttemplateString(ee,N,L._d3locale,N,_._meta||{})}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../bar/style":671,"../bar/uniform_text":673,"../pie/helpers":915,"../pie/plot":919,"./constants":1061,"./fx":1063,"./helpers":1064,"./style":1069,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1069:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../components/color"),k=g("../../lib"),x=g("../bar/uniform_text").resizeText;function e(t,r,l){var n=r.data.data,d=!r.children,u=n.i,o=k.castOption(l,u,"marker.line.color")||v.defaultLine,h=k.castOption(l,u,"marker.line.width")||0;t.style("stroke-width",h).call(v.fill,n.color).call(v.stroke,o).style("opacity",d?l.leaf.opacity:null)}Q.exports={style:function(t){var r=t._fullLayout._sunburstlayer.selectAll(".trace");x(t,r,"sunburst"),r.each(function(l){var n=m.select(this),d=l[0].trace;n.style("opacity",d.opacity),n.selectAll("path.surface").each(function(u){m.select(this).call(e,u,d)})})},styleOne:e}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"@plotly/d3":58}],1070:[function(g,Q,X){var m=g("../../components/color"),v=g("../../components/colorscale/attributes"),k=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=g("../../plots/template_attributes").hovertemplateAttrs,e=g("../../plots/attributes"),t=g("../../lib/extend").extendFlat,r=g("../../plot_api/edit_types").overrideAll;function l(d){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:m.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:m.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var n=Q.exports=r(t({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:x(),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},v("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:l(),y:l(),z:l()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:t({},v.zauto,{}),zmin:t({},v.zmin,{}),zmax:t({},v.zmax,{})},hoverinfo:t({},e.hoverinfo),showlegend:t({},e.showlegend,{dflt:!1})}),"calc","nested");n.x.editType=n.y.editType=n.z.editType="calc+clearAxisTypes",n.transforms=void 0},{"../../components/color":367,"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642}],1071:[function(g,Q,X){var m=g("../../components/colorscale/calc");Q.exports=function(v,k){k.surfacecolor?m(v,k,{vals:k.surfacecolor,containerStr:"",cLetter:"c"}):m(v,k,{vals:k.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],1072:[function(g,Q,X){var m=g("../../../stackgl_modules").gl_surface3d,v=g("../../../stackgl_modules").ndarray,k=g("../../../stackgl_modules").ndarray_linear_interpolate.d2,x=g("../heatmap/interp2d"),e=g("../heatmap/find_empties"),t=g("../../lib").isArrayOrTypedArray,r=g("../../lib/gl_format_color").parseColorScale,l=g("../../lib/str2rgbarray"),n=g("../../components/colorscale").extractOpts;function d(_,T,L){this.scene=_,this.uid=L,this.surface=T,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var u=d.prototype;u.getXat=function(_,T,L,A){var I=t(this.data.x)?t(this.data.x[0])?this.data.x[T][_]:this.data.x[_]:_;return L===void 0?I:A.d2l(I,0,L)},u.getYat=function(_,T,L,A){var I=t(this.data.y)?t(this.data.y[0])?this.data.y[T][_]:this.data.y[T]:T;return L===void 0?I:A.d2l(I,0,L)},u.getZat=function(_,T,L,A){var I=this.data.z[T][_];return I===null&&this.data.connectgaps&&this.data._interpolatedZ&&(I=this.data._interpolatedZ[T][_]),L===void 0?I:A.d2l(I,0,L)},u.handlePick=function(_){if(_.object===this.surface){var T=(_.data.index[0]-1)/this.dataScaleX-1,L=(_.data.index[1]-1)/this.dataScaleY-1,A=Math.max(Math.min(Math.round(T),this.data.z[0].length-1),0),I=Math.max(Math.min(Math.round(L),this.data._ylength-1),0);_.index=[A,I],_.traceCoordinate=[this.getXat(A,I),this.getYat(A,I),this.getZat(A,I)],_.dataCoordinate=[this.getXat(A,I,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(A,I,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(A,I,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var P=0;P<3;P++){var S=_.dataCoordinate[P];S!=null&&(_.dataCoordinate[P]*=this.scene.dataScale[P])}var E=this.data.hovertext||this.data.text;return Array.isArray(E)&&E[I]&&E[I][A]!==void 0?_.textLabel=E[I][A]:_.textLabel=E||"",_.data.dataCoordinate=_.dataCoordinate.slice(),this.surface.highlight(_.data),this.scene.glplot.spikes.position=_.dataCoordinate,!0}};var o=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function h(_,T){if(_<T)return 0;for(var L=0;Math.floor(_%T)===0;)_/=T,L++;return L}function s(_){for(var T=[],L=0;L<o.length;L++){var A=o[L];T.push(h(_,A))}return T}function a(_){for(var T=s(_),L=_,A=0;A<o.length;A++)if(T[A]>0){L=o[A];break}return L}function p(_,T){if(!(_<1||T<1)){for(var L=s(_),A=s(T),I=1,P=0;P<o.length;P++)I*=Math.pow(o[P],Math.max(L[P],A[P]));return I}}u.calcXnums=function(_){var T,L=[];for(T=1;T<_;T++){var A=this.getXat(T-1,0),I=this.getXat(T,0);L[T-1]=I!==A&&A!=null&&I!=null?Math.abs(I-A):0}var P=0;for(T=1;T<_;T++)P+=L[T-1];for(T=1;T<_;T++)L[T-1]===0?L[T-1]=1:L[T-1]=Math.round(P/L[T-1]);return L},u.calcYnums=function(_){var T,L=[];for(T=1;T<_;T++){var A=this.getYat(0,T-1),I=this.getYat(0,T);L[T-1]=I!==A&&A!=null&&I!=null?Math.abs(I-A):0}var P=0;for(T=1;T<_;T++)P+=L[T-1];for(T=1;T<_;T++)L[T-1]===0?L[T-1]=1:L[T-1]=Math.round(P/L[T-1]);return L};var c=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],i=c[9],y=c[13];function f(_,T,L){var A=L[8]+L[2]*T[0]+L[5]*T[1];return _[0]=(L[6]+L[0]*T[0]+L[3]*T[1])/A,_[1]=(L[7]+L[1]*T[0]+L[4]*T[1])/A,_}function w(_,T,L){return function(A,I,P,S){for(var E=[0,0],z=A.shape[0],D=A.shape[1],U=0;U<z;U++)for(var H=0;H<D;H++)P(E,[U,H],S),A.set(U,H,k(I,E[0],E[1]))}(_,T,f,L),_}function b(_,T){for(var L=!1,A=0;A<_.length;A++)if(T===_[A]){L=!0;break}L===!1&&_.push(T)}u.estimateScale=function(_,T){for(var L=1+function(I){if(I.length!==0){for(var P=1,S=0;S<I.length;S++)P=p(P,I[S]);return P}}(T===0?this.calcXnums(_):this.calcYnums(_));L<i;)L*=2;for(;L>y;)L--,L/=a(L),++L<i&&(L=y);var A=Math.round(L/_);return A>1?A:1},u.refineCoords=function(_){for(var T=this.dataScaleX,L=this.dataScaleY,A=_[0].shape[0],I=_[0].shape[1],P=0|Math.floor(_[0].shape[0]*T+1),S=0|Math.floor(_[0].shape[1]*L+1),E=1+A+1,z=1+I+1,D=v(new Float32Array(E*z),[E,z]),U=[1/T,0,0,0,1/L,0,0,0,1],H=0;H<_.length;++H){this.surface.padField(D,_[H]);var Y=v(new Float32Array(P*S),[P,S]);w(Y,D,U),_[H]=Y}},u.setContourLevels=function(){var _,T,L,A=[[],[],[]],I=[!1,!1,!1],P=!1;for(_=0;_<3;++_)if(this.showContour[_]&&(P=!0,this.contourSize[_]>0&&this.contourStart[_]!==null&&this.contourEnd[_]!==null&&this.contourEnd[_]>this.contourStart[_]))for(I[_]=!0,T=this.contourStart[_];T<this.contourEnd[_];T+=this.contourSize[_])L=T*this.scene.dataScale[_],b(A[_],L);if(P){var S=[[],[],[]];for(_=0;_<3;++_)this.showContour[_]&&(S[_]=I[_]?A[_]:this.scene.contourLevels[_]);this.surface.update({levels:S})}},u.update=function(_){var T,L,A,I,P=this.scene,S=P.fullSceneLayout,E=this.surface,z=r(_),D=P.dataScale,U=_.z[0].length,H=_._ylength,Y=P.contourLevels;this.data=_;var J=[];for(T=0;T<3;T++)for(J[T]=[],L=0;L<U;L++)J[T][L]=[];for(L=0;L<U;L++)for(A=0;A<H;A++)J[0][L][A]=this.getXat(L,A,_.xcalendar,S.xaxis),J[1][L][A]=this.getYat(L,A,_.ycalendar,S.yaxis),J[2][L][A]=this.getZat(L,A,_.zcalendar,S.zaxis);if(_.connectgaps)for(_._emptypoints=e(J[2]),x(J[2],_._emptypoints),_._interpolatedZ=[],L=0;L<U;L++)for(_._interpolatedZ[L]=[],A=0;A<H;A++)_._interpolatedZ[L][A]=J[2][L][A];for(T=0;T<3;T++)for(L=0;L<U;L++)for(A=0;A<H;A++)(I=J[T][L][A])==null?J[T][L][A]=NaN:I=J[T][L][A]*=D[T];for(T=0;T<3;T++)for(L=0;L<U;L++)for(A=0;A<H;A++)(I=J[T][L][A])!=null&&(this.minValues[T]>I&&(this.minValues[T]=I),this.maxValues[T]<I&&(this.maxValues[T]=I));for(T=0;T<3;T++)this.objectOffset[T]=.5*(this.minValues[T]+this.maxValues[T]);for(T=0;T<3;T++)for(L=0;L<U;L++)for(A=0;A<H;A++)(I=J[T][L][A])!=null&&(J[T][L][A]-=this.objectOffset[T]);var W=[v(new Float32Array(U*H),[U,H]),v(new Float32Array(U*H),[U,H]),v(new Float32Array(U*H),[U,H])];for(T=0;T<3;T++)for(L=0;L<U;L++)for(A=0;A<H;A++)W[T].set(L,A,J[T][L][A]);J=[];var Z={colormap:z,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!_.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:_.opacityscale,opacity:_.opacity},re=n(_);if(Z.intensityBounds=[re.min,re.max],_.surfacecolor){var V=v(new Float32Array(U*H),[U,H]);for(L=0;L<U;L++)for(A=0;A<H;A++)V.set(L,A,_.surfacecolor[A][L]);W.push(V)}else Z.intensityBounds[0]*=D[2],Z.intensityBounds[1]*=D[2];(y<W[0].shape[0]||y<W[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(W[0].shape[0],0),this.dataScaleY=this.estimateScale(W[0].shape[1],1),this.dataScaleX===1&&this.dataScaleY===1||this.refineCoords(W)),_.surfacecolor&&(Z.intensity=W.pop());var B=[!0,!0,!0],j=["x","y","z"];for(T=0;T<3;++T){var ee=_.contours[j[T]];B[T]=ee.highlight,Z.showContour[T]=ee.show||ee.highlight,Z.showContour[T]&&(Z.contourProject[T]=[ee.project.x,ee.project.y,ee.project.z],ee.show?(this.showContour[T]=!0,Z.levels[T]=Y[T],E.highlightColor[T]=Z.contourColor[T]=l(ee.color),ee.usecolormap?E.highlightTint[T]=Z.contourTint[T]=0:E.highlightTint[T]=Z.contourTint[T]=1,Z.contourWidth[T]=ee.width,this.contourStart[T]=ee.start,this.contourEnd[T]=ee.end,this.contourSize[T]=ee.size):(this.showContour[T]=!1,this.contourStart[T]=null,this.contourEnd[T]=null,this.contourSize[T]=0),ee.highlight&&(Z.dynamicColor[T]=l(ee.highlightcolor),Z.dynamicWidth[T]=ee.highlightwidth))}(function(N){var $=N[0].rgb,K=N[N.length-1].rgb;return $[0]===K[0]&&$[1]===K[1]&&$[2]===K[2]&&$[3]===K[3]})(z)&&(Z.vertexColor=!0),Z.objectOffset=this.objectOffset,Z.coords=W,E.update(Z),E.visible=_.visible,E.enableDynamic=B,E.enableHighlight=B,E.snapToData=!0,"lighting"in _&&(E.ambientLight=_.lighting.ambient,E.diffuseLight=_.lighting.diffuse,E.specularLight=_.lighting.specular,E.roughness=_.lighting.roughness,E.fresnel=_.lighting.fresnel),"lightposition"in _&&(E.lightPosition=[_.lightposition.x,_.lightposition.y,_.lightposition.z])},u.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},Q.exports=function(_,T){var L=_.glplot.gl,A=m({gl:L}),I=new d(_,A,T.uid);return A._trace=I,I.update(T),_.glplot.add(A),I}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../heatmap/find_empties":807,"../heatmap/interp2d":810}],1073:[function(g,Q,X){var m=g("../../registry"),v=g("../../lib"),k=g("../../components/colorscale/defaults"),x=g("./attributes");function e(r,l,n,d){var u=d("opacityscale");u==="max"?l.opacityscale=[[0,.1],[1,1]]:u==="min"?l.opacityscale=[[0,1],[1,.1]]:u==="extremes"?l.opacityscale=function(o,h){for(var s=[],a=0;a<32;a++){var p=a/31,c=h+(1-h)*(1-Math.pow(Math.sin(o*p*Math.PI),2));s.push([p,Math.max(0,Math.min(1,c))])}return s}(1,.1):function(o){var h=0;if(!Array.isArray(o)||o.length<2||!o[0]||!o[o.length-1]||+o[0][0]!=0||+o[o.length-1][0]!=1)return!1;for(var s=0;s<o.length;s++){var a=o[s];if(a.length!==2||+a[0]<h)return!1;h=+a[0]}return!0}(u)||(l.opacityscale=void 0)}function t(r,l,n){l in r&&!(n in r)&&(r[n]=r[l])}Q.exports={supplyDefaults:function(r,l,n,d){var u,o;function h(b,_){return v.coerce(r,l,x,b,_)}var s=h("x"),a=h("y"),p=h("z");if(!p||!p.length||s&&s.length<1||a&&a.length<1)l.visible=!1;else{l._xlength=Array.isArray(s)&&v.isArrayOrTypedArray(s[0])?p.length:p[0].length,l._ylength=p.length,m.getComponentMethod("calendars","handleTraceDefaults")(r,l,["x","y","z"],d),h("text"),h("hovertext"),h("hovertemplate"),h("xhoverformat"),h("yhoverformat"),h("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(b){h(b)});var c=h("surfacecolor"),i=["x","y","z"];for(u=0;u<3;++u){var y="contours."+i[u],f=h(y+".show"),w=h(y+".highlight");if(f||w)for(o=0;o<3;++o)h(y+".project."+i[o]);f&&(h(y+".color"),h(y+".width"),h(y+".usecolormap")),w&&(h(y+".highlightcolor"),h(y+".highlightwidth")),h(y+".start"),h(y+".end"),h(y+".size")}c||(t(r,"zmin","cmin"),t(r,"zmax","cmax"),t(r,"zauto","cauto")),k(r,l,d,h,{prefix:"",cLetter:"c"}),e(r,l,d,h),l._length=null}},opacityscaleDefaults:e}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":1070}],1074:[function(g,Q,X){Q.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:g("./calc"),plot:g("./convert"),moduleType:"trace",name:"surface",basePlotModule:g("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":1070,"./calc":1071,"./convert":1072,"./defaults":1073}],1075:[function(g,Q,X){var m=g("../../components/annotations/attributes"),v=g("../../lib/extend").extendFlat,k=g("../../plot_api/edit_types").overrideAll,x=g("../../plots/font_attributes"),e=g("../../plots/domain").attributes,t=g("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers;(Q.exports=k({domain:e({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:t("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:v({},m.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:v({},x({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:t("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:v({},m.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:v({},x({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":350,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/axis_format_attributes":569,"../../plots/domain":593,"../../plots/font_attributes":594}],1076:[function(g,Q,X){var m=g("../../plots/get_data").getModuleCalcData,v=g("./plot");X.name="table",X.plot=function(k){var x=m(k.calcdata,"table")[0];x.length&&v(k,x)},X.clean=function(k,x,e,t){var r=t._has&&t._has("table"),l=x._has&&x._has("table");r&&!l&&t._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":602,"./plot":1083}],1077:[function(g,Q,X){var m=g("../../lib/gup").wrap;Q.exports=function(){return m({})}},{"../../lib/gup":512}],1078:[function(g,Q,X){Q.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1079:[function(g,Q,X){var m=g("./constants"),v=g("../../lib/extend").extendFlat,k=g("fast-isnumeric");function x(u){if(Array.isArray(u)){for(var o=0,h=0;h<u.length;h++)o=Math.max(o,x(u[h]));return o}return u}function e(u,o){return u+o}function t(u){var o,h=u.slice(),s=1/0,a=0;for(o=0;o<h.length;o++)Array.isArray(h[o])||(h[o]=[h[o]]),s=Math.min(s,h[o].length),a=Math.max(a,h[o].length);if(s!==a)for(o=0;o<h.length;o++){var p=a-h[o].length;p&&(h[o]=h[o].concat(r(p)))}return h}function r(u){for(var o=new Array(u),h=0;h<u;h++)o[h]="";return o}function l(u){return u.calcdata.columns.reduce(function(o,h){return h.xIndex<u.xIndex?o+h.columnWidth:o},0)}function n(u,o){return Object.keys(u).map(function(h){return v({},u[h],{auxiliaryBlocks:o})})}function d(u,o){for(var h,s={},a=0,p=0,c={firstRowIndex:null,lastRowIndex:null,rows:[]},i=0,y=0,f=0;f<u.length;f++)h=u[f],c.rows.push({rowIndex:f,rowHeight:h}),((p+=h)>=o||f===u.length-1)&&(s[a]=c,c.key=y++,c.firstRowIndex=i,c.lastRowIndex=f,c={firstRowIndex:null,lastRowIndex:null,rows:[]},a+=p,i=f+1,p=0);return s}Q.exports=function(u,o){var h=t(o.cells.values),s=function(D){return D.slice(o.header.values.length,D.length)},a=t(o.header.values);a.length&&!a[0].length&&(a[0]=[""],a=t(a));var p=a.concat(s(h).map(function(){return r((a[0]||[""]).length)})),c=o.domain,i=Math.floor(u._fullLayout._size.w*(c.x[1]-c.x[0])),y=Math.floor(u._fullLayout._size.h*(c.y[1]-c.y[0])),f=o.header.values.length?p[0].map(function(){return o.header.height}):[m.emptyHeaderHeight],w=h.length?h[0].map(function(){return o.cells.height}):[],b=f.reduce(e,0),_=d(w,y-b+m.uplift),T=n(d(f,b),[]),L=n(_,T),A={},I=o._fullInput.columnorder.concat(s(h.map(function(D,U){return U}))),P=p.map(function(D,U){var H=Array.isArray(o.columnwidth)?o.columnwidth[Math.min(U,o.columnwidth.length-1)]:o.columnwidth;return k(H)?Number(H):1}),S=P.reduce(e,0);P=P.map(function(D){return D/S*i});var E=Math.max(x(o.header.line.width),x(o.cells.line.width)),z={key:o.uid+u._context.staticPlot,translateX:c.x[0]*u._fullLayout._size.w,translateY:u._fullLayout._size.h*(1-c.y[1]),size:u._fullLayout._size,width:i,maxLineWidth:E,height:y,columnOrder:I,groupHeight:y,rowBlocks:L,headerRowBlocks:T,scrollY:0,cells:v({},o.cells,{values:h}),headerCells:v({},o.header,{values:p}),gdColumns:p.map(function(D){return D[0]}),gdColumnsOriginalOrder:p.map(function(D){return D[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:p.map(function(D,U){var H=A[D];return A[D]=(H||0)+1,{key:D+"__"+A[D],label:D,specIndex:U,xIndex:I[U],xScale:l,x:void 0,calcdata:void 0,columnWidth:P[U]}})};return z.columns.forEach(function(D){D.calcdata=z,D.x=l(D)}),z}},{"../../lib/extend":505,"./constants":1078,"fast-isnumeric":190}],1080:[function(g,Q,X){var m=g("../../lib/extend").extendFlat;X.splitToPanels=function(v){var k=[0,0],x=m({},v,{key:"header",type:"header",page:0,prevPages:k,currentRepaint:[null,null],dragHandle:!0,values:v.calcdata.headerCells.values[v.specIndex],rowBlocks:v.calcdata.headerRowBlocks,calcdata:m({},v.calcdata,{cells:v.calcdata.headerCells})});return[m({},v,{key:"cells1",type:"cells",page:0,prevPages:k,currentRepaint:[null,null],dragHandle:!1,values:v.calcdata.cells.values[v.specIndex],rowBlocks:v.calcdata.rowBlocks}),m({},v,{key:"cells2",type:"cells",page:1,prevPages:k,currentRepaint:[null,null],dragHandle:!1,values:v.calcdata.cells.values[v.specIndex],rowBlocks:v.calcdata.rowBlocks}),x]},X.splitToCells=function(v){var k=function(x){var e=x.rowBlocks[x.page],t=e?e.rows[0].rowIndex:0,r=e?t+e.rows.length:0;return[t,r]}(v);return(v.values||[]).slice(k[0],k[1]).map(function(x,e){return{keyWithinBlock:e+(typeof x=="string"&&x.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:k[0]+e,column:v,calcdata:v.calcdata,page:v.page,rowBlocks:v.rowBlocks,value:x}})}},{"../../lib/extend":505}],1081:[function(g,Q,X){var m=g("../../lib"),v=g("./attributes"),k=g("../../plots/domain").defaults;Q.exports=function(x,e,t,r){function l(n,d){return m.coerce(x,e,v,n,d)}k(e,r,l),l("columnwidth"),l("header.values"),l("header.format"),l("header.align"),l("header.prefix"),l("header.suffix"),l("header.height"),l("header.line.width"),l("header.line.color"),l("header.fill.color"),m.coerceFont(l,"header.font",m.extendFlat({},r.font)),function(n,d){for(var u=n.columnorder||[],o=n.header.values.length,h=u.slice(0,o),s=h.slice().sort(function(c,i){return c-i}),a=h.map(function(c){return s.indexOf(c)}),p=a.length;p<o;p++)a.push(p);d("columnorder",a)}(e,l),l("cells.values"),l("cells.format"),l("cells.align"),l("cells.prefix"),l("cells.suffix"),l("cells.height"),l("cells.line.width"),l("cells.line.color"),l("cells.fill.color"),m.coerceFont(l,"cells.font",m.extendFlat({},r.font)),e._length=null}},{"../../lib":515,"../../plots/domain":593,"./attributes":1075}],1082:[function(g,Q,X){Q.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),calc:g("./calc"),plot:g("./plot"),moduleType:"trace",name:"table",basePlotModule:g("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1075,"./base_plot":1076,"./calc":1077,"./defaults":1081,"./plot":1083}],1083:[function(g,Q,X){var m=g("./constants"),v=g("@plotly/d3"),k=g("../../lib").numberFormat,x=g("../../lib/gup"),e=g("../../components/drawing"),t=g("../../lib/svg_text_utils"),r=g("../../lib").raiseToTop,l=g("../../lib").strTranslate,n=g("../../lib").cancelTransition,d=g("./data_preparation_helper"),u=g("./data_split_helpers"),o=g("../../components/color");function h(W){return Math.ceil(W.calcdata.maxLineWidth/2)}function s(W,Z){return"clip"+W._fullLayout._uid+"_scrollAreaBottomClip_"+Z.key}function a(W,Z){return"clip"+W._fullLayout._uid+"_columnBoundaryClippath_"+Z.calcdata.key+"_"+Z.specIndex}function p(W){return[].concat.apply([],W.map(function(Z){return Z})).map(function(Z){return Z.__data__})}function c(W,Z,re){var V=W.selectAll("."+m.cn.scrollbarKit).data(x.repeat,x.keyFun);V.enter().append("g").classed(m.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),V.each(function($){var K=$.scrollbarState;K.totalHeight=function(te){var ie=te.rowBlocks;return U(ie,ie.length-1)+(ie.length?H(ie[ie.length-1],1/0):1)}($),K.scrollableAreaHeight=$.groupHeight-L($),K.currentlyVisibleHeight=Math.min(K.totalHeight,K.scrollableAreaHeight),K.ratio=K.currentlyVisibleHeight/K.totalHeight,K.barLength=Math.max(K.ratio*K.currentlyVisibleHeight,m.goldenRatio*m.scrollbarWidth),K.barWiggleRoom=K.currentlyVisibleHeight-K.barLength,K.wiggleRoom=Math.max(0,K.totalHeight-K.scrollableAreaHeight),K.topY=K.barWiggleRoom===0?0:$.scrollY/K.wiggleRoom*K.barWiggleRoom,K.bottomY=K.topY+K.barLength,K.dragMultiplier=K.wiggleRoom/K.barWiggleRoom}).attr("transform",function($){var K=$.width+m.scrollbarWidth/2+m.scrollbarOffset;return l(K,L($))});var B=V.selectAll("."+m.cn.scrollbar).data(x.repeat,x.keyFun);B.enter().append("g").classed(m.cn.scrollbar,!0);var j=B.selectAll("."+m.cn.scrollbarSlider).data(x.repeat,x.keyFun);j.enter().append("g").classed(m.cn.scrollbarSlider,!0),j.attr("transform",function($){return l(0,$.scrollbarState.topY||0)});var ee=j.selectAll("."+m.cn.scrollbarGlyph).data(x.repeat,x.keyFun);ee.enter().append("line").classed(m.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",m.scrollbarWidth).attr("stroke-linecap","round").attr("y1",m.scrollbarWidth/2),ee.attr("y2",function($){return $.scrollbarState.barLength-m.scrollbarWidth/2}).attr("stroke-opacity",function($){return $.columnDragInProgress||!$.scrollbarState.barWiggleRoom||re?0:.4}),ee.transition().delay(0).duration(0),ee.transition().delay(m.scrollbarHideDelay).duration(m.scrollbarHideDuration).attr("stroke-opacity",0);var N=B.selectAll("."+m.cn.scrollbarCaptureZone).data(x.repeat,x.keyFun);N.enter().append("line").classed(m.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",m.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function($){var K=v.event.y,te=this.getBoundingClientRect(),ie=$.scrollbarState,le=K-te.top,se=v.scale.linear().domain([0,ie.scrollableAreaHeight]).range([0,ie.totalHeight]).clamp(!0);ie.topY<=le&&le<=ie.bottomY||I(Z,W,null,se(le-ie.barLength/2))($)}).call(v.behavior.drag().origin(function($){return v.event.stopPropagation(),$.scrollbarState.scrollbarScrollInProgress=!0,$}).on("drag",I(Z,W)).on("dragend",function(){})),N.attr("y2",function($){return $.scrollbarState.scrollableAreaHeight}),Z._context.staticPlot&&(ee.remove(),N.remove())}function i(W,Z,re,V){var B=function(ee){var N=ee.selectAll("."+m.cn.columnCell).data(u.splitToCells,function($){return $.keyWithinBlock});return N.enter().append("g").classed(m.cn.columnCell,!0),N.exit().remove(),N}(function(ee){var N=ee.selectAll("."+m.cn.columnCells).data(x.repeat,x.keyFun);return N.enter().append("g").classed(m.cn.columnCells,!0),N.exit().remove(),N}(re));(function(ee){ee.each(function(N,$){var K=N.calcdata.cells.font,te=N.column.specIndex,ie={size:w(K.size,te,$),color:w(K.color,te,$),family:w(K.family,te,$)};N.rowNumber=N.key,N.align=w(N.calcdata.cells.align,te,$),N.cellBorderWidth=w(N.calcdata.cells.line.width,te,$),N.font=ie})})(B),function(ee){ee.attr("width",function(N){return N.column.columnWidth}).attr("stroke-width",function(N){return N.cellBorderWidth}).each(function(N){var $=v.select(this);o.stroke($,w(N.calcdata.cells.line.color,N.column.specIndex,N.rowNumber)),o.fill($,w(N.calcdata.cells.fill.color,N.column.specIndex,N.rowNumber))})}(function(ee){var N=ee.selectAll("."+m.cn.cellRect).data(x.repeat,function($){return $.keyWithinBlock});return N.enter().append("rect").classed(m.cn.cellRect,!0),N}(B));var j=function(ee){var N=ee.selectAll("."+m.cn.cellText).data(x.repeat,function($){return $.keyWithinBlock});return N.enter().append("text").classed(m.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){v.event.stopPropagation()}),N}(function(ee){var N=ee.selectAll("."+m.cn.cellTextHolder).data(x.repeat,function($){return $.keyWithinBlock});return N.enter().append("g").classed(m.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),N}(B));(function(ee){ee.each(function(N){e.font(v.select(this),N.font)})})(j),y(j,Z,V,W),D(B)}function y(W,Z,re,V){W.text(function(B){var j=B.column.specIndex,ee=B.rowNumber,N=B.value,$=typeof N=="string",K=$&&N.match(/<br>/i),te=!$||K;B.mayHaveMarkup=$&&N.match(/[<&>]/);var ie,le=typeof(ie=N)=="string"&&ie.match(m.latexCheck);B.latex=le;var se,ve,fe=le?"":w(B.calcdata.cells.prefix,j,ee)||"",ye=le?"":w(B.calcdata.cells.suffix,j,ee)||"",Ae=le?null:w(B.calcdata.cells.format,j,ee)||null,pe=fe+(Ae?k(Ae)(B.value):B.value)+ye;if(B.wrappingNeeded=!B.wrapped&&!te&&!le&&(se=f(pe)),B.cellHeightMayIncrease=K||le||B.mayHaveMarkup||(se===void 0?f(pe):se),B.needsConvertToTspans=B.mayHaveMarkup||B.wrappingNeeded||B.latex,B.wrappingNeeded){var ge=(m.wrapSplitCharacter===" "?pe.replace(/<a href=/gi,"<a_href="):pe).split(m.wrapSplitCharacter),we=m.wrapSplitCharacter===" "?ge.map(function(oe){return oe.replace(/<a_href=/gi,"<a href=")}):ge;B.fragments=we.map(function(oe){return{text:oe,width:null}}),B.fragments.push({fragment:m.wrapSpacer,width:null}),ve=we.join(m.lineBreaker)+m.lineBreaker+m.wrapSpacer}else delete B.fragments,ve=pe;return ve}).attr("dy",function(B){return B.needsConvertToTspans?0:"0.75em"}).each(function(B){var j=v.select(this),ee=B.wrappingNeeded?S:E;B.needsConvertToTspans?t.convertToTspans(j,V,ee(re,this,Z,V,B)):v.select(this.parentNode).attr("transform",function(N){return l(z(N),m.cellPad)}).attr("text-anchor",function(N){return{left:"start",center:"middle",right:"end"}[N.align]})})}function f(W){return W.indexOf(m.wrapSplitCharacter)!==-1}function w(W,Z,re){if(Array.isArray(W)){var V=W[Math.min(Z,W.length-1)];return Array.isArray(V)?V[Math.min(re,V.length-1)]:V}return W}function b(W,Z,re){W.transition().ease(m.releaseTransitionEase).duration(m.releaseTransitionDuration).attr("transform",l(Z.x,re))}function _(W){return W.type==="cells"}function T(W){return W.type==="header"}function L(W){return(W.rowBlocks.length?W.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(Z,re){return Z+H(re,1/0)},0)}function A(W,Z,re){var V=p(Z)[0];if(V!==void 0){var B=V.rowBlocks,j=V.calcdata,ee=U(B,B.length),N=V.calcdata.groupHeight-L(V),$=j.scrollY=Math.max(0,Math.min(ee-N,j.scrollY)),K=function(te,ie,le){for(var se=[],ve=0,fe=0;fe<te.length;fe++){for(var ye=te[fe],Ae=ye.rows,pe=0,ge=0;ge<Ae.length;ge++)pe+=Ae[ge].rowHeight;ye.allRowsHeight=pe,ie<ve+pe&&ie+le>ve&&se.push(fe),ve+=pe}return se}(B,$,N);K.length===1&&(K[0]===B.length-1?K.unshift(K[0]-1):K.push(K[0]+1)),K[0]%2&&K.reverse(),Z.each(function(te,ie){te.page=K[ie],te.scrollY=$}),Z.attr("transform",function(te){var ie=U(te.rowBlocks,te.page)-te.scrollY;return l(0,ie)}),W&&(P(W,re,Z,K,V.prevPages,V,0),P(W,re,Z,K,V.prevPages,V,1),c(re,W))}}function I(W,Z,re,V){return function(B){var j=B.calcdata?B.calcdata:B,ee=Z.filter(function(te){return j.key===te.key}),N=re||j.scrollbarState.dragMultiplier,$=j.scrollY;j.scrollY=V===void 0?j.scrollY+N*v.event.dy:V;var K=ee.selectAll("."+m.cn.yColumn).selectAll("."+m.cn.columnBlock).filter(_);return A(W,K,ee),j.scrollY===$}}function P(W,Z,re,V,B,j,ee){V[ee]!==B[ee]&&(clearTimeout(j.currentRepaint[ee]),j.currentRepaint[ee]=setTimeout(function(){var N=re.filter(function($,K){return K===ee&&V[K]!==B[K]});i(W,Z,N,re),B[ee]=V[ee]}))}function S(W,Z,re,V){return function(){var B=v.select(Z.parentNode);B.each(function(j){var ee=j.fragments;B.selectAll("tspan.line").each(function(ve,fe){ee[fe].width=this.getComputedTextLength()});var N,$,K=ee[ee.length-1].width,te=ee.slice(0,-1),ie=[],le=0,se=j.column.columnWidth-2*m.cellPad;for(j.value="";te.length;)le+($=(N=te.shift()).width+K)>se&&(j.value+=ie.join(m.wrapSpacer)+m.lineBreaker,ie=[],le=0),ie.push(N.text),le+=$;le&&(j.value+=ie.join(m.wrapSpacer)),j.wrapped=!0}),B.selectAll("tspan.line").remove(),y(B.select("."+m.cn.cellText),re,W,V),v.select(Z.parentNode.parentNode).call(D)}}function E(W,Z,re,V,B){return function(){if(!B.settledY){var j=v.select(Z.parentNode),ee=J(B),N=B.key-ee.firstRowIndex,$=ee.rows[N].rowHeight,K=B.cellHeightMayIncrease?Z.parentNode.getBoundingClientRect().height+2*m.cellPad:$,te=Math.max(K,$);te-ee.rows[N].rowHeight&&(ee.rows[N].rowHeight=te,W.selectAll("."+m.cn.columnCell).call(D),A(null,W.filter(_),0),c(re,V,!0)),j.attr("transform",function(){var ie=this.parentNode.getBoundingClientRect(),le=v.select(this.parentNode).select("."+m.cn.cellRect).node().getBoundingClientRect(),se=this.transform.baseVal.consolidate(),ve=le.top-ie.top+(se?se.matrix.f:m.cellPad);return l(z(B,v.select(this.parentNode).select("."+m.cn.cellTextHolder).node().getBoundingClientRect().width),ve)}),B.settledY=!0}}}function z(W,Z){switch(W.align){case"left":return m.cellPad;case"right":return W.column.columnWidth-(Z||0)-m.cellPad;case"center":return(W.column.columnWidth-(Z||0))/2;default:return m.cellPad}}function D(W){W.attr("transform",function(Z){var re=Z.rowBlocks[0].auxiliaryBlocks.reduce(function(B,j){return B+H(j,1/0)},0),V=H(J(Z),Z.key);return l(0,V+re)}).selectAll("."+m.cn.cellRect).attr("height",function(Z){return(re=J(Z),V=Z.key,re.rows[V-re.firstRowIndex]).rowHeight;var re,V})}function U(W,Z){for(var re=0,V=Z-1;V>=0;V--)re+=Y(W[V]);return re}function H(W,Z){for(var re=0,V=0;V<W.rows.length&&W.rows[V].rowIndex<Z;V++)re+=W.rows[V].rowHeight;return re}function Y(W){var Z=W.allRowsHeight;if(Z!==void 0)return Z;for(var re=0,V=0;V<W.rows.length;V++)re+=W.rows[V].rowHeight;return W.allRowsHeight=re,re}function J(W){return W.rowBlocks[W.page]}Q.exports=function(W,Z){var re=!W._context.staticPlot,V=W._fullLayout._paper.selectAll("."+m.cn.table).data(Z.map(function(ye){var Ae=x.unwrap(ye).trace;return d(W,Ae)}),x.keyFun);V.exit().remove(),V.enter().append("g").classed(m.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),V.attr("width",function(ye){return ye.width+ye.size.l+ye.size.r}).attr("height",function(ye){return ye.height+ye.size.t+ye.size.b}).attr("transform",function(ye){return l(ye.translateX,ye.translateY)});var B=V.selectAll("."+m.cn.tableControlView).data(x.repeat,x.keyFun),j=B.enter().append("g").classed(m.cn.tableControlView,!0).style("box-sizing","content-box");if(re){var ee="onwheel"in document?"wheel":"mousewheel";j.on("mousemove",function(ye){B.filter(function(Ae){return ye===Ae}).call(c,W)}).on(ee,function(ye){if(!ye.scrollbarState.wheeling){ye.scrollbarState.wheeling=!0;var Ae=ye.scrollY+v.event.deltaY;I(W,B,null,Ae)(ye)||(v.event.stopPropagation(),v.event.preventDefault()),ye.scrollbarState.wheeling=!1}}).call(c,W,!0)}B.attr("transform",function(ye){return l(ye.size.l,ye.size.t)});var N=B.selectAll("."+m.cn.scrollBackground).data(x.repeat,x.keyFun);N.enter().append("rect").classed(m.cn.scrollBackground,!0).attr("fill","none"),N.attr("width",function(ye){return ye.width}).attr("height",function(ye){return ye.height}),B.each(function(ye){e.setClipUrl(v.select(this),s(W,ye),W)});var $=B.selectAll("."+m.cn.yColumn).data(function(ye){return ye.columns},x.keyFun);$.enter().append("g").classed(m.cn.yColumn,!0),$.exit().remove(),$.attr("transform",function(ye){return l(ye.x,0)}),re&&$.call(v.behavior.drag().origin(function(ye){return b(v.select(this),ye,-m.uplift),r(this),ye.calcdata.columnDragInProgress=!0,c(B.filter(function(Ae){return ye.calcdata.key===Ae.key}),W),ye}).on("drag",function(ye){var Ae=v.select(this),pe=function(ge){return(ye===ge?v.event.x:ge.x)+ge.columnWidth/2};ye.x=Math.max(-m.overdrag,Math.min(ye.calcdata.width+m.overdrag-ye.columnWidth,v.event.x)),p($).filter(function(ge){return ge.calcdata.key===ye.calcdata.key}).sort(function(ge,we){return pe(ge)-pe(we)}).forEach(function(ge,we){ge.xIndex=we,ge.x=ye===ge?ge.x:ge.xScale(ge)}),$.filter(function(ge){return ye!==ge}).transition().ease(m.transitionEase).duration(m.transitionDuration).attr("transform",function(ge){return l(ge.x,0)}),Ae.call(n).attr("transform",l(ye.x,-m.uplift))}).on("dragend",function(ye){var Ae=v.select(this),pe=ye.calcdata;ye.x=ye.xScale(ye),ye.calcdata.columnDragInProgress=!1,b(Ae,ye,0),function(ge,we,oe){var de=we.gdColumnsOriginalOrder;we.gdColumns.sort(function(Te,Ee){return oe[de.indexOf(Te)]-oe[de.indexOf(Ee)]}),we.columnorder=oe,ge.emit("plotly_restyle")}(W,pe,pe.columns.map(function(ge){return ge.xIndex}))})),$.each(function(ye){e.setClipUrl(v.select(this),a(W,ye),W)});var K=$.selectAll("."+m.cn.columnBlock).data(u.splitToPanels,x.keyFun);K.enter().append("g").classed(m.cn.columnBlock,!0).attr("id",function(ye){return ye.key}),K.style("cursor",function(ye){return ye.dragHandle?"ew-resize":ye.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var te=K.filter(T),ie=K.filter(_);re&&ie.call(v.behavior.drag().origin(function(ye){return v.event.stopPropagation(),ye}).on("drag",I(W,B,-1)).on("dragend",function(){})),i(W,B,te,K),i(W,B,ie,K);var le=B.selectAll("."+m.cn.scrollAreaClip).data(x.repeat,x.keyFun);le.enter().append("clipPath").classed(m.cn.scrollAreaClip,!0).attr("id",function(ye){return s(W,ye)});var se=le.selectAll("."+m.cn.scrollAreaClipRect).data(x.repeat,x.keyFun);se.enter().append("rect").classed(m.cn.scrollAreaClipRect,!0).attr("x",-m.overdrag).attr("y",-m.uplift).attr("fill","none"),se.attr("width",function(ye){return ye.width+2*m.overdrag}).attr("height",function(ye){return ye.height+m.uplift}),$.selectAll("."+m.cn.columnBoundary).data(x.repeat,x.keyFun).enter().append("g").classed(m.cn.columnBoundary,!0);var ve=$.selectAll("."+m.cn.columnBoundaryClippath).data(x.repeat,x.keyFun);ve.enter().append("clipPath").classed(m.cn.columnBoundaryClippath,!0),ve.attr("id",function(ye){return a(W,ye)});var fe=ve.selectAll("."+m.cn.columnBoundaryRect).data(x.repeat,x.keyFun);fe.enter().append("rect").classed(m.cn.columnBoundaryRect,!0).attr("fill","none"),fe.attr("width",function(ye){return ye.columnWidth+2*h(ye)}).attr("height",function(ye){return ye.calcdata.height+2*h(ye)+m.uplift}).attr("x",function(ye){return-h(ye)}).attr("y",function(ye){return-h(ye)}),A(null,ie,B)}},{"../../components/color":367,"../../components/drawing":389,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"./constants":1078,"./data_preparation_helper":1079,"./data_split_helpers":1080,"@plotly/d3":58}],1084:[function(g,Q,X){var m=g("../../plots/template_attributes").hovertemplateAttrs,v=g("../../plots/template_attributes").texttemplateAttrs,k=g("../../components/colorscale/attributes"),x=g("../../plots/domain").attributes,e=g("../pie/attributes"),t=g("../sunburst/attributes"),r=g("./constants"),l=g("../../lib/extend").extendFlat;Q.exports={labels:t.labels,parents:t.parents,values:t.values,branchvalues:t.branchvalues,count:t.count,level:t.level,maxdepth:t.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:l({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:t.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:t.marker.line,editType:"calc"},k("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:l({},e.textfont,{}),editType:"calc"},text:e.text,textinfo:t.textinfo,texttemplate:v({editType:"plot"},{keys:r.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:t.hoverinfo,hovertemplate:m({},{keys:r.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:l({},e.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:e.sort,root:t.root,domain:x({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"../sunburst/attributes":1058,"./constants":1087}],1085:[function(g,Q,X){var m=g("../../plots/plots");X.name="treemap",X.plot=function(v,k,x,e){m.plotBasePlot(X.name,v,k,x,e)},X.clean=function(v,k,x,e){m.cleanBasePlot(X.name,v,k,x,e)}},{"../../plots/plots":628}],1086:[function(g,Q,X){var m=g("../sunburst/calc");X.calc=function(v,k){return m.calc(v,k)},X.crossTraceCalc=function(v){return m._runCrossTraceCalc("treemap",v)}},{"../sunburst/calc":1060}],1087:[function(g,Q,X){Q.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1088:[function(g,Q,X){var m=g("../../lib"),v=g("./attributes"),k=g("../../components/color"),x=g("../../plots/domain").defaults,e=g("../bar/defaults").handleText,t=g("../bar/constants").TEXTPAD,r=g("../../components/colorscale"),l=r.hasColorscale,n=r.handleDefaults;Q.exports=function(d,u,o,h){function s(_,T){return m.coerce(d,u,v,_,T)}var a=s("labels"),p=s("parents");if(a&&a.length&&p&&p.length){var c=s("values");c&&c.length?s("branchvalues"):s("count"),s("level"),s("maxdepth"),s("tiling.packing")==="squarify"&&s("tiling.squarifyratio"),s("tiling.flip"),s("tiling.pad");var i=s("text");s("texttemplate"),u.texttemplate||s("textinfo",Array.isArray(i)?"text+label":"label"),s("hovertext"),s("hovertemplate");var y=s("pathbar.visible");e(d,u,h,s,"auto",{hasPathbar:y,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),s("textposition");var f=u.textposition.indexOf("bottom")!==-1;s("marker.line.width")&&s("marker.line.color",h.paper_bgcolor);var w=s("marker.colors");(u._hasColorscale=l(d,"marker","colors")||(d.marker||{}).coloraxis)?n(d,u,h,s,{prefix:"marker.",cLetter:"c"}):s("marker.depthfade",!(w||[]).length);var b=2*u.textfont.size;s("marker.pad.t",f?b/4:b),s("marker.pad.l",b/4),s("marker.pad.r",b/4),s("marker.pad.b",f?b:b/4),u._hovered={marker:{line:{width:2,color:k.contrast(h.paper_bgcolor)}}},y&&(s("pathbar.thickness",u.pathbar.textfont.size+2*t),s("pathbar.side"),s("pathbar.edgeshape")),s("sort"),s("root.color"),x(u,h,s),u._length=null}else u.visible=!1}},{"../../components/color":367,"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/constants":659,"../bar/defaults":661,"./attributes":1084}],1089:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../sunburst/helpers"),k=g("../bar/uniform_text").clearMinTextSize,x=g("../bar/style").resizeText,e=g("./plot_one");Q.exports=function(t,r,l,n,d){var u,o,h=d.type,s=d.drawDescendants,a=t._fullLayout,p=a["_"+h+"layer"],c=!l;k(h,a),(u=p.selectAll("g.trace."+h).data(r,function(i){return i[0].trace.uid})).enter().append("g").classed("trace",!0).classed(h,!0),u.order(),!a.uniformtext.mode&&v.hasTransition(l)?(n&&(o=n()),m.transition().duration(l.duration).ease(l.easing).each("end",function(){o&&o()}).each("interrupt",function(){o&&o()}).each(function(){p.selectAll("g.trace").each(function(i){e(t,i,this,l,s)})})):(u.each(function(i){e(t,i,this,l,s)}),a.uniformtext.mode&&x(t,p.selectAll(".trace"),h)),c&&u.exit().remove()}},{"../bar/style":671,"../bar/uniform_text":673,"../sunburst/helpers":1064,"./plot_one":1098,"@plotly/d3":58}],1090:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../lib"),k=g("../../components/drawing"),x=g("../../lib/svg_text_utils"),e=g("./partition"),t=g("./style").styleOne,r=g("./constants"),l=g("../sunburst/helpers"),n=g("../sunburst/fx");Q.exports=function(d,u,o,h,s){var a=s.barDifY,p=s.width,c=s.height,i=s.viewX,y=s.viewY,f=s.pathSlice,w=s.toMoveInsideSlice,b=s.strTransform,_=s.hasTransition,T=s.handleSlicesExit,L=s.makeUpdateSliceInterpolator,A=s.makeUpdateTextInterpolator,I={},P=d._context.staticPlot,S=d._fullLayout,E=u[0],z=E.trace,D=E.hierarchy,U=p/z._entryDepth,H=l.listPath(o.data,"id"),Y=e(D.copy(),[p,c],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(Y=Y.filter(function(W){var Z=H.indexOf(W.data.id);return Z!==-1&&(W.x0=U*Z,W.x1=U*(Z+1),W.y0=a,W.y1=a+c,W.onPathbar=!0,!0)})).reverse(),(h=h.data(Y,l.getPtId)).enter().append("g").classed("pathbar",!0),T(h,!0,I,[p,c],f),h.order();var J=h;_&&(J=J.transition().each("end",function(){var W=m.select(this);l.setSliceCursor(W,d,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),J.each(function(W){W._x0=i(W.x0),W._x1=i(W.x1),W._y0=y(W.y0),W._y1=y(W.y1),W._hoverX=i(W.x1-Math.min(p,c)/2),W._hoverY=y(W.y1-c/2);var Z=m.select(this),re=v.ensureSingle(Z,"path","surface",function(ee){ee.style("pointer-events",P?"none":"all")});_?re.transition().attrTween("d",function(ee){var N=L(ee,!0,I,[p,c]);return function($){return f(N($))}}):re.attr("d",f),Z.call(n,o,d,u,{styleOne:t,eventDataKeys:r.eventDataKeys,transitionTime:r.CLICK_TRANSITION_TIME,transitionEasing:r.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,d,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:d._transitioning}),re.call(t,W,z,{hovered:!1}),W._text=(l.getPtLabel(W)||"").split("<br>").join(" ")||"";var V=v.ensureSingle(Z,"g","slicetext"),B=v.ensureSingle(V,"text","",function(ee){ee.attr("data-notex",1)}),j=v.ensureUniformFontSize(d,l.determineTextFont(z,W,S.font,{onPathbar:!0}));B.text(W._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(k.font,j).call(x.convertToTspans,d),W.textBB=k.bBox(B.node()),W.transform=w(W,{fontSize:j.size,onPathbar:!0}),W.transform.fontSize=j.size,_?B.transition().attrTween("transform",function(ee){var N=A(ee,!0,I,[p,c]);return function($){return b(N($))}}):B.attr("transform",b(W))})}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"./constants":1087,"./partition":1096,"./style":1099,"@plotly/d3":58}],1091:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../lib"),k=g("../../components/drawing"),x=g("../../lib/svg_text_utils"),e=g("./partition"),t=g("./style").styleOne,r=g("./constants"),l=g("../sunburst/helpers"),n=g("../sunburst/fx"),d=g("../sunburst/plot").formatSliceLabel;Q.exports=function(u,o,h,s,a){var p=a.width,c=a.height,i=a.viewX,y=a.viewY,f=a.pathSlice,w=a.toMoveInsideSlice,b=a.strTransform,_=a.hasTransition,T=a.handleSlicesExit,L=a.makeUpdateSliceInterpolator,A=a.makeUpdateTextInterpolator,I=a.prevEntry,P=u._context.staticPlot,S=u._fullLayout,E=o[0].trace,z=E.textposition.indexOf("left")!==-1,D=E.textposition.indexOf("right")!==-1,U=E.textposition.indexOf("bottom")!==-1,H=!U&&!E.marker.pad.t||U&&!E.marker.pad.b,Y=e(h,[p,c],{packing:E.tiling.packing,squarifyratio:E.tiling.squarifyratio,flipX:E.tiling.flip.indexOf("x")>-1,flipY:E.tiling.flip.indexOf("y")>-1,pad:{inner:E.tiling.pad,top:E.marker.pad.t,left:E.marker.pad.l,right:E.marker.pad.r,bottom:E.marker.pad.b}}).descendants(),J=1/0,W=-1/0;Y.forEach(function(j){var ee=j.depth;ee>=E._maxDepth?(j.x0=j.x1=(j.x0+j.x1)/2,j.y0=j.y1=(j.y0+j.y1)/2):(J=Math.min(J,ee),W=Math.max(W,ee))}),s=s.data(Y,l.getPtId),E._maxVisibleLayers=isFinite(W)?W-J+1:0,s.enter().append("g").classed("slice",!0),T(s,!1,{},[p,c],f),s.order();var Z=null;if(_&&I){var re=l.getPtId(I);s.each(function(j){Z===null&&l.getPtId(j)===re&&(Z={x0:j.x0,x1:j.x1,y0:j.y0,y1:j.y1})})}var V=function(){return Z||{x0:0,x1:p,y0:0,y1:c}},B=s;return _&&(B=B.transition().each("end",function(){var j=m.select(this);l.setSliceCursor(j,u,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),B.each(function(j){var ee=l.isHeader(j,E);j._x0=i(j.x0),j._x1=i(j.x1),j._y0=y(j.y0),j._y1=y(j.y1),j._hoverX=i(j.x1-E.marker.pad.r),j._hoverY=y(U?j.y1-E.marker.pad.b/2:j.y0+E.marker.pad.t/2);var N=m.select(this),$=v.ensureSingle(N,"path","surface",function(le){le.style("pointer-events",P?"none":"all")});_?$.transition().attrTween("d",function(le){var se=L(le,!1,V(),[p,c]);return function(ve){return f(se(ve))}}):$.attr("d",f),N.call(n,h,u,o,{styleOne:t,eventDataKeys:r.eventDataKeys,transitionTime:r.CLICK_TRANSITION_TIME,transitionEasing:r.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,u,{isTransitioning:u._transitioning}),$.call(t,j,E,{hovered:!1}),j.x0===j.x1||j.y0===j.y1?j._text="":j._text=ee?H?"":l.getPtLabel(j)||"":d(j,h,E,o,S)||"";var K=v.ensureSingle(N,"g","slicetext"),te=v.ensureSingle(K,"text","",function(le){le.attr("data-notex",1)}),ie=v.ensureUniformFontSize(u,l.determineTextFont(E,j,S.font));te.text(j._text||" ").classed("slicetext",!0).attr("text-anchor",D?"end":z||ee?"start":"middle").call(k.font,ie).call(x.convertToTspans,u),j.textBB=k.bBox(te.node()),j.transform=w(j,{fontSize:ie.size,isHeader:ee}),j.transform.fontSize=ie.size,_?te.transition().attrTween("transform",function(le){var se=A(le,!1,V(),[p,c]);return function(ve){return b(se(ve))}}):te.attr("transform",b(j))}),Z}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"../sunburst/plot":1068,"./constants":1087,"./partition":1096,"./style":1099,"@plotly/d3":58}],1092:[function(g,Q,X){Q.exports=function m(v,k,x){var e;x.swapXY&&(e=v.x0,v.x0=v.y0,v.y0=e,e=v.x1,v.x1=v.y1,v.y1=e),x.flipX&&(e=v.x0,v.x0=k[0]-v.x1,v.x1=k[0]-e),x.flipY&&(e=v.y0,v.y0=k[1]-v.y1,v.y1=k[1]-e);var t=v.children;if(t)for(var r=0;r<t.length;r++)m(t[r],k,x)}},{}],1093:[function(g,Q,X){Q.exports={moduleType:"trace",name:"treemap",basePlotModule:g("./base_plot"),categories:[],animatable:!0,attributes:g("./attributes"),layoutAttributes:g("./layout_attributes"),supplyDefaults:g("./defaults"),supplyLayoutDefaults:g("./layout_defaults"),calc:g("./calc").calc,crossTraceCalc:g("./calc").crossTraceCalc,plot:g("./plot"),style:g("./style").style,colorbar:g("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":1084,"./base_plot":1085,"./calc":1086,"./defaults":1088,"./layout_attributes":1094,"./layout_defaults":1095,"./plot":1097,"./style":1099}],1094:[function(g,Q,X){Q.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1095:[function(g,Q,X){var m=g("../../lib"),v=g("./layout_attributes");Q.exports=function(k,x){function e(t,r){return m.coerce(k,x,v,t,r)}e("treemapcolorway",x.colorway),e("extendtreemapcolors")}},{"../../lib":515,"./layout_attributes":1094}],1096:[function(g,Q,X){var m=g("d3-hierarchy"),v=g("./flip_tree");Q.exports=function(k,x,e){var t,r=e.flipX,l=e.flipY,n=e.packing==="dice-slice",d=e.pad[l?"bottom":"top"],u=e.pad[r?"right":"left"],o=e.pad[r?"left":"right"],h=e.pad[l?"top":"bottom"];n&&(t=u,u=d,d=t,t=o,o=h,h=t);var s=m.treemap().tile(function(a,p){switch(a){case"squarify":return m.treemapSquarify.ratio(p);case"binary":return m.treemapBinary;case"dice":return m.treemapDice;case"slice":return m.treemapSlice;default:return m.treemapSliceDice}}(e.packing,e.squarifyratio)).paddingInner(e.pad.inner).paddingLeft(u).paddingRight(o).paddingTop(d).paddingBottom(h).size(n?[x[1],x[0]]:x)(k);return(n||r||l)&&v(s,x,{swapXY:n,flipX:r,flipY:l}),s}},{"./flip_tree":1092,"d3-hierarchy":115}],1097:[function(g,Q,X){var m=g("./draw"),v=g("./draw_descendants");Q.exports=function(k,x,e,t){return m(k,x,e,t,{type:"treemap",drawDescendants:v})}},{"./draw":1089,"./draw_descendants":1091}],1098:[function(g,Q,X){var m=g("@plotly/d3"),v=g("d3-interpolate").interpolate,k=g("../sunburst/helpers"),x=g("../../lib"),e=g("../bar/constants").TEXTPAD,t=g("../bar/plot").toMoveInsideBar,r=g("../bar/uniform_text").recordMinTextSize,l=g("./constants"),n=g("./draw_ancestors");function d(u){return k.isHierarchyRoot(u)?"":k.getPtId(u)}Q.exports=function(u,o,h,s,a){var p=u._fullLayout,c=o[0],i=c.trace,y=i.type==="icicle",f=c.hierarchy,w=k.findEntryWithLevel(f,i.level),b=m.select(h),_=b.selectAll("g.pathbar"),T=b.selectAll("g.slice");if(!w)return _.remove(),void T.remove();var L=k.isHierarchyRoot(w),A=!p.uniformtext.mode&&k.hasTransition(s),I=k.getMaxDepth(i),P=p._size,S=i.domain,E=P.w*(S.x[1]-S.x[0]),z=P.h*(S.y[1]-S.y[0]),D=E,U=i.pathbar.thickness,H=i.marker.line.width+l.gapWithPathbar,Y=i.pathbar.visible?i.pathbar.side.indexOf("bottom")>-1?z+H:-(U+H):0,J={x0:D,x1:D,y0:Y,y1:Y+U},W=function(Me,De,Ie){var Oe=i.tiling.pad,Ze=function(Ge){return Ge-Oe<=De.x0},Fe=function(Ge){return Ge+Oe>=De.x1},Pe=function(Ge){return Ge-Oe<=De.y0},ze=function(Ge){return Ge+Oe>=De.y1};return Me.x0===De.x0&&Me.x1===De.x1&&Me.y0===De.y0&&Me.y1===De.y1?{x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1}:{x0:Ze(Me.x0-Oe)?0:Fe(Me.x0-Oe)?Ie[0]:Me.x0,x1:Ze(Me.x1+Oe)?0:Fe(Me.x1+Oe)?Ie[0]:Me.x1,y0:Pe(Me.y0-Oe)?0:ze(Me.y0-Oe)?Ie[1]:Me.y0,y1:Pe(Me.y1+Oe)?0:ze(Me.y1+Oe)?Ie[1]:Me.y1}},Z=null,re={},V={},B=null,j=function(Me,De){return De?re[d(Me)]:V[d(Me)]},ee=function(Me,De,Ie,Oe){if(De)return re[d(f)]||J;var Ze=V[i.level]||Ie;return function(Fe){return Fe.data.depth-w.data.depth<I}(Me)?W(Me,Ze,Oe):{}};c.hasMultipleRoots&&L&&I++,i._maxDepth=I,i._backgroundColor=p.paper_bgcolor,i._entryDepth=w.data.depth,i._atRootLevel=L;var N=-E/2+P.l+P.w*(S.x[1]+S.x[0])/2,$=-z/2+P.t+P.h*(1-(S.y[1]+S.y[0])/2),K=function(Me){return N+Me},te=function(Me){return $+Me},ie=te(0),le=K(0),se=function(Me){return le+Me},ve=function(Me){return ie+Me};function fe(Me,De){return Me+","+De}var ye=se(0),Ae=function(Me){Me.x=Math.max(ye,Me.x)},pe=i.pathbar.edgeshape,ge=function(Me,De){var Ie=Me.x0,Oe=Me.x1,Ze=Me.y0,Fe=Me.y1,Pe=Me.textBB,ze=function(mt){return i.textposition.indexOf(mt)!==-1},Ge=ze("bottom"),$e=ze("top")||De.isHeader&&!Ge?"start":Ge?"end":"middle",ot=ze("right"),vt=ze("left")||De.onPathbar?-1:ot?1:0,bt=i[y?"tiling":"marker"].pad;if(De.isHeader){if((Ie+=(y?bt:bt.l)-e)>=(Oe-=(y?bt:bt.r)-e)){var yt=(Ie+Oe)/2;Ie=yt,Oe=yt}var tt;Ge?Ze<(tt=Fe-(y?bt:bt.b))&&tt<Fe&&(Ze=tt):Ze<(tt=Ze+(y?bt:bt.t))&&tt<Fe&&(Fe=tt)}var Ke=t(Ie,Oe,Ze,Fe,Pe,{isHorizontal:!1,constrained:!0,angle:0,anchor:$e,leftToRight:vt});return Ke.fontSize=De.fontSize,Ke.targetX=K(Ke.targetX),Ke.targetY=te(Ke.targetY),isNaN(Ke.targetX)||isNaN(Ke.targetY)?{}:(Ie!==Oe&&Ze!==Fe&&r(i.type,Ke,p),{scale:Ke.scale,rotate:Ke.rotate,textX:Ke.textX,textY:Ke.textY,anchorX:Ke.anchorX,anchorY:Ke.anchorY,targetX:Ke.targetX,targetY:Ke.targetY})},we=function(Me,De){for(var Ie,Oe=0,Ze=Me;!Ie&&Oe<I;)Oe++,(Ze=Ze.parent)?Ie=j(Ze,De):Oe=I;return Ie||{}},oe=function(Me,De,Ie,Oe,Ze){var Fe,Pe=j(Me,De);if(Pe)Fe=Pe;else if(De)Fe=J;else if(Z)if(Me.parent){var ze=B||Ie;ze&&!De?Fe=W(Me,ze,Oe):(Fe={},x.extendFlat(Fe,we(Me,De)))}else Fe=x.extendFlat({},Me),y&&(Ze.orientation==="h"?Ze.flipX?Fe.x0=Me.x1:Fe.x1=0:Ze.flipY?Fe.y0=Me.y1:Fe.y1=0);else Fe={};return v(Fe,{x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1})},de=function(Me,De,Ie,Oe){var Ze=j(Me,De),Fe={},Pe=ee(Me,De,Ie,Oe);x.extendFlat(Fe,{transform:ge({x0:Pe.x0,x1:Pe.x1,y0:Pe.y0,y1:Pe.y1,textBB:Me.textBB,_text:Me._text},{isHeader:k.isHeader(Me,i)})}),Ze?Fe=Ze:Me.parent&&x.extendFlat(Fe,we(Me,De));var ze=Me.transform;return Me.x0!==Me.x1&&Me.y0!==Me.y1&&r(i.type,ze,p),v(Fe,{transform:{scale:ze.scale,rotate:ze.rotate,textX:ze.textX,textY:ze.textY,anchorX:ze.anchorX,anchorY:ze.anchorY,targetX:ze.targetX,targetY:ze.targetY}})},Te=function(Me,De,Ie,Oe,Ze){var Fe=Oe[0],Pe=Oe[1];A?Me.exit().transition().each(function(){var ze=m.select(this);ze.select("path.surface").transition().attrTween("d",function(Ge){var $e=function(ot,vt,bt,yt){var tt,Ke=j(ot,vt);if(vt)tt=J;else{var mt=j(w,vt);tt=mt?W(ot,mt,yt):{}}return v(Ke,tt)}(Ge,De,0,[Fe,Pe]);return function(ot){return Ze($e(ot))}}),ze.select("g.slicetext").attr("opacity",0)}).remove():Me.exit().remove()},Ee=function(Me){var De=Me.transform;return Me.x0!==Me.x1&&Me.y0!==Me.y1&&r(i.type,De,p),x.getTextTransform({textX:De.textX,textY:De.textY,anchorX:De.anchorX,anchorY:De.anchorY,targetX:De.targetX,targetY:De.targetY,scale:De.scale,rotate:De.rotate})};A&&(_.each(function(Me){re[d(Me)]={x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1},Me.transform&&(re[d(Me)].transform={textX:Me.transform.textX,textY:Me.transform.textY,anchorX:Me.transform.anchorX,anchorY:Me.transform.anchorY,targetX:Me.transform.targetX,targetY:Me.transform.targetY,scale:Me.transform.scale,rotate:Me.transform.rotate})}),T.each(function(Me){V[d(Me)]={x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1},Me.transform&&(V[d(Me)].transform={textX:Me.transform.textX,textY:Me.transform.textY,anchorX:Me.transform.anchorX,anchorY:Me.transform.anchorY,targetX:Me.transform.targetX,targetY:Me.transform.targetY,scale:Me.transform.scale,rotate:Me.transform.rotate}),!Z&&k.isEntry(Me)&&(Z=Me)})),B=a(u,o,w,T,{width:E,height:z,viewX:K,viewY:te,pathSlice:function(Me){var De=K(Me.x0),Ie=K(Me.x1),Oe=te(Me.y0),Ze=te(Me.y1),Fe=Ie-De,Pe=Ze-Oe;return!Fe||!Pe?"":"M"+fe(De,Oe+0)+"L"+fe(Ie-0,Oe)+"L"+fe(Ie,Ze-0)+"L"+fe(De+0,Ze)+"Z"},toMoveInsideSlice:ge,prevEntry:Z,makeUpdateSliceInterpolator:oe,makeUpdateTextInterpolator:de,handleSlicesExit:Te,hasTransition:A,strTransform:Ee}),i.pathbar.visible?n(u,o,w,_,{barDifY:Y,width:D,height:U,viewX:se,viewY:ve,pathSlice:function(Me){var De=se(Math.max(Math.min(Me.x0,Me.x0),0)),Ie=se(Math.min(Math.max(Me.x1,Me.x1),D)),Oe=ve(Me.y0),Ze=ve(Me.y1),Fe=U/2,Pe={},ze={};Pe.x=De,ze.x=Ie,Pe.y=ze.y=(Oe+Ze)/2;var Ge={x:De,y:Oe},$e={x:Ie,y:Oe},ot={x:Ie,y:Ze},vt={x:De,y:Ze};return pe===">"?(Ge.x-=Fe,$e.x-=Fe,ot.x-=Fe,vt.x-=Fe):pe==="/"?(ot.x-=Fe,vt.x-=Fe,Pe.x-=Fe/2,ze.x-=Fe/2):pe==="\\"?(Ge.x-=Fe,$e.x-=Fe,Pe.x-=Fe/2,ze.x-=Fe/2):pe==="<"&&(Pe.x-=Fe,ze.x-=Fe),Ae(Ge),Ae(vt),Ae(Pe),Ae($e),Ae(ot),Ae(ze),"M"+fe(Ge.x,Ge.y)+"L"+fe($e.x,$e.y)+"L"+fe(ze.x,ze.y)+"L"+fe(ot.x,ot.y)+"L"+fe(vt.x,vt.y)+"L"+fe(Pe.x,Pe.y)+"Z"},toMoveInsideSlice:ge,makeUpdateSliceInterpolator:oe,makeUpdateTextInterpolator:de,handleSlicesExit:Te,hasTransition:A,strTransform:Ee}):_.remove()}},{"../../lib":515,"../bar/constants":659,"../bar/plot":668,"../bar/uniform_text":673,"../sunburst/helpers":1064,"./constants":1087,"./draw_ancestors":1090,"@plotly/d3":58,"d3-interpolate":116}],1099:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../components/color"),k=g("../../lib"),x=g("../sunburst/helpers"),e=g("../bar/uniform_text").resizeText;function t(r,l,n,d){var u,o,h=(d||{}).hovered,s=l.data.data,a=s.i,p=s.color,c=x.isHierarchyRoot(l),i=1;if(h)u=n._hovered.marker.line.color,o=n._hovered.marker.line.width;else if(c&&p===n.root.color)i=100,u="rgba(0,0,0,0)",o=0;else if(u=k.castOption(n,a,"marker.line.color")||v.defaultLine,o=k.castOption(n,a,"marker.line.width")||0,!n._hasColorscale&&!l.onPathbar){var y=n.marker.depthfade;if(y){var f,w=v.combine(v.addOpacity(n._backgroundColor,.75),p);if(y===!0){var b=x.getMaxDepth(n);f=isFinite(b)?x.isLeaf(l)?0:n._maxVisibleLayers-(l.data.depth-n._entryDepth):l.data.height+1}else f=l.data.depth-n._entryDepth,n._atRootLevel||f++;if(f>0)for(var _=0;_<f;_++){var T=.5*_/f;p=v.combine(v.addOpacity(w,T),p)}}}r.style("stroke-width",o).call(v.fill,p).call(v.stroke,u).style("opacity",i)}Q.exports={style:function(r){var l=r._fullLayout._treemaplayer.selectAll(".trace");e(r,l,"treemap"),l.each(function(n){var d=m.select(this),u=n[0].trace;d.style("opacity",u.opacity),d.selectAll("path.surface").each(function(o){m.select(this).call(t,o,u,{hovered:!1})})})},styleOne:t}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"../sunburst/helpers":1064,"@plotly/d3":58}],1100:[function(g,Q,X){var m=g("../box/attributes"),v=g("../../lib/extend").extendFlat,k=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat;Q.exports={y:m.y,x:m.x,x0:m.x0,y0:m.y0,xhoverformat:k("x"),yhoverformat:k("y"),name:v({},m.name,{}),orientation:v({},m.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:m.fillcolor,points:v({},m.boxpoints,{}),jitter:v({},m.jitter,{}),pointpos:v({},m.pointpos,{}),width:v({},m.width,{}),marker:m.marker,text:m.text,hovertext:m.hovertext,hovertemplate:m.hovertemplate,quartilemethod:m.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup,selected:m.selected,unselected:m.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../box/attributes":682}],1101:[function(g,Q,X){var m=g("../../lib"),v=g("../../plots/cartesian/axes"),k=g("../box/calc"),x=g("./helpers"),e=g("../../constants/numerical").BADNUM;function t(l,n,d){var u=n.max-n.min;if(!u)return l.bandwidth?l.bandwidth:0;if(l.bandwidth)return Math.max(l.bandwidth,u/1e4);var o=d.length,h=m.stdev(d,o-1,n.mean);return Math.max(function(s,a,p){return 1.059*Math.min(a,p/1.349)*Math.pow(s,-.2)}(o,h,n.q3-n.q1),u/100)}function r(l,n,d,u){var o,h=l.spanmode,s=l.span||[],a=[n.min,n.max],p=[n.min-2*u,n.max+2*u];function c(y){var f=s[y],w=d.type==="multicategory"?d.r2c(f):d.d2c(f,0,l[n.valLetter+"calendar"]);return w===e?p[y]:w}var i={type:"linear",range:o=h==="soft"?p:h==="hard"?a:[c(0),c(1)]};return v.setConvert(i),i.cleanRange(),o}Q.exports=function(l,n){var d=k(l,n);if(d[0].t.empty)return d;for(var u=l._fullLayout,o=v.getFromId(l,n[n.orientation==="h"?"xaxis":"yaxis"]),h=1/0,s=-1/0,a=0,p=0,c=0;c<d.length;c++){var i=d[c],y=i.pts.map(x.extractVal),f=i.bandwidth=t(n,i,y),w=i.span=r(n,i,o,f);if(i.min===i.max&&f===0)w=i.span=[i.min,i.max],i.density=[{v:1,t:w[0]}],i.bandwidth=f,a=Math.max(a,1);else{var b=w[1]-w[0],_=Math.ceil(b/(f/3)),T=b/_;if(!isFinite(T)||!isFinite(_))return m.error("Something went wrong with computing the violin span"),d[0].t.empty=!0,d;var L=x.makeKDE(i,n,y);i.density=new Array(_);for(var A=0,I=w[0];I<w[1]+T/2;A++,I+=T){var P=L(I);i.density[A]={v:P,t:I},a=Math.max(a,P)}}p=Math.max(p,y.length),h=Math.min(h,w[0]),s=Math.max(s,w[1])}var S=v.findExtremes(o,[h,s],{padded:!0});if(n._extremes[o._id]=S,n.width)d[0].t.maxKDE=a;else{var E=u._violinScaleGroupStats,z=n.scalegroup,D=E[z];D?(D.maxKDE=Math.max(D.maxKDE,a),D.maxCount=Math.max(D.maxCount,p)):E[z]={maxKDE:a,maxCount:p}}return d[0].t.labels.kde=m._(l,"kde:"),d}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../box/calc":683,"./helpers":1104}],1102:[function(g,Q,X){var m=g("../box/cross_trace_calc").setPositionOffset,v=["v","h"];Q.exports=function(k,x){for(var e=k.calcdata,t=x.xaxis,r=x.yaxis,l=0;l<v.length;l++){for(var n=v[l],d=n==="h"?r:t,u=[],o=0;o<e.length;o++){var h=e[o],s=h[0].t,a=h[0].trace;a.visible!==!0||a.type!=="violin"||s.empty||a.orientation!==n||a.xaxis!==t._id||a.yaxis!==r._id||u.push(o)}m("violin",k,u,d)}}},{"../box/cross_trace_calc":684}],1103:[function(g,Q,X){var m=g("../../lib"),v=g("../../components/color"),k=g("../box/defaults"),x=g("./attributes");Q.exports=function(e,t,r,l){function n(b,_){return m.coerce(e,t,x,b,_)}function d(b,_){return m.coerce2(e,t,x,b,_)}if(k.handleSampleDefaults(e,t,n,l),t.visible!==!1){n("bandwidth"),n("side"),n("width")||(n("scalegroup",t.name),n("scalemode"));var u,o=n("span");Array.isArray(o)&&(u="manual"),n("spanmode",u);var h=n("line.color",(e.marker||{}).color||r),s=n("line.width"),a=n("fillcolor",v.addOpacity(t.line.color,.5));k.handlePointsDefaults(e,t,n,{prefix:""});var p=d("box.width"),c=d("box.fillcolor",a),i=d("box.line.color",h),y=d("box.line.width",s);n("box.visible",Boolean(p||c||i||y))||(t.box={visible:!1});var f=d("meanline.color",h),w=d("meanline.width",s);n("meanline.visible",Boolean(f||w))||(t.meanline={visible:!1}),n("quartilemethod")}}},{"../../components/color":367,"../../lib":515,"../box/defaults":685,"./attributes":1100}],1104:[function(g,Q,X){var m=g("../../lib"),v=function(k){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*k*k)};X.makeKDE=function(k,x,e){var t=e.length,r=v,l=k.bandwidth,n=1/(t*l);return function(d){for(var u=0,o=0;o<t;o++)u+=r((d-e[o])/l);return n*u}},X.getPositionOnKdePath=function(k,x,e){var t,r;x.orientation==="h"?(t="y",r="x"):(t="x",r="y");var l=m.findPointOnPath(k.path,e,r,{pathLength:k.pathLength}),n=k.posCenterPx,d=l[t];return[d,x.side==="both"?2*n-d:n]},X.getKdeValue=function(k,x,e){var t=k.pts.map(X.extractVal);return X.makeKDE(k,x,t)(e)/k.posDensityScale},X.extractVal=function(k){return k.v}},{"../../lib":515}],1105:[function(g,Q,X){var m=g("../../components/color"),v=g("../../lib"),k=g("../../plots/cartesian/axes"),x=g("../box/hover"),e=g("./helpers");Q.exports=function(t,r,l,n,d){d||(d={});var u,o,h=d.hoverLayer,s=t.cd,a=s[0].trace,p=a.hoveron,c=p.indexOf("violins")!==-1,i=p.indexOf("kde")!==-1,y=[];if(c||i){var f=x.hoverOnBoxes(t,r,l,n);if(i&&f.length>0){var w,b,_,T,L,A=t.xa,I=t.ya;a.orientation==="h"?(L=r,w="y",_=I,b="x",T=A):(L=l,w="x",_=A,b="y",T=I);var P=s[t.index];if(L>=P.span[0]&&L<=P.span[1]){var S=v.extendFlat({},t),E=T.c2p(L,!0),z=e.getKdeValue(P,a,L),D=e.getPositionOnKdePath(P,a,E),U=_._offset,H=_._length;S[w+"0"]=D[0],S[w+"1"]=D[1],S[b+"0"]=S[b+"1"]=E,S[b+"Label"]=b+": "+k.hoverLabelText(T,L,a[b+"hoverformat"])+", "+s[0].t.labels.kde+" "+z.toFixed(3);for(var Y=0,J=0;J<f.length;J++)if(f[J].attr==="med"){Y=J;break}S.spikeDistance=f[Y].spikeDistance;var W=w+"Spike";S[W]=f[Y][W],f[Y].spikeDistance=void 0,f[Y][W]=void 0,S.hovertemplate=!1,y.push(S),(o={})[w+"1"]=v.constrain(U+D[0],U,U+H),o[w+"2"]=v.constrain(U+D[1],U,U+H),o[b+"1"]=o[b+"2"]=T._offset+E}}c&&(y=y.concat(f))}p.indexOf("points")!==-1&&(u=x.hoverOnPoints(t,r,l));var Z=h.selectAll(".violinline-"+a.uid).data(o?[0]:[]);return Z.enter().append("line").classed("violinline-"+a.uid,!0).attr("stroke-width",1.5),Z.exit().remove(),Z.attr(o).call(m.stroke,t.color),n==="closest"?u?[u]:y:(u&&y.push(u),y)}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axes":566,"../box/hover":687,"./helpers":1104}],1106:[function(g,Q,X){Q.exports={attributes:g("./attributes"),layoutAttributes:g("./layout_attributes"),supplyDefaults:g("./defaults"),crossTraceDefaults:g("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:g("./layout_defaults"),calc:g("./calc"),crossTraceCalc:g("./cross_trace_calc"),plot:g("./plot"),style:g("./style"),styleOnSelect:g("../scatter/style").styleOnSelect,hoverPoints:g("./hover"),selectPoints:g("../box/select"),moduleType:"trace",name:"violin",basePlotModule:g("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../box/defaults":685,"../box/select":692,"../scatter/style":960,"./attributes":1100,"./calc":1101,"./cross_trace_calc":1102,"./defaults":1103,"./hover":1105,"./layout_attributes":1107,"./layout_defaults":1108,"./plot":1109,"./style":1110}],1107:[function(g,Q,X){var m=g("../box/layout_attributes"),v=g("../../lib").extendFlat;Q.exports={violinmode:v({},m.boxmode,{}),violingap:v({},m.boxgap,{}),violingroupgap:v({},m.boxgroupgap,{})}},{"../../lib":515,"../box/layout_attributes":689}],1108:[function(g,Q,X){var m=g("../../lib"),v=g("./layout_attributes"),k=g("../box/layout_defaults");Q.exports=function(x,e,t){k._supply(x,e,t,function(r,l){return m.coerce(x,e,v,r,l)},"violin")}},{"../../lib":515,"../box/layout_defaults":690,"./layout_attributes":1107}],1109:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../lib"),k=g("../../components/drawing"),x=g("../box/plot"),e=g("../scatter/line_points"),t=g("./helpers");Q.exports=function(r,l,n,d){var u=r._fullLayout,o=l.xaxis,h=l.yaxis;function s(a,p){var c=e(a,{xaxis:o,yaxis:h,trace:p,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return k.smoothopen(c[0],1)}v.makeTraceGroups(d,n,"trace violins").each(function(a){var p=m.select(this),c=a[0],i=c.t,y=c.trace;if(y.visible!==!0||i.empty)p.remove();else{var f=i.bPos,w=i.bdPos,b=l[i.valLetter+"axis"],_=l[i.posLetter+"axis"],T=y.side==="both",L=T||y.side==="positive",A=T||y.side==="negative",I=p.selectAll("path.violin").data(v.identity);I.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),I.exit().remove(),I.each(function(Y){var J,W,Z,re,V,B,j,ee,N=m.select(this),$=Y.density,K=$.length,te=_.c2l(Y.pos+f,!0),ie=_.l2p(te);if(y.width)J=i.maxKDE/w;else{var le=u._violinScaleGroupStats[y.scalegroup];J=y.scalemode==="count"?le.maxKDE/w*(le.maxCount/Y.pts.length):le.maxKDE/w}if(L){for(j=new Array(K),V=0;V<K;V++)(ee=j[V]={})[i.posLetter]=te+$[V].v/J,ee[i.valLetter]=b.c2l($[V].t,!0);W=s(j,y)}if(A){for(j=new Array(K),B=0,V=K-1;B<K;B++,V--)(ee=j[B]={})[i.posLetter]=te-$[V].v/J,ee[i.valLetter]=b.c2l($[V].t,!0);Z=s(j,y)}if(T)re=W+"L"+Z.substr(1)+"Z";else{var se=[ie,b.c2p($[0].t)],ve=[ie,b.c2p($[K-1].t)];y.orientation==="h"&&(se.reverse(),ve.reverse()),re=L?"M"+se+"L"+W.substr(1)+"L"+ve:"M"+ve+"L"+Z.substr(1)+"L"+se}N.attr("d",re),Y.posCenterPx=ie,Y.posDensityScale=J*w,Y.path=N.node(),Y.pathLength=Y.path.getTotalLength()/(T?2:1)});var P,S,E,z=y.box,D=z.width,U=(z.line||{}).width;T?(P=w*D,S=0):L?(P=[0,w*D/2],S=U*{x:1,y:-1}[i.posLetter]):(P=[w*D/2,0],S=U*{x:-1,y:1}[i.posLetter]),x.plotBoxAndWhiskers(p,{pos:_,val:b},y,{bPos:f,bdPos:P,bPosPxOffset:S}),x.plotBoxMean(p,{pos:_,val:b},y,{bPos:f,bdPos:P,bPosPxOffset:S}),!y.box.visible&&y.meanline.visible&&(E=v.identity);var H=p.selectAll("path.meanline").data(E||[]);H.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),H.exit().remove(),H.each(function(Y){var J=b.c2p(Y.mean,!0),W=t.getPositionOnKdePath(Y,y,J);m.select(this).attr("d",y.orientation==="h"?"M"+J+","+W[0]+"V"+W[1]:"M"+W[0]+","+J+"H"+W[1])}),x.plotPoints(p,{x:o,y:h},y,i)}})}},{"../../components/drawing":389,"../../lib":515,"../box/plot":691,"../scatter/line_points":950,"./helpers":1104,"@plotly/d3":58}],1110:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../components/color"),k=g("../scatter/style").stylePoints;Q.exports=function(x){var e=m.select(x).selectAll("g.trace.violins");e.style("opacity",function(t){return t[0].trace.opacity}),e.each(function(t){var r=t[0].trace,l=m.select(this),n=r.box||{},d=n.line||{},u=r.meanline||{},o=u.width;l.selectAll("path.violin").style("stroke-width",r.line.width+"px").call(v.stroke,r.line.color).call(v.fill,r.fillcolor),l.selectAll("path.box").style("stroke-width",d.width+"px").call(v.stroke,d.color).call(v.fill,n.fillcolor);var h={"stroke-width":o+"px","stroke-dasharray":2*o+"px,"+o+"px"};l.selectAll("path.mean").style(h).call(v.stroke,u.color),l.selectAll("path.meanline").style(h).call(v.stroke,u.color),k(l,r,x)})}},{"../../components/color":367,"../scatter/style":960,"@plotly/d3":58}],1111:[function(g,Q,X){var m=g("../../components/colorscale/attributes"),v=g("../isosurface/attributes"),k=g("../surface/attributes"),x=g("../../plots/attributes"),e=g("../../lib/extend").extendFlat,t=g("../../plot_api/edit_types").overrideAll,r=Q.exports=t(e({x:v.x,y:v.y,z:v.z,value:v.value,isomin:v.isomin,isomax:v.isomax,surface:v.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:v.slices,caps:v.caps,text:v.text,hovertext:v.hovertext,xhoverformat:v.xhoverformat,yhoverformat:v.yhoverformat,zhoverformat:v.zhoverformat,valuehoverformat:v.valuehoverformat,hovertemplate:v.hovertemplate},m("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:v.colorbar,opacity:v.opacity,opacityscale:k.opacityscale,lightposition:v.lightposition,lighting:v.lighting,flatshading:v.flatshading,contour:v.contour,hoverinfo:e({},x.hoverinfo),showlegend:e({},x.showlegend,{dflt:!1})}),"calc","nested");r.x.editType=r.y.editType=r.z.editType=r.value.editType="calc+clearAxisTypes",r.transforms=void 0},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../isosurface/attributes":871,"../surface/attributes":1070}],1112:[function(g,Q,X){var m=g("../../../stackgl_modules").gl_mesh3d,v=g("../../lib/gl_format_color").parseColorScale,k=g("../../lib/str2rgbarray"),x=g("../../components/colorscale").extractOpts,e=g("../../plots/gl3d/zip3"),t=g("../isosurface/convert").findNearestOnAxis,r=g("../isosurface/convert").generateIsoMeshes;function l(d,u,o){this.scene=d,this.uid=o,this.mesh=u,this.name="",this.data=null,this.showContour=!1}var n=l.prototype;n.handlePick=function(d){if(d.object===this.mesh){var u=d.data.index,o=this.data._meshX[u],h=this.data._meshY[u],s=this.data._meshZ[u],a=this.data._Ys.length,p=this.data._Zs.length,c=t(o,this.data._Xs).id,i=t(h,this.data._Ys).id,y=t(s,this.data._Zs).id,f=d.index=y+p*i+p*a*c;d.traceCoordinate=[this.data._meshX[f],this.data._meshY[f],this.data._meshZ[f],this.data._value[f]];var w=this.data.hovertext||this.data.text;return Array.isArray(w)&&w[f]!==void 0?d.textLabel=w[f]:w&&(d.textLabel=w),!0}},n.update=function(d){var u=this.scene,o=u.fullSceneLayout;function h(p,c,i,y){return c.map(function(f){return p.d2l(f,0,y)*i})}this.data=r(d);var s={positions:e(h(o.xaxis,d._meshX,u.dataScale[0],d.xcalendar),h(o.yaxis,d._meshY,u.dataScale[1],d.ycalendar),h(o.zaxis,d._meshZ,u.dataScale[2],d.zcalendar)),cells:e(d._meshI,d._meshJ,d._meshK),lightPosition:[d.lightposition.x,d.lightposition.y,d.lightposition.z],ambient:d.lighting.ambient,diffuse:d.lighting.diffuse,specular:d.lighting.specular,roughness:d.lighting.roughness,fresnel:d.lighting.fresnel,vertexNormalsEpsilon:d.lighting.vertexnormalsepsilon,faceNormalsEpsilon:d.lighting.facenormalsepsilon,opacity:d.opacity,opacityscale:d.opacityscale,contourEnable:d.contour.show,contourColor:k(d.contour.color).slice(0,3),contourWidth:d.contour.width,useFacetNormals:d.flatshading},a=x(d);s.vertexIntensity=d._meshIntensity,s.vertexIntensityBounds=[a.min,a.max],s.colormap=v(d),this.mesh.update(s)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},Q.exports=function(d,u){var o=d.glplot.gl,h=m({gl:o}),s=new l(d,h,u.uid);return h._trace=s,s.update(u),d.glplot.add(h),s}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618,"../isosurface/convert":873}],1113:[function(g,Q,X){var m=g("../../lib"),v=g("./attributes"),k=g("../isosurface/defaults").supplyIsoDefaults,x=g("../surface/defaults").opacityscaleDefaults;Q.exports=function(e,t,r,l){function n(d,u){return m.coerce(e,t,v,d,u)}k(e,t,r,l,n),x(e,t,l,n)}},{"../../lib":515,"../isosurface/defaults":874,"../surface/defaults":1073,"./attributes":1111}],1114:[function(g,Q,X){Q.exports={attributes:g("./attributes"),supplyDefaults:g("./defaults"),calc:g("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:g("./convert"),moduleType:"trace",name:"volume",basePlotModule:g("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"../isosurface/calc":872,"./attributes":1111,"./convert":1112,"./defaults":1113}],1115:[function(g,Q,X){var m=g("../bar/attributes"),v=g("../scatter/attributes").line,k=g("../../plots/attributes"),x=g("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=g("../../plots/template_attributes").hovertemplateAttrs,t=g("../../plots/template_attributes").texttemplateAttrs,r=g("./constants"),l=g("../../lib/extend").extendFlat,n=g("../../components/color");function d(u){return{marker:{color:l({},m.marker.color,{arrayOk:!1,editType:"style"}),line:{color:l({},m.marker.line.color,{arrayOk:!1,editType:"style"}),width:l({},m.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}Q.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),hovertext:m.hovertext,hovertemplate:e({},{keys:r.eventDataKeys}),hoverinfo:l({},k.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:t({editType:"plot"},{keys:r.eventDataKeys.concat(["label"])}),text:m.text,textposition:m.textposition,insidetextanchor:m.insidetextanchor,textangle:m.textangle,textfont:m.textfont,insidetextfont:m.insidetextfont,outsidetextfont:m.outsidetextfont,constraintext:m.constraintext,cliponaxis:m.cliponaxis,orientation:m.orientation,offset:m.offset,width:m.width,increasing:d(),decreasing:d(),totals:d(),connector:{line:{color:l({},v.color,{dflt:n.defaultLine}),width:l({},v.width,{editType:"plot"}),dash:v.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup}},{"../../components/color":367,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936,"./constants":1117}],1116:[function(g,Q,X){var m=g("../../plots/cartesian/axes"),v=g("../../plots/cartesian/align_period"),k=g("../../lib").mergeArray,x=g("../scatter/calc_selection"),e=g("../../constants/numerical").BADNUM;function t(l){return l==="a"||l==="absolute"}function r(l){return l==="t"||l==="total"}Q.exports=function(l,n){var d,u,o,h,s,a,p=m.getFromId(l,n.xaxis||"x"),c=m.getFromId(l,n.yaxis||"y");n.orientation==="h"?(d=p.makeCalcdata(n,"x"),o=c.makeCalcdata(n,"y"),h=v(n,c,"y",o),s=!!n.yperiodalignment,a="y"):(d=c.makeCalcdata(n,"y"),o=p.makeCalcdata(n,"x"),h=v(n,p,"x",o),s=!!n.xperiodalignment,a="x"),u=h.vals;for(var i,y=Math.min(u.length,d.length),f=new Array(y),w=0,b=!1,_=0;_<y;_++){var T=d[_]||0,L=!1;(d[_]!==e||r(n.measure[_])||t(n.measure[_]))&&_+1<y&&(d[_+1]!==e||r(n.measure[_+1])||t(n.measure[_+1]))&&(L=!0);var A=f[_]={i:_,p:u[_],s:T,rawS:T,cNext:L};t(n.measure[_])?(w=A.s,A.isSum=!0,A.dir="totals",A.s=w):r(n.measure[_])?(A.isSum=!0,A.dir="totals",A.s=w):(A.isSum=!1,A.dir=A.rawS<0?"decreasing":"increasing",i=A.s,A.s=w+i,w+=i),A.dir==="totals"&&(b=!0),s&&(f[_].orig_p=o[_],f[_][a+"End"]=h.ends[_],f[_][a+"Start"]=h.starts[_]),n.ids&&(A.id=String(n.ids[_])),A.v=(n.base||0)+w}return f.length&&(f[0].hasTotals=b),k(n.text,f,"tx"),k(n.hovertext,f,"htx"),x(f,n),f}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938}],1117:[function(g,Q,X){Q.exports={eventDataKeys:["initial","delta","final"]}},{}],1118:[function(g,Q,X){var m=g("../bar/cross_trace_calc").setGroupPositions;Q.exports=function(v,k){var x,e,t=v._fullLayout,r=v._fullData,l=v.calcdata,n=k.xaxis,d=k.yaxis,u=[],o=[],h=[];for(e=0;e<r.length;e++){var s=r[e];s.visible===!0&&s.xaxis===n._id&&s.yaxis===d._id&&s.type==="waterfall"&&(x=l[e],s.orientation==="h"?h.push(x):o.push(x),u.push(x))}var a={mode:t.waterfallmode,norm:t.waterfallnorm,gap:t.waterfallgap,groupgap:t.waterfallgroupgap};for(m(v,n,d,o,a),m(v,d,n,h,a),e=0;e<u.length;e++){x=u[e];for(var p=0;p<x.length;p++){var c=x[p];c.isSum===!1&&(c.s0+=p===0?0:x[p-1].s),p+1<x.length&&(x[p].nextP0=x[p+1].p0,x[p].nextS0=x[p+1].s0)}}}},{"../bar/cross_trace_calc":660}],1119:[function(g,Q,X){var m=g("../../lib"),v=g("../bar/defaults").handleGroupingDefaults,k=g("../bar/defaults").handleText,x=g("../scatter/xy_defaults"),e=g("../scatter/period_defaults"),t=g("./attributes"),r=g("../../components/color"),l=g("../../constants/delta.js"),n=l.INCREASING.COLOR,d=l.DECREASING.COLOR;function u(o,h,s){o(h+".marker.color",s),o(h+".marker.line.color",r.defaultLine),o(h+".marker.line.width")}Q.exports={supplyDefaults:function(o,h,s,a){function p(i,y){return m.coerce(o,h,t,i,y)}if(x(o,h,a,p)){e(o,h,a,p),p("xhoverformat"),p("yhoverformat"),p("measure"),p("orientation",h.x&&!h.y?"h":"v"),p("base"),p("offset"),p("width"),p("text"),p("hovertext"),p("hovertemplate");var c=p("textposition");k(o,h,a,p,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),h.textposition!=="none"&&(p("texttemplate"),h.texttemplate||p("textinfo")),u(p,"increasing",n),u(p,"decreasing",d),u(p,"totals","#4499FF"),p("connector.visible")&&(p("connector.mode"),p("connector.line.width")&&(p("connector.line.color"),p("connector.line.dash")))}else h.visible=!1},crossTraceDefaults:function(o,h){var s,a;function p(i){return m.coerce(a._input,a,t,i)}if(h.waterfallmode==="group")for(var c=0;c<o.length;c++)s=(a=o[c])._input,v(s,a,h,p)}}},{"../../components/color":367,"../../constants/delta.js":485,"../../lib":515,"../bar/defaults":661,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":1115}],1120:[function(g,Q,X){Q.exports=function(m,v){return m.x="xVal"in v?v.xVal:v.x,m.y="yVal"in v?v.yVal:v.y,"initial"in v&&(m.initial=v.initial),"delta"in v&&(m.delta=v.delta),"final"in v&&(m.final=v.final),v.xa&&(m.xaxis=v.xa),v.ya&&(m.yaxis=v.ya),m}},{}],1121:[function(g,Q,X){var m=g("../../plots/cartesian/axes").hoverLabelText,v=g("../../components/color").opacity,k=g("../bar/hover").hoverOnBars,x=g("../../constants/delta.js"),e=x.INCREASING.SYMBOL,t=x.DECREASING.SYMBOL;Q.exports=function(r,l,n,d,u){var o=k(r,l,n,d,u);if(o){var h=o.cd,s=h[0].trace,a=s.orientation==="h",p=a?"x":"y",c=a?r.xa:r.ya,i=h[o.index],y=i.isSum?i.b+i.s:i.rawS;if(!i.isSum){o.initial=i.b+i.s-y,o.delta=y,o.final=o.initial+o.delta;var f=A(Math.abs(o.delta));o.deltaLabel=y<0?"("+f+")":f,o.finalLabel=A(o.final),o.initialLabel=A(o.initial)}var w=i.hi||s.hoverinfo,b=[];if(w&&w!=="none"&&w!=="skip"){var _=w==="all",T=w.split("+"),L=function(I){return _||T.indexOf(I)!==-1};i.isSum||(!L("final")||L(a?"x":"y")||b.push(o.finalLabel),L("delta")&&(y<0?b.push(o.deltaLabel+" "+t):b.push(o.deltaLabel+" "+e)),L("initial")&&b.push("Initial: "+o.initialLabel))}return b.length&&(o.extraText=b.join("<br>")),o.color=function(I,P){var S=I[P.dir].marker,E=S.color,z=S.line.color,D=S.line.width;if(v(E))return E;if(v(z)&&D)return z}(s,i),[o]}function A(I){return m(c,I,s[p+"hoverformat"])}}},{"../../components/color":367,"../../constants/delta.js":485,"../../plots/cartesian/axes":566,"../bar/hover":664}],1122:[function(g,Q,X){Q.exports={attributes:g("./attributes"),layoutAttributes:g("./layout_attributes"),supplyDefaults:g("./defaults").supplyDefaults,crossTraceDefaults:g("./defaults").crossTraceDefaults,supplyLayoutDefaults:g("./layout_defaults"),calc:g("./calc"),crossTraceCalc:g("./cross_trace_calc"),plot:g("./plot"),style:g("./style").style,hoverPoints:g("./hover"),eventData:g("./event_data"),selectPoints:g("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:g("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../bar/select":669,"./attributes":1115,"./calc":1116,"./cross_trace_calc":1118,"./defaults":1119,"./event_data":1120,"./hover":1121,"./layout_attributes":1123,"./layout_defaults":1124,"./plot":1125,"./style":1126}],1123:[function(g,Q,X){Q.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1124:[function(g,Q,X){var m=g("../../lib"),v=g("./layout_attributes");Q.exports=function(k,x,e){var t=!1;function r(d,u){return m.coerce(k,x,v,d,u)}for(var l=0;l<e.length;l++){var n=e[l];if(n.visible&&n.type==="waterfall"){t=!0;break}}t&&(r("waterfallmode"),r("waterfallgap",.2),r("waterfallgroupgap"))}},{"../../lib":515,"./layout_attributes":1123}],1125:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../lib"),k=g("../../components/drawing"),x=g("../../constants/numerical").BADNUM,e=g("../bar/plot"),t=g("../bar/uniform_text").clearMinTextSize;Q.exports=function(r,l,n,d){var u=r._fullLayout;t("waterfall",u),e.plot(r,l,n,d,{mode:u.waterfallmode,norm:u.waterfallmode,gap:u.waterfallgap,groupgap:u.waterfallgroupgap}),function(o,h,s,a){var p=h.xaxis,c=h.yaxis;v.makeTraceGroups(a,s,"trace bars").each(function(i){var y=m.select(this),f=i[0].trace,w=v.ensureSingle(y,"g","lines");if(f.connector&&f.connector.visible){var b=f.orientation==="h",_=f.connector.mode,T=w.selectAll("g.line").data(v.identity);T.enter().append("g").classed("line",!0),T.exit().remove();var L=T.size();T.each(function(A,I){if(I===L-1||A.cNext){var P=function(D,U,H,Y){var J=[],W=[],Z=Y?U:H,re=Y?H:U;return J[0]=Z.c2p(D.s0,!0),W[0]=re.c2p(D.p0,!0),J[1]=Z.c2p(D.s1,!0),W[1]=re.c2p(D.p1,!0),J[2]=Z.c2p(D.nextS0,!0),W[2]=re.c2p(D.nextP0,!0),Y?[J,W]:[W,J]}(A,p,c,b),S=P[0],E=P[1],z="";S[0]!==x&&E[0]!==x&&S[1]!==x&&E[1]!==x&&(_==="spanning"&&!A.isSum&&I>0&&(z+=b?"M"+S[0]+","+E[1]+"V"+E[0]:"M"+S[1]+","+E[0]+"H"+S[0]),_!=="between"&&(A.isSum||I<L-1)&&(z+=b?"M"+S[1]+","+E[0]+"V"+E[1]:"M"+S[0]+","+E[1]+"H"+S[1]),S[2]!==x&&E[2]!==x&&(z+=b?"M"+S[1]+","+E[1]+"V"+E[2]:"M"+S[1]+","+E[1]+"H"+S[2])),z===""&&(z="M0,0Z"),v.ensureSingle(m.select(this),"path").attr("d",z).call(k.setClipUrl,h.layerClipId,o)}})}else w.remove()})}(r,l,n,d)}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../bar/plot":668,"../bar/uniform_text":673,"@plotly/d3":58}],1126:[function(g,Q,X){var m=g("@plotly/d3"),v=g("../../components/drawing"),k=g("../../components/color"),x=g("../../constants/interactions").DESELECTDIM,e=g("../bar/style"),t=g("../bar/uniform_text").resizeText,r=e.styleTextPoints;Q.exports={style:function(l,n,d){var u=d||m.select(l).selectAll("g.waterfalllayer").selectAll("g.trace");t(l,u,"waterfall"),u.style("opacity",function(o){return o[0].trace.opacity}),u.each(function(o){var h=m.select(this),s=o[0].trace;h.selectAll(".point > path").each(function(a){if(!a.isBlank){var p=s[a.dir].marker;m.select(this).call(k.fill,p.color).call(k.stroke,p.line.color).call(v.dashLine,p.line.dash,p.line.width).style("opacity",s.selectedpoints&&!a.selected?x:1)}}),r(h,s,l),h.selectAll(".lines").each(function(){var a=s.connector.line;v.lineGroupStyle(m.select(this).selectAll("path"),a.width,a.color,a.dash)})})}}},{"../../components/color":367,"../../components/drawing":389,"../../constants/interactions":490,"../bar/style":671,"../bar/uniform_text":673,"@plotly/d3":58}],1127:[function(g,Q,X){var m=g("../plots/cartesian/axes"),v=g("../lib"),k=g("../plot_api/plot_schema"),x=g("./helpers").pointsAccessorFunction,e=g("../constants/numerical").BADNUM;X.moduleType="transform",X.name="aggregate";var t=X.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},r=t.aggregations;function l(o,h,s,a){if(a.enabled){for(var p=a.target,c=v.nestedProperty(h,p),i=c.get(),y=function(b,_){var T=b.func,L=_.d2c,A=_.c2d;switch(T){case"count":return n;case"first":return d;case"last":return u;case"sum":return function(I,P){for(var S=0,E=0;E<P.length;E++){var z=L(I[P[E]]);z!==e&&(S+=z)}return A(S)};case"avg":return function(I,P){for(var S=0,E=0,z=0;z<P.length;z++){var D=L(I[P[z]]);D!==e&&(S+=D,E++)}return E?A(S/E):e};case"min":return function(I,P){for(var S=1/0,E=0;E<P.length;E++){var z=L(I[P[E]]);z!==e&&(S=Math.min(S,z))}return S===1/0?e:A(S)};case"max":return function(I,P){for(var S=-1/0,E=0;E<P.length;E++){var z=L(I[P[E]]);z!==e&&(S=Math.max(S,z))}return S===-1/0?e:A(S)};case"range":return function(I,P){for(var S=1/0,E=-1/0,z=0;z<P.length;z++){var D=L(I[P[z]]);D!==e&&(S=Math.min(S,D),E=Math.max(E,D))}return E===-1/0||S===1/0?e:A(E-S)};case"change":return function(I,P){var S=L(I[P[0]]),E=L(I[P[P.length-1]]);return S===e||E===e?e:A(E-S)};case"median":return function(I,P){for(var S=[],E=0;E<P.length;E++){var z=L(I[P[E]]);z!==e&&S.push(z)}if(!S.length)return e;S.sort(v.sorterAsc);var D=(S.length-1)/2;return A((S[Math.floor(D)]+S[Math.ceil(D)])/2)};case"mode":return function(I,P){for(var S={},E=0,z=e,D=0;D<P.length;D++){var U=L(I[P[D]]);if(U!==e){var H=S[U]=(S[U]||0)+1;H>E&&(E=H,z=U)}}return E?A(z):e};case"rms":return function(I,P){for(var S=0,E=0,z=0;z<P.length;z++){var D=L(I[P[z]]);D!==e&&(S+=D*D,E++)}return E?A(Math.sqrt(S/E)):e};case"stddev":return function(I,P){var S,E=0,z=0,D=1,U=e;for(S=0;S<P.length&&U===e;S++)U=L(I[P[S]]);if(U===e)return e;for(;S<P.length;S++){var H=L(I[P[S]]);if(H!==e){var Y=H-U;E+=Y,z+=Y*Y,D++}}var J=b.funcmode==="sample"?D-1:D;return J?Math.sqrt((z-E*E/D)/J):0}}}(a,m.getDataConversions(o,h,p,i)),f=new Array(s.length),w=0;w<s.length;w++)f[w]=y(i,s[w]);c.set(f),a.func==="count"&&v.pushUnique(h._arrayAttrs,p)}}function n(o,h){return h.length}function d(o,h){return o[h[0]]}function u(o,h){return o[h[h.length-1]]}X.supplyDefaults=function(o,h){var s,a={};function p(A,I){return v.coerce(o,a,t,A,I)}if(!p("enabled"))return a;var c=k.findArrayAttributes(h),i={};for(s=0;s<c.length;s++)i[c[s]]=1;var y=p("groups");if(!Array.isArray(y)){if(!i[y])return a.enabled=!1,a;i[y]=0}var f,w=o.aggregations||[],b=a.aggregations=new Array(w.length);function _(A,I){return v.coerce(w[s],f,r,A,I)}for(s=0;s<w.length;s++){f={_index:s};var T=_("target"),L=_("func");_("enabled")&&T&&(i[T]||L==="count"&&i[T]===void 0)?(L==="stddev"&&_("funcmode"),i[T]=0,b[s]=f):b[s]={enabled:!1,_index:s}}for(s=0;s<c.length;s++)i[c[s]]&&b.push({target:c[s],func:r.func.dflt,enabled:!0,_index:-1});return a},X.calcTransform=function(o,h,s){if(s.enabled){var a=s.groups,p=v.getTargetArray(h,{target:a});if(p){var c,i,y,f,w={},b={},_=[],T=x(h.transforms,s),L=p.length;for(h._length&&(L=Math.min(L,h._length)),c=0;c<L;c++)(y=w[i=p[c]])===void 0?(w[i]=_.length,f=[c],_.push(f),b[w[i]]=T(c)):(_[y].push(c),b[w[i]]=(b[w[i]]||[]).concat(T(c)));s._indexToPoints=b;var A=s.aggregations;for(c=0;c<A.length;c++)l(o,h,_,A[c]);typeof a=="string"&&l(o,h,_,{target:a,func:"first",enabled:!0}),h._length=_.length}}}},{"../constants/numerical":491,"../lib":515,"../plot_api/plot_schema":554,"../plots/cartesian/axes":566,"./helpers":1130}],1128:[function(g,Q,X){var m=g("../lib"),v=g("../registry"),k=g("../plots/cartesian/axes"),x=g("./helpers").pointsAccessorFunction,e=g("../constants/filter_ops"),t=e.COMPARISON_OPS,r=e.INTERVAL_OPS,l=e.SET_OPS;X.moduleType="transform",X.name="filter",X.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(t).concat(r).concat(l),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},X.supplyDefaults=function(n){var d={};function u(s,a){return m.coerce(n,d,X.attributes,s,a)}if(u("enabled")){var o=u("target");if(m.isArrayOrTypedArray(o)&&o.length===0)return d.enabled=!1,d;u("preservegaps"),u("operation"),u("value");var h=v.getComponentMethod("calendars","handleDefaults");h(n,d,"valuecalendar",null),h(n,d,"targetcalendar",null)}return d},X.calcTransform=function(n,d,u){if(u.enabled){var o=m.getTargetArray(d,u);if(o){var h=u.target,s=o.length;d._length&&(s=Math.min(s,d._length));var a=u.targetcalendar,p=d._arrayAttrs,c=u.preservegaps;if(typeof h=="string"){var i=m.nestedProperty(d,h+"calendar").get();i&&(a=i)}var y,f,w=function(P,S,E){var z=P.operation,D=P.value,U=Array.isArray(D);function H(Z){return Z.indexOf(z)!==-1}var Y,J=function(Z){return S(Z,0,P.valuecalendar)},W=function(Z){return S(Z,0,E)};switch(H(t)?Y=J(U?D[0]:D):H(r)?Y=U?[J(D[0]),J(D[1])]:[J(D),J(D)]:H(l)&&(Y=U?D.map(J):[J(D)]),z){case"=":return function(Z){return W(Z)===Y};case"!=":return function(Z){return W(Z)!==Y};case"<":return function(Z){return W(Z)<Y};case"<=":return function(Z){return W(Z)<=Y};case">":return function(Z){return W(Z)>Y};case">=":return function(Z){return W(Z)>=Y};case"[]":return function(Z){var re=W(Z);return re>=Y[0]&&re<=Y[1]};case"()":return function(Z){var re=W(Z);return re>Y[0]&&re<Y[1]};case"[)":return function(Z){var re=W(Z);return re>=Y[0]&&re<Y[1]};case"(]":return function(Z){var re=W(Z);return re>Y[0]&&re<=Y[1]};case"][":return function(Z){var re=W(Z);return re<=Y[0]||re>=Y[1]};case")(":return function(Z){var re=W(Z);return re<Y[0]||re>Y[1]};case"](":return function(Z){var re=W(Z);return re<=Y[0]||re>Y[1]};case")[":return function(Z){var re=W(Z);return re<Y[0]||re>=Y[1]};case"{}":return function(Z){return Y.indexOf(W(Z))!==-1};case"}{":return function(Z){return Y.indexOf(W(Z))===-1}}}(u,k.getDataToCoordFunc(n,d,h,o),a),b={},_={},T=0;c?(y=function(P){b[P.astr]=m.extendDeep([],P.get()),P.set(new Array(s))},f=function(P,S){var E=b[P.astr][S];P.get()[S]=E}):(y=function(P){b[P.astr]=m.extendDeep([],P.get()),P.set([])},f=function(P,S){var E=b[P.astr][S];P.get().push(E)}),I(y);for(var L=x(d.transforms,u),A=0;A<s;A++)w(o[A])?(I(f,A),_[T++]=L(A)):c&&T++;u._indexToPoints=_,d._length=T}}function I(P,S){for(var E=0;E<p.length;E++)P(m.nestedProperty(d,p[E]),S)}}},{"../constants/filter_ops":487,"../lib":515,"../plots/cartesian/axes":566,"../registry":647,"./helpers":1130}],1129:[function(g,Q,X){var m=g("../lib"),v=g("../plot_api/plot_schema"),k=g("../plots/plots"),x=g("./helpers").pointsAccessorFunction;function e(t,r){var l,n,d,u,o,h,s,a,p,c,i=r.transform,y=r.transformIndex,f=t.transforms[y].groups,w=x(t.transforms,i);if(!m.isArrayOrTypedArray(f)||f.length===0)return[t];var b=m.filterUnique(f),_=new Array(b.length),T=f.length,L=v.findArrayAttributes(t),A=i.styles||[],I={};for(l=0;l<A.length;l++)I[A[l].target]=A[l].value;i.styles&&(c=m.keyedContainer(i,"styles","target","value.name"));var P={},S={};for(l=0;l<b.length;l++){P[h=b[l]]=l,S[h]=0,(s=_[l]=m.extendDeepNoArrays({},t))._group=h,s.transforms[y]._indexToPoints={};var E=null;for(c&&(E=c.get(h)),s.name=E||E===""?E:m.templateString(i.nameformat,{trace:t.name,group:h}),a=s.transforms,s.transforms=[],n=0;n<a.length;n++)s.transforms[n]=m.extendDeepNoArrays({},a[n]);for(n=0;n<L.length;n++)m.nestedProperty(s,L[n]).set([])}for(d=0;d<L.length;d++){for(u=L[d],n=0,p=[];n<b.length;n++)p[n]=m.nestedProperty(_[n],u).get();for(o=m.nestedProperty(t,u).get(),n=0;n<T;n++)p[P[f[n]]].push(o[n])}for(n=0;n<T;n++)(s=_[P[f[n]]]).transforms[y]._indexToPoints[S[f[n]]]=w(n),S[f[n]]++;for(l=0;l<b.length;l++)h=b[l],s=_[l],k.clearExpandedTraceDefaultColors(s),s=m.extendDeepNoArrays(s,I[h]||{});return _}X.moduleType="transform",X.name="groupby",X.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},X.supplyDefaults=function(t,r,l){var n,d={};function u(p,c){return m.coerce(t,d,X.attributes,p,c)}if(!u("enabled"))return d;u("groups"),u("nameformat",l._dataLength>1?"%{group} (%{trace})":"%{group}");var o=t.styles,h=d.styles=[];if(o)for(n=0;n<o.length;n++){var s=h[n]={};m.coerce(o[n],h[n],X.attributes.styles,"target");var a=m.coerce(o[n],h[n],X.attributes.styles,"value");m.isPlainObject(a)?s.value=m.extendDeep({},a):a&&delete s.value}return d},X.transform=function(t,r){var l,n,d,u=[];for(n=0;n<t.length;n++)for(l=e(t[n],r),d=0;d<l.length;d++)u.push(l[d]);return u}},{"../lib":515,"../plot_api/plot_schema":554,"../plots/plots":628,"./helpers":1130}],1130:[function(g,Q,X){X.pointsAccessorFunction=function(m,v){for(var k,x,e=0;e<m.length&&(k=m[e])!==v;e++)k._indexToPoints&&k.enabled!==!1&&(x=k._indexToPoints);return x?function(t){return x[t]}:function(t){return[t]}}},{}],1131:[function(g,Q,X){var m=g("../lib"),v=g("../plots/cartesian/axes"),k=g("./helpers").pointsAccessorFunction,x=g("../constants/numerical").BADNUM;X.moduleType="transform",X.name="sort",X.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},X.supplyDefaults=function(e){var t={};function r(l,n){return m.coerce(e,t,X.attributes,l,n)}return r("enabled")&&(r("target"),r("order")),t},X.calcTransform=function(e,t,r){if(r.enabled){var l=m.getTargetArray(t,r);if(l){var n=r.target,d=l.length;t._length&&(d=Math.min(d,t._length));var u,o,h=t._arrayAttrs,s=function(f,w,b,_){var T,L=new Array(_),A=new Array(_);for(T=0;T<_;T++)L[T]={v:w[T],i:T};for(L.sort(function(I,P){switch(I.order){case"ascending":return function(S,E){var z=P(S.v),D=P(E.v);return z===x?1:D===x?-1:z-D};case"descending":return function(S,E){var z=P(S.v),D=P(E.v);return z===x?1:D===x?-1:D-z}}}(f,b)),T=0;T<_;T++)A[T]=L[T].i;return A}(r,l,v.getDataToCoordFunc(e,t,n,l),d),a=k(t.transforms,r),p={};for(u=0;u<h.length;u++){var c=m.nestedProperty(t,h[u]),i=c.get(),y=new Array(d);for(o=0;o<d;o++)y[o]=i[s[o]];c.set(y)}for(o=0;o<d;o++)p[o]=a(s[o]);r._indexToPoints=p,t._length=d}}}},{"../constants/numerical":491,"../lib":515,"../plots/cartesian/axes":566,"./helpers":1130}],1132:[function(g,Q,X){X.version="2.15.0"},{}],1133:[function(g,Q,X){(function(m){(function(){(function(v){typeof X=="object"&&Q!==void 0?Q.exports=v():(typeof window<"u"?window:m!==void 0?m:typeof self<"u"?self:this).stackgl=v()})(function(){return function v(k,x,e){function t(n,d){if(!x[n]){if(!k[n]){var u=typeof g=="function"&&g;if(!d&&u)return u(n,!0);if(r)return r(n,!0);var o=new Error("Cannot find module '"+n+"'");throw o.code="MODULE_NOT_FOUND",o}var h=x[n]={exports:{}};k[n][0].call(h.exports,function(s){return t(k[n][1][s]||s)},h,h.exports,v,k,x,e)}return x[n].exports}for(var r=typeof g=="function"&&g,l=0;l<e.length;l++)t(e[l]);return t}({1:[function(v,k,x){x.byteLength=function(h){var s=u(h),a=s[0],p=s[1];return 3*(a+p)/4-p},x.toByteArray=function(h){var s,a,p=u(h),c=p[0],i=p[1],y=new r(function(b,_,T){return 3*(_+T)/4-T}(0,c,i)),f=0,w=i>0?c-4:c;for(a=0;a<w;a+=4)s=t[h.charCodeAt(a)]<<18|t[h.charCodeAt(a+1)]<<12|t[h.charCodeAt(a+2)]<<6|t[h.charCodeAt(a+3)],y[f++]=s>>16&255,y[f++]=s>>8&255,y[f++]=255&s;return i===2&&(s=t[h.charCodeAt(a)]<<2|t[h.charCodeAt(a+1)]>>4,y[f++]=255&s),i===1&&(s=t[h.charCodeAt(a)]<<10|t[h.charCodeAt(a+1)]<<4|t[h.charCodeAt(a+2)]>>2,y[f++]=s>>8&255,y[f++]=255&s),y},x.fromByteArray=function(h){for(var s,a=h.length,p=a%3,c=[],i=0,y=a-p;i<y;i+=16383)c.push(o(h,i,i+16383>y?y:i+16383));return p===1?(s=h[a-1],c.push(e[s>>2]+e[s<<4&63]+"==")):p===2&&(s=(h[a-2]<<8)+h[a-1],c.push(e[s>>10]+e[s>>4&63]+e[s<<2&63]+"=")),c.join("")};for(var e=[],t=[],r=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,d=l.length;n<d;++n)e[n]=l[n],t[l.charCodeAt(n)]=n;function u(h){var s=h.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var a=h.indexOf("=");return a===-1&&(a=s),[a,a===s?0:4-a%4]}function o(h,s,a){for(var p,c,i=[],y=s;y<a;y+=3)p=(h[y]<<16&16711680)+(h[y+1]<<8&65280)+(255&h[y+2]),i.push(e[(c=p)>>18&63]+e[c>>12&63]+e[c>>6&63]+e[63&c]);return i.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63},{}],2:[function(v,k,x){},{}],3:[function(v,k,x){(function(e){(function(){var t=v("base64-js"),r=v("ieee754");x.Buffer=n,x.SlowBuffer=function(N){return+N!=N&&(N=0),n.alloc(+N)},x.INSPECT_MAX_BYTES=50;function l(N){if(N>2147483647)throw new RangeError('The value "'+N+'" is invalid for option "size"');var $=new Uint8Array(N);return $.__proto__=n.prototype,$}function n(N,$,K){if(typeof N=="number"){if(typeof $=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return o(N)}return d(N,$,K)}function d(N,$,K){if(typeof N=="string")return function(le,se){if(typeof se=="string"&&se!==""||(se="utf8"),!n.isEncoding(se))throw new TypeError("Unknown encoding: "+se);var ve=0|a(le,se),fe=l(ve),ye=fe.write(le,se);return ye!==ve&&(fe=fe.slice(0,ye)),fe}(N,$);if(ArrayBuffer.isView(N))return h(N);if(N==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N);if(j(N,ArrayBuffer)||N&&j(N.buffer,ArrayBuffer))return function(le,se,ve){if(se<0||le.byteLength<se)throw new RangeError('"offset" is outside of buffer bounds');if(le.byteLength<se+(ve||0))throw new RangeError('"length" is outside of buffer bounds');var fe;return fe=se===void 0&&ve===void 0?new Uint8Array(le):ve===void 0?new Uint8Array(le,se):new Uint8Array(le,se,ve),fe.__proto__=n.prototype,fe}(N,$,K);if(typeof N=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var te=N.valueOf&&N.valueOf();if(te!=null&&te!==N)return n.from(te,$,K);var ie=function(le){if(n.isBuffer(le)){var se=0|s(le.length),ve=l(se);return ve.length===0||le.copy(ve,0,0,se),ve}if(le.length!==void 0)return typeof le.length!="number"||ee(le.length)?l(0):h(le);if(le.type==="Buffer"&&Array.isArray(le.data))return h(le.data)}(N);if(ie)return ie;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof N[Symbol.toPrimitive]=="function")return n.from(N[Symbol.toPrimitive]("string"),$,K);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N)}function u(N){if(typeof N!="number")throw new TypeError('"size" argument must be of type number');if(N<0)throw new RangeError('The value "'+N+'" is invalid for option "size"')}function o(N){return u(N),l(N<0?0:0|s(N))}function h(N){for(var $=N.length<0?0:0|s(N.length),K=l($),te=0;te<$;te+=1)K[te]=255&N[te];return K}function s(N){if(N>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647 .toString(16)+" bytes");return 0|N}function a(N,$){if(n.isBuffer(N))return N.length;if(ArrayBuffer.isView(N)||j(N,ArrayBuffer))return N.byteLength;if(typeof N!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof N);var K=N.length,te=arguments.length>2&&arguments[2]===!0;if(!te&&K===0)return 0;for(var ie=!1;;)switch($){case"ascii":case"latin1":case"binary":return K;case"utf8":case"utf-8":return re(N).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*K;case"hex":return K>>>1;case"base64":return V(N).length;default:if(ie)return te?-1:re(N).length;$=(""+$).toLowerCase(),ie=!0}}function p(N,$,K){var te=!1;if(($===void 0||$<0)&&($=0),$>this.length||((K===void 0||K>this.length)&&(K=this.length),K<=0)||(K>>>=0)<=($>>>=0))return"";for(N||(N="utf8");;)switch(N){case"hex":return E(this,$,K);case"utf8":case"utf-8":return I(this,$,K);case"ascii":return P(this,$,K);case"latin1":case"binary":return S(this,$,K);case"base64":return A(this,$,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,$,K);default:if(te)throw new TypeError("Unknown encoding: "+N);N=(N+"").toLowerCase(),te=!0}}function c(N,$,K){var te=N[$];N[$]=N[K],N[K]=te}function i(N,$,K,te,ie){if(N.length===0)return-1;if(typeof K=="string"?(te=K,K=0):K>2147483647?K=2147483647:K<-2147483648&&(K=-2147483648),ee(K=+K)&&(K=ie?0:N.length-1),K<0&&(K=N.length+K),K>=N.length){if(ie)return-1;K=N.length-1}else if(K<0){if(!ie)return-1;K=0}if(typeof $=="string"&&($=n.from($,te)),n.isBuffer($))return $.length===0?-1:y(N,$,K,te,ie);if(typeof $=="number")return $&=255,typeof Uint8Array.prototype.indexOf=="function"?ie?Uint8Array.prototype.indexOf.call(N,$,K):Uint8Array.prototype.lastIndexOf.call(N,$,K):y(N,[$],K,te,ie);throw new TypeError("val must be string, number or Buffer")}function y(N,$,K,te,ie){var le,se=1,ve=N.length,fe=$.length;if(te!==void 0&&((te=String(te).toLowerCase())==="ucs2"||te==="ucs-2"||te==="utf16le"||te==="utf-16le")){if(N.length<2||$.length<2)return-1;se=2,ve/=2,fe/=2,K/=2}function ye(we,oe){return se===1?we[oe]:we.readUInt16BE(oe*se)}if(ie){var Ae=-1;for(le=K;le<ve;le++)if(ye(N,le)===ye($,Ae===-1?0:le-Ae)){if(Ae===-1&&(Ae=le),le-Ae+1===fe)return Ae*se}else Ae!==-1&&(le-=le-Ae),Ae=-1}else for(K+fe>ve&&(K=ve-fe),le=K;le>=0;le--){for(var pe=!0,ge=0;ge<fe;ge++)if(ye(N,le+ge)!==ye($,ge)){pe=!1;break}if(pe)return le}return-1}function f(N,$,K,te){K=Number(K)||0;var ie=N.length-K;te?(te=Number(te))>ie&&(te=ie):te=ie;var le=$.length;te>le/2&&(te=le/2);for(var se=0;se<te;++se){var ve=parseInt($.substr(2*se,2),16);if(ee(ve))return se;N[K+se]=ve}return se}function w(N,$,K,te){return B(re($,N.length-K),N,K,te)}function b(N,$,K,te){return B(function(ie){for(var le=[],se=0;se<ie.length;++se)le.push(255&ie.charCodeAt(se));return le}($),N,K,te)}function _(N,$,K,te){return b(N,$,K,te)}function T(N,$,K,te){return B(V($),N,K,te)}function L(N,$,K,te){return B(function(ie,le){for(var se,ve,fe,ye=[],Ae=0;Ae<ie.length&&!((le-=2)<0);++Ae)se=ie.charCodeAt(Ae),ve=se>>8,fe=se%256,ye.push(fe),ye.push(ve);return ye}($,N.length-K),N,K,te)}function A(N,$,K){return $===0&&K===N.length?t.fromByteArray(N):t.fromByteArray(N.slice($,K))}function I(N,$,K){K=Math.min(N.length,K);for(var te=[],ie=$;ie<K;){var le,se,ve,fe,ye=N[ie],Ae=null,pe=ye>239?4:ye>223?3:ye>191?2:1;if(ie+pe<=K)switch(pe){case 1:ye<128&&(Ae=ye);break;case 2:(192&(le=N[ie+1]))==128&&(fe=(31&ye)<<6|63&le)>127&&(Ae=fe);break;case 3:le=N[ie+1],se=N[ie+2],(192&le)==128&&(192&se)==128&&(fe=(15&ye)<<12|(63&le)<<6|63&se)>2047&&(fe<55296||fe>57343)&&(Ae=fe);break;case 4:le=N[ie+1],se=N[ie+2],ve=N[ie+3],(192&le)==128&&(192&se)==128&&(192&ve)==128&&(fe=(15&ye)<<18|(63&le)<<12|(63&se)<<6|63&ve)>65535&&fe<1114112&&(Ae=fe)}Ae===null?(Ae=65533,pe=1):Ae>65535&&(Ae-=65536,te.push(Ae>>>10&1023|55296),Ae=56320|1023&Ae),te.push(Ae),ie+=pe}return function(ge){var we=ge.length;if(we<=4096)return String.fromCharCode.apply(String,ge);for(var oe="",de=0;de<we;)oe+=String.fromCharCode.apply(String,ge.slice(de,de+=4096));return oe}(te)}x.kMaxLength=2147483647,n.TYPED_ARRAY_SUPPORT=function(){try{var N=new Uint8Array(1);return N.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},N.foo()===42}catch{return!1}}(),n.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&n[Symbol.species]===n&&Object.defineProperty(n,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),n.poolSize=8192,n.from=function(N,$,K){return d(N,$,K)},n.prototype.__proto__=Uint8Array.prototype,n.__proto__=Uint8Array,n.alloc=function(N,$,K){return function(te,ie,le){return u(te),te<=0?l(te):ie!==void 0?typeof le=="string"?l(te).fill(ie,le):l(te).fill(ie):l(te)}(N,$,K)},n.allocUnsafe=function(N){return o(N)},n.allocUnsafeSlow=function(N){return o(N)},n.isBuffer=function(N){return N!=null&&N._isBuffer===!0&&N!==n.prototype},n.compare=function(N,$){if(j(N,Uint8Array)&&(N=n.from(N,N.offset,N.byteLength)),j($,Uint8Array)&&($=n.from($,$.offset,$.byteLength)),!n.isBuffer(N)||!n.isBuffer($))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(N===$)return 0;for(var K=N.length,te=$.length,ie=0,le=Math.min(K,te);ie<le;++ie)if(N[ie]!==$[ie]){K=N[ie],te=$[ie];break}return K<te?-1:te<K?1:0},n.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(N,$){if(!Array.isArray(N))throw new TypeError('"list" argument must be an Array of Buffers');if(N.length===0)return n.alloc(0);var K;if($===void 0)for($=0,K=0;K<N.length;++K)$+=N[K].length;var te=n.allocUnsafe($),ie=0;for(K=0;K<N.length;++K){var le=N[K];if(j(le,Uint8Array)&&(le=n.from(le)),!n.isBuffer(le))throw new TypeError('"list" argument must be an Array of Buffers');le.copy(te,ie),ie+=le.length}return te},n.byteLength=a,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var N=this.length;if(N%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var $=0;$<N;$+=2)c(this,$,$+1);return this},n.prototype.swap32=function(){var N=this.length;if(N%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var $=0;$<N;$+=4)c(this,$,$+3),c(this,$+1,$+2);return this},n.prototype.swap64=function(){var N=this.length;if(N%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var $=0;$<N;$+=8)c(this,$,$+7),c(this,$+1,$+6),c(this,$+2,$+5),c(this,$+3,$+4);return this},n.prototype.toString=function(){var N=this.length;return N===0?"":arguments.length===0?I(this,0,N):p.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(N){if(!n.isBuffer(N))throw new TypeError("Argument must be a Buffer");return this===N||n.compare(this,N)===0},n.prototype.inspect=function(){var N="",$=x.INSPECT_MAX_BYTES;return N=this.toString("hex",0,$).replace(/(.{2})/g,"$1 ").trim(),this.length>$&&(N+=" ... "),"<Buffer "+N+">"},n.prototype.compare=function(N,$,K,te,ie){if(j(N,Uint8Array)&&(N=n.from(N,N.offset,N.byteLength)),!n.isBuffer(N))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof N);if($===void 0&&($=0),K===void 0&&(K=N?N.length:0),te===void 0&&(te=0),ie===void 0&&(ie=this.length),$<0||K>N.length||te<0||ie>this.length)throw new RangeError("out of range index");if(te>=ie&&$>=K)return 0;if(te>=ie)return-1;if($>=K)return 1;if(this===N)return 0;for(var le=(ie>>>=0)-(te>>>=0),se=(K>>>=0)-($>>>=0),ve=Math.min(le,se),fe=this.slice(te,ie),ye=N.slice($,K),Ae=0;Ae<ve;++Ae)if(fe[Ae]!==ye[Ae]){le=fe[Ae],se=ye[Ae];break}return le<se?-1:se<le?1:0},n.prototype.includes=function(N,$,K){return this.indexOf(N,$,K)!==-1},n.prototype.indexOf=function(N,$,K){return i(this,N,$,K,!0)},n.prototype.lastIndexOf=function(N,$,K){return i(this,N,$,K,!1)},n.prototype.write=function(N,$,K,te){if($===void 0)te="utf8",K=this.length,$=0;else if(K===void 0&&typeof $=="string")te=$,K=this.length,$=0;else{if(!isFinite($))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");$>>>=0,isFinite(K)?(K>>>=0,te===void 0&&(te="utf8")):(te=K,K=void 0)}var ie=this.length-$;if((K===void 0||K>ie)&&(K=ie),N.length>0&&(K<0||$<0)||$>this.length)throw new RangeError("Attempt to write outside buffer bounds");te||(te="utf8");for(var le=!1;;)switch(te){case"hex":return f(this,N,$,K);case"utf8":case"utf-8":return w(this,N,$,K);case"ascii":return b(this,N,$,K);case"latin1":case"binary":return _(this,N,$,K);case"base64":return T(this,N,$,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,N,$,K);default:if(le)throw new TypeError("Unknown encoding: "+te);te=(""+te).toLowerCase(),le=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(N,$,K){var te="";K=Math.min(N.length,K);for(var ie=$;ie<K;++ie)te+=String.fromCharCode(127&N[ie]);return te}function S(N,$,K){var te="";K=Math.min(N.length,K);for(var ie=$;ie<K;++ie)te+=String.fromCharCode(N[ie]);return te}function E(N,$,K){var te=N.length;(!$||$<0)&&($=0),(!K||K<0||K>te)&&(K=te);for(var ie="",le=$;le<K;++le)ie+=Z(N[le]);return ie}function z(N,$,K){for(var te=N.slice($,K),ie="",le=0;le<te.length;le+=2)ie+=String.fromCharCode(te[le]+256*te[le+1]);return ie}function D(N,$,K){if(N%1!=0||N<0)throw new RangeError("offset is not uint");if(N+$>K)throw new RangeError("Trying to access beyond buffer length")}function U(N,$,K,te,ie,le){if(!n.isBuffer(N))throw new TypeError('"buffer" argument must be a Buffer instance');if($>ie||$<le)throw new RangeError('"value" argument is out of bounds');if(K+te>N.length)throw new RangeError("Index out of range")}function H(N,$,K,te,ie,le){if(K+te>N.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("Index out of range")}function Y(N,$,K,te,ie){return $=+$,K>>>=0,ie||H(N,0,K,4),r.write(N,$,K,te,23,4),K+4}function J(N,$,K,te,ie){return $=+$,K>>>=0,ie||H(N,0,K,8),r.write(N,$,K,te,52,8),K+8}n.prototype.slice=function(N,$){var K=this.length;(N=~~N)<0?(N+=K)<0&&(N=0):N>K&&(N=K),($=$===void 0?K:~~$)<0?($+=K)<0&&($=0):$>K&&($=K),$<N&&($=N);var te=this.subarray(N,$);return te.__proto__=n.prototype,te},n.prototype.readUIntLE=function(N,$,K){N>>>=0,$>>>=0,K||D(N,$,this.length);for(var te=this[N],ie=1,le=0;++le<$&&(ie*=256);)te+=this[N+le]*ie;return te},n.prototype.readUIntBE=function(N,$,K){N>>>=0,$>>>=0,K||D(N,$,this.length);for(var te=this[N+--$],ie=1;$>0&&(ie*=256);)te+=this[N+--$]*ie;return te},n.prototype.readUInt8=function(N,$){return N>>>=0,$||D(N,1,this.length),this[N]},n.prototype.readUInt16LE=function(N,$){return N>>>=0,$||D(N,2,this.length),this[N]|this[N+1]<<8},n.prototype.readUInt16BE=function(N,$){return N>>>=0,$||D(N,2,this.length),this[N]<<8|this[N+1]},n.prototype.readUInt32LE=function(N,$){return N>>>=0,$||D(N,4,this.length),(this[N]|this[N+1]<<8|this[N+2]<<16)+16777216*this[N+3]},n.prototype.readUInt32BE=function(N,$){return N>>>=0,$||D(N,4,this.length),16777216*this[N]+(this[N+1]<<16|this[N+2]<<8|this[N+3])},n.prototype.readIntLE=function(N,$,K){N>>>=0,$>>>=0,K||D(N,$,this.length);for(var te=this[N],ie=1,le=0;++le<$&&(ie*=256);)te+=this[N+le]*ie;return te>=(ie*=128)&&(te-=Math.pow(2,8*$)),te},n.prototype.readIntBE=function(N,$,K){N>>>=0,$>>>=0,K||D(N,$,this.length);for(var te=$,ie=1,le=this[N+--te];te>0&&(ie*=256);)le+=this[N+--te]*ie;return le>=(ie*=128)&&(le-=Math.pow(2,8*$)),le},n.prototype.readInt8=function(N,$){return N>>>=0,$||D(N,1,this.length),128&this[N]?-1*(255-this[N]+1):this[N]},n.prototype.readInt16LE=function(N,$){N>>>=0,$||D(N,2,this.length);var K=this[N]|this[N+1]<<8;return 32768&K?4294901760|K:K},n.prototype.readInt16BE=function(N,$){N>>>=0,$||D(N,2,this.length);var K=this[N+1]|this[N]<<8;return 32768&K?4294901760|K:K},n.prototype.readInt32LE=function(N,$){return N>>>=0,$||D(N,4,this.length),this[N]|this[N+1]<<8|this[N+2]<<16|this[N+3]<<24},n.prototype.readInt32BE=function(N,$){return N>>>=0,$||D(N,4,this.length),this[N]<<24|this[N+1]<<16|this[N+2]<<8|this[N+3]},n.prototype.readFloatLE=function(N,$){return N>>>=0,$||D(N,4,this.length),r.read(this,N,!0,23,4)},n.prototype.readFloatBE=function(N,$){return N>>>=0,$||D(N,4,this.length),r.read(this,N,!1,23,4)},n.prototype.readDoubleLE=function(N,$){return N>>>=0,$||D(N,8,this.length),r.read(this,N,!0,52,8)},n.prototype.readDoubleBE=function(N,$){return N>>>=0,$||D(N,8,this.length),r.read(this,N,!1,52,8)},n.prototype.writeUIntLE=function(N,$,K,te){N=+N,$>>>=0,K>>>=0,te||U(this,N,$,K,Math.pow(2,8*K)-1,0);var ie=1,le=0;for(this[$]=255&N;++le<K&&(ie*=256);)this[$+le]=N/ie&255;return $+K},n.prototype.writeUIntBE=function(N,$,K,te){N=+N,$>>>=0,K>>>=0,te||U(this,N,$,K,Math.pow(2,8*K)-1,0);var ie=K-1,le=1;for(this[$+ie]=255&N;--ie>=0&&(le*=256);)this[$+ie]=N/le&255;return $+K},n.prototype.writeUInt8=function(N,$,K){return N=+N,$>>>=0,K||U(this,N,$,1,255,0),this[$]=255&N,$+1},n.prototype.writeUInt16LE=function(N,$,K){return N=+N,$>>>=0,K||U(this,N,$,2,65535,0),this[$]=255&N,this[$+1]=N>>>8,$+2},n.prototype.writeUInt16BE=function(N,$,K){return N=+N,$>>>=0,K||U(this,N,$,2,65535,0),this[$]=N>>>8,this[$+1]=255&N,$+2},n.prototype.writeUInt32LE=function(N,$,K){return N=+N,$>>>=0,K||U(this,N,$,4,4294967295,0),this[$+3]=N>>>24,this[$+2]=N>>>16,this[$+1]=N>>>8,this[$]=255&N,$+4},n.prototype.writeUInt32BE=function(N,$,K){return N=+N,$>>>=0,K||U(this,N,$,4,4294967295,0),this[$]=N>>>24,this[$+1]=N>>>16,this[$+2]=N>>>8,this[$+3]=255&N,$+4},n.prototype.writeIntLE=function(N,$,K,te){if(N=+N,$>>>=0,!te){var ie=Math.pow(2,8*K-1);U(this,N,$,K,ie-1,-ie)}var le=0,se=1,ve=0;for(this[$]=255&N;++le<K&&(se*=256);)N<0&&ve===0&&this[$+le-1]!==0&&(ve=1),this[$+le]=(N/se>>0)-ve&255;return $+K},n.prototype.writeIntBE=function(N,$,K,te){if(N=+N,$>>>=0,!te){var ie=Math.pow(2,8*K-1);U(this,N,$,K,ie-1,-ie)}var le=K-1,se=1,ve=0;for(this[$+le]=255&N;--le>=0&&(se*=256);)N<0&&ve===0&&this[$+le+1]!==0&&(ve=1),this[$+le]=(N/se>>0)-ve&255;return $+K},n.prototype.writeInt8=function(N,$,K){return N=+N,$>>>=0,K||U(this,N,$,1,127,-128),N<0&&(N=255+N+1),this[$]=255&N,$+1},n.prototype.writeInt16LE=function(N,$,K){return N=+N,$>>>=0,K||U(this,N,$,2,32767,-32768),this[$]=255&N,this[$+1]=N>>>8,$+2},n.prototype.writeInt16BE=function(N,$,K){return N=+N,$>>>=0,K||U(this,N,$,2,32767,-32768),this[$]=N>>>8,this[$+1]=255&N,$+2},n.prototype.writeInt32LE=function(N,$,K){return N=+N,$>>>=0,K||U(this,N,$,4,2147483647,-2147483648),this[$]=255&N,this[$+1]=N>>>8,this[$+2]=N>>>16,this[$+3]=N>>>24,$+4},n.prototype.writeInt32BE=function(N,$,K){return N=+N,$>>>=0,K||U(this,N,$,4,2147483647,-2147483648),N<0&&(N=4294967295+N+1),this[$]=N>>>24,this[$+1]=N>>>16,this[$+2]=N>>>8,this[$+3]=255&N,$+4},n.prototype.writeFloatLE=function(N,$,K){return Y(this,N,$,!0,K)},n.prototype.writeFloatBE=function(N,$,K){return Y(this,N,$,!1,K)},n.prototype.writeDoubleLE=function(N,$,K){return J(this,N,$,!0,K)},n.prototype.writeDoubleBE=function(N,$,K){return J(this,N,$,!1,K)},n.prototype.copy=function(N,$,K,te){if(!n.isBuffer(N))throw new TypeError("argument should be a Buffer");if(K||(K=0),te||te===0||(te=this.length),$>=N.length&&($=N.length),$||($=0),te>0&&te<K&&(te=K),te===K||N.length===0||this.length===0)return 0;if($<0)throw new RangeError("targetStart out of bounds");if(K<0||K>=this.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("sourceEnd out of bounds");te>this.length&&(te=this.length),N.length-$<te-K&&(te=N.length-$+K);var ie=te-K;if(this===N&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin($,K,te);else if(this===N&&K<$&&$<te)for(var le=ie-1;le>=0;--le)N[le+$]=this[le+K];else Uint8Array.prototype.set.call(N,this.subarray(K,te),$);return ie},n.prototype.fill=function(N,$,K,te){if(typeof N=="string"){if(typeof $=="string"?(te=$,$=0,K=this.length):typeof K=="string"&&(te=K,K=this.length),te!==void 0&&typeof te!="string")throw new TypeError("encoding must be a string");if(typeof te=="string"&&!n.isEncoding(te))throw new TypeError("Unknown encoding: "+te);if(N.length===1){var ie=N.charCodeAt(0);(te==="utf8"&&ie<128||te==="latin1")&&(N=ie)}}else typeof N=="number"&&(N&=255);if($<0||this.length<$||this.length<K)throw new RangeError("Out of range index");if(K<=$)return this;var le;if($>>>=0,K=K===void 0?this.length:K>>>0,N||(N=0),typeof N=="number")for(le=$;le<K;++le)this[le]=N;else{var se=n.isBuffer(N)?N:n.from(N,te),ve=se.length;if(ve===0)throw new TypeError('The value "'+N+'" is invalid for argument "value"');for(le=0;le<K-$;++le)this[le+$]=se[le%ve]}return this};var W=/[^+/0-9A-Za-z-_]/g;function Z(N){return N<16?"0"+N.toString(16):N.toString(16)}function re(N,$){var K;$=$||1/0;for(var te=N.length,ie=null,le=[],se=0;se<te;++se){if((K=N.charCodeAt(se))>55295&&K<57344){if(!ie){if(K>56319){($-=3)>-1&&le.push(239,191,189);continue}if(se+1===te){($-=3)>-1&&le.push(239,191,189);continue}ie=K;continue}if(K<56320){($-=3)>-1&&le.push(239,191,189),ie=K;continue}K=65536+(ie-55296<<10|K-56320)}else ie&&($-=3)>-1&&le.push(239,191,189);if(ie=null,K<128){if(($-=1)<0)break;le.push(K)}else if(K<2048){if(($-=2)<0)break;le.push(K>>6|192,63&K|128)}else if(K<65536){if(($-=3)<0)break;le.push(K>>12|224,K>>6&63|128,63&K|128)}else{if(!(K<1114112))throw new Error("Invalid code point");if(($-=4)<0)break;le.push(K>>18|240,K>>12&63|128,K>>6&63|128,63&K|128)}}return le}function V(N){return t.toByteArray(function($){if(($=($=$.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;$.length%4!=0;)$+="=";return $}(N))}function B(N,$,K,te){for(var ie=0;ie<te&&!(ie+K>=$.length||ie>=N.length);++ie)$[ie+K]=N[ie];return ie}function j(N,$){return N instanceof $||N!=null&&N.constructor!=null&&N.constructor.name!=null&&N.constructor.name===$.name}function ee(N){return N!=N}}).call(this)}).call(this,v("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(v,k,x){x.read=function(e,t,r,l,n){var d,u,o=8*n-l-1,h=(1<<o)-1,s=h>>1,a=-7,p=r?n-1:0,c=r?-1:1,i=e[t+p];for(p+=c,d=i&(1<<-a)-1,i>>=-a,a+=o;a>0;d=256*d+e[t+p],p+=c,a-=8);for(u=d&(1<<-a)-1,d>>=-a,a+=l;a>0;u=256*u+e[t+p],p+=c,a-=8);if(d===0)d=1-s;else{if(d===h)return u?NaN:1/0*(i?-1:1);u+=Math.pow(2,l),d-=s}return(i?-1:1)*u*Math.pow(2,d-l)},x.write=function(e,t,r,l,n,d){var u,o,h,s=8*d-n-1,a=(1<<s)-1,p=a>>1,c=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,i=l?0:d-1,y=l?1:-1,f=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,u=a):(u=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-u))<1&&(u--,h*=2),(t+=u+p>=1?c/h:c*Math.pow(2,1-p))*h>=2&&(u++,h/=2),u+p>=a?(o=0,u=a):u+p>=1?(o=(t*h-1)*Math.pow(2,n),u+=p):(o=t*Math.pow(2,p-1)*Math.pow(2,n),u=0));n>=8;e[r+i]=255&o,i+=y,o/=256,n-=8);for(u=u<<n|o,s+=n;s>0;e[r+i]=255&u,i+=y,u/=256,s-=8);e[r+i-y]|=128*f}},{}],5:[function(v,k,x){var e,t,r=k.exports={};function l(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function d(y){if(e===setTimeout)return setTimeout(y,0);if((e===l||!e)&&setTimeout)return e=setTimeout,setTimeout(y,0);try{return e(y,0)}catch{try{return e.call(null,y,0)}catch{return e.call(this,y,0)}}}(function(){try{e=typeof setTimeout=="function"?setTimeout:l}catch{e=l}try{t=typeof clearTimeout=="function"?clearTimeout:n}catch{t=n}})();var u,o=[],h=!1,s=-1;function a(){h&&u&&(h=!1,u.length?o=u.concat(o):s=-1,o.length&&p())}function p(){if(!h){var y=d(a);h=!0;for(var f=o.length;f;){for(u=o,o=[];++s<f;)u&&u[s].run();s=-1,f=o.length}u=null,h=!1,function(w){if(t===clearTimeout)return clearTimeout(w);if((t===n||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(w);try{t(w)}catch{try{return t.call(null,w)}catch{return t.call(this,w)}}}(y)}}function c(y,f){this.fun=y,this.array=f}function i(){}r.nextTick=function(y){var f=new Array(arguments.length-1);if(arguments.length>1)for(var w=1;w<arguments.length;w++)f[w-1]=arguments[w];o.push(new c(y,f)),o.length!==1||h||d(p)},c.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=i,r.addListener=i,r.once=i,r.off=i,r.removeListener=i,r.removeAllListeners=i,r.emit=i,r.prependListener=i,r.prependOnceListener=i,r.listeners=function(y){return[]},r.binding=function(y){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(y){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],6:[function(v,k,x){k.exports={alpha_shape:v("alpha-shape"),convex_hull:v("convex-hull"),delaunay_triangulate:v("delaunay-triangulate"),gl_cone3d:v("gl-cone3d"),gl_error3d:v("gl-error3d"),gl_heatmap2d:v("gl-heatmap2d"),gl_line3d:v("gl-line3d"),gl_mesh3d:v("gl-mesh3d"),gl_plot2d:v("gl-plot2d"),gl_plot3d:v("gl-plot3d"),gl_pointcloud2d:v("gl-pointcloud2d"),gl_scatter3d:v("gl-scatter3d"),gl_select_box:v("gl-select-box"),gl_spikes2d:v("gl-spikes2d"),gl_streamtube3d:v("gl-streamtube3d"),gl_surface3d:v("gl-surface3d"),ndarray:v("ndarray"),ndarray_linear_interpolate:v("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(v,k,x){k.exports=function(d){var u=(d=d||{}).eye||[0,0,1],o=d.center||[0,0,0],h=d.up||[0,1,0],s=d.distanceLimits||[0,1/0],a=d.mode||"turntable",p=e(),c=t(),i=r();return p.setDistanceLimits(s[0],s[1]),p.lookAt(0,u,o,h),c.setDistanceLimits(s[0],s[1]),c.lookAt(0,u,o,h),i.setDistanceLimits(s[0],s[1]),i.lookAt(0,u,o,h),new l({turntable:p,orbit:c,matrix:i},a)};var e=v("turntable-camera-controller"),t=v("orbit-camera-controller"),r=v("matrix-camera-controller");function l(d,u){this._controllerNames=Object.keys(d),this._controllerList=this._controllerNames.map(function(o){return d[o]}),this._mode=u,this._active=d[u],this._active||(this._mode="turntable",this._active=d.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var n=l.prototype;n.flush=function(d){for(var u=this._controllerList,o=0;o<u.length;++o)u[o].flush(d)},n.idle=function(d){for(var u=this._controllerList,o=0;o<u.length;++o)u[o].idle(d)},n.lookAt=function(d,u,o,h){for(var s=this._controllerList,a=0;a<s.length;++a)s[a].lookAt(d,u,o,h)},n.rotate=function(d,u,o,h){for(var s=this._controllerList,a=0;a<s.length;++a)s[a].rotate(d,u,o,h)},n.pan=function(d,u,o,h){for(var s=this._controllerList,a=0;a<s.length;++a)s[a].pan(d,u,o,h)},n.translate=function(d,u,o,h){for(var s=this._controllerList,a=0;a<s.length;++a)s[a].translate(d,u,o,h)},n.setMatrix=function(d,u){for(var o=this._controllerList,h=0;h<o.length;++h)o[h].setMatrix(d,u)},n.setDistanceLimits=function(d,u){for(var o=this._controllerList,h=0;h<o.length;++h)o[h].setDistanceLimits(d,u)},n.setDistance=function(d,u){for(var o=this._controllerList,h=0;h<o.length;++h)o[h].setDistance(d,u)},n.recalcMatrix=function(d){this._active.recalcMatrix(d)},n.getDistance=function(d){return this._active.getDistance(d)},n.getDistanceLimits=function(d){return this._active.getDistanceLimits(d)},n.lastT=function(){return this._active.lastT()},n.setMode=function(d){if(d!==this._mode){var u=this._controllerNames.indexOf(d);if(!(u<0)){var o=this._active,h=this._controllerList[u],s=Math.max(o.lastT(),h.lastT());o.recalcMatrix(s),h.setMatrix(s,o.computedMatrix),this._active=h,this._mode=d,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},n.getMode=function(){return this._mode}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(v,k,x){var e=typeof WeakMap>"u"?v("weak-map"):WeakMap,t=v("gl-buffer"),r=v("gl-vao"),l=new e;k.exports=function(n){var d=l.get(n),u=d&&(d._triangleBuffer.handle||d._triangleBuffer.buffer);if(!u||!n.isBuffer(u)){var o=t(n,new Float32Array([-1,-1,-1,4,4,-1]));(d=r(n,[{buffer:o,type:n.FLOAT,size:2}]))._triangleBuffer=o,l.set(n,d)}d.bind(),n.drawArrays(n.TRIANGLES,0,3),d.unbind()}},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(v,k,x){var e=v("pad-left");k.exports=function(t,r,l){r=typeof r=="number"?r:1,l=l||": ";var n=t.split(/\r?\n/),d=String(n.length+r-1).length;return n.map(function(u,o){var h=o+r,s=String(h).length;return e(h,d-s)+l+u}).join(`
`)}},{"pad-left":264}],10:[function(v,k,x){k.exports=function(r){var l=r.length;if(l===0)return[];if(l===1)return[0];for(var n=r[0].length,d=[r[0]],u=[0],o=1;o<l;++o)if(d.push(r[o]),t(d,n)){if(u.push(o),u.length===n+1)return u}else d.pop();return u};var e=v("robust-orientation");function t(r,l){for(var n=new Array(l+1),d=0;d<r.length;++d)n[d]=r[d];for(d=0;d<=r.length;++d){for(var u=r.length;u<=l;++u){for(var o=new Array(l),h=0;h<l;++h)o[h]=Math.pow(u+1-d,h);n[u]=o}if(e.apply(void 0,n))return!0}return!1}},{"robust-orientation":284}],11:[function(v,k,x){k.exports=function(r,l){return e(l).filter(function(n){for(var d=new Array(n.length),u=0;u<n.length;++u)d[u]=l[n[u]];return t(d)*r<1})};var e=v("delaunay-triangulate"),t=v("circumradius")},{circumradius:49,"delaunay-triangulate":63}],12:[function(v,k,x){k.exports=function(r,l){return t(e(r,l))};var e=v("alpha-complex"),t=v("simplicial-complex-boundary")},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(v,k,x){k.exports=function(e){return atob(e)}},{}],14:[function(v,k,x){k.exports=function(r,l){for(var n=l.length,d=new Array(n+1),u=0;u<n;++u){for(var o=new Array(n+1),h=0;h<=n;++h)o[h]=r[h][u];d[u]=o}for(d[n]=new Array(n+1),u=0;u<=n;++u)d[n][u]=1;var s=new Array(n+1);for(u=0;u<n;++u)s[u]=l[u];s[n]=1;var a=e(d,s),p=t(a[n+1]);p===0&&(p=1);var c=new Array(n+1);for(u=0;u<=n;++u)c[u]=t(a[u])/p;return c};var e=v("robust-linear-solve");function t(r){for(var l=0,n=0;n<r.length;++n)l+=r[n];return l}},{"robust-linear-solve":283}],15:[function(v,k,x){var e=v("./lib/rationalize");k.exports=function(t,r){return e(t[0].mul(r[1]).add(r[0].mul(t[1])),t[1].mul(r[1]))}},{"./lib/rationalize":25}],16:[function(v,k,x){k.exports=function(e,t){return e[0].mul(t[1]).cmp(t[0].mul(e[1]))}},{}],17:[function(v,k,x){var e=v("./lib/rationalize");k.exports=function(t,r){return e(t[0].mul(r[1]),t[1].mul(r[0]))}},{"./lib/rationalize":25}],18:[function(v,k,x){var e=v("./is-rat"),t=v("./lib/is-bn"),r=v("./lib/num-to-bn"),l=v("./lib/str-to-bn"),n=v("./lib/rationalize"),d=v("./div");k.exports=function u(o,h){if(e(o))return h?d(o,u(h)):[o[0].clone(),o[1].clone()];var s,a,p=0;if(t(o))s=o.clone();else if(typeof o=="string")s=l(o);else{if(o===0)return[r(0),r(1)];if(o===Math.floor(o))s=r(o);else{for(;o!==Math.floor(o);)o*=Math.pow(2,256),p-=256;s=r(o)}}if(e(h))s.mul(h[1]),a=h[0].clone();else if(t(h))a=h.clone();else if(typeof h=="string")a=l(h);else if(h)if(h===Math.floor(h))a=r(h);else{for(;h!==Math.floor(h);)h*=Math.pow(2,256),p+=256;a=r(h)}else a=r(1);return p>0?s=s.ushln(p):p<0&&(a=a.ushln(-p)),n(s,a)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(v,k,x){var e=v("./lib/is-bn");k.exports=function(t){return Array.isArray(t)&&t.length===2&&e(t[0])&&e(t[1])}},{"./lib/is-bn":23}],20:[function(v,k,x){var e=v("bn.js");k.exports=function(t){return t.cmp(new e(0))}},{"bn.js":33}],21:[function(v,k,x){var e=v("./bn-sign");k.exports=function(t){var r=t.length,l=t.words,n=0;if(r===1)n=l[0];else if(r===2)n=l[0]+67108864*l[1];else for(var d=0;d<r;d++){var u=l[d];n+=u*Math.pow(67108864,d)}return e(t)*n}},{"./bn-sign":20}],22:[function(v,k,x){var e=v("double-bits"),t=v("bit-twiddle").countTrailingZeros;k.exports=function(r){var l=t(e.lo(r));if(l<32)return l;var n=t(e.hi(r));return n>20?52:n+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(v,k,x){v("bn.js"),k.exports=function(e){return e&&typeof e=="object"&&Boolean(e.words)}},{"bn.js":33}],24:[function(v,k,x){var e=v("bn.js"),t=v("double-bits");k.exports=function(r){var l=t.exponent(r);return l<52?new e(r):new e(r*Math.pow(2,52-l)).ushln(l-52)}},{"bn.js":33,"double-bits":64}],25:[function(v,k,x){var e=v("./num-to-bn"),t=v("./bn-sign");k.exports=function(r,l){var n=t(r),d=t(l);if(n===0)return[e(0),e(1)];if(d===0)return[e(0),e(0)];d<0&&(r=r.neg(),l=l.neg());var u=r.gcd(l);return u.cmpn(1)?[r.div(u),l.div(u)]:[r,l]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(v,k,x){var e=v("bn.js");k.exports=function(t){return new e(t)}},{"bn.js":33}],27:[function(v,k,x){var e=v("./lib/rationalize");k.exports=function(t,r){return e(t[0].mul(r[0]),t[1].mul(r[1]))}},{"./lib/rationalize":25}],28:[function(v,k,x){var e=v("./lib/bn-sign");k.exports=function(t){return e(t[0])*e(t[1])}},{"./lib/bn-sign":20}],29:[function(v,k,x){var e=v("./lib/rationalize");k.exports=function(t,r){return e(t[0].mul(r[1]).sub(t[1].mul(r[0])),t[1].mul(r[1]))}},{"./lib/rationalize":25}],30:[function(v,k,x){var e=v("./lib/bn-to-num"),t=v("./lib/ctz");k.exports=function(r){var l=r[0],n=r[1];if(l.cmpn(0)===0)return 0;var d=l.abs().divmod(n.abs()),u=d.div,o=e(u),h=d.mod,s=l.negative!==n.negative?-1:1;if(h.cmpn(0)===0)return s*o;if(o){var a=t(o)+4,p=e(h.ushln(a).divRound(n));return s*(o+p*Math.pow(2,-a))}var c=n.bitLength()-h.bitLength()+53;return p=e(h.ushln(c).divRound(n)),c<1023?s*p*Math.pow(2,-c):(p*=Math.pow(2,-1023),s*p*Math.pow(2,1023-c))}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(v,k,x){function e(u,o,h,s,a){for(var p=a+1;s<=a;){var c=s+a>>>1,i=u[c];(h!==void 0?h(i,o):i-o)>=0?(p=c,a=c-1):s=c+1}return p}function t(u,o,h,s,a){for(var p=a+1;s<=a;){var c=s+a>>>1,i=u[c];(h!==void 0?h(i,o):i-o)>0?(p=c,a=c-1):s=c+1}return p}function r(u,o,h,s,a){for(var p=s-1;s<=a;){var c=s+a>>>1,i=u[c];(h!==void 0?h(i,o):i-o)<0?(p=c,s=c+1):a=c-1}return p}function l(u,o,h,s,a){for(var p=s-1;s<=a;){var c=s+a>>>1,i=u[c];(h!==void 0?h(i,o):i-o)<=0?(p=c,s=c+1):a=c-1}return p}function n(u,o,h,s,a){for(;s<=a;){var p=s+a>>>1,c=u[p],i=h!==void 0?h(c,o):c-o;if(i===0)return p;i<=0?s=p+1:a=p-1}return-1}function d(u,o,h,s,a,p){return typeof h=="function"?p(u,o,h,s===void 0?0:0|s,a===void 0?u.length-1:0|a):p(u,o,void 0,h===void 0?0:0|h,s===void 0?u.length-1:0|s)}k.exports={ge:function(u,o,h,s,a){return d(u,o,h,s,a,e)},gt:function(u,o,h,s,a){return d(u,o,h,s,a,t)},lt:function(u,o,h,s,a){return d(u,o,h,s,a,r)},le:function(u,o,h,s,a){return d(u,o,h,s,a,l)},eq:function(u,o,h,s,a){return d(u,o,h,s,a,n)}}},{}],32:[function(v,k,x){function e(r){var l=32;return(r&=-r)&&l--,65535&r&&(l-=16),16711935&r&&(l-=8),252645135&r&&(l-=4),858993459&r&&(l-=2),1431655765&r&&(l-=1),l}x.INT_BITS=32,x.INT_MAX=2147483647,x.INT_MIN=-1<<31,x.sign=function(r){return(r>0)-(r<0)},x.abs=function(r){var l=r>>31;return(r^l)-l},x.min=function(r,l){return l^(r^l)&-(r<l)},x.max=function(r,l){return r^(r^l)&-(r<l)},x.isPow2=function(r){return!(r&r-1||!r)},x.log2=function(r){var l,n;return l=(r>65535)<<4,l|=n=((r>>>=l)>255)<<3,l|=n=((r>>>=n)>15)<<2,(l|=n=((r>>>=n)>3)<<1)|(r>>>=n)>>1},x.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},x.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},x.countTrailingZeros=e,x.nextPow2=function(r){return r+=r===0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)+1},x.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},x.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var t=new Array(256);(function(r){for(var l=0;l<256;++l){var n=l,d=l,u=7;for(n>>>=1;n;n>>>=1)d<<=1,d|=1&n,--u;r[l]=d<<u&255}})(t),x.reverse=function(r){return t[255&r]<<24|t[r>>>8&255]<<16|t[r>>>16&255]<<8|t[r>>>24&255]},x.interleave2=function(r,l){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l&=65535)|l<<8))|l<<4))|l<<2))|l<<1))<<1},x.deinterleave2=function(r,l){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>l&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},x.interleave3=function(r,l,n){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(l=1227133513&((l=3272356035&((l=251719695&((l=4278190335&((l&=1023)|l<<16))|l<<8))|l<<4))|l<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},x.deinterleave3=function(r,l){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>l&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},x.nextCombination=function(r){var l=r|r-1;return l+1|(~l&-~l)-1>>>e(r)+1}},{}],33:[function(v,k,x){(function(e,t){function r(S,E){if(!S)throw new Error(E||"Assertion failed")}function l(S,E){S.super_=E;var z=function(){};z.prototype=E.prototype,S.prototype=new z,S.prototype.constructor=S}function n(S,E,z){if(n.isBN(S))return S;this.negative=0,this.words=null,this.length=0,this.red=null,S!==null&&(E!=="le"&&E!=="be"||(z=E,E=10),this._init(S||0,E||10,z||"be"))}var d;typeof e=="object"?e.exports=n:t.BN=n,n.BN=n,n.wordSize=26;try{d=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:v("buffer").Buffer}catch{}function u(S,E){var z=S.charCodeAt(E);return z>=65&&z<=70?z-55:z>=97&&z<=102?z-87:z-48&15}function o(S,E,z){var D=u(S,z);return z-1>=E&&(D|=u(S,z-1)<<4),D}function h(S,E,z,D){for(var U=0,H=Math.min(S.length,z),Y=E;Y<H;Y++){var J=S.charCodeAt(Y)-48;U*=D,U+=J>=49?J-49+10:J>=17?J-17+10:J}return U}n.isBN=function(S){return S instanceof n||S!==null&&typeof S=="object"&&S.constructor.wordSize===n.wordSize&&Array.isArray(S.words)},n.max=function(S,E){return S.cmp(E)>0?S:E},n.min=function(S,E){return S.cmp(E)<0?S:E},n.prototype._init=function(S,E,z){if(typeof S=="number")return this._initNumber(S,E,z);if(typeof S=="object")return this._initArray(S,E,z);E==="hex"&&(E=16),r(E===(0|E)&&E>=2&&E<=36);var D=0;(S=S.toString().replace(/\s+/g,""))[0]==="-"&&(D++,this.negative=1),D<S.length&&(E===16?this._parseHex(S,D,z):(this._parseBase(S,E,D),z==="le"&&this._initArray(this.toArray(),E,z)))},n.prototype._initNumber=function(S,E,z){S<0&&(this.negative=1,S=-S),S<67108864?(this.words=[67108863&S],this.length=1):S<4503599627370496?(this.words=[67108863&S,S/67108864&67108863],this.length=2):(r(S<9007199254740992),this.words=[67108863&S,S/67108864&67108863,1],this.length=3),z==="le"&&this._initArray(this.toArray(),E,z)},n.prototype._initArray=function(S,E,z){if(r(typeof S.length=="number"),S.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(S.length/3),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var U,H,Y=0;if(z==="be")for(D=S.length-1,U=0;D>=0;D-=3)H=S[D]|S[D-1]<<8|S[D-2]<<16,this.words[U]|=H<<Y&67108863,this.words[U+1]=H>>>26-Y&67108863,(Y+=24)>=26&&(Y-=26,U++);else if(z==="le")for(D=0,U=0;D<S.length;D+=3)H=S[D]|S[D+1]<<8|S[D+2]<<16,this.words[U]|=H<<Y&67108863,this.words[U+1]=H>>>26-Y&67108863,(Y+=24)>=26&&(Y-=26,U++);return this.strip()},n.prototype._parseHex=function(S,E,z){this.length=Math.ceil((S.length-E)/6),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var U,H=0,Y=0;if(z==="be")for(D=S.length-1;D>=E;D-=2)U=o(S,E,D)<<H,this.words[Y]|=67108863&U,H>=18?(H-=18,Y+=1,this.words[Y]|=U>>>26):H+=8;else for(D=(S.length-E)%2==0?E+1:E;D<S.length;D+=2)U=o(S,E,D)<<H,this.words[Y]|=67108863&U,H>=18?(H-=18,Y+=1,this.words[Y]|=U>>>26):H+=8;this.strip()},n.prototype._parseBase=function(S,E,z){this.words=[0],this.length=1;for(var D=0,U=1;U<=67108863;U*=E)D++;D--,U=U/E|0;for(var H=S.length-z,Y=H%D,J=Math.min(H,H-Y)+z,W=0,Z=z;Z<J;Z+=D)W=h(S,Z,Z+D,E),this.imuln(U),this.words[0]+W<67108864?this.words[0]+=W:this._iaddn(W);if(Y!==0){var re=1;for(W=h(S,Z,S.length,E),Z=0;Z<Y;Z++)re*=E;this.imuln(re),this.words[0]+W<67108864?this.words[0]+=W:this._iaddn(W)}this.strip()},n.prototype.copy=function(S){S.words=new Array(this.length);for(var E=0;E<this.length;E++)S.words[E]=this.words[E];S.length=this.length,S.negative=this.negative,S.red=this.red},n.prototype.clone=function(){var S=new n(null);return this.copy(S),S},n.prototype._expand=function(S){for(;this.length<S;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var s=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],a=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function c(S,E,z){z.negative=E.negative^S.negative;var D=S.length+E.length|0;z.length=D,D=D-1|0;var U=0|S.words[0],H=0|E.words[0],Y=U*H,J=67108863&Y,W=Y/67108864|0;z.words[0]=J;for(var Z=1;Z<D;Z++){for(var re=W>>>26,V=67108863&W,B=Math.min(Z,E.length-1),j=Math.max(0,Z-S.length+1);j<=B;j++){var ee=Z-j|0;re+=(Y=(U=0|S.words[ee])*(H=0|E.words[j])+V)/67108864|0,V=67108863&Y}z.words[Z]=0|V,W=0|re}return W!==0?z.words[Z]=0|W:z.length--,z.strip()}n.prototype.toString=function(S,E){var z;if(E=0|E||1,(S=S||10)===16||S==="hex"){z="";for(var D=0,U=0,H=0;H<this.length;H++){var Y=this.words[H],J=(16777215&(Y<<D|U)).toString(16);z=(U=Y>>>24-D&16777215)!==0||H!==this.length-1?s[6-J.length]+J+z:J+z,(D+=2)>=26&&(D-=26,H--)}for(U!==0&&(z=U.toString(16)+z);z.length%E!=0;)z="0"+z;return this.negative!==0&&(z="-"+z),z}if(S===(0|S)&&S>=2&&S<=36){var W=a[S],Z=p[S];z="";var re=this.clone();for(re.negative=0;!re.isZero();){var V=re.modn(Z).toString(S);z=(re=re.idivn(Z)).isZero()?V+z:s[W-V.length]+V+z}for(this.isZero()&&(z="0"+z);z.length%E!=0;)z="0"+z;return this.negative!==0&&(z="-"+z),z}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var S=this.words[0];return this.length===2?S+=67108864*this.words[1]:this.length===3&&this.words[2]===1?S+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-S:S},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(S,E){return r(d!==void 0),this.toArrayLike(d,S,E)},n.prototype.toArray=function(S,E){return this.toArrayLike(Array,S,E)},n.prototype.toArrayLike=function(S,E,z){var D=this.byteLength(),U=z||Math.max(1,D);r(D<=U,"byte array longer than desired length"),r(U>0,"Requested array length <= 0"),this.strip();var H,Y,J=E==="le",W=new S(U),Z=this.clone();if(J){for(Y=0;!Z.isZero();Y++)H=Z.andln(255),Z.iushrn(8),W[Y]=H;for(;Y<U;Y++)W[Y]=0}else{for(Y=0;Y<U-D;Y++)W[Y]=0;for(Y=0;!Z.isZero();Y++)H=Z.andln(255),Z.iushrn(8),W[U-Y-1]=H}return W},Math.clz32?n.prototype._countBits=function(S){return 32-Math.clz32(S)}:n.prototype._countBits=function(S){var E=S,z=0;return E>=4096&&(z+=13,E>>>=13),E>=64&&(z+=7,E>>>=7),E>=8&&(z+=4,E>>>=4),E>=2&&(z+=2,E>>>=2),z+E},n.prototype._zeroBits=function(S){if(S===0)return 26;var E=S,z=0;return(8191&E)==0&&(z+=13,E>>>=13),(127&E)==0&&(z+=7,E>>>=7),(15&E)==0&&(z+=4,E>>>=4),(3&E)==0&&(z+=2,E>>>=2),(1&E)==0&&z++,z},n.prototype.bitLength=function(){var S=this.words[this.length-1],E=this._countBits(S);return 26*(this.length-1)+E},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var S=0,E=0;E<this.length;E++){var z=this._zeroBits(this.words[E]);if(S+=z,z!==26)break}return S},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(S){return this.negative!==0?this.abs().inotn(S).iaddn(1):this.clone()},n.prototype.fromTwos=function(S){return this.testn(S-1)?this.notn(S).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(S){for(;this.length<S.length;)this.words[this.length++]=0;for(var E=0;E<S.length;E++)this.words[E]=this.words[E]|S.words[E];return this.strip()},n.prototype.ior=function(S){return r((this.negative|S.negative)==0),this.iuor(S)},n.prototype.or=function(S){return this.length>S.length?this.clone().ior(S):S.clone().ior(this)},n.prototype.uor=function(S){return this.length>S.length?this.clone().iuor(S):S.clone().iuor(this)},n.prototype.iuand=function(S){var E;E=this.length>S.length?S:this;for(var z=0;z<E.length;z++)this.words[z]=this.words[z]&S.words[z];return this.length=E.length,this.strip()},n.prototype.iand=function(S){return r((this.negative|S.negative)==0),this.iuand(S)},n.prototype.and=function(S){return this.length>S.length?this.clone().iand(S):S.clone().iand(this)},n.prototype.uand=function(S){return this.length>S.length?this.clone().iuand(S):S.clone().iuand(this)},n.prototype.iuxor=function(S){var E,z;this.length>S.length?(E=this,z=S):(E=S,z=this);for(var D=0;D<z.length;D++)this.words[D]=E.words[D]^z.words[D];if(this!==E)for(;D<E.length;D++)this.words[D]=E.words[D];return this.length=E.length,this.strip()},n.prototype.ixor=function(S){return r((this.negative|S.negative)==0),this.iuxor(S)},n.prototype.xor=function(S){return this.length>S.length?this.clone().ixor(S):S.clone().ixor(this)},n.prototype.uxor=function(S){return this.length>S.length?this.clone().iuxor(S):S.clone().iuxor(this)},n.prototype.inotn=function(S){r(typeof S=="number"&&S>=0);var E=0|Math.ceil(S/26),z=S%26;this._expand(E),z>0&&E--;for(var D=0;D<E;D++)this.words[D]=67108863&~this.words[D];return z>0&&(this.words[D]=~this.words[D]&67108863>>26-z),this.strip()},n.prototype.notn=function(S){return this.clone().inotn(S)},n.prototype.setn=function(S,E){r(typeof S=="number"&&S>=0);var z=S/26|0,D=S%26;return this._expand(z+1),this.words[z]=E?this.words[z]|1<<D:this.words[z]&~(1<<D),this.strip()},n.prototype.iadd=function(S){var E,z,D;if(this.negative!==0&&S.negative===0)return this.negative=0,E=this.isub(S),this.negative^=1,this._normSign();if(this.negative===0&&S.negative!==0)return S.negative=0,E=this.isub(S),S.negative=1,E._normSign();this.length>S.length?(z=this,D=S):(z=S,D=this);for(var U=0,H=0;H<D.length;H++)E=(0|z.words[H])+(0|D.words[H])+U,this.words[H]=67108863&E,U=E>>>26;for(;U!==0&&H<z.length;H++)E=(0|z.words[H])+U,this.words[H]=67108863&E,U=E>>>26;if(this.length=z.length,U!==0)this.words[this.length]=U,this.length++;else if(z!==this)for(;H<z.length;H++)this.words[H]=z.words[H];return this},n.prototype.add=function(S){var E;return S.negative!==0&&this.negative===0?(S.negative=0,E=this.sub(S),S.negative^=1,E):S.negative===0&&this.negative!==0?(this.negative=0,E=S.sub(this),this.negative=1,E):this.length>S.length?this.clone().iadd(S):S.clone().iadd(this)},n.prototype.isub=function(S){if(S.negative!==0){S.negative=0;var E=this.iadd(S);return S.negative=1,E._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(S),this.negative=1,this._normSign();var z,D,U=this.cmp(S);if(U===0)return this.negative=0,this.length=1,this.words[0]=0,this;U>0?(z=this,D=S):(z=S,D=this);for(var H=0,Y=0;Y<D.length;Y++)H=(E=(0|z.words[Y])-(0|D.words[Y])+H)>>26,this.words[Y]=67108863&E;for(;H!==0&&Y<z.length;Y++)H=(E=(0|z.words[Y])+H)>>26,this.words[Y]=67108863&E;if(H===0&&Y<z.length&&z!==this)for(;Y<z.length;Y++)this.words[Y]=z.words[Y];return this.length=Math.max(this.length,Y),z!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(S){return this.clone().isub(S)};var i=function(S,E,z){var D,U,H,Y=S.words,J=E.words,W=z.words,Z=0,re=0|Y[0],V=8191&re,B=re>>>13,j=0|Y[1],ee=8191&j,N=j>>>13,$=0|Y[2],K=8191&$,te=$>>>13,ie=0|Y[3],le=8191&ie,se=ie>>>13,ve=0|Y[4],fe=8191&ve,ye=ve>>>13,Ae=0|Y[5],pe=8191&Ae,ge=Ae>>>13,we=0|Y[6],oe=8191&we,de=we>>>13,Te=0|Y[7],Ee=8191&Te,Me=Te>>>13,De=0|Y[8],Ie=8191&De,Oe=De>>>13,Ze=0|Y[9],Fe=8191&Ze,Pe=Ze>>>13,ze=0|J[0],Ge=8191&ze,$e=ze>>>13,ot=0|J[1],vt=8191&ot,bt=ot>>>13,yt=0|J[2],tt=8191&yt,Ke=yt>>>13,mt=0|J[3],Ft=8191&mt,Vt=mt>>>13,Xt=0|J[4],Gt=8191&Xt,nr=Xt>>>13,It=0|J[5],Be=8191&It,He=It>>>13,he=0|J[6],be=8191&he,Re=he>>>13,Ue=0|J[7],Xe=8191&Ue,qe=Ue>>>13,st=0|J[8],it=8191&st,Tt=st>>>13,Pt=0|J[9],rt=8191&Pt,ut=Pt>>>13;z.negative=S.negative^E.negative,z.length=19;var Bt=(Z+(D=Math.imul(V,Ge))|0)+((8191&(U=(U=Math.imul(V,$e))+Math.imul(B,Ge)|0))<<13)|0;Z=((H=Math.imul(B,$e))+(U>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,D=Math.imul(ee,Ge),U=(U=Math.imul(ee,$e))+Math.imul(N,Ge)|0,H=Math.imul(N,$e);var wt=(Z+(D=D+Math.imul(V,vt)|0)|0)+((8191&(U=(U=U+Math.imul(V,bt)|0)+Math.imul(B,vt)|0))<<13)|0;Z=((H=H+Math.imul(B,bt)|0)+(U>>>13)|0)+(wt>>>26)|0,wt&=67108863,D=Math.imul(K,Ge),U=(U=Math.imul(K,$e))+Math.imul(te,Ge)|0,H=Math.imul(te,$e),D=D+Math.imul(ee,vt)|0,U=(U=U+Math.imul(ee,bt)|0)+Math.imul(N,vt)|0,H=H+Math.imul(N,bt)|0;var Lt=(Z+(D=D+Math.imul(V,tt)|0)|0)+((8191&(U=(U=U+Math.imul(V,Ke)|0)+Math.imul(B,tt)|0))<<13)|0;Z=((H=H+Math.imul(B,Ke)|0)+(U>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,D=Math.imul(le,Ge),U=(U=Math.imul(le,$e))+Math.imul(se,Ge)|0,H=Math.imul(se,$e),D=D+Math.imul(K,vt)|0,U=(U=U+Math.imul(K,bt)|0)+Math.imul(te,vt)|0,H=H+Math.imul(te,bt)|0,D=D+Math.imul(ee,tt)|0,U=(U=U+Math.imul(ee,Ke)|0)+Math.imul(N,tt)|0,H=H+Math.imul(N,Ke)|0;var Se=(Z+(D=D+Math.imul(V,Ft)|0)|0)+((8191&(U=(U=U+Math.imul(V,Vt)|0)+Math.imul(B,Ft)|0))<<13)|0;Z=((H=H+Math.imul(B,Vt)|0)+(U>>>13)|0)+(Se>>>26)|0,Se&=67108863,D=Math.imul(fe,Ge),U=(U=Math.imul(fe,$e))+Math.imul(ye,Ge)|0,H=Math.imul(ye,$e),D=D+Math.imul(le,vt)|0,U=(U=U+Math.imul(le,bt)|0)+Math.imul(se,vt)|0,H=H+Math.imul(se,bt)|0,D=D+Math.imul(K,tt)|0,U=(U=U+Math.imul(K,Ke)|0)+Math.imul(te,tt)|0,H=H+Math.imul(te,Ke)|0,D=D+Math.imul(ee,Ft)|0,U=(U=U+Math.imul(ee,Vt)|0)+Math.imul(N,Ft)|0,H=H+Math.imul(N,Vt)|0;var We=(Z+(D=D+Math.imul(V,Gt)|0)|0)+((8191&(U=(U=U+Math.imul(V,nr)|0)+Math.imul(B,Gt)|0))<<13)|0;Z=((H=H+Math.imul(B,nr)|0)+(U>>>13)|0)+(We>>>26)|0,We&=67108863,D=Math.imul(pe,Ge),U=(U=Math.imul(pe,$e))+Math.imul(ge,Ge)|0,H=Math.imul(ge,$e),D=D+Math.imul(fe,vt)|0,U=(U=U+Math.imul(fe,bt)|0)+Math.imul(ye,vt)|0,H=H+Math.imul(ye,bt)|0,D=D+Math.imul(le,tt)|0,U=(U=U+Math.imul(le,Ke)|0)+Math.imul(se,tt)|0,H=H+Math.imul(se,Ke)|0,D=D+Math.imul(K,Ft)|0,U=(U=U+Math.imul(K,Vt)|0)+Math.imul(te,Ft)|0,H=H+Math.imul(te,Vt)|0,D=D+Math.imul(ee,Gt)|0,U=(U=U+Math.imul(ee,nr)|0)+Math.imul(N,Gt)|0,H=H+Math.imul(N,nr)|0;var nt=(Z+(D=D+Math.imul(V,Be)|0)|0)+((8191&(U=(U=U+Math.imul(V,He)|0)+Math.imul(B,Be)|0))<<13)|0;Z=((H=H+Math.imul(B,He)|0)+(U>>>13)|0)+(nt>>>26)|0,nt&=67108863,D=Math.imul(oe,Ge),U=(U=Math.imul(oe,$e))+Math.imul(de,Ge)|0,H=Math.imul(de,$e),D=D+Math.imul(pe,vt)|0,U=(U=U+Math.imul(pe,bt)|0)+Math.imul(ge,vt)|0,H=H+Math.imul(ge,bt)|0,D=D+Math.imul(fe,tt)|0,U=(U=U+Math.imul(fe,Ke)|0)+Math.imul(ye,tt)|0,H=H+Math.imul(ye,Ke)|0,D=D+Math.imul(le,Ft)|0,U=(U=U+Math.imul(le,Vt)|0)+Math.imul(se,Ft)|0,H=H+Math.imul(se,Vt)|0,D=D+Math.imul(K,Gt)|0,U=(U=U+Math.imul(K,nr)|0)+Math.imul(te,Gt)|0,H=H+Math.imul(te,nr)|0,D=D+Math.imul(ee,Be)|0,U=(U=U+Math.imul(ee,He)|0)+Math.imul(N,Be)|0,H=H+Math.imul(N,He)|0;var ft=(Z+(D=D+Math.imul(V,be)|0)|0)+((8191&(U=(U=U+Math.imul(V,Re)|0)+Math.imul(B,be)|0))<<13)|0;Z=((H=H+Math.imul(B,Re)|0)+(U>>>13)|0)+(ft>>>26)|0,ft&=67108863,D=Math.imul(Ee,Ge),U=(U=Math.imul(Ee,$e))+Math.imul(Me,Ge)|0,H=Math.imul(Me,$e),D=D+Math.imul(oe,vt)|0,U=(U=U+Math.imul(oe,bt)|0)+Math.imul(de,vt)|0,H=H+Math.imul(de,bt)|0,D=D+Math.imul(pe,tt)|0,U=(U=U+Math.imul(pe,Ke)|0)+Math.imul(ge,tt)|0,H=H+Math.imul(ge,Ke)|0,D=D+Math.imul(fe,Ft)|0,U=(U=U+Math.imul(fe,Vt)|0)+Math.imul(ye,Ft)|0,H=H+Math.imul(ye,Vt)|0,D=D+Math.imul(le,Gt)|0,U=(U=U+Math.imul(le,nr)|0)+Math.imul(se,Gt)|0,H=H+Math.imul(se,nr)|0,D=D+Math.imul(K,Be)|0,U=(U=U+Math.imul(K,He)|0)+Math.imul(te,Be)|0,H=H+Math.imul(te,He)|0,D=D+Math.imul(ee,be)|0,U=(U=U+Math.imul(ee,Re)|0)+Math.imul(N,be)|0,H=H+Math.imul(N,Re)|0;var Mt=(Z+(D=D+Math.imul(V,Xe)|0)|0)+((8191&(U=(U=U+Math.imul(V,qe)|0)+Math.imul(B,Xe)|0))<<13)|0;Z=((H=H+Math.imul(B,qe)|0)+(U>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,D=Math.imul(Ie,Ge),U=(U=Math.imul(Ie,$e))+Math.imul(Oe,Ge)|0,H=Math.imul(Oe,$e),D=D+Math.imul(Ee,vt)|0,U=(U=U+Math.imul(Ee,bt)|0)+Math.imul(Me,vt)|0,H=H+Math.imul(Me,bt)|0,D=D+Math.imul(oe,tt)|0,U=(U=U+Math.imul(oe,Ke)|0)+Math.imul(de,tt)|0,H=H+Math.imul(de,Ke)|0,D=D+Math.imul(pe,Ft)|0,U=(U=U+Math.imul(pe,Vt)|0)+Math.imul(ge,Ft)|0,H=H+Math.imul(ge,Vt)|0,D=D+Math.imul(fe,Gt)|0,U=(U=U+Math.imul(fe,nr)|0)+Math.imul(ye,Gt)|0,H=H+Math.imul(ye,nr)|0,D=D+Math.imul(le,Be)|0,U=(U=U+Math.imul(le,He)|0)+Math.imul(se,Be)|0,H=H+Math.imul(se,He)|0,D=D+Math.imul(K,be)|0,U=(U=U+Math.imul(K,Re)|0)+Math.imul(te,be)|0,H=H+Math.imul(te,Re)|0,D=D+Math.imul(ee,Xe)|0,U=(U=U+Math.imul(ee,qe)|0)+Math.imul(N,Xe)|0,H=H+Math.imul(N,qe)|0;var Nt=(Z+(D=D+Math.imul(V,it)|0)|0)+((8191&(U=(U=U+Math.imul(V,Tt)|0)+Math.imul(B,it)|0))<<13)|0;Z=((H=H+Math.imul(B,Tt)|0)+(U>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,D=Math.imul(Fe,Ge),U=(U=Math.imul(Fe,$e))+Math.imul(Pe,Ge)|0,H=Math.imul(Pe,$e),D=D+Math.imul(Ie,vt)|0,U=(U=U+Math.imul(Ie,bt)|0)+Math.imul(Oe,vt)|0,H=H+Math.imul(Oe,bt)|0,D=D+Math.imul(Ee,tt)|0,U=(U=U+Math.imul(Ee,Ke)|0)+Math.imul(Me,tt)|0,H=H+Math.imul(Me,Ke)|0,D=D+Math.imul(oe,Ft)|0,U=(U=U+Math.imul(oe,Vt)|0)+Math.imul(de,Ft)|0,H=H+Math.imul(de,Vt)|0,D=D+Math.imul(pe,Gt)|0,U=(U=U+Math.imul(pe,nr)|0)+Math.imul(ge,Gt)|0,H=H+Math.imul(ge,nr)|0,D=D+Math.imul(fe,Be)|0,U=(U=U+Math.imul(fe,He)|0)+Math.imul(ye,Be)|0,H=H+Math.imul(ye,He)|0,D=D+Math.imul(le,be)|0,U=(U=U+Math.imul(le,Re)|0)+Math.imul(se,be)|0,H=H+Math.imul(se,Re)|0,D=D+Math.imul(K,Xe)|0,U=(U=U+Math.imul(K,qe)|0)+Math.imul(te,Xe)|0,H=H+Math.imul(te,qe)|0,D=D+Math.imul(ee,it)|0,U=(U=U+Math.imul(ee,Tt)|0)+Math.imul(N,it)|0,H=H+Math.imul(N,Tt)|0;var Zt=(Z+(D=D+Math.imul(V,rt)|0)|0)+((8191&(U=(U=U+Math.imul(V,ut)|0)+Math.imul(B,rt)|0))<<13)|0;Z=((H=H+Math.imul(B,ut)|0)+(U>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,D=Math.imul(Fe,vt),U=(U=Math.imul(Fe,bt))+Math.imul(Pe,vt)|0,H=Math.imul(Pe,bt),D=D+Math.imul(Ie,tt)|0,U=(U=U+Math.imul(Ie,Ke)|0)+Math.imul(Oe,tt)|0,H=H+Math.imul(Oe,Ke)|0,D=D+Math.imul(Ee,Ft)|0,U=(U=U+Math.imul(Ee,Vt)|0)+Math.imul(Me,Ft)|0,H=H+Math.imul(Me,Vt)|0,D=D+Math.imul(oe,Gt)|0,U=(U=U+Math.imul(oe,nr)|0)+Math.imul(de,Gt)|0,H=H+Math.imul(de,nr)|0,D=D+Math.imul(pe,Be)|0,U=(U=U+Math.imul(pe,He)|0)+Math.imul(ge,Be)|0,H=H+Math.imul(ge,He)|0,D=D+Math.imul(fe,be)|0,U=(U=U+Math.imul(fe,Re)|0)+Math.imul(ye,be)|0,H=H+Math.imul(ye,Re)|0,D=D+Math.imul(le,Xe)|0,U=(U=U+Math.imul(le,qe)|0)+Math.imul(se,Xe)|0,H=H+Math.imul(se,qe)|0,D=D+Math.imul(K,it)|0,U=(U=U+Math.imul(K,Tt)|0)+Math.imul(te,it)|0,H=H+Math.imul(te,Tt)|0;var Ut=(Z+(D=D+Math.imul(ee,rt)|0)|0)+((8191&(U=(U=U+Math.imul(ee,ut)|0)+Math.imul(N,rt)|0))<<13)|0;Z=((H=H+Math.imul(N,ut)|0)+(U>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,D=Math.imul(Fe,tt),U=(U=Math.imul(Fe,Ke))+Math.imul(Pe,tt)|0,H=Math.imul(Pe,Ke),D=D+Math.imul(Ie,Ft)|0,U=(U=U+Math.imul(Ie,Vt)|0)+Math.imul(Oe,Ft)|0,H=H+Math.imul(Oe,Vt)|0,D=D+Math.imul(Ee,Gt)|0,U=(U=U+Math.imul(Ee,nr)|0)+Math.imul(Me,Gt)|0,H=H+Math.imul(Me,nr)|0,D=D+Math.imul(oe,Be)|0,U=(U=U+Math.imul(oe,He)|0)+Math.imul(de,Be)|0,H=H+Math.imul(de,He)|0,D=D+Math.imul(pe,be)|0,U=(U=U+Math.imul(pe,Re)|0)+Math.imul(ge,be)|0,H=H+Math.imul(ge,Re)|0,D=D+Math.imul(fe,Xe)|0,U=(U=U+Math.imul(fe,qe)|0)+Math.imul(ye,Xe)|0,H=H+Math.imul(ye,qe)|0,D=D+Math.imul(le,it)|0,U=(U=U+Math.imul(le,Tt)|0)+Math.imul(se,it)|0,H=H+Math.imul(se,Tt)|0;var fr=(Z+(D=D+Math.imul(K,rt)|0)|0)+((8191&(U=(U=U+Math.imul(K,ut)|0)+Math.imul(te,rt)|0))<<13)|0;Z=((H=H+Math.imul(te,ut)|0)+(U>>>13)|0)+(fr>>>26)|0,fr&=67108863,D=Math.imul(Fe,Ft),U=(U=Math.imul(Fe,Vt))+Math.imul(Pe,Ft)|0,H=Math.imul(Pe,Vt),D=D+Math.imul(Ie,Gt)|0,U=(U=U+Math.imul(Ie,nr)|0)+Math.imul(Oe,Gt)|0,H=H+Math.imul(Oe,nr)|0,D=D+Math.imul(Ee,Be)|0,U=(U=U+Math.imul(Ee,He)|0)+Math.imul(Me,Be)|0,H=H+Math.imul(Me,He)|0,D=D+Math.imul(oe,be)|0,U=(U=U+Math.imul(oe,Re)|0)+Math.imul(de,be)|0,H=H+Math.imul(de,Re)|0,D=D+Math.imul(pe,Xe)|0,U=(U=U+Math.imul(pe,qe)|0)+Math.imul(ge,Xe)|0,H=H+Math.imul(ge,qe)|0,D=D+Math.imul(fe,it)|0,U=(U=U+Math.imul(fe,Tt)|0)+Math.imul(ye,it)|0,H=H+Math.imul(ye,Tt)|0;var Tr=(Z+(D=D+Math.imul(le,rt)|0)|0)+((8191&(U=(U=U+Math.imul(le,ut)|0)+Math.imul(se,rt)|0))<<13)|0;Z=((H=H+Math.imul(se,ut)|0)+(U>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,D=Math.imul(Fe,Gt),U=(U=Math.imul(Fe,nr))+Math.imul(Pe,Gt)|0,H=Math.imul(Pe,nr),D=D+Math.imul(Ie,Be)|0,U=(U=U+Math.imul(Ie,He)|0)+Math.imul(Oe,Be)|0,H=H+Math.imul(Oe,He)|0,D=D+Math.imul(Ee,be)|0,U=(U=U+Math.imul(Ee,Re)|0)+Math.imul(Me,be)|0,H=H+Math.imul(Me,Re)|0,D=D+Math.imul(oe,Xe)|0,U=(U=U+Math.imul(oe,qe)|0)+Math.imul(de,Xe)|0,H=H+Math.imul(de,qe)|0,D=D+Math.imul(pe,it)|0,U=(U=U+Math.imul(pe,Tt)|0)+Math.imul(ge,it)|0,H=H+Math.imul(ge,Tt)|0;var ur=(Z+(D=D+Math.imul(fe,rt)|0)|0)+((8191&(U=(U=U+Math.imul(fe,ut)|0)+Math.imul(ye,rt)|0))<<13)|0;Z=((H=H+Math.imul(ye,ut)|0)+(U>>>13)|0)+(ur>>>26)|0,ur&=67108863,D=Math.imul(Fe,Be),U=(U=Math.imul(Fe,He))+Math.imul(Pe,Be)|0,H=Math.imul(Pe,He),D=D+Math.imul(Ie,be)|0,U=(U=U+Math.imul(Ie,Re)|0)+Math.imul(Oe,be)|0,H=H+Math.imul(Oe,Re)|0,D=D+Math.imul(Ee,Xe)|0,U=(U=U+Math.imul(Ee,qe)|0)+Math.imul(Me,Xe)|0,H=H+Math.imul(Me,qe)|0,D=D+Math.imul(oe,it)|0,U=(U=U+Math.imul(oe,Tt)|0)+Math.imul(de,it)|0,H=H+Math.imul(de,Tt)|0;var Kt=(Z+(D=D+Math.imul(pe,rt)|0)|0)+((8191&(U=(U=U+Math.imul(pe,ut)|0)+Math.imul(ge,rt)|0))<<13)|0;Z=((H=H+Math.imul(ge,ut)|0)+(U>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,D=Math.imul(Fe,be),U=(U=Math.imul(Fe,Re))+Math.imul(Pe,be)|0,H=Math.imul(Pe,Re),D=D+Math.imul(Ie,Xe)|0,U=(U=U+Math.imul(Ie,qe)|0)+Math.imul(Oe,Xe)|0,H=H+Math.imul(Oe,qe)|0,D=D+Math.imul(Ee,it)|0,U=(U=U+Math.imul(Ee,Tt)|0)+Math.imul(Me,it)|0,H=H+Math.imul(Me,Tt)|0;var Qt=(Z+(D=D+Math.imul(oe,rt)|0)|0)+((8191&(U=(U=U+Math.imul(oe,ut)|0)+Math.imul(de,rt)|0))<<13)|0;Z=((H=H+Math.imul(de,ut)|0)+(U>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,D=Math.imul(Fe,Xe),U=(U=Math.imul(Fe,qe))+Math.imul(Pe,Xe)|0,H=Math.imul(Pe,qe),D=D+Math.imul(Ie,it)|0,U=(U=U+Math.imul(Ie,Tt)|0)+Math.imul(Oe,it)|0,H=H+Math.imul(Oe,Tt)|0;var er=(Z+(D=D+Math.imul(Ee,rt)|0)|0)+((8191&(U=(U=U+Math.imul(Ee,ut)|0)+Math.imul(Me,rt)|0))<<13)|0;Z=((H=H+Math.imul(Me,ut)|0)+(U>>>13)|0)+(er>>>26)|0,er&=67108863,D=Math.imul(Fe,it),U=(U=Math.imul(Fe,Tt))+Math.imul(Pe,it)|0,H=Math.imul(Pe,Tt);var cr=(Z+(D=D+Math.imul(Ie,rt)|0)|0)+((8191&(U=(U=U+Math.imul(Ie,ut)|0)+Math.imul(Oe,rt)|0))<<13)|0;Z=((H=H+Math.imul(Oe,ut)|0)+(U>>>13)|0)+(cr>>>26)|0,cr&=67108863;var gr=(Z+(D=Math.imul(Fe,rt))|0)+((8191&(U=(U=Math.imul(Fe,ut))+Math.imul(Pe,rt)|0))<<13)|0;return Z=((H=Math.imul(Pe,ut))+(U>>>13)|0)+(gr>>>26)|0,gr&=67108863,W[0]=Bt,W[1]=wt,W[2]=Lt,W[3]=Se,W[4]=We,W[5]=nt,W[6]=ft,W[7]=Mt,W[8]=Nt,W[9]=Zt,W[10]=Ut,W[11]=fr,W[12]=Tr,W[13]=ur,W[14]=Kt,W[15]=Qt,W[16]=er,W[17]=cr,W[18]=gr,Z!==0&&(W[19]=Z,z.length++),z};function y(S,E,z){return new f().mulp(S,E,z)}function f(S,E){this.x=S,this.y=E}Math.imul||(i=c),n.prototype.mulTo=function(S,E){var z=this.length+S.length;return this.length===10&&S.length===10?i(this,S,E):z<63?c(this,S,E):z<1024?function(D,U,H){H.negative=U.negative^D.negative,H.length=D.length+U.length;for(var Y=0,J=0,W=0;W<H.length-1;W++){var Z=J;J=0;for(var re=67108863&Y,V=Math.min(W,U.length-1),B=Math.max(0,W-D.length+1);B<=V;B++){var j=W-B,ee=(0|D.words[j])*(0|U.words[B]),N=67108863&ee;re=67108863&(N=N+re|0),J+=(Z=(Z=Z+(ee/67108864|0)|0)+(N>>>26)|0)>>>26,Z&=67108863}H.words[W]=re,Y=Z,Z=J}return Y!==0?H.words[W]=Y:H.length--,H.strip()}(this,S,E):y(this,S,E)},f.prototype.makeRBT=function(S){for(var E=new Array(S),z=n.prototype._countBits(S)-1,D=0;D<S;D++)E[D]=this.revBin(D,z,S);return E},f.prototype.revBin=function(S,E,z){if(S===0||S===z-1)return S;for(var D=0,U=0;U<E;U++)D|=(1&S)<<E-U-1,S>>=1;return D},f.prototype.permute=function(S,E,z,D,U,H){for(var Y=0;Y<H;Y++)D[Y]=E[S[Y]],U[Y]=z[S[Y]]},f.prototype.transform=function(S,E,z,D,U,H){this.permute(H,S,E,z,D,U);for(var Y=1;Y<U;Y<<=1)for(var J=Y<<1,W=Math.cos(2*Math.PI/J),Z=Math.sin(2*Math.PI/J),re=0;re<U;re+=J)for(var V=W,B=Z,j=0;j<Y;j++){var ee=z[re+j],N=D[re+j],$=z[re+j+Y],K=D[re+j+Y],te=V*$-B*K;K=V*K+B*$,$=te,z[re+j]=ee+$,D[re+j]=N+K,z[re+j+Y]=ee-$,D[re+j+Y]=N-K,j!==J&&(te=W*V-Z*B,B=W*B+Z*V,V=te)}},f.prototype.guessLen13b=function(S,E){var z=1|Math.max(E,S),D=1&z,U=0;for(z=z/2|0;z;z>>>=1)U++;return 1<<U+1+D},f.prototype.conjugate=function(S,E,z){if(!(z<=1))for(var D=0;D<z/2;D++){var U=S[D];S[D]=S[z-D-1],S[z-D-1]=U,U=E[D],E[D]=-E[z-D-1],E[z-D-1]=-U}},f.prototype.normalize13b=function(S,E){for(var z=0,D=0;D<E/2;D++){var U=8192*Math.round(S[2*D+1]/E)+Math.round(S[2*D]/E)+z;S[D]=67108863&U,z=U<67108864?0:U/67108864|0}return S},f.prototype.convert13b=function(S,E,z,D){for(var U=0,H=0;H<E;H++)U+=0|S[H],z[2*H]=8191&U,U>>>=13,z[2*H+1]=8191&U,U>>>=13;for(H=2*E;H<D;++H)z[H]=0;r(U===0),r((-8192&U)==0)},f.prototype.stub=function(S){for(var E=new Array(S),z=0;z<S;z++)E[z]=0;return E},f.prototype.mulp=function(S,E,z){var D=2*this.guessLen13b(S.length,E.length),U=this.makeRBT(D),H=this.stub(D),Y=new Array(D),J=new Array(D),W=new Array(D),Z=new Array(D),re=new Array(D),V=new Array(D),B=z.words;B.length=D,this.convert13b(S.words,S.length,Y,D),this.convert13b(E.words,E.length,Z,D),this.transform(Y,H,J,W,D,U),this.transform(Z,H,re,V,D,U);for(var j=0;j<D;j++){var ee=J[j]*re[j]-W[j]*V[j];W[j]=J[j]*V[j]+W[j]*re[j],J[j]=ee}return this.conjugate(J,W,D),this.transform(J,W,B,H,D,U),this.conjugate(B,H,D),this.normalize13b(B,D),z.negative=S.negative^E.negative,z.length=S.length+E.length,z.strip()},n.prototype.mul=function(S){var E=new n(null);return E.words=new Array(this.length+S.length),this.mulTo(S,E)},n.prototype.mulf=function(S){var E=new n(null);return E.words=new Array(this.length+S.length),y(this,S,E)},n.prototype.imul=function(S){return this.clone().mulTo(S,this)},n.prototype.imuln=function(S){r(typeof S=="number"),r(S<67108864);for(var E=0,z=0;z<this.length;z++){var D=(0|this.words[z])*S,U=(67108863&D)+(67108863&E);E>>=26,E+=D/67108864|0,E+=U>>>26,this.words[z]=67108863&U}return E!==0&&(this.words[z]=E,this.length++),this},n.prototype.muln=function(S){return this.clone().imuln(S)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(S){var E=function(H){for(var Y=new Array(H.bitLength()),J=0;J<Y.length;J++){var W=J/26|0,Z=J%26;Y[J]=(H.words[W]&1<<Z)>>>Z}return Y}(S);if(E.length===0)return new n(1);for(var z=this,D=0;D<E.length&&E[D]===0;D++,z=z.sqr());if(++D<E.length)for(var U=z.sqr();D<E.length;D++,U=U.sqr())E[D]!==0&&(z=z.mul(U));return z},n.prototype.iushln=function(S){r(typeof S=="number"&&S>=0);var E,z=S%26,D=(S-z)/26,U=67108863>>>26-z<<26-z;if(z!==0){var H=0;for(E=0;E<this.length;E++){var Y=this.words[E]&U,J=(0|this.words[E])-Y<<z;this.words[E]=J|H,H=Y>>>26-z}H&&(this.words[E]=H,this.length++)}if(D!==0){for(E=this.length-1;E>=0;E--)this.words[E+D]=this.words[E];for(E=0;E<D;E++)this.words[E]=0;this.length+=D}return this.strip()},n.prototype.ishln=function(S){return r(this.negative===0),this.iushln(S)},n.prototype.iushrn=function(S,E,z){var D;r(typeof S=="number"&&S>=0),D=E?(E-E%26)/26:0;var U=S%26,H=Math.min((S-U)/26,this.length),Y=67108863^67108863>>>U<<U,J=z;if(D-=H,D=Math.max(0,D),J){for(var W=0;W<H;W++)J.words[W]=this.words[W];J.length=H}if(H!==0)if(this.length>H)for(this.length-=H,W=0;W<this.length;W++)this.words[W]=this.words[W+H];else this.words[0]=0,this.length=1;var Z=0;for(W=this.length-1;W>=0&&(Z!==0||W>=D);W--){var re=0|this.words[W];this.words[W]=Z<<26-U|re>>>U,Z=re&Y}return J&&Z!==0&&(J.words[J.length++]=Z),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(S,E,z){return r(this.negative===0),this.iushrn(S,E,z)},n.prototype.shln=function(S){return this.clone().ishln(S)},n.prototype.ushln=function(S){return this.clone().iushln(S)},n.prototype.shrn=function(S){return this.clone().ishrn(S)},n.prototype.ushrn=function(S){return this.clone().iushrn(S)},n.prototype.testn=function(S){r(typeof S=="number"&&S>=0);var E=S%26,z=(S-E)/26,D=1<<E;return!(this.length<=z)&&!!(this.words[z]&D)},n.prototype.imaskn=function(S){r(typeof S=="number"&&S>=0);var E=S%26,z=(S-E)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=z)return this;if(E!==0&&z++,this.length=Math.min(z,this.length),E!==0){var D=67108863^67108863>>>E<<E;this.words[this.length-1]&=D}return this.strip()},n.prototype.maskn=function(S){return this.clone().imaskn(S)},n.prototype.iaddn=function(S){return r(typeof S=="number"),r(S<67108864),S<0?this.isubn(-S):this.negative!==0?this.length===1&&(0|this.words[0])<S?(this.words[0]=S-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(S),this.negative=1,this):this._iaddn(S)},n.prototype._iaddn=function(S){this.words[0]+=S;for(var E=0;E<this.length&&this.words[E]>=67108864;E++)this.words[E]-=67108864,E===this.length-1?this.words[E+1]=1:this.words[E+1]++;return this.length=Math.max(this.length,E+1),this},n.prototype.isubn=function(S){if(r(typeof S=="number"),r(S<67108864),S<0)return this.iaddn(-S);if(this.negative!==0)return this.negative=0,this.iaddn(S),this.negative=1,this;if(this.words[0]-=S,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var E=0;E<this.length&&this.words[E]<0;E++)this.words[E]+=67108864,this.words[E+1]-=1;return this.strip()},n.prototype.addn=function(S){return this.clone().iaddn(S)},n.prototype.subn=function(S){return this.clone().isubn(S)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(S,E,z){var D,U,H=S.length+z;this._expand(H);var Y=0;for(D=0;D<S.length;D++){U=(0|this.words[D+z])+Y;var J=(0|S.words[D])*E;Y=((U-=67108863&J)>>26)-(J/67108864|0),this.words[D+z]=67108863&U}for(;D<this.length-z;D++)Y=(U=(0|this.words[D+z])+Y)>>26,this.words[D+z]=67108863&U;if(Y===0)return this.strip();for(r(Y===-1),Y=0,D=0;D<this.length;D++)Y=(U=-(0|this.words[D])+Y)>>26,this.words[D]=67108863&U;return this.negative=1,this.strip()},n.prototype._wordDiv=function(S,E){var z=(this.length,S.length),D=this.clone(),U=S,H=0|U.words[U.length-1];(z=26-this._countBits(H))!==0&&(U=U.ushln(z),D.iushln(z),H=0|U.words[U.length-1]);var Y,J=D.length-U.length;if(E!=="mod"){(Y=new n(null)).length=J+1,Y.words=new Array(Y.length);for(var W=0;W<Y.length;W++)Y.words[W]=0}var Z=D.clone()._ishlnsubmul(U,1,J);Z.negative===0&&(D=Z,Y&&(Y.words[J]=1));for(var re=J-1;re>=0;re--){var V=67108864*(0|D.words[U.length+re])+(0|D.words[U.length+re-1]);for(V=Math.min(V/H|0,67108863),D._ishlnsubmul(U,V,re);D.negative!==0;)V--,D.negative=0,D._ishlnsubmul(U,1,re),D.isZero()||(D.negative^=1);Y&&(Y.words[re]=V)}return Y&&Y.strip(),D.strip(),E!=="div"&&z!==0&&D.iushrn(z),{div:Y||null,mod:D}},n.prototype.divmod=function(S,E,z){return r(!S.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:this.negative!==0&&S.negative===0?(H=this.neg().divmod(S,E),E!=="mod"&&(D=H.div.neg()),E!=="div"&&(U=H.mod.neg(),z&&U.negative!==0&&U.iadd(S)),{div:D,mod:U}):this.negative===0&&S.negative!==0?(H=this.divmod(S.neg(),E),E!=="mod"&&(D=H.div.neg()),{div:D,mod:H.mod}):(this.negative&S.negative)!=0?(H=this.neg().divmod(S.neg(),E),E!=="div"&&(U=H.mod.neg(),z&&U.negative!==0&&U.isub(S)),{div:H.div,mod:U}):S.length>this.length||this.cmp(S)<0?{div:new n(0),mod:this}:S.length===1?E==="div"?{div:this.divn(S.words[0]),mod:null}:E==="mod"?{div:null,mod:new n(this.modn(S.words[0]))}:{div:this.divn(S.words[0]),mod:new n(this.modn(S.words[0]))}:this._wordDiv(S,E);var D,U,H},n.prototype.div=function(S){return this.divmod(S,"div",!1).div},n.prototype.mod=function(S){return this.divmod(S,"mod",!1).mod},n.prototype.umod=function(S){return this.divmod(S,"mod",!0).mod},n.prototype.divRound=function(S){var E=this.divmod(S);if(E.mod.isZero())return E.div;var z=E.div.negative!==0?E.mod.isub(S):E.mod,D=S.ushrn(1),U=S.andln(1),H=z.cmp(D);return H<0||U===1&&H===0?E.div:E.div.negative!==0?E.div.isubn(1):E.div.iaddn(1)},n.prototype.modn=function(S){r(S<=67108863);for(var E=(1<<26)%S,z=0,D=this.length-1;D>=0;D--)z=(E*z+(0|this.words[D]))%S;return z},n.prototype.idivn=function(S){r(S<=67108863);for(var E=0,z=this.length-1;z>=0;z--){var D=(0|this.words[z])+67108864*E;this.words[z]=D/S|0,E=D%S}return this.strip()},n.prototype.divn=function(S){return this.clone().idivn(S)},n.prototype.egcd=function(S){r(S.negative===0),r(!S.isZero());var E=this,z=S.clone();E=E.negative!==0?E.umod(S):E.clone();for(var D=new n(1),U=new n(0),H=new n(0),Y=new n(1),J=0;E.isEven()&&z.isEven();)E.iushrn(1),z.iushrn(1),++J;for(var W=z.clone(),Z=E.clone();!E.isZero();){for(var re=0,V=1;(E.words[0]&V)==0&&re<26;++re,V<<=1);if(re>0)for(E.iushrn(re);re-- >0;)(D.isOdd()||U.isOdd())&&(D.iadd(W),U.isub(Z)),D.iushrn(1),U.iushrn(1);for(var B=0,j=1;(z.words[0]&j)==0&&B<26;++B,j<<=1);if(B>0)for(z.iushrn(B);B-- >0;)(H.isOdd()||Y.isOdd())&&(H.iadd(W),Y.isub(Z)),H.iushrn(1),Y.iushrn(1);E.cmp(z)>=0?(E.isub(z),D.isub(H),U.isub(Y)):(z.isub(E),H.isub(D),Y.isub(U))}return{a:H,b:Y,gcd:z.iushln(J)}},n.prototype._invmp=function(S){r(S.negative===0),r(!S.isZero());var E=this,z=S.clone();E=E.negative!==0?E.umod(S):E.clone();for(var D,U=new n(1),H=new n(0),Y=z.clone();E.cmpn(1)>0&&z.cmpn(1)>0;){for(var J=0,W=1;(E.words[0]&W)==0&&J<26;++J,W<<=1);if(J>0)for(E.iushrn(J);J-- >0;)U.isOdd()&&U.iadd(Y),U.iushrn(1);for(var Z=0,re=1;(z.words[0]&re)==0&&Z<26;++Z,re<<=1);if(Z>0)for(z.iushrn(Z);Z-- >0;)H.isOdd()&&H.iadd(Y),H.iushrn(1);E.cmp(z)>=0?(E.isub(z),U.isub(H)):(z.isub(E),H.isub(U))}return(D=E.cmpn(1)===0?U:H).cmpn(0)<0&&D.iadd(S),D},n.prototype.gcd=function(S){if(this.isZero())return S.abs();if(S.isZero())return this.abs();var E=this.clone(),z=S.clone();E.negative=0,z.negative=0;for(var D=0;E.isEven()&&z.isEven();D++)E.iushrn(1),z.iushrn(1);for(;;){for(;E.isEven();)E.iushrn(1);for(;z.isEven();)z.iushrn(1);var U=E.cmp(z);if(U<0){var H=E;E=z,z=H}else if(U===0||z.cmpn(1)===0)break;E.isub(z)}return z.iushln(D)},n.prototype.invm=function(S){return this.egcd(S).a.umod(S)},n.prototype.isEven=function(){return(1&this.words[0])==0},n.prototype.isOdd=function(){return(1&this.words[0])==1},n.prototype.andln=function(S){return this.words[0]&S},n.prototype.bincn=function(S){r(typeof S=="number");var E=S%26,z=(S-E)/26,D=1<<E;if(this.length<=z)return this._expand(z+1),this.words[z]|=D,this;for(var U=D,H=z;U!==0&&H<this.length;H++){var Y=0|this.words[H];U=(Y+=U)>>>26,Y&=67108863,this.words[H]=Y}return U!==0&&(this.words[H]=U,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(S){var E,z=S<0;if(this.negative!==0&&!z)return-1;if(this.negative===0&&z)return 1;if(this.strip(),this.length>1)E=1;else{z&&(S=-S),r(S<=67108863,"Number is too big");var D=0|this.words[0];E=D===S?0:D<S?-1:1}return this.negative!==0?0|-E:E},n.prototype.cmp=function(S){if(this.negative!==0&&S.negative===0)return-1;if(this.negative===0&&S.negative!==0)return 1;var E=this.ucmp(S);return this.negative!==0?0|-E:E},n.prototype.ucmp=function(S){if(this.length>S.length)return 1;if(this.length<S.length)return-1;for(var E=0,z=this.length-1;z>=0;z--){var D=0|this.words[z],U=0|S.words[z];if(D!==U){D<U?E=-1:D>U&&(E=1);break}}return E},n.prototype.gtn=function(S){return this.cmpn(S)===1},n.prototype.gt=function(S){return this.cmp(S)===1},n.prototype.gten=function(S){return this.cmpn(S)>=0},n.prototype.gte=function(S){return this.cmp(S)>=0},n.prototype.ltn=function(S){return this.cmpn(S)===-1},n.prototype.lt=function(S){return this.cmp(S)===-1},n.prototype.lten=function(S){return this.cmpn(S)<=0},n.prototype.lte=function(S){return this.cmp(S)<=0},n.prototype.eqn=function(S){return this.cmpn(S)===0},n.prototype.eq=function(S){return this.cmp(S)===0},n.red=function(S){return new I(S)},n.prototype.toRed=function(S){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),S.convertTo(this)._forceRed(S)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(S){return this.red=S,this},n.prototype.forceRed=function(S){return r(!this.red,"Already a number in reduction context"),this._forceRed(S)},n.prototype.redAdd=function(S){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,S)},n.prototype.redIAdd=function(S){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,S)},n.prototype.redSub=function(S){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,S)},n.prototype.redISub=function(S){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,S)},n.prototype.redShl=function(S){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,S)},n.prototype.redMul=function(S){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.mul(this,S)},n.prototype.redIMul=function(S){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.imul(this,S)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(S){return r(this.red&&!S.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,S)};var w={k256:null,p224:null,p192:null,p25519:null};function b(S,E){this.name=S,this.p=new n(E,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function T(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function L(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(S){if(typeof S=="string"){var E=n._prime(S);this.m=E.p,this.prime=E}else r(S.gtn(1),"modulus must be greater than 1"),this.m=S,this.prime=null}function P(S){I.call(this,S),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var S=new n(null);return S.words=new Array(Math.ceil(this.n/13)),S},b.prototype.ireduce=function(S){var E,z=S;do this.split(z,this.tmp),E=(z=(z=this.imulK(z)).iadd(this.tmp)).bitLength();while(E>this.n);var D=E<this.n?-1:z.ucmp(this.p);return D===0?(z.words[0]=0,z.length=1):D>0?z.isub(this.p):z.strip!==void 0?z.strip():z._strip(),z},b.prototype.split=function(S,E){S.iushrn(this.n,0,E)},b.prototype.imulK=function(S){return S.imul(this.k)},l(_,b),_.prototype.split=function(S,E){for(var z=Math.min(S.length,9),D=0;D<z;D++)E.words[D]=S.words[D];if(E.length=z,S.length<=9)return S.words[0]=0,void(S.length=1);var U=S.words[9];for(E.words[E.length++]=4194303&U,D=10;D<S.length;D++){var H=0|S.words[D];S.words[D-10]=(4194303&H)<<4|U>>>22,U=H}U>>>=22,S.words[D-10]=U,U===0&&S.length>10?S.length-=10:S.length-=9},_.prototype.imulK=function(S){S.words[S.length]=0,S.words[S.length+1]=0,S.length+=2;for(var E=0,z=0;z<S.length;z++){var D=0|S.words[z];E+=977*D,S.words[z]=67108863&E,E=64*D+(E/67108864|0)}return S.words[S.length-1]===0&&(S.length--,S.words[S.length-1]===0&&S.length--),S},l(T,b),l(L,b),l(A,b),A.prototype.imulK=function(S){for(var E=0,z=0;z<S.length;z++){var D=19*(0|S.words[z])+E,U=67108863&D;D>>>=26,S.words[z]=U,E=D}return E!==0&&(S.words[S.length++]=E),S},n._prime=function(S){if(w[S])return w[S];var E;if(S==="k256")E=new _;else if(S==="p224")E=new T;else if(S==="p192")E=new L;else{if(S!=="p25519")throw new Error("Unknown prime "+S);E=new A}return w[S]=E,E},I.prototype._verify1=function(S){r(S.negative===0,"red works only with positives"),r(S.red,"red works only with red numbers")},I.prototype._verify2=function(S,E){r((S.negative|E.negative)==0,"red works only with positives"),r(S.red&&S.red===E.red,"red works only with red numbers")},I.prototype.imod=function(S){return this.prime?this.prime.ireduce(S)._forceRed(this):S.umod(this.m)._forceRed(this)},I.prototype.neg=function(S){return S.isZero()?S.clone():this.m.sub(S)._forceRed(this)},I.prototype.add=function(S,E){this._verify2(S,E);var z=S.add(E);return z.cmp(this.m)>=0&&z.isub(this.m),z._forceRed(this)},I.prototype.iadd=function(S,E){this._verify2(S,E);var z=S.iadd(E);return z.cmp(this.m)>=0&&z.isub(this.m),z},I.prototype.sub=function(S,E){this._verify2(S,E);var z=S.sub(E);return z.cmpn(0)<0&&z.iadd(this.m),z._forceRed(this)},I.prototype.isub=function(S,E){this._verify2(S,E);var z=S.isub(E);return z.cmpn(0)<0&&z.iadd(this.m),z},I.prototype.shl=function(S,E){return this._verify1(S),this.imod(S.ushln(E))},I.prototype.imul=function(S,E){return this._verify2(S,E),this.imod(S.imul(E))},I.prototype.mul=function(S,E){return this._verify2(S,E),this.imod(S.mul(E))},I.prototype.isqr=function(S){return this.imul(S,S.clone())},I.prototype.sqr=function(S){return this.mul(S,S)},I.prototype.sqrt=function(S){if(S.isZero())return S.clone();var E=this.m.andln(3);if(r(E%2==1),E===3){var z=this.m.add(new n(1)).iushrn(2);return this.pow(S,z)}for(var D=this.m.subn(1),U=0;!D.isZero()&&D.andln(1)===0;)U++,D.iushrn(1);r(!D.isZero());var H=new n(1).toRed(this),Y=H.redNeg(),J=this.m.subn(1).iushrn(1),W=this.m.bitLength();for(W=new n(2*W*W).toRed(this);this.pow(W,J).cmp(Y)!==0;)W.redIAdd(Y);for(var Z=this.pow(W,D),re=this.pow(S,D.addn(1).iushrn(1)),V=this.pow(S,D),B=U;V.cmp(H)!==0;){for(var j=V,ee=0;j.cmp(H)!==0;ee++)j=j.redSqr();r(ee<B);var N=this.pow(Z,new n(1).iushln(B-ee-1));re=re.redMul(N),Z=N.redSqr(),V=V.redMul(Z),B=ee}return re},I.prototype.invm=function(S){var E=S._invmp(this.m);return E.negative!==0?(E.negative=0,this.imod(E).redNeg()):this.imod(E)},I.prototype.pow=function(S,E){if(E.isZero())return new n(1).toRed(this);if(E.cmpn(1)===0)return S.clone();var z=new Array(16);z[0]=new n(1).toRed(this),z[1]=S;for(var D=2;D<z.length;D++)z[D]=this.mul(z[D-1],S);var U=z[0],H=0,Y=0,J=E.bitLength()%26;for(J===0&&(J=26),D=E.length-1;D>=0;D--){for(var W=E.words[D],Z=J-1;Z>=0;Z--){var re=W>>Z&1;U!==z[0]&&(U=this.sqr(U)),re!==0||H!==0?(H<<=1,H|=re,(++Y===4||D===0&&Z===0)&&(U=this.mul(U,z[H]),Y=0,H=0)):Y=0}J=26}return U},I.prototype.convertTo=function(S){var E=S.umod(this.m);return E===S?E.clone():E},I.prototype.convertFrom=function(S){var E=S.clone();return E.red=null,E},n.mont=function(S){return new P(S)},l(P,I),P.prototype.convertTo=function(S){return this.imod(S.ushln(this.shift))},P.prototype.convertFrom=function(S){var E=this.imod(S.mul(this.rinv));return E.red=null,E},P.prototype.imul=function(S,E){if(S.isZero()||E.isZero())return S.words[0]=0,S.length=1,S;var z=S.imul(E),D=z.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),U=z.isub(D).iushrn(this.shift),H=U;return U.cmp(this.m)>=0?H=U.isub(this.m):U.cmpn(0)<0&&(H=U.iadd(this.m)),H._forceRed(this)},P.prototype.mul=function(S,E){if(S.isZero()||E.isZero())return new n(0)._forceRed(this);var z=S.mul(E),D=z.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),U=z.isub(D).iushrn(this.shift),H=U;return U.cmp(this.m)>=0?H=U.isub(this.m):U.cmpn(0)<0&&(H=U.iadd(this.m)),H._forceRed(this)},P.prototype.invm=function(S){return this.imod(S._invmp(this.m).mul(this.r2))._forceRed(this)}})(k===void 0||k,this)},{buffer:2}],34:[function(v,k,x){k.exports=function(e){var t,r,l,n=e.length,d=0;for(t=0;t<n;++t)d+=e[t].length;var u=new Array(d),o=0;for(t=0;t<n;++t){var h=e[t],s=h.length;for(r=0;r<s;++r){var a=u[o++]=new Array(s-1),p=0;for(l=0;l<s;++l)l!==r&&(a[p++]=h[l]);if(1&r){var c=a[1];a[1]=a[0],a[0]=c}}}return u}},{}],35:[function(v,k,x){k.exports=function(a,p,c){switch(arguments.length){case 1:return h(a);case 2:return typeof p=="function"?u(a,a,p,!0):s(a,p);case 3:return u(a,p,c,!1);default:throw new Error("box-intersect: Invalid arguments")}};var e,t=v("typedarray-pool"),r=v("./lib/sweep"),l=v("./lib/intersect");function n(a,p){for(var c=0;c<a;++c)if(!(p[c]<=p[c+a]))return!0;return!1}function d(a,p,c,i){for(var y=0,f=0,w=0,b=a.length;w<b;++w){var _=a[w];if(!n(p,_)){for(var T=0;T<2*p;++T)c[y++]=_[T];i[f++]=w}}return f}function u(a,p,c,i){var y=a.length,f=p.length;if(!(y<=0||f<=0)){var w=a[0].length>>>1;if(!(w<=0)){var b,_=t.mallocDouble(2*w*y),T=t.mallocInt32(y);if((y=d(a,w,_,T))>0){if(w===1&&i)r.init(y),b=r.sweepComplete(w,c,0,y,_,T,0,y,_,T);else{var L=t.mallocDouble(2*w*f),A=t.mallocInt32(f);(f=d(p,w,L,A))>0&&(r.init(y+f),b=w===1?r.sweepBipartite(w,c,0,y,_,T,0,f,L,A):l(w,c,i,y,_,T,f,L,A),t.free(L),t.free(A))}t.free(_),t.free(T)}return b}}}function o(a,p){e.push([a,p])}function h(a){return e=[],u(a,a,o,!0),e}function s(a,p){return e=[],u(a,p,o,!1),e}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(v,k,x){function e(t){return t?function(r,l,n,d,u,o,h,s,a,p,c){return u-d>a-s?function(i,y,f,w,b,_,T,L,A,I,P){for(var S=2*i,E=w,z=S*w;E<b;++E,z+=S){var D=_[y+z],U=_[y+z+i],H=T[E];e:for(var Y=L,J=S*L;Y<A;++Y,J+=S){var W=I[y+J],Z=I[y+J+i],re=P[Y];if(!(Z<D||U<W)){for(var V=y+1;V<i;++V){var B=_[V+z],j=_[V+i+z],ee=I[V+J],N=I[V+i+J];if(j<ee||N<B)continue e}var $=f(H,re);if($!==void 0)return $}}}}(r,l,n,d,u,o,h,s,a,p,c):function(i,y,f,w,b,_,T,L,A,I,P){for(var S=2*i,E=L,z=S*L;E<A;++E,z+=S){var D=I[y+z],U=I[y+z+i],H=P[E];e:for(var Y=w,J=S*w;Y<b;++Y,J+=S){var W=_[y+J],Z=_[y+J+i],re=T[Y];if(!(U<W||Z<D)){for(var V=y+1;V<i;++V){var B=_[V+J],j=_[V+i+J],ee=I[V+z],N=I[V+i+z];if(j<ee||N<B)continue e}var $=f(re,H);if($!==void 0)return $}}}}(r,l,n,d,u,o,h,s,a,p,c)}:function(r,l,n,d,u,o,h,s,a,p,c,i){return o-u>p-a?d?function(y,f,w,b,_,T,L,A,I,P,S){for(var E=2*y,z=b,D=E*b;z<_;++z,D+=E){var U=T[f+D],H=T[f+D+y],Y=L[z];e:for(var J=A,W=E*A;J<I;++J,W+=E){var Z=P[f+W],re=S[J];if(!(Z<=U||H<Z)){for(var V=f+1;V<y;++V){var B=T[V+D],j=T[V+y+D],ee=P[V+W],N=P[V+y+W];if(j<ee||N<B)continue e}var $=w(re,Y);if($!==void 0)return $}}}}(r,l,n,u,o,h,s,a,p,c,i):function(y,f,w,b,_,T,L,A,I,P,S){for(var E=2*y,z=b,D=E*b;z<_;++z,D+=E){var U=T[f+D],H=T[f+D+y],Y=L[z];e:for(var J=A,W=E*A;J<I;++J,W+=E){var Z=P[f+W],re=S[J];if(!(Z<U||H<Z)){for(var V=f+1;V<y;++V){var B=T[V+D],j=T[V+y+D],ee=P[V+W],N=P[V+y+W];if(j<ee||N<B)continue e}var $=w(Y,re);if($!==void 0)return $}}}}(r,l,n,u,o,h,s,a,p,c,i):d?function(y,f,w,b,_,T,L,A,I,P,S){for(var E=2*y,z=A,D=E*A;z<I;++z,D+=E){var U=P[f+D],H=S[z];e:for(var Y=b,J=E*b;Y<_;++Y,J+=E){var W=T[f+J],Z=T[f+J+y],re=L[Y];if(!(U<=W||Z<U)){for(var V=f+1;V<y;++V){var B=T[V+J],j=T[V+y+J],ee=P[V+D],N=P[V+y+D];if(j<ee||N<B)continue e}var $=w(H,re);if($!==void 0)return $}}}}(r,l,n,u,o,h,s,a,p,c,i):function(y,f,w,b,_,T,L,A,I,P,S){for(var E=2*y,z=A,D=E*A;z<I;++z,D+=E){var U=P[f+D],H=S[z];e:for(var Y=b,J=E*b;Y<_;++Y,J+=E){var W=T[f+J],Z=T[f+J+y],re=L[Y];if(!(U<W||Z<U)){for(var V=f+1;V<y;++V){var B=T[V+J],j=T[V+y+J],ee=P[V+D],N=P[V+y+D];if(j<ee||N<B)continue e}var $=w(re,H);if($!==void 0)return $}}}}(r,l,n,u,o,h,s,a,p,c,i)}}x.partial=e(!1),x.full=e(!0)},{}],37:[function(v,k,x){k.exports=function(T,L,A,I,P,S,E,z,D){(function(Te,Ee){var Me=8*t.log2(Ee+1)*(Te+1)|0,De=t.nextPow2(6*Me);y.length<De&&(e.free(y),y=e.mallocInt32(De));var Ie=t.nextPow2(2*Me);f.length<Ie&&(e.free(f),f=e.mallocDouble(Ie))})(T,I+E);var U,H=0,Y=2*T;for(w(H++,0,0,I,0,E,A?16:0,-1/0,1/0),A||w(H++,0,0,E,0,I,1,-1/0,1/0);H>0;){var J=6*(H-=1),W=y[J],Z=y[J+1],re=y[J+2],V=y[J+3],B=y[J+4],j=y[J+5],ee=2*H,N=f[ee],$=f[ee+1],K=1&j,te=!!(16&j),ie=P,le=S,se=z,ve=D;if(K&&(ie=z,le=D,se=P,ve=S),!(2&j&&(re=a(T,W,Z,re,ie,le,$),Z>=re)||4&j&&(Z=p(T,W,Z,re,ie,le,N))>=re)){var fe=re-Z,ye=B-V;if(te){if(T*fe*(fe+ye)<1<<22){if((U=d.scanComplete(T,W,L,Z,re,ie,le,V,B,se,ve))!==void 0)return U;continue}}else{if(T*Math.min(fe,ye)<128){if((U=l(T,W,L,K,Z,re,ie,le,V,B,se,ve))!==void 0)return U;continue}if(T*fe*ye<1<<22){if((U=d.scanBipartite(T,W,L,K,Z,re,ie,le,V,B,se,ve))!==void 0)return U;continue}}var Ae=h(T,W,Z,re,ie,le,N,$);if(Z<Ae)if(T*(Ae-Z)<128){if((U=n(T,W+1,L,Z,Ae,ie,le,V,B,se,ve))!==void 0)return U}else if(W===T-2){if((U=K?d.sweepBipartite(T,L,V,B,se,ve,Z,Ae,ie,le):d.sweepBipartite(T,L,Z,Ae,ie,le,V,B,se,ve))!==void 0)return U}else w(H++,W+1,Z,Ae,V,B,K,-1/0,1/0),w(H++,W+1,V,B,Z,Ae,1^K,-1/0,1/0);if(Ae<re){var pe=u(T,W,V,B,se,ve),ge=se[Y*pe+W],we=s(T,W,pe,B,se,ve,ge);if(we<B&&w(H++,W,Ae,re,we,B,(4|K)+(te?16:0),ge,$),V<pe&&w(H++,W,Ae,re,V,pe,(2|K)+(te?16:0),N,ge),pe+1===we){if((U=te?_(T,W,L,Ae,re,ie,le,pe,se,ve[pe]):b(T,W,L,K,Ae,re,ie,le,pe,se,ve[pe]))!==void 0)return U}else if(pe<we){var oe;if(te){if(oe=c(T,W,Ae,re,ie,le,ge),Ae<oe){var de=s(T,W,Ae,oe,ie,le,ge);if(W===T-2){if(Ae<de&&(U=d.sweepComplete(T,L,Ae,de,ie,le,pe,we,se,ve))!==void 0||de<oe&&(U=d.sweepBipartite(T,L,de,oe,ie,le,pe,we,se,ve))!==void 0)return U}else Ae<de&&w(H++,W+1,Ae,de,pe,we,16,-1/0,1/0),de<oe&&(w(H++,W+1,de,oe,pe,we,0,-1/0,1/0),w(H++,W+1,pe,we,de,oe,1,-1/0,1/0))}}else oe=K?i(T,W,Ae,re,ie,le,ge):c(T,W,Ae,re,ie,le,ge),Ae<oe&&(W===T-2?U=K?d.sweepBipartite(T,L,pe,we,se,ve,Ae,oe,ie,le):d.sweepBipartite(T,L,Ae,oe,ie,le,pe,we,se,ve):(w(H++,W+1,Ae,oe,pe,we,K,-1/0,1/0),w(H++,W+1,pe,we,Ae,oe,1^K,-1/0,1/0)))}}}}};var e=v("typedarray-pool"),t=v("bit-twiddle"),r=v("./brute"),l=r.partial,n=r.full,d=v("./sweep"),u=v("./median"),o=v("./partition"),h=o("!(lo>=p0)&&!(p1>=hi)"),s=o("lo===p0"),a=o("lo<p0"),p=o("hi<=p0"),c=o("lo<=p0&&p0<=hi"),i=o("lo<p0&&p0<=hi"),y=e.mallocInt32(1024),f=e.mallocDouble(1024);function w(T,L,A,I,P,S,E,z,D){var U=6*T;y[U]=L,y[U+1]=A,y[U+2]=I,y[U+3]=P,y[U+4]=S,y[U+5]=E;var H=2*T;f[H]=z,f[H+1]=D}function b(T,L,A,I,P,S,E,z,D,U,H){var Y=2*T,J=D*Y,W=U[J+L];e:for(var Z=P,re=P*Y;Z<S;++Z,re+=Y){var V=E[re+L],B=E[re+L+T];if(!(W<V||B<W)&&(!I||W!==V)){for(var j,ee=z[Z],N=L+1;N<T;++N){V=E[re+N],B=E[re+N+T];var $=U[J+N],K=U[J+N+T];if(B<$||K<V)continue e}if((j=I?A(H,ee):A(ee,H))!==void 0)return j}}}function _(T,L,A,I,P,S,E,z,D,U){var H=2*T,Y=z*H,J=D[Y+L];e:for(var W=I,Z=I*H;W<P;++W,Z+=H){var re=E[W];if(re!==U){var V=S[Z+L],B=S[Z+L+T];if(!(J<V||B<J)){for(var j=L+1;j<T;++j){V=S[Z+j],B=S[Z+j+T];var ee=D[Y+j],N=D[Y+j+T];if(B<ee||N<V)continue e}var $=A(re,U);if($!==void 0)return $}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(v,k,x){k.exports=function(r,l,n,d,u,o){if(d<=n+1)return n;for(var h=n,s=d,a=d+n>>>1,p=2*r,c=a,i=u[p*a+l];h<s;){if(s-h<8){t(r,l,h,s,u,o),i=u[p*a+l];break}var y=s-h,f=Math.random()*y+h|0,w=u[p*f+l],b=Math.random()*y+h|0,_=u[p*b+l],T=Math.random()*y+h|0,L=u[p*T+l];w<=_?L>=_?(c=b,i=_):w>=L?(c=f,i=w):(c=T,i=L):_>=L?(c=b,i=_):L>=w?(c=f,i=w):(c=T,i=L);for(var A=p*(s-1),I=p*c,P=0;P<p;++P,++A,++I){var S=u[A];u[A]=u[I],u[I]=S}var E=o[s-1];for(o[s-1]=o[c],o[c]=E,c=e(r,l,h,s-1,u,o,i),A=p*(s-1),I=p*c,P=0;P<p;++P,++A,++I)S=u[A],u[A]=u[I],u[I]=S;if(E=o[s-1],o[s-1]=o[c],o[c]=E,a<c){for(s=c-1;h<s&&u[p*(s-1)+l]===i;)s-=1;s+=1}else{if(!(c<a))break;for(h=c+1;h<s&&u[p*h+l]===i;)h+=1}}return e(r,l,n,a,u,o,u[p*a+l])};var e=v("./partition")("lo<p0");function t(r,l,n,d,u,o){for(var h=2*r,s=h*(n+1)+l,a=n+1;a<d;++a,s+=h)for(var p=u[s],c=a,i=h*(a-1);c>n&&u[i+l]>p;--c,i-=h){for(var y=i,f=i+h,w=0;w<h;++w,++y,++f){var b=u[y];u[y]=u[f],u[f]=b}var _=o[c];o[c]=o[c-1],o[c-1]=_}}},{"./partition":39}],39:[function(v,k,x){k.exports=function(t){return e[t]};var e={"lo===p0":function(t,r,l,n,d,u,o){for(var h=2*t,s=h*l,a=s,p=l,c=r,i=l;n>i;++i,s+=h)if(d[s+c]===o)if(p===i)p+=1,a+=h;else{for(var y=0;h>y;++y){var f=d[s+y];d[s+y]=d[a],d[a++]=f}var w=u[i];u[i]=u[p],u[p++]=w}return p},"lo<p0":function(t,r,l,n,d,u,o){for(var h=2*t,s=h*l,a=s,p=l,c=r,i=l;n>i;++i,s+=h)if(d[s+c]<o)if(p===i)p+=1,a+=h;else{for(var y=0;h>y;++y){var f=d[s+y];d[s+y]=d[a],d[a++]=f}var w=u[i];u[i]=u[p],u[p++]=w}return p},"lo<=p0":function(t,r,l,n,d,u,o){for(var h=2*t,s=h*l,a=s,p=l,c=t+r,i=l;n>i;++i,s+=h)if(d[s+c]<=o)if(p===i)p+=1,a+=h;else{for(var y=0;h>y;++y){var f=d[s+y];d[s+y]=d[a],d[a++]=f}var w=u[i];u[i]=u[p],u[p++]=w}return p},"hi<=p0":function(t,r,l,n,d,u,o){for(var h=2*t,s=h*l,a=s,p=l,c=t+r,i=l;n>i;++i,s+=h)if(d[s+c]<=o)if(p===i)p+=1,a+=h;else{for(var y=0;h>y;++y){var f=d[s+y];d[s+y]=d[a],d[a++]=f}var w=u[i];u[i]=u[p],u[p++]=w}return p},"lo<p0&&p0<=hi":function(t,r,l,n,d,u,o){for(var h=2*t,s=h*l,a=s,p=l,c=r,i=t+r,y=l;n>y;++y,s+=h){var f=d[s+c],w=d[s+i];if(f<o&&o<=w)if(p===y)p+=1,a+=h;else{for(var b=0;h>b;++b){var _=d[s+b];d[s+b]=d[a],d[a++]=_}var T=u[y];u[y]=u[p],u[p++]=T}}return p},"lo<=p0&&p0<=hi":function(t,r,l,n,d,u,o){for(var h=2*t,s=h*l,a=s,p=l,c=r,i=t+r,y=l;n>y;++y,s+=h){var f=d[s+c],w=d[s+i];if(f<=o&&o<=w)if(p===y)p+=1,a+=h;else{for(var b=0;h>b;++b){var _=d[s+b];d[s+b]=d[a],d[a++]=_}var T=u[y];u[y]=u[p],u[p++]=T}}return p},"!(lo>=p0)&&!(p1>=hi)":function(t,r,l,n,d,u,o,h){for(var s=2*t,a=s*l,p=a,c=l,i=r,y=t+r,f=l;n>f;++f,a+=s){var w=d[a+i],b=d[a+y];if(!(w>=o||h>=b))if(c===f)c+=1,p+=s;else{for(var _=0;s>_;++_){var T=d[a+_];d[a+_]=d[p],d[p++]=T}var L=u[f];u[f]=u[c],u[c++]=L}}return c}}},{}],40:[function(v,k,x){k.exports=function(o,h){h<=128?e(0,h-1,o):function s(a,p,c){var i=(p-a+1)/6|0,y=a+i,f=p-i,w=a+p>>1,b=w-i,_=w+i,T=y,L=b,A=w,I=_,P=f,S=a+1,E=p-1,z=0;d(T,L,c)&&(z=T,T=L,L=z),d(I,P,c)&&(z=I,I=P,P=z),d(T,A,c)&&(z=T,T=A,A=z),d(L,A,c)&&(z=L,L=A,A=z),d(T,I,c)&&(z=T,T=I,I=z),d(A,I,c)&&(z=A,A=I,I=z),d(L,P,c)&&(z=L,L=P,P=z),d(L,A,c)&&(z=L,L=A,A=z),d(I,P,c)&&(z=I,I=P,P=z);for(var D=c[2*L],U=c[2*L+1],H=c[2*I],Y=c[2*I+1],J=2*T,W=2*A,Z=2*P,re=2*y,V=2*w,B=2*f,j=0;j<2;++j){var ee=c[J+j],N=c[W+j],$=c[Z+j];c[re+j]=ee,c[V+j]=N,c[B+j]=$}r(b,a,c),r(_,p,c);for(var K=S;K<=E;++K)if(u(K,D,U,c))K!==S&&t(K,S,c),++S;else if(!u(K,H,Y,c))for(;;){if(u(E,H,Y,c)){u(E,D,U,c)?(l(K,S,E,c),++S,--E):(t(K,E,c),--E);break}if(--E<K)break}n(a,S-1,D,U,c),n(p,E+1,H,Y,c),S-2-a<=32?e(a,S-2,c):s(a,S-2,c),p-(E+2)<=32?e(E+2,p,c):s(E+2,p,c),E-S<=32?e(S,E,c):s(S,E,c)}(0,h-1,o)};function e(o,h,s){for(var a=2*(o+1),p=o+1;p<=h;++p){for(var c=s[a++],i=s[a++],y=p,f=a-2;y-- >o;){var w=s[f-2],b=s[f-1];if(w<c||w===c&&b<i)break;s[f]=w,s[f+1]=b,f-=2}s[f]=c,s[f+1]=i}}function t(o,h,s){h*=2;var a=s[o*=2],p=s[o+1];s[o]=s[h],s[o+1]=s[h+1],s[h]=a,s[h+1]=p}function r(o,h,s){h*=2,s[o*=2]=s[h],s[o+1]=s[h+1]}function l(o,h,s,a){h*=2,s*=2;var p=a[o*=2],c=a[o+1];a[o]=a[h],a[o+1]=a[h+1],a[h]=a[s],a[h+1]=a[s+1],a[s]=p,a[s+1]=c}function n(o,h,s,a,p){h*=2,p[o*=2]=p[h],p[h]=s,p[o+1]=p[h+1],p[h+1]=a}function d(o,h,s){h*=2;var a=s[o*=2],p=s[h];return!(a<p)&&(a!==p||s[o+1]>s[h+1])}function u(o,h,s,a){var p=a[o*=2];return p<h||p===h&&a[o+1]<s}},{}],41:[function(v,k,x){k.exports={init:function(c){var i=t.nextPow2(c);l.length<i&&(e.free(l),l=e.mallocInt32(i)),n.length<i&&(e.free(n),n=e.mallocInt32(i)),d.length<i&&(e.free(d),d=e.mallocInt32(i)),u.length<i&&(e.free(u),u=e.mallocInt32(i)),o.length<i&&(e.free(o),o=e.mallocInt32(i)),h.length<i&&(e.free(h),h=e.mallocInt32(i));var y=8*i;s.length<y&&(e.free(s),s=e.mallocDouble(y))},sweepBipartite:function(c,i,y,f,w,b,_,T,L,A){for(var I=0,P=2*c,S=c-1,E=P-1,z=y;z<f;++z){var D=b[z],U=P*z;s[I++]=w[U+S],s[I++]=-(D+1),s[I++]=w[U+E],s[I++]=D}for(z=_;z<T;++z){D=A[z]+(1<<28);var H=P*z;s[I++]=L[H+S],s[I++]=-D,s[I++]=L[H+E],s[I++]=D}var Y=I>>>1;r(s,Y);var J=0,W=0;for(z=0;z<Y;++z){var Z=0|s[2*z+1];if(Z>=1<<28)a(d,u,W--,Z=Z-(1<<28)|0);else if(Z>=0)a(l,n,J--,Z);else if(Z<=-(1<<28)){Z=-Z-(1<<28)|0;for(var re=0;re<J;++re)if((V=i(l[re],Z))!==void 0)return V;p(d,u,W++,Z)}else{for(Z=-Z-1|0,re=0;re<W;++re){var V;if((V=i(Z,d[re]))!==void 0)return V}p(l,n,J++,Z)}}},sweepComplete:function(c,i,y,f,w,b,_,T,L,A){for(var I=0,P=2*c,S=c-1,E=P-1,z=y;z<f;++z){var D=b[z]+1<<1,U=P*z;s[I++]=w[U+S],s[I++]=-D,s[I++]=w[U+E],s[I++]=D}for(z=_;z<T;++z){D=A[z]+1<<1;var H=P*z;s[I++]=L[H+S],s[I++]=1|-D,s[I++]=L[H+E],s[I++]=1|D}var Y=I>>>1;r(s,Y);var J=0,W=0,Z=0;for(z=0;z<Y;++z){var re=0|s[2*z+1],V=1&re;if(z<Y-1&&re>>1==s[2*z+3]>>1&&(V=2,z+=1),re<0){for(var B=-(re>>1)-1,j=0;j<Z;++j)if((ee=i(o[j],B))!==void 0)return ee;if(V!==0){for(j=0;j<J;++j)if((ee=i(l[j],B))!==void 0)return ee}if(V!==1)for(j=0;j<W;++j){var ee;if((ee=i(d[j],B))!==void 0)return ee}V===0?p(l,n,J++,B):V===1?p(d,u,W++,B):V===2&&p(o,h,Z++,B)}else B=(re>>1)-1,V===0?a(l,n,J--,B):V===1?a(d,u,W--,B):V===2&&a(o,h,Z--,B)}},scanBipartite:function(c,i,y,f,w,b,_,T,L,A,I,P){var S=0,E=2*c,z=i,D=i+c,U=1,H=1;f?H=1<<28:U=1<<28;for(var Y=w;Y<b;++Y){var J=Y+U,W=E*Y;s[S++]=_[W+z],s[S++]=-J,s[S++]=_[W+D],s[S++]=J}for(Y=L;Y<A;++Y){J=Y+H;var Z=E*Y;s[S++]=I[Z+z],s[S++]=-J}var re=S>>>1;r(s,re);var V=0;for(Y=0;Y<re;++Y){var B=0|s[2*Y+1];if(B<0){var j=!1;if((J=-B)>=1<<28?(j=!f,J-=1<<28):(j=!!f,J-=1),j)p(l,n,V++,J);else{var ee=P[J],N=E*J,$=I[N+i+1],K=I[N+i+1+c];e:for(var te=0;te<V;++te){var ie=l[te],le=E*ie;if(!(K<_[le+i+1]||_[le+i+1+c]<$)){for(var se=i+2;se<c;++se)if(I[N+se+c]<_[le+se]||_[le+se+c]<I[N+se])continue e;var ve,fe=T[ie];if((ve=f?y(ee,fe):y(fe,ee))!==void 0)return ve}}}}else a(l,n,V--,B-U)}},scanComplete:function(c,i,y,f,w,b,_,T,L,A,I){for(var P=0,S=2*c,E=i,z=i+c,D=f;D<w;++D){var U=D+268435456,H=S*D;s[P++]=b[H+E],s[P++]=-U,s[P++]=b[H+z],s[P++]=U}for(D=T;D<L;++D){U=D+1;var Y=S*D;s[P++]=A[Y+E],s[P++]=-U}var J=P>>>1;r(s,J);var W=0;for(D=0;D<J;++D){var Z=0|s[2*D+1];if(Z<0)if((U=-Z)>=1<<28)l[W++]=U-(1<<28);else{var re=I[U-=1],V=S*U,B=A[V+i+1],j=A[V+i+1+c];e:for(var ee=0;ee<W;++ee){var N=l[ee],$=_[N];if($===re)break;var K=S*N;if(!(j<b[K+i+1]||b[K+i+1+c]<B)){for(var te=i+2;te<c;++te)if(A[V+te+c]<b[K+te]||b[K+te+c]<A[V+te])continue e;var ie=y($,re);if(ie!==void 0)return ie}}}else{for(U=Z-(1<<28),ee=W-1;ee>=0;--ee)if(l[ee]===U){for(te=ee+1;te<W;++te)l[te-1]=l[te];break}--W}}}};var e=v("typedarray-pool"),t=v("bit-twiddle"),r=v("./sort"),l=e.mallocInt32(1024),n=e.mallocInt32(1024),d=e.mallocInt32(1024),u=e.mallocInt32(1024),o=e.mallocInt32(1024),h=e.mallocInt32(1024),s=e.mallocDouble(8192);function a(c,i,y,f){var w=i[f],b=c[y-1];c[w]=b,i[b]=w}function p(c,i,y,f){c[y]=f,i[f]=y}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(v,k,x){var e=v("./lib/monotone"),t=v("./lib/triangulation"),r=v("./lib/delaunay"),l=v("./lib/filter");function n(o){return[Math.min(o[0],o[1]),Math.max(o[0],o[1])]}function d(o,h){return o[0]-h[0]||o[1]-h[1]}function u(o,h,s){return h in o?o[h]:s}k.exports=function(o,h,s){Array.isArray(h)?(s=s||{},h=h||[]):(s=h||{},h=[]);var a=!!u(s,"delaunay",!0),p=!!u(s,"interior",!0),c=!!u(s,"exterior",!0),i=!!u(s,"infinity",!1);if(!p&&!c||o.length===0)return[];var y=e(o,h);if(a||p!==c||i){for(var f=t(o.length,function(_){return _.map(n).sort(d)}(h)),w=0;w<y.length;++w){var b=y[w];f.addTriangle(b[0],b[1],b[2])}return a&&r(o,f),c?p?i?l(f,0,i):f.cells():l(f,1,i):l(f,-1)}return y}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(v,k,x){var e=v("robust-in-sphere")[4];v("binary-search-bounds");function t(r,l,n,d,u,o){var h=l.opposite(d,u);if(!(h<0)){if(u<d){var s=d;d=u,u=s,s=o,o=h,h=s}l.isConstraint(d,u)||e(r[d],r[u],r[o],r[h])<0&&n.push(d,u)}}k.exports=function(r,l){for(var n=[],d=r.length,u=l.stars,o=0;o<d;++o)for(var h=u[o],s=1;s<h.length;s+=2)if(!((i=h[s])<o)&&!l.isConstraint(o,i)){for(var a=h[s-1],p=-1,c=1;c<h.length;c+=2)if(h[c-1]===i){p=h[c];break}p<0||e(r[o],r[i],r[a],r[p])<0&&n.push(o,i)}for(;n.length>0;){for(var i=n.pop(),y=(o=n.pop(),a=-1,p=-1,h=u[o],1);y<h.length;y+=2){var f=h[y-1],w=h[y];f===i?p=w:w===i&&(a=f)}a<0||p<0||e(r[o],r[i],r[a],r[p])>=0||(l.flip(o,i),t(r,l,n,a,o,p),t(r,l,n,o,p,a),t(r,l,n,p,i,a),t(r,l,n,i,a,p))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(v,k,x){var e,t=v("binary-search-bounds");function r(n,d,u,o,h,s,a){this.cells=n,this.neighbor=d,this.flags=o,this.constraint=u,this.active=h,this.next=s,this.boundary=a}function l(n,d){return n[0]-d[0]||n[1]-d[1]||n[2]-d[2]}k.exports=function(n,d,u){var o=function(L,A){for(var I=L.cells(),P=I.length,S=0;S<P;++S){var E=(V=I[S])[0],z=V[1],D=V[2];z<D?z<E&&(V[0]=z,V[1]=D,V[2]=E):D<E&&(V[0]=D,V[1]=E,V[2]=z)}I.sort(l);var U=new Array(P);for(S=0;S<U.length;++S)U[S]=0;var H=[],Y=[],J=new Array(3*P),W=new Array(3*P),Z=null;A&&(Z=[]);var re=new r(I,J,W,U,H,Y,Z);for(S=0;S<P;++S)for(var V=I[S],B=0;B<3;++B){E=V[B],z=V[(B+1)%3];var j=J[3*S+B]=re.locate(z,E,L.opposite(z,E)),ee=W[3*S+B]=L.isConstraint(E,z);j<0&&(ee?Y.push(S):(H.push(S),U[S]=1),A&&Z.push([z,E,-1]))}return re}(n,u);if(d===0)return u?o.cells.concat(o.boundary):o.cells;for(var h=1,s=o.active,a=o.next,p=o.flags,c=o.cells,i=o.constraint,y=o.neighbor;s.length>0||a.length>0;){for(;s.length>0;){var f=s.pop();if(p[f]!==-h){p[f]=h,c[f];for(var w=0;w<3;++w){var b=y[3*f+w];b>=0&&p[b]===0&&(i[3*f+w]?a.push(b):(s.push(b),p[b]=h))}}}var _=a;a=s,s=_,a.length=0,h=-h}var T=function(L,A,I){for(var P=0,S=0;S<L.length;++S)A[S]===I&&(L[P++]=L[S]);return L.length=P,L}(c,p,d);return u?T.concat(o.boundary):T},r.prototype.locate=(e=[0,0,0],function(n,d,u){var o=n,h=d,s=u;return d<u?d<n&&(o=d,h=u,s=n):u<n&&(o=u,h=n,s=d),o<0?-1:(e[0]=o,e[1]=h,e[2]=s,t.eq(this.cells,e,l))})},{"binary-search-bounds":31}],45:[function(v,k,x){var e=v("binary-search-bounds"),t=v("robust-orientation")[3];function r(a,p,c,i,y){this.a=a,this.b=p,this.idx=c,this.lowerIds=i,this.upperIds=y}function l(a,p,c,i){this.a=a,this.b=p,this.type=c,this.idx=i}function n(a,p){var c=a.a[0]-p.a[0]||a.a[1]-p.a[1]||a.type-p.type;return c||(a.type!==0&&(c=t(a.a,a.b,p.b))?c:a.idx-p.idx)}function d(a,p){return t(a.a,a.b,p)}function u(a,p,c,i,y){for(var f=e.lt(p,i,d),w=e.gt(p,i,d),b=f;b<w;++b){for(var _=p[b],T=_.lowerIds,L=T.length;L>1&&t(c[T[L-2]],c[T[L-1]],i)>0;)a.push([T[L-1],T[L-2],y]),L-=1;T.length=L,T.push(y);var A=_.upperIds;for(L=A.length;L>1&&t(c[A[L-2]],c[A[L-1]],i)<0;)a.push([A[L-2],A[L-1],y]),L-=1;A.length=L,A.push(y)}}function o(a,p){var c;return(c=a.a[0]<p.a[0]?t(a.a,a.b,p.a):t(p.b,p.a,a.a))?c:(c=p.b[0]<a.b[0]?t(a.a,a.b,p.b):t(p.b,p.a,a.b))||a.idx-p.idx}function h(a,p,c){var i=e.le(a,c,o),y=a[i],f=y.upperIds,w=f[f.length-1];y.upperIds=[w],a.splice(i+1,0,new r(c.a,c.b,c.idx,[w],f))}function s(a,p,c){var i=c.a;c.a=c.b,c.b=i;var y=e.eq(a,c,o),f=a[y];a[y-1].upperIds=f.upperIds,a.splice(y,1)}k.exports=function(a,p){for(var c=a.length,i=p.length,y=[],f=0;f<c;++f)y.push(new l(a[f],null,0,f));for(f=0;f<i;++f){var w=p[f],b=a[w[0]],_=a[w[1]];b[0]<_[0]?y.push(new l(b,_,2,f),new l(_,b,1,f)):b[0]>_[0]&&y.push(new l(_,b,2,f),new l(b,_,1,f))}y.sort(n);for(var T=y[0].a[0]-(1+Math.abs(y[0].a[0]))*Math.pow(2,-52),L=[new r([T,1],[T,0],-1,[],[])],A=[],I=(f=0,y.length);f<I;++f){var P=y[f],S=P.type;S===0?u(A,L,a,P.a,P.idx):S===2?h(L,a,P):s(L,a,P)}return A}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(v,k,x){var e=v("binary-search-bounds");function t(n,d){this.stars=n,this.edges=d}k.exports=function(n,d){for(var u=new Array(n),o=0;o<n;++o)u[o]=[];return new t(u,d)};var r=t.prototype;function l(n,d,u){for(var o=1,h=n.length;o<h;o+=2)if(n[o-1]===d&&n[o]===u)return n[o-1]=n[h-2],n[o]=n[h-1],void(n.length=h-2)}r.isConstraint=function(){var n=[0,0];function d(u,o){return u[0]-o[0]||u[1]-o[1]}return function(u,o){return n[0]=Math.min(u,o),n[1]=Math.max(u,o),e.eq(this.edges,n,d)>=0}}(),r.removeTriangle=function(n,d,u){var o=this.stars;l(o[n],d,u),l(o[d],u,n),l(o[u],n,d)},r.addTriangle=function(n,d,u){var o=this.stars;o[n].push(d,u),o[d].push(u,n),o[u].push(n,d)},r.opposite=function(n,d){for(var u=this.stars[d],o=1,h=u.length;o<h;o+=2)if(u[o]===n)return u[o-1];return-1},r.flip=function(n,d){var u=this.opposite(n,d),o=this.opposite(d,n);this.removeTriangle(n,d,u),this.removeTriangle(d,n,o),this.addTriangle(n,o,u),this.addTriangle(d,u,o)},r.edges=function(){for(var n=this.stars,d=[],u=0,o=n.length;u<o;++u)for(var h=n[u],s=0,a=h.length;s<a;s+=2)d.push([h[s],h[s+1]]);return d},r.cells=function(){for(var n=this.stars,d=[],u=0,o=n.length;u<o;++u)for(var h=n[u],s=0,a=h.length;s<a;s+=2){var p=h[s],c=h[s+1];u<Math.min(p,c)&&d.push([u,p,c])}return d}},{"binary-search-bounds":31}],47:[function(v,k,x){k.exports=function(e){for(var t=1,r=1;r<e.length;++r)for(var l=0;l<r;++l)if(e[r]<e[l])t=-t;else if(e[l]===e[r])return 0;return t}},{}],48:[function(v,k,x){var e=v("dup"),t=v("robust-linear-solve");function r(d,u){for(var o=0,h=d.length,s=0;s<h;++s)o+=d[s]*u[s];return o}function l(d){var u=d.length;if(u===0)return[];d[0].length;var o=e([d.length+1,d.length+1],1),h=e([d.length+1],1);o[u][u]=0;for(var s=0;s<u;++s){for(var a=0;a<=s;++a)o[a][s]=o[s][a]=2*r(d[s],d[a]);h[s]=r(d[s],d[s])}var p=t(o,h),c=0,i=p[u+1];for(s=0;s<i.length;++s)c+=i[s];var y=new Array(u);for(s=0;s<u;++s){i=p[s];var f=0;for(a=0;a<i.length;++a)f+=i[a];y[s]=f/c}return y}function n(d){if(d.length===0)return[];for(var u=d[0].length,o=e([u]),h=l(d),s=0;s<d.length;++s)for(var a=0;a<u;++a)o[a]+=d[s][a]*h[s];return o}n.barycenetric=l,k.exports=n},{dup:65,"robust-linear-solve":283}],49:[function(v,k,x){k.exports=function(t){for(var r=e(t),l=0,n=0;n<t.length;++n)for(var d=t[n],u=0;u<r.length;++u)l+=Math.pow(d[u]-r[u],2);return Math.sqrt(l/t.length)};var e=v("circumcenter")},{circumcenter:48}],50:[function(v,k,x){k.exports=function(w,b,_){var T;if(_){T=b;for(var L=new Array(b.length),A=0;A<b.length;++A){var I=b[A];L[A]=[I[0],I[1],_[A]]}b=L}for(var P=function(S,E,z){var D=p(S,[],a(S));return y(E,D,z),!!D}(w,b,!!_);f(w,b,!!_);)P=!0;if(_&&P)for(T.length=0,_.length=0,A=0;A<b.length;++A)I=b[A],T.push([I[0],I[1]]),_.push(I[2]);return P};var e=v("union-find"),t=v("box-intersect"),r=v("robust-segment-intersect"),l=v("big-rat"),n=v("big-rat/cmp"),d=v("big-rat/to-float"),u=v("rat-vec"),o=v("nextafter"),h=v("./lib/rat-seg-intersect");function s(w){var b=d(w);return[o(b,-1/0),o(b,1/0)]}function a(w){for(var b=new Array(w.length),_=0;_<w.length;++_){var T=w[_];b[_]=[o(T[0],-1/0),o(T[1],-1/0),o(T[0],1/0),o(T[1],1/0)]}return b}function p(w,b,_){for(var T=b.length,L=new e(T),A=[],I=0;I<b.length;++I){var P=b[I],S=s(P[0]),E=s(P[1]);A.push([o(S[0],-1/0),o(E[0],-1/0),o(S[1],1/0),o(E[1],1/0)])}t(A,function(Y,J){L.link(Y,J)});var z=!0,D=new Array(T);for(I=0;I<T;++I)(H=L.find(I))!==I&&(z=!1,w[H]=[Math.min(w[I][0],w[H][0]),Math.min(w[I][1],w[H][1])]);if(z)return null;var U=0;for(I=0;I<T;++I){var H;(H=L.find(I))===I?(D[I]=U,w[U++]=w[I]):D[I]=-1}for(w.length=U,I=0;I<T;++I)D[I]<0&&(D[I]=D[L.find(I)]);return D}function c(w,b){return w[0]-b[0]||w[1]-b[1]}function i(w,b){var _=w[0]-b[0]||w[1]-b[1];return _||(w[2]<b[2]?-1:w[2]>b[2]?1:0)}function y(w,b,_){if(w.length!==0){if(b)for(var T=0;T<w.length;++T){var L=b[(I=w[T])[0]],A=b[I[1]];I[0]=Math.min(L,A),I[1]=Math.max(L,A)}else for(T=0;T<w.length;++T){var I;L=(I=w[T])[0],A=I[1],I[0]=Math.min(L,A),I[1]=Math.max(L,A)}_?w.sort(i):w.sort(c);var P=1;for(T=1;T<w.length;++T){var S=w[T-1],E=w[T];(E[0]!==S[0]||E[1]!==S[1]||_&&E[2]!==S[2])&&(w[P++]=E)}w.length=P}}function f(w,b,_){var T=function(S,E){for(var z=new Array(E.length),D=0;D<E.length;++D){var U=E[D],H=S[U[0]],Y=S[U[1]];z[D]=[o(Math.min(H[0],Y[0]),-1/0),o(Math.min(H[1],Y[1]),-1/0),o(Math.max(H[0],Y[0]),1/0),o(Math.max(H[1],Y[1]),1/0)]}return z}(w,b),L=function(S,E,z){var D=[];return t(z,function(U,H){var Y=E[U],J=E[H];if(Y[0]!==J[0]&&Y[0]!==J[1]&&Y[1]!==J[0]&&Y[1]!==J[1]){var W=S[Y[0]],Z=S[Y[1]],re=S[J[0]],V=S[J[1]];r(W,Z,re,V)&&D.push([U,H])}}),D}(w,b,T),A=a(w),I=function(S,E,z,D){var U=[];return t(z,D,function(H,Y){var J=E[H];if(J[0]!==Y&&J[1]!==Y){var W=S[Y],Z=S[J[0]],re=S[J[1]];r(Z,re,W,W)&&U.push([H,Y])}}),U}(w,b,T,A),P=p(w,function(S,E,z,D,U){var H,Y,J=S.map(function(ye){return[l(ye[0]),l(ye[1])]});for(H=0;H<z.length;++H){var W=z[H];Y=W[0];var Z=W[1],re=E[Y],V=E[Z],B=h(u(S[re[0]]),u(S[re[1]]),u(S[V[0]]),u(S[V[1]]));if(B){var j=S.length;S.push([d(B[0]),d(B[1])]),J.push(B),D.push([Y,j],[Z,j])}}for(D.sort(function(ye,Ae){if(ye[0]!==Ae[0])return ye[0]-Ae[0];var pe=J[ye[1]],ge=J[Ae[1]];return n(pe[0],ge[0])||n(pe[1],ge[1])}),H=D.length-1;H>=0;--H){var ee=E[Y=(ve=D[H])[0]],N=ee[0],$=ee[1],K=S[N],te=S[$];if((K[0]-te[0]||K[1]-te[1])<0){var ie=N;N=$,$=ie}ee[0]=N;var le,se=ee[1]=ve[1];for(U&&(le=ee[2]);H>0&&D[H-1][0]===Y;){var ve,fe=(ve=D[--H])[1];U?E.push([se,fe,le]):E.push([se,fe]),se=fe}U?E.push([se,$,le]):E.push([se,$])}return J}(w,b,L,I,_));return y(b,P,_),!!P||L.length>0||I.length>0}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(v,k,x){k.exports=function(h,s,a,p){var c=n(s,h),i=n(p,a),y=o(c,i);if(l(y)===0)return null;var f=n(h,a),w=o(i,f),b=t(w,y),_=u(c,b);return d(h,_)};var e=v("big-rat/mul"),t=v("big-rat/div"),r=v("big-rat/sub"),l=v("big-rat/sign"),n=v("rat-vec/sub"),d=v("rat-vec/add"),u=v("rat-vec/muls");function o(h,s){return r(e(h[0],s[1]),e(h[1],s[0]))}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(v,k,x){k.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(v,k,x){var e=v("./colorScale"),t=v("lerp");function r(d){return[d[0]/255,d[1]/255,d[2]/255,d[3]]}function l(d){for(var u,o="#",h=0;h<3;++h)o+=("00"+(u=(u=d[h]).toString(16))).substr(u.length);return o}function n(d){return"rgba("+d.join(",")+")"}k.exports=function(d){var u,o,h,s,a,p,c,i,y,f;if(d||(d={}),i=(d.nshades||72)-1,c=d.format||"hex",(p=d.colormap)||(p="jet"),typeof p=="string"){if(p=p.toLowerCase(),!e[p])throw Error(p+" not a supported colorscale");a=e[p]}else{if(!Array.isArray(p))throw Error("unsupported colormap option",p);a=p.slice()}if(a.length>i+1)throw new Error(p+" map requires nshades to be at least size "+a.length);y=Array.isArray(d.alpha)?d.alpha.length!==2?[1,1]:d.alpha.slice():typeof d.alpha=="number"?[d.alpha,d.alpha]:[1,1],u=a.map(function(L){return Math.round(L.index*i)}),y[0]=Math.min(Math.max(y[0],0),1),y[1]=Math.min(Math.max(y[1],0),1);var w=a.map(function(L,A){var I=a[A].index,P=a[A].rgb.slice();return P.length===4&&P[3]>=0&&P[3]<=1||(P[3]=y[0]+(y[1]-y[0])*I),P}),b=[];for(f=0;f<u.length-1;++f){s=u[f+1]-u[f],o=w[f],h=w[f+1];for(var _=0;_<s;_++){var T=_/s;b.push([Math.round(t(o[0],h[0],T)),Math.round(t(o[1],h[1],T)),Math.round(t(o[2],h[2],T)),t(o[3],h[3],T)])}}return b.push(a[a.length-1].rgb.concat(y[1])),c==="hex"?b=b.map(l):c==="rgbaString"?b=b.map(n):c==="float"&&(b=b.map(r)),b}},{"./colorScale":52,lerp:240}],54:[function(v,k,x){k.exports=function(u,o,h,s){var a=e(o,h,s);if(a===0){var p=t(e(u,o,h)),c=t(e(u,o,s));if(p===c){if(p===0){var i=d(u,o,h),y=d(u,o,s);return i===y?0:i?1:-1}return 0}return c===0?p>0||d(u,o,s)?-1:1:p===0?c>0||d(u,o,h)?1:-1:t(c-p)}var f=e(u,o,h);return f>0?a>0&&e(u,o,s)>0?1:-1:f<0?a>0||e(u,o,s)>0?1:-1:e(u,o,s)>0||d(u,o,h)?1:-1};var e=v("robust-orientation"),t=v("signum"),r=v("two-sum"),l=v("robust-product"),n=v("robust-sum");function d(u,o,h){var s=r(u[0],-o[0]),a=r(u[1],-o[1]),p=r(h[0],-o[0]),c=r(h[1],-o[1]),i=n(l(s,p),l(a,c));return i[i.length-1]>=0}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(v,k,x){k.exports=function(e){return e<0?-1:e>0?1:0}},{}],56:[function(v,k,x){k.exports=function(r,l){var n=r.length,d=r.length-l.length;if(d)return d;switch(n){case 0:return 0;case 1:return r[0]-l[0];case 2:return r[0]+r[1]-l[0]-l[1]||e(r[0],r[1])-e(l[0],l[1]);case 3:var u=r[0]+r[1],o=l[0]+l[1];if(d=u+r[2]-(o+l[2]))return d;var h=e(r[0],r[1]),s=e(l[0],l[1]);return e(h,r[2])-e(s,l[2])||e(h+r[2],u)-e(s+l[2],o);case 4:var a=r[0],p=r[1],c=r[2],i=r[3],y=l[0],f=l[1],w=l[2],b=l[3];return a+p+c+i-(y+f+w+b)||e(a,p,c,i)-e(y,f,w,b,y)||e(a+p,a+c,a+i,p+c,p+i,c+i)-e(y+f,y+w,y+b,f+w,f+b,w+b)||e(a+p+c,a+p+i,a+c+i,p+c+i)-e(y+f+w,y+f+b,y+w+b,f+w+b);default:for(var _=r.slice().sort(t),T=l.slice().sort(t),L=0;L<n;++L)if(d=_[L]-T[L])return d;return 0}};var e=Math.min;function t(r,l){return r-l}},{}],57:[function(v,k,x){var e=v("compare-cell"),t=v("cell-orientation");k.exports=function(r,l){return e(r,l)||t(r)-t(l)}},{"cell-orientation":47,"compare-cell":56}],58:[function(v,k,x){var e=v("./lib/ch1d"),t=v("./lib/ch2d"),r=v("./lib/chnd");k.exports=function(l){var n=l.length;if(n===0)return[];if(n===1)return[[0]];var d=l[0].length;return d===0?[]:d===1?e(l):d===2?t(l):r(l,d)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(v,k,x){k.exports=function(e){for(var t=0,r=0,l=1;l<e.length;++l)e[l][0]<e[t][0]&&(t=l),e[l][0]>e[r][0]&&(r=l);return t<r?[[t],[r]]:t>r?[[r],[t]]:[[t]]}},{}],60:[function(v,k,x){k.exports=function(t){var r=e(t),l=r.length;if(l<=2)return[];for(var n=new Array(l),d=r[l-1],u=0;u<l;++u){var o=r[u];n[u]=[d,o],d=o}return n};var e=v("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":246}],61:[function(v,k,x){k.exports=function(r,l){try{return e(r,!0)}catch{var n=t(r);if(n.length<=l)return[];var d=function(o,h){for(var s=o.length,a=new Array(s),p=0;p<h.length;++p)a[p]=o[h[p]];var c=h.length;for(p=0;p<s;++p)h.indexOf(p)<0&&(a[c++]=o[p]);return a}(r,n);return function(o,h){for(var s=o.length,a=h.length,p=0;p<s;++p)for(var c=o[p],i=0;i<c.length;++i){var y=c[i];if(y<a)c[i]=h[y];else{y-=a;for(var f=0;f<a;++f)y>=h[f]&&(y+=1);c[i]=y}}return o}(e(d,!0),n)}};var e=v("incremental-convex-hull"),t=v("affine-hull")},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(v,k,x){k.exports=function(e,t,r,l,n,d){var u=n-1,o=n*n,h=u*u,s=(1+2*n)*h,a=n*h,p=o*(3-2*n),c=o*u;if(e.length){d||(d=new Array(e.length));for(var i=e.length-1;i>=0;--i)d[i]=s*e[i]+a*t[i]+p*r[i]+c*l[i];return d}return s*e+a*t+p*r+c*l},k.exports.derivative=function(e,t,r,l,n,d){var u=6*n*n-6*n,o=3*n*n-4*n+1,h=-6*n*n+6*n,s=3*n*n-2*n;if(e.length){d||(d=new Array(e.length));for(var a=e.length-1;a>=0;--a)d[a]=u*e[a]+o*t[a]+h*r[a]+s*l[a];return d}return u*e+o*t+h*r[a]+s*l}},{}],63:[function(v,k,x){var e=v("incremental-convex-hull"),t=v("uniq");function r(n,d){this.point=n,this.index=d}function l(n,d){for(var u=n.point,o=d.point,h=u.length,s=0;s<h;++s){var a=o[s]-u[s];if(a)return a}return 0}k.exports=function(n,d){var u=n.length;if(u===0)return[];var o=n[0].length;if(o<1)return[];if(o===1)return function(I,P,S){if(I===1)return S?[[-1,0]]:[];var E=P.map(function(Y,J){return[Y[0],J]});E.sort(function(Y,J){return Y[0]-J[0]});for(var z=new Array(I-1),D=1;D<I;++D){var U=E[D-1],H=E[D];z[D-1]=[U[1],H[1]]}return S&&z.push([-1,z[0][1]],[z[I-1][1],-1]),z}(u,n,d);for(var h=new Array(u),s=1,a=0;a<u;++a){for(var p=n[a],c=new Array(o+1),i=0,y=0;y<o;++y){var f=p[y];c[y]=f,i+=f*f}c[o]=i,h[a]=new r(c,a),s=Math.max(i,s)}t(h,l),u=h.length;var w=new Array(u+o+1),b=new Array(u+o+1),_=(o+1)*(o+1)*s,T=new Array(o+1);for(a=0;a<=o;++a)T[a]=0;for(T[o]=_,w[0]=T.slice(),b[0]=-1,a=0;a<=o;++a)(c=T.slice())[a]=1,w[a+1]=c,b[a+1]=-1;for(a=0;a<u;++a){var L=h[a];w[a+o+1]=L.point,b[a+o+1]=L.index}var A=e(w,!1);if(A=d?A.filter(function(I){for(var P=0,S=0;S<=o;++S){var E=b[I[S]];if(E<0&&++P>=2)return!1;I[S]=E}return!0}):A.filter(function(I){for(var P=0;P<=o;++P){var S=b[I[P]];if(S<0)return!1;I[P]=S}return!0}),1&o)for(a=0;a<A.length;++a)c=(L=A[a])[0],L[0]=L[1],L[1]=c;return A}},{"incremental-convex-hull":233,uniq:310}],64:[function(v,k,x){(function(e){(function(){var t=!1;if(typeof Float64Array<"u"){var r=new Float64Array(1),l=new Uint32Array(r.buffer);r[0]=1,t=!0,l[1]===1072693248?(k.exports=function(d){return r[0]=d,[l[0],l[1]]},k.exports.pack=function(d,u){return l[0]=d,l[1]=u,r[0]},k.exports.lo=function(d){return r[0]=d,l[0]},k.exports.hi=function(d){return r[0]=d,l[1]}):l[0]===1072693248?(k.exports=function(d){return r[0]=d,[l[1],l[0]]},k.exports.pack=function(d,u){return l[1]=d,l[0]=u,r[0]},k.exports.lo=function(d){return r[0]=d,l[1]},k.exports.hi=function(d){return r[0]=d,l[0]}):t=!1}if(!t){var n=new e(8);k.exports=function(d){return n.writeDoubleLE(d,0,!0),[n.readUInt32LE(0,!0),n.readUInt32LE(4,!0)]},k.exports.pack=function(d,u){return n.writeUInt32LE(d,0,!0),n.writeUInt32LE(u,4,!0),n.readDoubleLE(0,!0)},k.exports.lo=function(d){return n.writeDoubleLE(d,0,!0),n.readUInt32LE(0,!0)},k.exports.hi=function(d){return n.writeDoubleLE(d,0,!0),n.readUInt32LE(4,!0)}}k.exports.sign=function(d){return k.exports.hi(d)>>>31},k.exports.exponent=function(d){return(k.exports.hi(d)<<1>>>21)-1023},k.exports.fraction=function(d){var u=k.exports.lo(d),o=k.exports.hi(d),h=1048575&o;return 2146435072&o&&(h+=1<<20),[u,h]},k.exports.denormalized=function(d){return!(2146435072&k.exports.hi(d))}}).call(this)}).call(this,v("buffer").Buffer)},{buffer:3}],65:[function(v,k,x){k.exports=function(e,t){switch(t===void 0&&(t=0),typeof e){case"number":if(e>0)return function(r,l){var n,d;for(n=new Array(r),d=0;d<r;++d)n[d]=l;return n}(0|e,t);break;case"object":if(typeof e.length=="number")return function r(l,n,d){var u=0|l[d];if(u<=0)return[];var o,h=new Array(u);if(d===l.length-1)for(o=0;o<u;++o)h[o]=n;else for(o=0;o<u;++o)h[o]=r(l,n,d+1);return h}(e,t,0)}return[]}},{}],66:[function(v,k,x){k.exports=function(t,r){var l=t.length;if(typeof r!="number"){r=0;for(var n=0;n<l;++n){var d=t[n];r=Math.max(r,d[0],d[1])}r=1+(0|r)}r|=0;var u=new Array(r);for(n=0;n<r;++n)u[n]=[];for(n=0;n<l;++n)d=t[n],u[d[0]].push(d[1]),u[d[1]].push(d[0]);for(var o=0;o<r;++o)e(u[o],function(h,s){return h-s});return u};var e=v("uniq")},{uniq:310}],67:[function(v,k,x){k.exports=function(e,t,r){var l=t||0,n=r||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[l*e[12]+e[8],l*e[13]+e[9],l*e[14]+e[10],l*e[15]+e[11]],[n*e[12]-e[8],n*e[13]-e[9],n*e[14]-e[10],n*e[15]-e[11]]]}},{}],68:[function(v,k,x){k.exports=function(u,o,h){switch(arguments.length){case 0:return new l([0],[0],0);case 1:return typeof u=="number"?new l(s=d(u),s,0):new l(u,d(u.length),0);case 2:if(typeof o=="number"){var s=d(u.length);return new l(u,s,+o)}h=0;case 3:if(u.length!==o.length)throw new Error("state and velocity lengths must match");return new l(u,o,h)}};var e=v("cubic-hermite"),t=v("binary-search-bounds");function r(u,o,h){return Math.min(o,Math.max(u,h))}function l(u,o,h){this.dimension=u.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var s=0;s<this.dimension;++s)this.bounds[0][s]=-1/0,this.bounds[1][s]=1/0;this._state=u.slice().reverse(),this._velocity=o.slice().reverse(),this._time=[h],this._scratch=[u.slice(),u.slice(),u.slice(),u.slice(),u.slice()]}var n=l.prototype;function d(u){for(var o=new Array(u),h=0;h<u;++h)o[h]=0;return o}n.flush=function(u){var o=t.gt(this._time,u)-1;o<=0||(this._time.splice(0,o),this._state.splice(0,o*this.dimension),this._velocity.splice(0,o*this.dimension))},n.curve=function(u){var o=this._time,h=o.length,s=t.le(o,u),a=this._scratch[0],p=this._state,c=this._velocity,i=this.dimension,y=this.bounds;if(s<0)for(var f=i-1,w=0;w<i;++w,--f)a[w]=p[f];else if(s>=h-1){f=p.length-1;var b=u-o[h-1];for(w=0;w<i;++w,--f)a[w]=p[f]+b*c[f]}else{f=i*(s+1)-1;var _=o[s],T=o[s+1]-_||1,L=this._scratch[1],A=this._scratch[2],I=this._scratch[3],P=this._scratch[4],S=!0;for(w=0;w<i;++w,--f)L[w]=p[f],I[w]=c[f]*T,A[w]=p[f+i],P[w]=c[f+i]*T,S=S&&L[w]===A[w]&&I[w]===P[w]&&I[w]===0;if(S)for(w=0;w<i;++w)a[w]=L[w];else e(L,I,A,P,(u-_)/T,a)}var E=y[0],z=y[1];for(w=0;w<i;++w)a[w]=r(E[w],z[w],a[w]);return a},n.dcurve=function(u){var o=this._time,h=o.length,s=t.le(o,u),a=this._scratch[0],p=this._state,c=this._velocity,i=this.dimension;if(s>=h-1)for(var y=p.length-1,f=(o[h-1],0);f<i;++f,--y)a[f]=c[y];else{y=i*(s+1)-1;var w=o[s],b=o[s+1]-w||1,_=this._scratch[1],T=this._scratch[2],L=this._scratch[3],A=this._scratch[4],I=!0;for(f=0;f<i;++f,--y)_[f]=p[y],L[f]=c[y]*b,T[f]=p[y+i],A[f]=c[y+i]*b,I=I&&_[f]===T[f]&&L[f]===A[f]&&L[f]===0;if(I)for(f=0;f<i;++f)a[f]=0;else for(e.derivative(_,L,T,A,(u-w)/b,a),f=0;f<i;++f)a[f]/=b}return a},n.lastT=function(){var u=this._time;return u[u.length-1]},n.stable=function(){for(var u=this._velocity,o=u.length,h=this.dimension-1;h>=0;--h)if(u[--o])return!1;return!0},n.jump=function(u){var o=this.lastT(),h=this.dimension;if(!(u<o||arguments.length!==h+1)){var s=this._state,a=this._velocity,p=s.length-this.dimension,c=this.bounds,i=c[0],y=c[1];this._time.push(o,u);for(var f=0;f<2;++f)for(var w=0;w<h;++w)s.push(s[p++]),a.push(0);for(this._time.push(u),w=h;w>0;--w)s.push(r(i[w-1],y[w-1],arguments[w])),a.push(0)}},n.push=function(u){var o=this.lastT(),h=this.dimension;if(!(u<o||arguments.length!==h+1)){var s=this._state,a=this._velocity,p=s.length-this.dimension,c=u-o,i=this.bounds,y=i[0],f=i[1],w=c>1e-6?1/c:0;this._time.push(u);for(var b=h;b>0;--b){var _=r(y[b-1],f[b-1],arguments[b]);s.push(_),a.push((_-s[p++])*w)}}},n.set=function(u){var o=this.dimension;if(!(u<this.lastT()||arguments.length!==o+1)){var h=this._state,s=this._velocity,a=this.bounds,p=a[0],c=a[1];this._time.push(u);for(var i=o;i>0;--i)h.push(r(p[i-1],c[i-1],arguments[i])),s.push(0)}},n.move=function(u){var o=this.lastT(),h=this.dimension;if(!(u<=o||arguments.length!==h+1)){var s=this._state,a=this._velocity,p=s.length-this.dimension,c=this.bounds,i=c[0],y=c[1],f=u-o,w=f>1e-6?1/f:0;this._time.push(u);for(var b=h;b>0;--b){var _=arguments[b];s.push(r(i[b-1],y[b-1],s[p++]+_)),a.push(_*w)}}},n.idle=function(u){var o=this.lastT();if(!(u<o)){var h=this.dimension,s=this._state,a=this._velocity,p=s.length-h,c=this.bounds,i=c[0],y=c[1],f=u-o;this._time.push(u);for(var w=h-1;w>=0;--w)s.push(r(i[w],y[w],s[p]+f*a[p])),a.push(0),p+=1}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(v,k,x){k.exports=function(i){return new n(i||c,null)};function e(i,y,f,w,b,_){this._color=i,this.key=y,this.value=f,this.left=w,this.right=b,this._count=_}function t(i){return new e(i._color,i.key,i.value,i.left,i.right,i._count)}function r(i,y){return new e(i,y.key,y.value,y.left,y.right,y._count)}function l(i){i._count=1+(i.left?i.left._count:0)+(i.right?i.right._count:0)}function n(i,y){this._compare=i,this.root=y}var d=n.prototype;function u(i,y){var f;return y.left&&(f=u(i,y.left))?f:(f=i(y.key,y.value))||(y.right?u(i,y.right):void 0)}function o(i,y,f,w){if(y(i,w.key)<=0){var b;if(w.left&&(b=o(i,y,f,w.left))||(b=f(w.key,w.value)))return b}if(w.right)return o(i,y,f,w.right)}function h(i,y,f,w,b){var _,T=f(i,b.key),L=f(y,b.key);if(T<=0&&(b.left&&(_=h(i,y,f,w,b.left))||L>0&&(_=w(b.key,b.value))))return _;if(L>0&&b.right)return h(i,y,f,w,b.right)}function s(i,y){this.tree=i,this._stack=y}Object.defineProperty(d,"keys",{get:function(){var i=[];return this.forEach(function(y,f){i.push(y)}),i}}),Object.defineProperty(d,"values",{get:function(){var i=[];return this.forEach(function(y,f){i.push(f)}),i}}),Object.defineProperty(d,"length",{get:function(){return this.root?this.root._count:0}}),d.insert=function(i,y){for(var f=this._compare,w=this.root,b=[],_=[];w;){var T=f(i,w.key);b.push(w),_.push(T),w=T<=0?w.left:w.right}b.push(new e(0,i,y,null,null,1));for(var L=b.length-2;L>=0;--L)w=b[L],_[L]<=0?b[L]=new e(w._color,w.key,w.value,b[L+1],w.right,w._count+1):b[L]=new e(w._color,w.key,w.value,w.left,b[L+1],w._count+1);for(L=b.length-1;L>1;--L){var A=b[L-1];if(w=b[L],A._color===1||w._color===1)break;var I=b[L-2];if(I.left===A)if(A.left===w){if(!(P=I.right)||P._color!==0){I._color=0,I.left=A.right,A._color=1,A.right=I,b[L-2]=A,b[L-1]=w,l(I),l(A),L>=3&&((S=b[L-3]).left===I?S.left=A:S.right=A);break}A._color=1,I.right=r(1,P),I._color=0,L-=1}else{if(!(P=I.right)||P._color!==0){A.right=w.left,I._color=0,I.left=w.right,w._color=1,w.left=A,w.right=I,b[L-2]=w,b[L-1]=A,l(I),l(A),l(w),L>=3&&((S=b[L-3]).left===I?S.left=w:S.right=w);break}A._color=1,I.right=r(1,P),I._color=0,L-=1}else if(A.right===w){if(!(P=I.left)||P._color!==0){I._color=0,I.right=A.left,A._color=1,A.left=I,b[L-2]=A,b[L-1]=w,l(I),l(A),L>=3&&((S=b[L-3]).right===I?S.right=A:S.left=A);break}A._color=1,I.left=r(1,P),I._color=0,L-=1}else{var P;if(!(P=I.left)||P._color!==0){var S;A.left=w.right,I._color=0,I.right=w.left,w._color=1,w.right=A,w.left=I,b[L-2]=w,b[L-1]=A,l(I),l(A),l(w),L>=3&&((S=b[L-3]).right===I?S.right=w:S.left=w);break}A._color=1,I.left=r(1,P),I._color=0,L-=1}}return b[0]._color=1,new n(f,b[0])},d.forEach=function(i,y,f){if(this.root)switch(arguments.length){case 1:return u(i,this.root);case 2:return o(y,this._compare,i,this.root);case 3:return this._compare(y,f)>=0?void 0:h(y,f,this._compare,i,this.root)}},Object.defineProperty(d,"begin",{get:function(){for(var i=[],y=this.root;y;)i.push(y),y=y.left;return new s(this,i)}}),Object.defineProperty(d,"end",{get:function(){for(var i=[],y=this.root;y;)i.push(y),y=y.right;return new s(this,i)}}),d.at=function(i){if(i<0)return new s(this,[]);for(var y=this.root,f=[];;){if(f.push(y),y.left){if(i<y.left._count){y=y.left;continue}i-=y.left._count}if(!i)return new s(this,f);if(i-=1,!y.right||i>=y.right._count)break;y=y.right}return new s(this,[])},d.ge=function(i){for(var y=this._compare,f=this.root,w=[],b=0;f;){var _=y(i,f.key);w.push(f),_<=0&&(b=w.length),f=_<=0?f.left:f.right}return w.length=b,new s(this,w)},d.gt=function(i){for(var y=this._compare,f=this.root,w=[],b=0;f;){var _=y(i,f.key);w.push(f),_<0&&(b=w.length),f=_<0?f.left:f.right}return w.length=b,new s(this,w)},d.lt=function(i){for(var y=this._compare,f=this.root,w=[],b=0;f;){var _=y(i,f.key);w.push(f),_>0&&(b=w.length),f=_<=0?f.left:f.right}return w.length=b,new s(this,w)},d.le=function(i){for(var y=this._compare,f=this.root,w=[],b=0;f;){var _=y(i,f.key);w.push(f),_>=0&&(b=w.length),f=_<0?f.left:f.right}return w.length=b,new s(this,w)},d.find=function(i){for(var y=this._compare,f=this.root,w=[];f;){var b=y(i,f.key);if(w.push(f),b===0)return new s(this,w);f=b<=0?f.left:f.right}return new s(this,[])},d.remove=function(i){var y=this.find(i);return y?y.remove():this},d.get=function(i){for(var y=this._compare,f=this.root;f;){var w=y(i,f.key);if(w===0)return f.value;f=w<=0?f.left:f.right}};var a=s.prototype;function p(i,y){i.key=y.key,i.value=y.value,i.left=y.left,i.right=y.right,i._color=y._color,i._count=y._count}function c(i,y){return i<y?-1:i>y?1:0}Object.defineProperty(a,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(a,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),a.clone=function(){return new s(this.tree,this._stack.slice())},a.remove=function(){var i=this._stack;if(i.length===0)return this.tree;var y=new Array(i.length),f=i[i.length-1];y[y.length-1]=new e(f._color,f.key,f.value,f.left,f.right,f._count);for(var w=i.length-2;w>=0;--w)(f=i[w]).left===i[w+1]?y[w]=new e(f._color,f.key,f.value,y[w+1],f.right,f._count):y[w]=new e(f._color,f.key,f.value,f.left,y[w+1],f._count);if((f=y[y.length-1]).left&&f.right){var b=y.length;for(f=f.left;f.right;)y.push(f),f=f.right;var _=y[b-1];for(y.push(new e(f._color,_.key,_.value,f.left,f.right,f._count)),y[b-1].key=f.key,y[b-1].value=f.value,w=y.length-2;w>=b;--w)f=y[w],y[w]=new e(f._color,f.key,f.value,f.left,y[w+1],f._count);y[b-1].left=y[b]}if((f=y[y.length-1])._color===0){var T=y[y.length-2];for(T.left===f?T.left=null:T.right===f&&(T.right=null),y.pop(),w=0;w<y.length;++w)y[w]._count--;return new n(this.tree._compare,y[0])}if(f.left||f.right){for(f.left?p(f,f.left):f.right&&p(f,f.right),f._color=1,w=0;w<y.length-1;++w)y[w]._count--;return new n(this.tree._compare,y[0])}if(y.length===1)return new n(this.tree._compare,null);for(w=0;w<y.length;++w)y[w]._count--;var L=y[y.length-2];return function(A){for(var I,P,S,E,z=A.length-1;z>=0;--z){if(I=A[z],z===0)return void(I._color=1);if((P=A[z-1]).left===I){if((S=P.right).right&&S.right._color===0)return E=(S=P.right=t(S)).right=t(S.right),P.right=S.left,S.left=P,S.right=E,S._color=P._color,I._color=1,P._color=1,E._color=1,l(P),l(S),z>1&&((D=A[z-2]).left===P?D.left=S:D.right=S),void(A[z-1]=S);if(S.left&&S.left._color===0)return E=(S=P.right=t(S)).left=t(S.left),P.right=E.left,S.left=E.right,E.left=P,E.right=S,E._color=P._color,P._color=1,S._color=1,I._color=1,l(P),l(S),l(E),z>1&&((D=A[z-2]).left===P?D.left=E:D.right=E),void(A[z-1]=E);if(S._color===1){if(P._color===0)return P._color=1,void(P.right=r(0,S));P.right=r(0,S);continue}S=t(S),P.right=S.left,S.left=P,S._color=P._color,P._color=0,l(P),l(S),z>1&&((D=A[z-2]).left===P?D.left=S:D.right=S),A[z-1]=S,A[z]=P,z+1<A.length?A[z+1]=I:A.push(I),z+=2}else{if((S=P.left).left&&S.left._color===0)return E=(S=P.left=t(S)).left=t(S.left),P.left=S.right,S.right=P,S.left=E,S._color=P._color,I._color=1,P._color=1,E._color=1,l(P),l(S),z>1&&((D=A[z-2]).right===P?D.right=S:D.left=S),void(A[z-1]=S);if(S.right&&S.right._color===0)return E=(S=P.left=t(S)).right=t(S.right),P.left=E.right,S.right=E.left,E.right=P,E.left=S,E._color=P._color,P._color=1,S._color=1,I._color=1,l(P),l(S),l(E),z>1&&((D=A[z-2]).right===P?D.right=E:D.left=E),void(A[z-1]=E);if(S._color===1){if(P._color===0)return P._color=1,void(P.left=r(0,S));P.left=r(0,S);continue}var D;S=t(S),P.left=S.right,S.right=P,S._color=P._color,P._color=0,l(P),l(S),z>1&&((D=A[z-2]).right===P?D.right=S:D.left=S),A[z-1]=S,A[z]=P,z+1<A.length?A[z+1]=I:A.push(I),z+=2}}}(y),L.left===f?L.left=null:L.right=null,new n(this.tree._compare,y[0])},Object.defineProperty(a,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(a,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(a,"index",{get:function(){var i=0,y=this._stack;if(y.length===0){var f=this.tree.root;return f?f._count:0}y[y.length-1].left&&(i=y[y.length-1].left._count);for(var w=y.length-2;w>=0;--w)y[w+1]===y[w].right&&(++i,y[w].left&&(i+=y[w].left._count));return i},enumerable:!0}),a.next=function(){var i=this._stack;if(i.length!==0){var y=i[i.length-1];if(y.right)for(y=y.right;y;)i.push(y),y=y.left;else for(i.pop();i.length>0&&i[i.length-1].right===y;)y=i[i.length-1],i.pop()}},Object.defineProperty(a,"hasNext",{get:function(){var i=this._stack;if(i.length===0)return!1;if(i[i.length-1].right)return!0;for(var y=i.length-1;y>0;--y)if(i[y-1].left===i[y])return!0;return!1}}),a.update=function(i){var y=this._stack;if(y.length===0)throw new Error("Can't update empty node!");var f=new Array(y.length),w=y[y.length-1];f[f.length-1]=new e(w._color,w.key,i,w.left,w.right,w._count);for(var b=y.length-2;b>=0;--b)(w=y[b]).left===y[b+1]?f[b]=new e(w._color,w.key,w.value,f[b+1],w.right,w._count):f[b]=new e(w._color,w.key,w.value,w.left,f[b+1],w._count);return new n(this.tree._compare,f[0])},a.prev=function(){var i=this._stack;if(i.length!==0){var y=i[i.length-1];if(y.left)for(y=y.left;y;)i.push(y),y=y.right;else for(i.pop();i.length>0&&i[i.length-1].left===y;)y=i[i.length-1],i.pop()}},Object.defineProperty(a,"hasPrev",{get:function(){var i=this._stack;if(i.length===0)return!1;if(i[i.length-1].left)return!0;for(var y=i.length-1;y>0;--y)if(i[y-1].right===i[y])return!0;return!1}})},{}],70:[function(v,k,x){k.exports=function(b,_){var T=new o(b);return T.update(_),T};var e=v("./lib/text.js"),t=v("./lib/lines.js"),r=v("./lib/background.js"),l=v("./lib/cube.js"),n=v("./lib/ticks.js"),d=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function u(b,_){return b[0]=_[0],b[1]=_[1],b[2]=_[2],b}function o(b){this.gl=b,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=r(b)}var h=o.prototype;function s(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}h.update=function(b){function _(Y,J,W){if(W in b){var Z,re=b[W],V=this[W];(Y?Array.isArray(re)&&Array.isArray(re[0]):Array.isArray(re))?this[W]=Z=[J(re[0]),J(re[1]),J(re[2])]:this[W]=Z=[J(re),J(re),J(re)];for(var B=0;B<3;++B)if(Z[B]!==V[B])return!0}return!1}b=b||{};var T,L=_.bind(this,!1,Number),A=_.bind(this,!1,Boolean),I=_.bind(this,!1,String),P=_.bind(this,!0,function(Y){if(Array.isArray(Y)){if(Y.length===3)return[+Y[0],+Y[1],+Y[2],1];if(Y.length===4)return[+Y[0],+Y[1],+Y[2],+Y[3]]}return[0,0,0,1]}),S=!1,E=!1;if("bounds"in b)for(var z=b.bounds,D=0;D<2;++D)for(var U=0;U<3;++U)z[D][U]!==this.bounds[D][U]&&(E=!0),this.bounds[D][U]=z[D][U];if("ticks"in b)for(T=b.ticks,S=!0,this.autoTicks=!1,D=0;D<3;++D)this.tickSpacing[D]=0;else L("tickSpacing")&&(this.autoTicks=!0,E=!0);if(this._firstInit&&("ticks"in b||"tickSpacing"in b||(this.autoTicks=!0),E=!0,S=!0,this._firstInit=!1),E&&this.autoTicks&&(T=n.create(this.bounds,this.tickSpacing),S=!0),S){for(D=0;D<3;++D)T[D].sort(function(Y,J){return Y.x-J.x});n.equal(T,this.ticks)?S=!1:this.ticks=T}A("tickEnable"),I("tickFont")&&(S=!0),L("tickSize"),L("tickAngle"),L("tickPad"),P("tickColor");var H=I("labels");I("labelFont")&&(H=!0),A("labelEnable"),L("labelSize"),L("labelPad"),P("labelColor"),A("lineEnable"),A("lineMirror"),L("lineWidth"),P("lineColor"),A("lineTickEnable"),A("lineTickMirror"),L("lineTickLength"),L("lineTickWidth"),P("lineTickColor"),A("gridEnable"),L("gridWidth"),P("gridColor"),A("zeroEnable"),P("zeroLineColor"),L("zeroLineWidth"),A("backgroundEnable"),P("backgroundColor"),this._text?this._text&&(H||S)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=e(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&S&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=t(this.gl,this.bounds,this.ticks))};var a=[new s,new s,new s];function p(b,_,T,L,A){for(var I=b.primalOffset,P=b.primalMinor,S=b.mirrorOffset,E=b.mirrorMinor,z=L[_],D=0;D<3;++D)if(_!==D){var U=I,H=S,Y=P,J=E;z&1<<D&&(U=S,H=I,Y=E,J=P),U[D]=T[0][D],H[D]=T[1][D],A[D]>0?(Y[D]=-1,J[D]=0):(Y[D]=0,J[D]=1)}}var c=[0,0,0],i={model:d,view:d,projection:d,_ortho:!1};h.isOpaque=function(){return!0},h.isTransparent=function(){return!1},h.drawTransparent=function(b){};var y=[0,0,0],f=[0,0,0],w=[0,0,0];h.draw=function(b){b=b||i;for(var _=this.gl,T=b.model||d,L=b.view||d,A=b.projection||d,I=this.bounds,P=b._ortho||!1,S=l(T,L,A,I,P),E=S.cubeEdges,z=S.axis,D=L[12],U=L[13],H=L[14],Y=L[15],J=(P?2:1)*this.pixelRatio*(A[3]*D+A[7]*U+A[11]*H+A[15]*Y)/_.drawingBufferHeight,W=0;W<3;++W)this.lastCubeProps.cubeEdges[W]=E[W],this.lastCubeProps.axis[W]=z[W];var Z=a;for(W=0;W<3;++W)p(a[W],W,this.bounds,E,z);_=this.gl;var re,V=c;for(W=0;W<3;++W)this.backgroundEnable[W]?V[W]=z[W]:V[W]=0;for(this._background.draw(T,L,A,I,V,this.backgroundColor),this._lines.bind(T,L,A,this),W=0;W<3;++W){var B=[0,0,0];z[W]>0?B[W]=I[1][W]:B[W]=I[0][W];for(var j=0;j<2;++j){var ee=(W+1+j)%3,N=(W+1+(1^j))%3;this.gridEnable[ee]&&this._lines.drawGrid(ee,N,this.bounds,B,this.gridColor[ee],this.gridWidth[ee]*this.pixelRatio)}for(j=0;j<2;++j)ee=(W+1+j)%3,N=(W+1+(1^j))%3,this.zeroEnable[N]&&Math.min(I[0][N],I[1][N])<=0&&Math.max(I[0][N],I[1][N])>=0&&this._lines.drawZero(ee,N,this.bounds,B,this.zeroLineColor[N],this.zeroLineWidth[N]*this.pixelRatio)}for(W=0;W<3;++W){this.lineEnable[W]&&this._lines.drawAxisLine(W,this.bounds,Z[W].primalOffset,this.lineColor[W],this.lineWidth[W]*this.pixelRatio),this.lineMirror[W]&&this._lines.drawAxisLine(W,this.bounds,Z[W].mirrorOffset,this.lineColor[W],this.lineWidth[W]*this.pixelRatio);var $=u(y,Z[W].primalMinor),K=u(f,Z[W].mirrorMinor),te=this.lineTickLength;for(j=0;j<3;++j){var ie=J/T[5*j];$[j]*=te[j]*ie,K[j]*=te[j]*ie}this.lineTickEnable[W]&&this._lines.drawAxisTicks(W,Z[W].primalOffset,$,this.lineTickColor[W],this.lineTickWidth[W]*this.pixelRatio),this.lineTickMirror[W]&&this._lines.drawAxisTicks(W,Z[W].mirrorOffset,K,this.lineTickColor[W],this.lineTickWidth[W]*this.pixelRatio)}this._lines.unbind(),this._text.bind(T,L,A,this.pixelRatio);var le,se;function ve(we){(se=[0,0,0])[we]=1}function fe(we,oe,de){var Te=(we+1)%3,Ee=(we+2)%3,Me=oe[Te],De=oe[Ee],Ie=de[Te],Oe=de[Ee];Me>0&&Oe>0||Me>0&&Oe<0||Me<0&&Oe>0||Me<0&&Oe<0?ve(Te):(De>0&&Ie>0||De>0&&Ie<0||De<0&&Ie>0||De<0&&Ie<0)&&ve(Ee)}for(W=0;W<3;++W){var ye=Z[W].primalMinor,Ae=Z[W].mirrorMinor,pe=u(w,Z[W].primalOffset);for(j=0;j<3;++j)this.lineTickEnable[W]&&(pe[j]+=J*ye[j]*Math.max(this.lineTickLength[j],0)/T[5*j]);var ge=[0,0,0];if(ge[W]=1,this.tickEnable[W]){for(this.tickAngle[W]===-3600?(this.tickAngle[W]=0,this.tickAlign[W]="auto"):this.tickAlign[W]=-1,le=1,(re=[this.tickAlign[W],.5,le])[0]==="auto"?re[0]=0:re[0]=parseInt(""+re[0]),se=[0,0,0],fe(W,ye,Ae),j=0;j<3;++j)pe[j]+=J*ye[j]*this.tickPad[j]/T[5*j];this._text.drawTicks(W,this.tickSize[W],this.tickAngle[W],pe,this.tickColor[W],ge,se,re)}if(this.labelEnable[W]){for(le=0,se=[0,0,0],this.labels[W].length>4&&(ve(W),le=1),(re=[this.labelAlign[W],.5,le])[0]==="auto"?re[0]=0:re[0]=parseInt(""+re[0]),j=0;j<3;++j)pe[j]+=J*ye[j]*this.labelPad[j]/T[5*j];pe[W]+=.5*(I[0][W]+I[1][W]),this._text.drawLabel(W,this.labelSize[W],this.labelAngle[W],pe,this.labelColor[W],[0,0,0],se,re)}}this._text.unbind()},h.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(v,k,x){k.exports=function(d){for(var u=[],o=[],h=0,s=0;s<3;++s)for(var a=(s+1)%3,p=(s+2)%3,c=[0,0,0],i=[0,0,0],y=-1;y<=1;y+=2){o.push(h,h+2,h+1,h+1,h+2,h+3),c[s]=y,i[s]=y;for(var f=-1;f<=1;f+=2){c[a]=f;for(var w=-1;w<=1;w+=2)c[p]=w,u.push(c[0],c[1],c[2],i[0],i[1],i[2]),h+=1}var b=a;a=p,p=b}var _=e(d,new Float32Array(u)),T=e(d,new Uint16Array(o),d.ELEMENT_ARRAY_BUFFER),L=t(d,[{buffer:_,type:d.FLOAT,size:3,offset:0,stride:24},{buffer:_,type:d.FLOAT,size:3,offset:12,stride:24}],T),A=r(d);return A.attributes.position.location=0,A.attributes.normal.location=1,new l(d,_,L,A)};var e=v("gl-buffer"),t=v("gl-vao"),r=v("./shaders").bg;function l(d,u,o,h){this.gl=d,this.buffer=u,this.vao=o,this.shader=h}var n=l.prototype;n.draw=function(d,u,o,h,s,a){for(var p=!1,c=0;c<3;++c)p=p||s[c];if(p){var i=this.gl;i.enable(i.POLYGON_OFFSET_FILL),i.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:d,view:u,projection:o,bounds:h,enable:s,colors:a},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),i.disable(i.POLYGON_OFFSET_FILL)}},n.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(v,k,x){k.exports=function(f,w,b,_,T){t(n,w,f),t(n,b,n);for(var L=0,A=0;A<2;++A){o[2]=_[A][2];for(var I=0;I<2;++I){o[1]=_[I][1];for(var P=0;P<2;++P)o[0]=_[P][0],s(d[L],o,n),L+=1}}var S=-1;for(A=0;A<8;++A){for(var E=d[A][3],z=0;z<3;++z)u[A][z]=d[A][z]/E;T&&(u[A][2]*=-1),E<0&&(S<0||u[A][2]<u[S][2])&&(S=A)}if(S<0){S=0;for(var D=0;D<3;++D){for(var U=(D+2)%3,H=(D+1)%3,Y=-1,J=-1,W=0;W<2;++W){var Z=(V=W<<D)+(W<<U)+(1-W<<H),re=V+(1-W<<U)+(W<<H);l(u[V],u[Z],u[re],h)<0||(W?Y=1:J=1)}if(Y<0||J<0)J>Y&&(S|=1<<D);else{for(W=0;W<2;++W){Z=(V=W<<D)+(W<<U)+(1-W<<H),re=V+(1-W<<U)+(W<<H);var V,B=p([d[V],d[Z],d[re],d[V+(1<<U)+(1<<H)]]);W?Y=B:J=B}J>Y&&(S|=1<<D)}}}var j=7^S,ee=-1;for(A=0;A<8;++A)A!==S&&A!==j&&(ee<0||u[ee][1]>u[A][1])&&(ee=A);var N=-1;for(A=0;A<3;++A)(K=ee^1<<A)!==S&&K!==j&&(N<0&&(N=K),(H=u[K])[0]<u[N][0]&&(N=K));var $=-1;for(A=0;A<3;++A){var K;(K=ee^1<<A)!==S&&K!==j&&K!==N&&($<0&&($=K),(H=u[K])[0]>u[$][0]&&($=K))}var te=c;te[0]=te[1]=te[2]=0,te[e.log2(N^ee)]=ee&N,te[e.log2(ee^$)]=ee&$;var ie=7^$;ie===S||ie===j?(ie=7^N,te[e.log2($^ie)]=ie&$):te[e.log2(N^ie)]=ie&N;var le=i,se=S;for(D=0;D<3;++D)le[D]=se&1<<D?-1:1;return y};var e=v("bit-twiddle"),t=v("gl-mat4/multiply"),r=v("split-polygon"),l=v("robust-orientation"),n=new Array(16),d=new Array(8),u=new Array(8),o=new Array(3),h=[0,0,0];function s(f,w,b){for(var _=0;_<4;++_){f[_]=b[12+_];for(var T=0;T<3;++T)f[_]+=w[T]*b[4*T+_]}}(function(){for(var f=0;f<8;++f)d[f]=[1,1,1,1],u[f]=[1,1,1]})();var a=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function p(f){for(var w=0;w<a.length;++w)if((f=r.positive(f,a[w])).length<3)return 0;var b=f[0],_=b[0]/b[3],T=b[1]/b[3],L=0;for(w=1;w+1<f.length;++w){var A=f[w],I=f[w+1],P=A[0]/A[3]-_,S=A[1]/A[3]-T,E=I[0]/I[3]-_,z=I[1]/I[3]-T;L+=Math.abs(P*z-S*E)}return L}var c=[1,1,1],i=[0,0,0],y={cubeEdges:c,axis:i}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(v,k,x){k.exports=function(c,i,y){var f=[],w=[0,0,0],b=[0,0,0],_=[0,0,0],T=[0,0,0];f.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var L=0;L<3;++L){for(var A=f.length/3|0,I=0;I<y[L].length;++I){var P=+y[L][I].x;f.push(P,0,1,P,1,1,P,0,-1,P,0,-1,P,1,1,P,1,-1)}var S=f.length/3|0;w[L]=A,b[L]=S-A,A=f.length/3|0;for(var E=0;E<y[L].length;++E)P=+y[L][E].x,f.push(P,0,1,P,1,1,P,0,-1,P,0,-1,P,1,1,P,1,-1);S=f.length/3|0,_[L]=A,T[L]=S-A}var z=e(c,new Float32Array(f)),D=t(c,[{buffer:z,type:c.FLOAT,size:3,stride:0,offset:0}]),U=r(c);return U.attributes.position.location=0,new a(c,z,D,U,b,w,T,_)};var e=v("gl-buffer"),t=v("gl-vao"),r=v("./shaders").line,l=[0,0,0],n=[0,0,0],d=[0,0,0],u=[0,0,0],o=[1,1];function h(c){return c[0]=c[1]=c[2]=0,c}function s(c,i){return c[0]=i[0],c[1]=i[1],c[2]=i[2],c}function a(c,i,y,f,w,b,_,T){this.gl=c,this.vertBuffer=i,this.vao=y,this.shader=f,this.tickCount=w,this.tickOffset=b,this.gridCount=_,this.gridOffset=T}var p=a.prototype;p.bind=function(c,i,y){this.shader.bind(),this.shader.uniforms.model=c,this.shader.uniforms.view=i,this.shader.uniforms.projection=y,o[0]=this.gl.drawingBufferWidth,o[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=o,this.vao.bind()},p.unbind=function(){this.vao.unbind()},p.drawAxisLine=function(c,i,y,f,w){var b=h(n);this.shader.uniforms.majorAxis=n,b[c]=i[1][c]-i[0][c],this.shader.uniforms.minorAxis=b;var _,T=s(u,y);T[c]+=i[0][c],this.shader.uniforms.offset=T,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=f,(_=h(d))[(c+2)%3]=1,this.shader.uniforms.screenAxis=_,this.vao.draw(this.gl.TRIANGLES,6),(_=h(d))[(c+1)%3]=1,this.shader.uniforms.screenAxis=_,this.vao.draw(this.gl.TRIANGLES,6)},p.drawAxisTicks=function(c,i,y,f,w){if(this.tickCount[c]){var b=h(l);b[c]=1,this.shader.uniforms.majorAxis=b,this.shader.uniforms.offset=i,this.shader.uniforms.minorAxis=y,this.shader.uniforms.color=f,this.shader.uniforms.lineWidth=w;var _=h(d);_[c]=1,this.shader.uniforms.screenAxis=_,this.vao.draw(this.gl.TRIANGLES,this.tickCount[c],this.tickOffset[c])}},p.drawGrid=function(c,i,y,f,w,b){if(this.gridCount[c]){var _=h(n);_[i]=y[1][i]-y[0][i],this.shader.uniforms.minorAxis=_;var T=s(u,f);T[i]+=y[0][i],this.shader.uniforms.offset=T;var L=h(l);L[c]=1,this.shader.uniforms.majorAxis=L;var A=h(d);A[c]=1,this.shader.uniforms.screenAxis=A,this.shader.uniforms.lineWidth=b,this.shader.uniforms.color=w,this.vao.draw(this.gl.TRIANGLES,this.gridCount[c],this.gridOffset[c])}},p.drawZero=function(c,i,y,f,w,b){var _=h(n);this.shader.uniforms.majorAxis=_,_[c]=y[1][c]-y[0][c],this.shader.uniforms.minorAxis=_;var T=s(u,f);T[c]+=y[0][c],this.shader.uniforms.offset=T;var L=h(d);L[i]=1,this.shader.uniforms.screenAxis=L,this.shader.uniforms.lineWidth=b,this.shader.uniforms.color=w,this.vao.draw(this.gl.TRIANGLES,6)},p.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(v,k,x){var e=v("glslify"),t=v("gl-shader"),r=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),l=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);x.line=function(h){return t(h,r,l,null,[{name:"position",type:"vec3"}])};var n=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),d=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);x.text=function(h){return t(h,n,d,null,[{name:"position",type:"vec3"}])};var u=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),o=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);x.bg=function(h){return t(h,u,o,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(v,k,x){(function(e){(function(){k.exports=function(a,p,c,i,y,f){var w=t(a),b=r(a,[{buffer:w,size:3}]),_=n(a);_.attributes.position.location=0;var T=new o(a,_,w,b);return T.update(p,c,i,y,f),T};var t=v("gl-buffer"),r=v("gl-vao"),l=v("vectorize-text"),n=v("./shaders").text,d=window||e.global||{},u=d.__TEXT_CACHE||{};d.__TEXT_CACHE={};function o(a,p,c,i){this.gl=a,this.shader=p,this.buffer=c,this.vao=i,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var h=o.prototype,s=[0,0];h.bind=function(a,p,c,i){this.vao.bind(),this.shader.bind();var y=this.shader.uniforms;y.model=a,y.view=p,y.projection=c,y.pixelScale=i,s[0]=this.gl.drawingBufferWidth,s[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=s},h.unbind=function(){this.vao.unbind()},h.update=function(a,p,c,i,y){var f=[];function w(S,E,z,D,U,H){var Y=u[z];Y||(Y=u[z]={});var J=Y[E];J||(J=Y[E]=function($,K){try{return l($,K)}catch(te){return console.warn('error vectorizing text:"'+$+'" error:',te),{cells:[],positions:[]}}}(E,{triangles:!0,font:z,textAlign:"center",textBaseline:"middle",lineSpacing:U,styletags:H}));for(var W=(D||12)/12,Z=J.positions,re=J.cells,V=0,B=re.length;V<B;++V)for(var j=re[V],ee=2;ee>=0;--ee){var N=Z[j[ee]];f.push(W*N[0],-W*N[1],S)}}for(var b=[0,0,0],_=[0,0,0],T=[0,0,0],L=[0,0,0],A={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},I=0;I<3;++I){T[I]=f.length/3|0,w(.5*(a[0][I]+a[1][I]),p[I],c[I],12,1.25,A),L[I]=(f.length/3|0)-T[I],b[I]=f.length/3|0;for(var P=0;P<i[I].length;++P)i[I][P].text&&w(i[I][P].x,i[I][P].text,i[I][P].font||y,i[I][P].fontSize||12,1.25,A);_[I]=(f.length/3|0)-b[I]}this.buffer.update(f),this.tickOffset=b,this.tickCount=_,this.labelOffset=T,this.labelCount=L},h.drawTicks=function(a,p,c,i,y,f,w,b){this.tickCount[a]&&(this.shader.uniforms.axis=f,this.shader.uniforms.color=y,this.shader.uniforms.angle=c,this.shader.uniforms.scale=p,this.shader.uniforms.offset=i,this.shader.uniforms.alignDir=w,this.shader.uniforms.alignOpt=b,this.vao.draw(this.gl.TRIANGLES,this.tickCount[a],this.tickOffset[a]))},h.drawLabel=function(a,p,c,i,y,f,w,b){this.labelCount[a]&&(this.shader.uniforms.axis=f,this.shader.uniforms.color=y,this.shader.uniforms.angle=c,this.shader.uniforms.scale=p,this.shader.uniforms.offset=i,this.shader.uniforms.alignDir=w,this.shader.uniforms.alignOpt=b,this.vao.draw(this.gl.TRIANGLES,this.labelCount[a],this.labelOffset[a]))},h.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this)}).call(this,v("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(v,k,x){function e(t,r){var l=t+"",n=l.indexOf("."),d=0;n>=0&&(d=l.length-n-1);var u=Math.pow(10,d),o=Math.round(t*r*u),h=o+"";if(h.indexOf("e")>=0)return h;var s=o/u,a=o%u;o<0?(s=0|-Math.ceil(s),a=0|-a):(s=0|Math.floor(s),a|=0);var p=""+s;if(o<0&&(p="-"+p),d){for(var c=""+a;c.length<d;)c="0"+c;return p+"."+c}return p}x.create=function(t,r){for(var l=[],n=0;n<3;++n){for(var d=[],u=(t[0][n],t[1][n],0);u*r[n]<=t[1][n];++u)d.push({x:u*r[n],text:e(r[n],u)});for(u=-1;u*r[n]>=t[0][n];--u)d.push({x:u*r[n],text:e(r[n],u)});l.push(d)}return l},x.equal=function(t,r){for(var l=0;l<3;++l){if(t[l].length!==r[l].length)return!1;for(var n=0;n<t[l].length;++n){var d=t[l][n],u=r[l][n];if(d.x!==u.x||d.text!==u.text||d.font!==u.font||d.fontColor!==u.fontColor||d.fontSize!==u.fontSize||d.dx!==u.dx||d.dy!==u.dy)return!1}}return!0}},{}],77:[function(v,k,x){k.exports=function(y,f,w,b,_){var T=f.model||u,L=f.view||u,A=f.projection||u,I=f._ortho||!1,P=y.bounds,S=(_=_||r(T,L,A,P,I)).axis;l(o,L,T),l(o,A,o);for(var E=c,z=0;z<3;++z)E[z].lo=1/0,E[z].hi=-1/0,E[z].pixelsPerDataUnit=1/0;var D=e(n(o,o));n(o,o);for(var U=0;U<3;++U){var H=(U+1)%3,Y=(U+2)%3,J=i;e:for(z=0;z<2;++z){var W=[];if(S[U]<0!=!!z){J[U]=P[z][U];for(var Z=0;Z<2;++Z){J[H]=P[Z^z][H];for(var re=0;re<2;++re)J[Y]=P[re^Z^z][Y],W.push(J.slice())}var V=I?5:4;for(Z=V;Z===V;++Z){if(W.length===0)continue e;W=t.positive(W,D[Z])}for(Z=0;Z<W.length;++Z){Y=W[Z];var B=p(i,o,Y,w,b);for(re=0;re<3;++re)E[re].lo=Math.min(E[re].lo,Y[re]),E[re].hi=Math.max(E[re].hi,Y[re]),re!==U&&(E[re].pixelsPerDataUnit=Math.min(E[re].pixelsPerDataUnit,Math.abs(B[re])))}}}}return E};var e=v("extract-frustum-planes"),t=v("split-polygon"),r=v("./lib/cube.js"),l=v("gl-mat4/multiply"),n=v("gl-mat4/transpose"),d=v("gl-vec4/transformMat4"),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),o=new Float32Array(16);function h(y,f,w){this.lo=y,this.hi=f,this.pixelsPerDataUnit=w}var s=[0,0,0,1],a=[0,0,0,1];function p(y,f,w,b,_){for(var T=0;T<3;++T){for(var L=s,A=a,I=0;I<3;++I)A[I]=L[I]=w[I];A[3]=L[3]=1,A[T]+=1,d(A,A,f),A[3]<0&&(y[T]=1/0),L[T]-=1,d(L,L,f),L[3]<0&&(y[T]=1/0);var P=(L[0]/L[3]-A[0]/A[3])*b,S=(L[1]/L[3]-A[1]/A[3])*_;y[T]=.25*Math.sqrt(P*P+S*S)}return y}var c=[new h(1/0,-1/0,1/0),new h(1/0,-1/0,1/0),new h(1/0,-1/0,1/0)],i=[0,0,0]},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(v,k,x){var e=v("typedarray-pool"),t=v("ndarray-ops"),r=v("ndarray"),l=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function n(h,s,a,p,c){this.gl=h,this.type=s,this.handle=a,this.length=p,this.usage=c}var d=n.prototype;function u(h,s,a,p,c,i){var y=c.length*c.BYTES_PER_ELEMENT;if(i<0)return h.bufferData(s,c,p),y;if(y+i>a)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return h.bufferSubData(s,i,c),a}function o(h,s){for(var a=e.malloc(h.length,s),p=h.length,c=0;c<p;++c)a[c]=h[c];return a}d.bind=function(){this.gl.bindBuffer(this.type,this.handle)},d.unbind=function(){this.gl.bindBuffer(this.type,null)},d.dispose=function(){this.gl.deleteBuffer(this.handle)},d.update=function(h,s){if(typeof s!="number"&&(s=-1),this.bind(),typeof h=="object"&&h.shape!==void 0){var a=h.dtype;if(l.indexOf(a)<0&&(a="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(a=gl.getExtension("OES_element_index_uint")&&a!=="uint16"?"uint32":"uint16"),a===h.dtype&&function(y,f){for(var w=1,b=f.length-1;b>=0;--b){if(f[b]!==w)return!1;w*=y[b]}return!0}(h.shape,h.stride))h.offset===0&&h.data.length===h.shape[0]?this.length=u(this.gl,this.type,this.length,this.usage,h.data,s):this.length=u(this.gl,this.type,this.length,this.usage,h.data.subarray(h.offset,h.shape[0]),s);else{var p=e.malloc(h.size,a),c=r(p,h.shape);t.assign(c,h),this.length=u(this.gl,this.type,this.length,this.usage,s<0?p:p.subarray(0,h.size),s),e.free(p)}}else if(Array.isArray(h)){var i;i=this.type===this.gl.ELEMENT_ARRAY_BUFFER?o(h,"uint16"):o(h,"float32"),this.length=u(this.gl,this.type,this.length,this.usage,s<0?i:i.subarray(0,h.length),s),e.free(i)}else if(typeof h=="object"&&typeof h.length=="number")this.length=u(this.gl,this.type,this.length,this.usage,h,s);else{if(typeof h!="number"&&h!==void 0)throw new Error("gl-buffer: Invalid data type");if(s>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(h|=0)<=0&&(h=1),this.gl.bufferData(this.type,0|h,this.usage),this.length=h}},k.exports=function(h,s,a,p){if(a=a||h.ARRAY_BUFFER,p=p||h.DYNAMIC_DRAW,a!==h.ARRAY_BUFFER&&a!==h.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(p!==h.DYNAMIC_DRAW&&p!==h.STATIC_DRAW&&p!==h.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var c=h.createBuffer(),i=new n(h,a,c,0,p);return i.update(s),i}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(v,k,x){var e=v("gl-vec3");k.exports=function(r,l){var n=r.positions,d=r.vectors,u={positions:[],vertexIntensity:[],vertexIntensityBounds:r.vertexIntensityBounds,vectors:[],cells:[],coneOffset:r.coneOffset,colormap:r.colormap};if(r.positions.length===0)return l&&(l[0]=[0,0,0],l[1]=[0,0,0]),u;for(var o=0,h=1/0,s=-1/0,a=1/0,p=-1/0,c=1/0,i=-1/0,y=null,f=null,w=[],b=1/0,_=!1,T=0;T<n.length;T++){var L=n[T];h=Math.min(L[0],h),s=Math.max(L[0],s),a=Math.min(L[1],a),p=Math.max(L[1],p),c=Math.min(L[2],c),i=Math.max(L[2],i);var A=d[T];if(e.length(A)>o&&(o=e.length(A)),T){var I=2*e.distance(y,L)/(e.length(f)+e.length(A));I?(b=Math.min(b,I),_=!1):_=!0}_||(y=L,f=A),w.push(A)}var P=[h,a,c],S=[s,p,i];l&&(l[0]=P,l[1]=S),o===0&&(o=1);var E=1/o;isFinite(b)||(b=1),u.vectorScale=b;var z=r.coneSize||.5;r.absoluteConeSize&&(z=r.absoluteConeSize*E),u.coneScale=z,T=0;for(var D=0;T<n.length;T++)for(var U=(L=n[T])[0],H=L[1],Y=L[2],J=w[T],W=e.length(J)*E,Z=0;Z<8;Z++){u.positions.push([U,H,Y,D++]),u.positions.push([U,H,Y,D++]),u.positions.push([U,H,Y,D++]),u.positions.push([U,H,Y,D++]),u.positions.push([U,H,Y,D++]),u.positions.push([U,H,Y,D++]),u.vectors.push(J),u.vectors.push(J),u.vectors.push(J),u.vectors.push(J),u.vectors.push(J),u.vectors.push(J),u.vertexIntensity.push(W,W,W),u.vertexIntensity.push(W,W,W);var re=u.positions.length;u.cells.push([re-6,re-5,re-4],[re-3,re-2,re-1])}return u};var t=v("./lib/shaders");k.exports.createMesh=v("./create_mesh"),k.exports.createConeMesh=function(r,l){return k.exports.createMesh(r,l,{shaders:t,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(v,k,x){var e=v("gl-shader"),t=v("gl-buffer"),r=v("gl-vao"),l=v("gl-texture2d"),n=v("gl-mat4/multiply"),d=v("gl-mat4/invert"),u=v("ndarray"),o=v("colormap"),h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(i,y,f,w,b,_,T,L,A,I,P){this.gl=i,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=y,this.dirty=!0,this.triShader=f,this.pickShader=w,this.trianglePositions=b,this.triangleVectors=_,this.triangleColors=L,this.triangleUVs=A,this.triangleIds=T,this.triangleVAO=I,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=P,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=h,this._view=h,this._projection=h,this._resolution=[1,1]}var a=s.prototype;function p(i,y){var f=e(i,y.meshShader.vertex,y.meshShader.fragment,null,y.meshShader.attributes);return f.attributes.position.location=0,f.attributes.color.location=2,f.attributes.uv.location=3,f.attributes.vector.location=4,f}function c(i,y){var f=e(i,y.pickShader.vertex,y.pickShader.fragment,null,y.pickShader.attributes);return f.attributes.position.location=0,f.attributes.id.location=1,f.attributes.vector.location=4,f}a.isOpaque=function(){return this.opacity>=1},a.isTransparent=function(){return this.opacity<1},a.pickSlots=1,a.setPickBase=function(i){this.pickId=i},a.update=function(i){i=i||{};var y=this.gl;this.dirty=!0,"lightPosition"in i&&(this.lightPosition=i.lightPosition),"opacity"in i&&(this.opacity=i.opacity),"ambient"in i&&(this.ambientLight=i.ambient),"diffuse"in i&&(this.diffuseLight=i.diffuse),"specular"in i&&(this.specularLight=i.specular),"roughness"in i&&(this.roughness=i.roughness),"fresnel"in i&&(this.fresnel=i.fresnel),i.tubeScale!==void 0&&(this.tubeScale=i.tubeScale),i.vectorScale!==void 0&&(this.vectorScale=i.vectorScale),i.coneScale!==void 0&&(this.coneScale=i.coneScale),i.coneOffset!==void 0&&(this.coneOffset=i.coneOffset),i.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=y.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=y.LINEAR,this.texture.setPixels(function(ee){for(var N=o({colormap:ee,nshades:256,format:"rgba"}),$=new Uint8Array(1024),K=0;K<256;++K){for(var te=N[K],ie=0;ie<3;++ie)$[4*K+ie]=te[ie];$[4*K+3]=255*te[3]}return u($,[256,256,4],[4,0,1])}(i.colormap)),this.texture.generateMipmap());var f=i.cells,w=i.positions,b=i.vectors;if(w&&f&&b){var _=[],T=[],L=[],A=[],I=[];this.cells=f,this.positions=w,this.vectors=b;var P=i.meshColor||[1,1,1,1],S=i.vertexIntensity,E=1/0,z=-1/0;if(S)if(i.vertexIntensityBounds)E=+i.vertexIntensityBounds[0],z=+i.vertexIntensityBounds[1];else for(var D=0;D<S.length;++D){var U=S[D];E=Math.min(E,U),z=Math.max(z,U)}else for(D=0;D<w.length;++D)U=w[D][2],E=Math.min(E,U),z=Math.max(z,U);for(this.intensity=S||function(ee){for(var N=ee.length,$=new Array(N),K=0;K<N;++K)$[K]=ee[K][2];return $}(w),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],D=0;D<w.length;++D)for(var H=w[D],Y=0;Y<3;++Y)!isNaN(H[Y])&&isFinite(H[Y])&&(this.bounds[0][Y]=Math.min(this.bounds[0][Y],H[Y]),this.bounds[1][Y]=Math.max(this.bounds[1][Y],H[Y]));var J=0;e:for(D=0;D<f.length;++D){var W=f[D];switch(W.length){case 3:for(Y=0;Y<3;++Y){H=w[re=W[Y]];for(var Z=0;Z<3;++Z)if(isNaN(H[Z])||!isFinite(H[Z]))continue e}for(Y=0;Y<3;++Y){var re;H=w[re=W[2-Y]],_.push(H[0],H[1],H[2],H[3]);var V=b[re];T.push(V[0],V[1],V[2],V[3]||0);var B,j=P;j.length===3?L.push(j[0],j[1],j[2],1):L.push(j[0],j[1],j[2],j[3]),B=S?[(S[re]-E)/(z-E),0]:[(H[2]-E)/(z-E),0],A.push(B[0],B[1]),I.push(D)}J+=1}}this.triangleCount=J,this.trianglePositions.update(_),this.triangleVectors.update(T),this.triangleColors.update(L),this.triangleUVs.update(A),this.triangleIds.update(new Uint32Array(I))}},a.drawTransparent=a.draw=function(i){i=i||{};for(var y=this.gl,f=i.model||h,w=i.view||h,b=i.projection||h,_=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],T=0;T<3;++T)_[0][T]=Math.max(_[0][T],this.clipBounds[0][T]),_[1][T]=Math.min(_[1][T],this.clipBounds[1][T]);var L={model:f,view:w,projection:b,inverseModel:h.slice(),clipBounds:_,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};L.inverseModel=d(L.inverseModel,L.model),y.disable(y.CULL_FACE),this.texture.bind(0);var A=new Array(16);for(n(A,L.view,L.model),n(A,L.projection,A),d(A,A),T=0;T<3;++T)L.eyePosition[T]=A[12+T]/A[15];var I=A[15];for(T=0;T<3;++T)I+=this.lightPosition[T]*A[4*T+3];for(T=0;T<3;++T){for(var P=A[12+T],S=0;S<3;++S)P+=A[4*S+T]*this.lightPosition[S];L.lightPosition[T]=P/I}if(this.triangleCount>0){var E=this.triShader;E.bind(),E.uniforms=L,this.triangleVAO.bind(),y.drawArrays(y.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},a.drawPick=function(i){i=i||{};for(var y=this.gl,f=i.model||h,w=i.view||h,b=i.projection||h,_=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],T=0;T<3;++T)_[0][T]=Math.max(_[0][T],this.clipBounds[0][T]),_[1][T]=Math.min(_[1][T],this.clipBounds[1][T]);this._model=[].slice.call(f),this._view=[].slice.call(w),this._projection=[].slice.call(b),this._resolution=[y.drawingBufferWidth,y.drawingBufferHeight];var L={model:f,view:w,projection:b,clipBounds:_,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},A=this.pickShader;A.bind(),A.uniforms=L,this.triangleCount>0&&(this.triangleVAO.bind(),y.drawArrays(y.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},a.pick=function(i){if(!i||i.id!==this.pickId)return null;var y=i.value[0]+256*i.value[1]+65536*i.value[2],f=this.cells[y],w=this.positions[f[1]].slice(0,3),b={position:w,dataCoordinate:w,index:Math.floor(f[1]/48)};return this.traceType==="cone"?b.index=Math.floor(f[1]/48):this.traceType==="streamtube"&&(b.intensity=this.intensity[f[1]],b.velocity=this.vectors[f[1]].slice(0,3),b.divergence=this.vectors[f[1]][3],b.index=y),b},a.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},k.exports=function(i,y,f){var w=f.shaders;arguments.length===1&&(i=(y=i).gl);var b=p(i,w),_=c(i,w),T=l(i,u(new Uint8Array([255,255,255,255]),[1,1,4]));T.generateMipmap(),T.minFilter=i.LINEAR_MIPMAP_LINEAR,T.magFilter=i.LINEAR;var L=t(i),A=t(i),I=t(i),P=t(i),S=t(i),E=r(i,[{buffer:L,type:i.FLOAT,size:4},{buffer:S,type:i.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:I,type:i.FLOAT,size:4},{buffer:P,type:i.FLOAT,size:2},{buffer:A,type:i.FLOAT,size:4}]),z=new s(i,T,b,_,L,A,S,I,P,E,f.traceType||"cone");return z.update(y),z}},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(v,k,x){var e=v("glslify"),t=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),r=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),l=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),n=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);x.meshShader={vertex:t,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},x.pickShader={vertex:l,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(v,k,x){k.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(v,k,x){var e=v("./1.0/numbers");k.exports=function(t){return e[t]}},{"./1.0/numbers":82}],84:[function(v,k,x){k.exports=function(s){var a=s.gl,p=e(a),c=t(a,[{buffer:p,type:a.FLOAT,size:3,offset:0,stride:40},{buffer:p,type:a.FLOAT,size:4,offset:12,stride:40},{buffer:p,type:a.FLOAT,size:3,offset:28,stride:40}]),i=r(a);i.attributes.position.location=0,i.attributes.color.location=1,i.attributes.offset.location=2;var y=new n(a,p,c,i);return y.update(s),y};var e=v("gl-buffer"),t=v("gl-vao"),r=v("./shaders/index"),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function n(s,a,p,c){this.gl=s,this.shader=c,this.buffer=a,this.vao=p,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var d=n.prototype;function u(s,a){for(var p=0;p<3;++p)s[0][p]=Math.min(s[0][p],a[p]),s[1][p]=Math.max(s[1][p],a[p])}d.isOpaque=function(){return!this.hasAlpha},d.isTransparent=function(){return this.hasAlpha},d.drawTransparent=d.draw=function(s){var a=this.gl,p=this.shader.uniforms;this.shader.bind();var c=p.view=s.view||l,i=p.projection=s.projection||l;p.model=s.model||l,p.clipBounds=this.clipBounds,p.opacity=this.opacity;var y=c[12],f=c[13],w=c[14],b=c[15],_=(s._ortho?2:1)*this.pixelRatio*(i[3]*y+i[7]*f+i[11]*w+i[15]*b)/a.drawingBufferHeight;this.vao.bind();for(var T=0;T<3;++T)a.lineWidth(this.lineWidth[T]*this.pixelRatio),p.capSize=this.capSize[T]*_,this.lineCount[T]&&a.drawArrays(a.LINES,this.lineOffset[T],this.lineCount[T]);this.vao.unbind()};var o=function(){for(var s=new Array(3),a=0;a<3;++a){for(var p=[],c=1;c<=2;++c)for(var i=-1;i<=1;i+=2){var y=[0,0,0];y[(c+a)%3]=i,p.push(y)}s[a]=p}return s}();function h(s,a,p,c){for(var i=o[c],y=0;y<i.length;++y){var f=i[y];s.push(a[0],a[1],a[2],p[0],p[1],p[2],p[3],f[0],f[1],f[2])}return i.length}d.update=function(s){"lineWidth"in(s=s||{})&&(this.lineWidth=s.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in s&&(this.capSize=s.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in s&&(this.opacity=+s.opacity,this.opacity<1&&(this.hasAlpha=!0));var a=s.color||[[0,0,0],[0,0,0],[0,0,0]],p=s.position,c=s.error;if(Array.isArray(a[0])||(a=[a,a,a]),p&&c){var i=[],y=p.length,f=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var w=0;w<3;++w){this.lineOffset[w]=f;e:for(var b=0;b<y;++b){for(var _=p[b],T=0;T<3;++T)if(isNaN(_[T])||!isFinite(_[T]))continue e;var L=c[b],A=a[w];if(Array.isArray(A[0])&&(A=a[b]),A.length===3?A=[A[0],A[1],A[2],1]:A.length===4&&(A=[A[0],A[1],A[2],A[3]],!this.hasAlpha&&A[3]<1&&(this.hasAlpha=!0)),!isNaN(L[0][w])&&!isNaN(L[1][w])){var I;L[0][w]<0&&((I=_.slice())[w]+=L[0][w],i.push(_[0],_[1],_[2],A[0],A[1],A[2],A[3],0,0,0,I[0],I[1],I[2],A[0],A[1],A[2],A[3],0,0,0),u(this.bounds,I),f+=2+h(i,I,A,w)),L[1][w]>0&&((I=_.slice())[w]+=L[1][w],i.push(_[0],_[1],_[2],A[0],A[1],A[2],A[3],0,0,0,I[0],I[1],I[2],A[0],A[1],A[2],A[3],0,0,0),u(this.bounds,I),f+=2+h(i,I,A,w))}}this.lineCount[w]=f-this.lineOffset[w]}this.buffer.update(i)}},d.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(v,k,x){var e=v("glslify"),t=v("gl-shader"),r=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),l=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);k.exports=function(n){return t(n,r,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(v,k,x){var e=v("gl-texture2d");k.exports=function(y,f,w,b){t||(t=y.FRAMEBUFFER_UNSUPPORTED,r=y.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,l=y.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,n=y.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var _=y.getExtension("WEBGL_draw_buffers");if(!d&&_&&function(E,z){var D=E.getParameter(z.MAX_COLOR_ATTACHMENTS_WEBGL);d=new Array(D+1);for(var U=0;U<=D;++U){for(var H=new Array(D),Y=0;Y<U;++Y)H[Y]=E.COLOR_ATTACHMENT0+Y;for(Y=U;Y<D;++Y)H[Y]=E.NONE;d[U]=H}}(y,_),Array.isArray(f)&&(b=w,w=0|f[1],f=0|f[0]),typeof f!="number")throw new Error("gl-fbo: Missing shape parameter");var T=y.getParameter(y.MAX_RENDERBUFFER_SIZE);if(f<0||f>T||w<0||w>T)throw new Error("gl-fbo: Parameters are too large for FBO");var L=1;if("color"in(b=b||{})){if((L=Math.max(0|b.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(L>1){if(!_)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(L>y.getParameter(_.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+L+" draw buffers")}}var A=y.UNSIGNED_BYTE,I=y.getExtension("OES_texture_float");if(b.float&&L>0){if(!I)throw new Error("gl-fbo: Context does not support floating point textures");A=y.FLOAT}else b.preferFloat&&L>0&&I&&(A=y.FLOAT);var P=!0;"depth"in b&&(P=!!b.depth);var S=!1;return"stencil"in b&&(S=!!b.stencil),new p(y,f,w,A,L,P,S,_)};var t,r,l,n,d=null;function u(y){return[y.getParameter(y.FRAMEBUFFER_BINDING),y.getParameter(y.RENDERBUFFER_BINDING),y.getParameter(y.TEXTURE_BINDING_2D)]}function o(y,f){y.bindFramebuffer(y.FRAMEBUFFER,f[0]),y.bindRenderbuffer(y.RENDERBUFFER,f[1]),y.bindTexture(y.TEXTURE_2D,f[2])}function h(y){switch(y){case t:throw new Error("gl-fbo: Framebuffer unsupported");case r:throw new Error("gl-fbo: Framebuffer incomplete attachment");case l:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case n:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function s(y,f,w,b,_,T){if(!b)return null;var L=e(y,f,w,_,b);return L.magFilter=y.NEAREST,L.minFilter=y.NEAREST,L.mipSamples=1,L.bind(),y.framebufferTexture2D(y.FRAMEBUFFER,T,y.TEXTURE_2D,L.handle,0),L}function a(y,f,w,b,_){var T=y.createRenderbuffer();return y.bindRenderbuffer(y.RENDERBUFFER,T),y.renderbufferStorage(y.RENDERBUFFER,b,f,w),y.framebufferRenderbuffer(y.FRAMEBUFFER,_,y.RENDERBUFFER,T),T}function p(y,f,w,b,_,T,L,A){this.gl=y,this._shape=[0|f,0|w],this._destroyed=!1,this._ext=A,this.color=new Array(_);for(var I=0;I<_;++I)this.color[I]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=b,this._useDepth=T,this._useStencil=L;var P=this,S=[0|f,0|w];Object.defineProperties(S,{0:{get:function(){return P._shape[0]},set:function(E){return P.width=E}},1:{get:function(){return P._shape[1]},set:function(E){return P.height=E}}}),this._shapeVector=S,function(E){var z=u(E.gl),D=E.gl,U=E.handle=D.createFramebuffer(),H=E._shape[0],Y=E._shape[1],J=E.color.length,W=E._ext,Z=E._useStencil,re=E._useDepth,V=E._colorType;D.bindFramebuffer(D.FRAMEBUFFER,U);for(var B=0;B<J;++B)E.color[B]=s(D,H,Y,V,D.RGBA,D.COLOR_ATTACHMENT0+B);J===0?(E._color_rb=a(D,H,Y,D.RGBA4,D.COLOR_ATTACHMENT0),W&&W.drawBuffersWEBGL(d[0])):J>1&&W.drawBuffersWEBGL(d[J]);var j=D.getExtension("WEBGL_depth_texture");j?Z?E.depth=s(D,H,Y,j.UNSIGNED_INT_24_8_WEBGL,D.DEPTH_STENCIL,D.DEPTH_STENCIL_ATTACHMENT):re&&(E.depth=s(D,H,Y,D.UNSIGNED_SHORT,D.DEPTH_COMPONENT,D.DEPTH_ATTACHMENT)):re&&Z?E._depth_rb=a(D,H,Y,D.DEPTH_STENCIL,D.DEPTH_STENCIL_ATTACHMENT):re?E._depth_rb=a(D,H,Y,D.DEPTH_COMPONENT16,D.DEPTH_ATTACHMENT):Z&&(E._depth_rb=a(D,H,Y,D.STENCIL_INDEX,D.STENCIL_ATTACHMENT));var ee=D.checkFramebufferStatus(D.FRAMEBUFFER);if(ee!==D.FRAMEBUFFER_COMPLETE){for(E._destroyed=!0,D.bindFramebuffer(D.FRAMEBUFFER,null),D.deleteFramebuffer(E.handle),E.handle=null,E.depth&&(E.depth.dispose(),E.depth=null),E._depth_rb&&(D.deleteRenderbuffer(E._depth_rb),E._depth_rb=null),B=0;B<E.color.length;++B)E.color[B].dispose(),E.color[B]=null;E._color_rb&&(D.deleteRenderbuffer(E._color_rb),E._color_rb=null),o(D,z),h(ee)}o(D,z)}(this)}var c=p.prototype;function i(y,f,w){if(y._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(y._shape[0]!==f||y._shape[1]!==w){var b=y.gl,_=b.getParameter(b.MAX_RENDERBUFFER_SIZE);if(f<0||f>_||w<0||w>_)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");y._shape[0]=f,y._shape[1]=w;for(var T=u(b),L=0;L<y.color.length;++L)y.color[L].shape=y._shape;y._color_rb&&(b.bindRenderbuffer(b.RENDERBUFFER,y._color_rb),b.renderbufferStorage(b.RENDERBUFFER,b.RGBA4,y._shape[0],y._shape[1])),y.depth&&(y.depth.shape=y._shape),y._depth_rb&&(b.bindRenderbuffer(b.RENDERBUFFER,y._depth_rb),y._useDepth&&y._useStencil?b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_STENCIL,y._shape[0],y._shape[1]):y._useDepth?b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,y._shape[0],y._shape[1]):y._useStencil&&b.renderbufferStorage(b.RENDERBUFFER,b.STENCIL_INDEX,y._shape[0],y._shape[1])),b.bindFramebuffer(b.FRAMEBUFFER,y.handle);var A=b.checkFramebufferStatus(b.FRAMEBUFFER);A!==b.FRAMEBUFFER_COMPLETE&&(y.dispose(),o(b,T),h(A)),o(b,T)}}Object.defineProperties(c,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(y){if(Array.isArray(y)||(y=[0|y,0|y]),y.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var f=0|y[0],w=0|y[1];return i(this,f,w),[f,w]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(y){return i(this,y|=0,this._shape[1]),y},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(y){return y|=0,i(this,this._shape[0],y),y},enumerable:!1}}),c.bind=function(){if(!this._destroyed){var y=this.gl;y.bindFramebuffer(y.FRAMEBUFFER,this.handle),y.viewport(0,0,this._shape[0],this._shape[1])}},c.dispose=function(){if(!this._destroyed){this._destroyed=!0;var y=this.gl;y.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(y.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var f=0;f<this.color.length;++f)this.color[f].dispose(),this.color[f]=null;this._color_rb&&(y.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":146}],87:[function(v,k,x){var e=v("sprintf-js").sprintf,t=v("gl-constants/lookup"),r=v("glsl-shader-name"),l=v("add-line-numbers");k.exports=function(n,d,u){var o=r(d)||"of unknown name (see npm glsl-shader-name)",h="unknown type";u!==void 0&&(h=u===t.FRAGMENT_SHADER?"fragment":"vertex");for(var s=e(`Error compiling %s shader %s:
`,h,o),a=e("%s%s",s,n),p=n.split(`
`),c={},i=0;i<p.length;i++){var y=p[i];if(y!==""&&y!=="\0"){var f=parseInt(y.split(":")[2]);if(isNaN(f))throw new Error(e("Could not parse error: %s",y));c[f]=y}}var w=l(d).split(`
`);for(i=0;i<w.length;i++)if(c[i+3]||c[i+2]||c[i+1]){var b=w[i];if(s+=b+`
`,c[i+1]){var _=c[i+1];_=_.substr(_.split(":",3).join(":").length+1).trim(),s+=e(`^^^ %s

`,_)}}return{long:s.trim(),short:a.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(v,k,x){k.exports=function(a,p){var c=a.gl,i=l(c,d.vertex,d.fragment),y=l(c,d.pickVertex,d.pickFragment),f=n(c),w=n(c),b=n(c),_=n(c),T=new u(a,i,y,f,w,b,_);return T.update(p),a.addObject(T),T};var e=v("binary-search-bounds"),t=v("iota-array"),r=v("typedarray-pool"),l=v("gl-shader"),n=v("gl-buffer"),d=v("./lib/shaders");function u(a,p,c,i,y,f,w){this.plot=a,this.shader=p,this.pickShader=c,this.positionBuffer=i,this.weightBuffer=y,this.colorBuffer=f,this.idBuffer=w,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var o,h=u.prototype,s=[0,0,1,0,0,1,1,0,1,1,0,1];h.draw=(o=[1,0,0,0,1,0,0,0,1],function(){var a=this.plot,p=this.shader,c=this.bounds,i=this.numVertices;if(!(i<=0)){var y=a.gl,f=a.dataBox,w=c[2]-c[0],b=c[3]-c[1],_=f[2]-f[0],T=f[3]-f[1];o[0]=2*w/_,o[4]=2*b/T,o[6]=2*(c[0]-f[0])/_-1,o[7]=2*(c[1]-f[1])/T-1,p.bind();var L=p.uniforms;L.viewTransform=o,L.shape=this.shape;var A=p.attributes;this.positionBuffer.bind(),A.position.pointer(),this.weightBuffer.bind(),A.weight.pointer(y.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),A.color.pointer(y.UNSIGNED_BYTE,!0),y.drawArrays(y.TRIANGLES,0,i)}}),h.drawPick=function(){var a=[1,0,0,0,1,0,0,0,1],p=[0,0,0,0];return function(c){var i=this.plot,y=this.pickShader,f=this.bounds,w=this.numVertices;if(!(w<=0)){var b=i.gl,_=i.dataBox,T=f[2]-f[0],L=f[3]-f[1],A=_[2]-_[0],I=_[3]-_[1];a[0]=2*T/A,a[4]=2*L/I,a[6]=2*(f[0]-_[0])/A-1,a[7]=2*(f[1]-_[1])/I-1;for(var P=0;P<4;++P)p[P]=c>>8*P&255;this.pickOffset=c,y.bind();var S=y.uniforms;S.viewTransform=a,S.pickOffset=p,S.shape=this.shape;var E=y.attributes;return this.positionBuffer.bind(),E.position.pointer(),this.weightBuffer.bind(),E.weight.pointer(b.UNSIGNED_BYTE,!1),this.idBuffer.bind(),E.pickId.pointer(b.UNSIGNED_BYTE,!1),b.drawArrays(b.TRIANGLES,0,w),c+this.shape[0]*this.shape[1]}}}(),h.pick=function(a,p,c){var i=this.pickOffset,y=this.shape[0]*this.shape[1];if(c<i||c>=i+y)return null;var f=c-i,w=this.xData,b=this.yData;return{object:this,pointId:f,dataCoord:[w[f%this.shape[0]],b[f/this.shape[0]|0]]}},h.update=function(a){var p=(a=a||{}).shape||[0,0],c=a.x||t(p[0]),i=a.y||t(p[1]),y=a.z||new Float32Array(p[0]*p[1]),f=a.zsmooth!==!1;this.xData=c,this.yData=i;var w,b,_,T,L=a.colorLevels||[0],A=a.colorValues||[0,0,0,1],I=L.length,P=this.bounds;f?(w=P[0]=c[0],b=P[1]=i[0],_=P[2]=c[c.length-1],T=P[3]=i[i.length-1]):(w=P[0]=c[0]+(c[1]-c[0])/2,b=P[1]=i[0]+(i[1]-i[0])/2,_=P[2]=c[c.length-1]+(c[c.length-1]-c[c.length-2])/2,T=P[3]=i[i.length-1]+(i[i.length-1]-i[i.length-2])/2);var S=1/(_-w),E=1/(T-b),z=p[0],D=p[1];this.shape=[z,D];var U=(f?(z-1)*(D-1):z*D)*(s.length>>>1);this.numVertices=U;for(var H=r.mallocUint8(4*U),Y=r.mallocFloat32(2*U),J=r.mallocUint8(2*U),W=r.mallocUint32(U),Z=0,re=f?z-1:z,V=f?D-1:D,B=0;B<V;++B){var j,ee;f?(j=E*(i[B]-b),ee=E*(i[B+1]-b)):(j=B<D-1?E*(i[B]-(i[B+1]-i[B])/2-b):E*(i[B]-(i[B]-i[B-1])/2-b),ee=B<D-1?E*(i[B]+(i[B+1]-i[B])/2-b):E*(i[B]+(i[B]-i[B-1])/2-b));for(var N=0;N<re;++N){var $,K;f?($=S*(c[N]-w),K=S*(c[N+1]-w)):($=N<z-1?S*(c[N]-(c[N+1]-c[N])/2-w):S*(c[N]-(c[N]-c[N-1])/2-w),K=N<z-1?S*(c[N]+(c[N+1]-c[N])/2-w):S*(c[N]+(c[N]-c[N-1])/2-w));for(var te=0;te<s.length;te+=2){var ie,le,se,ve,fe=s[te],ye=s[te+1],Ae=y[f?(B+ye)*z+(N+fe):B*z+N],pe=e.le(L,Ae);if(pe<0)ie=A[0],le=A[1],se=A[2],ve=A[3];else if(pe===I-1)ie=A[4*I-4],le=A[4*I-3],se=A[4*I-2],ve=A[4*I-1];else{var ge=(Ae-L[pe])/(L[pe+1]-L[pe]),we=1-ge,oe=4*pe,de=4*(pe+1);ie=we*A[oe]+ge*A[de],le=we*A[oe+1]+ge*A[de+1],se=we*A[oe+2]+ge*A[de+2],ve=we*A[oe+3]+ge*A[de+3]}H[4*Z]=255*ie,H[4*Z+1]=255*le,H[4*Z+2]=255*se,H[4*Z+3]=255*ve,Y[2*Z]=.5*$+.5*K,Y[2*Z+1]=.5*j+.5*ee,J[2*Z]=fe,J[2*Z+1]=ye,W[Z]=B*z+N,Z+=1}}}this.positionBuffer.update(Y),this.weightBuffer.update(J),this.colorBuffer.update(H),this.idBuffer.update(W),r.free(Y),r.free(H),r.free(J),r.free(W)},h.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(v,k,x){var e=v("glslify");k.exports={fragment:e([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},{glslify:231}],90:[function(v,k,x){var e=v("glslify"),t=v("gl-shader"),r=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),l=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),n=e([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),d=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];x.createShader=function(u){return t(u,r,l,null,d)},x.createPickShader=function(u){return t(u,r,n,null,d)}},{"gl-shader":132,glslify:231}],91:[function(v,k,x){k.exports=function(w){var b=w.gl||w.scene&&w.scene.gl,_=h(b);_.attributes.position.location=0,_.attributes.nextPosition.location=1,_.attributes.arcLength.location=2,_.attributes.lineWidth.location=3,_.attributes.color.location=4;var T=s(b);T.attributes.position.location=0,T.attributes.nextPosition.location=1,T.attributes.arcLength.location=2,T.attributes.lineWidth.location=3,T.attributes.color.location=4;for(var L=e(b),A=t(b,[{buffer:L,size:3,offset:0,stride:48},{buffer:L,size:3,offset:12,stride:48},{buffer:L,size:1,offset:24,stride:48},{buffer:L,size:1,offset:28,stride:48},{buffer:L,size:4,offset:32,stride:48}]),I=u(new Array(1024),[256,1,4]),P=0;P<1024;++P)I.data[P]=255;var S=r(b,I);S.wrap=b.REPEAT;var E=new y(b,_,T,L,A,S);return E.update(w),E};var e=v("gl-buffer"),t=v("gl-vao"),r=v("gl-texture2d"),l=new Uint8Array(4),n=new Float32Array(l.buffer),d=v("binary-search-bounds"),u=v("ndarray"),o=v("./lib/shaders"),h=o.createShader,s=o.createPickShader,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(w,b){for(var _=0,T=0;T<3;++T){var L=w[T]-b[T];_+=L*L}return Math.sqrt(_)}function c(w){for(var b=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],_=0;_<3;++_)b[0][_]=Math.max(w[0][_],b[0][_]),b[1][_]=Math.min(w[1][_],b[1][_]);return b}function i(w,b,_,T){this.arcLength=w,this.position=b,this.index=_,this.dataCoordinate=T}function y(w,b,_,T,L,A){this.gl=w,this.shader=b,this.pickShader=_,this.buffer=T,this.vao=L,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=A,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var f=y.prototype;f.isTransparent=function(){return this.hasAlpha},f.isOpaque=function(){return!this.hasAlpha},f.pickSlots=1,f.setPickBase=function(w){this.pickId=w},f.drawTransparent=f.draw=function(w){if(this.vertexCount){var b=this.gl,_=this.shader,T=this.vao;_.bind(),_.uniforms={model:w.model||a,view:w.view||a,projection:w.projection||a,clipBounds:c(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[b.drawingBufferWidth,b.drawingBufferHeight],pixelRatio:this.pixelRatio},T.bind(),T.draw(b.TRIANGLE_STRIP,this.vertexCount),T.unbind()}},f.drawPick=function(w){if(this.vertexCount){var b=this.gl,_=this.pickShader,T=this.vao;_.bind(),_.uniforms={model:w.model||a,view:w.view||a,projection:w.projection||a,pickId:this.pickId,clipBounds:c(this.clipBounds),screenShape:[b.drawingBufferWidth,b.drawingBufferHeight],pixelRatio:this.pixelRatio},T.bind(),T.draw(b.TRIANGLE_STRIP,this.vertexCount),T.unbind()}},f.update=function(w){var b,_;this.dirty=!0;var T=!!w.connectGaps;"dashScale"in w&&(this.dashScale=w.dashScale),this.hasAlpha=!1,"opacity"in w&&(this.opacity=+w.opacity,this.opacity<1&&(this.hasAlpha=!0));var L=[],A=[],I=[],P=0,S=0,E=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],z=w.position||w.positions;if(z){var D=w.color||w.colors||[0,0,0,1],U=w.lineWidth||1,H=!1;e:for(b=1;b<z.length;++b){var Y,J,W,Z=z[b-1],re=z[b];for(A.push(P),I.push(Z.slice()),_=0;_<3;++_){if(isNaN(Z[_])||isNaN(re[_])||!isFinite(Z[_])||!isFinite(re[_])){if(!T&&L.length>0){for(var V=0;V<24;++V)L.push(L[L.length-12]);S+=2,H=!0}continue e}E[0][_]=Math.min(E[0][_],Z[_],re[_]),E[1][_]=Math.max(E[1][_],Z[_],re[_])}Array.isArray(D[0])?(Y=D.length>b-1?D[b-1]:D.length>0?D[D.length-1]:[0,0,0,1],J=D.length>b?D[b]:D.length>0?D[D.length-1]:[0,0,0,1]):Y=J=D,Y.length===3&&(Y=[Y[0],Y[1],Y[2],1]),J.length===3&&(J=[J[0],J[1],J[2],1]),!this.hasAlpha&&Y[3]<1&&(this.hasAlpha=!0),W=Array.isArray(U)?U.length>b-1?U[b-1]:U.length>0?U[U.length-1]:[0,0,0,1]:U;var B=P;if(P+=p(Z,re),H){for(_=0;_<2;++_)L.push(Z[0],Z[1],Z[2],re[0],re[1],re[2],B,W,Y[0],Y[1],Y[2],Y[3]);S+=2,H=!1}L.push(Z[0],Z[1],Z[2],re[0],re[1],re[2],B,W,Y[0],Y[1],Y[2],Y[3],Z[0],Z[1],Z[2],re[0],re[1],re[2],B,-W,Y[0],Y[1],Y[2],Y[3],re[0],re[1],re[2],Z[0],Z[1],Z[2],P,-W,J[0],J[1],J[2],J[3],re[0],re[1],re[2],Z[0],Z[1],Z[2],P,W,J[0],J[1],J[2],J[3]),S+=4}}if(this.buffer.update(L),A.push(P),I.push(z[z.length-1].slice()),this.bounds=E,this.vertexCount=S,this.points=I,this.arcLength=A,"dashes"in w){var j=w.dashes.slice();for(j.unshift(0),b=1;b<j.length;++b)j[b]=j[b-1]+j[b];var ee=u(new Array(1024),[256,1,4]);for(b=0;b<256;++b){for(_=0;_<4;++_)ee.set(b,0,_,0);1&d.le(j,j[j.length-1]*b/255)?ee.set(b,0,0,0):ee.set(b,0,0,255)}this.texture.setPixels(ee)}},f.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},f.pick=function(w){if(!w||w.id!==this.pickId)return null;var b=function(z,D,U,H){return l[0]=H,l[1]=U,l[2]=D,l[3]=z,n[0]}(w.value[0],w.value[1],w.value[2],0),_=d.le(this.arcLength,b);if(_<0)return null;if(_===this.arcLength.length-1)return new i(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),_);for(var T=this.points[_],L=this.points[Math.min(_+1,this.points.length-1)],A=(b-this.arcLength[_])/(this.arcLength[_+1]-this.arcLength[_]),I=1-A,P=[0,0,0],S=0;S<3;++S)P[S]=I*T[S]+A*L[S];var E=Math.min(A<.5?_:_+1,this.points.length-1);return new i(b,P,E,this.points[E])}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(v,k,x){k.exports=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},{}],93:[function(v,k,x){k.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],94:[function(v,k,x){k.exports=function(e){var t=e[0],r=e[1],l=e[2],n=e[3],d=e[4],u=e[5],o=e[6],h=e[7],s=e[8],a=e[9],p=e[10],c=e[11],i=e[12],y=e[13],f=e[14],w=e[15];return(t*u-r*d)*(p*w-c*f)-(t*o-l*d)*(a*w-c*y)+(t*h-n*d)*(a*f-p*y)+(r*o-l*u)*(s*w-c*i)-(r*h-n*u)*(s*f-p*i)+(l*h-n*o)*(s*y-a*i)}},{}],95:[function(v,k,x){k.exports=function(e,t){var r=t[0],l=t[1],n=t[2],d=t[3],u=r+r,o=l+l,h=n+n,s=r*u,a=l*u,p=l*o,c=n*u,i=n*o,y=n*h,f=d*u,w=d*o,b=d*h;return e[0]=1-p-y,e[1]=a+b,e[2]=c-w,e[3]=0,e[4]=a-b,e[5]=1-s-y,e[6]=i+f,e[7]=0,e[8]=c+w,e[9]=i-f,e[10]=1-s-p,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],96:[function(v,k,x){k.exports=function(e,t,r){var l=t[0],n=t[1],d=t[2],u=t[3],o=l+l,h=n+n,s=d+d,a=l*o,p=l*h,c=l*s,i=n*h,y=n*s,f=d*s,w=u*o,b=u*h,_=u*s;return e[0]=1-(i+f),e[1]=p+_,e[2]=c-b,e[3]=0,e[4]=p-_,e[5]=1-(a+f),e[6]=y+w,e[7]=0,e[8]=c+b,e[9]=y-w,e[10]=1-(a+i),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}},{}],97:[function(v,k,x){k.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],98:[function(v,k,x){k.exports=function(e,t){var r=t[0],l=t[1],n=t[2],d=t[3],u=t[4],o=t[5],h=t[6],s=t[7],a=t[8],p=t[9],c=t[10],i=t[11],y=t[12],f=t[13],w=t[14],b=t[15],_=r*o-l*u,T=r*h-n*u,L=r*s-d*u,A=l*h-n*o,I=l*s-d*o,P=n*s-d*h,S=a*f-p*y,E=a*w-c*y,z=a*b-i*y,D=p*w-c*f,U=p*b-i*f,H=c*b-i*w,Y=_*H-T*U+L*D+A*z-I*E+P*S;return Y?(Y=1/Y,e[0]=(o*H-h*U+s*D)*Y,e[1]=(n*U-l*H-d*D)*Y,e[2]=(f*P-w*I+b*A)*Y,e[3]=(c*I-p*P-i*A)*Y,e[4]=(h*z-u*H-s*E)*Y,e[5]=(r*H-n*z+d*E)*Y,e[6]=(w*L-y*P-b*T)*Y,e[7]=(a*P-c*L+i*T)*Y,e[8]=(u*U-o*z+s*S)*Y,e[9]=(l*z-r*U-d*S)*Y,e[10]=(y*I-f*L+b*_)*Y,e[11]=(p*L-a*I-i*_)*Y,e[12]=(o*E-u*D-h*S)*Y,e[13]=(r*D-l*E+n*S)*Y,e[14]=(f*T-y*A-w*_)*Y,e[15]=(a*A-p*T+c*_)*Y,e):null}},{}],99:[function(v,k,x){var e=v("./identity");k.exports=function(t,r,l,n){var d,u,o,h,s,a,p,c,i,y,f=r[0],w=r[1],b=r[2],_=n[0],T=n[1],L=n[2],A=l[0],I=l[1],P=l[2];return Math.abs(f-A)<1e-6&&Math.abs(w-I)<1e-6&&Math.abs(b-P)<1e-6?e(t):(p=f-A,c=w-I,i=b-P,y=1/Math.sqrt(p*p+c*c+i*i),d=T*(i*=y)-L*(c*=y),u=L*(p*=y)-_*i,o=_*c-T*p,(y=Math.sqrt(d*d+u*u+o*o))?(d*=y=1/y,u*=y,o*=y):(d=0,u=0,o=0),h=c*o-i*u,s=i*d-p*o,a=p*u-c*d,(y=Math.sqrt(h*h+s*s+a*a))?(h*=y=1/y,s*=y,a*=y):(h=0,s=0,a=0),t[0]=d,t[1]=h,t[2]=p,t[3]=0,t[4]=u,t[5]=s,t[6]=c,t[7]=0,t[8]=o,t[9]=a,t[10]=i,t[11]=0,t[12]=-(d*f+u*w+o*b),t[13]=-(h*f+s*w+a*b),t[14]=-(p*f+c*w+i*b),t[15]=1,t)}},{"./identity":97}],100:[function(v,k,x){k.exports=function(e,t,r){var l=t[0],n=t[1],d=t[2],u=t[3],o=t[4],h=t[5],s=t[6],a=t[7],p=t[8],c=t[9],i=t[10],y=t[11],f=t[12],w=t[13],b=t[14],_=t[15],T=r[0],L=r[1],A=r[2],I=r[3];return e[0]=T*l+L*o+A*p+I*f,e[1]=T*n+L*h+A*c+I*w,e[2]=T*d+L*s+A*i+I*b,e[3]=T*u+L*a+A*y+I*_,T=r[4],L=r[5],A=r[6],I=r[7],e[4]=T*l+L*o+A*p+I*f,e[5]=T*n+L*h+A*c+I*w,e[6]=T*d+L*s+A*i+I*b,e[7]=T*u+L*a+A*y+I*_,T=r[8],L=r[9],A=r[10],I=r[11],e[8]=T*l+L*o+A*p+I*f,e[9]=T*n+L*h+A*c+I*w,e[10]=T*d+L*s+A*i+I*b,e[11]=T*u+L*a+A*y+I*_,T=r[12],L=r[13],A=r[14],I=r[15],e[12]=T*l+L*o+A*p+I*f,e[13]=T*n+L*h+A*c+I*w,e[14]=T*d+L*s+A*i+I*b,e[15]=T*u+L*a+A*y+I*_,e}},{}],101:[function(v,k,x){k.exports=function(e,t,r,l,n,d,u){var o=1/(t-r),h=1/(l-n),s=1/(d-u);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*h,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*s,e[11]=0,e[12]=(t+r)*o,e[13]=(n+l)*h,e[14]=(u+d)*s,e[15]=1,e}},{}],102:[function(v,k,x){k.exports=function(e,t,r,l,n){var d=1/Math.tan(t/2),u=1/(l-n);return e[0]=d/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=d,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(n+l)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*n*l*u,e[15]=0,e}},{}],103:[function(v,k,x){k.exports=function(e,t,r,l){var n,d,u,o,h,s,a,p,c,i,y,f,w,b,_,T,L,A,I,P,S,E,z,D,U=l[0],H=l[1],Y=l[2],J=Math.sqrt(U*U+H*H+Y*Y);return Math.abs(J)<1e-6?null:(U*=J=1/J,H*=J,Y*=J,n=Math.sin(r),d=Math.cos(r),u=1-d,o=t[0],h=t[1],s=t[2],a=t[3],p=t[4],c=t[5],i=t[6],y=t[7],f=t[8],w=t[9],b=t[10],_=t[11],T=U*U*u+d,L=H*U*u+Y*n,A=Y*U*u-H*n,I=U*H*u-Y*n,P=H*H*u+d,S=Y*H*u+U*n,E=U*Y*u+H*n,z=H*Y*u-U*n,D=Y*Y*u+d,e[0]=o*T+p*L+f*A,e[1]=h*T+c*L+w*A,e[2]=s*T+i*L+b*A,e[3]=a*T+y*L+_*A,e[4]=o*I+p*P+f*S,e[5]=h*I+c*P+w*S,e[6]=s*I+i*P+b*S,e[7]=a*I+y*P+_*S,e[8]=o*E+p*z+f*D,e[9]=h*E+c*z+w*D,e[10]=s*E+i*z+b*D,e[11]=a*E+y*z+_*D,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}},{}],104:[function(v,k,x){k.exports=function(e,t,r){var l=Math.sin(r),n=Math.cos(r),d=t[4],u=t[5],o=t[6],h=t[7],s=t[8],a=t[9],p=t[10],c=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=d*n+s*l,e[5]=u*n+a*l,e[6]=o*n+p*l,e[7]=h*n+c*l,e[8]=s*n-d*l,e[9]=a*n-u*l,e[10]=p*n-o*l,e[11]=c*n-h*l,e}},{}],105:[function(v,k,x){k.exports=function(e,t,r){var l=Math.sin(r),n=Math.cos(r),d=t[0],u=t[1],o=t[2],h=t[3],s=t[8],a=t[9],p=t[10],c=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=d*n-s*l,e[1]=u*n-a*l,e[2]=o*n-p*l,e[3]=h*n-c*l,e[8]=d*l+s*n,e[9]=u*l+a*n,e[10]=o*l+p*n,e[11]=h*l+c*n,e}},{}],106:[function(v,k,x){k.exports=function(e,t,r){var l=Math.sin(r),n=Math.cos(r),d=t[0],u=t[1],o=t[2],h=t[3],s=t[4],a=t[5],p=t[6],c=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=d*n+s*l,e[1]=u*n+a*l,e[2]=o*n+p*l,e[3]=h*n+c*l,e[4]=s*n-d*l,e[5]=a*n-u*l,e[6]=p*n-o*l,e[7]=c*n-h*l,e}},{}],107:[function(v,k,x){k.exports=function(e,t,r){var l=r[0],n=r[1],d=r[2];return e[0]=t[0]*l,e[1]=t[1]*l,e[2]=t[2]*l,e[3]=t[3]*l,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*d,e[9]=t[9]*d,e[10]=t[10]*d,e[11]=t[11]*d,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],108:[function(v,k,x){k.exports=function(e,t,r){var l,n,d,u,o,h,s,a,p,c,i,y,f=r[0],w=r[1],b=r[2];return t===e?(e[12]=t[0]*f+t[4]*w+t[8]*b+t[12],e[13]=t[1]*f+t[5]*w+t[9]*b+t[13],e[14]=t[2]*f+t[6]*w+t[10]*b+t[14],e[15]=t[3]*f+t[7]*w+t[11]*b+t[15]):(l=t[0],n=t[1],d=t[2],u=t[3],o=t[4],h=t[5],s=t[6],a=t[7],p=t[8],c=t[9],i=t[10],y=t[11],e[0]=l,e[1]=n,e[2]=d,e[3]=u,e[4]=o,e[5]=h,e[6]=s,e[7]=a,e[8]=p,e[9]=c,e[10]=i,e[11]=y,e[12]=l*f+o*w+p*b+t[12],e[13]=n*f+h*w+c*b+t[13],e[14]=d*f+s*w+i*b+t[14],e[15]=u*f+a*w+y*b+t[15]),e}},{}],109:[function(v,k,x){k.exports=function(e,t){if(e===t){var r=t[1],l=t[2],n=t[3],d=t[6],u=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=l,e[9]=d,e[11]=t[14],e[12]=n,e[13]=u,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}},{}],110:[function(v,k,x){var e=v("barycentric"),t=v("polytope-closest-point/lib/closest_point_2d.js");function r(d,u){for(var o=[0,0,0,0],h=0;h<4;++h)for(var s=0;s<4;++s)o[s]+=d[4*h+s]*u[h];return o}function l(d,u,o,h,s){for(var a=r(h,r(o,r(u,[d[0],d[1],d[2],1]))),p=0;p<3;++p)a[p]/=a[3];return[.5*s[0]*(1+a[0]),.5*s[1]*(1-a[1])]}function n(d,u){for(var o=[0,0,0],h=0;h<d.length;++h)for(var s=d[h],a=u[h],p=0;p<3;++p)o[p]+=a*s[p];return o}k.exports=function(d,u,o,h,s,a){if(d.length===1)return[0,d[0].slice()];for(var p=new Array(d.length),c=0;c<d.length;++c)p[c]=l(d[c],o,h,s,a);var i=0,y=1/0;for(c=0;c<p.length;++c){for(var f=0,w=0;w<2;++w)f+=Math.pow(p[c][w]-u[w],2);f<y&&(y=f,i=c)}var b=function(T,L){if(T.length===2){for(var A=0,I=0,P=0;P<2;++P)A+=Math.pow(L[P]-T[0][P],2),I+=Math.pow(L[P]-T[1][P],2);return A=Math.sqrt(A),I=Math.sqrt(I),A+I<1e-6?[1,0]:[I/(A+I),A/(I+A)]}if(T.length===3){var S=[0,0];return t(T[0],T[1],T[2],L,S),e(T,S)}return[]}(p,u),_=0;for(c=0;c<3;++c){if(b[c]<-.001||b[c]>1.0001)return null;_+=b[c]}return Math.abs(_-1)>.001?null:[i,n(d,b),b]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(v,k,x){var e=v("glslify"),t=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),r=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),l=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),n=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),d=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),u=e([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),o=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),h=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),s=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),a=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),p=e([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);x.meshShader={vertex:t,fragment:r,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},x.wireShader={vertex:l,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},x.pointShader={vertex:d,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},x.pickShader={vertex:o,fragment:h,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},x.pointPickShader={vertex:s,fragment:h,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},x.contourShader={vertex:a,fragment:p,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(v,k,x){var e=v("gl-shader"),t=v("gl-buffer"),r=v("gl-vao"),l=v("gl-texture2d"),n=v("normals"),d=v("gl-mat4/multiply"),u=v("gl-mat4/invert"),o=v("ndarray"),h=v("colormap"),s=v("simplicial-complex-contour"),a=v("typedarray-pool"),p=v("./lib/shaders"),c=v("./lib/closest-point"),i=p.meshShader,y=p.wireShader,f=p.pointShader,w=p.pickShader,b=p.pointPickShader,_=p.contourShader,T=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function L(H,Y,J,W,Z,re,V,B,j,ee,N,$,K,te,ie,le,se,ve,fe,ye,Ae,pe,ge,we,oe,de,Te){this.gl=H,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=Y,this.dirty=!0,this.triShader=J,this.lineShader=W,this.pointShader=Z,this.pickShader=re,this.pointPickShader=V,this.contourShader=B,this.trianglePositions=j,this.triangleColors=N,this.triangleNormals=K,this.triangleUVs=$,this.triangleIds=ee,this.triangleVAO=te,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ie,this.edgeColors=se,this.edgeUVs=ve,this.edgeIds=le,this.edgeVAO=fe,this.edgeCount=0,this.pointPositions=ye,this.pointColors=pe,this.pointUVs=ge,this.pointSizes=we,this.pointIds=Ae,this.pointVAO=oe,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=de,this.contourVAO=Te,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=T,this._view=T,this._projection=T,this._resolution=[1,1]}var A=L.prototype;function I(H,Y){if(!Y||!Y.length)return 1;for(var J=0;J<Y.length;++J){if(Y.length<2)return 1;if(Y[J][0]===H)return Y[J][1];if(Y[J][0]>H&&J>0){var W=(Y[J][0]-H)/(Y[J][0]-Y[J-1][0]);return Y[J][1]*(1-W)+W*Y[J-1][1]}}return 1}function P(H){var Y=e(H,i.vertex,i.fragment);return Y.attributes.position.location=0,Y.attributes.color.location=2,Y.attributes.uv.location=3,Y.attributes.normal.location=4,Y}function S(H){var Y=e(H,y.vertex,y.fragment);return Y.attributes.position.location=0,Y.attributes.color.location=2,Y.attributes.uv.location=3,Y}function E(H){var Y=e(H,f.vertex,f.fragment);return Y.attributes.position.location=0,Y.attributes.color.location=2,Y.attributes.uv.location=3,Y.attributes.pointSize.location=4,Y}function z(H){var Y=e(H,w.vertex,w.fragment);return Y.attributes.position.location=0,Y.attributes.id.location=1,Y}function D(H){var Y=e(H,b.vertex,b.fragment);return Y.attributes.position.location=0,Y.attributes.id.location=1,Y.attributes.pointSize.location=4,Y}function U(H){var Y=e(H,_.vertex,_.fragment);return Y.attributes.position.location=0,Y}A.isOpaque=function(){return!this.hasAlpha},A.isTransparent=function(){return this.hasAlpha},A.pickSlots=1,A.setPickBase=function(H){this.pickId=H},A.highlight=function(H){if(H&&this.contourEnable){for(var Y=s(this.cells,this.intensity,H.intensity),J=Y.cells,W=Y.vertexIds,Z=Y.vertexWeights,re=J.length,V=a.mallocFloat32(6*re),B=0,j=0;j<re;++j)for(var ee=J[j],N=0;N<2;++N){var $=ee[0];ee.length===2&&($=ee[N]);for(var K=W[$][0],te=W[$][1],ie=Z[$],le=1-ie,se=this.positions[K],ve=this.positions[te],fe=0;fe<3;++fe)V[B++]=ie*se[fe]+le*ve[fe]}this.contourCount=B/3|0,this.contourPositions.update(V.subarray(0,B)),a.free(V)}else this.contourCount=0},A.update=function(H){H=H||{};var Y=this.gl;this.dirty=!0,"contourEnable"in H&&(this.contourEnable=H.contourEnable),"contourColor"in H&&(this.contourColor=H.contourColor),"lineWidth"in H&&(this.lineWidth=H.lineWidth),"lightPosition"in H&&(this.lightPosition=H.lightPosition),this.hasAlpha=!1,"opacity"in H&&(this.opacity=H.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in H&&(this.opacityscale=H.opacityscale,this.hasAlpha=!0),"ambient"in H&&(this.ambientLight=H.ambient),"diffuse"in H&&(this.diffuseLight=H.diffuse),"specular"in H&&(this.specularLight=H.specular),"roughness"in H&&(this.roughness=H.roughness),"fresnel"in H&&(this.fresnel=H.fresnel),H.texture?(this.texture.dispose(),this.texture=l(Y,H.texture)):H.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=Y.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=Y.LINEAR,this.texture.setPixels(function(Vt,Xt){for(var Gt=h({colormap:Vt,nshades:256,format:"rgba"}),nr=new Uint8Array(1024),It=0;It<256;++It){for(var Be=Gt[It],He=0;He<3;++He)nr[4*It+He]=Be[He];nr[4*It+3]=Xt?255*I(It/255,Xt):255*Be[3]}return o(nr,[256,256,4],[4,0,1])}(H.colormap,this.opacityscale)),this.texture.generateMipmap());var J=H.cells,W=H.positions;if(W&&J){var Z=[],re=[],V=[],B=[],j=[],ee=[],N=[],$=[],K=[],te=[],ie=[],le=[],se=[],ve=[];this.cells=J,this.positions=W;var fe=H.vertexNormals,ye=H.cellNormals,Ae=H.vertexNormalsEpsilon===void 0?1e-6:H.vertexNormalsEpsilon,pe=H.faceNormalsEpsilon===void 0?1e-6:H.faceNormalsEpsilon;H.useFacetNormals&&!ye&&(ye=n.faceNormals(J,W,pe)),ye||fe||(fe=n.vertexNormals(J,W,Ae));var ge=H.vertexColors,we=H.cellColors,oe=H.meshColor||[1,1,1,1],de=H.vertexUVs,Te=H.vertexIntensity,Ee=H.cellUVs,Me=H.cellIntensity,De=1/0,Ie=-1/0;if(!de&&!Ee)if(Te)if(H.vertexIntensityBounds)De=+H.vertexIntensityBounds[0],Ie=+H.vertexIntensityBounds[1];else for(var Oe=0;Oe<Te.length;++Oe){var Ze=Te[Oe];De=Math.min(De,Ze),Ie=Math.max(Ie,Ze)}else if(Me)if(H.cellIntensityBounds)De=+H.cellIntensityBounds[0],Ie=+H.cellIntensityBounds[1];else for(Oe=0;Oe<Me.length;++Oe)Ze=Me[Oe],De=Math.min(De,Ze),Ie=Math.max(Ie,Ze);else for(Oe=0;Oe<W.length;++Oe)Ze=W[Oe][2],De=Math.min(De,Ze),Ie=Math.max(Ie,Ze);this.intensity=Te||Me||function(Vt){for(var Xt=Vt.length,Gt=new Array(Xt),nr=0;nr<Xt;++nr)Gt[nr]=Vt[nr][2];return Gt}(W),this.pickVertex=!(Me||we);var Fe=H.pointSizes,Pe=H.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Oe=0;Oe<W.length;++Oe)for(var ze=W[Oe],Ge=0;Ge<3;++Ge)!isNaN(ze[Ge])&&isFinite(ze[Ge])&&(this.bounds[0][Ge]=Math.min(this.bounds[0][Ge],ze[Ge]),this.bounds[1][Ge]=Math.max(this.bounds[1][Ge],ze[Ge]));var $e=0,ot=0,vt=0;e:for(Oe=0;Oe<J.length;++Oe){var bt=J[Oe];switch(bt.length){case 1:for(ze=W[tt=bt[0]],Ge=0;Ge<3;++Ge)if(isNaN(ze[Ge])||!isFinite(ze[Ge]))continue e;te.push(ze[0],ze[1],ze[2]),Ke=ge?ge[tt]:we?we[Oe]:oe,this.opacityscale&&Te?re.push(Ke[0],Ke[1],Ke[2],this.opacity*I((Te[tt]-De)/(Ie-De),this.opacityscale)):Ke.length===3?ie.push(Ke[0],Ke[1],Ke[2],this.opacity):(ie.push(Ke[0],Ke[1],Ke[2],Ke[3]*this.opacity),Ke[3]<1&&(this.hasAlpha=!0)),mt=de?de[tt]:Te?[(Te[tt]-De)/(Ie-De),0]:Ee?Ee[Oe]:Me?[(Me[Oe]-De)/(Ie-De),0]:[(ze[2]-De)/(Ie-De),0],le.push(mt[0],mt[1]),Fe?se.push(Fe[tt]):se.push(Pe),ve.push(Oe),vt+=1;break;case 2:for(Ge=0;Ge<2;++Ge){ze=W[tt=bt[Ge]];for(var yt=0;yt<3;++yt)if(isNaN(ze[yt])||!isFinite(ze[yt]))continue e}for(Ge=0;Ge<2;++Ge)ze=W[tt=bt[Ge]],ee.push(ze[0],ze[1],ze[2]),Ke=ge?ge[tt]:we?we[Oe]:oe,this.opacityscale&&Te?re.push(Ke[0],Ke[1],Ke[2],this.opacity*I((Te[tt]-De)/(Ie-De),this.opacityscale)):Ke.length===3?N.push(Ke[0],Ke[1],Ke[2],this.opacity):(N.push(Ke[0],Ke[1],Ke[2],Ke[3]*this.opacity),Ke[3]<1&&(this.hasAlpha=!0)),mt=de?de[tt]:Te?[(Te[tt]-De)/(Ie-De),0]:Ee?Ee[Oe]:Me?[(Me[Oe]-De)/(Ie-De),0]:[(ze[2]-De)/(Ie-De),0],$.push(mt[0],mt[1]),K.push(Oe);ot+=1;break;case 3:for(Ge=0;Ge<3;++Ge)for(ze=W[tt=bt[Ge]],yt=0;yt<3;++yt)if(isNaN(ze[yt])||!isFinite(ze[yt]))continue e;for(Ge=0;Ge<3;++Ge){var tt,Ke,mt,Ft;ze=W[tt=bt[2-Ge]],Z.push(ze[0],ze[1],ze[2]),(Ke=ge?ge[tt]:we?we[Oe]:oe)?this.opacityscale&&Te?re.push(Ke[0],Ke[1],Ke[2],this.opacity*I((Te[tt]-De)/(Ie-De),this.opacityscale)):Ke.length===3?re.push(Ke[0],Ke[1],Ke[2],this.opacity):(re.push(Ke[0],Ke[1],Ke[2],Ke[3]*this.opacity),Ke[3]<1&&(this.hasAlpha=!0)):re.push(.5,.5,.5,1),mt=de?de[tt]:Te?[(Te[tt]-De)/(Ie-De),0]:Ee?Ee[Oe]:Me?[(Me[Oe]-De)/(Ie-De),0]:[(ze[2]-De)/(Ie-De),0],B.push(mt[0],mt[1]),Ft=fe?fe[tt]:ye[Oe],V.push(Ft[0],Ft[1],Ft[2]),j.push(Oe)}$e+=1}}this.pointCount=vt,this.edgeCount=ot,this.triangleCount=$e,this.pointPositions.update(te),this.pointColors.update(ie),this.pointUVs.update(le),this.pointSizes.update(se),this.pointIds.update(new Uint32Array(ve)),this.edgePositions.update(ee),this.edgeColors.update(N),this.edgeUVs.update($),this.edgeIds.update(new Uint32Array(K)),this.trianglePositions.update(Z),this.triangleColors.update(re),this.triangleUVs.update(B),this.triangleNormals.update(V),this.triangleIds.update(new Uint32Array(j))}},A.drawTransparent=A.draw=function(H){H=H||{};for(var Y=this.gl,J=H.model||T,W=H.view||T,Z=H.projection||T,re=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],V=0;V<3;++V)re[0][V]=Math.max(re[0][V],this.clipBounds[0][V]),re[1][V]=Math.min(re[1][V],this.clipBounds[1][V]);var B={model:J,view:W,projection:Z,inverseModel:T.slice(),clipBounds:re,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};B.inverseModel=u(B.inverseModel,B.model),Y.disable(Y.CULL_FACE),this.texture.bind(0);var j=new Array(16);for(d(j,B.view,B.model),d(j,B.projection,j),u(j,j),V=0;V<3;++V)B.eyePosition[V]=j[12+V]/j[15];var ee,N=j[15];for(V=0;V<3;++V)N+=this.lightPosition[V]*j[4*V+3];for(V=0;V<3;++V){for(var $=j[12+V],K=0;K<3;++K)$+=j[4*K+V]*this.lightPosition[K];B.lightPosition[V]=$/N}this.triangleCount>0&&((ee=this.triShader).bind(),ee.uniforms=B,this.triangleVAO.bind(),Y.drawArrays(Y.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((ee=this.lineShader).bind(),ee.uniforms=B,this.edgeVAO.bind(),Y.lineWidth(this.lineWidth*this.pixelRatio),Y.drawArrays(Y.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ee=this.pointShader).bind(),ee.uniforms=B,this.pointVAO.bind(),Y.drawArrays(Y.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((ee=this.contourShader).bind(),ee.uniforms=B,this.contourVAO.bind(),Y.drawArrays(Y.LINES,0,this.contourCount),this.contourVAO.unbind())},A.drawPick=function(H){H=H||{};for(var Y=this.gl,J=H.model||T,W=H.view||T,Z=H.projection||T,re=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],V=0;V<3;++V)re[0][V]=Math.max(re[0][V],this.clipBounds[0][V]),re[1][V]=Math.min(re[1][V],this.clipBounds[1][V]);this._model=[].slice.call(J),this._view=[].slice.call(W),this._projection=[].slice.call(Z),this._resolution=[Y.drawingBufferWidth,Y.drawingBufferHeight];var B,j={model:J,view:W,projection:Z,clipBounds:re,pickId:this.pickId/255};(B=this.pickShader).bind(),B.uniforms=j,this.triangleCount>0&&(this.triangleVAO.bind(),Y.drawArrays(Y.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),Y.lineWidth(this.lineWidth*this.pixelRatio),Y.drawArrays(Y.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((B=this.pointPickShader).bind(),B.uniforms=j,this.pointVAO.bind(),Y.drawArrays(Y.POINTS,0,this.pointCount),this.pointVAO.unbind())},A.pick=function(H){if(!H||H.id!==this.pickId)return null;for(var Y=H.value[0]+256*H.value[1]+65536*H.value[2],J=this.cells[Y],W=this.positions,Z=new Array(J.length),re=0;re<J.length;++re)Z[re]=W[J[re]];var V=H.coord[0],B=H.coord[1];if(!this.pickVertex){var j=this.positions[J[0]],ee=this.positions[J[1]],N=this.positions[J[2]],$=[(j[0]+ee[0]+N[0])/3,(j[1]+ee[1]+N[1])/3,(j[2]+ee[2]+N[2])/3];return{_cellCenter:!0,position:[V,B],index:Y,cell:J,cellId:Y,intensity:this.intensity[Y],dataCoordinate:$}}var K=c(Z,[V*this.pixelRatio,this._resolution[1]-B*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!K)return null;var te=K[2],ie=0;for(re=0;re<J.length;++re)ie+=te[re]*this.intensity[J[re]];return{position:K[1],index:J[K[0]],cell:J,cellId:Y,intensity:ie,dataCoordinate:this.positions[J[K[0]]]}},A.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},k.exports=function(H,Y){arguments.length===1&&(H=(Y=H).gl);var J=H.getExtension("OES_standard_derivatives")||H.getExtension("MOZ_OES_standard_derivatives")||H.getExtension("WEBKIT_OES_standard_derivatives");if(!J)throw new Error("derivatives not supported");var W=P(H),Z=S(H),re=E(H),V=z(H),B=D(H),j=U(H),ee=l(H,o(new Uint8Array([255,255,255,255]),[1,1,4]));ee.generateMipmap(),ee.minFilter=H.LINEAR_MIPMAP_LINEAR,ee.magFilter=H.LINEAR;var N=t(H),$=t(H),K=t(H),te=t(H),ie=t(H),le=r(H,[{buffer:N,type:H.FLOAT,size:3},{buffer:ie,type:H.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:$,type:H.FLOAT,size:4},{buffer:K,type:H.FLOAT,size:2},{buffer:te,type:H.FLOAT,size:3}]),se=t(H),ve=t(H),fe=t(H),ye=t(H),Ae=r(H,[{buffer:se,type:H.FLOAT,size:3},{buffer:ye,type:H.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ve,type:H.FLOAT,size:4},{buffer:fe,type:H.FLOAT,size:2}]),pe=t(H),ge=t(H),we=t(H),oe=t(H),de=t(H),Te=r(H,[{buffer:pe,type:H.FLOAT,size:3},{buffer:de,type:H.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ge,type:H.FLOAT,size:4},{buffer:we,type:H.FLOAT,size:2},{buffer:oe,type:H.FLOAT,size:1}]),Ee=t(H),Me=r(H,[{buffer:Ee,type:H.FLOAT,size:3}]),De=new L(H,ee,W,Z,re,V,B,j,N,ie,$,K,te,le,se,ye,ve,fe,Ae,pe,de,ge,we,oe,Te,Ee,Me);return De.update(Y),De}},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(v,k,x){k.exports=function(o){var h=o.gl,s=e(h,[0,0,0,1,1,0,1,1]),a=t(h,r.boxVert,r.lineFrag);return new l(o,s,a)};var e=v("gl-buffer"),t=v("gl-shader"),r=v("./shaders");function l(o,h,s){this.plot=o,this.vbo=h,this.shader=s}var n,d,u=l.prototype;u.bind=function(){var o=this.shader;this.vbo.bind(),this.shader.bind(),o.attributes.coord.pointer(),o.uniforms.screenBox=this.plot.screenBox},u.drawBox=(n=[0,0],d=[0,0],function(o,h,s,a,p){var c=this.plot,i=this.shader,y=c.gl;n[0]=o,n[1]=h,d[0]=s,d[1]=a,i.uniforms.lo=n,i.uniforms.hi=d,i.uniforms.color=p,y.drawArrays(y.TRIANGLE_STRIP,0,4)}),u.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(v,k,x){k.exports=function(c){var i=c.gl,y=e(i),f=t(i,l.gridVert,l.gridFrag),w=t(i,l.tickVert,l.gridFrag);return new n(c,y,f,w)};var e=v("gl-buffer"),t=v("gl-shader"),r=v("binary-search-bounds"),l=v("./shaders");function n(c,i,y,f){this.plot=c,this.vbo=i,this.shader=y,this.tickShader=f,this.ticks=[[],[]]}function d(c,i){return c-i}var u,o,h,s,a,p=n.prototype;p.draw=(u=[0,0],o=[0,0],h=[0,0],function(){for(var c=this.plot,i=this.vbo,y=this.shader,f=this.ticks,w=c.gl,b=c._tickBounds,_=c.dataBox,T=c.viewBox,L=c.gridLineWidth,A=c.gridLineColor,I=c.gridLineEnable,P=c.pixelRatio,S=0;S<2;++S){var E=b[S],z=b[S+2]-E,D=.5*(_[S+2]+_[S]),U=_[S+2]-_[S];o[S]=2*z/U,u[S]=2*(E-D)/U}y.bind(),i.bind(),y.attributes.dataCoord.pointer(),y.uniforms.dataShift=u,y.uniforms.dataScale=o;var H=0;for(S=0;S<2;++S){h[0]=h[1]=0,h[S]=1,y.uniforms.dataAxis=h,y.uniforms.lineWidth=L[S]/(T[S+2]-T[S])*P,y.uniforms.color=A[S];var Y=6*f[S].length;I[S]&&Y&&w.drawArrays(w.TRIANGLES,H,Y),H+=Y}}),p.drawTickMarks=function(){var c=[0,0],i=[0,0],y=[1,0],f=[0,1],w=[0,0],b=[0,0];return function(){for(var _=this.plot,T=this.vbo,L=this.tickShader,A=this.ticks,I=_.gl,P=_._tickBounds,S=_.dataBox,E=_.viewBox,z=_.pixelRatio,D=_.screenBox,U=D[2]-D[0],H=D[3]-D[1],Y=E[2]-E[0],J=E[3]-E[1],W=0;W<2;++W){var Z=P[W],re=P[W+2]-Z,V=.5*(S[W+2]+S[W]),B=S[W+2]-S[W];i[W]=2*re/B,c[W]=2*(Z-V)/B}i[0]*=Y/U,c[0]*=Y/U,i[1]*=J/H,c[1]*=J/H,L.bind(),T.bind(),L.attributes.dataCoord.pointer();var j=L.uniforms;j.dataShift=c,j.dataScale=i;var ee=_.tickMarkLength,N=_.tickMarkWidth,$=_.tickMarkColor,K=6*A[0].length,te=Math.min(r.ge(A[0],(S[0]-P[0])/(P[2]-P[0]),d),A[0].length),ie=Math.min(r.gt(A[0],(S[2]-P[0])/(P[2]-P[0]),d),A[0].length),le=0+6*te,se=6*Math.max(0,ie-te),ve=Math.min(r.ge(A[1],(S[1]-P[1])/(P[3]-P[1]),d),A[1].length),fe=Math.min(r.gt(A[1],(S[3]-P[1])/(P[3]-P[1]),d),A[1].length),ye=K+6*ve,Ae=6*Math.max(0,fe-ve);w[0]=2*(E[0]-ee[1])/U-1,w[1]=(E[3]+E[1])/H-1,b[0]=ee[1]*z/U,b[1]=N[1]*z/H,Ae&&(j.color=$[1],j.tickScale=b,j.dataAxis=f,j.screenOffset=w,I.drawArrays(I.TRIANGLES,ye,Ae)),w[0]=(E[2]+E[0])/U-1,w[1]=2*(E[1]-ee[0])/H-1,b[0]=N[0]*z/U,b[1]=ee[0]*z/H,se&&(j.color=$[0],j.tickScale=b,j.dataAxis=y,j.screenOffset=w,I.drawArrays(I.TRIANGLES,le,se)),w[0]=2*(E[2]+ee[3])/U-1,w[1]=(E[3]+E[1])/H-1,b[0]=ee[3]*z/U,b[1]=N[3]*z/H,Ae&&(j.color=$[3],j.tickScale=b,j.dataAxis=f,j.screenOffset=w,I.drawArrays(I.TRIANGLES,ye,Ae)),w[0]=(E[2]+E[0])/U-1,w[1]=2*(E[3]+ee[2])/H-1,b[0]=N[2]*z/U,b[1]=ee[2]*z/H,se&&(j.color=$[2],j.tickScale=b,j.dataAxis=y,j.screenOffset=w,I.drawArrays(I.TRIANGLES,le,se))}}(),p.update=(s=[1,1,-1,-1,1,-1],a=[1,-1,1,1,-1,-1],function(c){for(var i=c.ticks,y=c.bounds,f=new Float32Array(18*(i[0].length+i[1].length)),w=(this.plot.zeroLineEnable,0),b=[[],[]],_=0;_<2;++_)for(var T=b[_],L=i[_],A=y[_],I=y[_+2],P=0;P<L.length;++P){var S=(L[P].x-A)/(I-A);T.push(S);for(var E=0;E<6;++E)f[w++]=S,f[w++]=s[E],f[w++]=a[E]}this.ticks=b,this.vbo.update(f)}),p.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(v,k,x){k.exports=function(o){var h=o.gl,s=e(h,[-1,-1,-1,1,1,-1,1,1]),a=t(h,r.lineVert,r.lineFrag);return new l(o,s,a)};var e=v("gl-buffer"),t=v("gl-shader"),r=v("./shaders");function l(o,h,s){this.plot=o,this.vbo=h,this.shader=s}var n,d,u=l.prototype;u.bind=function(){var o=this.shader;this.vbo.bind(),this.shader.bind(),o.attributes.coord.pointer(),o.uniforms.screenBox=this.plot.screenBox},u.drawLine=(n=[0,0],d=[0,0],function(o,h,s,a,p,c){var i=this.plot,y=this.shader,f=i.gl;n[0]=o,n[1]=h,d[0]=s,d[1]=a,y.uniforms.start=n,y.uniforms.end=d,y.uniforms.width=p*i.pixelRatio,y.uniforms.color=c,f.drawArrays(f.TRIANGLE_STRIP,0,4)}),u.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(v,k,x){var e=v("glslify"),t=e([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);k.exports={lineVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:t,textVert:e([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:t,gridVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:t,boxVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},{glslify:231}],117:[function(v,k,x){k.exports=function(i){var y=i.gl,f=e(y),w=t(y,n.textVert,n.textFrag);return new d(i,f,w)};var e=v("gl-buffer"),t=v("gl-shader"),r=v("text-cache"),l=v("binary-search-bounds"),n=v("./shaders");function d(i,y,f){this.plot=i,this.vbo=y,this.shader=f,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var u,o,h,s,a,p,c=d.prototype;c.drawTicks=(u=[0,0],o=[0,0],h=[0,0],function(i){var y=this.plot,f=this.shader,w=this.tickX[i],b=this.tickOffset[i],_=y.gl,T=y.viewBox,L=y.dataBox,A=y.screenBox,I=y.pixelRatio,P=y.tickEnable,S=y.tickPad,E=y.tickColor,z=y.tickAngle,D=y.labelEnable,U=y.labelPad,H=y.labelColor,Y=y.labelAngle,J=this.labelOffset[i],W=this.labelCount[i],Z=l.lt(w,L[i]),re=l.le(w,L[i+2]);u[0]=u[1]=0,u[i]=1,o[i]=(T[2+i]+T[i])/(A[2+i]-A[i])-1;var V=2/A[2+(1^i)]-A[1^i];o[1^i]=V*T[1^i]-1,P[i]&&(o[1^i]-=V*I*S[i],Z<re&&b[re]>b[Z]&&(f.uniforms.dataAxis=u,f.uniforms.screenOffset=o,f.uniforms.color=E[i],f.uniforms.angle=z[i],_.drawArrays(_.TRIANGLES,b[Z],b[re]-b[Z]))),D[i]&&W&&(o[1^i]-=V*I*U[i],f.uniforms.dataAxis=h,f.uniforms.screenOffset=o,f.uniforms.color=H[i],f.uniforms.angle=Y[i],_.drawArrays(_.TRIANGLES,J,W)),o[1^i]=V*T[2+(1^i)]-1,P[i+2]&&(o[1^i]+=V*I*S[i+2],Z<re&&b[re]>b[Z]&&(f.uniforms.dataAxis=u,f.uniforms.screenOffset=o,f.uniforms.color=E[i+2],f.uniforms.angle=z[i+2],_.drawArrays(_.TRIANGLES,b[Z],b[re]-b[Z]))),D[i+2]&&W&&(o[1^i]+=V*I*U[i+2],f.uniforms.dataAxis=h,f.uniforms.screenOffset=o,f.uniforms.color=H[i+2],f.uniforms.angle=Y[i+2],_.drawArrays(_.TRIANGLES,J,W))}),c.drawTitle=function(){var i=[0,0],y=[0,0];return function(){var f=this.plot,w=this.shader,b=f.gl,_=f.screenBox,T=f.titleCenter,L=f.titleAngle,A=f.titleColor,I=f.pixelRatio;if(this.titleCount){for(var P=0;P<2;++P)y[P]=2*(T[P]*I-_[P])/(_[2+P]-_[P])-1;w.bind(),w.uniforms.dataAxis=i,w.uniforms.screenOffset=y,w.uniforms.angle=L,w.uniforms.color=A,b.drawArrays(b.TRIANGLES,this.titleOffset,this.titleCount)}}}(),c.bind=(s=[0,0],a=[0,0],p=[0,0],function(){var i=this.plot,y=this.shader,f=i._tickBounds,w=i.dataBox,b=i.screenBox,_=i.viewBox;y.bind();for(var T=0;T<2;++T){var L=f[T],A=f[T+2]-L,I=.5*(w[T+2]+w[T]),P=w[T+2]-w[T],S=_[T],E=_[T+2]-S,z=b[T],D=b[T+2]-z;a[T]=2*A/P*E/D,s[T]=2*(L-I)/P*E/D}p[1]=2*i.pixelRatio/(b[3]-b[1]),p[0]=p[1]*(b[3]-b[1])/(b[2]-b[0]),y.uniforms.dataScale=a,y.uniforms.dataShift=s,y.uniforms.textScale=p,this.vbo.bind(),y.attributes.textCoordinate.pointer()}),c.update=function(i){var y,f,w,b,_,T=[],L=i.ticks,A=i.bounds;for(_=0;_<2;++_){var I=[Math.floor(T.length/3)],P=[-1/0],S=L[_];for(y=0;y<S.length;++y){var E=S[y],z=E.x,D=E.text,U=E.font||"sans-serif";b=E.fontSize||12;for(var H=1/(A[_+2]-A[_]),Y=A[_],J=D.split(`
`),W=0;W<J.length;W++)for(w=r(U,J[W]).data,f=0;f<w.length;f+=2)T.push(w[f]*b,-w[f+1]*b-W*b*1.2,(z-Y)*H);I.push(Math.floor(T.length/3)),P.push(z)}this.tickOffset[_]=I,this.tickX[_]=P}for(_=0;_<2;++_){for(this.labelOffset[_]=Math.floor(T.length/3),w=r(i.labelFont[_],i.labels[_],{textAlign:"center"}).data,b=i.labelSize[_],y=0;y<w.length;y+=2)T.push(w[y]*b,-w[y+1]*b,0);this.labelCount[_]=Math.floor(T.length/3)-this.labelOffset[_]}for(this.titleOffset=Math.floor(T.length/3),w=r(i.titleFont,i.title).data,b=i.titleSize,y=0;y<w.length;y+=2)T.push(w[y]*b,-w[y+1]*b,0);this.titleCount=Math.floor(T.length/3)-this.titleOffset,this.vbo.update(T)},c.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(v,k,x){k.exports=function(s){var a=s.gl,p=e(a,[a.drawingBufferWidth,a.drawingBufferHeight]),c=new d(a,p);return c.grid=t(c),c.text=r(c),c.line=l(c),c.box=n(c),c.update(s),c};var e=v("gl-select-static"),t=v("./lib/grid"),r=v("./lib/text"),l=v("./lib/line"),n=v("./lib/box");function d(s,a){this.gl=s,this.pickBuffer=a,this.screenBox=[0,0,s.drawingBufferWidth,s.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var u=d.prototype;function o(s){for(var a=s.slice(),p=0;p<a.length;++p)a[p]=a[p].slice();return a}function h(s,a){return s.x-a.x}u.setDirty=function(){this.dirty=this.pickDirty=!0},u.setOverlayDirty=function(){this.dirty=!0},u.nextDepthValue=function(){return this._depthCounter++/65536},u.draw=function(){var s=this.gl,a=this.screenBox,p=this.viewBox,c=this.dataBox,i=this.pixelRatio,y=this.grid,f=this.line,w=this.text,b=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,s.bindFramebuffer(s.FRAMEBUFFER,null),s.enable(s.SCISSOR_TEST),s.disable(s.DEPTH_TEST),s.depthFunc(s.LESS),s.depthMask(!1),s.enable(s.BLEND),s.blendEquation(s.FUNC_ADD,s.FUNC_ADD),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),this.borderColor){s.scissor(a[0],a[1],a[2]-a[0],a[3]-a[1]);var _=this.borderColor;s.clearColor(_[0]*_[3],_[1]*_[3],_[2]*_[3],_[3]),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT)}s.scissor(p[0],p[1],p[2]-p[0],p[3]-p[1]),s.viewport(p[0],p[1],p[2]-p[0],p[3]-p[1]);var T=this.backgroundColor;s.clearColor(T[0]*T[3],T[1]*T[3],T[2]*T[3],T[3]),s.clear(s.COLOR_BUFFER_BIT),y.draw();var L=this.zeroLineEnable,A=this.zeroLineColor,I=this.zeroLineWidth;if(L[0]||L[1]){f.bind();for(var P=0;P<2;++P)if(L[P]&&c[P]<=0&&c[P+2]>=0){var S=a[P]-c[P]*(a[P+2]-a[P])/(c[P+2]-c[P]);P===0?f.drawLine(S,a[1],S,a[3],I[P],A[P]):f.drawLine(a[0],S,a[2],S,I[P],A[P])}}for(P=0;P<b.length;++P)b[P].draw();s.viewport(a[0],a[1],a[2]-a[0],a[3]-a[1]),s.scissor(a[0],a[1],a[2]-a[0],a[3]-a[1]),this.grid.drawTickMarks(),f.bind();var E=this.borderLineEnable,z=this.borderLineWidth,D=this.borderLineColor;for(E[1]&&f.drawLine(p[0],p[1]-.5*z[1]*i,p[0],p[3]+.5*z[3]*i,z[1],D[1]),E[0]&&f.drawLine(p[0]-.5*z[0]*i,p[1],p[2]+.5*z[2]*i,p[1],z[0],D[0]),E[3]&&f.drawLine(p[2],p[1]-.5*z[1]*i,p[2],p[3]+.5*z[3]*i,z[3],D[3]),E[2]&&f.drawLine(p[0]-.5*z[0]*i,p[3],p[2]+.5*z[2]*i,p[3],z[2],D[2]),w.bind(),P=0;P<2;++P)w.drawTicks(P);this.titleEnable&&w.drawTitle();var U=this.overlays;for(P=0;P<U.length;++P)U[P].draw();s.disable(s.SCISSOR_TEST),s.disable(s.BLEND),s.depthMask(!0)}},u.drawPick=function(){if(!this.static){var s=this.pickBuffer;this.gl,this._pickTimeout=null,s.begin();for(var a=1,p=this.objects,c=0;c<p.length;++c)a=p[c].drawPick(a);s.end()}},u.pick=function(s,a){if(!this.static){var p=this.pixelRatio,c=this.pickPixelRatio,i=this.viewBox,y=0|Math.round((s-i[0]/p)*c),f=0|Math.round((a-i[1]/p)*c),w=this.pickBuffer.query(y,f,this.pickRadius);if(!w)return null;for(var b=w.id+(w.value[0]<<8)+(w.value[1]<<16)+(w.value[2]<<24),_=this.objects,T=0;T<_.length;++T){var L=_[T].pick(y,f,b);if(L)return L}return null}},u.setScreenBox=function(s){var a=this.screenBox,p=this.pixelRatio;a[0]=0|Math.round(s[0]*p),a[1]=0|Math.round(s[1]*p),a[2]=0|Math.round(s[2]*p),a[3]=0|Math.round(s[3]*p),this.setDirty()},u.setDataBox=function(s){var a=this.dataBox;(a[0]!==s[0]||a[1]!==s[1]||a[2]!==s[2]||a[3]!==s[3])&&(a[0]=s[0],a[1]=s[1],a[2]=s[2],a[3]=s[3],this.setDirty())},u.setViewBox=function(s){var a=this.pixelRatio,p=this.viewBox;p[0]=0|Math.round(s[0]*a),p[1]=0|Math.round(s[1]*a),p[2]=0|Math.round(s[2]*a),p[3]=0|Math.round(s[3]*a);var c=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((s[2]-s[0])*c),0|Math.round((s[3]-s[1])*c)],this.setDirty()},u.update=function(s){s=s||{};var a=this.gl;this.pixelRatio=s.pixelRatio||1;var p=this.pixelRatio;this.pickPixelRatio=Math.max(p,1),this.setScreenBox(s.screenBox||[0,0,a.drawingBufferWidth/p,a.drawingBufferHeight/p]),this.screenBox,this.setViewBox(s.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/p,.125*(this.screenBox[3]-this.screenBox[1])/p,.875*(this.screenBox[2]-this.screenBox[0])/p,.875*(this.screenBox[3]-this.screenBox[1])/p]);var c=this.viewBox,i=(c[2]-c[0])/(c[3]-c[1]);this.setDataBox(s.dataBox||[-10,-10/i,10,10/i]),this.borderColor=s.borderColor!==!1&&(s.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(s.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(s.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(s.gridLineWidth||[1,1]).slice(),this.gridLineColor=o(s.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(s.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(s.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=o(s.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(s.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(s.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=o(s.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(s.titleCenter||[.5*(c[0]+c[2])/p,(c[3]+120)/p]).slice(),this.titleEnable=!("titleEnable"in s)||!!s.titleEnable,this.titleAngle=s.titleAngle||0,this.titleColor=(s.titleColor||[0,0,0,1]).slice(),this.labelPad=(s.labelPad||[15,15,15,15]).slice(),this.labelAngle=(s.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(s.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=o(s.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(s.tickPad||[15,15,15,15]).slice(),this.tickAngle=(s.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(s.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=o(s.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(s.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(s.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=o(s.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var y=s.ticks||[[],[]],f=this._tickBounds;f[0]=f[1]=1/0,f[2]=f[3]=-1/0;for(var w=0;w<2;++w){var b=y[w].slice(0);b.length!==0&&(b.sort(h),f[w]=Math.min(f[w],b[0].x),f[w+2]=Math.max(f[w+2],b[b.length-1].x))}this.grid.update({bounds:f,ticks:y}),this.text.update({bounds:f,ticks:y,labels:s.labels||["x","y"],labelSize:s.labelSize||[12,12],labelFont:s.labelFont||["sans-serif","sans-serif"],title:s.title||"",titleSize:s.titleSize||18,titleFont:s.titleFont||"sans-serif"}),this.static=!!s.static,this.setDirty()},u.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var s=this.objects.length-1;s>=0;--s)this.objects[s].dispose();for(this.objects.length=0,s=this.overlays.length-1;s>=0;--s)this.overlays[s].dispose();this.overlays.length=0,this.gl=null},u.addObject=function(s){this.objects.indexOf(s)<0&&(this.objects.push(s),this.setDirty())},u.removeObject=function(s){for(var a=this.objects,p=0;p<a.length;++p)if(a[p]===s){a.splice(p,1),this.setDirty();break}},u.addOverlay=function(s){this.overlays.indexOf(s)<0&&(this.overlays.push(s),this.setOverlayDirty())},u.removeOverlay=function(s){for(var a=this.overlays,p=0;p<a.length;++p)if(a[p]===s){a.splice(p,1),this.setOverlayDirty();break}}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(v,k,x){k.exports=function(u,o){u=u||document.body,o=o||{};var h=[.01,1/0];"distanceLimits"in o&&(h[0]=o.distanceLimits[0],h[1]=o.distanceLimits[1]),"zoomMin"in o&&(h[0]=o.zoomMin),"zoomMax"in o&&(h[1]=o.zoomMax);var s=t({center:o.center||[0,0,0],up:o.up||[0,1,0],eye:o.eye||[0,0,10],mode:o.mode||"orbit",distanceLimits:h}),a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],p=0,c=u.clientWidth,i=u.clientHeight,y={keyBindingMode:"rotate",enableWheel:!0,view:s,element:u,delay:o.delay||16,rotateSpeed:o.rotateSpeed||1,zoomSpeed:o.zoomSpeed||1,translateSpeed:o.translateSpeed||1,flipX:!!o.flipX,flipY:!!o.flipY,modes:s.modes,_ortho:o._ortho||o.projection&&o.projection.type==="orthographic"||!1,tick:function(){var f=e(),w=this.delay,b=f-2*w;s.idle(f-w),s.recalcMatrix(b),s.flush(f-(100+2*w));for(var _=!0,T=s.computedMatrix,L=0;L<16;++L)_=_&&a[L]===T[L],a[L]=T[L];var A=u.clientWidth===c&&u.clientHeight===i;return c=u.clientWidth,i=u.clientHeight,_?!A:(p=Math.exp(s.computedRadius[0]),!0)},lookAt:function(f,w,b){s.lookAt(s.lastT(),f,w,b)},rotate:function(f,w,b){s.rotate(s.lastT(),f,w,b)},pan:function(f,w,b){s.pan(s.lastT(),f,w,b)},translate:function(f,w,b){s.translate(s.lastT(),f,w,b)}};return Object.defineProperties(y,{matrix:{get:function(){return s.computedMatrix},set:function(f){return s.setMatrix(s.lastT(),f),s.computedMatrix},enumerable:!0},mode:{get:function(){return s.getMode()},set:function(f){var w=s.computedUp.slice(),b=s.computedEye.slice(),_=s.computedCenter.slice();if(s.setMode(f),f==="turntable"){var T=e();s._active.lookAt(T,b,_,w),s._active.lookAt(T+500,b,_,[0,0,1]),s._active.flush(T)}return s.getMode()},enumerable:!0},center:{get:function(){return s.computedCenter},set:function(f){return s.lookAt(s.lastT(),null,f),s.computedCenter},enumerable:!0},eye:{get:function(){return s.computedEye},set:function(f){return s.lookAt(s.lastT(),f),s.computedEye},enumerable:!0},up:{get:function(){return s.computedUp},set:function(f){return s.lookAt(s.lastT(),null,null,f),s.computedUp},enumerable:!0},distance:{get:function(){return p},set:function(f){return s.setDistance(s.lastT(),f),f},enumerable:!0},distanceLimits:{get:function(){return s.getDistanceLimits(h)},set:function(f){return s.setDistanceLimits(f),f},enumerable:!0}}),u.addEventListener("contextmenu",function(f){return f.preventDefault(),!1}),y._lastX=-1,y._lastY=-1,y._lastMods={shift:!1,control:!1,alt:!1,meta:!1},y.enableMouseListeners=function(){function f(w,b,_,T){var L=y.keyBindingMode;if(L!==!1){var A=L==="rotate",I=L==="pan",P=L==="zoom",S=!!T.control,E=!!T.alt,z=!!T.shift,D=!!(1&w),U=!!(2&w),H=!!(4&w),Y=1/u.clientHeight,J=Y*(b-y._lastX),W=Y*(_-y._lastY),Z=y.flipX?1:-1,re=y.flipY?1:-1,V=Math.PI*y.rotateSpeed,B=e();if(y._lastX!==-1&&y._lastY!==-1&&((A&&D&&!S&&!E&&!z||D&&!S&&!E&&z)&&s.rotate(B,Z*V*J,-re*V*W,0),(I&&D&&!S&&!E&&!z||U||D&&S&&!E&&!z)&&s.pan(B,-y.translateSpeed*J*p,y.translateSpeed*W*p,0),P&&D&&!S&&!E&&!z||H||D&&!S&&E&&!z)){var j=-y.zoomSpeed*W/window.innerHeight*(B-s.lastT())*100;s.pan(B,0,0,p*(Math.exp(j)-1))}return y._lastX=b,y._lastY=_,y._lastMods=T,!0}}y.mouseListener=r(u,f),u.addEventListener("touchstart",function(w){var b=n(w.changedTouches[0],u);f(0,b[0],b[1],y._lastMods),f(1,b[0],b[1],y._lastMods)},!!d&&{passive:!0}),u.addEventListener("touchmove",function(w){var b=n(w.changedTouches[0],u);f(1,b[0],b[1],y._lastMods),w.preventDefault()},!!d&&{passive:!1}),u.addEventListener("touchend",function(w){f(0,y._lastX,y._lastY,y._lastMods)},!!d&&{passive:!0}),y.wheelListener=l(u,function(w,b){if(y.keyBindingMode!==!1&&y.enableWheel){var _=y.flipX?1:-1,T=y.flipY?1:-1,L=e();if(Math.abs(w)>Math.abs(b))s.rotate(L,0,0,-w*_*Math.PI*y.rotateSpeed/window.innerWidth);else if(!y._ortho){var A=-y.zoomSpeed*T*b/window.innerHeight*(L-s.lastT())/20;s.pan(L,0,0,p*(Math.exp(A)-1))}}},!0)},y.enableMouseListeners(),y};var e=v("right-now"),t=v("3d-view"),r=v("mouse-change"),l=v("mouse-wheel"),n=v("mouse-event-offset"),d=v("has-passive-events")},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(v,k,x){var e=v("glslify"),t=v("gl-shader"),r=e([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),l=e([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);k.exports=function(n){return t(n,r,l,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(v,k,x){var e=v("./camera.js"),t=v("gl-axes3d"),r=v("gl-axes3d/properties"),l=v("gl-spikes3d"),n=v("gl-select-static"),d=v("gl-fbo"),u=v("a-big-triangle"),o=v("mouse-change"),h=v("gl-mat4/perspective"),s=v("gl-mat4/ortho"),a=v("./lib/shader"),p=v("is-mobile")({tablet:!0,featureDetect:!0});function c(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function i(f){var w=Math.round(Math.log(Math.abs(f))/Math.log(10));if(w<0){var b=Math.round(Math.pow(10,-w));return Math.ceil(f*b)/b}return w>0?(b=Math.round(Math.pow(10,w)),Math.ceil(f/b)*b):Math.ceil(f)}function y(f){return typeof f!="boolean"||f}k.exports={createScene:function(f){(f=f||{}).camera=f.camera||{};var w=f.canvas;w||(w=document.createElement("canvas"),f.container?f.container.appendChild(w):document.body.appendChild(w));var b=f.gl;if(b||(f.glOptions&&(p=!!f.glOptions.preserveDrawingBuffer),b=function(fe,ye){var Ae=null;try{(Ae=fe.getContext("webgl",ye))||(Ae=fe.getContext("experimental-webgl",ye))}catch{return null}return Ae}(w,f.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:p})),!b)throw new Error("webgl not supported");var _=f.bounds||[[-10,-10,-10],[10,10,10]],T=new c,L=d(b,b.drawingBufferWidth,b.drawingBufferHeight,{preferFloat:!p}),A=a(b),I=f.cameraObject&&f.cameraObject._ortho===!0||f.camera.projection&&f.camera.projection.type==="orthographic"||!1,P={eye:f.camera.eye||[2,0,0],center:f.camera.center||[0,0,0],up:f.camera.up||[0,1,0],zoomMin:f.camera.zoomMax||.1,zoomMax:f.camera.zoomMin||100,mode:f.camera.mode||"turntable",_ortho:I},S=f.axes||{},E=t(b,S);E.enable=!S.disable;var z=f.spikes||{},D=l(b,z),U=[],H=[],Y=[],J=[],W=!0,Z=!0,re=new Array(16),V=new Array(16),B={view:null,projection:re,model:V,_ortho:!1},j=(Z=!0,[b.drawingBufferWidth,b.drawingBufferHeight]),ee=f.cameraObject||e(w,P),N={gl:b,contextLost:!1,pixelRatio:f.pixelRatio||1,canvas:w,selection:T,camera:ee,axes:E,axesPixels:null,spikes:D,bounds:_,objects:U,shape:j,aspect:f.aspectRatio||[1,1,1],pickRadius:f.pickRadius||10,zNear:f.zNear||.01,zFar:f.zFar||1e3,fovy:f.fovy||Math.PI/4,clearColor:f.clearColor||[0,0,0,0],autoResize:y(f.autoResize),autoBounds:y(f.autoBounds),autoScale:!!f.autoScale,autoCenter:y(f.autoCenter),clipToBounds:y(f.clipToBounds),snapToData:!!f.snapToData,onselect:f.onselect||null,onrender:f.onrender||null,onclick:f.onclick||null,cameraParams:B,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(fe){this.aspect[0]=fe.x,this.aspect[1]=fe.y,this.aspect[2]=fe.z,Z=!0},setBounds:function(fe,ye){this.bounds[0][fe]=ye.min,this.bounds[1][fe]=ye.max},setClearColor:function(fe){this.clearColor=fe},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},$=[b.drawingBufferWidth/N.pixelRatio|0,b.drawingBufferHeight/N.pixelRatio|0];function K(){if(!N._stopped&&N.autoResize){var fe=w.parentNode,ye=1,Ae=1;fe&&fe!==document.body?(ye=fe.clientWidth,Ae=fe.clientHeight):(ye=window.innerWidth,Ae=window.innerHeight);var pe=0|Math.ceil(ye*N.pixelRatio),ge=0|Math.ceil(Ae*N.pixelRatio);if(pe!==w.width||ge!==w.height){w.width=pe,w.height=ge;var we=w.style;we.position=we.position||"absolute",we.left="0px",we.top="0px",we.width=ye+"px",we.height=Ae+"px",W=!0}}}N.autoResize&&K();function te(){for(var fe=U.length,ye=J.length,Ae=0;Ae<ye;++Ae)Y[Ae]=0;e:for(Ae=0;Ae<fe;++Ae){var pe=U[Ae],ge=pe.pickSlots;if(ge){for(var we=0;we<ye;++we)if(Y[we]+ge<255){H[Ae]=we,pe.setPickBase(Y[we]+1),Y[we]+=ge;continue e}var oe=n(b,j);H[Ae]=ye,J.push(oe),Y.push(ge),pe.setPickBase(1),ye+=1}else H[Ae]=-1}for(;ye>0&&Y[ye-1]===0;)Y.pop(),J.pop().dispose()}function ie(){if(N.contextLost)return!0;b.isContextLost()&&(N.contextLost=!0,N.mouseListener.enabled=!1,N.selection.object=null,N.oncontextloss&&N.oncontextloss())}window.addEventListener("resize",K),N.update=function(fe){N._stopped||(W=!0,Z=!0)},N.add=function(fe){N._stopped||(fe.axes=E,U.push(fe),H.push(-1),W=!0,Z=!0,te())},N.remove=function(fe){if(!N._stopped){var ye=U.indexOf(fe);ye<0||(U.splice(ye,1),H.pop(),W=!0,Z=!0,te())}},N.dispose=function(){if(!N._stopped&&(N._stopped=!0,window.removeEventListener("resize",K),w.removeEventListener("webglcontextlost",ie),N.mouseListener.enabled=!1,!N.contextLost)){E.dispose(),D.dispose();for(var fe=0;fe<U.length;++fe)U[fe].dispose();for(L.dispose(),fe=0;fe<J.length;++fe)J[fe].dispose();A.dispose(),b=null,E=null,D=null,U=[]}},N._mouseRotating=!1,N._prevButtons=0,N.enableMouseListeners=function(){N.mouseListener=o(w,function(fe,ye,Ae){if(!N._stopped){var pe=J.length,ge=U.length,we=T.object;T.distance=1/0,T.mouse[0]=ye,T.mouse[1]=Ae,T.object=null,T.screen=null,T.dataCoordinate=T.dataPosition=null;var oe=!1;if(fe&&N._prevButtons)N._mouseRotating=!0;else{N._mouseRotating&&(Z=!0),N._mouseRotating=!1;for(var de=0;de<pe;++de){var Te=J[de].query(ye,$[1]-Ae-1,N.pickRadius);if(Te){if(Te.distance>T.distance)continue;for(var Ee=0;Ee<ge;++Ee){var Me=U[Ee];if(H[Ee]===de){var De=Me.pick(Te);De&&(T.buttons=fe,T.screen=Te.coord,T.distance=Te.distance,T.object=Me,T.index=De.distance,T.dataPosition=De.position,T.dataCoordinate=De.dataCoordinate,T.data=De,oe=!0)}}}}}we&&we!==T.object&&(we.highlight&&we.highlight(null),W=!0),T.object&&(T.object.highlight&&T.object.highlight(T.data),W=!0),(oe=oe||T.object!==we)&&N.onselect&&N.onselect(T),1&fe&&!(1&N._prevButtons)&&N.onclick&&N.onclick(T),N._prevButtons=fe}})},w.addEventListener("webglcontextlost",ie);var le=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],se=[le[0].slice(),le[1].slice()];function ve(){if(!ie()){K();var fe=N.camera.tick();B.view=N.camera.matrix,W=W||fe,Z=Z||fe,E.pixelRatio=N.pixelRatio,D.pixelRatio=N.pixelRatio;var ye=U.length,Ae=le[0],pe=le[1];Ae[0]=Ae[1]=Ae[2]=1/0,pe[0]=pe[1]=pe[2]=-1/0;for(var ge=0;ge<ye;++ge){(Pe=U[ge]).pixelRatio=N.pixelRatio,Pe.axes=N.axes,W=W||!!Pe.dirty,Z=Z||!!Pe.dirty;var we=Pe.bounds;if(we)for(var oe=we[0],de=we[1],Te=0;Te<3;++Te)Ae[Te]=Math.min(Ae[Te],oe[Te]),pe[Te]=Math.max(pe[Te],de[Te])}var Ee=N.bounds;if(N.autoBounds)for(Te=0;Te<3;++Te){if(pe[Te]<Ae[Te])Ae[Te]=-1,pe[Te]=1;else{Ae[Te]===pe[Te]&&(Ae[Te]-=1,pe[Te]+=1);var Me=.05*(pe[Te]-Ae[Te]);Ae[Te]=Ae[Te]-Me,pe[Te]=pe[Te]+Me}Ee[0][Te]=Ae[Te],Ee[1][Te]=pe[Te]}var De=!1;for(Te=0;Te<3;++Te)De=De||se[0][Te]!==Ee[0][Te]||se[1][Te]!==Ee[1][Te],se[0][Te]=Ee[0][Te],se[1][Te]=Ee[1][Te];if(Z=Z||De,W=W||De){if(De){var Ie=[0,0,0];for(ge=0;ge<3;++ge)Ie[ge]=i((Ee[1][ge]-Ee[0][ge])/10);E.autoTicks?E.update({bounds:Ee,tickSpacing:Ie}):E.update({bounds:Ee})}var Oe=b.drawingBufferWidth,Ze=b.drawingBufferHeight;for(j[0]=Oe,j[1]=Ze,$[0]=0|Math.max(Oe/N.pixelRatio,1),$[1]=0|Math.max(Ze/N.pixelRatio,1),function(ze,Ge){var $e=ze.bounds,ot=ze.cameraParams,vt=ot.projection,bt=ot.model,yt=ze.gl.drawingBufferWidth,tt=ze.gl.drawingBufferHeight,Ke=ze.zNear,mt=ze.zFar,Ft=ze.fovy,Vt=yt/tt;Ge?(s(vt,-Vt,Vt,-1,1,Ke,mt),ot._ortho=!0):(h(vt,Ft,Vt,Ke,mt),ot._ortho=!1);for(var Xt=0;Xt<16;++Xt)bt[Xt]=0;bt[15]=1;var Gt=0;for(Xt=0;Xt<3;++Xt)Gt=Math.max(Gt,$e[1][Xt]-$e[0][Xt]);for(Xt=0;Xt<3;++Xt)ze.autoScale?bt[5*Xt]=ze.aspect[Xt]/($e[1][Xt]-$e[0][Xt]):bt[5*Xt]=1/Gt,ze.autoCenter&&(bt[12+Xt]=.5*-bt[5*Xt]*($e[0][Xt]+$e[1][Xt]))}(N,I),ge=0;ge<ye;++ge)(Pe=U[ge]).axesBounds=Ee,N.clipToBounds&&(Pe.clipBounds=Ee);T.object&&(N.snapToData?D.position=T.dataCoordinate:D.position=T.dataPosition,D.bounds=Ee),Z&&(Z=!1,function(){if(!ie()){b.colorMask(!0,!0,!0,!0),b.depthMask(!0),b.disable(b.BLEND),b.enable(b.DEPTH_TEST),b.depthFunc(b.LEQUAL);for(var ze=U.length,Ge=J.length,$e=0;$e<Ge;++$e){var ot=J[$e];ot.shape=$,ot.begin();for(var vt=0;vt<ze;++vt)if(H[vt]===$e){var bt=U[vt];bt.drawPick&&(bt.pixelRatio=1,bt.drawPick(B))}ot.end()}}}()),N.axesPixels=r(N.axes,B,Oe,Ze),N.onrender&&N.onrender(),b.bindFramebuffer(b.FRAMEBUFFER,null),b.viewport(0,0,Oe,Ze),N.clearRGBA(),b.depthMask(!0),b.colorMask(!0,!0,!0,!0),b.enable(b.DEPTH_TEST),b.depthFunc(b.LEQUAL),b.disable(b.BLEND),b.disable(b.CULL_FACE);var Fe=!1;for(E.enable&&(Fe=Fe||E.isTransparent(),E.draw(B)),D.axes=E,T.object&&D.draw(B),b.disable(b.CULL_FACE),ge=0;ge<ye;++ge)(Pe=U[ge]).axes=E,Pe.pixelRatio=N.pixelRatio,Pe.isOpaque&&Pe.isOpaque()&&Pe.draw(B),Pe.isTransparent&&Pe.isTransparent()&&(Fe=!0);if(Fe){for(L.shape=j,L.bind(),b.clear(b.DEPTH_BUFFER_BIT),b.colorMask(!1,!1,!1,!1),b.depthMask(!0),b.depthFunc(b.LESS),E.enable&&E.isTransparent()&&E.drawTransparent(B),ge=0;ge<ye;++ge)(Pe=U[ge]).isOpaque&&Pe.isOpaque()&&Pe.draw(B);for(b.enable(b.BLEND),b.blendEquation(b.FUNC_ADD),b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA),b.colorMask(!0,!0,!0,!0),b.depthMask(!1),b.clearColor(0,0,0,0),b.clear(b.COLOR_BUFFER_BIT),E.isTransparent()&&E.drawTransparent(B),ge=0;ge<ye;++ge){var Pe;(Pe=U[ge]).isTransparent&&Pe.isTransparent()&&Pe.drawTransparent(B)}b.bindFramebuffer(b.FRAMEBUFFER,null),b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA),b.disable(b.DEPTH_TEST),A.bind(),L.color[0].bind(0),A.uniforms.accumBuffer=0,u(b),b.disable(b.BLEND)}for(W=!1,ge=0;ge<ye;++ge)U[ge].dirty=!1}}}return N.enableMouseListeners(),function fe(){N._stopped||N.contextLost||(ve(),requestAnimationFrame(fe))}(),N.redraw=function(){N._stopped||(W=!0,ve())},N},createCamera:e}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(v,k,x){var e=v("glslify");x.pointVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),x.pointFragment=e([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),x.pickVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),x.pickFragment=e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},{glslify:231}],123:[function(v,k,x){var e=v("gl-shader"),t=v("gl-buffer"),r=v("typedarray-pool"),l=v("./lib/shader");function n(h,s,a,p,c){this.plot=h,this.offsetBuffer=s,this.pickBuffer=a,this.shader=p,this.pickShader=c,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}k.exports=function(h,s){var a=h.gl,p=t(a),c=t(a),i=e(a,l.pointVertex,l.pointFragment),y=e(a,l.pickVertex,l.pickFragment),f=new n(h,p,c,i,y);return f.update(s),h.addObject(f),f};var d,u,o=n.prototype;o.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},o.update=function(h){var s;function a(b,_){return b in h?h[b]:_}h=h||{},this.sizeMin=a("sizeMin",.5),this.sizeMax=a("sizeMax",20),this.color=a("color",[1,0,0,1]).slice(),this.areaRatio=a("areaRatio",1),this.borderColor=a("borderColor",[0,0,0,1]).slice(),this.blend=a("blend",!1);var p=h.positions.length>>>1,c=h.positions instanceof Float32Array,i=h.idToIndex instanceof Int32Array&&h.idToIndex.length>=p,y=h.positions,f=c?y:r.mallocFloat32(y.length),w=i?h.idToIndex:r.mallocInt32(p);if(c||f.set(y),!i)for(f.set(y),s=0;s<p;s++)w[s]=s;this.points=y,this.offsetBuffer.update(f),this.pickBuffer.update(w),c||r.free(f),i||r.free(w),this.pointCount=p,this.pickOffset=0},o.unifiedDraw=(d=[1,0,0,0,1,0,0,0,1],u=[0,0,0,0],function(h){var s=h!==void 0,a=s?this.pickShader:this.shader,p=this.plot.gl,c=this.plot.dataBox;if(this.pointCount===0)return h;var i=c[2]-c[0],y=c[3]-c[1],f=function(T,L){var A,I=0,P=T.length>>>1;for(A=0;A<P;A++){var S=T[2*A],E=T[2*A+1];S>=L[0]&&S<=L[2]&&E>=L[1]&&E<=L[3]&&I++}return I}(this.points,c),w=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(f,.33333)));d[0]=2/i,d[4]=2/y,d[6]=-2*c[0]/i-1,d[7]=-2*c[1]/y-1,this.offsetBuffer.bind(),a.bind(),a.attributes.position.pointer(),a.uniforms.matrix=d,a.uniforms.color=this.color,a.uniforms.borderColor=this.borderColor,a.uniforms.pointCloud=w<5,a.uniforms.pointSize=w,a.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),s&&(u[0]=255&h,u[1]=h>>8&255,u[2]=h>>16&255,u[3]=h>>24&255,this.pickBuffer.bind(),a.attributes.pickId.pointer(p.UNSIGNED_BYTE),a.uniforms.pickOffset=u,this.pickOffset=h);var b=p.getParameter(p.BLEND),_=p.getParameter(p.DITHER);return b&&!this.blend&&p.disable(p.BLEND),_&&p.disable(p.DITHER),p.drawArrays(p.POINTS,0,this.pointCount),b&&!this.blend&&p.enable(p.BLEND),_&&p.enable(p.DITHER),h+this.pointCount}),o.draw=o.unifiedDraw,o.drawPick=o.unifiedDraw,o.pick=function(h,s,a){var p=this.pickOffset,c=this.pointCount;if(a<p||a>=p+c)return null;var i=a-p,y=this.points;return{object:this,pointId:i,dataCoord:[y[2*i],y[2*i+1]]}}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(v,k,x){k.exports=function(e,t,r,l){var n,d,u,o,h,s=t[0],a=t[1],p=t[2],c=t[3],i=r[0],y=r[1],f=r[2],w=r[3];return(d=s*i+a*y+p*f+c*w)<0&&(d=-d,i=-i,y=-y,f=-f,w=-w),1-d>1e-6?(n=Math.acos(d),u=Math.sin(n),o=Math.sin((1-l)*n)/u,h=Math.sin(l*n)/u):(o=1-l,h=l),e[0]=o*s+h*i,e[1]=o*a+h*y,e[2]=o*p+h*f,e[3]=o*c+h*w,e}},{}],125:[function(v,k,x){k.exports=function(e){return e||e===0?e.toString():""}},{}],126:[function(v,k,x){var e=v("vectorize-text");k.exports=function(r,l,n){var d=t[l];if(d||(d=t[l]={}),r in d)return d[r];var u={textAlign:"center",textBaseline:"middle",lineHeight:1,font:l,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},o=e(r,u);u.triangles=!1;var h,s,a=e(r,u);if(n&&n!==1){for(h=0;h<o.positions.length;++h)for(s=0;s<o.positions[h].length;++s)o.positions[h][s]/=n;for(h=0;h<a.positions.length;++h)for(s=0;s<a.positions[h].length;++s)a.positions[h][s]/=n}var p=[[1/0,1/0],[-1/0,-1/0]],c=a.positions.length;for(h=0;h<c;++h){var i=a.positions[h];for(s=0;s<2;++s)p[0][s]=Math.min(p[0][s],i[s]),p[1][s]=Math.max(p[1][s],i[s])}return d[r]=[o,a,p]};var t={}},{"vectorize-text":311}],127:[function(v,k,x){var e=v("gl-shader"),t=v("glslify"),r=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),l=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),n=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),d=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),u=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),o=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],h={vertex:r,fragment:d,attributes:o},s={vertex:l,fragment:d,attributes:o},a={vertex:n,fragment:d,attributes:o},p={vertex:r,fragment:u,attributes:o},c={vertex:l,fragment:u,attributes:o},i={vertex:n,fragment:u,attributes:o};function y(f,w){var b=e(f,w),_=b.attributes;return _.position.location=0,_.color.location=1,_.glyph.location=2,_.id.location=3,b}x.createPerspective=function(f){return y(f,h)},x.createOrtho=function(f){return y(f,s)},x.createProject=function(f){return y(f,a)},x.createPickPerspective=function(f){return y(f,p)},x.createPickOrtho=function(f){return y(f,c)},x.createPickProject=function(f){return y(f,i)}},{"gl-shader":132,glslify:231}],128:[function(v,k,x){var e=v("is-string-blank"),t=v("gl-buffer"),r=v("gl-vao"),l=v("typedarray-pool"),n=v("gl-mat4/multiply"),d=v("./lib/shaders"),u=v("./lib/glyphs"),o=v("./lib/get-simple-string"),h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(Y,J){var W=Y[0],Z=Y[1],re=Y[2],V=Y[3];return Y[0]=J[0]*W+J[4]*Z+J[8]*re+J[12]*V,Y[1]=J[1]*W+J[5]*Z+J[9]*re+J[13]*V,Y[2]=J[2]*W+J[6]*Z+J[10]*re+J[14]*V,Y[3]=J[3]*W+J[7]*Z+J[11]*re+J[15]*V,Y}function a(Y,J,W,Z){return s(Z,Z),s(Z,Z),s(Z,Z)}function p(Y,J){this.index=Y,this.dataCoordinate=this.position=J}function c(Y){return Y===!0||Y>1?1:Y}function i(Y,J,W,Z,re,V,B,j,ee,N,$,K){this.gl=Y,this.pixelRatio=1,this.shader=J,this.orthoShader=W,this.projectShader=Z,this.pointBuffer=re,this.colorBuffer=V,this.glyphBuffer=B,this.idBuffer=j,this.vao=ee,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=N,this.pickOrthoShader=$,this.pickProjectShader=K,this.points=[],this._selectResult=new p(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}k.exports=function(Y){var J=Y.gl,W=d.createPerspective(J),Z=d.createOrtho(J),re=d.createProject(J),V=d.createPickPerspective(J),B=d.createPickOrtho(J),j=d.createPickProject(J),ee=t(J),N=t(J),$=t(J),K=t(J),te=r(J,[{buffer:ee,size:3,type:J.FLOAT},{buffer:N,size:4,type:J.FLOAT},{buffer:$,size:2,type:J.FLOAT},{buffer:K,size:4,type:J.UNSIGNED_BYTE,normalized:!0}]),ie=new i(J,W,Z,re,ee,N,$,K,te,V,B,j);return ie.update(Y),ie};var y=i.prototype;y.pickSlots=1,y.setPickBase=function(Y){this.pickId=Y},y.isTransparent=function(){if(this.hasAlpha)return!0;for(var Y=0;Y<3;++Y)if(this.axesProject[Y]&&this.projectHasAlpha)return!0;return!1},y.isOpaque=function(){if(!this.hasAlpha)return!0;for(var Y=0;Y<3;++Y)if(this.axesProject[Y]&&!this.projectHasAlpha)return!0;return!1};var f=[0,0],w=[0,0,0],b=[0,0,0],_=[0,0,0,1],T=[0,0,0,1],L=h.slice(),A=[0,0,0],I=[[0,0,0],[0,0,0]];function P(Y){return Y[0]=Y[1]=Y[2]=0,Y}function S(Y,J){return Y[0]=J[0],Y[1]=J[1],Y[2]=J[2],Y[3]=1,Y}function E(Y,J,W,Z){return Y[0]=J[0],Y[1]=J[1],Y[2]=J[2],Y[W]=Z,Y}function z(Y,J,W,Z){var re,V=J.axesProject,B=J.gl,j=Y.uniforms,ee=W.model||h,N=W.view||h,$=W.projection||h,K=J.axesBounds,te=function(Ee){for(var Me=I,De=0;De<2;++De)for(var Ie=0;Ie<3;++Ie)Me[De][Ie]=Math.max(Math.min(Ee[De][Ie],1e8),-1e8);return Me}(J.clipBounds);re=J.axes&&J.axes.lastCubeProps?J.axes.lastCubeProps.axis:[1,1,1],f[0]=2/B.drawingBufferWidth,f[1]=2/B.drawingBufferHeight,Y.bind(),j.view=N,j.projection=$,j.screenSize=f,j.highlightId=J.highlightId,j.highlightScale=J.highlightScale,j.clipBounds=te,j.pickGroup=J.pickId/255,j.pixelRatio=Z;for(var ie=0;ie<3;++ie)if(V[ie]){j.scale=J.projectScale[ie],j.opacity=J.projectOpacity[ie];for(var le=L,se=0;se<16;++se)le[se]=0;for(se=0;se<4;++se)le[5*se]=1;le[5*ie]=0,re[ie]<0?le[12+ie]=K[0][ie]:le[12+ie]=K[1][ie],n(le,ee,le),j.model=le;var ve=(ie+1)%3,fe=(ie+2)%3,ye=P(w),Ae=P(b);ye[ve]=1,Ae[fe]=1;var pe=a(0,0,0,S(_,ye)),ge=a(0,0,0,S(T,Ae));if(Math.abs(pe[1])>Math.abs(ge[1])){var we=pe;pe=ge,ge=we,we=ye,ye=Ae,Ae=we;var oe=ve;ve=fe,fe=oe}pe[0]<0&&(ye[ve]=-1),ge[1]>0&&(Ae[fe]=-1);var de=0,Te=0;for(se=0;se<4;++se)de+=Math.pow(ee[4*ve+se],2),Te+=Math.pow(ee[4*fe+se],2);ye[ve]/=Math.sqrt(de),Ae[fe]/=Math.sqrt(Te),j.axes[0]=ye,j.axes[1]=Ae,j.fragClipBounds[0]=E(A,te[0],ie,-1e8),j.fragClipBounds[1]=E(A,te[1],ie,1e8),J.vao.bind(),J.vao.draw(B.TRIANGLES,J.vertexCount),J.lineWidth>0&&(B.lineWidth(J.lineWidth*Z),J.vao.draw(B.LINES,J.lineVertexCount,J.vertexCount)),J.vao.unbind()}}var D=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function U(Y,J,W,Z,re,V,B){var j=W.gl;if((V===W.projectHasAlpha||B)&&z(J,W,Z,re),V===W.hasAlpha||B){Y.bind();var ee=Y.uniforms;ee.model=Z.model||h,ee.view=Z.view||h,ee.projection=Z.projection||h,f[0]=2/j.drawingBufferWidth,f[1]=2/j.drawingBufferHeight,ee.screenSize=f,ee.highlightId=W.highlightId,ee.highlightScale=W.highlightScale,ee.fragClipBounds=D,ee.clipBounds=W.axes.bounds,ee.opacity=W.opacity,ee.pickGroup=W.pickId/255,ee.pixelRatio=re,W.vao.bind(),W.vao.draw(j.TRIANGLES,W.vertexCount),W.lineWidth>0&&(j.lineWidth(W.lineWidth*re),W.vao.draw(j.LINES,W.lineVertexCount,W.vertexCount)),W.vao.unbind()}}function H(Y,J,W,Z){var re;re=Array.isArray(Y)?J<Y.length?Y[J]:void 0:Y,re=o(re);var V=!0;e(re)&&(re="\u25BC",V=!1);var B=u(re,W,Z);return{mesh:B[0],lines:B[1],bounds:B[2],visible:V}}y.draw=function(Y){U(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,Y,this.pixelRatio,!1,!1)},y.drawTransparent=function(Y){U(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,Y,this.pixelRatio,!0,!1)},y.drawPick=function(Y){U(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,Y,1,!0,!0)},y.pick=function(Y){if(!Y||Y.id!==this.pickId)return null;var J=Y.value[2]+(Y.value[1]<<8)+(Y.value[0]<<16);if(J>=this.pointCount||J<0)return null;var W=this.points[J],Z=this._selectResult;Z.index=J;for(var re=0;re<3;++re)Z.position[re]=Z.dataCoordinate[re]=W[re];return Z},y.highlight=function(Y){if(Y){var J=Y.index,W=255&J,Z=J>>8&255,re=J>>16&255;this.highlightId=[W/255,Z/255,re/255,0]}else this.highlightId=[1,1,1,1]},y.update=function(Y){if("perspective"in(Y=Y||{})&&(this.useOrtho=!Y.perspective),"orthographic"in Y&&(this.useOrtho=!!Y.orthographic),"lineWidth"in Y&&(this.lineWidth=Y.lineWidth),"project"in Y)if(Array.isArray(Y.project))this.axesProject=Y.project;else{var J=!!Y.project;this.axesProject=[J,J,J]}if("projectScale"in Y)if(Array.isArray(Y.projectScale))this.projectScale=Y.projectScale.slice();else{var W=+Y.projectScale;this.projectScale=[W,W,W]}if(this.projectHasAlpha=!1,"projectOpacity"in Y){Array.isArray(Y.projectOpacity)?this.projectOpacity=Y.projectOpacity.slice():(W=+Y.projectOpacity,this.projectOpacity=[W,W,W]);for(var Z=0;Z<3;++Z)this.projectOpacity[Z]=c(this.projectOpacity[Z]),this.projectOpacity[Z]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in Y&&(this.opacity=c(Y.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var re,V,B=Y.position,j=Y.font||"normal",ee=Y.alignment||[0,0];if(ee.length===2)re=ee[0],V=ee[1];else for(re=[],V=[],Z=0;Z<ee.length;++Z)re[Z]=ee[Z][0],V[Z]=ee[Z][1];var N=[1/0,1/0,1/0],$=[-1/0,-1/0,-1/0],K=Y.glyph,te=Y.color,ie=Y.size,le=Y.angle,se=Y.lineColor,ve=-1,fe=0,ye=0,Ae=0;if(B.length){Ae=B.length;e:for(Z=0;Z<Ae;++Z){for(var pe=B[Z],ge=0;ge<3;++ge)if(isNaN(pe[ge])||!isFinite(pe[ge]))continue e;var we=($e=H(K,Z,j,this.pixelRatio)).mesh,oe=$e.lines,de=$e.bounds;fe+=3*we.cells.length,ye+=2*oe.edges.length}}var Te=fe+ye,Ee=l.mallocFloat(3*Te),Me=l.mallocFloat(4*Te),De=l.mallocFloat(2*Te),Ie=l.mallocUint32(Te);if(Te>0){var Oe=0,Ze=fe,Fe=[0,0,0,1],Pe=[0,0,0,1],ze=Array.isArray(te)&&Array.isArray(te[0]),Ge=Array.isArray(se)&&Array.isArray(se[0]);e:for(Z=0;Z<Ae;++Z){for(ve+=1,pe=B[Z],ge=0;ge<3;++ge){if(isNaN(pe[ge])||!isFinite(pe[ge]))continue e;$[ge]=Math.max($[ge],pe[ge]),N[ge]=Math.min(N[ge],pe[ge])}we=($e=H(K,Z,j,this.pixelRatio)).mesh,oe=$e.lines,de=$e.bounds;var $e,ot=$e.visible;if(ot)if(Array.isArray(te)){if((vt=ze?Z<te.length?te[Z]:[0,0,0,0]:te).length===3){for(ge=0;ge<3;++ge)Fe[ge]=vt[ge];Fe[3]=1}else if(vt.length===4){for(ge=0;ge<4;++ge)Fe[ge]=vt[ge];!this.hasAlpha&&vt[3]<1&&(this.hasAlpha=!0)}}else Fe[0]=Fe[1]=Fe[2]=0,Fe[3]=1;else Fe=[1,1,1,0];if(ot)if(Array.isArray(se)){var vt;if((vt=Ge?Z<se.length?se[Z]:[0,0,0,0]:se).length===3){for(ge=0;ge<3;++ge)Pe[ge]=vt[ge];Pe[ge]=1}else if(vt.length===4){for(ge=0;ge<4;++ge)Pe[ge]=vt[ge];!this.hasAlpha&&vt[3]<1&&(this.hasAlpha=!0)}}else Pe[0]=Pe[1]=Pe[2]=0,Pe[3]=1;else Pe=[1,1,1,0];var bt=.5;ot?Array.isArray(ie)?bt=Z<ie.length?+ie[Z]:12:ie?bt=+ie:this.useOrtho&&(bt=12):bt=0;var yt=0;Array.isArray(le)?yt=Z<le.length?+le[Z]:0:le&&(yt=+le);var tt=Math.cos(yt),Ke=Math.sin(yt);for(pe=B[Z],ge=0;ge<3;++ge)$[ge]=Math.max($[ge],pe[ge]),N[ge]=Math.min(N[ge],pe[ge]);var mt=re,Ft=V;mt=0,Array.isArray(re)?mt=Z<re.length?re[Z]:0:re&&(mt=re),Ft=0,Array.isArray(V)?Ft=Z<V.length?V[Z]:0:V&&(Ft=V);var Vt=[mt*=mt>0?1-de[0][0]:mt<0?1+de[1][0]:1,Ft*=Ft>0?1-de[0][1]:Ft<0?1+de[1][1]:1],Xt=we.cells||[],Gt=we.positions||[];for(ge=0;ge<Xt.length;++ge)for(var nr=Xt[ge],It=0;It<3;++It){for(var Be=0;Be<3;++Be)Ee[3*Oe+Be]=pe[Be];for(Be=0;Be<4;++Be)Me[4*Oe+Be]=Fe[Be];Ie[Oe]=ve;var He=Gt[nr[It]];De[2*Oe]=bt*(tt*He[0]-Ke*He[1]+Vt[0]),De[2*Oe+1]=bt*(Ke*He[0]+tt*He[1]+Vt[1]),Oe+=1}for(Xt=oe.edges,Gt=oe.positions,ge=0;ge<Xt.length;++ge)for(nr=Xt[ge],It=0;It<2;++It){for(Be=0;Be<3;++Be)Ee[3*Ze+Be]=pe[Be];for(Be=0;Be<4;++Be)Me[4*Ze+Be]=Pe[Be];Ie[Ze]=ve,He=Gt[nr[It]],De[2*Ze]=bt*(tt*He[0]-Ke*He[1]+Vt[0]),De[2*Ze+1]=bt*(Ke*He[0]+tt*He[1]+Vt[1]),Ze+=1}}}this.bounds=[N,$],this.points=B,this.pointCount=B.length,this.vertexCount=fe,this.lineVertexCount=ye,this.pointBuffer.update(Ee),this.colorBuffer.update(Me),this.glyphBuffer.update(De),this.idBuffer.update(Ie),l.free(Ee),l.free(Me),l.free(De),l.free(Ie)},y.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(v,k,x){var e=v("glslify");x.boxVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),x.boxFragment=e([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},{glslify:231}],130:[function(v,k,x){var e=v("gl-shader"),t=v("gl-buffer"),r=v("./lib/shaders");function l(d,u,o){this.plot=d,this.boxBuffer=u,this.boxShader=o,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}k.exports=function(d,u){var o=d.gl,h=t(o,[0,0,0,1,1,0,1,1]),s=e(o,r.boxVertex,r.boxFragment),a=new l(d,h,s);return a.update(u),d.addOverlay(a),a};var n=l.prototype;n.draw=function(){if(this.enabled){var d=this.plot,u=this.selectBox,o=this.borderWidth,h=(this.innerFill,this.innerColor),s=(this.outerFill,this.outerColor),a=this.borderColor,p=d.box,c=d.screenBox,i=d.dataBox,y=d.viewBox,f=d.pixelRatio,w=(u[0]-i[0])*(y[2]-y[0])/(i[2]-i[0])+y[0],b=(u[1]-i[1])*(y[3]-y[1])/(i[3]-i[1])+y[1],_=(u[2]-i[0])*(y[2]-y[0])/(i[2]-i[0])+y[0],T=(u[3]-i[1])*(y[3]-y[1])/(i[3]-i[1])+y[1];if(w=Math.max(w,y[0]),b=Math.max(b,y[1]),_=Math.min(_,y[2]),T=Math.min(T,y[3]),!(_<w||T<b)){p.bind();var L=c[2]-c[0],A=c[3]-c[1];if(this.outerFill&&(p.drawBox(0,0,L,b,s),p.drawBox(0,b,w,T,s),p.drawBox(0,T,L,A,s),p.drawBox(_,b,L,T,s)),this.innerFill&&p.drawBox(w,b,_,T,h),o>0){var I=o*f;p.drawBox(w-I,b-I,_+I,b+I,a),p.drawBox(w-I,T-I,_+I,T+I,a),p.drawBox(w-I,b-I,w+I,T+I,a),p.drawBox(_-I,b-I,_+I,T+I,a)}}}},n.update=function(d){d=d||{},this.innerFill=!!d.innerFill,this.outerFill=!!d.outerFill,this.innerColor=(d.innerColor||[0,0,0,.5]).slice(),this.outerColor=(d.outerColor||[0,0,0,.5]).slice(),this.borderColor=(d.borderColor||[0,0,0,1]).slice(),this.borderWidth=d.borderWidth||0,this.selectBox=(d.selectBox||this.selectBox).slice()},n.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(v,k,x){k.exports=function(o,h){var s=h[0],a=h[1],p=e(o,s,a,{}),c=t.mallocUint8(s*a*4);return new d(o,p,c)};var e=v("gl-fbo"),t=v("typedarray-pool"),r=v("ndarray"),l=v("bit-twiddle").nextPow2;function n(o,h,s,a,p){this.coord=[o,h],this.id=s,this.value=a,this.distance=p}function d(o,h,s){this.gl=o,this.fbo=h,this.buffer=s,this._readTimeout=null;var a=this;this._readCallback=function(){a.gl&&(h.bind(),o.readPixels(0,0,h.shape[0],h.shape[1],o.RGBA,o.UNSIGNED_BYTE,a.buffer),a._readTimeout=null)}}var u=d.prototype;Object.defineProperty(u,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(o){if(this.gl){this.fbo.shape=o;var h=this.fbo.shape[0],s=this.fbo.shape[1];if(s*h*4>this.buffer.length){t.free(this.buffer);for(var a=this.buffer=t.mallocUint8(l(s*h*4)),p=0;p<s*h*4;++p)a[p]=255}return o}}}),u.begin=function(){var o=this.gl;this.shape,o&&(this.fbo.bind(),o.clearColor(1,1,1,1),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT))},u.end=function(){var o=this.gl;o&&(o.bindFramebuffer(o.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},u.query=function(o,h,s){if(!this.gl)return null;var a=this.fbo.shape.slice();o|=0,h|=0,typeof s!="number"&&(s=1);var p=0|Math.min(Math.max(o-s,0),a[0]),c=0|Math.min(Math.max(o+s,0),a[0]),i=0|Math.min(Math.max(h-s,0),a[1]),y=0|Math.min(Math.max(h+s,0),a[1]);if(c<=p||y<=i)return null;var f=[c-p,y-i],w=r(this.buffer,[f[0],f[1],4],[4,4*a[0],1],4*(p+a[0]*i)),b=function(L,A,I){for(var P=1e8,S=-1,E=-1,z=L.shape[0],D=L.shape[1],U=0;U<z;U++)for(var H=0;H<D;H++){var Y=L.get(U,H,0),J=L.get(U,H,1),W=L.get(U,H,2),Z=L.get(U,H,3);if(Y<255||J<255||W<255||Z<255){var re=A-U,V=I-H,B=re*re+V*V;B<P&&(P=B,S=U,E=H)}}return[S,E,P]}(w.hi(f[0],f[1],1),s,s),_=b[0],T=b[1];return _<0||Math.pow(this.radius,2)<b[2]?null:new n(_+p|0,T+i|0,w.get(_,T,0),[w.get(_,T,1),w.get(_,T,2),w.get(_,T,3)],Math.sqrt(b[2]))},u.dispose=function(){this.gl&&(this.fbo.dispose(),t.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(v,k,x){var e=v("./lib/create-uniforms"),t=v("./lib/create-attributes"),r=v("./lib/reflect"),l=v("./lib/shader-cache"),n=v("./lib/runtime-reflect"),d=v("./lib/GLError");function u(s){this.gl=s,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var o=u.prototype;function h(s,a){return s.name<a.name?-1:1}o.bind=function(){var s;this.program||this._relink();var a=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),p=this.gl.lastAttribCount;if(a>p)for(s=p;s<a;s++)this.gl.enableVertexAttribArray(s);else if(p>a)for(s=a;s<p;s++)this.gl.disableVertexAttribArray(s);this.gl.lastAttribCount=a,this.gl.useProgram(this.program)},o.dispose=function(){for(var s=this.gl.lastAttribCount,a=0;a<s;a++)this.gl.disableVertexAttribArray(a);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},o.update=function(s,a,p,c){if(!a||arguments.length===1){var i=s;s=i.vertex,a=i.fragment,p=i.uniforms,c=i.attributes}var y=this,f=y.gl,w=y._vref;y._vref=l.shader(f,f.VERTEX_SHADER,s),w&&w.dispose(),y.vertShader=y._vref.shader;var b=this._fref;if(y._fref=l.shader(f,f.FRAGMENT_SHADER,a),b&&b.dispose(),y.fragShader=y._fref.shader,!p||!c){var _=f.createProgram();if(f.attachShader(_,y.fragShader),f.attachShader(_,y.vertShader),f.linkProgram(_),!f.getProgramParameter(_,f.LINK_STATUS)){var T=f.getProgramInfoLog(_);throw new d(T,"Error linking program:"+T)}p=p||n.uniforms(f,_),c=c||n.attributes(f,_),f.deleteProgram(_)}(c=c.slice()).sort(h);var L,A=[],I=[],P=[];for(L=0;L<c.length;++L){var S=c[L];if(S.type.indexOf("mat")>=0){for(var E=0|S.type.charAt(S.type.length-1),z=new Array(E),D=0;D<E;++D)z[D]=P.length,I.push(S.name+"["+D+"]"),typeof S.location=="number"?P.push(S.location+D):Array.isArray(S.location)&&S.location.length===E&&typeof S.location[D]=="number"?P.push(0|S.location[D]):P.push(-1);A.push({name:S.name,type:S.type,locations:z})}else A.push({name:S.name,type:S.type,locations:[P.length]}),I.push(S.name),typeof S.location=="number"?P.push(0|S.location):P.push(-1)}var U=0;for(L=0;L<P.length;++L)if(P[L]<0){for(;P.indexOf(U)>=0;)U+=1;P[L]=U}var H=new Array(p.length);function Y(){y.program=l.program(f,y._vref,y._fref,I,P);for(var J=0;J<p.length;++J)H[J]=f.getUniformLocation(y.program,p[J].name)}Y(),y._relink=Y,y.types={uniforms:r(p),attributes:r(c)},y.attributes=t(f,y,A,P),Object.defineProperty(y,"uniforms",e(f,y,p,H))},k.exports=function(s,a,p,c,i){var y=new u(s);return y.update(a,p,c,i),y}},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(v,k,x){function e(t,r,l){this.shortMessage=r||"",this.longMessage=l||"",this.rawError=t||"",this.message="gl-shader: "+(r||t||"")+(l?`
`+l:""),this.stack=new Error().stack}e.prototype=new Error,e.prototype.name="GLError",e.prototype.constructor=e,k.exports=e},{}],134:[function(v,k,x){k.exports=function(u,o,h,s){for(var a={},p=0,c=h.length;p<c;++p){var i=h[p],y=i.name,f=i.type,w=i.locations;switch(f){case"bool":case"int":case"float":n(u,o,w[0],s,1,a,y);break;default:if(f.indexOf("vec")>=0){if((b=f.charCodeAt(f.length-1)-48)<2||b>4)throw new e("","Invalid data type for attribute "+y+": "+f);n(u,o,w[0],s,b,a,y)}else{if(!(f.indexOf("mat")>=0))throw new e("","Unknown data type for attribute "+y+": "+f);var b;if((b=f.charCodeAt(f.length-1)-48)<2||b>4)throw new e("","Invalid data type for attribute "+y+": "+f);d(u,o,w,s,b,a,y)}}}return a};var e=v("./GLError");function t(u,o,h,s,a,p){this._gl=u,this._wrapper=o,this._index=h,this._locations=s,this._dimension=a,this._constFunc=p}var r=t.prototype;r.pointer=function(u,o,h,s){var a=this._gl,p=this._locations[this._index];a.vertexAttribPointer(p,this._dimension,u||a.FLOAT,!!o,h||0,s||0),a.enableVertexAttribArray(p)},r.set=function(u,o,h,s){return this._constFunc(this._locations[this._index],u,o,h,s)},Object.defineProperty(r,"location",{get:function(){return this._locations[this._index]},set:function(u){return u!==this._locations[this._index]&&(this._locations[this._index]=0|u,this._wrapper.program=null),0|u}});var l=[function(u,o,h){return h.length===void 0?u.vertexAttrib1f(o,h):u.vertexAttrib1fv(o,h)},function(u,o,h,s){return h.length===void 0?u.vertexAttrib2f(o,h,s):u.vertexAttrib2fv(o,h)},function(u,o,h,s,a){return h.length===void 0?u.vertexAttrib3f(o,h,s,a):u.vertexAttrib3fv(o,h)},function(u,o,h,s,a,p){return h.length===void 0?u.vertexAttrib4f(o,h,s,a,p):u.vertexAttrib4fv(o,h)}];function n(u,o,h,s,a,p,c){var i=l[a],y=new t(u,o,h,s,a,i);Object.defineProperty(p,c,{set:function(f){return u.disableVertexAttribArray(s[h]),i(u,s[h],f),f},get:function(){return y},enumerable:!0})}function d(u,o,h,s,a,p,c){for(var i=new Array(a),y=new Array(a),f=0;f<a;++f)n(u,o,h[f],s,a,i,f),y[f]=i[f];Object.defineProperty(i,"location",{set:function(_){if(Array.isArray(_))for(var T=0;T<a;++T)y[T].location=_[T];else for(T=0;T<a;++T)y[T].location=_+T;return _},get:function(){for(var _=new Array(a),T=0;T<a;++T)_[T]=s[h[T]];return _},enumerable:!0}),i.pointer=function(_,T,L,A){_=_||u.FLOAT,T=!!T,L=L||a*a,A=A||0;for(var I=0;I<a;++I){var P=s[h[I]];u.vertexAttribPointer(P,a,_,T,L,A+I*a),u.enableVertexAttribArray(P)}};var w=new Array(a),b=u["vertexAttrib"+a+"fv"];Object.defineProperty(p,c,{set:function(_){for(var T=0;T<a;++T){var L=s[h[T]];if(u.disableVertexAttribArray(L),Array.isArray(_[0]))b.call(u,L,_[T]);else{for(var A=0;A<a;++A)w[A]=_[a*T+A];b.call(u,L,w)}}return _},get:function(){return i},enumerable:!0})}},{"./GLError":133}],135:[function(v,k,x){var e=v("./reflect"),t=v("./GLError");function r(n){return function(){return n}}function l(n,d){for(var u=new Array(n),o=0;o<n;++o)u[o]=d;return u}k.exports=function(n,d,u,o){function h(c){return function(i){for(var y=function D(U,H){if(typeof H!="object")return[[U,H]];var Y=[];for(var J in H){var W=H[J],Z=U;parseInt(J)+""===J?Z+="["+J+"]":Z+="."+J,typeof W=="object"?Y.push.apply(Y,D(Z,W)):Y.push([Z,W])}return Y}("",c),f=0;f<y.length;++f){var w=y[f],b=w[0],_=w[1];if(o[_]){var T=i;if(typeof b=="string"&&(b.indexOf(".")===0||b.indexOf("[")===0)){var L=b;if(b.indexOf(".")===0&&(L=b.slice(1)),L.indexOf("]")===L.length-1){var A=L.indexOf("["),I=L.slice(0,A),P=L.slice(A+1,L.length-1);T=I?i[I][P]:i[P]}else T=i[L]}var S,E=u[_].type;switch(E){case"bool":case"int":case"sampler2D":case"samplerCube":n.uniform1i(o[_],T);break;case"float":n.uniform1f(o[_],T);break;default:var z=E.indexOf("vec");if(!(0<=z&&z<=1&&E.length===4+z)){if(E.indexOf("mat")===0&&E.length===4){if((S=E.charCodeAt(E.length-1)-48)<2||S>4)throw new t("","Invalid uniform dimension type for matrix "+name+": "+E);n["uniformMatrix"+S+"fv"](o[_],!1,T);break}throw new t("","Unknown uniform data type for "+name+": "+E)}if((S=E.charCodeAt(E.length-1)-48)<2||S>4)throw new t("","Invalid data type");switch(E.charAt(0)){case"b":case"i":n["uniform"+S+"iv"](o[_],T);break;case"v":n["uniform"+S+"fv"](o[_],T);break;default:throw new t("","Unrecognized data type for vector "+name+": "+E)}}}}}}function s(c,i,y){if(typeof y=="object"){var f=a(y);Object.defineProperty(c,i,{get:r(f),set:h(y),enumerable:!0,configurable:!1})}else o[y]?Object.defineProperty(c,i,{get:(w=y,function(b,_,T){return b.getUniform(_.program,T[w])}),set:h(y),enumerable:!0,configurable:!1}):c[i]=function(b){switch(b){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var _=b.indexOf("vec");if(0<=_&&_<=1&&b.length===4+_){if((T=b.charCodeAt(b.length-1)-48)<2||T>4)throw new t("","Invalid data type");return b.charAt(0)==="b"?l(T,!1):l(T,0)}if(b.indexOf("mat")===0&&b.length===4){var T;if((T=b.charCodeAt(b.length-1)-48)<2||T>4)throw new t("","Invalid uniform dimension type for matrix "+name+": "+b);return l(T*T,0)}throw new t("","Unknown uniform data type for "+name+": "+b)}}(u[y].type);var w}function a(c){var i;if(Array.isArray(c)){i=new Array(c.length);for(var y=0;y<c.length;++y)s(i,y,c[y])}else for(var f in i={},c)s(i,f,c[f]);return i}var p=e(u,!0);return{get:r(a(p)),set:h(p),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(v,k,x){k.exports=function(e,t){for(var r={},l=0;l<e.length;++l)for(var n=e[l].name.split("."),d=r,u=0;u<n.length;++u){var o=n[u].split("[");if(o.length>1){o[0]in d||(d[o[0]]=[]),d=d[o[0]];for(var h=1;h<o.length;++h){var s=parseInt(o[h]);h<o.length-1||u<n.length-1?(s in d||(h<o.length-1?d[s]=[]:d[s]={}),d=d[s]):d[s]=t?l:e[l].type}}else u<n.length-1?(o[0]in d||(d[o[0]]={}),d=d[o[0]]):d[o[0]]=t?l:e[l].type}return r}},{}],137:[function(v,k,x){x.uniforms=function(l,n){for(var d=l.getProgramParameter(n,l.ACTIVE_UNIFORMS),u=[],o=0;o<d;++o){var h=l.getActiveUniform(n,o);if(h){var s=r(l,h.type);if(h.size>1)for(var a=0;a<h.size;++a)u.push({name:h.name.replace("[0]","["+a+"]"),type:s});else u.push({name:h.name,type:s})}}return u},x.attributes=function(l,n){for(var d=l.getProgramParameter(n,l.ACTIVE_ATTRIBUTES),u=[],o=0;o<d;++o){var h=l.getActiveAttrib(n,o);h&&u.push({name:h.name,type:r(l,h.type)})}return u};var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},t=null;function r(l,n){if(!t){var d=Object.keys(e);t={};for(var u=0;u<d.length;++u){var o=d[u];t[l[o]]=e[o]}}return t[n]}},{}],138:[function(v,k,x){x.shader=function(h,s,a){return o(h).getShaderReference(s,a)},x.program=function(h,s,a,p,c){return o(h).getProgram(s,a,p,c)};var e=v("./GLError"),t=v("gl-format-compiler-error"),r=new(typeof WeakMap>"u"?v("weakmap-shim"):WeakMap),l=0;function n(h,s,a,p,c,i,y){this.id=h,this.src=s,this.type=a,this.shader=p,this.count=i,this.programs=[],this.cache=y}function d(h){this.gl=h,this.shaders=[{},{}],this.programs={}}n.prototype.dispose=function(){if(--this.count==0){for(var h=this.cache,s=h.gl,a=this.programs,p=0,c=a.length;p<c;++p){var i=h.programs[a[p]];i&&(delete h.programs[p],s.deleteProgram(i))}s.deleteShader(this.shader),delete h.shaders[this.type===s.FRAGMENT_SHADER|0][this.src]}};var u=d.prototype;function o(h){var s=r.get(h);return s||(s=new d(h),r.set(h,s)),s}u.getShaderReference=function(h,s){var a=this.gl,p=this.shaders[h===a.FRAGMENT_SHADER|0],c=p[s];if(c&&a.isShader(c.shader))c.count+=1;else{var i=function(y,f,w){var b=y.createShader(f);if(y.shaderSource(b,w),y.compileShader(b),!y.getShaderParameter(b,y.COMPILE_STATUS)){var _=y.getShaderInfoLog(b);try{var T=t(_,w,f)}catch(L){throw console.warn("Failed to format compiler error: "+L),new e(_,`Error compiling shader:
`+_)}throw new e(_,T.short,T.long)}return b}(a,h,s);c=p[s]=new n(l++,s,h,i,[],1,this)}return c},u.getProgram=function(h,s,a,p){var c=[h.id,s.id,a.join(":"),p.join(":")].join("@"),i=this.programs[c];return i&&this.gl.isProgram(i)||(this.programs[c]=i=function(y,f,w,b,_){var T=y.createProgram();y.attachShader(T,f),y.attachShader(T,w);for(var L=0;L<b.length;++L)y.bindAttribLocation(T,_[L],b[L]);if(y.linkProgram(T),!y.getProgramParameter(T,y.LINK_STATUS)){var A=y.getProgramInfoLog(T);throw new e(A,"Error linking program: "+A)}return T}(this.gl,h.shader,s.shader,a,p),h.programs.push(c),s.programs.push(c)),i}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(v,k,x){function e(r){this.plot=r,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}k.exports=function(r,l){var n=new e(r);return n.update(l),r.addOverlay(n),n};var t=e.prototype;t.update=function(r){r=r||{},this.enable=(r.enable||[!0,!0,!1,!1]).slice(),this.width=(r.width||[1,1,1,1]).slice(),this.color=(r.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(l){return l.slice()}),this.center=(r.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},t.draw=function(){var r=this.enable,l=this.width,n=this.color,d=this.center,u=this.plot,o=u.line,h=u.dataBox,s=u.viewBox;if(o.bind(),h[0]<=d[0]&&d[0]<=h[2]&&h[1]<=d[1]&&d[1]<=h[3]){var a=s[0]+(d[0]-h[0])/(h[2]-h[0])*(s[2]-s[0]),p=s[1]+(d[1]-h[1])/(h[3]-h[1])*(s[3]-s[1]);r[0]&&o.drawLine(a,p,s[0],p,l[0],n[0]),r[1]&&o.drawLine(a,p,a,s[1],l[1],n[1]),r[2]&&o.drawLine(a,p,s[2],p,l[2],n[2]),r[3]&&o.drawLine(a,p,a,s[3],l[3],n[3])}},t.dispose=function(){this.plot.removeOverlay(this)}},{}],140:[function(v,k,x){var e=v("glslify"),t=v("gl-shader"),r=e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),l=e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);k.exports=function(n){return t(n,r,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(v,k,x){var e=v("gl-buffer"),t=v("gl-vao"),r=v("./shaders/index");k.exports=function(s,a){var p=[];function c(b,_,T,L,A,I){var P=[b,_,T,0,0,0,1];P[L+3]=1,P[L]=A,p.push.apply(p,P),P[6]=-1,p.push.apply(p,P),P[L]=I,p.push.apply(p,P),p.push.apply(p,P),P[6]=1,p.push.apply(p,P),P[L]=A,p.push.apply(p,P)}c(0,0,0,0,0,1),c(0,0,0,1,0,1),c(0,0,0,2,0,1),c(1,0,0,1,-1,1),c(1,0,0,2,-1,1),c(0,1,0,0,-1,1),c(0,1,0,2,-1,1),c(0,0,1,0,-1,1),c(0,0,1,1,-1,1);var i=e(s,p),y=t(s,[{type:s.FLOAT,buffer:i,size:3,offset:0,stride:28},{type:s.FLOAT,buffer:i,size:3,offset:12,stride:28},{type:s.FLOAT,buffer:i,size:1,offset:24,stride:28}]),f=r(s);f.attributes.position.location=0,f.attributes.color.location=1,f.attributes.weight.location=2;var w=new n(s,i,y,f);return w.update(a),w};var l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function n(s,a,p,c){this.gl=s,this.buffer=a,this.vao=p,this.shader=c,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var d=n.prototype,u=[0,0,0],o=[0,0,0],h=[0,0];d.isTransparent=function(){return!1},d.drawTransparent=function(s){},d.draw=function(s){var a=this.gl,p=this.vao,c=this.shader;p.bind(),c.bind();var i,y=s.model||l,f=s.view||l,w=s.projection||l;this.axes&&(i=this.axes.lastCubeProps.axis);for(var b=u,_=o,T=0;T<3;++T)i&&i[T]<0?(b[T]=this.bounds[0][T],_[T]=this.bounds[1][T]):(b[T]=this.bounds[1][T],_[T]=this.bounds[0][T]);for(h[0]=a.drawingBufferWidth,h[1]=a.drawingBufferHeight,c.uniforms.model=y,c.uniforms.view=f,c.uniforms.projection=w,c.uniforms.coordinates=[this.position,b,_],c.uniforms.colors=this.colors,c.uniforms.screenShape=h,T=0;T<3;++T)c.uniforms.lineWidth=this.lineWidth[T]*this.pixelRatio,this.enabled[T]&&(p.draw(a.TRIANGLES,6,6*T),this.drawSides[T]&&p.draw(a.TRIANGLES,12,18+12*T));p.unbind()},d.update=function(s){s&&("bounds"in s&&(this.bounds=s.bounds),"position"in s&&(this.position=s.position),"lineWidth"in s&&(this.lineWidth=s.lineWidth),"colors"in s&&(this.colors=s.colors),"enabled"in s&&(this.enabled=s.enabled),"drawSides"in s&&(this.drawSides=s.drawSides))},d.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(v,k,x){var e=v("glslify"),t=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),r=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),l=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),n=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);x.meshShader={vertex:t,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},x.pickShader={vertex:l,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(v,k,x){var e=v("gl-vec3"),t=v("gl-vec4"),r=["xyz","xzy","yxz","yzx","zxy","zyx"],l=function(s,a,p,c){for(var i=0,y=0;y<s.length;y++)for(var f=s[y].velocities,w=0;w<f.length;w++)i=Math.max(i,e.length(f[w]));var b=s.map(function(D){return function(U,H,Y,J){for(var W=U.points,Z=U.velocities,re=U.divergences,V=[],B=[],j=[],ee=[],N=[],$=[],K=0,te=0,ie=t.create(),le=t.create(),se=0;se<W.length;se++){var ve=W[se],fe=Z[se],ye=re[se];H===0&&(ye=.05*Y),te=e.length(fe)/J,ie=t.create(),e.copy(ie,fe),ie[3]=ye;for(var Ae=0;Ae<8;Ae++)N[Ae]=[ve[0],ve[1],ve[2],Ae];if(ee.length>0)for(Ae=0;Ae<8;Ae++){var pe=(Ae+1)%8;V.push(ee[Ae],N[Ae],N[pe],N[pe],ee[pe],ee[Ae]),j.push(le,ie,ie,ie,le,le),$.push(K,te,te,te,K,K);var ge=V.length;B.push([ge-6,ge-5,ge-4],[ge-3,ge-2,ge-1])}var we=ee;ee=N,N=we;var oe=le;le=ie,ie=oe;var de=K;K=te,te=de}return{positions:V,cells:B,vectors:j,vertexIntensity:$}}(D,p,c,i)}),_=[],T=[],L=[],A=[];for(y=0;y<b.length;y++){var I=b[y],P=_.length;for(_=_.concat(I.positions),L=L.concat(I.vectors),A=A.concat(I.vertexIntensity),w=0;w<I.cells.length;w++){var S=I.cells[w],E=[];T.push(E);for(var z=0;z<S.length;z++)E.push(S[z]+P)}}return{positions:_,cells:T,vectors:L,vertexIntensity:A,colormap:a}},n=function(s,a){var p,c=s.length;for(p=0;p<c;p++){var i=s[p];if(i===a)return p;if(i>a)return p-1}return p},d=function(s,a,p){return s<a?a:s>p?p:s},u=function(s){var a=1/0;s.sort(function(y,f){return y-f});for(var p=s.length,c=1;c<p;c++){var i=Math.abs(s[c]-s[c-1]);i<a&&(a=i)}return a};k.exports=function(s,a){var p=s.startingPositions,c=s.maxLength||1e3,i=s.tubeSize||1,y=s.absoluteTubeSize,f=s.gridFill||"+x+y+z",w={};f.indexOf("-x")!==-1&&(w.reversedX=!0),f.indexOf("-y")!==-1&&(w.reversedY=!0),f.indexOf("-z")!==-1&&(w.reversedZ=!0),w.filled=r.indexOf(f.replace(/-/g,"").replace(/\+/g,""));var b=s.getVelocity||function(se){return function(ve,fe,ye){var Ae=fe.vectors,pe=fe.meshgrid,ge=ve[0],we=ve[1],oe=ve[2],de=pe[0].length,Te=pe[1].length,Ee=pe[2].length,Me=n(pe[0],ge),De=n(pe[1],we),Ie=n(pe[2],oe),Oe=Me+1,Ze=De+1,Fe=Ie+1;if(Me=d(Me,0,de-1),Oe=d(Oe,0,de-1),De=d(De,0,Te-1),Ze=d(Ze,0,Te-1),Ie=d(Ie,0,Ee-1),Fe=d(Fe,0,Ee-1),Me<0||De<0||Ie<0||Oe>de-1||Ze>Te-1||Fe>Ee-1)return e.create();var Pe,ze,Ge,$e,ot,vt,bt=pe[0][Me],yt=pe[0][Oe],tt=pe[1][De],Ke=pe[1][Ze],mt=pe[2][Ie],Ft=(ge-bt)/(yt-bt),Vt=(we-tt)/(Ke-tt),Xt=(oe-mt)/(pe[2][Fe]-mt);switch(isFinite(Ft)||(Ft=.5),isFinite(Vt)||(Vt=.5),isFinite(Xt)||(Xt=.5),ye.reversedX&&(Me=de-1-Me,Oe=de-1-Oe),ye.reversedY&&(De=Te-1-De,Ze=Te-1-Ze),ye.reversedZ&&(Ie=Ee-1-Ie,Fe=Ee-1-Fe),ye.filled){case 5:ot=Ie,vt=Fe,Ge=De*Ee,$e=Ze*Ee,Pe=Me*Ee*Te,ze=Oe*Ee*Te;break;case 4:ot=Ie,vt=Fe,Pe=Me*Ee,ze=Oe*Ee,Ge=De*Ee*de,$e=Ze*Ee*de;break;case 3:Ge=De,$e=Ze,ot=Ie*Te,vt=Fe*Te,Pe=Me*Te*Ee,ze=Oe*Te*Ee;break;case 2:Ge=De,$e=Ze,Pe=Me*Te,ze=Oe*Te,ot=Ie*Te*de,vt=Fe*Te*de;break;case 1:Pe=Me,ze=Oe,ot=Ie*de,vt=Fe*de,Ge=De*de*Ee,$e=Ze*de*Ee;break;default:Pe=Me,ze=Oe,Ge=De*de,$e=Ze*de,ot=Ie*de*Te,vt=Fe*de*Te}var Gt=Ae[Pe+Ge+ot],nr=Ae[Pe+Ge+vt],It=Ae[Pe+$e+ot],Be=Ae[Pe+$e+vt],He=Ae[ze+Ge+ot],he=Ae[ze+Ge+vt],be=Ae[ze+$e+ot],Re=Ae[ze+$e+vt],Ue=e.create(),Xe=e.create(),qe=e.create(),st=e.create();e.lerp(Ue,Gt,He,Ft),e.lerp(Xe,nr,he,Ft),e.lerp(qe,It,be,Ft),e.lerp(st,Be,Re,Ft);var it=e.create(),Tt=e.create();e.lerp(it,Ue,qe,Vt),e.lerp(Tt,Xe,st,Vt);var Pt=e.create();return e.lerp(Pt,it,Tt,Xt),Pt}(se,s,w)},_=s.getDivergence||function(se,ve){var fe=e.create(),ye=1e-4;e.add(fe,se,[ye,0,0]);var Ae=b(fe);e.subtract(Ae,Ae,ve),e.scale(Ae,Ae,1/ye),e.add(fe,se,[0,ye,0]);var pe=b(fe);e.subtract(pe,pe,ve),e.scale(pe,pe,1/ye),e.add(fe,se,[0,0,ye]);var ge=b(fe);return e.subtract(ge,ge,ve),e.scale(ge,ge,1/ye),e.add(fe,Ae,pe),e.add(fe,fe,ge),fe},T=[],L=a[0][0],A=a[0][1],I=a[0][2],P=a[1][0],S=a[1][1],E=a[1][2],z=function(se){var ve=se[0],fe=se[1],ye=se[2];return!(ve<L||ve>P||fe<A||fe>S||ye<I||ye>E)},D=10*e.distance(a[0],a[1])/c,U=D*D,H=1,Y=0,J=p.length;J>1&&(H=function(se){for(var ve=[],fe=[],ye=[],Ae={},pe={},ge={},we=se.length,oe=0;oe<we;oe++){var de=se[oe],Te=de[0],Ee=de[1],Me=de[2];Ae[Te]||(ve.push(Te),Ae[Te]=!0),pe[Ee]||(fe.push(Ee),pe[Ee]=!0),ge[Me]||(ye.push(Me),ge[Me]=!0)}var De=u(ve),Ie=u(fe),Oe=u(ye),Ze=Math.min(De,Ie,Oe);return isFinite(Ze)?Ze:1}(p));for(var W=0;W<J;W++){var Z=e.create();e.copy(Z,p[W]);var re=[Z],V=[],B=b(Z),j=Z;V.push(B);var ee=[],N=_(Z,B),$=e.length(N);isFinite($)&&$>Y&&(Y=$),ee.push($),T.push({points:re,velocities:V,divergences:ee});for(var K=0;K<100*c&&re.length<c&&z(Z);){K++;var te=e.clone(B),ie=e.squaredLength(te);if(ie===0)break;ie>U&&e.scale(te,te,D/Math.sqrt(ie)),e.add(te,te,Z),B=b(te),e.squaredDistance(j,te)-U>-1e-4*U&&(re.push(te),j=te,V.push(B),N=_(te,B),$=e.length(N),isFinite($)&&$>Y&&(Y=$),ee.push($)),Z=te}}var le=l(T,s.colormap,Y,H);return y?le.tubeScale=y:(Y===0&&(Y=1),le.tubeScale=.5*i*H/Y),le};var o=v("./lib/shaders"),h=v("gl-cone3d").createMesh;k.exports.createTubeMesh=function(s,a){return h(s,a,{shaders:o,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(v,k,x){var e=v("gl-shader"),t=v("glslify"),r=t([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),l=t([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),n=t([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),d=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);x.createShader=function(u){var o=e(u,r,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o.attributes.normal.location=2,o},x.createPickShader=function(u){var o=e(u,r,d,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o.attributes.normal.location=2,o},x.createContourShader=function(u){var o=e(u,n,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o},x.createPickContourShader=function(u){var o=e(u,n,d,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o}},{"gl-shader":132,glslify:231}],145:[function(v,k,x){k.exports=function(B){var j=B.gl,ee=f(j),N=b(j),$=w(j),K=_(j),te=t(j),ie=r(j,[{buffer:te,size:4,stride:40,offset:0},{buffer:te,size:3,stride:40,offset:16},{buffer:te,size:3,stride:40,offset:28}]),le=t(j),se=r(j,[{buffer:le,size:4,stride:20,offset:0},{buffer:le,size:1,stride:20,offset:16}]),ve=t(j),fe=r(j,[{buffer:ve,size:2,type:j.FLOAT}]),ye=l(j,1,256,j.RGBA,j.UNSIGNED_BYTE);ye.minFilter=j.LINEAR,ye.magFilter=j.LINEAR;var Ae=new P(j,[0,0],[[0,0,0],[0,0,0]],ee,N,te,ie,ye,$,K,le,se,ve,fe,[0,0,0]),pe={levels:[[],[],[]]};for(var ge in B)pe[ge]=B[ge];return pe.colormap=pe.colormap||"jet",Ae.update(pe),Ae};var e=v("bit-twiddle"),t=v("gl-buffer"),r=v("gl-vao"),l=v("gl-texture2d"),n=v("typedarray-pool"),d=v("colormap"),u=v("ndarray-ops"),o=v("ndarray-pack"),h=v("ndarray"),s=v("surface-nets"),a=v("gl-mat4/multiply"),p=v("gl-mat4/invert"),c=v("binary-search-bounds"),i=v("ndarray-gradient"),y=v("./lib/shaders"),f=y.createShader,w=y.createContourShader,b=y.createPickShader,_=y.createPickContourShader,T=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],A=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function I(B,j,ee,N,$){this.position=B,this.index=j,this.uv=ee,this.level=N,this.dataCoordinate=$}(function(){for(var B=0;B<3;++B){var j=A[B],ee=(B+2)%3;j[(B+1)%3+0]=1,j[ee+3]=1,j[B+6]=1}})();function P(B,j,ee,N,$,K,te,ie,le,se,ve,fe,ye,Ae,pe){this.gl=B,this.shape=j,this.bounds=ee,this.objectOffset=pe,this.intensityBounds=[],this._shader=N,this._pickShader=$,this._coordinateBuffer=K,this._vao=te,this._colorMap=ie,this._contourShader=le,this._contourPickShader=se,this._contourBuffer=ve,this._contourVAO=fe,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new I([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=ye,this._dynamicVAO=Ae,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[h(n.mallocFloat(1024),[0,0]),h(n.mallocFloat(1024),[0,0]),h(n.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var S=P.prototype;S.genColormap=function(B,j){var ee=!1,N=o([d({colormap:B,nshades:256,format:"rgba"}).map(function($,K){var te=j?function(ie,le){if(!le||!le.length)return 1;for(var se=0;se<le.length;++se){if(le.length<2)return 1;if(le[se][0]===ie)return le[se][1];if(le[se][0]>ie&&se>0){var ve=(le[se][0]-ie)/(le[se][0]-le[se-1][0]);return le[se][1]*(1-ve)+ve*le[se-1][1]}}return 1}(K/255,j):$[3];return te<1&&(ee=!0),[$[0],$[1],$[2],255*te]})]);return u.divseq(N,255),this.hasAlphaScale=ee,N},S.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},S.isOpaque=function(){return!this.isTransparent()},S.pickSlots=1,S.setPickBase=function(B){this.pickId=B};var E=[0,0,0],z={showSurface:!1,showContour:!1,projections:[T.slice(),T.slice(),T.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function D(B,j){var ee,N,$,K=j.axes&&j.axes.lastCubeProps.axis||E,te=j.showSurface,ie=j.showContour;for(ee=0;ee<3;++ee)for(te=te||j.surfaceProject[ee],N=0;N<3;++N)ie=ie||j.contourProject[ee][N];for(ee=0;ee<3;++ee){var le=z.projections[ee];for(N=0;N<16;++N)le[N]=0;for(N=0;N<4;++N)le[5*N]=1;le[5*ee]=0,le[12+ee]=j.axesBounds[+(K[ee]>0)][ee],a(le,B.model,le);var se=z.clipBounds[ee];for($=0;$<2;++$)for(N=0;N<3;++N)se[$][N]=B.clipBounds[$][N];se[0][ee]=-1e8,se[1][ee]=1e8}return z.showSurface=te,z.showContour=ie,z}var U={model:T,view:T,projection:T,inverseModel:T.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},H=T.slice(),Y=[1,0,0,0,1,0,0,0,1];function J(B,j){B=B||{};var ee=this.gl;ee.disable(ee.CULL_FACE),this._colorMap.bind(0);var N=U;N.model=B.model||T,N.view=B.view||T,N.projection=B.projection||T,N.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],N.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],N.objectOffset=this.objectOffset,N.contourColor=this.contourColor[0],N.inverseModel=p(N.inverseModel,N.model);for(var $=0;$<2;++$)for(var K=N.clipBounds[$],te=0;te<3;++te)K[te]=Math.min(Math.max(this.clipBounds[$][te],-1e8),1e8);N.kambient=this.ambientLight,N.kdiffuse=this.diffuseLight,N.kspecular=this.specularLight,N.roughness=this.roughness,N.fresnel=this.fresnel,N.opacity=this.opacity,N.height=0,N.permutation=Y,N.vertexColor=this.vertexColor;var ie=H;for(a(ie,N.view,N.model),a(ie,N.projection,ie),p(ie,ie),$=0;$<3;++$)N.eyePosition[$]=ie[12+$]/ie[15];var le=ie[15];for($=0;$<3;++$)le+=this.lightPosition[$]*ie[4*$+3];for($=0;$<3;++$){var se=ie[12+$];for(te=0;te<3;++te)se+=ie[4*te+$]*this.lightPosition[te];N.lightPosition[$]=se/le}var ve=D(N,this);if(ve.showSurface){for(this._shader.bind(),this._shader.uniforms=N,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ee.TRIANGLES,this._vertexCount),$=0;$<3;++$)this.surfaceProject[$]&&this.vertexCount&&(this._shader.uniforms.model=ve.projections[$],this._shader.uniforms.clipBounds=ve.clipBounds[$],this._vao.draw(ee.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ve.showContour){var fe=this._contourShader;N.kambient=1,N.kdiffuse=0,N.kspecular=0,N.opacity=1,fe.bind(),fe.uniforms=N;var ye=this._contourVAO;for(ye.bind(),$=0;$<3;++$)for(fe.uniforms.permutation=A[$],ee.lineWidth(this.contourWidth[$]*this.pixelRatio),te=0;te<this.contourLevels[$].length;++te)te===this.highlightLevel[$]?(fe.uniforms.contourColor=this.highlightColor[$],fe.uniforms.contourTint=this.highlightTint[$]):te!==0&&te-1!==this.highlightLevel[$]||(fe.uniforms.contourColor=this.contourColor[$],fe.uniforms.contourTint=this.contourTint[$]),this._contourCounts[$][te]&&(fe.uniforms.height=this.contourLevels[$][te],ye.draw(ee.LINES,this._contourCounts[$][te],this._contourOffsets[$][te]));for($=0;$<3;++$)for(fe.uniforms.model=ve.projections[$],fe.uniforms.clipBounds=ve.clipBounds[$],te=0;te<3;++te)if(this.contourProject[$][te]){fe.uniforms.permutation=A[te],ee.lineWidth(this.contourWidth[te]*this.pixelRatio);for(var Ae=0;Ae<this.contourLevels[te].length;++Ae)Ae===this.highlightLevel[te]?(fe.uniforms.contourColor=this.highlightColor[te],fe.uniforms.contourTint=this.highlightTint[te]):Ae!==0&&Ae-1!==this.highlightLevel[te]||(fe.uniforms.contourColor=this.contourColor[te],fe.uniforms.contourTint=this.contourTint[te]),this._contourCounts[te][Ae]&&(fe.uniforms.height=this.contourLevels[te][Ae],ye.draw(ee.LINES,this._contourCounts[te][Ae],this._contourOffsets[te][Ae]))}for(ye.unbind(),(ye=this._dynamicVAO).bind(),$=0;$<3;++$)if(this._dynamicCounts[$]!==0)for(fe.uniforms.model=N.model,fe.uniforms.clipBounds=N.clipBounds,fe.uniforms.permutation=A[$],ee.lineWidth(this.dynamicWidth[$]*this.pixelRatio),fe.uniforms.contourColor=this.dynamicColor[$],fe.uniforms.contourTint=this.dynamicTint[$],fe.uniforms.height=this.dynamicLevel[$],ye.draw(ee.LINES,this._dynamicCounts[$],this._dynamicOffsets[$]),te=0;te<3;++te)this.contourProject[te][$]&&(fe.uniforms.model=ve.projections[te],fe.uniforms.clipBounds=ve.clipBounds[te],ye.draw(ee.LINES,this._dynamicCounts[$],this._dynamicOffsets[$]));ye.unbind()}}S.draw=function(B){return J.call(this,B,!1)},S.drawTransparent=function(B){return J.call(this,B,!0)};var W={model:T,view:T,projection:T,inverseModel:T,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function Z(B,j){return Array.isArray(B)?[j(B[0]),j(B[1]),j(B[2])]:[j(B),j(B),j(B)]}function re(B){return Array.isArray(B)?B.length===3?[B[0],B[1],B[2],1]:[B[0],B[1],B[2],B[3]]:[0,0,0,1]}function V(B){if(Array.isArray(B)){if(Array.isArray(B))return[re(B[0]),re(B[1]),re(B[2])];var j=re(B);return[j.slice(),j.slice(),j.slice()]}}S.drawPick=function(B){B=B||{};var j=this.gl;j.disable(j.CULL_FACE);var ee=W;ee.model=B.model||T,ee.view=B.view||T,ee.projection=B.projection||T,ee.shape=this._field[2].shape,ee.pickId=this.pickId/255,ee.lowerBound=this.bounds[0],ee.upperBound=this.bounds[1],ee.objectOffset=this.objectOffset,ee.permutation=Y;for(var N=0;N<2;++N)for(var $=ee.clipBounds[N],K=0;K<3;++K)$[K]=Math.min(Math.max(this.clipBounds[N][K],-1e8),1e8);var te=D(ee,this);if(te.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ee,this._vao.bind(),this._vao.draw(j.TRIANGLES,this._vertexCount),N=0;N<3;++N)this.surfaceProject[N]&&(this._pickShader.uniforms.model=te.projections[N],this._pickShader.uniforms.clipBounds=te.clipBounds[N],this._vao.draw(j.TRIANGLES,this._vertexCount));this._vao.unbind()}if(te.showContour){var ie=this._contourPickShader;ie.bind(),ie.uniforms=ee;var le=this._contourVAO;for(le.bind(),K=0;K<3;++K)for(j.lineWidth(this.contourWidth[K]*this.pixelRatio),ie.uniforms.permutation=A[K],N=0;N<this.contourLevels[K].length;++N)this._contourCounts[K][N]&&(ie.uniforms.height=this.contourLevels[K][N],le.draw(j.LINES,this._contourCounts[K][N],this._contourOffsets[K][N]));for(N=0;N<3;++N)for(ie.uniforms.model=te.projections[N],ie.uniforms.clipBounds=te.clipBounds[N],K=0;K<3;++K)if(this.contourProject[N][K]){ie.uniforms.permutation=A[K],j.lineWidth(this.contourWidth[K]*this.pixelRatio);for(var se=0;se<this.contourLevels[K].length;++se)this._contourCounts[K][se]&&(ie.uniforms.height=this.contourLevels[K][se],le.draw(j.LINES,this._contourCounts[K][se],this._contourOffsets[K][se]))}le.unbind()}},S.pick=function(B){if(!B||B.id!==this.pickId)return null;var j=this._field[2].shape,ee=this._pickResult,N=j[0]*(B.value[0]+(B.value[2]>>4)/16)/255,$=Math.floor(N),K=N-$,te=j[1]*(B.value[1]+(15&B.value[2])/16)/255,ie=Math.floor(te),le=te-ie;$+=1,ie+=1;var se=ee.position;se[0]=se[1]=se[2]=0;for(var ve=0;ve<2;++ve)for(var fe=ve?K:1-K,ye=0;ye<2;++ye)for(var Ae=$+ve,pe=ie+ye,ge=fe*(ye?le:1-le),we=0;we<3;++we)se[we]+=this._field[we].get(Ae,pe)*ge;for(var oe=this._pickResult.level,de=0;de<3;++de)if(oe[de]=c.le(this.contourLevels[de],se[de]),oe[de]<0)this.contourLevels[de].length>0&&(oe[de]=0);else if(oe[de]<this.contourLevels[de].length-1){var Te=this.contourLevels[de][oe[de]],Ee=this.contourLevels[de][oe[de]+1];Math.abs(Te-se[de])>Math.abs(Ee-se[de])&&(oe[de]+=1)}for(ee.index[0]=K<.5?$:$+1,ee.index[1]=le<.5?ie:ie+1,ee.uv[0]=N/j[0],ee.uv[1]=te/j[1],we=0;we<3;++we)ee.dataCoordinate[we]=this._field[we].get(ee.index[0],ee.index[1]);return ee},S.padField=function(B,j){var ee=j.shape.slice(),N=B.shape.slice();u.assign(B.lo(1,1).hi(ee[0],ee[1]),j),u.assign(B.lo(1).hi(ee[0],1),j.hi(ee[0],1)),u.assign(B.lo(1,N[1]-1).hi(ee[0],1),j.lo(0,ee[1]-1).hi(ee[0],1)),u.assign(B.lo(0,1).hi(1,ee[1]),j.hi(1)),u.assign(B.lo(N[0]-1,1).hi(1,ee[1]),j.lo(ee[0]-1)),B.set(0,0,j.get(0,0)),B.set(0,N[1]-1,j.get(0,ee[1]-1)),B.set(N[0]-1,0,j.get(ee[0]-1,0)),B.set(N[0]-1,N[1]-1,j.get(ee[0]-1,ee[1]-1))},S.update=function(B){B=B||{},this.objectOffset=B.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in B&&(this.contourWidth=Z(B.contourWidth,Number)),"showContour"in B&&(this.showContour=Z(B.showContour,Boolean)),"showSurface"in B&&(this.showSurface=!!B.showSurface),"contourTint"in B&&(this.contourTint=Z(B.contourTint,Boolean)),"contourColor"in B&&(this.contourColor=V(B.contourColor)),"contourProject"in B&&(this.contourProject=Z(B.contourProject,function(Zt){return Z(Zt,Boolean)})),"surfaceProject"in B&&(this.surfaceProject=B.surfaceProject),"dynamicColor"in B&&(this.dynamicColor=V(B.dynamicColor)),"dynamicTint"in B&&(this.dynamicTint=Z(B.dynamicTint,Number)),"dynamicWidth"in B&&(this.dynamicWidth=Z(B.dynamicWidth,Number)),"opacity"in B&&(this.opacity=B.opacity),"opacityscale"in B&&(this.opacityscale=B.opacityscale),"colorBounds"in B&&(this.colorBounds=B.colorBounds),"vertexColor"in B&&(this.vertexColor=B.vertexColor?1:0),"colormap"in B&&this._colorMap.setPixels(this.genColormap(B.colormap,this.opacityscale));var j=B.field||B.coords&&B.coords[2]||null,ee=!1;if(j||(j=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in B||"coords"in B){var N=(j.shape[0]+2)*(j.shape[1]+2);N>this._field[2].data.length&&(n.freeFloat(this._field[2].data),this._field[2].data=n.mallocFloat(e.nextPow2(N))),this._field[2]=h(this._field[2].data,[j.shape[0]+2,j.shape[1]+2]),this.padField(this._field[2],j),this.shape=j.shape.slice();for(var $=this.shape,K=0;K<2;++K)this._field[2].size>this._field[K].data.length&&(n.freeFloat(this._field[K].data),this._field[K].data=n.mallocFloat(this._field[2].size)),this._field[K]=h(this._field[K].data,[$[0]+2,$[1]+2]);if(B.coords){var te=B.coords;if(!Array.isArray(te)||te.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(K=0;K<2;++K){var ie=te[K];for(ye=0;ye<2;++ye)if(ie.shape[ye]!==$[ye])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[K],ie)}}else if(B.ticks){var le=B.ticks;if(!Array.isArray(le)||le.length!==2)throw new Error("gl-surface: invalid ticks");for(K=0;K<2;++K){var se=le[K];if((Array.isArray(se)||se.length)&&(se=h(se)),se.shape[0]!==$[K])throw new Error("gl-surface: invalid tick length");var ve=h(se.data,$);ve.stride[K]=se.stride[0],ve.stride[1^K]=0,this.padField(this._field[K],ve)}}else{for(K=0;K<2;++K){var fe=[0,0];fe[K]=1,this._field[K]=h(this._field[K].data,[$[0]+2,$[1]+2],fe,0)}this._field[0].set(0,0,0);for(var ye=0;ye<$[0];++ye)this._field[0].set(ye+1,0,ye);for(this._field[0].set($[0]+1,0,$[0]-1),this._field[1].set(0,0,0),ye=0;ye<$[1];++ye)this._field[1].set(0,ye+1,ye);this._field[1].set(0,$[1]+1,$[1]-1)}var Ae=this._field,pe=h(n.mallocFloat(3*Ae[2].size*2),[3,$[0]+2,$[1]+2,2]);for(K=0;K<3;++K)i(pe.pick(K),Ae[K],"mirror");var ge=h(n.mallocFloat(3*Ae[2].size),[$[0]+2,$[1]+2,3]);for(K=0;K<$[0]+2;++K)for(ye=0;ye<$[1]+2;++ye){var we=pe.get(0,K,ye,0),oe=pe.get(0,K,ye,1),de=pe.get(1,K,ye,0),Te=pe.get(1,K,ye,1),Ee=pe.get(2,K,ye,0),Me=pe.get(2,K,ye,1),De=de*Me-Te*Ee,Ie=Ee*oe-Me*we,Oe=we*Te-oe*de,Ze=Math.sqrt(De*De+Ie*Ie+Oe*Oe);Ze<1e-8?(Ze=Math.max(Math.abs(De),Math.abs(Ie),Math.abs(Oe)))<1e-8?(Oe=1,Ie=De=0,Ze=1):Ze=1/Ze:Ze=1/Math.sqrt(Ze),ge.set(K,ye,0,De*Ze),ge.set(K,ye,1,Ie*Ze),ge.set(K,ye,2,Oe*Ze)}n.free(pe.data);var Fe=[1/0,1/0,1/0],Pe=[-1/0,-1/0,-1/0],ze=1/0,Ge=-1/0,$e=($[0]-1)*($[1]-1)*6,ot=n.mallocFloat(e.nextPow2(10*$e)),vt=0,bt=0;for(K=0;K<$[0]-1;++K)e:for(ye=0;ye<$[1]-1;++ye){for(var yt=0;yt<2;++yt)for(var tt=0;tt<2;++tt)for(var Ke=0;Ke<3;++Ke){var mt=this._field[Ke].get(1+K+yt,1+ye+tt);if(isNaN(mt)||!isFinite(mt))continue e}for(Ke=0;Ke<6;++Ke){var Ft=K+L[Ke][0],Vt=ye+L[Ke][1],Xt=this._field[0].get(Ft+1,Vt+1),Gt=this._field[1].get(Ft+1,Vt+1);mt=this._field[2].get(Ft+1,Vt+1),De=ge.get(Ft+1,Vt+1,0),Ie=ge.get(Ft+1,Vt+1,1),Oe=ge.get(Ft+1,Vt+1,2),B.intensity&&(nr=B.intensity.get(Ft,Vt));var nr=B.intensity?B.intensity.get(Ft,Vt):mt+this.objectOffset[2];ot[vt++]=Ft,ot[vt++]=Vt,ot[vt++]=Xt,ot[vt++]=Gt,ot[vt++]=mt,ot[vt++]=0,ot[vt++]=nr,ot[vt++]=De,ot[vt++]=Ie,ot[vt++]=Oe,Fe[0]=Math.min(Fe[0],Xt+this.objectOffset[0]),Fe[1]=Math.min(Fe[1],Gt+this.objectOffset[1]),Fe[2]=Math.min(Fe[2],mt+this.objectOffset[2]),ze=Math.min(ze,nr),Pe[0]=Math.max(Pe[0],Xt+this.objectOffset[0]),Pe[1]=Math.max(Pe[1],Gt+this.objectOffset[1]),Pe[2]=Math.max(Pe[2],mt+this.objectOffset[2]),Ge=Math.max(Ge,nr),bt+=1}}for(B.intensityBounds&&(ze=+B.intensityBounds[0],Ge=+B.intensityBounds[1]),K=6;K<vt;K+=10)ot[K]=(ot[K]-ze)/(Ge-ze);this._vertexCount=bt,this._coordinateBuffer.update(ot.subarray(0,vt)),n.freeFloat(ot),n.free(ge.data),this.bounds=[Fe,Pe],this.intensity=B.intensity||this._field[2],this.intensityBounds[0]===ze&&this.intensityBounds[1]===Ge||(ee=!0),this.intensityBounds=[ze,Ge]}if("levels"in B){var It=B.levels;for(It=Array.isArray(It[0])?It.slice():[[],[],It],K=0;K<3;++K)It[K]=It[K].slice(),It[K].sort(function(Zt,Ut){return Zt-Ut});for(K=0;K<3;++K)for(ye=0;ye<It[K].length;++ye)It[K][ye]-=this.objectOffset[K];e:for(K=0;K<3;++K){if(It[K].length!==this.contourLevels[K].length){ee=!0;break}for(ye=0;ye<It[K].length;++ye)if(It[K][ye]!==this.contourLevels[K][ye]){ee=!0;break e}}this.contourLevels=It}if(ee){Ae=this._field,$=this.shape;for(var Be=[],He=0;He<3;++He){var he=this.contourLevels[He],be=[],Re=[],Ue=[0,0,0];for(K=0;K<he.length;++K){var Xe=s(this._field[He],he[K]);be.push(Be.length/5|0),bt=0;e:for(ye=0;ye<Xe.cells.length;++ye){var qe=Xe.cells[ye];for(Ke=0;Ke<2;++Ke){var st=Xe.positions[qe[Ke]],it=st[0],Tt=0|Math.floor(it),Pt=it-Tt,rt=st[1],ut=0|Math.floor(rt),Bt=rt-ut,wt=!1;t:for(var Lt=0;Lt<3;++Lt){Ue[Lt]=0;var Se=(He+Lt+1)%3;for(yt=0;yt<2;++yt){var We=yt?Pt:1-Pt;for(Ft=0|Math.min(Math.max(Tt+yt,0),$[0]),tt=0;tt<2;++tt){var nt=tt?Bt:1-Bt;if(Vt=0|Math.min(Math.max(ut+tt,0),$[1]),mt=Lt<2?this._field[Se].get(Ft,Vt):(this.intensity.get(Ft,Vt)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(mt)||isNaN(mt)){wt=!0;break t}var ft=We*nt;Ue[Lt]+=ft*mt}}}if(wt){if(Ke>0){for(var Mt=0;Mt<5;++Mt)Be.pop();bt-=1}continue e}Be.push(Ue[0],Ue[1],st[0],st[1],Ue[2]),bt+=1}}Re.push(bt)}this._contourOffsets[He]=be,this._contourCounts[He]=Re}var Nt=n.mallocFloat(Be.length);for(K=0;K<Be.length;++K)Nt[K]=Be[K];this._contourBuffer.update(Nt),n.freeFloat(Nt)}},S.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var B=0;B<3;++B)n.freeFloat(this._field[B].data)},S.highlight=function(B){var j,ee;if(!B)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(j=0;j<3;++j)this.enableHighlight[j]?this.highlightLevel[j]=B.level[j]:this.highlightLevel[j]=-1;for(ee=this.snapToData?B.dataCoordinate:B.position,j=0;j<3;++j)ee[j]-=this.objectOffset[j];if(this.enableDynamic[0]&&ee[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&ee[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&ee[2]!==this.dynamicLevel[2]){for(var N=0,$=this.shape,K=n.mallocFloat(12*$[0]*$[1]),te=0;te<3;++te)if(this.enableDynamic[te]){this.dynamicLevel[te]=ee[te];var ie=(te+1)%3,le=(te+2)%3,se=this._field[te],ve=this._field[ie],fe=this._field[le],ye=s(se,ee[te]),Ae=ye.cells,pe=ye.positions;for(this._dynamicOffsets[te]=N,j=0;j<Ae.length;++j)for(var ge=Ae[j],we=0;we<2;++we){var oe=pe[ge[we]],de=+oe[0],Te=0|de,Ee=0|Math.min(Te+1,$[0]),Me=de-Te,De=1-Me,Ie=+oe[1],Oe=0|Ie,Ze=0|Math.min(Oe+1,$[1]),Fe=Ie-Oe,Pe=1-Fe,ze=De*Pe,Ge=De*Fe,$e=Me*Pe,ot=Me*Fe,vt=ze*ve.get(Te,Oe)+Ge*ve.get(Te,Ze)+$e*ve.get(Ee,Oe)+ot*ve.get(Ee,Ze),bt=ze*fe.get(Te,Oe)+Ge*fe.get(Te,Ze)+$e*fe.get(Ee,Oe)+ot*fe.get(Ee,Ze);if(isNaN(vt)||isNaN(bt)){we&&(N-=1);break}K[2*N+0]=vt,K[2*N+1]=bt,N+=1}this._dynamicCounts[te]=N-this._dynamicOffsets[te]}else this.dynamicLevel[te]=NaN,this._dynamicCounts[te]=0;this._dynamicBuffer.update(K.subarray(0,2*N)),n.freeFloat(K)}}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(v,k,x){var e=v("ndarray"),t=v("ndarray-ops"),r=v("typedarray-pool");k.exports=function(b){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(l||u(b),typeof arguments[1]=="number")return y(b,arguments[1],arguments[2],arguments[3]||b.RGBA,arguments[4]||b.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return y(b,0|arguments[1][0],0|arguments[1][1],arguments[2]||b.RGBA,arguments[3]||b.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var _=arguments[1],T=o(_)?_:_.raw;if(T)return f(b,T,0|_.width,0|_.height,arguments[2]||b.RGBA,arguments[3]||b.UNSIGNED_BYTE);if(_.shape&&_.data&&_.stride)return w(b,_)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var l=null,n=null,d=null;function u(b){l=[b.LINEAR,b.NEAREST_MIPMAP_LINEAR,b.LINEAR_MIPMAP_NEAREST,b.LINEAR_MIPMAP_NEAREST],n=[b.NEAREST,b.LINEAR,b.NEAREST_MIPMAP_NEAREST,b.NEAREST_MIPMAP_LINEAR,b.LINEAR_MIPMAP_NEAREST,b.LINEAR_MIPMAP_LINEAR],d=[b.REPEAT,b.CLAMP_TO_EDGE,b.MIRRORED_REPEAT]}function o(b){return typeof HTMLCanvasElement<"u"&&b instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&b instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&b instanceof HTMLVideoElement||typeof ImageData<"u"&&b instanceof ImageData}var h=function(b,_){t.muls(b,_,255)};function s(b,_,T){var L=b.gl,A=L.getParameter(L.MAX_TEXTURE_SIZE);if(_<0||_>A||T<0||T>A)throw new Error("gl-texture2d: Invalid texture size");return b._shape=[_,T],b.bind(),L.texImage2D(L.TEXTURE_2D,0,b.format,_,T,0,b.format,b.type,null),b._mipLevels=[0],b}function a(b,_,T,L,A,I){this.gl=b,this.handle=_,this.format=A,this.type=I,this._shape=[T,L],this._mipLevels=[0],this._magFilter=b.NEAREST,this._minFilter=b.NEAREST,this._wrapS=b.CLAMP_TO_EDGE,this._wrapT=b.CLAMP_TO_EDGE,this._anisoSamples=1;var P=this,S=[this._wrapS,this._wrapT];Object.defineProperties(S,[{get:function(){return P._wrapS},set:function(z){return P.wrapS=z}},{get:function(){return P._wrapT},set:function(z){return P.wrapT=z}}]),this._wrapVector=S;var E=[this._shape[0],this._shape[1]];Object.defineProperties(E,[{get:function(){return P._shape[0]},set:function(z){return P.width=z}},{get:function(){return P._shape[1]},set:function(z){return P.height=z}}]),this._shapeVector=E}var p=a.prototype;function c(b,_){return b.length===3?_[2]===1&&_[1]===b[0]*b[2]&&_[0]===b[2]:_[0]===1&&_[1]===b[0]}function i(b){var _=b.createTexture();return b.bindTexture(b.TEXTURE_2D,_),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),_}function y(b,_,T,L,A){var I=b.getParameter(b.MAX_TEXTURE_SIZE);if(_<0||_>I||T<0||T>I)throw new Error("gl-texture2d: Invalid texture shape");if(A===b.FLOAT&&!b.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var P=i(b);return b.texImage2D(b.TEXTURE_2D,0,L,_,T,0,L,A,null),new a(b,P,_,T,L,A)}function f(b,_,T,L,A,I){var P=i(b);return b.texImage2D(b.TEXTURE_2D,0,A,A,I,_),new a(b,P,T,L,A,I)}function w(b,_){var T=_.dtype,L=_.shape.slice(),A=b.getParameter(b.MAX_TEXTURE_SIZE);if(L[0]<0||L[0]>A||L[1]<0||L[1]>A)throw new Error("gl-texture2d: Invalid texture size");var I=c(L,_.stride.slice()),P=0;T==="float32"?P=b.FLOAT:T==="float64"?(P=b.FLOAT,I=!1,T="float32"):T==="uint8"?P=b.UNSIGNED_BYTE:(P=b.UNSIGNED_BYTE,I=!1,T="uint8");var S,E,z=0;if(L.length===2)z=b.LUMINANCE,L=[L[0],L[1],1],_=e(_.data,L,[_.stride[0],_.stride[1],1],_.offset);else{if(L.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(L[2]===1)z=b.ALPHA;else if(L[2]===2)z=b.LUMINANCE_ALPHA;else if(L[2]===3)z=b.RGB;else{if(L[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");z=b.RGBA}}P!==b.FLOAT||b.getExtension("OES_texture_float")||(P=b.UNSIGNED_BYTE,I=!1);var D=_.size;if(I)S=_.offset===0&&_.data.length===D?_.data:_.data.subarray(_.offset,_.offset+D);else{var U=[L[2],L[2]*L[0],1];E=r.malloc(D,T);var H=e(E,L,U,0);T!=="float32"&&T!=="float64"||P!==b.UNSIGNED_BYTE?t.assign(H,_):h(H,_),S=E.subarray(0,D)}var Y=i(b);return b.texImage2D(b.TEXTURE_2D,0,z,L[0],L[1],0,z,P,S),I||r.free(E),new a(b,Y,L[0],L[1],z,P)}Object.defineProperties(p,{minFilter:{get:function(){return this._minFilter},set:function(b){this.bind();var _=this.gl;if(this.type===_.FLOAT&&l.indexOf(b)>=0&&(_.getExtension("OES_texture_float_linear")||(b=_.NEAREST)),n.indexOf(b)<0)throw new Error("gl-texture2d: Unknown filter mode "+b);return _.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,b),this._minFilter=b}},magFilter:{get:function(){return this._magFilter},set:function(b){this.bind();var _=this.gl;if(this.type===_.FLOAT&&l.indexOf(b)>=0&&(_.getExtension("OES_texture_float_linear")||(b=_.NEAREST)),n.indexOf(b)<0)throw new Error("gl-texture2d: Unknown filter mode "+b);return _.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,b),this._magFilter=b}},mipSamples:{get:function(){return this._anisoSamples},set:function(b){var _=this._anisoSamples;if(this._anisoSamples=0|Math.max(b,1),_!==this._anisoSamples){var T=this.gl.getExtension("EXT_texture_filter_anisotropic");T&&this.gl.texParameterf(this.gl.TEXTURE_2D,T.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(b){if(this.bind(),d.indexOf(b)<0)throw new Error("gl-texture2d: Unknown wrap mode "+b);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,b),this._wrapS=b}},wrapT:{get:function(){return this._wrapT},set:function(b){if(this.bind(),d.indexOf(b)<0)throw new Error("gl-texture2d: Unknown wrap mode "+b);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,b),this._wrapT=b}},wrap:{get:function(){return this._wrapVector},set:function(b){if(Array.isArray(b)||(b=[b,b]),b.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var _=0;_<2;++_)if(d.indexOf(b[_])<0)throw new Error("gl-texture2d: Unknown wrap mode "+b);this._wrapS=b[0],this._wrapT=b[1];var T=this.gl;return this.bind(),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,this._wrapS),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,this._wrapT),b}},shape:{get:function(){return this._shapeVector},set:function(b){if(Array.isArray(b)){if(b.length!==2)throw new Error("gl-texture2d: Invalid texture shape")}else b=[0|b,0|b];return s(this,0|b[0],0|b[1]),[0|b[0],0|b[1]]}},width:{get:function(){return this._shape[0]},set:function(b){return s(this,b|=0,this._shape[1]),b}},height:{get:function(){return this._shape[1]},set:function(b){return b|=0,s(this,this._shape[0],b),b}}}),p.bind=function(b){var _=this.gl;return b!==void 0&&_.activeTexture(_.TEXTURE0+(0|b)),_.bindTexture(_.TEXTURE_2D,this.handle),b!==void 0?0|b:_.getParameter(_.ACTIVE_TEXTURE)-_.TEXTURE0},p.dispose=function(){this.gl.deleteTexture(this.handle)},p.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var b=Math.min(this._shape[0],this._shape[1]),_=0;b>0;++_,b>>>=1)this._mipLevels.indexOf(_)<0&&this._mipLevels.push(_)},p.setPixels=function(b,_,T,L){var A=this.gl;this.bind(),Array.isArray(_)?(L=T,T=0|_[1],_=0|_[0]):(_=_||0,T=T||0),L=L||0;var I=o(b)?b:b.raw;if(I)this._mipLevels.indexOf(L)<0?(A.texImage2D(A.TEXTURE_2D,0,this.format,this.format,this.type,I),this._mipLevels.push(L)):A.texSubImage2D(A.TEXTURE_2D,L,_,T,this.format,this.type,I);else{if(!(b.shape&&b.stride&&b.data))throw new Error("gl-texture2d: Unsupported data type");if(b.shape.length<2||_+b.shape[1]>this._shape[1]>>>L||T+b.shape[0]>this._shape[0]>>>L||_<0||T<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");(function(P,S,E,z,D,U,H,Y){var J=Y.dtype,W=Y.shape.slice();if(W.length<2||W.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var Z=0,re=0,V=c(W,Y.stride.slice());if(J==="float32"?Z=P.FLOAT:J==="float64"?(Z=P.FLOAT,V=!1,J="float32"):J==="uint8"?Z=P.UNSIGNED_BYTE:(Z=P.UNSIGNED_BYTE,V=!1,J="uint8"),W.length===2)re=P.LUMINANCE,W=[W[0],W[1],1],Y=e(Y.data,W,[Y.stride[0],Y.stride[1],1],Y.offset);else{if(W.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(W[2]===1)re=P.ALPHA;else if(W[2]===2)re=P.LUMINANCE_ALPHA;else if(W[2]===3)re=P.RGB;else{if(W[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");re=P.RGBA}W[2]}if(re!==P.LUMINANCE&&re!==P.ALPHA||D!==P.LUMINANCE&&D!==P.ALPHA||(re=D),re!==D)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var B=Y.size,j=H.indexOf(z)<0;if(j&&H.push(z),Z===U&&V)Y.offset===0&&Y.data.length===B?j?P.texImage2D(P.TEXTURE_2D,z,D,W[0],W[1],0,D,U,Y.data):P.texSubImage2D(P.TEXTURE_2D,z,S,E,W[0],W[1],D,U,Y.data):j?P.texImage2D(P.TEXTURE_2D,z,D,W[0],W[1],0,D,U,Y.data.subarray(Y.offset,Y.offset+B)):P.texSubImage2D(P.TEXTURE_2D,z,S,E,W[0],W[1],D,U,Y.data.subarray(Y.offset,Y.offset+B));else{var ee;ee=U===P.FLOAT?r.mallocFloat32(B):r.mallocUint8(B);var N=e(ee,W,[W[2],W[2]*W[0],1]);Z===P.FLOAT&&U===P.UNSIGNED_BYTE?h(N,Y):t.assign(N,Y),j?P.texImage2D(P.TEXTURE_2D,z,D,W[0],W[1],0,D,U,ee.subarray(0,B)):P.texSubImage2D(P.TEXTURE_2D,z,S,E,W[0],W[1],D,U,ee.subarray(0,B)),U===P.FLOAT?r.freeFloat32(ee):r.freeUint8(ee)}})(A,_,T,L,this.format,this.type,this._mipLevels,b)}}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(v,k,x){k.exports=function(e,t,r){t?t.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var l=0|e.getParameter(e.MAX_VERTEX_ATTRIBS);if(r){if(r.length>l)throw new Error("gl-vao: Too many vertex attributes");for(var n=0;n<r.length;++n){var d=r[n];if(d.buffer){var u=d.buffer,o=d.size||4,h=d.type||e.FLOAT,s=!!d.normalized,a=d.stride||0,p=d.offset||0;u.bind(),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,o,h,s,a,p)}else{if(typeof d=="number")e.vertexAttrib1f(n,d);else if(d.length===1)e.vertexAttrib1f(n,d[0]);else if(d.length===2)e.vertexAttrib2f(n,d[0],d[1]);else if(d.length===3)e.vertexAttrib3f(n,d[0],d[1],d[2]);else{if(d.length!==4)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(n,d[0],d[1],d[2],d[3])}e.disableVertexAttribArray(n)}}for(;n<l;++n)e.disableVertexAttribArray(n)}else for(e.bindBuffer(e.ARRAY_BUFFER,null),n=0;n<l;++n)e.disableVertexAttribArray(n)}},{}],148:[function(v,k,x){var e=v("./do-bind.js");function t(r){this.gl=r,this._elements=null,this._attributes=null,this._elementsType=r.UNSIGNED_SHORT}t.prototype.bind=function(){e(this.gl,this._elements,this._attributes)},t.prototype.update=function(r,l,n){this._elements=l,this._attributes=r,this._elementsType=n||this.gl.UNSIGNED_SHORT},t.prototype.dispose=function(){},t.prototype.unbind=function(){},t.prototype.draw=function(r,l,n){n=n||0;var d=this.gl;this._elements?d.drawElements(r,l,this._elementsType,n):d.drawArrays(r,n,l)},k.exports=function(r){return new t(r)}},{"./do-bind.js":147}],149:[function(v,k,x){var e=v("./do-bind.js");function t(l,n,d,u,o,h){this.location=l,this.dimension=n,this.a=d,this.b=u,this.c=o,this.d=h}function r(l,n,d){this.gl=l,this._ext=n,this.handle=d,this._attribs=[],this._useElements=!1,this._elementsType=l.UNSIGNED_SHORT}t.prototype.bind=function(l){switch(this.dimension){case 1:l.vertexAttrib1f(this.location,this.a);break;case 2:l.vertexAttrib2f(this.location,this.a,this.b);break;case 3:l.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:l.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},r.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var l=0;l<this._attribs.length;++l)this._attribs[l].bind(this.gl)},r.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},r.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},r.prototype.update=function(l,n,d){if(this.bind(),e(this.gl,n,l),this.unbind(),this._attribs.length=0,l)for(var u=0;u<l.length;++u){var o=l[u];typeof o=="number"?this._attribs.push(new t(u,1,o)):Array.isArray(o)&&this._attribs.push(new t(u,o.length,o[0],o[1],o[2],o[3]))}this._useElements=!!n,this._elementsType=d||this.gl.UNSIGNED_SHORT},r.prototype.draw=function(l,n,d){d=d||0;var u=this.gl;this._useElements?u.drawElements(l,n,this._elementsType,d):u.drawArrays(l,d,n)},k.exports=function(l,n){return new r(l,n,n.createVertexArrayOES())}},{"./do-bind.js":147}],150:[function(v,k,x){var e=v("./lib/vao-native.js"),t=v("./lib/vao-emulated.js");function r(l){this.bindVertexArrayOES=l.bindVertexArray.bind(l),this.createVertexArrayOES=l.createVertexArray.bind(l),this.deleteVertexArrayOES=l.deleteVertexArray.bind(l)}k.exports=function(l,n,d,u){var o,h=l.createVertexArray?new r(l):l.getExtension("OES_vertex_array_object");return(o=h?e(l,h):t(l)).update(n,d,u),o}},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(v,k,x){k.exports=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}},{}],152:[function(v,k,x){k.exports=function(l,n){var d=e(l[0],l[1],l[2]),u=e(n[0],n[1],n[2]);t(d,d),t(u,u);var o=r(d,u);return o>1?0:Math.acos(o)};var e=v("./fromValues"),t=v("./normalize"),r=v("./dot")},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(v,k,x){k.exports=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}},{}],154:[function(v,k,x){k.exports=function(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}},{}],155:[function(v,k,x){k.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},{}],156:[function(v,k,x){k.exports=function(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},{}],157:[function(v,k,x){k.exports=function(e,t,r){var l=t[0],n=t[1],d=t[2],u=r[0],o=r[1],h=r[2];return e[0]=n*h-d*o,e[1]=d*u-l*h,e[2]=l*o-n*u,e}},{}],158:[function(v,k,x){k.exports=v("./distance")},{"./distance":159}],159:[function(v,k,x){k.exports=function(e,t){var r=t[0]-e[0],l=t[1]-e[1],n=t[2]-e[2];return Math.sqrt(r*r+l*l+n*n)}},{}],160:[function(v,k,x){k.exports=v("./divide")},{"./divide":161}],161:[function(v,k,x){k.exports=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}},{}],162:[function(v,k,x){k.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}},{}],163:[function(v,k,x){k.exports=1e-6},{}],164:[function(v,k,x){k.exports=function(t,r){var l=t[0],n=t[1],d=t[2],u=r[0],o=r[1],h=r[2];return Math.abs(l-u)<=e*Math.max(1,Math.abs(l),Math.abs(u))&&Math.abs(n-o)<=e*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(d-h)<=e*Math.max(1,Math.abs(d),Math.abs(h))};var e=v("./epsilon")},{"./epsilon":163}],165:[function(v,k,x){k.exports=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}},{}],166:[function(v,k,x){k.exports=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}},{}],167:[function(v,k,x){k.exports=function(t,r,l,n,d,u){var o,h;for(r||(r=3),l||(l=0),h=n?Math.min(n*r+l,t.length):t.length,o=l;o<h;o+=r)e[0]=t[o],e[1]=t[o+1],e[2]=t[o+2],d(e,e,u),t[o]=e[0],t[o+1]=e[1],t[o+2]=e[2];return t};var e=v("./create")()},{"./create":156}],168:[function(v,k,x){k.exports=function(e,t,r){var l=new Float32Array(3);return l[0]=e,l[1]=t,l[2]=r,l}},{}],169:[function(v,k,x){k.exports={EPSILON:v("./epsilon"),create:v("./create"),clone:v("./clone"),angle:v("./angle"),fromValues:v("./fromValues"),copy:v("./copy"),set:v("./set"),equals:v("./equals"),exactEquals:v("./exactEquals"),add:v("./add"),subtract:v("./subtract"),sub:v("./sub"),multiply:v("./multiply"),mul:v("./mul"),divide:v("./divide"),div:v("./div"),min:v("./min"),max:v("./max"),floor:v("./floor"),ceil:v("./ceil"),round:v("./round"),scale:v("./scale"),scaleAndAdd:v("./scaleAndAdd"),distance:v("./distance"),dist:v("./dist"),squaredDistance:v("./squaredDistance"),sqrDist:v("./sqrDist"),length:v("./length"),len:v("./len"),squaredLength:v("./squaredLength"),sqrLen:v("./sqrLen"),negate:v("./negate"),inverse:v("./inverse"),normalize:v("./normalize"),dot:v("./dot"),cross:v("./cross"),lerp:v("./lerp"),random:v("./random"),transformMat4:v("./transformMat4"),transformMat3:v("./transformMat3"),transformQuat:v("./transformQuat"),rotateX:v("./rotateX"),rotateY:v("./rotateY"),rotateZ:v("./rotateZ"),forEach:v("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(v,k,x){k.exports=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}},{}],171:[function(v,k,x){k.exports=v("./length")},{"./length":172}],172:[function(v,k,x){k.exports=function(e){var t=e[0],r=e[1],l=e[2];return Math.sqrt(t*t+r*r+l*l)}},{}],173:[function(v,k,x){k.exports=function(e,t,r,l){var n=t[0],d=t[1],u=t[2];return e[0]=n+l*(r[0]-n),e[1]=d+l*(r[1]-d),e[2]=u+l*(r[2]-u),e}},{}],174:[function(v,k,x){k.exports=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}},{}],175:[function(v,k,x){k.exports=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}},{}],176:[function(v,k,x){k.exports=v("./multiply")},{"./multiply":177}],177:[function(v,k,x){k.exports=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}},{}],178:[function(v,k,x){k.exports=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}},{}],179:[function(v,k,x){k.exports=function(e,t){var r=t[0],l=t[1],n=t[2],d=r*r+l*l+n*n;return d>0&&(d=1/Math.sqrt(d),e[0]=t[0]*d,e[1]=t[1]*d,e[2]=t[2]*d),e}},{}],180:[function(v,k,x){k.exports=function(e,t){t=t||1;var r=2*Math.random()*Math.PI,l=2*Math.random()-1,n=Math.sqrt(1-l*l)*t;return e[0]=Math.cos(r)*n,e[1]=Math.sin(r)*n,e[2]=l*t,e}},{}],181:[function(v,k,x){k.exports=function(e,t,r,l){var n=r[1],d=r[2],u=t[1]-n,o=t[2]-d,h=Math.sin(l),s=Math.cos(l);return e[0]=t[0],e[1]=n+u*s-o*h,e[2]=d+u*h+o*s,e}},{}],182:[function(v,k,x){k.exports=function(e,t,r,l){var n=r[0],d=r[2],u=t[0]-n,o=t[2]-d,h=Math.sin(l),s=Math.cos(l);return e[0]=n+o*h+u*s,e[1]=t[1],e[2]=d+o*s-u*h,e}},{}],183:[function(v,k,x){k.exports=function(e,t,r,l){var n=r[0],d=r[1],u=t[0]-n,o=t[1]-d,h=Math.sin(l),s=Math.cos(l);return e[0]=n+u*s-o*h,e[1]=d+u*h+o*s,e[2]=t[2],e}},{}],184:[function(v,k,x){k.exports=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}},{}],185:[function(v,k,x){k.exports=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}},{}],186:[function(v,k,x){k.exports=function(e,t,r,l){return e[0]=t[0]+r[0]*l,e[1]=t[1]+r[1]*l,e[2]=t[2]+r[2]*l,e}},{}],187:[function(v,k,x){k.exports=function(e,t,r,l){return e[0]=t,e[1]=r,e[2]=l,e}},{}],188:[function(v,k,x){k.exports=v("./squaredDistance")},{"./squaredDistance":190}],189:[function(v,k,x){k.exports=v("./squaredLength")},{"./squaredLength":191}],190:[function(v,k,x){k.exports=function(e,t){var r=t[0]-e[0],l=t[1]-e[1],n=t[2]-e[2];return r*r+l*l+n*n}},{}],191:[function(v,k,x){k.exports=function(e){var t=e[0],r=e[1],l=e[2];return t*t+r*r+l*l}},{}],192:[function(v,k,x){k.exports=v("./subtract")},{"./subtract":193}],193:[function(v,k,x){k.exports=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}},{}],194:[function(v,k,x){k.exports=function(e,t,r){var l=t[0],n=t[1],d=t[2];return e[0]=l*r[0]+n*r[3]+d*r[6],e[1]=l*r[1]+n*r[4]+d*r[7],e[2]=l*r[2]+n*r[5]+d*r[8],e}},{}],195:[function(v,k,x){k.exports=function(e,t,r){var l=t[0],n=t[1],d=t[2],u=r[3]*l+r[7]*n+r[11]*d+r[15];return u=u||1,e[0]=(r[0]*l+r[4]*n+r[8]*d+r[12])/u,e[1]=(r[1]*l+r[5]*n+r[9]*d+r[13])/u,e[2]=(r[2]*l+r[6]*n+r[10]*d+r[14])/u,e}},{}],196:[function(v,k,x){k.exports=function(e,t,r){var l=t[0],n=t[1],d=t[2],u=r[0],o=r[1],h=r[2],s=r[3],a=s*l+o*d-h*n,p=s*n+h*l-u*d,c=s*d+u*n-o*l,i=-u*l-o*n-h*d;return e[0]=a*s+i*-u+p*-h-c*-o,e[1]=p*s+i*-o+c*-u-a*-h,e[2]=c*s+i*-h+a*-o-p*-u,e}},{}],197:[function(v,k,x){k.exports=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}},{}],198:[function(v,k,x){k.exports=function(e){var t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}},{}],199:[function(v,k,x){k.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}},{}],200:[function(v,k,x){k.exports=function(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},{}],201:[function(v,k,x){k.exports=function(e,t){var r=t[0]-e[0],l=t[1]-e[1],n=t[2]-e[2],d=t[3]-e[3];return Math.sqrt(r*r+l*l+n*n+d*d)}},{}],202:[function(v,k,x){k.exports=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}},{}],203:[function(v,k,x){k.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}},{}],204:[function(v,k,x){k.exports=function(e,t,r,l){var n=new Float32Array(4);return n[0]=e,n[1]=t,n[2]=r,n[3]=l,n}},{}],205:[function(v,k,x){k.exports={create:v("./create"),clone:v("./clone"),fromValues:v("./fromValues"),copy:v("./copy"),set:v("./set"),add:v("./add"),subtract:v("./subtract"),multiply:v("./multiply"),divide:v("./divide"),min:v("./min"),max:v("./max"),scale:v("./scale"),scaleAndAdd:v("./scaleAndAdd"),distance:v("./distance"),squaredDistance:v("./squaredDistance"),length:v("./length"),squaredLength:v("./squaredLength"),negate:v("./negate"),inverse:v("./inverse"),normalize:v("./normalize"),dot:v("./dot"),lerp:v("./lerp"),random:v("./random"),transformMat4:v("./transformMat4"),transformQuat:v("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(v,k,x){k.exports=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}},{}],207:[function(v,k,x){k.exports=function(e){var t=e[0],r=e[1],l=e[2],n=e[3];return Math.sqrt(t*t+r*r+l*l+n*n)}},{}],208:[function(v,k,x){k.exports=function(e,t,r,l){var n=t[0],d=t[1],u=t[2],o=t[3];return e[0]=n+l*(r[0]-n),e[1]=d+l*(r[1]-d),e[2]=u+l*(r[2]-u),e[3]=o+l*(r[3]-o),e}},{}],209:[function(v,k,x){k.exports=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}},{}],210:[function(v,k,x){k.exports=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}},{}],211:[function(v,k,x){k.exports=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}},{}],212:[function(v,k,x){k.exports=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}},{}],213:[function(v,k,x){k.exports=function(e,t){var r=t[0],l=t[1],n=t[2],d=t[3],u=r*r+l*l+n*n+d*d;return u>0&&(u=1/Math.sqrt(u),e[0]=r*u,e[1]=l*u,e[2]=n*u,e[3]=d*u),e}},{}],214:[function(v,k,x){var e=v("./normalize"),t=v("./scale");k.exports=function(r,l){return l=l||1,r[0]=Math.random(),r[1]=Math.random(),r[2]=Math.random(),r[3]=Math.random(),e(r,r),t(r,r,l),r}},{"./normalize":213,"./scale":215}],215:[function(v,k,x){k.exports=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}},{}],216:[function(v,k,x){k.exports=function(e,t,r,l){return e[0]=t[0]+r[0]*l,e[1]=t[1]+r[1]*l,e[2]=t[2]+r[2]*l,e[3]=t[3]+r[3]*l,e}},{}],217:[function(v,k,x){k.exports=function(e,t,r,l,n){return e[0]=t,e[1]=r,e[2]=l,e[3]=n,e}},{}],218:[function(v,k,x){k.exports=function(e,t){var r=t[0]-e[0],l=t[1]-e[1],n=t[2]-e[2],d=t[3]-e[3];return r*r+l*l+n*n+d*d}},{}],219:[function(v,k,x){k.exports=function(e){var t=e[0],r=e[1],l=e[2],n=e[3];return t*t+r*r+l*l+n*n}},{}],220:[function(v,k,x){k.exports=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}},{}],221:[function(v,k,x){k.exports=function(e,t,r){var l=t[0],n=t[1],d=t[2],u=t[3];return e[0]=r[0]*l+r[4]*n+r[8]*d+r[12]*u,e[1]=r[1]*l+r[5]*n+r[9]*d+r[13]*u,e[2]=r[2]*l+r[6]*n+r[10]*d+r[14]*u,e[3]=r[3]*l+r[7]*n+r[11]*d+r[15]*u,e}},{}],222:[function(v,k,x){k.exports=function(e,t,r){var l=t[0],n=t[1],d=t[2],u=r[0],o=r[1],h=r[2],s=r[3],a=s*l+o*d-h*n,p=s*n+h*l-u*d,c=s*d+u*n-o*l,i=-u*l-o*n-h*d;return e[0]=a*s+i*-u+p*-h-c*-o,e[1]=p*s+i*-o+c*-u-a*-h,e[2]=c*s+i*-h+a*-o-p*-u,e[3]=t[3],e}},{}],223:[function(v,k,x){var e=v("glsl-tokenizer"),t=v("atob-lite");k.exports=function(r){for(var l=Array.isArray(r)?r:e(r),n=0;n<l.length;n++){var d=l[n];if(d.type==="preprocessor"){var u=d.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(u&&u[2]){var o=u[1],h=u[2];return(o?t(h):h).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(v,k,x){k.exports=function(u){var o,h,s,a=0,p=0,c=999,i=[],y=[],f=1,w=0,b=0,_=!1,T=!1,L="",A=r,I=e;(u=u||{}).version==="300 es"&&(A=n,I=l);var P={},S={};for(a=0;a<A.length;a++)P[A[a]]=!0;for(a=0;a<I.length;a++)S[I[a]]=!0;return function(B){return y=[],B!==null?function(j){a=0,j.toString&&(j=j.toString());var ee;for(L+=j.replace(/\r\n/g,`
`),s=L.length;o=L[a],a<s;){switch(ee=a,c){case 0:a=H();break;case 1:case 2:a=U();break;case 3:a=Y();break;case 4:a=Z();break;case 11:a=W();break;case 5:a=re();break;case 9999:a=V();break;case 9:a=D();break;case 999:a=z()}if(ee!==a)switch(L[ee]){case`
`:w=0,++f;break;default:++w}}return p+=a,L=L.slice(a),y}(B):function(j){return i.length&&E(i.join("")),c=10,E("(eof)"),y}()};function E(B){B.length&&y.push({type:d[c],data:B,position:b,line:f,column:w})}function z(){return i=i.length?[]:i,h==="/"&&o==="*"?(b=p+a-1,c=0,h=o,a+1):h==="/"&&o==="/"?(b=p+a-1,c=1,h=o,a+1):o==="#"?(c=2,b=p+a,a):/\s/.test(o)?(c=9,b=p+a,a):(_=/\d/.test(o),T=/[^\w_]/.test(o),b=p+a,c=_?4:T?3:9999,a)}function D(){return/[^\s]/g.test(o)?(E(i.join("")),c=999,a):(i.push(o),h=o,a+1)}function U(){return o!=="\r"&&o!==`
`||h==="\\"?(i.push(o),h=o,a+1):(E(i.join("")),c=999,a)}function H(){return o==="/"&&h==="*"?(i.push(o),E(i.join("")),c=999,a+1):(i.push(o),h=o,a+1)}function Y(){if(h==="."&&/\d/.test(o))return c=5,a;if(h==="/"&&o==="*")return c=0,a;if(h==="/"&&o==="/")return c=1,a;if(o==="."&&i.length){for(;J(i););return c=5,a}if(o===";"||o===")"||o==="("){if(i.length)for(;J(i););return E(o),c=999,a+1}var B=i.length===2&&o!=="=";if(/[\w_\d\s]/.test(o)||B){for(;J(i););return c=999,a}return i.push(o),h=o,a+1}function J(B){for(var j,ee,N=0;;){if(j=t.indexOf(B.slice(0,B.length+N).join("")),ee=t[j],j===-1){if(N--+B.length>0)continue;ee=B.slice(0,1).join("")}return E(ee),b+=ee.length,(i=i.slice(ee.length)).length}}function W(){return/[^a-fA-F0-9]/.test(o)?(E(i.join("")),c=999,a):(i.push(o),h=o,a+1)}function Z(){return o==="."||/[eE]/.test(o)?(i.push(o),c=5,h=o,a+1):o==="x"&&i.length===1&&i[0]==="0"?(c=11,i.push(o),h=o,a+1):/[^\d]/.test(o)?(E(i.join("")),c=999,a):(i.push(o),h=o,a+1)}function re(){return o==="f"&&(i.push(o),h=o,a+=1),/[eE]/.test(o)?(i.push(o),h=o,a+1):(o!=="-"&&o!=="+"||!/[eE]/.test(h))&&/[^\d]/.test(o)?(E(i.join("")),c=999,a):(i.push(o),h=o,a+1)}function V(){if(/[^\d\w_]/.test(o)){var B=i.join("");return c=S[B]?8:P[B]?7:6,E(i.join("")),c=999,a}return i.push(o),h=o,a+1}};var e=v("./lib/literals"),t=v("./lib/operators"),r=v("./lib/builtins"),l=v("./lib/literals-300es"),n=v("./lib/builtins-300es"),d=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(v,k,x){var e=v("./builtins");e=e.slice().filter(function(t){return!/^(gl\_|texture)/.test(t)}),k.exports=e.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(v,k,x){k.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(v,k,x){var e=v("./literals");k.exports=e.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(v,k,x){k.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(v,k,x){k.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(v,k,x){var e=v("./index");k.exports=function(t,r){var l=e(r),n=[];return n=(n=n.concat(l(t))).concat(l(null))}},{"./index":224}],231:[function(v,k,x){k.exports=function(e){typeof e=="string"&&(e=[e]);for(var t=[].slice.call(arguments,1),r=[],l=0;l<e.length-1;l++)r.push(e[l],t[l]||"");return r.push(e[l]),r.join("")}},{}],232:[function(v,k,x){var e=v("is-browser");k.exports=e&&function(){var t=!1;try{var r=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,r),window.removeEventListener("test",null,r)}catch{t=!1}return t}()},{"is-browser":236}],233:[function(v,k,x){k.exports=function(h,s){var a=h.length;if(a===0)throw new Error("Must have at least d+1 points");var p=h[0].length;if(a<=p)throw new Error("Must input at least d+1 points");var c=h.slice(0,p+1),i=e.apply(void 0,c);if(i===0)throw new Error("Input not in general position");for(var y=new Array(p+1),f=0;f<=p;++f)y[f]=f;i<0&&(y[0]=1,y[1]=0);var w=new r(y,new Array(p+1),!1),b=w.adjacent,_=new Array(p+2);for(f=0;f<=p;++f){for(var T=y.slice(),L=0;L<=p;++L)L===f&&(T[L]=-1);var A=T[0];T[0]=T[1],T[1]=A;var I=new r(T,new Array(p+1),!0);b[f]=I,_[f]=I}for(_[p+1]=w,f=0;f<=p;++f){T=b[f].vertices;var P=b[f].adjacent;for(L=0;L<=p;++L){var S=T[L];if(S<0)P[L]=w;else for(var E=0;E<=p;++E)b[E].vertices.indexOf(S)<0&&(P[L]=b[E])}}var z=new u(p,c,_),D=!!s;for(f=p+1;f<a;++f)z.insert(h[f],D);return z.boundary()};var e=v("robust-orientation"),t=v("simplicial-complex").compareCells;function r(h,s,a){this.vertices=h,this.adjacent=s,this.boundary=a,this.lastVisited=-1}function l(h,s,a){this.vertices=h,this.cell=s,this.index=a}function n(h,s){return t(h.vertices,s.vertices)}r.prototype.flip=function(){var h=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=h;var s=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=s};var d=[];function u(h,s,a){this.dimension=h,this.vertices=s,this.simplices=a,this.interior=a.filter(function(y){return!y.boundary}),this.tuple=new Array(h+1);for(var p=0;p<=h;++p)this.tuple[p]=this.vertices[p];var c,i=d[h];i||(i=d[h]=((c=e[h+1])||(c=e),function(y){return function(){var f=this.tuple;return y.apply(this,f)}}(c))),this.orient=i}var o=u.prototype;o.handleBoundaryDegeneracy=function(h,s){var a=this.dimension,p=this.vertices.length-1,c=this.tuple,i=this.vertices,y=[h];for(h.lastVisited=-p;y.length>0;)for(var f=(h=y.pop()).adjacent,w=0;w<=a;++w){var b=f[w];if(b.boundary&&!(b.lastVisited<=-p)){for(var _=b.vertices,T=0;T<=a;++T){var L=_[T];c[T]=L<0?s:i[L]}var A=this.orient();if(A>0)return b;b.lastVisited=-p,A===0&&y.push(b)}}return null},o.walk=function(h,s){var a=this.vertices.length-1,p=this.dimension,c=this.vertices,i=this.tuple,y=s?this.interior.length*Math.random()|0:this.interior.length-1,f=this.interior[y];e:for(;!f.boundary;){for(var w=f.vertices,b=f.adjacent,_=0;_<=p;++_)i[_]=c[w[_]];for(f.lastVisited=a,_=0;_<=p;++_){var T=b[_];if(!(T.lastVisited>=a)){var L=i[_];i[_]=h;var A=this.orient();if(i[_]=L,A<0){f=T;continue e}T.boundary?T.lastVisited=-a:T.lastVisited=a}}return}return f},o.addPeaks=function(h,s){var a=this.vertices.length-1,p=this.dimension,c=this.vertices,i=this.tuple,y=this.interior,f=this.simplices,w=[s];s.lastVisited=a,s.vertices[s.vertices.indexOf(-1)]=a,s.boundary=!1,y.push(s);for(var b=[];w.length>0;){var _=(s=w.pop()).vertices,T=s.adjacent,L=_.indexOf(a);if(!(L<0)){for(var A=0;A<=p;++A)if(A!==L){var I=T[A];if(I.boundary&&!(I.lastVisited>=a)){var P=I.vertices;if(I.lastVisited!==-a){for(var S=0,E=0;E<=p;++E)P[E]<0?(S=E,i[E]=h):i[E]=c[P[E]];if(this.orient()>0){P[S]=a,I.boundary=!1,y.push(I),w.push(I),I.lastVisited=a;continue}I.lastVisited=-a}var z=I.adjacent,D=_.slice(),U=T.slice(),H=new r(D,U,!0);f.push(H);var Y=z.indexOf(s);if(!(Y<0))for(z[Y]=H,U[L]=I,D[A]=-1,U[A]=s,T[A]=H,H.flip(),E=0;E<=p;++E){var J=D[E];if(!(J<0||J===a)){for(var W=new Array(p-1),Z=0,re=0;re<=p;++re){var V=D[re];V<0||re===E||(W[Z++]=V)}b.push(new l(W,H,E))}}}}}}for(b.sort(n),A=0;A+1<b.length;A+=2){var B=b[A],j=b[A+1],ee=B.index,N=j.index;ee<0||N<0||(B.cell.adjacent[B.index]=j.cell,j.cell.adjacent[j.index]=B.cell)}},o.insert=function(h,s){var a=this.vertices;a.push(h);var p=this.walk(h,s);if(p){for(var c=this.dimension,i=this.tuple,y=0;y<=c;++y){var f=p.vertices[y];i[y]=f<0?h:a[f]}var w=this.orient(i);w<0||(w!==0||(p=this.handleBoundaryDegeneracy(p,h)))&&this.addPeaks(h,p)}},o.boundary=function(){for(var h=this.dimension,s=[],a=this.simplices,p=a.length,c=0;c<p;++c){var i=a[c];if(i.boundary){for(var y=new Array(h),f=i.vertices,w=0,b=0,_=0;_<=h;++_)f[_]>=0?y[w++]=f[_]:b=1&_;if(b===(1&h)){var T=y[0];y[0]=y[1],y[1]=T}s.push(y)}}return s}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(v,k,x){var e=v("binary-search-bounds");function t(w,b,_,T,L){this.mid=w,this.left=b,this.right=_,this.leftPoints=T,this.rightPoints=L,this.count=(b?b.count:0)+(_?_.count:0)+T.length}k.exports=function(w){return!w||w.length===0?new y(null):new y(i(w))};var r=t.prototype;function l(w,b){w.mid=b.mid,w.left=b.left,w.right=b.right,w.leftPoints=b.leftPoints,w.rightPoints=b.rightPoints,w.count=b.count}function n(w,b){var _=i(b);w.mid=_.mid,w.left=_.left,w.right=_.right,w.leftPoints=_.leftPoints,w.rightPoints=_.rightPoints,w.count=_.count}function d(w,b){var _=w.intervals([]);_.push(b),n(w,_)}function u(w,b){var _=w.intervals([]),T=_.indexOf(b);return T<0?0:(_.splice(T,1),n(w,_),1)}function o(w,b,_){for(var T=0;T<w.length&&w[T][0]<=b;++T){var L=_(w[T]);if(L)return L}}function h(w,b,_){for(var T=w.length-1;T>=0&&w[T][1]>=b;--T){var L=_(w[T]);if(L)return L}}function s(w,b){for(var _=0;_<w.length;++_){var T=b(w[_]);if(T)return T}}function a(w,b){return w-b}function p(w,b){var _=w[0]-b[0];return _||w[1]-b[1]}function c(w,b){var _=w[1]-b[1];return _||w[0]-b[0]}function i(w){if(w.length===0)return null;for(var b=[],_=0;_<w.length;++_)b.push(w[_][0],w[_][1]);b.sort(a);var T=b[b.length>>1],L=[],A=[],I=[];for(_=0;_<w.length;++_){var P=w[_];P[1]<T?L.push(P):T<P[0]?A.push(P):I.push(P)}var S=I,E=I.slice();return S.sort(p),E.sort(c),new t(T,i(L),i(A),S,E)}function y(w){this.root=w}r.intervals=function(w){return w.push.apply(w,this.leftPoints),this.left&&this.left.intervals(w),this.right&&this.right.intervals(w),w},r.insert=function(w){var b=this.count-this.leftPoints.length;if(this.count+=1,w[1]<this.mid)this.left?4*(this.left.count+1)>3*(b+1)?d(this,w):this.left.insert(w):this.left=i([w]);else if(w[0]>this.mid)this.right?4*(this.right.count+1)>3*(b+1)?d(this,w):this.right.insert(w):this.right=i([w]);else{var _=e.ge(this.leftPoints,w,p),T=e.ge(this.rightPoints,w,c);this.leftPoints.splice(_,0,w),this.rightPoints.splice(T,0,w)}},r.remove=function(w){var b=this.count-this.leftPoints;if(w[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(b-1)?u(this,w):(A=this.left.remove(w))===2?(this.left=null,this.count-=1,1):(A===1&&(this.count-=1),A):0;if(w[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(b-1)?u(this,w):(A=this.right.remove(w))===2?(this.right=null,this.count-=1,1):(A===1&&(this.count-=1),A):0;if(this.count===1)return this.leftPoints[0]===w?2:0;if(this.leftPoints.length===1&&this.leftPoints[0]===w){if(this.left&&this.right){for(var _=this,T=this.left;T.right;)_=T,T=T.right;if(_===this)T.right=this.right;else{var L=this.left,A=this.right;_.count-=T.count,_.right=T.left,T.left=L,T.right=A}l(this,T),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?l(this,this.left):l(this,this.right);return 1}for(L=e.ge(this.leftPoints,w,p);L<this.leftPoints.length&&this.leftPoints[L][0]===w[0];++L)if(this.leftPoints[L]===w){for(this.count-=1,this.leftPoints.splice(L,1),A=e.ge(this.rightPoints,w,c);A<this.rightPoints.length&&this.rightPoints[A][1]===w[1];++A)if(this.rightPoints[A]===w)return this.rightPoints.splice(A,1),1}return 0},r.queryPoint=function(w,b){if(w<this.mid)return this.left&&(_=this.left.queryPoint(w,b))?_:o(this.leftPoints,w,b);if(w>this.mid){var _;return this.right&&(_=this.right.queryPoint(w,b))?_:h(this.rightPoints,w,b)}return s(this.leftPoints,b)},r.queryInterval=function(w,b,_){var T;return w<this.mid&&this.left&&(T=this.left.queryInterval(w,b,_))||b>this.mid&&this.right&&(T=this.right.queryInterval(w,b,_))?T:b<this.mid?o(this.leftPoints,b,_):w>this.mid?h(this.rightPoints,w,_):s(this.leftPoints,_)};var f=y.prototype;f.insert=function(w){this.root?this.root.insert(w):this.root=new t(w[0],null,null,[w],[w])},f.remove=function(w){if(this.root){var b=this.root.remove(w);return b===2&&(this.root=null),b!==0}return!1},f.queryPoint=function(w,b){if(this.root)return this.root.queryPoint(w,b)},f.queryInterval=function(w,b,_){if(w<=b&&this.root)return this.root.queryInterval(w,b,_)},Object.defineProperty(f,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(f,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":31}],235:[function(v,k,x){k.exports=function(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=r;return t}},{}],236:[function(v,k,x){k.exports=!0},{}],237:[function(v,k,x){function e(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */k.exports=function(t){return t!=null&&(e(t)||function(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&e(r.slice(0,0))}(t)||!!t._isBuffer)}},{}],238:[function(v,k,x){k.exports=r,k.exports.isMobile=r,k.exports.default=r;var e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,t=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function r(l){l||(l={});var n=l.ua;if(n||typeof navigator>"u"||(n=navigator.userAgent),n&&n.headers&&typeof n.headers["user-agent"]=="string"&&(n=n.headers["user-agent"]),typeof n!="string")return!1;var d=l.tablet?t.test(n):e.test(n);return!d&&l.tablet&&l.featureDetect&&navigator&&navigator.maxTouchPoints>1&&n.indexOf("Macintosh")!==-1&&n.indexOf("Safari")!==-1&&(d=!0),d}},{}],239:[function(v,k,x){k.exports=function(e){for(var t,r=e.length,l=0;l<r;l++)if(((t=e.charCodeAt(l))<9||t>13)&&t!==32&&t!==133&&t!==160&&t!==5760&&t!==6158&&(t<8192||t>8205)&&t!==8232&&t!==8233&&t!==8239&&t!==8287&&t!==8288&&t!==12288&&t!==65279)return!1;return!0}},{}],240:[function(v,k,x){k.exports=function(e,t,r){return e*(1-r)+t*r}},{}],241:[function(v,k,x){var e=v("./normalize"),t=v("gl-mat4/create"),r=v("gl-mat4/clone"),l=v("gl-mat4/determinant"),n=v("gl-mat4/invert"),d=v("gl-mat4/transpose"),u={length:v("gl-vec3/length"),normalize:v("gl-vec3/normalize"),dot:v("gl-vec3/dot"),cross:v("gl-vec3/cross")},o=t(),h=t(),s=[0,0,0,0],a=[[0,0,0],[0,0,0],[0,0,0]],p=[0,0,0];function c(i,y,f,w,b){i[0]=y[0]*w+f[0]*b,i[1]=y[1]*w+f[1]*b,i[2]=y[2]*w+f[2]*b}k.exports=function(i,y,f,w,b,_){if(y||(y=[0,0,0]),f||(f=[0,0,0]),w||(w=[0,0,0]),b||(b=[0,0,0,1]),_||(_=[0,0,0,1]),!e(o,i)||(r(h,o),h[3]=0,h[7]=0,h[11]=0,h[15]=1,Math.abs(l(h)<1e-8)))return!1;var T,L,A,I,P,S,E,z=o[3],D=o[7],U=o[11],H=o[12],Y=o[13],J=o[14],W=o[15];if(z!==0||D!==0||U!==0){if(s[0]=z,s[1]=D,s[2]=U,s[3]=W,!n(h,h))return!1;d(h,h),T=b,A=h,I=(L=s)[0],P=L[1],S=L[2],E=L[3],T[0]=A[0]*I+A[4]*P+A[8]*S+A[12]*E,T[1]=A[1]*I+A[5]*P+A[9]*S+A[13]*E,T[2]=A[2]*I+A[6]*P+A[10]*S+A[14]*E,T[3]=A[3]*I+A[7]*P+A[11]*S+A[15]*E}else b[0]=b[1]=b[2]=0,b[3]=1;if(y[0]=H,y[1]=Y,y[2]=J,function(re,V){re[0][0]=V[0],re[0][1]=V[1],re[0][2]=V[2],re[1][0]=V[4],re[1][1]=V[5],re[1][2]=V[6],re[2][0]=V[8],re[2][1]=V[9],re[2][2]=V[10]}(a,o),f[0]=u.length(a[0]),u.normalize(a[0],a[0]),w[0]=u.dot(a[0],a[1]),c(a[1],a[1],a[0],1,-w[0]),f[1]=u.length(a[1]),u.normalize(a[1],a[1]),w[0]/=f[1],w[1]=u.dot(a[0],a[2]),c(a[2],a[2],a[0],1,-w[1]),w[2]=u.dot(a[1],a[2]),c(a[2],a[2],a[1],1,-w[2]),f[2]=u.length(a[2]),u.normalize(a[2],a[2]),w[1]/=f[2],w[2]/=f[2],u.cross(p,a[1],a[2]),u.dot(a[0],p)<0)for(var Z=0;Z<3;Z++)f[Z]*=-1,a[Z][0]*=-1,a[Z][1]*=-1,a[Z][2]*=-1;return _[0]=.5*Math.sqrt(Math.max(1+a[0][0]-a[1][1]-a[2][2],0)),_[1]=.5*Math.sqrt(Math.max(1-a[0][0]+a[1][1]-a[2][2],0)),_[2]=.5*Math.sqrt(Math.max(1-a[0][0]-a[1][1]+a[2][2],0)),_[3]=.5*Math.sqrt(Math.max(1+a[0][0]+a[1][1]+a[2][2],0)),a[2][1]>a[1][2]&&(_[0]=-_[0]),a[0][2]>a[2][0]&&(_[1]=-_[1]),a[1][0]>a[0][1]&&(_[2]=-_[2]),!0}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(v,k,x){k.exports=function(e,t){var r=t[15];if(r===0)return!1;for(var l=1/r,n=0;n<16;n++)e[n]=t[n]*l;return!0}},{}],243:[function(v,k,x){var e=v("gl-vec3/lerp"),t=v("mat4-recompose"),r=v("mat4-decompose"),l=v("gl-mat4/determinant"),n=v("quat-slerp"),d=h(),u=h(),o=h();function h(){return{translate:s(),scale:s(1),skew:s(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function s(a){return[a||0,a||0,a||0]}k.exports=function(a,p,c,i){if(l(p)===0||l(c)===0)return!1;var y=r(p,d.translate,d.scale,d.skew,d.perspective,d.quaternion),f=r(c,u.translate,u.scale,u.skew,u.perspective,u.quaternion);return!(!y||!f)&&(e(o.translate,d.translate,u.translate,i),e(o.skew,d.skew,u.skew,i),e(o.scale,d.scale,u.scale,i),e(o.perspective,d.perspective,u.perspective,i),n(o.quaternion,d.quaternion,u.quaternion,i),t(a,o.translate,o.scale,o.skew,o.perspective,o.quaternion),!0)}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(v,k,x){var e={identity:v("gl-mat4/identity"),translate:v("gl-mat4/translate"),multiply:v("gl-mat4/multiply"),create:v("gl-mat4/create"),scale:v("gl-mat4/scale"),fromRotationTranslation:v("gl-mat4/fromRotationTranslation")},t=(e.create(),e.create());k.exports=function(r,l,n,d,u,o){return e.identity(r),e.fromRotationTranslation(r,o,l),r[3]=u[0],r[7]=u[1],r[11]=u[2],r[15]=u[3],e.identity(t),d[2]!==0&&(t[9]=d[2],e.multiply(r,r,t)),d[1]!==0&&(t[9]=0,t[8]=d[1],e.multiply(r,r,t)),d[0]!==0&&(t[8]=0,t[4]=d[0],e.multiply(r,r,t)),e.scale(r,r,n),r}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(v,k,x){var e=v("binary-search-bounds"),t=v("mat4-interpolate"),r=v("gl-mat4/invert"),l=v("gl-mat4/rotateX"),n=v("gl-mat4/rotateY"),d=v("gl-mat4/rotateZ"),u=v("gl-mat4/lookAt"),o=v("gl-mat4/translate"),h=(v("gl-mat4/scale"),v("gl-vec3/normalize")),s=[0,0,0];function a(i){this._components=i.slice(),this._time=[0],this.prevMatrix=i.slice(),this.nextMatrix=i.slice(),this.computedMatrix=i.slice(),this.computedInverse=i.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}k.exports=function(i){return new a((i=i||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var p=a.prototype;p.recalcMatrix=function(i){var y=this._time,f=e.le(y,i),w=this.computedMatrix;if(!(f<0)){var b=this._components;if(f===y.length-1)for(var _=16*f,T=0;T<16;++T)w[T]=b[_++];else{var L=y[f+1]-y[f],A=(_=16*f,this.prevMatrix),I=!0;for(T=0;T<16;++T)A[T]=b[_++];var P=this.nextMatrix;for(T=0;T<16;++T)P[T]=b[_++],I=I&&A[T]===P[T];if(L<1e-6||I)for(T=0;T<16;++T)w[T]=A[T];else t(w,A,P,(i-y[f])/L)}var S=this.computedUp;S[0]=w[1],S[1]=w[5],S[2]=w[9],h(S,S);var E=this.computedInverse;r(E,w);var z=this.computedEye,D=E[15];z[0]=E[12]/D,z[1]=E[13]/D,z[2]=E[14]/D;var U=this.computedCenter,H=Math.exp(this.computedRadius[0]);for(T=0;T<3;++T)U[T]=z[T]-w[2+4*T]*H}},p.idle=function(i){if(!(i<this.lastT())){for(var y=this._components,f=y.length-16,w=0;w<16;++w)y.push(y[f++]);this._time.push(i)}},p.flush=function(i){var y=e.gt(this._time,i)-2;y<0||(this._time.splice(0,y),this._components.splice(0,16*y))},p.lastT=function(){return this._time[this._time.length-1]},p.lookAt=function(i,y,f,w){this.recalcMatrix(i),y=y||this.computedEye,f=f||s,w=w||this.computedUp,this.setMatrix(i,u(this.computedMatrix,y,f,w));for(var b=0,_=0;_<3;++_)b+=Math.pow(f[_]-y[_],2);b=Math.log(Math.sqrt(b)),this.computedRadius[0]=b},p.rotate=function(i,y,f,w){this.recalcMatrix(i);var b=this.computedInverse;y&&n(b,b,y),f&&l(b,b,f),w&&d(b,b,w),this.setMatrix(i,r(this.computedMatrix,b))};var c=[0,0,0];p.pan=function(i,y,f,w){c[0]=-(y||0),c[1]=-(f||0),c[2]=-(w||0),this.recalcMatrix(i);var b=this.computedInverse;o(b,b,c),this.setMatrix(i,r(b,b))},p.translate=function(i,y,f,w){c[0]=y||0,c[1]=f||0,c[2]=w||0,this.recalcMatrix(i);var b=this.computedMatrix;o(b,b,c),this.setMatrix(i,b)},p.setMatrix=function(i,y){if(!(i<this.lastT())){this._time.push(i);for(var f=0;f<16;++f)this._components.push(y[f])}},p.setDistance=function(i,y){this.computedRadius[0]=y},p.setDistanceLimits=function(i,y){var f=this._limits;f[0]=i,f[1]=y},p.getDistanceLimits=function(i){var y=this._limits;return i?(i[0]=y[0],i[1]=y[1],i):y}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(v,k,x){k.exports=function(t){var r=t.length;if(r<3){for(var l=new Array(r),n=0;n<r;++n)l[n]=n;return r===2&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:l}var d=new Array(r);for(n=0;n<r;++n)d[n]=n;d.sort(function(y,f){var w=t[y][0]-t[f][0];return w||t[y][1]-t[f][1]});var u=[d[0],d[1]],o=[d[0],d[1]];for(n=2;n<r;++n){for(var h=d[n],s=t[h],a=u.length;a>1&&e(t[u[a-2]],t[u[a-1]],s)<=0;)a-=1,u.pop();for(u.push(h),a=o.length;a>1&&e(t[o[a-2]],t[o[a-1]],s)>=0;)a-=1,o.pop();o.push(h)}l=new Array(o.length+u.length-2);for(var p=0,c=(n=0,u.length);n<c;++n)l[p++]=u[n];for(var i=o.length-2;i>0;--i)l[p++]=o[i];return l};var e=v("robust-orientation")[3]},{"robust-orientation":284}],247:[function(v,k,x){k.exports=function(t,r){r||(r=t,t=window);var l=0,n=0,d=0,u={shift:!1,alt:!1,control:!1,meta:!1},o=!1;function h(_){var T=!1;return"altKey"in _&&(T=T||_.altKey!==u.alt,u.alt=!!_.altKey),"shiftKey"in _&&(T=T||_.shiftKey!==u.shift,u.shift=!!_.shiftKey),"ctrlKey"in _&&(T=T||_.ctrlKey!==u.control,u.control=!!_.ctrlKey),"metaKey"in _&&(T=T||_.metaKey!==u.meta,u.meta=!!_.metaKey),T}function s(_,T){var L=e.x(T),A=e.y(T);"buttons"in T&&(_=0|T.buttons),(_!==l||L!==n||A!==d||h(T))&&(l=0|_,n=L||0,d=A||0,r&&r(l,n,d,u))}function a(_){s(0,_)}function p(){(l||n||d||u.shift||u.alt||u.meta||u.control)&&(n=d=0,l=0,u.shift=u.alt=u.control=u.meta=!1,r&&r(0,0,0,u))}function c(_){h(_)&&r&&r(l,n,d,u)}function i(_){e.buttons(_)===0?s(0,_):s(l,_)}function y(_){s(l|e.buttons(_),_)}function f(_){s(l&~e.buttons(_),_)}function w(){o||(o=!0,t.addEventListener("mousemove",i),t.addEventListener("mousedown",y),t.addEventListener("mouseup",f),t.addEventListener("mouseleave",a),t.addEventListener("mouseenter",a),t.addEventListener("mouseout",a),t.addEventListener("mouseover",a),t.addEventListener("blur",p),t.addEventListener("keyup",c),t.addEventListener("keydown",c),t.addEventListener("keypress",c),t!==window&&(window.addEventListener("blur",p),window.addEventListener("keyup",c),window.addEventListener("keydown",c),window.addEventListener("keypress",c)))}w();var b={element:t};return Object.defineProperties(b,{enabled:{get:function(){return o},set:function(_){_?w():function(){!o||(o=!1,t.removeEventListener("mousemove",i),t.removeEventListener("mousedown",y),t.removeEventListener("mouseup",f),t.removeEventListener("mouseleave",a),t.removeEventListener("mouseenter",a),t.removeEventListener("mouseout",a),t.removeEventListener("mouseover",a),t.removeEventListener("blur",p),t.removeEventListener("keyup",c),t.removeEventListener("keydown",c),t.removeEventListener("keypress",c),t!==window&&(window.removeEventListener("blur",p),window.removeEventListener("keyup",c),window.removeEventListener("keydown",c),window.removeEventListener("keypress",c)))}()},enumerable:!0},buttons:{get:function(){return l},enumerable:!0},x:{get:function(){return n},enumerable:!0},y:{get:function(){return d},enumerable:!0},mods:{get:function(){return u},enumerable:!0}}),b};var e=v("mouse-event")},{"mouse-event":249}],248:[function(v,k,x){var e={left:0,top:0};k.exports=function(t,r,l){r=r||t.currentTarget||t.srcElement,Array.isArray(l)||(l=[0,0]);var n=t.clientX||0,d=t.clientY||0,u=(o=r,o===window||o===document||o===document.body?e:o.getBoundingClientRect()),o;return l[0]=n-u.left,l[1]=d-u.top,l}},{}],249:[function(v,k,x){function e(t){return t.target||t.srcElement||window}x.buttons=function(t){if(typeof t=="object"){if("buttons"in t)return t.buttons;if("which"in t){if((r=t.which)===2)return 4;if(r===3)return 2;if(r>0)return 1<<r-1}else if("button"in t){var r;if((r=t.button)===1)return 4;if(r===2)return 2;if(r>=0)return 1<<r}}return 0},x.element=e,x.x=function(t){if(typeof t=="object"){if("offsetX"in t)return t.offsetX;var r=e(t).getBoundingClientRect();return t.clientX-r.left}return 0},x.y=function(t){if(typeof t=="object"){if("offsetY"in t)return t.offsetY;var r=e(t).getBoundingClientRect();return t.clientY-r.top}return 0}},{}],250:[function(v,k,x){var e=v("to-px");k.exports=function(t,r,l){typeof t=="function"&&(l=!!r,r=t,t=window);var n=e("ex",t),d=function(u){l&&u.preventDefault();var o=u.deltaX||0,h=u.deltaY||0,s=u.deltaZ||0,a=1;switch(u.deltaMode){case 1:a=n;break;case 2:a=window.innerHeight}if(h*=a,s*=a,(o*=a)||h||s)return r(o,h,s,u)};return t.addEventListener("wheel",d),d}},{"to-px":304}],251:[function(v,k,x){var e=v("typedarray-pool");k.exports=function(r){function l(a){throw new Error("ndarray-extract-contour: "+a)}typeof r!="object"&&l("Must specify arguments");var n=r.order;Array.isArray(n)||l("Must specify order");var d=r.arrayArguments||1;d<1&&l("Must have at least one array argument");var u=r.scalarArguments||0;u<0&&l("Scalar arg count must be > 0"),typeof r.vertex!="function"&&l("Must specify vertex creation function"),typeof r.cell!="function"&&l("Must specify cell creation function"),typeof r.phase!="function"&&l("Must specify phase function");for(var o=r.getters||[],h=new Array(d),s=0;s<d;++s)o.indexOf(s)>=0?h[s]=!0:h[s]=!1;return function(a,p,c,i,y,f){var w=[f,y].join(",");return(0,t[w])(a,p,c,e.mallocUint32,e.freeUint32)}(r.vertex,r.cell,r.phase,0,n,h)};var t={"false,0,1":function(r,l,n,d,u){return function(o,h,s,a){var p,c=0|o.shape[0],i=0|o.shape[1],y=o.data,f=0|o.offset,w=0|o.stride[0],b=0|o.stride[1],_=f,T=0|-w,L=0,A=0|-b,I=0,P=-w-b|0,S=0,E=0|w,z=b-w*c|0,D=0,U=0,H=0,Y=2*c|0,J=d(Y),W=d(Y),Z=0,re=0,V=-1,B=-1,j=0,ee=0|-c,N=0|c,$=0,K=-c-1|0,te=c-1|0,ie=0,le=0,se=0;for(D=0;D<c;++D)J[Z++]=n(y[_],h,s,a),_+=E;if(_+=z,i>0){if(U=1,J[Z++]=n(y[_],h,s,a),_+=E,c>0)for(D=1,p=y[_],re=J[Z]=n(p,h,s,a),j=J[Z+V],$=J[Z+ee],ie=J[Z+K],re===j&&re===$&&re===ie||(L=y[_+T],I=y[_+A],S=y[_+P],r(D,U,p,L,I,S,re,j,$,ie,h,s,a),le=W[Z]=H++),Z+=1,_+=E,D=2;D<c;++D)p=y[_],re=J[Z]=n(p,h,s,a),j=J[Z+V],$=J[Z+ee],ie=J[Z+K],re===j&&re===$&&re===ie||(L=y[_+T],I=y[_+A],S=y[_+P],r(D,U,p,L,I,S,re,j,$,ie,h,s,a),le=W[Z]=H++,ie!==j&&l(W[Z+V],le,S,L,ie,j,h,s,a)),Z+=1,_+=E;for(_+=z,Z=0,se=V,V=B,B=se,se=ee,ee=N,N=se,se=K,K=te,te=se,U=2;U<i;++U){if(J[Z++]=n(y[_],h,s,a),_+=E,c>0)for(D=1,p=y[_],re=J[Z]=n(p,h,s,a),j=J[Z+V],$=J[Z+ee],ie=J[Z+K],re===j&&re===$&&re===ie||(L=y[_+T],I=y[_+A],S=y[_+P],r(D,U,p,L,I,S,re,j,$,ie,h,s,a),le=W[Z]=H++,ie!==$&&l(W[Z+ee],le,I,S,$,ie,h,s,a)),Z+=1,_+=E,D=2;D<c;++D)p=y[_],re=J[Z]=n(p,h,s,a),j=J[Z+V],$=J[Z+ee],ie=J[Z+K],re===j&&re===$&&re===ie||(L=y[_+T],I=y[_+A],S=y[_+P],r(D,U,p,L,I,S,re,j,$,ie,h,s,a),le=W[Z]=H++,ie!==$&&l(W[Z+ee],le,I,S,$,ie,h,s,a),ie!==j&&l(W[Z+V],le,S,L,ie,j,h,s,a)),Z+=1,_+=E;1&U&&(Z=0),se=V,V=B,B=se,se=ee,ee=N,N=se,se=K,K=te,te=se,_+=z}}u(W),u(J)}},"false,1,0":function(r,l,n,d,u){return function(o,h,s,a){var p,c=0|o.shape[0],i=0|o.shape[1],y=o.data,f=0|o.offset,w=0|o.stride[0],b=0|o.stride[1],_=f,T=0|-w,L=0,A=0|-b,I=0,P=-w-b|0,S=0,E=0|b,z=w-b*i|0,D=0,U=0,H=0,Y=2*i|0,J=d(Y),W=d(Y),Z=0,re=0,V=-1,B=-1,j=0,ee=0|-i,N=0|i,$=0,K=-i-1|0,te=i-1|0,ie=0,le=0,se=0;for(U=0;U<i;++U)J[Z++]=n(y[_],h,s,a),_+=E;if(_+=z,c>0){if(D=1,J[Z++]=n(y[_],h,s,a),_+=E,i>0)for(U=1,p=y[_],re=J[Z]=n(p,h,s,a),$=J[Z+ee],j=J[Z+V],ie=J[Z+K],re===$&&re===j&&re===ie||(L=y[_+T],I=y[_+A],S=y[_+P],r(D,U,p,L,I,S,re,$,j,ie,h,s,a),le=W[Z]=H++),Z+=1,_+=E,U=2;U<i;++U)p=y[_],re=J[Z]=n(p,h,s,a),$=J[Z+ee],j=J[Z+V],ie=J[Z+K],re===$&&re===j&&re===ie||(L=y[_+T],I=y[_+A],S=y[_+P],r(D,U,p,L,I,S,re,$,j,ie,h,s,a),le=W[Z]=H++,ie!==j&&l(W[Z+V],le,I,S,j,ie,h,s,a)),Z+=1,_+=E;for(_+=z,Z=0,se=ee,ee=N,N=se,se=V,V=B,B=se,se=K,K=te,te=se,D=2;D<c;++D){if(J[Z++]=n(y[_],h,s,a),_+=E,i>0)for(U=1,p=y[_],re=J[Z]=n(p,h,s,a),$=J[Z+ee],j=J[Z+V],ie=J[Z+K],re===$&&re===j&&re===ie||(L=y[_+T],I=y[_+A],S=y[_+P],r(D,U,p,L,I,S,re,$,j,ie,h,s,a),le=W[Z]=H++,ie!==$&&l(W[Z+ee],le,S,L,ie,$,h,s,a)),Z+=1,_+=E,U=2;U<i;++U)p=y[_],re=J[Z]=n(p,h,s,a),$=J[Z+ee],j=J[Z+V],ie=J[Z+K],re===$&&re===j&&re===ie||(L=y[_+T],I=y[_+A],S=y[_+P],r(D,U,p,L,I,S,re,$,j,ie,h,s,a),le=W[Z]=H++,ie!==j&&l(W[Z+V],le,I,S,j,ie,h,s,a),ie!==$&&l(W[Z+ee],le,S,L,ie,$,h,s,a)),Z+=1,_+=E;1&D&&(Z=0),se=ee,ee=N,N=se,se=V,V=B,B=se,se=K,K=te,te=se,_+=z}}u(W),u(J)}}}},{"typedarray-pool":308}],252:[function(v,k,x){var e=v("dup"),t={zero:function(c,i,y,f){var w=c[0];f|=0;var b=0,_=y[0];for(b=0;b<w;++b)i[f]=0,f+=_},fdTemplate1:function(c,i,y,f,w,b,_){var T=c[0],L=y[0],A=-1*L,I=L;f|=0,_|=0;var P=0,S=L,E=b[0];for(P=0;P<T;++P)w[_]=.5*(i[f+A]-i[f+I]),f+=S,_+=E},fdTemplate2:function(c,i,y,f,w,b,_,T,L,A){var I=c[0],P=c[1],S=y[0],E=y[1],z=b[0],D=b[1],U=L[0],H=L[1],Y=-1*S,J=S,W=-1*E,Z=E;f|=0,_|=0,A|=0;var re=0,V=0,B=E,j=S-P*E,ee=D,N=z-P*D,$=H,K=U-P*H;for(V=0;V<I;++V){for(re=0;re<P;++re)w[_]=.5*(i[f+Y]-i[f+J]),T[A]=.5*(i[f+W]-i[f+Z]),f+=B,_+=ee,A+=$;f+=j,_+=N,A+=K}}},r={cdiff:function(c){var i={};return function(y,f,w){var b=y.dtype,_=y.order,T=f.dtype,L=f.order,A=w.dtype,I=w.order,P=[b,_.join(),T,L.join(),A,I.join()].join(),S=i[P];return S||(i[P]=S=c([b,_,T,L,A,I])),S(y.shape.slice(0),y.data,y.stride,0|y.offset,f.data,f.stride,0|f.offset,w.data,w.stride,0|w.offset)}},zero:function(c){var i={};return function(y){var f=y.dtype,w=y.order,b=[f,w.join()].join(),_=i[b];return _||(i[b]=_=c([f,w])),_(y.shape.slice(0),y.data,y.stride,0|y.offset)}},fdTemplate1:function(c){var i={};return function(y,f){var w=y.dtype,b=y.order,_=f.dtype,T=f.order,L=[w,b.join(),_,T.join()].join(),A=i[L];return A||(i[L]=A=c([w,b,_,T])),A(y.shape.slice(0),y.data,y.stride,0|y.offset,f.data,f.stride,0|f.offset)}},fdTemplate2:function(c){var i={};return function(y,f,w){var b=y.dtype,_=y.order,T=f.dtype,L=f.order,A=w.dtype,I=w.order,P=[b,_.join(),T,L.join(),A,I.join()].join(),S=i[P];return S||(i[P]=S=c([b,_,T,L,A,I])),S(y.shape.slice(0),y.data,y.stride,0|y.offset,f.data,f.stride,0|f.offset,w.data,w.stride,0|w.offset)}}};function l(c){return(0,r[c.funcName])(n.bind(void 0,c))}function n(c){return t[c.funcName]}function d(c){return l({funcName:c.funcName})}var u={},o={},h=d({funcName:"cdiff"}),s=d({funcName:"zero"});function a(c){return c in u?u[c]:u[c]=d({funcName:"fdTemplate"+c})}function p(c,i,y,f){return function(w,b){var _=b.shape.slice();return _[0]>2&&_[1]>2&&f(b.pick(-1,-1).lo(1,1).hi(_[0]-2,_[1]-2),w.pick(-1,-1,0).lo(1,1).hi(_[0]-2,_[1]-2),w.pick(-1,-1,1).lo(1,1).hi(_[0]-2,_[1]-2)),_[1]>2&&(y(b.pick(0,-1).lo(1).hi(_[1]-2),w.pick(0,-1,1).lo(1).hi(_[1]-2)),i(w.pick(0,-1,0).lo(1).hi(_[1]-2))),_[1]>2&&(y(b.pick(_[0]-1,-1).lo(1).hi(_[1]-2),w.pick(_[0]-1,-1,1).lo(1).hi(_[1]-2)),i(w.pick(_[0]-1,-1,0).lo(1).hi(_[1]-2))),_[0]>2&&(y(b.pick(-1,0).lo(1).hi(_[0]-2),w.pick(-1,0,0).lo(1).hi(_[0]-2)),i(w.pick(-1,0,1).lo(1).hi(_[0]-2))),_[0]>2&&(y(b.pick(-1,_[1]-1).lo(1).hi(_[0]-2),w.pick(-1,_[1]-1,0).lo(1).hi(_[0]-2)),i(w.pick(-1,_[1]-1,1).lo(1).hi(_[0]-2))),w.set(0,0,0,0),w.set(0,0,1,0),w.set(_[0]-1,0,0,0),w.set(_[0]-1,0,1,0),w.set(0,_[1]-1,0,0),w.set(0,_[1]-1,1,0),w.set(_[0]-1,_[1]-1,0,0),w.set(_[0]-1,_[1]-1,1,0),w}}k.exports=function(c,i,y){return Array.isArray(y)||(y=e(i.dimension,typeof y=="string"?y:"clamp")),i.size===0?c:i.dimension===0?(c.set(0),c):function(f){var w=f.join();if(L=o[w])return L;for(var b=f.length,_=[h,s],T=1;T<=b;++T)_.push(a(T));var L=p.apply(void 0,_);return o[w]=L,L}(y)(c,i)}},{dup:65}],253:[function(v,k,x){function e(n,d){var u=Math.floor(d),o=d-u,h=0<=u&&u<n.shape[0],s=0<=u+1&&u+1<n.shape[0];return(1-o)*(h?+n.get(u):0)+o*(s?+n.get(u+1):0)}function t(n,d,u){var o=Math.floor(d),h=d-o,s=0<=o&&o<n.shape[0],a=0<=o+1&&o+1<n.shape[0],p=Math.floor(u),c=u-p,i=0<=p&&p<n.shape[1],y=0<=p+1&&p+1<n.shape[1],f=s&&i?n.get(o,p):0,w=s&&y?n.get(o,p+1):0;return(1-c)*((1-h)*f+h*(a&&i?n.get(o+1,p):0))+c*((1-h)*w+h*(a&&y?n.get(o+1,p+1):0))}function r(n,d,u,o){var h=Math.floor(d),s=d-h,a=0<=h&&h<n.shape[0],p=0<=h+1&&h+1<n.shape[0],c=Math.floor(u),i=u-c,y=0<=c&&c<n.shape[1],f=0<=c+1&&c+1<n.shape[1],w=Math.floor(o),b=o-w,_=0<=w&&w<n.shape[2],T=0<=w+1&&w+1<n.shape[2],L=a&&y&&_?n.get(h,c,w):0,A=a&&f&&_?n.get(h,c+1,w):0,I=p&&y&&_?n.get(h+1,c,w):0,P=p&&f&&_?n.get(h+1,c+1,w):0,S=a&&y&&T?n.get(h,c,w+1):0,E=a&&f&&T?n.get(h,c+1,w+1):0;return(1-b)*((1-i)*((1-s)*L+s*I)+i*((1-s)*A+s*P))+b*((1-i)*((1-s)*S+s*(p&&y&&T?n.get(h+1,c,w+1):0))+i*((1-s)*E+s*(p&&f&&T?n.get(h+1,c+1,w+1):0)))}function l(n){var d,u,o=0|n.shape.length,h=new Array(o),s=new Array(o),a=new Array(o),p=new Array(o);for(d=0;d<o;++d)u=+arguments[d+1],h[d]=Math.floor(u),s[d]=u-h[d],a[d]=0<=h[d]&&h[d]<n.shape[d],p[d]=0<=h[d]+1&&h[d]+1<n.shape[d];var c,i,y,f=0;e:for(d=0;d<1<<o;++d){for(i=1,y=n.offset,c=0;c<o;++c)if(d&1<<c){if(!p[c])continue e;i*=s[c],y+=n.stride[c]*(h[c]+1)}else{if(!a[c])continue e;i*=1-s[c],y+=n.stride[c]*h[c]}f+=i*n.data[y]}return f}k.exports=function(n,d,u,o){switch(n.shape.length){case 0:return 0;case 1:return e(n,d);case 2:return t(n,d,u);case 3:return r(n,d,u,o);default:return l.apply(void 0,arguments)}},k.exports.d1=e,k.exports.d2=t,k.exports.d3=r},{}],254:[function(v,k,x){var e={"float64,2,1,0":function(){return function(d,u,o,h,s){var a=d[0],p=d[1],c=d[2],i=o[0],y=o[1],f=o[2];h|=0;var w=0,b=0,_=0,T=f,L=y-c*f,A=i-p*y;for(_=0;_<a;++_){for(b=0;b<p;++b){for(w=0;w<c;++w)u[h]/=s,h+=T;h+=L}h+=A}}},"uint8,2,0,1,float64,2,1,0":function(){return function(d,u,o,h,s,a,p,c){for(var i=d[0],y=d[1],f=d[2],w=o[0],b=o[1],_=o[2],T=a[0],L=a[1],A=a[2],I=h|=0,P=p|=0,S=0|d[0];S>0;){S<64?(i=S,S=0):(i=64,S-=64);for(var E=0|d[1];E>0;){E<64?(y=E,E=0):(y=64,E-=64),h=I+S*w+E*b,p=P+S*T+E*L;var z=0,D=0,U=0,H=_,Y=w-f*_,J=b-i*w,W=A,Z=T-f*A,re=L-i*T;for(U=0;U<y;++U){for(D=0;D<i;++D){for(z=0;z<f;++z)u[h]=s[p]*c,h+=H,p+=W;h+=Y,p+=Z}h+=J,p+=re}}}}},"float32,1,0,float32,1,0":function(){return function(d,u,o,h,s,a,p){var c=d[0],i=d[1],y=o[0],f=o[1],w=a[0],b=a[1];h|=0,p|=0;var _=0,T=0,L=f,A=y-i*f,I=b,P=w-i*b;for(T=0;T<c;++T){for(_=0;_<i;++_)u[h]=s[p],h+=L,p+=I;h+=A,p+=P}}},"float32,1,0,float32,0,1":function(){return function(d,u,o,h,s,a,p){for(var c=d[0],i=d[1],y=o[0],f=o[1],w=a[0],b=a[1],_=h|=0,T=p|=0,L=0|d[1];L>0;){L<64?(i=L,L=0):(i=64,L-=64);for(var A=0|d[0];A>0;){A<64?(c=A,A=0):(c=64,A-=64),h=_+L*f+A*y,p=T+L*b+A*w;var I=0,P=0,S=f,E=y-i*f,z=b,D=w-i*b;for(P=0;P<c;++P){for(I=0;I<i;++I)u[h]=s[p],h+=S,p+=z;h+=E,p+=D}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(d,u,o,h,s,a,p){for(var c=d[0],i=d[1],y=d[2],f=o[0],w=o[1],b=o[2],_=a[0],T=a[1],L=a[2],A=h|=0,I=p|=0,P=0|d[2];P>0;){P<64?(y=P,P=0):(y=64,P-=64);for(var S=0|d[0];S>0;){S<64?(c=S,S=0):(c=64,S-=64);for(var E=0|d[1];E>0;){E<64?(i=E,E=0):(i=64,E-=64),h=A+P*b+S*f+E*w,p=I+P*L+S*_+E*T;var z=0,D=0,U=0,H=b,Y=f-y*b,J=w-c*f,W=L,Z=_-y*L,re=T-c*_;for(U=0;U<i;++U){for(D=0;D<c;++D){for(z=0;z<y;++z)u[h]=s[p],h+=H,p+=W;h+=Y,p+=Z}h+=J,p+=re}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(d,u,o,h,s,a,p){var c=d[0],i=d[1],y=d[2],f=o[0],w=o[1],b=o[2],_=a[0],T=a[1],L=a[2];h|=0,p|=0;var A=0,I=0,P=0,S=b,E=f-y*b,z=w-c*f,D=L,U=_-y*L,H=T-c*_;for(P=0;P<i;++P){for(I=0;I<c;++I){for(A=0;A<y;++A)u[h]=s[p],h+=S,p+=D;h+=E,p+=U}h+=z,p+=H}}}},t=function(d,u){var o=u.join(",");return(0,e[o])()},r={mul:function(d){var u={};return function(o,h,s){var a=o.dtype,p=o.order,c=h.dtype,i=h.order,y=s.dtype,f=s.order,w=[a,p.join(),c,i.join(),y,f.join()].join(),b=u[w];return b||(u[w]=b=d([a,p,c,i,y,f])),b(o.shape.slice(0),o.data,o.stride,0|o.offset,h.data,h.stride,0|h.offset,s.data,s.stride,0|s.offset)}},muls:function(d){var u={};return function(o,h,s){var a=o.dtype,p=o.order,c=h.dtype,i=h.order,y=[a,p.join(),c,i.join()].join(),f=u[y];return f||(u[y]=f=d([a,p,c,i])),f(o.shape.slice(0),o.data,o.stride,0|o.offset,h.data,h.stride,0|h.offset,s)}},mulseq:function(d){var u={};return function(o,h){var s=o.dtype,a=o.order,p=[s,a.join()].join(),c=u[p];return c||(u[p]=c=d([s,a])),c(o.shape.slice(0),o.data,o.stride,0|o.offset,h)}},div:function(d){var u={};return function(o,h,s){var a=o.dtype,p=o.order,c=h.dtype,i=h.order,y=s.dtype,f=s.order,w=[a,p.join(),c,i.join(),y,f.join()].join(),b=u[w];return b||(u[w]=b=d([a,p,c,i,y,f])),b(o.shape.slice(0),o.data,o.stride,0|o.offset,h.data,h.stride,0|h.offset,s.data,s.stride,0|s.offset)}},divs:function(d){var u={};return function(o,h,s){var a=o.dtype,p=o.order,c=h.dtype,i=h.order,y=[a,p.join(),c,i.join()].join(),f=u[y];return f||(u[y]=f=d([a,p,c,i])),f(o.shape.slice(0),o.data,o.stride,0|o.offset,h.data,h.stride,0|h.offset,s)}},divseq:function(d){var u={};return function(o,h){var s=o.dtype,a=o.order,p=[s,a.join()].join(),c=u[p];return c||(u[p]=c=d([s,a])),c(o.shape.slice(0),o.data,o.stride,0|o.offset,h)}},assign:function(d){var u={};return function(o,h){var s=o.dtype,a=o.order,p=h.dtype,c=h.order,i=[s,a.join(),p,c.join()].join(),y=u[i];return y||(u[i]=y=d([s,a,p,c])),y(o.shape.slice(0),o.data,o.stride,0|o.offset,h.data,h.stride,0|h.offset)}}};function l(d){return u={funcName:d.funcName},(0,r[u.funcName])(t.bind(void 0,u));var u}var n={mul:"*",div:"/"};(function(){for(var d in n)x[d]=l({funcName:d}),x[d+"s"]=l({funcName:d+"s"}),x[d+"seq"]=l({funcName:d+"seq"})})(),x.assign=l({funcName:"assign"})},{}],255:[function(v,k,x){var e=v("ndarray"),t=v("./doConvert.js");k.exports=function(r,l){for(var n=[],d=r,u=1;Array.isArray(d);)n.push(d.length),u*=d.length,d=d[0];return n.length===0?e():(l||(l=e(new Float64Array(u),n)),t(l,r),l)}},{"./doConvert.js":256,ndarray:259}],256:[function(v,k,x){var e,t=function(){return function(r,l,n,d,u){var o=r[0],h=r[1],s=r[2],a=n[0],p=n[1],c=n[2],i=[0,0,0];d|=0;var y=0,f=0,w=0,b=c,_=p-s*c,T=a-h*p;for(w=0;w<o;++w){for(f=0;f<h;++f){for(y=0;y<s;++y){var L,A=u;for(L=0;L<i.length-1;++L)A=A[i[L]];l[d]=A[i[i.length-1]],d+=b,++i[2]}d+=_,i[2]-=s,++i[1]}d+=T,i[1]-=h,++i[0]}}};k.exports=(e={funcName:"convert"},function(r){var l={};return function(n,d){var u=n.dtype,o=n.order,h=[u,o.join()].join(),s=l[h];return s||(l[h]=s=r([u,o])),s(n.shape.slice(0),n.data,n.stride,0|n.offset,d)}}(t.bind(void 0,e)))},{}],257:[function(v,k,x){var e=v("typedarray-pool");function t(d){switch(d){case"uint32":return[e.mallocUint32,e.freeUint32];default:return null}}var r={"uint32,1,0":function(d,u){return function(o,h,s,a,p,c,i,y,f,w,b){var _,T,L,A,I,P,S,E,z=o*p+a,D=d(y);for(_=o+1;_<=h;++_){for(T=_,L=z+=p,I=0,P=z,A=0;A<y;++A)D[I++]=s[P],P+=f;e:for(;T-- >o;){I=0,P=L-p;t:for(A=0;A<y;++A){if((S=s[P])<(E=D[I]))break e;if(S>E)break t;P+=w,I+=b}for(I=L,P=L-p,A=0;A<y;++A)s[I]=s[P],I+=f,P+=f;L-=p}for(I=L,P=0,A=0;A<y;++A)s[I]=D[P++],I+=f}u(D)}}},l={"uint32,1,0":function(d,u,o){return function h(s,a,p,c,i,y,f,w,b,_,T){var L,A,I,P,S,E,z,D,U,H,Y,J,W,Z,re,V,B,j,ee,N,$,K,te,ie,le,se=(a-s+1)/6|0,ve=s+se,fe=a-se,ye=s+a>>1,Ae=ye-se,pe=ye+se,ge=ve,we=Ae,oe=ye,de=pe,Te=fe,Ee=s+1,Me=a-1,De=!0,Ie=0,Oe=0,Ze=0,Fe=w,Pe=u(Fe),ze=u(Fe);Y=i*ge,J=i*we,le=c;e:for(H=0;H<w;++H){if(D=J+le,(Ze=p[z=Y+le]-p[D])>0){A=ge,ge=we,we=A;break e}if(Ze<0)break e;le+=_}Y=i*de,J=i*Te,le=c;e:for(H=0;H<w;++H){if(D=J+le,(Ze=p[z=Y+le]-p[D])>0){A=de,de=Te,Te=A;break e}if(Ze<0)break e;le+=_}Y=i*ge,J=i*oe,le=c;e:for(H=0;H<w;++H){if(D=J+le,(Ze=p[z=Y+le]-p[D])>0){A=ge,ge=oe,oe=A;break e}if(Ze<0)break e;le+=_}Y=i*we,J=i*oe,le=c;e:for(H=0;H<w;++H){if(D=J+le,(Ze=p[z=Y+le]-p[D])>0){A=we,we=oe,oe=A;break e}if(Ze<0)break e;le+=_}Y=i*ge,J=i*de,le=c;e:for(H=0;H<w;++H){if(D=J+le,(Ze=p[z=Y+le]-p[D])>0){A=ge,ge=de,de=A;break e}if(Ze<0)break e;le+=_}Y=i*oe,J=i*de,le=c;e:for(H=0;H<w;++H){if(D=J+le,(Ze=p[z=Y+le]-p[D])>0){A=oe,oe=de,de=A;break e}if(Ze<0)break e;le+=_}Y=i*we,J=i*Te,le=c;e:for(H=0;H<w;++H){if(D=J+le,(Ze=p[z=Y+le]-p[D])>0){A=we,we=Te,Te=A;break e}if(Ze<0)break e;le+=_}Y=i*we,J=i*oe,le=c;e:for(H=0;H<w;++H){if(D=J+le,(Ze=p[z=Y+le]-p[D])>0){A=we,we=oe,oe=A;break e}if(Ze<0)break e;le+=_}Y=i*de,J=i*Te,le=c;e:for(H=0;H<w;++H){if(D=J+le,(Ze=p[z=Y+le]-p[D])>0){A=de,de=Te,Te=A;break e}if(Ze<0)break e;le+=_}for(Y=i*ge,J=i*we,W=i*oe,Z=i*de,re=i*Te,V=i*ve,B=i*ye,j=i*fe,ie=0,le=c,H=0;H<w;++H)z=Y+le,D=J+le,U=W+le,ee=Z+le,N=re+le,$=V+le,K=B+le,te=j+le,Pe[ie]=p[D],ze[ie]=p[ee],De=De&&Pe[ie]===ze[ie],I=p[z],P=p[U],S=p[N],p[$]=I,p[K]=P,p[te]=S,++ie,le+=b;for(Y=i*Ae,J=i*s,le=c,H=0;H<w;++H)D=J+le,p[z=Y+le]=p[D],le+=b;for(Y=i*pe,J=i*a,le=c,H=0;H<w;++H)D=J+le,p[z=Y+le]=p[D],le+=b;if(De)for(E=Ee;E<=Me;++E){for(z=c+E*i,ie=0,H=0;H<w&&(Ze=p[z]-Pe[ie])===0;++H)ie+=T,z+=_;if(Ze!==0)if(Ze<0){if(E!==Ee)for(Y=i*E,J=i*Ee,le=c,H=0;H<w;++H)D=J+le,L=p[z=Y+le],p[z]=p[D],p[D]=L,le+=b;++Ee}else for(;;){for(z=c+Me*i,ie=0,H=0;H<w&&(Ze=p[z]-Pe[ie])===0;++H)ie+=T,z+=_;if(!(Ze>0)){if(Ze<0){for(Y=i*E,J=i*Ee,W=i*Me,le=c,H=0;H<w;++H)D=J+le,U=W+le,L=p[z=Y+le],p[z]=p[D],p[D]=p[U],p[U]=L,le+=b;++Ee,--Me;break}for(Y=i*E,J=i*Me,le=c,H=0;H<w;++H)D=J+le,L=p[z=Y+le],p[z]=p[D],p[D]=L,le+=b;--Me;break}Me--}}else for(E=Ee;E<=Me;++E){for(z=c+E*i,ie=0,H=0;H<w&&(Ie=p[z]-Pe[ie])===0;++H)ie+=T,z+=_;if(Ie<0){if(E!==Ee)for(Y=i*E,J=i*Ee,le=c,H=0;H<w;++H)D=J+le,L=p[z=Y+le],p[z]=p[D],p[D]=L,le+=b;++Ee}else{for(z=c+E*i,ie=0,H=0;H<w&&(Oe=p[z]-ze[ie])===0;++H)ie+=T,z+=_;if(Oe>0)for(;;){for(z=c+Me*i,ie=0,H=0;H<w&&(Ze=p[z]-ze[ie])===0;++H)ie+=T,z+=_;if(!(Ze>0)){for(z=c+Me*i,ie=0,H=0;H<w&&(Ze=p[z]-Pe[ie])===0;++H)ie+=T,z+=_;if(Ze<0){for(Y=i*E,J=i*Ee,W=i*Me,le=c,H=0;H<w;++H)D=J+le,U=W+le,L=p[z=Y+le],p[z]=p[D],p[D]=p[U],p[U]=L,le+=b;++Ee,--Me}else{for(Y=i*E,J=i*Me,le=c,H=0;H<w;++H)D=J+le,L=p[z=Y+le],p[z]=p[D],p[D]=L,le+=b;--Me}break}if(--Me<E)break}}}for(Y=i*s,J=i*(Ee-1),ie=0,le=c,H=0;H<w;++H)D=J+le,p[z=Y+le]=p[D],p[D]=Pe[ie],++ie,le+=b;for(Y=i*a,J=i*(Me+1),ie=0,le=c,H=0;H<w;++H)D=J+le,p[z=Y+le]=p[D],p[D]=ze[ie],++ie,le+=b;if(Ee-2-s<=32?d(s,Ee-2,p,c,i,y,f,w,b,_,T):h(s,Ee-2,p,c,i,y,f,w,b,_,T),a-(Me+2)<=32?d(Me+2,a,p,c,i,y,f,w,b,_,T):h(Me+2,a,p,c,i,y,f,w,b,_,T),De)return o(Pe),void o(ze);if(Ee<ve&&Me>fe){e:for(;;){for(z=c+Ee*i,ie=0,le=c,H=0;H<w;++H){if(p[z]!==Pe[ie])break e;++ie,z+=b}++Ee}e:for(;;){for(z=c+Me*i,ie=0,le=c,H=0;H<w;++H){if(p[z]!==ze[ie])break e;++ie,z+=b}--Me}for(E=Ee;E<=Me;++E){for(z=c+E*i,ie=0,H=0;H<w&&(Ie=p[z]-Pe[ie])===0;++H)ie+=T,z+=_;if(Ie===0){if(E!==Ee)for(Y=i*E,J=i*Ee,le=c,H=0;H<w;++H)D=J+le,L=p[z=Y+le],p[z]=p[D],p[D]=L,le+=b;++Ee}else{for(z=c+E*i,ie=0,H=0;H<w&&(Oe=p[z]-ze[ie])===0;++H)ie+=T,z+=_;if(Oe===0)for(;;){for(z=c+Me*i,ie=0,H=0;H<w&&(Ze=p[z]-ze[ie])===0;++H)ie+=T,z+=_;if(Ze!==0){for(z=c+Me*i,ie=0,H=0;H<w&&(Ze=p[z]-Pe[ie])===0;++H)ie+=T,z+=_;if(Ze<0){for(Y=i*E,J=i*Ee,W=i*Me,le=c,H=0;H<w;++H)D=J+le,U=W+le,L=p[z=Y+le],p[z]=p[D],p[D]=p[U],p[U]=L,le+=b;++Ee,--Me}else{for(Y=i*E,J=i*Me,le=c,H=0;H<w;++H)D=J+le,L=p[z=Y+le],p[z]=p[D],p[D]=L,le+=b;--Me}break}if(--Me<E)break}}}}o(Pe),o(ze),Me-Ee<=32?d(Ee,Me,p,c,i,y,f,w,b,_,T):h(Ee,Me,p,c,i,y,f,w,b,_,T)}}},n={"uint32,1,0":function(d,u){return function(o){var h=o.data,s=0|o.offset,a=o.shape,p=o.stride,c=0|p[0],i=0|a[0],y=0|p[1],f=0|a[1],w=y,b=y;i<=32?d(0,i-1,h,s,c,y,i,f,w,b,1):u(0,i-1,h,s,c,y,i,f,w,b,1)}}};k.exports=function(d,u){var o=[u,d].join(","),h=n[o],s=function(p,c){var i=t(c),y=[c,p].join(","),f=r[y];return i?f(i[0],i[1]):f()}(d,u),a=function(p,c,i){var y=t(c),f=[c,p].join(","),w=l[f];return p.length>1&&y?w(i,y[0],y[1]):w(i)}(d,u,s);return h(s,a)}},{"typedarray-pool":308}],258:[function(v,k,x){var e=v("./lib/compile_sort.js"),t={};k.exports=function(r){var l=r.order,n=r.dtype,d=[l,n].join(":"),u=t[d];return u||(t[d]=u=e(l,n)),u(r),r}},{"./lib/compile_sort.js":257}],259:[function(v,k,x){var e=v("is-buffer"),t=typeof Float64Array<"u";function r(o,h){return o[0]-h[0]}function l(){var o,h=this.stride,s=new Array(h.length);for(o=0;o<s.length;++o)s[o]=[Math.abs(h[o]),o];s.sort(r);var a=new Array(s.length);for(o=0;o<a.length;++o)a[o]=s[o][1];return a}var n={T:function(o){function h(a){this.data=a}var s=h.prototype;return s.dtype=o,s.index=function(){return-1},s.size=0,s.dimension=-1,s.shape=s.stride=s.order=[],s.lo=s.hi=s.transpose=s.step=function(){return new h(this.data)},s.get=s.set=function(){},s.pick=function(){return null},function(a){return new h(a)}},0:function(o,h){function s(p,c){this.data=p,this.offset=c}var a=s.prototype;return a.dtype=o,a.index=function(){return this.offset},a.dimension=0,a.size=1,a.shape=a.stride=a.order=[],a.lo=a.hi=a.transpose=a.step=function(){return new s(this.data,this.offset)},a.pick=function(){return h(this.data)},a.valueOf=a.get=function(){return o==="generic"?this.data.get(this.offset):this.data[this.offset]},a.set=function(p){return o==="generic"?this.data.set(this.offset,p):this.data[this.offset]=p},function(p,c,i,y){return new s(p,y)}},1:function(o,h,s){function a(c,i,y,f){this.data=c,this.shape=[i],this.stride=[y],this.offset=0|f}var p=a.prototype;return p.dtype=o,p.dimension=1,Object.defineProperty(p,"size",{get:function(){return this.shape[0]}}),p.order=[0],p.set=function(c,i){return o==="generic"?this.data.set(this.offset+this.stride[0]*c,i):this.data[this.offset+this.stride[0]*c]=i},p.get=function(c){return o==="generic"?this.data.get(this.offset+this.stride[0]*c):this.data[this.offset+this.stride[0]*c]},p.index=function(c){return this.offset+this.stride[0]*c},p.hi=function(c){return new a(this.data,typeof c!="number"||c<0?this.shape[0]:0|c,this.stride[0],this.offset)},p.lo=function(c){var i=this.offset,y=0,f=this.shape[0],w=this.stride[0];return typeof c=="number"&&c>=0&&(i+=w*(y=0|c),f-=y),new a(this.data,f,w,i)},p.step=function(c){var i=this.shape[0],y=this.stride[0],f=this.offset,w=0,b=Math.ceil;return typeof c=="number"&&((w=0|c)<0?(f+=y*(i-1),i=b(-i/w)):i=b(i/w),y*=w),new a(this.data,i,y,f)},p.transpose=function(c){c=c===void 0?0:0|c;var i=this.shape,y=this.stride;return new a(this.data,i[c],y[c],this.offset)},p.pick=function(c){var i=[],y=[],f=this.offset;return typeof c=="number"&&c>=0?f=f+this.stride[0]*c|0:(i.push(this.shape[0]),y.push(this.stride[0])),(0,h[i.length+1])(this.data,i,y,f)},function(c,i,y,f){return new a(c,i[0],y[0],f)}},2:function(o,h,s){function a(c,i,y,f,w,b){this.data=c,this.shape=[i,y],this.stride=[f,w],this.offset=0|b}var p=a.prototype;return p.dtype=o,p.dimension=2,Object.defineProperty(p,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(p,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),p.set=function(c,i,y){return o==="generic"?this.data.set(this.offset+this.stride[0]*c+this.stride[1]*i,y):this.data[this.offset+this.stride[0]*c+this.stride[1]*i]=y},p.get=function(c,i){return o==="generic"?this.data.get(this.offset+this.stride[0]*c+this.stride[1]*i):this.data[this.offset+this.stride[0]*c+this.stride[1]*i]},p.index=function(c,i){return this.offset+this.stride[0]*c+this.stride[1]*i},p.hi=function(c,i){return new a(this.data,typeof c!="number"||c<0?this.shape[0]:0|c,typeof i!="number"||i<0?this.shape[1]:0|i,this.stride[0],this.stride[1],this.offset)},p.lo=function(c,i){var y=this.offset,f=0,w=this.shape[0],b=this.shape[1],_=this.stride[0],T=this.stride[1];return typeof c=="number"&&c>=0&&(y+=_*(f=0|c),w-=f),typeof i=="number"&&i>=0&&(y+=T*(f=0|i),b-=f),new a(this.data,w,b,_,T,y)},p.step=function(c,i){var y=this.shape[0],f=this.shape[1],w=this.stride[0],b=this.stride[1],_=this.offset,T=0,L=Math.ceil;return typeof c=="number"&&((T=0|c)<0?(_+=w*(y-1),y=L(-y/T)):y=L(y/T),w*=T),typeof i=="number"&&((T=0|i)<0?(_+=b*(f-1),f=L(-f/T)):f=L(f/T),b*=T),new a(this.data,y,f,w,b,_)},p.transpose=function(c,i){c=c===void 0?0:0|c,i=i===void 0?1:0|i;var y=this.shape,f=this.stride;return new a(this.data,y[c],y[i],f[c],f[i],this.offset)},p.pick=function(c,i){var y=[],f=[],w=this.offset;return typeof c=="number"&&c>=0?w=w+this.stride[0]*c|0:(y.push(this.shape[0]),f.push(this.stride[0])),typeof i=="number"&&i>=0?w=w+this.stride[1]*i|0:(y.push(this.shape[1]),f.push(this.stride[1])),(0,h[y.length+1])(this.data,y,f,w)},function(c,i,y,f){return new a(c,i[0],i[1],y[0],y[1],f)}},3:function(o,h,s){function a(c,i,y,f,w,b,_,T){this.data=c,this.shape=[i,y,f],this.stride=[w,b,_],this.offset=0|T}var p=a.prototype;return p.dtype=o,p.dimension=3,Object.defineProperty(p,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(p,"order",{get:function(){var c=Math.abs(this.stride[0]),i=Math.abs(this.stride[1]),y=Math.abs(this.stride[2]);return c>i?i>y?[2,1,0]:c>y?[1,2,0]:[1,0,2]:c>y?[2,0,1]:y>i?[0,1,2]:[0,2,1]}}),p.set=function(c,i,y,f){return o==="generic"?this.data.set(this.offset+this.stride[0]*c+this.stride[1]*i+this.stride[2]*y,f):this.data[this.offset+this.stride[0]*c+this.stride[1]*i+this.stride[2]*y]=f},p.get=function(c,i,y){return o==="generic"?this.data.get(this.offset+this.stride[0]*c+this.stride[1]*i+this.stride[2]*y):this.data[this.offset+this.stride[0]*c+this.stride[1]*i+this.stride[2]*y]},p.index=function(c,i,y){return this.offset+this.stride[0]*c+this.stride[1]*i+this.stride[2]*y},p.hi=function(c,i,y){return new a(this.data,typeof c!="number"||c<0?this.shape[0]:0|c,typeof i!="number"||i<0?this.shape[1]:0|i,typeof y!="number"||y<0?this.shape[2]:0|y,this.stride[0],this.stride[1],this.stride[2],this.offset)},p.lo=function(c,i,y){var f=this.offset,w=0,b=this.shape[0],_=this.shape[1],T=this.shape[2],L=this.stride[0],A=this.stride[1],I=this.stride[2];return typeof c=="number"&&c>=0&&(f+=L*(w=0|c),b-=w),typeof i=="number"&&i>=0&&(f+=A*(w=0|i),_-=w),typeof y=="number"&&y>=0&&(f+=I*(w=0|y),T-=w),new a(this.data,b,_,T,L,A,I,f)},p.step=function(c,i,y){var f=this.shape[0],w=this.shape[1],b=this.shape[2],_=this.stride[0],T=this.stride[1],L=this.stride[2],A=this.offset,I=0,P=Math.ceil;return typeof c=="number"&&((I=0|c)<0?(A+=_*(f-1),f=P(-f/I)):f=P(f/I),_*=I),typeof i=="number"&&((I=0|i)<0?(A+=T*(w-1),w=P(-w/I)):w=P(w/I),T*=I),typeof y=="number"&&((I=0|y)<0?(A+=L*(b-1),b=P(-b/I)):b=P(b/I),L*=I),new a(this.data,f,w,b,_,T,L,A)},p.transpose=function(c,i,y){c=c===void 0?0:0|c,i=i===void 0?1:0|i,y=y===void 0?2:0|y;var f=this.shape,w=this.stride;return new a(this.data,f[c],f[i],f[y],w[c],w[i],w[y],this.offset)},p.pick=function(c,i,y){var f=[],w=[],b=this.offset;return typeof c=="number"&&c>=0?b=b+this.stride[0]*c|0:(f.push(this.shape[0]),w.push(this.stride[0])),typeof i=="number"&&i>=0?b=b+this.stride[1]*i|0:(f.push(this.shape[1]),w.push(this.stride[1])),typeof y=="number"&&y>=0?b=b+this.stride[2]*y|0:(f.push(this.shape[2]),w.push(this.stride[2])),(0,h[f.length+1])(this.data,f,w,b)},function(c,i,y,f){return new a(c,i[0],i[1],i[2],y[0],y[1],y[2],f)}},4:function(o,h,s){function a(c,i,y,f,w,b,_,T,L,A){this.data=c,this.shape=[i,y,f,w],this.stride=[b,_,T,L],this.offset=0|A}var p=a.prototype;return p.dtype=o,p.dimension=4,Object.defineProperty(p,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(p,"order",{get:s}),p.set=function(c,i,y,f,w){return o==="generic"?this.data.set(this.offset+this.stride[0]*c+this.stride[1]*i+this.stride[2]*y+this.stride[3]*f,w):this.data[this.offset+this.stride[0]*c+this.stride[1]*i+this.stride[2]*y+this.stride[3]*f]=w},p.get=function(c,i,y,f){return o==="generic"?this.data.get(this.offset+this.stride[0]*c+this.stride[1]*i+this.stride[2]*y+this.stride[3]*f):this.data[this.offset+this.stride[0]*c+this.stride[1]*i+this.stride[2]*y+this.stride[3]*f]},p.index=function(c,i,y,f){return this.offset+this.stride[0]*c+this.stride[1]*i+this.stride[2]*y+this.stride[3]*f},p.hi=function(c,i,y,f){return new a(this.data,typeof c!="number"||c<0?this.shape[0]:0|c,typeof i!="number"||i<0?this.shape[1]:0|i,typeof y!="number"||y<0?this.shape[2]:0|y,typeof f!="number"||f<0?this.shape[3]:0|f,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},p.lo=function(c,i,y,f){var w=this.offset,b=0,_=this.shape[0],T=this.shape[1],L=this.shape[2],A=this.shape[3],I=this.stride[0],P=this.stride[1],S=this.stride[2],E=this.stride[3];return typeof c=="number"&&c>=0&&(w+=I*(b=0|c),_-=b),typeof i=="number"&&i>=0&&(w+=P*(b=0|i),T-=b),typeof y=="number"&&y>=0&&(w+=S*(b=0|y),L-=b),typeof f=="number"&&f>=0&&(w+=E*(b=0|f),A-=b),new a(this.data,_,T,L,A,I,P,S,E,w)},p.step=function(c,i,y,f){var w=this.shape[0],b=this.shape[1],_=this.shape[2],T=this.shape[3],L=this.stride[0],A=this.stride[1],I=this.stride[2],P=this.stride[3],S=this.offset,E=0,z=Math.ceil;return typeof c=="number"&&((E=0|c)<0?(S+=L*(w-1),w=z(-w/E)):w=z(w/E),L*=E),typeof i=="number"&&((E=0|i)<0?(S+=A*(b-1),b=z(-b/E)):b=z(b/E),A*=E),typeof y=="number"&&((E=0|y)<0?(S+=I*(_-1),_=z(-_/E)):_=z(_/E),I*=E),typeof f=="number"&&((E=0|f)<0?(S+=P*(T-1),T=z(-T/E)):T=z(T/E),P*=E),new a(this.data,w,b,_,T,L,A,I,P,S)},p.transpose=function(c,i,y,f){c=c===void 0?0:0|c,i=i===void 0?1:0|i,y=y===void 0?2:0|y,f=f===void 0?3:0|f;var w=this.shape,b=this.stride;return new a(this.data,w[c],w[i],w[y],w[f],b[c],b[i],b[y],b[f],this.offset)},p.pick=function(c,i,y,f){var w=[],b=[],_=this.offset;return typeof c=="number"&&c>=0?_=_+this.stride[0]*c|0:(w.push(this.shape[0]),b.push(this.stride[0])),typeof i=="number"&&i>=0?_=_+this.stride[1]*i|0:(w.push(this.shape[1]),b.push(this.stride[1])),typeof y=="number"&&y>=0?_=_+this.stride[2]*y|0:(w.push(this.shape[2]),b.push(this.stride[2])),typeof f=="number"&&f>=0?_=_+this.stride[3]*f|0:(w.push(this.shape[3]),b.push(this.stride[3])),(0,h[w.length+1])(this.data,w,b,_)},function(c,i,y,f){return new a(c,i[0],i[1],i[2],i[3],y[0],y[1],y[2],y[3],f)}},5:function(o,h,s){function a(c,i,y,f,w,b,_,T,L,A,I,P){this.data=c,this.shape=[i,y,f,w,b],this.stride=[_,T,L,A,I],this.offset=0|P}var p=a.prototype;return p.dtype=o,p.dimension=5,Object.defineProperty(p,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(p,"order",{get:s}),p.set=function(c,i,y,f,w,b){return o==="generic"?this.data.set(this.offset+this.stride[0]*c+this.stride[1]*i+this.stride[2]*y+this.stride[3]*f+this.stride[4]*w,b):this.data[this.offset+this.stride[0]*c+this.stride[1]*i+this.stride[2]*y+this.stride[3]*f+this.stride[4]*w]=b},p.get=function(c,i,y,f,w){return o==="generic"?this.data.get(this.offset+this.stride[0]*c+this.stride[1]*i+this.stride[2]*y+this.stride[3]*f+this.stride[4]*w):this.data[this.offset+this.stride[0]*c+this.stride[1]*i+this.stride[2]*y+this.stride[3]*f+this.stride[4]*w]},p.index=function(c,i,y,f,w){return this.offset+this.stride[0]*c+this.stride[1]*i+this.stride[2]*y+this.stride[3]*f+this.stride[4]*w},p.hi=function(c,i,y,f,w){return new a(this.data,typeof c!="number"||c<0?this.shape[0]:0|c,typeof i!="number"||i<0?this.shape[1]:0|i,typeof y!="number"||y<0?this.shape[2]:0|y,typeof f!="number"||f<0?this.shape[3]:0|f,typeof w!="number"||w<0?this.shape[4]:0|w,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},p.lo=function(c,i,y,f,w){var b=this.offset,_=0,T=this.shape[0],L=this.shape[1],A=this.shape[2],I=this.shape[3],P=this.shape[4],S=this.stride[0],E=this.stride[1],z=this.stride[2],D=this.stride[3],U=this.stride[4];return typeof c=="number"&&c>=0&&(b+=S*(_=0|c),T-=_),typeof i=="number"&&i>=0&&(b+=E*(_=0|i),L-=_),typeof y=="number"&&y>=0&&(b+=z*(_=0|y),A-=_),typeof f=="number"&&f>=0&&(b+=D*(_=0|f),I-=_),typeof w=="number"&&w>=0&&(b+=U*(_=0|w),P-=_),new a(this.data,T,L,A,I,P,S,E,z,D,U,b)},p.step=function(c,i,y,f,w){var b=this.shape[0],_=this.shape[1],T=this.shape[2],L=this.shape[3],A=this.shape[4],I=this.stride[0],P=this.stride[1],S=this.stride[2],E=this.stride[3],z=this.stride[4],D=this.offset,U=0,H=Math.ceil;return typeof c=="number"&&((U=0|c)<0?(D+=I*(b-1),b=H(-b/U)):b=H(b/U),I*=U),typeof i=="number"&&((U=0|i)<0?(D+=P*(_-1),_=H(-_/U)):_=H(_/U),P*=U),typeof y=="number"&&((U=0|y)<0?(D+=S*(T-1),T=H(-T/U)):T=H(T/U),S*=U),typeof f=="number"&&((U=0|f)<0?(D+=E*(L-1),L=H(-L/U)):L=H(L/U),E*=U),typeof w=="number"&&((U=0|w)<0?(D+=z*(A-1),A=H(-A/U)):A=H(A/U),z*=U),new a(this.data,b,_,T,L,A,I,P,S,E,z,D)},p.transpose=function(c,i,y,f,w){c=c===void 0?0:0|c,i=i===void 0?1:0|i,y=y===void 0?2:0|y,f=f===void 0?3:0|f,w=w===void 0?4:0|w;var b=this.shape,_=this.stride;return new a(this.data,b[c],b[i],b[y],b[f],b[w],_[c],_[i],_[y],_[f],_[w],this.offset)},p.pick=function(c,i,y,f,w){var b=[],_=[],T=this.offset;return typeof c=="number"&&c>=0?T=T+this.stride[0]*c|0:(b.push(this.shape[0]),_.push(this.stride[0])),typeof i=="number"&&i>=0?T=T+this.stride[1]*i|0:(b.push(this.shape[1]),_.push(this.stride[1])),typeof y=="number"&&y>=0?T=T+this.stride[2]*y|0:(b.push(this.shape[2]),_.push(this.stride[2])),typeof f=="number"&&f>=0?T=T+this.stride[3]*f|0:(b.push(this.shape[3]),_.push(this.stride[3])),typeof w=="number"&&w>=0?T=T+this.stride[4]*w|0:(b.push(this.shape[4]),_.push(this.stride[4])),(0,h[b.length+1])(this.data,b,_,T)},function(c,i,y,f){return new a(c,i[0],i[1],i[2],i[3],i[4],y[0],y[1],y[2],y[3],y[4],f)}}};function d(o,h){var s=h===-1?"T":String(h),a=n[s];return h===-1?a(o):h===0?a(o,u[o][0]):a(o,u[o],l)}var u={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};k.exports=function(o,h,s,a){if(o===void 0)return(0,u.array[0])([]);typeof o=="number"&&(o=[o]),h===void 0&&(h=[o.length]);var p=h.length;if(s===void 0){s=new Array(p);for(var c=p-1,i=1;c>=0;--c)s[c]=i,i*=h[c]}if(a===void 0)for(a=0,c=0;c<p;++c)s[c]<0&&(a-=(h[c]-1)*s[c]);for(var y=function(w){if(e(w))return"buffer";if(t)switch(Object.prototype.toString.call(w)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(w)?"array":"generic"}(o),f=u[y];f.length<=p+1;)f.push(d(y,f.length-1));return(0,f[p+1])(o,h,s,a)}},{"is-buffer":237}],260:[function(v,k,x){var e=v("double-bits"),t=Math.pow(2,-1074);k.exports=function(r,l){if(isNaN(r)||isNaN(l))return NaN;if(r===l)return r;if(r===0)return l<0?-t:t;var n=e.hi(r),d=e.lo(r);return l>r==r>0?d===-1>>>0?(n+=1,d=0):d+=1:d===0?(d=-1>>>0,n-=1):d-=1,e.pack(d,n)}},{"double-bits":64}],261:[function(v,k,x){x.vertexNormals=function(e,t,r){for(var l=t.length,n=new Array(l),d=r===void 0?1e-6:r,u=0;u<l;++u)n[u]=[0,0,0];for(u=0;u<e.length;++u)for(var o=e[u],h=0,s=o[o.length-1],a=o[0],p=0;p<o.length;++p){h=s,s=a,a=o[(p+1)%o.length];for(var c=t[h],i=t[s],y=t[a],f=new Array(3),w=0,b=new Array(3),_=0,T=0;T<3;++T)f[T]=c[T]-i[T],w+=f[T]*f[T],b[T]=y[T]-i[T],_+=b[T]*b[T];if(w*_>d){var L=n[s],A=1/Math.sqrt(w*_);for(T=0;T<3;++T){var I=(T+1)%3,P=(T+2)%3;L[T]+=A*(b[I]*f[P]-b[P]*f[I])}}}for(u=0;u<l;++u){L=n[u];var S=0;for(T=0;T<3;++T)S+=L[T]*L[T];if(S>d)for(A=1/Math.sqrt(S),T=0;T<3;++T)L[T]*=A;else for(T=0;T<3;++T)L[T]=0}return n},x.faceNormals=function(e,t,r){for(var l=e.length,n=new Array(l),d=r===void 0?1e-6:r,u=0;u<l;++u){for(var o=e[u],h=new Array(3),s=0;s<3;++s)h[s]=t[o[s]];var a=new Array(3),p=new Array(3);for(s=0;s<3;++s)a[s]=h[1][s]-h[0][s],p[s]=h[2][s]-h[0][s];var c=new Array(3),i=0;for(s=0;s<3;++s){var y=(s+1)%3,f=(s+2)%3;c[s]=a[y]*p[f]-a[f]*p[y],i+=c[s]*c[s]}for(i=i>d?1/Math.sqrt(i):0,s=0;s<3;++s)c[s]*=i;n[u]=c}return n}},{}],262:[function(v,k,x){k.exports=function(e,t,r,l,n,d,u,o,h,s){var a=t+d+s;if(p>0){var p=Math.sqrt(a+1);e[0]=.5*(u-h)/p,e[1]=.5*(o-l)/p,e[2]=.5*(r-d)/p,e[3]=.5*p}else{var c=Math.max(t,d,s);p=Math.sqrt(2*c-a+1),t>=c?(e[0]=.5*p,e[1]=.5*(n+r)/p,e[2]=.5*(o+l)/p,e[3]=.5*(u-h)/p):d>=c?(e[0]=.5*(r+n)/p,e[1]=.5*p,e[2]=.5*(h+u)/p,e[3]=.5*(o-l)/p):(e[0]=.5*(l+o)/p,e[1]=.5*(u+h)/p,e[2]=.5*p,e[3]=.5*(r-n)/p)}return e}},{}],263:[function(v,k,x){k.exports=function(a){var p=(a=a||{}).center||[0,0,0],c=a.rotation||[0,0,0,1],i=a.radius||1;p=[].slice.call(p,0,3),o(c=[].slice.call(c,0,4),c);var y=new h(c,p,Math.log(i));return y.setDistanceLimits(a.zoomMin,a.zoomMax),("eye"in a||"up"in a)&&y.lookAt(0,a.eye,a.center,a.up),y};var e=v("filtered-vector"),t=v("gl-mat4/lookAt"),r=v("gl-mat4/fromQuat"),l=v("gl-mat4/invert"),n=v("./lib/quatFromFrame");function d(a,p,c){return Math.sqrt(Math.pow(a,2)+Math.pow(p,2)+Math.pow(c,2))}function u(a,p,c,i){return Math.sqrt(Math.pow(a,2)+Math.pow(p,2)+Math.pow(c,2)+Math.pow(i,2))}function o(a,p){var c=p[0],i=p[1],y=p[2],f=p[3],w=u(c,i,y,f);w>1e-6?(a[0]=c/w,a[1]=i/w,a[2]=y/w,a[3]=f/w):(a[0]=a[1]=a[2]=0,a[3]=1)}function h(a,p,c){this.radius=e([c]),this.center=e(p),this.rotation=e(a),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var s=h.prototype;s.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},s.recalcMatrix=function(a){this.radius.curve(a),this.center.curve(a),this.rotation.curve(a);var p=this.computedRotation;o(p,p);var c=this.computedMatrix;r(c,p);var i=this.computedCenter,y=this.computedEye,f=this.computedUp,w=Math.exp(this.computedRadius[0]);y[0]=i[0]+w*c[2],y[1]=i[1]+w*c[6],y[2]=i[2]+w*c[10],f[0]=c[1],f[1]=c[5],f[2]=c[9];for(var b=0;b<3;++b){for(var _=0,T=0;T<3;++T)_+=c[b+4*T]*y[T];c[12+b]=-_}},s.getMatrix=function(a,p){this.recalcMatrix(a);var c=this.computedMatrix;if(p){for(var i=0;i<16;++i)p[i]=c[i];return p}return c},s.idle=function(a){this.center.idle(a),this.radius.idle(a),this.rotation.idle(a)},s.flush=function(a){this.center.flush(a),this.radius.flush(a),this.rotation.flush(a)},s.pan=function(a,p,c,i){p=p||0,c=c||0,i=i||0,this.recalcMatrix(a);var y=this.computedMatrix,f=y[1],w=y[5],b=y[9],_=d(f,w,b);f/=_,w/=_,b/=_;var T=y[0],L=y[4],A=y[8],I=T*f+L*w+A*b,P=d(T-=f*I,L-=w*I,A-=b*I);T/=P,L/=P,A/=P,y[2],y[6],y[10];var S=T*p+f*c,E=L*p+w*c,z=A*p+b*c;this.center.move(a,S,E,z);var D=Math.exp(this.computedRadius[0]);D=Math.max(1e-4,D+i),this.radius.set(a,Math.log(D))},s.rotate=function(a,p,c,i){this.recalcMatrix(a),p=p||0,c=c||0;var y=this.computedMatrix,f=y[0],w=y[4],b=y[8],_=y[1],T=y[5],L=y[9],A=y[2],I=y[6],P=y[10],S=p*f+c*_,E=p*w+c*T,z=p*b+c*L,D=-(I*z-P*E),U=-(P*S-A*z),H=-(A*E-I*S),Y=Math.sqrt(Math.max(0,1-Math.pow(D,2)-Math.pow(U,2)-Math.pow(H,2))),J=u(D,U,H,Y);J>1e-6?(D/=J,U/=J,H/=J,Y/=J):(D=U=H=0,Y=1);var W=this.computedRotation,Z=W[0],re=W[1],V=W[2],B=W[3],j=Z*Y+B*D+re*H-V*U,ee=re*Y+B*U+V*D-Z*H,N=V*Y+B*H+Z*U-re*D,$=B*Y-Z*D-re*U-V*H;if(i){D=A,U=I,H=P;var K=Math.sin(i)/d(D,U,H);D*=K,U*=K,H*=K,$=$*(Y=Math.cos(p))-(j=j*Y+$*D+ee*H-N*U)*D-(ee=ee*Y+$*U+N*D-j*H)*U-(N=N*Y+$*H+j*U-ee*D)*H}var te=u(j,ee,N,$);te>1e-6?(j/=te,ee/=te,N/=te,$/=te):(j=ee=N=0,$=1),this.rotation.set(a,j,ee,N,$)},s.lookAt=function(a,p,c,i){this.recalcMatrix(a),c=c||this.computedCenter,p=p||this.computedEye,i=i||this.computedUp;var y=this.computedMatrix;t(y,p,c,i);var f=this.computedRotation;n(f,y[0],y[1],y[2],y[4],y[5],y[6],y[8],y[9],y[10]),o(f,f),this.rotation.set(a,f[0],f[1],f[2],f[3]);for(var w=0,b=0;b<3;++b)w+=Math.pow(c[b]-p[b],2);this.radius.set(a,.5*Math.log(Math.max(w,1e-6))),this.center.set(a,c[0],c[1],c[2])},s.translate=function(a,p,c,i){this.center.move(a,p||0,c||0,i||0)},s.setMatrix=function(a,p){var c=this.computedRotation;n(c,p[0],p[1],p[2],p[4],p[5],p[6],p[8],p[9],p[10]),o(c,c),this.rotation.set(a,c[0],c[1],c[2],c[3]);var i=this.computedMatrix;l(i,p);var y=i[15];if(Math.abs(y)>1e-6){var f=i[12]/y,w=i[13]/y,b=i[14]/y;this.recalcMatrix(a);var _=Math.exp(this.computedRadius[0]);this.center.set(a,f-i[2]*_,w-i[6]*_,b-i[10]*_),this.radius.idle(a)}else this.center.idle(a),this.radius.idle(a)},s.setDistance=function(a,p){p>0&&this.radius.set(a,Math.log(p))},s.setDistanceLimits=function(a,p){a=a>0?Math.log(a):-1/0,p=p>0?Math.log(p):1/0,p=Math.max(p,a),this.radius.bounds[0][0]=a,this.radius.bounds[1][0]=p},s.getDistanceLimits=function(a){var p=this.radius.bounds;return a?(a[0]=Math.exp(p[0][0]),a[1]=Math.exp(p[1][0]),a):[Math.exp(p[0][0]),Math.exp(p[1][0])]},s.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},s.fromJSON=function(a){var p=this.lastT(),c=a.center;c&&this.center.set(p,c[0],c[1],c[2]);var i=a.rotation;i&&this.rotation.set(p,i[0],i[1],i[2],i[3]);var y=a.distance;y&&y>0&&this.radius.set(p,Math.log(y)),this.setDistanceLimits(a.zoomMin,a.zoomMax)}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(v,k,x){var e=v("repeat-string");k.exports=function(t,r,l){return e(l=l!==void 0?l+"":" ",r)+t}},{"repeat-string":277}],265:[function(v,k,x){k.exports=function(e,t){t||(t=[0,""]),e=String(e);var r=parseFloat(e,10);return t[0]=r,t[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},{}],266:[function(v,k,x){k.exports=function(t,r){for(var l=0|r.length,n=t.length,d=[new Array(l),new Array(l)],u=0;u<l;++u)d[0][u]=[],d[1][u]=[];for(u=0;u<n;++u){var o=t[u];d[0][o[0]].push(o),d[1][o[1]].push(o)}var h=[];for(u=0;u<l;++u)d[0][u].length+d[1][u].length===0&&h.push([u]);function s(w,b){var _=d[b][w[b]];_.splice(_.indexOf(w),1)}function a(w,b,_){for(var T,L,A,I=0;I<2;++I)if(d[I][b].length>0){T=d[I][b][0],A=I;break}L=T[1^A];for(var P=0;P<2;++P)for(var S=d[P][b],E=0;E<S.length;++E){var z=S[E],D=z[1^P];e(r[w],r[b],r[L],r[D])>0&&(T=z,L=D,A=P)}return _||T&&s(T,A),L}function p(w,b){var _=d[b][w][0],T=[w];s(_,b);for(var L=_[1^b];;){for(;L!==w;)T.push(L),L=a(T[T.length-2],L,!1);if(d[0][w].length+d[1][w].length===0)break;var A=T[T.length-1],I=w,P=T[1],S=a(A,I,!0);if(e(r[A],r[I],r[P],r[S])<0)break;T.push(w),L=a(A,I)}return T}function c(w,b){return b[1]===b[b.length-1]}for(u=0;u<l;++u)for(var i=0;i<2;++i){for(var y=[];d[i][u].length>0;){d[0][u].length;var f=p(u,i);c(0,f)?y.push.apply(y,f):(y.length>0&&h.push(y),y=f)}y.length>0&&h.push(y)}return h};var e=v("compare-angle")},{"compare-angle":54}],267:[function(v,k,x){k.exports=function(t,r){for(var l=e(t,r.length),n=new Array(r.length),d=new Array(r.length),u=[],o=0;o<r.length;++o){var h=l[o].length;d[o]=h,n[o]=!0,h<=1&&u.push(o)}for(;u.length>0;){var s=u.pop();n[s]=!1;var a=l[s];for(o=0;o<a.length;++o){var p=a[o];--d[p]==0&&u.push(p)}}var c=new Array(r.length),i=[];for(o=0;o<r.length;++o)n[o]?(s=i.length,c[o]=s,i.push(r[o])):c[o]=-1;var y=[];for(o=0;o<t.length;++o){var f=t[o];n[f[0]]&&n[f[1]]&&y.push([c[f[0]],c[f[1]]])}return[y,i]};var e=v("edges-to-adjacency-list")},{"edges-to-adjacency-list":66}],268:[function(v,k,x){k.exports=function(h,s){var a=u(h,s);h=a[0];for(var p=(s=a[1]).length,c=(h.length,e(h,s.length)),i=0;i<p;++i)if(c[i].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var y=t(h,s),f=(y=y.filter(function(se){for(var ve=se.length,fe=[0],ye=0;ye<ve;++ye){var Ae=s[se[ye]],pe=s[se[(ye+1)%ve]],ge=l(-Ae[0],Ae[1]),we=l(-Ae[0],pe[1]),oe=l(pe[0],Ae[1]),de=l(pe[0],pe[1]);fe=n(fe,n(n(ge,we),n(oe,de)))}return fe[fe.length-1]>0})).length,w=new Array(f),b=new Array(f);for(i=0;i<f;++i){w[i]=i;var _=new Array(f),T=y[i].map(function(se){return s[se]}),L=r([T]),A=0;e:for(var I=0;I<f;++I)if(_[I]=0,i!==I){for(var P=(ie=y[I]).length,S=0;S<P;++S){var E=L(s[ie[S]]);if(E!==0){E<0&&(_[I]=1,A+=1);continue e}}_[I]=1,A+=1}b[i]=[A,i,_]}for(b.sort(function(se,ve){return ve[0]-se[0]}),i=0;i<f;++i){var z=(_=b[i])[1],D=_[2];for(I=0;I<f;++I)D[I]&&(w[I]=z)}var U=function(se){for(var ve=new Array(se),fe=0;fe<se;++fe)ve[fe]=[];return ve}(f);for(i=0;i<f;++i)U[i].push(w[i]),U[w[i]].push(i);var H={},Y=o(p,!1);for(i=0;i<f;++i)for(P=(ie=y[i]).length,I=0;I<P;++I){var J=ie[I],W=ie[(I+1)%P],Z=Math.min(J,W)+":"+Math.max(J,W);if(Z in H){var re=H[Z];U[re].push(i),U[i].push(re),Y[J]=Y[W]=!0}else H[Z]=i}function V(se){for(var ve=se.length,fe=0;fe<ve;++fe)if(!Y[se[fe]])return!1;return!0}var B=[],j=o(f,-1);for(i=0;i<f;++i)w[i]!==i||V(y[i])?j[i]=-1:(B.push(i),j[i]=0);for(a=[];B.length>0;){var ee=B.pop(),N=U[ee];d(N,function(se,ve){return se-ve});var $,K=N.length,te=j[ee];if(te===0){var ie=y[ee];$=[ie]}for(i=0;i<K;++i){var le=N[i];j[le]>=0||(j[le]=1^te,B.push(le),te===0&&(V(ie=y[le])||(ie.reverse(),$.push(ie))))}te===0&&a.push($)}return a};var e=v("edges-to-adjacency-list"),t=v("planar-dual"),r=v("point-in-big-polygon"),l=v("two-product"),n=v("robust-sum"),d=v("uniq"),u=v("./lib/trim-leaves");function o(h,s){for(var a=new Array(h),p=0;p<h;++p)a[p]=s;return a}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(v,k,x){k.exports=function(o){for(var h=o.length,s=[],a=[],p=0;p<h;++p)for(var c=o[p],i=c.length,y=i-1,f=0;f<i;y=f++){var w=c[y],b=c[f];w[0]===b[0]?a.push([w,b]):s.push([w,b])}if(s.length===0)return a.length===0?u:(_=d(a),function(A){return _(A[0],A[1])?0:1});var _,T=t(s),L=function(A,I){return function(P){var S=l.le(I,P[0]);if(S<0)return 1;var E=A[S];if(!E){if(!(S>0&&I[S]===P[0]))return 1;E=A[S-1]}for(var z=1;E;){var D=E.key,U=e(P,D[0],D[1]);if(D[0][0]<D[1][0])if(U<0)E=E.left;else{if(!(U>0))return 0;z=-1,E=E.right}else if(U>0)E=E.left;else{if(!(U<0))return 0;z=1,E=E.right}}return z}}(T.slabs,T.coordinates);return a.length===0?L:function(A,I){return function(P){return A(P[0],P[1])?0:I(P)}}(d(a),L)};var e=v("robust-orientation")[3],t=v("slab-decomposition"),r=v("interval-tree-1d"),l=v("binary-search-bounds");function n(){return!0}function d(o){for(var h={},s=0;s<o.length;++s){var a=o[s],p=a[0][0],c=a[0][1],i=a[1][1],y=[Math.min(c,i),Math.max(c,i)];p in h?h[p].push(y):h[p]=[y]}var f={},w=Object.keys(h);for(s=0;s<w.length;++s){var b=h[w[s]];f[w[s]]=r(b)}return function(_){return function(T,L){var A=_[T];return!!A&&!!A.queryPoint(L,n)}}(f)}function u(o){return 1}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(v,k,x){var e=new Float64Array(4),t=new Float64Array(4),r=new Float64Array(4);k.exports=function(l,n,d,u,o){e.length<u.length&&(e=new Float64Array(u.length),t=new Float64Array(u.length),r=new Float64Array(u.length));for(var h=0;h<u.length;++h)e[h]=l[h]-u[h],t[h]=n[h]-l[h],r[h]=d[h]-l[h];var s=0,a=0,p=0,c=0,i=0,y=0;for(h=0;h<u.length;++h){var f=t[h],w=r[h],b=e[h];s+=f*f,a+=f*w,p+=w*w,c+=b*f,i+=b*w,y+=b*b}var _,T,L,A,I,P=Math.abs(s*p-a*a),S=a*i-p*c,E=a*c-s*i;if(S+E<=P)if(S<0)E<0&&c<0?(E=0,-c>=s?(S=1,_=s+2*c+y):_=c*(S=-c/s)+y):(S=0,i>=0?(E=0,_=y):-i>=p?(E=1,_=p+2*i+y):_=i*(E=-i/p)+y);else if(E<0)E=0,c>=0?(S=0,_=y):-c>=s?(S=1,_=s+2*c+y):_=c*(S=-c/s)+y;else{var z=1/P;_=(S*=z)*(s*S+a*(E*=z)+2*c)+E*(a*S+p*E+2*i)+y}else S<0?(L=p+i)>(T=a+c)?(A=L-T)>=(I=s-2*a+p)?(S=1,E=0,_=s+2*c+y):_=(S=A/I)*(s*S+a*(E=1-S)+2*c)+E*(a*S+p*E+2*i)+y:(S=0,L<=0?(E=1,_=p+2*i+y):i>=0?(E=0,_=y):_=i*(E=-i/p)+y):E<0?(L=s+c)>(T=a+i)?(A=L-T)>=(I=s-2*a+p)?(E=1,S=0,_=p+2*i+y):_=(S=1-(E=A/I))*(s*S+a*E+2*c)+E*(a*S+p*E+2*i)+y:(E=0,L<=0?(S=1,_=s+2*c+y):c>=0?(S=0,_=y):_=c*(S=-c/s)+y):(A=p+i-a-c)<=0?(S=0,E=1,_=p+2*i+y):A>=(I=s-2*a+p)?(S=1,E=0,_=s+2*c+y):_=(S=A/I)*(s*S+a*(E=1-S)+2*c)+E*(a*S+p*E+2*i)+y;var D=1-S-E;for(h=0;h<u.length;++h)o[h]=D*l[h]+S*n[h]+E*d[h];return _<0?0:_}},{}],271:[function(v,k,x){k.exports=v("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(v,k,x){var e=v("big-rat/add");k.exports=function(t,r){for(var l=t.length,n=new Array(l),d=0;d<l;++d)n[d]=e(t[d],r[d]);return n}},{"big-rat/add":15}],273:[function(v,k,x){k.exports=function(t){for(var r=new Array(t.length),l=0;l<t.length;++l)r[l]=e(t[l]);return r};var e=v("big-rat")},{"big-rat":18}],274:[function(v,k,x){var e=v("big-rat"),t=v("big-rat/mul");k.exports=function(r,l){for(var n=e(l),d=r.length,u=new Array(d),o=0;o<d;++o)u[o]=t(r[o],n);return u}},{"big-rat":18,"big-rat/mul":27}],275:[function(v,k,x){var e=v("big-rat/sub");k.exports=function(t,r){for(var l=t.length,n=new Array(l),d=0;d<l;++d)n[d]=e(t[d],r[d]);return n}},{"big-rat/sub":29}],276:[function(v,k,x){var e=v("compare-cell"),t=v("compare-oriented-cell"),r=v("cell-orientation");k.exports=function(l){l.sort(t);for(var n=l.length,d=0,u=0;u<n;++u){var o=l[u],h=r(o);if(h!==0){if(d>0){var s=l[d-1];if(e(o,s)===0&&r(s)!==h){d-=1;continue}}l[d++]=o}}return l.length=d,l}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(v,k,x){var e,t="";k.exports=function(r,l){if(typeof r!="string")throw new TypeError("expected a string");if(l===1)return r;if(l===2)return r+r;var n=r.length*l;if(e!==r||e===void 0)e=r,t="";else if(t.length>=n)return t.substr(0,n);for(;n>t.length&&l>1;)1&l&&(t+=r),l>>=1,r+=r;return t=(t+=r).substr(0,n)}},{}],278:[function(v,k,x){(function(e){(function(){k.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,m!==void 0?m:typeof self<"u"?self:typeof window<"u"?window:{})},{}],279:[function(v,k,x){k.exports=function(e){for(var t=e.length,r=e[e.length-1],l=t,n=t-2;n>=0;--n){var d=r,u=e[n];(h=u-((r=d+u)-d))&&(e[--l]=r,r=h)}var o=0;for(n=l;n<t;++n){var h;d=e[n],(h=(u=r)-((r=d+u)-d))&&(e[o++]=h)}return e[o++]=r,e.length=o,e}},{}],280:[function(v,k,x){var e=v("two-product"),t=v("robust-sum"),r=v("robust-scale"),l=v("robust-compress");function n(p,c,i,y){return function(f){return y(p(i(f[0][0],f[1][1]),i(-f[0][1],f[1][0])))}}function d(p,c,i,y){return function(f){return y(p(c(p(i(f[1][1],f[2][2]),i(-f[1][2],f[2][1])),f[0][0]),p(c(p(i(f[1][0],f[2][2]),i(-f[1][2],f[2][0])),-f[0][1]),c(p(i(f[1][0],f[2][1]),i(-f[1][1],f[2][0])),f[0][2]))))}}function u(p,c,i,y){return function(f){return y(p(p(c(p(c(p(i(f[2][2],f[3][3]),i(-f[2][3],f[3][2])),f[1][1]),p(c(p(i(f[2][1],f[3][3]),i(-f[2][3],f[3][1])),-f[1][2]),c(p(i(f[2][1],f[3][2]),i(-f[2][2],f[3][1])),f[1][3]))),f[0][0]),c(p(c(p(i(f[2][2],f[3][3]),i(-f[2][3],f[3][2])),f[1][0]),p(c(p(i(f[2][0],f[3][3]),i(-f[2][3],f[3][0])),-f[1][2]),c(p(i(f[2][0],f[3][2]),i(-f[2][2],f[3][0])),f[1][3]))),-f[0][1])),p(c(p(c(p(i(f[2][1],f[3][3]),i(-f[2][3],f[3][1])),f[1][0]),p(c(p(i(f[2][0],f[3][3]),i(-f[2][3],f[3][0])),-f[1][1]),c(p(i(f[2][0],f[3][1]),i(-f[2][1],f[3][0])),f[1][3]))),f[0][2]),c(p(c(p(i(f[2][1],f[3][2]),i(-f[2][2],f[3][1])),f[1][0]),p(c(p(i(f[2][0],f[3][2]),i(-f[2][2],f[3][0])),-f[1][1]),c(p(i(f[2][0],f[3][1]),i(-f[2][1],f[3][0])),f[1][2]))),-f[0][3]))))}}function o(p,c,i,y){return function(f){return y(p(p(c(p(p(c(p(c(p(i(f[3][3],f[4][4]),i(-f[3][4],f[4][3])),f[2][2]),p(c(p(i(f[3][2],f[4][4]),i(-f[3][4],f[4][2])),-f[2][3]),c(p(i(f[3][2],f[4][3]),i(-f[3][3],f[4][2])),f[2][4]))),f[1][1]),c(p(c(p(i(f[3][3],f[4][4]),i(-f[3][4],f[4][3])),f[2][1]),p(c(p(i(f[3][1],f[4][4]),i(-f[3][4],f[4][1])),-f[2][3]),c(p(i(f[3][1],f[4][3]),i(-f[3][3],f[4][1])),f[2][4]))),-f[1][2])),p(c(p(c(p(i(f[3][2],f[4][4]),i(-f[3][4],f[4][2])),f[2][1]),p(c(p(i(f[3][1],f[4][4]),i(-f[3][4],f[4][1])),-f[2][2]),c(p(i(f[3][1],f[4][2]),i(-f[3][2],f[4][1])),f[2][4]))),f[1][3]),c(p(c(p(i(f[3][2],f[4][3]),i(-f[3][3],f[4][2])),f[2][1]),p(c(p(i(f[3][1],f[4][3]),i(-f[3][3],f[4][1])),-f[2][2]),c(p(i(f[3][1],f[4][2]),i(-f[3][2],f[4][1])),f[2][3]))),-f[1][4]))),f[0][0]),c(p(p(c(p(c(p(i(f[3][3],f[4][4]),i(-f[3][4],f[4][3])),f[2][2]),p(c(p(i(f[3][2],f[4][4]),i(-f[3][4],f[4][2])),-f[2][3]),c(p(i(f[3][2],f[4][3]),i(-f[3][3],f[4][2])),f[2][4]))),f[1][0]),c(p(c(p(i(f[3][3],f[4][4]),i(-f[3][4],f[4][3])),f[2][0]),p(c(p(i(f[3][0],f[4][4]),i(-f[3][4],f[4][0])),-f[2][3]),c(p(i(f[3][0],f[4][3]),i(-f[3][3],f[4][0])),f[2][4]))),-f[1][2])),p(c(p(c(p(i(f[3][2],f[4][4]),i(-f[3][4],f[4][2])),f[2][0]),p(c(p(i(f[3][0],f[4][4]),i(-f[3][4],f[4][0])),-f[2][2]),c(p(i(f[3][0],f[4][2]),i(-f[3][2],f[4][0])),f[2][4]))),f[1][3]),c(p(c(p(i(f[3][2],f[4][3]),i(-f[3][3],f[4][2])),f[2][0]),p(c(p(i(f[3][0],f[4][3]),i(-f[3][3],f[4][0])),-f[2][2]),c(p(i(f[3][0],f[4][2]),i(-f[3][2],f[4][0])),f[2][3]))),-f[1][4]))),-f[0][1])),p(c(p(p(c(p(c(p(i(f[3][3],f[4][4]),i(-f[3][4],f[4][3])),f[2][1]),p(c(p(i(f[3][1],f[4][4]),i(-f[3][4],f[4][1])),-f[2][3]),c(p(i(f[3][1],f[4][3]),i(-f[3][3],f[4][1])),f[2][4]))),f[1][0]),c(p(c(p(i(f[3][3],f[4][4]),i(-f[3][4],f[4][3])),f[2][0]),p(c(p(i(f[3][0],f[4][4]),i(-f[3][4],f[4][0])),-f[2][3]),c(p(i(f[3][0],f[4][3]),i(-f[3][3],f[4][0])),f[2][4]))),-f[1][1])),p(c(p(c(p(i(f[3][1],f[4][4]),i(-f[3][4],f[4][1])),f[2][0]),p(c(p(i(f[3][0],f[4][4]),i(-f[3][4],f[4][0])),-f[2][1]),c(p(i(f[3][0],f[4][1]),i(-f[3][1],f[4][0])),f[2][4]))),f[1][3]),c(p(c(p(i(f[3][1],f[4][3]),i(-f[3][3],f[4][1])),f[2][0]),p(c(p(i(f[3][0],f[4][3]),i(-f[3][3],f[4][0])),-f[2][1]),c(p(i(f[3][0],f[4][1]),i(-f[3][1],f[4][0])),f[2][3]))),-f[1][4]))),f[0][2]),p(c(p(p(c(p(c(p(i(f[3][2],f[4][4]),i(-f[3][4],f[4][2])),f[2][1]),p(c(p(i(f[3][1],f[4][4]),i(-f[3][4],f[4][1])),-f[2][2]),c(p(i(f[3][1],f[4][2]),i(-f[3][2],f[4][1])),f[2][4]))),f[1][0]),c(p(c(p(i(f[3][2],f[4][4]),i(-f[3][4],f[4][2])),f[2][0]),p(c(p(i(f[3][0],f[4][4]),i(-f[3][4],f[4][0])),-f[2][2]),c(p(i(f[3][0],f[4][2]),i(-f[3][2],f[4][0])),f[2][4]))),-f[1][1])),p(c(p(c(p(i(f[3][1],f[4][4]),i(-f[3][4],f[4][1])),f[2][0]),p(c(p(i(f[3][0],f[4][4]),i(-f[3][4],f[4][0])),-f[2][1]),c(p(i(f[3][0],f[4][1]),i(-f[3][1],f[4][0])),f[2][4]))),f[1][2]),c(p(c(p(i(f[3][1],f[4][2]),i(-f[3][2],f[4][1])),f[2][0]),p(c(p(i(f[3][0],f[4][2]),i(-f[3][2],f[4][0])),-f[2][1]),c(p(i(f[3][0],f[4][1]),i(-f[3][1],f[4][0])),f[2][2]))),-f[1][4]))),-f[0][3]),c(p(p(c(p(c(p(i(f[3][2],f[4][3]),i(-f[3][3],f[4][2])),f[2][1]),p(c(p(i(f[3][1],f[4][3]),i(-f[3][3],f[4][1])),-f[2][2]),c(p(i(f[3][1],f[4][2]),i(-f[3][2],f[4][1])),f[2][3]))),f[1][0]),c(p(c(p(i(f[3][2],f[4][3]),i(-f[3][3],f[4][2])),f[2][0]),p(c(p(i(f[3][0],f[4][3]),i(-f[3][3],f[4][0])),-f[2][2]),c(p(i(f[3][0],f[4][2]),i(-f[3][2],f[4][0])),f[2][3]))),-f[1][1])),p(c(p(c(p(i(f[3][1],f[4][3]),i(-f[3][3],f[4][1])),f[2][0]),p(c(p(i(f[3][0],f[4][3]),i(-f[3][3],f[4][0])),-f[2][1]),c(p(i(f[3][0],f[4][1]),i(-f[3][1],f[4][0])),f[2][3]))),f[1][2]),c(p(c(p(i(f[3][1],f[4][2]),i(-f[3][2],f[4][1])),f[2][0]),p(c(p(i(f[3][0],f[4][2]),i(-f[3][2],f[4][0])),-f[2][1]),c(p(i(f[3][0],f[4][1]),i(-f[3][1],f[4][0])),f[2][2]))),-f[1][3]))),f[0][4])))))}}function h(p){return(p===2?n:p===3?d:p===4?u:p===5?o:void 0)(t,r,e,l)}var s=[function(){return[0]},function(p){return[p[0][0]]}];function a(p,c,i,y,f,w,b,_){return function(T){switch(T.length){case 0:return p(T);case 1:return c(T);case 2:return i(T);case 3:return y(T);case 4:return f(T);case 5:return w(T)}var L=b[T.length];return L||(L=b[T.length]=_(T.length)),L(T)}}(function(){for(;s.length<6;)s.push(h(s.length));k.exports=a.apply(void 0,s.concat([s,h]));for(var p=0;p<s.length;++p)k.exports[p]=s[p]})()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(v,k,x){var e=v("two-product"),t=v("robust-sum");k.exports=function(r,l){for(var n=e(r[0],l[0]),d=1;d<r.length;++d)n=t(n,e(r[d],l[d]));return n}},{"robust-sum":289,"two-product":306}],282:[function(v,k,x){var e=v("two-product"),t=v("robust-sum"),r=v("robust-subtract"),l=v("robust-scale");function n(c){return(c===3?d:c===4?u:c===5?o:h)(t,r,e,l)}function d(c,i,y,f){return function(w,b,_){var T=y(w[0],w[0]),L=f(T,b[0]),A=f(T,_[0]),I=y(b[0],b[0]),P=f(I,w[0]),S=f(I,_[0]),E=y(_[0],_[0]),z=f(E,w[0]),D=f(E,b[0]),U=c(i(D,S),i(P,L)),H=i(z,A),Y=i(U,H);return Y[Y.length-1]}}function u(c,i,y,f){return function(w,b,_,T){var L=c(y(w[0],w[0]),y(w[1],w[1])),A=f(L,b[0]),I=f(L,_[0]),P=f(L,T[0]),S=c(y(b[0],b[0]),y(b[1],b[1])),E=f(S,w[0]),z=f(S,_[0]),D=f(S,T[0]),U=c(y(_[0],_[0]),y(_[1],_[1])),H=f(U,w[0]),Y=f(U,b[0]),J=f(U,T[0]),W=c(y(T[0],T[0]),y(T[1],T[1])),Z=f(W,w[0]),re=f(W,b[0]),V=f(W,_[0]),B=c(c(f(i(V,J),b[1]),c(f(i(re,D),-_[1]),f(i(Y,z),T[1]))),c(f(i(re,D),w[1]),c(f(i(Z,P),-b[1]),f(i(E,A),T[1])))),j=c(c(f(i(V,J),w[1]),c(f(i(Z,P),-_[1]),f(i(H,I),T[1]))),c(f(i(Y,z),w[1]),c(f(i(H,I),-b[1]),f(i(E,A),_[1])))),ee=i(B,j);return ee[ee.length-1]}}function o(c,i,y,f){return function(w,b,_,T,L){var A=c(y(w[0],w[0]),c(y(w[1],w[1]),y(w[2],w[2]))),I=f(A,b[0]),P=f(A,_[0]),S=f(A,T[0]),E=f(A,L[0]),z=c(y(b[0],b[0]),c(y(b[1],b[1]),y(b[2],b[2]))),D=f(z,w[0]),U=f(z,_[0]),H=f(z,T[0]),Y=f(z,L[0]),J=c(y(_[0],_[0]),c(y(_[1],_[1]),y(_[2],_[2]))),W=f(J,w[0]),Z=f(J,b[0]),re=f(J,T[0]),V=f(J,L[0]),B=c(y(T[0],T[0]),c(y(T[1],T[1]),y(T[2],T[2]))),j=f(B,w[0]),ee=f(B,b[0]),N=f(B,_[0]),$=f(B,L[0]),K=c(y(L[0],L[0]),c(y(L[1],L[1]),y(L[2],L[2]))),te=f(K,w[0]),ie=f(K,b[0]),le=f(K,_[0]),se=f(K,T[0]),ve=c(c(c(f(c(f(i(se,$),_[1]),c(f(i(le,V),-T[1]),f(i(N,re),L[1]))),b[2]),c(f(c(f(i(se,$),b[1]),c(f(i(ie,Y),-T[1]),f(i(ee,H),L[1]))),-_[2]),f(c(f(i(le,V),b[1]),c(f(i(ie,Y),-_[1]),f(i(Z,U),L[1]))),T[2]))),c(f(c(f(i(N,re),b[1]),c(f(i(ee,H),-_[1]),f(i(Z,U),T[1]))),-L[2]),c(f(c(f(i(se,$),b[1]),c(f(i(ie,Y),-T[1]),f(i(ee,H),L[1]))),w[2]),f(c(f(i(se,$),w[1]),c(f(i(te,E),-T[1]),f(i(j,S),L[1]))),-b[2])))),c(c(f(c(f(i(ie,Y),w[1]),c(f(i(te,E),-b[1]),f(i(D,I),L[1]))),T[2]),c(f(c(f(i(ee,H),w[1]),c(f(i(j,S),-b[1]),f(i(D,I),T[1]))),-L[2]),f(c(f(i(N,re),b[1]),c(f(i(ee,H),-_[1]),f(i(Z,U),T[1]))),w[2]))),c(f(c(f(i(N,re),w[1]),c(f(i(j,S),-_[1]),f(i(W,P),T[1]))),-b[2]),c(f(c(f(i(ee,H),w[1]),c(f(i(j,S),-b[1]),f(i(D,I),T[1]))),_[2]),f(c(f(i(Z,U),w[1]),c(f(i(W,P),-b[1]),f(i(D,I),_[1]))),-T[2]))))),fe=c(c(c(f(c(f(i(se,$),_[1]),c(f(i(le,V),-T[1]),f(i(N,re),L[1]))),w[2]),f(c(f(i(se,$),w[1]),c(f(i(te,E),-T[1]),f(i(j,S),L[1]))),-_[2])),c(f(c(f(i(le,V),w[1]),c(f(i(te,E),-_[1]),f(i(W,P),L[1]))),T[2]),f(c(f(i(N,re),w[1]),c(f(i(j,S),-_[1]),f(i(W,P),T[1]))),-L[2]))),c(c(f(c(f(i(le,V),b[1]),c(f(i(ie,Y),-_[1]),f(i(Z,U),L[1]))),w[2]),f(c(f(i(le,V),w[1]),c(f(i(te,E),-_[1]),f(i(W,P),L[1]))),-b[2])),c(f(c(f(i(ie,Y),w[1]),c(f(i(te,E),-b[1]),f(i(D,I),L[1]))),_[2]),f(c(f(i(Z,U),w[1]),c(f(i(W,P),-b[1]),f(i(D,I),_[1]))),-L[2])))),ye=i(ve,fe);return ye[ye.length-1]}}function h(c,i,y,f){return function(w,b,_,T,L,A){var I=c(c(y(w[0],w[0]),y(w[1],w[1])),c(y(w[2],w[2]),y(w[3],w[3]))),P=f(I,b[0]),S=f(I,_[0]),E=f(I,T[0]),z=f(I,L[0]),D=f(I,A[0]),U=c(c(y(b[0],b[0]),y(b[1],b[1])),c(y(b[2],b[2]),y(b[3],b[3]))),H=f(U,w[0]),Y=f(U,_[0]),J=f(U,T[0]),W=f(U,L[0]),Z=f(U,A[0]),re=c(c(y(_[0],_[0]),y(_[1],_[1])),c(y(_[2],_[2]),y(_[3],_[3]))),V=f(re,w[0]),B=f(re,b[0]),j=f(re,T[0]),ee=f(re,L[0]),N=f(re,A[0]),$=c(c(y(T[0],T[0]),y(T[1],T[1])),c(y(T[2],T[2]),y(T[3],T[3]))),K=f($,w[0]),te=f($,b[0]),ie=f($,_[0]),le=f($,L[0]),se=f($,A[0]),ve=c(c(y(L[0],L[0]),y(L[1],L[1])),c(y(L[2],L[2]),y(L[3],L[3]))),fe=f(ve,w[0]),ye=f(ve,b[0]),Ae=f(ve,_[0]),pe=f(ve,T[0]),ge=f(ve,A[0]),we=c(c(y(A[0],A[0]),y(A[1],A[1])),c(y(A[2],A[2]),y(A[3],A[3]))),oe=f(we,w[0]),de=f(we,b[0]),Te=f(we,_[0]),Ee=f(we,T[0]),Me=f(we,L[0]),De=c(c(c(f(c(c(f(c(f(i(Me,ge),T[1]),c(f(i(Ee,se),-L[1]),f(i(pe,le),A[1]))),_[2]),f(c(f(i(Me,ge),_[1]),c(f(i(Te,N),-L[1]),f(i(Ae,ee),A[1]))),-T[2])),c(f(c(f(i(Ee,se),_[1]),c(f(i(Te,N),-T[1]),f(i(ie,j),A[1]))),L[2]),f(c(f(i(pe,le),_[1]),c(f(i(Ae,ee),-T[1]),f(i(ie,j),L[1]))),-A[2]))),b[3]),c(f(c(c(f(c(f(i(Me,ge),T[1]),c(f(i(Ee,se),-L[1]),f(i(pe,le),A[1]))),b[2]),f(c(f(i(Me,ge),b[1]),c(f(i(de,Z),-L[1]),f(i(ye,W),A[1]))),-T[2])),c(f(c(f(i(Ee,se),b[1]),c(f(i(de,Z),-T[1]),f(i(te,J),A[1]))),L[2]),f(c(f(i(pe,le),b[1]),c(f(i(ye,W),-T[1]),f(i(te,J),L[1]))),-A[2]))),-_[3]),f(c(c(f(c(f(i(Me,ge),_[1]),c(f(i(Te,N),-L[1]),f(i(Ae,ee),A[1]))),b[2]),f(c(f(i(Me,ge),b[1]),c(f(i(de,Z),-L[1]),f(i(ye,W),A[1]))),-_[2])),c(f(c(f(i(Te,N),b[1]),c(f(i(de,Z),-_[1]),f(i(B,Y),A[1]))),L[2]),f(c(f(i(Ae,ee),b[1]),c(f(i(ye,W),-_[1]),f(i(B,Y),L[1]))),-A[2]))),T[3]))),c(c(f(c(c(f(c(f(i(Ee,se),_[1]),c(f(i(Te,N),-T[1]),f(i(ie,j),A[1]))),b[2]),f(c(f(i(Ee,se),b[1]),c(f(i(de,Z),-T[1]),f(i(te,J),A[1]))),-_[2])),c(f(c(f(i(Te,N),b[1]),c(f(i(de,Z),-_[1]),f(i(B,Y),A[1]))),T[2]),f(c(f(i(ie,j),b[1]),c(f(i(te,J),-_[1]),f(i(B,Y),T[1]))),-A[2]))),-L[3]),f(c(c(f(c(f(i(pe,le),_[1]),c(f(i(Ae,ee),-T[1]),f(i(ie,j),L[1]))),b[2]),f(c(f(i(pe,le),b[1]),c(f(i(ye,W),-T[1]),f(i(te,J),L[1]))),-_[2])),c(f(c(f(i(Ae,ee),b[1]),c(f(i(ye,W),-_[1]),f(i(B,Y),L[1]))),T[2]),f(c(f(i(ie,j),b[1]),c(f(i(te,J),-_[1]),f(i(B,Y),T[1]))),-L[2]))),A[3])),c(f(c(c(f(c(f(i(Me,ge),T[1]),c(f(i(Ee,se),-L[1]),f(i(pe,le),A[1]))),b[2]),f(c(f(i(Me,ge),b[1]),c(f(i(de,Z),-L[1]),f(i(ye,W),A[1]))),-T[2])),c(f(c(f(i(Ee,se),b[1]),c(f(i(de,Z),-T[1]),f(i(te,J),A[1]))),L[2]),f(c(f(i(pe,le),b[1]),c(f(i(ye,W),-T[1]),f(i(te,J),L[1]))),-A[2]))),w[3]),f(c(c(f(c(f(i(Me,ge),T[1]),c(f(i(Ee,se),-L[1]),f(i(pe,le),A[1]))),w[2]),f(c(f(i(Me,ge),w[1]),c(f(i(oe,D),-L[1]),f(i(fe,z),A[1]))),-T[2])),c(f(c(f(i(Ee,se),w[1]),c(f(i(oe,D),-T[1]),f(i(K,E),A[1]))),L[2]),f(c(f(i(pe,le),w[1]),c(f(i(fe,z),-T[1]),f(i(K,E),L[1]))),-A[2]))),-b[3])))),c(c(c(f(c(c(f(c(f(i(Me,ge),b[1]),c(f(i(de,Z),-L[1]),f(i(ye,W),A[1]))),w[2]),f(c(f(i(Me,ge),w[1]),c(f(i(oe,D),-L[1]),f(i(fe,z),A[1]))),-b[2])),c(f(c(f(i(de,Z),w[1]),c(f(i(oe,D),-b[1]),f(i(H,P),A[1]))),L[2]),f(c(f(i(ye,W),w[1]),c(f(i(fe,z),-b[1]),f(i(H,P),L[1]))),-A[2]))),T[3]),f(c(c(f(c(f(i(Ee,se),b[1]),c(f(i(de,Z),-T[1]),f(i(te,J),A[1]))),w[2]),f(c(f(i(Ee,se),w[1]),c(f(i(oe,D),-T[1]),f(i(K,E),A[1]))),-b[2])),c(f(c(f(i(de,Z),w[1]),c(f(i(oe,D),-b[1]),f(i(H,P),A[1]))),T[2]),f(c(f(i(te,J),w[1]),c(f(i(K,E),-b[1]),f(i(H,P),T[1]))),-A[2]))),-L[3])),c(f(c(c(f(c(f(i(pe,le),b[1]),c(f(i(ye,W),-T[1]),f(i(te,J),L[1]))),w[2]),f(c(f(i(pe,le),w[1]),c(f(i(fe,z),-T[1]),f(i(K,E),L[1]))),-b[2])),c(f(c(f(i(ye,W),w[1]),c(f(i(fe,z),-b[1]),f(i(H,P),L[1]))),T[2]),f(c(f(i(te,J),w[1]),c(f(i(K,E),-b[1]),f(i(H,P),T[1]))),-L[2]))),A[3]),f(c(c(f(c(f(i(Ee,se),_[1]),c(f(i(Te,N),-T[1]),f(i(ie,j),A[1]))),b[2]),f(c(f(i(Ee,se),b[1]),c(f(i(de,Z),-T[1]),f(i(te,J),A[1]))),-_[2])),c(f(c(f(i(Te,N),b[1]),c(f(i(de,Z),-_[1]),f(i(B,Y),A[1]))),T[2]),f(c(f(i(ie,j),b[1]),c(f(i(te,J),-_[1]),f(i(B,Y),T[1]))),-A[2]))),w[3]))),c(c(f(c(c(f(c(f(i(Ee,se),_[1]),c(f(i(Te,N),-T[1]),f(i(ie,j),A[1]))),w[2]),f(c(f(i(Ee,se),w[1]),c(f(i(oe,D),-T[1]),f(i(K,E),A[1]))),-_[2])),c(f(c(f(i(Te,N),w[1]),c(f(i(oe,D),-_[1]),f(i(V,S),A[1]))),T[2]),f(c(f(i(ie,j),w[1]),c(f(i(K,E),-_[1]),f(i(V,S),T[1]))),-A[2]))),-b[3]),f(c(c(f(c(f(i(Ee,se),b[1]),c(f(i(de,Z),-T[1]),f(i(te,J),A[1]))),w[2]),f(c(f(i(Ee,se),w[1]),c(f(i(oe,D),-T[1]),f(i(K,E),A[1]))),-b[2])),c(f(c(f(i(de,Z),w[1]),c(f(i(oe,D),-b[1]),f(i(H,P),A[1]))),T[2]),f(c(f(i(te,J),w[1]),c(f(i(K,E),-b[1]),f(i(H,P),T[1]))),-A[2]))),_[3])),c(f(c(c(f(c(f(i(Te,N),b[1]),c(f(i(de,Z),-_[1]),f(i(B,Y),A[1]))),w[2]),f(c(f(i(Te,N),w[1]),c(f(i(oe,D),-_[1]),f(i(V,S),A[1]))),-b[2])),c(f(c(f(i(de,Z),w[1]),c(f(i(oe,D),-b[1]),f(i(H,P),A[1]))),_[2]),f(c(f(i(B,Y),w[1]),c(f(i(V,S),-b[1]),f(i(H,P),_[1]))),-A[2]))),-T[3]),f(c(c(f(c(f(i(ie,j),b[1]),c(f(i(te,J),-_[1]),f(i(B,Y),T[1]))),w[2]),f(c(f(i(ie,j),w[1]),c(f(i(K,E),-_[1]),f(i(V,S),T[1]))),-b[2])),c(f(c(f(i(te,J),w[1]),c(f(i(K,E),-b[1]),f(i(H,P),T[1]))),_[2]),f(c(f(i(B,Y),w[1]),c(f(i(V,S),-b[1]),f(i(H,P),_[1]))),-T[2]))),A[3]))))),Ie=c(c(c(f(c(c(f(c(f(i(Me,ge),T[1]),c(f(i(Ee,se),-L[1]),f(i(pe,le),A[1]))),_[2]),f(c(f(i(Me,ge),_[1]),c(f(i(Te,N),-L[1]),f(i(Ae,ee),A[1]))),-T[2])),c(f(c(f(i(Ee,se),_[1]),c(f(i(Te,N),-T[1]),f(i(ie,j),A[1]))),L[2]),f(c(f(i(pe,le),_[1]),c(f(i(Ae,ee),-T[1]),f(i(ie,j),L[1]))),-A[2]))),w[3]),c(f(c(c(f(c(f(i(Me,ge),T[1]),c(f(i(Ee,se),-L[1]),f(i(pe,le),A[1]))),w[2]),f(c(f(i(Me,ge),w[1]),c(f(i(oe,D),-L[1]),f(i(fe,z),A[1]))),-T[2])),c(f(c(f(i(Ee,se),w[1]),c(f(i(oe,D),-T[1]),f(i(K,E),A[1]))),L[2]),f(c(f(i(pe,le),w[1]),c(f(i(fe,z),-T[1]),f(i(K,E),L[1]))),-A[2]))),-_[3]),f(c(c(f(c(f(i(Me,ge),_[1]),c(f(i(Te,N),-L[1]),f(i(Ae,ee),A[1]))),w[2]),f(c(f(i(Me,ge),w[1]),c(f(i(oe,D),-L[1]),f(i(fe,z),A[1]))),-_[2])),c(f(c(f(i(Te,N),w[1]),c(f(i(oe,D),-_[1]),f(i(V,S),A[1]))),L[2]),f(c(f(i(Ae,ee),w[1]),c(f(i(fe,z),-_[1]),f(i(V,S),L[1]))),-A[2]))),T[3]))),c(c(f(c(c(f(c(f(i(Ee,se),_[1]),c(f(i(Te,N),-T[1]),f(i(ie,j),A[1]))),w[2]),f(c(f(i(Ee,se),w[1]),c(f(i(oe,D),-T[1]),f(i(K,E),A[1]))),-_[2])),c(f(c(f(i(Te,N),w[1]),c(f(i(oe,D),-_[1]),f(i(V,S),A[1]))),T[2]),f(c(f(i(ie,j),w[1]),c(f(i(K,E),-_[1]),f(i(V,S),T[1]))),-A[2]))),-L[3]),f(c(c(f(c(f(i(pe,le),_[1]),c(f(i(Ae,ee),-T[1]),f(i(ie,j),L[1]))),w[2]),f(c(f(i(pe,le),w[1]),c(f(i(fe,z),-T[1]),f(i(K,E),L[1]))),-_[2])),c(f(c(f(i(Ae,ee),w[1]),c(f(i(fe,z),-_[1]),f(i(V,S),L[1]))),T[2]),f(c(f(i(ie,j),w[1]),c(f(i(K,E),-_[1]),f(i(V,S),T[1]))),-L[2]))),A[3])),c(f(c(c(f(c(f(i(Me,ge),_[1]),c(f(i(Te,N),-L[1]),f(i(Ae,ee),A[1]))),b[2]),f(c(f(i(Me,ge),b[1]),c(f(i(de,Z),-L[1]),f(i(ye,W),A[1]))),-_[2])),c(f(c(f(i(Te,N),b[1]),c(f(i(de,Z),-_[1]),f(i(B,Y),A[1]))),L[2]),f(c(f(i(Ae,ee),b[1]),c(f(i(ye,W),-_[1]),f(i(B,Y),L[1]))),-A[2]))),w[3]),f(c(c(f(c(f(i(Me,ge),_[1]),c(f(i(Te,N),-L[1]),f(i(Ae,ee),A[1]))),w[2]),f(c(f(i(Me,ge),w[1]),c(f(i(oe,D),-L[1]),f(i(fe,z),A[1]))),-_[2])),c(f(c(f(i(Te,N),w[1]),c(f(i(oe,D),-_[1]),f(i(V,S),A[1]))),L[2]),f(c(f(i(Ae,ee),w[1]),c(f(i(fe,z),-_[1]),f(i(V,S),L[1]))),-A[2]))),-b[3])))),c(c(c(f(c(c(f(c(f(i(Me,ge),b[1]),c(f(i(de,Z),-L[1]),f(i(ye,W),A[1]))),w[2]),f(c(f(i(Me,ge),w[1]),c(f(i(oe,D),-L[1]),f(i(fe,z),A[1]))),-b[2])),c(f(c(f(i(de,Z),w[1]),c(f(i(oe,D),-b[1]),f(i(H,P),A[1]))),L[2]),f(c(f(i(ye,W),w[1]),c(f(i(fe,z),-b[1]),f(i(H,P),L[1]))),-A[2]))),_[3]),f(c(c(f(c(f(i(Te,N),b[1]),c(f(i(de,Z),-_[1]),f(i(B,Y),A[1]))),w[2]),f(c(f(i(Te,N),w[1]),c(f(i(oe,D),-_[1]),f(i(V,S),A[1]))),-b[2])),c(f(c(f(i(de,Z),w[1]),c(f(i(oe,D),-b[1]),f(i(H,P),A[1]))),_[2]),f(c(f(i(B,Y),w[1]),c(f(i(V,S),-b[1]),f(i(H,P),_[1]))),-A[2]))),-L[3])),c(f(c(c(f(c(f(i(Ae,ee),b[1]),c(f(i(ye,W),-_[1]),f(i(B,Y),L[1]))),w[2]),f(c(f(i(Ae,ee),w[1]),c(f(i(fe,z),-_[1]),f(i(V,S),L[1]))),-b[2])),c(f(c(f(i(ye,W),w[1]),c(f(i(fe,z),-b[1]),f(i(H,P),L[1]))),_[2]),f(c(f(i(B,Y),w[1]),c(f(i(V,S),-b[1]),f(i(H,P),_[1]))),-L[2]))),A[3]),f(c(c(f(c(f(i(pe,le),_[1]),c(f(i(Ae,ee),-T[1]),f(i(ie,j),L[1]))),b[2]),f(c(f(i(pe,le),b[1]),c(f(i(ye,W),-T[1]),f(i(te,J),L[1]))),-_[2])),c(f(c(f(i(Ae,ee),b[1]),c(f(i(ye,W),-_[1]),f(i(B,Y),L[1]))),T[2]),f(c(f(i(ie,j),b[1]),c(f(i(te,J),-_[1]),f(i(B,Y),T[1]))),-L[2]))),w[3]))),c(c(f(c(c(f(c(f(i(pe,le),_[1]),c(f(i(Ae,ee),-T[1]),f(i(ie,j),L[1]))),w[2]),f(c(f(i(pe,le),w[1]),c(f(i(fe,z),-T[1]),f(i(K,E),L[1]))),-_[2])),c(f(c(f(i(Ae,ee),w[1]),c(f(i(fe,z),-_[1]),f(i(V,S),L[1]))),T[2]),f(c(f(i(ie,j),w[1]),c(f(i(K,E),-_[1]),f(i(V,S),T[1]))),-L[2]))),-b[3]),f(c(c(f(c(f(i(pe,le),b[1]),c(f(i(ye,W),-T[1]),f(i(te,J),L[1]))),w[2]),f(c(f(i(pe,le),w[1]),c(f(i(fe,z),-T[1]),f(i(K,E),L[1]))),-b[2])),c(f(c(f(i(ye,W),w[1]),c(f(i(fe,z),-b[1]),f(i(H,P),L[1]))),T[2]),f(c(f(i(te,J),w[1]),c(f(i(K,E),-b[1]),f(i(H,P),T[1]))),-L[2]))),_[3])),c(f(c(c(f(c(f(i(Ae,ee),b[1]),c(f(i(ye,W),-_[1]),f(i(B,Y),L[1]))),w[2]),f(c(f(i(Ae,ee),w[1]),c(f(i(fe,z),-_[1]),f(i(V,S),L[1]))),-b[2])),c(f(c(f(i(ye,W),w[1]),c(f(i(fe,z),-b[1]),f(i(H,P),L[1]))),_[2]),f(c(f(i(B,Y),w[1]),c(f(i(V,S),-b[1]),f(i(H,P),_[1]))),-L[2]))),-T[3]),f(c(c(f(c(f(i(ie,j),b[1]),c(f(i(te,J),-_[1]),f(i(B,Y),T[1]))),w[2]),f(c(f(i(ie,j),w[1]),c(f(i(K,E),-_[1]),f(i(V,S),T[1]))),-b[2])),c(f(c(f(i(te,J),w[1]),c(f(i(K,E),-b[1]),f(i(H,P),T[1]))),_[2]),f(c(f(i(B,Y),w[1]),c(f(i(V,S),-b[1]),f(i(H,P),_[1]))),-T[2]))),L[3]))))),Oe=i(De,Ie);return Oe[Oe.length-1]}}var s=[function(){return 0},function(){return 0},function(){return 0}];function a(c){var i=s[c.length];return i||(i=s[c.length]=n(c.length)),i.apply(void 0,c)}function p(c,i,y,f,w,b,_,T){return function(L,A,I,P,S,E){switch(arguments.length){case 0:case 1:return 0;case 2:return f(L,A);case 3:return w(L,A,I);case 4:return b(L,A,I,P);case 5:return _(L,A,I,P,S);case 6:return T(L,A,I,P,S,E)}for(var z=new Array(arguments.length),D=0;D<arguments.length;++D)z[D]=arguments[D];return c(z)}}(function(){for(;s.length<=6;)s.push(n(s.length));k.exports=p.apply(void 0,[a].concat(s));for(var c=0;c<=6;++c)k.exports[c]=s[c]})()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(v,k,x){var e=v("robust-determinant");function t(s){var a=s===2?r:s===3?l:s===4?n:s===5?d:u;return a(s<6?e[s]:e)}function r(s){return function(a,p){return[s([[+p[0],+a[0][1]],[+p[1],+a[1][1]]]),s([[+a[0][0],+p[0]],[+a[1][0],+p[1]]]),s(a)]}}function l(s){return function(a,p){return[s([[+p[0],+a[0][1],+a[0][2]],[+p[1],+a[1][1],+a[1][2]],[+p[2],+a[2][1],+a[2][2]]]),s([[+a[0][0],+p[0],+a[0][2]],[+a[1][0],+p[1],+a[1][2]],[+a[2][0],+p[2],+a[2][2]]]),s([[+a[0][0],+a[0][1],+p[0]],[+a[1][0],+a[1][1],+p[1]],[+a[2][0],+a[2][1],+p[2]]]),s(a)]}}function n(s){return function(a,p){return[s([[+p[0],+a[0][1],+a[0][2],+a[0][3]],[+p[1],+a[1][1],+a[1][2],+a[1][3]],[+p[2],+a[2][1],+a[2][2],+a[2][3]],[+p[3],+a[3][1],+a[3][2],+a[3][3]]]),s([[+a[0][0],+p[0],+a[0][2],+a[0][3]],[+a[1][0],+p[1],+a[1][2],+a[1][3]],[+a[2][0],+p[2],+a[2][2],+a[2][3]],[+a[3][0],+p[3],+a[3][2],+a[3][3]]]),s([[+a[0][0],+a[0][1],+p[0],+a[0][3]],[+a[1][0],+a[1][1],+p[1],+a[1][3]],[+a[2][0],+a[2][1],+p[2],+a[2][3]],[+a[3][0],+a[3][1],+p[3],+a[3][3]]]),s([[+a[0][0],+a[0][1],+a[0][2],+p[0]],[+a[1][0],+a[1][1],+a[1][2],+p[1]],[+a[2][0],+a[2][1],+a[2][2],+p[2]],[+a[3][0],+a[3][1],+a[3][2],+p[3]]]),s(a)]}}function d(s){return function(a,p){return[s([[+p[0],+a[0][1],+a[0][2],+a[0][3],+a[0][4]],[+p[1],+a[1][1],+a[1][2],+a[1][3],+a[1][4]],[+p[2],+a[2][1],+a[2][2],+a[2][3],+a[2][4]],[+p[3],+a[3][1],+a[3][2],+a[3][3],+a[3][4]],[+p[4],+a[4][1],+a[4][2],+a[4][3],+a[4][4]]]),s([[+a[0][0],+p[0],+a[0][2],+a[0][3],+a[0][4]],[+a[1][0],+p[1],+a[1][2],+a[1][3],+a[1][4]],[+a[2][0],+p[2],+a[2][2],+a[2][3],+a[2][4]],[+a[3][0],+p[3],+a[3][2],+a[3][3],+a[3][4]],[+a[4][0],+p[4],+a[4][2],+a[4][3],+a[4][4]]]),s([[+a[0][0],+a[0][1],+p[0],+a[0][3],+a[0][4]],[+a[1][0],+a[1][1],+p[1],+a[1][3],+a[1][4]],[+a[2][0],+a[2][1],+p[2],+a[2][3],+a[2][4]],[+a[3][0],+a[3][1],+p[3],+a[3][3],+a[3][4]],[+a[4][0],+a[4][1],+p[4],+a[4][3],+a[4][4]]]),s([[+a[0][0],+a[0][1],+a[0][2],+p[0],+a[0][4]],[+a[1][0],+a[1][1],+a[1][2],+p[1],+a[1][4]],[+a[2][0],+a[2][1],+a[2][2],+p[2],+a[2][4]],[+a[3][0],+a[3][1],+a[3][2],+p[3],+a[3][4]],[+a[4][0],+a[4][1],+a[4][2],+p[4],+a[4][4]]]),s([[+a[0][0],+a[0][1],+a[0][2],+a[0][3],+p[0]],[+a[1][0],+a[1][1],+a[1][2],+a[1][3],+p[1]],[+a[2][0],+a[2][1],+a[2][2],+a[2][3],+p[2]],[+a[3][0],+a[3][1],+a[3][2],+a[3][3],+p[3]],[+a[4][0],+a[4][1],+a[4][2],+a[4][3],+p[4]]]),s(a)]}}function u(s){return function(a,p){return[s([[+p[0],+a[0][1],+a[0][2],+a[0][3],+a[0][4],+a[0][5]],[+p[1],+a[1][1],+a[1][2],+a[1][3],+a[1][4],+a[1][5]],[+p[2],+a[2][1],+a[2][2],+a[2][3],+a[2][4],+a[2][5]],[+p[3],+a[3][1],+a[3][2],+a[3][3],+a[3][4],+a[3][5]],[+p[4],+a[4][1],+a[4][2],+a[4][3],+a[4][4],+a[4][5]],[+p[5],+a[5][1],+a[5][2],+a[5][3],+a[5][4],+a[5][5]]]),s([[+a[0][0],+p[0],+a[0][2],+a[0][3],+a[0][4],+a[0][5]],[+a[1][0],+p[1],+a[1][2],+a[1][3],+a[1][4],+a[1][5]],[+a[2][0],+p[2],+a[2][2],+a[2][3],+a[2][4],+a[2][5]],[+a[3][0],+p[3],+a[3][2],+a[3][3],+a[3][4],+a[3][5]],[+a[4][0],+p[4],+a[4][2],+a[4][3],+a[4][4],+a[4][5]],[+a[5][0],+p[5],+a[5][2],+a[5][3],+a[5][4],+a[5][5]]]),s([[+a[0][0],+a[0][1],+p[0],+a[0][3],+a[0][4],+a[0][5]],[+a[1][0],+a[1][1],+p[1],+a[1][3],+a[1][4],+a[1][5]],[+a[2][0],+a[2][1],+p[2],+a[2][3],+a[2][4],+a[2][5]],[+a[3][0],+a[3][1],+p[3],+a[3][3],+a[3][4],+a[3][5]],[+a[4][0],+a[4][1],+p[4],+a[4][3],+a[4][4],+a[4][5]],[+a[5][0],+a[5][1],+p[5],+a[5][3],+a[5][4],+a[5][5]]]),s([[+a[0][0],+a[0][1],+a[0][2],+p[0],+a[0][4],+a[0][5]],[+a[1][0],+a[1][1],+a[1][2],+p[1],+a[1][4],+a[1][5]],[+a[2][0],+a[2][1],+a[2][2],+p[2],+a[2][4],+a[2][5]],[+a[3][0],+a[3][1],+a[3][2],+p[3],+a[3][4],+a[3][5]],[+a[4][0],+a[4][1],+a[4][2],+p[4],+a[4][4],+a[4][5]],[+a[5][0],+a[5][1],+a[5][2],+p[5],+a[5][4],+a[5][5]]]),s([[+a[0][0],+a[0][1],+a[0][2],+a[0][3],+p[0],+a[0][5]],[+a[1][0],+a[1][1],+a[1][2],+a[1][3],+p[1],+a[1][5]],[+a[2][0],+a[2][1],+a[2][2],+a[2][3],+p[2],+a[2][5]],[+a[3][0],+a[3][1],+a[3][2],+a[3][3],+p[3],+a[3][5]],[+a[4][0],+a[4][1],+a[4][2],+a[4][3],+p[4],+a[4][5]],[+a[5][0],+a[5][1],+a[5][2],+a[5][3],+p[5],+a[5][5]]]),s([[+a[0][0],+a[0][1],+a[0][2],+a[0][3],+a[0][4],+p[0]],[+a[1][0],+a[1][1],+a[1][2],+a[1][3],+a[1][4],+p[1]],[+a[2][0],+a[2][1],+a[2][2],+a[2][3],+a[2][4],+p[2]],[+a[3][0],+a[3][1],+a[3][2],+a[3][3],+a[3][4],+p[3]],[+a[4][0],+a[4][1],+a[4][2],+a[4][3],+a[4][4],+p[4]],[+a[5][0],+a[5][1],+a[5][2],+a[5][3],+a[5][4],+p[5]]]),s(a)]}}var o=[function(){return[[0]]},function(s,a){return[[a[0]],[s[0][0]]]}];function h(s,a,p,c,i,y,f,w){return function(b,_){switch(b.length){case 0:return s(b,_);case 1:return a(b,_);case 2:return p(b,_);case 3:return c(b,_);case 4:return i(b,_);case 5:return y(b,_)}var T=f[b.length];return T||(T=f[b.length]=w(b.length)),T(b,_)}}(function(){for(;o.length<6;)o.push(t(o.length));k.exports=h.apply(void 0,o.concat([o,t]));for(var s=0;s<6;++s)k.exports[s]=o[s]})()},{"robust-determinant":280}],284:[function(v,k,x){var e=v("two-product"),t=v("robust-sum"),r=v("robust-scale"),l=v("robust-subtract");function n(i,y,f,w){return function(b,_,T){var L=i(i(y(_[1],T[0]),y(-T[1],_[0])),i(y(b[1],_[0]),y(-_[1],b[0]))),A=i(y(b[1],T[0]),y(-T[1],b[0])),I=w(L,A);return I[I.length-1]}}function d(i,y,f,w){return function(b,_,T,L){var A=i(i(f(i(y(T[1],L[0]),y(-L[1],T[0])),_[2]),i(f(i(y(_[1],L[0]),y(-L[1],_[0])),-T[2]),f(i(y(_[1],T[0]),y(-T[1],_[0])),L[2]))),i(f(i(y(_[1],L[0]),y(-L[1],_[0])),b[2]),i(f(i(y(b[1],L[0]),y(-L[1],b[0])),-_[2]),f(i(y(b[1],_[0]),y(-_[1],b[0])),L[2])))),I=i(i(f(i(y(T[1],L[0]),y(-L[1],T[0])),b[2]),i(f(i(y(b[1],L[0]),y(-L[1],b[0])),-T[2]),f(i(y(b[1],T[0]),y(-T[1],b[0])),L[2]))),i(f(i(y(_[1],T[0]),y(-T[1],_[0])),b[2]),i(f(i(y(b[1],T[0]),y(-T[1],b[0])),-_[2]),f(i(y(b[1],_[0]),y(-_[1],b[0])),T[2])))),P=w(A,I);return P[P.length-1]}}function u(i,y,f,w){return function(b,_,T,L,A){var I=i(i(i(f(i(f(i(y(L[1],A[0]),y(-A[1],L[0])),T[2]),i(f(i(y(T[1],A[0]),y(-A[1],T[0])),-L[2]),f(i(y(T[1],L[0]),y(-L[1],T[0])),A[2]))),_[3]),i(f(i(f(i(y(L[1],A[0]),y(-A[1],L[0])),_[2]),i(f(i(y(_[1],A[0]),y(-A[1],_[0])),-L[2]),f(i(y(_[1],L[0]),y(-L[1],_[0])),A[2]))),-T[3]),f(i(f(i(y(T[1],A[0]),y(-A[1],T[0])),_[2]),i(f(i(y(_[1],A[0]),y(-A[1],_[0])),-T[2]),f(i(y(_[1],T[0]),y(-T[1],_[0])),A[2]))),L[3]))),i(f(i(f(i(y(T[1],L[0]),y(-L[1],T[0])),_[2]),i(f(i(y(_[1],L[0]),y(-L[1],_[0])),-T[2]),f(i(y(_[1],T[0]),y(-T[1],_[0])),L[2]))),-A[3]),i(f(i(f(i(y(L[1],A[0]),y(-A[1],L[0])),_[2]),i(f(i(y(_[1],A[0]),y(-A[1],_[0])),-L[2]),f(i(y(_[1],L[0]),y(-L[1],_[0])),A[2]))),b[3]),f(i(f(i(y(L[1],A[0]),y(-A[1],L[0])),b[2]),i(f(i(y(b[1],A[0]),y(-A[1],b[0])),-L[2]),f(i(y(b[1],L[0]),y(-L[1],b[0])),A[2]))),-_[3])))),i(i(f(i(f(i(y(_[1],A[0]),y(-A[1],_[0])),b[2]),i(f(i(y(b[1],A[0]),y(-A[1],b[0])),-_[2]),f(i(y(b[1],_[0]),y(-_[1],b[0])),A[2]))),L[3]),i(f(i(f(i(y(_[1],L[0]),y(-L[1],_[0])),b[2]),i(f(i(y(b[1],L[0]),y(-L[1],b[0])),-_[2]),f(i(y(b[1],_[0]),y(-_[1],b[0])),L[2]))),-A[3]),f(i(f(i(y(T[1],L[0]),y(-L[1],T[0])),_[2]),i(f(i(y(_[1],L[0]),y(-L[1],_[0])),-T[2]),f(i(y(_[1],T[0]),y(-T[1],_[0])),L[2]))),b[3]))),i(f(i(f(i(y(T[1],L[0]),y(-L[1],T[0])),b[2]),i(f(i(y(b[1],L[0]),y(-L[1],b[0])),-T[2]),f(i(y(b[1],T[0]),y(-T[1],b[0])),L[2]))),-_[3]),i(f(i(f(i(y(_[1],L[0]),y(-L[1],_[0])),b[2]),i(f(i(y(b[1],L[0]),y(-L[1],b[0])),-_[2]),f(i(y(b[1],_[0]),y(-_[1],b[0])),L[2]))),T[3]),f(i(f(i(y(_[1],T[0]),y(-T[1],_[0])),b[2]),i(f(i(y(b[1],T[0]),y(-T[1],b[0])),-_[2]),f(i(y(b[1],_[0]),y(-_[1],b[0])),T[2]))),-L[3]))))),P=i(i(i(f(i(f(i(y(L[1],A[0]),y(-A[1],L[0])),T[2]),i(f(i(y(T[1],A[0]),y(-A[1],T[0])),-L[2]),f(i(y(T[1],L[0]),y(-L[1],T[0])),A[2]))),b[3]),f(i(f(i(y(L[1],A[0]),y(-A[1],L[0])),b[2]),i(f(i(y(b[1],A[0]),y(-A[1],b[0])),-L[2]),f(i(y(b[1],L[0]),y(-L[1],b[0])),A[2]))),-T[3])),i(f(i(f(i(y(T[1],A[0]),y(-A[1],T[0])),b[2]),i(f(i(y(b[1],A[0]),y(-A[1],b[0])),-T[2]),f(i(y(b[1],T[0]),y(-T[1],b[0])),A[2]))),L[3]),f(i(f(i(y(T[1],L[0]),y(-L[1],T[0])),b[2]),i(f(i(y(b[1],L[0]),y(-L[1],b[0])),-T[2]),f(i(y(b[1],T[0]),y(-T[1],b[0])),L[2]))),-A[3]))),i(i(f(i(f(i(y(T[1],A[0]),y(-A[1],T[0])),_[2]),i(f(i(y(_[1],A[0]),y(-A[1],_[0])),-T[2]),f(i(y(_[1],T[0]),y(-T[1],_[0])),A[2]))),b[3]),f(i(f(i(y(T[1],A[0]),y(-A[1],T[0])),b[2]),i(f(i(y(b[1],A[0]),y(-A[1],b[0])),-T[2]),f(i(y(b[1],T[0]),y(-T[1],b[0])),A[2]))),-_[3])),i(f(i(f(i(y(_[1],A[0]),y(-A[1],_[0])),b[2]),i(f(i(y(b[1],A[0]),y(-A[1],b[0])),-_[2]),f(i(y(b[1],_[0]),y(-_[1],b[0])),A[2]))),T[3]),f(i(f(i(y(_[1],T[0]),y(-T[1],_[0])),b[2]),i(f(i(y(b[1],T[0]),y(-T[1],b[0])),-_[2]),f(i(y(b[1],_[0]),y(-_[1],b[0])),T[2]))),-A[3])))),S=w(I,P);return S[S.length-1]}}function o(i){return(i===3?n:i===4?d:u)(t,e,r,l)}var h=o(3),s=o(4),a=[function(){return 0},function(){return 0},function(i,y){return y[0]-i[0]},function(i,y,f){var w,b=(i[1]-f[1])*(y[0]-f[0]),_=(i[0]-f[0])*(y[1]-f[1]),T=b-_;if(b>0){if(_<=0)return T;w=b+_}else{if(!(b<0)||_>=0)return T;w=-(b+_)}var L=33306690738754716e-32*w;return T>=L||T<=-L?T:h(i,y,f)},function(i,y,f,w){var b=i[0]-w[0],_=y[0]-w[0],T=f[0]-w[0],L=i[1]-w[1],A=y[1]-w[1],I=f[1]-w[1],P=i[2]-w[2],S=y[2]-w[2],E=f[2]-w[2],z=_*I,D=T*A,U=T*L,H=b*I,Y=b*A,J=_*L,W=P*(z-D)+S*(U-H)+E*(Y-J),Z=7771561172376103e-31*((Math.abs(z)+Math.abs(D))*Math.abs(P)+(Math.abs(U)+Math.abs(H))*Math.abs(S)+(Math.abs(Y)+Math.abs(J))*Math.abs(E));return W>Z||-W>Z?W:s(i,y,f,w)}];function p(i){var y=a[i.length];return y||(y=a[i.length]=o(i.length)),y.apply(void 0,i)}function c(i,y,f,w,b,_,T){return function(L,A,I,P,S){switch(arguments.length){case 0:case 1:return 0;case 2:return w(L,A);case 3:return b(L,A,I);case 4:return _(L,A,I,P);case 5:return T(L,A,I,P,S)}for(var E=new Array(arguments.length),z=0;z<arguments.length;++z)E[z]=arguments[z];return i(E)}}(function(){for(;a.length<=5;)a.push(o(a.length));k.exports=c.apply(void 0,[p].concat(a));for(var i=0;i<=5;++i)k.exports[i]=a[i]})()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(v,k,x){var e=v("robust-sum"),t=v("robust-scale");k.exports=function(r,l){if(r.length===1)return t(l,r[0]);if(l.length===1)return t(r,l[0]);if(r.length===0||l.length===0)return[0];var n=[0];if(r.length<l.length)for(var d=0;d<r.length;++d)n=e(n,t(l,r[d]));else for(d=0;d<l.length;++d)n=e(n,t(r,l[d]));return n}},{"robust-scale":286,"robust-sum":289}],286:[function(v,k,x){var e=v("two-product"),t=v("two-sum");k.exports=function(r,l){var n=r.length;if(n===1){var d=e(r[0],l);return d[0]?d:[d[1]]}var u=new Array(2*n),o=[.1,.1],h=[.1,.1],s=0;e(r[0],l,o),o[0]&&(u[s++]=o[0]);for(var a=1;a<n;++a){e(r[a],l,h);var p=o[1];t(p,h[0],o),o[0]&&(u[s++]=o[0]);var c=h[1],i=o[1],y=c+i,f=i-(y-c);o[1]=y,f&&(u[s++]=f)}return o[1]&&(u[s++]=o[1]),s===0&&(u[s++]=0),u.length=s,u}},{"two-product":306,"two-sum":307}],287:[function(v,k,x){k.exports=function(t,r,l,n){var d=e(t,l,n),u=e(r,l,n);if(d>0&&u>0||d<0&&u<0)return!1;var o=e(l,t,r),h=e(n,t,r);return o>0&&h>0||o<0&&h<0?!1:d===0&&u===0&&o===0&&h===0?function(s,a,p,c){for(var i=0;i<2;++i){var y=s[i],f=a[i],w=Math.min(y,f),b=Math.max(y,f),_=p[i],T=c[i],L=Math.min(_,T);if(Math.max(_,T)<w||b<L)return!1}return!0}(t,r,l,n):!0};var e=v("robust-orientation")[3]},{"robust-orientation":284}],288:[function(v,k,x){k.exports=function(e,t){var r=0|e.length,l=0|t.length;if(r===1&&l===1)return function(I,P){var S=I+P,E=S-I,z=I-(S-E)+(P-E);return z?[z,S]:[S]}(e[0],-t[0]);var n,d,u=new Array(r+l),o=0,h=0,s=0,a=Math.abs,p=e[h],c=a(p),i=-t[s],y=a(i);c<y?(d=p,(h+=1)<r&&(p=e[h],c=a(p))):(d=i,(s+=1)<l&&(i=-t[s],y=a(i))),h<r&&c<y||s>=l?(n=p,(h+=1)<r&&(p=e[h],c=a(p))):(n=i,(s+=1)<l&&(i=-t[s],y=a(i)));for(var f,w,b=n+d,_=b-n,T=d-_,L=T,A=b;h<r&&s<l;)c<y?(n=p,(h+=1)<r&&(p=e[h],c=a(p))):(n=i,(s+=1)<l&&(i=-t[s],y=a(i))),(T=(d=L)-(_=(b=n+d)-n))&&(u[o++]=T),L=A-((f=A+b)-(w=f-A))+(b-w),A=f;for(;h<r;)(T=(d=L)-(_=(b=(n=p)+d)-n))&&(u[o++]=T),L=A-((f=A+b)-(w=f-A))+(b-w),A=f,(h+=1)<r&&(p=e[h]);for(;s<l;)(T=(d=L)-(_=(b=(n=i)+d)-n))&&(u[o++]=T),L=A-((f=A+b)-(w=f-A))+(b-w),A=f,(s+=1)<l&&(i=-t[s]);return L&&(u[o++]=L),A&&(u[o++]=A),o||(u[o++]=0),u.length=o,u}},{}],289:[function(v,k,x){k.exports=function(e,t){var r=0|e.length,l=0|t.length;if(r===1&&l===1)return function(I,P){var S=I+P,E=S-I,z=I-(S-E)+(P-E);return z?[z,S]:[S]}(e[0],t[0]);var n,d,u=new Array(r+l),o=0,h=0,s=0,a=Math.abs,p=e[h],c=a(p),i=t[s],y=a(i);c<y?(d=p,(h+=1)<r&&(p=e[h],c=a(p))):(d=i,(s+=1)<l&&(i=t[s],y=a(i))),h<r&&c<y||s>=l?(n=p,(h+=1)<r&&(p=e[h],c=a(p))):(n=i,(s+=1)<l&&(i=t[s],y=a(i)));for(var f,w,b=n+d,_=b-n,T=d-_,L=T,A=b;h<r&&s<l;)c<y?(n=p,(h+=1)<r&&(p=e[h],c=a(p))):(n=i,(s+=1)<l&&(i=t[s],y=a(i))),(T=(d=L)-(_=(b=n+d)-n))&&(u[o++]=T),L=A-((f=A+b)-(w=f-A))+(b-w),A=f;for(;h<r;)(T=(d=L)-(_=(b=(n=p)+d)-n))&&(u[o++]=T),L=A-((f=A+b)-(w=f-A))+(b-w),A=f,(h+=1)<r&&(p=e[h]);for(;s<l;)(T=(d=L)-(_=(b=(n=i)+d)-n))&&(u[o++]=T),L=A-((f=A+b)-(w=f-A))+(b-w),A=f,(s+=1)<l&&(i=t[s]);return L&&(u[o++]=L),A&&(u[o++]=A),o||(u[o++]=0),u.length=o,u}},{}],290:[function(v,k,x){k.exports=function(r){return t(e(r))};var e=v("boundary-cells"),t=v("reduce-simplicial-complex")},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(v,k,x){k.exports=function(n,d,u,o){if(u=u||0,o===void 0&&(o=function(f){for(var w=f.length,b=0,_=0;_<w;++_)b=0|Math.max(b,f[_].length);return b-1}(n)),n.length===0||o<1)return{cells:[],vertexIds:[],vertexWeights:[]};var h=function(f,w){for(var b=f.length,_=t.mallocUint8(b),T=0;T<b;++T)_[T]=f[T]<w|0;return _}(d,+u),s=function(f,w){for(var b=f.length,_=w*(w+1)/2*b|0,T=t.mallocUint32(2*_),L=0,A=0;A<b;++A)for(var I=f[A],P=(w=I.length,0);P<w;++P)for(var S=0;S<P;++S){var E=I[S],z=I[P];T[L++]=0|Math.min(E,z),T[L++]=0|Math.max(E,z)}r(e(T,[L/2|0,2]));var D=2;for(A=2;A<L;A+=2)T[A-2]===T[A]&&T[A-1]===T[A+1]||(T[D++]=T[A],T[D++]=T[A+1]);return e(T,[D/2|0,2])}(n,o),a=function(f,w,b,_){for(var T=f.data,L=f.shape[0],A=t.mallocDouble(L),I=0,P=0;P<L;++P){var S=T[2*P],E=T[2*P+1];if(b[S]!==b[E]){var z=w[S],D=w[E];T[2*I]=S,T[2*I+1]=E,A[I++]=(D-_)/(D-z)}}return f.shape[0]=I,e(A,[I])}(s,d,h,+u),p=function(f,w){var b=t.mallocInt32(2*w),_=f.shape[0],T=f.data;b[0]=0;for(var L=0,A=0;A<_;++A){var I=T[2*A];if(I!==L){for(b[2*L+1]=A;++L<I;)b[2*L]=A,b[2*L+1]=A;b[2*L]=A}}for(b[2*L+1]=_;++L<w;)b[2*L]=b[2*L+1]=_;return b}(s,0|d.length),c=l(o)(n,s.data,p,h),i=function(f){for(var w=0|f.shape[0],b=f.data,_=new Array(w),T=0;T<w;++T)_[T]=[b[2*T],b[2*T+1]];return _}(s),y=[].slice.call(a.data,0,a.shape[0]);return t.free(h),t.free(s.data),t.free(a.data),t.free(p),{cells:c,vertexIds:i,vertexWeights:y}};var e=v("ndarray"),t=v("typedarray-pool"),r=v("ndarray-sort"),l=v("./lib/codegen")},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(v,k,x){k.exports=function(t){return e[t]()};var e=[function(){return function(t,r,l,n){for(var d=t.length,u=0;u<d;++u)t[u].length;return[]}},function(){function t(r,l,n,d){for(var u=0|Math.min(n,d),o=0|Math.max(n,d),h=r[2*u],s=r[2*u+1];h<s;){var a=h+s>>1,p=l[2*a+1];if(p===o)return a;o<p?s=a:h=a+1}return h}return function(r,l,n,d){for(var u=r.length,o=[],h=0;h<u;++h){var s=r[h];if(s.length===2){var a=(d[s[0]]<<0)+(d[s[1]]<<1);if(a===0||a===3)continue;switch(a){case 0:break;case 1:o.push([t(n,l,s[0],s[1])]);break;case 2:o.push([t(n,l,s[1],s[0])])}}}return o}},function(){function t(r,l,n,d){for(var u=0|Math.min(n,d),o=0|Math.max(n,d),h=r[2*u],s=r[2*u+1];h<s;){var a=h+s>>1,p=l[2*a+1];if(p===o)return a;o<p?s=a:h=a+1}return h}return function(r,l,n,d){for(var u=r.length,o=[],h=0;h<u;++h){var s=r[h],a=s.length;if(a===3){if((p=(d[s[0]]<<0)+(d[s[1]]<<1)+(d[s[2]]<<2))===0||p===7)continue;switch(p){case 0:break;case 1:o.push([t(n,l,s[0],s[2]),t(n,l,s[0],s[1])]);break;case 2:o.push([t(n,l,s[1],s[0]),t(n,l,s[1],s[2])]);break;case 3:o.push([t(n,l,s[0],s[2]),t(n,l,s[1],s[2])]);break;case 4:o.push([t(n,l,s[2],s[1]),t(n,l,s[2],s[0])]);break;case 5:o.push([t(n,l,s[2],s[1]),t(n,l,s[0],s[1])]);break;case 6:o.push([t(n,l,s[1],s[0]),t(n,l,s[2],s[0])])}}else if(a===2){var p;if((p=(d[s[0]]<<0)+(d[s[1]]<<1))===0||p===3)continue;switch(p){case 0:break;case 1:o.push([t(n,l,s[0],s[1])]);break;case 2:o.push([t(n,l,s[1],s[0])])}}}return o}},function(){function t(r,l,n,d){for(var u=0|Math.min(n,d),o=0|Math.max(n,d),h=r[2*u],s=r[2*u+1];h<s;){var a=h+s>>1,p=l[2*a+1];if(p===o)return a;o<p?s=a:h=a+1}return h}return function(r,l,n,d){for(var u=r.length,o=[],h=0;h<u;++h){var s=r[h],a=s.length;if(a===4){if((p=(d[s[0]]<<0)+(d[s[1]]<<1)+(d[s[2]]<<2)+(d[s[3]]<<3))===0||p===15)continue;switch(p){case 0:break;case 1:o.push([t(n,l,s[0],s[1]),t(n,l,s[0],s[2]),t(n,l,s[0],s[3])]);break;case 2:o.push([t(n,l,s[1],s[2]),t(n,l,s[1],s[0]),t(n,l,s[1],s[3])]);break;case 3:o.push([t(n,l,s[1],s[2]),t(n,l,s[0],s[2]),t(n,l,s[0],s[3])],[t(n,l,s[1],s[3]),t(n,l,s[1],s[2]),t(n,l,s[0],s[3])]);break;case 4:o.push([t(n,l,s[2],s[0]),t(n,l,s[2],s[1]),t(n,l,s[2],s[3])]);break;case 5:o.push([t(n,l,s[0],s[1]),t(n,l,s[2],s[1]),t(n,l,s[0],s[3])],[t(n,l,s[2],s[1]),t(n,l,s[2],s[3]),t(n,l,s[0],s[3])]);break;case 6:o.push([t(n,l,s[2],s[0]),t(n,l,s[1],s[0]),t(n,l,s[1],s[3])],[t(n,l,s[2],s[3]),t(n,l,s[2],s[0]),t(n,l,s[1],s[3])]);break;case 7:o.push([t(n,l,s[0],s[3]),t(n,l,s[1],s[3]),t(n,l,s[2],s[3])]);break;case 8:o.push([t(n,l,s[3],s[1]),t(n,l,s[3],s[0]),t(n,l,s[3],s[2])]);break;case 9:o.push([t(n,l,s[3],s[1]),t(n,l,s[0],s[1]),t(n,l,s[0],s[2])],[t(n,l,s[3],s[2]),t(n,l,s[3],s[1]),t(n,l,s[0],s[2])]);break;case 10:o.push([t(n,l,s[1],s[0]),t(n,l,s[3],s[0]),t(n,l,s[1],s[2])],[t(n,l,s[3],s[0]),t(n,l,s[3],s[2]),t(n,l,s[1],s[2])]);break;case 11:o.push([t(n,l,s[1],s[2]),t(n,l,s[0],s[2]),t(n,l,s[3],s[2])]);break;case 12:o.push([t(n,l,s[3],s[0]),t(n,l,s[2],s[0]),t(n,l,s[2],s[1])],[t(n,l,s[3],s[1]),t(n,l,s[3],s[0]),t(n,l,s[2],s[1])]);break;case 13:o.push([t(n,l,s[0],s[1]),t(n,l,s[2],s[1]),t(n,l,s[3],s[1])]);break;case 14:o.push([t(n,l,s[2],s[0]),t(n,l,s[1],s[0]),t(n,l,s[3],s[0])])}}else if(a===3){if((p=(d[s[0]]<<0)+(d[s[1]]<<1)+(d[s[2]]<<2))===0||p===7)continue;switch(p){case 0:break;case 1:o.push([t(n,l,s[0],s[2]),t(n,l,s[0],s[1])]);break;case 2:o.push([t(n,l,s[1],s[0]),t(n,l,s[1],s[2])]);break;case 3:o.push([t(n,l,s[0],s[2]),t(n,l,s[1],s[2])]);break;case 4:o.push([t(n,l,s[2],s[1]),t(n,l,s[2],s[0])]);break;case 5:o.push([t(n,l,s[2],s[1]),t(n,l,s[0],s[1])]);break;case 6:o.push([t(n,l,s[1],s[0]),t(n,l,s[2],s[0])])}}else if(a===2){var p;if((p=(d[s[0]]<<0)+(d[s[1]]<<1))===0||p===3)continue;switch(p){case 0:break;case 1:o.push([t(n,l,s[0],s[1])]);break;case 2:o.push([t(n,l,s[1],s[0])])}}}return o}}]},{}],293:[function(v,k,x){var e=v("bit-twiddle"),t=v("union-find");function r(s,a){var p=s.length,c=s.length-a.length,i=Math.min;if(c)return c;switch(p){case 0:return 0;case 1:return s[0]-a[0];case 2:return(w=s[0]+s[1]-a[0]-a[1])||i(s[0],s[1])-i(a[0],a[1]);case 3:var y=s[0]+s[1],f=a[0]+a[1];if(w=y+s[2]-(f+a[2]))return w;var w,b=i(s[0],s[1]),_=i(a[0],a[1]);return(w=i(b,s[2])-i(_,a[2]))||i(b+s[2],y)-i(_+a[2],f);default:var T=s.slice(0);T.sort();var L=a.slice(0);L.sort();for(var A=0;A<p;++A)if(c=T[A]-L[A])return c;return 0}}function l(s,a){return r(s[0],a[0])}function n(s,a){if(a){for(var p=s.length,c=new Array(p),i=0;i<p;++i)c[i]=[s[i],a[i]];for(c.sort(l),i=0;i<p;++i)s[i]=c[i][0],a[i]=c[i][1];return s}return s.sort(r),s}function d(s){if(s.length===0)return[];for(var a=1,p=s.length,c=1;c<p;++c){var i=s[c];if(r(i,s[c-1])){if(c===a){a++;continue}s[a++]=i}}return s.length=a,s}function u(s,a){for(var p=0,c=s.length-1,i=-1;p<=c;){var y=p+c>>1,f=r(s[y],a);f<=0?(f===0&&(i=y),p=y+1):f>0&&(c=y-1)}return i}function o(s,a){for(var p=new Array(s.length),c=0,i=p.length;c<i;++c)p[c]=[];for(var y=[],f=(c=0,a.length);c<f;++c)for(var w=a[c],b=w.length,_=1,T=1<<b;_<T;++_){y.length=e.popCount(_);for(var L=0,A=0;A<b;++A)_&1<<A&&(y[L++]=w[A]);var I=u(s,y);if(!(I<0))for(;p[I++].push(c),!(I>=s.length||r(s[I],y)!==0););}return p}function h(s,a){if(a<0)return[];for(var p=[],c=(1<<a+1)-1,i=0;i<s.length;++i)for(var y=s[i],f=c;f<1<<y.length;f=e.nextCombination(f)){for(var w=new Array(a+1),b=0,_=0;_<y.length;++_)f&1<<_&&(w[b++]=y[_]);p.push(w)}return n(p)}x.dimension=function(s){for(var a=0,p=Math.max,c=0,i=s.length;c<i;++c)a=p(a,s[c].length);return a-1},x.countVertices=function(s){for(var a=-1,p=Math.max,c=0,i=s.length;c<i;++c)for(var y=s[c],f=0,w=y.length;f<w;++f)a=p(a,y[f]);return a+1},x.cloneCells=function(s){for(var a=new Array(s.length),p=0,c=s.length;p<c;++p)a[p]=s[p].slice(0);return a},x.compareCells=r,x.normalize=n,x.unique=d,x.findCell=u,x.incidence=o,x.dual=function(s,a){if(!a)return o(d(h(s,0)),s);for(var p=new Array(a),c=0;c<a;++c)p[c]=[];c=0;for(var i=s.length;c<i;++c)for(var y=s[c],f=0,w=y.length;f<w;++f)p[y[f]].push(c);return p},x.explode=function(s){for(var a=[],p=0,c=s.length;p<c;++p)for(var i=s[p],y=0|i.length,f=1,w=1<<y;f<w;++f){for(var b=[],_=0;_<y;++_)f>>>_&1&&b.push(i[_]);a.push(b)}return n(a)},x.skeleton=h,x.boundary=function(s){for(var a=[],p=0,c=s.length;p<c;++p)for(var i=s[p],y=0,f=i.length;y<f;++y){for(var w=new Array(i.length-1),b=0,_=0;b<f;++b)b!==y&&(w[_++]=i[b]);a.push(w)}return n(a)},x.connectedComponents=function(s,a){return a?function(p,c){for(var i=new t(c),y=0;y<p.length;++y)for(var f=p[y],w=0;w<f.length;++w)for(var b=w+1;b<f.length;++b)i.link(f[w],f[b]);var _=[],T=i.ranks;for(y=0;y<T.length;++y)T[y]=-1;for(y=0;y<p.length;++y){var L=i.find(p[y][0]);T[L]<0?(T[L]=_.length,_.push([p[y].slice(0)])):_[T[L]].push(p[y].slice(0))}return _}(s,a):function(p){for(var c=d(n(h(p,0))),i=new t(c.length),y=0;y<p.length;++y)for(var f=p[y],w=0;w<f.length;++w)for(var b=u(c,[f[w]]),_=w+1;_<f.length;++_)i.link(b,u(c,[f[_]]));var T=[],L=i.ranks;for(y=0;y<L.length;++y)L[y]=-1;for(y=0;y<p.length;++y){var A=i.find(u(c,[p[y][0]]));L[A]<0?(L[A]=T.length,T.push([p[y].slice(0)])):T[L[A]].push(p[y].slice(0))}return T}(s)}},{"bit-twiddle":32,"union-find":309}],294:[function(v,k,x){arguments[4][32][0].apply(x,arguments)},{dup:32}],295:[function(v,k,x){arguments[4][293][0].apply(x,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(v,k,x){function e(t){this.roots=new Array(t),this.ranks=new Array(t);for(var r=0;r<t;++r)this.roots[r]=r,this.ranks[r]=0}k.exports=e,e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},e.prototype.find=function(t){for(var r=this.roots;r[t]!==t;){var l=r[t];r[t]=r[l],t=l}return t},e.prototype.link=function(t,r){var l=this.find(t),n=this.find(r);if(l!==n){var d=this.ranks,u=this.roots,o=d[l],h=d[n];o<h?u[l]=n:h<o?u[n]=l:(u[n]=l,++d[l])}}},{}],297:[function(v,k,x){k.exports=function(r,l,n){for(var d=l.length,u=r.length,o=new Array(d),h=new Array(d),s=new Array(d),a=new Array(d),p=0;p<d;++p)o[p]=h[p]=-1,s[p]=1/0,a[p]=!1;for(p=0;p<u;++p){var c=r[p];if(c.length!==2)throw new Error("Input must be a graph");var i=c[1],y=c[0];h[y]!==-1?h[y]=-2:h[y]=i,o[i]!==-1?o[i]=-2:o[i]=y}function f(J){if(a[J])return 1/0;var W,Z,re,V,B,j=o[J],ee=h[J];return j<0||ee<0?1/0:(W=l[J],Z=l[j],re=l[ee],V=Math.abs(e(W,Z,re)),B=Math.sqrt(Math.pow(Z[0]-re[0],2)+Math.pow(Z[1]-re[1],2)),V/B)}function w(J,W){var Z=S[J],re=S[W];S[J]=re,S[W]=Z,E[Z]=W,E[re]=J}function b(J){return s[S[J]]}function _(J){return 1&J?J-1>>1:(J>>1)-1}function T(J){for(var W=b(J);;){var Z=W,re=2*J+1,V=2*(J+1),B=J;if(re<z){var j=b(re);j<Z&&(B=re,Z=j)}if(V<z&&b(V)<Z&&(B=V),B===J)return J;w(J,B),J=B}}function L(J){for(var W=b(J);J>0;){var Z=_(J);if(Z>=0&&W<b(Z)){w(J,Z),J=Z;continue}return J}}function A(){if(z>0){var J=S[0];return w(0,z-1),z-=1,T(0),J}return-1}function I(J,W){var Z=S[J];return s[Z]===W?J:(s[Z]=-1/0,L(J),A(),s[Z]=W,L((z+=1)-1))}function P(J){if(!a[J]){a[J]=!0;var W=o[J],Z=h[J];o[Z]>=0&&(o[Z]=W),h[W]>=0&&(h[W]=Z),E[W]>=0&&I(E[W],f(W)),E[Z]>=0&&I(E[Z],f(Z))}}var S=[],E=new Array(d);for(p=0;p<d;++p)(s[p]=f(p))<1/0?(E[p]=S.length,S.push(p)):E[p]=-1;var z=S.length;for(p=z>>1;p>=0;--p)T(p);for(;;){var D=A();if(D<0||s[D]>n)break;P(D)}var U=[];for(p=0;p<d;++p)a[p]||(E[p]=U.length,U.push(l[p].slice()));U.length;function H(J,W){if(J[W]<0)return W;var Z=W,re=W;do{var V=J[re];if(!a[re]||V<0||V===re||(V=J[re=V],!a[re]||V<0||V===re))break;re=V,Z=J[Z]}while(Z!==re);for(var B=W;B!==re;B=J[B])J[B]=re;return re}var Y=[];return r.forEach(function(J){var W=H(o,J[0]),Z=H(h,J[1]);if(W>=0&&Z>=0&&W!==Z){var re=E[W],V=E[Z];re!==V&&Y.push([re,V])}}),t.unique(t.normalize(Y)),{positions:U,edges:Y}};var e=v("robust-orientation"),t=v("simplicial-complex")},{"robust-orientation":284,"simplicial-complex":295}],298:[function(v,k,x){k.exports=function(r,l){var n,d,u,o;if(l[0][0]<l[1][0])n=l[0],d=l[1];else{if(!(l[0][0]>l[1][0]))return t(l,r);n=l[1],d=l[0]}if(r[0][0]<r[1][0])u=r[0],o=r[1];else{if(!(r[0][0]>r[1][0]))return-t(r,l);u=r[1],o=r[0]}var h=e(n,d,o),s=e(n,d,u);if(h<0){if(s<=0)return h}else if(h>0){if(s>=0)return h}else if(s)return s;if(h=e(o,u,d),s=e(o,u,n),h<0){if(s<=0)return h}else if(h>0){if(s>=0)return h}else if(s)return s;return d[0]-o[0]};var e=v("robust-orientation");function t(r,l){var n,d,u,o;if(l[0][0]<l[1][0])n=l[0],d=l[1];else{if(!(l[0][0]>l[1][0])){var h=Math.min(r[0][1],r[1][1]),s=Math.max(r[0][1],r[1][1]),a=Math.min(l[0][1],l[1][1]),p=Math.max(l[0][1],l[1][1]);return s<a?s-a:h>p?h-p:s-p}n=l[1],d=l[0]}r[0][1]<r[1][1]?(u=r[0],o=r[1]):(u=r[1],o=r[0]);var c=e(d,n,u);return c||(c=e(d,n,o))||o-d}},{"robust-orientation":284}],299:[function(v,k,x){k.exports=function(s){for(var a=s.length,p=2*a,c=new Array(p),i=0;i<a;++i){var y=s[i],f=y[0][0]<y[1][0];c[2*i]=new h(y[0][0],y,f,i),c[2*i+1]=new h(y[1][0],y,!f,i)}c.sort(function(P,S){var E=P.x-S.x;return E||(E=P.create-S.create)||Math.min(P.segment[0][1],P.segment[1][1])-Math.min(S.segment[0][1],S.segment[1][1])});var w=t(l),b=[],_=[],T=[];for(i=0;i<p;){for(var L=c[i].x,A=[];i<p;){var I=c[i];if(I.x!==L)break;i+=1,I.segment[0][0]===I.x&&I.segment[1][0]===I.x?I.create&&(I.segment[0][1]<I.segment[1][1]?(A.push(new o(I.segment[0][1],I.index,!0,!0)),A.push(new o(I.segment[1][1],I.index,!1,!1))):(A.push(new o(I.segment[1][1],I.index,!0,!1)),A.push(new o(I.segment[0][1],I.index,!1,!0)))):w=I.create?w.insert(I.segment,I.index):w.remove(I.segment)}b.push(w.root),_.push(L),T.push(A)}return new n(b,_,T)};var e=v("binary-search-bounds"),t=v("functional-red-black-tree"),r=v("robust-orientation"),l=v("./lib/order-segments");function n(s,a,p){this.slabs=s,this.coordinates=a,this.horizontal=p}function d(s,a){return s.y-a}function u(s,a){for(var p=null;s;){var c,i,y=s.key;y[0][0]<y[1][0]?(c=y[0],i=y[1]):(c=y[1],i=y[0]);var f=r(c,i,a);if(f<0)s=s.left;else if(f>0)if(a[0]!==y[1][0])p=s,s=s.right;else{if(w=u(s.right,a))return w;s=s.left}else{if(a[0]!==y[1][0])return s;var w;if(w=u(s.right,a))return w;s=s.left}}return p}function o(s,a,p,c){this.y=s,this.index=a,this.start=p,this.closed=c}function h(s,a,p,c){this.x=s,this.segment=a,this.create=p,this.index=c}n.prototype.castUp=function(s){var a=e.le(this.coordinates,s[0]);if(a<0)return-1;this.slabs[a];var p=u(this.slabs[a],s),c=-1;if(p&&(c=p.value),this.coordinates[a]===s[0]){var i=null;if(p&&(i=p.key),a>0){var y=u(this.slabs[a-1],s);y&&(i?l(y.key,i)>0&&(i=y.key,c=y.value):(c=y.value,i=y.key))}var f=this.horizontal[a];if(f.length>0){var w=e.ge(f,s[1],d);if(w<f.length){var b=f[w];if(s[1]===b.y){if(b.closed)return b.index;for(;w<f.length-1&&f[w+1].y===s[1];)if((b=f[w+=1]).closed)return b.index;if(b.y===s[1]&&!b.start){if((w+=1)>=f.length)return c;b=f[w]}}if(b.start)if(i){var _=r(i[0],i[1],[s[0],b.y]);i[0][0]>i[1][0]&&(_=-_),_>0&&(c=b.index)}else c=b.index;else b.y!==s[1]&&(c=b.index)}}}return c}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(v,k,x){var e=v("robust-dot-product"),t=v("robust-sum");function r(n,d){var u=t(e(n,d),[d[d.length-1]]);return u[u.length-1]}function l(n,d,u,o){var h=-d/(o-d);h<0?h=0:h>1&&(h=1);for(var s=1-h,a=n.length,p=new Array(a),c=0;c<a;++c)p[c]=h*n[c]+s*u[c];return p}k.exports=function(n,d){for(var u=[],o=[],h=r(n[n.length-1],d),s=n[n.length-1],a=n[0],p=0;p<n.length;++p,s=a){var c=r(a=n[p],d);if(h<0&&c>0||h>0&&c<0){var i=l(s,c,a,h);u.push(i),o.push(i.slice())}c<0?o.push(a.slice()):c>0?u.push(a.slice()):(u.push(a.slice()),o.push(a.slice())),h=c}return{positive:u,negative:o}},k.exports.positive=function(n,d){for(var u=[],o=r(n[n.length-1],d),h=n[n.length-1],s=n[0],a=0;a<n.length;++a,h=s){var p=r(s=n[a],d);(o<0&&p>0||o>0&&p<0)&&u.push(l(h,p,s,o)),p>=0&&u.push(s.slice()),o=p}return u},k.exports.negative=function(n,d){for(var u=[],o=r(n[n.length-1],d),h=n[n.length-1],s=n[0],a=0;a<n.length;++a,h=s){var p=r(s=n[a],d);(o<0&&p>0||o>0&&p<0)&&u.push(l(h,p,s,o)),p<=0&&u.push(s.slice()),o=p}return u}},{"robust-dot-product":281,"robust-sum":289}],301:[function(v,k,x){(function(){var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function t(u){return l(d(u),arguments)}function r(u,o){return t.apply(null,[u].concat(o||[]))}function l(u,o){var h,s,a,p,c,i,y,f,w,b=1,_=u.length,T="";for(s=0;s<_;s++)if(typeof u[s]=="string")T+=u[s];else if(typeof u[s]=="object"){if((p=u[s]).keys)for(h=o[b],a=0;a<p.keys.length;a++){if(h==null)throw new Error(t('[sprintf] Cannot access property "%s" of undefined value "%s"',p.keys[a],p.keys[a-1]));h=h[p.keys[a]]}else h=p.param_no?o[p.param_no]:o[b++];if(e.not_type.test(p.type)&&e.not_primitive.test(p.type)&&h instanceof Function&&(h=h()),e.numeric_arg.test(p.type)&&typeof h!="number"&&isNaN(h))throw new TypeError(t("[sprintf] expecting number but found %T",h));switch(e.number.test(p.type)&&(f=h>=0),p.type){case"b":h=parseInt(h,10).toString(2);break;case"c":h=String.fromCharCode(parseInt(h,10));break;case"d":case"i":h=parseInt(h,10);break;case"j":h=JSON.stringify(h,null,p.width?parseInt(p.width):0);break;case"e":h=p.precision?parseFloat(h).toExponential(p.precision):parseFloat(h).toExponential();break;case"f":h=p.precision?parseFloat(h).toFixed(p.precision):parseFloat(h);break;case"g":h=p.precision?String(Number(h.toPrecision(p.precision))):parseFloat(h);break;case"o":h=(parseInt(h,10)>>>0).toString(8);break;case"s":h=String(h),h=p.precision?h.substring(0,p.precision):h;break;case"t":h=String(!!h),h=p.precision?h.substring(0,p.precision):h;break;case"T":h=Object.prototype.toString.call(h).slice(8,-1).toLowerCase(),h=p.precision?h.substring(0,p.precision):h;break;case"u":h=parseInt(h,10)>>>0;break;case"v":h=h.valueOf(),h=p.precision?h.substring(0,p.precision):h;break;case"x":h=(parseInt(h,10)>>>0).toString(16);break;case"X":h=(parseInt(h,10)>>>0).toString(16).toUpperCase()}e.json.test(p.type)?T+=h:(!e.number.test(p.type)||f&&!p.sign?w="":(w=f?"+":"-",h=h.toString().replace(e.sign,"")),i=p.pad_char?p.pad_char==="0"?"0":p.pad_char.charAt(1):" ",y=p.width-(w+h).length,c=p.width&&y>0?i.repeat(y):"",T+=p.align?w+h+c:i==="0"?w+c+h:c+w+h)}return T}var n=Object.create(null);function d(u){if(n[u])return n[u];for(var o,h=u,s=[],a=0;h;){if((o=e.text.exec(h))!==null)s.push(o[0]);else if((o=e.modulo.exec(h))!==null)s.push("%");else{if((o=e.placeholder.exec(h))===null)throw new SyntaxError("[sprintf] unexpected placeholder");if(o[2]){a|=1;var p=[],c=o[2],i=[];if((i=e.key.exec(c))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");for(p.push(i[1]);(c=c.substring(i[0].length))!=="";)if((i=e.key_access.exec(c))!==null)p.push(i[1]);else{if((i=e.index_access.exec(c))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");p.push(i[1])}o[2]=p}else a|=2;if(a===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");s.push({placeholder:o[0],param_no:o[1],keys:o[2],sign:o[3],pad_char:o[4],align:o[5],width:o[6],precision:o[7],type:o[8]})}h=h.substring(o[0].length)}return n[u]=s}x!==void 0&&(x.sprintf=t,x.vsprintf=r),typeof window<"u"&&(window.sprintf=t,window.vsprintf=r)})()},{}],302:[function(v,k,x){k.exports=function(n,d){if(n.dimension<=0)return{positions:[],cells:[]};if(n.dimension===1)return function(h,s){for(var a=t(h,s),p=a.length,c=new Array(p),i=new Array(p),y=0;y<p;++y)c[y]=[a[y]],i[y]=[y];return{positions:c,cells:i}}(n,d);var u=n.order.join()+"-"+n.dtype,o=l[u];return d=+d||0,o||(o=l[u]=function(h,s){var a=h.length+"d",p=r[a];if(p)return p(e,h,s)}(n.order,n.dtype)),o(n,d)};var e=v("ndarray-extract-contour"),t=v("zero-crossings"),r={"2d":function(n,d,u){var o=n({order:d,scalarArguments:3,getters:u==="generic"?[0]:void 0,phase:function(h,s,a,p){return h>p|0},vertex:function(h,s,a,p,c,i,y,f,w,b,_,T,L){var A=(y<<0)+(f<<1)+(w<<2)+(b<<3)|0;if(A!==0&&A!==15)switch(A){case 0:_.push([h-.5,s-.5]);break;case 1:_.push([h-.25-.25*(p+a-2*L)/(a-p),s-.25-.25*(c+a-2*L)/(a-c)]);break;case 2:_.push([h-.75-.25*(-p-a+2*L)/(p-a),s-.25-.25*(i+p-2*L)/(p-i)]);break;case 3:_.push([h-.5,s-.5-.5*(c+a+i+p-4*L)/(a-c+p-i)]);break;case 4:_.push([h-.25-.25*(i+c-2*L)/(c-i),s-.75-.25*(-c-a+2*L)/(c-a)]);break;case 5:_.push([h-.5-.5*(p+a+i+c-4*L)/(a-p+c-i),s-.5]);break;case 6:_.push([h-.5-.25*(-p-a+i+c)/(p-a+c-i),s-.5-.25*(-c-a+i+p)/(c-a+p-i)]);break;case 7:_.push([h-.75-.25*(i+c-2*L)/(c-i),s-.75-.25*(i+p-2*L)/(p-i)]);break;case 8:_.push([h-.75-.25*(-i-c+2*L)/(i-c),s-.75-.25*(-i-p+2*L)/(i-p)]);break;case 9:_.push([h-.5-.25*(p+a+-i-c)/(a-p+i-c),s-.5-.25*(c+a+-i-p)/(a-c+i-p)]);break;case 10:_.push([h-.5-.5*(-p-a-i-c+4*L)/(p-a+i-c),s-.5]);break;case 11:_.push([h-.25-.25*(-i-c+2*L)/(i-c),s-.75-.25*(c+a-2*L)/(a-c)]);break;case 12:_.push([h-.5,s-.5-.5*(-c-a-i-p+4*L)/(c-a+i-p)]);break;case 13:_.push([h-.75-.25*(p+a-2*L)/(a-p),s-.25-.25*(-i-p+2*L)/(i-p)]);break;case 14:_.push([h-.25-.25*(-p-a+2*L)/(p-a),s-.25-.25*(-c-a+2*L)/(c-a)]);break;case 15:_.push([h-.5,s-.5])}},cell:function(h,s,a,p,c,i,y,f,w){c?f.push([h,s]):f.push([s,h])}});return function(h,s){var a=[],p=[];return o(h,a,p,s),{positions:a,cells:p}}}},l={}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(v,k,x){(function(e){(function(){k.exports=function n(d,u,o){o=o||{};var h=l[d];h||(h=l[d]={" ":{data:new Float32Array(0),shape:.2}});var s=h[u];if(!s)if(u.length<=1||!/\d/.test(u))s=h[u]=function(L){for(var A=L.cells,I=L.positions,P=new Float32Array(6*A.length),S=0,E=0,z=0;z<A.length;++z)for(var D=A[z],U=0;U<3;++U){var H=I[D[U]];P[S++]=H[0],P[S++]=H[1]+1.4,E=Math.max(H[0],E)}return{data:P,shape:E}}(t(u,{triangles:!0,font:d,textAlign:o.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var a=u.split(/(\d|\s)/),p=new Array(a.length),c=0,i=0,y=0;y<a.length;++y)p[y]=n(d,a[y]),c+=p[y].data.length,i+=p[y].shape,y>0&&(i+=.02);var f=new Float32Array(c),w=0,b=-.5*i;for(y=0;y<p.length;++y){for(var _=p[y].data,T=0;T<_.length;T+=2)f[w++]=_[T]+b,f[w++]=_[T+1];b+=p[y].shape+.02}s=h[u]={data:f,shape:i}}return s};var t=v("vectorize-text"),r=window||e.global||{},l=r.__TEXT_CACHE||{};r.__TEXT_CACHE={}}).call(this)}).call(this,v("_process"))},{_process:5,"vectorize-text":311}],304:[function(v,k,x){var e=v("parse-unit");k.exports=r;function t(l,n){var d=e(getComputedStyle(l).getPropertyValue(n));return d[0]*r(d[1],l)}function r(l,n){switch(n=n||document.body,l=(l||"px").trim().toLowerCase(),n!==window&&n!==document||(n=document.body),l){case"%":return n.clientHeight/100;case"ch":case"ex":return function(d,u){var o=document.createElement("div");o.style["font-size"]="128"+d,u.appendChild(o);var h=t(o,"font-size")/128;return u.removeChild(o),h}(l,n);case"em":return t(n,"font-size");case"rem":return t(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}},{"parse-unit":265}],305:[function(v,k,x){k.exports=function(c){var i=(c=c||{}).center||[0,0,0],y=c.up||[0,1,0],f=c.right||h(y),w=c.radius||1,b=c.theta||0,_=c.phi||0;if(i=[].slice.call(i,0,3),y=[].slice.call(y,0,3),n(y,y),f=[].slice.call(f,0,3),n(f,f),"eye"in c){var T=c.eye,L=[T[0]-i[0],T[1]-i[1],T[2]-i[2]];l(f,L,y),u(f[0],f[1],f[2])<1e-6?f=h(y):n(f,f),w=u(L[0],L[1],L[2]);var A=d(y,L)/w,I=d(f,L)/w;_=Math.acos(A),b=Math.acos(I)}return w=Math.log(w),new s(c.zoomMin,c.zoomMax,i,y,f,w,b,_)};var e=v("filtered-vector"),t=v("gl-mat4/invert"),r=v("gl-mat4/rotate"),l=v("gl-vec3/cross"),n=v("gl-vec3/normalize"),d=v("gl-vec3/dot");function u(c,i,y){return Math.sqrt(Math.pow(c,2)+Math.pow(i,2)+Math.pow(y,2))}function o(c){return Math.min(1,Math.max(-1,c))}function h(c){var i=Math.abs(c[0]),y=Math.abs(c[1]),f=Math.abs(c[2]),w=[0,0,0];i>Math.max(y,f)?w[2]=1:y>Math.max(i,f)?w[0]=1:w[1]=1;for(var b=0,_=0,T=0;T<3;++T)b+=c[T]*c[T],_+=w[T]*c[T];for(T=0;T<3;++T)w[T]-=_/b*c[T];return n(w,w),w}function s(c,i,y,f,w,b,_,T){this.center=e(y),this.up=e(f),this.right=e(w),this.radius=e([b]),this.angle=e([_,T]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(c,i),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var L=0;L<16;++L)this.computedMatrix[L]=.5;this.recalcMatrix(0)}var a=s.prototype;a.setDistanceLimits=function(c,i){c=c>0?Math.log(c):-1/0,i=i>0?Math.log(i):1/0,i=Math.max(i,c),this.radius.bounds[0][0]=c,this.radius.bounds[1][0]=i},a.getDistanceLimits=function(c){var i=this.radius.bounds[0];return c?(c[0]=Math.exp(i[0][0]),c[1]=Math.exp(i[1][0]),c):[Math.exp(i[0][0]),Math.exp(i[1][0])]},a.recalcMatrix=function(c){this.center.curve(c),this.up.curve(c),this.right.curve(c),this.radius.curve(c),this.angle.curve(c);for(var i=this.computedUp,y=this.computedRight,f=0,w=0,b=0;b<3;++b)w+=i[b]*y[b],f+=i[b]*i[b];var _=Math.sqrt(f),T=0;for(b=0;b<3;++b)y[b]-=i[b]*w/f,T+=y[b]*y[b],i[b]/=_;var L=Math.sqrt(T);for(b=0;b<3;++b)y[b]/=L;var A=this.computedToward;l(A,i,y),n(A,A);var I=Math.exp(this.computedRadius[0]),P=this.computedAngle[0],S=this.computedAngle[1],E=Math.cos(P),z=Math.sin(P),D=Math.cos(S),U=Math.sin(S),H=this.computedCenter,Y=E*D,J=z*D,W=U,Z=-E*U,re=-z*U,V=D,B=this.computedEye,j=this.computedMatrix;for(b=0;b<3;++b){var ee=Y*y[b]+J*A[b]+W*i[b];j[4*b+1]=Z*y[b]+re*A[b]+V*i[b],j[4*b+2]=ee,j[4*b+3]=0}var N=j[1],$=j[5],K=j[9],te=j[2],ie=j[6],le=j[10],se=$*le-K*ie,ve=K*te-N*le,fe=N*ie-$*te,ye=u(se,ve,fe);for(se/=ye,ve/=ye,fe/=ye,j[0]=se,j[4]=ve,j[8]=fe,b=0;b<3;++b)B[b]=H[b]+j[2+4*b]*I;for(b=0;b<3;++b){T=0;for(var Ae=0;Ae<3;++Ae)T+=j[b+4*Ae]*B[Ae];j[12+b]=-T}j[15]=1},a.getMatrix=function(c,i){this.recalcMatrix(c);var y=this.computedMatrix;if(i){for(var f=0;f<16;++f)i[f]=y[f];return i}return y};var p=[0,0,0];a.rotate=function(c,i,y,f){if(this.angle.move(c,i,y),f){this.recalcMatrix(c);var w=this.computedMatrix;p[0]=w[2],p[1]=w[6],p[2]=w[10];for(var b=this.computedUp,_=this.computedRight,T=this.computedToward,L=0;L<3;++L)w[4*L]=b[L],w[4*L+1]=_[L],w[4*L+2]=T[L];for(r(w,w,f,p),L=0;L<3;++L)b[L]=w[4*L],_[L]=w[4*L+1];this.up.set(c,b[0],b[1],b[2]),this.right.set(c,_[0],_[1],_[2])}},a.pan=function(c,i,y,f){i=i||0,y=y||0,f=f||0,this.recalcMatrix(c);var w=this.computedMatrix,b=(Math.exp(this.computedRadius[0]),w[1]),_=w[5],T=w[9],L=u(b,_,T);b/=L,_/=L,T/=L;var A=w[0],I=w[4],P=w[8],S=A*b+I*_+P*T,E=u(A-=b*S,I-=_*S,P-=T*S),z=(A/=E)*i+b*y,D=(I/=E)*i+_*y,U=(P/=E)*i+T*y;this.center.move(c,z,D,U);var H=Math.exp(this.computedRadius[0]);H=Math.max(1e-4,H+f),this.radius.set(c,Math.log(H))},a.translate=function(c,i,y,f){this.center.move(c,i||0,y||0,f||0)},a.setMatrix=function(c,i,y,f){var w=1;typeof y=="number"&&(w=0|y),(w<0||w>3)&&(w=1);var b=(w+2)%3;i||(this.recalcMatrix(c),i=this.computedMatrix);var _=i[w],T=i[w+4],L=i[w+8];if(f){var A=Math.abs(_),I=Math.abs(T),P=Math.abs(L),S=Math.max(A,I,P);A===S?(_=_<0?-1:1,T=L=0):P===S?(L=L<0?-1:1,_=T=0):(T=T<0?-1:1,_=L=0)}else{var E=u(_,T,L);_/=E,T/=E,L/=E}var z,D,U=i[b],H=i[b+4],Y=i[b+8],J=U*_+H*T+Y*L,W=u(U-=_*J,H-=T*J,Y-=L*J),Z=T*(Y/=W)-L*(H/=W),re=L*(U/=W)-_*Y,V=_*H-T*U,B=u(Z,re,V);if(Z/=B,re/=B,V/=B,this.center.jump(c,oe,de,Te),this.radius.idle(c),this.up.jump(c,_,T,L),this.right.jump(c,U,H,Y),w===2){var j=i[1],ee=i[5],N=i[9],$=j*U+ee*H+N*Y,K=j*Z+ee*re+N*V;z=se<0?-Math.PI/2:Math.PI/2,D=Math.atan2(K,$)}else{var te=i[2],ie=i[6],le=i[10],se=te*_+ie*T+le*L,ve=te*U+ie*H+le*Y,fe=te*Z+ie*re+le*V;z=Math.asin(o(se)),D=Math.atan2(fe,ve)}this.angle.jump(c,D,z),this.recalcMatrix(c);var ye=i[2],Ae=i[6],pe=i[10],ge=this.computedMatrix;t(ge,i);var we=ge[15],oe=ge[12]/we,de=ge[13]/we,Te=ge[14]/we,Ee=Math.exp(this.computedRadius[0]);this.center.jump(c,oe-ye*Ee,de-Ae*Ee,Te-pe*Ee)},a.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},a.idle=function(c){this.center.idle(c),this.up.idle(c),this.right.idle(c),this.radius.idle(c),this.angle.idle(c)},a.flush=function(c){this.center.flush(c),this.up.flush(c),this.right.flush(c),this.radius.flush(c),this.angle.flush(c)},a.setDistance=function(c,i){i>0&&this.radius.set(c,Math.log(i))},a.lookAt=function(c,i,y,f){this.recalcMatrix(c),i=i||this.computedEye,y=y||this.computedCenter;var w=(f=f||this.computedUp)[0],b=f[1],_=f[2],T=u(w,b,_);if(!(T<1e-6)){w/=T,b/=T,_/=T;var L=i[0]-y[0],A=i[1]-y[1],I=i[2]-y[2],P=u(L,A,I);if(!(P<1e-6)){L/=P,A/=P,I/=P;var S=this.computedRight,E=S[0],z=S[1],D=S[2],U=w*E+b*z+_*D,H=u(E-=U*w,z-=U*b,D-=U*_);if(!(H<.01&&(H=u(E=b*I-_*A,z=_*L-w*I,D=w*A-b*L))<1e-6)){E/=H,z/=H,D/=H,this.up.set(c,w,b,_),this.right.set(c,E,z,D),this.center.set(c,y[0],y[1],y[2]),this.radius.set(c,Math.log(P));var Y=b*D-_*z,J=_*E-w*D,W=w*z-b*E,Z=u(Y,J,W),re=w*L+b*A+_*I,V=E*L+z*A+D*I,B=(Y/=Z)*L+(J/=Z)*A+(W/=Z)*I,j=Math.asin(o(re)),ee=Math.atan2(B,V),N=this.angle._state,$=N[N.length-1],K=N[N.length-2];$%=2*Math.PI;var te=Math.abs($+2*Math.PI-ee),ie=Math.abs($-ee),le=Math.abs($-2*Math.PI-ee);te<ie&&($+=2*Math.PI),le<ie&&($-=2*Math.PI),this.angle.jump(this.angle.lastT(),$,K),this.angle.set(c,ee,j)}}}}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(v,k,x){k.exports=function(t,r,l){var n=t*r,d=e*t,u=d-(d-t),o=t-u,h=e*r,s=h-(h-r),a=r-s,p=o*a-(n-u*s-o*s-u*a);return l?(l[0]=p,l[1]=n,l):[p,n]};var e=+(Math.pow(2,27)+1)},{}],307:[function(v,k,x){k.exports=function(e,t,r){var l=e+t,n=l-e,d=t-n,u=e-(l-n);return r?(r[0]=u+d,r[1]=l,r):[u+d,l]}},{}],308:[function(v,k,x){(function(e){(function(){var t=v("bit-twiddle"),r=v("dup"),l=v("buffer").Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:r([32,0]),UINT16:r([32,0]),UINT32:r([32,0]),BIGUINT64:r([32,0]),INT8:r([32,0]),INT16:r([32,0]),INT32:r([32,0]),BIGINT64:r([32,0]),FLOAT:r([32,0]),DOUBLE:r([32,0]),DATA:r([32,0]),UINT8C:r([32,0]),BUFFER:r([32,0])});var n=typeof Uint8ClampedArray<"u",d=typeof BigUint64Array<"u",u=typeof BigInt64Array<"u",o=e.__TYPEDARRAY_POOL;o.UINT8C||(o.UINT8C=r([32,0])),o.BIGUINT64||(o.BIGUINT64=r([32,0])),o.BIGINT64||(o.BIGINT64=r([32,0])),o.BUFFER||(o.BUFFER=r([32,0]));var h=o.DATA,s=o.BUFFER;function a(E){if(E){var z=E.length||E.byteLength,D=t.log2(z);h[D].push(E)}}function p(E){E=t.nextPow2(E);var z=t.log2(E),D=h[z];return D.length>0?D.pop():new ArrayBuffer(E)}function c(E){return new Uint8Array(p(E),0,E)}function i(E){return new Uint16Array(p(2*E),0,E)}function y(E){return new Uint32Array(p(4*E),0,E)}function f(E){return new Int8Array(p(E),0,E)}function w(E){return new Int16Array(p(2*E),0,E)}function b(E){return new Int32Array(p(4*E),0,E)}function _(E){return new Float32Array(p(4*E),0,E)}function T(E){return new Float64Array(p(8*E),0,E)}function L(E){return n?new Uint8ClampedArray(p(E),0,E):c(E)}function A(E){return d?new BigUint64Array(p(8*E),0,E):null}function I(E){return u?new BigInt64Array(p(8*E),0,E):null}function P(E){return new DataView(p(E),0,E)}function S(E){E=t.nextPow2(E);var z=t.log2(E),D=s[z];return D.length>0?D.pop():new l(E)}x.free=function(E){if(l.isBuffer(E))s[t.log2(E.length)].push(E);else{if(Object.prototype.toString.call(E)!=="[object ArrayBuffer]"&&(E=E.buffer),!E)return;var z=E.length||E.byteLength,D=0|t.log2(z);h[D].push(E)}},x.freeUint8=x.freeUint16=x.freeUint32=x.freeBigUint64=x.freeInt8=x.freeInt16=x.freeInt32=x.freeBigInt64=x.freeFloat32=x.freeFloat=x.freeFloat64=x.freeDouble=x.freeUint8Clamped=x.freeDataView=function(E){a(E.buffer)},x.freeArrayBuffer=a,x.freeBuffer=function(E){s[t.log2(E.length)].push(E)},x.malloc=function(E,z){if(z===void 0||z==="arraybuffer")return p(E);switch(z){case"uint8":return c(E);case"uint16":return i(E);case"uint32":return y(E);case"int8":return f(E);case"int16":return w(E);case"int32":return b(E);case"float":case"float32":return _(E);case"double":case"float64":return T(E);case"uint8_clamped":return L(E);case"bigint64":return I(E);case"biguint64":return A(E);case"buffer":return S(E);case"data":case"dataview":return P(E);default:return null}return null},x.mallocArrayBuffer=p,x.mallocUint8=c,x.mallocUint16=i,x.mallocUint32=y,x.mallocInt8=f,x.mallocInt16=w,x.mallocInt32=b,x.mallocFloat32=x.mallocFloat=_,x.mallocFloat64=x.mallocDouble=T,x.mallocUint8Clamped=L,x.mallocBigUint64=A,x.mallocBigInt64=I,x.mallocDataView=P,x.mallocBuffer=S,x.clearCache=function(){for(var E=0;E<32;++E)o.UINT8[E].length=0,o.UINT16[E].length=0,o.UINT32[E].length=0,o.INT8[E].length=0,o.INT16[E].length=0,o.INT32[E].length=0,o.FLOAT[E].length=0,o.DOUBLE[E].length=0,o.BIGUINT64[E].length=0,o.BIGINT64[E].length=0,o.UINT8C[E].length=0,h[E].length=0,s[E].length=0}}).call(this)}).call(this,m!==void 0?m:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(v,k,x){function e(r){this.roots=new Array(r),this.ranks=new Array(r);for(var l=0;l<r;++l)this.roots[l]=l,this.ranks[l]=0}k.exports=e;var t=e.prototype;Object.defineProperty(t,"length",{get:function(){return this.roots.length}}),t.makeSet=function(){var r=this.roots.length;return this.roots.push(r),this.ranks.push(0),r},t.find=function(r){for(var l=r,n=this.roots;n[r]!==r;)r=n[r];for(;n[l]!==r;){var d=n[l];n[l]=r,l=d}return r},t.link=function(r,l){var n=this.find(r),d=this.find(l);if(n!==d){var u=this.ranks,o=this.roots,h=u[n],s=u[d];h<s?o[n]=d:s<h?o[d]=n:(o[d]=n,++u[n])}}},{}],310:[function(v,k,x){k.exports=function(e,t,r){return e.length===0?e:t?(r||e.sort(t),function(l,n){for(var d=1,u=l.length,o=l[0],h=l[0],s=1;s<u;++s)if(h=o,n(o=l[s],h)){if(s===d){d++;continue}l[d++]=o}return l.length=d,l}(e,t)):(r||e.sort(),function(l){for(var n=1,d=l.length,u=l[0],o=l[0],h=1;h<d;++h,o=u)if(o=u,(u=l[h])!==o){if(h===n){n++;continue}l[n++]=u}return l.length=n,l}(e))}},{}],311:[function(v,k,x){k.exports=function(l,n){return typeof n=="object"&&n!==null||(n={}),e(l,n.canvas||t,n.context||r,n)};var e=v("./lib/vtext"),t=null,r=null;typeof document<"u"&&((t=document.createElement("canvas")).width=8192,t.height=1024,r=t.getContext("2d"))},{"./lib/vtext":312}],312:[function(v,k,x){k.exports=function(a,p,c,i){var y=64,f=1.25,w={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return i&&(i.size&&i.size>0&&(y=i.size),i.lineSpacing&&i.lineSpacing>0&&(f=i.lineSpacing),i.styletags&&i.styletags.breaklines&&(w.breaklines=!!i.styletags.breaklines),i.styletags&&i.styletags.bolds&&(w.bolds=!!i.styletags.bolds),i.styletags&&i.styletags.italics&&(w.italics=!!i.styletags.italics),i.styletags&&i.styletags.subscripts&&(w.subscripts=!!i.styletags.subscripts),i.styletags&&i.styletags.superscripts&&(w.superscripts=!!i.styletags.superscripts)),c.font=[i.fontStyle,i.fontVariant,i.fontWeight,y+"px",i.font].filter(function(b){return b}).join(" "),c.textAlign="start",c.textBaseline="alphabetic",c.direction="ltr",s(function(b,_,T,L,A,I){T=T.replace(/\n/g,""),T=I.breaklines===!0?T.replace(/\<br\>/g,`
`):T.replace(/\<br\>/g," ");var P="",S=[];for(U=0;U<T.length;++U)S[U]=P;I.bolds===!0&&(S=u("b","b|",T,S)),I.italics===!0&&(S=u("i","i|",T,S)),I.superscripts===!0&&(S=u("sup","+1",T,S)),I.subscripts===!0&&(S=u("sub","-1",T,S));var E=[],z="";for(U=0;U<T.length;++U)S[U]!==null&&(z+=T[U],E.push(S[U]));var D,U,H,Y,J,W=z.split(`
`),Z=W.length,re=Math.round(A*L),V=L,B=2*L,j=0,ee=Z*re+B;b.height<ee&&(b.height=ee),_.fillStyle="#000",_.fillRect(0,0,b.width,b.height),_.fillStyle="#fff";var N=0,$="";function K(){if($!==""){var Ae=_.measureText($).width;_.fillText($,V+H,B+Y),H+=Ae}}function te(){return Math.round(J)+"px "}function ie(Ae,pe){var ge=""+_.font;if(I.subscripts===!0){var we=Ae.indexOf("-"),oe=pe.indexOf("-"),de=we>-1?parseInt(Ae[1+we]):0,Te=oe>-1?parseInt(pe[1+oe]):0;de!==Te&&(ge=ge.replace(te(),"?px "),J*=Math.pow(.75,Te-de),ge=ge.replace("?px ",te())),Y+=.25*re*(Te-de)}if(I.superscripts===!0){var Ee=Ae.indexOf("+"),Me=pe.indexOf("+"),De=Ee>-1?parseInt(Ae[1+Ee]):0,Ie=Me>-1?parseInt(pe[1+Me]):0;De!==Ie&&(ge=ge.replace(te(),"?px "),J*=Math.pow(.75,Ie-De),ge=ge.replace("?px ",te())),Y-=.25*re*(Ie-De)}if(I.bolds===!0){var Oe=Ae.indexOf("b|")>-1,Ze=pe.indexOf("b|")>-1;!Oe&&Ze&&(ge=Fe?ge.replace("italic ","italic bold "):"bold "+ge),Oe&&!Ze&&(ge=ge.replace("bold ",""))}if(I.italics===!0){var Fe=Ae.indexOf("i|")>-1,Pe=pe.indexOf("i|")>-1;!Fe&&Pe&&(ge="italic "+ge),Fe&&!Pe&&(ge=ge.replace("italic ",""))}_.font=ge}for(D=0;D<Z;++D){var le=W[D]+`
`;for(H=0,Y=D*re,J=L,$="",U=0;U<le.length;++U){var se=U+N<E.length?E[U+N]:E[E.length-1];P===se?$+=le[U]:(K(),$=le[U],se!==void 0&&(ie(P,se),P=se))}K(),N+=le.length;var ve=0|Math.round(H+2*V);j<ve&&(j=ve)}var fe=j,ye=B+re*Z;return t(_.getImageData(0,0,fe,ye).data,[ye,fe,4]).pick(-1,-1,0).transpose(1,0)}(p,c,a,y,f,w),i,y)},k.exports.processPixels=s;var e=v("surface-nets"),t=v("ndarray"),r=v("simplify-planar-graph"),l=v("clean-pslg"),n=v("cdt2d"),d=v("planar-graph-to-polyline");function u(a,p,c,i){for(var y="<"+a+">",f="</"+a+">",w=y.length,b=f.length,_=p[0]==="+"||p[0]==="-",T=0,L=-b;T>-1&&(T=c.indexOf(y,T))!==-1&&(L=c.indexOf(f,T+w))!==-1&&!(L<=T);){for(var A=T;A<L+b;++A)if(A<T+w||A>=L)i[A]=null,c=c.substr(0,A)+" "+c.substr(A+1);else if(i[A]!==null){var I=i[A].indexOf(p[0]);I===-1?i[A]+=p:_&&(i[A]=i[A].substr(0,I+1)+(1+parseInt(i[A][I+1]))+i[A].substr(I+2))}var P=T+w,S=c.substr(P,L-P).indexOf(y);T=S!==-1?S:L+b}return i}function o(a,p){var c=e(a,128);return p?r(c.cells,c.positions,.25):{edges:c.cells,positions:c.positions}}function h(a,p,c,i){var y=o(a,i),f=function(D,U,H){for(var Y=U.textAlign||"start",J=U.textBaseline||"alphabetic",W=[1<<30,1<<30],Z=[0,0],re=D.length,V=0;V<re;++V)for(var B=D[V],j=0;j<2;++j)W[j]=0|Math.min(W[j],B[j]),Z[j]=0|Math.max(Z[j],B[j]);var ee=0;switch(Y){case"center":ee=-.5*(W[0]+Z[0]);break;case"right":case"end":ee=-Z[0];break;case"left":case"start":ee=-W[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+Y+"'")}var N=0;switch(J){case"hanging":case"top":N=-W[1];break;case"middle":N=-.5*(W[1]+Z[1]);break;case"alphabetic":case"ideographic":N=-3*H;break;case"bottom":N=-Z[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+J+"'")}var $=1/H;return"lineHeight"in U?$*=+U.lineHeight:"width"in U?$=U.width/(Z[0]-W[0]):"height"in U&&($=U.height/(Z[1]-W[1])),D.map(function(K){return[$*(K[0]+ee),$*(K[1]+N)]})}(y.positions,p,c),w=y.edges,b=p.orientation==="ccw";if(l(f,w),p.polygons||p.polygon||p.polyline){for(var _=d(w,f),T=new Array(_.length),L=0;L<_.length;++L){for(var A=_[L],I=new Array(A.length),P=0;P<A.length;++P){for(var S=A[P],E=new Array(S.length),z=0;z<S.length;++z)E[z]=f[S[z]].slice();b&&E.reverse(),I[P]=E}T[L]=I}return T}return p.triangles||p.triangulate||p.triangle?{cells:n(f,w,{delaunay:!1,exterior:!1,interior:!0}),positions:f}:{edges:w,positions:f}}function s(a,p,c){try{return h(a,p,c,!0)}catch{}try{return h(a,p,c,!1)}catch{}return p.polygons||p.polyline||p.polygon?[]:p.triangles||p.triangulate||p.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(v,k,x){(function(){if(typeof ses>"u"||!ses.ok||ses.ok()){typeof ses<"u"&&(ses.weakMapPermitHostObjects=y);var e=!1;if(typeof WeakMap=="function"){var t=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var r=new t,l=Object.freeze({});if(r.set(l,1),r.get(l)===1)return void(k.exports=WeakMap);e=!0}}var n=Object.getOwnPropertyNames,d=Object.defineProperty,u=Object.isExtensible,o="weakmap:ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var h=new ArrayBuffer(25),s=new Uint8Array(h);crypto.getRandomValues(s),o="weakmap:rand:"+Array.prototype.map.call(s,function(T){return(T%36).toString(36)}).join("")+"___"}if(d(Object,"getOwnPropertyNames",{value:function(T){return n(T).filter(f)}}),"getPropertyNames"in Object){var a=Object.getPropertyNames;d(Object,"getPropertyNames",{value:function(T){return a(T).filter(f)}})}(function(){var T=Object.freeze;d(Object,"freeze",{value:function(I){return w(I),T(I)}});var L=Object.seal;d(Object,"seal",{value:function(I){return w(I),L(I)}});var A=Object.preventExtensions;d(Object,"preventExtensions",{value:function(I){return w(I),A(I)}})})();var p=!1,c=0,i=function(){this instanceof i||_();var T=[],L=[],A=c++;return Object.create(i.prototype,{get___:{value:b(function(I,P){var S,E=w(I);return E?A in E?E[A]:P:(S=T.indexOf(I))>=0?L[S]:P})},has___:{value:b(function(I){var P=w(I);return P?A in P:T.indexOf(I)>=0})},set___:{value:b(function(I,P){var S,E=w(I);return E?E[A]=P:(S=T.indexOf(I))>=0?L[S]=P:(S=T.length,L[S]=P,T[S]=I),this})},delete___:{value:b(function(I){var P,S,E=w(I);return E?A in E&&delete E[A]:!((P=T.indexOf(I))<0)&&(S=T.length-1,T[P]=void 0,L[P]=L[S],T[P]=T[S],T.length=S,L.length=S,!0)})}})};i.prototype=Object.create(Object.prototype,{get:{value:function(T,L){return this.get___(T,L)},writable:!0,configurable:!0},has:{value:function(T){return this.has___(T)},writable:!0,configurable:!0},set:{value:function(T,L){return this.set___(T,L)},writable:!0,configurable:!0},delete:{value:function(T){return this.delete___(T)},writable:!0,configurable:!0}}),typeof t=="function"?function(){function T(){this instanceof i||_();var L,A=new t,I=void 0,P=!1;return L=e?function(S,E){return A.set(S,E),A.has(S)||(I||(I=new i),I.set(S,E)),this}:function(S,E){if(P)try{A.set(S,E)}catch{I||(I=new i),I.set___(S,E)}else A.set(S,E);return this},Object.create(i.prototype,{get___:{value:b(function(S,E){return I?A.has(S)?A.get(S):I.get___(S,E):A.get(S,E)})},has___:{value:b(function(S){return A.has(S)||!!I&&I.has___(S)})},set___:{value:b(L)},delete___:{value:b(function(S){var E=!!A.delete(S);return I&&I.delete___(S)||E})},permitHostObjects___:{value:b(function(S){if(S!==y)throw new Error("bogus call to permitHostObjects___");P=!0})}})}e&&typeof Proxy<"u"&&(Proxy=void 0),T.prototype=i.prototype,k.exports=T,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),k.exports=i)}function y(T){T.permitHostObjects___&&T.permitHostObjects___(y)}function f(T){return!(T.substr(0,8)=="weakmap:"&&T.substr(T.length-3)==="___")}function w(T){if(T!==Object(T))throw new TypeError("Not an object: "+T);var L=T[o];if(L&&L.key===T)return L;if(u(T)){L={key:T};try{return d(T,o,{value:L,writable:!1,enumerable:!1,configurable:!1}),L}catch{return}}}function b(T){return T.prototype=null,Object.freeze(T)}function _(){p||typeof console>"u"||(p=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}})()},{}],314:[function(v,k,x){var e=v("./hidden-store.js");k.exports=function(){var t={};return function(r){if((typeof r!="object"||r===null)&&typeof r!="function")throw new Error("Weakmap-shim: Key must be object");var l=r.valueOf(t);return l&&l.identity===t?l:e(r,t)}}},{"./hidden-store.js":315}],315:[function(v,k,x){k.exports=function(e,t){var r={identity:t},l=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(n){return n!==t?l.apply(this,arguments):r},writable:!0}),r}},{}],316:[function(v,k,x){var e=v("./create-store.js");k.exports=function(){var t=e();return{get:function(r,l){var n=t(r);return n.hasOwnProperty("value")?n.value:l},set:function(r,l){return t(r).value=l,this},has:function(r){return"value"in t(r)},delete:function(r){return delete t(r).value}}}},{"./create-store.js":314}],317:[function(v,k,x){var e,t=function(){return function(r,l,n,d,u,o){var h=r[0],s=n[0],a=[0],p=s;d|=0;var c=0,i=s;for(c=0;c<h;++c){var y=l[d]-o,f=l[d+p]-o;y>=0!=f>=0&&u.push(a[0]+.5+.5*(y+f)/(y-f)),d+=i,++a[0]}}};k.exports=(e={funcName:"zeroCrossings"},function(r){var l={};return function(n,d,u){var o=n.dtype,h=n.order,s=[o,h.join()].join(),a=l[s];return a||(l[s]=a=r([o,h])),a(n.shape.slice(0),n.data,n.stride,0|n.offset,d,u)}}(t.bind(void 0,e)))},{}],318:[function(v,k,x){k.exports=function(t,r){var l=[];return r=+r||0,e(t.hi(t.shape[0]-1),l,r),l};var e=v("./lib/zc-core")},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,typeof qi<"u"?qi:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[27])(27)})})(pf);let _u;const A0=new Uint8Array(16);function S0(){if(!_u&&(_u=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!_u))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _u(A0)}const Ko=[];for(let jr=0;jr<256;++jr)Ko.push((jr+256).toString(16).slice(1));function E0(jr,Vn=0){return(Ko[jr[Vn+0]]+Ko[jr[Vn+1]]+Ko[jr[Vn+2]]+Ko[jr[Vn+3]]+"-"+Ko[jr[Vn+4]]+Ko[jr[Vn+5]]+"-"+Ko[jr[Vn+6]]+Ko[jr[Vn+7]]+"-"+Ko[jr[Vn+8]]+Ko[jr[Vn+9]]+"-"+Ko[jr[Vn+10]]+Ko[jr[Vn+11]]+Ko[jr[Vn+12]]+Ko[jr[Vn+13]]+Ko[jr[Vn+14]]+Ko[jr[Vn+15]]).toLowerCase()}const L0=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Wh={randomUUID:L0};function C0(jr,Vn,g){if(Wh.randomUUID&&!Vn&&!jr)return Wh.randomUUID();jr=jr||{};const Q=jr.random||(jr.rng||S0)();if(Q[6]=Q[6]&15|64,Q[8]=Q[8]&63|128,Vn){g=g||0;for(let X=0;X<16;++X)Vn[g+X]=Q[X];return Vn}return E0(Q)}const P0=["id"],I0=tl({__name:"PlotlyElement",props:{plotId:{type:String,default:C0}},setup(jr){const Vn=jr,g=mf(),Q={title:"PrintNanny Observations",margin:{l:50,r:50,b:50,t:50,pad:2},font:{size:12},yaxis:{range:[.4,1],type:"linear"}},X={responsive:!0,autosize:!0};return wu(()=>{const m={x:g.meter_x,y:g.meter_y_nozzle_mean,error_y:{type:"data",array:g.meter_y_nozzle_std,visible:!0,opacity:.3},mode:"lines+markers",name:"Ok: Nozzle"},v={x:g.meter_x,y:g.meter_y_print_mean,error_y:{type:"data",array:g.meter_y_print_std,visible:!0,opacity:.3},mode:"lines+markers",name:"Ok: Print"},k={x:g.meter_x,y:g.meter_y_raft_mean,error_y:{type:"data",array:g.meter_y_raft_std,visible:!0,opacity:.3},mode:"lines+markers",name:"Ok: Raft"},x={x:g.meter_x,y:g.meter_y_adhesion_mean,error_y:{type:"data",array:g.meter_y_adhesion_std,visible:!0,opacity:.3},mode:"lines+markers",name:"Defect: Warping"},e={x:g.meter_x,y:g.meter_y_spaghetti_mean,error_y:{type:"data",array:g.meter_y_spaghetti_std,visible:!0,opacity:.3},mode:"lines+markers",name:"Defect: Spaghetti/Adhesion"},t=[m,v,k,x,e];Vn.plotId!==void 0&&pf.exports.react(Vn.plotId,t,Q,X)}),g.$subscribe(()=>{const m={x:g.meter_x,y:g.meter_y_nozzle_mean,error_y:{type:"data",array:g.meter_y_nozzle_std,visible:!0,opacity:.3},mode:"lines+markers",name:"Ok: Nozzle"},v={x:g.meter_x,y:g.meter_y_print_mean,error_y:{type:"data",array:g.meter_y_print_std,visible:!0,opacity:.3},mode:"lines+markers",name:"Ok: Print"},k={x:g.meter_x,y:g.meter_y_raft_mean,error_y:{type:"data",array:g.meter_y_raft_std,visible:!0,opacity:.3},mode:"lines+markers",name:"Ok: Raft"},x={x:g.meter_x,y:g.meter_y_adhesion_mean,error_y:{type:"data",array:g.meter_y_adhesion_std,visible:!0,opacity:.3},mode:"lines+markers",name:"Defect: Layer Warping"},e={x:g.meter_x,y:g.meter_y_spaghetti_mean,error_y:{type:"data",array:g.meter_y_spaghetti_std,visible:!0,opacity:.3},mode:"lines+markers",name:"Defect: Spaghetti/Adhesion"},t=[m,v,k,x,e];pf.exports.react(Vn.plotId,t,Q,X)}),(m,v)=>(Vo(),ks("div",{id:jr.plotId,class:"m-auto"},null,8,P0))}}),O0={class:"overflow-hidden rounded-lg bg-white px-4 py-5 shadow sm:p-6 col-span-2"},D0=uo("h3",{class:"text-lg font-medium leading-6 text-gray-900"}," Alerts & Warnings ",-1),z0={class:"mt-5 grid grid-cols-1 gap-5"},R0={key:0,class:"absolute rounded-md bg-indigo-500 p-3"},F0={key:1,class:"absolute rounded-md bg-red-500 p-3"},B0={class:"ml-16 truncate text-sm font-semibold text-center mb-2"},N0={class:"ml-16 flex items-baseline text-center"},j0={class:"ml-2 flex items-baseline text-sm text-gray-500"},U0=tl({__name:"DetectionSummary",setup(jr){const Vn=mf();return(g,Q)=>(Vo(),ks("div",O0,[uo("div",null,[D0,uo("dl",z0,[(Vo(!0),ks(df,null,Jh(Ji(Vn).detectionAlerts,X=>(Vo(),ks("div",{key:X.id,class:"relative overflow-hidden rounded-lg bg-gray-100 p-4 shadow"},[uo("dt",null,[X.color=="indigo"?(Vo(),ks("div",R0,[(Vo(),Dc(Gh(X.icon),{class:"h-6 w-6 text-white","aria-hidden":"true"}))])):Tu("",!0),X.color=="red"?(Vo(),ks("div",F0,[(Vo(),Dc(Gh(X.icon),{class:"h-6 w-6 text-white","aria-hidden":"true"}))])):Tu("",!0),uo("p",B0,ku(X.header),1)]),uo("dd",N0,[uo("p",j0,ku(X.description),1)])]))),128)),Ji(Vn).detectionAlerts.length===0?(Vo(),Dc(Kh,{key:0,text:"Calculating"})):Tu("",!0)])])]))}}),V0={class:"py-5"},H0=uo("div",{class:"mx-auto max-w-7xl sm:px-6 lg:px-8 justify-center w-full grid grid-cols-4 gap-4 content-center pb-5"},null,-1),q0={class:"mx-auto max-w-7xl sm:px-6 lg:px-8 border-4 border-dashed border-gray-200"},G0={class:"px-4 py-8 sm:px-0 grid grid-cols-3 gap-2 flex"},Y0={class:"col-span-3 mt-4"},Z0=tl({__name:"VideoView",setup(jr){return(Vn,g)=>(Vo(),ks("main",V0,[H0,uo("div",q0,[uo("div",G0,[el(M0,{class:"col-span-2 flex-1"}),el(U0,{class:"col-span-1"}),uo("div",Y0,[el(I0)])])])]))}});export{Z0 as default};
