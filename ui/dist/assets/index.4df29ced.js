var ku=Object.defineProperty;var Cu=(t,e,n)=>e in t?ku(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var y=(t,e,n)=>(Cu(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Zi(t,e){const n=Object.create(null),s=t.split(",");for(let r=0;r<s.length;r++)n[s[r]]=!0;return e?r=>!!n[r.toLowerCase()]:r=>!!n[r]}const Pu="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ou=Zi(Pu);function bc(t){return!!t||t===""}function eo(t){if(re(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=Ke(s)?Nu(s):eo(s);if(r)for(const i in r)e[i]=r[i]}return e}else{if(Ke(t))return t;if(je(t))return t}}const $u=/;(?![^(]*\))/g,Tu=/:(.+)/;function Nu(t){const e={};return t.split($u).forEach(n=>{if(n){const s=n.split(Tu);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Mn(t){let e="";if(Ke(t))e=t;else if(re(t))for(let n=0;n<t.length;n++){const s=Mn(t[n]);s&&(e+=s+" ")}else if(je(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const ft=t=>Ke(t)?t:t==null?"":re(t)||je(t)&&(t.toString===vc||!pe(t.toString))?JSON.stringify(t,yc,2):String(t),yc=(t,e)=>e&&e.__v_isRef?yc(t,e.value):Xn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r])=>(n[`${s} =>`]=r,n),{})}:wc(e)?{[`Set(${e.size})`]:[...e.values()]}:je(e)&&!re(e)&&!Ec(e)?String(e):e,Ie={},Qn=[],Tt=()=>{},Ru=()=>!1,Iu=/^on[^a-z]/,Rr=t=>Iu.test(t),to=t=>t.startsWith("onUpdate:"),tt=Object.assign,no=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Lu=Object.prototype.hasOwnProperty,be=(t,e)=>Lu.call(t,e),re=Array.isArray,Xn=t=>Ir(t)==="[object Map]",wc=t=>Ir(t)==="[object Set]",pe=t=>typeof t=="function",Ke=t=>typeof t=="string",so=t=>typeof t=="symbol",je=t=>t!==null&&typeof t=="object",xc=t=>je(t)&&pe(t.then)&&pe(t.catch),vc=Object.prototype.toString,Ir=t=>vc.call(t),ju=t=>Ir(t).slice(8,-1),Ec=t=>Ir(t)==="[object Object]",ro=t=>Ke(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,dr=Zi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Lr=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Mu=/-(\w)/g,qt=Lr(t=>t.replace(Mu,(e,n)=>n?n.toUpperCase():"")),Uu=/\B([A-Z])/g,us=Lr(t=>t.replace(Uu,"-$1").toLowerCase()),jr=Lr(t=>t.charAt(0).toUpperCase()+t.slice(1)),ii=Lr(t=>t?`on${jr(t)}`:""),js=(t,e)=>!Object.is(t,e),oi=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},wr=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Sc=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Fo;const Du=()=>Fo||(Fo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let jt;class Ac{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&jt&&(this.parent=jt,this.index=(jt.scopes||(jt.scopes=[])).push(this)-1)}run(e){if(this.active){const n=jt;try{return jt=this,e()}finally{jt=n}}}on(){jt=this}off(){jt=this.parent}stop(e){if(this.active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.active=!1}}}function kc(t){return new Ac(t)}function Fu(t,e=jt){e&&e.active&&e.effects.push(t)}const io=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Cc=t=>(t.w&_n)>0,Pc=t=>(t.n&_n)>0,Bu=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=_n},qu=t=>{const{deps:e}=t;if(e.length){let n=0;for(let s=0;s<e.length;s++){const r=e[s];Cc(r)&&!Pc(r)?r.delete(t):e[n++]=r,r.w&=~_n,r.n&=~_n}e.length=n}},Ei=new WeakMap;let As=0,_n=1;const Si=30;let Pt;const In=Symbol(""),Ai=Symbol("");class oo{constructor(e,n=null,s){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Fu(this,s)}run(){if(!this.active)return this.fn();let e=Pt,n=fn;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Pt,Pt=this,fn=!0,_n=1<<++As,As<=Si?Bu(this):Bo(this),this.fn()}finally{As<=Si&&qu(this),_n=1<<--As,Pt=this.parent,fn=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Pt===this?this.deferStop=!0:this.active&&(Bo(this),this.onStop&&this.onStop(),this.active=!1)}}function Bo(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let fn=!0;const Oc=[];function fs(){Oc.push(fn),fn=!1}function hs(){const t=Oc.pop();fn=t===void 0?!0:t}function wt(t,e,n){if(fn&&Pt){let s=Ei.get(t);s||Ei.set(t,s=new Map);let r=s.get(n);r||s.set(n,r=io()),$c(r)}}function $c(t,e){let n=!1;As<=Si?Pc(t)||(t.n|=_n,n=!Cc(t)):n=!t.has(Pt),n&&(t.add(Pt),Pt.deps.push(t))}function Xt(t,e,n,s,r,i){const o=Ei.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&re(t))o.forEach((c,l)=>{(l==="length"||l>=s)&&a.push(c)});else switch(n!==void 0&&a.push(o.get(n)),e){case"add":re(t)?ro(n)&&a.push(o.get("length")):(a.push(o.get(In)),Xn(t)&&a.push(o.get(Ai)));break;case"delete":re(t)||(a.push(o.get(In)),Xn(t)&&a.push(o.get(Ai)));break;case"set":Xn(t)&&a.push(o.get(In));break}if(a.length===1)a[0]&&ki(a[0]);else{const c=[];for(const l of a)l&&c.push(...l);ki(io(c))}}function ki(t,e){const n=re(t)?t:[...t];for(const s of n)s.computed&&qo(s);for(const s of n)s.computed||qo(s)}function qo(t,e){(t!==Pt||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const Hu=Zi("__proto__,__v_isRef,__isVue"),Tc=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(so)),zu=ao(),Gu=ao(!1,!0),Wu=ao(!0),Ho=Ku();function Ku(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const s=de(this);for(let i=0,o=this.length;i<o;i++)wt(s,"get",i+"");const r=s[e](...n);return r===-1||r===!1?s[e](...n.map(de)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){fs();const s=de(this)[e].apply(this,n);return hs(),s}}),t}function ao(t=!1,e=!1){return function(s,r,i){if(r==="__v_isReactive")return!t;if(r==="__v_isReadonly")return t;if(r==="__v_isShallow")return e;if(r==="__v_raw"&&i===(t?e?uf:jc:e?Lc:Ic).get(s))return s;const o=re(s);if(!t&&o&&be(Ho,r))return Reflect.get(Ho,r,i);const a=Reflect.get(s,r,i);return(so(r)?Tc.has(r):Hu(r))||(t||wt(s,"get",r),e)?a:ze(a)?o&&ro(r)?a:a.value:je(a)?t?Mc(a):ds(a):a}}const Vu=Nc(),Yu=Nc(!0);function Nc(t=!1){return function(n,s,r,i){let o=n[s];if(ns(o)&&ze(o)&&!ze(r))return!1;if(!t&&(!xr(r)&&!ns(r)&&(o=de(o),r=de(r)),!re(n)&&ze(o)&&!ze(r)))return o.value=r,!0;const a=re(n)&&ro(s)?Number(s)<n.length:be(n,s),c=Reflect.set(n,s,r,i);return n===de(i)&&(a?js(r,o)&&Xt(n,"set",s,r):Xt(n,"add",s,r)),c}}function Ju(t,e){const n=be(t,e);t[e];const s=Reflect.deleteProperty(t,e);return s&&n&&Xt(t,"delete",e,void 0),s}function Qu(t,e){const n=Reflect.has(t,e);return(!so(e)||!Tc.has(e))&&wt(t,"has",e),n}function Xu(t){return wt(t,"iterate",re(t)?"length":In),Reflect.ownKeys(t)}const Rc={get:zu,set:Vu,deleteProperty:Ju,has:Qu,ownKeys:Xu},Zu={get:Wu,set(t,e){return!0},deleteProperty(t,e){return!0}},ef=tt({},Rc,{get:Gu,set:Yu}),co=t=>t,Mr=t=>Reflect.getPrototypeOf(t);function nr(t,e,n=!1,s=!1){t=t.__v_raw;const r=de(t),i=de(e);n||(e!==i&&wt(r,"get",e),wt(r,"get",i));const{has:o}=Mr(r),a=s?co:n?fo:Ms;if(o.call(r,e))return a(t.get(e));if(o.call(r,i))return a(t.get(i));t!==r&&t.get(e)}function sr(t,e=!1){const n=this.__v_raw,s=de(n),r=de(t);return e||(t!==r&&wt(s,"has",t),wt(s,"has",r)),t===r?n.has(t):n.has(t)||n.has(r)}function rr(t,e=!1){return t=t.__v_raw,!e&&wt(de(t),"iterate",In),Reflect.get(t,"size",t)}function zo(t){t=de(t);const e=de(this);return Mr(e).has.call(e,t)||(e.add(t),Xt(e,"add",t,t)),this}function Go(t,e){e=de(e);const n=de(this),{has:s,get:r}=Mr(n);let i=s.call(n,t);i||(t=de(t),i=s.call(n,t));const o=r.call(n,t);return n.set(t,e),i?js(e,o)&&Xt(n,"set",t,e):Xt(n,"add",t,e),this}function Wo(t){const e=de(this),{has:n,get:s}=Mr(e);let r=n.call(e,t);r||(t=de(t),r=n.call(e,t)),s&&s.call(e,t);const i=e.delete(t);return r&&Xt(e,"delete",t,void 0),i}function Ko(){const t=de(this),e=t.size!==0,n=t.clear();return e&&Xt(t,"clear",void 0,void 0),n}function ir(t,e){return function(s,r){const i=this,o=i.__v_raw,a=de(o),c=e?co:t?fo:Ms;return!t&&wt(a,"iterate",In),o.forEach((l,u)=>s.call(r,c(l),c(u),i))}}function or(t,e,n){return function(...s){const r=this.__v_raw,i=de(r),o=Xn(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,l=r[t](...s),u=n?co:e?fo:Ms;return!e&&wt(i,"iterate",c?Ai:In),{next(){const{value:d,done:m}=l.next();return m?{value:d,done:m}:{value:a?[u(d[0]),u(d[1])]:u(d),done:m}},[Symbol.iterator](){return this}}}}function nn(t){return function(...e){return t==="delete"?!1:this}}function tf(){const t={get(i){return nr(this,i)},get size(){return rr(this)},has:sr,add:zo,set:Go,delete:Wo,clear:Ko,forEach:ir(!1,!1)},e={get(i){return nr(this,i,!1,!0)},get size(){return rr(this)},has:sr,add:zo,set:Go,delete:Wo,clear:Ko,forEach:ir(!1,!0)},n={get(i){return nr(this,i,!0)},get size(){return rr(this,!0)},has(i){return sr.call(this,i,!0)},add:nn("add"),set:nn("set"),delete:nn("delete"),clear:nn("clear"),forEach:ir(!0,!1)},s={get(i){return nr(this,i,!0,!0)},get size(){return rr(this,!0)},has(i){return sr.call(this,i,!0)},add:nn("add"),set:nn("set"),delete:nn("delete"),clear:nn("clear"),forEach:ir(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=or(i,!1,!1),n[i]=or(i,!0,!1),e[i]=or(i,!1,!0),s[i]=or(i,!0,!0)}),[t,n,e,s]}const[nf,sf,rf,of]=tf();function lo(t,e){const n=e?t?of:rf:t?sf:nf;return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(be(n,r)&&r in s?n:s,r,i)}const af={get:lo(!1,!1)},cf={get:lo(!1,!0)},lf={get:lo(!0,!1)},Ic=new WeakMap,Lc=new WeakMap,jc=new WeakMap,uf=new WeakMap;function ff(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function hf(t){return t.__v_skip||!Object.isExtensible(t)?0:ff(ju(t))}function ds(t){return ns(t)?t:uo(t,!1,Rc,af,Ic)}function df(t){return uo(t,!1,ef,cf,Lc)}function Mc(t){return uo(t,!0,Zu,lf,jc)}function uo(t,e,n,s,r){if(!je(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=r.get(t);if(i)return i;const o=hf(t);if(o===0)return t;const a=new Proxy(t,o===2?s:n);return r.set(t,a),a}function hn(t){return ns(t)?hn(t.__v_raw):!!(t&&t.__v_isReactive)}function ns(t){return!!(t&&t.__v_isReadonly)}function xr(t){return!!(t&&t.__v_isShallow)}function Uc(t){return hn(t)||ns(t)}function de(t){const e=t&&t.__v_raw;return e?de(e):t}function ss(t){return wr(t,"__v_skip",!0),t}const Ms=t=>je(t)?ds(t):t,fo=t=>je(t)?Mc(t):t;function Dc(t){fn&&Pt&&(t=de(t),$c(t.dep||(t.dep=io())))}function Fc(t,e){t=de(t),t.dep&&ki(t.dep)}function ze(t){return!!(t&&t.__v_isRef===!0)}function Jt(t){return Bc(t,!1)}function pf(t){return Bc(t,!0)}function Bc(t,e){return ze(t)?t:new mf(t,e)}class mf{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:de(e),this._value=n?e:Ms(e)}get value(){return Dc(this),this._value}set value(e){const n=this.__v_isShallow||xr(e)||ns(e);e=n?e:de(e),js(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Ms(e),Fc(this))}}function ve(t){return ze(t)?t.value:t}const gf={get:(t,e,n)=>ve(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return ze(r)&&!ze(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function qc(t){return hn(t)?t:new Proxy(t,gf)}function _f(t){const e=re(t)?new Array(t.length):{};for(const n in t)e[n]=yf(t,n);return e}class bf{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}}function yf(t,e,n){const s=t[e];return ze(s)?s:new bf(t,e,n)}var Hc;class wf{constructor(e,n,s,r){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[Hc]=!1,this._dirty=!0,this.effect=new oo(e,()=>{this._dirty||(this._dirty=!0,Fc(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=s}get value(){const e=de(this);return Dc(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}Hc="__v_isReadonly";function xf(t,e,n=!1){let s,r;const i=pe(t);return i?(s=t,r=Tt):(s=t.get,r=t.set),new wf(s,r,i||!r,n)}function dn(t,e,n,s){let r;try{r=s?t(...s):t()}catch(i){Ur(i,e,n)}return r}function St(t,e,n,s){if(pe(t)){const i=dn(t,e,n,s);return i&&xc(i)&&i.catch(o=>{Ur(o,e,n)}),i}const r=[];for(let i=0;i<t.length;i++)r.push(St(t[i],e,n,s));return r}function Ur(t,e,n,s=!0){const r=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=n;for(;i;){const l=i.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](t,o,a)===!1)return}i=i.parent}const c=e.appContext.config.errorHandler;if(c){dn(c,null,10,[t,o,a]);return}}vf(t,n,r,s)}function vf(t,e,n,s=!0){console.error(t)}let Us=!1,Ci=!1;const nt=[];let Dt=0;const Zn=[];let Wt=null,Pn=0;const zc=Promise.resolve();let ho=null;function po(t){const e=ho||zc;return t?e.then(this?t.bind(this):t):e}function Ef(t){let e=Dt+1,n=nt.length;for(;e<n;){const s=e+n>>>1;Ds(nt[s])<t?e=s+1:n=s}return e}function mo(t){(!nt.length||!nt.includes(t,Us&&t.allowRecurse?Dt+1:Dt))&&(t.id==null?nt.push(t):nt.splice(Ef(t.id),0,t),Gc())}function Gc(){!Us&&!Ci&&(Ci=!0,ho=zc.then(Kc))}function Sf(t){const e=nt.indexOf(t);e>Dt&&nt.splice(e,1)}function Af(t){re(t)?Zn.push(...t):(!Wt||!Wt.includes(t,t.allowRecurse?Pn+1:Pn))&&Zn.push(t),Gc()}function Vo(t,e=Us?Dt+1:0){for(;e<nt.length;e++){const n=nt[e];n&&n.pre&&(nt.splice(e,1),e--,n())}}function Wc(t){if(Zn.length){const e=[...new Set(Zn)];if(Zn.length=0,Wt){Wt.push(...e);return}for(Wt=e,Wt.sort((n,s)=>Ds(n)-Ds(s)),Pn=0;Pn<Wt.length;Pn++)Wt[Pn]();Wt=null,Pn=0}}const Ds=t=>t.id==null?1/0:t.id,kf=(t,e)=>{const n=Ds(t)-Ds(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function Kc(t){Ci=!1,Us=!0,nt.sort(kf);const e=Tt;try{for(Dt=0;Dt<nt.length;Dt++){const n=nt[Dt];n&&n.active!==!1&&dn(n,null,14)}}finally{Dt=0,nt.length=0,Wc(),Us=!1,ho=null,(nt.length||Zn.length)&&Kc()}}function Cf(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||Ie;let r=n;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in s){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:d,trim:m}=s[u]||Ie;m&&(r=n.map(b=>b.trim())),d&&(r=n.map(Sc))}let a,c=s[a=ii(e)]||s[a=ii(qt(e))];!c&&i&&(c=s[a=ii(us(e))]),c&&St(c,t,6,r);const l=s[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,St(l,t,6,r)}}function Vc(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!pe(t)){const c=l=>{const u=Vc(l,e,!0);u&&(a=!0,tt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(je(t)&&s.set(t,null),null):(re(i)?i.forEach(c=>o[c]=null):tt(o,i),je(t)&&s.set(t,o),o)}function Dr(t,e){return!t||!Rr(e)?!1:(e=e.slice(2).replace(/Once$/,""),be(t,e[0].toLowerCase()+e.slice(1))||be(t,us(e))||be(t,e))}let ct=null,Yc=null;function vr(t){const e=ct;return ct=t,Yc=t&&t.type.__scopeId||null,e}function Mt(t,e=ct,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&ia(-1);const i=vr(e),o=t(...r);return vr(i),s._d&&ia(1),o};return s._n=!0,s._c=!0,s._d=!0,s}function ai(t){const{type:e,vnode:n,proxy:s,withProxy:r,props:i,propsOptions:[o],slots:a,attrs:c,emit:l,render:u,renderCache:d,data:m,setupState:b,ctx:S,inheritAttrs:R}=t;let K,I;const ee=vr(t);try{if(n.shapeFlag&4){const ce=r||s;K=Ut(u.call(ce,ce,d,i,b,m,S)),I=c}else{const ce=e;K=Ut(ce.length>1?ce(i,{attrs:c,slots:a,emit:l}):ce(i,null)),I=e.props?c:Pf(c)}}catch(ce){Os.length=0,Ur(ce,t,1),K=$e(At)}let se=K;if(I&&R!==!1){const ce=Object.keys(I),{shapeFlag:le}=se;ce.length&&le&7&&(o&&ce.some(to)&&(I=Of(I,o)),se=Zt(se,I))}return n.dirs&&(se=Zt(se),se.dirs=se.dirs?se.dirs.concat(n.dirs):n.dirs),n.transition&&(se.transition=n.transition),K=se,vr(ee),K}const Pf=t=>{let e;for(const n in t)(n==="class"||n==="style"||Rr(n))&&((e||(e={}))[n]=t[n]);return e},Of=(t,e)=>{const n={};for(const s in t)(!to(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function $f(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:c}=e,l=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?Yo(s,o,l):!!o;if(c&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const m=u[d];if(o[m]!==s[m]&&!Dr(l,m))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Yo(s,o,l):!0:!!o;return!1}function Yo(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!Dr(n,i))return!0}return!1}function Tf({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const Nf=t=>t.__isSuspense;function Rf(t,e){e&&e.pendingBranch?re(t)?e.effects.push(...t):e.effects.push(t):Af(t)}function Ln(t,e){if(Je){let n=Je.provides;const s=Je.parent&&Je.parent.provides;s===n&&(n=Je.provides=Object.create(s)),n[t]=e}}function bt(t,e,n=!1){const s=Je||ct;if(s){const r=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(r&&t in r)return r[t];if(arguments.length>1)return n&&pe(e)?e.call(s.proxy):e}}function Jc(t,e){return go(t,null,e)}const Jo={};function Cs(t,e,n){return go(t,e,n)}function go(t,e,{immediate:n,deep:s,flush:r,onTrack:i,onTrigger:o}=Ie){const a=Je;let c,l=!1,u=!1;if(ze(t)?(c=()=>t.value,l=xr(t)):hn(t)?(c=()=>t,s=!0):re(t)?(u=!0,l=t.some(I=>hn(I)||xr(I)),c=()=>t.map(I=>{if(ze(I))return I.value;if(hn(I))return Yn(I);if(pe(I))return dn(I,a,2)})):pe(t)?e?c=()=>dn(t,a,2):c=()=>{if(!(a&&a.isUnmounted))return d&&d(),St(t,a,3,[m])}:c=Tt,e&&s){const I=c;c=()=>Yn(I())}let d,m=I=>{d=K.onStop=()=>{dn(I,a,4)}};if(Bs)return m=Tt,e?n&&St(e,a,3,[c(),u?[]:void 0,m]):c(),Tt;let b=u?[]:Jo;const S=()=>{if(!!K.active)if(e){const I=K.run();(s||l||(u?I.some((ee,se)=>js(ee,b[se])):js(I,b)))&&(d&&d(),St(e,a,3,[I,b===Jo?void 0:b,m]),b=I)}else K.run()};S.allowRecurse=!!e;let R;r==="sync"?R=S:r==="post"?R=()=>lt(S,a&&a.suspense):(S.pre=!0,a&&(S.id=a.uid),R=()=>mo(S));const K=new oo(c,R);return e?n?S():b=K.run():r==="post"?lt(K.run.bind(K),a&&a.suspense):K.run(),()=>{K.stop(),a&&a.scope&&no(a.scope.effects,K)}}function If(t,e,n){const s=this.proxy,r=Ke(t)?t.includes(".")?Qc(s,t):()=>s[t]:t.bind(s,s);let i;pe(e)?i=e:(i=e.handler,n=e);const o=Je;rs(this);const a=go(r,i.bind(s),n);return o?rs(o):jn(),a}function Qc(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}function Yn(t,e){if(!je(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),ze(t))Yn(t.value,e);else if(re(t))for(let n=0;n<t.length;n++)Yn(t[n],e);else if(wc(t)||Xn(t))t.forEach(n=>{Yn(n,e)});else if(Ec(t))for(const n in t)Yn(t[n],e);return t}function Lf(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return _o(()=>{t.isMounted=!0}),nl(()=>{t.isUnmounting=!0}),t}const xt=[Function,Array],jf={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:xt,onEnter:xt,onAfterEnter:xt,onEnterCancelled:xt,onBeforeLeave:xt,onLeave:xt,onAfterLeave:xt,onLeaveCancelled:xt,onBeforeAppear:xt,onAppear:xt,onAfterAppear:xt,onAppearCancelled:xt},setup(t,{slots:e}){const n=Eo(),s=Lf();let r;return()=>{const i=e.default&&el(e.default(),!0);if(!i||!i.length)return;let o=i[0];if(i.length>1){for(const R of i)if(R.type!==At){o=R;break}}const a=de(t),{mode:c}=a;if(s.isLeaving)return ci(o);const l=Qo(o);if(!l)return ci(o);const u=Pi(l,a,s,n);Oi(l,u);const d=n.subTree,m=d&&Qo(d);let b=!1;const{getTransitionKey:S}=l.type;if(S){const R=S();r===void 0?r=R:R!==r&&(r=R,b=!0)}if(m&&m.type!==At&&(!On(l,m)||b)){const R=Pi(m,a,s,n);if(Oi(m,R),c==="out-in")return s.isLeaving=!0,R.afterLeave=()=>{s.isLeaving=!1,n.update()},ci(o);c==="in-out"&&l.type!==At&&(R.delayLeave=(K,I,ee)=>{const se=Zc(s,m);se[String(m.key)]=m,K._leaveCb=()=>{I(),K._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=ee})}return o}}},Xc=jf;function Zc(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function Pi(t,e,n,s){const{appear:r,mode:i,persisted:o=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:l,onEnterCancelled:u,onBeforeLeave:d,onLeave:m,onAfterLeave:b,onLeaveCancelled:S,onBeforeAppear:R,onAppear:K,onAfterAppear:I,onAppearCancelled:ee}=e,se=String(t.key),ce=Zc(n,t),le=(H,ae)=>{H&&St(H,s,9,ae)},ye=(H,ae)=>{const fe=ae[1];le(H,ae),re(H)?H.every(Pe=>Pe.length<=1)&&fe():H.length<=1&&fe()},oe={mode:i,persisted:o,beforeEnter(H){let ae=a;if(!n.isMounted)if(r)ae=R||a;else return;H._leaveCb&&H._leaveCb(!0);const fe=ce[se];fe&&On(t,fe)&&fe.el._leaveCb&&fe.el._leaveCb(),le(ae,[H])},enter(H){let ae=c,fe=l,Pe=u;if(!n.isMounted)if(r)ae=K||c,fe=I||l,Pe=ee||u;else return;let Y=!1;const xe=H._enterCb=Ne=>{Y||(Y=!0,Ne?le(Pe,[H]):le(fe,[H]),oe.delayedLeave&&oe.delayedLeave(),H._enterCb=void 0)};ae?ye(ae,[H,xe]):xe()},leave(H,ae){const fe=String(t.key);if(H._enterCb&&H._enterCb(!0),n.isUnmounting)return ae();le(d,[H]);let Pe=!1;const Y=H._leaveCb=xe=>{Pe||(Pe=!0,ae(),xe?le(S,[H]):le(b,[H]),H._leaveCb=void 0,ce[fe]===t&&delete ce[fe])};ce[fe]=t,m?ye(m,[H,Y]):Y()},clone(H){return Pi(H,e,n,s)}};return oe}function ci(t){if(Fr(t))return t=Zt(t),t.children=null,t}function Qo(t){return Fr(t)?t.children?t.children[0]:void 0:t}function Oi(t,e){t.shapeFlag&6&&t.component?Oi(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function el(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Fe?(o.patchFlag&128&&r++,s=s.concat(el(o.children,e,a))):(e||o.type!==At)&&s.push(a!=null?Zt(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}function ht(t){return pe(t)?{setup:t,name:t.name}:t}const Ps=t=>!!t.type.__asyncLoader,Fr=t=>t.type.__isKeepAlive;function Mf(t,e){tl(t,"a",e)}function Uf(t,e){tl(t,"da",e)}function tl(t,e,n=Je){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Br(e,s,n),n){let r=n.parent;for(;r&&r.parent;)Fr(r.parent.vnode)&&Df(s,e,n,r),r=r.parent}}function Df(t,e,n,s){const r=Br(e,t,s,!0);bo(()=>{no(s[e],r)},n)}function Br(t,e,n=Je,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;fs(),rs(n);const a=St(e,n,t,o);return jn(),hs(),a});return s?r.unshift(i):r.push(i),i}}const en=t=>(e,n=Je)=>(!Bs||t==="sp")&&Br(t,(...s)=>e(...s),n),Ff=en("bm"),_o=en("m"),Bf=en("bu"),qf=en("u"),nl=en("bum"),bo=en("um"),Hf=en("sp"),zf=en("rtg"),Gf=en("rtc");function Wf(t,e=Je){Br("ec",t,e)}function xn(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let c=a.dir[s];c&&(fs(),St(c,n,8,[t.el,a,t,e]),hs())}}const sl="components",rl=Symbol();function Kf(t){return Ke(t)?Vf(sl,t,!1)||t:t||rl}function Vf(t,e,n=!0,s=!1){const r=ct||Je;if(r){const i=r.type;if(t===sl){const a=kh(i,!1);if(a&&(a===e||a===qt(e)||a===jr(qt(e))))return i}const o=Xo(r[t]||i[t],e)||Xo(r.appContext[t],e);return!o&&s?i:o}}function Xo(t,e){return t&&(t[e]||t[qt(e)]||t[jr(qt(e))])}function Ft(t,e,n,s){let r;const i=n&&n[s];if(re(t)||Ke(t)){r=new Array(t.length);for(let o=0,a=t.length;o<a;o++)r[o]=e(t[o],o,void 0,i&&i[o])}else if(typeof t=="number"){r=new Array(t);for(let o=0;o<t;o++)r[o]=e(o+1,o,void 0,i&&i[o])}else if(je(t))if(t[Symbol.iterator])r=Array.from(t,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(t);r=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const l=o[a];r[a]=e(t[l],l,a,i&&i[a])}}else r=[];return n&&(n[s]=r),r}function Yf(t,e){for(let n=0;n<e.length;n++){const s=e[n];if(re(s))for(let r=0;r<s.length;r++)t[s[r].name]=s[r].fn;else s&&(t[s.name]=s.key?(...r)=>{const i=s.fn(...r);return i&&(i.key=s.key),i}:s.fn)}return t}function Jf(t,e,n={},s,r){if(ct.isCE||ct.parent&&Ps(ct.parent)&&ct.parent.isCE)return $e("slot",e==="default"?null:{name:e},s&&s());let i=t[e];i&&i._c&&(i._d=!1),he();const o=i&&il(i(n)),a=Bt(Fe,{key:n.key||o&&o.key||`_${e}`},o||(s?s():[]),o&&t._===1?64:-2);return!r&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),i&&i._c&&(i._d=!0),a}function il(t){return t.some(e=>Ar(e)?!(e.type===At||e.type===Fe&&!il(e.children)):!0)?t:null}const $i=t=>t?_l(t)?So(t)||t.proxy:$i(t.parent):null,Er=tt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>$i(t.parent),$root:t=>$i(t.root),$emit:t=>t.emit,$options:t=>yo(t),$forceUpdate:t=>t.f||(t.f=()=>mo(t.update)),$nextTick:t=>t.n||(t.n=po.bind(t.proxy)),$watch:t=>If.bind(t)}),Qf={get({_:t},e){const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:c}=t;let l;if(e[0]!=="$"){const b=o[e];if(b!==void 0)switch(b){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(s!==Ie&&be(s,e))return o[e]=1,s[e];if(r!==Ie&&be(r,e))return o[e]=2,r[e];if((l=t.propsOptions[0])&&be(l,e))return o[e]=3,i[e];if(n!==Ie&&be(n,e))return o[e]=4,n[e];Ti&&(o[e]=0)}}const u=Er[e];let d,m;if(u)return e==="$attrs"&&wt(t,"get",e),u(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==Ie&&be(n,e))return o[e]=4,n[e];if(m=c.config.globalProperties,be(m,e))return m[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return r!==Ie&&be(r,e)?(r[e]=n,!0):s!==Ie&&be(s,e)?(s[e]=n,!0):be(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!n[o]||t!==Ie&&be(t,o)||e!==Ie&&be(e,o)||(a=i[0])&&be(a,o)||be(s,o)||be(Er,o)||be(r.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:be(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let Ti=!0;function Xf(t){const e=yo(t),n=t.proxy,s=t.ctx;Ti=!1,e.beforeCreate&&Zo(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:d,mounted:m,beforeUpdate:b,updated:S,activated:R,deactivated:K,beforeDestroy:I,beforeUnmount:ee,destroyed:se,unmounted:ce,render:le,renderTracked:ye,renderTriggered:oe,errorCaptured:H,serverPrefetch:ae,expose:fe,inheritAttrs:Pe,components:Y,directives:xe,filters:Ne}=e;if(l&&Zf(l,s,null,t.appContext.config.unwrapInjectedRef),o)for(const ke in o){const we=o[ke];pe(we)&&(s[ke]=we.bind(n))}if(r){const ke=r.call(n,n);je(ke)&&(t.data=ds(ke))}if(Ti=!0,i)for(const ke in i){const we=i[ke],st=pe(we)?we.bind(n,n):pe(we.get)?we.get.bind(n,n):Tt,Qe=!pe(we)&&pe(we.set)?we.set.bind(n):Tt,Xe=et({get:st,set:Qe});Object.defineProperty(s,ke,{enumerable:!0,configurable:!0,get:()=>Xe.value,set:He=>Xe.value=He})}if(a)for(const ke in a)ol(a[ke],s,n,ke);if(c){const ke=pe(c)?c.call(n):c;Reflect.ownKeys(ke).forEach(we=>{Ln(we,ke[we])})}u&&Zo(u,t,"c");function Re(ke,we){re(we)?we.forEach(st=>ke(st.bind(n))):we&&ke(we.bind(n))}if(Re(Ff,d),Re(_o,m),Re(Bf,b),Re(qf,S),Re(Mf,R),Re(Uf,K),Re(Wf,H),Re(Gf,ye),Re(zf,oe),Re(nl,ee),Re(bo,ce),Re(Hf,ae),re(fe))if(fe.length){const ke=t.exposed||(t.exposed={});fe.forEach(we=>{Object.defineProperty(ke,we,{get:()=>n[we],set:st=>n[we]=st})})}else t.exposed||(t.exposed={});le&&t.render===Tt&&(t.render=le),Pe!=null&&(t.inheritAttrs=Pe),Y&&(t.components=Y),xe&&(t.directives=xe)}function Zf(t,e,n=Tt,s=!1){re(t)&&(t=Ni(t));for(const r in t){const i=t[r];let o;je(i)?"default"in i?o=bt(i.from||r,i.default,!0):o=bt(i.from||r):o=bt(i),ze(o)&&s?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[r]=o}}function Zo(t,e,n){St(re(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function ol(t,e,n,s){const r=s.includes(".")?Qc(n,s):()=>n[s];if(Ke(t)){const i=e[t];pe(i)&&Cs(r,i)}else if(pe(t))Cs(r,t.bind(n));else if(je(t))if(re(t))t.forEach(i=>ol(i,e,n,s));else{const i=pe(t.handler)?t.handler.bind(n):e[t.handler];pe(i)&&Cs(r,i,t)}}function yo(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!r.length&&!n&&!s?c=e:(c={},r.length&&r.forEach(l=>Sr(c,l,o,!0)),Sr(c,e,o)),je(e)&&i.set(e,c),c}function Sr(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&Sr(t,i,n,!0),r&&r.forEach(o=>Sr(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=eh[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const eh={data:ea,props:kn,emits:kn,methods:kn,computed:kn,beforeCreate:it,created:it,beforeMount:it,mounted:it,beforeUpdate:it,updated:it,beforeDestroy:it,beforeUnmount:it,destroyed:it,unmounted:it,activated:it,deactivated:it,errorCaptured:it,serverPrefetch:it,components:kn,directives:kn,watch:nh,provide:ea,inject:th};function ea(t,e){return e?t?function(){return tt(pe(t)?t.call(this,this):t,pe(e)?e.call(this,this):e)}:e:t}function th(t,e){return kn(Ni(t),Ni(e))}function Ni(t){if(re(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function it(t,e){return t?[...new Set([].concat(t,e))]:e}function kn(t,e){return t?tt(tt(Object.create(null),t),e):e}function nh(t,e){if(!t)return e;if(!e)return t;const n=tt(Object.create(null),t);for(const s in e)n[s]=it(t[s],e[s]);return n}function sh(t,e,n,s=!1){const r={},i={};wr(i,qr,1),t.propsDefaults=Object.create(null),al(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:df(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function rh(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=de(r),[c]=t.propsOptions;let l=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let m=u[d];if(Dr(t.emitsOptions,m))continue;const b=e[m];if(c)if(be(i,m))b!==i[m]&&(i[m]=b,l=!0);else{const S=qt(m);r[S]=Ri(c,a,S,b,t,!1)}else b!==i[m]&&(i[m]=b,l=!0)}}}else{al(t,e,r,i)&&(l=!0);let u;for(const d in a)(!e||!be(e,d)&&((u=us(d))===d||!be(e,u)))&&(c?n&&(n[d]!==void 0||n[u]!==void 0)&&(r[d]=Ri(c,a,d,void 0,t,!0)):delete r[d]);if(i!==a)for(const d in i)(!e||!be(e,d)&&!0)&&(delete i[d],l=!0)}l&&Xt(t,"set","$attrs")}function al(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(dr(c))continue;const l=e[c];let u;r&&be(r,u=qt(c))?!i||!i.includes(u)?n[u]=l:(a||(a={}))[u]=l:Dr(t.emitsOptions,c)||(!(c in s)||l!==s[c])&&(s[c]=l,o=!0)}if(i){const c=de(n),l=a||Ie;for(let u=0;u<i.length;u++){const d=i[u];n[d]=Ri(r,c,d,l[d],t,!be(l,d))}}return o}function Ri(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=be(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&pe(c)){const{propsDefaults:l}=r;n in l?s=l[n]:(rs(r),s=l[n]=c.call(null,e),jn())}else s=c}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===us(n))&&(s=!0))}return s}function cl(t,e,n=!1){const s=e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let c=!1;if(!pe(t)){const u=d=>{c=!0;const[m,b]=cl(d,e,!0);tt(o,m),b&&a.push(...b)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!c)return je(t)&&s.set(t,Qn),Qn;if(re(i))for(let u=0;u<i.length;u++){const d=qt(i[u]);ta(d)&&(o[d]=Ie)}else if(i)for(const u in i){const d=qt(u);if(ta(d)){const m=i[u],b=o[d]=re(m)||pe(m)?{type:m}:m;if(b){const S=ra(Boolean,b.type),R=ra(String,b.type);b[0]=S>-1,b[1]=R<0||S<R,(S>-1||be(b,"default"))&&a.push(d)}}}const l=[o,a];return je(t)&&s.set(t,l),l}function ta(t){return t[0]!=="$"}function na(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function sa(t,e){return na(t)===na(e)}function ra(t,e){return re(e)?e.findIndex(n=>sa(n,t)):pe(e)&&sa(e,t)?0:-1}const ll=t=>t[0]==="_"||t==="$stable",wo=t=>re(t)?t.map(Ut):[Ut(t)],ih=(t,e,n)=>{if(e._n)return e;const s=Mt((...r)=>wo(e(...r)),n);return s._c=!1,s},ul=(t,e,n)=>{const s=t._ctx;for(const r in t){if(ll(r))continue;const i=t[r];if(pe(i))e[r]=ih(r,i,s);else if(i!=null){const o=wo(i);e[r]=()=>o}}},fl=(t,e)=>{const n=wo(e);t.slots.default=()=>n},oh=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=de(e),wr(e,"_",n)):ul(e,t.slots={})}else t.slots={},e&&fl(t,e);wr(t.slots,qr,1)},ah=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=Ie;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:(tt(r,e),!n&&a===1&&delete r._):(i=!e.$stable,ul(e,r)),o=e}else e&&(fl(t,e),o={default:1});if(i)for(const a in r)!ll(a)&&!(a in o)&&delete r[a]};function hl(){return{app:null,config:{isNativeTag:Ru,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ch=0;function lh(t,e){return function(s,r=null){pe(s)||(s=Object.assign({},s)),r!=null&&!je(r)&&(r=null);const i=hl(),o=new Set;let a=!1;const c=i.app={_uid:ch++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:Ph,get config(){return i.config},set config(l){},use(l,...u){return o.has(l)||(l&&pe(l.install)?(o.add(l),l.install(c,...u)):pe(l)&&(o.add(l),l(c,...u))),c},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),c},component(l,u){return u?(i.components[l]=u,c):i.components[l]},directive(l,u){return u?(i.directives[l]=u,c):i.directives[l]},mount(l,u,d){if(!a){const m=$e(s,r);return m.appContext=i,u&&e?e(m,l):t(m,l,d),a=!0,c._container=l,l.__vue_app__=c,So(m.component)||m.component.proxy}},unmount(){a&&(t(null,c._container),delete c._container.__vue_app__)},provide(l,u){return i.provides[l]=u,c}};return c}}function Ii(t,e,n,s,r=!1){if(re(t)){t.forEach((m,b)=>Ii(m,e&&(re(e)?e[b]:e),n,s,r));return}if(Ps(s)&&!r)return;const i=s.shapeFlag&4?So(s.component)||s.component.proxy:s.el,o=r?null:i,{i:a,r:c}=t,l=e&&e.r,u=a.refs===Ie?a.refs={}:a.refs,d=a.setupState;if(l!=null&&l!==c&&(Ke(l)?(u[l]=null,be(d,l)&&(d[l]=null)):ze(l)&&(l.value=null)),pe(c))dn(c,a,12,[o,u]);else{const m=Ke(c),b=ze(c);if(m||b){const S=()=>{if(t.f){const R=m?u[c]:c.value;r?re(R)&&no(R,i):re(R)?R.includes(i)||R.push(i):m?(u[c]=[i],be(d,c)&&(d[c]=u[c])):(c.value=[i],t.k&&(u[t.k]=c.value))}else m?(u[c]=o,be(d,c)&&(d[c]=o)):b&&(c.value=o,t.k&&(u[t.k]=o))};o?(S.id=-1,lt(S,n)):S()}}}const lt=Rf;function uh(t){return fh(t)}function fh(t,e){const n=Du();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:d,nextSibling:m,setScopeId:b=Tt,insertStaticContent:S}=t,R=(g,w,A,k=null,$=null,M=null,z=!1,j=null,D=!!w.dynamicChildren)=>{if(g===w)return;g&&!On(g,w)&&(k=U(g),He(g,$,M,!0),g=null),w.patchFlag===-2&&(D=!1,w.dynamicChildren=null);const{type:T,ref:ne,shapeFlag:J}=w;switch(T){case xo:K(g,w,A,k);break;case At:I(g,w,A,k);break;case pr:g==null&&ee(w,A,k,z);break;case Fe:Y(g,w,A,k,$,M,z,j,D);break;default:J&1?le(g,w,A,k,$,M,z,j,D):J&6?xe(g,w,A,k,$,M,z,j,D):(J&64||J&128)&&T.process(g,w,A,k,$,M,z,j,D,W)}ne!=null&&$&&Ii(ne,g&&g.ref,M,w||g,!w)},K=(g,w,A,k)=>{if(g==null)s(w.el=a(w.children),A,k);else{const $=w.el=g.el;w.children!==g.children&&l($,w.children)}},I=(g,w,A,k)=>{g==null?s(w.el=c(w.children||""),A,k):w.el=g.el},ee=(g,w,A,k)=>{[g.el,g.anchor]=S(g.children,w,A,k,g.el,g.anchor)},se=({el:g,anchor:w},A,k)=>{let $;for(;g&&g!==w;)$=m(g),s(g,A,k),g=$;s(w,A,k)},ce=({el:g,anchor:w})=>{let A;for(;g&&g!==w;)A=m(g),r(g),g=A;r(w)},le=(g,w,A,k,$,M,z,j,D)=>{z=z||w.type==="svg",g==null?ye(w,A,k,$,M,z,j,D):ae(g,w,$,M,z,j,D)},ye=(g,w,A,k,$,M,z,j)=>{let D,T;const{type:ne,props:J,shapeFlag:Q,transition:ie,dirs:me}=g;if(D=g.el=o(g.type,M,J&&J.is,J),Q&8?u(D,g.children):Q&16&&H(g.children,D,null,k,$,M&&ne!=="foreignObject",z,j),me&&xn(g,null,k,"created"),J){for(const Ee in J)Ee!=="value"&&!dr(Ee)&&i(D,Ee,null,J[Ee],M,g.children,k,$,G);"value"in J&&i(D,"value",null,J.value),(T=J.onVnodeBeforeMount)&&Lt(T,k,g)}oe(D,g,g.scopeId,z,k),me&&xn(g,null,k,"beforeMount");const Oe=(!$||$&&!$.pendingBranch)&&ie&&!ie.persisted;Oe&&ie.beforeEnter(D),s(D,w,A),((T=J&&J.onVnodeMounted)||Oe||me)&&lt(()=>{T&&Lt(T,k,g),Oe&&ie.enter(D),me&&xn(g,null,k,"mounted")},$)},oe=(g,w,A,k,$)=>{if(A&&b(g,A),k)for(let M=0;M<k.length;M++)b(g,k[M]);if($){let M=$.subTree;if(w===M){const z=$.vnode;oe(g,z,z.scopeId,z.slotScopeIds,$.parent)}}},H=(g,w,A,k,$,M,z,j,D=0)=>{for(let T=D;T<g.length;T++){const ne=g[T]=j?cn(g[T]):Ut(g[T]);R(null,ne,w,A,k,$,M,z,j)}},ae=(g,w,A,k,$,M,z)=>{const j=w.el=g.el;let{patchFlag:D,dynamicChildren:T,dirs:ne}=w;D|=g.patchFlag&16;const J=g.props||Ie,Q=w.props||Ie;let ie;A&&vn(A,!1),(ie=Q.onVnodeBeforeUpdate)&&Lt(ie,A,w,g),ne&&xn(w,g,A,"beforeUpdate"),A&&vn(A,!0);const me=$&&w.type!=="foreignObject";if(T?fe(g.dynamicChildren,T,j,A,k,me,M):z||we(g,w,j,null,A,k,me,M,!1),D>0){if(D&16)Pe(j,w,J,Q,A,k,$);else if(D&2&&J.class!==Q.class&&i(j,"class",null,Q.class,$),D&4&&i(j,"style",J.style,Q.style,$),D&8){const Oe=w.dynamicProps;for(let Ee=0;Ee<Oe.length;Ee++){const Be=Oe[Ee],pt=J[Be],tn=Q[Be];(tn!==pt||Be==="value")&&i(j,Be,pt,tn,$,g.children,A,k,G)}}D&1&&g.children!==w.children&&u(j,w.children)}else!z&&T==null&&Pe(j,w,J,Q,A,k,$);((ie=Q.onVnodeUpdated)||ne)&&lt(()=>{ie&&Lt(ie,A,w,g),ne&&xn(w,g,A,"updated")},k)},fe=(g,w,A,k,$,M,z)=>{for(let j=0;j<w.length;j++){const D=g[j],T=w[j],ne=D.el&&(D.type===Fe||!On(D,T)||D.shapeFlag&70)?d(D.el):A;R(D,T,ne,null,k,$,M,z,!0)}},Pe=(g,w,A,k,$,M,z)=>{if(A!==k){if(A!==Ie)for(const j in A)!dr(j)&&!(j in k)&&i(g,j,A[j],null,z,w.children,$,M,G);for(const j in k){if(dr(j))continue;const D=k[j],T=A[j];D!==T&&j!=="value"&&i(g,j,T,D,z,w.children,$,M,G)}"value"in k&&i(g,"value",A.value,k.value)}},Y=(g,w,A,k,$,M,z,j,D)=>{const T=w.el=g?g.el:a(""),ne=w.anchor=g?g.anchor:a("");let{patchFlag:J,dynamicChildren:Q,slotScopeIds:ie}=w;ie&&(j=j?j.concat(ie):ie),g==null?(s(T,A,k),s(ne,A,k),H(w.children,A,ne,$,M,z,j,D)):J>0&&J&64&&Q&&g.dynamicChildren?(fe(g.dynamicChildren,Q,A,$,M,z,j),(w.key!=null||$&&w===$.subTree)&&dl(g,w,!0)):we(g,w,A,ne,$,M,z,j,D)},xe=(g,w,A,k,$,M,z,j,D)=>{w.slotScopeIds=j,g==null?w.shapeFlag&512?$.ctx.activate(w,A,k,z,D):Ne(w,A,k,$,M,z,D):Ue(g,w,D)},Ne=(g,w,A,k,$,M,z)=>{const j=g.component=xh(g,k,$);if(Fr(g)&&(j.ctx.renderer=W),vh(j),j.asyncDep){if($&&$.registerDep(j,Re),!g.el){const D=j.subTree=$e(At);I(null,D,w,A)}return}Re(j,g,w,A,$,M,z)},Ue=(g,w,A)=>{const k=w.component=g.component;if($f(g,w,A))if(k.asyncDep&&!k.asyncResolved){ke(k,w,A);return}else k.next=w,Sf(k.update),k.update();else w.el=g.el,k.vnode=w},Re=(g,w,A,k,$,M,z)=>{const j=()=>{if(g.isMounted){let{next:ne,bu:J,u:Q,parent:ie,vnode:me}=g,Oe=ne,Ee;vn(g,!1),ne?(ne.el=me.el,ke(g,ne,z)):ne=me,J&&oi(J),(Ee=ne.props&&ne.props.onVnodeBeforeUpdate)&&Lt(Ee,ie,ne,me),vn(g,!0);const Be=ai(g),pt=g.subTree;g.subTree=Be,R(pt,Be,d(pt.el),U(pt),g,$,M),ne.el=Be.el,Oe===null&&Tf(g,Be.el),Q&&lt(Q,$),(Ee=ne.props&&ne.props.onVnodeUpdated)&&lt(()=>Lt(Ee,ie,ne,me),$)}else{let ne;const{el:J,props:Q}=w,{bm:ie,m:me,parent:Oe}=g,Ee=Ps(w);if(vn(g,!1),ie&&oi(ie),!Ee&&(ne=Q&&Q.onVnodeBeforeMount)&&Lt(ne,Oe,w),vn(g,!0),J&&ue){const Be=()=>{g.subTree=ai(g),ue(J,g.subTree,g,$,null)};Ee?w.type.__asyncLoader().then(()=>!g.isUnmounted&&Be()):Be()}else{const Be=g.subTree=ai(g);R(null,Be,A,k,g,$,M),w.el=Be.el}if(me&&lt(me,$),!Ee&&(ne=Q&&Q.onVnodeMounted)){const Be=w;lt(()=>Lt(ne,Oe,Be),$)}(w.shapeFlag&256||Oe&&Ps(Oe.vnode)&&Oe.vnode.shapeFlag&256)&&g.a&&lt(g.a,$),g.isMounted=!0,w=A=k=null}},D=g.effect=new oo(j,()=>mo(T),g.scope),T=g.update=()=>D.run();T.id=g.uid,vn(g,!0),T()},ke=(g,w,A)=>{w.component=g;const k=g.vnode.props;g.vnode=w,g.next=null,rh(g,w.props,k,A),ah(g,w.children,A),fs(),Vo(),hs()},we=(g,w,A,k,$,M,z,j,D=!1)=>{const T=g&&g.children,ne=g?g.shapeFlag:0,J=w.children,{patchFlag:Q,shapeFlag:ie}=w;if(Q>0){if(Q&128){Qe(T,J,A,k,$,M,z,j,D);return}else if(Q&256){st(T,J,A,k,$,M,z,j,D);return}}ie&8?(ne&16&&G(T,$,M),J!==T&&u(A,J)):ne&16?ie&16?Qe(T,J,A,k,$,M,z,j,D):G(T,$,M,!0):(ne&8&&u(A,""),ie&16&&H(J,A,k,$,M,z,j,D))},st=(g,w,A,k,$,M,z,j,D)=>{g=g||Qn,w=w||Qn;const T=g.length,ne=w.length,J=Math.min(T,ne);let Q;for(Q=0;Q<J;Q++){const ie=w[Q]=D?cn(w[Q]):Ut(w[Q]);R(g[Q],ie,A,null,$,M,z,j,D)}T>ne?G(g,$,M,!0,!1,J):H(w,A,k,$,M,z,j,D,J)},Qe=(g,w,A,k,$,M,z,j,D)=>{let T=0;const ne=w.length;let J=g.length-1,Q=ne-1;for(;T<=J&&T<=Q;){const ie=g[T],me=w[T]=D?cn(w[T]):Ut(w[T]);if(On(ie,me))R(ie,me,A,null,$,M,z,j,D);else break;T++}for(;T<=J&&T<=Q;){const ie=g[J],me=w[Q]=D?cn(w[Q]):Ut(w[Q]);if(On(ie,me))R(ie,me,A,null,$,M,z,j,D);else break;J--,Q--}if(T>J){if(T<=Q){const ie=Q+1,me=ie<ne?w[ie].el:k;for(;T<=Q;)R(null,w[T]=D?cn(w[T]):Ut(w[T]),A,me,$,M,z,j,D),T++}}else if(T>Q)for(;T<=J;)He(g[T],$,M,!0),T++;else{const ie=T,me=T,Oe=new Map;for(T=me;T<=Q;T++){const Ve=w[T]=D?cn(w[T]):Ut(w[T]);Ve.key!=null&&Oe.set(Ve.key,T)}let Ee,Be=0;const pt=Q-me+1;let tn=!1,ms=0;const yn=new Array(pt);for(T=0;T<pt;T++)yn[T]=0;for(T=ie;T<=J;T++){const Ve=g[T];if(Be>=pt){He(Ve,$,M,!0);continue}let mt;if(Ve.key!=null)mt=Oe.get(Ve.key);else for(Ee=me;Ee<=Q;Ee++)if(yn[Ee-me]===0&&On(Ve,w[Ee])){mt=Ee;break}mt===void 0?He(Ve,$,M,!0):(yn[mt-me]=T+1,mt>=ms?ms=mt:tn=!0,R(Ve,w[mt],A,null,$,M,z,j,D),Be++)}const It=tn?hh(yn):Qn;for(Ee=It.length-1,T=pt-1;T>=0;T--){const Ve=me+T,mt=w[Ve],Un=Ve+1<ne?w[Ve+1].el:k;yn[T]===0?R(null,mt,A,Un,$,M,z,j,D):tn&&(Ee<0||T!==It[Ee]?Xe(mt,A,Un,2):Ee--)}}},Xe=(g,w,A,k,$=null)=>{const{el:M,type:z,transition:j,children:D,shapeFlag:T}=g;if(T&6){Xe(g.component.subTree,w,A,k);return}if(T&128){g.suspense.move(w,A,k);return}if(T&64){z.move(g,w,A,W);return}if(z===Fe){s(M,w,A);for(let J=0;J<D.length;J++)Xe(D[J],w,A,k);s(g.anchor,w,A);return}if(z===pr){se(g,w,A);return}if(k!==2&&T&1&&j)if(k===0)j.beforeEnter(M),s(M,w,A),lt(()=>j.enter(M),$);else{const{leave:J,delayLeave:Q,afterLeave:ie}=j,me=()=>s(M,w,A),Oe=()=>{J(M,()=>{me(),ie&&ie()})};Q?Q(M,me,Oe):Oe()}else s(M,w,A)},He=(g,w,A,k=!1,$=!1)=>{const{type:M,props:z,ref:j,children:D,dynamicChildren:T,shapeFlag:ne,patchFlag:J,dirs:Q}=g;if(j!=null&&Ii(j,null,A,g,!0),ne&256){w.ctx.deactivate(g);return}const ie=ne&1&&Q,me=!Ps(g);let Oe;if(me&&(Oe=z&&z.onVnodeBeforeUnmount)&&Lt(Oe,w,g),ne&6)O(g.component,A,k);else{if(ne&128){g.suspense.unmount(A,k);return}ie&&xn(g,null,w,"beforeUnmount"),ne&64?g.type.remove(g,w,A,$,W,k):T&&(M!==Fe||J>0&&J&64)?G(T,w,A,!1,!0):(M===Fe&&J&384||!$&&ne&16)&&G(D,w,A),k&&dt(g)}(me&&(Oe=z&&z.onVnodeUnmounted)||ie)&&lt(()=>{Oe&&Lt(Oe,w,g),ie&&xn(g,null,w,"unmounted")},A)},dt=g=>{const{type:w,el:A,anchor:k,transition:$}=g;if(w===Fe){bn(A,k);return}if(w===pr){ce(g);return}const M=()=>{r(A),$&&!$.persisted&&$.afterLeave&&$.afterLeave()};if(g.shapeFlag&1&&$&&!$.persisted){const{leave:z,delayLeave:j}=$,D=()=>z(A,M);j?j(g.el,M,D):D()}else M()},bn=(g,w)=>{let A;for(;g!==w;)A=m(g),r(g),g=A;r(w)},O=(g,w,A)=>{const{bum:k,scope:$,update:M,subTree:z,um:j}=g;k&&oi(k),$.stop(),M&&(M.active=!1,He(z,g,w,A)),j&&lt(j,w),lt(()=>{g.isUnmounted=!0},w),w&&w.pendingBranch&&!w.isUnmounted&&g.asyncDep&&!g.asyncResolved&&g.suspenseId===w.pendingId&&(w.deps--,w.deps===0&&w.resolve())},G=(g,w,A,k=!1,$=!1,M=0)=>{for(let z=M;z<g.length;z++)He(g[z],w,A,k,$)},U=g=>g.shapeFlag&6?U(g.component.subTree):g.shapeFlag&128?g.suspense.next():m(g.anchor||g.el),V=(g,w,A)=>{g==null?w._vnode&&He(w._vnode,null,null,!0):R(w._vnode||null,g,w,null,null,null,A),Vo(),Wc(),w._vnode=g},W={p:R,um:He,m:Xe,r:dt,mt:Ne,mc:H,pc:we,pbc:fe,n:U,o:t};let ge,ue;return e&&([ge,ue]=e(W)),{render:V,hydrate:ge,createApp:lh(V,ge)}}function vn({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function dl(t,e,n=!1){const s=t.children,r=e.children;if(re(s)&&re(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=cn(r[i]),a.el=o.el),n||dl(o,a))}}function hh(t){const e=t.slice(),n=[0];let s,r,i,o,a;const c=t.length;for(s=0;s<c;s++){const l=t[s];if(l!==0){if(r=n[n.length-1],t[r]<l){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<l?i=a+1:o=a;l<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}const dh=t=>t.__isTeleport,Fe=Symbol(void 0),xo=Symbol(void 0),At=Symbol(void 0),pr=Symbol(void 0),Os=[];let Ot=null;function he(t=!1){Os.push(Ot=t?null:[])}function ph(){Os.pop(),Ot=Os[Os.length-1]||null}let Fs=1;function ia(t){Fs+=t}function pl(t){return t.dynamicChildren=Fs>0?Ot||Qn:null,ph(),Fs>0&&Ot&&Ot.push(t),t}function Ae(t,e,n,s,r,i){return pl(X(t,e,n,s,r,i,!0))}function Bt(t,e,n,s,r){return pl($e(t,e,n,s,r,!0))}function Ar(t){return t?t.__v_isVNode===!0:!1}function On(t,e){return t.type===e.type&&t.key===e.key}const qr="__vInternal",ml=({key:t})=>t!=null?t:null,mr=({ref:t,ref_key:e,ref_for:n})=>t!=null?Ke(t)||ze(t)||pe(t)?{i:ct,r:t,k:e,f:!!n}:t:null;function X(t,e=null,n=null,s=0,r=null,i=t===Fe?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ml(e),ref:e&&mr(e),scopeId:Yc,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null};return a?(vo(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=Ke(n)?8:16),Fs>0&&!o&&Ot&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Ot.push(c),c}const $e=mh;function mh(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===rl)&&(t=At),Ar(t)){const a=Zt(t,e,!0);return n&&vo(a,n),Fs>0&&!i&&Ot&&(a.shapeFlag&6?Ot[Ot.indexOf(t)]=a:Ot.push(a)),a.patchFlag|=-2,a}if(Ch(t)&&(t=t.__vccOpts),e){e=gh(e);let{class:a,style:c}=e;a&&!Ke(a)&&(e.class=Mn(a)),je(c)&&(Uc(c)&&!re(c)&&(c=tt({},c)),e.style=eo(c))}const o=Ke(t)?1:Nf(t)?128:dh(t)?64:je(t)?4:pe(t)?2:0;return X(t,e,n,s,r,o,i,!0)}function gh(t){return t?Uc(t)||qr in t?tt({},t):t:null}function Zt(t,e,n=!1){const{props:s,ref:r,patchFlag:i,children:o}=t,a=e?bh(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&ml(a),ref:e&&e.ref?n&&r?re(r)?r.concat(mr(e)):[r,mr(e)]:mr(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Fe?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Zt(t.ssContent),ssFallback:t.ssFallback&&Zt(t.ssFallback),el:t.el,anchor:t.anchor}}function gr(t=" ",e=0){return $e(xo,null,t,e)}function _h(t,e){const n=$e(pr,null,t);return n.staticCount=e,n}function gl(t="",e=!1){return e?(he(),Bt(At,null,t)):$e(At,null,t)}function Ut(t){return t==null||typeof t=="boolean"?$e(At):re(t)?$e(Fe,null,t.slice()):typeof t=="object"?cn(t):$e(xo,null,String(t))}function cn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Zt(t)}function vo(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(re(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),vo(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!(qr in e)?e._ctx=ct:r===3&&ct&&(ct.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else pe(e)?(e={default:e,_ctx:ct},n=32):(e=String(e),s&64?(n=16,e=[gr(e)]):n=8);t.children=e,t.shapeFlag|=n}function bh(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Mn([e.class,s.class]));else if(r==="style")e.style=eo([e.style,s.style]);else if(Rr(r)){const i=e[r],o=s[r];o&&i!==o&&!(re(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function Lt(t,e,n,s=null){St(t,e,7,[n,s])}const yh=hl();let wh=0;function xh(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||yh,i={uid:wh++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new Ac(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:cl(s,r),emitsOptions:Vc(s,r),emit:null,emitted:null,propsDefaults:Ie,inheritAttrs:s.inheritAttrs,ctx:Ie,data:Ie,props:Ie,attrs:Ie,slots:Ie,refs:Ie,setupState:Ie,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Cf.bind(null,i),t.ce&&t.ce(i),i}let Je=null;const Eo=()=>Je||ct,rs=t=>{Je=t,t.scope.on()},jn=()=>{Je&&Je.scope.off(),Je=null};function _l(t){return t.vnode.shapeFlag&4}let Bs=!1;function vh(t,e=!1){Bs=e;const{props:n,children:s}=t.vnode,r=_l(t);sh(t,n,r,e),oh(t,s);const i=r?Eh(t,e):void 0;return Bs=!1,i}function Eh(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=ss(new Proxy(t.ctx,Qf));const{setup:s}=n;if(s){const r=t.setupContext=s.length>1?Ah(t):null;rs(t),fs();const i=dn(s,t,0,[t.props,r]);if(hs(),jn(),xc(i)){if(i.then(jn,jn),e)return i.then(o=>{oa(t,o,e)}).catch(o=>{Ur(o,t,0)});t.asyncDep=i}else oa(t,i,e)}else bl(t,e)}function oa(t,e,n){pe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:je(e)&&(t.setupState=qc(e)),bl(t,n)}let aa;function bl(t,e,n){const s=t.type;if(!t.render){if(!e&&aa&&!s.render){const r=s.template||yo(t).template;if(r){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:c}=s,l=tt(tt({isCustomElement:i,delimiters:a},o),c);s.render=aa(r,l)}}t.render=s.render||Tt}rs(t),fs(),Xf(t),hs(),jn()}function Sh(t){return new Proxy(t.attrs,{get(e,n){return wt(t,"get","$attrs"),e[n]}})}function Ah(t){const e=s=>{t.exposed=s||{}};let n;return{get attrs(){return n||(n=Sh(t))},slots:t.slots,emit:t.emit,expose:e}}function So(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(qc(ss(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Er)return Er[n](t)}}))}function kh(t,e=!0){return pe(t)?t.displayName||t.name:t.name||e&&t.__name}function Ch(t){return pe(t)&&"__vccOpts"in t}const et=(t,e)=>xf(t,e,Bs);function un(t,e,n){const s=arguments.length;return s===2?je(e)&&!re(e)?Ar(e)?$e(t,null,[e]):$e(t,e):$e(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Ar(n)&&(n=[n]),$e(t,e,n))}const Ph="3.2.40",Oh="http://www.w3.org/2000/svg",$n=typeof document<"u"?document:null,ca=$n&&$n.createElement("template"),$h={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e?$n.createElementNS(Oh,t):$n.createElement(t,n?{is:n}:void 0);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>$n.createTextNode(t),createComment:t=>$n.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>$n.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{ca.innerHTML=s?`<svg>${t}</svg>`:t;const a=ca.content;if(s){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function Th(t,e,n){const s=t._vtc;s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function Nh(t,e,n){const s=t.style,r=Ke(n);if(n&&!r){for(const i in n)Li(s,i,n[i]);if(e&&!Ke(e))for(const i in e)n[i]==null&&Li(s,i,"")}else{const i=s.display;r?e!==n&&(s.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(s.display=i)}}const la=/\s*!important$/;function Li(t,e,n){if(re(n))n.forEach(s=>Li(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=Rh(t,e);la.test(n)?t.setProperty(us(s),n.replace(la,""),"important"):t[s]=n}}const ua=["Webkit","Moz","ms"],li={};function Rh(t,e){const n=li[e];if(n)return n;let s=qt(e);if(s!=="filter"&&s in t)return li[e]=s;s=jr(s);for(let r=0;r<ua.length;r++){const i=ua[r]+s;if(i in t)return li[e]=i}return e}const fa="http://www.w3.org/1999/xlink";function Ih(t,e,n,s,r){if(s&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(fa,e.slice(6,e.length)):t.setAttributeNS(fa,e,n);else{const i=Ou(e);n==null||i&&!bc(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function Lh(t,e,n,s,r,i,o){if(e==="innerHTML"||e==="textContent"){s&&o(s,r,i),t[e]=n==null?"":n;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const c=n==null?"":n;(t.value!==c||t.tagName==="OPTION")&&(t.value=c),n==null&&t.removeAttribute(e);return}let a=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=bc(n):n==null&&c==="string"?(n="",a=!0):c==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(e)}const[yl,jh]=(()=>{let t=Date.now,e=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(t=performance.now.bind(performance));const n=navigator.userAgent.match(/firefox\/(\d+)/i);e=!!(n&&Number(n[1])<=53)}return[t,e]})();let ji=0;const Mh=Promise.resolve(),Uh=()=>{ji=0},Dh=()=>ji||(Mh.then(Uh),ji=yl());function Fh(t,e,n,s){t.addEventListener(e,n,s)}function Bh(t,e,n,s){t.removeEventListener(e,n,s)}function qh(t,e,n,s,r=null){const i=t._vei||(t._vei={}),o=i[e];if(s&&o)o.value=s;else{const[a,c]=Hh(e);if(s){const l=i[e]=zh(s,r);Fh(t,a,l,c)}else o&&(Bh(t,a,o,c),i[e]=void 0)}}const ha=/(?:Once|Passive|Capture)$/;function Hh(t){let e;if(ha.test(t)){e={};let s;for(;s=t.match(ha);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):us(t.slice(2)),e]}function zh(t,e){const n=s=>{const r=s.timeStamp||yl();(jh||r>=n.attached-1)&&St(Gh(s,n.value),e,5,[s])};return n.value=t,n.attached=Dh(),n}function Gh(t,e){if(re(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const da=/^on[a-z]/,Wh=(t,e,n,s,r=!1,i,o,a,c)=>{e==="class"?Th(t,s,r):e==="style"?Nh(t,n,s):Rr(e)?to(e)||qh(t,e,n,s,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Kh(t,e,s,r))?Lh(t,e,s,i,o,a,c):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Ih(t,e,s,r))};function Kh(t,e,n,s){return s?!!(e==="innerHTML"||e==="textContent"||e in t&&da.test(e)&&pe(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||da.test(e)&&Ke(n)?!1:e in t}const sn="transition",ws="animation",Hr=(t,{slots:e})=>un(Xc,Vh(t),e);Hr.displayName="Transition";const wl={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Hr.props=tt({},Xc.props,wl);const En=(t,e=[])=>{re(t)?t.forEach(n=>n(...e)):t&&t(...e)},pa=t=>t?re(t)?t.some(e=>e.length>1):t.length>1:!1;function Vh(t){const e={};for(const Y in t)Y in wl||(e[Y]=t[Y]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:l=o,appearToClass:u=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:b=`${n}-leave-to`}=t,S=Yh(r),R=S&&S[0],K=S&&S[1],{onBeforeEnter:I,onEnter:ee,onEnterCancelled:se,onLeave:ce,onLeaveCancelled:le,onBeforeAppear:ye=I,onAppear:oe=ee,onAppearCancelled:H=se}=e,ae=(Y,xe,Ne)=>{Sn(Y,xe?u:a),Sn(Y,xe?l:o),Ne&&Ne()},fe=(Y,xe)=>{Y._isLeaving=!1,Sn(Y,d),Sn(Y,b),Sn(Y,m),xe&&xe()},Pe=Y=>(xe,Ne)=>{const Ue=Y?oe:ee,Re=()=>ae(xe,Y,Ne);En(Ue,[xe,Re]),ma(()=>{Sn(xe,Y?c:i),rn(xe,Y?u:a),pa(Ue)||ga(xe,s,R,Re)})};return tt(e,{onBeforeEnter(Y){En(I,[Y]),rn(Y,i),rn(Y,o)},onBeforeAppear(Y){En(ye,[Y]),rn(Y,c),rn(Y,l)},onEnter:Pe(!1),onAppear:Pe(!0),onLeave(Y,xe){Y._isLeaving=!0;const Ne=()=>fe(Y,xe);rn(Y,d),Xh(),rn(Y,m),ma(()=>{!Y._isLeaving||(Sn(Y,d),rn(Y,b),pa(ce)||ga(Y,s,K,Ne))}),En(ce,[Y,Ne])},onEnterCancelled(Y){ae(Y,!1),En(se,[Y])},onAppearCancelled(Y){ae(Y,!0),En(H,[Y])},onLeaveCancelled(Y){fe(Y),En(le,[Y])}})}function Yh(t){if(t==null)return null;if(je(t))return[ui(t.enter),ui(t.leave)];{const e=ui(t);return[e,e]}}function ui(t){return Sc(t)}function rn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t._vtc||(t._vtc=new Set)).add(e)}function Sn(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function ma(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Jh=0;function ga(t,e,n,s){const r=t._endId=++Jh,i=()=>{r===t._endId&&s()};if(n)return setTimeout(i,n);const{type:o,timeout:a,propCount:c}=Qh(t,e);if(!o)return s();const l=o+"end";let u=0;const d=()=>{t.removeEventListener(l,m),i()},m=b=>{b.target===t&&++u>=c&&d()};setTimeout(()=>{u<c&&d()},a+1),t.addEventListener(l,m)}function Qh(t,e){const n=window.getComputedStyle(t),s=S=>(n[S]||"").split(", "),r=s(sn+"Delay"),i=s(sn+"Duration"),o=_a(r,i),a=s(ws+"Delay"),c=s(ws+"Duration"),l=_a(a,c);let u=null,d=0,m=0;e===sn?o>0&&(u=sn,d=o,m=i.length):e===ws?l>0&&(u=ws,d=l,m=c.length):(d=Math.max(o,l),u=d>0?o>l?sn:ws:null,m=u?u===sn?i.length:c.length:0);const b=u===sn&&/\b(transform|all)(,|$)/.test(n[sn+"Property"]);return{type:u,timeout:d,propCount:m,hasTransform:b}}function _a(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>ba(n)+ba(t[s])))}function ba(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function Xh(){return document.body.offsetHeight}const Zh=tt({patchProp:Wh},$h);let ya;function ed(){return ya||(ya=uh(Zh))}const td=(...t)=>{const e=ed().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=nd(s);if(!r)return;const i=e._component;!pe(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function nd(t){return Ke(t)?document.querySelector(t):t}var sd=!1;/*!
  * pinia v2.0.22
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let xl;const zr=t=>xl=t,vl=Symbol();function Mi(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var $s;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})($s||($s={}));function rd(){const t=kc(!0),e=t.run(()=>Jt({}));let n=[],s=[];const r=ss({install(i){zr(r),r._a=i,i.provide(vl,r),i.config.globalProperties.$pinia=r,s.forEach(o=>n.push(o)),s=[]},use(i){return!this._a&&!sd?s.push(i):n.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return r}const El=()=>{};function wa(t,e,n,s=El){t.push(e);const r=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),s())};return!n&&Eo()&&bo(r),r}function qn(t,...e){t.slice().forEach(n=>{n(...e)})}function Ui(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,s)=>t.set(s,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const s=e[n],r=t[n];Mi(r)&&Mi(s)&&t.hasOwnProperty(n)&&!ze(s)&&!hn(s)?t[n]=Ui(r,s):t[n]=s}return t}const id=Symbol();function od(t){return!Mi(t)||!t.hasOwnProperty(id)}const{assign:Kt}=Object;function ad(t){return!!(ze(t)&&t.effect)}function cd(t,e,n,s){const{state:r,actions:i,getters:o}=e,a=n.state.value[t];let c;function l(){a||(n.state.value[t]=r?r():{});const u=_f(n.state.value[t]);return Kt(u,i,Object.keys(o||{}).reduce((d,m)=>(d[m]=ss(et(()=>{zr(n);const b=n._s.get(t);return o[m].call(b,b)})),d),{}))}return c=Sl(t,l,e,n,s,!0),c.$reset=function(){const d=r?r():{};this.$patch(m=>{Kt(m,d)})},c}function Sl(t,e,n={},s,r,i){let o;const a=Kt({actions:{}},n),c={deep:!0};let l,u,d=ss([]),m=ss([]),b;const S=s.state.value[t];!i&&!S&&(s.state.value[t]={}),Jt({});let R;function K(oe){let H;l=u=!1,typeof oe=="function"?(oe(s.state.value[t]),H={type:$s.patchFunction,storeId:t,events:b}):(Ui(s.state.value[t],oe),H={type:$s.patchObject,payload:oe,storeId:t,events:b});const ae=R=Symbol();po().then(()=>{R===ae&&(l=!0)}),u=!0,qn(d,H,s.state.value[t])}const I=El;function ee(){o.stop(),d=[],m=[],s._s.delete(t)}function se(oe,H){return function(){zr(s);const ae=Array.from(arguments),fe=[],Pe=[];function Y(Ue){fe.push(Ue)}function xe(Ue){Pe.push(Ue)}qn(m,{args:ae,name:oe,store:le,after:Y,onError:xe});let Ne;try{Ne=H.apply(this&&this.$id===t?this:le,ae)}catch(Ue){throw qn(Pe,Ue),Ue}return Ne instanceof Promise?Ne.then(Ue=>(qn(fe,Ue),Ue)).catch(Ue=>(qn(Pe,Ue),Promise.reject(Ue))):(qn(fe,Ne),Ne)}}const ce={_p:s,$id:t,$onAction:wa.bind(null,m),$patch:K,$reset:I,$subscribe(oe,H={}){const ae=wa(d,oe,H.detached,()=>fe()),fe=o.run(()=>Cs(()=>s.state.value[t],Pe=>{(H.flush==="sync"?u:l)&&oe({storeId:t,type:$s.direct,events:b},Pe)},Kt({},c,H)));return ae},$dispose:ee},le=ds(Kt({},ce));s._s.set(t,le);const ye=s._e.run(()=>(o=kc(),o.run(()=>e())));for(const oe in ye){const H=ye[oe];if(ze(H)&&!ad(H)||hn(H))i||(S&&od(H)&&(ze(H)?H.value=S[oe]:Ui(H,S[oe])),s.state.value[t][oe]=H);else if(typeof H=="function"){const ae=se(oe,H);ye[oe]=ae,a.actions[oe]=H}}return Kt(le,ye),Kt(de(le),ye),Object.defineProperty(le,"$state",{get:()=>s.state.value[t],set:oe=>{K(H=>{Kt(H,oe)})}}),s._p.forEach(oe=>{Kt(le,o.run(()=>oe({store:le,app:s._a,pinia:s,options:a})))}),S&&i&&n.hydrate&&n.hydrate(le.$state,S),l=!0,u=!0,le}function Al(t,e,n){let s,r;const i=typeof e=="function";typeof t=="string"?(s=t,r=i?n:e):(r=t,s=t.id);function o(a,c){const l=Eo();return a=a||l&&bt(vl),a&&zr(a),a=xl,a._s.has(s)||(i?Sl(s,e,r,a):cd(s,r,a)),a._s.get(s)}return o.$id=s,o}const xa="/assets/logo-text-rect-dark.248f2243.svg";function kr(t,e,...n){if(t in e){let r=e[t];return typeof r=="function"?r(...n):r}let s=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,kr),s}var Di=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(Di||{}),ld=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(ld||{});function Ao({visible:t=!0,features:e=0,ourProps:n,theirProps:s,...r}){var i;let o=ud(s,n),a=Object.assign(r,{props:o});if(t||e&2&&o.static)return fi(a);if(e&1){let c=(i=o.unmount)==null||i?0:1;return kr(c,{[0](){return null},[1](){return fi({...r,props:{...o,hidden:!0,style:{display:"none"}}})}})}return fi(a)}function fi({props:t,attrs:e,slots:n,slot:s,name:r}){var i;let{as:o,...a}=fd(t,["unmount","static"]),c=(i=n.default)==null?void 0:i.call(n,s),l={};if(s){let u=!1,d=[];for(let[m,b]of Object.entries(s))typeof b=="boolean"&&(u=!0),b===!0&&d.push(m);u&&(l["data-headlessui-state"]=d.join(" "))}if(o==="template"){if(c=kl(c!=null?c:[]),Object.keys(a).length>0||Object.keys(e).length>0){let[u,...d]=c!=null?c:[];if(!hd(u)||d.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${r} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(a).concat(Object.keys(e)).sort((m,b)=>m.localeCompare(b)).map(m=>`  - ${m}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(m=>`  - ${m}`).join(`
`)].join(`
`));return Zt(u,Object.assign({},a,l))}return Array.isArray(c)&&c.length===1?c[0]:c}return un(o,Object.assign({},a,l),c)}function kl(t){return t.flatMap(e=>e.type===Fe?kl(e.children):[e])}function ud(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let s of t)for(let r in s)r.startsWith("on")&&typeof s[r]=="function"?(n[r]!=null||(n[r]=[]),n[r].push(s[r])):e[r]=s[r];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(n).map(s=>[s,void 0])));for(let s in n)Object.assign(e,{[s](r,...i){let o=n[s];for(let a of o){if(r instanceof Event&&r.defaultPrevented)return;a(r,...i)}}});return e}function k_(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function fd(t,e=[]){let n=Object.assign({},t);for(let s of e)s in n&&delete n[s];return n}function hd(t){return t==null?!1:typeof t.type=="string"||typeof t.type=="object"||typeof t.type=="function"}let dd=0;function pd(){return++dd}function va(){return pd()}var Wn=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(Wn||{});function Qt(t){var e;return t==null||t.value==null?null:(e=t.value.$el)!=null?e:t.value}let Cl=Symbol("Context");var Cr=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Cr||{});function md(){return bt(Cl,null)}function gd(t){Ln(Cl,t)}function Ea(t,e){if(t)return t;let n=e!=null?e:"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function _d(t,e){let n=Jt(Ea(t.value.type,t.value.as));return _o(()=>{n.value=Ea(t.value.type,t.value.as)}),Jc(()=>{var s;n.value||!Qt(e)||Qt(e)instanceof HTMLButtonElement&&!((s=Qt(e))!=null&&s.hasAttribute("type"))&&(n.value="button")}),n}var bd=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(bd||{});let Pl=Symbol("DisclosureContext");function ko(t){let e=bt(Pl,null);if(e===null){let n=new Error(`<${t} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ko),n}return e}let Ol=Symbol("DisclosurePanelContext");function yd(){return bt(Ol,null)}let wd=ht({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(t,{slots:e,attrs:n}){let s=`headlessui-disclosure-button-${va()}`,r=`headlessui-disclosure-panel-${va()}`,i=Jt(t.defaultOpen?0:1),o=Jt(null),a=Jt(null),c={buttonId:s,panelId:r,disclosureState:i,panel:o,button:a,toggleDisclosure(){i.value=kr(i.value,{[0]:1,[1]:0})},closeDisclosure(){i.value!==1&&(i.value=1)},close(l){c.closeDisclosure();let u=(()=>l?l instanceof HTMLElement?l:l.value instanceof HTMLElement?Qt(l):Qt(c.button):Qt(c.button))();u==null||u.focus()}};return Ln(Pl,c),gd(et(()=>kr(i.value,{[0]:Cr.Open,[1]:Cr.Closed}))),()=>{let{defaultOpen:l,...u}=t,d={open:i.value===0,close:c.close};return Ao({theirProps:u,ourProps:{},slot:d,slots:e,attrs:n,name:"Disclosure"})}}}),Sa=ht({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1}},setup(t,{attrs:e,slots:n,expose:s}){let r=ko("DisclosureButton"),i=yd(),o=i===null?!1:i===r.panelId,a=Jt(null);s({el:a,$el:a}),o||Jc(()=>{r.button.value=a.value});let c=_d(et(()=>({as:t.as,type:e.type})),a);function l(){var m;t.disabled||(o?(r.toggleDisclosure(),(m=Qt(r.button))==null||m.focus()):r.toggleDisclosure())}function u(m){var b;if(!t.disabled)if(o)switch(m.key){case Wn.Space:case Wn.Enter:m.preventDefault(),m.stopPropagation(),r.toggleDisclosure(),(b=Qt(r.button))==null||b.focus();break}else switch(m.key){case Wn.Space:case Wn.Enter:m.preventDefault(),m.stopPropagation(),r.toggleDisclosure();break}}function d(m){switch(m.key){case Wn.Space:m.preventDefault();break}}return()=>{let m={open:r.disclosureState.value===0},b=o?{ref:a,type:c.value,onClick:l,onKeydown:u}:{id:r.buttonId,ref:a,type:c.value,"aria-expanded":t.disabled?void 0:r.disclosureState.value===0,"aria-controls":Qt(r.panel)?r.panelId:void 0,disabled:t.disabled?!0:void 0,onClick:l,onKeydown:u,onKeyup:d};return Ao({ourProps:b,theirProps:t,slot:m,attrs:e,slots:n,name:"DisclosureButton"})}}}),xd=ht({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(t,{attrs:e,slots:n,expose:s}){let r=ko("DisclosurePanel");s({el:r.panel,$el:r.panel}),Ln(Ol,r.panelId);let i=md(),o=et(()=>i!==null?i.value===Cr.Open:r.disclosureState.value===0);return()=>{let a={open:r.disclosureState.value===0,close:r.close},c={id:r.panelId,ref:r.panel};return Ao({ourProps:c,theirProps:t,slot:a,attrs:e,slots:n,features:Di.RenderStrategy|Di.Static,visible:o.value,name:"DisclosurePanel"})}}});function vd(t,e){return he(),Ae("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[X("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 19.5l15-15m0 0H8.25m11.25 0v11.25"})])}function Ed(t,e){return he(),Ae("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[X("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})])}function Sd(t,e){return he(),Ae("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[X("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})])}function $l(t,e){return he(),Ae("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[X("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])}/*!
  * vue-router v4.1.5
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Kn=typeof window<"u";function Ad(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Ce=Object.assign;function hi(t,e){const n={};for(const s in e){const r=e[s];n[s]=Rt(r)?r.map(t):t(r)}return n}const Ts=()=>{},Rt=Array.isArray,kd=/\/$/,Cd=t=>t.replace(kd,"");function di(t,e,n="/"){let s,r={},i="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(s=e.slice(0,c),i=e.slice(c+1,a>-1?a:e.length),r=t(i)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=Td(s!=null?s:e,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:o}}function Pd(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Aa(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Od(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&is(e.matched[s],n.matched[r])&&Tl(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function is(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Tl(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!$d(t[n],e[n]))return!1;return!0}function $d(t,e){return Rt(t)?ka(t,e):Rt(e)?ka(e,t):t===e}function ka(t,e){return Rt(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function Td(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/");let r=n.length-1,i,o;for(i=0;i<s.length;i++)if(o=s[i],o!==".")if(o==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(i-(i===s.length?1:0)).join("/")}var qs;(function(t){t.pop="pop",t.push="push"})(qs||(qs={}));var Ns;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Ns||(Ns={}));function Nd(t){if(!t)if(Kn){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Cd(t)}const Rd=/^[^#]+#/;function Id(t,e){return t.replace(Rd,"#")+e}function Ld(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const Gr=()=>({left:window.pageXOffset,top:window.pageYOffset});function jd(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=Ld(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function Ca(t,e){return(history.state?history.state.position-e:-1)+t}const Fi=new Map;function Md(t,e){Fi.set(t,e)}function Ud(t){const e=Fi.get(t);return Fi.delete(t),e}let Dd=()=>location.protocol+"//"+location.host;function Nl(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let a=r.includes(t.slice(i))?t.slice(i).length:1,c=r.slice(a);return c[0]!=="/"&&(c="/"+c),Aa(c,"")}return Aa(n,t)+s+r}function Fd(t,e,n,s){let r=[],i=[],o=null;const a=({state:m})=>{const b=Nl(t,location),S=n.value,R=e.value;let K=0;if(m){if(n.value=b,e.value=m,o&&o===S){o=null;return}K=R?m.position-R.position:0}else s(b);r.forEach(I=>{I(n.value,S,{delta:K,type:qs.pop,direction:K?K>0?Ns.forward:Ns.back:Ns.unknown})})};function c(){o=n.value}function l(m){r.push(m);const b=()=>{const S=r.indexOf(m);S>-1&&r.splice(S,1)};return i.push(b),b}function u(){const{history:m}=window;!m.state||m.replaceState(Ce({},m.state,{scroll:Gr()}),"")}function d(){for(const m of i)m();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u),{pauseListeners:c,listen:l,destroy:d}}function Pa(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?Gr():null}}function Bd(t){const{history:e,location:n}=window,s={value:Nl(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,l,u){const d=t.indexOf("#"),m=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+c:Dd()+t+c;try{e[u?"replaceState":"pushState"](l,"",m),r.value=l}catch(b){console.error(b),n[u?"replace":"assign"](m)}}function o(c,l){const u=Ce({},e.state,Pa(r.value.back,c,r.value.forward,!0),l,{position:r.value.position});i(c,u,!0),s.value=c}function a(c,l){const u=Ce({},r.value,e.state,{forward:c,scroll:Gr()});i(u.current,u,!0);const d=Ce({},Pa(s.value,c,null),{position:u.position+1},l);i(c,d,!1),s.value=c}return{location:s,state:r,push:a,replace:o}}function qd(t){t=Nd(t);const e=Bd(t),n=Fd(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=Ce({location:"",base:t,go:s,createHref:Id.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function Hd(t){return typeof t=="string"||t&&typeof t=="object"}function Rl(t){return typeof t=="string"||typeof t=="symbol"}const on={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Il=Symbol("");var Oa;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Oa||(Oa={}));function os(t,e){return Ce(new Error,{type:t,[Il]:!0},e)}function Gt(t,e){return t instanceof Error&&Il in t&&(e==null||!!(t.type&e))}const $a="[^/]+?",zd={sensitive:!1,strict:!1,start:!0,end:!0},Gd=/[.+*?^${}()[\]/\\]/g;function Wd(t,e){const n=Ce({},zd,e),s=[];let r=n.start?"^":"";const i=[];for(const l of t){const u=l.length?[]:[90];n.strict&&!l.length&&(r+="/");for(let d=0;d<l.length;d++){const m=l[d];let b=40+(n.sensitive?.25:0);if(m.type===0)d||(r+="/"),r+=m.value.replace(Gd,"\\$&"),b+=40;else if(m.type===1){const{value:S,repeatable:R,optional:K,regexp:I}=m;i.push({name:S,repeatable:R,optional:K});const ee=I||$a;if(ee!==$a){b+=10;try{new RegExp(`(${ee})`)}catch(ce){throw new Error(`Invalid custom RegExp for param "${S}" (${ee}): `+ce.message)}}let se=R?`((?:${ee})(?:/(?:${ee}))*)`:`(${ee})`;d||(se=K&&l.length<2?`(?:/${se})`:"/"+se),K&&(se+="?"),r+=se,b+=20,K&&(b+=-8),R&&(b+=-20),ee===".*"&&(b+=-50)}u.push(b)}s.push(u)}if(n.strict&&n.end){const l=s.length-1;s[l][s[l].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(l){const u=l.match(o),d={};if(!u)return null;for(let m=1;m<u.length;m++){const b=u[m]||"",S=i[m-1];d[S.name]=b&&S.repeatable?b.split("/"):b}return d}function c(l){let u="",d=!1;for(const m of t){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const b of m)if(b.type===0)u+=b.value;else if(b.type===1){const{value:S,repeatable:R,optional:K}=b,I=S in l?l[S]:"";if(Rt(I)&&!R)throw new Error(`Provided param "${S}" is an array but it is not repeatable (* or + modifiers)`);const ee=Rt(I)?I.join("/"):I;if(!ee)if(K)m.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${S}"`);u+=ee}}return u||"/"}return{re:o,score:s,keys:i,parse:a,stringify:c}}function Kd(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function Vd(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=Kd(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(Ta(s))return 1;if(Ta(r))return-1}return r.length-s.length}function Ta(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Yd={type:0,value:""},Jd=/[a-zA-Z0-9_]/;function Qd(t){if(!t)return[[]];if(t==="/")return[[Yd]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(b){throw new Error(`ERR (${n})/"${l}": ${b}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,c,l="",u="";function d(){!l||(n===0?i.push({type:0,value:l}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function m(){l+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:c==="/"?(l&&d(),o()):c===":"?(d(),n=1):m();break;case 4:m(),n=s;break;case 1:c==="("?n=2:Jd.test(c)?m():(d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${l}"`),d(),o(),r}function Xd(t,e,n){const s=Wd(Qd(t.path),n),r=Ce(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function Zd(t,e){const n=[],s=new Map;e=Ia({strict:!1,end:!0,sensitive:!1},e);function r(u){return s.get(u)}function i(u,d,m){const b=!m,S=ep(u);S.aliasOf=m&&m.record;const R=Ia(e,u),K=[S];if("alias"in u){const se=typeof u.alias=="string"?[u.alias]:u.alias;for(const ce of se)K.push(Ce({},S,{components:m?m.record.components:S.components,path:ce,aliasOf:m?m.record:S}))}let I,ee;for(const se of K){const{path:ce}=se;if(d&&ce[0]!=="/"){const le=d.record.path,ye=le[le.length-1]==="/"?"":"/";se.path=d.record.path+(ce&&ye+ce)}if(I=Xd(se,d,R),m?m.alias.push(I):(ee=ee||I,ee!==I&&ee.alias.push(I),b&&u.name&&!Ra(I)&&o(u.name)),S.children){const le=S.children;for(let ye=0;ye<le.length;ye++)i(le[ye],I,m&&m.children[ye])}m=m||I,c(I)}return ee?()=>{o(ee)}:Ts}function o(u){if(Rl(u)){const d=s.get(u);d&&(s.delete(u),n.splice(n.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=n.indexOf(u);d>-1&&(n.splice(d,1),u.record.name&&s.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function c(u){let d=0;for(;d<n.length&&Vd(u,n[d])>=0&&(u.record.path!==n[d].record.path||!Ll(u,n[d]));)d++;n.splice(d,0,u),u.record.name&&!Ra(u)&&s.set(u.record.name,u)}function l(u,d){let m,b={},S,R;if("name"in u&&u.name){if(m=s.get(u.name),!m)throw os(1,{location:u});R=m.record.name,b=Ce(Na(d.params,m.keys.filter(ee=>!ee.optional).map(ee=>ee.name)),u.params&&Na(u.params,m.keys.map(ee=>ee.name))),S=m.stringify(b)}else if("path"in u)S=u.path,m=n.find(ee=>ee.re.test(S)),m&&(b=m.parse(S),R=m.record.name);else{if(m=d.name?s.get(d.name):n.find(ee=>ee.re.test(d.path)),!m)throw os(1,{location:u,currentLocation:d});R=m.record.name,b=Ce({},d.params,u.params),S=m.stringify(b)}const K=[];let I=m;for(;I;)K.unshift(I.record),I=I.parent;return{name:R,path:S,params:b,matched:K,meta:np(K)}}return t.forEach(u=>i(u)),{addRoute:i,resolve:l,removeRoute:o,getRoutes:a,getRecordMatcher:r}}function Na(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function ep(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:tp(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function tp(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="boolean"?n:n[s];return e}function Ra(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function np(t){return t.reduce((e,n)=>Ce(e,n.meta),{})}function Ia(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function Ll(t,e){return e.children.some(n=>n===t||Ll(t,n))}const jl=/#/g,sp=/&/g,rp=/\//g,ip=/=/g,op=/\?/g,Ml=/\+/g,ap=/%5B/g,cp=/%5D/g,Ul=/%5E/g,lp=/%60/g,Dl=/%7B/g,up=/%7C/g,Fl=/%7D/g,fp=/%20/g;function Co(t){return encodeURI(""+t).replace(up,"|").replace(ap,"[").replace(cp,"]")}function hp(t){return Co(t).replace(Dl,"{").replace(Fl,"}").replace(Ul,"^")}function Bi(t){return Co(t).replace(Ml,"%2B").replace(fp,"+").replace(jl,"%23").replace(sp,"%26").replace(lp,"`").replace(Dl,"{").replace(Fl,"}").replace(Ul,"^")}function dp(t){return Bi(t).replace(ip,"%3D")}function pp(t){return Co(t).replace(jl,"%23").replace(op,"%3F")}function mp(t){return t==null?"":pp(t).replace(rp,"%2F")}function Pr(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function gp(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<s.length;++r){const i=s[r].replace(Ml," "),o=i.indexOf("="),a=Pr(o<0?i:i.slice(0,o)),c=o<0?null:Pr(i.slice(o+1));if(a in e){let l=e[a];Rt(l)||(l=e[a]=[l]),l.push(c)}else e[a]=c}return e}function La(t){let e="";for(let n in t){const s=t[n];if(n=dp(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(Rt(s)?s.map(i=>i&&Bi(i)):[s&&Bi(s)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function _p(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=Rt(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const bp=Symbol(""),ja=Symbol(""),Wr=Symbol(""),Bl=Symbol(""),qi=Symbol("");function xs(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function ln(t,e,n,s,r){const i=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((o,a)=>{const c=d=>{d===!1?a(os(4,{from:n,to:e})):d instanceof Error?a(d):Hd(d)?a(os(2,{from:e,to:d})):(i&&s.enterCallbacks[r]===i&&typeof d=="function"&&i.push(d),o())},l=t.call(s&&s.instances[r],e,n,c);let u=Promise.resolve(l);t.length<3&&(u=u.then(c)),u.catch(d=>a(d))})}function pi(t,e,n,s){const r=[];for(const i of t)for(const o in i.components){let a=i.components[o];if(!(e!=="beforeRouteEnter"&&!i.instances[o]))if(yp(a)){const l=(a.__vccOpts||a)[e];l&&r.push(ln(l,n,s,i,o))}else{let c=a();r.push(()=>c.then(l=>{if(!l)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${i.path}"`));const u=Ad(l)?l.default:l;i.components[o]=u;const m=(u.__vccOpts||u)[e];return m&&ln(m,n,s,i,o)()}))}}return r}function yp(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Ma(t){const e=bt(Wr),n=bt(Bl),s=et(()=>e.resolve(ve(t.to))),r=et(()=>{const{matched:c}=s.value,{length:l}=c,u=c[l-1],d=n.matched;if(!u||!d.length)return-1;const m=d.findIndex(is.bind(null,u));if(m>-1)return m;const b=Ua(c[l-2]);return l>1&&Ua(u)===b&&d[d.length-1].path!==b?d.findIndex(is.bind(null,c[l-2])):m}),i=et(()=>r.value>-1&&vp(n.params,s.value.params)),o=et(()=>r.value>-1&&r.value===n.matched.length-1&&Tl(n.params,s.value.params));function a(c={}){return xp(c)?e[ve(t.replace)?"replace":"push"](ve(t.to)).catch(Ts):Promise.resolve()}return{route:s,href:et(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}const wp=ht({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ma,setup(t,{slots:e}){const n=ds(Ma(t)),{options:s}=bt(Wr),r=et(()=>({[Da(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Da(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:un("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),Hi=wp;function xp(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function vp(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!Rt(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function Ua(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Da=(t,e,n)=>t!=null?t:e!=null?e:n,Ep=ht({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=bt(qi),r=et(()=>t.route||s.value),i=bt(ja,0),o=et(()=>{let l=ve(i);const{matched:u}=r.value;let d;for(;(d=u[l])&&!d.components;)l++;return l}),a=et(()=>r.value.matched[o.value]);Ln(ja,et(()=>o.value+1)),Ln(bp,a),Ln(qi,r);const c=Jt();return Cs(()=>[c.value,a.value,t.name],([l,u,d],[m,b,S])=>{u&&(u.instances[d]=l,b&&b!==u&&l&&l===m&&(u.leaveGuards.size||(u.leaveGuards=b.leaveGuards),u.updateGuards.size||(u.updateGuards=b.updateGuards))),l&&u&&(!b||!is(u,b)||!m)&&(u.enterCallbacks[d]||[]).forEach(R=>R(l))},{flush:"post"}),()=>{const l=r.value,u=t.name,d=a.value,m=d&&d.components[u];if(!m)return Fa(n.default,{Component:m,route:l});const b=d.props[u],S=b?b===!0?l.params:typeof b=="function"?b(l):b:null,K=un(m,Ce({},S,e,{onVnodeUnmounted:I=>{I.component.isUnmounted&&(d.instances[u]=null)},ref:c}));return Fa(n.default,{Component:K,route:l})||K}}});function Fa(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const ql=Ep;function Sp(t){const e=Zd(t.routes,t),n=t.parseQuery||gp,s=t.stringifyQuery||La,r=t.history,i=xs(),o=xs(),a=xs(),c=pf(on);let l=on;Kn&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=hi.bind(null,O=>""+O),d=hi.bind(null,mp),m=hi.bind(null,Pr);function b(O,G){let U,V;return Rl(O)?(U=e.getRecordMatcher(O),V=G):V=O,e.addRoute(V,U)}function S(O){const G=e.getRecordMatcher(O);G&&e.removeRoute(G)}function R(){return e.getRoutes().map(O=>O.record)}function K(O){return!!e.getRecordMatcher(O)}function I(O,G){if(G=Ce({},G||c.value),typeof O=="string"){const g=di(n,O,G.path),w=e.resolve({path:g.path},G),A=r.createHref(g.fullPath);return Ce(g,w,{params:m(w.params),hash:Pr(g.hash),redirectedFrom:void 0,href:A})}let U;if("path"in O)U=Ce({},O,{path:di(n,O.path,G.path).path});else{const g=Ce({},O.params);for(const w in g)g[w]==null&&delete g[w];U=Ce({},O,{params:d(O.params)}),G.params=d(G.params)}const V=e.resolve(U,G),W=O.hash||"";V.params=u(m(V.params));const ge=Pd(s,Ce({},O,{hash:hp(W),path:V.path})),ue=r.createHref(ge);return Ce({fullPath:ge,hash:W,query:s===La?_p(O.query):O.query||{}},V,{redirectedFrom:void 0,href:ue})}function ee(O){return typeof O=="string"?di(n,O,c.value.path):Ce({},O)}function se(O,G){if(l!==O)return os(8,{from:G,to:O})}function ce(O){return oe(O)}function le(O){return ce(Ce(ee(O),{replace:!0}))}function ye(O){const G=O.matched[O.matched.length-1];if(G&&G.redirect){const{redirect:U}=G;let V=typeof U=="function"?U(O):U;return typeof V=="string"&&(V=V.includes("?")||V.includes("#")?V=ee(V):{path:V},V.params={}),Ce({query:O.query,hash:O.hash,params:"path"in V?{}:O.params},V)}}function oe(O,G){const U=l=I(O),V=c.value,W=O.state,ge=O.force,ue=O.replace===!0,g=ye(U);if(g)return oe(Ce(ee(g),{state:typeof g=="object"?Ce({},W,g.state):W,force:ge,replace:ue}),G||U);const w=U;w.redirectedFrom=G;let A;return!ge&&Od(s,V,U)&&(A=os(16,{to:w,from:V}),Qe(V,V,!0,!1)),(A?Promise.resolve(A):ae(w,V)).catch(k=>Gt(k)?Gt(k,2)?k:st(k):ke(k,w,V)).then(k=>{if(k){if(Gt(k,2))return oe(Ce({replace:ue},ee(k.to),{state:typeof k.to=="object"?Ce({},W,k.to.state):W,force:ge}),G||w)}else k=Pe(w,V,!0,ue,W);return fe(w,V,k),k})}function H(O,G){const U=se(O,G);return U?Promise.reject(U):Promise.resolve()}function ae(O,G){let U;const[V,W,ge]=Ap(O,G);U=pi(V.reverse(),"beforeRouteLeave",O,G);for(const g of V)g.leaveGuards.forEach(w=>{U.push(ln(w,O,G))});const ue=H.bind(null,O,G);return U.push(ue),Hn(U).then(()=>{U=[];for(const g of i.list())U.push(ln(g,O,G));return U.push(ue),Hn(U)}).then(()=>{U=pi(W,"beforeRouteUpdate",O,G);for(const g of W)g.updateGuards.forEach(w=>{U.push(ln(w,O,G))});return U.push(ue),Hn(U)}).then(()=>{U=[];for(const g of O.matched)if(g.beforeEnter&&!G.matched.includes(g))if(Rt(g.beforeEnter))for(const w of g.beforeEnter)U.push(ln(w,O,G));else U.push(ln(g.beforeEnter,O,G));return U.push(ue),Hn(U)}).then(()=>(O.matched.forEach(g=>g.enterCallbacks={}),U=pi(ge,"beforeRouteEnter",O,G),U.push(ue),Hn(U))).then(()=>{U=[];for(const g of o.list())U.push(ln(g,O,G));return U.push(ue),Hn(U)}).catch(g=>Gt(g,8)?g:Promise.reject(g))}function fe(O,G,U){for(const V of a.list())V(O,G,U)}function Pe(O,G,U,V,W){const ge=se(O,G);if(ge)return ge;const ue=G===on,g=Kn?history.state:{};U&&(V||ue?r.replace(O.fullPath,Ce({scroll:ue&&g&&g.scroll},W)):r.push(O.fullPath,W)),c.value=O,Qe(O,G,U,ue),st()}let Y;function xe(){Y||(Y=r.listen((O,G,U)=>{if(!bn.listening)return;const V=I(O),W=ye(V);if(W){oe(Ce(W,{replace:!0}),V).catch(Ts);return}l=V;const ge=c.value;Kn&&Md(Ca(ge.fullPath,U.delta),Gr()),ae(V,ge).catch(ue=>Gt(ue,12)?ue:Gt(ue,2)?(oe(ue.to,V).then(g=>{Gt(g,20)&&!U.delta&&U.type===qs.pop&&r.go(-1,!1)}).catch(Ts),Promise.reject()):(U.delta&&r.go(-U.delta,!1),ke(ue,V,ge))).then(ue=>{ue=ue||Pe(V,ge,!1),ue&&(U.delta&&!Gt(ue,8)?r.go(-U.delta,!1):U.type===qs.pop&&Gt(ue,20)&&r.go(-1,!1)),fe(V,ge,ue)}).catch(Ts)}))}let Ne=xs(),Ue=xs(),Re;function ke(O,G,U){st(O);const V=Ue.list();return V.length?V.forEach(W=>W(O,G,U)):console.error(O),Promise.reject(O)}function we(){return Re&&c.value!==on?Promise.resolve():new Promise((O,G)=>{Ne.add([O,G])})}function st(O){return Re||(Re=!O,xe(),Ne.list().forEach(([G,U])=>O?U(O):G()),Ne.reset()),O}function Qe(O,G,U,V){const{scrollBehavior:W}=t;if(!Kn||!W)return Promise.resolve();const ge=!U&&Ud(Ca(O.fullPath,0))||(V||!U)&&history.state&&history.state.scroll||null;return po().then(()=>W(O,G,ge)).then(ue=>ue&&jd(ue)).catch(ue=>ke(ue,O,G))}const Xe=O=>r.go(O);let He;const dt=new Set,bn={currentRoute:c,listening:!0,addRoute:b,removeRoute:S,hasRoute:K,getRoutes:R,resolve:I,options:t,push:ce,replace:le,go:Xe,back:()=>Xe(-1),forward:()=>Xe(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:Ue.add,isReady:we,install(O){const G=this;O.component("RouterLink",Hi),O.component("RouterView",ql),O.config.globalProperties.$router=G,Object.defineProperty(O.config.globalProperties,"$route",{enumerable:!0,get:()=>ve(c)}),Kn&&!He&&c.value===on&&(He=!0,ce(r.location).catch(W=>{}));const U={};for(const W in on)U[W]=et(()=>c.value[W]);O.provide(Wr,G),O.provide(Bl,ds(U)),O.provide(qi,c);const V=O.unmount;dt.add(O),O.unmount=function(){dt.delete(O),dt.size<1&&(l=on,Y&&Y(),Y=null,c.value=on,He=!1,Re=!1),V()}}};return bn}function Hn(t){return t.reduce((e,n)=>e.then(()=>n()),Promise.resolve())}function Ap(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(l=>is(l,a))?s.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(l=>is(l,c))||r.push(c))}return[n,s,r]}function kp(){return bt(Wr)}var _r=(t=>(t.DataframeRow="pi.qc.df",t.SystemctlCommand="pi.command.systemctl",t.MediaCommand="pi.command.media",t))(_r||{}),Cp=(t=>(t.Active="active",t.Inactive="inactive",t.Unknown="unknown",t))(Cp||{}),Ct=(t=>(t[t.ConnectionNotStarted=0]="ConnectionNotStarted",t[t.ConnectionLoading=1]="ConnectionLoading",t[t.ConnectionReady=2]="ConnectionReady",t[t.ConnectionStreamLoading=3]="ConnectionStreamLoading",t[t.ConnectionStreamReady=4]="ConnectionStreamReady",t[t.ConnectionError=5]="ConnectionError",t))(Ct||{}),Pp=(t=>(t.Start="start",t.Stop="stop",t.Restart="restart",t.Status="status",t.Enable="enable",t.Disable="disable",t.ListEnabled="list_enabled",t))(Pp||{}),zi=(t=>(t.Start="start",t.Stop="stop",t))(zi||{});const Et=new Uint8Array(0);var Tn;(function(t){t.Disconnect="disconnect",t.Reconnect="reconnect",t.Update="update",t.LDM="ldm",t.Error="error"})(Tn||(Tn={}));var Hs;(function(t){t.Reconnecting="reconnecting",t.PingTimer="pingTimer",t.StaleConnection="staleConnection"})(Hs||(Hs={}));const Gi="127.0.0.1",Hl=2*1e3,zl=2*60*1e3,Op=2;var Yt;(function(t){t.Timer="timer",t.Count="count",t.JitterTimer="jitterTimer",t.SentinelMsg="sentinelMsg"})(Yt||(Yt={}));var Ba;(function(t){t.API="api_audit",t.StreamAction="stream_action",t.ConsumerAction="consumer_action",t.SnapshotCreate="snapshot_create",t.SnapshotComplete="snapshot_complete",t.RestoreCreate="restore_create",t.RestoreComplete="restore_complete",t.MaxDeliver="max_deliver",t.Terminated="terminated",t.Ack="consumer_ack",t.StreamLeaderElected="stream_leader_elected",t.StreamQuorumLost="stream_quorum_lost",t.ConsumerLeaderElected="consumer_leader_elected",t.ConsumerQuorumLost="consumer_quorum_lost"})(Ba||(Ba={}));var Wi;(function(t){t.Limits="limits",t.Interest="interest",t.Workqueue="workqueue"})(Wi||(Wi={}));var zs;(function(t){t.Old="old",t.New="new"})(zs||(zs={}));var Ki;(function(t){t.File="file",t.Memory="memory"})(Ki||(Ki={}));var _t;(function(t){t.All="all",t.Last="last",t.New="new",t.StartSequence="by_start_sequence",t.StartTime="by_start_time",t.LastPerSubject="last_per_subject"})(_t||(_t={}));var Ze;(function(t){t.None="none",t.All="all",t.Explicit="explicit",t.NotSet=""})(Ze||(Ze={}));var as;(function(t){t.Instant="instant",t.Original="original"})(as||(as={}));var $t;(function(t){t.StreamSourceHdr="Nats-Stream-Source",t.LastConsumerSeqHdr="Nats-Last-Consumer",t.LastStreamSeqHdr="Nats-Last-Stream",t.ConsumerStalledHdr="Nats-Consumer-Stalled",t.MessageSizeHdr="Nats-Msg-Size",t.RollupHdr="Nats-Rollup",t.RollupValueSubject="sub",t.RollupValueAll="all"})($t||($t={}));var Jn;(function(t){t.Stream="Nats-Stream",t.Sequence="Nats-Sequence",t.TimeStamp="Nats-Time-Stamp",t.Subject="Nats-Subject"})(Jn||(Jn={}));var qa;(function(t){t.Stream="Nats-Stream",t.Subject="Nats-Subject",t.Sequence="Nats-Sequence",t.LastSequence="Nats-Last-Sequence",t.Size="Nats-Msg-Size"})(qa||(qa={}));var q;(function(t){t.ApiError="BAD API",t.BadAuthentication="BAD_AUTHENTICATION",t.BadCreds="BAD_CREDS",t.BadHeader="BAD_HEADER",t.BadJson="BAD_JSON",t.BadPayload="BAD_PAYLOAD",t.BadSubject="BAD_SUBJECT",t.Cancelled="CANCELLED",t.ConnectionClosed="CONNECTION_CLOSED",t.ConnectionDraining="CONNECTION_DRAINING",t.ConnectionRefused="CONNECTION_REFUSED",t.ConnectionTimeout="CONNECTION_TIMEOUT",t.Disconnect="DISCONNECT",t.InvalidOption="INVALID_OPTION",t.InvalidPayload="INVALID_PAYLOAD",t.MaxPayloadExceeded="MAX_PAYLOAD_EXCEEDED",t.NoResponders="503",t.NotFunction="NOT_FUNC",t.RequestError="REQUEST_ERROR",t.ServerOptionNotAvailable="SERVER_OPT_NA",t.SubClosed="SUB_CLOSED",t.SubDraining="SUB_DRAINING",t.Timeout="TIMEOUT",t.Tls="TLS",t.Unknown="UNKNOWN_ERROR",t.WssRequired="WSS_REQUIRED",t.JetStreamInvalidAck="JESTREAM_INVALID_ACK",t.JetStream404NoMessages="404",t.JetStream408RequestTimeout="408",t.JetStream409MaxAckPendingExceeded="409",t.JetStream409="409",t.JetStreamNotEnabled="503",t.AuthorizationViolation="AUTHORIZATION_VIOLATION",t.AuthenticationExpired="AUTHENTICATION_EXPIRED",t.ProtocolError="NATS_PROTOCOL_ERR",t.PermissionsViolation="PERMISSIONS_VIOLATION"})(q||(q={}));class Gl{constructor(){y(this,"messages");this.messages=new Map,this.messages.set(q.InvalidPayload,"Invalid payload type - payloads can be 'binary', 'string', or 'json'"),this.messages.set(q.BadJson,"Bad JSON"),this.messages.set(q.WssRequired,"TLS is required, therefore a secure websocket connection is also required")}static getMessage(e){return $p.getMessage(e)}getMessage(e){return this.messages.get(e)||e}}const $p=new Gl;function Tp(t){return typeof t.code=="string"}class te extends Error{constructor(n,s,r){super(n);y(this,"name");y(this,"message");y(this,"code");y(this,"permissionContext");y(this,"chainedError");y(this,"api_error");this.name="NatsError",this.message=n,this.code=s,this.chainedError=r}static errorForCode(n,s){const r=Gl.getMessage(n);return new te(r,n,s)}isAuthError(){return this.code===q.AuthenticationExpired||this.code===q.AuthorizationViolation}isPermissionError(){return this.code===q.PermissionsViolation}isProtocolError(){return this.code===q.ProtocolError}isJetStreamError(){return this.api_error!==void 0}jsError(){return this.api_error?this.api_error:null}}const ps=new TextEncoder,Ht=new TextDecoder;function Np(...t){let e=0;for(let r=0;r<t.length;r++)e+=t[r].length;const n=new Uint8Array(e);let s=0;for(let r=0;r<t.length;r++)n.set(t[r],s),s+=t[r].length;return n}function Rs(...t){const e=[];for(let n=0;n<t.length;n++)e.push(ps.encode(t[n]));return e.length===0?Et:e.length===1?e[0]:Np(...e)}function Ha(t){return!t||t.length===0?"":Ht.decode(t)}function Rp(){return{encode(t){return ps.encode(t)},decode(t){return Ht.decode(t)}}}function Vt(t){return{encode(e){try{return e===void 0&&(e=null),ps.encode(JSON.stringify(e))}catch(n){throw te.errorForCode(q.BadJson,n)}},decode(e){try{return JSON.parse(Ht.decode(e),t)}catch(n){throw te.errorForCode(q.BadJson,n)}}}}const za="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",Ga=36,Ip=0xcfd41b9100000,Wa=33,Lp=333,Ka=12+10;function jp(t){for(let e=0;e<t.length;e++)t[e]=Math.floor(Math.random()*255)}function Mp(t){var e;(e=globalThis==null?void 0:globalThis.crypto)!=null&&e.getRandomValues?globalThis.crypto.getRandomValues(t):jp(t)}class Up{constructor(){y(this,"buf");y(this,"seq");y(this,"inc");this.buf=new Uint8Array(Ka),this.init()}init(){this.setPre(),this.initSeqAndInc(),this.fillSeq()}initSeqAndInc(){this.seq=Math.floor(Math.random()*Ip),this.inc=Math.floor(Math.random()*(Lp-Wa)+Wa)}setPre(){const e=new Uint8Array(12);Mp(e);for(let n=0;n<12;n++){const s=e[n]%36;this.buf[n]=za.charCodeAt(s)}}fillSeq(){let e=this.seq;for(let n=Ka-1;n>=12;n--)this.buf[n]=za.charCodeAt(e%Ga),e=Math.floor(e/Ga)}next(){return this.seq+=this.inc,this.seq>0xcfd41b9100000&&(this.setPre(),this.initSeqAndInc()),this.fillSeq(),String.fromCharCode.apply(String,this.buf)}reset(){this.init()}}const Po=new Up;class Ys{constructor(){y(this,"buffers");y(this,"byteLength");this.buffers=[],this.byteLength=0}static concat(...e){let n=0;for(let i=0;i<e.length;i++)n+=e[i].length;const s=new Uint8Array(n);let r=0;for(let i=0;i<e.length;i++)s.set(e[i],r),r+=e[i].length;return s}static fromAscii(e){return e||(e=""),ps.encode(e)}static toAscii(e){return Ht.decode(e)}reset(){this.buffers.length=0,this.byteLength=0}pack(){if(this.buffers.length>1){const e=new Uint8Array(this.byteLength);let n=0;for(let s=0;s<this.buffers.length;s++)e.set(this.buffers[s],n),n+=this.buffers[s].length;this.buffers.length=0,this.buffers.push(e)}}shift(){if(this.buffers.length){const e=this.buffers.shift();if(e)return this.byteLength-=e.length,e}return new Uint8Array(0)}drain(e){if(this.buffers.length){this.pack();const n=this.buffers.pop();if(n){const s=this.byteLength;(e===void 0||e>s)&&(e=s);const r=n.subarray(0,e);return s>e&&this.buffers.push(n.subarray(e)),this.byteLength=s-e,r}}return new Uint8Array(0)}fill(e,...n){e&&(this.buffers.push(e),this.byteLength+=e.length);for(let s=0;s<n.length;s++)n[s]&&n[s].length&&(this.buffers.push(n[s]),this.byteLength+=n[s].length)}peek(){return this.buffers.length?(this.pack(),this.buffers[0]):new Uint8Array(0)}size(){return this.byteLength}length(){return this.buffers.length}}const Cn=`\r
`,Or=Ys.fromAscii(Cn),Dp=new Uint8Array(Or)[0],Fp=new Uint8Array(Or)[1];function Bp(t){return t instanceof Uint8Array}function qp(t){for(let e=0;e<t.length;e++){const n=e+1;if(t.byteLength>n&&t[e]===Dp&&t[n]===Fp)return n+1}return 0}function Hp(t){const e=qp(t);if(e>0){const s=new Uint8Array(t).slice(0,e);return Ht.decode(s)}return""}function Kr(t,...e){for(let n=0;n<e.length;n++){const s=e[n];Object.keys(s).forEach(function(r){t[r]=s[r]})}return t}function ar(t){const e="\u240D",n="\u240A";return Ht.decode(t).replace(/\n/g,n).replace(/\r/g,e)}function Vr(t){const e=te.errorForCode(q.Timeout);let n,s;const r=new Promise((i,o)=>{n={cancel:()=>{s&&clearTimeout(s)}},s=setTimeout(()=>{o(e)},t)});return Object.assign(r,n)}function Oo(t=0){return new Promise(e=>{setTimeout(()=>{e()},t)})}function We(){let t={};const e=new Promise((n,s)=>{t={resolve:n,reject:s}});return Object.assign(e,t)}function Wl(t){for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}function Va(t){let s=!0;const r=new Array(t.length);for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);if(o===58||o<33||o>126)throw new te(`'${t[i]}' is not a valid character for a header key`,q.BadHeader);s&&97<=o&&o<=122?o-=32:!s&&65<=o&&o<=90&&(o+=32),r[i]=o,s=o==45}return String.fromCharCode(...r)}function cs(){return new pn}const mi="NATS/1.0";var vt;(function(t){t[t.Exact=0]="Exact",t[t.CanonicalMIME=1]="CanonicalMIME",t[t.IgnoreCase=2]="IgnoreCase"})(vt||(vt={}));class pn{constructor(){y(this,"code");y(this,"headers");y(this,"description");this.code=0,this.headers=new Map,this.description=""}[Symbol.iterator](){return this.headers.entries()}size(){return this.headers.size}equals(e){if(e&&this.headers.size===e.headers.size&&this.code===e.code){for(const[n,s]of this.headers){const r=e.values(n);if(s.length!==r.length)return!1;const i=[...s].sort(),o=[...r].sort();for(let a=0;a<i.length;a++)if(i[a]!==o[a])return!1}return!0}return!1}static decode(e){const n=new pn,r=Ht.decode(e).split(`\r
`),i=r[0];if(i!==mi){let o=i.replace(mi,"");n.code=parseInt(o,10);const a=n.code.toString();o=o.replace(a,""),n.description=o.trim()}return r.length>=1&&r.slice(1).map(o=>{if(o){const a=o.indexOf(":");if(a>-1){const c=o.slice(0,a),l=o.slice(a+1).trim();n.append(c,l)}}}),n}toString(){if(this.headers.size===0)return"";let e=mi;for(const[n,s]of this.headers)for(let r=0;r<s.length;r++)e=`${e}\r
${n}: ${s[r]}`;return`${e}\r
\r
`}encode(){return ps.encode(this.toString())}static validHeaderValue(e){if(/[\r\n]/.test(e))throw new te("invalid header value - \\r and \\n are not allowed.",q.BadHeader);return e.trim()}keys(){const e=[];for(const n of this.headers.keys())e.push(n);return e}findKeys(e,n=vt.Exact){const s=this.keys();switch(n){case vt.Exact:return s.filter(r=>r===e);case vt.CanonicalMIME:return e=Va(e),s.filter(r=>r===e);default:{const r=e.toLowerCase();return s.filter(i=>r===i.toLowerCase())}}}get(e,n=vt.Exact){const s=this.findKeys(e,n);if(s.length){const r=this.headers.get(s[0]);if(r)return Array.isArray(r)?r[0]:r}return""}has(e,n=vt.Exact){return this.findKeys(e,n).length>0}set(e,n,s=vt.Exact){this.delete(e,s),this.append(e,n,s)}append(e,n,s=vt.Exact){const r=Va(e);s===vt.CanonicalMIME&&(e=r);const i=this.findKeys(e,s);e=i.length>0?i[0]:e;const o=pn.validHeaderValue(n);let a=this.headers.get(e);a||(a=[],this.headers.set(e,a)),a.push(o)}values(e,n=vt.Exact){const s=[];return this.findKeys(e,n).forEach(i=>{const o=this.headers.get(i);o&&s.push(...o)}),s}delete(e,n=vt.Exact){this.findKeys(e,n).forEach(r=>{this.headers.delete(r)})}get hasError(){return this.code>=300}get status(){return`${this.code} ${this.description}`.trim()}toRecord(){const e={};return this.keys().forEach(n=>{e[n]=this.values(n)}),e}static fromRecord(e){const n=new pn;for(const s in e)n.headers.set(s,e[s]);return n}}function es(t){return Kl("durable",t)}function ut(t){return Kl("stream",t)}function Kl(t,e=""){if(e==="")throw Error(`${t} name required`);[".","*",">"].forEach(s=>{if(e.indexOf(s)!==-1)throw Error(`invalid ${t} name - ${t} name cannot contain '${s}'`)})}function zp(t,e={}){return Object.assign({name:t,deliver_policy:_t.All,ack_policy:Ze.Explicit,ack_wait:at(30*1e3),replay_policy:as.Instant},e)}function at(t){return t*1e6}function Ya(t){return Math.floor(t/1e6)}function Vi(t){if(t.data.length>0)return!1;const e=t.headers;return e?e.code>=100&&e.code<200:!1}function Gp(t){var e;return Vi(t)&&((e=t.headers)==null?void 0:e.description)==="Idle Heartbeat"}function Gs(t){if(t.data.length!==0)return null;const e=t.headers;return e?Vl(e.code,e.description):null}var Nn;(function(t){t.MaxBatchExceeded="exceeded maxrequestbatch of",t.MaxExpiresExceeded="exceeded maxrequestexpires of",t.MaxBytesExceeded="exceeded maxrequestmaxbytes of",t.MaxMessageSizeExceeded="message size exceeds maxbytes",t.PushConsumer="consumer is push based",t.MaxWaitingExceeded="exceeded maxwaiting"})(Nn||(Nn={}));function Wp(t){return t.code!==q.JetStream409?!1:[Nn.MaxBatchExceeded,Nn.MaxExpiresExceeded,Nn.MaxBytesExceeded,Nn.MaxMessageSizeExceeded,Nn.PushConsumer].find(n=>t.message.indexOf(n)!==-1)!==void 0}function Vl(t,e=""){if(t<300)return null;switch(e=e.toLowerCase(),t){case 404:return new te(e,q.JetStream404NoMessages);case 408:return new te(e,q.JetStream408RequestTimeout);case 409:return new te(e,q.JetStream409);case 503:return te.errorForCode(q.JetStreamNotEnabled,new Error(e));default:return e===""&&(e=q.Unknown),new te(e,`${t}`)}}function mn(t){return new Kp(t)}class Kp{constructor(e){y(this,"config");y(this,"ordered");y(this,"mack");y(this,"stream");y(this,"callbackFn");y(this,"max");y(this,"qname");y(this,"isBind");this.stream="",this.mack=!1,this.ordered=!1,this.config=zp("",e||{})}getOpts(){const e={};return e.config=this.config,e.mack=this.mack,e.stream=this.stream,e.callbackFn=this.callbackFn,e.max=this.max,e.queue=this.qname,e.ordered=this.ordered,e.config.ack_policy=e.ordered?Ze.None:e.config.ack_policy,e.isBind=e.isBind||!1,e}description(e){return this.config.description=e,this}deliverTo(e){return this.config.deliver_subject=e,this}durable(e){return es(e),this.config.durable_name=e,this}startSequence(e){if(e<=0)throw new Error("sequence must be greater than 0");return this.config.deliver_policy=_t.StartSequence,this.config.opt_start_seq=e,this}startTime(e){return this.config.deliver_policy=_t.StartTime,this.config.opt_start_time=e.toISOString(),this}deliverAll(){return this.config.deliver_policy=_t.All,this}deliverLastPerSubject(){return this.config.deliver_policy=_t.LastPerSubject,this}deliverLast(){return this.config.deliver_policy=_t.Last,this}deliverNew(){return this.config.deliver_policy=_t.New,this}startAtTimeDelta(e){return this.startTime(new Date(Date.now()-e)),this}headersOnly(){return this.config.headers_only=!0,this}ackNone(){return this.config.ack_policy=Ze.None,this}ackAll(){return this.config.ack_policy=Ze.All,this}ackExplicit(){return this.config.ack_policy=Ze.Explicit,this}ackWait(e){return this.config.ack_wait=at(e),this}maxDeliver(e){return this.config.max_deliver=e,this}filterSubject(e){return this.config.filter_subject=e,this}replayInstantly(){return this.config.replay_policy=as.Instant,this}replayOriginal(){return this.config.replay_policy=as.Original,this}sample(e){if(e=Math.trunc(e),e<0||e>100)throw new Error("value must be between 0-100");return this.config.sample_freq=`${e}%`,this}limit(e){return this.config.rate_limit_bps=e,this}maxWaiting(e){return this.config.max_waiting=e,this}maxAckPending(e){return this.config.max_ack_pending=e,this}idleHeartbeat(e){return this.config.idle_heartbeat=at(e),this}flowControl(){return this.config.flow_control=!0,this}deliverGroup(e){return this.queue(e),this}manualAck(){return this.mack=!0,this}maxMessages(e){return this.max=e,this}callback(e){return this.callbackFn=e,this}queue(e){return this.qname=e,this.config.deliver_group=e,this}orderedConsumer(){return this.ordered=!0,this}bind(e,n){return this.stream=e,this.config.durable_name=n,this.isBind=!0,this}inactiveEphemeralThreshold(e){return this.config.inactive_threshold=at(e),this}maxPullBatch(e){return this.config.max_batch=e,this}maxPullRequestExpires(e){return this.config.max_expires=at(e),this}memory(){return this.config.mem_storage=!0,this}numReplicas(e){return this.config.num_replicas=e,this}}function Ja(t){return typeof t.getOpts=="function"}class Nt{constructor(){y(this,"inflight");y(this,"processed");y(this,"received");y(this,"noIterator");y(this,"iterClosed");y(this,"done");y(this,"signal");y(this,"yields");y(this,"filtered");y(this,"pendingFiltered");y(this,"ingestionFilterFn");y(this,"protocolFilterFn");y(this,"dispatchedFn");y(this,"ctx");y(this,"_data");y(this,"err");this.inflight=0,this.filtered=0,this.pendingFiltered=0,this.processed=0,this.received=0,this.noIterator=!1,this.done=!1,this.signal=We(),this.yields=[],this.iterClosed=We()}[Symbol.asyncIterator](){return this.iterate()}push(e){if(this.done)return;if(typeof e=="function"){this.yields.push(e),this.signal.resolve();return}const{ingest:n,protocol:s}=this.ingestionFilterFn?this.ingestionFilterFn(e,this.ctx||this):{ingest:!0,protocol:!1};n&&(s&&(this.filtered++,this.pendingFiltered++),this.yields.push(e),this.signal.resolve())}async*iterate(){if(this.noIterator)throw new te("unsupported iterator",q.ApiError);try{for(;;){if(this.yields.length===0&&await this.signal,this.err)throw this.err;const e=this.yields;this.inflight=e.length,this.yields=[];for(let n=0;n<e.length;n++){if(typeof e[n]=="function"){const r=e[n];try{r()}catch(i){throw i}continue}(this.protocolFilterFn?this.protocolFilterFn(e[n]):!0)?(this.processed++,yield e[n],this.dispatchedFn&&e[n]&&this.dispatchedFn(e[n])):this.pendingFiltered--,this.inflight--}if(this.done)break;this.yields.length===0&&(e.length=0,this.yields=e,this.signal=We())}}finally{this.stop()}}stop(e){this.done||(this.err=e,this.done=!0,this.signal.resolve(),this.iterClosed.resolve())}getProcessed(){return this.noIterator?this.received:this.processed}getPending(){return this.yields.length+this.inflight-this.pendingFiltered}getReceived(){return this.received-this.filtered}}function Qa(t){const e=t.length;let n=t.indexOf("=");n===-1&&(n=e);const s=n===e?0:4-n%4;return[n,s]}function Vp(t,e,n=!1){function s(o,a){return Math.floor((o+a)*3/4-a)}function r(o){return t[o>>18&63]+t[o>>12&63]+t[o>>6&63]+t[o&63]}function i(o,a,c){const l=new Array((c-a)/3);for(let u=a,d=0;u<c;u+=3)l[d++]=r((o[u]<<16)+(o[u+1]<<8)+o[u+2]);return l.join("")}return{byteLength(o){return s.apply(null,Qa(o))},toUint8Array(o){const[a,c]=Qa(o),l=new Uint8Array(s(a,c)),u=c?a-4:a;let d,m=0,b;for(b=0;b<u;b+=4)d=e[o.charCodeAt(b)]<<18|e[o.charCodeAt(b+1)]<<12|e[o.charCodeAt(b+2)]<<6|e[o.charCodeAt(b+3)],l[m++]=d>>16&255,l[m++]=d>>8&255,l[m++]=d&255;return c===2?(d=e[o.charCodeAt(b)]<<2|e[o.charCodeAt(b+1)]>>4,l[m++]=d&255):c===1&&(d=e[o.charCodeAt(b)]<<10|e[o.charCodeAt(b+1)]<<4|e[o.charCodeAt(b+2)]>>2,l[m++]=d>>8&255,l[m++]=d&255),l},fromUint8Array(o){const c=o.length,l=c%3,u=c-l,d=new Array(Math.ceil(u/16383)+(l?1:0));let m=0,b;for(let R=0;R<u;R+=16383)b=R+16383,d[m++]=i(o,R,b>u?u:b);let S;return l===1?(S=o[u],d[m]=t[S>>2]+t[S<<4&63],n||(d[m]+="==")):l===2&&(S=o[u]<<8|o[u+1]&255,d[m]=t[S>>10]+t[S>>4&63]+t[S<<2&63],n||(d[m]+="=")),d.join("")}}}const Yl=[],Jl=[],gi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";for(let t=0,e=gi.length;t<e;++t)Yl[t]=gi[t],Jl[gi.charCodeAt(t)]=t;const{byteLength:C_,toUint8Array:Yp,fromUint8Array:Jp}=Vp(Yl,Jl,!0),Qp=new TextDecoder,Xp=new TextEncoder;function Zp(t){return t.reduce((e,n)=>`${e}${n<16?"0":""}${n.toString(16)}`,"")}function em(t){const e=t.length;if(e%2||!/^[0-9a-fA-F]+$/.test(t))throw new TypeError("Invalid hex string.");t=t.toLowerCase();const n=new Uint8Array(Math.floor(e/2)),s=e/2;for(let r=0;r<s;++r)n[r]=parseInt(t.substr(r*2,2),16);return n}function tm(t,e="utf8"){if(/^utf-?8$/i.test(e))return Qp.decode(t);if(/^base64$/i.test(e))return Jp(t);if(/^hex(?:adecimal)?$/i.test(e))return Zp(t);throw new TypeError("Unsupported string encoding.")}function nm(t,e="utf8"){if(/^utf-?8$/i.test(e))return Xp.encode(t);if(/^base64$/i.test(e))return Yp(t);if(/^hex(?:adecimal)?$/i.test(e))return em(t);throw new TypeError("Unsupported string encoding.")}class Xa{constructor(){y(this,"hashSize",32);y(this,"_buf");y(this,"_bufIdx");y(this,"_count");y(this,"_K");y(this,"_H");y(this,"_finalized");this._buf=new Uint8Array(64),this._K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),this.init()}init(){return this._H=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),this._bufIdx=0,this._count=new Uint32Array(2),this._buf.fill(0),this._finalized=!1,this}update(e,n){if(e===null)throw new TypeError("msg must be a string or Uint8Array.");typeof e=="string"&&(e=nm(e,n));for(let r=0,i=e.length;r<i;r++)this._buf[this._bufIdx++]=e[r],this._bufIdx===64&&(this._transform(),this._bufIdx=0);const s=this._count;return(s[0]+=e.length<<3)<e.length<<3&&s[1]++,s[1]+=e.length>>>29,this}digest(e){if(this._finalized)throw new Error("digest has already been called.");this._finalized=!0;const n=this._buf;let s=this._bufIdx;for(n[s++]=128;s!==56;)s===64&&(this._transform(),s=0),n[s++]=0;const r=this._count;n[56]=r[1]>>>24&255,n[57]=r[1]>>>16&255,n[58]=r[1]>>>8&255,n[59]=r[1]>>>0&255,n[60]=r[0]>>>24&255,n[61]=r[0]>>>16&255,n[62]=r[0]>>>8&255,n[63]=r[0]>>>0&255,this._transform();const i=new Uint8Array(32);for(let o=0;o<8;o++)i[(o<<2)+0]=this._H[o]>>>24&255,i[(o<<2)+1]=this._H[o]>>>16&255,i[(o<<2)+2]=this._H[o]>>>8&255,i[(o<<2)+3]=this._H[o]>>>0&255;return this.init(),e?tm(i,e):i}_transform(){const e=this._H;let n=e[0],s=e[1],r=e[2],i=e[3],o=e[4],a=e[5],c=e[6],l=e[7];const u=new Uint32Array(16);let d;for(d=0;d<16;d++)u[d]=this._buf[(d<<2)+3]|this._buf[(d<<2)+2]<<8|this._buf[(d<<2)+1]<<16|this._buf[d<<2]<<24;for(d=0;d<64;d++){let m;if(d<16)m=u[d];else{let b=u[d+1&15],S=u[d+14&15];m=u[d&15]=(b>>>7^b>>>18^b>>>3^b<<25^b<<14)+(S>>>17^S>>>19^S>>>10^S<<15^S<<13)+u[d&15]+u[d+9&15]|0}m=m+l+(o>>>6^o>>>11^o>>>25^o<<26^o<<21^o<<7)+(c^o&(a^c))+this._K[d]|0,l=c,c=a,a=o,o=i+m,i=r,r=s,s=n,n=m+(s&r^i&(s^r))+(s>>>2^s>>>13^s>>>22^s<<30^s<<19^s<<10)|0}e[0]=e[0]+n|0,e[1]=e[1]+s|0,e[2]=e[2]+r|0,e[3]=e[3]+i|0,e[4]=e[4]+o|0,e[5]=e[5]+a|0,e[6]=e[6]+c|0,e[7]=e[7]+l|0}}function ls(t){const e=t.match(/(\d+).(\d+).(\d+)/);if(e)return{major:parseInt(e[1]),minor:parseInt(e[2]),micro:parseInt(e[3])};throw new Error(`${t} is not a semver value`)}function $r(t,e){return t.major<e.major?-1:t.major>e.major?1:t.minor<e.minor?-1:t.minor>e.minor?1:t.micro<e.micro?-1:t.micro>e.micro?1:0}var Ws;(function(t){t.JS_PULL_MAX_BYTES="js_pull_max_bytes"})(Ws||(Ws={}));class Za{constructor(e){y(this,"server");y(this,"features");this.features=new Map,this.server=e,this.set(Ws.JS_PULL_MAX_BYTES,"2.8.3")}set(e,n){this.features.set(e,{min:n,ok:$r(this.server,ls(n))>=0})}get(e){return this.features.get(e)||{min:"unknown",ok:!1}}supports(e){return this.get(e).ok}require(e){return typeof e=="string"&&(e=ls(e)),$r(this.server,e)>=0}}const sm="$JS.API";function rm(t){return t=t||{},t.domain&&(t.apiPrefix=`$JS.${t.domain}.API`,delete t.domain),Kr({apiPrefix:sm,timeout:5e3},t)}class Js{constructor(e,n){y(this,"nc");y(this,"opts");y(this,"prefix");y(this,"timeout");y(this,"jc");this.nc=e,this.opts=rm(n),this._parseOpts(),this.prefix=this.opts.apiPrefix,this.timeout=this.opts.timeout,this.jc=Vt()}_parseOpts(){let e=this.opts.apiPrefix;if(!e||e.length===0)throw new Error("invalid empty prefix");e[e.length-1]==="."&&(e=e.substr(0,e.length-1)),this.opts.apiPrefix=e}async _request(e,n=null,s){s=s||{},s.timeout=this.timeout;let r=Et;n&&(r=this.jc.encode(n));const i=await this.nc.request(e,r,s);return this.parseJsResponse(i)}async findStream(e){const n={subject:e},r=await this._request(`${this.prefix}.STREAM.NAMES`,n);if(!r.streams||r.streams.length!==1)throw new Error("no stream matches subject");return r.streams[0]}parseJsResponse(e){const n=this.jc.decode(e.data),s=n;if(s.error){const r=Vl(s.error.code,s.error.description);if(r!==null)throw r.api_error=s.error,r}return n}}class Ql{constructor(e,n,s){y(this,"err");y(this,"offset");y(this,"pageInfo");y(this,"subject");y(this,"jsm");y(this,"filter");if(!e)throw new Error("subject is required");this.subject=e,this.jsm=s,this.offset=0,this.pageInfo={},this.filter=n}async next(){if(this.err)return[];if(this.pageInfo&&this.offset>=this.pageInfo.total)return[];const e={offset:this.offset};try{const n=await this.jsm._request(this.subject,e,{timeout:this.jsm.timeout});this.pageInfo=n;const s=this.filter(n);return this.offset+=s.length,s}catch(n){throw this.err=n,n}}async*[Symbol.asyncIterator](){let e=await this.next();for(;e.length>0;){for(const n of e)yield n;e=await this.next()}}}class Xl extends Js{constructor(e,n){super(e,n)}async add(e,n){if(ut(e),n.deliver_group&&n.flow_control)throw new Error("jetstream flow control is not supported with queue groups");if(n.deliver_group&&n.idle_heartbeat)throw new Error("jetstream idle heartbeat is not supported with queue groups");const s={};s.config=n,s.stream_name=e,s.config.durable_name&&es(s.config.durable_name);const r=n.durable_name?`${this.prefix}.CONSUMER.DURABLE.CREATE.${e}.${n.durable_name}`:`${this.prefix}.CONSUMER.CREATE.${e}`;return await this._request(r,s)}async update(e,n,s){const r=await this.info(e,n),i=s;return this.add(e,Object.assign(r.config,i))}async info(e,n){return ut(e),es(n),await this._request(`${this.prefix}.CONSUMER.INFO.${e}.${n}`)}async delete(e,n){return ut(e),es(n),(await this._request(`${this.prefix}.CONSUMER.DELETE.${e}.${n}`)).success}list(e){ut(e);const n=r=>r.consumers,s=`${this.prefix}.CONSUMER.LIST.${e}`;return new Ql(s,n,this)}}class Zl{constructor(e,n){y(this,"token");y(this,"received");y(this,"ctx");y(this,"requestSubject");y(this,"mux");this.mux=e,this.requestSubject=n,this.received=0,this.token=Po.next(),this.ctx=new Error}}class im extends Zl{constructor(n,s,r={maxWait:1e3}){super(n,s);y(this,"callback");y(this,"done");y(this,"timer");y(this,"max");y(this,"opts");if(this.opts=r,typeof this.opts.callback!="function")throw new Error("callback is required");this.callback=this.opts.callback,this.max=typeof r.maxMessages=="number"&&r.maxMessages>0?r.maxMessages:-1,this.done=We(),this.done.then(()=>{this.callback(null,null)}),this.timer=setTimeout(()=>{this.cancel()},r.maxWait)}cancel(n){n&&this.callback(n,null),clearTimeout(this.timer),this.mux.cancel(this),this.done.resolve()}resolver(n,s){n?(n.stack+=`

${this.ctx.stack}`,this.cancel(n)):(this.callback(null,s),this.opts.strategy===Yt.Count&&(this.max--,this.max===0&&this.cancel()),this.opts.strategy===Yt.JitterTimer&&(clearTimeout(this.timer),this.timer=setTimeout(()=>{this.cancel()},300)),this.opts.strategy===Yt.SentinelMsg&&s&&s.data.length===0&&this.cancel())}}class eu extends Zl{constructor(n,s,r={timeout:1e3}){super(n,s);y(this,"deferred");y(this,"timer");this.deferred=We(),this.timer=Vr(r.timeout)}resolver(n,s){this.timer&&this.timer.cancel(),n?(n.stack+=`

${this.ctx.stack}`,this.deferred.reject(n)):this.deferred.resolve(s),this.cancel()}cancel(n){this.timer&&this.timer.cancel(),this.mux.cancel(this),this.deferred.reject(n||te.errorForCode(q.Cancelled))}}const ec=Uint8Array.of(43,65,67,75),om=Uint8Array.of(45,78,65,75),vs=Uint8Array.of(43,87,80,73),am=Uint8Array.of(43,78,88,84),cm=Uint8Array.of(43,84,69,82,77),lm=Uint8Array.of(32);function Tr(t){return new fm(t)}function um(t){const e=t.split(".");if(e.length===9&&e.splice(2,0,"_",""),e.length<11||e[0]!=="$JS"||e[1]!=="ACK")throw new Error("not js message");const n={};return n.domain=e[2]==="_"?"":e[2],n.account_hash=e[3],n.stream=e[4],n.consumer=e[5],n.redeliveryCount=parseInt(e[6],10),n.redelivered=n.redeliveryCount>1,n.streamSequence=parseInt(e[7],10),n.deliverySequence=parseInt(e[8],10),n.timestampNanos=parseInt(e[9],10),n.pending=parseInt(e[10],10),n}class fm{constructor(e){y(this,"msg");y(this,"di");y(this,"didAck");this.msg=e,this.didAck=!1}get subject(){return this.msg.subject}get sid(){return this.msg.sid}get data(){return this.msg.data}get headers(){return this.msg.headers}get info(){return this.di||(this.di=um(this.reply)),this.di}get redelivered(){return this.info.redeliveryCount>1}get reply(){return this.msg.reply||""}get seq(){return this.info.streamSequence}doAck(e){this.didAck||(this.didAck=!this.isWIP(e),this.msg.respond(e))}isWIP(e){return e.length===4&&e[0]===vs[0]&&e[1]===vs[1]&&e[2]===vs[2]&&e[3]===vs[3]}async ackAck(){if(!this.didAck&&(this.didAck=!0,this.msg.reply)){const n=this.msg.publisher,s=new eu(n.muxSubscriptions,this.msg.reply);n.request(s);try{n.publish(this.msg.reply,ec,{reply:`${n.muxSubscriptions.baseInbox}${s.token}`})}catch(r){s.cancel(r)}try{return await Promise.race([s.timer,s.deferred]),!0}catch(r){s.cancel(r)}}return!1}ack(){this.doAck(ec)}nak(e){let n=om;e&&(n=Rp().encode(`-NAK ${JSON.stringify({delay:at(e)})}`)),this.doAck(n)}working(){this.doAck(vs)}next(e,n={batch:1}){const s={};s.batch=n.batch||1,s.no_wait=n.no_wait||!1,n.expires&&n.expires>0&&(s.expires=at(n.expires));const r=Vt().encode(s),i=Ys.concat(am,lm,r),o=e?{reply:e}:void 0;this.msg.respond(i,o)}term(){this.doAck(cm)}}function zn(t,e,n=!1){if(n===!0&&!t)throw te.errorForCode(q.ApiError,new Error(`${e} is not a function`));if(t&&typeof t!="function")throw te.errorForCode(q.ApiError,new Error(`${e} is not a function`))}class hm extends Nt{constructor(n,s,r){super();y(this,"sub");y(this,"adapter");y(this,"subIterDone");zn(r.adapter,"adapter",!0),this.adapter=r.adapter,r.callback&&zn(r.callback,"callback"),this.noIterator=typeof r.callback=="function",r.ingestionFilterFn&&(zn(r.ingestionFilterFn,"ingestionFilterFn"),this.ingestionFilterFn=r.ingestionFilterFn),r.protocolFilterFn&&(zn(r.protocolFilterFn,"protocolFilterFn"),this.protocolFilterFn=r.protocolFilterFn),r.dispatchedFn&&(zn(r.dispatchedFn,"dispatchedFn"),this.dispatchedFn=r.dispatchedFn),r.cleanupFn&&zn(r.cleanupFn,"cleanupFn");let i=(u,d)=>{this.callback(u,d)};if(r.callback){const u=r.callback;i=(d,m)=>{const[b,S]=this.adapter(d,m);if(b){u(b,null);return}const{ingest:R}=this.ingestionFilterFn?this.ingestionFilterFn(S,this):{ingest:!0};R&&(this.protocolFilterFn?this.protocolFilterFn(S):!0)&&(u(b,S),this.dispatchedFn&&S&&this.dispatchedFn(S))}}const{max:o,queue:a,timeout:c}=r,l={queue:a,timeout:c,callback:i};o&&o>0&&(l.max=o),this.sub=n.subscribe(s,l),r.cleanupFn&&(this.sub.cleanupFn=r.cleanupFn),this.noIterator||this.iterClosed.then(()=>{this.unsubscribe()}),this.subIterDone=We(),Promise.all([this.sub.closed,this.iterClosed]).then(()=>{this.subIterDone.resolve()}).catch(()=>{this.subIterDone.resolve()}),(async u=>{await u.closed,this.stop()})(this.sub).then().catch()}unsubscribe(n){this.sub.unsubscribe(n)}drain(){return this.sub.drain()}isDraining(){return this.sub.isDraining()}isClosed(){return this.sub.isClosed()}callback(n,s){this.sub.cancelTimeout();const[r,i]=this.adapter(n,s);r&&this.stop(r),i&&this.push(i)}getSubject(){return this.sub.getSubject()}getReceived(){return this.sub.getReceived()}getProcessed(){return this.sub.getProcessed()}getPending(){return this.sub.getPending()}getID(){return this.sub.getID()}getMax(){return this.sub.getMax()}get closed(){return this.sub.closed}}function tu(t){if(t&&t.data.length===0&&t.headers){const e=t.headers;if(e.hasError&&e.code===503)return te.errorForCode(q.NoResponders)}return null}class dm{constructor(e,n,s){y(this,"_headers");y(this,"_msg");y(this,"_rdata");y(this,"_reply");y(this,"_subject");y(this,"publisher");this._msg=e,this._rdata=n,this.publisher=s}get subject(){return this._subject?this._subject:(this._subject=Ht.decode(this._msg.subject),this._subject)}get reply(){return this._reply?this._reply:(this._reply=Ht.decode(this._msg.reply),this._reply)}get sid(){return this._msg.sid}get headers(){if(this._msg.hdr>-1&&!this._headers){const e=this._rdata.subarray(0,this._msg.hdr);this._headers=pn.decode(e)}return this._headers}get data(){return this._rdata?this._msg.hdr>-1?this._rdata.subarray(this._msg.hdr):this._rdata:new Uint8Array(0)}respond(e=Et,n){return this.reply?(this.publisher.publish(this.reply,e,n),!0):!1}}let yt;function pm(t){yt=t}function nu(){return yt!==void 0&&yt.defaultPort!==void 0?yt.defaultPort:4222}function _i(){return yt!==void 0&&yt.urlParseFn?yt.urlParseFn:void 0}function mm(){if(!yt||typeof yt.factory!="function")throw new Error("transport fn is not set");return yt.factory()}function su(){return yt!==void 0&&yt.dnsResolveFn?yt.dnsResolveFn:void 0}const gm=4,ru=48,_m=65,bm=97;function ym(t,e,n,s){const r=new Uint8Array(16);return[0,0,0,0,0,0,0,0,0,0,255,255].forEach((o,a)=>{r[a]=o}),r[12]=t,r[13]=e,r[14]=n,r[15]=s,r}function Yi(t){return wm(t)!==void 0}function wm(t){for(let e=0;e<t.length;e++)switch(t[e]){case".":return iu(t);case":":return xm(t)}}function iu(t){const e=new Uint8Array(4);for(let n=0;n<4;n++){if(t.length===0)return;if(n>0){if(t[0]!==".")return;t=t.substring(1)}const{n:s,c:r,ok:i}=vm(t);if(!i||s>255)return;t=t.substring(r),e[n]=s}return ym(e[0],e[1],e[2],e[3])}function xm(t){const e=new Uint8Array(16);let n=-1;if(t.length>=2&&t[0]===":"&&t[1]===":"&&(n=0,t=t.substring(2),t.length===0))return e;let s=0;for(;s<16;){const{n:r,c:i,ok:o}=Em(t);if(!o||r>65535)return;if(i<t.length&&t[i]==="."){if(n<0&&s!=16-4||s+4>16)return;const a=iu(t);if(a===void 0)return;e[s]=a[12],e[s+1]=a[13],e[s+2]=a[14],e[s+3]=a[15],t="",s+=gm;break}if(e[s]=r>>8,e[s+1]=r,s+=2,t=t.substring(i),t.length===0)break;if(t[0]!==":"||t.length==1)return;if(t=t.substring(1),t[0]===":"){if(n>=0)return;if(n=s,t=t.substring(1),t.length===0)break}}if(t.length===0){if(s<16){if(n<0)return;const r=16-s;for(let i=s-1;i>=n;i--)e[i+r]=e[i];for(let i=n+r-1;i>=n;i--)e[i]=0}else if(n>=0)return;return e}}function vm(t){let e=0,n=0;for(e=0;e<t.length&&48<=t.charCodeAt(e)&&t.charCodeAt(e)<=57;e++)if(n=n*10+(t.charCodeAt(e)-ru),n>=16777215)return{n:16777215,c:e,ok:!1};return e===0?{n:0,c:0,ok:!1}:{n,c:e,ok:!0}}function Em(t){let e=0,n=0;for(n=0;n<t.length;n++){if(48<=t.charCodeAt(n)&&t.charCodeAt(n)<=57)e*=16,e+=t.charCodeAt(n)-ru;else if(97<=t.charCodeAt(n)&&t.charCodeAt(n)<=102)e*=16,e+=t.charCodeAt(n)-bm+10;else if(65<=t.charCodeAt(n)&&t.charCodeAt(n)<=70)e*=16,e+=t.charCodeAt(n)-_m+10;else break;if(e>=16777215)return{n:0,c:n,ok:!1}}return n===0?{n:0,c:n,ok:!1}:{n:e,c:n,ok:!0}}function Sm(t){return t.indexOf(".")!==-1?!0:t.indexOf("[")!==-1||t.indexOf("::")!==-1?!1:t.split(":").length<=2}function Ji(t){return!Sm(t)}function Am(t){t=t.trim(),t.match(/^(.*:\/\/)(.*)/m)&&(t=t.replace(/^(.*:\/\/)(.*)/gm,"$2")),Ji(t)&&t.indexOf("[")===-1&&(t=`[${t}]`);const e=Ji(t)?t.match(/(]:)(\d+)/):t.match(/(:)(\d+)/),n=e&&e.length===3&&e[1]&&e[2]?parseInt(e[2]):4222,s=n===80?"https":"http",r=new URL(`${s}://${t}`);r.port=`${n}`;let i=r.hostname;return i.charAt(0)==="["&&(i=i.substring(1,i.length-1)),{listen:r.host,hostname:i,port:n}}class Is{constructor(e,n=!1){y(this,"src");y(this,"listen");y(this,"hostname");y(this,"port");y(this,"didConnect");y(this,"reconnects");y(this,"lastConnect");y(this,"gossiped");y(this,"tlsName");y(this,"resolves");this.src=e,this.tlsName="";const s=Am(e);this.listen=s.listen,this.hostname=s.hostname,this.port=s.port,this.didConnect=!1,this.reconnects=0,this.lastConnect=0,this.gossiped=n}toString(){return this.listen}async resolve(e){if(!e.fn)return[this];const n=[];if(Yi(this.hostname))return[this];{const s=await e.fn(this.hostname);for(const r of s){const i=this.port===80?"https":"http",o=new URL(`${i}://${Ji(r)?"["+r+"]":r}`);o.port=`${this.port}`;const a=new Is(o.host,!1);a.tlsName=this.hostname,n.push(a)}}return e.randomize&&Wl(n),this.resolves=n,n}}class km{constructor(e=[],n={}){y(this,"firstSelect");y(this,"servers");y(this,"currentServer");y(this,"tlsName");y(this,"randomize");this.firstSelect=!0,this.servers=[],this.tlsName="",this.randomize=n.randomize||!1;const s=_i();e&&(e.forEach(r=>{r=s?s(r):r,this.servers.push(new Is(r))}),this.randomize&&(this.servers=Wl(this.servers))),this.servers.length===0&&this.addServer(`${Gi}:${nu()}`,!1),this.currentServer=this.servers[0]}updateTLSName(){const e=this.getCurrentServer();Yi(e.hostname)||(this.tlsName=e.hostname,this.servers.forEach(n=>{n.gossiped&&(n.tlsName=this.tlsName)}))}getCurrentServer(){return this.currentServer}addServer(e,n=!1){const s=_i();e=s?s(e):e;const r=new Is(e,n);Yi(r.hostname)&&(r.tlsName=this.tlsName),this.servers.push(r)}selectServer(){if(this.firstSelect)return this.firstSelect=!1,this.currentServer;const e=this.servers.shift();return e&&(this.servers.push(e),this.currentServer=e),e}removeCurrentServer(){this.removeServer(this.currentServer)}removeServer(e){if(e){const n=this.servers.indexOf(e);this.servers.splice(n,1)}}length(){return this.servers.length}next(){return this.servers.length?this.servers[0]:void 0}getServers(){return this.servers}update(e){const n=[];let s=[];const r=_i(),i=new Map;e.connect_urls&&e.connect_urls.length>0&&e.connect_urls.forEach(a=>{a=r?r(a):a;const c=new Is(a,!0);i.set(a,c)});const o=[];return this.servers.forEach((a,c)=>{const l=a.listen;a.gossiped&&this.currentServer.listen!==l&&i.get(l)===void 0&&o.push(c),i.delete(l)}),o.reverse(),o.forEach(a=>{const c=this.servers.splice(a,1);s=s.concat(c[0].listen)}),i.forEach((a,c)=>{this.servers.push(a),n.push(c)}),{added:n,deleted:s}}}class ou extends Nt{constructor(n,s,r={}){super();y(this,"sid");y(this,"queue");y(this,"draining");y(this,"max");y(this,"subject");y(this,"drained");y(this,"protocol");y(this,"timer");y(this,"info");y(this,"cleanupFn");y(this,"closed");y(this,"requestSubject");Kr(this,r),this.protocol=n,this.subject=s,this.draining=!1,this.noIterator=typeof r.callback=="function",this.closed=We(),r.timeout&&(this.timer=Vr(r.timeout),this.timer.then(()=>{this.timer=void 0}).catch(i=>{this.stop(i),this.noIterator&&this.callback(i,{})})),this.noIterator||this.iterClosed.then(()=>{this.closed.resolve(),this.unsubscribe()})}setPrePostHandlers(n){if(this.noIterator){const s=this.callback,r=n.ingestionFilterFn?n.ingestionFilterFn:()=>({ingest:!0,protocol:!1}),i=n.protocolFilterFn?n.protocolFilterFn:()=>!0,o=n.dispatchedFn?n.dispatchedFn:()=>{};this.callback=(a,c)=>{const{ingest:l}=r(c);!l||i(c)&&(s(a,c),o(c))}}else this.protocolFilterFn=n.protocolFilterFn,this.dispatchedFn=n.dispatchedFn}callback(n,s){this.cancelTimeout(),n?this.stop(n):this.push(s)}close(){if(!this.isClosed()){if(this.cancelTimeout(),this.stop(),this.cleanupFn)try{this.cleanupFn(this,this.info)}catch{}this.closed.resolve()}}unsubscribe(n){this.protocol.unsubscribe(this,n)}cancelTimeout(){this.timer&&(this.timer.cancel(),this.timer=void 0)}drain(){return this.protocol.isClosed()?Promise.reject(te.errorForCode(q.ConnectionClosed)):this.isClosed()?Promise.reject(te.errorForCode(q.SubClosed)):(this.drained||(this.protocol.unsub(this),this.drained=this.protocol.flush(We()),this.drained.then(()=>{this.protocol.subscriptions.cancel(this)})),this.drained)}isDraining(){return this.draining}isClosed(){return this.done}getSubject(){return this.subject}getMax(){return this.max}getID(){return this.sid}}class Cm{constructor(){y(this,"mux");y(this,"subs");y(this,"sidCounter");this.sidCounter=0,this.mux=null,this.subs=new Map}size(){return this.subs.size}add(e){return this.sidCounter++,e.sid=this.sidCounter,this.subs.set(e.sid,e),e}setMux(e){return this.mux=e,e}getMux(){return this.mux}get(e){return this.subs.get(e)}resub(e){return this.sidCounter++,this.subs.delete(e.sid),e.sid=this.sidCounter,this.subs.set(e.sid,e),e}all(){return Array.from(this.subs.values())}cancel(e){e&&(e.close(),this.subs.delete(e.sid))}handleError(e){if(e&&e.permissionContext){const n=e.permissionContext,s=this.all();let r;if(n.operation==="subscription"&&(r=s.find(i=>i.subject===n.subject)),n.operation==="publish"&&(r=s.find(i=>i.requestSubject===n.subject)),r)return r.callback(e,{}),r.close(),r!==this.mux}return!1}close(){this.subs.forEach(e=>{e.close()})}}class Pm{constructor(e,n,s){y(this,"ph");y(this,"interval");y(this,"maxOut");y(this,"timer");y(this,"pendings");this.ph=e,this.interval=n,this.maxOut=s,this.pendings=[]}start(){this.cancel(),this._schedule()}cancel(e){this.timer&&(clearTimeout(this.timer),this.timer=void 0),this._reset(),e&&this.ph.disconnect()}_schedule(){this.timer=setTimeout(()=>{if(this.ph.dispatchStatus({type:Hs.PingTimer,data:`${this.pendings.length+1}`}),this.pendings.length===this.maxOut){this.cancel(!0);return}const e=We();this.ph.flush(e).then(()=>{this._reset()}).catch(()=>{this.cancel()}),this.pendings.push(e),this._schedule()},this.interval)}_reset(){this.pendings=this.pendings.filter(e=>(e.resolve(),!1))}}class Om extends Error{constructor(e){super(e),this.name="AssertionError"}}function $m(t,e="Assertion failed."){if(!t)throw new Om(e)}const tc=32*1024,bi=2**32-2;function cr(t,e,n=0){const s=e.byteLength-n;return t.byteLength>s&&(t=t.subarray(0,s)),e.set(t,n),t.byteLength}class yi{constructor(e){y(this,"_buf");y(this,"_off");if(this._off=0,e==null){this._buf=new Uint8Array(0);return}this._buf=new Uint8Array(e)}bytes(e={copy:!0}){return e.copy===!1?this._buf.subarray(this._off):this._buf.slice(this._off)}empty(){return this._buf.byteLength<=this._off}get length(){return this._buf.byteLength-this._off}get capacity(){return this._buf.buffer.byteLength}truncate(e){if(e===0){this.reset();return}if(e<0||e>this.length)throw Error("bytes.Buffer: truncation out of range");this._reslice(this._off+e)}reset(){this._reslice(0),this._off=0}_tryGrowByReslice(e){const n=this._buf.byteLength;return e<=this.capacity-n?(this._reslice(n+e),n):-1}_reslice(e){$m(e<=this._buf.buffer.byteLength),this._buf=new Uint8Array(this._buf.buffer,0,e)}readByte(){const e=new Uint8Array(1);return this.read(e)?e[0]:null}read(e){if(this.empty())return this.reset(),e.byteLength===0?0:null;const n=cr(this._buf.subarray(this._off),e);return this._off+=n,n}writeByte(e){return this.write(Uint8Array.of(e))}writeString(e){return this.write(ps.encode(e))}write(e){const n=this._grow(e.byteLength);return cr(e,this._buf,n)}_grow(e){const n=this.length;n===0&&this._off!==0&&this.reset();const s=this._tryGrowByReslice(e);if(s>=0)return s;const r=this.capacity;if(e<=Math.floor(r/2)-n)cr(this._buf.subarray(this._off),this._buf);else{if(r+e>bi)throw new Error("The buffer cannot be grown beyond the maximum size.");{const i=new Uint8Array(Math.min(2*r+e,bi));cr(this._buf.subarray(this._off),i),this._buf=i}}return this._off=0,this._reslice(Math.min(n+e,bi)),n}grow(e){if(e<0)throw Error("Buffer._grow: negative count");const n=this._grow(e);this._reslice(n)}readFrom(e){let n=0;const s=new Uint8Array(tc);for(;;){const r=this.capacity-this.length<tc,i=r?s:new Uint8Array(this._buf.buffer,this.length),o=e.read(i);if(o===null)return n;r?this.write(i.subarray(0,o)):this._reslice(this.length+o),n+=o}}}var ot;(function(t){t[t.OK=0]="OK",t[t.ERR=1]="ERR",t[t.MSG=2]="MSG",t[t.INFO=3]="INFO",t[t.PING=4]="PING",t[t.PONG=5]="PONG"})(ot||(ot={}));function nc(){const t={};return t.sid=-1,t.hdr=-1,t.size=-1,t}const Tm=48;class sc{constructor(e){y(this,"dispatcher");y(this,"state");y(this,"as");y(this,"drop");y(this,"hdr");y(this,"ma");y(this,"argBuf");y(this,"msgBuf");this.dispatcher=e,this.state=F.OP_START,this.as=0,this.drop=0,this.hdr=0}parse(e){let n;for(n=0;n<e.length;n++){const s=e[n];switch(this.state){case F.OP_START:switch(s){case B.M:case B.m:this.state=F.OP_M,this.hdr=-1,this.ma=nc();break;case B.H:case B.h:this.state=F.OP_H,this.hdr=0,this.ma=nc();break;case B.P:case B.p:this.state=F.OP_P;break;case B.PLUS:this.state=F.OP_PLUS;break;case B.MINUS:this.state=F.OP_MINUS;break;case B.I:case B.i:this.state=F.OP_I;break;default:throw this.fail(e.subarray(n))}break;case F.OP_H:switch(s){case B.M:case B.m:this.state=F.OP_M;break;default:throw this.fail(e.subarray(n))}break;case F.OP_M:switch(s){case B.S:case B.s:this.state=F.OP_MS;break;default:throw this.fail(e.subarray(n))}break;case F.OP_MS:switch(s){case B.G:case B.g:this.state=F.OP_MSG;break;default:throw this.fail(e.subarray(n))}break;case F.OP_MSG:switch(s){case B.SPACE:case B.TAB:this.state=F.OP_MSG_SPC;break;default:throw this.fail(e.subarray(n))}break;case F.OP_MSG_SPC:switch(s){case B.SPACE:case B.TAB:continue;default:this.state=F.MSG_ARG,this.as=n}break;case F.MSG_ARG:switch(s){case B.CR:this.drop=1;break;case B.NL:{const r=this.argBuf?this.argBuf.bytes():e.subarray(this.as,n-this.drop);this.processMsgArgs(r),this.drop=0,this.as=n+1,this.state=F.MSG_PAYLOAD,n=this.as+this.ma.size-1;break}default:this.argBuf&&this.argBuf.writeByte(s)}break;case F.MSG_PAYLOAD:if(this.msgBuf)if(this.msgBuf.length>=this.ma.size){const r=this.msgBuf.bytes({copy:!1});this.dispatcher.push({kind:ot.MSG,msg:this.ma,data:r}),this.argBuf=void 0,this.msgBuf=void 0,this.state=F.MSG_END}else{let r=this.ma.size-this.msgBuf.length;const i=e.length-n;i<r&&(r=i),r>0?(this.msgBuf.write(e.subarray(n,n+r)),n=n+r-1):this.msgBuf.writeByte(s)}else n-this.as>=this.ma.size&&(this.dispatcher.push({kind:ot.MSG,msg:this.ma,data:e.subarray(this.as,n)}),this.argBuf=void 0,this.msgBuf=void 0,this.state=F.MSG_END);break;case F.MSG_END:switch(s){case B.NL:this.drop=0,this.as=n+1,this.state=F.OP_START;break;default:continue}break;case F.OP_PLUS:switch(s){case B.O:case B.o:this.state=F.OP_PLUS_O;break;default:throw this.fail(e.subarray(n))}break;case F.OP_PLUS_O:switch(s){case B.K:case B.k:this.state=F.OP_PLUS_OK;break;default:throw this.fail(e.subarray(n))}break;case F.OP_PLUS_OK:switch(s){case B.NL:this.dispatcher.push({kind:ot.OK}),this.drop=0,this.state=F.OP_START;break}break;case F.OP_MINUS:switch(s){case B.E:case B.e:this.state=F.OP_MINUS_E;break;default:throw this.fail(e.subarray(n))}break;case F.OP_MINUS_E:switch(s){case B.R:case B.r:this.state=F.OP_MINUS_ER;break;default:throw this.fail(e.subarray(n))}break;case F.OP_MINUS_ER:switch(s){case B.R:case B.r:this.state=F.OP_MINUS_ERR;break;default:throw this.fail(e.subarray(n))}break;case F.OP_MINUS_ERR:switch(s){case B.SPACE:case B.TAB:this.state=F.OP_MINUS_ERR_SPC;break;default:throw this.fail(e.subarray(n))}break;case F.OP_MINUS_ERR_SPC:switch(s){case B.SPACE:case B.TAB:continue;default:this.state=F.MINUS_ERR_ARG,this.as=n}break;case F.MINUS_ERR_ARG:switch(s){case B.CR:this.drop=1;break;case B.NL:{let r;this.argBuf?(r=this.argBuf.bytes(),this.argBuf=void 0):r=e.subarray(this.as,n-this.drop),this.dispatcher.push({kind:ot.ERR,data:r}),this.drop=0,this.as=n+1,this.state=F.OP_START;break}default:this.argBuf&&this.argBuf.write(Uint8Array.of(s))}break;case F.OP_P:switch(s){case B.I:case B.i:this.state=F.OP_PI;break;case B.O:case B.o:this.state=F.OP_PO;break;default:throw this.fail(e.subarray(n))}break;case F.OP_PO:switch(s){case B.N:case B.n:this.state=F.OP_PON;break;default:throw this.fail(e.subarray(n))}break;case F.OP_PON:switch(s){case B.G:case B.g:this.state=F.OP_PONG;break;default:throw this.fail(e.subarray(n))}break;case F.OP_PONG:switch(s){case B.NL:this.dispatcher.push({kind:ot.PONG}),this.drop=0,this.state=F.OP_START;break}break;case F.OP_PI:switch(s){case B.N:case B.n:this.state=F.OP_PIN;break;default:throw this.fail(e.subarray(n))}break;case F.OP_PIN:switch(s){case B.G:case B.g:this.state=F.OP_PING;break;default:throw this.fail(e.subarray(n))}break;case F.OP_PING:switch(s){case B.NL:this.dispatcher.push({kind:ot.PING}),this.drop=0,this.state=F.OP_START;break}break;case F.OP_I:switch(s){case B.N:case B.n:this.state=F.OP_IN;break;default:throw this.fail(e.subarray(n))}break;case F.OP_IN:switch(s){case B.F:case B.f:this.state=F.OP_INF;break;default:throw this.fail(e.subarray(n))}break;case F.OP_INF:switch(s){case B.O:case B.o:this.state=F.OP_INFO;break;default:throw this.fail(e.subarray(n))}break;case F.OP_INFO:switch(s){case B.SPACE:case B.TAB:this.state=F.OP_INFO_SPC;break;default:throw this.fail(e.subarray(n))}break;case F.OP_INFO_SPC:switch(s){case B.SPACE:case B.TAB:continue;default:this.state=F.INFO_ARG,this.as=n}break;case F.INFO_ARG:switch(s){case B.CR:this.drop=1;break;case B.NL:{let r;this.argBuf?(r=this.argBuf.bytes(),this.argBuf=void 0):r=e.subarray(this.as,n-this.drop),this.dispatcher.push({kind:ot.INFO,data:r}),this.drop=0,this.as=n+1,this.state=F.OP_START;break}default:this.argBuf&&this.argBuf.writeByte(s)}break;default:throw this.fail(e.subarray(n))}}(this.state===F.MSG_ARG||this.state===F.MINUS_ERR_ARG||this.state===F.INFO_ARG)&&!this.argBuf&&(this.argBuf=new yi(e.subarray(this.as,n-this.drop))),this.state===F.MSG_PAYLOAD&&!this.msgBuf&&(this.argBuf||this.cloneMsgArg(),this.msgBuf=new yi(e.subarray(this.as)))}cloneMsgArg(){const e=this.ma.subject.length,n=this.ma.reply?this.ma.reply.length:0,s=new Uint8Array(e+n);s.set(this.ma.subject),this.ma.reply&&s.set(this.ma.reply,e),this.argBuf=new yi(s),this.ma.subject=s.subarray(0,e),this.ma.reply&&(this.ma.reply=s.subarray(e))}processMsgArgs(e){if(this.hdr>=0)return this.processHeaderMsgArgs(e);const n=[];let s=-1;for(let r=0;r<e.length;r++)switch(e[r]){case B.SPACE:case B.TAB:case B.CR:case B.NL:s>=0&&(n.push(e.subarray(s,r)),s=-1);break;default:s<0&&(s=r)}switch(s>=0&&n.push(e.subarray(s)),n.length){case 3:this.ma.subject=n[0],this.ma.sid=this.protoParseInt(n[1]),this.ma.reply=void 0,this.ma.size=this.protoParseInt(n[2]);break;case 4:this.ma.subject=n[0],this.ma.sid=this.protoParseInt(n[1]),this.ma.reply=n[2],this.ma.size=this.protoParseInt(n[3]);break;default:throw this.fail(e,"processMsgArgs Parse Error")}if(this.ma.sid<0)throw this.fail(e,"processMsgArgs Bad or Missing Sid Error");if(this.ma.size<0)throw this.fail(e,"processMsgArgs Bad or Missing Size Error")}fail(e,n=""){return n?n=`${n} [${this.state}]`:n=`parse error [${this.state}]`,new Error(`${n}: ${Ht.decode(e)}`)}processHeaderMsgArgs(e){const n=[];let s=-1;for(let r=0;r<e.length;r++)switch(e[r]){case B.SPACE:case B.TAB:case B.CR:case B.NL:s>=0&&(n.push(e.subarray(s,r)),s=-1);break;default:s<0&&(s=r)}switch(s>=0&&n.push(e.subarray(s)),n.length){case 4:this.ma.subject=n[0],this.ma.sid=this.protoParseInt(n[1]),this.ma.reply=void 0,this.ma.hdr=this.protoParseInt(n[2]),this.ma.size=this.protoParseInt(n[3]);break;case 5:this.ma.subject=n[0],this.ma.sid=this.protoParseInt(n[1]),this.ma.reply=n[2],this.ma.hdr=this.protoParseInt(n[3]),this.ma.size=this.protoParseInt(n[4]);break;default:throw this.fail(e,"processHeaderMsgArgs Parse Error")}if(this.ma.sid<0)throw this.fail(e,"processHeaderMsgArgs Bad or Missing Sid Error");if(this.ma.hdr<0||this.ma.hdr>this.ma.size)throw this.fail(e,"processHeaderMsgArgs Bad or Missing Header Size Error");if(this.ma.size<0)throw this.fail(e,"processHeaderMsgArgs Bad or Missing Size Error")}protoParseInt(e){if(e.length===0)return-1;let n=0;for(let s=0;s<e.length;s++){if(e[s]<48||e[s]>57)return-1;n=n*10+(e[s]-Tm)}return n}}var F;(function(t){t[t.OP_START=0]="OP_START",t[t.OP_PLUS=1]="OP_PLUS",t[t.OP_PLUS_O=2]="OP_PLUS_O",t[t.OP_PLUS_OK=3]="OP_PLUS_OK",t[t.OP_MINUS=4]="OP_MINUS",t[t.OP_MINUS_E=5]="OP_MINUS_E",t[t.OP_MINUS_ER=6]="OP_MINUS_ER",t[t.OP_MINUS_ERR=7]="OP_MINUS_ERR",t[t.OP_MINUS_ERR_SPC=8]="OP_MINUS_ERR_SPC",t[t.MINUS_ERR_ARG=9]="MINUS_ERR_ARG",t[t.OP_M=10]="OP_M",t[t.OP_MS=11]="OP_MS",t[t.OP_MSG=12]="OP_MSG",t[t.OP_MSG_SPC=13]="OP_MSG_SPC",t[t.MSG_ARG=14]="MSG_ARG",t[t.MSG_PAYLOAD=15]="MSG_PAYLOAD",t[t.MSG_END=16]="MSG_END",t[t.OP_H=17]="OP_H",t[t.OP_P=18]="OP_P",t[t.OP_PI=19]="OP_PI",t[t.OP_PIN=20]="OP_PIN",t[t.OP_PING=21]="OP_PING",t[t.OP_PO=22]="OP_PO",t[t.OP_PON=23]="OP_PON",t[t.OP_PONG=24]="OP_PONG",t[t.OP_I=25]="OP_I",t[t.OP_IN=26]="OP_IN",t[t.OP_INF=27]="OP_INF",t[t.OP_INFO=28]="OP_INFO",t[t.OP_INFO_SPC=29]="OP_INFO_SPC",t[t.INFO_ARG=30]="INFO_ARG"})(F||(F={}));var B;(function(t){t[t.CR="\r".charCodeAt(0)]="CR",t[t.E="E".charCodeAt(0)]="E",t[t.e="e".charCodeAt(0)]="e",t[t.F="F".charCodeAt(0)]="F",t[t.f="f".charCodeAt(0)]="f",t[t.G="G".charCodeAt(0)]="G",t[t.g="g".charCodeAt(0)]="g",t[t.H="H".charCodeAt(0)]="H",t[t.h="h".charCodeAt(0)]="h",t[t.I="I".charCodeAt(0)]="I",t[t.i="i".charCodeAt(0)]="i",t[t.K="K".charCodeAt(0)]="K",t[t.k="k".charCodeAt(0)]="k",t[t.M="M".charCodeAt(0)]="M",t[t.m="m".charCodeAt(0)]="m",t[t.MINUS="-".charCodeAt(0)]="MINUS",t[t.N="N".charCodeAt(0)]="N",t[t.n="n".charCodeAt(0)]="n",t[t.NL=`
`.charCodeAt(0)]="NL",t[t.O="O".charCodeAt(0)]="O",t[t.o="o".charCodeAt(0)]="o",t[t.P="P".charCodeAt(0)]="P",t[t.p="p".charCodeAt(0)]="p",t[t.PLUS="+".charCodeAt(0)]="PLUS",t[t.R="R".charCodeAt(0)]="R",t[t.r="r".charCodeAt(0)]="r",t[t.S="S".charCodeAt(0)]="S",t[t.s="s".charCodeAt(0)]="s",t[t.SPACE=" ".charCodeAt(0)]="SPACE",t[t.TAB="	".charCodeAt(0)]="TAB"})(B||(B={}));const Nm=1024*32,Rm=/^INFO\s+([^\r\n]+)\r\n/i;function gn(t=""){if(t=t||"_INBOX",typeof t!="string")throw new Error("prefix must be a string");return`${t}.${Po.next()}`}class Im{constructor(){y(this,"baseInbox");y(this,"reqs");this.reqs=new Map}size(){return this.reqs.size}init(e){return this.baseInbox=`${gn(e)}.`,this.baseInbox}add(e){isNaN(e.received)||(e.received=0),this.reqs.set(e.token,e)}get(e){return this.reqs.get(e)}cancel(e){this.reqs.delete(e.token)}getToken(e){const n=e.subject||"";return n.indexOf(this.baseInbox)===0?n.substring(this.baseInbox.length):null}all(){return Array.from(this.reqs.values())}handleError(e,n){if(n&&n.permissionContext){if(e)return this.all().forEach(r=>{r.resolver(n,{})}),!0;const s=n.permissionContext;if(s.operation==="publish"){const r=this.all().find(i=>i.requestSubject===s.subject);if(r)return r.resolver(n,{}),!0}}return!1}dispatcher(){return(e,n)=>{const s=this.getToken(n);if(s){const r=this.get(s);r&&(e===null&&n.headers&&(e=tu(n)),r.resolver(e,n))}}}close(){const e=te.errorForCode(q.Timeout);this.reqs.forEach(n=>{n.resolver(e,{})})}}const Lm=Rs(`PONG\r
`),rc=Rs(`PING\r
`);class jm{constructor(e,n,s){y(this,"echo");y(this,"no_responders");y(this,"protocol");y(this,"verbose");y(this,"pedantic");y(this,"jwt");y(this,"nkey");y(this,"sig");y(this,"user");y(this,"pass");y(this,"auth_token");y(this,"tls_required");y(this,"name");y(this,"lang");y(this,"version");y(this,"headers");this.protocol=1,this.version=e.version,this.lang=e.lang,this.echo=n.noEcho?!1:void 0,this.verbose=n.verbose,this.pedantic=n.pedantic,this.tls_required=n.tls?!0:void 0,this.name=n.name;const r=(n&&n.authenticator?n.authenticator(s):{})||{};Kr(this,r)}}class Nr{constructor(e,n){y(this,"connected");y(this,"connectedOnce");y(this,"infoReceived");y(this,"info");y(this,"muxSubscriptions");y(this,"options");y(this,"outbound");y(this,"pongs");y(this,"subscriptions");y(this,"transport");y(this,"noMorePublishing");y(this,"connectError");y(this,"publisher");y(this,"_closed");y(this,"closed");y(this,"listeners");y(this,"heartbeats");y(this,"parser");y(this,"outMsgs");y(this,"inMsgs");y(this,"outBytes");y(this,"inBytes");y(this,"pendingLimit");y(this,"lastError");y(this,"abortReconnect");y(this,"servers");y(this,"server");y(this,"features");this._closed=!1,this.connected=!1,this.connectedOnce=!1,this.infoReceived=!1,this.noMorePublishing=!1,this.abortReconnect=!1,this.listeners=[],this.pendingLimit=Nm,this.outMsgs=0,this.inMsgs=0,this.outBytes=0,this.inBytes=0,this.options=e,this.publisher=n,this.subscriptions=new Cm,this.muxSubscriptions=new Im,this.outbound=new Ys,this.pongs=[],this.pendingLimit=e.pendingLimit||this.pendingLimit,this.features=new Za({major:0,minor:0,micro:0});const s=typeof e.servers=="string"?[e.servers]:e.servers;this.servers=new km(s,{randomize:!e.noRandomize}),this.closed=We(),this.parser=new sc(this),this.heartbeats=new Pm(this,this.options.pingInterval||zl,this.options.maxPingOut||Op)}resetOutbound(){this.outbound.reset();const e=this.pongs;this.pongs=[],e.forEach(n=>{n.reject(te.errorForCode(q.Disconnect))}),this.parser=new sc(this),this.infoReceived=!1}dispatchStatus(e){this.listeners.forEach(n=>{n.push(e)})}status(){const e=new Nt;return this.listeners.push(e),e}prepare(){this.info=void 0,this.resetOutbound();const e=We();return this.pongs.unshift(e),this.connectError=n=>{e.reject(n)},this.transport=mm(),this.transport.closed().then(async n=>{if(this.connected=!1,!this.isClosed()){await this.disconnected(this.transport.closeError);return}}),e}disconnect(){this.dispatchStatus({type:Hs.StaleConnection,data:""}),this.transport.disconnect()}async disconnected(e){this.dispatchStatus({type:Tn.Disconnect,data:this.servers.getCurrentServer().toString()}),this.options.reconnect?await this.dialLoop().then(()=>{this.dispatchStatus({type:Tn.Reconnect,data:this.servers.getCurrentServer().toString()})}).catch(n=>{this._close(n)}):await this._close()}async dial(e){const n=this.prepare();let s;try{s=Vr(this.options.timeout||2e4);const r=this.transport.connect(e,this.options);await Promise.race([r,s]),(async()=>{try{for await(const i of this.transport)this.parser.parse(i)}catch(i){console.log("reader closed",i)}})().then()}catch(r){n.reject(r)}try{await Promise.race([s,n]),s&&s.cancel(),this.connected=!0,this.connectError=void 0,this.sendSubscriptions(),this.connectedOnce=!0,this.server.didConnect=!0,this.server.reconnects=0,this.flushPending(),this.heartbeats.start()}catch(r){throw s&&s.cancel(),await this.transport.close(r),r}}async _doDial(e){const n=await e.resolve({fn:su(),randomize:!this.options.noRandomize});let s=null;for(const r of n)try{s=null,this.dispatchStatus({type:Hs.Reconnecting,data:r.toString()}),await this.dial(r);return}catch(i){s=i}throw s}async dialLoop(){let e;for(;;){const n=this.options.reconnectDelayHandler?this.options.reconnectDelayHandler():Hl;let s=n;const r=this.selectServer();if(!r||this.abortReconnect)throw e||(this.lastError?this.lastError:te.errorForCode(q.ConnectionRefused));const i=Date.now();if(r.lastConnect===0||r.lastConnect+n<=i){r.lastConnect=Date.now();try{await this._doDial(r);break}catch(o){if(e=o,!this.connectedOnce){if(this.options.waitOnFirstConnect)continue;this.servers.removeCurrentServer()}r.reconnects++;const a=this.options.maxReconnectAttempts||0;a!==-1&&r.reconnects>=a&&this.servers.removeCurrentServer()}}else s=Math.min(s,r.lastConnect+n-i),await Oo(s)}}static async connect(e,n){const s=new Nr(e,n);return await s.dialLoop(),s}static toError(e){const n=e?e.toLowerCase():"";if(n.indexOf("permissions violation")!==-1){const s=new te(e,q.PermissionsViolation),r=e.match(/(Publish|Subscription) to "(\S+)"/);return r&&(s.permissionContext={operation:r[1].toLowerCase(),subject:r[2]}),s}else return n.indexOf("authorization violation")!==-1?new te(e,q.AuthorizationViolation):n.indexOf("user authentication expired")!==-1?new te(e,q.AuthenticationExpired):new te(e,q.ProtocolError)}processMsg(e,n){if(this.inMsgs++,this.inBytes+=n.length,!this.subscriptions.sidCounter)return;const s=this.subscriptions.get(e.sid);!s||(s.received+=1,s.callback&&s.callback(null,new dm(e,n,this)),s.max!==void 0&&s.received>=s.max&&s.unsubscribe())}async processError(e){const n=Ha(e),s=Nr.toError(n);let r=!1;const i={type:Tn.Error,data:s.code};if(s.permissionContext){i.permissionContext=s.permissionContext;const o=this.subscriptions.getMux();r=(o==null?void 0:o.subject)===s.permissionContext.subject}this.subscriptions.handleError(s),this.muxSubscriptions.handleError(r,s),r&&this.subscriptions.setMux(null),this.dispatchStatus(i),await this.handleError(s)}async handleError(e){e.isAuthError()&&this.handleAuthError(e),e.isProtocolError()&&await this._close(e),this.lastError=e}handleAuthError(e){this.lastError&&e.code===this.lastError.code&&(this.abortReconnect=!0),this.connectError?this.connectError(e):this.disconnect()}processPing(){this.transport.send(Lm)}processPong(){const e=this.pongs.shift();e&&e.resolve()}processInfo(e){const n=JSON.parse(Ha(e));this.info=n;const s=this.options&&this.options.ignoreClusterUpdates?void 0:this.servers.update(n);if(!this.infoReceived){this.features=new Za(ls(n.version)),this.infoReceived=!0,this.transport.isEncrypted()&&this.servers.updateTLSName();const{version:i,lang:o}=this.transport;try{const a=new jm({version:i,lang:o},this.options,n.nonce);n.headers&&(a.headers=!0,a.no_responders=!0);const c=JSON.stringify(a);this.transport.send(Rs(`CONNECT ${c}${Cn}`)),this.transport.send(rc)}catch(a){this._close(te.errorForCode(q.BadAuthentication,a))}}s&&this.dispatchStatus({type:Tn.Update,data:s}),(n.ldm!==void 0?n.ldm:!1)&&this.dispatchStatus({type:Tn.LDM,data:this.servers.getCurrentServer().toString()})}push(e){switch(e.kind){case ot.MSG:{const{msg:n,data:s}=e;this.processMsg(n,s);break}case ot.OK:break;case ot.ERR:this.processError(e.data);break;case ot.PING:this.processPing();break;case ot.PONG:this.processPong();break;case ot.INFO:this.processInfo(e.data);break}}sendCommand(e,...n){const s=this.outbound.length();let r;typeof e=="string"?r=Rs(e):r=e,this.outbound.fill(r,...n),s===0?setTimeout(()=>{this.flushPending()}):this.outbound.size()>=this.pendingLimit&&this.flushPending()}publish(e,n,s){let r=n.length;s=s||{},s.reply=s.reply||"";let i=Et,o=0;if(s.headers){if(this.info&&!this.info.headers)throw new te("headers",q.ServerOptionNotAvailable);i=s.headers.encode(),o=i.length,r=n.length+o}if(this.info&&r>this.info.max_payload)throw te.errorForCode(q.MaxPayloadExceeded);this.outBytes+=r,this.outMsgs++;let a;s.headers?(s.reply?a=`HPUB ${e} ${s.reply} ${o} ${r}${Cn}`:a=`HPUB ${e} ${o} ${r}\r
`,this.sendCommand(a,i,n,Or)):(s.reply?a=`PUB ${e} ${s.reply} ${r}\r
`:a=`PUB ${e} ${r}\r
`,this.sendCommand(a,n,Or))}request(e){return this.initMux(),this.muxSubscriptions.add(e),e}subscribe(e){return this.subscriptions.add(e),this._subunsub(e),e}_sub(e){e.queue?this.sendCommand(`SUB ${e.subject} ${e.queue} ${e.sid}\r
`):this.sendCommand(`SUB ${e.subject} ${e.sid}\r
`)}_subunsub(e){return this._sub(e),e.max&&this.unsubscribe(e,e.max),e}unsubscribe(e,n){this.unsub(e,n),(e.max===void 0||e.received>=e.max)&&this.subscriptions.cancel(e)}unsub(e,n){!e||this.isClosed()||(n?this.sendCommand(`UNSUB ${e.sid} ${n}${Cn}`):this.sendCommand(`UNSUB ${e.sid}${Cn}`),e.max=n)}resub(e,n){!e||this.isClosed()||(e.subject=n,this.subscriptions.resub(e),this._sub(e))}flush(e){return e||(e=We()),this.pongs.push(e),this.sendCommand(rc),e}sendSubscriptions(){const e=[];this.subscriptions.all().forEach(n=>{const s=n;s.queue?e.push(`SUB ${s.subject} ${s.queue} ${s.sid}${Cn}`):e.push(`SUB ${s.subject} ${s.sid}${Cn}`)}),e.length&&this.transport.send(Rs(e.join("")))}async _close(e){this._closed||(this.heartbeats.cancel(),this.connectError&&(this.connectError(e),this.connectError=void 0),this.muxSubscriptions.close(),this.subscriptions.close(),this.listeners.forEach(n=>{n.stop()}),this._closed=!0,await this.transport.close(e),await this.closed.resolve(e))}close(){return this._close()}isClosed(){return this._closed}drain(){const e=this.subscriptions.all(),n=[];return e.forEach(s=>{n.push(s.drain())}),Promise.all(n).then(async()=>(this.noMorePublishing=!0,await this.flush(),this.close())).catch(()=>{})}flushPending(){if(!(!this.infoReceived||!this.connected)&&this.outbound.size()){const e=this.outbound.drain();this.transport.send(e)}}initMux(){if(!this.subscriptions.getMux()){const n=this.muxSubscriptions.init(this.options.inboxPrefix),s=new ou(this,`${n}*`);s.callback=this.muxSubscriptions.dispatcher(),this.subscriptions.setMux(s),this.subscribe(s)}}selectServer(){const e=this.servers.selectServer();if(e!==void 0)return this.server=e,this.server}getServer(){return this.server}}(function(t){var e=function(f,p){this.hi=f|0,this.lo=p|0},n=function(f){var p,h=new Float64Array(16);if(f)for(p=0;p<f.length;p++)h[p]=f[p];return h},s=function(){throw new Error("no PRNG")},r=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var o=n(),a=n([1]),c=n([56129,1]),l=n([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=n([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=n([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),m=n([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),b=n([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function S(f,p){return f<<p|f>>>32-p}function R(f,p){var h=f[p+3]&255;return h=h<<8|f[p+2]&255,h=h<<8|f[p+1]&255,h<<8|f[p+0]&255}function K(f,p){var h=f[p]<<24|f[p+1]<<16|f[p+2]<<8|f[p+3],_=f[p+4]<<24|f[p+5]<<16|f[p+6]<<8|f[p+7];return new e(h,_)}function I(f,p,h){var _;for(_=0;_<4;_++)f[p+_]=h&255,h>>>=8}function ee(f,p,h){f[p]=h.hi>>24&255,f[p+1]=h.hi>>16&255,f[p+2]=h.hi>>8&255,f[p+3]=h.hi&255,f[p+4]=h.lo>>24&255,f[p+5]=h.lo>>16&255,f[p+6]=h.lo>>8&255,f[p+7]=h.lo&255}function se(f,p,h,_,x){var v,P=0;for(v=0;v<x;v++)P|=f[p+v]^h[_+v];return(1&P-1>>>8)-1}function ce(f,p,h,_){return se(f,p,h,_,16)}function le(f,p,h,_){return se(f,p,h,_,32)}function ye(f,p,h,_,x){var v=new Uint32Array(16),P=new Uint32Array(16),N=new Uint32Array(16),E=new Uint32Array(4),C,Z,_e;for(C=0;C<4;C++)P[5*C]=R(_,4*C),P[1+C]=R(h,4*C),P[6+C]=R(p,4*C),P[11+C]=R(h,16+4*C);for(C=0;C<16;C++)N[C]=P[C];for(C=0;C<20;C++){for(Z=0;Z<4;Z++){for(_e=0;_e<4;_e++)E[_e]=P[(5*Z+4*_e)%16];for(E[1]^=S(E[0]+E[3]|0,7),E[2]^=S(E[1]+E[0]|0,9),E[3]^=S(E[2]+E[1]|0,13),E[0]^=S(E[3]+E[2]|0,18),_e=0;_e<4;_e++)v[4*Z+(Z+_e)%4]=E[_e]}for(_e=0;_e<16;_e++)P[_e]=v[_e]}if(x){for(C=0;C<16;C++)P[C]=P[C]+N[C]|0;for(C=0;C<4;C++)P[5*C]=P[5*C]-R(_,4*C)|0,P[6+C]=P[6+C]-R(p,4*C)|0;for(C=0;C<4;C++)I(f,4*C,P[5*C]),I(f,16+4*C,P[6+C])}else for(C=0;C<16;C++)I(f,4*C,P[C]+N[C]|0)}function oe(f,p,h,_){return ye(f,p,h,_,!1),0}function H(f,p,h,_){return ye(f,p,h,_,!0),0}var ae=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function fe(f,p,h,_,x,v,P){var N=new Uint8Array(16),E=new Uint8Array(64),C,Z;if(!x)return 0;for(Z=0;Z<16;Z++)N[Z]=0;for(Z=0;Z<8;Z++)N[Z]=v[Z];for(;x>=64;){for(oe(E,N,P,ae),Z=0;Z<64;Z++)f[p+Z]=(h?h[_+Z]:0)^E[Z];for(C=1,Z=8;Z<16;Z++)C=C+(N[Z]&255)|0,N[Z]=C&255,C>>>=8;x-=64,p+=64,h&&(_+=64)}if(x>0)for(oe(E,N,P,ae),Z=0;Z<x;Z++)f[p+Z]=(h?h[_+Z]:0)^E[Z];return 0}function Pe(f,p,h,_,x){return fe(f,p,null,0,h,_,x)}function Y(f,p,h,_,x){var v=new Uint8Array(32);return H(v,_,x,ae),Pe(f,p,h,_.subarray(16),v)}function xe(f,p,h,_,x,v,P){var N=new Uint8Array(32);return H(N,v,P,ae),fe(f,p,h,_,x,v.subarray(16),N)}function Ne(f,p){var h,_=0;for(h=0;h<17;h++)_=_+(f[h]+p[h]|0)|0,f[h]=_&255,_>>>=8}var Ue=new Uint32Array([5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,252]);function Re(f,p,h,_,x,v){var P,N,E,C,Z=new Uint32Array(17),_e=new Uint32Array(17),De=new Uint32Array(17),kt=new Uint32Array(17),Bn=new Uint32Array(17);for(E=0;E<17;E++)_e[E]=De[E]=0;for(E=0;E<16;E++)_e[E]=v[E];for(_e[3]&=15,_e[4]&=252,_e[7]&=15,_e[8]&=252,_e[11]&=15,_e[12]&=252,_e[15]&=15;x>0;){for(E=0;E<17;E++)kt[E]=0;for(E=0;E<16&&E<x;++E)kt[E]=h[_+E];for(kt[E]=1,_+=E,x-=E,Ne(De,kt),N=0;N<17;N++)for(Z[N]=0,E=0;E<17;E++)Z[N]=Z[N]+De[E]*(E<=N?_e[N-E]:320*_e[N+17-E]|0)|0|0;for(N=0;N<17;N++)De[N]=Z[N];for(C=0,E=0;E<16;E++)C=C+De[E]|0,De[E]=C&255,C>>>=8;for(C=C+De[16]|0,De[16]=C&3,C=5*(C>>>2)|0,E=0;E<16;E++)C=C+De[E]|0,De[E]=C&255,C>>>=8;C=C+De[16]|0,De[16]=C}for(E=0;E<17;E++)Bn[E]=De[E];for(Ne(De,Ue),P=-(De[16]>>>7)|0,E=0;E<17;E++)De[E]^=P&(Bn[E]^De[E]);for(E=0;E<16;E++)kt[E]=v[E+16];for(kt[16]=0,Ne(De,kt),E=0;E<16;E++)f[p+E]=De[E];return 0}function ke(f,p,h,_,x,v){var P=new Uint8Array(16);return Re(P,0,h,_,x,v),ce(f,p,P,0)}function we(f,p,h,_,x){var v;if(h<32)return-1;for(xe(f,0,p,0,h,_,x),Re(f,16,f,32,h-32,f),v=0;v<16;v++)f[v]=0;return 0}function st(f,p,h,_,x){var v,P=new Uint8Array(32);if(h<32||(Y(P,0,32,_,x),ke(p,16,p,32,h-32,P)!==0))return-1;for(xe(f,0,p,0,h,_,x),v=0;v<32;v++)f[v]=0;return 0}function Qe(f,p){var h;for(h=0;h<16;h++)f[h]=p[h]|0}function Xe(f){var p,h;for(h=0;h<16;h++)f[h]+=65536,p=Math.floor(f[h]/65536),f[(h+1)*(h<15?1:0)]+=p-1+37*(p-1)*(h===15?1:0),f[h]-=p*65536}function He(f,p,h){for(var _,x=~(h-1),v=0;v<16;v++)_=x&(f[v]^p[v]),f[v]^=_,p[v]^=_}function dt(f,p){var h,_,x,v=n(),P=n();for(h=0;h<16;h++)P[h]=p[h];for(Xe(P),Xe(P),Xe(P),_=0;_<2;_++){for(v[0]=P[0]-65517,h=1;h<15;h++)v[h]=P[h]-65535-(v[h-1]>>16&1),v[h-1]&=65535;v[15]=P[15]-32767-(v[14]>>16&1),x=v[15]>>16&1,v[14]&=65535,He(P,v,1-x)}for(h=0;h<16;h++)f[2*h]=P[h]&255,f[2*h+1]=P[h]>>8}function bn(f,p){var h=new Uint8Array(32),_=new Uint8Array(32);return dt(h,f),dt(_,p),le(h,0,_,0)}function O(f){var p=new Uint8Array(32);return dt(p,f),p[0]&1}function G(f,p){var h;for(h=0;h<16;h++)f[h]=p[2*h]+(p[2*h+1]<<8);f[15]&=32767}function U(f,p,h){var _;for(_=0;_<16;_++)f[_]=p[_]+h[_]|0}function V(f,p,h){var _;for(_=0;_<16;_++)f[_]=p[_]-h[_]|0}function W(f,p,h){var _,x,v=new Float64Array(31);for(_=0;_<31;_++)v[_]=0;for(_=0;_<16;_++)for(x=0;x<16;x++)v[_+x]+=p[_]*h[x];for(_=0;_<15;_++)v[_]+=38*v[_+16];for(_=0;_<16;_++)f[_]=v[_];Xe(f),Xe(f)}function ge(f,p){W(f,p,p)}function ue(f,p){var h=n(),_;for(_=0;_<16;_++)h[_]=p[_];for(_=253;_>=0;_--)ge(h,h),_!==2&&_!==4&&W(h,h,p);for(_=0;_<16;_++)f[_]=h[_]}function g(f,p){var h=n(),_;for(_=0;_<16;_++)h[_]=p[_];for(_=250;_>=0;_--)ge(h,h),_!==1&&W(h,h,p);for(_=0;_<16;_++)f[_]=h[_]}function w(f,p,h){var _=new Uint8Array(32),x=new Float64Array(80),v,P,N=n(),E=n(),C=n(),Z=n(),_e=n(),De=n();for(P=0;P<31;P++)_[P]=p[P];for(_[31]=p[31]&127|64,_[0]&=248,G(x,h),P=0;P<16;P++)E[P]=x[P],Z[P]=N[P]=C[P]=0;for(N[0]=Z[0]=1,P=254;P>=0;--P)v=_[P>>>3]>>>(P&7)&1,He(N,E,v),He(C,Z,v),U(_e,N,C),V(N,N,C),U(C,E,Z),V(E,E,Z),ge(Z,_e),ge(De,N),W(N,C,N),W(C,E,_e),U(_e,N,C),V(N,N,C),ge(E,N),V(C,Z,De),W(N,C,c),U(N,N,Z),W(C,C,N),W(N,Z,De),W(Z,E,x),ge(E,_e),He(N,E,v),He(C,Z,v);for(P=0;P<16;P++)x[P+16]=N[P],x[P+32]=C[P],x[P+48]=E[P],x[P+64]=Z[P];var kt=x.subarray(32),Bn=x.subarray(16);return ue(kt,kt),W(Bn,Bn,kt),dt(f,Bn),0}function A(f,p){return w(f,p,i)}function k(f,p){return s(p,32),A(f,p)}function $(f,p,h){var _=new Uint8Array(32);return w(_,h,p),H(f,r,_,ae)}var M=we,z=st;function j(f,p,h,_,x,v){var P=new Uint8Array(32);return $(P,x,v),M(f,p,h,_,P)}function D(f,p,h,_,x,v){var P=new Uint8Array(32);return $(P,x,v),z(f,p,h,_,P)}function T(){var f=0,p=0,h=0,_=0,x=65535,v,P,N;for(N=0;N<arguments.length;N++)v=arguments[N].lo,P=arguments[N].hi,f+=v&x,p+=v>>>16,h+=P&x,_+=P>>>16;return p+=f>>>16,h+=p>>>16,_+=h>>>16,new e(h&x|_<<16,f&x|p<<16)}function ne(f,p){return new e(f.hi>>>p,f.lo>>>p|f.hi<<32-p)}function J(){var f=0,p=0,h;for(h=0;h<arguments.length;h++)f^=arguments[h].lo,p^=arguments[h].hi;return new e(p,f)}function Q(f,p){var h,_,x=32-p;return p<32?(h=f.hi>>>p|f.lo<<x,_=f.lo>>>p|f.hi<<x):p<64&&(h=f.lo>>>p|f.hi<<x,_=f.hi>>>p|f.lo<<x),new e(h,_)}function ie(f,p,h){var _=f.hi&p.hi^~f.hi&h.hi,x=f.lo&p.lo^~f.lo&h.lo;return new e(_,x)}function me(f,p,h){var _=f.hi&p.hi^f.hi&h.hi^p.hi&h.hi,x=f.lo&p.lo^f.lo&h.lo^p.lo&h.lo;return new e(_,x)}function Oe(f){return J(Q(f,28),Q(f,34),Q(f,39))}function Ee(f){return J(Q(f,14),Q(f,18),Q(f,41))}function Be(f){return J(Q(f,1),Q(f,8),ne(f,7))}function pt(f){return J(Q(f,19),Q(f,61),ne(f,6))}var tn=[new e(1116352408,3609767458),new e(1899447441,602891725),new e(3049323471,3964484399),new e(3921009573,2173295548),new e(961987163,4081628472),new e(1508970993,3053834265),new e(2453635748,2937671579),new e(2870763221,3664609560),new e(3624381080,2734883394),new e(310598401,1164996542),new e(607225278,1323610764),new e(1426881987,3590304994),new e(1925078388,4068182383),new e(2162078206,991336113),new e(2614888103,633803317),new e(3248222580,3479774868),new e(3835390401,2666613458),new e(4022224774,944711139),new e(264347078,2341262773),new e(604807628,2007800933),new e(770255983,1495990901),new e(1249150122,1856431235),new e(1555081692,3175218132),new e(1996064986,2198950837),new e(2554220882,3999719339),new e(2821834349,766784016),new e(2952996808,2566594879),new e(3210313671,3203337956),new e(3336571891,1034457026),new e(3584528711,2466948901),new e(113926993,3758326383),new e(338241895,168717936),new e(666307205,1188179964),new e(773529912,1546045734),new e(1294757372,1522805485),new e(1396182291,2643833823),new e(1695183700,2343527390),new e(1986661051,1014477480),new e(2177026350,1206759142),new e(2456956037,344077627),new e(2730485921,1290863460),new e(2820302411,3158454273),new e(3259730800,3505952657),new e(3345764771,106217008),new e(3516065817,3606008344),new e(3600352804,1432725776),new e(4094571909,1467031594),new e(275423344,851169720),new e(430227734,3100823752),new e(506948616,1363258195),new e(659060556,3750685593),new e(883997877,3785050280),new e(958139571,3318307427),new e(1322822218,3812723403),new e(1537002063,2003034995),new e(1747873779,3602036899),new e(1955562222,1575990012),new e(2024104815,1125592928),new e(2227730452,2716904306),new e(2361852424,442776044),new e(2428436474,593698344),new e(2756734187,3733110249),new e(3204031479,2999351573),new e(3329325298,3815920427),new e(3391569614,3928383900),new e(3515267271,566280711),new e(3940187606,3454069534),new e(4118630271,4000239992),new e(116418474,1914138554),new e(174292421,2731055270),new e(289380356,3203993006),new e(460393269,320620315),new e(685471733,587496836),new e(852142971,1086792851),new e(1017036298,365543100),new e(1126000580,2618297676),new e(1288033470,3409855158),new e(1501505948,4234509866),new e(1607167915,987167468),new e(1816402316,1246189591)];function ms(f,p,h){var _=[],x=[],v=[],P=[],N,E,C;for(E=0;E<8;E++)_[E]=v[E]=K(f,8*E);for(var Z=0;h>=128;){for(E=0;E<16;E++)P[E]=K(p,8*E+Z);for(E=0;E<80;E++){for(C=0;C<8;C++)x[C]=v[C];for(N=T(v[7],Ee(v[4]),ie(v[4],v[5],v[6]),tn[E],P[E%16]),x[7]=T(N,Oe(v[0]),me(v[0],v[1],v[2])),x[3]=T(x[3],N),C=0;C<8;C++)v[(C+1)%8]=x[C];if(E%16===15)for(C=0;C<16;C++)P[C]=T(P[C],P[(C+9)%16],Be(P[(C+1)%16]),pt(P[(C+14)%16]))}for(E=0;E<8;E++)v[E]=T(v[E],_[E]),_[E]=v[E];Z+=128,h-=128}for(E=0;E<8;E++)ee(f,8*E,_[E]);return h}var yn=new Uint8Array([106,9,230,103,243,188,201,8,187,103,174,133,132,202,167,59,60,110,243,114,254,148,248,43,165,79,245,58,95,29,54,241,81,14,82,127,173,230,130,209,155,5,104,140,43,62,108,31,31,131,217,171,251,65,189,107,91,224,205,25,19,126,33,121]);function It(f,p,h){var _=new Uint8Array(64),x=new Uint8Array(256),v,P=h;for(v=0;v<64;v++)_[v]=yn[v];for(ms(_,p,h),h%=128,v=0;v<256;v++)x[v]=0;for(v=0;v<h;v++)x[v]=p[P-h+v];for(x[h]=128,h=256-128*(h<112?1:0),x[h-9]=0,ee(x,h-8,new e(P/536870912|0,P<<3)),ms(_,x,h),v=0;v<64;v++)f[v]=_[v];return 0}function Ve(f,p){var h=n(),_=n(),x=n(),v=n(),P=n(),N=n(),E=n(),C=n(),Z=n();V(h,f[1],f[0]),V(Z,p[1],p[0]),W(h,h,Z),U(_,f[0],f[1]),U(Z,p[0],p[1]),W(_,_,Z),W(x,f[3],p[3]),W(x,x,u),W(v,f[2],p[2]),U(v,v,v),V(P,_,h),V(N,v,x),U(E,v,x),U(C,_,h),W(f[0],P,N),W(f[1],C,E),W(f[2],E,N),W(f[3],P,C)}function mt(f,p,h){var _;for(_=0;_<4;_++)He(f[_],p[_],h)}function Un(f,p){var h=n(),_=n(),x=n();ue(x,p[2]),W(h,p[0],x),W(_,p[1],x),dt(f,_),f[31]^=O(h)<<7}function Jr(f,p,h){var _,x;for(Qe(f[0],o),Qe(f[1],a),Qe(f[2],a),Qe(f[3],o),x=255;x>=0;--x)_=h[x/8|0]>>(x&7)&1,mt(f,p,_),Ve(p,f),Ve(f,f),mt(f,p,_)}function Xs(f,p){var h=[n(),n(),n(),n()];Qe(h[0],d),Qe(h[1],m),Qe(h[2],a),W(h[3],d,m),Jr(f,h,p)}function Qr(f,p,h){var _=new Uint8Array(64),x=[n(),n(),n(),n()],v;for(h||s(p,32),It(_,p,32),_[0]&=248,_[31]&=127,_[31]|=64,Xs(x,_),Un(f,x),v=0;v<32;v++)p[v+32]=f[v];return 0}var Zs=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Xr(f,p){var h,_,x,v;for(_=63;_>=32;--_){for(h=0,x=_-32,v=_-12;x<v;++x)p[x]+=h-16*p[_]*Zs[x-(_-32)],h=Math.floor((p[x]+128)/256),p[x]-=h*256;p[x]+=h,p[_]=0}for(h=0,x=0;x<32;x++)p[x]+=h-(p[31]>>4)*Zs[x],h=p[x]>>8,p[x]&=255;for(x=0;x<32;x++)p[x]-=h*Zs[x];for(_=0;_<32;_++)p[_+1]+=p[_]>>8,f[_]=p[_]&255}function Zr(f){var p=new Float64Array(64),h;for(h=0;h<64;h++)p[h]=f[h];for(h=0;h<64;h++)f[h]=0;Xr(f,p)}function jo(f,p,h,_){var x=new Uint8Array(64),v=new Uint8Array(64),P=new Uint8Array(64),N,E,C=new Float64Array(64),Z=[n(),n(),n(),n()];It(x,_,32),x[0]&=248,x[31]&=127,x[31]|=64;var _e=h+64;for(N=0;N<h;N++)f[64+N]=p[N];for(N=0;N<32;N++)f[32+N]=x[32+N];for(It(P,f.subarray(32),h+32),Zr(P),Xs(Z,P),Un(f,Z),N=32;N<64;N++)f[N]=_[N];for(It(v,f,h+64),Zr(v),N=0;N<64;N++)C[N]=0;for(N=0;N<32;N++)C[N]=P[N];for(N=0;N<32;N++)for(E=0;E<32;E++)C[N+E]+=v[N]*x[E];return Xr(f.subarray(32),C),_e}function vu(f,p){var h=n(),_=n(),x=n(),v=n(),P=n(),N=n(),E=n();return Qe(f[2],a),G(f[1],p),ge(x,f[1]),W(v,x,l),V(x,x,f[2]),U(v,f[2],v),ge(P,v),ge(N,P),W(E,N,P),W(h,E,x),W(h,h,v),g(h,h),W(h,h,x),W(h,h,v),W(h,h,v),W(f[0],h,v),ge(_,f[0]),W(_,_,v),bn(_,x)&&W(f[0],f[0],b),ge(_,f[0]),W(_,_,v),bn(_,x)?-1:(O(f[0])===p[31]>>7&&V(f[0],o,f[0]),W(f[3],f[0],f[1]),0)}function ei(f,p,h,_){var x,v=new Uint8Array(32),P=new Uint8Array(64),N=[n(),n(),n(),n()],E=[n(),n(),n(),n()];if(h<64||vu(E,_))return-1;for(x=0;x<h;x++)f[x]=p[x];for(x=0;x<32;x++)f[x+32]=_[x];if(It(P,f,h),Zr(P),Jr(N,E,P),Xs(E,p.subarray(32)),Ve(N,E),Un(v,N),h-=64,le(p,0,v,0)){for(x=0;x<h;x++)f[x]=0;return-1}for(x=0;x<h;x++)f[x]=p[x+64];return h}var ti=32,er=24,gs=32,Dn=16,_s=32,tr=32,bs=32,ys=32,ni=32,Mo=er,Eu=gs,Su=Dn,zt=64,wn=32,Fn=64,si=32,ri=64;t.lowlevel={crypto_core_hsalsa20:H,crypto_stream_xor:xe,crypto_stream:Y,crypto_stream_salsa20_xor:fe,crypto_stream_salsa20:Pe,crypto_onetimeauth:Re,crypto_onetimeauth_verify:ke,crypto_verify_16:ce,crypto_verify_32:le,crypto_secretbox:we,crypto_secretbox_open:st,crypto_scalarmult:w,crypto_scalarmult_base:A,crypto_box_beforenm:$,crypto_box_afternm:M,crypto_box:j,crypto_box_open:D,crypto_box_keypair:k,crypto_hash:It,crypto_sign:jo,crypto_sign_keypair:Qr,crypto_sign_open:ei,crypto_secretbox_KEYBYTES:ti,crypto_secretbox_NONCEBYTES:er,crypto_secretbox_ZEROBYTES:gs,crypto_secretbox_BOXZEROBYTES:Dn,crypto_scalarmult_BYTES:_s,crypto_scalarmult_SCALARBYTES:tr,crypto_box_PUBLICKEYBYTES:bs,crypto_box_SECRETKEYBYTES:ys,crypto_box_BEFORENMBYTES:ni,crypto_box_NONCEBYTES:Mo,crypto_box_ZEROBYTES:Eu,crypto_box_BOXZEROBYTES:Su,crypto_sign_BYTES:zt,crypto_sign_PUBLICKEYBYTES:wn,crypto_sign_SECRETKEYBYTES:Fn,crypto_sign_SEEDBYTES:si,crypto_hash_BYTES:ri,gf:n,D:l,L:Zs,pack25519:dt,unpack25519:G,M:W,A:U,S:ge,Z:V,pow2523:g,add:Ve,set25519:Qe,modL:Xr,scalarmult:Jr,scalarbase:Xs};function Uo(f,p){if(f.length!==ti)throw new Error("bad key size");if(p.length!==er)throw new Error("bad nonce size")}function Au(f,p){if(f.length!==bs)throw new Error("bad public key size");if(p.length!==ys)throw new Error("bad secret key size")}function gt(){for(var f=0;f<arguments.length;f++)if(!(arguments[f]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Do(f){for(var p=0;p<f.length;p++)f[p]=0}t.randomBytes=function(f){var p=new Uint8Array(f);return s(p,f),p},t.secretbox=function(f,p,h){gt(f,p,h),Uo(h,p);for(var _=new Uint8Array(gs+f.length),x=new Uint8Array(_.length),v=0;v<f.length;v++)_[v+gs]=f[v];return we(x,_,_.length,p,h),x.subarray(Dn)},t.secretbox.open=function(f,p,h){gt(f,p,h),Uo(h,p);for(var _=new Uint8Array(Dn+f.length),x=new Uint8Array(_.length),v=0;v<f.length;v++)_[v+Dn]=f[v];return _.length<32||st(x,_,_.length,p,h)!==0?null:x.subarray(gs)},t.secretbox.keyLength=ti,t.secretbox.nonceLength=er,t.secretbox.overheadLength=Dn,t.scalarMult=function(f,p){if(gt(f,p),f.length!==tr)throw new Error("bad n size");if(p.length!==_s)throw new Error("bad p size");var h=new Uint8Array(_s);return w(h,f,p),h},t.scalarMult.base=function(f){if(gt(f),f.length!==tr)throw new Error("bad n size");var p=new Uint8Array(_s);return A(p,f),p},t.scalarMult.scalarLength=tr,t.scalarMult.groupElementLength=_s,t.box=function(f,p,h,_){var x=t.box.before(h,_);return t.secretbox(f,p,x)},t.box.before=function(f,p){gt(f,p),Au(f,p);var h=new Uint8Array(ni);return $(h,f,p),h},t.box.after=t.secretbox,t.box.open=function(f,p,h,_){var x=t.box.before(h,_);return t.secretbox.open(f,p,x)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var f=new Uint8Array(bs),p=new Uint8Array(ys);return k(f,p),{publicKey:f,secretKey:p}},t.box.keyPair.fromSecretKey=function(f){if(gt(f),f.length!==ys)throw new Error("bad secret key size");var p=new Uint8Array(bs);return A(p,f),{publicKey:p,secretKey:new Uint8Array(f)}},t.box.publicKeyLength=bs,t.box.secretKeyLength=ys,t.box.sharedKeyLength=ni,t.box.nonceLength=Mo,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(f,p){if(gt(f,p),p.length!==Fn)throw new Error("bad secret key size");var h=new Uint8Array(zt+f.length);return jo(h,f,f.length,p),h},t.sign.open=function(f,p){if(gt(f,p),p.length!==wn)throw new Error("bad public key size");var h=new Uint8Array(f.length),_=ei(h,f,f.length,p);if(_<0)return null;for(var x=new Uint8Array(_),v=0;v<x.length;v++)x[v]=h[v];return x},t.sign.detached=function(f,p){for(var h=t.sign(f,p),_=new Uint8Array(zt),x=0;x<_.length;x++)_[x]=h[x];return _},t.sign.detached.verify=function(f,p,h){if(gt(f,p,h),p.length!==zt)throw new Error("bad signature size");if(h.length!==wn)throw new Error("bad public key size");var _=new Uint8Array(zt+f.length),x=new Uint8Array(zt+f.length),v;for(v=0;v<zt;v++)_[v]=p[v];for(v=0;v<f.length;v++)_[v+zt]=f[v];return ei(x,_,_.length,h)>=0},t.sign.keyPair=function(){var f=new Uint8Array(wn),p=new Uint8Array(Fn);return Qr(f,p),{publicKey:f,secretKey:p}},t.sign.keyPair.fromSecretKey=function(f){if(gt(f),f.length!==Fn)throw new Error("bad secret key size");for(var p=new Uint8Array(wn),h=0;h<p.length;h++)p[h]=f[32+h];return{publicKey:p,secretKey:new Uint8Array(f)}},t.sign.keyPair.fromSeed=function(f){if(gt(f),f.length!==si)throw new Error("bad seed size");for(var p=new Uint8Array(wn),h=new Uint8Array(Fn),_=0;_<32;_++)h[_]=f[_];return Qr(p,h,!0),{publicKey:p,secretKey:h}},t.sign.publicKeyLength=wn,t.sign.secretKeyLength=Fn,t.sign.seedLength=si,t.sign.signatureLength=zt,t.hash=function(f){gt(f);var p=new Uint8Array(ri);return It(p,f,f.length),p},t.hash.hashLength=ri,t.verify=function(f,p){return gt(f,p),f.length===0||p.length===0||f.length!==p.length?!1:se(f,0,p,0,f.length)===0},t.setPRNG=function(f){s=f},function(){var f=typeof globalThis<"u"?globalThis.crypto||globalThis.msCrypto:null;if(f&&f.getRandomValues){var p=65536;t.setPRNG(function(h,_){var x,v=new Uint8Array(_);for(x=0;x<_;x+=p)f.getRandomValues(v.subarray(x,x+Math.min(_-x,p)));for(x=0;x<_;x++)h[x]=v[x];Do(v)})}else typeof require<"u"&&(f=require("crypto"),f&&f.randomBytes&&t.setPRNG(function(h,_){var x,v=f.randomBytes(_);for(x=0;x<_;x++)h[x]=v[x];Do(v)}))}()})(typeof module<"u"&&module.exports?module.exports:globalThis.nacl=globalThis.nacl||{});const lr=globalThis.nacl;lr.sign.keyPair.fromSeed,lr.sign.detached,lr.sign.detached.verify,lr.randomBytes;var ic;(function(t){t.InvalidPrefixByte="nkeys: invalid prefix byte",t.InvalidKey="nkeys: invalid key",t.InvalidPublicKey="nkeys: invalid public key",t.InvalidSeedLen="nkeys: invalid seed length",t.InvalidSeed="nkeys: invalid seed",t.InvalidEncoding="nkeys: invalid encoded key",t.InvalidSignature="nkeys: signature verification failed",t.CannotSign="nkeys: cannot sign, no private key available",t.PublicKeyOnly="nkeys: no seed or private key available",t.InvalidChecksum="nkeys: invalid checksum",t.SerializationError="nkeys: serialization error",t.ApiError="nkeys: api error",t.ClearedPair="nkeys: pair is cleared"})(ic||(ic={}));var oc;(function(t){t[t.Seed=144]="Seed",t[t.Private=120]="Private",t[t.Operator=112]="Operator",t[t.Server=104]="Server",t[t.Cluster=16]="Cluster",t[t.Account=0]="Account",t[t.User=160]="User"})(oc||(oc={}));function Mm(t){return t.authenticator?t.authenticator:t.token?Fm(t.token):t.user?Dm(t.user,t.pass):Um()}function Um(){return()=>{}}function Dm(t,e){return()=>({user:t,pass:e})}function Fm(t){return()=>({auth_token:t})}class Bm extends Js{constructor(e,n){super(e,n)}async add(e={}){ut(e.name);const s=await this._request(`${this.prefix}.STREAM.CREATE.${e.name}`,e);return this._fixInfo(s),s}async delete(e){return ut(e),(await this._request(`${this.prefix}.STREAM.DELETE.${e}`)).success}async update(e,n={}){if(typeof e=="object"){const a=e;e=a.name,n=a,console.trace("\x1B[33m >> streams.update(config: StreamConfig) api changed to streams.update(name: string, config: StreamUpdateConfig) - this shim will be removed - update your code.  \x1B[0m")}ut(e);const s=await this.info(e),r=Object.assign(s.config,n),o=await this._request(`${this.prefix}.STREAM.UPDATE.${e}`,r);return this._fixInfo(o),o}async info(e,n){ut(e);const r=await this._request(`${this.prefix}.STREAM.INFO.${e}`,n);return this._fixInfo(r),r}list(){const e=s=>{const r=s;return r.streams.forEach(i=>{this._fixInfo(i)}),r.streams},n=`${this.prefix}.STREAM.LIST`;return new Ql(n,e,this)}_fixInfo(e){e.config.sealed=e.config.sealed||!1,e.config.deny_delete=e.config.deny_delete||!1,e.config.deny_purge=e.config.deny_purge||!1,e.config.allow_rollup_hdrs=e.config.allow_rollup_hdrs||!1}async purge(e,n){if(n){const{keep:r,seq:i}=n;if(typeof r=="number"&&typeof i=="number")throw new Error("can specify one of keep or seq")}return ut(e),await this._request(`${this.prefix}.STREAM.PURGE.${e}`,n)}async deleteMessage(e,n,s=!0){ut(e);const r={seq:n};return s||(r.no_erase=!0),(await this._request(`${this.prefix}.STREAM.MSG.DELETE.${e}`,r)).success}async getMessage(e,n){ut(e);const r=await this._request(`${this.prefix}.STREAM.MSG.GET.${e}`,n);return new qm(r)}find(e){return this.findStream(e)}}class qm{constructor(e){y(this,"subject");y(this,"seq");y(this,"data");y(this,"time");y(this,"header");if(this.subject=e.message.subject,this.seq=e.message.seq,this.time=new Date(Date.parse(e.message.time)),this.data=e.message.data?this._parse(e.message.data):Et,e.message.hdrs){const n=this._parse(e.message.hdrs);this.header=pn.decode(n)}else this.header=cs()}_parse(e){const n=atob(e),s=n.length,r=new Uint8Array(s);for(let i=0;i<s;i++)r[i]=n.charCodeAt(i);return r}}class Hm extends Js{constructor(e,n){super(e,n)}async getMessage(e,n){ut(e);let s=n;const{last_by_subj:r}=s;r&&(s=null);const i=s?this.jc.encode(s):Et,o=r?`$JS.API.DIRECT.GET.${e}.${r}`:`$JS.API.DIRECT.GET.${e}`,a=await this.nc.request(o,i),c=Gs(a);if(c)return Promise.reject(c);const l=new zm(a);return Promise.resolve(l)}}class zm{constructor(e){y(this,"data");y(this,"header");if(!e.headers)throw new Error("headers expected");this.data=e.data,this.header=e.headers}get subject(){return this.header.get(Jn.Subject)}get seq(){const e=this.header.get(Jn.Sequence);return typeof e=="string"?parseInt(e):0}get time(){return new Date(Date.parse(this.header.get(Jn.TimeStamp)))}get stream(){return this.header.get(Jn.Stream)}}class Gm extends Js{constructor(n,s){super(n,s);y(this,"streams");y(this,"consumers");y(this,"direct");this.streams=new Bm(n,s),this.consumers=new Xl(n,s),this.direct=new Hm(n,s)}async getAccountInfo(){return await this._request(`${this.prefix}.INFO`)}advisories(){const n=new Nt;return this.nc.subscribe("$JS.EVENT.ADVISORY.>",{callback:(s,r)=>{if(s)throw s;try{const i=this.parseJsResponse(r),o=i.type.split("."),a=o[o.length-1];n.push({kind:a,data:i})}catch(i){n.stop(i)}}}),n}}function Wm(){return{maxPingOut:2,maxReconnectAttempts:10,noRandomize:!1,pedantic:!1,pingInterval:zl,reconnect:!0,reconnectJitter:100,reconnectJitterTLS:1e3,reconnectTimeWait:Hl,tls:void 0,verbose:!1,waitOnFirstConnect:!1}}function Km(t){const e=`${Gi}:${nu()}`;if(t=t||{servers:[e]},t.servers=t.servers||[],typeof t.servers=="string"&&(t.servers=[t.servers]),t.servers.length>0&&t.port)throw new te("port and servers options are mutually exclusive",q.InvalidOption);t.servers.length===0&&t.port&&(t.servers=[`${Gi}:${t.port}`]),t.servers&&t.servers.length===0&&(t.servers=[e]);const n=Kr(Wm(),t);if(t.user&&t.token||t.authenticator&&(t.token||t.user||t.pass))throw te.errorForCode(q.BadAuthentication);if(n.authenticator=Mm(n),["reconnectDelayHandler","authenticator"].forEach(s=>{if(n[s]&&typeof n[s]!="function")throw new te(`${s} option should be a function`,q.NotFunction)}),n.reconnectDelayHandler||(n.reconnectDelayHandler=()=>{let s=n.tls?n.reconnectJitterTLS:n.reconnectJitter;return s&&(s++,s=Math.floor(Math.random()*s)),n.reconnectTimeWait+s}),n.inboxPrefix)try{gn(n.inboxPrefix)}catch(s){throw new te(s.message,q.ApiError)}if(n.resolve&&typeof su()!="function")throw new te("'resolve' is not supported on this client",q.InvalidOption);return n}var Rn;(function(t){t.MsgIdHdr="Nats-Msg-Id",t.ExpectedStreamHdr="Nats-Expected-Stream",t.ExpectedLastSeqHdr="Nats-Expected-Last-Sequence",t.ExpectedLastMsgIdHdr="Nats-Expected-Last-Msg-Id",t.ExpectedLastSubjectSequenceHdr="Nats-Expected-Last-Subject-Sequence"})(Rn||(Rn={}));function au(){return{key:{encode(t){return t},decode(t){return t}},value:{encode(t){return t},decode(t){return t}}}}function Vm(){return{replicas:1,history:1,timeout:2e3,maxBucketSize:-1,maxValueSize:-1,codec:au(),storage:Ki.File}}const ur="KV-Operation",ac="KV_",fr="$KV",Ym=/^[-/=.\w]+$/,Jm=/^[-/=.>*\w]+$/,Qm=/^[-\w]+$/;function cu(t){if(t.startsWith(".")||t.endsWith(".")||!Ym.test(t))throw new Error(`invalid key: ${t}`)}function Xm(t){if(t.startsWith(".")||t.endsWith(".")||!Jm.test(t))throw new Error(`invalid key: ${t}`)}function Zm(t){if(t.startsWith(".")||t.endsWith("."))throw new Error(`invalid key: ${t}`);const e=t.split(".");let n=!1;for(let s=0;s<e.length;s++)switch(e[s]){case"*":n=!0;break;case">":if(s!==e.length-1)throw new Error(`invalid key: ${t}`);n=!0;break}return n}function br(t){if(!Qm.test(t))throw new Error(`invalid bucket name: ${t}`)}class Ks{constructor(e,n,s){y(this,"jsm");y(this,"js");y(this,"stream");y(this,"bucket");y(this,"direct");y(this,"codec");y(this,"_prefixLen");y(this,"subjPrefix");y(this,"validateKey",cu);y(this,"validateSearchKey",Xm);y(this,"hasWildcards",Zm);br(e),this.jsm=n,this.js=s,this.bucket=e,this._prefixLen=0,this.subjPrefix=fr;const i=s.prefix||"$JS.API";i!=="$JS.API"&&(this.subjPrefix=`${i}.${fr}`)}static async create(e,n,s={}){br(n);const r=s.timeout||2e3,i=e;let o=i.opts||{};o=Object.assign(o,{timeout:r});const a=await i.nc.jetstreamManager(o),c=new Ks(n,a,e);return await c.init(s),c}static async bind(e,n,s={}){var c;const i=await e.nc.jetstreamManager(),o=await i.streams.info(`${ac}${n}`);br(o.config.name);const a=new Ks(n,i,e);return Object.assign(a,o),a.codec=s.codec||au(),a.direct=(c=o.config.allow_direct)!=null?c:!1,a}async init(e={}){var l,u;const n=Object.assign(Vm(),e);this.codec=n.codec;const s={};this.stream=s.name=(l=e.streamName)!=null?l:this.bucketName(),s.subjects=[this.subjectForBucket()],s.retention=Wi.Limits,s.max_msgs_per_subject=n.history,n.maxBucketSize&&(n.max_bytes=n.maxBucketSize),n.max_bytes&&(s.max_bytes=n.max_bytes),s.max_msg_size=n.maxValueSize,s.storage=n.storage;const r=(u=e.placementCluster)!=null?u:"";r&&(e.placement={},e.placement.cluster=r,e.placement.tags=[]),e.placement&&(s.placement=e.placement),e.republish&&(s.republish=e.republish),e.description&&(s.description=e.description);const o=this.js.nc.getServerVersion(),a=o?$r(o,ls("2.7.2"))>=0:!1;s.discard=a?zs.New:zs.Old;const c=o?$r(o,ls("2.8.5"))>=0:!1;s.allow_direct=e.allow_direct?c:!1,this.direct=s.allow_direct,s.num_replicas=n.replicas,n.ttl&&(s.max_age=at(n.ttl)),s.allow_rollup_hdrs=!0;try{await this.jsm.streams.info(s.name)}catch(d){d.message==="stream not found"&&await this.jsm.streams.add(s)}}bucketName(){var e;return(e=this.stream)!=null?e:`${ac}${this.bucket}`}subjectForBucket(){return`${this.subjPrefix}.${this.bucket}.>`}subjectForKey(e){return`${this.subjPrefix}.${this.bucket}.${e}`}fullKeyName(e){return`${fr}.${this.bucket}.${e}`}get prefixLen(){return this._prefixLen===0&&(this._prefixLen=`${fr}.${this.bucket}.`.length),this._prefixLen}encodeKey(e){const n=[];for(const s of e.split("."))switch(s){case">":case"*":n.push(s);break;default:n.push(this.codec.key.encode(s));break}return n.join(".")}decodeKey(e){const n=[];for(const s of e.split("."))switch(s){case">":case"*":n.push(s);break;default:n.push(this.codec.key.decode(s));break}return n.join(".")}close(){return Promise.resolve()}dataLen(e,n){const s=n&&n.get($t.MessageSizeHdr)||"";return s!==""?parseInt(s,10):e.length}smToEntry(e){return{bucket:this.bucket,key:e.subject.substring(this.prefixLen),value:e.data,delta:0,created:e.time,revision:e.seq,operation:e.header.get(ur)||"PUT",length:this.dataLen(e.data,e.header)}}jmToEntry(e){var s;const n=this.decodeKey(e.subject.substring(this.prefixLen));return{bucket:this.bucket,key:n,value:e.data,created:new Date(Ya(e.info.timestampNanos)),revision:e.seq,operation:((s=e.headers)==null?void 0:s.get(ur))||"PUT",delta:e.info.pending,length:this.dataLen(e.data,e.headers)}}create(e,n){return this.put(e,n,{previousSeq:0})}update(e,n,s){if(s<=0)throw new Error("version must be greater than 0");return this.put(e,n,{previousSeq:s})}async put(e,n,s={}){const r=this.encodeKey(e);this.validateKey(r);const i={};if(s.previousSeq!==void 0){const a=cs();i.headers=a,a.set("Nats-Expected-Last-Subject-Sequence",`${s.previousSeq}`)}return(await this.js.publish(this.subjectForKey(r),n,i)).seq}async get(e,n){const s=this.encodeKey(e);this.validateKey(s);let r={last_by_subj:this.fullKeyName(s)};n&&n.revision>0&&(r={seq:n.revision});let i;try{this.direct?i=await this.jsm.direct.getMessage(this.bucketName(),r):i=await this.jsm.streams.getMessage(this.bucketName(),r);const o=this.smToEntry(i);return o.key!==s?null:o}catch(o){if(o.code===q.JetStream404NoMessages)return null;throw o}}purge(e){return this._deleteOrPurge(e,"PURGE")}delete(e){return this._deleteOrPurge(e,"DEL")}async purgeDeletes(e=30*60*1e3){const n=We(),s=[],r=await this.watch({key:">",initializedFn:()=>{n.resolve()}});(async()=>{for await(const c of r)(c.operation==="DEL"||c.operation==="PURGE")&&s.push(c)})().then(),await n,r.stop();const i=Date.now()-e,o=s.map(c=>{const l=this.subjectForKey(c.key);return c.created.getTime()>=i?this.jsm.streams.purge(this.stream,{filter:l,keep:1}):this.jsm.streams.purge(this.stream,{filter:l,keep:0})}),a=await Promise.all(o);return a.unshift({success:!0,purged:0}),a.reduce((c,l)=>(c.purged+=l.purged,c))}async _deleteOrPurge(e,n){if(!this.hasWildcards(e))return this._doDeleteOrPurge(e,n);const s=await this.keys(e),r=[];for await(const i of s)r.push(this._doDeleteOrPurge(i,n)),r.length===100&&(await Promise.all(r),r.length=0);r.length>0&&await Promise.all(r)}async _doDeleteOrPurge(e,n){const s=this.encodeKey(e);this.validateKey(s);const r=cs();r.set(ur,n),n==="PURGE"&&r.set($t.RollupHdr,$t.RollupValueSubject),await this.js.publish(this.subjectForKey(s),Et,{headers:r})}_buildCC(e,n=!1,s={}){const r=this.encodeKey(e);return this.validateSearchKey(e),Object.assign({deliver_policy:n?_t.All:_t.LastPerSubject,ack_policy:Ze.None,filter_subject:this.fullKeyName(r),flow_control:!0,idle_heartbeat:at(5*1e3)},s)}remove(e){return this.purge(e)}async history(e={}){var d;const n=(d=e.key)!=null?d:">",s=new Nt,r={};r.headers_only=e.headers_only||!1;let i;i=()=>{s.stop()};let o=0;const a=this._buildCC(n,!0,r),c=a.filter_subject,l=mn(a);l.orderedConsumer(),l.callback((m,b)=>{if(m){s.stop(m);return}if(b){const S=this.jmToEntry(b);s.push(S),s.received++,(i&&o>0&&s.received>=o||b.info.pending===0)&&(s.push(i),i=void 0)}});const u=await this.js.subscribe(c,l);if(i){const{info:{last:m}}=u,b=m.num_pending+m.delivered.consumer_seq;if(b===0||s.received>=b)try{i()}catch(S){s.stop(S)}finally{i=void 0}else o=b}return s._data=u,s.iterClosed.then(()=>{u.unsubscribe()}),u.closed.then(()=>{s.stop()}).catch(m=>{s.stop(m)}),s}async watch(e={}){var d;const n=(d=e.key)!=null?d:">",s=new Nt,r={};r.headers_only=e.headers_only||!1;let i=e.initializedFn,o=0;const a=this._buildCC(n,!1,r),c=a.filter_subject,l=mn(a);l.orderedConsumer(),l.callback((m,b)=>{if(m){s.stop(m);return}if(b){const S=this.jmToEntry(b);s.push(S),s.received++,i&&(o>0&&s.received>=o||b.info.pending===0)&&(s.push(i),i=void 0)}});const u=await this.js.subscribe(c,l);if(i){const{info:{last:m}}=u,b=m.num_pending+m.delivered.consumer_seq;if(b===0||s.received>=b)try{i()}catch(S){s.stop(S)}finally{i=void 0}else o=b}return s._data=u,s.iterClosed.then(()=>{u.unsubscribe()}),u.closed.then(()=>{s.stop()}).catch(m=>{s.stop(m)}),s}async keys(e=">"){const n=new Nt,s=this._buildCC(e,!1,{headers_only:!0}),r=s.filter_subject,i=mn(s);i.orderedConsumer();const o=await this.js.subscribe(r,i);return(async()=>{var c;for await(const l of o){const u=(c=l.headers)==null?void 0:c.get(ur);if(u!=="DEL"&&u!=="PURGE"){const d=this.decodeKey(l.subject.substring(this.prefixLen));n.push(d)}l.info.pending===0&&o.unsubscribe()}})().then(()=>{n.stop()}).catch(c=>{n.stop(c)}),o.info.last.num_pending===0&&o.unsubscribe(),n}purgeBucket(e){return this.jsm.streams.purge(this.bucketName(),e)}destroy(){return this.jsm.streams.delete(this.bucketName())}async status(){var r,i;const n=(i=(r=this.js.nc.info)==null?void 0:r.cluster)!=null?i:"",s=await this.jsm.streams.info(this.bucketName());return{bucket:this.bucketName(),values:s.state.messages,history:s.config.max_msgs_per_subject,ttl:Ya(s.config.max_age),bucket_location:n,backingStore:s.config.storage,storage:s.config.storage,replicas:s.config.num_replicas}}}function eg(t){return br(t),`OBJ_${t}`}function tg(t){return t.startsWith("OBJ_")?t.substring(4):t}class cc{constructor(e){y(this,"si");y(this,"backingStore");this.si=e,this.backingStore="JetStream"}get bucket(){return tg(this.si.config.name)}get description(){var e;return(e=this.si.config.description)!=null?e:""}get ttl(){return this.si.config.max_age}get storage(){return this.si.config.storage}get replicas(){return this.si.config.num_replicas}get sealed(){return this.si.config.sealed}get size(){return this.si.state.bytes}get streamInfo(){return this.si}}class wi{constructor(e){y(this,"info");y(this,"hdrs");this.info=e}get name(){return this.info.name}get description(){var e;return(e=this.info.description)!=null?e:""}get headers(){return this.hdrs||(this.hdrs=pn.fromRecord(this.info.headers||{})),this.hdrs}get options(){return this.info.options}get bucket(){return this.info.bucket}get chunks(){return this.info.chunks}get deleted(){var e;return(e=this.info.deleted)!=null?e:!1}get digest(){return this.info.digest}get mtime(){return this.info.mtime}get nuid(){return this.info.nuid}get size(){return this.info.size}}function lc(t){var n;const e={name:t.name,description:(n=t.description)!=null?n:"",options:t.options};if(t.headers){const s=t.headers;e.headers=s.toRecord()}return e}function ng(t){return{name:t.name,description:t.description,headers:t.headers,options:t.options}}function sg(){return new ReadableStream({pull(t){t.enqueue(new Uint8Array(0)),t.close()}})}class Ls{constructor(e,n,s){y(this,"jsm");y(this,"js");y(this,"stream");y(this,"name");this.name=e,this.jsm=n,this.js=s}_sanitizeName(e){if(!e||e.length===0)return{name:e,error:new Error("name cannot be empty")};e=e.replace(/[\. ]/g,"_");let n;try{cu(e)}catch(s){n=s}return{name:e,error:n}}async info(e){const n=await this.rawInfo(e);return n?new wi(n):null}async list(){const e=[],n=await this.watch({ignoreDeletes:!0,includeHistory:!0});for await(const s of n){if(s===null)break;e.push(s)}return Promise.resolve(e)}async rawInfo(e){const{name:n,error:s}=this._sanitizeName(e);if(s)return Promise.reject(s);const r=`$O.${this.name}.M.${n}`;try{const i=await this.jsm.streams.getMessage(this.stream,{last_by_subj:r});return Vt().decode(i.data)}catch(i){return i.code==="404"?null:Promise.reject(i)}}async seal(){let e=await this.jsm.streams.info(this.stream);return e===null?Promise.reject(new Error("object store not found")):(e.config.sealed=!0,e=await this.jsm.streams.update(this.stream,e.config),Promise.resolve(new cc(e)))}async status(e){const n=await this.jsm.streams.info(this.stream,e);return n===null?Promise.reject(new Error("object store not found")):Promise.resolve(new cc(n))}destroy(){return this.jsm.streams.delete(this.stream)}async put(e,n){var K,I;const r=((K=this.js.nc.info)==null?void 0:K.max_payload)||1024;e=e||{},e.options=e.options||{};let i=((I=e.options)==null?void 0:I.max_chunk_size)||128*1024;i=i>r?r:i,e.options.max_chunk_size=i;const o=await this.info(e.name),{name:a,error:c}=this._sanitizeName(e.name);if(c)return Promise.reject(c);const l=Po.next(),u=this._chunkSubject(l),d=this._metaSubject(a),m=Object.assign({bucket:this.name,nuid:l,size:0,chunks:0},lc(e)),b=We(),S=[],R=new Ys;try{const ee=n?n.getReader():null,se=new Xa;for(;;){const{done:ce,value:le}=ee?await ee.read():{done:!0,value:void 0};if(ce){if(R.size()>0){const oe=R.drain();se.update(oe),m.chunks++,m.size+=oe.length,m.mtime=new Date().toISOString();const H=se.digest("base64"),ae=H.length%3,fe=ae>0?"=".repeat(ae):"";m.digest=`sha-256=${H}${fe}`,m.deleted=!1,S.push(this.js.publish(u,oe))}const ye=cs();ye.set($t.RollupHdr,$t.RollupValueSubject),S.push(this.js.publish(d,Vt().encode(m),{headers:ye})),o&&S.push(this.jsm.streams.purge(this.stream,{filter:`$O.${this.name}.C.${o.nuid}`})),await Promise.all(S),b.resolve(new wi(m));break}if(le)for(R.fill(le);R.size()>i;){m.chunks++,m.size+=i;const ye=R.drain(e.options.max_chunk_size);se.update(ye),S.push(this.js.publish(u,ye))}}}catch(ee){await this.jsm.streams.purge(this.stream,{filter:u}),b.reject(ee)}return b}async get(e){const n=await this.rawInfo(e);if(n===null)return Promise.resolve(null);if(n.options&&n.options.link){const u=n.options.link.name||"";if(u==="")throw new Error("link is a bucket");return(await Ls.create(this.js,n.options.link.bucket)).get(u)}const s=We(),r={info:new wi(n),error:s};if(n.size===0)return r.data=sg(),s.resolve(null),Promise.resolve(r);let i;const o=mn();o.orderedConsumer();const a=new Xa,c=`$O.${this.name}.C.${n.nuid}`,l=await this.js.subscribe(c,o);return(async()=>{for await(const u of l)if(u.data.length>0&&(a.update(u.data),i.enqueue(u.data)),u.info.pending===0){const d=a.digest("base64"),m=d.length%3,b=m>0?"=".repeat(m):"",S=`sha-256=${d}${b}`;S!==n.digest?i.error(new Error(`received a corrupt object, digests do not match received: ${n.digest} calculated ${S}`)):i.close(),l.unsubscribe()}})().then(()=>{s.resolve()}).catch(u=>{i.error(u),s.reject(u)}),r.data=new ReadableStream({start(u){i=u},cancel(){l.unsubscribe()}}),r}linkStore(e,n){if(!(n instanceof Ls))return Promise.reject("bucket required");const s=n,{name:r,error:i}=this._sanitizeName(e);if(i)return Promise.reject(i);const o={name:r,options:{link:{bucket:s.name}}};return this.put(o,null)}async link(e,n){if(n.deleted)return Promise.reject(new Error("object is deleted"));const{name:s,error:r}=this._sanitizeName(e);if(r)return Promise.reject(r);if(this.name===n.bucket){const a=Object.assign({},ng(n));a.name=s;try{return await this.update(n.name,a),await this.info(s)}catch(c){return Promise.reject(c)}}const i={bucket:n.bucket,name:n.name},o={name:s,options:{link:i}};return this.put(o,null)}async delete(e){const n=await this.rawInfo(e);if(n===null)return Promise.resolve({purged:0,success:!1});n.deleted=!0,n.size=0,n.chunks=0,n.digest="";const s=Vt(),r=cs();return r.set($t.RollupHdr,$t.RollupValueSubject),await this.js.publish(this._metaSubject(n.name),s.encode(n),{headers:r}),this.jsm.streams.purge(this.stream,{filter:this._chunkSubject(n.nuid)})}async update(e,n={}){var c;const s=await this.rawInfo(e);if(s===null)return Promise.reject(new Error("object not found"));n.name=(c=n.name)!=null?c:s.name;const{name:r,error:i}=this._sanitizeName(n.name);if(i)return Promise.reject(i);n.name=r;const o=Object.assign({},s,lc(n)),a=Vt();return this.js.publish(this._metaSubject(o.name),a.encode(o))}async watch(e={}){var c,l;e.includeHistory=(c=e.includeHistory)!=null?c:!1,e.ignoreDeletes=(l=e.ignoreDeletes)!=null?l:!1;let n=!1;const s=new Nt,r=this._metaSubjectAll();try{await this.jsm.streams.getMessage(this.stream,{last_by_subj:r})}catch(u){u.code==="404"?(s.push(null),n=!0):s.stop(u)}const i=Vt(),o=mn();o.orderedConsumer(),e.includeHistory?o.deliverLastPerSubject():(n=!0,o.deliverNew()),o.callback((u,d)=>{var m;if(u){s.stop(u);return}if(d!==null){const b=i.decode(d.data);b.deleted&&e.ignoreDeletes===!0||s.push(b),((m=d.info)==null?void 0:m.pending)===0&&!n&&(n=!0,s.push(null))}});const a=await this.js.subscribe(r,o);return s._data=a,s.iterClosed.then(()=>{a.unsubscribe()}),a.closed.then(()=>{s.stop()}).catch(u=>{s.stop(u)}),s}_chunkSubject(e){return`$O.${this.name}.C.${e}`}_metaSubject(e){return`$O.${this.name}.M.${e}`}_metaSubjectAll(){return`$O.${this.name}.M.>`}async init(e={}){try{this.stream=eg(this.name)}catch(s){return Promise.reject(s)}const n=Object.assign({},e);n.name=this.stream,n.allow_rollup_hdrs=!0,n.discard=zs.New,n.subjects=[`$O.${this.name}.C.>`,`$O.${this.name}.M.>`],e.placement&&(n.placement=e.placement);try{await this.jsm.streams.info(n.name)}catch(s){s.message==="stream not found"&&await this.jsm.streams.add(n)}}static async create(e,n,s={}){var l;if(typeof((l=crypto==null?void 0:crypto.subtle)==null?void 0:l.digest)!="function")return Promise.reject(new Error("objectstore: unable to calculate hashes - crypto.subtle.digest with sha256 support is required"));const r=e;let i=r.opts||{};const o=i.timeout||2e3;i=Object.assign(i,{timeout:o});const a=await r.nc.jetstreamManager(i),c=new Ls(n,a,e);return await c.init(s),Promise.resolve(c)}}class rg{constructor(e){y(this,"js");this.js=e}kv(e,n={}){return n.bindOnly?Ks.bind(this.js,e):Ks.create(this.js,e,n)}os(e,n={}){return fg(this.js.nc),Ls.create(this.js,e,n)}}class $o extends Js{constructor(n,s){super(n,s);y(this,"api");this.api=new Xl(n,s)}get views(){return new rg(this)}async publish(n,s=Et,r){r=r||{},r.expect=r.expect||{};const i=(r==null?void 0:r.headers)||cs();r&&(r.msgID&&i.set(Rn.MsgIdHdr,r.msgID),r.expect.lastMsgID&&i.set(Rn.ExpectedLastMsgIdHdr,r.expect.lastMsgID),r.expect.streamName&&i.set(Rn.ExpectedStreamHdr,r.expect.streamName),r.expect.lastSequence&&i.set(Rn.ExpectedLastSeqHdr,`${r.expect.lastSequence}`),r.expect.lastSubjectSequence&&i.set(Rn.ExpectedLastSubjectSequenceHdr,`${r.expect.lastSubjectSequence}`));const o=r.timeout||this.timeout,a={};o&&(a.timeout=o),r&&(a.headers=i);let{retries:c,retry_delay:l}=r;c=c||1,l=l||250;let u;for(let m=0;m<c;m++)try{u=await this.nc.request(n,s,a);break}catch(b){if(b.code==="503"&&m+1<c)await Oo(l);else throw b}const d=this.parseJsResponse(u);if(d.stream==="")throw te.errorForCode(q.JetStreamInvalidAck);return d.duplicate=d.duplicate?d.duplicate:!1,d}async pull(n,s,r=0){ut(n),es(s);let i=this.timeout;r>i&&(i=r),r=r<0?0:at(r);const o={batch:1,no_wait:r===0,expires:r},a=await this.nc.request(`${this.prefix}.CONSUMER.MSG.NEXT.${n}.${s}`,this.jc.encode(o),{noMux:!0,timeout:i}),c=Gs(a);if(c)throw c;return Tr(a)}fetch(n,s,r={}){var K;ut(n),es(s);let i=null;const o=((K=r.max_bytes)!=null?K:0)>0;let a=0;const c=o?r.max_bytes:0,l={};if(l.batch=r.batch||1,c){const I=this.nc.protocol.features.get(Ws.JS_PULL_MAX_BYTES);if(!I.ok)throw new Error(`max_bytes is only supported on servers ${I.min} or better`);l.max_bytes=c}l.no_wait=r.no_wait||!1,l.no_wait&&l.expires&&(l.expires=0);const u=r.expires||0;if(u&&(l.expires=at(u)),u===0&&l.no_wait===!1)throw new Error("expires or no_wait is required");const d=new Nt,m=l.batch;let b=0;d.dispatchedFn=I=>{if(I){if(o&&(a+=I.data.length),b++,i&&I.info.pending===0)return;(d.getPending()===1&&I.info.pending===0||m===b||c>0&&a>=c)&&d.stop()}};const S=gn(this.nc.options.inboxPrefix),R=this.nc.subscribe(S,{max:r.batch,callback:(I,ee)=>{I===null&&(I=Gs(ee)),I!==null?(i&&(i.cancel(),i=null),Tp(I)?d.stop(uu(I)===null?void 0:I):d.stop(I)):(d.received++,d.push(Tr(ee)))}});return u&&(i=Vr(u),i.catch(()=>{R.isClosed()||(R.drain(),i=null)})),(async()=>{await R.closed,i!==null&&(i.cancel(),i=null),d.stop()})().catch(),this.nc.publish(`${this.prefix}.CONSUMER.MSG.NEXT.${n}.${s}`,this.jc.encode(l),{reply:S}),d}async pullSubscribe(n,s=mn()){const r=await this._processOptions(n,s);if(r.ordered)throw new Error("pull subscribers cannot be be ordered");if(r.attached||(r.config.filter_subject=n),r.config.deliver_subject)throw new Error("consumer info specifies deliver_subject - pull consumers cannot have deliver_subject set");const i=r.config.ack_policy;if(i===Ze.None||i===Ze.All)throw new Error("ack policy for pull consumers must be explicit");const o=this._buildTypedSubscriptionOpts(r),a=new og(this,r.deliver,o);a.info=r;try{await this._maybeCreateConsumer(r)}catch(c){throw a.unsubscribe(),c}return a}async subscribe(n,s=mn()){const r=await this._processOptions(n,s);if(!r.isBind&&!r.config.deliver_subject)throw new Error("push consumer requires deliver_subject");const i=this._buildTypedSubscriptionOpts(r),o=new lu(this,r.deliver,i);o.info=r;try{await this._maybeCreateConsumer(r)}catch(a){throw o.unsubscribe(),a}return o}async _processOptions(n,s=mn()){var i,o;const r=Ja(s)?s.getOpts():s;if(r.isBind=Ja(s)?s.isBind:!1,r.flow_control={heartbeat_count:0,fc_count:0,consumer_restarts:0},r.ordered){if(r.ordered_consumer_sequence={stream_seq:0,delivery_seq:0},r.config.ack_policy!==Ze.NotSet&&r.config.ack_policy!==Ze.None)throw new te("ordered consumer: ack_policy can only be set to 'none'",q.ApiError);if(r.config.durable_name&&r.config.durable_name.length>0)throw new te("ordered consumer: durable_name cannot be set",q.ApiError);if(r.config.deliver_subject&&r.config.deliver_subject.length>0)throw new te("ordered consumer: deliver_subject cannot be set",q.ApiError);if(r.config.max_deliver!==void 0&&r.config.max_deliver>1)throw new te("ordered consumer: max_deliver cannot be set",q.ApiError);if(r.config.deliver_group&&r.config.deliver_group.length>0)throw new te("ordered consumer: deliver_group cannot be set",q.ApiError);r.config.deliver_subject=gn(this.nc.options.inboxPrefix),r.config.ack_policy=Ze.None,r.config.max_deliver=1,r.config.flow_control=!0,r.config.idle_heartbeat=r.config.idle_heartbeat||at(5e3),r.config.ack_wait=at(22*60*60*1e3)}if(r.config.ack_policy===Ze.NotSet&&(r.config.ack_policy=Ze.All),r.api=this,r.config=r.config||{},r.stream=r.stream?r.stream:await this.findStream(n),r.attached=!1,r.config.durable_name)try{const a=await this.api.info(r.stream,r.config.durable_name);if(a){if(a.config.filter_subject&&a.config.filter_subject!==n)throw new Error("subject does not match consumer");const c=(i=r.config.deliver_group)!=null?i:"";if(c===""&&a.push_bound===!0)throw new Error("duplicate subscription");const l=(o=a.config.deliver_group)!=null?o:"";if(c!==l)throw l===""?new Error("durable requires no queue group"):new Error(`durable requires queue group '${l}'`);r.last=a,r.config=a.config,r.attached=!0,r.config.durable_name||(r.name=a.name)}}catch(a){if(a.code!=="404")throw a}return r.attached||(r.config.filter_subject=n),r.deliver=r.config.deliver_subject||gn(this.nc.options.inboxPrefix),r}_buildTypedSubscriptionOpts(n){const s={};return s.adapter=ag(n.callbackFn===void 0),s.ingestionFilterFn=$o.ingestionFn(n.ordered),s.protocolFilterFn=(r,i=!1)=>{const o=r;return Vi(o.msg)?(i||o.msg.respond(),!1):!0},!n.mack&&n.config.ack_policy!==Ze.None&&(s.dispatchedFn=ug),n.callbackFn&&(s.callback=n.callbackFn),s.max=n.max||0,s.queue=n.queue,s}async _maybeCreateConsumer(n){if(n.attached)return;if(n.isBind)throw new Error(`unable to bind - durable consumer ${n.config.durable_name} doesn't exist in ${n.stream}`);n.config=Object.assign({deliver_policy:_t.All,ack_policy:Ze.Explicit,ack_wait:at(30*1e3),replay_policy:as.Instant},n.config);const s=await this.api.add(n.stream,n.config);n.name=s.name,n.config=s.config,n.last=s}static ingestionFn(n){return(s,r)=>{const i=r;if(!s)return{ingest:!1,protocol:!1};const o=s;if(Gp(o.msg)){const c=n?i._checkHbOrderConsumer(o.msg):!0;return n||i.info.flow_control.heartbeat_count++,{ingest:c,protocol:!0}}else if(Vi(o.msg))return i.info.flow_control.fc_count++,{ingest:!0,protocol:!0};return{ingest:n?i._checkOrderedConsumer(s):!0,protocol:!1}}}}class To{constructor(e){y(this,"options");y(this,"protocol");y(this,"draining");y(this,"listeners");this.draining=!1,this.options=Km(e),this.listeners=[]}static connect(e={}){return new Promise((n,s)=>{const r=new To(e);Nr.connect(r.options,r).then(i=>{r.protocol=i,async function(){for await(const o of i.status())r.listeners.forEach(a=>{a.push(o)})}(),n(r)}).catch(i=>{s(i)})})}closed(){return this.protocol.closed}async close(){await this.protocol.close()}_check(e,n,s){if(this.isClosed())throw te.errorForCode(q.ConnectionClosed);if(n&&this.isDraining()||s&&this.protocol.noMorePublishing)throw te.errorForCode(q.ConnectionDraining);if(e=e||"",e.length===0)throw te.errorForCode(q.BadSubject)}publish(e,n=Et,s){if(this._check(e,!1,!0),n&&!Bp(n))throw te.errorForCode(q.BadPayload);this.protocol.publish(e,n,s)}subscribe(e,n={}){this._check(e,!0,!1);const s=new ou(this.protocol,e,n);return this.protocol.subscribe(s),s}_resub(e,n,s){this._check(n,!0,!1);const r=e;r.max=s,s&&(r.max=s+r.received),this.protocol.resub(r,n)}requestMany(e,n=Et,s={maxWait:1e3,maxMessages:-1}){try{this._check(e,!0,!0)}catch(a){return Promise.reject(a)}if(s.strategy=s.strategy||Yt.Timer,s.maxWait=s.maxWait||1e3,s.maxWait<1)return Promise.reject(new te("timeout",q.InvalidOption));const r=new Nt;function i(){r.push(()=>{r.stop()})}function o(a,c){a||c===null?(a!==null&&r.push(a),i()):r.push(c)}if(s.noMux){const a=new Error().stack;let c=typeof s.maxMessages=="number"&&s.maxMessages>0?s.maxMessages:-1;const l=this.subscribe(gn(this.options.inboxPrefix),{callback:(b,S)=>{var R;if(S.data.length===0&&((R=S==null?void 0:S.headers)==null?void 0:R.status)===q.NoResponders&&(b=te.errorForCode(q.NoResponders)),b){b.stack+=`

${a}`,u(b);return}o(null,S),s.strategy===Yt.Count&&(c--,c===0&&u()),s.strategy===Yt.JitterTimer&&(m(),d=setTimeout(()=>{u()},300)),s.strategy===Yt.SentinelMsg&&S&&S.data.length===0&&u()}});l.closed.then(()=>{i()}).catch(b=>{r.push(b),i()});const u=b=>{b&&r.push(b),m(),l.drain().then(()=>{i()}).catch(S=>{i()})};r.iterClosed.then(()=>{m(),l==null||l.unsubscribe()}).catch(b=>{m(),l==null||l.unsubscribe()});try{this.publish(e,Et,{reply:l.getSubject()})}catch(b){u(b)}let d=setTimeout(()=>{u()},s.maxWait);const m=()=>{d&&clearTimeout(d)}}else{const a=s;a.callback=o,r.iterClosed.then(()=>{c.cancel()}).catch(l=>{c.cancel(l)});const c=new im(this.protocol.muxSubscriptions,e,a);this.protocol.request(c);try{this.publish(e,n,{reply:`${this.protocol.muxSubscriptions.baseInbox}${c.token}`,headers:s.headers})}catch(l){c.cancel(l)}}return Promise.resolve(r)}request(e,n=Et,s={timeout:1e3,noMux:!1}){try{this._check(e,!0,!0)}catch(r){return Promise.reject(r)}if(s.timeout=s.timeout||1e3,s.timeout<1)return Promise.reject(new te("timeout",q.InvalidOption));if(!s.noMux&&s.reply)return Promise.reject(new te("reply can only be used with noMux",q.InvalidOption));if(s.noMux){const r=s.reply?s.reply:gn(this.options.inboxPrefix),i=We(),o=new Error,a=this.subscribe(r,{max:1,timeout:s.timeout,callback:(c,l)=>{c?(c.code!==q.Timeout&&(c.stack+=`

${o.stack}`),i.reject(c)):(c=tu(l),c?(c.stack+=`

${o.stack}`,i.reject(c)):i.resolve(l))}});return a.requestSubject=e,this.protocol.publish(e,n,{reply:r,headers:s.headers}),i}else{const r=new eu(this.protocol.muxSubscriptions,e,s);this.protocol.request(r);try{this.publish(e,n,{reply:`${this.protocol.muxSubscriptions.baseInbox}${r.token}`,headers:s.headers})}catch(o){r.cancel(o)}const i=Promise.race([r.timer,r.deferred]);return i.catch(()=>{r.cancel()}),i}}flush(){return this.isClosed()?Promise.reject(te.errorForCode(q.ConnectionClosed)):this.protocol.flush()}drain(){return this.isClosed()?Promise.reject(te.errorForCode(q.ConnectionClosed)):this.isDraining()?Promise.reject(te.errorForCode(q.ConnectionDraining)):(this.draining=!0,this.protocol.drain())}isClosed(){return this.protocol.isClosed()}isDraining(){return this.draining}getServer(){const e=this.protocol.getServer();return e?e.listen:""}status(){const e=new Nt;return this.listeners.push(e),e}get info(){return this.protocol.isClosed()?void 0:this.protocol.info}stats(){return{inBytes:this.protocol.inBytes,outBytes:this.protocol.outBytes,inMsgs:this.protocol.inMsgs,outMsgs:this.protocol.outMsgs}}async jetstreamManager(e={}){const n=new Gm(this,e);try{await n.getAccountInfo()}catch(s){const r=s;throw r.code===q.NoResponders&&(r.code=q.JetStreamNotEnabled),r}return n}jetstream(e={}){return new $o(this,e)}getServerVersion(){const e=this.info;return e?ls(e.version):void 0}async rtt(){if(!this.protocol._closed&&!this.protocol.connected)throw te.errorForCode(q.Disconnect);const e=Date.now();return await this.flush(),Date.now()-e}}function ig(t,e){const{proto:n,tls_required:s,tls_available:r}=t;if((n===void 0||n<1)&&e.noEcho)throw new te("noEcho",q.ServerOptionNotAvailable);const i=s||r||!1;if(e.tls&&!i)throw new te("tls",q.ServerOptionNotAvailable)}class lu extends hm{constructor(n,s,r){super(n.nc,s,r);y(this,"js");this.js=n}set info(n){this.sub.info=n}get info(){return this.sub.info}_resetOrderedConsumer(n){if(this.info===null||this.sub.isClosed())return;const s=gn(this.js.nc.options.inboxPrefix);this.js.nc._resub(this.sub,s);const i=this.info;i.ordered_consumer_sequence.delivery_seq=0,i.flow_control.heartbeat_count=0,i.flow_control.fc_count=0,i.flow_control.consumer_restarts++,i.deliver=s,i.config.deliver_subject=s,i.config.deliver_policy=_t.StartSequence,i.config.opt_start_seq=n;const o=`${i.api.prefix}.CONSUMER.CREATE.${i.stream}`;this.js._request(o,this.info.config).catch(a=>{const c=new te(`unable to recreate ordered consumer ${i.stream} at seq ${n}`,q.RequestError,a);this.sub.callback(c,{})})}_checkHbOrderConsumer(n){const s=n.headers.get($t.ConsumerStalledHdr);s!==""&&this.js.nc.publish(s);const r=parseInt(n.headers.get($t.LastConsumerSeqHdr),10),i=this.info.ordered_consumer_sequence;return this.info.flow_control.heartbeat_count++,r!==i.delivery_seq&&this._resetOrderedConsumer(i.stream_seq+1),!1}_checkOrderedConsumer(n){const s=this.info.ordered_consumer_sequence,r=n.info.streamSequence,i=n.info.deliverySequence;return i!=s.delivery_seq+1?(this._resetOrderedConsumer(s.stream_seq+1),!1):(s.delivery_seq=i,s.stream_seq=r,!0)}async destroy(){this.isClosed()||await this.drain();const n=this.sub.info,s=n.config.durable_name||n.name,r=`${n.api.prefix}.CONSUMER.DELETE.${n.stream}.${s}`;await n.api._request(r)}async consumerInfo(){const n=this.sub.info,s=n.config.durable_name||n.name,r=`${n.api.prefix}.CONSUMER.INFO.${n.stream}.${s}`,i=await n.api._request(r);return n.last=i,i}}class og extends lu{constructor(e,n,s){super(e,n,s)}pull(e={batch:1}){var a,c;const{stream:n,config:s,name:r}=this.sub.info,i=(a=s.durable_name)!=null?a:r,o={};if(o.batch=e.batch||1,o.no_wait=e.no_wait||!1,((c=e.max_bytes)!=null?c:0)>0){const l=this.js.nc.protocol.features.get(Ws.JS_PULL_MAX_BYTES);if(!l.ok)throw new Error(`max_bytes is only supported on servers ${l.min} or better`);o.max_bytes=e.max_bytes}if(e.expires&&e.expires>0&&(o.expires=at(e.expires)),this.info){const l=this.info.api,u=`${l.prefix}.CONSUMER.MSG.NEXT.${n}.${i}`,d=this.sub.subject;l.nc.publish(u,l.jc.encode(o),{reply:d})}}}function ag(t){return t?lg:cg}function cg(t,e){return t?[t,null]:(t=Gs(e),t?[t,null]:[null,Tr(e)])}function lg(t,e){if(t)return[t,null];const n=Gs(e);return n!==null?[uu(n),null]:[null,Tr(e)]}function uu(t){if(t!==null)switch(t.code){case q.JetStream404NoMessages:case q.JetStream408RequestTimeout:return null;case q.JetStream409:return Wp(t)?t:null;default:return t}return null}function ug(t){t&&t.ack()}const fg=(()=>{let t=!1;return e=>{var n;if(!t){t=!0;const{lang:s}=(n=e==null?void 0:e.protocol)==null?void 0:n.transport;console.log(s?`\x1B[33m >> jetstream's materialized views object store functionality in ${s} is beta functionality \x1B[0m`:"\x1B[33m >> jetstream's materialized views object store functionality is beta functionality \x1B[0m")}}})(),hg="1.9.0",dg="nats.ws";class pg{constructor(){y(this,"version");y(this,"lang");y(this,"closeError");y(this,"connected");y(this,"done");y(this,"socket");y(this,"options");y(this,"socketClosed");y(this,"encrypted");y(this,"peeked");y(this,"yields");y(this,"signal");y(this,"closedNotification");this.version=hg,this.lang=dg,this.connected=!1,this.done=!1,this.socketClosed=!1,this.encrypted=!1,this.peeked=!1,this.yields=[],this.signal=We(),this.closedNotification=We()}async connect(e,n){const s=We();if(n.tls)return s.reject(new te("tls",q.InvalidOption)),s;this.options=n;const r=e.src;if(n.wsFactory){const{socket:i,encrypted:o}=await n.wsFactory(e.src,n);this.socket=i,this.encrypted=o}else this.encrypted=r.indexOf("wss://")===0,this.socket=new WebSocket(r);return this.socket.binaryType="arraybuffer",this.socket.onopen=()=>{},this.socket.onmessage=i=>{if(this.yields.push(new Uint8Array(i.data)),this.peeked){this.signal.resolve();return}const o=Ys.concat(...this.yields),a=Hp(o);if(a!==""){const c=Rm.exec(a);if(!c){n.debug&&console.error("!!!",ar(o)),s.reject(new Error("unexpected response from server"));return}try{const l=JSON.parse(c[1]);ig(l,this.options),this.peeked=!0,this.connected=!0,this.signal.resolve(),s.resolve()}catch(l){s.reject(l);return}}},this.socket.onclose=i=>{this.socketClosed=!0;let o;this.done||(i.wasClean||(o=new Error(i.reason)),this._closed(o))},this.socket.onerror=i=>{const o=i,a=new te(o.message,q.Unknown,new Error(o.error));s.reject(a)},s}disconnect(){this._closed(void 0,!0)}async _closed(e,n=!0){if(!!this.connected&&!this.done){if(this.closeError=e,!e)for(;!this.socketClosed&&this.socket.bufferedAmount>0;)console.log(this.socket.bufferedAmount),await Oo(100);this.done=!0;try{this.socket.close(e?1002:1e3,e?e.message:void 0)}catch{}n&&this.closedNotification.resolve(e)}}get isClosed(){return this.done}[Symbol.asyncIterator](){return this.iterate()}async*iterate(){for(;;){this.yields.length===0&&await this.signal;const e=this.yields;this.yields=[];for(let n=0;n<e.length;n++)this.options.debug&&console.info(`> ${ar(e[n])}`),yield e[n];if(this.done)break;this.yields.length===0&&(e.length=0,this.yields=e,this.signal=We())}}isEncrypted(){return this.connected&&this.encrypted}send(e){if(!this.done)try{this.socket.send(e.buffer),this.options.debug&&console.info(`< ${ar(e)}`);return}catch(n){this.options.debug&&console.error(`!!! ${ar(e)}: ${n}`)}}close(e){return this._closed(e,!1)}closed(){return this.closedNotification}}function mg(t){/^(.*:\/\/)(.*)/.test(t)||(t=`https://${t}`);let n=new URL(t);const s=n.protocol.toLowerCase();s!=="https:"&&s!=="http"&&(t=t.replace(/^(.*:\/\/)(.*)/gm,"$2"),n=new URL(`http://${t}`));let r,i;const o=n.hostname,a=n.pathname,c=n.search||"";switch(s){case"http:":case"ws:":case"nats:":i=n.port||"80",r="ws:";break;default:i=n.port||"443",r="wss:";break}return`${r}//${o}:${i}${a}${c}`}function gg(t={}){return pm({defaultPort:443,urlParseFn:mg,factory:()=>new pg}),To.connect(t)}const Vs=(t=>{let e,n=Math.floor(Number.MAX_SAFE_INTEGER*Math.random());return s=>(e=n,n=n+1,n>=Number.MAX_SAFE_INTEGER&&(n=0),""+e)})(),_g=t=>{const e=Array.from(t),n=e.length;var s=0;return{nextElem:r=>e[s++%n],currElem:r=>e[s%n]}},bg=t=>new Promise(e=>{setTimeout(e,t)}),yg=(t,e)=>{try{const n=new URL(t).protocol.slice(0,-1);return e.includes(n)}catch{}return!1},fu=(t,e,n)=>{if(typeof process>"u"||!Array.isArray(process.argv)||process.argv.length<2)return n;const s=process.argv.slice(2);let r;for(const i of s)i===`--${t}`?e==="boolean"&&(r=!0):i.startsWith(`--${t}=`)&&(r=i.split("=").length>1?i.split("=")[1]:r,r&&(e==="boolean"&&(r.toLowerCase()==="false"?r=!1:r.toLowerCase()==="true"&&(r=!0),typeof r!="boolean"&&(r=void 0)),e==="number"&&(r=parseInt(r),Number.isInteger(r)||(r=void 0))));return r=typeof r<"u"?r:n,r},Qi=["none","error","warn","info","verb","debug"].reduce((t,e,n)=>(t[e]=n,t),{}),wg="info";let Xi=fu("janode-log","string",wg);const Es=(t,e,...n)=>{if(Qi[t]>Qi[Xi])return;const r=`${new Date().toISOString()} - ${t.toUpperCase().padEnd(5," ")}:`;e(r,...n)},L={debug:(...t)=>Es("debug",console.debug,...t),verbose:(...t)=>Es("verb",console.debug,...t),info:(...t)=>Es("info",console.info,...t),warn:(...t)=>Es("warn",console.warn,...t),error:(...t)=>Es("error",console.error,...t),setLevel:(t="")=>(t=t.toLowerCase(),t==="verbose"&&(t="verb"),t==="warning"&&(t="warn"),typeof Qi[t]=="number"&&(Xi=t),Xi)},xg=10,vg=5;class Eg{constructor({address:e,retry_time_secs:n,max_retries:s,is_admin:r=!1}){if(!e)throw new Error('invalid configuration, missing parameter "address"');if(Array.isArray(e)&&e.length===0)throw new Error('invalid configuration, empty parameter "address"');this.address=Array.isArray(e)?e:[e];for(const i of this.address){if(typeof i!="object"||!i)throw new Error("invalid configuration, every element of address attribute must be an object");if(typeof i.url!="string"||!i.url)throw new Error("invalid configuration, missing server url attribute ")}this.retry_time_secs=typeof n=="number"?n:xg,this.max_retries=typeof s=="number"?s:vg,this.is_admin=r}getAddress(){return this.address}getRetryTimeSeconds(){return this.retry_time_secs}getMaxRetries(){return this.max_retries}isAdmin(){return this.is_admin}}var xi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qs={exports:{}},ts=typeof Reflect=="object"?Reflect:null,uc=ts&&typeof ts.apply=="function"?ts.apply:function(e,n,s){return Function.prototype.apply.call(e,n,s)},yr;ts&&typeof ts.ownKeys=="function"?yr=ts.ownKeys:Object.getOwnPropertySymbols?yr=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:yr=function(e){return Object.getOwnPropertyNames(e)};function Sg(t){console&&console.warn&&console.warn(t)}var hu=Number.isNaN||function(e){return e!==e};function Te(){Te.init.call(this)}Qs.exports=Te;Qs.exports.once=Pg;Te.EventEmitter=Te;Te.prototype._events=void 0;Te.prototype._eventsCount=0;Te.prototype._maxListeners=void 0;var fc=10;function Yr(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Te,"defaultMaxListeners",{enumerable:!0,get:function(){return fc},set:function(t){if(typeof t!="number"||t<0||hu(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");fc=t}});Te.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Te.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||hu(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function du(t){return t._maxListeners===void 0?Te.defaultMaxListeners:t._maxListeners}Te.prototype.getMaxListeners=function(){return du(this)};Te.prototype.emit=function(e){for(var n=[],s=1;s<arguments.length;s++)n.push(arguments[s]);var r=e==="error",i=this._events;if(i!==void 0)r=r&&i.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")uc(c,this,n);else for(var l=c.length,u=bu(c,l),s=0;s<l;++s)uc(u[s],this,n);return!0};function pu(t,e,n,s){var r,i,o;if(Yr(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=s?[n,o]:[o,n]:s?o.unshift(n):o.push(n),r=du(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,Sg(a)}return t}Te.prototype.addListener=function(e,n){return pu(this,e,n,!1)};Te.prototype.on=Te.prototype.addListener;Te.prototype.prependListener=function(e,n){return pu(this,e,n,!0)};function Ag(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function mu(t,e,n){var s={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=Ag.bind(s);return r.listener=n,s.wrapFn=r,r}Te.prototype.once=function(e,n){return Yr(n),this.on(e,mu(this,e,n)),this};Te.prototype.prependOnceListener=function(e,n){return Yr(n),this.prependListener(e,mu(this,e,n)),this};Te.prototype.removeListener=function(e,n){var s,r,i,o,a;if(Yr(n),r=this._events,r===void 0)return this;if(s=r[e],s===void 0)return this;if(s===n||s.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,s.listener||n));else if(typeof s!="function"){for(i=-1,o=s.length-1;o>=0;o--)if(s[o]===n||s[o].listener===n){a=s[o].listener,i=o;break}if(i<0)return this;i===0?s.shift():kg(s,i),s.length===1&&(r[e]=s[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Te.prototype.off=Te.prototype.removeListener;Te.prototype.removeAllListeners=function(e){var n,s,r;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[e]),this;if(arguments.length===0){var i=Object.keys(s),o;for(r=0;r<i.length;++r)o=i[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=s[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function gu(t,e,n){var s=t._events;if(s===void 0)return[];var r=s[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?Cg(r):bu(r,r.length)}Te.prototype.listeners=function(e){return gu(this,e,!0)};Te.prototype.rawListeners=function(e){return gu(this,e,!1)};Te.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):_u.call(t,e)};Te.prototype.listenerCount=_u;function _u(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Te.prototype.eventNames=function(){return this._eventsCount>0?yr(this._events):[]};function bu(t,e){for(var n=new Array(e),s=0;s<e;++s)n[s]=t[s];return n}function kg(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Cg(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function Pg(t,e){return new Promise(function(n,s){function r(o){t.removeListener(e,i),s(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}yu(t,e,i,{once:!0}),e!=="error"&&Og(t,r,{once:!0})})}function Og(t,e,n){typeof t.on=="function"&&yu(t,"error",e,n)}function yu(t,e,n,s){if(typeof t.on=="function")s.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(i){s.once&&t.removeEventListener(e,r),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}const Se={REQUEST:{SERVER_INFO:"info",CREATE_SESSION:"create",KEEPALIVE:"keepalive",DESTROY_SESSION:"destroy",ATTACH_PLUGIN:"attach",MESSAGE:"message",TRICKLE:"trickle",HANGUP:"hangup",DETACH_PLUGIN:"detach"},ACK:"ack",RESPONSE:{SUCCESS:"success",SERVER_INFO:"server_info",ERROR:"error"},EVENT:{EVENT:"event",DETACHED:"detached",HANGUP:"hangup",MEDIA:"media",TIMEOUT:"timeout",WEBRTCUP:"webrtcup",SLOWLINK:"slowlink",TRICKLE:"trickle"},ADMIN:{LIST_SESSIONS:"list_sessions",LIST_HANDLES:"list_handles",HANDLE_INFO:"handle_info",START_PCAP:"start_pcap",STOP_PCAP:"stop_pcap"}},Ye={EVENT:{CONNECTION_CLOSED:"connection_closed",SESSION_DESTROYED:"session_destroyed",HANDLE_DETACHED:"handle_detached",HANDLE_HANGUP:"handle_hangup",HANDLE_MEDIA:"handle_media",HANDLE_WEBRTCUP:"handle_webrtcup",HANDLE_SLOWLINK:"handle_slowlink",HANDLE_TRICKLE:"handle_trickle",CONNECTION_ERROR:"connection_error"}},No=t=>typeof t=="object"&&t?Object.values(Se.RESPONSE).includes(t.janus):!1,Ro=t=>typeof t=="object"&&t?t.janus===Se.RESPONSE.ERROR:!1,$g=t=>typeof t=="object"&&t?t.janus===Se.EVENT.TIMEOUT:!1,Tg=t=>typeof t=="object"&&t?t.janus===Se.ACK:!1;var Vn=null;typeof WebSocket<"u"?Vn=WebSocket:typeof MozWebSocket<"u"?Vn=MozWebSocket:typeof xi<"u"?Vn=xi.WebSocket||xi.MozWebSocket:typeof window<"u"?Vn=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Vn=self.WebSocket||self.MozWebSocket);var Ng=Vn;const Ge="[transport-ws.js]",Rg="janus-protocol",Ig="janus-admin-protocol",hc=10,Lg=5;class jg{constructor(e){this._connection=e,this._ws=null,this._attempts=0,this._opening=!1,this._opened=!1,this._closing=!1,this._closed=!1,this._ping_task=null,this.id=e.id,this.name=`[${this.id}]`}async _initWebSocket(){return L.info(`${Ge} ${this.name} trying connection with ${this._connection._address_iterator.currElem().url}`),new Promise((e,n)=>{const s=new Ng(this._connection._address_iterator.currElem().url,[this._connection._config.isAdmin()?Ig:Rg],{handshakeTimeout:5e3});s.addEventListener("open",r=>{L.info(`${Ge} ${this.name} websocket connected`),this._setPingTask(hc*1e3),e(this)},{once:!0}),s.addEventListener("close",({code:r,reason:i,wasClean:o})=>{L.info(`${Ge} ${this.name} websocket closed code=${r} reason=${i} clean=${o}`),this._unsetPingTask(),this._connection._signalClose(this._closing),this._closing=!1,this._closed=!0,typeof this._ws.removeAllListeners=="function"&&this._ws.removeAllListeners()},{once:!0}),s.addEventListener("error",r=>{L.error(`${Ge} ${this.name} websocket error (${r.message})`),n(r)},{once:!0}),s.addEventListener("message",({data:r})=>{L.debug(`${Ge} ${this.name} <ws RCV OK> ${r}`),this._connection._handleMessage(JSON.parse(r))}),this._ws=s})}async _attemptOpen(){this._opened=!1,this._closing=!1,this._closed=!1;try{const e=await this._initWebSocket();return this._opening=!1,this._opened=!0,e}catch(e){if(this._attempts++,this._attempts>=this._connection._config.getMaxRetries()){this._opening=!1;const n=new Error("attempt limit exceeded");throw L.error(`${Ge} ${this.name} connection failed, ${n.message}`),e}return L.error(`${Ge} ${this.name} connection failed, will try again in ${this._connection._config.getRetryTimeSeconds()} seconds...`),await bg(this._connection._config.getRetryTimeSeconds()*1e3),this._connection._address_iterator.nextElem(),this._attemptOpen()}}async open(){let e;if(this._opening?e=new Error("unable to open, websocket is already being opened"):this._opened?e=new Error("unable to open, websocket has already been opened"):this._closed&&(e=new Error("unable to open, websocket has already been closed")),e)throw L.error(`${Ge} ${this.name} ${e.message}`),e;return this._opening=!0,this._attempts=0,this._attemptOpen()}async _ping(){if(typeof this._ws.ping!="function"){L.warn("ws ping not supported");return}let e;const n=new Promise((r,i)=>{e=setTimeout(o=>i(new Error("timeout")),Lg*1e3)}),s=new Promise((r,i)=>{const o=""+Date.now();this._ws.ping(o,a=>{if(a)return L.error(`${Ge} ${this.name} websocket PING send error (${a.message})`),clearTimeout(e),i(a);L.verbose(`${Ge} ${this.name} websocket PING sent (${o})`)}),this._ws.once("pong",a=>(L.verbose(`${Ge} ${this.name} websocket PONG received (${a.toString()})`),clearTimeout(e),r()))});return Promise.race([s,n])}_setPingTask(e){if(typeof this._ws.ping!="function"){L.warn("ws ping not supported");return}this._ping_task||(this._ping_task=setInterval(async n=>{try{await this._ping()}catch({message:s}){L.error(`${Ge} ${this.name} websocket PING error (${s})`),this._ws.terminate()}},e),L.info(`${Ge} ${this.name} websocket ping task scheduled every ${hc} seconds`))}_unsetPingTask(){!this._ping_task||(clearInterval(this._ping_task),this._ping_task=null,L.info(`${Ge} ${this.name} websocket ping task disabled`))}getRemoteHostname(){return this._ws&&this._ws.url?new URL(this._ws.url).hostname:null}async close(){let e;if(this._opened?this._closing?e=new Error("unable to close, websocket is already being closed"):this._closed&&(e=new Error("unable to close, websocket has already been closed")):e=new Error("unable to close, websocket has never been opened"),e)throw L.error(`${Ge} ${this.name} ${e.message}`),e;return this._closing=!0,new Promise((n,s)=>{L.info(`${Ge} ${this.name} closing websocket`);try{this._ws.close(),this._ws.addEventListener("close",n,{once:!0})}catch(r){L.error(`${Ge} ${this.name} error while closing websocket (${r.message})`),this._closing=!1,s(r);return}})}async send(e){let n;if(this._opened?this._closed&&(n=new Error("unable to send request because connection has been closed")):n=new Error("unable to send request because connection has not been opened"),n)throw L.error(`${Ge} ${this.name} ${n.message}`),n;const s=JSON.stringify(e);return new Promise((r,i)=>{this._ws.send(s,{compress:!1,binary:!1},o=>{if(o){L.error(`${Ge} ${this.name} websocket send error (${o.message})`),i(o);return}L.debug(`${Ge} ${this.name} <ws SND OK> ${s}`),r()})})}}const rt="[handle.js]";class wu extends Qs.exports.EventEmitter{constructor(e,n){super(),this._tm=e._tm,this._detaching=!1,this._detached=!1,this.session=e,this.id=n,this.name=`[${this.id}]`,this._sessionDestroyedListener=this._signalDetach.bind(this),this.session.once(Ye.EVENT.SESSION_DESTROYED,this._sessionDestroyedListener),this.on("error",s=>`${rt} ${this.name} catched unmanaged error ${s.message}`)}_signalDetach(){this._detached||(this._detaching=!1,this._detached=!0,this.session.removeListener(Ye.EVENT.SESSION_DESTROYED,this._sessionDestroyedListener),this._tm.closeAllTransactionsWithError(this,new Error("handle detached")),this.emit(Ye.EVENT.HANDLE_DETACHED,{id:this.id}),this.removeAllListeners())}_isTrickleTx(e){const n=this._tm.get(e);return n?n.request===Se.REQUEST.TRICKLE:!1}_isHangupTx(e){const n=this._tm.get(e);return n?n.request===Se.REQUEST.HANGUP:!1}_isDetachTx(e){const n=this._tm.get(e);return n?n.request===Se.REQUEST.DETACH_PLUGIN:!1}_handleMessage(e){const{transaction:n,janus:s}=e;if(n&&(L.verbose(`${rt} ${this.name} received ${s} for transaction ${n}`),this.ownsTransaction(n))){if(Tg(e)){this._isTrickleTx(n)&&this.closeTransactionWithSuccess(n,e);return}if(No(e)){if(Ro(e)){const i=new Error(`${e.error.code} ${e.error.reason}`);this.closeTransactionWithError(n,i);return}if(this._isHangupTx(n)){this.closeTransactionWithSuccess(n,e);return}if(this._isDetachTx(n)){this.closeTransactionWithSuccess(n,e);return}this.handleMessage(e)||L.verbose(`${rt} ${this.name} received response could not be handled by the plugin`),this.closeTransactionWithSuccess(n,e);return}}const r={};switch(s){case Se.EVENT.EVENT:{if(this.handleMessage(e))this.closeTransactionWithSuccess(n,e);else{L.warn(`${rt} ${this.name} received event could not be handled by the plugin`);const i=new Error("unmanaged event");this.closeTransactionWithError(n,i)}break}case Se.EVENT.DETACHED:{this._signalDetach();break}case Se.EVENT.HANGUP:{typeof e.reason<"u"&&(r.reason=e.reason),this.emit(Ye.EVENT.HANDLE_HANGUP,r);break}case Se.EVENT.MEDIA:{typeof e.type<"u"&&(r.type=e.type),typeof e.receiving<"u"&&(r.receiving=e.receiving),this.emit(Ye.EVENT.HANDLE_MEDIA,r);break}case Se.EVENT.WEBRTCUP:{this.emit(Ye.EVENT.HANDLE_WEBRTCUP,r);break}case Se.EVENT.SLOWLINK:{typeof e.uplink<"u"&&(r.uplink=e.uplink),typeof e.nacks<"u"&&(r.nacks=e.nacks),this.emit(Ye.EVENT.HANDLE_SLOWLINK,r);break}case Se.EVENT.TRICKLE:{const{completed:i,sdpMid:o,sdpMLineIndex:a,candidate:c}=e.candidate;i?r.completed=!0:(r.sdpMid=o,r.sdpMLineIndex=a,r.candidate=c),this.emit(Ye.EVENT.HANDLE_TRICKLE,r);break}default:L.error(`${rt} ${this.name} unknown janus event directed to the handle ${JSON.stringify(e)}`)}}_decorateRequest(e){e.transaction=e.transaction||Vs(),e.handle_id=e.handle_id||this.id}handleMessage(){return null}ownsTransaction(e){return this._tm.getTransactionOwner(e)===this}closeTransactionWithError(e,n){this._tm.closeTransactionWithError(e,this,n)}closeTransactionWithSuccess(e,n){this._tm.closeTransactionWithSuccess(e,this,n)}async sendRequest(e){if(typeof e!="object"||!e){const n=new Error("request must be an object");throw L.error(`${rt} ${this.name} ${n.message}`),n}if(this._detached){const n=new Error("unable to send request because handle has been detached");throw L.error(`${rt} ${this.name} ${n.message}`),n}return this._decorateRequest(e),new Promise((n,s)=>{this._tm.createTransaction(e.transaction,this,e.janus,n,s),this.session.sendRequest(e).catch(r=>{this.closeTransactionWithError(e.transaction,r)})})}async detach(){if(this._detaching){const n=new Error("detaching already in progress");throw L.verbose(`${rt} ${this.name} ${n.message}`),n}if(this._detached){const n=new Error("already detached");throw L.verbose(`${rt} ${this.name} ${n.message}`),n}L.info(`${rt} ${this.name} detaching handle`),this._detaching=!0;const e={janus:Se.REQUEST.DETACH_PLUGIN};try{await this.sendRequest(e),this._signalDetach();return}catch({message:n}){this._detaching=!1,L.error(`${rt} ${this.name} error while detaching (${n})`)}}async hangup(){const e={janus:Se.REQUEST.HANGUP};try{return this.sendRequest(e)}catch(n){throw L.error(`${rt} ${this.name} error while hanging up (${n.message})`),n}}async trickle(e){if(!e)return this.trickleComplete();if(typeof e!="object"){const s=new Error("invalid candidate object");throw L.error(`${rt} ${this.name} ${s.message}`),s}const n={janus:Se.REQUEST.TRICKLE};Array.isArray(e)?n.candidates=e:n.candidate=e;try{return this.sendRequest(n)}catch(s){throw L.error(`${rt} ${this.name} error on trickle (${s.message})`),s}}async trickleComplete(){return this.trickle({completed:!0})}async message(e,n){const s={janus:Se.REQUEST.MESSAGE,body:e};n&&(s.jsep=n);try{return this.sendRequest(s)}catch(r){throw L.error(`${rt} ${this.name} error on message (${r.message})`),r}}}const qe="[session.js]";class Mg extends Qs.exports.EventEmitter{constructor(e,n,s=30){super(),this._tm=e._tm,this._destroying=!1,this._destroyed=!1,this._handles=new Map,this._ka_task=null,this.connection=e,this.id=n,this.name=`[${this.id}]`,this._setKeepAlive(s*1e3),this._closedListener=this._signalDestroy.bind(this),this._errorListener=this._signalDestroy.bind(this),this.connection.once(Ye.EVENT.CONNECTION_CLOSED,this._closedListener),this.connection.once(Ye.EVENT.CONNECTION_ERROR,this._errorListener),this.on("error",r=>`${qe} ${this.name} catched unmanaged error ${r.message}`)}_signalDestroy(){this._destroyed||(this._destroying=!1,this._destroyed=!0,this._unsetKeepAlive(),this.connection.removeListener(Ye.EVENT.CONNECTION_CLOSED,this._closedListener),this.connection.removeListener(Ye.EVENT.CONNECTION_ERROR,this._errorListener),this._tm.closeAllTransactionsWithError(this,new Error("session destroyed")),this._handles.clear(),this.emit(Ye.EVENT.SESSION_DESTROYED,{id:this.id}),this.removeAllListeners())}async _sendKeepAlive(e){const n={janus:Se.REQUEST.KEEPALIVE};let s;const r=new Promise((o,a)=>{s=setTimeout(c=>a(new Error("timeout")),e)});L.verbose(`${qe} ${this.name} sending keep-alive (timeout=${e}ms)`);const i=this.sendRequest(n).then(o=>{L.verbose(`${qe} ${this.name} keep-alive OK`),clearTimeout(s)}).catch(o=>{throw L.error(`${qe} ${this.name} keep-alive error (${o.message})`),clearTimeout(s),o});return Promise.race([i,r])}_setKeepAlive(e){if(this._ka_task)return;const n=e/2;this._ka_task=setInterval(s=>{this._sendKeepAlive(n).catch(({message:r})=>{if(!this._destroyed){const i=new Error(`keep-alive failed (${r})`);L.error(`${qe} ${this.name} ${i.message}`)}this._signalDestroy()})},e),L.info(`${qe} ${this.name} session keep-alive task scheduled every ${e} milliseconds`)}_unsetKeepAlive(){!this._ka_task||(clearInterval(this._ka_task),this._ka_task=null,L.info(`${qe} ${this.name} session keep-alive task disabled`))}_isKeepaliveTx(e){const n=this._tm.get(e);return n?n.request===Se.REQUEST.KEEPALIVE:!1}_handleMessage(e){const{sender:n,janus:s,transaction:r}=e;if(n){const i=this._handles.get(n);if(!i){if(s===Se.EVENT.HANDLE_DETACHED_PLUGIN){L.verbose(`${qe} ${this.name} handle ${n} not found for incoming message "${s}"`);return}L.verbose(`${qe} ${this.name} handle ${n} not found for incoming message "${s}"`);return}i._handleMessage(e);return}if(r){const i=this._tm.getTransactionOwner(r),o=i?this._handles.get(i.id):null;if(o&&o===i){o._handleMessage(e);return}}if(r){if(L.verbose(`${qe} ${this.name} received ${s} for transaction ${r}`),this._tm.getTransactionOwner(r)!==this){L.warn(`${qe} ${this.name} transaction ${r} not found for incoming message ${s}`);return}if(No(e)||this._isKeepaliveTx(r)){if(Ro(e)){const i=new Error(`${e.error.code} ${e.error.reason}`);this._tm.closeTransactionWithError(r,this,i);return}this._tm.closeTransactionWithSuccess(r,this,e)}return}if($g(e)){L.warn(`${qe} ${this.name} session timed out by Janus server!`),this._signalDestroy();return}L.error(`${qe} ${this.name} unexpected janus message directed to the session ${JSON.stringify(e)}`)}_decorateRequest(e){e.transaction=e.transaction||Vs(),e.session_id=e.session_id||this.id}async sendRequest(e){if(typeof e!="object"||!e){const n=new Error("request must be an object");throw L.error(`${qe} ${this.name} ${n.message}`),n}if(this._destroyed){const n=new Error("unable to send request because session has been destroyed");throw L.error(`${qe} ${this.name} ${n.message}`),n}return this._decorateRequest(e),new Promise((n,s)=>{this._tm.createTransaction(e.transaction,this,e.janus,n,s),this.connection.sendRequest(e).catch(r=>{this._tm.closeTransactionWithError(e.transaction,this,r)})})}async destroy(){if(L.info(`${qe} ${this.name} destroying session`),this._destroying){const n=new Error("destroying already in progress");throw L.warn(`${qe} ${this.name} ${n.message}`),n}if(this._destroyed){const n=new Error("session already destroyed");throw L.warn(`${qe} ${this.name} ${n.message}`),n}this._destroying=!0;const e={janus:Se.REQUEST.DESTROY_SESSION};try{await this.sendRequest(e),this._signalDestroy();return}catch(n){throw L.error(`${qe} ${this.name} error while destroying session (${n.message})`),this._destroying=!1,n}}async attach({id:e,Handle:n=wu}){if(L.info(`${qe} ${this.name} attaching new handle`),!e)throw new Error("plugin identifier null or not valid");const s={janus:Se.REQUEST.ATTACH_PLUGIN,plugin:e};try{const{data:r}=await this.sendRequest(s);this.setMaxListeners(this.getMaxListeners()+1);const i=new n(this,r.id);return this._handles.set(i.id,i),i.once(Ye.EVENT.HANDLE_DETACHED,({id:o})=>{this._handles.delete(o),this.setMaxListeners(this.getMaxListeners()-1)}),L.info(`${qe} ${this.name} handle attached (id=${i.id})`),i}catch(r){throw L.error(`${qe} ${this.name} handle attach error (${r.message})`),r}}}const Gn="[tmanager.js]",dc=fu("debug-tx","boolean",!1);class Ug{constructor(e=Vs()){this.transactions=new Map,this.id=e,L.info(`${Gn} [${this.id}] creating new transaction manager (debug=${dc})`),this._dbgtask=null}clear(){L.info(`${Gn} [${this.id}] clearing transaction manager`),clearInterval(this._dbgtask),this.transactions.clear()}has(e){return e?this.transactions.has(e):!1}get(e){return!e||!this.has(e)?null:this.transactions.get(e)}size(){return this.transactions.size}set(e,n){!e||!n||(this.transactions.set(e,n),dc&&!this._dbgtask&&(this._dbgtask=setInterval(s=>{L.info(`${Gn} [${this.id}] TM DEBUG size=${this.size()}`)},5e3)))}delete(e){!e||!this.has(e)||this.transactions.delete(e)}getTransactionOwner(e){if(!!e&&!!this.has(e))return this.get(e).owner}createTransaction(e,n,s,r,i){if(this.has(e))return;const o={id:e,owner:n,request:s,done:r,error:i};return this.set(e,o),L.verbose(`${Gn} [${o.owner.id}] created new transaction ${e}, request "${o.request}"`),o}closeTransactionWithError(e,n,s){const r=this.get(e);if(!!r&&r.owner===n)return this.delete(e),r.error(s),L.verbose(`${Gn} [${r.owner.id}] closed with error transaction ${e}, request "${r.request}"`),r}closeAllTransactionsWithError(e,n){for(const[s,r]of this.transactions)(!e||r.owner===e)&&this.closeTransactionWithError(r.id,r.owner,n)}closeTransactionWithSuccess(e,n,s){const r=this.get(e);if(!!r&&r.owner===n)return this.delete(e),r.done(s),L.verbose(`${Gn} [${r.owner.id}] closed with success transaction ${e}, request "${r.request}"`),r}}const Me="[connection.js]";class Dg extends Qs.exports.EventEmitter{constructor(e){super(),this._config=e,this._tm=new Ug,this._sessions=new Map,this._address_iterator=_g(this._config.getAddress()),this.id=parseInt(Vs()),this.name=`[${this.id}]`,this._transport={open:async n=>{throw new Error('transport does not implement the "open" function')},close:async n=>{throw new Error('transport does not implement the "close" function')},send:async n=>{throw new Error('transport does not implement the "send" function')},getRemoteHostname:n=>{throw new Error('transport does not implement the "getRemoteHostname" function')}};try{let n;yg(e.getAddress()[0].url,["ws","wss","ws+unix","wss+unix"])&&(n=new jg(this)),n&&(this._transport=n)}catch(n){L.error(`${Me} ${this.name} error while initializing transport (${n.message})`)}this.on("error",n=>`${Me} ${this.name} catched unmanaged error ${n.message}`)}_signalClose(e){if(this._tm.closeAllTransactionsWithError(null,new Error("connection closed")),this._tm.clear(),this._sessions.clear(),e)this.emit(Ye.EVENT.CONNECTION_CLOSED,{id:this.id});else{const n=new Error("unexpected disconnection");this.emit(Ye.EVENT.CONNECTION_ERROR,n)}this.removeAllListeners()}async open(){return await this._transport.open(),this}_handleMessage(e){const{session_id:n,transaction:s,janus:r}=e;if(n){const i=this._sessions.get(n);if(!i){L.warn(`${Me} ${this.name} session ${n} not found for incoming message ${r}`);return}try{i._handleMessage(e)}catch(o){L.error(`${Me} ${this.name} error while handling message (${o.message})`)}return}if(s){if(L.verbose(`${Me} ${this.name} received ${r} for transaction ${s}`),this._tm.getTransactionOwner(s)!==this){L.warn(`${Me} ${this.name} transaction ${s} not found for incoming messsage ${r}`);return}if(No(e)){if(Ro(e)){const i=new Error(`${e.error.code} ${e.error.reason}`);return this._tm.closeTransactionWithError(s,this,i)}this._tm.closeTransactionWithSuccess(s,this,e)}return}L.error(`${Me} ${this.name} unexpected janus message directed to the connection ${JSON.stringify(e)}`)}_decorateRequest(e){e.transaction=e.transaction||Vs(),this._address_iterator.currElem().apisecret&&(this._config.isAdmin()?e.admin_secret=e.admin_secret||this._address_iterator.currElem().apisecret:e.apisecret=e.apisecret||this._address_iterator.currElem().apisecret),this._address_iterator.currElem().token&&(e.token=this._address_iterator.currElem().token)}async close(){await this._transport.close()}async sendRequest(e){return this._decorateRequest(e),new Promise((n,s)=>{this._tm.createTransaction(e.transaction,this,e.janus,n,s),this._transport.send(e).catch(r=>{this._tm.closeTransactionWithError(e.transaction,this,r),s(r)})})}getRemoteHostname(){return this._transport.getRemoteHostname()}async create(e){L.info(`${Me} ${this.name} creating new session`);const n={janus:Se.REQUEST.CREATE_SESSION};try{const{data:{id:s}}=await this.sendRequest(n);this.setMaxListeners(this.getMaxListeners()+2);const r=new Mg(this,s,e);return this._sessions.set(r.id,r),r.once(Ye.EVENT.SESSION_DESTROYED,({id:i})=>{this._sessions.delete(i),this.setMaxListeners(this.getMaxListeners()-2)}),L.info(`${Me} ${this.name} session created (id=${s})`),r}catch(s){throw L.error(`${Me} ${this.name} session creation error (${s.message})`),s}}async getInfo(){L.info(`${Me} ${this.name} requesting server info`);const e={janus:Se.REQUEST.SERVER_INFO};return this.sendRequest(e)}async listSessions(){L.verbose(`${Me} ${this.name} requesting session list`);const e={janus:Se.ADMIN.LIST_SESSIONS};return this.sendRequest(e)}async listHandles(e){if(L.info(`${Me} ${this.name} requesting handle list`),!e){const s=new Error("session_id parameter not specified");throw L.error(`${Me} ${this.name} ${s.message}`),s}const n={janus:Se.ADMIN.LIST_HANDLES,session_id:e};return this.sendRequest(n)}async handleInfo(e,n){if(L.info(`${Me} ${this.name} requesting handle info`),!e){const r=new Error("session_id parameter not specified");throw L.error(`${Me} ${this.name} ${r.message}`),r}if(!n){const r=new Error("handle_id parameter not specified");throw L.error(`${Me} ${this.name} ${r.message}`),r}const s={janus:Se.ADMIN.HANDLE_INFO,session_id:e,handle_id:n};return this.sendRequest(s)}async startPcap(e,n,s,r,i){if(L.info(`${Me} ${this.name} requesting pcap start for handle ${n}`),!e){const a=new Error("session_id parameter not specified");throw L.error(`${Me} ${this.name} ${a.message}`),a}if(!n){const a=new Error("handle_id parameter not specified");throw L.error(`${Me} ${this.name} ${a.message}`),a}if(typeof s!="string"||typeof r!="string"){const a=new Error("invalid folder or filename specified");throw L.error(`${Me} ${this.name} ${a.message}`),a}const o={janus:Se.ADMIN.START_PCAP,session_id:e,handle_id:n,folder:s,filename:r};return typeof i=="number"&&i>0&&(o.truncate=i),this.sendRequest(o)}async stopPcap(e,n){if(L.info(`${Me} ${this.name} requesting pcap stop for handle ${n}`),!e){const r=new Error("session_id parameter not specified");throw L.error(`${Me} ${this.name} ${r.message}`),r}if(!n){const r=new Error("handle_id parameter not specified");throw L.error(`${Me} ${this.name} ${r.message}`),r}const s={janus:Se.ADMIN.STOP_PCAP,session_id:e,handle_id:n};return this.sendRequest(s)}}const hr="[janode.js]",{EVENT:Fg}=Ye,Bg=(t={},e=null)=>{L.info(`${hr} creating new connection`);const n=Array.isArray(t)?t:[t];let s=0;typeof e=="number"&&(s=e),typeof e=="string"&&(s=n.findIndex(({server_key:a})=>a===e)),e||L.verbose(`${hr} omitted server key, falling back to the first server in configuration`);const r=n[s];if(!r){const a=new Error(`server configuration not defined for server #${e||s}`);throw L.error(`${hr} ${a.message}`),a}const i=new Eg(r);return L.verbose(`${hr} creating connection with server configuration ${JSON.stringify(i)}`),new Dg(i).open()},an={connect:Bg,Logger:L,EVENT:Fg},qg="janus.plugin.streaming",Hg="list",zg="info",Gg="start",Wg="watch",Kg="stop",Vg="switch",Yg="pause",Jg="configure",pc="recording",Qg="enable",Xg="disable",Zg="create",e0="destroy",t0="start",n0="stop",Le={STATUS:"streaming_status",SWITCHED:"streaming_switched",CONFIGURED:"streaming_configured",LIST:"streaming_list",INFO:"streaming_info",CREATED:"streaming_created",DESTROYED:"streaming_destroyed",OK:"streaming_ok",ERROR:"streaming_error"};class s0 extends wu{constructor(e,n){super(e,n),this.mp=null}handleMessage(e){const{plugindata:n,jsep:s,transaction:r}=e;if(n&&n.data&&n.data.streaming){const i=n.data,{streaming:o,error:a,error_code:c}=i,l={event:null,data:{}};s&&(l.data.jsep=s);const u=this.ownsTransaction(r)===!1;switch(e._janode=l,o){case"ok":l.event=Le.OK;break;case"info":{l.event=Le.INFO,l.data=i.info;break}case"list":l.event=Le.LIST,l.data.list=i.list;break;case"created":l.event=Le.CREATED,l.data.name=i.created,l.data.id=i.stream?i.stream.id:null,l.data.description=i.stream?i.stream.description:null,l.data.audio_port=i.stream?i.stream.audio_port:null,l.data.audio_rtcp_port=i.stream?i.stream.audio_rtcp_port:null,l.data.video_port=i.stream?i.stream.video_port:null,l.data.video_rtcp_port=i.stream?i.stream.video_rtcp_port:null,l.data.data_port=i.stream?i.stream.data_port:null;break;case"destroyed":l.event=Le.DESTROYED,l.data.id=i.destroyed;break;case"event":if(a){l.event=Le.ERROR,l.data=new Error(`${c} ${a}`),this.closeTransactionWithError(r,l.data);break}if(typeof i.result<"u"){if(typeof i.result.status<"u"){l.event=Le.STATUS,l.data.status=i.result.status,l.data.status!=="preparing"&&(l.data.id=this.mp),l.data.status==="updating"&&(l.data.restart=!0);break}if(typeof i.result.switched<"u"){l.event=Le.SWITCHED,l.data.switched=i.result.switched,l.data.id=i.result.id;break}if(typeof i.result.event<"u"){if(i.result.event==="configured"){l.event=Le.CONFIGURED;break}break}break}break}if(l.event)return this.closeTransactionWithSuccess(r,e),u&&this.emit(l.event,l.data),l}return null}async watch({id:e,pin:n,audio:s,video:r,data:i,restart:o=!1}){const a={request:Wg,id:e};typeof n=="string"&&(a.pin=""+n),typeof s=="boolean"&&(a.offer_audio=s),typeof r=="boolean"&&(a.offer_video=r),typeof i=="boolean"&&(a.offer_data=i),typeof o=="boolean"&&(a.restart=o);const c=await this.message(a),{event:l,data:u}=c._janode||{};if(l===Le.STATUS&&(u.status==="preparing"||u.status==="updating"))return this.mp=e,u;throw new Error(`unexpected response to ${a.request} request`)}async start({jsep:e}){if(typeof e=="object"&&e&&e.type!=="answer"){const a=new Error("jsep must be an answer");return Promise.reject(a)}const n={request:Gg},s=await this.message(n,e),{event:r,data:i}=s._janode||{};if(r===Le.STATUS&&(i.status==="starting"||i.status==="started"))return i;throw new Error(`unexpected response to ${n.request} request`)}async pause(){const e={request:Yg},n=await this.message(e),{event:s,data:r}=n._janode||{};if(s===Le.STATUS&&r.status==="pausing")return r;throw new Error(`unexpected response to ${e.request} request`)}async stop(){const e={request:Kg},n=await this.message(e),{event:s,data:r}=n._janode||{};if(s===Le.STATUS&&r.status==="stopping")return r;throw new Error(`unexpected response to ${e.request} request`)}async switch({id:e}){const n={request:Vg,id:e},s=await this.message(n),{event:r,data:i}=s._janode||{};if(r===Le.SWITCHED&&i.switched==="ok")return this.mp=i.id,i;throw new Error(`unexpected response to ${n.request} request`)}async configure({audio:e,video:n,data:s,substream:r,temporal:i,fallback:o,spatial_layer:a,temporal_layer:c}){const l={request:Jg};typeof e=="boolean"&&(l.audio=e),typeof n=="boolean"&&(l.video=n),typeof s=="boolean"&&(l.data=s),typeof r=="number"&&(l.substream=r),typeof i=="number"&&(l.temporal=i),typeof o=="number"&&(l.fallback=o),typeof a=="number"&&(l.spatial_layer=a),typeof c=="number"&&(l.temporal_layer=c);const u=await this.message(l),{event:d,data:m}=u._janode||{};if(d===Le.CONFIGURED)return m;throw new Error(`unexpected response to ${l.request} request`)}async list(){const e={request:Hg},n=await this.message(e),{event:s,data:r}=n._janode||{};if(s===Le.LIST)return r;throw new Error(`unexpected response to ${e.request} request`)}async info({id:e,secret:n}){const s={request:zg,id:e};typeof n=="string"&&(s.secret=""+n);const r=await this.message(s),{event:i,data:o}=r._janode||{};if(i===Le.INFO)return o;throw new Error(`unexpected response to ${s.request} request`)}async startRecording({id:e,audio:n,video:s,data:r,secret:i}){const o={request:pc,action:t0,id:e};n&&(o.audio=n),s&&(o.video=s),r&&(o.data=r),typeof i=="string"&&(o.secret=""+i);const a=await this.message(o),{event:c,data:l}=a._janode||{};if(c===Le.OK)return l;throw new Error(`unexpected response to ${o.request} request`)}async stopRecording({id:e,audio:n=!0,video:s=!0,data:r=!0,secret:i}){const o={request:pc,action:n0,id:e,audio:n,video:s,data:r};typeof i=="string"&&(o.secret=""+i);const a=await this.message(o),{event:c,data:l}=a._janode||{};if(c===Le.OK)return l;throw new Error(`unexpected response to ${o.request} request`)}async enable({id:e,secret:n}){const s={request:Qg,id:e};typeof n=="string"&&(s.secret=n);const r=await this.message(s),{event:i,data:o}=r._janode||{};if(i===Le.OK)return o;throw new Error(`unexpected response to ${s.request} request`)}async disable({id:e,stop_recording:n=!0,secret:s}){const r={request:Xg,id:e,stop_recording:n};typeof s=="string"&&(r.secret=s);const i=await this.message(r),{event:o,data:a}=i._janode||{};if(o===Le.OK)return a;throw new Error(`unexpected response to ${r.request} request`)}async createRtpMountpoint({id:e=0,name:n,description:s,secret:r,pin:i,permanent:o=!1,is_private:a=!1,audio:c,video:l,data:u,threads:d,metadata:m}){const b={request:Zg,type:"rtp",id:e,permanent:o,is_private:a,audio:!1,video:!1,data:!1,collision:2e3};typeof n=="string"&&(b.name=n),typeof s=="string"&&(b.description=s),typeof r=="string"&&(b.secret=r),typeof i=="string"&&(b.pin=i),typeof c=="object"&&c&&(b.audio=!0,typeof c.port=="number"&&(b.audioport=c.port),typeof c.rtcpport=="number"&&(b.audiortcpport=c.rtcppport),typeof c.mcast=="string"&&(b.audiomcast=c.mcast),c.pt&&(b.audiopt=c.pt),c.rtpmap&&(b.audiortpmap=c.rtpmap),c.skew&&(b.audioskew=c.skew||!1)),typeof l=="object"&&l&&(b.video=!0,typeof l.port=="number"&&(b.videoport=l.port),typeof l.rtcpport=="number"&&(b.videortcpport=l.rtcpport),typeof l.mcast=="string"&&(b.videomcast=l.mcast),l.pt&&(b.videopt=l.pt),l.rtpmap&&(b.videortpmap=l.rtpmap),l.fmtp&&(b.videofmtp=l.fmtp),l.buffer&&(b.videobufferkf=l.buffer||!1),l.skew&&(b.videoskew=l.skew||!1)),typeof u=="object"&&u&&(b.data=!0,b.dataport=u.port||0,u.buffer&&(b.databuffermsg=u.buffer||!1)),typeof d=="number"&&d>0&&(b.threads=d),m&&(b.metadata=m);const S=await this.message(b),{event:R,data:K}=S._janode||{};if(R===Le.CREATED)return K;throw new Error(`unexpected response to ${b.request} request`)}async destroyMountpoint({id:e,secret:n}){const s={request:e0,id:e};typeof n=="string"&&(s.secret=n);const r=await this.message(s),{event:i,data:o}=r._janode||{};if(i===Le.DESTROYED)return o;throw new Error(`unexpected response to ${s.request} request`)}}const mc={id:qg,Handle:s0,EVENT:{STREAMING_STATUS:Le.STATUS,STREAMING_ERROR:Le.ERROR}};function An(t,e){return he(),Ae("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[X("path",{"fill-rule":"evenodd",d:"M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})])}function ks(t,e){console.error(e);const n=e.message||e.toString(),r={header:t,message:n,actions:[{color:"red",text:"Refresh",onClick:()=>{window.location.reload()}}],error:e};Io().pushAlert(r)}function r0(){const e=`ws://${window.location.hostname}:8888`;return console.log(`Connecting to NATS server: ${e}`),e}const vi=Al({id:"nats",state:()=>({natsConnection:void 0}),actions:{async connect(){if(this.natsConnection===void 0){const t=[r0()],e={servers:t,debug:!1};({VITE_PRINTNANNY_EDGE_API_URL:"http://localhost:8080",VITE_PRINTNANNY_EDGE_NATS_WS_PORT:"8888",VITE_PRINTNANNY_EDGE_JANUS_WS_PORT:"8188",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}).VITE_PRINTNANNY_DEBUG==!0&&(e.debug=!0);const n=await gg(e).catch(s=>ks("Failed to connect to NATS server",s));return n?(console.log(`Initialized NATs connection to ${t}`),this.$patch({natsConnection:n}),!0):!1}else return!0}}});function i0(){const e=`ws://${window.location.hostname}:8188`;return console.log(`Connecting to Janus signaling websocket: ${e}`),e}function Ss(t,e){return t.filter(n=>n===!0).length/t.length>=e}const o0=window.RTCPeerConnection.bind(window),Io=Al({id:"events",state:()=>({df:[],janusWsConnection:void 0,janusSession:void 0,janusPeerConnection:void 0,janusStreamingPluginHandle:void 0,status:Ct.ConnectionNotStarted,alerts:[],streamList:[],selectedStream:void 0,detectionAlerts:[{id:"Example: Calibration Alert",icon:An,color:"indigo",description:"If PrintNanny doesn't recognize your 3D printer, you'll see calibration recommendations."},{id:"Example: Failure Alert",icon:An,color:"red",description:"When a print job is failing, PrintNanny will notify you."}]}),getters:{meter_x(t){return t.df.map(e=>e.ts)},meter_y_nozzle_mean(t){return t.df.map(e=>e.nozzle__mean)},meter_y_nozzle_std:t=>t.df.map(e=>e.nozzle__std),meter_y_print_mean:t=>t.df.map(e=>e.print__mean),meter_y_print_std:t=>t.df.map(e=>e.print__std),meter_y_raft_mean:t=>t.df.map(e=>e.raft__mean),meter_y_raft_std:t=>t.df.map(e=>e.raft__std),meter_y_adhesion_mean:t=>t.df.map(e=>e.adhesion__mean),meter_y_adhesion_std:t=>t.df.map(e=>e.adhesion__std),meter_y_spaghetti_mean:t=>t.df.map(e=>e.spaghetti__mean),meter_y_spaghetti_std:t=>t.df.map(e=>e.spaghetti__std)},actions:{async connectJanus(){const t=i0(),e={is_admin:!1,address:{url:t}},n=await an.connect(e).catch(a=>ks("Janus websocket connection failed",a));console.log("Got janusWsConnection",n);const s=await n.create().catch(a=>ks("Failed to create Janus websocket session ",a)),r=await s.attach(mc).catch(a=>ks("Failed to create Janus streaming handle",a)),i=await r.list();console.log("Found streamlist",i);const o=await Promise.all(i.list.map(async a=>{const c=await r.info({id:a.id});return{description:c.description,enabled:c.enabled,id:c.id,media:c.media,metadata:JSON.parse(c.metadata),name:c.name,type:c.type,viewers:c.viewers}}));return console.log("Fetched detailed stream info",o),this.$patch({streamList:o,janusWsConnection:n,janusSession:s,janusStreamingPluginHandle:r}),r.once(an.EVENT.HANDLE_DETACHED,()=>{console.log(`${r} manager handle detached`)}),r.on(an.EVENT.HANDLE_WEBRTCUP,a=>console.log("webrtcup event")),r.on(an.EVENT.HANDLE_SLOWLINK,a=>{console.log("slowlink event",a)}),r.on(an.EVENT.HANDLE_HANGUP,a=>console.log("hangup event",a)),r.on(an.EVENT.HANDLE_DETACHED,a=>console.log("detached event",a)),n.on(an.EVENT.CONNECTION_CLOSED,()=>{console.log(`Connection with ${t} closed`)}),n.on(an.EVENT.CONNECTION_ERROR,({message:a})=>{console.log(`Connection with Janus error (${a})`)}),r.on(mc.EVENT.STREAMING_STATUS,a=>{console.log(`${r.name} streaming handle event status ${JSON.stringify(a)}`)}),o.length>0&&this.selectedStream==null&&(console.log("Setting selected stream to:",o[0]),this.$patch({selectedStream:o[0]})),!0},async connect(){const t=vi();this.$patch({status:Ct.ConnectionLoading});const e=await t.connect(),n=await this.connectJanus();e&&n?this.$patch({status:Ct.ConnectionReady}):this.$patch({status:Ct.ConnectionError})},async publishNatsRequest(t){const e=vi(),n=de(e.natsConnection),s=Vt(),r=_r.MediaCommand;console.log("Publishing NATS request:",t);const i=await(n==null?void 0:n.request(r,s.encode(t),{timeout:5e3}).catch(o=>ks("Command Failed",o)));console.log(`NATS response on subject: ${r}`,i)},getDetectionAlerts(t){if(t.length<10)return console.warn("Skipping getDetectionAlerts(), less than 10 datapoints available"),[];const e=Ss(t.map(o=>o.nozzle__count>0),.3),n=Ss(t.map(o=>o.print__count>0),.4),s=Ss(t.map(o=>o.raft__count>0),.3),r=Ss(t.map(o=>o.adhesion__count>0),.15),i=Ss(t.map(o=>o.spaghetti__count>0),.15);if(!e){const o={id:"nozzle",header:"Calibration: Nozzle",icon:An,color:"indigo",description:"Calibration needed to improve nozzle monitoring."};this.detectionAlerts.filter(c=>c.id===o.id).length===0&&this.detectionAlerts.push(o)}if(!n){const o={id:"print",header:"Calibration: Printer",icon:An,color:"indigo",description:"Calibration needed to improve print object detection."};this.detectionAlerts.filter(c=>c.id===o.id)||this.detectionAlerts.push(o)}if(!s){const o={id:"raft",header:"Calibration: Raft",icon:An,color:"indigo",description:"Calibration needed to improve raft detection."};this.detectionAlerts.filter(c=>c.id===o.id).length===0&&this.detectionAlerts.push(o)}if(r){const o={id:"adhesion",header:"Failure: Bed Adhesion",icon:An,color:"red",description:"Critical failures detected. Pausing 3D print job."};this.detectionAlerts.filter(c=>c.id===o.id).length===0&&this.detectionAlerts.push(o)}if(i){const o={id:"spaghetti",header:"Failure: Spaghetti",icon:An,color:"red",description:"Critical failures detected. Pausing 3D print job."};this.detectionAlerts.filter(c=>c.id===o.id).length===0&&this.detectionAlerts.push(o)}return this.detectionAlerts},async subscribeQcDataframes(){const t=vi();if(t.natsConnection===void 0){console.warn("subscribeQcDataframes called before NATS connection initialized");return}const e=de(t.natsConnection),n=Vt(),s=e.subscribe("pi.qc");(async r=>{console.log(`Subscribed to ${r.getSubject()} events...`);for await(const i of r){const o=n.decode(i.data);this.getDetectionAlerts(o),this.$patch({df:o}),console.log("Deserialized dataframe",o)}console.log(`subscription ${r.getSubject()} drained.`)})(s)},pushAlert(t){this.alerts.filter(n=>n.header==t.header).length===0&&this.alerts.push(t)},async trickle(t){const{candidate:e}=t;if(this.janusStreamingPluginHandle===void 0){console.warn("trickle() called with undefined janusStreamingPluginHandle");return}const n=de(this.janusStreamingPluginHandle);e===void 0?n.trickleComplete().catch(s=>{console.error("trickleComplete error",s)}):n.trickle(e).catch(s=>{console.error("trickle error",s)})},stopAllStreams(){const t=document.getElementById("janus-video");t==null&&console.warn("Failed to get #janus-video element"),t!=null&&t.srcObject&&(console.log("Stopping stream"),t.srcObject.getTracks().forEach(e=>e.stop()),t.srcObject=null)},async reset(){if(this.selectedStream!==void 0){const t={subject:_r.SystemctlCommand,janus_stream:de(this.selectedStream),command:zi.Stop,service:"printnanny-gst-pipeline.service"};await this.publishNatsRequest(t)}this.stopAllStreams(),this.$reset(),this.connect()},async closePC(){if(this.janusPeerConnection!==void 0){const t=de(this.janusPeerConnection);console.log("stopping PeerConnection"),t.close(),this.$patch({janusPeerConnection:void 0})}},async jsepAnswer(t){const e=new o0({iceServers:[{urls:"stun:stun.l.google.com:19302"}]});e.onnegotiationneeded=s=>console.log("pc.onnegotiationneeded",s),e.onicecandidate=s=>this.trickle({candidate:s.candidate}),e.oniceconnectionstatechange=()=>{console.log("pc.oniceconnectionstatechange => "+e.iceConnectionState),(e.iceConnectionState==="failed"||e.iceConnectionState==="closed")&&(console.warn("Stopping all streams and closing peer connection"),this.stopAllStreams(),this.closePC())},e.ontrack=s=>{console.log("pc.ontrack",s),s.track.onunmute=i=>{console.log("track.onunmute",i)},s.track.onmute=i=>{console.log("track.onmute",i)},s.track.onended=i=>{console.log("track.onended",i)};const r=s.streams[0];this.setVideoElement(r)},this.$patch({janusPeerConnection:e}),await e.setRemoteDescription(t),console.log("set remote sdp OK");const n=await e.createAnswer();return console.log("create answer OK"),e.setLocalDescription(n),console.log("set local sdp OK"),n},async startStream(){if(this.selectedStream==null){console.warn("startStream() was called, but no stream is selected");return}this.$patch({status:Ct.ConnectionStreamLoading,detectionAlerts:[]});const t={service:"printnanny-gst-pipeline.service",subject:_r.MediaCommand,janus_stream:de(this.selectedStream),command:zi.Start};await this.publishNatsRequest(t);const e=de(this.janusStreamingPluginHandle),n=de(this.selectedStream.media),s={id:this.selectedStream.id,media:n};console.log("Sending watchdata",s);const{jsep:r,_restart:i=!1}=await e.watch(s);console.log("Received offer",r);const o=await this.jsepAnswer(r),{status:a,id:c}=await e.start({jsep:o});console.log(`start ${c} response sent with status ${a}`)},async setVideoElement(t){if(!t)return;const e=document.getElementById("janus-video");e==null&&console.warn("Failed to get #janus-video element"),e.srcObject=t,console.log("Setting videoEl mediastream",e,t),e.play(),this.$patch({status:Ct.ConnectionStreamReady})}}}),a0=["aria-label"],c0=_h('<svg class="h-6 w-6 animate-spin stroke-gray-500" viewBox="0 0 256 256"><line x1="128" y1="32" x2="128" y2="64" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></line><line x1="195.9" y1="60.1" x2="173.3" y2="82.7" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></line><line x1="224" y1="128" x2="192" y2="128" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></line><line x1="195.9" y1="195.9" x2="173.3" y2="173.3" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></line><line x1="128" y1="224" x2="128" y2="192" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></line><line x1="60.1" y1="195.9" x2="82.7" y2="173.3" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></line><line x1="32" y1="128" x2="64" y2="128" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></line><line x1="60.1" y1="60.1" x2="82.7" y2="82.7" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></line></svg>',1),l0={class:"text-xs font-medium text-gray-500"},u0=ht({__name:"TextSpinner",props:{text:{type:String,default:"Loading..."}},setup(t){return(e,n)=>(he(),Ae("div",{"aria-label":t.text,role:"status",class:"flex items-center space-x-2"},[c0,X("span",l0,ft(t.text),1)],8,a0))}}),f0={class:"flex"},h0={key:1,class:"flex items-center space-x-3 font-medium text-gray-600"},d0=X("div",{class:"bg-emerald-500 flex-shrink-0 w-2.5 h-2.5 rounded-full","aria-hidden":"true"},null,-1),p0={class:"text-grey-600"},m0={key:2,class:"flex items-center space-x-3 font-medium text-gray-600"},g0=X("div",{class:"bg-red-500 flex-shrink-0 w-2.5 h-2.5 rounded-full","aria-hidden":"true"},null,-1),_0={class:"text-grey-600"},b0=ht({__name:"ConnectionStatus",setup(t){const e=window.location.hostname,n=Io();return n.connect(),(s,r)=>(he(),Ae("div",f0,[$e(Hr,{name:"fade",mode:"out-in",duration:{enter:800,leave:500}},{default:Mt(()=>[ve(n).status==ve(Ct).ConnectionNotStarted||ve(n).status==ve(Ct).ConnectionLoading?(he(),Bt(u0,{key:0})):ve(n).status==ve(Ct).ConnectionReady?(he(),Ae("div",h0,[d0,X("span",p0,"Connected to "+ft(ve(e)),1)])):ve(n).status==ve(Ct).ConnectionError?(he(),Ae("div",m0,[g0,X("span",_0,"Error connecting to "+ft(ve(e)),1)])):gl("",!0)]),_:1})]))}});const y0={class:"mt-3 flex space-x-7"},w0=["onClick"],x0=ht({__name:"AlertActionFooter",props:{actions:{type:Array,default:()=>[]}},setup(t){function e(n){return`text-${n}-600 hover:text-${n}-500 focus:ring-${n}-500 bg-${n}`}return(n,s)=>(he(),Ae("div",y0,[(he(!0),Ae(Fe,null,Ft(t.actions,(r,i)=>(he(),Ae("button",{key:i,type:"button",class:Mn([e(r.color),"bg-white rounded-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2"]),onClick:r.onClick},ft(r.text),11,w0))),128))]))}}),v0={class:"p-4"},E0={class:"flex items-start"},S0={class:"flex-shrink-0"},A0={class:"ml-3 w-0 flex-1 pt-0.5"},k0={class:"text-sm font-medium text-gray-900"},C0={class:"mt-1 text-sm text-gray-500"},P0={class:"ml-4 flex-shrink-0 flex"},O0=X("span",{class:"sr-only"},"Dismiss",-1),$0=ht({__name:"SimpleAlert",props:{message:{type:String,default:""},header:{type:String,default:""},bgColor:{type:String,required:!1,default:"bg-white"},actions:{type:Array,default:[]}},setup(t){const e=Jt(!0);return(n,s)=>(he(),Bt(Hr,{"enter-active-class":"transform ease-out duration-300 transition","enter-from-class":"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2","enter-to-class":"translate-y-0 opacity-100 sm:translate-x-0","leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:Mt(()=>[e.value?(he(),Ae("div",{key:0,class:Mn(["max-w-sm w-full shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden",t.bgColor])},[X("div",v0,[X("div",E0,[X("div",S0,[Jf(n.$slots,"icon")]),X("div",A0,[X("p",k0,ft(t.header),1),X("p",C0,ft(t.message),1),$e(x0,{"vf-if":"actions.length",actions:t.actions},null,8,["actions"])]),X("div",P0,[X("button",{type:"button",class:"bg-white rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:s[0]||(s[0]=r=>e.value=!1)},[O0,$e(ve($l),{class:"h-5 w-5","aria-hidden":"true"})])])])])],2)):gl("",!0)]),_:3}))}}),T0={"aria-live":"assertive",class:"fixed inset-0 flex items-end px-4 py-6 pointer-events-none sm:p-6 sm:items-start z-50"},N0={class:"w-full flex flex-col items-center space-y-4 sm:items-end"},R0=ht({__name:"StickyAlerts",setup(t){const e=Io();return(n,s)=>(he(),Ae("div",T0,[X("div",N0,[(he(!0),Ae(Fe,null,Ft(ve(e).alerts,(r,i)=>(he(),Bt($0,{key:i,header:r.header,message:r.message,actions:r.actions},Yf({_:2},[r.error?{name:"icon",fn:Mt(()=>[$e(ve(Sd),{class:"h-6 w-6 text-red-400"})]),key:"0"}:void 0]),1032,["header","message","actions"]))),128))])]))}}),I0="/assets/logo-text-rect-white.7ec7aa5e.svg",L0={class:"flex-auto bg-gray-900 justify-self-end","aria-labelledby":"footer-heading"},j0=X("h2",{id:"footer-heading",class:"sr-only"},"Footer",-1),M0={class:"max-w-md mx-auto pt-12 px-4 sm:max-w-7xl sm:px-6 lg:pt-16 lg:px-8"},U0={class:"xl:grid xl:grid-cols-3 xl:gap-8"},D0={class:"space-y-8 xl:col-span-1"},F0=X("img",{class:"h-10",src:I0,alt:"PrintNanny"},null,-1),B0=X("p",{class:"text-gray-500 text-base"}," The Personal Assistant for your 3D Printer. ",-1),q0={class:"flex space-x-6"},H0=["href"],z0={class:"sr-only"},G0={class:"mt-12 grid grid-cols-2 gap-8 xl:mt-0 xl:col-span-2"},W0={class:"md:grid md:grid-cols-2 md:gap-8"},K0=X("h3",{class:"text-sm font-semibold text-gray-400 tracking-wider uppercase"}," PrintNanny OS ",-1),V0={role:"list",class:"mt-4 space-y-4"},Y0=["href"],J0={class:"mt-12 md:mt-0"},Q0=X("h3",{class:"text-sm font-semibold text-gray-400 tracking-wider uppercase"}," Quick Start ",-1),X0={role:"list",class:"mt-4 space-y-4"},Z0=["href"],e_={class:"md:grid md:grid-cols-2 md:gap-8"},t_=X("h3",{class:"text-sm font-semibold text-gray-400 tracking-wider uppercase"}," Documentation ",-1),n_={role:"list",class:"mt-4 space-y-4"},s_=["href"],r_={class:"mt-12 md:mt-0"},i_=X("h3",{class:"text-sm font-semibold text-gray-400 tracking-wider uppercase"}," Legal ",-1),o_={role:"list",class:"mt-4 space-y-4"},a_={href:"item.href",class:"text-base text-gray-500 hover:text-white-900"},c_=X("div",{class:"mt-12 border-t border-gray-200 py-8"},[X("p",{class:"text-sm font-medium text-gray-400 flex"},[X("span",null,"\xA9 2022 Bitsy AI Labs, LLC. All rights reserved.")])],-1),l_=ht({__name:"FooterNav",setup(t){const e={printnannyos:[{name:"Roadmap & Milestones",href:"https://github.com/bitsy-ai/printnanny-os/milestones"},{name:"Search Open Issues",href:"https://github.com/bitsy-ai/printnanny-os/issues"},{name:"Create New Issue",href:"https://github.com/bitsy-ai/printnanny-os/issues/new/choose"}],intro:[{name:"Install Guide",href:"https://docs.printnanny.ai/docs/category/quick-start/"},{name:"Required Hardware",href:"https://docs.printnanny.ai/docs/quick-start/hardware/"}],documentation:[{name:"API Docs",href:{VITE_PRINTNANNY_EDGE_API_URL:"http://localhost:8080",VITE_PRINTNANNY_EDGE_NATS_WS_PORT:"8888",VITE_PRINTNANNY_EDGE_JANUS_WS_PORT:"8188",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}.VITE_PRINTNANNY_API_REDOCS_URL},{name:"CLI Docs",href:{VITE_PRINTNANNY_EDGE_API_URL:"http://localhost:8080",VITE_PRINTNANNY_EDGE_NATS_WS_PORT:"8888",VITE_PRINTNANNY_EDGE_JANUS_WS_PORT:"8188",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}.VITE_PRINTNANNY_CLI_DOCS_URL},{name:"Release History",href:"https://docs.printnanny.ai/docs/release-history/"},{name:"API Status",href:"/health"}],legal:[{name:"Privacy",href:"https://printnanny.ai/privacy"},{name:"Terms of Service",href:"https://printnanny.ai/terms"}],social:[{name:"Twitter",href:"https://twitter.com/grepLeigh",icon:ht({render:()=>un("svg",{fill:"currentColor",viewBox:"0 0 24 24"},[un("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})])})},{name:"GitHub",href:"https://github.com/bitsy-ai/printnanny-os",icon:ht({render:()=>un("svg",{fill:"currentColor",viewBox:"0 0 24 24"},[un("path",{"fill-rule":"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z","clip-rule":"evenodd"})])})}]};return(n,s)=>(he(),Ae("footer",L0,[j0,X("div",M0,[X("div",U0,[X("div",D0,[F0,B0,X("div",q0,[(he(!0),Ae(Fe,null,Ft(e.social,r=>(he(),Ae("a",{key:r.name,href:r.href,class:"text-gray-400 hover:text-gray-500"},[X("span",z0,ft(r.name),1),(he(),Bt(Kf(r.icon),{class:"h-6 w-6","aria-hidden":"true"}))],8,H0))),128))])]),X("div",G0,[X("div",W0,[X("div",null,[K0,X("ul",V0,[(he(!0),Ae(Fe,null,Ft(e.printnannyos,r=>(he(),Ae("li",{key:r.name},[X("a",{href:r.href,class:"text-base text-gray-500 hover:text-white"},ft(r.name),9,Y0)]))),128))])]),X("div",J0,[Q0,X("ul",X0,[(he(!0),Ae(Fe,null,Ft(e.intro,r=>(he(),Ae("li",{key:r.name},[X("a",{href:r.href,class:"text-base text-gray-500 hover:text-white"},ft(r.name),9,Z0)]))),128))])])]),X("div",e_,[X("div",null,[t_,X("ul",n_,[(he(!0),Ae(Fe,null,Ft(e.documentation,r=>(he(),Ae("li",{key:r.name},[X("a",{href:r.href,class:"text-base text-gray-500 hover:text-white"},ft(r.name),9,s_)]))),128))])]),X("div",r_,[i_,X("ul",o_,[(he(!0),Ae(Fe,null,Ft(e.legal,r=>(he(),Ae("li",{key:r.name},[X("a",a_,ft(r.name),1)]))),128))])])])])]),c_])]))}}),u_="modulepreload",f_=function(t){return"/"+t},gc={},_c=function(e,n,s){return!n||n.length===0?e():Promise.all(n.map(r=>{if(r=f_(r),r in gc)return;gc[r]=!0;const i=r.endsWith(".css"),o=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${o}`))return;const a=document.createElement("link");if(a.rel=i?"stylesheet":u_,i||(a.as="script",a.crossOrigin=""),a.href=r,document.head.appendChild(a),i)return new Promise((c,l)=>{a.addEventListener("load",c),a.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e())},xu=[{path:"/",name:"Home",component:()=>_c(()=>import("./HomeView.7688aeeb.js"),["assets/HomeView.7688aeeb.js","assets/HomeView.63834dee.css","assets/use-controllable.e6c8634c.js"])},{path:"/vision",name:"PrintNanny Vision",component:()=>_c(()=>import("./VideoView.d8174aae.js"),["assets/VideoView.d8174aae.js","assets/use-controllable.e6c8634c.js"])}],h_={class:"h-full"},d_={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},p_={class:"flex h-16 justify-between"},m_={class:"flex"},g_=X("div",{class:"flex flex-shrink-0 items-center"},[X("img",{class:"block h-8 w-auto lg:hidden",src:xa,alt:"PrintNanny"}),X("img",{class:"hidden h-8 w-auto lg:block",src:xa,alt:"PrintNanny"})],-1),__={class:"hidden sm:-my-px sm:ml-6 sm:flex sm:space-x-8"},b_=["href"],y_={class:"-mr-2 flex items-center sm:hidden"},w_=X("span",{class:"sr-only"},"Open main menu",-1),x_={class:"hidden sm:ml-6 sm:flex sm:items-center"},v_={class:"space-y-1 pt-2 pb-3"},E_=ht({__name:"App",setup(t){const e=kp(),n=[{name:"Update System",href:"/update/"},{name:"PrintNanny Cloud",href:"https://printnanny.ai"},{name:"Documentation",href:"https://docs.printnanny.ai/docs/category/quick-start/"}],s=et(()=>xu.map(r=>({name:r.name,href:r.path,current:e.currentRoute.value.name==r.name})));return(r,i)=>(he(),Ae("div",h_,[$e(R0),$e(ve(wd),{as:"nav",class:"bg-white shadow-sm"},{default:Mt(({open:o})=>[X("div",d_,[X("div",p_,[X("div",m_,[g_,X("div",__,[(he(!0),Ae(Fe,null,Ft(ve(s),a=>(he(),Bt(ve(Hi),{key:a.name,to:a.href,class:Mn([a.current?"border-indigo-500 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium"]),"aria-current":a.current?"page":void 0},{default:Mt(()=>[gr(ft(a.name),1)]),_:2},1032,["to","class","aria-current"]))),128)),(he(),Ae(Fe,null,Ft(n,a=>X("a",{key:a.name,href:a.href,class:"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",target:"_blank"},[gr(ft(a.name)+" ",1),$e(ve(vd),{class:"w-4 h-4 text-sm font-medium ml-1"})],8,b_)),64))])]),X("div",y_,[$e(ve(Sa),{class:"inline-flex items-center justify-center rounded-md bg-white p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},{default:Mt(()=>[w_,o?(he(),Bt(ve($l),{key:1,class:"block h-6 w-6","aria-hidden":"true"})):(he(),Bt(ve(Ed),{key:0,class:"block h-6 w-6","aria-hidden":"true"}))]),_:2},1024)]),X("div",x_,[$e(b0)])])]),$e(ve(xd),{class:"sm:hidden"},{default:Mt(()=>[X("div",v_,[(he(!0),Ae(Fe,null,Ft(ve(s),a=>(he(),Bt(ve(Hi),{to:a.href,key:a.name},{default:Mt(()=>[$e(ve(Sa),{class:Mn([a.current?"bg-indigo-50 border-indigo-500 text-indigo-700":"border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800","block pl-3 pr-4 py-2 border-l-4 text-base font-medium"]),"aria-current":a.current?"page":void 0},{default:Mt(()=>[gr(ft(a.name),1)]),_:2},1032,["class","aria-current"])]),_:2},1032,["to"]))),128))])]),_:1})]),_:1}),$e(ve(ql)),$e(l_)]))}}),S_=Sp({history:qd("/"),routes:xu});const Lo=td(E_);Lo.use(rd());Lo.use(S_);Lo.mount("#app");export{gr as A,Ft as B,Mn as C,ft as D,Al as E,Fe as F,vi as G,de as H,ks as I,Vt as J,Cp as K,gl as L,ze as M,_r as N,vd as O,Ao as P,Cs as Q,Di as R,Pp as S,Hr as T,Io as U,k_ as V,Ct as W,xi as X,Kf as Y,u0 as _,bo as a,Qt as b,et as c,ht as d,gd as e,kr as f,_d as g,md as h,bt as i,Wn as j,un as k,Cr as l,fd as m,po as n,_o as o,Ln as p,he as q,Jt as r,Ae as s,va as t,ve as u,X as v,Jc as w,Bt as x,Mt as y,$e as z};
